<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Items on ground after you die. (Delta)</title>
    <link>https://forum.moparisthebest.com/t/items-on-ground-after-you-die-delta/541307</link>
    <description>Yes, I know there are much better bases to use out there; don&#39;t remind me... The problem I&#39;m having is no where to be found, every topic ever made about it has no answers or people saying &quot;lol don&#39;t use delta&quot;. I&#39;ve been trying to fix this for a week now and it makes no sense to me... If anyone could help out i&#39;d greatly appreciate it!

So the problem is when a player dies their items don&#39;t appear on the ground when they go back to get them, I&#39;ve noticed that right before you die you can see your lost items on the ground just for a split second, but when you go back they&#39;re gone! Here&#39;s my youdied() method if anyone cares to read over it:

[SPOILER=youdied() method][CODE]	public void youdied() {

		if (playerHasItem(5509)) {
			deleteItem(5509, 1);
		}
		if (playerHasItem(5510)) {
			deleteItem(5510, 1);
		}
		if (playerHasItem(5512)) {
			deleteItem(5512, 1);
		}
		if (playerHasItem(5514)) {
			deleteItem(5514, 1);
		}
		if (playerHasItem(6570)) {
			keep6570 = true;
			deleteItem(6570, 1);
		}
		if (!isSkulled) {
			keepItemHandle();
		}
		if (ProtItem) {
			applyProtectItemProt();
		}
		for (int rr = 0; rr &lt; playerItems.length; rr++) {
			try {
				if (playerItems[rr] &gt; 0 &amp;&amp; playerItems[rr] &lt; 11999) { // createItem(currentX,currentY,playerItems[rr]-1);
					replaceBarrows();
					// server.checkPlayerCapes.checkDrop(this);
					ItemHandler.addItem(playerItems[rr] - 1, absX, absY,
							playerItemsN[rr], KillerId, false);
					createGroundItem(playerItems[rr] - 1, absX, absY,
							playerItemsN[i]);
					deleteItem(playerItems[rr] - 1,
							getItemSlot(playerItems[rr] - 1), playerItemsN[rr]);

				}
			} catch (Exception e) {
			}
		}
		for (int r = 0; r &lt; playerEquipment.length; r++) {
			try {
				int item = playerEquipment[r];
				if ((item &gt; 0) &amp;&amp; (item &lt; 11999)) {
					remove(item, r);
				}
			} catch (Exception e) {
				sendMessage(&quot;ERROR: Removing Equipment&quot;);
			}
		}
		if (playerHasItem(5509)) {
			deleteItem(5509, 1);
		}
		if (playerHasItem(5510)) {
			deleteItem(5510, 1);
		}
		if (playerHasItem(5512)) {
			deleteItem(5512, 1);
		}
		if (playerHasItem(5514)) {
			deleteItem(5514, 1);
		}
		if (playerHasItem(6570)) {
			keep6570 = true;
			deleteItem(6570, 1);
		}
		for (int rr = 0; rr &lt; playerItems.length; rr++) {
			try {
				if (playerItems[rr] &gt; 0 &amp;&amp; playerItems[rr] &lt; 11999) {
					// createItem(currentX,currentY,playerItems[rr]-1);
					replaceBarrows();
					// Server.checkPlayerCapes.checkDrop(this);
					ItemHandler.addItem(playerItems[rr] - 1, absX, absY,
							playerItemsN[rr], KillerId, false);
					createGroundItem(playerItems[rr] - 1, absX, absY,
							playerItemsN[i]);
					deleteItem(playerItems[rr] - 1,
							getItemSlot(playerItems[rr] - 1), playerItemsN[rr]);
				}
			} catch (Exception e) {
			}
		}
		try {

		} catch (Exception e) {
		}
		ItemHandler.addItem(526, absX, absY, 1, KillerId, false);
		try {
		} catch (Exception e) {
		}
		if (itemKept1 &gt; 0)
			addItem(itemKept1, 1);
		if (itemKept2 &gt; 0)
			addItem(itemKept2, 1);
		if (itemKept3 &gt; 0)
			addItem(itemKept3, 1);
		if (itemKept4 &gt; 0)
			addItem(itemKept4, 1);
		if (keep6570) {
			addItem(6570, 1);
			keep6570 = false;
		}

		resetKeepItem();
		hitDiff = 0;
		updateRequired = true;
		appearanceUpdateRequired = true;
	}[/CODE][/SPOILER]

If there&#39;s anything else I should post then please let me know, I really need to get some help with this because I&#39;m losing players over this dumb bug... Thank you for your time!</description>
    
    <lastBuildDate>Fri, 21 Mar 2014 19:44:03 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/items-on-ground-after-you-die-delta/541307.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Items on ground after you die. (Delta)</title>
        <dc:creator><![CDATA[@Shanks Shanks]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/shanks">@Shanks</a> wrote:</p>
          <blockquote>
              <p>Wow thank you for the help, but just so I understood correctly, you want me to replace “createGroundItem” with “ItemHandler.addItem()” in my youDied method? Because if so, that’s not working! Here’s what I’ve changed:</p>
<p>[code]	public void youdied() {</p>
<pre><code>	if (playerHasItem(5509)) {
		deleteItem(5509, 1);
	}
	if (playerHasItem(5510)) {
		deleteItem(5510, 1);
	}
	if (playerHasItem(5512)) {
		deleteItem(5512, 1);
	}
	if (playerHasItem(5514)) {
		deleteItem(5514, 1);
	}
	if (playerHasItem(6570)) {
		keep6570 = true;
		deleteItem(6570, 1);
	}
	if (!isSkulled) {
		keepItemHandle();
	}
	if (ProtItem) {
		applyProtectItemProt();
	}
	for (int rr = 0; rr &lt; playerItems.length; rr++) {
		try {
			if (playerItems[rr] &gt; 0 &amp;&amp; playerItems[rr] &lt; 11999) { // createItem(currentX,currentY,playerItems[rr]-1);
				replaceBarrows();
				// server.checkPlayerCapes.checkDrop(this);
				ItemHandler.addItem(playerItems[rr] - 1, absX, absY,
						playerItemsN[rr], KillerId, false);
				ItemHandler.addItem(playerItems[rr] - 1, absX, absY,
						playerItemsN[i], playerId, false);
				deleteItem(playerItems[rr] - 1,
						getItemSlot(playerItems[rr] - 1), playerItemsN[rr]);

			}
		} catch (Exception e) {
		}
	}
	for (int r = 0; r &lt; playerEquipment.length; r++) {
		try {
			int item = playerEquipment[r];
			if ((item &gt; 0) &amp;&amp; (item &lt; 11999)) {
				remove(item, r);
			}
		} catch (Exception e) {
			sendMessage("ERROR: Removing Equipment");
		}
	}
	if (playerHasItem(5509)) {
		deleteItem(5509, 1);
	}
	if (playerHasItem(5510)) {
		deleteItem(5510, 1);
	}
	if (playerHasItem(5512)) {
		deleteItem(5512, 1);
	}
	if (playerHasItem(5514)) {
		deleteItem(5514, 1);
	}
	if (playerHasItem(6570)) {
		keep6570 = true;
		deleteItem(6570, 1);
	}
	for (int rr = 0; rr &lt; playerItems.length; rr++) {
		try {
			if (playerItems[rr] &gt; 0 &amp;&amp; playerItems[rr] &lt; 11999) {
				// createItem(currentX,currentY,playerItems[rr]-1);
				replaceBarrows();
				// Server.checkPlayerCapes.checkDrop(this);
				ItemHandler.addItem(playerItems[rr] - 1, absX, absY,
						playerItemsN[rr], KillerId, false);
				ItemHandler.addItem(playerItems[rr] - 1, absX, absY,
						playerItemsN[i], playerId, false);
				deleteItem(playerItems[rr] - 1,
						getItemSlot(playerItems[rr] - 1), playerItemsN[rr]);
			}
		} catch (Exception e) {
		}
	}
	try {

	} catch (Exception e) {
	}
	ItemHandler.addItem(526, absX, absY, 1, KillerId, false);
	try {
	} catch (Exception e) {
	}
	if (itemKept1 &gt; 0)
		addItem(itemKept1, 1);
	if (itemKept2 &gt; 0)
		addItem(itemKept2, 1);
	if (itemKept3 &gt; 0)
		addItem(itemKept3, 1);
	if (itemKept4 &gt; 0)
		addItem(itemKept4, 1);
	if (keep6570) {
		addItem(6570, 1);
		keep6570 = false;
	}

	resetKeepItem();
	hitDiff = 0;
	updateRequired = true;
	appearanceUpdateRequired = true;
}[/code]
</code></pre>
<p>If I’m missing something, please show me?!</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/items-on-ground-after-you-die-delta/541307/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/items-on-ground-after-you-die-delta/541307/8</link>
        <pubDate>Fri, 21 Mar 2014 19:44:03 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-541307-8</guid>
        <source url="https://forum.moparisthebest.com/t/items-on-ground-after-you-die-delta/541307.rss">Items on ground after you die. (Delta)</source>
      </item>
      <item>
        <title>Items on ground after you die. (Delta)</title>
        <dc:creator><![CDATA[@Clawz_fury lare69]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/clawz_fury">@Clawz_fury</a> wrote:</p>
          <blockquote>
              <p>figured out the issue, you DO have a ground item system but it isn’t even being utilized to drop the items! you can blatantly see that in the “creategrounditem” method nothing is being added to a database or anything</p>
<p>use “ItemHandler.addItem(…);” to drop the items instead of “createGroundItem” and you’ll be good</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/items-on-ground-after-you-die-delta/541307/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/items-on-ground-after-you-die-delta/541307/7</link>
        <pubDate>Fri, 21 Mar 2014 13:51:09 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-541307-7</guid>
        <source url="https://forum.moparisthebest.com/t/items-on-ground-after-you-die-delta/541307.rss">Items on ground after you die. (Delta)</source>
      </item>
      <item>
        <title>Items on ground after you die. (Delta)</title>
        <dc:creator><![CDATA[@Shanks Shanks]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/shanks">@Shanks</a> wrote:</p>
          <blockquote>
              <p>[quote=“lare69, post:5, topic:541307”][quote author=runescape sucks link=topic=660181.msg4414327#msg4414327 date=1395109713]</p>
<p>[quote author=lare69 link=topic=660181.msg4414322#msg4414322 date=1395108841]or the problem could lie within the death method… which i cant see because you’ve posted it incorrectly (i only see one line)<br>
[/quote]</p>
<p>I hate to intrude, but he has posted his entire code for the death method. It’s just the crappy spoiler system that hides it.</p>
<p>[code=java]	public void youdied() {</p>
<pre><code>	if (playerHasItem(5509)) {
		deleteItem(5509, 1);
	}
	if (playerHasItem(5510)) {
		deleteItem(5510, 1);
	}
	if (playerHasItem(5512)) {
		deleteItem(5512, 1);
	}
	if (playerHasItem(5514)) {
		deleteItem(5514, 1);
	}
	if (playerHasItem(6570)) {
		keep6570 = true;
		deleteItem(6570, 1);
	}
	if (!isSkulled) {
		keepItemHandle();
	}
	if (ProtItem) {
		applyProtectItemProt();
	}
	for (int rr = 0; rr &lt; playerItems.length; rr++) {
		try {
			if (playerItems[rr] &gt; 0 &amp;&amp; playerItems[rr] &lt; 11999) { // createItem(currentX,currentY,playerItems[rr]-1);
				replaceBarrows();
				// server.checkPlayerCapes.checkDrop(this);
				ItemHandler.addItem(playerItems[rr] - 1, absX, absY,
						playerItemsN[rr], KillerId, false);
				createGroundItem(playerItems[rr] - 1, absX, absY,
						playerItemsN[i]);
				deleteItem(playerItems[rr] - 1,
						getItemSlot(playerItems[rr] - 1), playerItemsN[rr]);

			}
		} catch (Exception e) {
		}
	}
	for (int r = 0; r &lt; playerEquipment.length; r++) {
		try {
			int item = playerEquipment[r];
			if ((item &gt; 0) &amp;&amp; (item &lt; 11999)) {
				remove(item, r);
			}
		} catch (Exception e) {
			sendMessage("ERROR: Removing Equipment");
		}
	}
	if (playerHasItem(5509)) {
		deleteItem(5509, 1);
	}
	if (playerHasItem(5510)) {
		deleteItem(5510, 1);
	}
	if (playerHasItem(5512)) {
		deleteItem(5512, 1);
	}
	if (playerHasItem(5514)) {
		deleteItem(5514, 1);
	}
	if (playerHasItem(6570)) {
		keep6570 = true;
		deleteItem(6570, 1);
	}
	for (int rr = 0; rr &lt; playerItems.length; rr++) {
		try {
			if (playerItems[rr] &gt; 0 &amp;&amp; playerItems[rr] &lt; 11999) {
				// createItem(currentX,currentY,playerItems[rr]-1);
				replaceBarrows();
				// Server.checkPlayerCapes.checkDrop(this);
				ItemHandler.addItem(playerItems[rr] - 1, absX, absY,
						playerItemsN[rr], KillerId, false);
				createGroundItem(playerItems[rr] - 1, absX, absY,
						playerItemsN[i]);
				deleteItem(playerItems[rr] - 1,
						getItemSlot(playerItems[rr] - 1), playerItemsN[rr]);
			}
		} catch (Exception e) {
		}
	}
	try {

	} catch (Exception e) {
	}
	ItemHandler.addItem(526, absX, absY, 1, KillerId, false);
	try {
	} catch (Exception e) {
	}
	if (itemKept1 &gt; 0)
		addItem(itemKept1, 1);
	if (itemKept2 &gt; 0)
		addItem(itemKept2, 1);
	if (itemKept3 &gt; 0)
		addItem(itemKept3, 1);
	if (itemKept4 &gt; 0)
		addItem(itemKept4, 1);
	if (keep6570) {
		addItem(6570, 1);
		keep6570 = false;
	}

	resetKeepItem();
	hitDiff = 0;
	updateRequired = true;
	appearanceUpdateRequired = true;
}[/code]
</code></pre>
<p>[/quote]<br>
thank you! <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>I’m on my phone right now but from what I can see the method is dropping the item.</p>
<p>ummm send your “creategrounditem” and “itemhandler.additem” methods. I also need to see your client -&gt; server region packet[/quote]</p>
<p>Here’s my creategrounditem method:</p>
<p><code>	public void createGroundItem(int itemID, int itemX, int itemY,
			int itemAmount) {
		// Phate: creates item at absolute X and Y
		outStream.createFrame(85); // Phate: Spawn ground item
		outStream.writeByteC((itemY - 8 * mapRegionY));
		outStream.writeByteC((itemX - 8 * mapRegionX));
		outStream.createFrame(44);
		outStream.writeWordBigEndianA(itemID);
		outStream.writeWord(itemAmount);
		outStream.writeByte(0); // x(4 MSB) y(LSB) coords
		// System.out.println("CreateGroundItem "+itemID+" "+(itemX - 8 *
		// mapRegionX)+","+(itemY - 8 * mapRegionY)+" "+itemAmount);
	}</code></p>
<p>And here is my Itemhandler.addItem method:</p>
<p><code>	public static void addItem(int itemID, int itemX, int itemY,
			int itemAmount, int itemController, boolean itemStatic) {
		for (int i = 0; i &lt;= 5000; i++) { // Phate: Loop through all item
			// spots
			if (globalItemID[i] == 0) { // Phate: Found blank item spot
				globalItemController[i] = itemController;
				globalItemID[i] = itemID;
				globalItemX[i] = itemX;
				globalItemY[i] = itemY;
				globalItemAmount[i] = itemAmount;
				globalItemStatic[i] = itemStatic;
				globalItemTicks[i] = 0;
				if ((globalItemController[i] != -1)
						&amp;&amp; (globalItemController[i] != 0))
					spawnItem(globalItemID[i], globalItemX[i], globalItemY[i],
							globalItemAmount[i], globalItemController[i]);
				break;
			}
		}
	}</code></p>
<p>I think this is my region packet, please let me know if it is not!</p>
<p><code>		case 121:
			replaceDoors();
			Deleteobjects();
			NewObjects();
			hasntLoggedin = true;
			if (!isInWilderness(absX, absY, 1) &amp;&amp; !cWarsGame() &amp;&amp; !cWarsRoom()) {
				setInterfaceWalkable(-1);
				hasWildySign = false;
			}
			break;</code></p>
<p>Thank you in advance for the help!</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/items-on-ground-after-you-die-delta/541307/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/items-on-ground-after-you-die-delta/541307/6</link>
        <pubDate>Thu, 20 Mar 2014 23:03:00 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-541307-6</guid>
        <source url="https://forum.moparisthebest.com/t/items-on-ground-after-you-die-delta/541307.rss">Items on ground after you die. (Delta)</source>
      </item>
      <item>
        <title>Items on ground after you die. (Delta)</title>
        <dc:creator><![CDATA[@Clawz_fury lare69]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/clawz_fury">@Clawz_fury</a> wrote:</p>
          <blockquote>
              <p>[quote=“runescape sucks, post:3, topic:541307”][quote author=lare69 link=topic=660181.msg4414322#msg4414322 date=1395108841]or the problem could lie within the death method… which i cant see because you’ve posted it incorrectly (i only see one line)<br>
[/quote]</p>
<p>I hate to intrude, but he has posted his entire code for the death method. It’s just the crappy spoiler system that hides it.</p>
<p>[code=java]	public void youdied() {</p>
<pre><code>	if (playerHasItem(5509)) {
		deleteItem(5509, 1);
	}
	if (playerHasItem(5510)) {
		deleteItem(5510, 1);
	}
	if (playerHasItem(5512)) {
		deleteItem(5512, 1);
	}
	if (playerHasItem(5514)) {
		deleteItem(5514, 1);
	}
	if (playerHasItem(6570)) {
		keep6570 = true;
		deleteItem(6570, 1);
	}
	if (!isSkulled) {
		keepItemHandle();
	}
	if (ProtItem) {
		applyProtectItemProt();
	}
	for (int rr = 0; rr &lt; playerItems.length; rr++) {
		try {
			if (playerItems[rr] &gt; 0 &amp;&amp; playerItems[rr] &lt; 11999) { // createItem(currentX,currentY,playerItems[rr]-1);
				replaceBarrows();
				// server.checkPlayerCapes.checkDrop(this);
				ItemHandler.addItem(playerItems[rr] - 1, absX, absY,
						playerItemsN[rr], KillerId, false);
				createGroundItem(playerItems[rr] - 1, absX, absY,
						playerItemsN[i]);
				deleteItem(playerItems[rr] - 1,
						getItemSlot(playerItems[rr] - 1), playerItemsN[rr]);

			}
		} catch (Exception e) {
		}
	}
	for (int r = 0; r &lt; playerEquipment.length; r++) {
		try {
			int item = playerEquipment[r];
			if ((item &gt; 0) &amp;&amp; (item &lt; 11999)) {
				remove(item, r);
			}
		} catch (Exception e) {
			sendMessage("ERROR: Removing Equipment");
		}
	}
	if (playerHasItem(5509)) {
		deleteItem(5509, 1);
	}
	if (playerHasItem(5510)) {
		deleteItem(5510, 1);
	}
	if (playerHasItem(5512)) {
		deleteItem(5512, 1);
	}
	if (playerHasItem(5514)) {
		deleteItem(5514, 1);
	}
	if (playerHasItem(6570)) {
		keep6570 = true;
		deleteItem(6570, 1);
	}
	for (int rr = 0; rr &lt; playerItems.length; rr++) {
		try {
			if (playerItems[rr] &gt; 0 &amp;&amp; playerItems[rr] &lt; 11999) {
				// createItem(currentX,currentY,playerItems[rr]-1);
				replaceBarrows();
				// Server.checkPlayerCapes.checkDrop(this);
				ItemHandler.addItem(playerItems[rr] - 1, absX, absY,
						playerItemsN[rr], KillerId, false);
				createGroundItem(playerItems[rr] - 1, absX, absY,
						playerItemsN[i]);
				deleteItem(playerItems[rr] - 1,
						getItemSlot(playerItems[rr] - 1), playerItemsN[rr]);
			}
		} catch (Exception e) {
		}
	}
	try {

	} catch (Exception e) {
	}
	ItemHandler.addItem(526, absX, absY, 1, KillerId, false);
	try {
	} catch (Exception e) {
	}
	if (itemKept1 &gt; 0)
		addItem(itemKept1, 1);
	if (itemKept2 &gt; 0)
		addItem(itemKept2, 1);
	if (itemKept3 &gt; 0)
		addItem(itemKept3, 1);
	if (itemKept4 &gt; 0)
		addItem(itemKept4, 1);
	if (keep6570) {
		addItem(6570, 1);
		keep6570 = false;
	}

	resetKeepItem();
	hitDiff = 0;
	updateRequired = true;
	appearanceUpdateRequired = true;
}[/code][/quote]
</code></pre>
<p>thank you! <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>I’m on my phone right now but from what I can see the method is dropping the item.</p>
<p>ummm send your “creategrounditem” and “itemhandler.additem” methods. I also need to see your client -&gt; server region packet</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/items-on-ground-after-you-die-delta/541307/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/items-on-ground-after-you-die-delta/541307/5</link>
        <pubDate>Tue, 18 Mar 2014 15:51:28 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-541307-5</guid>
        <source url="https://forum.moparisthebest.com/t/items-on-ground-after-you-die-delta/541307.rss">Items on ground after you die. (Delta)</source>
      </item>
      <item>
        <title>Items on ground after you die. (Delta)</title>
        <dc:creator><![CDATA[@Shanks Shanks]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/shanks">@Shanks</a> wrote:</p>
          <blockquote>
              <p>[quote=“lare69, post:2, topic:541307”]its probably your ground item system, you see the item for a split second because the packet for sending the item is sent but when you leave the region (because you are moved to a different area where you respawn) and try and go back for your items they aren’t there</p>
<p>why? because you probably don’t have some sort of item database that keeps track of every single global item so it can resend the item packet when you enter the region! this also makes your server extremely easy to dupe on, read <a href="https://www.moparisthebest.com/smf/index.php/topic,657402.0.html#post_clickme5" data-bbcode="true" rel="nofollow noopener">this</a> little section for more clarification</p>
<p>or the problem could lie within the death method… which i cant see because you’ve posted it incorrectly (i only see one line)</p>
<p>tl;dr fix your ground item system, or fix the death method[/quote]</p>
<p>Thank you for the explanation, I understand it a bit more!</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/items-on-ground-after-you-die-delta/541307/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/items-on-ground-after-you-die-delta/541307/4</link>
        <pubDate>Tue, 18 Mar 2014 03:01:42 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-541307-4</guid>
        <source url="https://forum.moparisthebest.com/t/items-on-ground-after-you-die-delta/541307.rss">Items on ground after you die. (Delta)</source>
      </item>
      <item>
        <title>Items on ground after you die. (Delta)</title>
        <dc:creator><![CDATA[@runescape_sucks runescape sucks]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/runescape_sucks">@runescape_sucks</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="2" data-topic="541307">
<div class="title">
<div class="quote-controls"></div>
 lare69:</div>
<blockquote>
<p>or the problem could lie within the death method… which i cant see because you’ve posted it incorrectly (i only see one line)</p>
</blockquote>
</aside>
<p>I hate to intrude, but he has posted his entire code for the death method. It’s just the crappy spoiler system that hides it.</p>
<p>[code=java]	public void youdied() {</p>
<pre><code>	if (playerHasItem(5509)) {
		deleteItem(5509, 1);
	}
	if (playerHasItem(5510)) {
		deleteItem(5510, 1);
	}
	if (playerHasItem(5512)) {
		deleteItem(5512, 1);
	}
	if (playerHasItem(5514)) {
		deleteItem(5514, 1);
	}
	if (playerHasItem(6570)) {
		keep6570 = true;
		deleteItem(6570, 1);
	}
	if (!isSkulled) {
		keepItemHandle();
	}
	if (ProtItem) {
		applyProtectItemProt();
	}
	for (int rr = 0; rr &lt; playerItems.length; rr++) {
		try {
			if (playerItems[rr] &gt; 0 &amp;&amp; playerItems[rr] &lt; 11999) { // createItem(currentX,currentY,playerItems[rr]-1);
				replaceBarrows();
				// server.checkPlayerCapes.checkDrop(this);
				ItemHandler.addItem(playerItems[rr] - 1, absX, absY,
						playerItemsN[rr], KillerId, false);
				createGroundItem(playerItems[rr] - 1, absX, absY,
						playerItemsN[i]);
				deleteItem(playerItems[rr] - 1,
						getItemSlot(playerItems[rr] - 1), playerItemsN[rr]);

			}
		} catch (Exception e) {
		}
	}
	for (int r = 0; r &lt; playerEquipment.length; r++) {
		try {
			int item = playerEquipment[r];
			if ((item &gt; 0) &amp;&amp; (item &lt; 11999)) {
				remove(item, r);
			}
		} catch (Exception e) {
			sendMessage("ERROR: Removing Equipment");
		}
	}
	if (playerHasItem(5509)) {
		deleteItem(5509, 1);
	}
	if (playerHasItem(5510)) {
		deleteItem(5510, 1);
	}
	if (playerHasItem(5512)) {
		deleteItem(5512, 1);
	}
	if (playerHasItem(5514)) {
		deleteItem(5514, 1);
	}
	if (playerHasItem(6570)) {
		keep6570 = true;
		deleteItem(6570, 1);
	}
	for (int rr = 0; rr &lt; playerItems.length; rr++) {
		try {
			if (playerItems[rr] &gt; 0 &amp;&amp; playerItems[rr] &lt; 11999) {
				// createItem(currentX,currentY,playerItems[rr]-1);
				replaceBarrows();
				// Server.checkPlayerCapes.checkDrop(this);
				ItemHandler.addItem(playerItems[rr] - 1, absX, absY,
						playerItemsN[rr], KillerId, false);
				createGroundItem(playerItems[rr] - 1, absX, absY,
						playerItemsN[i]);
				deleteItem(playerItems[rr] - 1,
						getItemSlot(playerItems[rr] - 1), playerItemsN[rr]);
			}
		} catch (Exception e) {
		}
	}
	try {

	} catch (Exception e) {
	}
	ItemHandler.addItem(526, absX, absY, 1, KillerId, false);
	try {
	} catch (Exception e) {
	}
	if (itemKept1 &gt; 0)
		addItem(itemKept1, 1);
	if (itemKept2 &gt; 0)
		addItem(itemKept2, 1);
	if (itemKept3 &gt; 0)
		addItem(itemKept3, 1);
	if (itemKept4 &gt; 0)
		addItem(itemKept4, 1);
	if (keep6570) {
		addItem(6570, 1);
		keep6570 = false;
	}

	resetKeepItem();
	hitDiff = 0;
	updateRequired = true;
	appearanceUpdateRequired = true;
}[/code]</code></pre>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/items-on-ground-after-you-die-delta/541307/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/items-on-ground-after-you-die-delta/541307/3</link>
        <pubDate>Tue, 18 Mar 2014 02:28:33 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-541307-3</guid>
        <source url="https://forum.moparisthebest.com/t/items-on-ground-after-you-die-delta/541307.rss">Items on ground after you die. (Delta)</source>
      </item>
      <item>
        <title>Items on ground after you die. (Delta)</title>
        <dc:creator><![CDATA[@Clawz_fury lare69]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/clawz_fury">@Clawz_fury</a> wrote:</p>
          <blockquote>
              <p>its probably your ground item system, you see the item for a split second because the packet for sending the item is sent but when you leave the region (because you are moved to a different area where you respawn) and try and go back for your items they aren’t there</p>
<p>why? because you probably don’t have some sort of item database that keeps track of every single global item so it can resend the item packet when you enter the region! this also makes your server extremely easy to dupe on, read <a href="https://www.moparisthebest.com/smf/index.php/topic,657402.0.html#post_clickme5" data-bbcode="true" rel="nofollow noopener">this</a> little section for more clarification</p>
<p>or the problem could lie within the death method… which i cant see because you’ve posted it incorrectly (i only see one line)</p>
<p>tl;dr fix your ground item system, or fix the death method</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/items-on-ground-after-you-die-delta/541307/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/items-on-ground-after-you-die-delta/541307/2</link>
        <pubDate>Tue, 18 Mar 2014 02:14:01 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-541307-2</guid>
        <source url="https://forum.moparisthebest.com/t/items-on-ground-after-you-die-delta/541307.rss">Items on ground after you die. (Delta)</source>
      </item>
      <item>
        <title>Items on ground after you die. (Delta)</title>
        <dc:creator><![CDATA[@Shanks Shanks]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/shanks">@Shanks</a> wrote:</p>
          <blockquote>
              <p>Yes, I know there are much better bases to use out there; don’t remind me… The problem I’m having is no where to be found, every topic ever made about it has no answers or people saying “lol don’t use delta”. I’ve been trying to fix this for a week now and it makes no sense to me… If anyone could help out i’d greatly appreciate it!</p>
<p>So the problem is when a player dies their items don’t appear on the ground when they go back to get them, I’ve noticed that right before you die you can see your lost items on the ground just for a split second, but when you go back they’re gone! Here’s my youdied() method if anyone cares to read over it:</p>
<p>[SPOILER=youdied() method][CODE]	public void youdied() {</p>
<pre><code>	if (playerHasItem(5509)) {
		deleteItem(5509, 1);
	}
	if (playerHasItem(5510)) {
		deleteItem(5510, 1);
	}
	if (playerHasItem(5512)) {
		deleteItem(5512, 1);
	}
	if (playerHasItem(5514)) {
		deleteItem(5514, 1);
	}
	if (playerHasItem(6570)) {
		keep6570 = true;
		deleteItem(6570, 1);
	}
	if (!isSkulled) {
		keepItemHandle();
	}
	if (ProtItem) {
		applyProtectItemProt();
	}
	for (int rr = 0; rr &lt; playerItems.length; rr++) {
		try {
			if (playerItems[rr] &gt; 0 &amp;&amp; playerItems[rr] &lt; 11999) { // createItem(currentX,currentY,playerItems[rr]-1);
				replaceBarrows();
				// server.checkPlayerCapes.checkDrop(this);
				ItemHandler.addItem(playerItems[rr] - 1, absX, absY,
						playerItemsN[rr], KillerId, false);
				createGroundItem(playerItems[rr] - 1, absX, absY,
						playerItemsN[i]);
				deleteItem(playerItems[rr] - 1,
						getItemSlot(playerItems[rr] - 1), playerItemsN[rr]);

			}
		} catch (Exception e) {
		}
	}
	for (int r = 0; r &lt; playerEquipment.length; r++) {
		try {
			int item = playerEquipment[r];
			if ((item &gt; 0) &amp;&amp; (item &lt; 11999)) {
				remove(item, r);
			}
		} catch (Exception e) {
			sendMessage("ERROR: Removing Equipment");
		}
	}
	if (playerHasItem(5509)) {
		deleteItem(5509, 1);
	}
	if (playerHasItem(5510)) {
		deleteItem(5510, 1);
	}
	if (playerHasItem(5512)) {
		deleteItem(5512, 1);
	}
	if (playerHasItem(5514)) {
		deleteItem(5514, 1);
	}
	if (playerHasItem(6570)) {
		keep6570 = true;
		deleteItem(6570, 1);
	}
	for (int rr = 0; rr &lt; playerItems.length; rr++) {
		try {
			if (playerItems[rr] &gt; 0 &amp;&amp; playerItems[rr] &lt; 11999) {
				// createItem(currentX,currentY,playerItems[rr]-1);
				replaceBarrows();
				// Server.checkPlayerCapes.checkDrop(this);
				ItemHandler.addItem(playerItems[rr] - 1, absX, absY,
						playerItemsN[rr], KillerId, false);
				createGroundItem(playerItems[rr] - 1, absX, absY,
						playerItemsN[i]);
				deleteItem(playerItems[rr] - 1,
						getItemSlot(playerItems[rr] - 1), playerItemsN[rr]);
			}
		} catch (Exception e) {
		}
	}
	try {

	} catch (Exception e) {
	}
	ItemHandler.addItem(526, absX, absY, 1, KillerId, false);
	try {
	} catch (Exception e) {
	}
	if (itemKept1 &gt; 0)
		addItem(itemKept1, 1);
	if (itemKept2 &gt; 0)
		addItem(itemKept2, 1);
	if (itemKept3 &gt; 0)
		addItem(itemKept3, 1);
	if (itemKept4 &gt; 0)
		addItem(itemKept4, 1);
	if (keep6570) {
		addItem(6570, 1);
		keep6570 = false;
	}

	resetKeepItem();
	hitDiff = 0;
	updateRequired = true;
	appearanceUpdateRequired = true;
}[/CODE][/SPOILER]
</code></pre>
<p>If there’s anything else I should post then please let me know, I really need to get some help with this because I’m losing players over this dumb bug… Thank you for your time!</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/items-on-ground-after-you-die-delta/541307/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/items-on-ground-after-you-die-delta/541307/1</link>
        <pubDate>Tue, 18 Mar 2014 00:41:08 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-541307-1</guid>
        <source url="https://forum.moparisthebest.com/t/items-on-ground-after-you-die-delta/541307.rss">Items on ground after you die. (Delta)</source>
      </item>
  </channel>
</rss>
