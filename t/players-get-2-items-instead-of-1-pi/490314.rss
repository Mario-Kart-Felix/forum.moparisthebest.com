<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Players get 2 items instead of 1 [PI]</title>
    <link>https://forum.moparisthebest.com/t/players-get-2-items-instead-of-1-pi/490314</link>
    <description>Well.. I still can&#39;t figure this out.
My players get 2 items for the price of one, and I can&#39;t find where in my ShopAssistant that makes that happen (mostly because the code was horridly written, not by me.)
I believe it&#39;s in my buyItem method.

[code=java]
	public boolean buyItem(int itemID, int fromSlot, int amount) {
		if(c.myShopId == 7390 &amp;&amp; c.myShopClient != null &amp;&amp; !c.myShopClient.properLogout &amp;&amp; !c.playerName.equals(c.myShopClient.playerName)){
			int bought = 0;
			int price = c.myShopClient.playerShopP[fromSlot];
			if(amount &gt; c.myShopClient.playerShopN[fromSlot])
				amount = c.myShopClient.playerShopN[fromSlot];
			for(int x = 0; x &lt; amount; x++){
				if(c.getItems().playerHasItem(7478, c.myShopClient.playerShopP[fromSlot]) &amp;&amp; c.getItems().freeSlots() &gt; 0){
					c.getItems().deleteItem2(7478, c.myShopClient.playerShopP[fromSlot]);
					c.getItems().addItem(c.myShopClient.playerShop[fromSlot], 1);
					c.myShopClient.playerShopN[fromSlot]--;
					c.myShopClient.playerCollect += c.myShopClient.playerShopP[fromSlot];
					if(c.myShopClient.playerShopN[fromSlot] == 0){
						c.myShopClient.playerShop[fromSlot] = 0;
						c.myShopClient.playerShopP[fromSlot] = 0;
					}
					bought++;
				}else{
					c.sendMessage(&quot;Not enought space or money.&quot;);
					break;
				}
			}
			if(bought &gt; 0){
			resetShop(c.myShopClient);
			c.getItems().resetItems(3823);;
			c.sendMessage(&quot;You just bought &quot;+bought+&quot; &quot;+c.getItems().getItemName(itemID)+&quot; for &quot;+ (bought*price));
			c.myShopClient.sendMessage(c.playerName+&quot; has bought &quot;+bought+&quot; &quot;+c.getItems().getItemName(itemID)+&quot; from you!&quot;);
			c.myShopClient.sendMessage(&quot;You now have &quot;+c.myShopClient.playerCollect+&quot; DT&#39;s to collect (::collect)&quot;);
			}
			return false;
		}else if(c.myShopId == 7390 &amp;&amp; c.myShopClient != null &amp;&amp; !c.myShopClient.properLogout &amp;&amp; c.playerName.equals(c.myShopClient.playerName)){
			if(amount &gt; c.myShopClient.playerShopN[fromSlot])
				amount = c.myShopClient.playerShopN[fromSlot];
			for(int x = 0; x &lt; amount; x++){
				if(c.getItems().freeSlots() &gt; 0){
					c.getItems().addItem(c.myShopClient.playerShop[fromSlot], 1);
					c.myShopClient.playerShopN[fromSlot]--;
					if(c.myShopClient.playerShopN[fromSlot] == 0){
						c.myShopClient.playerShop[fromSlot] = 0;
						c.myShopClient.playerShopP[fromSlot] = 0;
						fixShop(c);
					}
				}else{
					c.sendMessage(&quot;Not enought space.&quot;);
					break;
				}
			}
			resetShop(c.myShopClient);
			c.getItems().resetItems(3823);
			return false;
		}else if(c.myShopId == 7390){
			return false;
		}
		if(System.currentTimeMillis() - buyDelay &lt; 1500) {
			return false;
		}

		if (c.myShopId == 14) {
			skillBuy(itemID);
			return false;

		} else if (c.myShopId == 15) {
			buyVoid(itemID);
			return false;		
		
		} else if (c.myShopId == 1) {
			buyVoid(itemID);
			return false;
                }
		if(itemID != itemID) {
			c.sendMessage(&quot;Don&#39;t dupe or you will be IP Banned&quot;);
			return false;
		}

		if(!shopSellsItem(itemID))
			return false;

		if (amount &gt; 0) {
			if (amount &gt; Server.shopHandler.ShopItemsN[c.myShopId][fromSlot]) {
				amount = Server.shopHandler.ShopItemsN[c.myShopId][fromSlot];
			}
			//double ShopValue;
			//double TotPrice;
			int TotPrice2 = 0;
			//int Overstock;
			int Slot = 0;
			int Slot1 = 0;//Tokkul
			int Slot2 = 0;//Pking Points
			int Slot3 = 0;//Donator Gold
			int Slot4 = 0;//Dragon Tokens

			if (c.myShopId == 18) {
				handleOtherShop(itemID);
				return false;
			}	
			if (c.myShopId == 73) {
				handleOtherShop(itemID);
				return false;
			}	
			if (c.myShopId == 74) {
				handleOtherShop(itemID);
				return false;
			}
			if (c.myShopId == 10) {
				handleOtherShop(itemID);
				return false;
			}
			if (c.myShopId == 11) {
				handleOtherShop(itemID);
				return false;
			}
			if (c.myShopId == 48) {
				handleOtherShop(itemID);
				return false;
			}
if (amount &gt; 1000) {
                TotPrice2 = (int) Math.floor(getItemShopValue(itemID, 0,
                        fromSlot)) * amount;
                Slot = c.getItems().getItemSlot(995);
                if (Slot == -1 &amp;&amp; TotPrice2 != 0) {
                    c.sendMessage(&quot;You don&#39;t have enough coins.&quot;);
                }
                if (TotPrice2 &lt;= 1) {
                    TotPrice2 = (int) Math.floor(getItemShopValue(itemID, 0,
                            fromSlot));
                }
                if (TotPrice2 &lt;= 0) {
                    if (c.getItems().freeSlots() &gt; 0) {
                        c.getItems().addItem(itemID, amount);
                        Server.shopHandler.ShopItemsN[c.myShopId][fromSlot] -= 1;
                        Server.shopHandler.ShopItemsDelay[c.myShopId][fromSlot] = 0;
                        if ((fromSlot + 1) &gt; Server.shopHandler.ShopItemsStandard[c.myShopId]) {
                            Server.shopHandler.ShopItems[c.myShopId][fromSlot] = 0;
                        }
                    } else {
                        c.sendMessage(&quot;Not enough space in your inventory.&quot;);
                    }
                } else if (c.playerItemsN[Slot] &gt;= TotPrice2) {
                    if (c.getItems().freeSlots() &gt; 0) {
                        c.getItems().deleteItem(995,
                                c.getItems().getItemSlot(995), TotPrice2);
                        c.getItems().addItem(itemID, amount);
                        Server.shopHandler.ShopItemsN[c.myShopId][fromSlot] -= amount;
                        Server.shopHandler.ShopItemsDelay[c.myShopId][fromSlot] = 0;
                        if ((fromSlot + 1) &gt; Server.shopHandler.ShopItemsStandard[c.myShopId]) {
                            Server.shopHandler.ShopItems[c.myShopId][fromSlot] = 0;
                        }
                    } else {
                        c.sendMessage(&quot;Not enough space in your inventory.&quot;);
                    }
                } else {
                    c.sendMessage(&quot;You don&#39;t have enough coins.&quot;);
                }
            } else {
	}				
			for (int i = amount; i &gt; 0; i--) {
				TotPrice2 = (int)Math.floor(getItemShopValue(itemID, 0, fromSlot));
				Slot = c.getItems().getItemSlot(995);
				Slot1 = c.getItems().getItemSlot(6529);
				Slot3 = c.getItems().getItemSlot(5555);
				Slot4 = c.getItems().getItemSlot(7478);
				if (Slot == -1 &amp;&amp; c.myShopId != 11 &amp;&amp; c.myShopId != 29 &amp;&amp; c.myShopId != 30 &amp;&amp; c.myShopId != 31 &amp;&amp; c.myShopId != 47) {
					c.sendMessage(&quot;You don&#39;t have enough coins.&quot;);
					break;
				}
				if (Slot == -1 &amp;&amp; c.MoneyCash == 0 &amp;&amp; c.myShopId != 11 &amp;&amp; c.myShopId != 29 &amp;&amp; c.myShopId != 30 &amp;&amp; c.myShopId != 31 &amp;&amp; c.myShopId != 47 &amp;&amp; c.myShopId != 100 &amp;&amp; c.myShopId != 99) {
					c.sendMessage(&quot;You don&#39;t have any coins.&quot;);
					break;
				}else if(c.myShopId != 11 &amp;&amp; c.myShopId != 29 || c.myShopId != 30 || c.myShopId != 31 || c.myShopId != 47 || c.myShopId != 99 || c.myShopId != 100) {
                                         if (c.MoneyCash &gt;=TotPrice2) {
					                     	if (c.getItems().freeSlots() &gt; 0) {
														buyDelay = System.currentTimeMillis();
							                                                        c.MoneyCash = c.MoneyCash - TotPrice2;
							                                                        				if(c.MoneyCash &gt; 99999 &amp;&amp; c.MoneyCash &lt;= 999999) {
												c.getPA().sendFrame126(&quot;&quot;+c.MoneyCash/1000+&quot;K&quot;, 8134);
												} else if(c.MoneyCash &gt; 999999 &amp;&amp; c.MoneyCash &lt;= 2147483647) {
													c.getPA().sendFrame126(&quot;&quot;+c.MoneyCash/1000000+&quot;M&quot;, 8134);
												} else {
														c.getPA().sendFrame126(&quot;&quot;+c.MoneyCash+&quot;&quot;, 8134); 
													}
												c.getPA().sendFrame126(&quot;&quot;+c.MoneyCash+&quot;&quot;, 8135); 
														c.getItems().addItem(itemID, 1);
														ShopHandler.ShopItemsN[c.myShopId][fromSlot] -= 1;
														ShopHandler.ShopItemsDelay[c.myShopId][fromSlot] = 0;
														if ((fromSlot + 1) &gt; ShopHandler.ShopItemsStandard[c.myShopId]) {
															ShopHandler.ShopItems[c.myShopId][fromSlot] = 0;
							                                                                c.sendMessage(&quot;You bought an item(s) with the money in your money pouch.&quot;);
														}
											} else {
												c.sendMessage(&quot;You don&#39;t have enough space in your inventory.&quot;);
												break;
											}
                                        
                                            
                                        } else if (c.playerItemsN[Slot] &gt;= TotPrice2) {
						if (c.getItems().freeSlots() &gt; 0) {
							buyDelay = System.currentTimeMillis();
							c.getItems().deleteItem(995, c.getItems().getItemSlot(995), TotPrice2);
							c.getItems().addItem(itemID, 1);
							ShopHandler.ShopItemsN[c.myShopId][fromSlot] -= 1;
							ShopHandler.ShopItemsDelay[c.myShopId][fromSlot] = 0;
							if ((fromSlot + 1) &gt; ShopHandler.ShopItemsStandard[c.myShopId]) {
								ShopHandler.ShopItems[c.myShopId][fromSlot] = 0;
							}
						} else {
							c.sendMessage(&quot;You don&#39;t have enough space in your inventory.&quot;);
							break;
						}
					} else {
						c.sendMessage(&quot;You don&#39;t have enough coins.&quot;);
						break;
					}
                }
				if(Slot1 == -1 &amp;&amp; c.myShopId == 29 || c.myShopId == 30 || c.myShopId == 31) {
					c.sendMessage(&quot;You don&#39;t have enough tokkul.&quot;);
					break;
				}
				if(Slot3 == -1 &amp;&amp; c.myShopId == 11) {
					c.sendMessage(&quot;You don&#39;t have enough Level Points.&quot;);
					break;
				}
				if(Slot4 == -1 &amp;&amp; c.myShopId == 78) {
					c.sendMessage(&quot;You don&#39;t have enough DT&#39;s.&quot;);
					break;
				}
			
                if(TotPrice2 &lt;= 1) {
                	TotPrice2 = (int)Math.floor(getItemShopValue(itemID, 0, fromSlot));
                	TotPrice2 *= 1.66;
                }
                if(c.myShopId == 29 || c.myShopId == 30 || c.myShopId == 31) {
                	if (c.playerItemsN[Slot1] &gt;= TotPrice2) {
						if (c.getItems().freeSlots() &gt; 0) {
							buyDelay = System.currentTimeMillis();
							c.getItems().deleteItem(6529, c.getItems().getItemSlot(6529), TotPrice2);
							c.getItems().addItem(itemID, 1);
							Server.shopHandler.ShopItemsN[c.myShopId][fromSlot] -= 1;
							Server.shopHandler.ShopItemsDelay[c.myShopId][fromSlot] = 0;
							if ((fromSlot + 1) &gt; Server.shopHandler.ShopItemsStandard[c.myShopId]) {
								Server.shopHandler.ShopItems[c.myShopId][fromSlot] = 0;
							}
						} else {
							c.sendMessage(&quot;You don&#39;t have enough space in your inventory.&quot;);
							break;
						}
					} else {
						c.sendMessage(&quot;You don&#39;t have enough tokkul.&quot;);
						break;
					}
                }
                else if(c.myShopId == 47) {
                	if (c.pkPoints &gt;= TotPrice2) {
						if (c.getItems().freeSlots() &gt; 0) {
							buyDelay = System.currentTimeMillis();
							c.pkPoints -= TotPrice2;
							c.getItems().addItem(itemID, 1);
							Server.shopHandler.ShopItemsN[c.myShopId][fromSlot] -= 1;
							Server.shopHandler.ShopItemsDelay[c.myShopId][fromSlot] = 0;
							if ((fromSlot + 1) &gt; Server.shopHandler.ShopItemsStandard[c.myShopId]) {
								Server.shopHandler.ShopItems[c.myShopId][fromSlot] = 0;
							}
						} else {
							c.sendMessage(&quot;You don&#39;t have enough space in your inventory.&quot;);
							break;
						}
					} else {
						c.sendMessage(&quot;You don&#39;t have enough NPoints.&quot;);
						break;
					}
                }
                else if(c.myShopId == 48) {
                	if (c.SPoints &gt;= TotPrice2) {
						if (c.getItems().freeSlots() &gt; 0) {
							buyDelay = System.currentTimeMillis();
							c.SPoints -= TotPrice2;
							c.getItems().addItem(itemID, 1);
							Server.shopHandler.ShopItemsN[c.myShopId][fromSlot] -= 1;
							Server.shopHandler.ShopItemsDelay[c.myShopId][fromSlot] = 0;
							if ((fromSlot + 1) &gt; Server.shopHandler.ShopItemsStandard[c.myShopId]) {
								Server.shopHandler.ShopItems[c.myShopId][fromSlot] = 0;
							}
						} else {
							c.sendMessage(&quot;You don&#39;t have enough space in your inventory.&quot;);
							break;
						}
					} else {
						c.sendMessage(&quot;You don&#39;t have enough Slayer Points.&quot;);
						break;
					}
                }
                else if(c.myShopId == 11) {
                        if (c.lvlPoints &gt;= TotPrice2) {
                                                if (c.getItems().freeSlots() &gt; 0) {
                                                        buyDelay = System.currentTimeMillis();
                                                        c.lvlPoints -= TotPrice2;
                                                        c.getItems().addItem(itemID, 1);
                                                        Server.shopHandler.ShopItemsN[c.myShopId][fromSlot] -= 1;
                                                        Server.shopHandler.ShopItemsDelay[c.myShopId][fromSlot] = 0;
                                                        if ((fromSlot + 1) &gt; Server.shopHandler.ShopItemsStandard[c.myShopId]) {
                                                                Server.shopHandler.ShopItems[c.myShopId][fromSlot] = 0;
                                                        }
                                                } else {
                                                        c.sendMessage(&quot;You don&#39;t have enough space in your inventory.&quot;);
                                                        break;
                                                }
                                        } else {
                                                c.sendMessage(&quot;You don&#39;t have enough lvl Points.&quot;);
                                                break;
                                        }
                }
                else if(c.myShopId == 10) {
                        if (c.donorPoints &gt;= TotPrice2) {
                                                if (c.getItems().freeSlots() &gt; 0) {
                                                        buyDelay = System.currentTimeMillis();
                                                        c.donorPoints -= TotPrice2;
                                                        c.getItems().addItem(itemID, 1);
                                                        Server.shopHandler.ShopItemsN[c.myShopId][fromSlot] -= 1;
                                                        Server.shopHandler.ShopItemsDelay[c.myShopId][fromSlot] = 0;
                                                        if ((fromSlot + 1) &gt; Server.shopHandler.ShopItemsStandard[c.myShopId]) {
                                                                Server.shopHandler.ShopItems[c.myShopId][fromSlot] = 0;
                                                        }
                                                } else {
                                                        c.sendMessage(&quot;You don&#39;t have enough space in your inventory.&quot;);
                                                        break;
                                                }
                                        } else {
                                                c.sendMessage(&quot;You don&#39;t have enough Donor Points.&quot;);
                                                break;
                                        }
                }
                else if(c.myShopId == 78) {
                	if (c.playerItemsN[Slot4] &gt;= TotPrice2) {
						if (c.getItems().freeSlots() &gt; 0) {
							buyDelay = System.currentTimeMillis();
							c.getItems().deleteItem(7478, c.getItems().getItemSlot(7478), TotPrice2);
							c.getItems().addItem(itemID, 1);
							Server.shopHandler.ShopItemsN[c.myShopId][fromSlot] -= 1;
							Server.shopHandler.ShopItemsDelay[c.myShopId][fromSlot] = 0;
							if ((fromSlot + 1) &gt; Server.shopHandler.ShopItemsStandard[c.myShopId]) {
								Server.shopHandler.ShopItems[c.myShopId][fromSlot] = 0;
							}
						} else {
							c.sendMessage(&quot;You don&#39;t have enough space in your inventory.&quot;);
							break;
						}
					} else {
						c.sendMessage(&quot;You don&#39;t have enough DT&#39;s.&quot;);
						break;
					}
                }
        else if(c.myShopId != 11 &amp;&amp; c.myShopId != 29 || c.myShopId != 30 || c.myShopId != 31 || c.myShopId != 47) {
					if (c.playerItemsN[Slot] &gt;= TotPrice2) {
						if (c.getItems().freeSlots() &gt; 0) {
							buyDelay = System.currentTimeMillis();
							c.getItems().deleteItem(995, c.getItems().getItemSlot(995), TotPrice2);
							c.getItems().addItem(itemID, 1);
							Server.shopHandler.ShopItemsN[c.myShopId][fromSlot] -= 1;
							Server.shopHandler.ShopItemsDelay[c.myShopId][fromSlot] = 0;
							if ((fromSlot + 1) &gt; Server.shopHandler.ShopItemsStandard[c.myShopId]) {
								Server.shopHandler.ShopItems[c.myShopId][fromSlot] = 0;
							}
						} else {
							c.sendMessage(&quot;You don&#39;t have enough space in your inventory.&quot;);
							break;
						}
					} else {
						c.sendMessage(&quot;You don&#39;t have enough coins.&quot;);
						break;
					}
		}
			}
			c.getItems().resetItems(3823);
			resetShop(c.myShopId);
			updatePlayerShop();
			return true;
		}
		return false;
	}
[/code]</description>
    
    <lastBuildDate>Tue, 19 Feb 2013 22:59:02 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/players-get-2-items-instead-of-1-pi/490314.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Players get 2 items instead of 1 [PI]</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <p>Bump. Please, someone help.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/players-get-2-items-instead-of-1-pi/490314/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/players-get-2-items-instead-of-1-pi/490314/5</link>
        <pubDate>Tue, 19 Feb 2013 22:59:02 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-490314-5</guid>
        <source url="https://forum.moparisthebest.com/t/players-get-2-items-instead-of-1-pi/490314.rss">Players get 2 items instead of 1 [PI]</source>
      </item>
      <item>
        <title>Players get 2 items instead of 1 [PI]</title>
        <dc:creator><![CDATA[@system system]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/system">@system</a> wrote:</p>
          <blockquote>
              <p>That is hard…  :eek:<br>
add me on skype: Lil_Smok3r<br>
I’ll try to help  <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/players-get-2-items-instead-of-1-pi/490314/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/players-get-2-items-instead-of-1-pi/490314/4</link>
        <pubDate>Tue, 19 Feb 2013 11:24:48 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-490314-4</guid>
        <source url="https://forum.moparisthebest.com/t/players-get-2-items-instead-of-1-pi/490314.rss">Players get 2 items instead of 1 [PI]</source>
      </item>
      <item>
        <title>Players get 2 items instead of 1 [PI]</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="2" data-topic="490314">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/lil_smok3r/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> Lil_Smok3r:</div>
<blockquote>
<p>Is it just for one specific Shop? Or all of them?</p>
</blockquote>
</aside>
<p>All shops. Haven’t tested special shops, but yeah…\</p>
<p>Edit:<br>
It’s only normal shops.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/players-get-2-items-instead-of-1-pi/490314/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/players-get-2-items-instead-of-1-pi/490314/3</link>
        <pubDate>Tue, 19 Feb 2013 11:20:36 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-490314-3</guid>
        <source url="https://forum.moparisthebest.com/t/players-get-2-items-instead-of-1-pi/490314.rss">Players get 2 items instead of 1 [PI]</source>
      </item>
      <item>
        <title>Players get 2 items instead of 1 [PI]</title>
        <dc:creator><![CDATA[@system system]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/system">@system</a> wrote:</p>
          <blockquote>
              <p>Is it just for one specific Shop? Or all of them?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/players-get-2-items-instead-of-1-pi/490314/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/players-get-2-items-instead-of-1-pi/490314/2</link>
        <pubDate>Tue, 19 Feb 2013 11:19:13 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-490314-2</guid>
        <source url="https://forum.moparisthebest.com/t/players-get-2-items-instead-of-1-pi/490314.rss">Players get 2 items instead of 1 [PI]</source>
      </item>
      <item>
        <title>Players get 2 items instead of 1 [PI]</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <p>Well… I still can’t figure this out.<br>
My players get 2 items for the price of one, and I can’t find where in my ShopAssistant that makes that happen (mostly because the code was horridly written, not by me.)<br>
I believe it’s in my buyItem method.</p>
<pre><code class="lang-auto">	public boolean buyItem(int itemID, int fromSlot, int amount) {
		if(c.myShopId == 7390 &amp;&amp; c.myShopClient != null &amp;&amp; !c.myShopClient.properLogout &amp;&amp; !c.playerName.equals(c.myShopClient.playerName)){
			int bought = 0;
			int price = c.myShopClient.playerShopP[fromSlot];
			if(amount &gt; c.myShopClient.playerShopN[fromSlot])
				amount = c.myShopClient.playerShopN[fromSlot];
			for(int x = 0; x &lt; amount; x++){
				if(c.getItems().playerHasItem(7478, c.myShopClient.playerShopP[fromSlot]) &amp;&amp; c.getItems().freeSlots() &gt; 0){
					c.getItems().deleteItem2(7478, c.myShopClient.playerShopP[fromSlot]);
					c.getItems().addItem(c.myShopClient.playerShop[fromSlot], 1);
					c.myShopClient.playerShopN[fromSlot]--;
					c.myShopClient.playerCollect += c.myShopClient.playerShopP[fromSlot];
					if(c.myShopClient.playerShopN[fromSlot] == 0){
						c.myShopClient.playerShop[fromSlot] = 0;
						c.myShopClient.playerShopP[fromSlot] = 0;
					}
					bought++;
				}else{
					c.sendMessage("Not enought space or money.");
					break;
				}
			}
			if(bought &gt; 0){
			resetShop(c.myShopClient);
			c.getItems().resetItems(3823);;
			c.sendMessage("You just bought "+bought+" "+c.getItems().getItemName(itemID)+" for "+ (bought*price));
			c.myShopClient.sendMessage(c.playerName+" has bought "+bought+" "+c.getItems().getItemName(itemID)+" from you!");
			c.myShopClient.sendMessage("You now have "+c.myShopClient.playerCollect+" DT's to collect (::collect)");
			}
			return false;
		}else if(c.myShopId == 7390 &amp;&amp; c.myShopClient != null &amp;&amp; !c.myShopClient.properLogout &amp;&amp; c.playerName.equals(c.myShopClient.playerName)){
			if(amount &gt; c.myShopClient.playerShopN[fromSlot])
				amount = c.myShopClient.playerShopN[fromSlot];
			for(int x = 0; x &lt; amount; x++){
				if(c.getItems().freeSlots() &gt; 0){
					c.getItems().addItem(c.myShopClient.playerShop[fromSlot], 1);
					c.myShopClient.playerShopN[fromSlot]--;
					if(c.myShopClient.playerShopN[fromSlot] == 0){
						c.myShopClient.playerShop[fromSlot] = 0;
						c.myShopClient.playerShopP[fromSlot] = 0;
						fixShop(c);
					}
				}else{
					c.sendMessage("Not enought space.");
					break;
				}
			}
			resetShop(c.myShopClient);
			c.getItems().resetItems(3823);
			return false;
		}else if(c.myShopId == 7390){
			return false;
		}
		if(System.currentTimeMillis() - buyDelay &lt; 1500) {
			return false;
		}

		if (c.myShopId == 14) {
			skillBuy(itemID);
			return false;

		} else if (c.myShopId == 15) {
			buyVoid(itemID);
			return false;		
		
		} else if (c.myShopId == 1) {
			buyVoid(itemID);
			return false;
                }
		if(itemID != itemID) {
			c.sendMessage("Don't dupe or you will be IP Banned");
			return false;
		}

		if(!shopSellsItem(itemID))
			return false;

		if (amount &gt; 0) {
			if (amount &gt; Server.shopHandler.ShopItemsN[c.myShopId][fromSlot]) {
				amount = Server.shopHandler.ShopItemsN[c.myShopId][fromSlot];
			}
			//double ShopValue;
			//double TotPrice;
			int TotPrice2 = 0;
			//int Overstock;
			int Slot = 0;
			int Slot1 = 0;//Tokkul
			int Slot2 = 0;//Pking Points
			int Slot3 = 0;//Donator Gold
			int Slot4 = 0;//Dragon Tokens

			if (c.myShopId == 18) {
				handleOtherShop(itemID);
				return false;
			}	
			if (c.myShopId == 73) {
				handleOtherShop(itemID);
				return false;
			}	
			if (c.myShopId == 74) {
				handleOtherShop(itemID);
				return false;
			}
			if (c.myShopId == 10) {
				handleOtherShop(itemID);
				return false;
			}
			if (c.myShopId == 11) {
				handleOtherShop(itemID);
				return false;
			}
			if (c.myShopId == 48) {
				handleOtherShop(itemID);
				return false;
			}
if (amount &gt; 1000) {
                TotPrice2 = (int) Math.floor(getItemShopValue(itemID, 0,
                        fromSlot)) * amount;
                Slot = c.getItems().getItemSlot(995);
                if (Slot == -1 &amp;&amp; TotPrice2 != 0) {
                    c.sendMessage("You don't have enough coins.");
                }
                if (TotPrice2 &lt;= 1) {
                    TotPrice2 = (int) Math.floor(getItemShopValue(itemID, 0,
                            fromSlot));
                }
                if (TotPrice2 &lt;= 0) {
                    if (c.getItems().freeSlots() &gt; 0) {
                        c.getItems().addItem(itemID, amount);
                        Server.shopHandler.ShopItemsN[c.myShopId][fromSlot] -= 1;
                        Server.shopHandler.ShopItemsDelay[c.myShopId][fromSlot] = 0;
                        if ((fromSlot + 1) &gt; Server.shopHandler.ShopItemsStandard[c.myShopId]) {
                            Server.shopHandler.ShopItems[c.myShopId][fromSlot] = 0;
                        }
                    } else {
                        c.sendMessage("Not enough space in your inventory.");
                    }
                } else if (c.playerItemsN[Slot] &gt;= TotPrice2) {
                    if (c.getItems().freeSlots() &gt; 0) {
                        c.getItems().deleteItem(995,
                                c.getItems().getItemSlot(995), TotPrice2);
                        c.getItems().addItem(itemID, amount);
                        Server.shopHandler.ShopItemsN[c.myShopId][fromSlot] -= amount;
                        Server.shopHandler.ShopItemsDelay[c.myShopId][fromSlot] = 0;
                        if ((fromSlot + 1) &gt; Server.shopHandler.ShopItemsStandard[c.myShopId]) {
                            Server.shopHandler.ShopItems[c.myShopId][fromSlot] = 0;
                        }
                    } else {
                        c.sendMessage("Not enough space in your inventory.");
                    }
                } else {
                    c.sendMessage("You don't have enough coins.");
                }
            } else {
	}				
			for (int i = amount; i &gt; 0; i--) {
				TotPrice2 = (int)Math.floor(getItemShopValue(itemID, 0, fromSlot));
				Slot = c.getItems().getItemSlot(995);
				Slot1 = c.getItems().getItemSlot(6529);
				Slot3 = c.getItems().getItemSlot(5555);
				Slot4 = c.getItems().getItemSlot(7478);
				if (Slot == -1 &amp;&amp; c.myShopId != 11 &amp;&amp; c.myShopId != 29 &amp;&amp; c.myShopId != 30 &amp;&amp; c.myShopId != 31 &amp;&amp; c.myShopId != 47) {
					c.sendMessage("You don't have enough coins.");
					break;
				}
				if (Slot == -1 &amp;&amp; c.MoneyCash == 0 &amp;&amp; c.myShopId != 11 &amp;&amp; c.myShopId != 29 &amp;&amp; c.myShopId != 30 &amp;&amp; c.myShopId != 31 &amp;&amp; c.myShopId != 47 &amp;&amp; c.myShopId != 100 &amp;&amp; c.myShopId != 99) {
					c.sendMessage("You don't have any coins.");
					break;
				}else if(c.myShopId != 11 &amp;&amp; c.myShopId != 29 || c.myShopId != 30 || c.myShopId != 31 || c.myShopId != 47 || c.myShopId != 99 || c.myShopId != 100) {
                                         if (c.MoneyCash &gt;=TotPrice2) {
					                     	if (c.getItems().freeSlots() &gt; 0) {
														buyDelay = System.currentTimeMillis();
							                                                        c.MoneyCash = c.MoneyCash - TotPrice2;
							                                                        				if(c.MoneyCash &gt; 99999 &amp;&amp; c.MoneyCash &lt;= 999999) {
												c.getPA().sendFrame126(""+c.MoneyCash/1000+"K", 8134);
												} else if(c.MoneyCash &gt; 999999 &amp;&amp; c.MoneyCash &lt;= 2147483647) {
													c.getPA().sendFrame126(""+c.MoneyCash/1000000+"M", 8134);
												} else {
														c.getPA().sendFrame126(""+c.MoneyCash+"", 8134); 
													}
												c.getPA().sendFrame126(""+c.MoneyCash+"", 8135); 
														c.getItems().addItem(itemID, 1);
														ShopHandler.ShopItemsN[c.myShopId][fromSlot] -= 1;
														ShopHandler.ShopItemsDelay[c.myShopId][fromSlot] = 0;
														if ((fromSlot + 1) &gt; ShopHandler.ShopItemsStandard[c.myShopId]) {
															ShopHandler.ShopItems[c.myShopId][fromSlot] = 0;
							                                                                c.sendMessage("You bought an item(s) with the money in your money pouch.");
														}
											} else {
												c.sendMessage("You don't have enough space in your inventory.");
												break;
											}
                                        
                                            
                                        } else if (c.playerItemsN[Slot] &gt;= TotPrice2) {
						if (c.getItems().freeSlots() &gt; 0) {
							buyDelay = System.currentTimeMillis();
							c.getItems().deleteItem(995, c.getItems().getItemSlot(995), TotPrice2);
							c.getItems().addItem(itemID, 1);
							ShopHandler.ShopItemsN[c.myShopId][fromSlot] -= 1;
							ShopHandler.ShopItemsDelay[c.myShopId][fromSlot] = 0;
							if ((fromSlot + 1) &gt; ShopHandler.ShopItemsStandard[c.myShopId]) {
								ShopHandler.ShopItems[c.myShopId][fromSlot] = 0;
							}
						} else {
							c.sendMessage("You don't have enough space in your inventory.");
							break;
						}
					} else {
						c.sendMessage("You don't have enough coins.");
						break;
					}
                }
				if(Slot1 == -1 &amp;&amp; c.myShopId == 29 || c.myShopId == 30 || c.myShopId == 31) {
					c.sendMessage("You don't have enough tokkul.");
					break;
				}
				if(Slot3 == -1 &amp;&amp; c.myShopId == 11) {
					c.sendMessage("You don't have enough Level Points.");
					break;
				}
				if(Slot4 == -1 &amp;&amp; c.myShopId == 78) {
					c.sendMessage("You don't have enough DT's.");
					break;
				}
			
                if(TotPrice2 &lt;= 1) {
                	TotPrice2 = (int)Math.floor(getItemShopValue(itemID, 0, fromSlot));
                	TotPrice2 *= 1.66;
                }
                if(c.myShopId == 29 || c.myShopId == 30 || c.myShopId == 31) {
                	if (c.playerItemsN[Slot1] &gt;= TotPrice2) {
						if (c.getItems().freeSlots() &gt; 0) {
							buyDelay = System.currentTimeMillis();
							c.getItems().deleteItem(6529, c.getItems().getItemSlot(6529), TotPrice2);
							c.getItems().addItem(itemID, 1);
							Server.shopHandler.ShopItemsN[c.myShopId][fromSlot] -= 1;
							Server.shopHandler.ShopItemsDelay[c.myShopId][fromSlot] = 0;
							if ((fromSlot + 1) &gt; Server.shopHandler.ShopItemsStandard[c.myShopId]) {
								Server.shopHandler.ShopItems[c.myShopId][fromSlot] = 0;
							}
						} else {
							c.sendMessage("You don't have enough space in your inventory.");
							break;
						}
					} else {
						c.sendMessage("You don't have enough tokkul.");
						break;
					}
                }
                else if(c.myShopId == 47) {
                	if (c.pkPoints &gt;= TotPrice2) {
						if (c.getItems().freeSlots() &gt; 0) {
							buyDelay = System.currentTimeMillis();
							c.pkPoints -= TotPrice2;
							c.getItems().addItem(itemID, 1);
							Server.shopHandler.ShopItemsN[c.myShopId][fromSlot] -= 1;
							Server.shopHandler.ShopItemsDelay[c.myShopId][fromSlot] = 0;
							if ((fromSlot + 1) &gt; Server.shopHandler.ShopItemsStandard[c.myShopId]) {
								Server.shopHandler.ShopItems[c.myShopId][fromSlot] = 0;
							}
						} else {
							c.sendMessage("You don't have enough space in your inventory.");
							break;
						}
					} else {
						c.sendMessage("You don't have enough NPoints.");
						break;
					}
                }
                else if(c.myShopId == 48) {
                	if (c.SPoints &gt;= TotPrice2) {
						if (c.getItems().freeSlots() &gt; 0) {
							buyDelay = System.currentTimeMillis();
							c.SPoints -= TotPrice2;
							c.getItems().addItem(itemID, 1);
							Server.shopHandler.ShopItemsN[c.myShopId][fromSlot] -= 1;
							Server.shopHandler.ShopItemsDelay[c.myShopId][fromSlot] = 0;
							if ((fromSlot + 1) &gt; Server.shopHandler.ShopItemsStandard[c.myShopId]) {
								Server.shopHandler.ShopItems[c.myShopId][fromSlot] = 0;
							}
						} else {
							c.sendMessage("You don't have enough space in your inventory.");
							break;
						}
					} else {
						c.sendMessage("You don't have enough Slayer Points.");
						break;
					}
                }
                else if(c.myShopId == 11) {
                        if (c.lvlPoints &gt;= TotPrice2) {
                                                if (c.getItems().freeSlots() &gt; 0) {
                                                        buyDelay = System.currentTimeMillis();
                                                        c.lvlPoints -= TotPrice2;
                                                        c.getItems().addItem(itemID, 1);
                                                        Server.shopHandler.ShopItemsN[c.myShopId][fromSlot] -= 1;
                                                        Server.shopHandler.ShopItemsDelay[c.myShopId][fromSlot] = 0;
                                                        if ((fromSlot + 1) &gt; Server.shopHandler.ShopItemsStandard[c.myShopId]) {
                                                                Server.shopHandler.ShopItems[c.myShopId][fromSlot] = 0;
                                                        }
                                                } else {
                                                        c.sendMessage("You don't have enough space in your inventory.");
                                                        break;
                                                }
                                        } else {
                                                c.sendMessage("You don't have enough lvl Points.");
                                                break;
                                        }
                }
                else if(c.myShopId == 10) {
                        if (c.donorPoints &gt;= TotPrice2) {
                                                if (c.getItems().freeSlots() &gt; 0) {
                                                        buyDelay = System.currentTimeMillis();
                                                        c.donorPoints -= TotPrice2;
                                                        c.getItems().addItem(itemID, 1);
                                                        Server.shopHandler.ShopItemsN[c.myShopId][fromSlot] -= 1;
                                                        Server.shopHandler.ShopItemsDelay[c.myShopId][fromSlot] = 0;
                                                        if ((fromSlot + 1) &gt; Server.shopHandler.ShopItemsStandard[c.myShopId]) {
                                                                Server.shopHandler.ShopItems[c.myShopId][fromSlot] = 0;
                                                        }
                                                } else {
                                                        c.sendMessage("You don't have enough space in your inventory.");
                                                        break;
                                                }
                                        } else {
                                                c.sendMessage("You don't have enough Donor Points.");
                                                break;
                                        }
                }
                else if(c.myShopId == 78) {
                	if (c.playerItemsN[Slot4] &gt;= TotPrice2) {
						if (c.getItems().freeSlots() &gt; 0) {
							buyDelay = System.currentTimeMillis();
							c.getItems().deleteItem(7478, c.getItems().getItemSlot(7478), TotPrice2);
							c.getItems().addItem(itemID, 1);
							Server.shopHandler.ShopItemsN[c.myShopId][fromSlot] -= 1;
							Server.shopHandler.ShopItemsDelay[c.myShopId][fromSlot] = 0;
							if ((fromSlot + 1) &gt; Server.shopHandler.ShopItemsStandard[c.myShopId]) {
								Server.shopHandler.ShopItems[c.myShopId][fromSlot] = 0;
							}
						} else {
							c.sendMessage("You don't have enough space in your inventory.");
							break;
						}
					} else {
						c.sendMessage("You don't have enough DT's.");
						break;
					}
                }
        else if(c.myShopId != 11 &amp;&amp; c.myShopId != 29 || c.myShopId != 30 || c.myShopId != 31 || c.myShopId != 47) {
					if (c.playerItemsN[Slot] &gt;= TotPrice2) {
						if (c.getItems().freeSlots() &gt; 0) {
							buyDelay = System.currentTimeMillis();
							c.getItems().deleteItem(995, c.getItems().getItemSlot(995), TotPrice2);
							c.getItems().addItem(itemID, 1);
							Server.shopHandler.ShopItemsN[c.myShopId][fromSlot] -= 1;
							Server.shopHandler.ShopItemsDelay[c.myShopId][fromSlot] = 0;
							if ((fromSlot + 1) &gt; Server.shopHandler.ShopItemsStandard[c.myShopId]) {
								Server.shopHandler.ShopItems[c.myShopId][fromSlot] = 0;
							}
						} else {
							c.sendMessage("You don't have enough space in your inventory.");
							break;
						}
					} else {
						c.sendMessage("You don't have enough coins.");
						break;
					}
		}
			}
			c.getItems().resetItems(3823);
			resetShop(c.myShopId);
			updatePlayerShop();
			return true;
		}
		return false;
	}</code></pre>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/players-get-2-items-instead-of-1-pi/490314/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/players-get-2-items-instead-of-1-pi/490314/1</link>
        <pubDate>Tue, 19 Feb 2013 10:54:08 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-490314-1</guid>
        <source url="https://forum.moparisthebest.com/t/players-get-2-items-instead-of-1-pi/490314.rss">Players get 2 items instead of 1 [PI]</source>
      </item>
  </channel>
</rss>
