<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>PHP sessions randomly not saving</title>
    <link>https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539</link>
    <description>Approximately 50% of them time, my sessions on my PHP page do not save.

Here&#39;s the basic outline of my code:

I have one container PHP file(index.php) which includes my other php files from the server depending on the $_GET[&#39;page&#39;], pretty much for navigation/dynamic pages.

On the top of index.php is my session_start();

Now I have an action in one of my included php files that if the form is submitted, it creates the sessions:
$_SESSION[&#39;username_reg&#39;] = $_POST[&#39;username_reg&#39;]
$_SESSION[&#39;password_reg&#39;] = $_POST[&#39;password_reg&#39;]
$_SESSION[&#39;email_reg&#39;] = $_POST[&#39;email_reg&#39;]

it then carries the session info to the next page, which is another form.  Unrelated, but it is on the same php include page but another area of it ($_GET[&#39;step&#39;] = 3)
During this page, the user is not ready to register yet, because he needs to fill out additional info depending on his user type.  I have a script to check if the sessions are filled out.  if they are, then it shows the page where you fill out your information.  if it isn&#39;t, then it redirects you to the first step page.  For now, i changed it to echo &quot;sessions unidentified&quot; and made it echo $_SESSION[&#39;username_reg&#39;] etc...  I see the message 50% of them time, and the other times i see the info page.

I&#39;ve tested it on IE, Firefox, Chrome, and Opera, and chrome on 2 other computers.

What could be the problem?</description>
    
    <lastBuildDate>Wed, 05 Oct 2011 02:59:28 +0000</lastBuildDate>
    <category>General Programming</category>
    <atom:link href="https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>PHP sessions randomly not saving</title>
        <dc:creator><![CDATA[@moparisthebest Moparisthebest]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/moparisthebest">@moparisthebest</a> wrote:</p>
          <blockquote>
              <p>Yes, so you should have the functionality to hash it with both, but since javascript runs on the client-side before anything is sent, that is the best way so the clear-text password never goes out across the network.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539/15">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539/15</link>
        <pubDate>Wed, 05 Oct 2011 02:59:28 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-416539-15</guid>
        <source url="https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539.rss">PHP sessions randomly not saving</source>
      </item>
      <item>
        <title>PHP sessions randomly not saving</title>
        <dc:creator><![CDATA[@bowserjr2 Bowser jr]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/bowserjr2">@bowserjr2</a> wrote:</p>
          <blockquote>
              <p>DEFET: You should hash it client-sided, therefore Javascript. But if it is unhashed, the server should to the job.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539/14">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539/14</link>
        <pubDate>Tue, 04 Oct 2011 14:03:09 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-416539-14</guid>
        <source url="https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539.rss">PHP sessions randomly not saving</source>
      </item>
      <item>
        <title>PHP sessions randomly not saving</title>
        <dc:creator><![CDATA[@DEFET DEFET]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/defet">@DEFET</a> wrote:</p>
          <blockquote>
              <p>All right, makes perfect sense now, thanks. I will be doing that soon enough.</p>
<p>For one more final question, should I hash it with Javascript, PHP, or does it not matter?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539/13">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539/13</link>
        <pubDate>Mon, 03 Oct 2011 23:00:55 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-416539-13</guid>
        <source url="https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539.rss">PHP sessions randomly not saving</source>
      </item>
      <item>
        <title>PHP sessions randomly not saving</title>
        <dc:creator><![CDATA[@moparisthebest Moparisthebest]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/moparisthebest">@moparisthebest</a> wrote:</p>
          <blockquote>
              <p>Type this in your browser, you may need to logout of the forums first though:</p>
<p>view-source:<a href="https://www.moparisthebest.com/smf/index.php?action=login">https://www.moparisthebest.com/smf/index.php?action=login</a></p>
<p>It’s the full source code, yes it uses the ‘onsubmit’ event on the form tag.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539/12">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539/12</link>
        <pubDate>Mon, 03 Oct 2011 21:07:52 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-416539-12</guid>
        <source url="https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539.rss">PHP sessions randomly not saving</source>
      </item>
      <item>
        <title>PHP sessions randomly not saving</title>
        <dc:creator><![CDATA[@DEFET DEFET]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/defet">@DEFET</a> wrote:</p>
          <blockquote>
              <p>Could you give me an example script?  I looked at the login button and it’s a normal submit button.  Shouldn’t it need an onclick event handler to convert the password.value into hash, and then POST it over to the next page?  That’s the only way I can think of at the moment.</p>
<p>or perhaps some onsubmit event?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539/11">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539/11</link>
        <pubDate>Mon, 03 Oct 2011 04:25:00 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-416539-11</guid>
        <source url="https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539.rss">PHP sessions randomly not saving</source>
      </item>
      <item>
        <title>PHP sessions randomly not saving</title>
        <dc:creator><![CDATA[@moparisthebest Moparisthebest]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/moparisthebest">@moparisthebest</a> wrote:</p>
          <blockquote>
              <p>Look at SMF (like this forum) for instance, when you type in your username/password and click ‘submit’, if the user has javascript enabled (most do), it hashes the password and sends only the hash, not the password, over the network connection:</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://forum.moparisthebest.com/uploads/default/original/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a.png" class="site-icon" width="32" height="32">
      <a href="https://forum.moparisthebest.com/" target="_blank">moparisthebest.com</a>
  </header>
  <article class="onebox-body">
    <img src="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" class="thumbnail onebox-avatar" width="500" height="500">

<h3><a href="https://forum.moparisthebest.com/" target="_blank">moparisthebest.com</a></h3>

<p>programming, irc, cars</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>Search for sha1.js in the html source code of the login page for more implementation details.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539/10</link>
        <pubDate>Sun, 02 Oct 2011 09:52:21 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-416539-10</guid>
        <source url="https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539.rss">PHP sessions randomly not saving</source>
      </item>
      <item>
        <title>PHP sessions randomly not saving</title>
        <dc:creator><![CDATA[@Mopman Mopman]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/mopman">@Mopman</a> wrote:</p>
          <blockquote>
              <p>The downside is that you’re sending the users password in plaintext, which means its sniffable. The user WILL use the same password on more than one site (see: recent MITB hacking caused by me reusing a password - and I know better, even.)</p>
<p>It’s totally possible, you hash the password in js before you send it then have your PHP expect a hash.</p>
<p>Also, what are you using to hash? A single iteration of MD5 or SHA isn’t good enough (too fast) and it should be salted ofc.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539/9</link>
        <pubDate>Sun, 02 Oct 2011 08:38:16 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-416539-9</guid>
        <source url="https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539.rss">PHP sessions randomly not saving</source>
      </item>
      <item>
        <title>PHP sessions randomly not saving</title>
        <dc:creator><![CDATA[@DEFET DEFET]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/defet">@DEFET</a> wrote:</p>
          <blockquote>
              <p>edit, rewrote code, now better and works perfectly.</p>
<p>Now for the plain text, did some googling and they say that it’s impossible without having an SSL, and i’m not planning to have that YET.</p>
<p>what are the major downsides of sending in plain text?  i have a check with hash to see if the post is equal to the hash.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539/8</link>
        <pubDate>Sat, 01 Oct 2011 20:24:15 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-416539-8</guid>
        <source url="https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539.rss">PHP sessions randomly not saving</source>
      </item>
      <item>
        <title>PHP sessions randomly not saving</title>
        <dc:creator><![CDATA[@z z]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/z">@z</a> wrote:</p>
          <blockquote>
              <p>Use some sort of hashing method in JavaScript to ensure the POST data doesn’t get sent in plaintext.</p>
<p>Post the entire source code if you want to get any further help, as you have noted very small snippets of code and expect us to know what’s wrong (when the snippets of code that you post contain little to no errors).</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539/7</link>
        <pubDate>Sat, 01 Oct 2011 19:48:45 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-416539-7</guid>
        <source url="https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539.rss">PHP sessions randomly not saving</source>
      </item>
      <item>
        <title>PHP sessions randomly not saving</title>
        <dc:creator><![CDATA[@DEFET DEFET]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/defet">@DEFET</a> wrote:</p>
          <blockquote>
              <p>How would I go about making it more secure?  I can’t think of a way of receiving the password without POSTing it in PHP.</p>
<p>also back to topic, any ideas of the flaw in my scenario?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539/6</link>
        <pubDate>Sat, 01 Oct 2011 19:42:07 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-416539-6</guid>
        <source url="https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539.rss">PHP sessions randomly not saving</source>
      </item>
      <item>
        <title>PHP sessions randomly not saving</title>
        <dc:creator><![CDATA[@eczema3 eczema3]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/eczema3">@eczema3</a> wrote:</p>
          <blockquote>
              <p>You’re still POSTing a plaintext password, which is really insecure (unless over https iirc)</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539/5</link>
        <pubDate>Sat, 01 Oct 2011 14:11:22 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-416539-5</guid>
        <source url="https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539.rss">PHP sessions randomly not saving</source>
      </item>
      <item>
        <title>PHP sessions randomly not saving</title>
        <dc:creator><![CDATA[@DEFET DEFET]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/defet">@DEFET</a> wrote:</p>
          <blockquote>
              <p>already made a check for length and if it was filled out.</p>
<p>The session is only created when the submit button is pressed, which looks something like this</p>
<pre><code class="lang-auto">if(isset($_POST['submit'])){

 if(isset($_POST['.....']) &amp;&amp; strlen($_POST['...']) &gt; 0){

  $_SESSION ['...'] = $_POST['...'];

}

}</code></pre>
<p>always been doing this, but it still does it.</p>
<p>edit: <a class="mention" href="/u/eczema3">@eczema3</a>, not sure if it makes a difference, but the code for the password session is</p>
<pre><code class="lang-auto">$_SESSION['password_reg'] = hash('xxxxx', $_POST['password_reg'])</code></pre>
<p>edit2:  using crypt() now</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539/4</link>
        <pubDate>Fri, 30 Sep 2011 22:36:30 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-416539-4</guid>
        <source url="https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539.rss">PHP sessions randomly not saving</source>
      </item>
      <item>
        <title>PHP sessions randomly not saving</title>
        <dc:creator><![CDATA[@eczema3 eczema3]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/eczema3">@eczema3</a> wrote:</p>
          <blockquote>
              <p>sending/storing password in a plaintext format</p>
<p>seems legit</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539/3</link>
        <pubDate>Fri, 30 Sep 2011 17:09:06 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-416539-3</guid>
        <source url="https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539.rss">PHP sessions randomly not saving</source>
      </item>
      <item>
        <title>PHP sessions randomly not saving</title>
        <dc:creator><![CDATA[@z z]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/z">@z</a> wrote:</p>
          <blockquote>
              <p>$_POST is an empty array upon loading every page. Perhaps, since $_POST[‘username_reg’], $_POST[‘password_reg’], and $_POST[‘email_reg’] aren’t defined indexes in the array on ‘half the pages’, the $_SESSION variables that correspond to your $_POST variables are being flushed empty. It might also be that you’re not checking if the length of each $_POST variable is greater than 0. Sometimes people click submit before they actually mean to submit the form, leaving input fields empty and causing problems for the program. One of the first things you should be looking for when programming forms with PHP is to ensure that you don’t have forms allow empty data to be submitted into the database when it’s critical for you to have non-empty data.</p>
<p>Try doing this:</p>
<p><code>&lt;?php
if(isset($_POST['username_reg']) &amp;&amp; strlen($_POST['username_reg']) &gt; 0)
{
	$_SESSION['username_reg'] = $_POST['username_reg'];
}
if(isset($_POST['password_reg']) &amp;&amp; strlen($_POST['password_reg']) &gt; 0)
{
	$_SESSION['password_reg'] = $_POST['password_reg'];
}
if(isset($_POST['email_reg']) &amp;&amp; strlen($_POST['email_reg']) &gt; 0)
{
	$_SESSION['email_reg'] = $_POST['email_reg'];
}
?&gt;</code></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539/2</link>
        <pubDate>Fri, 30 Sep 2011 14:38:57 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-416539-2</guid>
        <source url="https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539.rss">PHP sessions randomly not saving</source>
      </item>
      <item>
        <title>PHP sessions randomly not saving</title>
        <dc:creator><![CDATA[@DEFET DEFET]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/defet">@DEFET</a> wrote:</p>
          <blockquote>
              <p>Approximately 50% of them time, my sessions on my PHP page do not save.</p>
<p>Here’s the basic outline of my code:</p>
<p>I have one container PHP file(index.php) which includes my other php files from the server depending on the $_GET[‘page’], pretty much for navigation/dynamic pages.</p>
<p>On the top of index.php is my session_start();</p>
<p>Now I have an action in one of my included php files that if the form is submitted, it creates the sessions:<br>
$_SESSION[‘username_reg’] = $_POST[‘username_reg’]<br>
$_SESSION[‘password_reg’] = $_POST[‘password_reg’]<br>
$_SESSION[‘email_reg’] = $_POST[‘email_reg’]</p>
<p>it then carries the session info to the next page, which is another form.  Unrelated, but it is on the same php include page but another area of it ($_GET[‘step’] = 3)<br>
During this page, the user is not ready to register yet, because he needs to fill out additional info depending on his user type.  I have a script to check if the sessions are filled out.  if they are, then it shows the page where you fill out your information.  if it isn’t, then it redirects you to the first step page.  For now, i changed it to echo “sessions unidentified” and made it echo $_SESSION[‘username_reg’] etc…  I see the message 50% of them time, and the other times i see the info page.</p>
<p>I’ve tested it on IE, Firefox, Chrome, and Opera, and chrome on 2 other computers.</p>
<p>What could be the problem?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539/1</link>
        <pubDate>Fri, 30 Sep 2011 05:35:47 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-416539-1</guid>
        <source url="https://forum.moparisthebest.com/t/php-sessions-randomly-not-saving/416539.rss">PHP sessions randomly not saving</source>
      </item>
  </channel>
</rss>
