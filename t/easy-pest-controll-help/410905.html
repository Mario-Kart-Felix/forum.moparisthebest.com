<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/easy-pest-controll-help/410905 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Aug 2019 21:35:32 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Easy pest controll help - Runescape - moparisthebest.com</title>
    <meta name="description" content="Well i have a pest control minigame and it takes like 5 people to get the boat to take you there.. So i want to make it so it only has to be 1+ players, i am using caution x base PI. Heres the codes so you can work with &amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="410905.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Easy pest controll help&#39;" href="410905.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/easy-pest-controll-help/410905" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/easy-pest-controll-help/410905" />
<meta property="og:title" content="Easy pest controll help" />
<meta name="twitter:title" content="Easy pest controll help" />
<meta property="og:description" content="Well i have a pest control minigame and it takes like 5 people to get the boat to take you there… So i want to make it so it only has to be 1+ players, i am using caution x base PI.  Heres the codes so you can work with it.  [code]package server.model.minigames;  import server.model.players.Client;  import server.model.players.PlayerHandler;  import server.Server;  import java.util.HashMap;  import java.util.Iterator;  import server.util.Misc;  /**    @author Harlan Credits to Sanity  */  public..." />
<meta name="twitter:description" content="Well i have a pest control minigame and it takes like 5 people to get the boat to take you there… So i want to make it so it only has to be 1+ players, i am using caution x base PI.  Heres the codes so you can work with it.  [code]package server.model.minigames;  import server.model.players.Client;  import server.model.players.PlayerHandler;  import server.Server;  import java.util.HashMap;  import java.util.Iterator;  import server.util.Misc;  /**    @author Harlan Credits to Sanity  */  public..." />
<meta property="article:published_time" content="2011-08-19T01:09:56+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="410905.html">Easy pest controll help</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/merk_u_zerk.html'><span itemprop='name'>merk_u_zerk</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-08-19T01:09:56Z'>
            <time itemprop='dateModified' datetime='2016-08-01T14:12:54Z' class='post-time'>
              August 1, 2016,  2:12pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Well i have a pest control minigame and it takes like 5 people to get the boat to take you there… So i want to make it so it only has to be 1+ players, i am using caution x base PI.<br>
Heres the codes so you can work with it.</p>
<p>[code]package server.model.minigames;</p>
<p>import server.model.players.Client;<br>
import server.model.players.PlayerHandler;<br>
import server.Server;<br>
import java.util.HashMap;<br>
import java.util.Iterator;<br>
import server.util.Misc;</p>
<p>/**</p>
<ul>
<li>
<span class="mention">@author</span> Harlan</li>
<li>Credits to Sanity<br>
*/</li>
</ul>
<p>public class PestControl {</p>
<pre><code>public final int GAME_TIMER = 200; 
public final int WAIT_TIMER = 60;


 /*
 * Hashmap for the waitingBoat players
 */
private static HashMap&lt;Client, Integer&gt; waitingBoat = new HashMap&lt;Client, Integer&gt;();
/*
 * hashmap for the gameArea players
 */
private static HashMap&lt;Client, Integer&gt; gameArea = new HashMap&lt;Client, Integer&gt;();

public int gameTimer = -1;
public int waitTimer = 60;

/** Portals Health ***/
public static int[] portalHealth = { 200, 200, 200, 200 };

/** Void knights health ***/
public static int knightHealth = 200;

/** Array used for storing portals location ***/
public int[][] portalLocation = {{2628,2591},{2680,2588},{2669,2570},{2645,2569}};

/** npcs stored in an array so we can remove them easily **/
public int[] pcNpcsList = { 6142, 6143, 6144, 6145, 3782 };


public static boolean gameStarted = false;

public void process() {
	try {
		setBoatInterface();
		
		if (waitTimer &gt; 0) {
			waitTimer--;
		} else if (waitTimer == 0) 
		startGame();
		if (gameStarted &amp;&amp; playersInGame() &lt; 1)
		endGame(false);
		if (gameTimer &gt; 0 &amp;&amp; gameStarted) {
			gameTimer--;
			//spawnPcNpcs();    
			setGameInterface();
			if (allPortalsDead()) {
				//Misc.println("All portals dead: "+ allPortalsDead());
				endGame(true);
				}
		} else if (gameTimer == 0 &amp;&amp; gameStarted)
				endGame(false);
		} catch(Exception e) {
	 	e.printStackTrace();
		}
}

 public static void removePlayerFromPc(Client player) {
    if (player == null)  
        return;
    if (gameArea.containsKey(player)) {
        player.getPA().movePlayer(2657, 2639, 0);
        gameArea.remove(player);
    }
    
}


public void setBoatInterface() {
  Iterator iterator = waitingBoat.keySet().iterator();
    while (iterator.hasNext()) {
		Client c = (Client) iterator.next();
		if (c != null) {
		if(gameStarted)
				c.getPA().sendFrame126("Next Departure: "+(waitTimer+gameTimer)+"", 21120);
				else 
				c.getPA().sendFrame126("Next Departure: "+waitTimer+"", 21120);
				c.getPA().sendFrame126("Players Ready: "+playersInBoat()+"", 21121);
				c.getPA().sendFrame126("(Need 4 to 25 players)", 21122);
				c.getPA().sendFrame126("Points: "+c.pkPoints+"", 21123);
			}
		}
	}
	
	public int npcCount = 0;
	
	
	public static int random3(int range) { 
		return (int)((java.lang.Math.random() * range));
	}
	
	public void setGameInterface() {
  Iterator iterator = gameArea.keySet().iterator();
    while (iterator.hasNext()) {
		Client c = (Client) iterator.next();
		if (c != null) {
						for (int i = 0; i &lt; portalHealth.length; i++) {
						if (portalHealth[i] &gt; 0) {
							c.getPA().sendFrame126("" +portalHealth[i]+ "", 21111+i);
						} else {
							c.getPA().sendFrame126("Dead", 21111+i);
						}
						}
			c.getPA().sendFrame126(""+knightHealth, 21115);
			c.getPA().sendFrame126(""+c.pcDamage, 21116);
			c.getPA().sendFrame126("Time remaining: "+gameTimer+"", 21117);
		
				}
		}
	}


/***
* Moving players to arena if there's enough players
*/

public void startGame() {
	if (playersInBoat() &lt; 3) {
       waitTimer = WAIT_TIMER;
        return;
		}
		for (int i = 0; i &lt; portalHealth.length; i++) 
		portalHealth[i] = 200;		
				gameTimer = GAME_TIMER;
				waitTimer = -1;
				spawnNpcs();
				gameStarted = true;
	Iterator iterator = waitingBoat.keySet().iterator();
    while (iterator.hasNext()) {
        Client player = (Client) iterator.next();
        if (player == null) {
            continue;
        }	
       if(player.inPcBoat() == false &amp;&amp; waitingBoat.containsKey(player)) {
		waitingBoat.remove(player);
		}
				player.getPA().movePlayer(2656+Misc.random3(3),2614-Misc.random3(4),0);
				gameArea.put(player, 1);
				player.sendMessage("The Pest Control Game has begun!");
				}
				waitingBoat.clear();
			}
		


public int playersInBoat() {
	int players = 0;
    Iterator iterator = (!waitingBoat.isEmpty()) ? waitingBoat.values().iterator() : gameArea.values().iterator();
    while (iterator.hasNext()) {
        if ((Integer) iterator.next() == 1) {
            players++;
        }
    }
    return players;
}

public int playersInGame() {
	int players = 0;
    Iterator iterator = (!gameArea.isEmpty()) ? gameArea.values().iterator() : waitingBoat.values().iterator();
    while (iterator.hasNext()) {
        if ((Integer) iterator.next() == 1) {
            players++;
        }
    }
    return players;
}


public void endGame(boolean won) {
for (int i = 0; i &lt; portalHealth.length; i++) 
	portalHealth[i] = 200;
//npcCount = 0;
gameTimer = -1;
waitTimer = WAIT_TIMER;
gameStarted = false;
Misc.println("Ending Pest Control Game");
for (int i = 0; i &lt; portalHealth.length; i++)
				portalHealth[i] = 0;
Iterator iterator = gameArea.keySet().iterator();
    while (iterator.hasNext()) {
        Client player = (Client) iterator.next();
        if (player == null) {
            continue;
        }
				player.getPA().movePlayer(2657, 2639, 0);
				if (won) {
					player.getDH().sendDialogues(79, 3790);
					player.sendMessage("You have won the pest control game and have been awarded 4 Pest Control points.");
					player.pkPoints += 4;
						player.poisonDamage = 0;
					player.getCombat().resetPrayers();
					for (int i = 0; i &lt; 24; i++) {
				player.playerLevel[i] = player.getPA().getLevelForXP(player.playerXP[i]);
				player.getPA().refreshSkill(i);
					}
					player.specAmount = 10;
					player.getItems().addItem(995, player.combatLevel * 1000);
				
				
				} else {
					player.getDH().sendDialogues(78, 3790);
					player.sendMessage("You failed to kill all the portals in 3 minutes and have not been awarded any points.");
				}
				player.pcDamage = 0;
				player.getItems().addSpecialBar(player.playerEquipment[player.playerWeapon]);					
			}
			gameArea.clear();		
			
	for (int i = 0; i &lt; pcNpcsList.length; i++){
	for (int j = 0; j &lt; Server.npcHandler.npcs.length; j++) {
		if (Server.npcHandler.npcs[j] != null) {
			if (Server.npcHandler.npcs[j].npcType == pcNpcsList[i])
				Server.npcHandler.npcs[j] = null;
		
		}
	}
}

}


public boolean allPortalsDead() {
	int count = 0;
	for (int i = 0; i &lt; portalHealth.length; i++) {
				if (portalHealth[i] &lt;= 4)
					count++;
		}
		return count &gt;= 4;
		
	}
	



public static void leaveWaitingBoat(Client c) {
    if (c == null) {
        return;
    }
    if (waitingBoat.containsKey(c)) {
        waitingBoat.remove(c);
		c.getPA().movePlayer(2657,2639,0);
        return;
    }
}




public static void addToWaitRoom(Client c) {
	if(c == null)
	return;
	
	waitingBoat.put(c, 1);
	c.sendMessage("You have joined the Pest Control boat.");
	c.getPA().movePlayer(2661,2639,0);
}

 
public static boolean isInPc(Client player) {
    return gameArea.containsKey(player);
}


public static boolean isInPcBoat(Client player) {
    return waitingBoat.containsKey(player);
}

public void spawnNpcs() {

	Server.npcHandler.spawnNpc2(6142,2628,2591,0,0,200,0,0,100);
	Server.npcHandler.spawnNpc2(6143,2680,2588,0,0,200,0,0,100);
	Server.npcHandler.spawnNpc2(6144,2669,2570,0,0,200,0,0,100);
	Server.npcHandler.spawnNpc2(6145,2645,2569,0,0,200,0,0,100);
Server.npcHandler.spawnNpc2(3782,2656,2592,0,0,knightHealth,0,0, 100);
}
</code></pre>
<p>}[/code]</p>
      </div>

      <meta itemprop='headline' content='Easy pest controll help'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/mista_pnut.html'><span itemprop='name'>mista_pnut</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-08-19T01:16:20Z'>
            <time itemprop='dateModified' datetime='2016-08-01T14:12:55Z' class='post-time'>
              August 1, 2016,  2:12pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[code]package server.model.minigames;</p>
<p>import server.model.players.Client;<br>
import server.model.players.PlayerHandler;<br>
import server.Server;<br>
import java.util.HashMap;<br>
import java.util.Iterator;<br>
import server.util.Misc;</p>
<p>/**</p>
<ul>
<li>
<span class="mention">@author</span> Harlan</li>
<li>Credits to Sanity<br>
*/</li>
</ul>
<p>public class PestControl {</p>
<pre><code>    public final int GAME_TIMER = 200; 
    public final int WAIT_TIMER = 60;

    
     /*
 * Hashmap for the waitingBoat players
 */
private static HashMap&lt;Client, Integer&gt; waitingBoat = new HashMap&lt;Client, Integer&gt;();
/*
 * hashmap for the gameArea players
 */
private static HashMap&lt;Client, Integer&gt; gameArea = new HashMap&lt;Client, Integer&gt;();
    
    public int gameTimer = -1;
    public int waitTimer = 60;
    
    /** Portals Health ***/
    public static int[] portalHealth = { 200, 200, 200, 200 };
    
    /** Void knights health ***/
    public static int knightHealth = 200;
    
    /** Array used for storing portals location ***/
    public int[][] portalLocation = {{2628,2591},{2680,2588},{2669,2570},{2645,2569}};
    
    /** npcs stored in an array so we can remove them easily **/
    public int[] pcNpcsList = { 6142, 6143, 6144, 6145, 3782 };
    
    
    public static boolean gameStarted = false;

    public void process() {
            try {
                    setBoatInterface();
                    
                    if (waitTimer &gt; 0) {
                            waitTimer--;
                    } else if (waitTimer == 0) 
                    startGame();
                    if (gameStarted &amp;&amp; playersInGame() &lt; 1)
                    endGame(false);
                    if (gameTimer &gt; 0 &amp;&amp; gameStarted) {
                            gameTimer--;
                            //spawnPcNpcs();    
                            setGameInterface();
                            if (allPortalsDead()) {
                                    //Misc.println("All portals dead: "+ allPortalsDead());
                                    endGame(true);
                                    }
                    } else if (gameTimer == 0 &amp;&amp; gameStarted)
                                    endGame(false);
                    } catch(Exception e) {
                     e.printStackTrace();
                    }
    }
    
     public static void removePlayerFromPc(Client player) {
    if (player == null)  
        return;
    if (gameArea.containsKey(player)) {
        player.getPA().movePlayer(2657, 2639, 0);
        gameArea.remove(player);
    }
    
}

    
    public void setBoatInterface() {
      Iterator iterator = waitingBoat.keySet().iterator();
    while (iterator.hasNext()) {
                    Client c = (Client) iterator.next();
                    if (c != null) {
                    if(gameStarted)
                                    c.getPA().sendFrame126("Next Departure: "+(waitTimer+gameTimer)+"", 21120);
                                    else 
                                    c.getPA().sendFrame126("Next Departure: "+waitTimer+"", 21120);
                                    c.getPA().sendFrame126("Players Ready: "+playersInBoat()+"", 21121);
                                    c.getPA().sendFrame126("(Need 1 to 25 players)", 21122);
                                    c.getPA().sendFrame126("Points: "+c.pkPoints+"", 21123);
                            }
                    }
            }
            
            public int npcCount = 0;
            
            
            public static int random3(int range) { 
                    return (int)((java.lang.Math.random() * range));
            }
            
            public void setGameInterface() {
      Iterator iterator = gameArea.keySet().iterator();
    while (iterator.hasNext()) {
                    Client c = (Client) iterator.next();
                    if (c != null) {
                                                    for (int i = 0; i &lt; portalHealth.length; i++) {
                                                    if (portalHealth[i] &gt; 0) {
                                                            c.getPA().sendFrame126("" +portalHealth[i]+ "", 21111+i);
                                                    } else {
                                                            c.getPA().sendFrame126("Dead", 21111+i);
                                                    }
                                                    }
                            c.getPA().sendFrame126(""+knightHealth, 21115);
                            c.getPA().sendFrame126(""+c.pcDamage, 21116);
                            c.getPA().sendFrame126("Time remaining: "+gameTimer+"", 21117);
                    
                                    }
                    }
            }
    
    
    /***
    * Moving players to arena if there's enough players
    */
    
    public void startGame() {
            if (playersInBoat() &lt; 3) {
       waitTimer = WAIT_TIMER;
        return;
                    }
                    for (int i = 0; i &lt; portalHealth.length; i++) 
                    portalHealth[i] = 200;                
                                    gameTimer = GAME_TIMER;
                                    waitTimer = -1;
                                    spawnNpcs();
                                    gameStarted = true;
            Iterator iterator = waitingBoat.keySet().iterator();
    while (iterator.hasNext()) {
        Client player = (Client) iterator.next();
        if (player == null) {
            continue;
        }        
       if(player.inPcBoat() == false &amp;&amp; waitingBoat.containsKey(player)) {
                    waitingBoat.remove(player);
                    }
                                    player.getPA().movePlayer(2656+Misc.random3(3),2614-Misc.random3(1),0);
                                    gameArea.put(player, 1);
                                    player.sendMessage("The Pest Control Game has begun!");
                                    }
                                    waitingBoat.clear();
                            }
                    
    

    public int playersInBoat() {
            int players = 0;
    Iterator iterator = (!waitingBoat.isEmpty()) ? waitingBoat.values().iterator() : gameArea.values().iterator();
    while (iterator.hasNext()) {
        if ((Integer) iterator.next() == 1) {
            players++;
        }
    }
    return players;
}
    
    public int playersInGame() {
            int players = 0;
    Iterator iterator = (!gameArea.isEmpty()) ? gameArea.values().iterator() : waitingBoat.values().iterator();
    while (iterator.hasNext()) {
        if ((Integer) iterator.next() == 1) {
            players++;
        }
    }
    return players;
}
    

    public void endGame(boolean won) {
    for (int i = 0; i &lt; portalHealth.length; i++) 
            portalHealth[i] = 200;
    //npcCount = 0;
    gameTimer = -1;
    waitTimer = WAIT_TIMER;
    gameStarted = false;
    Misc.println("Ending Pest Control Game");
    for (int i = 0; i &lt; portalHealth.length; i++)
                                    portalHealth[i] = 0;
    Iterator iterator = gameArea.keySet().iterator();
    while (iterator.hasNext()) {
        Client player = (Client) iterator.next();
        if (player == null) {
            continue;
        }
                                    player.getPA().movePlayer(2657, 2639, 0);
                                    if (won) {
                                            player.getDH().sendDialogues(79, 3790);
                                            player.sendMessage("You have won the pest control game and have been awarded 4 Pest Control points.");
                                            player.pkPoints += 4;
                                                    player.poisonDamage = 0;
                                            player.getCombat().resetPrayers();
                                            for (int i = 0; i &lt; 24; i++) {
                                    player.playerLevel[i] = player.getPA().getLevelForXP(player.playerXP[i]);
                                    player.getPA().refreshSkill(i);
                                            }
                                            player.specAmount = 10;
                                            player.getItems().addItem(995, player.combatLevel * 1000);
                                    
                                    
                                    } else {
                                            player.getDH().sendDialogues(78, 3790);
                                            player.sendMessage("You failed to kill all the portals in 3 minutes and have not been awarded any points.");
                                    }
                                    player.pcDamage = 0;
                                    player.getItems().addSpecialBar(player.playerEquipment[player.playerWeapon]);                                        
                            }
                            gameArea.clear();                
                            
            for (int i = 0; i &lt; pcNpcsList.length; i++){
            for (int j = 0; j &lt; Server.npcHandler.npcs.length; j++) {
                    if (Server.npcHandler.npcs[j] != null) {
                            if (Server.npcHandler.npcs[j].npcType == pcNpcsList[i])
                                    Server.npcHandler.npcs[j] = null;
                    
                    }
            }
    }

    }
    

    public boolean allPortalsDead() {
            int count = 0;
            for (int i = 0; i &lt; portalHealth.length; i++) {
                                    if (portalHealth[i] &lt;= 4)
                                            count++;
                    }
                    return count &gt;= 4;
                    
            }
            
    
    
    
    public static void leaveWaitingBoat(Client c) {
    if (c == null) {
        return;
    }
    if (waitingBoat.containsKey(c)) {
        waitingBoat.remove(c);
                    c.getPA().movePlayer(2657,2639,0);
        return;
    }
}
    
    
    

    public static void addToWaitRoom(Client c) {
            if(c == null)
            return;
            
            waitingBoat.put(c, 1);
            c.sendMessage("You have joined the Pest Control boat.");
            c.getPA().movePlayer(2661,2639,0);
    }
    
     
public static boolean isInPc(Client player) {
    return gameArea.containsKey(player);
}


public static boolean isInPcBoat(Client player) {
    return waitingBoat.containsKey(player);
}

    public void spawnNpcs() {
    
            Server.npcHandler.spawnNpc2(6142,2628,2591,0,0,200,0,0,100);
            Server.npcHandler.spawnNpc2(6143,2680,2588,0,0,200,0,0,100);
            Server.npcHandler.spawnNpc2(6144,2669,2570,0,0,200,0,0,100);
            Server.npcHandler.spawnNpc2(6145,2645,2569,0,0,200,0,0,100);
    Server.npcHandler.spawnNpc2(3782,2656,2592,0,0,knightHealth,0,0, 100);
    }
</code></pre>
<p>}<br>
[/code]</p>
<p>MistaPnut on runescape. :S<br>
If that doesn’t work tell me, I know what to change.</p>
      </div>

      <meta itemprop='headline' content='Easy pest controll help'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/merk_u_zerk.html'><span itemprop='name'>merk_u_zerk</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-08-19T01:20:53Z'>
            <time itemprop='dateModified' datetime='2016-08-01T14:12:55Z' class='post-time'>
              August 1, 2016,  2:12pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Did not work.</p>
      </div>

      <meta itemprop='headline' content='Easy pest controll help'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/mista_pnut.html'><span itemprop='name'>mista_pnut</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-08-19T01:24:56Z'>
            <time itemprop='dateModified' datetime='2016-08-01T14:12:56Z' class='post-time'>
              August 1, 2016,  2:12pm
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[code]package server.model.minigames;</p>
<p>import server.model.players.Client;<br>
import server.model.players.PlayerHandler;<br>
import server.Server;<br>
import java.util.HashMap;<br>
import java.util.Iterator;<br>
import server.util.Misc;</p>
<p>/**</p>
<ul>
<li>
<span class="mention">@author</span> Harlan</li>
<li>Credits to Sanity<br>
*/</li>
</ul>
<p>public class PestControl {</p>
<pre><code>    public final int GAME_TIMER = 200; 
    public final int WAIT_TIMER = 60;

    
     /*
 * Hashmap for the waitingBoat players
 */
private static HashMap&lt;Client, Integer&gt; waitingBoat = new HashMap&lt;Client, Integer&gt;();
/*
 * hashmap for the gameArea players
 */
private static HashMap&lt;Client, Integer&gt; gameArea = new HashMap&lt;Client, Integer&gt;();
    
    public int gameTimer = -1;
    public int waitTimer = 60;
    
    /** Portals Health ***/
    public static int[] portalHealth = { 200, 200, 200, 200 };
    
    /** Void knights health ***/
    public static int knightHealth = 200;
    
    /** Array used for storing portals location ***/
    public int[][] portalLocation = {{2628,2591},{2680,2588},{2669,2570},{2645,2569}};
    
    /** npcs stored in an array so we can remove them easily **/
    public int[] pcNpcsList = { 6142, 6143, 6144, 6145, 3782 };
    
    
    public static boolean gameStarted = false;

    public void process() {
            try {
                    setBoatInterface();
                    
                    if (waitTimer &gt; 0) {
                            waitTimer--;
                    } else if (waitTimer == 0) 
                    startGame();
                    if (gameStarted &amp;&amp; playersInGame() &lt; 1)
                    endGame(false);
                    if (gameTimer &gt; 0 &amp;&amp; gameStarted) {
                            gameTimer--;
                            //spawnPcNpcs();    
                            setGameInterface();
                            if (allPortalsDead()) {
                                    //Misc.println("All portals dead: "+ allPortalsDead());
                                    endGame(true);
                                    }
                    } else if (gameTimer == 0 &amp;&amp; gameStarted)
                                    endGame(false);
                    } catch(Exception e) {
                     e.printStackTrace();
                    }
    }
    
     public static void removePlayerFromPc(Client player) {
    if (player == null)  
        return;
    if (gameArea.containsKey(player)) {
        player.getPA().movePlayer(2657, 2639, 0);
        gameArea.remove(player);
    }
    
}

    
    public void setBoatInterface() {
      Iterator iterator = waitingBoat.keySet().iterator();
    while (iterator.hasNext()) {
                    Client c = (Client) iterator.next();
                    if (c != null) {
                    if(gameStarted)
                                    c.getPA().sendFrame126("Next Departure: "+(waitTimer+gameTimer)+"", 21120);
                                    else 
                                    c.getPA().sendFrame126("Next Departure: "+waitTimer+"", 21120);
                                    c.getPA().sendFrame126("Players Ready: "+playersInBoat()+"", 21121);
                                    c.getPA().sendFrame126("(Need 1 to 25 players)", 21122);
                                    c.getPA().sendFrame126("Points: "+c.pkPoints+"", 21123);
                            }
                    }
            }
            
            public int npcCount = 0;
            
            
            public static int random3(int range) { 
                    return (int)((java.lang.Math.random() * range));
            }
            
            public void setGameInterface() {
      Iterator iterator = gameArea.keySet().iterator();
    while (iterator.hasNext()) {
                    Client c = (Client) iterator.next();
                    if (c != null) {
                                                    for (int i = 0; i &lt; portalHealth.length; i++) {
                                                    if (portalHealth[i] &gt; 0) {
                                                            c.getPA().sendFrame126("" +portalHealth[i]+ "", 21111+i);
                                                    } else {
                                                            c.getPA().sendFrame126("Dead", 21111+i);
                                                    }
                                                    }
                            c.getPA().sendFrame126(""+knightHealth, 21115);
                            c.getPA().sendFrame126(""+c.pcDamage, 21116);
                            c.getPA().sendFrame126("Time remaining: "+gameTimer+"", 21117);
                    
                                    }
                    }
            }
    
    
    /***
    * Moving players to arena if there's enough players
    */
    
    public void startGame() {
            if (playersInBoat() &gt;= 1) {
       waitTimer = WAIT_TIMER;
        return;
                    }
                    for (int i = 0; i &lt; portalHealth.length; i++) 
                    portalHealth[i] = 200;                
                                    gameTimer = GAME_TIMER;
                                    waitTimer = -1;
                                    spawnNpcs();
                                    gameStarted = true;
            Iterator iterator = waitingBoat.keySet().iterator();
    while (iterator.hasNext()) {
        Client player = (Client) iterator.next();
        if (player == null) {
            continue;
        }        
       if(player.inPcBoat() == false &amp;&amp; waitingBoat.containsKey(player)) {
                    waitingBoat.remove(player);
                    }
                                    player.getPA().movePlayer(2656+Misc.random3(3),2614-Misc.random3(1),0);
                                    gameArea.put(player, 1);
                                    player.sendMessage("The Pest Control Game has begun!");
                                    }
                                    waitingBoat.clear();
                            }
                    
    

    public int playersInBoat() {
            int players = 0;
    Iterator iterator = (!waitingBoat.isEmpty()) ? waitingBoat.values().iterator() : gameArea.values().iterator();
    while (iterator.hasNext()) {
        if ((Integer) iterator.next() == 1) {
            players++;
        }
    }
    return players;
}
    
    public int playersInGame() {
            int players = 0;
    Iterator iterator = (!gameArea.isEmpty()) ? gameArea.values().iterator() : waitingBoat.values().iterator();
    while (iterator.hasNext()) {
        if ((Integer) iterator.next() == 1) {
            players++;
        }
    }
    return players;
}
    

    public void endGame(boolean won) {
    for (int i = 0; i &lt; portalHealth.length; i++) 
            portalHealth[i] = 200;
    //npcCount = 0;
    gameTimer = -1;
    waitTimer = WAIT_TIMER;
    gameStarted = false;
    Misc.println("Ending Pest Control Game");
    for (int i = 0; i &lt; portalHealth.length; i++)
                                    portalHealth[i] = 0;
    Iterator iterator = gameArea.keySet().iterator();
    while (iterator.hasNext()) {
        Client player = (Client) iterator.next();
        if (player == null) {
            continue;
        }
                                    player.getPA().movePlayer(2657, 2639, 0);
                                    if (won) {
                                            player.getDH().sendDialogues(79, 3790);
                                            player.sendMessage("You have won the pest control game and have been awarded 4 Pest Control points.");
                                            player.pkPoints += 4;
                                                    player.poisonDamage = 0;
                                            player.getCombat().resetPrayers();
                                            for (int i = 0; i &lt; 24; i++) {
                                    player.playerLevel[i] = player.getPA().getLevelForXP(player.playerXP[i]);
                                    player.getPA().refreshSkill(i);
                                            }
                                            player.specAmount = 10;
                                            player.getItems().addItem(995, player.combatLevel * 1000);
                                    
                                    
                                    } else {
                                            player.getDH().sendDialogues(78, 3790);
                                            player.sendMessage("You failed to kill all the portals in 3 minutes and have not been awarded any points.");
                                    }
                                    player.pcDamage = 0;
                                    player.getItems().addSpecialBar(player.playerEquipment[player.playerWeapon]);                                        
                            }
                            gameArea.clear();                
                            
            for (int i = 0; i &lt; pcNpcsList.length; i++){
            for (int j = 0; j &lt; Server.npcHandler.npcs.length; j++) {
                    if (Server.npcHandler.npcs[j] != null) {
                            if (Server.npcHandler.npcs[j].npcType == pcNpcsList[i])
                                    Server.npcHandler.npcs[j] = null;
                    
                    }
            }
    }

    }
    

    public boolean allPortalsDead() {
            int count = 0;
            for (int i = 0; i &lt; portalHealth.length; i++) {
                                    if (portalHealth[i] &lt;= 4)
                                            count++;
                    }
                    return count &gt;= 4;
                    
            }
            
    
    
    
    public static void leaveWaitingBoat(Client c) {
    if (c == null) {
        return;
    }
    if (waitingBoat.containsKey(c)) {
        waitingBoat.remove(c);
                    c.getPA().movePlayer(2657,2639,0);
        return;
    }
}
    
    
    

    public static void addToWaitRoom(Client c) {
            if(c == null)
            return;
            
            waitingBoat.put(c, 1);
            c.sendMessage("You have joined the Pest Control boat.");
            c.getPA().movePlayer(2661,2639,0);
    }
    
     
public static boolean isInPc(Client player) {
    return gameArea.containsKey(player);
}


public static boolean isInPcBoat(Client player) {
    return waitingBoat.containsKey(player);
}

    public void spawnNpcs() {
    
            Server.npcHandler.spawnNpc2(6142,2628,2591,0,0,200,0,0,100);
            Server.npcHandler.spawnNpc2(6143,2680,2588,0,0,200,0,0,100);
            Server.npcHandler.spawnNpc2(6144,2669,2570,0,0,200,0,0,100);
            Server.npcHandler.spawnNpc2(6145,2645,2569,0,0,200,0,0,100);
    Server.npcHandler.spawnNpc2(3782,2656,2592,0,0,knightHealth,0,0, 100);
    }
</code></pre>
<p>}[/code]</p>
<p>This one should, if it doesn’t I put the arrow backwards. :\</p>
      </div>

      <meta itemprop='headline' content='Easy pest controll help'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/merk_u_zerk.html'><span itemprop='name'>merk_u_zerk</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-08-19T01:28:36Z'>
            <time itemprop='dateModified' datetime='2016-08-01T14:12:56Z' class='post-time'>
              August 1, 2016,  2:12pm
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>What part are you trying to change copy and paste it.</p>
      </div>

      <meta itemprop='headline' content='Easy pest controll help'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/lostmyphat.html'><span itemprop='name'>lostmyphat</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-08-19T01:28:42Z'>
            <time itemprop='dateModified' datetime='2016-08-01T14:12:56Z' class='post-time'>
              August 1, 2016,  2:12pm
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Helping is free. As for the guy who wants the RSGP, you actually think he will give it? ROFL, what a joke.</p>
      </div>

      <meta itemprop='headline' content='Easy pest controll help'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/merk_u_zerk.html'><span itemprop='name'>merk_u_zerk</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-08-19T01:30:45Z'>
            <time itemprop='dateModified' datetime='2016-08-01T14:12:56Z' class='post-time'>
              August 1, 2016,  2:12pm
            </time>
        <span itemprop='position'>#7</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Idiot, i’ts 2m i bot all day long i could care less about 2m.</p>
      </div>

      <meta itemprop='headline' content='Easy pest controll help'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/mista_pnut.html'><span itemprop='name'>mista_pnut</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-08-19T01:32:25Z'>
            <time itemprop='dateModified' datetime='2016-08-01T14:12:56Z' class='post-time'>
              August 1, 2016,  2:12pm
            </time>
        <span itemprop='position'>#8</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <pre><code class="lang-auto">                if (playersInBoat() &gt;= 1) {</code></pre>
<p>That’s what I changed. It was &lt; 3</p>
<p>It might need to be &lt; 1</p>
<p>And I doubt I’ll get it, but it never hurts to try. :\</p>
      </div>

      <meta itemprop='headline' content='Easy pest controll help'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/merk_u_zerk.html'><span itemprop='name'>merk_u_zerk</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-08-19T01:40:22Z'>
            <time itemprop='dateModified' datetime='2016-08-01T14:12:57Z' class='post-time'>
              August 1, 2016,  2:12pm
            </time>
        <span itemprop='position'>#9</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p><img src="../../images/emoji/twitter/frowningae52.png?v=5" title=":frowning:" class="emoji" alt=":frowning:"> nothing is working yet and i went into minigames and a see pestcontrol is that the folder im suppose to look in to change?</p>
      </div>

      <meta itemprop='headline' content='Easy pest controll help'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/mista_pnut.html'><span itemprop='name'>mista_pnut</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-08-19T01:44:39Z'>
            <time itemprop='dateModified' datetime='2016-08-01T14:12:57Z' class='post-time'>
              August 1, 2016,  2:12pm
            </time>
        <span itemprop='position'>#10</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>No clue, I usually stick to deltas. :\</p>
<p>I just re-read it all… It should be working…</p>
      </div>

      <meta itemprop='headline' content='Easy pest controll help'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/merk_u_zerk.html'><span itemprop='name'>merk_u_zerk</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-08-19T01:54:00Z'>
            <time itemprop='dateModified' datetime='2016-08-01T14:12:57Z' class='post-time'>
              August 1, 2016,  2:12pm
            </time>
        <span itemprop='position'>#11</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Please someone help <img src="../../images/emoji/twitter/frowningae52.png?v=5" title=":frowning:" class="emoji" alt=":frowning:"></p>
      </div>

      <meta itemprop='headline' content='Easy pest controll help'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/helloimwhite.html'><span itemprop='name'>helloimwhite</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-08-19T20:31:24Z'>
            <time itemprop='dateModified' datetime='2016-08-01T14:13:51Z' class='post-time'>
              August 1, 2016,  2:13pm
            </time>
        <span itemprop='position'>#12</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>find <code>public void startGame() {</code> and paste below… <code>if (playersInBoat() &gt; 2) {</code>… put that above <code>gameTime = GAME_TIMER;</code></p>
<p>should work fine</p>
      </div>

      <meta itemprop='headline' content='Easy pest controll help'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/ExtremeX-Scape.html'><span itemprop='name'>ExtremeX-Scape</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-08-19T20:53:44Z'>
            <time itemprop='dateModified' datetime='2016-08-01T14:14:15Z' class='post-time'>
              August 1, 2016,  2:14pm
            </time>
        <span itemprop='position'>#13</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>You’re all fucking retarded,</p>
<pre><code class="lang-auto">
package server.model.minigames;

import java.util.HashMap;
import java.util.Iterator;

import server.Server;
import server.model.npcs.NPCHandler;
import server.model.players.Client;
import server.util.Misc;

public class PestControl {

	private static HashMap&lt;Client, Integer&gt; gameArea = new HashMap&lt;Client, Integer&gt;();
	public static boolean gameStarted = false;

	public static int knightHealth = 200;

	public static int[] portalHealth = { 200, 200, 200, 200 };

	private static HashMap&lt;Client, Integer&gt; waitingBoat = new HashMap&lt;Client, Integer&gt;();

	public static void addToWaitRoom(final Client c) {
		if (c == null) {
			return;
		}

		PestControl.waitingBoat.put(c, 1);
		c.sendMessage("You have joined the Pest Control boat.");
		c.getPA().movePlayer(2661, 2639, 0);
	}

	public static boolean isInPc(final Client player) {
		return PestControl.gameArea.containsKey(player);
	}

	public static boolean isInPcBoat(final Client player) {
		return PestControl.waitingBoat.containsKey(player);
	}

	public static void leaveWaitingBoat(final Client c) {
		if (c == null) {
			return;
		}
		if (PestControl.waitingBoat.containsKey(c)) {
			PestControl.waitingBoat.remove(c);
			c.getPA().movePlayer(2657, 2639, 0);
			return;
		}
	}

	public static int random3(final int range) {
		return (int) ((java.lang.Math.random() * range));
	}

	public static void removePlayerFromPc(final Client player) {
		if (player == null) {
			return;
		}
		if (PestControl.gameArea.containsKey(player)) {
			player.getPA().movePlayer(2657, 2639, 0);
			PestControl.gameArea.remove(player);
		}

	}

	public final int GAME_TIMER = 200;

	public int gameTimer = -1;

	public int npcCount = 0;

	public int[] pcNpcsList = { 6142, 6143, 6144, 6145, 3782 };

	public int[][] portalLocation = { 
		{ 2628, 2591 }, 
		{ 2680, 2588 },
		{ 2669, 2570 }, 
		{ 2645, 2569 } 
	};

	public final int WAIT_TIMER = 60;

	public int waitTimer = 60;

	public boolean allPortalsDead() {
		int count = 0;
		for (final int element : PestControl.portalHealth) {
			if (element &lt;= 4) {
				count++;
			}
		}
		return count &gt;= 1;
	}

	public void endGame(final boolean won) {
		for (int i = 0; i &lt; PestControl.portalHealth.length; i++) {
			PestControl.portalHealth[i] = 200;
		}
		this.gameTimer = -1;
		this.waitTimer = this.WAIT_TIMER;
		PestControl.gameStarted = false;
		Misc.println("Ending Pest Control Game");
		for (int i = 0; i &lt; PestControl.portalHealth.length; i++) {
			PestControl.portalHealth[i] = 0;
		}
		final Iterator&lt;Client&gt; iterator = PestControl.gameArea.keySet()
				.iterator();
		while (iterator.hasNext()) {
			final Client player = iterator.next();
			if (player == null) {
				continue;
			}
			player.getPA().movePlayer(2657, 2639, 0);
			if (won) {
				player.getDH().sendDialogues(79, 3790);
				player.sendMessage("You have won the pest control game and have been awarded 4 Pest Control points.");
				player.pkPoints += 4;
				player.poisonDamage = 0;
				player.getCombat().resetPrayers();
				for (int i = 0; i &lt; 24; i++) {
					player.playerLevel[i] = player.getPA().getLevelForXP(
							player.playerXP[i]);
					player.getPA().refreshSkill(i);
				}
				player.specAmount = 10;
				player.getItems().addItem(995, player.combatLevel * 1000);

			} else {
				player.getDH().sendDialogues(78, 3790);
				player.sendMessage("You failed to kill all the portals in 3 minutes and have not been awarded any points.");
			}
			player.pcDamage = 0;
			player.getItems().addSpecialBar(
					player.playerEquipment[player.playerWeapon]);
		}
		PestControl.gameArea.clear();

		for (final int element : this.pcNpcsList) {
			for (int j = 0; j &lt; NPCHandler.npcs.length; j++) {
				if (NPCHandler.npcs[j] != null) {
					if (NPCHandler.npcs[j].npcType == element) {
						NPCHandler.npcs[j] = null;
					}

				}
			}
		}

	}

	public int playersInBoat() {
		int players = 0;
		final Iterator&lt;Integer&gt; iterator = (!PestControl.waitingBoat.isEmpty()) ? PestControl.waitingBoat
				.values().iterator() : PestControl.gameArea.values().iterator();
		while (iterator.hasNext()) {
			if (iterator.next() == 1) {
				players++;
			}
		}
		return players;
	}

	public int playersInGame() {
		int players = 0;
		final Iterator&lt;Integer&gt; iterator = (!PestControl.gameArea.isEmpty()) ? PestControl.gameArea
				.values().iterator() : PestControl.waitingBoat.values()
				.iterator();
		while (iterator.hasNext()) {
			if (iterator.next() == 1) {
				players++;
			}
		}
		return players;
	}

	public void process() {
		try {
			this.setBoatInterface();

			if (this.waitTimer &gt; 0) {
				this.waitTimer--;
			} else if (this.waitTimer == 0) {
				this.startGame();
			}
			if (PestControl.gameStarted &amp;&amp; (this.playersInGame() &lt; 1)) {
				this.endGame(false);
			}
			if ((this.gameTimer &gt; 0) &amp;&amp; PestControl.gameStarted) {
				this.gameTimer--;
				this.setGameInterface();
				if (this.allPortalsDead()) {
					this.endGame(true);
				}
			} else if ((this.gameTimer == 0) &amp;&amp; PestControl.gameStarted) {
				this.endGame(false);
			}
		} catch (final Exception e) {
			e.printStackTrace();
		}
	}

	public void setBoatInterface() {
		final Iterator&lt;Client&gt; iterator = PestControl.waitingBoat.keySet()
				.iterator();
		while (iterator.hasNext()) {
			final Client c = iterator.next();
			if (c != null) {
				if (PestControl.gameStarted) {
					c.getPA().sendFrame126(
							"Next Departure: "
									+ (this.waitTimer + this.gameTimer), 21120);
				} else {
					c.getPA().sendFrame126("Next Departure: " + this.waitTimer,
							21120);
				}
				c.getPA().sendFrame126("Players Ready: " + playersInBoat(), 21121);
				c.getPA().sendFrame126("(Need 1 to 25 players)", 21122);
				c.getPA().sendFrame126("Points: " + c.pkPoints, 21123);
			}
		}
	}

	public void setGameInterface() {
		final Iterator&lt;Client&gt; iterator = PestControl.gameArea.keySet()
				.iterator();
		while (iterator.hasNext()) {
			final Client c = iterator.next();
			if (c != null) {
				for (int i = 0; i &lt; PestControl.portalHealth.length; i++) {
					if (PestControl.portalHealth[i] &gt; 0) {
						c.getPA().sendFrame126(
								"" + PestControl.portalHealth[i],
								21111 + i);
					} else {
						c.getPA().sendFrame126("Dead", 21111 + i);
					}
				}
				c.getPA().sendFrame126("" + PestControl.knightHealth, 21115);
				c.getPA().sendFrame126("" + c.pcDamage, 21116);
				c.getPA().sendFrame126("Time remaining: " + gameTimer, 21117);

			}
		}
	}

	public void spawnNpcs() {

		Server.npcHandler.spawnNpc2(6142, 2628, 2591, 0, 0, 200, 0, 0, 100);
		Server.npcHandler.spawnNpc2(6143, 2680, 2588, 0, 0, 200, 0, 0, 100);
		Server.npcHandler.spawnNpc2(6144, 2669, 2570, 0, 0, 200, 0, 0, 100);
		Server.npcHandler.spawnNpc2(6145, 2645, 2569, 0, 0, 200, 0, 0, 100);
		Server.npcHandler.spawnNpc2(3782, 2656, 2592, 0, 0, knightHealth, 0, 0, 100);
	}

	/***
	 * Moving players to arena if there's enough players
	 */

	public void startGame() {
		if (this.playersInBoat() &lt; 3) {
			this.waitTimer = this.WAIT_TIMER;
			return;
		}
		for (int i = 0; i &lt; PestControl.portalHealth.length; i++) {
			PestControl.portalHealth[i] = 200;
		}
		this.gameTimer = this.GAME_TIMER;
		this.waitTimer = -1;
		this.spawnNpcs();
		PestControl.gameStarted = true;
		final Iterator&lt;Client&gt; iterator = PestControl.waitingBoat.keySet()
				.iterator();
		while (iterator.hasNext()) {
			final Client player = iterator.next();
			if (player == null) {
				continue;
			}
			if ((player.inPcBoat() == false)
					&amp;&amp; PestControl.waitingBoat.containsKey(player)) {
				PestControl.waitingBoat.remove(player);
			}
			player.getPA().movePlayer(2656 + Misc.random3(3),
					2614 - Misc.random3(4), 0);
			PestControl.gameArea.put(player, 1);
			player.sendMessage("The Pest Control Game has begun!");
		}
		PestControl.waitingBoat.clear();
	}

}
</code></pre>
      </div>

      <meta itemprop='headline' content='Easy pest controll help'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/easy-pest-controll-help/410905 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Aug 2019 21:35:33 GMT -->
</html>
