<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>[317 PI] Connection Lost</title>
    <link>https://forum.moparisthebest.com/t/317-pi-connection-lost/550941</link>
    <description>Hello, Dear Moparscapers.
I have a very strange issue, I have never ever faced before.
I am working on one of the old SoulSplit PI releases.
I have been working on it for a while,  however, I have been facing this issue, where only one person can login to the server and no one else.
We have tried making a jar, same situation. We have checked the IP&#39;s and ports and everything seems to be &quot;A ok&quot;
Does anyone know what kind of problem I am running into? Where no one can login but only 1 person.
When more than one person tries to login, it says: &quot;Connection Lost - please wait attempting to re-establish....&quot; as soon as you login, it goes through until the black screen, then it says: Connection lost..... and logs you out. When you try the second time, it says: &quot;Your account is already logged in, please try again in 60 seconds... &quot; However, the account isn&#39;t actually online...
Anyways, I hope someone can help here.
Thanks.</description>
    
    <lastBuildDate>Sun, 12 Apr 2015 20:34:21 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/317-pi-connection-lost/550941.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>[317 PI] Connection Lost</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <p>You guys are amazing at ignoring people when they ask you to do things.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-pi-connection-lost/550941/20">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-pi-connection-lost/550941/20</link>
        <pubDate>Sun, 12 Apr 2015 20:34:21 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-550941-20</guid>
        <source url="https://forum.moparisthebest.com/t/317-pi-connection-lost/550941.rss">[317 PI] Connection Lost</source>
      </item>
      <item>
        <title>[317 PI] Connection Lost</title>
        <dc:creator><![CDATA[@malimt malimt]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/malimt">@malimt</a> wrote:</p>
          <blockquote>
              <p>BUMPPPPPPPPPP No help yet…</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-pi-connection-lost/550941/19">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-pi-connection-lost/550941/19</link>
        <pubDate>Sun, 12 Apr 2015 19:58:52 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-550941-19</guid>
        <source url="https://forum.moparisthebest.com/t/317-pi-connection-lost/550941.rss">[317 PI] Connection Lost</source>
      </item>
      <item>
        <title>[317 PI] Connection Lost</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <p>[quote=“mattadog18, post:17, topic:550941”][quote author=sk8rdude461 link=topic=669854.msg4479470#msg4479470 date=1428621929]</p>
<aside class="quote">
<blockquote>
<p>Yes sir we did this is what it shows.</p>
</blockquote>
</aside>
<p>Add another similar line into your initialize of Client.java, underneath the for loop that checks the player name against the currently online players.</p>
<p>If it’s still printing -1 there, then it’s not setting the player id correctly.<br>
[/quote]</p>
<p>Ok it still isnt working but doing something weird if you could message me on skype: khoda.cav so we can discuss this over that.[/quote]<br>
Of course it’s not working. I didn’t give you a solution. I told you to add a line to print the player ID.</p>
<p>By taking the conversation to skype that will limit the amount of people that can help (from whomever sees the post down to just me), and it will also prevent other users from finding the solution on your post. But if you must, my skype is on my profile.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-pi-connection-lost/550941/18">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-pi-connection-lost/550941/18</link>
        <pubDate>Fri, 10 Apr 2015 01:15:14 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-550941-18</guid>
        <source url="https://forum.moparisthebest.com/t/317-pi-connection-lost/550941.rss">[317 PI] Connection Lost</source>
      </item>
      <item>
        <title>[317 PI] Connection Lost</title>
        <dc:creator><![CDATA[@mattadog18 mattadog18]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/mattadog18">@mattadog18</a> wrote:</p>
          <blockquote>
              <p>[quote=“sk8rdude461, post:16, topic:550941”][quote author=mattadog18 link=topic=669854.msg4479459#msg4479459 date=1428618566]<br>
Yes sir we did this is what it shows.</p>
<p><img src="http://i.imgur.com/mEVlbT0.png" alt width="" height=""><br>
[/quote]<br>
Add another similar line into your initialize of Client.java, underneath the for loop that checks the player name against the currently online players.</p>
<p>If it’s still printing -1 there, then it’s not setting the player id correctly.[/quote]</p>
<p>Ok it still isnt working but doing something weird if you could message me on skype: khoda.cav so we can discuss this over that.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-pi-connection-lost/550941/17">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-pi-connection-lost/550941/17</link>
        <pubDate>Thu, 09 Apr 2015 23:34:07 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-550941-17</guid>
        <source url="https://forum.moparisthebest.com/t/317-pi-connection-lost/550941.rss">[317 PI] Connection Lost</source>
      </item>
      <item>
        <title>[317 PI] Connection Lost</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <p>[quote=“mattadog18, post:15, topic:550941”]Yes sir we did this is what it shows.</p>
<p><img src="http://i.imgur.com/mEVlbT0.png" alt width="" height="">[/quote]<br>
Add another similar line into your initialize of Client.java, underneath the for loop that checks the player name against the currently online players.</p>
<p>If it’s still printing -1 there, then it’s not setting the player id correctly.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-pi-connection-lost/550941/16">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-pi-connection-lost/550941/16</link>
        <pubDate>Thu, 09 Apr 2015 23:25:29 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-550941-16</guid>
        <source url="https://forum.moparisthebest.com/t/317-pi-connection-lost/550941.rss">[317 PI] Connection Lost</source>
      </item>
      <item>
        <title>[317 PI] Connection Lost</title>
        <dc:creator><![CDATA[@mattadog18 mattadog18]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/mattadog18">@mattadog18</a> wrote:</p>
          <blockquote>
              <p>Yes sir we did this is what it shows.</p>
<p><img src="http://i.imgur.com/mEVlbT0.png" alt width="" height=""></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-pi-connection-lost/550941/15">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-pi-connection-lost/550941/15</link>
        <pubDate>Thu, 09 Apr 2015 22:29:26 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-550941-15</guid>
        <source url="https://forum.moparisthebest.com/t/317-pi-connection-lost/550941.rss">[317 PI] Connection Lost</source>
      </item>
      <item>
        <title>[317 PI] Connection Lost</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <p>[quote=“malimt, post:13, topic:550941”][quote author=mattadog18 link=topic=669854.msg4479360#msg4479360 date=1428544760]<br>
Dang it still dont work…<br>
[/quote]<br>
Wow, it’s so hard to believe that nobody knows what’s going on with our server…<br>
So many coders and devs out there/: Well, I guess we’re just unlucky,  Matt.[/quote]</p>
<p>You guys need to do this thing called <span class="bbcode-u">Debugging</span>.<br>
Networking isn’t the easiest thing in the world. And there are a lot of places for it to go haywire.</p>
<p>Have you even attempted what runescape sucks said?</p>
<p>He said to print out the playerId, because he thinks you’re not setting the ID past -1, which would be a giant error if it’s true.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-pi-connection-lost/550941/14">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-pi-connection-lost/550941/14</link>
        <pubDate>Thu, 09 Apr 2015 18:16:01 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-550941-14</guid>
        <source url="https://forum.moparisthebest.com/t/317-pi-connection-lost/550941.rss">[317 PI] Connection Lost</source>
      </item>
      <item>
        <title>[317 PI] Connection Lost</title>
        <dc:creator><![CDATA[@malimt malimt]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/malimt">@malimt</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="12" data-topic="550941">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/mattadog18/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> mattadog18:</div>
<blockquote>
<p>Dang it still dont work…</p>
</blockquote>
</aside>
<p>Wow, it’s so hard to believe that nobody knows what’s going on with our server…<br>
So many coders and devs out there/: Well, I guess we’re just unlucky,  Matt.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-pi-connection-lost/550941/13">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-pi-connection-lost/550941/13</link>
        <pubDate>Thu, 09 Apr 2015 17:02:21 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-550941-13</guid>
        <source url="https://forum.moparisthebest.com/t/317-pi-connection-lost/550941.rss">[317 PI] Connection Lost</source>
      </item>
      <item>
        <title>[317 PI] Connection Lost</title>
        <dc:creator><![CDATA[@mattadog18 mattadog18]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/mattadog18">@mattadog18</a> wrote:</p>
          <blockquote>
              <p>Dang it still dont work…</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-pi-connection-lost/550941/12">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-pi-connection-lost/550941/12</link>
        <pubDate>Thu, 09 Apr 2015 01:59:20 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-550941-12</guid>
        <source url="https://forum.moparisthebest.com/t/317-pi-connection-lost/550941.rss">[317 PI] Connection Lost</source>
      </item>
      <item>
        <title>[317 PI] Connection Lost</title>
        <dc:creator><![CDATA[@runescape_sucks runescape sucks]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/runescape_sucks">@runescape_sucks</a> wrote:</p>
          <blockquote>
              <p>I’ve already told you, just print out the playerId as a connection reaches the server.</p>
<p>Edit:<br>
The best place to put this is in RS2LoginProtocolDecoder under <code>
		cl.outStream.packetEncryption = outC;</code><br>
put</p>
<pre><code class="lang-auto"></code></pre>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-pi-connection-lost/550941/11">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-pi-connection-lost/550941/11</link>
        <pubDate>Thu, 09 Apr 2015 01:52:56 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-550941-11</guid>
        <source url="https://forum.moparisthebest.com/t/317-pi-connection-lost/550941.rss">[317 PI] Connection Lost</source>
      </item>
      <item>
        <title>[317 PI] Connection Lost</title>
        <dc:creator><![CDATA[@runescape_sucks runescape sucks]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/runescape_sucks">@runescape_sucks</a> wrote:</p>
          <blockquote>
              <p>[quote=“mattadog18, post:9, topic:550941”]You talking about this? <code>outStream.writeWordBigEndianA(playerId);</code><br>
cause its in there[/quote]<br>
That is kind of what I’m talking about. However, I don’t see anything that changes the playerId from -1, which it is initially set to.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-pi-connection-lost/550941/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-pi-connection-lost/550941/10</link>
        <pubDate>Thu, 09 Apr 2015 01:48:16 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-550941-10</guid>
        <source url="https://forum.moparisthebest.com/t/317-pi-connection-lost/550941.rss">[317 PI] Connection Lost</source>
      </item>
      <item>
        <title>[317 PI] Connection Lost</title>
        <dc:creator><![CDATA[@mattadog18 mattadog18]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/mattadog18">@mattadog18</a> wrote:</p>
          <blockquote>
              <p>You talking about this? <code>outStream.writeWordBigEndianA(playerId);</code><br>
cause its in there</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-pi-connection-lost/550941/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-pi-connection-lost/550941/9</link>
        <pubDate>Thu, 09 Apr 2015 01:47:19 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-550941-9</guid>
        <source url="https://forum.moparisthebest.com/t/317-pi-connection-lost/550941.rss">[317 PI] Connection Lost</source>
      </item>
      <item>
        <title>[317 PI] Connection Lost</title>
        <dc:creator><![CDATA[@runescape_sucks runescape sucks]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/runescape_sucks">@runescape_sucks</a> wrote:</p>
          <blockquote>
              <p>It’s hard to tell, but it doesn’t seem like you’re setting the playerId correctly. afaik, it’s setting them all to -1, but, again, hard to tell.</p>
<p>Edit: try printing out the playerid as they login</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-pi-connection-lost/550941/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-pi-connection-lost/550941/8</link>
        <pubDate>Thu, 09 Apr 2015 01:30:45 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-550941-8</guid>
        <source url="https://forum.moparisthebest.com/t/317-pi-connection-lost/550941.rss">[317 PI] Connection Lost</source>
      </item>
      <item>
        <title>[317 PI] Connection Lost</title>
        <dc:creator><![CDATA[@malimt malimt]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/malimt">@malimt</a> wrote:</p>
          <blockquote>
              <p>[quote=“mattadog18, post:6, topic:550941”]RS2LoginProtocolDecoder</p>
<p>[code]package <a href="http://server.net" rel="nofollow noopener">server.net</a>;</p>
<p>import org.apache.mina.common.ByteBuffer;<br>
import org.apache.mina.common.IoFuture;<br>
import org.apache.mina.common.IoFutureListener;<br>
import org.apache.mina.common.IoSession;<br>
import org.apache.mina.filter.codec.CumulativeProtocolDecoder;<br>
import org.apache.mina.filter.codec.ProtocolCodecFilter;<br>
import org.apache.mina.filter.codec.ProtocolDecoderOutput;</p>
<p>import server.Config;<br>
import server.Connection;<br>
import server.Server;<br>
import server.world.map.*;<br>
import server.model.players.Client;<br>
import server.model.players.PlayerHandler;<br>
import server.model.players.PlayerSave;<br>
import server.util.ISAACRandomGen;</p>
<p>/**</p>
<ul>
<li>Login protocol decoder.</li>
<li>
<span class="mention">@author</span> Graham</li>
<li>
<span class="mention">@author</span> Ryan / Lmctruck30 &lt;- login Protocol fixes</li>
<li>
</li>
</ul>
<p>*/<br>
public class RS2LoginProtocolDecoder extends CumulativeProtocolDecoder {</p>
<pre><code>/**
 * Parses the data in the provided byte buffer and writes it to
 * &lt;code&gt;out&lt;/code&gt; as a &lt;code&gt;Packet&lt;/code&gt;.
 *
 * @param session The IoSession the data was read from
 * @param in	  The buffer
 * @param out	 The decoder output stream to which to write the &lt;code&gt;Packet&lt;/code&gt;
 * @return Whether enough data was available to create a packet
 */
@Override
public boolean doDecode(IoSession session, ByteBuffer in, ProtocolDecoderOutput out) {
		synchronized(session) {
			Object loginStageObj = session.getAttribute("LOGIN_STAGE");
			int loginStage = 0;
			if(loginStageObj != null) {
				loginStage = (Integer)loginStageObj;
			}
			//Logger.log("recv login packet, stage: "+loginStage);
			switch(loginStage) {
			case 0:
				if(2 &lt;= in.remaining()) {
					int protocol = in.get() &amp; 0xff;
					@SuppressWarnings("unused")
					int nameHash = in.get() &amp; 0xff;
					if(protocol == 14) {
						long serverSessionKey = ((long) (java.lang.Math.random() * 99999999D) &lt;&lt; 32) + (long) (java.lang.Math.random() * 99999999D);
					    StaticPacketBuilder s1Response = new StaticPacketBuilder();
					    s1Response.setBare(true).addBytes(new byte[] { 0, 0, 0, 0, 0, 0, 0, 0 }).addByte((byte) 0).addLong(serverSessionKey);
					    session.setAttribute("SERVER_SESSION_KEY", serverSessionKey);
					    session.write(s1Response.toPacket());
					    session.setAttribute("LOGIN_STAGE", 1);
					}
					return true;
				} else {
					in.rewind();
					return false;
				}
			case 1:
				@SuppressWarnings("unused")
				int loginType = -1, loginPacketSize = -1, loginEncryptPacketSize = -1;
				if(2 &lt;= in.remaining()) {
					loginType = in.get() &amp; 0xff; //should be 16 or 18
					loginPacketSize = in.get() &amp; 0xff;
					loginEncryptPacketSize = loginPacketSize-(36+1+1+2);
					if(loginPacketSize &lt;= 0 || loginEncryptPacketSize &lt;= 0) {
						System.out.println("Zero or negative login size.");
						session.close();
						return false;
					}
				} else {
					in.rewind();
					return false;
				}
				if(loginPacketSize &lt;= in.remaining()) {
					int magic = in.get() &amp; 0xff;
					int version = in.getUnsignedShort();
					if(magic != 255) {
						//System.out.println("Wrong magic id.");
						session.close();
						return false;
					}
					if(version != 1) {
						//Dont Add Anything
					}
					@SuppressWarnings("unused")
					int lowMem = in.get() &amp; 0xff;
					for(int i = 0; i &lt; 9; i++) {
						in.getInt();
					}
					loginEncryptPacketSize--;
					if(loginEncryptPacketSize != (in.get() &amp; 0xff)) {
						System.out.println("Encrypted size mismatch.");
						session.close();
						return false;
					}
					if((in.get() &amp; 0xff) != 10) {
						System.out.println("Encrypted id != 10.");
						session.close();
						return false;
					}
					long clientSessionKey = in.getLong();
					long serverSessionKey = in.getLong();
					int uid = in.getInt();
					
					if(uid == 0 || uid == 99735086) {
						session.close();
						return false;
					}
					/*if(uid != 5656) {
							session.close();
							return false;
					} */
					
					String name = readRS2String(in);
					String pass = readRS2String(in);
					int sessionKey[] = new int[4];
					sessionKey[0] = (int)(clientSessionKey &gt;&gt; 32);
					sessionKey[1] = (int)clientSessionKey;
					sessionKey[2] = (int)(serverSessionKey &gt;&gt; 32);
					sessionKey[3] = (int)serverSessionKey;
					ISAACRandomGen inC = new ISAACRandomGen(sessionKey);
					for(int i = 0; i &lt; 4; i++) sessionKey[i] += 50;
					ISAACRandomGen outC = new ISAACRandomGen(sessionKey);
					load(session, uid, name, pass, inC, outC, version);
					// WorkerThread.load(session, name, pass, inC, outC);
					session.getFilterChain().remove("protocolFilter");
					session.getFilterChain().addLast("protocolFilter", new ProtocolCodecFilter(new GameCodecFactory(inC)));
					return true;
				} else {
					in.rewind();
					return false;
				}
			}
		}
	return false;
}

private synchronized void load(final IoSession session, final int uid, String name, String pass, final ISAACRandomGen inC, ISAACRandomGen outC, int version) {
	session.setAttribute("opcode", -1);
	session.setAttribute("size", -1);
	int loginDelay = 1;
	int returnCode = 2;
	
	name = name.trim();
	name = name.toLowerCase();
	pass = pass.toLowerCase();
	
	if(!name.matches("[A-Za-z0-9 ]+")) {
		returnCode = 4;
	}
	
	if(name.length() &gt; 12) {
		returnCode = 8;
	}
	
	Client cl = new Client(session, -1);
	cl.playerName = name;
	cl.playerName2 = cl.playerName;
	cl.playerPass = pass;
	cl.setInStreamDecryption(inC);
	cl.setOutStreamDecryption(outC);
	cl.outStream.packetEncryption = outC;
			
	cl.saveCharacter = false;
	
	char first = name.charAt(0);
	cl.properName = Character.toUpperCase(first)+ name.substring(1, name.length());
	
	if(Connection.isNamedBanned(cl.playerName)) {
		returnCode = 4;
	}
	
	if(PlayerHandler.isPlayerOn(name)) {
		returnCode = 5;
	}
	
	//if(Config.CLIENT_VERSION != version) {
		//returnCode = 6;
	//}
	
	if(PlayerHandler.playerCount &gt;= Config.MAX_PLAYERS) {
		returnCode = 7;
	}
</code></pre>
<p>//		Login Limit Exceeded<br>
//		if() {<br>
//			returnCode = 9;<br>
//		}</p>
<pre><code>	if(Server.UpdateServer) {
		returnCode = 14;
	}
</code></pre>
<p>//		if(Connection.checkLoginList(loginIp)) {<br>
//			returnCode = 16;<br>
//		}</p>
<p>//		Just Left World Login Delay Included<br>
//		if() {<br>
//			returnCode = 21;<br>
//		}</p>
<pre><code>	if(returnCode == 2) {
		int load = PlayerSave.loadGame(cl, cl.playerName, cl.playerPass);
		if (load == 0)
			cl.addStarter = true;
		if(load == 3) {
			returnCode = 3;
			cl.saveFile = false;
		} else {
			for(int i = 0; i &lt; cl.playerEquipment.length; i++) {
				if(cl.playerEquipment[i] == 0) {
					cl.playerEquipment[i] = -1;
					cl.playerEquipmentN[i] = 0;
				}
			}
			if(!Server.playerHandler.newPlayerClient(cl)) {
				returnCode = 7;
				cl.saveFile = false;
			} else {
				cl.saveFile = true;
			}
		}
	}
	
	cl.packetType = -1;
	cl.packetSize = 0;
	
	StaticPacketBuilder bldr = new StaticPacketBuilder();
	bldr.setBare(true);
	bldr.addByte((byte) returnCode);
	if(returnCode == 2) {
		cl.saveCharacter = true;
		if(cl.playerRights == 3) {
			bldr.addByte((byte) 2);
		} else {
			bldr.addByte((byte) cl.playerRights);
		}
		//cl.playerServer = "riotscape.no-ip.info";
	} else if(returnCode == 21) {
		bldr.addByte((byte) loginDelay);
	} else {
		bldr.addByte((byte) 0);
	}
	cl.isActive = true;
	bldr.addByte((byte) 0);
	Packet pkt = bldr.toPacket();
	final Client fcl = cl;
	session.setAttachment(cl);
	I.IOSessionManager(cl, cl.playerName, cl.playerPass, true);
	session.write(pkt).addListener(new IoFutureListener() {
		@Override
		public void operationComplete(IoFuture arg0) {
			session.getFilterChain().remove("protocolFilter");
			session.getFilterChain().addFirst("protocolFilter", new ProtocolCodecFilter(new GameCodecFactory(inC)));				
		}
	});
}

private synchronized String readRS2String(ByteBuffer in) {
	StringBuilder sb = new StringBuilder();
	byte b;
	while((b = in.get()) != 10) {
		sb.append((char) b);
	}
	return sb.toString();
}



/**
 * Releases the buffer used by the given session.
 *
 * @param session The session for which to release the buffer
 * @throws Exception if failed to dispose all resources
 */
@Override
public void dispose(IoSession session) throws Exception {
	super.dispose(session);
}
</code></pre>
<p>}<br>
[/code][/quote]<br>
What do you think buddy? It seems like no one knows how to fix our problem… It sucks ):</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-pi-connection-lost/550941/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-pi-connection-lost/550941/7</link>
        <pubDate>Thu, 09 Apr 2015 01:25:59 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-550941-7</guid>
        <source url="https://forum.moparisthebest.com/t/317-pi-connection-lost/550941.rss">[317 PI] Connection Lost</source>
      </item>
      <item>
        <title>[317 PI] Connection Lost</title>
        <dc:creator><![CDATA[@mattadog18 mattadog18]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/mattadog18">@mattadog18</a> wrote:</p>
          <blockquote>
              <p>RS2LoginProtocolDecoder</p>
<p>[code]package <a href="http://server.net" rel="nofollow noopener">server.net</a>;</p>
<p>import org.apache.mina.common.ByteBuffer;<br>
import org.apache.mina.common.IoFuture;<br>
import org.apache.mina.common.IoFutureListener;<br>
import org.apache.mina.common.IoSession;<br>
import org.apache.mina.filter.codec.CumulativeProtocolDecoder;<br>
import org.apache.mina.filter.codec.ProtocolCodecFilter;<br>
import org.apache.mina.filter.codec.ProtocolDecoderOutput;</p>
<p>import server.Config;<br>
import server.Connection;<br>
import server.Server;<br>
import server.world.map.*;<br>
import server.model.players.Client;<br>
import server.model.players.PlayerHandler;<br>
import server.model.players.PlayerSave;<br>
import server.util.ISAACRandomGen;</p>
<p>/**</p>
<ul>
<li>Login protocol decoder.</li>
<li>
<span class="mention">@author</span> Graham</li>
<li>
<span class="mention">@author</span> Ryan / Lmctruck30 &lt;- login Protocol fixes</li>
<li>
</li>
</ul>
<p>*/<br>
public class RS2LoginProtocolDecoder extends CumulativeProtocolDecoder {</p>
<pre><code>/**
 * Parses the data in the provided byte buffer and writes it to
 * &lt;code&gt;out&lt;/code&gt; as a &lt;code&gt;Packet&lt;/code&gt;.
 *
 * @param session The IoSession the data was read from
 * @param in	  The buffer
 * @param out	 The decoder output stream to which to write the &lt;code&gt;Packet&lt;/code&gt;
 * @return Whether enough data was available to create a packet
 */
@Override
public boolean doDecode(IoSession session, ByteBuffer in, ProtocolDecoderOutput out) {
		synchronized(session) {
			Object loginStageObj = session.getAttribute("LOGIN_STAGE");
			int loginStage = 0;
			if(loginStageObj != null) {
				loginStage = (Integer)loginStageObj;
			}
			//Logger.log("recv login packet, stage: "+loginStage);
			switch(loginStage) {
			case 0:
				if(2 &lt;= in.remaining()) {
					int protocol = in.get() &amp; 0xff;
					@SuppressWarnings("unused")
					int nameHash = in.get() &amp; 0xff;
					if(protocol == 14) {
						long serverSessionKey = ((long) (java.lang.Math.random() * 99999999D) &lt;&lt; 32) + (long) (java.lang.Math.random() * 99999999D);
					    StaticPacketBuilder s1Response = new StaticPacketBuilder();
					    s1Response.setBare(true).addBytes(new byte[] { 0, 0, 0, 0, 0, 0, 0, 0 }).addByte((byte) 0).addLong(serverSessionKey);
					    session.setAttribute("SERVER_SESSION_KEY", serverSessionKey);
					    session.write(s1Response.toPacket());
					    session.setAttribute("LOGIN_STAGE", 1);
					}
					return true;
				} else {
					in.rewind();
					return false;
				}
			case 1:
				@SuppressWarnings("unused")
				int loginType = -1, loginPacketSize = -1, loginEncryptPacketSize = -1;
				if(2 &lt;= in.remaining()) {
					loginType = in.get() &amp; 0xff; //should be 16 or 18
					loginPacketSize = in.get() &amp; 0xff;
					loginEncryptPacketSize = loginPacketSize-(36+1+1+2);
					if(loginPacketSize &lt;= 0 || loginEncryptPacketSize &lt;= 0) {
						System.out.println("Zero or negative login size.");
						session.close();
						return false;
					}
				} else {
					in.rewind();
					return false;
				}
				if(loginPacketSize &lt;= in.remaining()) {
					int magic = in.get() &amp; 0xff;
					int version = in.getUnsignedShort();
					if(magic != 255) {
						//System.out.println("Wrong magic id.");
						session.close();
						return false;
					}
					if(version != 1) {
						//Dont Add Anything
					}
					@SuppressWarnings("unused")
					int lowMem = in.get() &amp; 0xff;
					for(int i = 0; i &lt; 9; i++) {
						in.getInt();
					}
					loginEncryptPacketSize--;
					if(loginEncryptPacketSize != (in.get() &amp; 0xff)) {
						System.out.println("Encrypted size mismatch.");
						session.close();
						return false;
					}
					if((in.get() &amp; 0xff) != 10) {
						System.out.println("Encrypted id != 10.");
						session.close();
						return false;
					}
					long clientSessionKey = in.getLong();
					long serverSessionKey = in.getLong();
					int uid = in.getInt();
					
					if(uid == 0 || uid == 99735086) {
						session.close();
						return false;
					}
					/*if(uid != 5656) {
							session.close();
							return false;
					} */
					
					String name = readRS2String(in);
					String pass = readRS2String(in);
					int sessionKey[] = new int[4];
					sessionKey[0] = (int)(clientSessionKey &gt;&gt; 32);
					sessionKey[1] = (int)clientSessionKey;
					sessionKey[2] = (int)(serverSessionKey &gt;&gt; 32);
					sessionKey[3] = (int)serverSessionKey;
					ISAACRandomGen inC = new ISAACRandomGen(sessionKey);
					for(int i = 0; i &lt; 4; i++) sessionKey[i] += 50;
					ISAACRandomGen outC = new ISAACRandomGen(sessionKey);
					load(session, uid, name, pass, inC, outC, version);
					// WorkerThread.load(session, name, pass, inC, outC);
					session.getFilterChain().remove("protocolFilter");
					session.getFilterChain().addLast("protocolFilter", new ProtocolCodecFilter(new GameCodecFactory(inC)));
					return true;
				} else {
					in.rewind();
					return false;
				}
			}
		}
	return false;
}

private synchronized void load(final IoSession session, final int uid, String name, String pass, final ISAACRandomGen inC, ISAACRandomGen outC, int version) {
	session.setAttribute("opcode", -1);
	session.setAttribute("size", -1);
	int loginDelay = 1;
	int returnCode = 2;
	
	name = name.trim();
	name = name.toLowerCase();
	pass = pass.toLowerCase();
	
	if(!name.matches("[A-Za-z0-9 ]+")) {
		returnCode = 4;
	}
	
	if(name.length() &gt; 12) {
		returnCode = 8;
	}
	
	Client cl = new Client(session, -1);
	cl.playerName = name;
	cl.playerName2 = cl.playerName;
	cl.playerPass = pass;
	cl.setInStreamDecryption(inC);
	cl.setOutStreamDecryption(outC);
	cl.outStream.packetEncryption = outC;
			
	cl.saveCharacter = false;
	
	char first = name.charAt(0);
	cl.properName = Character.toUpperCase(first)+ name.substring(1, name.length());
	
	if(Connection.isNamedBanned(cl.playerName)) {
		returnCode = 4;
	}
	
	if(PlayerHandler.isPlayerOn(name)) {
		returnCode = 5;
	}
	
	//if(Config.CLIENT_VERSION != version) {
		//returnCode = 6;
	//}
	
	if(PlayerHandler.playerCount &gt;= Config.MAX_PLAYERS) {
		returnCode = 7;
	}
</code></pre>
<p>//		Login Limit Exceeded<br>
//		if() {<br>
//			returnCode = 9;<br>
//		}</p>
<pre><code>	if(Server.UpdateServer) {
		returnCode = 14;
	}
</code></pre>
<p>//		if(Connection.checkLoginList(loginIp)) {<br>
//			returnCode = 16;<br>
//		}</p>
<p>//		Just Left World Login Delay Included<br>
//		if() {<br>
//			returnCode = 21;<br>
//		}</p>
<pre><code>	if(returnCode == 2) {
		int load = PlayerSave.loadGame(cl, cl.playerName, cl.playerPass);
		if (load == 0)
			cl.addStarter = true;
		if(load == 3) {
			returnCode = 3;
			cl.saveFile = false;
		} else {
			for(int i = 0; i &lt; cl.playerEquipment.length; i++) {
				if(cl.playerEquipment[i] == 0) {
					cl.playerEquipment[i] = -1;
					cl.playerEquipmentN[i] = 0;
				}
			}
			if(!Server.playerHandler.newPlayerClient(cl)) {
				returnCode = 7;
				cl.saveFile = false;
			} else {
				cl.saveFile = true;
			}
		}
	}
	
	cl.packetType = -1;
	cl.packetSize = 0;
	
	StaticPacketBuilder bldr = new StaticPacketBuilder();
	bldr.setBare(true);
	bldr.addByte((byte) returnCode);
	if(returnCode == 2) {
		cl.saveCharacter = true;
		if(cl.playerRights == 3) {
			bldr.addByte((byte) 2);
		} else {
			bldr.addByte((byte) cl.playerRights);
		}
		//cl.playerServer = "riotscape.no-ip.info";
	} else if(returnCode == 21) {
		bldr.addByte((byte) loginDelay);
	} else {
		bldr.addByte((byte) 0);
	}
	cl.isActive = true;
	bldr.addByte((byte) 0);
	Packet pkt = bldr.toPacket();
	final Client fcl = cl;
	session.setAttachment(cl);
	I.IOSessionManager(cl, cl.playerName, cl.playerPass, true);
	session.write(pkt).addListener(new IoFutureListener() {
		@Override
		public void operationComplete(IoFuture arg0) {
			session.getFilterChain().remove("protocolFilter");
			session.getFilterChain().addFirst("protocolFilter", new ProtocolCodecFilter(new GameCodecFactory(inC)));				
		}
	});
}

private synchronized String readRS2String(ByteBuffer in) {
	StringBuilder sb = new StringBuilder();
	byte b;
	while((b = in.get()) != 10) {
		sb.append((char) b);
	}
	return sb.toString();
}



/**
 * Releases the buffer used by the given session.
 *
 * @param session The session for which to release the buffer
 * @throws Exception if failed to dispose all resources
 */
@Override
public void dispose(IoSession session) throws Exception {
	super.dispose(session);
}
</code></pre>
<p>}<br>
[/code]</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-pi-connection-lost/550941/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-pi-connection-lost/550941/6</link>
        <pubDate>Wed, 08 Apr 2015 01:48:01 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-550941-6</guid>
        <source url="https://forum.moparisthebest.com/t/317-pi-connection-lost/550941.rss">[317 PI] Connection Lost</source>
      </item>
      <item>
        <title>[317 PI] Connection Lost</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <p>Post your RS2LoginProtocolDecoder or equivalent file.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-pi-connection-lost/550941/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-pi-connection-lost/550941/5</link>
        <pubDate>Tue, 07 Apr 2015 22:22:36 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-550941-5</guid>
        <source url="https://forum.moparisthebest.com/t/317-pi-connection-lost/550941.rss">[317 PI] Connection Lost</source>
      </item>
      <item>
        <title>[317 PI] Connection Lost</title>
        <dc:creator><![CDATA[@malimt malimt]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/malimt">@malimt</a> wrote:</p>
          <blockquote>
              <p>Does anyone know anything in regards to this?<br>
We are almost about to give up on the server, we don’t know what could be the problem.<br>
If anyone does, please help us out.<br>
Thanks.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-pi-connection-lost/550941/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-pi-connection-lost/550941/4</link>
        <pubDate>Tue, 07 Apr 2015 21:07:00 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-550941-4</guid>
        <source url="https://forum.moparisthebest.com/t/317-pi-connection-lost/550941.rss">[317 PI] Connection Lost</source>
      </item>
      <item>
        <title>[317 PI] Connection Lost</title>
        <dc:creator><![CDATA[@mattadog18 mattadog18]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/mattadog18">@mattadog18</a> wrote:</p>
          <blockquote>
              <p>He is off so ill post it for him/.</p>
<p>Config.java</p>
<p>[code]package server;</p>
<p>public class Config {</p>
<pre><code>public static final boolean SERVER_DEBUG = false;//needs to be false for Real world to work

public static final String SERVER_NAME = "Risen07";
public static final String WELCOME_MESSAGE = "Welcome to Risen07";
public static final String FORUMS = "Forums coming soon";


//Staff
public static final String OWNER_NAME = "Matt";
public static final String OWNER2_NAME = "Malimt";


public static final int CLIENT_VERSION = 1;

public static int MESSAGE_DELAY = 6000;
public static final int ITEM_LIMIT = 16000; // item id limit, different clients have more items like silab which goes past 15000
public static final int MAXITEM_AMOUNT = Integer.MAX_VALUE;
public static final int BANK_SIZE = 352;
public static final int MAX_PLAYERS = 1024;

public static int REGION_SIZE = 0;
 public static int REGION_AMOUNT = 70;
public static int REGION_DECREASE = 6;
public static int REGION_NORMALREGION = 32;
public static final int CONNECTION_DELAY = 100; // how long one ip can keep connecting
public static final int IPS_ALLOWED = 4; // how many ips are allowed
	
public static final boolean WORLD_LIST_FIX = false; // change to true if you want to stop that world--8 thing, but it can cause the screen to freeze on silabsoft client

public static final int[] ITEM_SELLABLE 		=	{3842,3844,3840,8844,8845,8846,8847,8848,8849,8850,10551,6570,7462,7461,7460,7459,7458,7457,7456,7455,7454,8839,8840,8842,11663,11664,11665,10499,
													9748,9754,9751,9769,9757,9760,9763,9802,9808,9784,9799,9805,9781,9796,9793,9775,9772,9778,9787,9811,9766,
													9749,9755,9752,9770,9758,9761,9764,9803,9809,9785,9800,9806,9782,9797,9794,9776,9773,9779,9788,9812,9767,
													9747,9753,9750,9768,9756,9759,9762,9801,9807,9783,9798,9804,9780,9795,9792,9774,9771,9777,9786,9810,9765,995}; // what items can't be sold in any store
public static final int[] ITEM_TRADEABLE 		= 	{8850,10551,8839,8840,8842,11663,11664,11665,3842,3844,3840,8844,8845,8846,8847,8848,8849,8850,10551,6570,7462,7461,7460,7459,7458,7457,7456,7455,7454,8839,8840,8842,11663,11664,11665,10499,
													9748,9754,9751,9769,9757,9760,9763,9802,9808,9784,9799,9805,9781,9796,9793,9775,9772,9778,9787,9811,9766,
													9749,9755,9752,9770,9758,9761,9764,9803,9809,9785,9800,9806,9782,9797,9794,9776,9773,9779,9788,9812,9767,
													9747,9753,9750,9768,9756,9759,9762,9801,9807,9783,9798,9804,9780,9795,9792,9774,9771,9777,9786,9810,9765}; // what items can't be traded or staked
public static final int[] UNDROPPABLE_ITEMS 	= 	{}; // what items can't be dropped

public static final int[] FUN_WEAPONS	=	{2460,2461,2462,2463,2464,2465,2466,2467,2468,2469,2470,2471,2471,2473,2474,2475,2476,2477}; // fun weapons for dueling

public static final int[] ITEM_RARE = {1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1048,1050,1052,1054,1056,1058}; // announce itemid for rare drops

public static final boolean ADMIN_CAN_TRADE = true; //can admins trade?
public static final boolean ADMIN_CAN_SELL_ITEMS = true; // can admins sell items?
public static final boolean ADMIN_DROP_ITEMS = true; // can admin drop items?


public static final int START_LOCATION_X = 3081; // start here
public static final int START_LOCATION_Y = 3503;
public static final int RESPAWN_X = 3087; // when dead respawn here
public static final int RESPAWN_Y = 3501;
public static final int DUELING_RESPAWN_X = 3362; // when dead in duel area spawn here
public static final int DUELING_RESPAWN_Y = 3263;
public static final int RANDOM_DUELING_RESPAWN = 5; // random coords

public static final int NO_TELEPORT_WILD_LEVEL = 1; // level you can't tele on and above
public static final int SKULL_TIMER = 1200; // how long does the skull last? seconds x 2
public static final int TELEBLOCK_DELAY = 20000; // how long does teleblock last for.
public static final boolean SINGLE_AND_MULTI_ZONES = true; // multi and single zones?
public static final boolean COMBAT_LEVEL_DIFFERENCE = true; // wildy levels and combat level differences matters

public static final boolean itemRequirements = true; // attack, def, str, range or magic levels required to wield weapons or wear items?
	
public static final int MELEE_EXP_RATE = 888; // damage * exp rate
public static final int RANGE_EXP_RATE = 999;
public static final int MAGIC_EXP_RATE = 1111;
public static final double SERVER_EXP_BONUS = 1;

public static final int INCREASE_SPECIAL_AMOUNT = 17500; // how fast your special bar refills
public static final boolean PRAYER_POINTS_REQUIRED = true; // you need prayer points to use prayer
public static final boolean PRAYER_LEVEL_REQUIRED = true; // need prayer level to use different prayers
public static final boolean MAGIC_LEVEL_REQUIRED = true; // need magic level to cast spell
public static final int GOD_SPELL_CHARGE = 300000; // how long does god spell charge last?
public static final boolean RUNES_REQUIRED = false; // magic rune required?
public static final boolean CORRECT_ARROWS = true; // correct arrows for bows?
public static final boolean CRYSTAL_BOW_DEGRADES = true; // magic rune required?

public static final int SAVE_TIMER = 120; // save every 1 minute
public static final int NPC_RANDOM_WALK_DISTANCE = 5; // the square created , 3x3 so npc can't move out of that box when randomly walking
public static final int NPC_FOLLOW_DISTANCE = 10; // how far can the npc follow you from it's spawn point, 													
public static final int[] UNDEAD_NPCS = {90,91,92,93,94,103,104,73,74,75,76,77}; // undead npcs

/**
 * Barrows Reward
 */


/**
 * Glory
 */
public static final int EDGEVILLE_X = 3094;
public static final int EDGEVILLE_Y = 3469;
public static final String EDGEVILLE = "";
public static final int AL_KHARID_X = 3293;
public static final int AL_KHARID_Y = 3174;
public static final String AL_KHARID = "";
public static final int KARAMJA_X = 3087;
public static final int KARAMJA_Y = 3500;
public static final String KARAMJA = "";
public static final int MAGEBANK_X = 2538;
public static final int MAGEBANK_Y = 4716;
public static final String MAGEBANK = "";

/**
* Teleport Spells
**/
// modern
public static final int VARROCK_X = 3087;
public static final int VARROCK_Y = 3500;
public static final String VARROCK = "";
public static final int LUMBY_X = 3222;
public static final int LUMBY_Y = 3218;
public static final String LUMBY = "";
public static final int FALADOR_X = 2964;
public static final int FALADOR_Y = 3378;
public static final String FALADOR = "";
public static final int CAMELOT_X = 2757;
public static final int CAMELOT_Y = 3477;
public static final String CAMELOT = "";
public static final int ARDOUGNE_X = 2662;
public static final int ARDOUGNE_Y = 3305;
public static final String ARDOUGNE = "";
public static final int WATCHTOWER_X = 3087;
public static final int WATCHTOWER_Y = 3500;
public static final String WATCHTOWER = "";
public static final int TROLLHEIM_X = 3243;
public static final int TROLLHEIM_Y = 3513;
public static final String TROLLHEIM = "";

// ancient

public static final int PADDEWWA_X = 3098;
public static final int PADDEWWA_Y = 9884;

public static final int SENNTISTEN_X = 3322;
public static final int SENNTISTEN_Y = 3336;

public static final int KHARYRLL_X = 3492;
public static final int KHARYRLL_Y = 3471;

public static final int LASSAR_X = 3006;
public static final int LASSAR_Y = 3471;

public static final int DAREEYAK_X = 3161;
public static final int DAREEYAK_Y = 3671;

public static final int CARRALLANGAR_X = 3156;
public static final int CARRALLANGAR_Y = 3666;

public static final int ANNAKARL_X = 3288;
public static final int ANNAKARL_Y = 3886;

public static final int GHORROCK_X = 2977;
public static final int GHORROCK_Y = 3873;

public static final int TIMEOUT = 20;
public static final int CYCLE_TIME = 600;
public static final int BUFFER_SIZE = 10000;

/**
 * Slayer Variables
 */
public static final int[][] SLAYER_TASKS = {{1,87,90,4,5}, //low tasks
											{6,7,8,9,10}, //med tasks
											{11,12,13,14,15}, //high tasks
											{1,1,15,20,25}, //low reqs
											{30,35,40,45,50}, //med reqs
											{60,75,80,85,90}}; //high reqs

/**
* Skill Experience Multipliers
*/	
public static final int WOODCUTTING_EXPERIENCE = 65;
public static final int MINING_EXPERIENCE = 65;
public static final int SMITHING_EXPERIENCE = 65;
public static final int FARMING_EXPERIENCE = 65;
public static final int FIREMAKING_EXPERIENCE = 65;
public static final int HERBLORE_EXPERIENCE = 65;
public static final int FISHING_EXPERIENCE = 65;
public static final int AGILITY_EXPERIENCE = 65;
public static final int PRAYER_EXPERIENCE = 65;
public static final int RUNECRAFTING_EXPERIENCE = 65;
public static final int CRAFTING_EXPERIENCE = 65;
public static final int THIEVING_EXPERIENCE = 65;
public static final int SLAYER_EXPERIENCE = 65;
public static final int COOKING_EXPERIENCE = 65;
public static final int FLETCHING_EXPERIENCE = 65;
</code></pre>
<p>}<br>
[/code]</p>
<p>Initialize Method</p>
<p>[code]	public void initialize() {<br>
mymessage();<br>
getPA().sendFrame36(506, 0);<br>
getPA().sendFrame36(507, 0);<br>
getPA().sendFrame36(508, 1);<br>
getPA().sendFrame36(166,4);<br>
outStream.createFrame(249);<br>
outStream.writeByteA(1);	<br>
outStream.writeWordBigEndianA(playerId);<br>
for (int j = 0; j &lt; PlayerHandler.players.length; j++) {<br>
if (j == playerId)<br>
continue;<br>
if (PlayerHandler.players[j] != null) {<br>
if (PlayerHandler.players[j].playerName.equalsIgnoreCase(playerName))<br>
disconnected = true;<br>
}<br>
}</p>
<pre><code>	for (int i = 0; i &lt; 25; i++) {
		getPA().setSkillLevel(i, playerLevel[i], playerXP[i]);
		getPA().refreshSkill(i);
	}
	for(int p = 0; p &lt; PRAYER.length; p++) { // reset prayer glows 
		prayerActive[p] = false;
		getPA().sendFrame36(PRAYER_GLOW[p], 0);	
	}
	getPA().handleWeaponStyle();
	getPA().handleLoginText();
	accountFlagged = getPA().checkForFlags();
	getPA().sendFrame36(108, 0);//resets autocast button
	getPA().sendFrame36(172, 1);
	getPA().sendFrame107(); // reset screen
	getPA().setChatOptions(0, 0, 0); // reset private messaging options
	setSidebarInterface(1, 3917);
	setSidebarInterface(2, 638);
	setSidebarInterface(3, 3213);
	setSidebarInterface(4, 1644);
	setSidebarInterface(5, 5608);
	if(playerMagicBook == 0) {
		setSidebarInterface(6, 1151); //modern
	} else if (playerMagicBook == 1){
		setSidebarInterface(6, 12855); // ancient
	} else if (playerMagicBook == 2){
		setSidebarInterface(6, 29999);
	}
	correctCoordinates();
	setSidebarInterface(7, 18128);		
	setSidebarInterface(8, 5065);
	setSidebarInterface(9, 5715);
	setSidebarInterface(10, 2449);
	//setSidebarInterface(11, 4445); // wrench tab
	setSidebarInterface(11, 904); // wrench tab
	setSidebarInterface(12, 147); // run tab
	setSidebarInterface(13, -1);
	setSidebarInterface(0, 2423);
	getPA().sendFrame36(173,1);
	sendMessage("Welcome to @blu@"+Config.SERVER_NAME+".");
	}
	getPA().showOption(4, 0,"Follow", 4);
	getPA().showOption(5, 0,"Trade With", 3);
	getItems().resetItems(3214);
	getItems().sendWeapon(playerEquipment[playerWeapon], getItems().getItemName(playerEquipment[playerWeapon]));
	getItems().resetBonus();
	getItems().getBonus();
	getItems().writeBonus();
	getItems().setEquipment(playerEquipment[playerHat],1,playerHat);
	getItems().setEquipment(playerEquipment[playerCape],1,playerCape);
	getItems().setEquipment(playerEquipment[playerAmulet],1,playerAmulet);
	getItems().setEquipment(playerEquipment[playerArrows],playerEquipmentN[playerArrows],playerArrows);
	getItems().setEquipment(playerEquipment[playerChest],1,playerChest);
	getItems().setEquipment(playerEquipment[playerShield],1,playerShield);
	getItems().setEquipment(playerEquipment[playerLegs],1,playerLegs);
	getItems().setEquipment(playerEquipment[playerHands],1,playerHands);
	getItems().setEquipment(playerEquipment[playerFeet],1,playerFeet);
	getItems().setEquipment(playerEquipment[playerRing],1,playerRing);
	getItems().setEquipment(playerEquipment[playerWeapon],playerEquipmentN[playerWeapon],playerWeapon);
	getCombat().getPlayerAnimIndex(getItems().getItemName(playerEquipment[playerWeapon]).toLowerCase());
	getPA().logIntoPM();
	getItems().addSpecialBar(playerEquipment[playerWeapon]);
	saveTimer = Config.SAVE_TIMER;
	saveCharacter = true;
	handler.updatePlayer(this, outStream);
	handler.updateNPC(this, outStream);
	flushOutStream();
	getPA().clearClanChat();
	getPA().resetFollow();
	if (addStarter) {
		getPA().addStarter();
		getPA().showInterface(3559); 
		canChangeAppearance = true;
	}
	if (autoRet == 1)
		getPA().sendFrame36(172, 1);
	else
		getPA().sendFrame36(172, 0);
	getPA().requestUpdates();
}[/code]</code></pre>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-pi-connection-lost/550941/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-pi-connection-lost/550941/3</link>
        <pubDate>Tue, 07 Apr 2015 12:06:31 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-550941-3</guid>
        <source url="https://forum.moparisthebest.com/t/317-pi-connection-lost/550941.rss">[317 PI] Connection Lost</source>
      </item>
      <item>
        <title>[317 PI] Connection Lost</title>
        <dc:creator><![CDATA[@portugalrox portugalrox]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/portugalrox">@portugalrox</a> wrote:</p>
          <blockquote>
              <p>Can you post your config.java and initialize method.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-pi-connection-lost/550941/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-pi-connection-lost/550941/2</link>
        <pubDate>Tue, 07 Apr 2015 06:18:03 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-550941-2</guid>
        <source url="https://forum.moparisthebest.com/t/317-pi-connection-lost/550941.rss">[317 PI] Connection Lost</source>
      </item>
      <item>
        <title>[317 PI] Connection Lost</title>
        <dc:creator><![CDATA[@malimt malimt]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/malimt">@malimt</a> wrote:</p>
          <blockquote>
              <p>Hello, Dear Moparscapers.<br>
I have a very strange issue, I have never ever faced before.<br>
I am working on one of the old SoulSplit PI releases.<br>
I have been working on it for a while,  however, I have been facing this issue, where only one person can login to the server and no one else.<br>
We have tried making a jar, same situation. We have checked the IP’s and ports and everything seems to be "A ok"<br>
Does anyone know what kind of problem I am running into? Where no one can login but only 1 person.<br>
When more than one person tries to login, it says: “Connection Lost - please wait attempting to re-establish…” as soon as you login, it goes through until the black screen, then it says: Connection lost… and logs you out. When you try the second time, it says: "Your account is already logged in, please try again in 60 seconds… " However, the account isn’t actually online…<br>
Anyways, I hope someone can help here.<br>
Thanks.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-pi-connection-lost/550941/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-pi-connection-lost/550941/1</link>
        <pubDate>Tue, 07 Apr 2015 01:41:21 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-550941-1</guid>
        <source url="https://forum.moparisthebest.com/t/317-pi-connection-lost/550941.rss">[317 PI] Connection Lost</source>
      </item>
  </channel>
</rss>
