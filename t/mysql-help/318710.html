<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/mysql-help/318710 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Aug 2019 04:22:34 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>MySQL Help - Runescape - moparisthebest.com</title>
    <meta name="description" content="I&amp;#39;m writing my server and i&amp;#39;m going to store all data via a MySQL Database. The problem is it&amp;#39;s just not working, it&amp;#39;s acting as if the code was not even there. And don&amp;#39;t tell me to compile it, because it&amp;#39;s definitely co&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="318710.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;MySQL Help&#39;" href="318710.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/mysql-help/318710" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/mysql-help/318710" />
<meta property="og:title" content="MySQL Help" />
<meta name="twitter:title" content="MySQL Help" />
<meta property="og:description" content="I’m writing my server and i’m going to store all data via a MySQL Database.  The problem is it’s just not working, it’s acting as if the code was not even there. And don’t tell me to compile it, because it’s definitely compiled fine, no errors. So far all i’m saving is a few variables and the rest i’m leaving in a binary file. I just want to load username, password, rights, height (position z), position x, position y.  Here is the code, just below the login protocol where the loading of the acco..." />
<meta name="twitter:description" content="I’m writing my server and i’m going to store all data via a MySQL Database.  The problem is it’s just not working, it’s acting as if the code was not even there. And don’t tell me to compile it, because it’s definitely compiled fine, no errors. So far all i’m saving is a few variables and the rest i’m leaving in a binary file. I just want to load username, password, rights, height (position z), position x, position y.  Here is the code, just below the login protocol where the loading of the acco..." />
<meta property="article:published_time" content="2009-12-10T10:38:07+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="318710.html">MySQL Help</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Rawrmoan.html'><span itemprop='name'>Rawrmoan</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-12-10T10:38:07Z'>
            <time itemprop='dateModified' datetime='2016-07-31T13:02:54Z' class='post-time'>
              July 31, 2016,  1:02pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I’m writing my server and i’m going to store all data via a MySQL Database.<br>
The problem is it’s just not working, it’s acting as if the code was not even there. And don’t tell me to compile it, because it’s definitely compiled fine, no errors. So far all i’m saving is a few variables and the rest i’m leaving in a binary file. I just want to load username, password, rights, height (position z), position x, position y.</p>
<p>Here is the code, just below the login protocol where the loading of the account should be:</p>
<pre><code class="lang-auto">			int returnCode = 2;
			int slot = handler.getFreeSlot();
			Client c = null;
			if(slot == -1) {
				returnCode = 7;
			}
			else if(handler.isPlayerOn(playerName)) {
				returnCode = 5;
			}
			else {
				loadAccount(playerName, playerPass);
				if(loadAccount(playerName, playerPass) != 1) {
					if(!playerPass.equals(password)) {
						returnCode = 3;
					}
					else {
						c = new Client(socket, slot);
						c.heightLevel = Integer.parseInt(absZ);
						if (Integer.parseInt(absX) &gt; 0 &amp;&amp; Integer.parseInt(absY) &gt; 0) {
							c.teleportToX = Integer.parseInt(absX);
							c.teleportToY = Integer.parseInt(absY);
							c.heightLevel = 0;
						}
						c.playerRights = Integer.parseInt(rights);
					}
				}
				else {
					c = new Client(socket, slot);
				}
				PlayerSave loadgame = loadGame(playerName, playerPass);
				if(loadgame != null) {
					c.playerItems = loadgame.playerItem;
					c.playerItemsN = loadgame.playerItemN;
					c.playerEquipment = loadgame.playerEquipment;
					c.playerEquipmentN = loadgame.playerEquipmentN;
					c.bankItems = loadgame.bankItems;
					c.bankItemsN = loadgame.bankItemsN;
					c.playerLevel = loadgame.playerLevel;
					c.playerXP = loadgame.playerXP;
				}
				else {
					c = new Client(socket, slot);
				}
			}
			if(c != null) {
				c.playerName = playerName;
				c.playerPass = playerPass;
				c.clientSessionKey = clientSessionKey;
				c.serverSessionKey = serverSessionKey;
				c.inStreamDecryption = inStreamDecryption;
				c.outStreamDecryption = outStreamDecryption;
				c.inStream = inStream;
				c.outStream = outStream;
				c.in = in;
				c.out = out;
				c.packetSize = 0;
				c.packetType = -1;
				c.readPtr = 0;
				c.writePtr = 0;
				c.handler = handler;
				c.isActive = true;
			}
			out.write(returnCode);
			if(returnCode == 2) {
				handler.addClient(slot, c);
				out.write(c.playerRights);
				out.write(0);
			} else {
				throw new Exception("Login error.");
			}
			directFlushOutStream();
			return true;
		}
	}
	return false;
}
public int loadAccount(String playerName, String playerPass) {
	Statement statement = null;
	ResultSet result = null;
	int rowCount = -1;
	try {
		statement = connection.createStatement();
		result = statement.executeQuery("SELECT COUNT(*) FROM `accounts` WHERE `username` = '" + playerName + "' AND `password` = '" + playerPass + "'");
		result.next();
		rowCount = result.getInt(1);
		result.close();
		statement.close();
	}
	catch (Exception sqlEx2) {
		// erroramg
	}
	
	if (rowCount &gt; 0) {
		try {
			ResultSet group = statement.executeQuery("SELECT * FROM `accounts` WHERE `username` = '" + playerName + "' AND `password` = '" + playerPass + "'");
			
			while(group.next()) {
				username = group.getString("username");
				password = group.getString("password");
				rights = group.getString("rights");
				absX = group.getString("absx");
				absY = group.getString("absy");
				absZ = group.getString("absz");
			}
		}
		catch (Exception sqlEx)
		{
			Misc.println(sqlEx.toString());
			Misc.println("Failed loading " + playerName);
			return 1;
		}
		Misc.println("Loaded " + playerName + " assuming OK");
		return 0;
	}
	else {
		return 1;
	}
}</code></pre>
<p>All help is appreciated!</p>
      </div>

      <meta itemprop='headline' content='MySQL Help'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/mysql-help/318710 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Aug 2019 04:22:35 GMT -->
</html>
