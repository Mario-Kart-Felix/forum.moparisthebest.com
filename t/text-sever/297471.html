<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/text-sever/297471 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 10:29:17 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Text Sever - General Programming - moparisthebest.com</title>
    <meta name="description" content="As you might know or guessed, I suck at Java so I need some help. 

I started to make a Online (hopefully multiplayer) text-based RPG. I looked around the java website and I came accross making a Server/Client, I used th&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="297471.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Text Sever&#39;" href="297471.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/text-sever/297471" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/text-sever/297471" />
<meta property="og:title" content="Text Sever" />
<meta name="twitter:title" content="Text Sever" />
<meta property="og:description" content="As you might know or guessed, I suck at Java so I need some help.  I started to make a Online (hopefully multiplayer) text-based RPG. I looked around the java website and I came accross making a Server/Client, I used this as a base and started to get basic greeting and player details to work.  (I do admit, I did not write EVERYTHING but I have gone over the code; I do not lie like some idiots)  Unfortunately, When trying to to ask “What is your name” recording the response and replying “Welcome”..." />
<meta name="twitter:description" content="As you might know or guessed, I suck at Java so I need some help.  I started to make a Online (hopefully multiplayer) text-based RPG. I looked around the java website and I came accross making a Server/Client, I used this as a base and started to get basic greeting and player details to work.  (I do admit, I did not write EVERYTHING but I have gone over the code; I do not lie like some idiots)  Unfortunately, When trying to to ask “What is your name” recording the response and replying “Welcome”..." />
<meta property="article:published_time" content="2009-08-24T17:08:49+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="297471.html">Text Sever</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/general-programming.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>General Programming</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Fat_Cookies.html'><span itemprop='name'>Fat_Cookies</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-08-24T17:08:49Z'>
            <time itemprop='dateModified' datetime='2016-07-31T10:22:38Z' class='post-time'>
              July 31, 2016, 10:22am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>As you might know or guessed, I suck at Java so I need some help.</p>
<p>I started to make a Online (hopefully multiplayer) text-based RPG. I looked around the java website and I came accross making a <a href="http://java.sun.com/docs/books/tutorial/networking/sockets/clientServer.html" data-bbcode="true">Server/Client</a>, I used this as a base and started to get basic greeting and player details to work.<br>
(I do admit, I did not write EVERYTHING but I have gone over the code; I do not lie like some idiots)</p>
<p>Unfortunately, When trying to to ask “What is your name” recording the response and replying “Welcome” + input I fall into many problems.</p>
<p>[code]public String processInput(String theInput) {<br>
String theOutput = null;</p>
<pre><code>    if (state == WAITING) {
         theOutput = "Welcome";
        pause(1000);
        theOutput = "What is your name";
         String input = scan.nextLine();
        state = NAME;

    } else if (state == NAME) {
                       theOutput = "Hi" +input;
            state = WAITING;
        } else {
            System.exit(1);
        }
    }
    return theOutput;
}
</code></pre>
<p>}[/code]<br>
Also “Welcome” is not printed…<br>
Finally, would it be possible to send messages via methods (I would find it much easier that way)</p>
<p>Can someone nudge me onto the right path.</p>
      </div>

      <meta itemprop='headline' content='Text Sever'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Tree_Climber.html'><span itemprop='name'>Tree_Climber</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-08-24T17:22:44Z'>
            <time itemprop='dateModified' datetime='2016-07-31T10:22:39Z' class='post-time'>
              July 31, 2016, 10:22am
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>When you are doing <code>theOutput.append("Welcome");
            pause(1000);
            theOutput = "What is your name";</code> You are basically creating a new String object when you are trying to append more data to the existing String because you did = which just resets the variable’s value to the new String object. being “what is your name”, so it is returning that. Instead you could probably use a StringBuilder for your purposes so that you can just append data. Or you could do .= if you really have a reason not to use a StringBuilder.[code]public String processInput(String theInput) {<br>
StringBuilder theOutput = new StringBuilder();</p>
<pre><code>    if (state == WAITING) {
         theOutput.append("Welcome");
        pause(1000);
        theOutput.append("What is your name");
         String input = scan.nextLine();
        state = NAME;

    } else if (state == NAME) {
                       theOutput.append("Hi" +input);
            state = WAITING;
        } else {
            System.exit(1);
        }
    }
    return theOutput.toString();
}
</code></pre>
<p>}[/code]</p>
<p>The reason you aren’t getting what you want is because you did and if-else statement. So it executes one or the other, and it just is never getting to the code block in the if statement. That or it’s cause you are storing the input variable locally and so when it recalls the method that data is lost. It’s hard to tell because I don’t know in which context it is called.</p>
      </div>

      <meta itemprop='headline' content='Text Sever'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/abraham2119.html'><span itemprop='name'>abraham2119</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-08-25T00:59:40Z'>
            <time itemprop='dateModified' datetime='2016-07-31T10:23:37Z' class='post-time'>
              July 31, 2016, 10:23am
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>err hopefully you are invoking System.out.println(theOutput) because if not, how do you expect it to print?</p>
<p>ps. System.exit() is a bad habit, return in main</p>
      </div>

      <meta itemprop='headline' content='Text Sever'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/nueb35.html'><span itemprop='name'>nueb35</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-08-25T01:57:07Z'>
            <time itemprop='dateModified' datetime='2016-07-31T10:23:50Z' class='post-time'>
              July 31, 2016, 10:23am
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote no-group" data-post="3" data-topic="297471">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/abraham2119/40/5_513041d5f7104045db30895d3b90af16.png" class="avatar"> abraham2119:</div>
<blockquote>
<p>ps. System.exit() is a bad habit, return in main</p>
</blockquote>
</aside>
<p>and call [tt]thread.setDaemon(true);[/tt] on all threads?</p>
      </div>

      <meta itemprop='headline' content='Text Sever'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/abraham2119.html'><span itemprop='name'>abraham2119</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-08-25T02:02:24Z'>
            <time itemprop='dateModified' datetime='2016-07-31T10:23:51Z' class='post-time'>
              July 31, 2016, 10:23am
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Nueb35, post:4, topic:297471”][quote author=abraham2119 link=topic=393509.msg2929070#msg2929070 date=1251161980]<br>
ps. System.exit() is a bad habit, return in main<br>
[/quote]</p>
<p>and call [tt]thread.setDaemon(true);[/tt] on all threads?[/quote]the main thread is disposed of when returning. but any additional threads that were created need to invoke that function.</p>
      </div>

      <meta itemprop='headline' content='Text Sever'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/ownagesbot.html'><span itemprop='name'>ownagesbot</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-08-27T12:41:12Z'>
            <time itemprop='dateModified' datetime='2016-07-31T10:28:15Z' class='post-time'>
              July 31, 2016, 10:28am
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>He’s using System.exit(1); when an invalid state is used. This is a correct usage of System.exit(int) as it signals that the program was terminated with an error. In this circumstance, returning back to main for a clean exit would effectively be signalling the wrong response.</p>
      </div>

      <meta itemprop='headline' content='Text Sever'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/abraham2119.html'><span itemprop='name'>abraham2119</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-08-28T01:32:27Z'>
            <time itemprop='dateModified' datetime='2016-07-31T10:29:29Z' class='post-time'>
              July 31, 2016, 10:29am
            </time>
        <span itemprop='position'>#7</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>ownagesbot, that is correct. its just as if i would return a !0 value in C in int main().</p>
<p>most articles state, however, that this method should be invoked only when implicitly required. there are questions as to whether it shuts down all other instantiated threads (whether daemon or non-daemon).</p>
<p>from what im seeing, he has no use in indicating that the application has returned with an error, since he is not doing anything outside of the process. i do see your point though. runtime.exit has very poor documentations, so i dont really have enough knowledge about how the function works.</p>
<p>ps found this article: <a href="http://www.javapractices.com/topic/TopicAction.do?Id=86" rel="nofollow noopener">http://www.javapractices.com/topic/TopicAction.do?Id=86</a></p>
<p>if anyone finds clearer documentations on this method (other than the java api, for i have read them), please link</p>
      </div>

      <meta itemprop='headline' content='Text Sever'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/xeez.html'><span itemprop='name'>xeez</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-08-28T01:50:00Z'>
            <time itemprop='dateModified' datetime='2016-07-31T10:29:31Z' class='post-time'>
              July 31, 2016, 10:29am
            </time>
        <span itemprop='position'>#8</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>abraham2119, I disagree. Even when one does not require the return value of an application, the user should be accustomed in reporting any errors, anyways. For example, with most C++ compilers, declaring main() of type “void” is valid; although, if any C++ programmer sees this, they will immediately list 100 reasons as to why one should declare main as int and return a proper status indication value. I have yet to see a failure in using [tt]java.lang.System.exit(int)[/tt].</p>
      </div>

      <meta itemprop='headline' content='Text Sever'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Jython.html'><span itemprop='name'>Jython</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-08-28T02:08:49Z'>
            <time itemprop='dateModified' datetime='2016-07-31T10:29:33Z' class='post-time'>
              July 31, 2016, 10:29am
            </time>
        <span itemprop='position'>#9</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“abraham2119, post:7, topic:297471”]ownagesbot, that is correct. its just as if i would return a !0 value in C in int main().</p>
<p>most articles state, however, that this method should be invoked only when implicitly required. there are questions as to whether it shuts down all other instantiated threads (whether daemon or non-daemon).</p>
<p>from what im seeing, he has no use in indicating that the application has returned with an error, since he is not doing anything outside of the process. i do see your point though. runtime.exit has very poor documentations, so i dont really have enough knowledge about how the function works.</p>
<p>ps found this article: <a href="http://www.javapractices.com/topic/TopicAction.do?Id=86" rel="nofollow noopener">http://www.javapractices.com/topic/TopicAction.do?Id=86</a></p>
<p>if anyone finds clearer documentations on this method (other than the java api, for i have read them), please link[/quote]</p>
<p>It’s called an exit code btw.</p>
<p>java.lang.System.exit():</p>
<p><code>    /**
     * Terminates the currently running Java Virtual Machine. The
     * argument serves as a status code; by convention, a nonzero status
     * code indicates abnormal termination.
     * &lt;p&gt;
     * This method calls the &lt;code&gt;exit&lt;/code&gt; method in class
     * &lt;code&gt;Runtime&lt;/code&gt;. This method never returns normally.
     * &lt;p&gt;
     * The call &lt;code&gt;System.exit(n)&lt;/code&gt; is effectively equivalent to
     * the call:
     * &lt;blockquote&gt;&lt;pre&gt;
     * Runtime.getRuntime().exit(n)
     * &lt;/pre&gt;&lt;/blockquote&gt;
     *
     * @param      status   exit status.
     * @throws  SecurityException
     *        if a security manager exists and its &lt;code&gt;checkExit&lt;/code&gt;
     *        method doesn't allow exit with the specified status.
     * @see        java.lang.Runtime#exit(int)
     */
    public static void exit(int status) {
        Runtime.getRuntime().exit(status);
    }
</code></p>
<p>java.lang.Runtime.exit():</p>
<p><code>    /**
     * Terminates the currently running Java virtual machine by initiating its
     * shutdown sequence.  This method never returns normally.  The argument
     * serves as a status code; by convention, a nonzero status code indicates
     * abnormal termination.
     *
     * &lt;p&gt; The virtual machine's shutdown sequence consists of two phases.  In
     * the first phase all registered {@link #addShutdownHook shutdown hooks},
     * if any, are started in some unspecified order and allowed to run
     * concurrently until they finish.  In the second phase all uninvoked
     * finalizers are run if {@link #runFinalizersOnExit finalization-on-exit}
     * has been enabled.  Once this is done the virtual machine {@link #halt
     * halts}.
     *
     * &lt;p&gt; If this method is invoked after the virtual machine has begun its
     * shutdown sequence then if shutdown hooks are being run this method will
     * block indefinitely.  If shutdown hooks have already been run and on-exit
     * finalization has been enabled then this method halts the virtual machine
     * with the given status code if the status is nonzero; otherwise, it
     * blocks indefinitely.
     *
     * &lt;p&gt; The &lt;tt&gt;{@link System#exit(int) System.exit}&lt;/tt&gt; method is the
     * conventional and convenient means of invoking this method. &lt;p&gt;
     *
     * @param  status
     *         Termination status.  By convention, a nonzero status code
     *         indicates abnormal termination.
     *
     * @throws SecurityException
     *         If a security manager is present and its &lt;tt&gt;{@link
     *         SecurityManager#checkExit checkExit}&lt;/tt&gt; method does not permit
     *         exiting with the specified status
     *
     * @see java.lang.SecurityException
     * @see java.lang.SecurityManager#checkExit(int)
     * @see #addShutdownHook
     * @see #removeShutdownHook
     * @see #runFinalizersOnExit
     * @see #halt(int)
     */
    public void exit(int status) {
        SecurityManager security = System.getSecurityManager();
        if (security != null) {
            security.checkExit(status);
        }
        Shutdown.exit(status);
    }</code></p>
<p>java.lang.Shutdown.exit():</p>
<p><code>    /* Invoked by Runtime.exit, which does all the security checks.
     * Also invoked by handlers for system-provided termination events,
     * which should pass a nonzero status code.
     */
    static void exit(int status) {
        boolean runMoreFinalizers = false;
        synchronized (lock) {
            if (status != 0) runFinalizersOnExit = false;
            switch (state) {
            case RUNNING:       /* Initiate shutdown */
                state = HOOKS;
                break;
            case HOOKS:         /* Stall and halt */
                break;
            case FINALIZERS:
                if (status != 0) {
                    /* Halt immediately on nonzero status */
                    halt(status);
                } else {
                    /* Compatibility with old behavior:
                     * Run more finalizers and then halt
                     */
                    runMoreFinalizers = runFinalizersOnExit;
                }
                break;
            }
        }
        if (runMoreFinalizers) {
            runAllFinalizers();
            halt(status);
        }
        synchronized (Shutdown.class) {
            /* Synchronize on the class object, causing any other thread
             * that attempts to initiate shutdown to stall indefinitely
             */
            sequence();
            halt(status);
        }
    }</code></p>
<p>java.lang.Shutdown.halt():</p>
<pre><code class="lang-auto">    static native void halt0(int status);[/code]

shared/native/java/lang/Shutdown.c:
[code]JNIEXPORT void JNICALL
Java_java_lang_Shutdown_halt0(JNIEnv *env, jclass ignored, jint code)
{
    JVM_Halt(code);
}[/code]

share/vm/prims/jvm.cpp:
[code]JVM_ENTRY_NO_ENV(void, JVM_Halt(jint code))  
  before_exit(thread);
  vm_exit(code);
JVM_END</code></pre>
<p>share/vm/runtime/interfaceSupport.hpp:</p>
<p><code>#define JVM_ENTRY_NO_ENV(result_type, header)                        \
extern "C" {                                                         \
  result_type JNICALL header {                                       \
    JavaThread* thread = (JavaThread*)ThreadLocalStorage::thread();  \
    ThreadInVMfromNative __tiv(thread);                              \
    debug_only(VMNativeEntryWrapper __vew;)                          \
    __ENTRY(result_type, header, thread)</code></p>
<pre><code class="lang-auto">#define __ENTRY(result_type, header, thread)                         \
  TRACE_CALL(result_type, header)                                    \
  HandleMarkCleaner __hm(thread);                                    \
  Thread* THREAD = thread;                                           \
  /* begin of body */</code></pre>
<p>share/vm/runtime/java.cpp:</p>
<p>[code]// Note: before_exit() can be executed only once, if more than one threads<br>
//       are trying to shutdown the VM at the same time, only one thread<br>
//       can run before_exit() and all other threads must wait.<br>
void before_exit(JavaThread * thread) {<br>
<span class="hashtag">#define</span> BEFORE_EXIT_NOT_RUN 0<br>
<span class="hashtag">#define</span> BEFORE_EXIT_RUNNING 1<br>
<span class="hashtag">#define</span> BEFORE_EXIT_DONE    2<br>
static jint volatile _before_exit_status = BEFORE_EXIT_NOT_RUN;</p>
<p>// Note: don’t use a Mutex to guard the entire before_exit(), as<br>
// JVMTI post_thread_end_event and post_vm_death_event will run native code.<br>
// A CAS or OSMutex would work just fine but then we need to manipulate<br>
// thread state for Safepoint. Here we use Monitor wait() and notify_all()<br>
// for synchronization.<br>
{ MutexLocker ml(BeforeExit_lock);<br>
switch (_before_exit_status) {<br>
case BEFORE_EXIT_NOT_RUN:<br>
_before_exit_status = BEFORE_EXIT_RUNNING;<br>
break;<br>
case BEFORE_EXIT_RUNNING:<br>
while (_before_exit_status == BEFORE_EXIT_RUNNING) {<br>
BeforeExit_lock-&gt;wait();<br>
}<br>
assert(_before_exit_status == BEFORE_EXIT_DONE, “invalid state”);<br>
return;<br>
case BEFORE_EXIT_DONE:<br>
return;<br>
}<br>
}</p>
<p>// The only difference between this and Win32’s _onexit procs is that<br>
// this version is invoked before any threads get killed.<br>
ExitProc* current = exit_procs;<br>
while (current != NULL) {<br>
ExitProc* next = current-&gt;next();<br>
current-&gt;evaluate();<br>
delete current;<br>
current = next;<br>
}</p>
<p>// Hang forever on exit if we’re reporting an error.<br>
if (ShowMessageBoxOnError &amp;&amp; is_error_reported()) {<br>
os::infinite_sleep();<br>
}</p>
<p>// Terminate watcher thread - must before disenrolling any periodic task<br>
WatcherThread::stop();</p>
<p>// Print statistics gathered (profiling …)<br>
if (Arguments::has_profile()) {<br>
FlatProfiler::disengage();<br>
FlatProfiler::print(10);<br>
}</p>
<p>// shut down the StatSampler task<br>
StatSampler::disengage();<br>
StatSampler::destroy();</p>
<p>// shut down the TimeMillisUpdateTask<br>
if (CacheTimeMillis) {<br>
TimeMillisUpdateTask::disengage();<br>
}</p>
<p><span class="hashtag">#ifndef</span> SERIALGC<br>
// stop CMS threads<br>
if (UseConcMarkSweepGC) {<br>
ConcurrentMarkSweepThread::stop();<br>
}<br>
<span class="hashtag">#endif</span> // SERIALGC</p>
<p>// Print GC/heap related information.<br>
if (PrintGCDetails) {<br>
Universe::print();<br>
AdaptiveSizePolicyOutput(0);<br>
}</p>
<p>if (Arguments::has_alloc_profile()) {<br>
HandleMark hm;<br>
// Do one last collection to enumerate all the objects<br>
// allocated since the last one.<br>
Universe::heap()-&gt;collect(GCCause::_allocation_profiler);<br>
AllocationProfiler::disengage();<br>
AllocationProfiler::print(0);<br>
}</p>
<p>if (PrintBytecodeHistogram) {<br>
BytecodeHistogram::print();<br>
}</p>
<p>if (JvmtiExport::should_post_thread_life()) {<br>
JvmtiExport::post_thread_end(thread);<br>
}<br>
// Always call even when there are not JVMTI environments yet, since environments<br>
// may be attached late and JVMTI must track phases of VM execution<br>
JvmtiExport::post_vm_death();<br>
Threads::shutdown_vm_agents();</p>
<p>// Terminate the signal thread<br>
// Note: we don’t wait until it actually dies.<br>
os::terminate_signal_thread();</p>
<p>print_statistics();<br>
Universe::heap()-&gt;print_tracing_info();</p>
<p>VTune::exit();</p>
<p>{ MutexLocker ml(BeforeExit_lock);<br>
_before_exit_status = BEFORE_EXIT_DONE;<br>
BeforeExit_lock-&gt;notify_all();<br>
}</p>
<p><span class="hashtag">#undef</span> BEFORE_EXIT_NOT_RUN<br>
<span class="hashtag">#undef</span> BEFORE_EXIT_RUNNING<br>
<span class="hashtag">#undef</span> BEFORE_EXIT_DONE<br>
}</p>
<p>void vm_exit(int code) {<br>
Thread* thread = ThreadLocalStorage::thread_index() == -1 ? NULL<br>
: ThreadLocalStorage::get_thread_slow();<br>
if (thread == NULL) {<br>
// we have serious problems – just exit<br>
vm_direct_exit(code);<br>
}</p>
<p>if (VMThread::vm_thread() != NULL) {<br>
// Fire off a VM_Exit operation to bring VM to a safepoint and exit<br>
VM_Exit op(code);<br>
if (thread-&gt;is_Java_thread())<br>
((JavaThread*)thread)-&gt;set_thread_state(_thread_in_vm);<br>
VMThread::execute(&amp;op);<br>
// should never reach here; but in case something wrong with VM Thread.<br>
vm_direct_exit(code);<br>
} else {<br>
// VM thread is gone, just exit<br>
vm_direct_exit(code);<br>
}<br>
ShouldNotReachHere();<br>
}<br>
[/code]</p>
<p><code>void vm_direct_exit(int code) {
  notify_vm_shutdown();
  ::exit(code);
}
</code></p>
      </div>

      <meta itemprop='headline' content='Text Sever'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/lawl.html'><span itemprop='name'>lawl</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-08-28T02:11:31Z'>
            <time itemprop='dateModified' datetime='2016-07-31T10:29:33Z' class='post-time'>
              July 31, 2016, 10:29am
            </time>
        <span itemprop='position'>#10</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>system.exit gracefully exits</p>
      </div>

      <meta itemprop='headline' content='Text Sever'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Jython.html'><span itemprop='name'>Jython</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-08-28T02:14:07Z'>
            <time itemprop='dateModified' datetime='2016-07-31T10:29:33Z' class='post-time'>
              July 31, 2016, 10:29am
            </time>
        <span itemprop='position'>#11</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote no-group quote-modified" data-post="8" data-topic="297471">
<div class="title">
<div class="quote-controls"></div>
 xeez`:</div>
<blockquote>
<p>abraham2119, I disagree. Even when one does not require the return value of an application, the user should be accustomed in reporting any errors, anyways. For example, with most C++ compilers, declaring main() of type “void” is valid; although, if any C++ programmer sees this, they will immediately list 100 reasons as to why one should declare main as int and return a proper status indication value. I have yet to see a failure in using [tt]java.lang.System.exit(int)[/tt].</p>
</blockquote>
</aside>
<p>Procedures, data types … all just source-level abstractions. Down native, the return value of main() is expected to be in eax after the call completes (or at least for x86 cdecl calling convention). If declared void, it’ll try doing pop eax and get a garbage value. Yay! Well I think that was it…</p>
      </div>

      <meta itemprop='headline' content='Text Sever'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/abraham2119.html'><span itemprop='name'>abraham2119</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-08-28T02:15:50Z'>
            <time itemprop='dateModified' datetime='2016-07-31T10:29:34Z' class='post-time'>
              July 31, 2016, 10:29am
            </time>
        <span itemprop='position'>#12</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>oh, in that case, i stand corrected</p>
<p>use it all you want, op</p>
      </div>

      <meta itemprop='headline' content='Text Sever'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Jython.html'><span itemprop='name'>Jython</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-08-28T02:42:15Z'>
            <time itemprop='dateModified' datetime='2016-07-31T10:29:36Z' class='post-time'>
              July 31, 2016, 10:29am
            </time>
        <span itemprop='position'>#13</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Appears it only does pop eax on some compilers and on mine mov eax, val but the issue is still there… whatever was originally in eax is the new return exit code.[br][br][size=1]Posted on: August 28, 2009, 02:54:10 am[/size][hr]On windows, it passes it to ExitProcess() in the start routine that calls main.</p>
      </div>

      <meta itemprop='headline' content='Text Sever'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/lawl.html'><span itemprop='name'>lawl</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-08-28T02:55:52Z'>
            <time itemprop='dateModified' datetime='2016-07-31T10:29:37Z' class='post-time'>
              July 31, 2016, 10:29am
            </time>
        <span itemprop='position'>#14</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>im pretty sure i read somewhere that void main will just implicitly add a return 0 but this probably isnt true for all compilers and i am probably wrong on some level</p>
<p>edit: Under C89, the return statement at the end of main() is required, whereas under C99 if no return statement is present, return 0 is implied.</p>
<p>also i just realized this is pretty offtopic</p>
      </div>

      <meta itemprop='headline' content='Text Sever'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/text-sever/297471 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 10:29:17 GMT -->
</html>
