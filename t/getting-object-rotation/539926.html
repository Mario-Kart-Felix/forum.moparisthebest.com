<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/getting-object-rotation/539926 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Aug 2019 06:23:06 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Getting Object Rotation - Runescape - moparisthebest.com</title>
    <meta name="description" content="I&amp;#39;m currently working on woodcutting and having issues with the rotation of newly spawned trees. Most servers seem to do woodcutting by loading the rotation and coordinates through a file, requiring you to manually input&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="539926.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Getting Object Rotation&#39;" href="539926.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/getting-object-rotation/539926" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/getting-object-rotation/539926" />
<meta property="og:title" content="Getting Object Rotation" />
<meta name="twitter:title" content="Getting Object Rotation" />
<meta property="og:description" content="I’m currently working on woodcutting and having issues with the rotation of newly spawned trees. Most servers seem to do woodcutting by loading the rotation and coordinates through a file, requiring you to manually input every ‘cut-able’ tree into said file. I want to avoid doing this, because surely there’s a way to retrieve the rotation of an object.  I’ve been thinking that it should either be done through the relevant object click packet or the replace object method should be altered so that..." />
<meta name="twitter:description" content="I’m currently working on woodcutting and having issues with the rotation of newly spawned trees. Most servers seem to do woodcutting by loading the rotation and coordinates through a file, requiring you to manually input every ‘cut-able’ tree into said file. I want to avoid doing this, because surely there’s a way to retrieve the rotation of an object.  I’ve been thinking that it should either be done through the relevant object click packet or the replace object method should be altered so that..." />
<meta property="article:published_time" content="2014-02-10T17:35:13+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="539926.html">Getting Object Rotation</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/kihomura.html'><span itemprop='name'>kihomura</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-02-10T17:35:13Z'>
            <time itemprop='dateModified' datetime='2016-08-04T11:42:42Z' class='post-time'>
              August 4, 2016, 11:42am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I’m currently working on woodcutting and having issues with the rotation of newly spawned trees. Most servers seem to do woodcutting by loading the rotation and coordinates through a file, requiring you to manually input every ‘cut-able’ tree into said file. I want to avoid doing this, because surely there’s a way to retrieve the rotation of an object.</p>
<p>I’ve been thinking that it should either be done through the relevant object click packet or the replace object method should be altered so that the rotation is left the same (if that makes any sense).</p>
<p>Here’s the method I’m using for replacing objects, if you need it for whatever reason:</p>
<p>[code]    /**<br>
* Replaces an object in the world.<br>
* <a class="mention" href="../../u/param.html">@param</a> p Player to replace object for.<br>
* <a class="mention" href="../../u/param.html">@param</a> x X-coordinate of object to replace.<br>
* <a class="mention" href="../../u/param.html">@param</a> y Y-coordinate of object to replace.<br>
* <a class="mention" href="../../u/param.html">@param</a> rot Rotation of object to replace.<br>
* <a class="mention" href="../../u/param.html">@param</a> id Id of new object.<br>
* <a class="mention" href="../../u/param.html">@param</a> type Type of object.<br>
*/<br>
public void replace(Player p, int x, int y, int rot, int id, int type) {<br>
if (p == null || p.stream == null || p.disconnected) {<br>
return;<br>
}<br>
p.stream.createFrame(85);<br>
p.stream.writeByteC(y - (p.mapRegionY * 8));<br>
p.stream.writeByteC(x - (p.mapRegionX * 8));</p>
<pre><code>    p.stream.createFrame(101);
    p.stream.writeByteC((type &lt;&lt; 2) + (rot &amp; 3));
    p.stream.writeByte(0);

    if (id != -1) {
        p.stream.createFrame(151);
        p.stream.writeByteS(0);
        p.stream.writeWordBigEndian(id);
        p.stream.writeByteS((type &lt;&lt; 2) + (rot &amp; 3));
    }
}[/code]</code></pre>
      </div>

      <meta itemprop='headline' content='Getting Object Rotation'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/pure2ownage.html'><span itemprop='name'>pure2ownage</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-02-10T18:34:28Z'>
            <time itemprop='dateModified' datetime='2016-08-04T11:42:43Z' class='post-time'>
              August 4, 2016, 11:42am
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I think you’ll need to alter the packet to keep the rotation, or create a new one to get the rotation of an object in the given position. In my own experience I have found updating client objects very buggy.</p>
<p>Here is where packets 151 and 101 are intercepted (in the 317 refactored? client)</p>
<p><code>			if(pktType == 105 || pktType == 84 || pktType == 147 || pktType == 215 || pktType == 4 || pktType == 117 || pktType == 156 || pktType == 44 || pktType == 160 || pktType == 101 || pktType == 151)
			{
				method137(inStream, pktType);
				pktType = -1;
				return true;
			}</code></p>
<p>Packet 101</p>
<p><code>		if(j == 101)
		{
			int l2 = stream.method427();
			int k5 = l2 &gt;&gt; 2;
			int j8 = l2 &amp; 3;
			int i11 = anIntArray1177[k5];
			int j13 = stream.readUnsignedByte();
			int k15 = anInt1268 + (j13 &gt;&gt; 4 &amp; 7);
			int l16 = anInt1269 + (j13 &amp; 7);
			if(k15 &gt;= 0 &amp;&amp; l16 &gt;= 0 &amp;&amp; k15 &lt; 104 &amp;&amp; l16 &lt; 104)
				method130(-1, -1, j8, i11, l16, k5, plane, k15, 0);
			return;
		}</code></p>
<p>Packet 151</p>
<p>[code=java]		if(j == 151) // PACKET 151 - Replace object<br>
{<br>
int i2 = stream.method426();<br>
int l4 = anInt1268 + (i2 &gt;&gt; 4 &amp; 7);<br>
int k7 = anInt1269 + (i2 &amp; 7);<br>
int j10 = stream.method434();<br>
int k12 = stream.method428();<br>
int i15 = k12 &gt;&gt; 2;<br>
int k16 = k12 &amp; 3;<br>
int l17 = anIntArray1177[i15];</p>
<pre><code>		if(l4 &gt;= 0 &amp;&amp; k7 &gt;= 0 &amp;&amp; l4 &lt; 104 &amp;&amp; k7 &lt; 104)
			method130(-1, j10, k16, l17, k7, i15, plane, l4, 0);
		return;
	}[/code]</code></pre>
      </div>

      <meta itemprop='headline' content='Getting Object Rotation'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/sinisoul.html'><span itemprop='name'>sinisoul</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-02-10T18:37:03Z'>
            <time itemprop='dateModified' datetime='2016-08-04T11:42:43Z' class='post-time'>
              August 4, 2016, 11:42am
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>That sounds like a bad idea Pure tbh</p>
<p>You should load the object data for a region and then have an object which allows you to change the type, rotation, etc. That’s the proper way of doing it.</p>
      </div>

      <meta itemprop='headline' content='Getting Object Rotation'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/pure2ownage.html'><span itemprop='name'>pure2ownage</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-02-10T18:37:58Z'>
            <time itemprop='dateModified' datetime='2016-08-04T11:42:43Z' class='post-time'>
              August 4, 2016, 11:42am
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“sinisoul, post:3, topic:539926”]That sounds like a bad idea Pure tbh</p>
<p>You should load the object data for a region and then have an object which allows you to change the type, rotation, etc. That’s the proper way of doing it.[/quote]Do you want to duke it out?</p>
      </div>

      <meta itemprop='headline' content='Getting Object Rotation'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/sk8rdude461.html'><span itemprop='name'>sk8rdude461</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-02-11T01:19:54Z'>
            <time itemprop='dateModified' datetime='2016-08-04T11:42:49Z' class='post-time'>
              August 4, 2016, 11:42am
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p><a href="https://www.moparisthebest.com/smf/index.php?topic=527173.0" data-bbcode="true" rel="nofollow noopener">This release</a> is a server-sided object clipping system.<br>
I found this code in it:</p>
<p>[code=java]	public static int getOrientation(int objectX, int objectY, int objectHeight)<br>
{<br>
if(cachedObjects.size() == 0)<br>
loadCachedObjects();<br>
int key = (objectHeight &lt;&lt; 30) + (objectX &lt;&lt; 15) + (objectY);<br>
return (cachedObjects.get(key) != null ? cachedObjects.get(key).getOrientation() : 0);<br>
}</p>
<pre><code>public static void changeOrientation(int objectX, int objectY, int objectHeight, int newO)
{
	if(cachedObjects.size() == 0)
		loadCachedObjects();
	int key = (objectHeight &lt;&lt; 30) + (objectX &lt;&lt; 15) + (objectY);
	if(cachedObjects.get(key) != null)
		cachedObjects.get(key).changeOrientation(newO);
}[/code]
</code></pre>
<p>I believe this is close to what you’re looking for, so I figured it’d help.</p>
      </div>

      <meta itemprop='headline' content='Getting Object Rotation'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/getting-object-rotation/539926 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Aug 2019 06:23:07 GMT -->
</html>
