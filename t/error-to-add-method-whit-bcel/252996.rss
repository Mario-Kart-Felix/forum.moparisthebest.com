<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Error to add method whit bcel</title>
    <link>https://forum.moparisthebest.com/t/error-to-add-method-whit-bcel/252996</link>
    <description>I have create a class to add methods and when I decompile the modified class I get this:
[code]public boolean isEditable_28__29_()
    {
        return q;
    }

    public int getLength_28__29_()
    {
        return M;
    }

    public byte[] getBytes_28__29_()
    {
        return kb;
    }[/code]
this is the class:
[code]package com.gabuuzz.methods;

import java.io.File;
import org.apache.bcel.classfile.*;
import org.apache.bcel.generic.*;


/**
 *
 * @author Gabuuzz
 */
public class MethodCreator {

    private MethodGen m;
    private InstructionList ml;
    
    public MethodCreator(int access_flags,Type return_type,Type[] arg_types,String[] arg_names,
                         String method_name,String class_name,InstructionList il,ConstantPoolGen cp){
      m = new MethodGen(access_flags, return_type, arg_types, arg_names, method_name, class_name, il, cp);
      ml=il;
    }
    public void addReturnMethod(ClassGen cg, Field field, short kind){
        ml.append(new ALOAD(0));
        InstructionFactory ifactor=new InstructionFactory(cg, cg.getConstantPool());
        ml.append(ifactor.createFieldAccess(cg.getClassName(), field.getName(), field.getType(), kind));
        ml.append(InstructionFactory.createReturn(field.getType()));
        m.setMaxStack();
        m.setMaxLocals();
       // m.removeLineNumbers();
        cg.addMethod(m.getMethod());
    }
}[/code]
and how I use it(for &quot;RSString.isEditable()&quot;):
[code]//cgen is the ClassGen
MethodCreator isEditableM = new MethodCreator(Constants.ACC_PUBLIC, Type.BOOLEAN, Type.NO_ARGS, new String[]{}, &quot;isEditable()&quot;, cgen.getClassName(), new InstructionList(), cgen.getConstantPool());
isEditableM.addReturnMethod(cgen, fi, Constants.GETFIELD);[/code]
what wrong?</description>
    
    <lastBuildDate>Sat, 27 Dec 2008 15:03:36 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/error-to-add-method-whit-bcel/252996.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Error to add method whit bcel</title>
        <dc:creator><![CDATA[@gabuuzz gabuuzz]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/gabuuzz">@gabuuzz</a> wrote:</p>
          <blockquote>
              <p>Thanx again  <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=6" title=":smiley:" class="emoji" alt=":smiley:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/error-to-add-method-whit-bcel/252996/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/error-to-add-method-whit-bcel/252996/3</link>
        <pubDate>Sat, 27 Dec 2008 15:03:36 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-252996-3</guid>
        <source url="https://forum.moparisthebest.com/t/error-to-add-method-whit-bcel/252996.rss">Error to add method whit bcel</source>
      </item>
      <item>
        <title>Error to add method whit bcel</title>
        <dc:creator><![CDATA[@frank frank_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/frank">@frank</a> wrote:</p>
          <blockquote>
              <p>it is making the method exactly as you specified</p>
<p>it is a mistake on your behalf, you are naming the methods with the parenthesis in the name, which when decompiled are invalid, so your decompiler replaces these characters with their hex ascii codes</p>
<blockquote>MethodCreator isEditableM = new MethodCreator(Constants.ACC_PUBLIC, Type.BOOLEAN, Type.NO_ARGS, new String[]{}, [b]"isEditable"[/b], cgen.getClassName(), new InstructionList(), cgen.getConstantPool());
isEditableM.addReturnMethod(cgen, fi, Constants.GETFIELD);</blockquote>i used quote tags so i could highlight the error ;)
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/error-to-add-method-whit-bcel/252996/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/error-to-add-method-whit-bcel/252996/2</link>
        <pubDate>Sat, 27 Dec 2008 05:03:43 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-252996-2</guid>
        <source url="https://forum.moparisthebest.com/t/error-to-add-method-whit-bcel/252996.rss">Error to add method whit bcel</source>
      </item>
      <item>
        <title>Error to add method whit bcel</title>
        <dc:creator><![CDATA[@gabuuzz gabuuzz]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/gabuuzz">@gabuuzz</a> wrote:</p>
          <blockquote>
              <p>I have create a class to add methods and when I decompile the modified class I get this:</p>
<p>[code]public boolean isEditable_28__29_()<br>
{<br>
return q;<br>
}</p>
<pre><code>public int getLength_28__29_()
{
    return M;
}

public byte[] getBytes_28__29_()
{
    return kb;
}[/code]
</code></pre>
<p>this is the class:</p>
<p>[code]package com.gabuuzz.methods;</p>
<p>import java.io.File;<br>
import org.apache.bcel.classfile.<em>;<br>
import org.apache.bcel.generic.</em>;</p>
<p>/**<br>
*</p>
<ul>
<li>
<p><span class="mention">@author</span> Gabuuzz<br>
*/<br>
public class MethodCreator {</p>
<p>private MethodGen m;<br>
private InstructionList ml;</p>
<p>public MethodCreator(int access_flags,Type return_type,Type[] arg_types,String[] arg_names,<br>
String method_name,String class_name,InstructionList il,ConstantPoolGen cp){<br>
m = new MethodGen(access_flags, return_type, arg_types, arg_names, method_name, class_name, il, cp);<br>
ml=il;<br>
}<br>
public void addReturnMethod(ClassGen cg, Field field, short kind){<br>
ml.append(new ALOAD(0));<br>
InstructionFactory ifactor=new InstructionFactory(cg, cg.getConstantPool());<br>
ml.append(ifactor.createFieldAccess(cg.getClassName(), field.getName(), field.getType(), kind));<br>
ml.append(InstructionFactory.createReturn(field.getType()));<br>
m.setMaxStack();<br>
m.setMaxLocals();<br>
// m.removeLineNumbers();<br>
cg.addMethod(m.getMethod());<br>
}<br>
}[/code]<br>
and how I use it(for “RSString.isEditable()”):</p>
</li>
</ul>
<p><code>//cgen is the ClassGen
MethodCreator isEditableM = new MethodCreator(Constants.ACC_PUBLIC, Type.BOOLEAN, Type.NO_ARGS, new String[]{}, "isEditable()", cgen.getClassName(), new InstructionList(), cgen.getConstantPool());
isEditableM.addReturnMethod(cgen, fi, Constants.GETFIELD);</code><br>
what wrong?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/error-to-add-method-whit-bcel/252996/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/error-to-add-method-whit-bcel/252996/1</link>
        <pubDate>Sat, 27 Dec 2008 01:56:53 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-252996-1</guid>
        <source url="https://forum.moparisthebest.com/t/error-to-add-method-whit-bcel/252996.rss">Error to add method whit bcel</source>
      </item>
  </channel>
</rss>
