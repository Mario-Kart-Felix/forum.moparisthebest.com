<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Something mepholic and i had fun with</title>
    <link>https://forum.moparisthebest.com/t/something-mepholic-and-i-had-fun-with/395291</link>
    <description>[code]&lt;?php
$types = array( // mimetypes
        &quot;ez&quot; =&gt; &quot;application/andrew-inset&quot;,
        &quot;hqx&quot; =&gt; &quot;application/mac-binhex40&quot;,
        &quot;cpt&quot; =&gt; &quot;application/mac-compactpro&quot;,
        &quot;doc&quot; =&gt; &quot;application/msword&quot;,
        &quot;bin&quot; =&gt; &quot;application/octet-stream&quot;,
        &quot;dms&quot; =&gt; &quot;application/octet-stream&quot;,
        &quot;lha&quot; =&gt; &quot;application/octet-stream&quot;,
        &quot;lzh&quot; =&gt; &quot;application/octet-stream&quot;,
        &quot;exe&quot; =&gt; &quot;application/octet-stream&quot;,
        &quot;class&quot; =&gt; &quot;application/octet-stream&quot;,
        &quot;so&quot; =&gt; &quot;application/octet-stream&quot;,
        &quot;dll&quot; =&gt; &quot;application/octet-stream&quot;,
        &quot;oda&quot; =&gt; &quot;application/oda&quot;,
        &quot;pdf&quot; =&gt; &quot;application/pdf&quot;,
        &quot;ai&quot; =&gt; &quot;application/postscript&quot;,
        &quot;eps&quot; =&gt; &quot;application/postscript&quot;,
        &quot;ps&quot; =&gt; &quot;application/postscript&quot;,
        &quot;smi&quot; =&gt; &quot;application/smil&quot;,
        &quot;smil&quot; =&gt; &quot;application/smil&quot;,
        &quot;wbxml&quot; =&gt; &quot;application/vnd.wap.wbxml&quot;,
        &quot;wmlc&quot; =&gt; &quot;application/vnd.wap.wmlc&quot;,
        &quot;wmlsc&quot; =&gt; &quot;application/vnd.wap.wmlscriptc&quot;,
        &quot;bcpio&quot; =&gt; &quot;application/x-bcpio&quot;,
        &quot;vcd&quot; =&gt; &quot;application/x-cdlink&quot;,
        &quot;pgn&quot; =&gt; &quot;application/x-chess-pgn&quot;,
        &quot;cpio&quot; =&gt; &quot;application/x-cpio&quot;,
        &quot;csh&quot; =&gt; &quot;application/x-csh&quot;,
        &quot;dcr&quot; =&gt; &quot;application/x-director&quot;,
        &quot;dir&quot; =&gt; &quot;application/x-director&quot;,
        &quot;dxr&quot; =&gt; &quot;application/x-director&quot;,
        &quot;dvi&quot; =&gt; &quot;application/x-dvi&quot;,
        &quot;spl&quot; =&gt; &quot;application/x-futuresplash&quot;,
        &quot;gtar&quot; =&gt; &quot;application/x-gtar&quot;,
        &quot;hdf&quot; =&gt; &quot;application/x-hdf&quot;,
        &quot;js&quot; =&gt; &quot;application/x-javascript&quot;,
        &quot;skp&quot; =&gt; &quot;application/x-koan&quot;,
        &quot;skd&quot; =&gt; &quot;application/x-koan&quot;,
        &quot;skt&quot; =&gt; &quot;application/x-koan&quot;,
        &quot;skm&quot; =&gt; &quot;application/x-koan&quot;,
        &quot;latex&quot; =&gt; &quot;application/x-latex&quot;,
        &quot;nc&quot; =&gt; &quot;application/x-netcdf&quot;,
        &quot;cdf&quot; =&gt; &quot;application/x-netcdf&quot;,
        &quot;sh&quot; =&gt; &quot;application/x-sh&quot;,
        &quot;shar&quot; =&gt; &quot;application/x-shar&quot;,
        &quot;swf&quot; =&gt; &quot;application/x-shockwave-flash&quot;,
        &quot;sit&quot; =&gt; &quot;application/x-stuffit&quot;,
        &quot;sv4cpio&quot; =&gt; &quot;application/x-sv4cpio&quot;,
        &quot;sv4crc&quot; =&gt; &quot;application/x-sv4crc&quot;,
        &quot;tar&quot; =&gt; &quot;application/x-tar&quot;,
        &quot;tcl&quot; =&gt; &quot;application/x-tcl&quot;,
        &quot;tex&quot; =&gt; &quot;application/x-tex&quot;,
        &quot;texinfo&quot; =&gt; &quot;application/x-texinfo&quot;,
        &quot;texi&quot; =&gt; &quot;application/x-texinfo&quot;,
        &quot;t&quot; =&gt; &quot;application/x-troff&quot;,
        &quot;tr&quot; =&gt; &quot;application/x-troff&quot;,
        &quot;roff&quot; =&gt; &quot;application/x-troff&quot;,
        &quot;man&quot; =&gt; &quot;application/x-troff-man&quot;,
        &quot;me&quot; =&gt; &quot;application/x-troff-me&quot;,
        &quot;ms&quot; =&gt; &quot;application/x-troff-ms&quot;,
        &quot;ustar&quot; =&gt; &quot;application/x-ustar&quot;,
        &quot;src&quot; =&gt; &quot;application/x-wais-source&quot;,
        &quot;xhtml&quot; =&gt; &quot;application/xhtml+xml&quot;,
        &quot;xht&quot; =&gt; &quot;application/xhtml+xml&quot;,
        &quot;zip&quot; =&gt; &quot;application/zip&quot;,
        &quot;au&quot; =&gt; &quot;audio/basic&quot;,
        &quot;snd&quot; =&gt; &quot;audio/basic&quot;,
        &quot;mid&quot; =&gt; &quot;audio/midi&quot;,
        &quot;midi&quot; =&gt; &quot;audio/midi&quot;,
        &quot;kar&quot; =&gt; &quot;audio/midi&quot;,
        &quot;mpga&quot; =&gt; &quot;audio/mpeg&quot;,
        &quot;mp2&quot; =&gt; &quot;audio/mpeg&quot;,
        &quot;mp3&quot; =&gt; &quot;audio/mpeg&quot;,
        &quot;aif&quot; =&gt; &quot;audio/x-aiff&quot;,
        &quot;aiff&quot; =&gt; &quot;audio/x-aiff&quot;,
        &quot;aifc&quot; =&gt; &quot;audio/x-aiff&quot;,
        &quot;m3u&quot; =&gt; &quot;audio/x-mpegurl&quot;,
        &quot;ram&quot; =&gt; &quot;audio/x-pn-realaudio&quot;,
        &quot;rm&quot; =&gt; &quot;audio/x-pn-realaudio&quot;,
        &quot;rpm&quot; =&gt; &quot;audio/x-pn-realaudio-plugin&quot;,
        &quot;ra&quot; =&gt; &quot;audio/x-realaudio&quot;,
        &quot;wav&quot; =&gt; &quot;audio/x-wav&quot;,
        &quot;pdb&quot; =&gt; &quot;chemical/x-pdb&quot;,
        &quot;xyz&quot; =&gt; &quot;chemical/x-xyz&quot;,
        &quot;bmp&quot; =&gt; &quot;image/bmp&quot;,
        &quot;gif&quot; =&gt; &quot;image/gif&quot;,
        &quot;ief&quot; =&gt; &quot;image/ief&quot;,
        &quot;jpeg&quot; =&gt; &quot;image/jpeg&quot;,
        &quot;jpg&quot; =&gt; &quot;image/jpeg&quot;,
        &quot;jpe&quot; =&gt; &quot;image/jpeg&quot;,
        &quot;png&quot; =&gt; &quot;image/png&quot;,
        &quot;tiff&quot; =&gt; &quot;image/tiff&quot;,
        &quot;tif&quot; =&gt; &quot;image/tif&quot;,
        &quot;djvu&quot; =&gt; &quot;image/vnd.djvu&quot;,
        &quot;djv&quot; =&gt; &quot;image/vnd.djvu&quot;,
        &quot;wbmp&quot; =&gt; &quot;image/vnd.wap.wbmp&quot;,
        &quot;ras&quot; =&gt; &quot;image/x-cmu-raster&quot;,
        &quot;pnm&quot; =&gt; &quot;image/x-portable-anymap&quot;,
        &quot;pbm&quot; =&gt; &quot;image/x-portable-bitmap&quot;,
        &quot;pgm&quot; =&gt; &quot;image/x-portable-graymap&quot;,
        &quot;ppm&quot; =&gt; &quot;image/x-portable-pixmap&quot;,
        &quot;rgb&quot; =&gt; &quot;image/x-rgb&quot;,
        &quot;xbm&quot; =&gt; &quot;image/x-xbitmap&quot;,
        &quot;xpm&quot; =&gt; &quot;image/x-xpixmap&quot;,
        &quot;xwd&quot; =&gt; &quot;image/x-windowdump&quot;,
        &quot;igs&quot; =&gt; &quot;model/iges&quot;,
        &quot;iges&quot; =&gt; &quot;model/iges&quot;,
        &quot;msh&quot; =&gt; &quot;model/mesh&quot;,
        &quot;mesh&quot; =&gt; &quot;model/mesh&quot;,
        &quot;silo&quot; =&gt; &quot;model/mesh&quot;,
        &quot;wrl&quot; =&gt; &quot;model/vrml&quot;,
        &quot;vrml&quot; =&gt; &quot;model/vrml&quot;,
        &quot;css&quot; =&gt; &quot;text/css&quot;,
        &quot;html&quot; =&gt; &quot;text/html&quot;,
        &quot;htm&quot; =&gt; &quot;text/html&quot;,
        &quot;asc&quot; =&gt; &quot;text/plain&quot;,
        &quot;txt&quot; =&gt; &quot;text/plain&quot;,
        &quot;rtx&quot; =&gt; &quot;text/richtext&quot;,
        &quot;rtf&quot; =&gt; &quot;text/rtf&quot;,
        &quot;sgml&quot; =&gt; &quot;text/sgml&quot;,
        &quot;sgm&quot; =&gt; &quot;text/sgml&quot;,
        &quot;tsv&quot; =&gt; &quot;text/tab-seperated-values&quot;,
        &quot;wml&quot; =&gt; &quot;text/vnd.wap.wml&quot;,
        &quot;wmls&quot; =&gt; &quot;text/vnd.wap.wmlscript&quot;,
        &quot;etx&quot; =&gt; &quot;text/x-setext&quot;,
        &quot;xml&quot; =&gt; &quot;text/xml&quot;,
        &quot;xsl&quot; =&gt; &quot;text/xml&quot;,
        &quot;mpeg&quot; =&gt; &quot;video/mpeg&quot;,
        &quot;mpg&quot; =&gt; &quot;video/mpeg&quot;,
        &quot;mpe&quot; =&gt; &quot;video/mpeg&quot;,
        &quot;qt&quot; =&gt; &quot;video/quicktime&quot;,
        &quot;mov&quot; =&gt; &quot;video/quicktime&quot;,
        &quot;mxu&quot; =&gt; &quot;video/vnd.mpegurl&quot;,
        &quot;avi&quot; =&gt; &quot;video/x-msvideo&quot;,
        &quot;movie&quot; =&gt; &quot;video/x-sgi-movie&quot;,
        &quot;ice&quot; =&gt; &quot;x-conference-xcooltalk&quot;
);

function byte_size($bytes) // replace number with N KB/MB/GB
{
        $size = $bytes / 1024;
        if($size &lt; 1024)
        {
                $size = number_format($size, 2);
                $size .= &#39; KB&#39;;
        }
        else
        {
                if($size / 1024 &lt; 1024)
                {
                        $size = number_format($size / 1024, 2);
                        $size .= &#39; MB&#39;;
                }
                else if ($size / 1024 / 1024 &lt; 1024)
                {
                        $size = number_format($size / 1024 / 1024, 2);
                        $size .= &#39; GB&#39;;
                }
        }
        return $size;
}

if(isset($_GET[&#39;dir&#39;])) //open a directory
{
        $files = array();
        $dir = $_GET[&#39;dir&#39;];
        echo &#39;&lt;html&gt;&lt;head&gt;&lt;title&gt;greetz mepholic&lt;/title&gt;&lt;style type=&quot;text/css&quot;&gt;body {
    color: #606060;
    background: #292929;
    font-family: &quot;Verdana&quot;, Sans, sans-serif;
    font-size: small;
}
table {
    border-collapse: collapse;
    color: #474747;
}
td {
    color:#727272;background:#383838}
A:link{color:#FF7F24}
A:visited{color:#A64C0C}
A:active{color:#D2691E}&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;table border=&quot;1&quot; cellpadding=&quot;2&quot;&gt;&#39;;
        echo &#39;&lt;tr&gt;&lt;th&gt;Filename&lt;/th&gt;&lt;th&gt;Filetype&lt;/th&gt;&lt;th&gt;Filesize&lt;/th&gt;&lt;th&gt;File owner&lt;/th&gt;&lt;th&gt;Group owner&lt;/th&gt;&lt;th&gt;Permissions&lt;/th&gt;&lt;/tr&gt;&#39;;
        if(is_dir($dir))
        {
                if ($dh = opendir($dir))
                {
                        while (($file = readdir($dh)) !== false)
                        {
                                $dir_str = str_replace(&#39;//&#39;,&#39;/&#39;,$dir.&#39;/&#39;.$file); //replace /home//hostiles/ with /home/hostiles/

                                if($file == &#39;.&#39;) // don&#39;t do anything for . directory
                                        $dir_str = str_replace(&#39;//&#39;,&#39;/&#39;,$dir.&#39;/&#39;);

                                if($file == &#39;..&#39; &amp;&amp; strlen($dir_str) &gt; 1) // replace /home/hostiles/ with /home
                                {
                                        $dirs = explode(&#39;/&#39;,rtrim($dir_str,&#39;/&#39;));
                                        $popped = array_pop($dirs);
                                        array_pop($dirs);
                                        $dir_str = implode(&#39;/&#39;,$dirs);
                                }

                                $perms = @fileperms($dir_str); // get file permissions

				// convert file perms to string format based on given octet
                                if (($perms &amp; 0xC000) == 0xC000)
                                        $info = &#39;s&#39;; // Socket
                                elseif (($perms &amp; 0xA000) == 0xA000)
                                        $info = &#39;l&#39;; // Symbolic Link
                                elseif (($perms &amp; 0x8000) == 0x8000)
                                        $info = &#39;-&#39;; // Regular
                                elseif (($perms &amp; 0x6000) == 0x6000)
                                        $info = &#39;b&#39;; // Block special
                                elseif (($perms &amp; 0x4000) == 0x4000)
                                        $info = &#39;d&#39;; // Directory
                                elseif (($perms &amp; 0x2000) == 0x2000)
                                        $info = &#39;c&#39;; // Character special
                                elseif (($perms &amp; 0x1000) == 0x1000)
                                        $info = &#39;p&#39;; // FIFO pipe
                                else
                                        $info = &#39;u&#39;; // Unknown

                                $info .= (($perms &amp; 0x0100) ? &#39;r&#39; : &#39;-&#39;);
                                $info .= (($perms &amp; 0x0080) ? &#39;w&#39; : &#39;-&#39;);
                                $info .= (($perms &amp; 0x0040) ? (($perms &amp; 0x0800) ? &#39;s&#39; : &#39;x&#39; ) : (($perms &amp; 0x0800) ? &#39;S&#39; : &#39;-&#39;));

                                $info .= (($perms &amp; 0x0020) ? &#39;r&#39; : &#39;-&#39;);
                                $info .= (($perms &amp; 0x0010) ? &#39;w&#39; : &#39;-&#39;);
                                $info .= (($perms &amp; 0x0008) ? (($perms &amp; 0x0400) ? &#39;s&#39; : &#39;x&#39; ) : (($perms &amp; 0x0400) ? &#39;S&#39; : &#39;-&#39;));

                                $info .= (($perms &amp; 0x0004) ? &#39;r&#39; : &#39;-&#39;);
                                $info .= (($perms &amp; 0x0002) ? &#39;w&#39; : &#39;-&#39;);
                                $info .= (($perms &amp; 0x0001) ? (($perms &amp; 0x0200) ? &#39;t&#39; : &#39;x&#39; ) : (($perms &amp; 0x0200) ? &#39;T&#39; : &#39;-&#39;));


				// file owner/group owner
                                $file_owner = @posix_getpwuid(fileowner($dir_str));
                                $group_owner = @posix_getgrgid(filegroup($dir_str));

				// messy; store all file data into an array then sort it with ksort a few lines down
                                $files[$dir_str] = array($file,$dir_str,@filetype($dir_str),byte_size(@filesize($dir_str)),$file_owner[&#39;name&#39;],$group_owner[&#39;name&#39;],$info);
                        }
                        closedir($dh);
                }
        }
        ksort($files);
        foreach($files as $file_location =&gt; $file)
        {
                echo &#39;&lt;tr&gt;&#39;;
                        echo &#39;&lt;td&gt;&#39;;
				// hide link if we don&#39;t have permission to view it
                                if($file[0] == &#39;..&#39;)
                                        echo &#39;&lt;a href=&quot;?&#39;.($file[2] == &#39;file&#39; ? &#39;file&#39; : &#39;dir&#39;).&#39;=&#39;.$file[1].&#39;&quot;&gt;&#39;;
                                else
                                {
                                        if($file[2] == &#39;file&#39;)
                                        {
                                                if(($check = @fopen($file[1],&#39;r&#39;)) !== false)
                                                        echo &#39;&lt;a href=&quot;?&#39;.($file[2] == &#39;file&#39; ? &#39;file&#39; : &#39;dir&#39;).&#39;=&#39;.$file[1].&#39;&quot;&gt;&#39;;
                                        }
                                        else
                                        {
                                                if(($check = @opendir($file[1])) !== false)
                                                        echo &#39;&lt;a href=&quot;?&#39;.($file[2] == &#39;file&#39; ? &#39;file&#39; : &#39;dir&#39;).&#39;=&#39;.$file[1].&#39;&quot;&gt;&#39;;
                                        }
                                }
                                echo $file[0];
				// hide link if we don&#39;t have permission to view it
                                if($file[0] == &#39;..&#39;)
                                        echo &#39;&lt;/a&gt;&#39;;
                                else
                                {
                                        if($file[2] == &#39;file&#39;)
                                        {
                                                if(($check = @fopen($file[1],&#39;r&#39;)) !== false)
                                                        echo &#39;&lt;/a&gt;&#39;;
                                        }
                                        else
                                        {
                                                if(($check = @opendir($file[1])) !== false)
                                                        echo &#39;&lt;/a&gt;&#39;;
                                        }
                                }
                        echo &#39;&lt;/td&gt;&#39;;
                        echo &#39;&lt;td&gt;&#39;.$file[2].&#39;&lt;/td&gt;&#39;;
                        echo &#39;&lt;td&gt;&#39;.$file[3].&#39;&lt;/td&gt;&#39;;
                        echo &#39;&lt;td&gt;&#39;.$file[4].&#39;&lt;/td&gt;&#39;;
                        echo &#39;&lt;td&gt;&#39;.$file[5].&#39;&lt;/td&gt;&#39;;
                        echo &#39;&lt;td&gt;&#39;.$file[6].&#39;&lt;/td&gt;&#39;;
                echo &#39;&lt;/tr&gt;&#39;.&quot;\n&quot;;
        }
        echo &#39;&lt;/table&gt;&#39;;
        echo &#39;&lt;hr /&gt;&#39;;
        $currUser  = @posix_getpwuid(posix_getuid());
        $currGroup = @posix_getgrgid($currUser[&#39;gid&#39;]);
        echo &quot;Current User: &quot; . $currUser[&#39;name&#39;] . &quot; - Current Group: &quot; . $currGroup[&#39;name&#39;] . &quot; - Current Shell: &quot; . $currUser[&#39;shell&#39;];
        echo &#39;&lt;/body&gt;&#39;;
        echo &#39;&lt;/html&gt;&#39;;
}
elseif(isset($_GET[&#39;file&#39;])) // displays image/text/video/audio files; forces downloading any other file type
{
        $path = pathinfo($_GET[&#39;file&#39;]);
        $pointer = @fopen($_GET[&#39;file&#39;],&#39;r&#39;);
        if($pointer === false)
                die(&#39;Permission denied. &lt;a href=&quot;javascript:history.go(-1)&quot;&gt;Go back&lt;/a&gt;.&#39;);
        else
        {
                @fclose($pointer);
                $mime_type = (isset($types[strtolower($path[&#39;extension&#39;])]) ? $types[strtolower($path[&#39;extension&#39;])] : &#39;application/octet-stream&#39;);
                $mime_type_expl = explode(&quot;/&quot;,$mime_type);
                header(&#39;Content-Type: &#39;.$mime_type);
                header(&#39;Content-Length: &#39;.filesize($_GET[&#39;file&#39;]));
                if($mime_type_expl[0] !== &#39;image&#39; &amp;&amp; $mime_type_expl[0] !== &#39;text&#39; &amp;&amp; $mime_type_expl[0] !== &#39;video&#39; &amp;&amp; $mime_type_expl[0] !== &#39;audio&#39;)
                        header(&#39;Content-Disposition: attachment; filename=&#39;.basename($_GET[&#39;file&#39;]));
                readfile($_GET[&#39;file&#39;]);
        }
}
?&gt;[/code]</description>
    
    <lastBuildDate>Tue, 24 May 2011 06:27:55 +0000</lastBuildDate>
    <category>General Programming</category>
    <atom:link href="https://forum.moparisthebest.com/t/something-mepholic-and-i-had-fun-with/395291.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Something mepholic and i had fun with</title>
        <dc:creator><![CDATA[@z z]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/z">@z</a> wrote:</p>
          <blockquote>
              <p>[quote=“c|p, post:10, topic:395291”]just use <a href="http://fsv.sourceforge.net/" data-bbcode="true" rel="nofollow noopener">fsv</a> noobs[/quote]without shell access, right ok</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/something-mepholic-and-i-had-fun-with/395291/11">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/something-mepholic-and-i-had-fun-with/395291/11</link>
        <pubDate>Tue, 24 May 2011 06:27:55 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-395291-11</guid>
        <source url="https://forum.moparisthebest.com/t/something-mepholic-and-i-had-fun-with/395291.rss">Something mepholic and i had fun with</source>
      </item>
      <item>
        <title>Something mepholic and i had fun with</title>
        <dc:creator><![CDATA[@Cheese_Police c|p]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/cheese_police">@Cheese_Police</a> wrote:</p>
          <blockquote>
              <p>just use <a href="http://fsv.sourceforge.net/" data-bbcode="true" rel="nofollow noopener">fsv</a> noobs</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/something-mepholic-and-i-had-fun-with/395291/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/something-mepholic-and-i-had-fun-with/395291/10</link>
        <pubDate>Tue, 24 May 2011 05:53:15 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-395291-10</guid>
        <source url="https://forum.moparisthebest.com/t/something-mepholic-and-i-had-fun-with/395291.rss">Something mepholic and i had fun with</source>
      </item>
      <item>
        <title>Something mepholic and i had fun with</title>
        <dc:creator><![CDATA[@z z]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/z">@z</a> wrote:</p>
          <blockquote>
              <p>[quote=“super_, post:8, topic:395291”]it’s a basic interface to the file system…?[/quote]And a file viewer for audio/video/text/image, else downloaded.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/something-mepholic-and-i-had-fun-with/395291/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/something-mepholic-and-i-had-fun-with/395291/9</link>
        <pubDate>Fri, 20 May 2011 17:16:56 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-395291-9</guid>
        <source url="https://forum.moparisthebest.com/t/something-mepholic-and-i-had-fun-with/395291.rss">Something mepholic and i had fun with</source>
      </item>
      <item>
        <title>Something mepholic and i had fun with</title>
        <dc:creator><![CDATA[@Jython super_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/jython">@Jython</a> wrote:</p>
          <blockquote>
              <p>it’s a basic interface to the file system…?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/something-mepholic-and-i-had-fun-with/395291/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/something-mepholic-and-i-had-fun-with/395291/8</link>
        <pubDate>Fri, 20 May 2011 15:06:39 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-395291-8</guid>
        <source url="https://forum.moparisthebest.com/t/something-mepholic-and-i-had-fun-with/395291.rss">Something mepholic and i had fun with</source>
      </item>
      <item>
        <title>Something mepholic and i had fun with</title>
        <dc:creator><![CDATA[@sanga282 sanga282]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sanga282">@sanga282</a> wrote:</p>
          <blockquote>
              <aside class="quote quote-modified" data-post="6" data-topic="395291">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/user_avatar/forum.moparisthebest.com/moparisthebest/40/30_1.png" class="avatar"> Moparisthebest:</div>
<blockquote>
<p>code=php appears to be messed up, so just don’t use it. <img src="https://forum.moparisthebest.com/images/emoji/twitter/wink.png?v=5" title=":wink:" class="emoji" alt=":wink:"></p>
</blockquote>
</aside>
<p>obvious fix for every bug that exists</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/something-mepholic-and-i-had-fun-with/395291/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/something-mepholic-and-i-had-fun-with/395291/7</link>
        <pubDate>Tue, 17 May 2011 14:25:32 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-395291-7</guid>
        <source url="https://forum.moparisthebest.com/t/something-mepholic-and-i-had-fun-with/395291.rss">Something mepholic and i had fun with</source>
      </item>
      <item>
        <title>Something mepholic and i had fun with</title>
        <dc:creator><![CDATA[@moparisthebest Moparisthebest]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/moparisthebest">@moparisthebest</a> wrote:</p>
          <blockquote>
              <p>code=php appears to be messed up, so just don’t use it. <img src="https://forum.moparisthebest.com/images/emoji/twitter/wink.png?v=5" title=":wink:" class="emoji" alt=":wink:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/something-mepholic-and-i-had-fun-with/395291/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/something-mepholic-and-i-had-fun-with/395291/6</link>
        <pubDate>Tue, 17 May 2011 06:08:05 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-395291-6</guid>
        <source url="https://forum.moparisthebest.com/t/something-mepholic-and-i-had-fun-with/395291.rss">Something mepholic and i had fun with</source>
      </item>
      <item>
        <title>Something mepholic and i had fun with</title>
        <dc:creator><![CDATA[@davidi2 Davidi2]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/davidi2">@davidi2</a> wrote:</p>
          <blockquote>
              <p>[quote=“gikid, post:1, topic:395329”]ps, you pasted it twice.[/quote]Oh… this is why it appeared so long to me :rolleyes:</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/something-mepholic-and-i-had-fun-with/395291/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/something-mepholic-and-i-had-fun-with/395291/5</link>
        <pubDate>Tue, 17 May 2011 01:26:05 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-395291-5</guid>
        <source url="https://forum.moparisthebest.com/t/something-mepholic-and-i-had-fun-with/395291.rss">Something mepholic and i had fun with</source>
      </item>
      <item>
        <title>Something mepholic and i had fun with</title>
        <dc:creator><![CDATA[@z z]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/z">@z</a> wrote:</p>
          <blockquote>
              <p>[quote=“gikid, post:1, topic:395329”]its rly nice</p>
<p>ps, you pasted it twice.</p>
<p>[code=php]</p>
&lt;?php
$types = array( // mimetypes
        "ez" =&gt; "application/andrew-inset",
        "hqx" =&gt; "application/mac-binhex40",
        "cpt" =&gt; "application/mac-compactpro",
        "doc" =&gt; "application/msword",
        "bin" =&gt; "application/octet-stream",
        "dms" =&gt; "application/octet-stream",
        "lha" =&gt; "application/octet-stream",
        "lzh" =&gt; "application/octet-stream",
        "exe" =&gt; "application/octet-stream",
        "class" =&gt; "application/octet-stream",
        "so" =&gt; "application/octet-stream",
        "dll" =&gt; "application/octet-stream",
        "oda" =&gt; "application/oda",
        "pdf" =&gt; "application/pdf",
        "ai" =&gt; "application/postscript",
        "eps" =&gt; "application/postscript",
        "ps" =&gt; "application/postscript",
        "smi" =&gt; "application/smil",
        "smil" =&gt; "application/smil",
        "wbxml" =&gt; "application/vnd.wap.wbxml",
        "wmlc" =&gt; "application/vnd.wap.wmlc",
        "wmlsc" =&gt; "application/vnd.wap.wmlscriptc",
        "bcpio" =&gt; "application/x-bcpio",
        "vcd" =&gt; "application/x-cdlink",
        "pgn" =&gt; "application/x-chess-pgn",
        "cpio" =&gt; "application/x-cpio",
        "csh" =&gt; "application/x-csh",
        "dcr" =&gt; "application/x-director",
        "dir" =&gt; "application/x-director",
        "dxr" =&gt; "application/x-director",
        "dvi" =&gt; "application/x-dvi",
        "spl" =&gt; "application/x-futuresplash",
        "gtar" =&gt; "application/x-gtar",
        "hdf" =&gt; "application/x-hdf",
        "js" =&gt; "application/x-javascript",
        "skp" =&gt; "application/x-koan",
        "skd" =&gt; "application/x-koan",
        "skt" =&gt; "application/x-koan",
        "skm" =&gt; "application/x-koan",
        "latex" =&gt; "application/x-latex",
        "nc" =&gt; "application/x-netcdf",
        "cdf" =&gt; "application/x-netcdf",
        "sh" =&gt; "application/x-sh",
        "shar" =&gt; "application/x-shar",
        "swf" =&gt; "application/x-shockwave-flash",
        "sit" =&gt; "application/x-stuffit",
        "sv4cpio" =&gt; "application/x-sv4cpio",
        "sv4crc" =&gt; "application/x-sv4crc",
        "tar" =&gt; "application/x-tar",
        "tcl" =&gt; "application/x-tcl",
        "tex" =&gt; "application/x-tex",
        "texinfo" =&gt; "application/x-texinfo",
        "texi" =&gt; "application/x-texinfo",
        "t" =&gt; "application/x-troff",
        "tr" =&gt; "application/x-troff",
        "roff" =&gt; "application/x-troff",
        "man" =&gt; "application/x-troff-man",
        "me" =&gt; "application/x-troff-me",
        "ms" =&gt; "application/x-troff-ms",
        "ustar" =&gt; "application/x-ustar",
        "src" =&gt; "application/x-wais-source",
        "xhtml" =&gt; "application/xhtml+xml",
        "xht" =&gt; "application/xhtml+xml",
        "zip" =&gt; "application/zip",
        "au" =&gt; "audio/basic",
        "snd" =&gt; "audio/basic",
        "mid" =&gt; "audio/midi",
        "midi" =&gt; "audio/midi",
        "kar" =&gt; "audio/midi",
        "mpga" =&gt; "audio/mpeg",
        "mp2" =&gt; "audio/mpeg",
        "mp3" =&gt; "audio/mpeg",
        "aif" =&gt; "audio/x-aiff",
        "aiff" =&gt; "audio/x-aiff",
        "aifc" =&gt; "audio/x-aiff",
        "m3u" =&gt; "audio/x-mpegurl",
        "ram" =&gt; "audio/x-pn-realaudio",
        "rm" =&gt; "audio/x-pn-realaudio",
        "rpm" =&gt; "audio/x-pn-realaudio-plugin",
        "ra" =&gt; "audio/x-realaudio",
        "wav" =&gt; "audio/x-wav",
        "pdb" =&gt; "chemical/x-pdb",
        "xyz" =&gt; "chemical/x-xyz",
        "bmp" =&gt; "image/bmp",
        "gif" =&gt; "image/gif",
        "ief" =&gt; "image/ief",
        "jpeg" =&gt; "image/jpeg",
        "jpg" =&gt; "image/jpeg",
        "jpe" =&gt; "image/jpeg",
        "png" =&gt; "image/png",
        "tiff" =&gt; "image/tiff",
        "tif" =&gt; "image/tif",
        "djvu" =&gt; "image/vnd.djvu",
        "djv" =&gt; "image/vnd.djvu",
        "wbmp" =&gt; "image/vnd.wap.wbmp",
        "ras" =&gt; "image/x-cmu-raster",
        "pnm" =&gt; "image/x-portable-anymap",
        "pbm" =&gt; "image/x-portable-bitmap",
        "pgm" =&gt; "image/x-portable-graymap",
        "ppm" =&gt; "image/x-portable-pixmap",
        "rgb" =&gt; "image/x-rgb",
        "xbm" =&gt; "image/x-xbitmap",
        "xpm" =&gt; "image/x-xpixmap",
        "xwd" =&gt; "image/x-windowdump",
        "igs" =&gt; "model/iges",
        "iges" =&gt; "model/iges",
        "msh" =&gt; "model/mesh",
        "mesh" =&gt; "model/mesh",
        "silo" =&gt; "model/mesh",
        "wrl" =&gt; "model/vrml",
        "vrml" =&gt; "model/vrml",
        "css" =&gt; "text/css",
        "html" =&gt; "text/html",
        "htm" =&gt; "text/html",
        "asc" =&gt; "text/plain",
        "txt" =&gt; "text/plain",
        "rtx" =&gt; "text/richtext",
        "rtf" =&gt; "text/rtf",
        "sgml" =&gt; "text/sgml",
        "sgm" =&gt; "text/sgml",
        "tsv" =&gt; "text/tab-seperated-values",
        "wml" =&gt; "text/vnd.wap.wml",
        "wmls" =&gt; "text/vnd.wap.wmlscript",
        "etx" =&gt; "text/x-setext",
        "xml" =&gt; "text/xml",
        "xsl" =&gt; "text/xml",
        "mpeg" =&gt; "video/mpeg",
        "mpg" =&gt; "video/mpeg",
        "mpe" =&gt; "video/mpeg",
        "qt" =&gt; "video/quicktime",
        "mov" =&gt; "video/quicktime",
        "mxu" =&gt; "video/vnd.mpegurl",
        "avi" =&gt; "video/x-msvideo",
        "movie" =&gt; "video/x-sgi-movie",
        "ice" =&gt; "x-conference-xcooltalk"
);

function byte_size($bytes) // replace number with N KB/MB/GB
{
        $size = $bytes / 1024;
        if($size &lt; 1024)
        {
                $size = number_format($size, 2);
                $size .= ' KB';
        }
        else
        {
                if($size / 1024 &lt; 1024)
                {
                        $size = number_format($size / 1024, 2);
                        $size .= ' MB';
                }
                else if ($size / 1024 / 1024 &lt; 1024)
                {
                        $size = number_format($size / 1024 / 1024, 2);
                        $size .= ' GB';
                }
        }
        return $size;
}

if(isset($_GET['dir'])) //open a directory
{
        $files = array();
        $dir = $_GET['dir'];
        echo 'greetz mepholicbody {
    color: #606060;
    background: #292929;
    font-family: "Verdana", Sans, sans-serif;
    font-size: small;
}
table {
    border-collapse: collapse;
    color: #474747;
}
td {
    color:#727272;background:#383838}
A:link{color:#FF7F24}
A:visited{color:#A64C0C}
A:active{color:#D2691E}<table>';
        echo '<tr>
<th>Filename</th>
<th>Filetype</th>
<th>Filesize</th>
<th>File owner</th>
<th>Group owner</th>
<th>Permissions</th>
</tr>';
        if(is_dir($dir))
        {
                if ($dh = opendir($dir))
                {
                        while (($file = readdir($dh)) !== false)
                        {
                                $dir_str = str_replace('//','/',$dir.'/'.$file); //replace /home//hostiles/ with /home/hostiles/

                                if($file == '.') // don't do anything for . directory
                                        $dir_str = str_replace('//','/',$dir.'/');

                                if($file == '..' &amp;&amp; strlen($dir_str) &gt; 1) // replace /home/hostiles/ with /home
                                {
                                        $dirs = explode('/',rtrim($dir_str,'/'));
                                        $popped = array_pop($dirs);
                                        array_pop($dirs);
                                        $dir_str = implode('/',$dirs);
                                }

                                $perms = @fileperms($dir_str); // get file permissions

                                // convert file perms to string format based on given octet
                                if (($perms &amp; 0xC000) == 0xC000)
                                        $info = 's'; // Socket
                                elseif (($perms &amp; 0xA000) == 0xA000)
                                        $info = 'l'; // Symbolic Link
                                elseif (($perms &amp; 0x8000) == 0x8000)
                                        $info = '-'; // Regular
                                elseif (($perms &amp; 0x6000) == 0x6000)
                                        $info = 'b'; // Block special
                                elseif (($perms &amp; 0x4000) == 0x4000)
                                        $info = 'd'; // Directory
                                elseif (($perms &amp; 0x2000) == 0x2000)
                                        $info = 'c'; // Character special
                                elseif (($perms &amp; 0x1000) == 0x1000)
                                        $info = 'p'; // FIFO pipe
                                else
                                        $info = 'u'; // Unknown

                                $info .= (($perms &amp; 0x0100) ? 'r' : '-');
                                $info .= (($perms &amp; 0x0080) ? 'w' : '-');
                                $info .= (($perms &amp; 0x0040) ? (($perms &amp; 0x0800) ? 's' : 'x' ) : (($perms &amp; 0x0800) ? 'S' : '-'));

                                $info .= (($perms &amp; 0x0020) ? 'r' : '-');
                                $info .= (($perms &amp; 0x0010) ? 'w' : '-');
                                $info .= (($perms &amp; 0x0008) ? (($perms &amp; 0x0400) ? 's' : 'x' ) : (($perms &amp; 0x0400) ? 'S' : '-'));

                                $info .= (($perms &amp; 0x0004) ? 'r' : '-');
                                $info .= (($perms &amp; 0x0002) ? 'w' : '-');
                                $info .= (($perms &amp; 0x0001) ? (($perms &amp; 0x0200) ? 't' : 'x' ) : (($perms &amp; 0x0200) ? 'T' : '-'));


                                // file owner/group owner
                                $file_owner = @posix_getpwuid(fileowner($dir_str));
                                $group_owner = @posix_getgrgid(filegroup($dir_str));

                                // messy; store all file data into an array then sort it with ksort a few lines down
                                $files[$dir_str] = array($file,$dir_str,@filetype($dir_str),byte_size(@filesize($dir_str)),$file_owner['name'],$group_owner['name'],$info);
                        }
                        closedir($dh);
                }
        }
        ksort($files);
        foreach($files as $file_location =&gt; $file)
        {
                echo '<tr>';
                        echo '<td>';
                                // hide link if we don't have permission to view it
                                if($file[0] == '..')
                                        echo '<a>';
                                else
                                {
                                        if($file[2] == 'file')
                                        {
                                                if(($check = @fopen($file[1],'r')) !== false)
                                                        echo '</a><a>';
                                        }
                                        else
                                        {
                                                if(($check = @opendir($file[1])) !== false)
                                                        echo '</a><a>';
                                        }
                                }
                                echo $file[0];
                                // hide link if we don't have permission to view it
                                if($file[0] == '..')
                                        echo '</a>';
                                else
                                {
                                        if($file[2] == 'file')
                                        {
                                                if(($check = @fopen($file[1],'r')) !== false)
                                                        echo '';
                                        }
                                        else
                                        {
                                                if(($check = @opendir($file[1])) !== false)
                                                        echo '';
                                        }
                                }
                        echo '</td>';
                        echo '<td>'.$file[2].'</td>';
                        echo '<td>'.$file[3].'</td>';
                        echo '<td>'.$file[4].'</td>';
                        echo '<td>'.$file[5].'</td>';
                        echo '<td>'.$file[6].'</td>';
                echo '</tr>'."\n";
        }
        echo '</table>';
        echo '<hr>';
        $currUser  = @posix_getpwuid(posix_getuid());
        $currGroup = @posix_getgrgid($currUser['gid']);
        echo "Current User: " . $currUser['name'] . " - Current Group: " . $currGroup['name'] . " - Current Shell: " . $currUser['shell'];
        echo '';
        echo '';
}
elseif(isset($_GET['file'])) // displays image/text/video/audio files; forces downloading any other file type
{
        $path = pathinfo($_GET['file']);
        $pointer = @fopen($_GET['file'],'r');
        if($pointer === false)
                die('Permission denied. <a>Go back</a>.');
        else
        {
                @fclose($pointer);
                $mime_type = (isset($types[strtolower($path['extension'])]) ? $types[strtolower($path['extension'])] : 'application/octet-stream');
                $mime_type_expl = explode("/",$mime_type);
                header('Content-Type: '.$mime_type);
                header('Content-Length: '.filesize($_GET['file']));
                if($mime_type_expl[0] !== 'image' &amp;&amp; $mime_type_expl[0] !== 'text' &amp;&amp; $mime_type_expl[0] !== 'video' &amp;&amp; $mime_type_expl[0] !== 'audio')
                        header('Content-Disposition: attachment; filename='.basename($_GET['file']));
                readfile($_GET['file']);
        }
}
?&gt;
<p>[/code][/quote]gf. <a href="http://www.moparisthebest.com/smf/index.php/topic,492557.0.html" data-bbcode="true" rel="nofollow noopener">btw</a></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/something-mepholic-and-i-had-fun-with/395291/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/something-mepholic-and-i-had-fun-with/395291/4</link>
        <pubDate>Tue, 17 May 2011 01:01:13 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-395291-4</guid>
        <source url="https://forum.moparisthebest.com/t/something-mepholic-and-i-had-fun-with/395291.rss">Something mepholic and i had fun with</source>
      </item>
      <item>
        <title>Something mepholic and i had fun with</title>
        <dc:creator><![CDATA[@z z]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/z">@z</a> wrote:</p>
          <blockquote>
              <p>[quote=“Davidi2, post:2, topic:395291”]tl;dr and cba to host</p>
<p>what is it[/quote]file.php?dir=/home/user<br>
file.php?file=/etc/passwd</p>
<p>I allows you to explore a UNIX filesystem.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/something-mepholic-and-i-had-fun-with/395291/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/something-mepholic-and-i-had-fun-with/395291/3</link>
        <pubDate>Mon, 16 May 2011 16:52:19 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-395291-3</guid>
        <source url="https://forum.moparisthebest.com/t/something-mepholic-and-i-had-fun-with/395291.rss">Something mepholic and i had fun with</source>
      </item>
      <item>
        <title>Something mepholic and i had fun with</title>
        <dc:creator><![CDATA[@davidi2 Davidi2]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/davidi2">@davidi2</a> wrote:</p>
          <blockquote>
              <p>tl;dr and cba to host</p>
<p>what is it</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/something-mepholic-and-i-had-fun-with/395291/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/something-mepholic-and-i-had-fun-with/395291/2</link>
        <pubDate>Mon, 16 May 2011 07:30:59 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-395291-2</guid>
        <source url="https://forum.moparisthebest.com/t/something-mepholic-and-i-had-fun-with/395291.rss">Something mepholic and i had fun with</source>
      </item>
      <item>
        <title>Something mepholic and i had fun with</title>
        <dc:creator><![CDATA[@z z]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/z">@z</a> wrote:</p>
          <blockquote>
              <p>[code]&lt;?php<br>
$types = array( // mimetypes<br>
“ez” =&gt; “application/andrew-inset”,<br>
“hqx” =&gt; “application/mac-binhex40”,<br>
“cpt” =&gt; “application/mac-compactpro”,<br>
“doc” =&gt; “application/msword”,<br>
“bin” =&gt; “application/octet-stream”,<br>
“dms” =&gt; “application/octet-stream”,<br>
“lha” =&gt; “application/octet-stream”,<br>
“lzh” =&gt; “application/octet-stream”,<br>
“exe” =&gt; “application/octet-stream”,<br>
“class” =&gt; “application/octet-stream”,<br>
“so” =&gt; “application/octet-stream”,<br>
“dll” =&gt; “application/octet-stream”,<br>
“oda” =&gt; “application/oda”,<br>
“pdf” =&gt; “application/pdf”,<br>
“ai” =&gt; “application/postscript”,<br>
“eps” =&gt; “application/postscript”,<br>
“ps” =&gt; “application/postscript”,<br>
“smi” =&gt; “application/smil”,<br>
“smil” =&gt; “application/smil”,<br>
“wbxml” =&gt; “application/vnd.wap.wbxml”,<br>
“wmlc” =&gt; “application/vnd.wap.wmlc”,<br>
“wmlsc” =&gt; “application/vnd.wap.wmlscriptc”,<br>
“bcpio” =&gt; “application/x-bcpio”,<br>
“vcd” =&gt; “application/x-cdlink”,<br>
“pgn” =&gt; “application/x-chess-pgn”,<br>
“cpio” =&gt; “application/x-cpio”,<br>
“csh” =&gt; “application/x-csh”,<br>
“dcr” =&gt; “application/x-director”,<br>
“dir” =&gt; “application/x-director”,<br>
“dxr” =&gt; “application/x-director”,<br>
“dvi” =&gt; “application/x-dvi”,<br>
“spl” =&gt; “application/x-futuresplash”,<br>
“gtar” =&gt; “application/x-gtar”,<br>
“hdf” =&gt; “application/x-hdf”,<br>
“js” =&gt; “application/x-javascript”,<br>
“skp” =&gt; “application/x-koan”,<br>
“skd” =&gt; “application/x-koan”,<br>
“skt” =&gt; “application/x-koan”,<br>
“skm” =&gt; “application/x-koan”,<br>
“latex” =&gt; “application/x-latex”,<br>
“nc” =&gt; “application/x-netcdf”,<br>
“cdf” =&gt; “application/x-netcdf”,<br>
“sh” =&gt; “application/x-sh”,<br>
“shar” =&gt; “application/x-shar”,<br>
“swf” =&gt; “application/x-shockwave-flash”,<br>
“sit” =&gt; “application/x-stuffit”,<br>
“sv4cpio” =&gt; “application/x-sv4cpio”,<br>
“sv4crc” =&gt; “application/x-sv4crc”,<br>
“tar” =&gt; “application/x-tar”,<br>
“tcl” =&gt; “application/x-tcl”,<br>
“tex” =&gt; “application/x-tex”,<br>
“texinfo” =&gt; “application/x-texinfo”,<br>
“texi” =&gt; “application/x-texinfo”,<br>
“t” =&gt; “application/x-troff”,<br>
“tr” =&gt; “application/x-troff”,<br>
“roff” =&gt; “application/x-troff”,<br>
“man” =&gt; “application/x-troff-man”,<br>
“me” =&gt; “application/x-troff-me”,<br>
“ms” =&gt; “application/x-troff-ms”,<br>
“ustar” =&gt; “application/x-ustar”,<br>
“src” =&gt; “application/x-wais-source”,<br>
“xhtml” =&gt; “application/xhtml+xml”,<br>
“xht” =&gt; “application/xhtml+xml”,<br>
“zip” =&gt; “application/zip”,<br>
“au” =&gt; “audio/basic”,<br>
“snd” =&gt; “audio/basic”,<br>
“mid” =&gt; “audio/midi”,<br>
“midi” =&gt; “audio/midi”,<br>
“kar” =&gt; “audio/midi”,<br>
“mpga” =&gt; “audio/mpeg”,<br>
“mp2” =&gt; “audio/mpeg”,<br>
“mp3” =&gt; “audio/mpeg”,<br>
“aif” =&gt; “audio/x-aiff”,<br>
“aiff” =&gt; “audio/x-aiff”,<br>
“aifc” =&gt; “audio/x-aiff”,<br>
“m3u” =&gt; “audio/x-mpegurl”,<br>
“ram” =&gt; “audio/x-pn-realaudio”,<br>
“rm” =&gt; “audio/x-pn-realaudio”,<br>
“rpm” =&gt; “audio/x-pn-realaudio-plugin”,<br>
“ra” =&gt; “audio/x-realaudio”,<br>
“wav” =&gt; “audio/x-wav”,<br>
“pdb” =&gt; “chemical/x-pdb”,<br>
“xyz” =&gt; “chemical/x-xyz”,<br>
“bmp” =&gt; “image/bmp”,<br>
“gif” =&gt; “image/gif”,<br>
“ief” =&gt; “image/ief”,<br>
“jpeg” =&gt; “image/jpeg”,<br>
“jpg” =&gt; “image/jpeg”,<br>
“jpe” =&gt; “image/jpeg”,<br>
“png” =&gt; “image/png”,<br>
“tiff” =&gt; “image/tiff”,<br>
“tif” =&gt; “image/tif”,<br>
“djvu” =&gt; “image/vnd.djvu”,<br>
“djv” =&gt; “image/vnd.djvu”,<br>
“wbmp” =&gt; “image/vnd.wap.wbmp”,<br>
“ras” =&gt; “image/x-cmu-raster”,<br>
“pnm” =&gt; “image/x-portable-anymap”,<br>
“pbm” =&gt; “image/x-portable-bitmap”,<br>
“pgm” =&gt; “image/x-portable-graymap”,<br>
“ppm” =&gt; “image/x-portable-pixmap”,<br>
“rgb” =&gt; “image/x-rgb”,<br>
“xbm” =&gt; “image/x-xbitmap”,<br>
“xpm” =&gt; “image/x-xpixmap”,<br>
“xwd” =&gt; “image/x-windowdump”,<br>
“igs” =&gt; “model/iges”,<br>
“iges” =&gt; “model/iges”,<br>
“msh” =&gt; “model/mesh”,<br>
“mesh” =&gt; “model/mesh”,<br>
“silo” =&gt; “model/mesh”,<br>
“wrl” =&gt; “model/vrml”,<br>
“vrml” =&gt; “model/vrml”,<br>
“css” =&gt; “text/css”,<br>
“html” =&gt; “text/html”,<br>
“htm” =&gt; “text/html”,<br>
“asc” =&gt; “text/plain”,<br>
“txt” =&gt; “text/plain”,<br>
“rtx” =&gt; “text/richtext”,<br>
“rtf” =&gt; “text/rtf”,<br>
“sgml” =&gt; “text/sgml”,<br>
“sgm” =&gt; “text/sgml”,<br>
“tsv” =&gt; “text/tab-seperated-values”,<br>
“wml” =&gt; “text/vnd.wap.wml”,<br>
“wmls” =&gt; “text/vnd.wap.wmlscript”,<br>
“etx” =&gt; “text/x-setext”,<br>
“xml” =&gt; “text/xml”,<br>
“xsl” =&gt; “text/xml”,<br>
“mpeg” =&gt; “video/mpeg”,<br>
“mpg” =&gt; “video/mpeg”,<br>
“mpe” =&gt; “video/mpeg”,<br>
“qt” =&gt; “video/quicktime”,<br>
“mov” =&gt; “video/quicktime”,<br>
“mxu” =&gt; “video/vnd.mpegurl”,<br>
“avi” =&gt; “video/x-msvideo”,<br>
“movie” =&gt; “video/x-sgi-movie”,<br>
“ice” =&gt; “x-conference-xcooltalk”<br>
);</p>
<p>function byte_size($bytes) // replace number with N KB/MB/GB<br>
{<br>
$size = $bytes / 1024;<br>
if($size &lt; 1024)<br>
{<br>
$size = number_format($size, 2);<br>
$size .= ’ KB’;<br>
}<br>
else<br>
{<br>
if($size / 1024 &lt; 1024)<br>
{<br>
$size = number_format($size / 1024, 2);<br>
$size .= ’ MB’;<br>
}<br>
else if ($size / 1024 / 1024 &lt; 1024)<br>
{<br>
$size = number_format($size / 1024 / 1024, 2);<br>
$size .= ’ GB’;<br>
}<br>
}<br>
return $size;<br>
}</p>
<p>if(isset($_GET[‘dir’])) //open a directory<br>
{<br>
$files = array();<br>
$dir = $_GET[‘dir’];<br>
echo ‘greetz mepholicbody {<br>
color: <span class="hashtag">#606060</span>;<br>
background: <span class="hashtag">#292929</span>;<br>
font-family: “Verdana”, Sans, sans-serif;<br>
font-size: small;<br>
}<br>
table {<br>
border-collapse: collapse;<br>
color: <span class="hashtag">#474747</span>;<br>
}<br>
td {<br>
color:<span class="hashtag">#727272</span>;background:<span class="hashtag">#383838</span>}<br>
A:link{color:<span class="hashtag">#FF7F24</span>}<br>
A:visited{color:<span class="hashtag">#A64C0C</span>}<br>
A:active{color:<span class="hashtag">#D2691E</span>}</p><table>’;<br>
echo ‘<tr>
<th>Filename</th>
<th>Filetype</th>
<th>Filesize</th>
<th>File owner</th>
<th>Group owner</th>
<th>Permissions</th>
</tr>’;<br>
if(is_dir($dir))<br>
{<br>
if ($dh = opendir($dir))<br>
{<br>
while (($file = readdir($dh)) !== false)<br>
{<br>
$dir_str = str_replace(’//’,’/’,$dir.’/’.$file); //replace /home//hostiles/ with /home/hostiles/
<pre><code>                            if($file == '.') // don't do anything for . directory
                                    $dir_str = str_replace('//','/',$dir.'/');

                            if($file == '..' &amp;&amp; strlen($dir_str) &gt; 1) // replace /home/hostiles/ with /home
                            {
                                    $dirs = explode('/',rtrim($dir_str,'/'));
                                    $popped = array_pop($dirs);
                                    array_pop($dirs);
                                    $dir_str = implode('/',$dirs);
                            }

                            $perms = @fileperms($dir_str); // get file permissions

			// convert file perms to string format based on given octet
                            if (($perms &amp; 0xC000) == 0xC000)
                                    $info = 's'; // Socket
                            elseif (($perms &amp; 0xA000) == 0xA000)
                                    $info = 'l'; // Symbolic Link
                            elseif (($perms &amp; 0x8000) == 0x8000)
                                    $info = '-'; // Regular
                            elseif (($perms &amp; 0x6000) == 0x6000)
                                    $info = 'b'; // Block special
                            elseif (($perms &amp; 0x4000) == 0x4000)
                                    $info = 'd'; // Directory
                            elseif (($perms &amp; 0x2000) == 0x2000)
                                    $info = 'c'; // Character special
                            elseif (($perms &amp; 0x1000) == 0x1000)
                                    $info = 'p'; // FIFO pipe
                            else
                                    $info = 'u'; // Unknown

                            $info .= (($perms &amp; 0x0100) ? 'r' : '-');
                            $info .= (($perms &amp; 0x0080) ? 'w' : '-');
                            $info .= (($perms &amp; 0x0040) ? (($perms &amp; 0x0800) ? 's' : 'x' ) : (($perms &amp; 0x0800) ? 'S' : '-'));

                            $info .= (($perms &amp; 0x0020) ? 'r' : '-');
                            $info .= (($perms &amp; 0x0010) ? 'w' : '-');
                            $info .= (($perms &amp; 0x0008) ? (($perms &amp; 0x0400) ? 's' : 'x' ) : (($perms &amp; 0x0400) ? 'S' : '-'));

                            $info .= (($perms &amp; 0x0004) ? 'r' : '-');
                            $info .= (($perms &amp; 0x0002) ? 'w' : '-');
                            $info .= (($perms &amp; 0x0001) ? (($perms &amp; 0x0200) ? 't' : 'x' ) : (($perms &amp; 0x0200) ? 'T' : '-'));


			// file owner/group owner
                            $file_owner = @posix_getpwuid(fileowner($dir_str));
                            $group_owner = @posix_getgrgid(filegroup($dir_str));

			// messy; store all file data into an array then sort it with ksort a few lines down
                            $files[$dir_str] = array($file,$dir_str,@filetype($dir_str),byte_size(@filesize($dir_str)),$file_owner['name'],$group_owner['name'],$info);
                    }
                    closedir($dh);
            }
    }
    ksort($files);
    foreach($files as $file_location =&gt; $file)
    {
            echo '&lt;tr&gt;';
                    echo '&lt;td&gt;';
			// hide link if we don't have permission to view it
                            if($file[0] == '..')
                                    echo '&lt;a href="?'.($file[2] == 'file' ? 'file' : 'dir').'='.$file[1].'"&gt;';
                            else
                            {
                                    if($file[2] == 'file')
                                    {
                                            if(($check = @fopen($file[1],'r')) !== false)
                                                    echo '&lt;a href="?'.($file[2] == 'file' ? 'file' : 'dir').'='.$file[1].'"&gt;';
                                    }
                                    else
                                    {
                                            if(($check = @opendir($file[1])) !== false)
                                                    echo '&lt;a href="?'.($file[2] == 'file' ? 'file' : 'dir').'='.$file[1].'"&gt;';
                                    }
                            }
                            echo $file[0];
			// hide link if we don't have permission to view it
                            if($file[0] == '..')
                                    echo '&lt;/a&gt;';
                            else
                            {
                                    if($file[2] == 'file')
                                    {
                                            if(($check = @fopen($file[1],'r')) !== false)
                                                    echo '&lt;/a&gt;';
                                    }
                                    else
                                    {
                                            if(($check = @opendir($file[1])) !== false)
                                                    echo '&lt;/a&gt;';
                                    }
                            }
                    echo '&lt;/td&gt;';
                    echo '&lt;td&gt;'.$file[2].'&lt;/td&gt;';
                    echo '&lt;td&gt;'.$file[3].'&lt;/td&gt;';
                    echo '&lt;td&gt;'.$file[4].'&lt;/td&gt;';
                    echo '&lt;td&gt;'.$file[5].'&lt;/td&gt;';
                    echo '&lt;td&gt;'.$file[6].'&lt;/td&gt;';
            echo '&lt;/tr&gt;'."\n";
    }
    echo '&lt;/table&gt;';
    echo '&lt;hr /&gt;';
    $currUser  = @posix_getpwuid(posix_getuid());
    $currGroup = @posix_getgrgid($currUser['gid']);
    echo "Current User: " . $currUser['name'] . " - Current Group: " . $currGroup['name'] . " - Current Shell: " . $currUser['shell'];
    echo '&lt;/body&gt;';
    echo '&lt;/html&gt;';
</code></pre>
<p>}<br>
elseif(isset($_GET[‘file’])) // displays image/text/video/audio files; forces downloading any other file type<br>
{<br>
$path = pathinfo($_GET[‘file’]);<br>
$pointer = <span class="mention">@fopen</span>($_GET[‘file’],‘r’);<br>
if($pointer === false)<br>
die(‘Permission denied. <a>Go back</a>.’);<br>
else<br>
{<br>
<span class="mention">@fclose</span>($pointer);<br>
$mime_type = (isset($types[strtolower($path[‘extension’])]) ? $types[strtolower($path[‘extension’])] : ‘application/octet-stream’);<br>
$mime_type_expl = explode("/",$mime_type);<br>
header('Content-Type: '.$mime_type);<br>
header('Content-Length: '.filesize($_GET[‘file’]));<br>
if($mime_type_expl[0] !== ‘image’ &amp;&amp; $mime_type_expl[0] !== ‘text’ &amp;&amp; $mime_type_expl[0] !== ‘video’ &amp;&amp; $mime_type_expl[0] !== ‘audio’)<br>
header(‘Content-Disposition: attachment; filename=’.basename($_GET[‘file’]));<br>
readfile($_GET[‘file’]);<br>
}<br>
}<br>
?&gt;[/code]</p>
</table>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/something-mepholic-and-i-had-fun-with/395291/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/something-mepholic-and-i-had-fun-with/395291/1</link>
        <pubDate>Mon, 16 May 2011 07:22:56 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-395291-1</guid>
        <source url="https://forum.moparisthebest.com/t/something-mepholic-and-i-had-fun-with/395291.rss">Something mepholic and i had fun with</source>
      </item>
  </channel>
</rss>
