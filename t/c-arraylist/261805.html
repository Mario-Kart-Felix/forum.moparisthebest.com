<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/c-arraylist/261805 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 14:16:42 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>[C] &#39;arraylist&#39; - General Programming - moparisthebest.com</title>
    <meta name="description" content="This linked list acts like Java&amp;#39;s Vector class. When the internal array reaches its limit, it duplicates the maximum storage. 

I made this quite a while ago, and I saw it on my computer, so I thought I&amp;#39;d post it:  

 #i&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="261805.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;[C] &#39;arraylist&#39;&#39;" href="261805.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/c-arraylist/261805" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/c-arraylist/261805" />
<meta property="og:title" content="[C] &#39;arraylist&#39;" />
<meta name="twitter:title" content="[C] &#39;arraylist&#39;" />
<meta property="og:description" content="This linked list acts like Java’s Vector class. When the internal array reaches its limit, it duplicates the maximum storage.  I made this quite a while ago, and I saw it on my computer, so I thought I’d post it:  #include &lt;stdlib.h&gt;  typedef struct {     int index;     int max;     void **a; } list;  list arraylist() {     list alist;      alist.a = malloc(10);     alist.max = 10;     alist.index = 0;      return alist; }  int size(list *l) {     return l-&gt;index-1; }  void add(list *l, void *ob..." />
<meta name="twitter:description" content="This linked list acts like Java’s Vector class. When the internal array reaches its limit, it duplicates the maximum storage.  I made this quite a while ago, and I saw it on my computer, so I thought I’d post it:  #include &lt;stdlib.h&gt;  typedef struct {     int index;     int max;     void **a; } list;  list arraylist() {     list alist;      alist.a = malloc(10);     alist.max = 10;     alist.index = 0;      return alist; }  int size(list *l) {     return l-&gt;index-1; }  void add(list *l, void *ob..." />
<meta property="article:published_time" content="2009-02-12T20:48:14+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="261805.html">[C] &#39;arraylist&#39;</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/general-programming.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>General Programming</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/abrahm2119.html'><span itemprop='name'>abrahm2119</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-02-12T20:48:14Z'>
            <time itemprop='dateModified' datetime='2016-07-31T05:25:57Z' class='post-time'>
              July 31, 2016,  5:25am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>This linked list acts like Java’s Vector class. When the internal array reaches its limit, it duplicates the maximum storage.</p>
<p>I made this quite a while ago, and I saw it on my computer, so I thought I’d post it:</p>
<pre><code class="lang-auto">#include &lt;stdlib.h&gt;

typedef struct {
    int index;
    int max;
    void **a;
} list;

list arraylist()
{
    list alist;

    alist.a = malloc(10);
    alist.max = 10;
    alist.index = 0;

    return alist;
}

int size(list *l)
{
    return l-&gt;index-1;
}

void add(list *l, void *obj)
{
    if (l-&gt;index &gt; l-&gt;max)
        realloc(&amp;(l-&gt;a), l-&gt;max*2);
 
    l-&gt;max *= 2;
    l-&gt;a[l-&gt;index++] = obj;
}

void delete(list *l, int index)
{
    l-&gt;a[index] = NULL;

    int i = index;
    int a;
    for (a = 0; a &lt; (l-&gt;index - index)-1; a++, i++)
        l-&gt;a[i] = l-&gt;a[i+1];

    l-&gt;index--;

}

void *get(list *l, int index)
{
    return l-&gt;a[index];
}


void clear(list *l)
{
    int i;
    for (i = 0; i &lt; l-&gt;index; i++)
        l-&gt;a[i] = NULL;
}

void dispose(list *l)
{
    free(l-&gt;a);
}</code></pre>
      </div>

      <meta itemprop='headline' content='[C] &#39;arraylist&#39;'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/yakman.html'><span itemprop='name'>yakman</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-02-12T23:00:57Z'>
            <time itemprop='dateModified' datetime='2016-07-31T05:26:16Z' class='post-time'>
              July 31, 2016,  5:26am
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>are you sure this worked for you?<br>
theres some parts which look like they dont.</p>
      </div>

      <meta itemprop='headline' content='[C] &#39;arraylist&#39;'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/lawl.html'><span itemprop='name'>lawl</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-02-12T23:04:32Z'>
            <time itemprop='dateModified' datetime='2016-07-31T05:26:17Z' class='post-time'>
              July 31, 2016,  5:26am
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>probably would make more sense to have arraylist() return a pointer</p>
<p>or just use c++ i dont see why you wouldnt</p>
      </div>

      <meta itemprop='headline' content='[C] &#39;arraylist&#39;'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/abrahm2119.html'><span itemprop='name'>abrahm2119</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-02-12T23:36:07Z'>
            <time itemprop='dateModified' datetime='2016-07-31T05:26:18Z' class='post-time'>
              July 31, 2016,  5:26am
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“yakman, post:2, topic:261805”]are you sure this worked for you?<br>
theres some parts which look like they dont.[/quote]yes, it works perfectly. you can try it out yourself.</p>
      </div>

      <meta itemprop='headline' content='[C] &#39;arraylist&#39;'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/frank.html'><span itemprop='name'>frank</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-02-12T23:49:14Z'>
            <time itemprop='dateModified' datetime='2016-07-31T05:26:20Z' class='post-time'>
              July 31, 2016,  5:26am
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“la­wl, post:3, topic:261805”]probably would make more sense to have arraylist() return a pointer[/quote]this</p>
<p>[quote=“la­wl, post:3, topic:261805”]or just use c++ i dont see why you wouldnt[/quote]not this</p>
      </div>

      <meta itemprop='headline' content='[C] &#39;arraylist&#39;'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/yakman.html'><span itemprop='name'>yakman</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-02-13T11:40:54Z'>
            <time itemprop='dateModified' datetime='2016-07-31T05:26:49Z' class='post-time'>
              July 31, 2016,  5:26am
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“abrahm2119, post:1, topic:261805”][code]<br>
list arraylist()<br>
{<br>
list alist;</p>
<pre><code>alist.a = malloc(10);
alist.max = 10;
alist.index = 0;

return alist;
</code></pre>
<p>}<br>
[/code][/quote]</p>
<p>the memory for the <span class="bbcode-i">alist</span> variable gets used for other things when the function returns, so you cant just return it like that.<br>
you have to declare it statically or allocate with malloc()</p>
      </div>

      <meta itemprop='headline' content='[C] &#39;arraylist&#39;'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/frank.html'><span itemprop='name'>frank</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-02-13T12:31:57Z'>
            <time itemprop='dateModified' datetime='2016-07-31T05:26:49Z' class='post-time'>
              July 31, 2016,  5:26am
            </time>
        <span itemprop='position'>#7</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“yakman, post:6, topic:261805”]the memory for the <span class="bbcode-i">alist</span> variable gets used for other things when the function returns, so you cant just return it like that.<br>
you have to declare it statically or allocate with malloc()[/quote]what.</p>
<p>the struct will be copied, so will the values of its members</p>
      </div>

      <meta itemprop='headline' content='[C] &#39;arraylist&#39;'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/yakman.html'><span itemprop='name'>yakman</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-02-13T14:07:55Z'>
            <time itemprop='dateModified' datetime='2016-07-31T05:26:52Z' class='post-time'>
              July 31, 2016,  5:26am
            </time>
        <span itemprop='position'>#8</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>oh yes, thats right</p>
      </div>

      <meta itemprop='headline' content='[C] &#39;arraylist&#39;'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/unlimitedorb.html'><span itemprop='name'>unlimitedorb</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-02-16T08:21:11Z'>
            <time itemprop='dateModified' datetime='2016-07-31T05:31:02Z' class='post-time'>
              July 31, 2016,  5:31am
            </time>
        <span itemprop='position'>#9</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“frank_, post:5, topic:261805”][quote author=la­wl link=topic=345741.msg2664899#msg2664899 date=1234479872]<br>
probably would make more sense to have arraylist() return a pointer<br>
[/quote]this</p>
<p>[quote author=la­wl link=topic=345741.msg2664899#msg2664899 date=1234479872]<br>
or just use c++ i dont see why you wouldnt<br>
[/quote]not this[/quote]</p>
<p>No, it would make more sense and be less wasteful to have the struct definition outside of the function, and then a pointer to it passed as an actual argument. That way, you can modify it after dereferencing and have the function (err I forgot if it’s considered a procedure in C at this point or maybe void is thought of as an actual value?) return void. If you just returned a pointer to it, you’ll come across the problem that yakman was thinking of i.e. local variables are allocated on the current stack frame, and once the stack frame returns, all local variables in the store are reclaimed. And like yakman pointed out, to combat that, you’d have to make it static (but that would be retarded in this context.)</p>
      </div>

      <meta itemprop='headline' content='[C] &#39;arraylist&#39;'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/c-arraylist/261805 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 14:16:43 GMT -->
</html>
