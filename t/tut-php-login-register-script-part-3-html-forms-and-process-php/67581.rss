<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>[TUT] PHP login/register script- PART 3 - HTML Forms and process.php</title>
    <link>https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581</link>
    <description>Read Part 1 and 2 first

Part 1:
http://www.moparisthebest.com/smf/index.php/topic,4050.0.html
Part 2:
http://www.moparisthebest.com/smf/index.php/topic,4052.0.html

In this one I will cover the html needed to have the person log in

ya seems outa line but people want it for their sites so ill do this part first so they can build it into their templates now :-D

OOOOKKK a lot of this is copy and paste code because of its....non function easy to describe-ness but ill try

[u]Note: If your php code gets echoed out into ur html that is because i got lazy and started using php short tags which arent always enabled on your web server. if this happens just replace &lt;? with &lt;?php
[/u]
files we will create:
login.php
process.php

1. create a new php document (easier to start with and test with.. you can build it into your site later once it works 100% or w/e u want). I named mine login.php(i dont want an index because i like directory trees since this is on my computer and not the internet)

2. Insert this code at the top of login.php
[code]&lt;?php

//include(&quot;include/session.php&quot;);
?&gt;[/code]
the reason why it is commented is because i have not covered session.php yet and it IS required for it to work so dont skip this step we will uncomment it later in part 4 or something, but for now comment it so you dont get errors.

THIS TUTORIAL FOR TIME SAKE USES TABLES!!!! YOU CAN TAKE OUT THE FORM STUFF AND PLACE INTO A DIV OR W/E YOU LIKE BUT TABLES ARE EASIER AND FASTER FOR ME TO WORK WITH! so dont say anything xlegitx!

3. Insert this code now to start the form [code]    &lt;form action=&quot;process.php&quot; method=&quot;post&quot;&gt;[/code]

4. Now to start the messy table code (see the red text). Insert this code which does nothing more than make a nice layout for the form and some stuff to come to be placed.
[code]&lt;table&gt;
      &lt;td width=&quot;100%&quot; rowspan=&quot;2&quot; ALIGN=&#39;CENTER&#39; VALIGN=&#39;TOP&#39;&gt; &lt;table align=&#39;CENTER&#39; cellpadding=&#39;0&#39; cellspacing=&#39;0&#39; border=&#39;0&#39; class=&#39;forumborder&#39; width=&quot;100%&quot;&gt;
            &lt;td class=&#39;title2&#39; align=&#39;CENTER&#39; colspan=&quot;6&quot;&gt;&lt;span class=&#39;cattitle&#39;&gt;&lt;b&gt;Login&lt;/b&gt;&lt;/span&gt;&lt;/td&gt;
          &lt;tr&gt; 
            &lt;td colspan=&quot;5&quot; align=&#39;left&#39; class=&#39;colour1&#39;&gt;[/code]

5. The following code should also be commented out for now because again session.php is not written yet in this tutorial series.
[code]			&lt;?
/**
 * User has already logged in, so display relavent links, including
 * a link to the admin center if the user is an administrator.
 */
 
 /*
if($session-&gt;logged_in){
   echo &quot;&lt;h1&gt;Logged In&lt;/h1&gt;&quot;;
   echo &quot;Welcome &lt;b&gt;$session-&gt;username&lt;/b&gt;, you are logged in. &lt;br&gt;&lt;br&gt;&quot;
   echo &quot;[&lt;a href=\&quot;process.php\&quot;&gt;Logout&lt;/a&gt;]&quot;;
}
else{
*/
?&gt;[/code]

6. Insert this little line after the php
[code]&lt;div align=&quot;center&quot;&gt;&lt;span class=&quot;error&quot;&gt;[/code]

7. Another block of php code then some html then some more php. Some will be commented some will not be, but when the ENTIRE tutorial series is done it all will be uncommented.
[code]&lt;?
/*
User is not logged in so display the form, or there was an error so display error and form.
*/

/*
if($form-&gt;num_errors &gt; 0){
   echo &quot;&lt;font size=\&quot;2\&quot; color=\&quot;#ff0000\&quot;&gt;&quot;.$form-&gt;num_errors.&quot; error(s) found&lt;/font&gt;&quot;;
}
*/
?&gt;[/code]

Some html with php in the mix. This code is the actual form. It has everything commented because form.php is not written yet either.... ya i lied every bit of php code in login.php is commented :-P

[code]
                &lt;/span&gt;&lt;/div&gt;&lt;/td&gt;
          &lt;/tr&gt;
          &lt;tr&gt; 
            &lt;td width=&quot;40%&quot; height=&quot;26&quot; align=&#39;right&#39; class=&#39;colour1&#39;&gt;Username:&lt;/td&gt;
            &lt;td colspan=&quot;3&quot; align=&#39;left&#39; class=&#39;colour1&#39;&gt;&lt;input type=&quot;text&quot; name=&quot;user&quot; value=&#39;&lt;? //echo $form-&gt;value(&quot;user&quot;); ?&gt;&#39;&gt;&lt;/td&gt;
            &lt;td width=&quot;37%&quot; align=&#39;left&#39; class=&#39;colour1&#39;&gt;&lt;? //echo $form-&gt;error(&quot;user&quot;); ?&gt;&lt;/td&gt;
          &lt;/tr&gt;
          &lt;tr&gt; 
            &lt;td height=&quot;27&quot; align=&#39;right&#39; class=&#39;colour1&#39;&gt; Password: &lt;br&gt; &lt;/td&gt;
            &lt;td colspan=&quot;3&quot; align=&#39;left&#39; class=&#39;colour1&#39;&gt;&lt;input type=&quot;password&quot; name=&quot;pass&quot;&gt;&lt;/td&gt;
            &lt;td align=&#39;left&#39; class=&#39;colour1&#39;&gt;&lt;? //echo $form-&gt;error(&quot;pass&quot;); ?&gt;&lt;/td&gt;
          &lt;/tr&gt;
          &lt;tr&gt; 
            &lt;td  align=&#39;center&#39; class=&#39;colour1&#39; colspan=&quot;5&quot;&gt;&lt;font size=&quot;2&quot;&gt;Remember me next time&lt;/font&gt;&lt;input type=&quot;checkbox&quot; name=&quot;remember&quot; &lt;? //if($form-&gt;value(&quot;remember&quot;) != &quot;&quot;){ echo &quot;checked&quot;; } ?&gt;&gt;
              &amp;nbsp;&amp;nbsp;&amp;nbsp; 
&lt;input type=&quot;hidden&quot; name=&quot;sublogin&quot; value=&quot;1&quot;&gt;
&lt;input type=&quot;submit&quot; value=&quot;Login&quot; class=&quot;button&quot;&gt;&lt;/td&gt;
          &lt;/tr&gt;
        &lt;/table&gt;&lt;tr&gt; &lt;/tr&gt;
    &lt;/form&gt;
[/code]

and that brings an end to the html and commented php part of the tutorial  :P

One thing I would like to point out is the hidden form named sublogin. This comes in handy with process.php so it can handle multiple forms. Keep note of this.

[hr]

Time for process.php, the file that handles all forms and logout (if u expand this project this file is designed to interact with the forms which then interacts with sessions and database.php)

1. create a file and name it process.php
[code]
&lt;?php
include(&quot;include/session.php&quot;);[/code]

2. Time to start the class. We start with the function that tells where to go in the class. Like an index of a textbook.

Define the class:
[code]
class Process
{[/code]

The function:
[code]
   function Process(){
      global $session;
      /* User submitted login form */
      if(isset($_POST[&#39;sublogin&#39;])){
         $this-&gt;procLogin();
      }
      /**
       * The only other reason user should be directed here
       * is if he wants to logout, which means user is
       * logged in currently.
       */
      else if($session-&gt;logged_in){
         $this-&gt;procLogout();
      }
      /**
       * Should not get here, which means user is viewing this page
       * by mistake and therefore is redirected.
       */
       else{
         header(&quot;Location: index.php&quot;);
       }
   }[/code]
Wont go into too much detail because of the comments. Basically the user submitted a form. This checks to see if that hidden field i mentioned is present or was posted meaning the user came from that form. It then tells php where to go in the class by telling it what function to use.

This is an example of the function after adding lots more forms to it so one can get an idea on how to add more forms with the same function. THIS CODE IS NOT PART OF THIS TUTORIAL!
[code]
class Process
{
   /* Class constructor */
   function Process(){
      global $session;
      /* User submitted login form */
      if(isset($_POST[&#39;sublogin&#39;])){
         $this-&gt;procLogin();
      }
      /* User submitted registration form */
      else if(isset($_POST[&#39;subjoin&#39;])){
         $this-&gt;procRegister(); 
      }
      /* User submitted forgot password form */
      else if(isset($_POST[&#39;subforgot&#39;])){
         $this-&gt;procForgotPass();
      }
      /* User submitted edit account form */
      else if(isset($_POST[&#39;subedit&#39;])){
         $this-&gt;procEditAccount();
      }
	  /* User submitted edit profile form */
      else if(isset($_POST[&#39;subeditbox&#39;])){
        $this-&gt;procEditProfile($_POST[&#39;subeditbox&#39;]);
      }	  
	  /* User submitted edited profile form */
      else if(isset($_POST[&#39;subeditor&#39;])){
        $this-&gt;procUpdateProfile();
      }
	  /*User sent a pm */
	  else if(isset($_POST[&#39;subpm&#39;])){
        $this-&gt;procSendPm();
      }
	  /* User wanted to delete a pm */
	  else if(isset($_POST[&#39;subinboxdel&#39;])){
	  	$this-&gt;procDelPm();
	  }
	  // User sent friend request
	  else if(isset($_POST[&#39;subfriendrequest&#39;])){
	  	$this-&gt;procFRequest();
	  }
	  // User uploaded a file
	  else if(isset($_POST[&#39;subupload&#39;])){
	  	$this-&gt;procUpload();
	  }
      /**
       * The only other reason user should be directed here
       * is if he wants to logout, which means user is
       * logged in currently.
       */
      else if($session-&gt;logged_in){
         $this-&gt;procLogout();
      }
      /**
       * Should not get here, which means user is viewing this page
       * by mistake and therefore is redirected.
       */
       else{
         header(&quot;Location: index.php&quot;);
       }
   }[/code]

3. We only have 2 more functions because this is basic. Login and Logout. Well cover login first.

[code]
   /**
    * procLogin - Processes the user submitted login form, if errors
    * are found, the user is redirected to correct the information,
    * if not, the user is effectively logged in to the system.
    */
   function procLogin(){
      global $session, $form;
      /* Login attempt */
      $retval = $session-&gt;login($_POST[&#39;user&#39;], $_POST[&#39;pass&#39;], isset($_POST[&#39;remember&#39;]));
      
      /* Login successful */
      if($retval){
         header(&quot;Location: members.php&quot;);//uour login area, change this
      }
      /* Login failed */
      else{
         $_SESSION[&#39;value_array&#39;] = $_POST;
         $_SESSION[&#39;error_array&#39;] = $form-&gt;getErrorArray();
         header(&quot;Location: login.php&quot;);
      }
   }
[/code]
Here you will notice the php files we have not covered yet in use again (they are used a lot): form.php and session.php

You will then notice that it sends the POST information to session.php. Just to foreshadow a bit, what it is doing is sending the information to session.php. Session.php then communicates with database.php which retrieves the data out of the mysql (see part 2&#39;s functions and database.php). If all goes well with database.php, session.php then sets the cookies and other variables to create a working session, thus session.php gets its name from creating and managing sessions.

Next notice the error array. This is part of form.php this will set errors that will get echoed out to the user. This comes in handy a lot! If u expand this script into a larger system, the errors can range from login failed to private message failed to send. For this example it will just say login failed or banned (not authorized).

4. Now after logging in one might want to log out.
[code]   /**
    * procLogout - Simply attempts to log the user out of the system
    * given that there is no logout form to process.
    */
   function procLogout(){
      global $session;
      $retval = $session-&gt;logout();
      header(&quot;Location: index.php&quot;);
   }
}[/code]
This code block is straight forward and just take what i explained in the last part about sessions. The header line just redirects the user to the given page after logging out.

5. The final piece of code just makes php start the class from the start. Like opening the book and reading the index to find where to go.
[code]
$process = new Process;

?&gt;[/code]

And that concludes part 3. I know it was crappy due to the form&#39;s code was all commented out but hey, this one was easy and relatively straight forward. Part 4 will probably be the final part. Just depends on how long session.php will end up taking to explain and post. What I hope to cover in it is Session.php, Form.php, and Loose ends such as example as checking if person is logged in and going back and uncommenting the form&#39;s code.


If any of this was unclear please let me know so I can clarify this.</description>
    
    <lastBuildDate>Thu, 15 Mar 2007 19:49:05 +0000</lastBuildDate>
    <category>General Programming</category>
    <atom:link href="https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>[TUT] PHP login/register script- PART 3 - HTML Forms and process.php</title>
        <dc:creator><![CDATA[@Bang_Train Bang Train]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/bang_train">@Bang_Train</a> wrote:</p>
          <blockquote>
              <p>im at school right now…and i gotta finish writing an ddon to a proxy when i get home then well see how long i have after i finish that.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581/15">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581/15</link>
        <pubDate>Thu, 15 Mar 2007 19:49:05 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67581-15</guid>
        <source url="https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581.rss">[TUT] PHP login/register script- PART 3 - HTML Forms and process.php</source>
      </item>
      <item>
        <title>[TUT] PHP login/register script- PART 3 - HTML Forms and process.php</title>
        <dc:creator><![CDATA[@usernamelol .Fusion]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/usernamelol">@usernamelol</a> wrote:</p>
          <blockquote>
              <p>[quote=“Bang Train, post:13, topic:67581”][quote author=.Fusion link=topic=98792.msg1014164#msg1014164 date=1173941859]<br>
damn thanks man</p>
<p>Now can you right a tut on how to make information only viewable to logged in users?  <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=6" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"><br>
[/quote]</p>
<p>part 4 :-D[/quote]<br>
*Waits <img src="https://forum.moparisthebest.com/images/emoji/twitter/frowning.png?v=6" title=":frowning:" class="emoji" alt=":frowning:"> i *** you for part 4 <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=6" title=":smiley:" class="emoji" alt=":smiley:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581/14">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581/14</link>
        <pubDate>Thu, 15 Mar 2007 08:24:27 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67581-14</guid>
        <source url="https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581.rss">[TUT] PHP login/register script- PART 3 - HTML Forms and process.php</source>
      </item>
      <item>
        <title>[TUT] PHP login/register script- PART 3 - HTML Forms and process.php</title>
        <dc:creator><![CDATA[@Bang_Train Bang Train]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/bang_train">@Bang_Train</a> wrote:</p>
          <blockquote>
              <p>[quote=".Fusion, post:11, topic:67581"]damn thanks man</p>
<p>Now can you right a tut on how to make information only viewable to logged in users?  :P[/quote]</p>
<p>part 4 <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=6" title=":smiley:" class="emoji" alt=":smiley:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581/13">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581/13</link>
        <pubDate>Thu, 15 Mar 2007 07:44:10 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67581-13</guid>
        <source url="https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581.rss">[TUT] PHP login/register script- PART 3 - HTML Forms and process.php</source>
      </item>
      <item>
        <title>[TUT] PHP login/register script- PART 3 - HTML Forms and process.php</title>
        <dc:creator><![CDATA[@xxlegitxx xxlegitxx]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/xxlegitxx">@xxlegitxx</a> wrote:</p>
          <blockquote>
              <p>You are such a fucking g.  Thanks, man.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581/12">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581/12</link>
        <pubDate>Thu, 15 Mar 2007 07:12:05 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67581-12</guid>
        <source url="https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581.rss">[TUT] PHP login/register script- PART 3 - HTML Forms and process.php</source>
      </item>
      <item>
        <title>[TUT] PHP login/register script- PART 3 - HTML Forms and process.php</title>
        <dc:creator><![CDATA[@usernamelol .Fusion]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/usernamelol">@usernamelol</a> wrote:</p>
          <blockquote>
              <p>damn thanks man</p>
<p>Now can you right a tut on how to make information only viewable to logged in users?  <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=6" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581/11">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581/11</link>
        <pubDate>Thu, 15 Mar 2007 06:57:39 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67581-11</guid>
        <source url="https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581.rss">[TUT] PHP login/register script- PART 3 - HTML Forms and process.php</source>
      </item>
      <item>
        <title>[TUT] PHP login/register script- PART 3 - HTML Forms and process.php</title>
        <dc:creator><![CDATA[@Bang_Train Bang Train]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/bang_train">@Bang_Train</a> wrote:</p>
          <blockquote>
              <p>it was wamp 5 version 1.7.0</p>
<p>went back to 1.6.5</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581/10</link>
        <pubDate>Thu, 15 Mar 2007 06:06:01 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67581-10</guid>
        <source url="https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581.rss">[TUT] PHP login/register script- PART 3 - HTML Forms and process.php</source>
      </item>
      <item>
        <title>[TUT] PHP login/register script- PART 3 - HTML Forms and process.php</title>
        <dc:creator><![CDATA[@N00b1 N00b1]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/n00b1">@N00b1</a> wrote:</p>
          <blockquote>
              <p>use wamp5 it works grate</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581/9</link>
        <pubDate>Wed, 14 Mar 2007 17:47:10 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67581-9</guid>
        <source url="https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581.rss">[TUT] PHP login/register script- PART 3 - HTML Forms and process.php</source>
      </item>
      <item>
        <title>[TUT] PHP login/register script- PART 3 - HTML Forms and process.php</title>
        <dc:creator><![CDATA[@Bang_Train Bang Train]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/bang_train">@Bang_Train</a> wrote:</p>
          <blockquote>
              <p>[quote=“Mopman, post:5, topic:67581”][quote author=Bang Train link=topic=98792.msg1010651#msg1010651 date=1173850234]<br>
im trying</p>
<p>itll take longer then expected but dont blame me…</p>
<p>BLAME APACHE!!!</p>
<p>DO NOT GET WAMP 1.7.0 !!!</p>
<p>I REPEAT DO NOT GET WAMP 1.7.0!!!</p>
<p>apache 2.2.4 is glitched and returns all ips as 0.0.0.0…so i cant access phpmyadmin so gotta rollback wamp…<br>
[/quote]</p>
<p>Returns IPs? :/[/quote]</p>
<p>apache returns remote addresses as 0.0.0.0 thus making any of wamps ip protection useless because all ips are now 0.0.0.0</p>
<p>its a glitch in 1.7.0 of wamp</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581/8</link>
        <pubDate>Wed, 14 Mar 2007 16:43:52 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67581-8</guid>
        <source url="https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581.rss">[TUT] PHP login/register script- PART 3 - HTML Forms and process.php</source>
      </item>
      <item>
        <title>[TUT] PHP login/register script- PART 3 - HTML Forms and process.php</title>
        <dc:creator><![CDATA[@killa killa]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/killa">@killa</a> wrote:</p>
          <blockquote>
              <p>iot dont matter now i got i good version now</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581/7</link>
        <pubDate>Wed, 14 Mar 2007 16:07:21 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67581-7</guid>
        <source url="https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581.rss">[TUT] PHP login/register script- PART 3 - HTML Forms and process.php</source>
      </item>
      <item>
        <title>[TUT] PHP login/register script- PART 3 - HTML Forms and process.php</title>
        <dc:creator><![CDATA[@N00b1 N00b1]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/n00b1">@N00b1</a> wrote:</p>
          <blockquote>
              <p>thank yooooo =p and you said you’ll never make it lol</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581/6</link>
        <pubDate>Wed, 14 Mar 2007 14:38:02 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67581-6</guid>
        <source url="https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581.rss">[TUT] PHP login/register script- PART 3 - HTML Forms and process.php</source>
      </item>
      <item>
        <title>[TUT] PHP login/register script- PART 3 - HTML Forms and process.php</title>
        <dc:creator><![CDATA[@Mopman Mopman]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/mopman">@Mopman</a> wrote:</p>
          <blockquote>
              <p>[quote=“Bang Train, post:3, topic:67581”]im trying</p>
<p>itll take longer then expected but dont blame me…</p>
<p>BLAME APACHE!!!</p>
<p>DO NOT GET WAMP 1.7.0 !!!</p>
<p>I REPEAT DO NOT GET WAMP 1.7.0!!!</p>
<p>apache 2.2.4 is glitched and returns all ips as 0.0.0.0…so i cant access phpmyadmin so gotta rollback wamp…[/quote]</p>
<p>Returns IPs? <img src="https://forum.moparisthebest.com/images/emoji/twitter/confused.png?v=6" title=":confused:" class="emoji" alt=":confused:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581/5</link>
        <pubDate>Wed, 14 Mar 2007 14:02:20 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67581-5</guid>
        <source url="https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581.rss">[TUT] PHP login/register script- PART 3 - HTML Forms and process.php</source>
      </item>
      <item>
        <title>[TUT] PHP login/register script- PART 3 - HTML Forms and process.php</title>
        <dc:creator><![CDATA[@Bang_Train Bang Train]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/bang_train">@Bang_Train</a> wrote:</p>
          <blockquote>
              <p>rolled back apache and i was still banned from phpmyadmin but got it to make a new .htaccess with Allow from all in it soooo… back to work[br][size=1]Posted on: March 13, 2007, 07:07:54 PM[/size][hr][quote=“killa, post:2, topic:67581”]ok i read that but got no sense out of i can u jusy post the files for me and ill give you some thing :rolleyes:[/quote]</p>
<p>lazy bum I said in part 1 i would not do that… if anything just go straight down the code blocks and copy and paste is all in order…</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581/4</link>
        <pubDate>Wed, 14 Mar 2007 06:38:02 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67581-4</guid>
        <source url="https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581.rss">[TUT] PHP login/register script- PART 3 - HTML Forms and process.php</source>
      </item>
      <item>
        <title>[TUT] PHP login/register script- PART 3 - HTML Forms and process.php</title>
        <dc:creator><![CDATA[@Bang_Train Bang Train]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/bang_train">@Bang_Train</a> wrote:</p>
          <blockquote>
              <p>im trying</p>
<p>itll take longer then expected but dont blame me…</p>
<p>BLAME APACHE!!!</p>
<p>DO NOT GET WAMP 1.7.0 !!!</p>
<p>I REPEAT DO NOT GET WAMP 1.7.0!!!</p>
<p>apache 2.2.4 is glitched and returns all ips as 0.0.0.0…so i cant access phpmyadmin so gotta rollback wamp…</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581/3</link>
        <pubDate>Wed, 14 Mar 2007 05:30:34 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67581-3</guid>
        <source url="https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581.rss">[TUT] PHP login/register script- PART 3 - HTML Forms and process.php</source>
      </item>
      <item>
        <title>[TUT] PHP login/register script- PART 3 - HTML Forms and process.php</title>
        <dc:creator><![CDATA[@killa killa]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/killa">@killa</a> wrote:</p>
          <blockquote>
              <p>ok i read that but got no sense out of i can u jusy post the files for me and ill give you some thing :rolleyes:</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581/2</link>
        <pubDate>Wed, 14 Mar 2007 05:22:34 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67581-2</guid>
        <source url="https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581.rss">[TUT] PHP login/register script- PART 3 - HTML Forms and process.php</source>
      </item>
      <item>
        <title>[TUT] PHP login/register script- PART 3 - HTML Forms and process.php</title>
        <dc:creator><![CDATA[@Bang_Train Bang Train]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/bang_train">@Bang_Train</a> wrote:</p>
          <blockquote>
              <p>Read Part 1 and 2 first</p>
<p>Part 1:<br>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://forum.moparisthebest.com/uploads/default/original/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a.png" class="site-icon" width="32" height="32">
      <a href="https://forum.moparisthebest.com/" target="_blank">moparisthebest.com</a>
  </header>
  <article class="onebox-body">
    <img src="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" class="thumbnail onebox-avatar" width="500" height="500">

<h3><a href="https://forum.moparisthebest.com/" target="_blank">moparisthebest.com</a></h3>

<p>programming, irc, cars</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
<br>
Part 2:<br>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://forum.moparisthebest.com/uploads/default/original/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a.png" class="site-icon" width="32" height="32">
      <a href="https://forum.moparisthebest.com/" target="_blank">moparisthebest.com</a>
  </header>
  <article class="onebox-body">
    <img src="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" class="thumbnail onebox-avatar" width="500" height="500">

<h3><a href="https://forum.moparisthebest.com/" target="_blank">moparisthebest.com</a></h3>

<p>programming, irc, cars</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
</p>
<p>In this one I will cover the html needed to have the person log in</p>
<p>ya seems outa line but people want it for their sites so ill do this part first so they can build it into their templates now <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=6" title=":smiley:" class="emoji" alt=":smiley:"></p>
<p>OOOOKKK a lot of this is copy and paste code because of its…non function easy to describe-ness but ill try</p>
<p><span class="bbcode-u">Note: If your php code gets echoed out into ur html that is because i got lazy and started using php short tags which arent always enabled on your web server. if this happens just replace &lt;? with &lt;?php<br>
</span><br>
files we will create:<br>
login.php<br>
process.php</p>
<ol>
<li>
<p>create a new php document (easier to start with and test with… you can build it into your site later once it works 100% or w/e u want). I named mine login.php(i dont want an index because i like directory trees since this is on my computer and not the internet)</p>
</li>
<li>
<p>Insert this code at the top of login.php</p>
</li>
</ol>
<p>[code]&lt;?php</p>
<p>//include(“include/session.php”);<br>
?&gt;[/code]<br>
the reason why it is commented is because i have not covered session.php yet and it IS required for it to work so dont skip this step we will uncomment it later in part 4 or something, but for now comment it so you dont get errors.</p>
<p>THIS TUTORIAL FOR TIME SAKE USES TABLES!!! YOU CAN TAKE OUT THE FORM STUFF AND PLACE INTO A DIV OR W/E YOU LIKE BUT TABLES ARE EASIER AND FASTER FOR ME TO WORK WITH! so dont say anything xlegitx!</p>
<ol start="3">
<li>
<p>Insert this code now to start the form <code>    &lt;form action="process.php" method="post"&gt;</code></p>
</li>
<li>
<p>Now to start the messy table code (see the red text). Insert this code which does nothing more than make a nice layout for the form and some stuff to come to be placed.</p>
</li>
</ol>
<p><code>&lt;table&gt;
      &lt;td width="100%" rowspan="2" ALIGN='CENTER' VALIGN='TOP'&gt; &lt;table align='CENTER' cellpadding='0' cellspacing='0' border='0' class='forumborder' width="100%"&gt;
            &lt;td class='title2' align='CENTER' colspan="6"&gt;&lt;span class='cattitle'&gt;&lt;b&gt;Login&lt;/b&gt;&lt;/span&gt;&lt;/td&gt;
          &lt;tr&gt; 
            &lt;td colspan="5" align='left' class='colour1'&gt;</code></p>
<ol start="5">
<li>The following code should also be commented out for now because again session.php is not written yet in this tutorial series.</li>
</ol>
<p>[code]			&lt;?<br>
/**</p>
<ul>
<li>User has already logged in, so display relavent links, including</li>
<li>a link to the admin center if the user is an administrator.<br>
*/</li>
</ul>
<p>/*<br>
if($session-&gt;logged_in){<br>
echo “</p><h1>Logged In</h1>”;<br>
echo "Welcome <b>$session-&gt;username</b>, you are logged in. <br><br>"<br>
echo “[&lt;a href=“process.php”&gt;Logout]”;<br>
}<br>
else{<br>
*/<br>
?&gt;[/code]
<ol start="6">
<li>Insert this little line after the php</li>
</ol>
<pre><code class="lang-auto">&lt;div align="center"&gt;&lt;span class="error"&gt;</code></pre>
<ol start="7">
<li>Another block of php code then some html then some more php. Some will be commented some will not be, but when the ENTIRE tutorial series is done it all will be uncommented.</li>
</ol>
<p>[code]&lt;?<br>
/*<br>
User is not logged in so display the form, or there was an error so display error and form.<br>
*/</p>
<p>/*<br>
if($form-&gt;num_errors &gt; 0){<br>
echo “&lt;font size=“2” color=”#ff0000"&gt;".$form-&gt;num_errors." error(s) found";<br>
}<br>
*/<br>
?&gt;[/code]</p>
<p>Some html with php in the mix. This code is the actual form. It has everything commented because form.php is not written yet either… ya i lied every bit of php code in login.php is commented <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=6" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
<pre><code class="lang-auto">                &lt;/span&gt;&lt;/div&gt;&lt;/td&gt;
          &lt;/tr&gt;
          &lt;tr&gt; 
            &lt;td width="40%" height="26" align='right' class='colour1'&gt;Username:&lt;/td&gt;
            &lt;td colspan="3" align='left' class='colour1'&gt;&lt;input type="text" name="user" value='&lt;? //echo $form-&gt;value("user"); ?&gt;'&gt;&lt;/td&gt;
            &lt;td width="37%" align='left' class='colour1'&gt;&lt;? //echo $form-&gt;error("user"); ?&gt;&lt;/td&gt;
          &lt;/tr&gt;
          &lt;tr&gt; 
            &lt;td height="27" align='right' class='colour1'&gt; Password: &lt;br&gt; &lt;/td&gt;
            &lt;td colspan="3" align='left' class='colour1'&gt;&lt;input type="password" name="pass"&gt;&lt;/td&gt;
            &lt;td align='left' class='colour1'&gt;&lt;? //echo $form-&gt;error("pass"); ?&gt;&lt;/td&gt;
          &lt;/tr&gt;
          &lt;tr&gt; 
            &lt;td  align='center' class='colour1' colspan="5"&gt;&lt;font size="2"&gt;Remember me next time&lt;/font&gt;&lt;input type="checkbox" name="remember" &lt;? //if($form-&gt;value("remember") != ""){ echo "checked"; } ?&gt;&gt;
              &amp;nbsp;&amp;nbsp;&amp;nbsp; 
&lt;input type="hidden" name="sublogin" value="1"&gt;
&lt;input type="submit" value="Login" class="button"&gt;&lt;/td&gt;
          &lt;/tr&gt;
        &lt;/table&gt;&lt;tr&gt; &lt;/tr&gt;
    &lt;/form&gt;</code></pre>
<p>and that brings an end to the html and commented php part of the tutorial  <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=6" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
<p>One thing I would like to point out is the hidden form named sublogin. This comes in handy with process.php so it can handle multiple forms. Keep note of this.</p>
<p>[hr]</p>
<p>Time for process.php, the file that handles all forms and logout (if u expand this project this file is designed to interact with the forms which then interacts with sessions and database.php)</p>
<ol>
<li>create a file and name it process.php</li>
</ol>
<p>[code]</p>
&lt;?php
include("include/session.php");[/code]

2. Time to start the class. We start with the function that tells where to go in the class. Like an index of a textbook.

Define the class:
[code]
class Process
{[/code]

The function:
[code]
   function Process(){
      global $session;
      /* User submitted login form */
      if(isset($_POST['sublogin'])){
         $this-&gt;procLogin();
      }
      /**
       * The only other reason user should be directed here
       * is if he wants to logout, which means user is
       * logged in currently.
       */
      else if($session-&gt;logged_in){
         $this-&gt;procLogout();
      }
      /**
       * Should not get here, which means user is viewing this page
       * by mistake and therefore is redirected.
       */
       else{
         header("Location: index.php");
       }
   }[/code]
Wont go into too much detail because of the comments. Basically the user submitted a form. This checks to see if that hidden field i mentioned is present or was posted meaning the user came from that form. It then tells php where to go in the class by telling it what function to use.

This is an example of the function after adding lots more forms to it so one can get an idea on how to add more forms with the same function. THIS CODE IS NOT PART OF THIS TUTORIAL!
[code]
class Process
{
   /* Class constructor */
   function Process(){
      global $session;
      /* User submitted login form */
      if(isset($_POST['sublogin'])){
         $this-&gt;procLogin();
      }
      /* User submitted registration form */
      else if(isset($_POST['subjoin'])){
         $this-&gt;procRegister(); 
      }
      /* User submitted forgot password form */
      else if(isset($_POST['subforgot'])){
         $this-&gt;procForgotPass();
      }
      /* User submitted edit account form */
      else if(isset($_POST['subedit'])){
         $this-&gt;procEditAccount();
      }
	  /* User submitted edit profile form */
      else if(isset($_POST['subeditbox'])){
        $this-&gt;procEditProfile($_POST['subeditbox']);
      }	  
	  /* User submitted edited profile form */
      else if(isset($_POST['subeditor'])){
        $this-&gt;procUpdateProfile();
      }
	  /*User sent a pm */
	  else if(isset($_POST['subpm'])){
        $this-&gt;procSendPm();
      }
	  /* User wanted to delete a pm */
	  else if(isset($_POST['subinboxdel'])){
	  	$this-&gt;procDelPm();
	  }
	  // User sent friend request
	  else if(isset($_POST['subfriendrequest'])){
	  	$this-&gt;procFRequest();
	  }
	  // User uploaded a file
	  else if(isset($_POST['subupload'])){
	  	$this-&gt;procUpload();
	  }
      /**
       * The only other reason user should be directed here
       * is if he wants to logout, which means user is
       * logged in currently.
       */
      else if($session-&gt;logged_in){
         $this-&gt;procLogout();
      }
      /**
       * Should not get here, which means user is viewing this page
       * by mistake and therefore is redirected.
       */
       else{
         header("Location: index.php");
       }
   }[/code]

3. We only have 2 more functions because this is basic. Login and Logout. Well cover login first.

[code]
   /**
    * procLogin - Processes the user submitted login form, if errors
    * are found, the user is redirected to correct the information,
    * if not, the user is effectively logged in to the system.
    */
   function procLogin(){
      global $session, $form;
      /* Login attempt */
      $retval = $session-&gt;login($_POST['user'], $_POST['pass'], isset($_POST['remember']));
      
      /* Login successful */
      if($retval){
         header("Location: members.php");//uour login area, change this
      }
      /* Login failed */
      else{
         $_SESSION['value_array'] = $_POST;
         $_SESSION['error_array'] = $form-&gt;getErrorArray();
         header("Location: login.php");
      }
   }
[/code]
Here you will notice the php files we have not covered yet in use again (they are used a lot): form.php and session.php

You will then notice that it sends the POST information to session.php. Just to foreshadow a bit, what it is doing is sending the information to session.php. Session.php then communicates with database.php which retrieves the data out of the mysql (see part 2's functions and database.php). If all goes well with database.php, session.php then sets the cookies and other variables to create a working session, thus session.php gets its name from creating and managing sessions.

Next notice the error array. This is part of form.php this will set errors that will get echoed out to the user. This comes in handy a lot! If u expand this script into a larger system, the errors can range from login failed to private message failed to send. For this example it will just say login failed or banned (not authorized).

4. Now after logging in one might want to log out.
[code]   /**
    * procLogout - Simply attempts to log the user out of the system
    * given that there is no logout form to process.
    */
   function procLogout(){
      global $session;
      $retval = $session-&gt;logout();
      header("Location: index.php");
   }
}[/code]
This code block is straight forward and just take what i explained in the last part about sessions. The header line just redirects the user to the given page after logging out.

5. The final piece of code just makes php start the class from the start. Like opening the book and reading the index to find where to go.
[code]
$process = new Process;

?&gt;[/code]
<p>And that concludes part 3. I know it was crappy due to the form’s code was all commented out but hey, this one was easy and relatively straight forward. Part 4 will probably be the final part. Just depends on how long session.php will end up taking to explain and post. What I hope to cover in it is Session.php, Form.php, and Loose ends such as example as checking if person is logged in and going back and uncommenting the form’s code.</p>
<p>If any of this was unclear please let me know so I can clarify this.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581/1</link>
        <pubDate>Wed, 14 Mar 2007 04:33:20 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67581-1</guid>
        <source url="https://forum.moparisthebest.com/t/tut-php-login-register-script-part-3-html-forms-and-process-php/67581.rss">[TUT] PHP login/register script- PART 3 - HTML Forms and process.php</source>
      </item>
  </channel>
</rss>
