<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/combat-behaviour/442145 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Aug 2019 08:54:43 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Combat Behaviour - Runescape - moparisthebest.com</title>
    <meta name="description" content="So I&amp;#39;m working on the combat system for my server, and I&amp;#39;m trying to determine the best way of handling it. Right now, I&amp;#39;m thinking about a CombatBehaviour class that looks like so [code=Java] public interface CombatBeha&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="442145.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Combat Behaviour&#39;" href="442145.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/combat-behaviour/442145" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/combat-behaviour/442145" />
<meta property="og:title" content="Combat Behaviour" />
<meta name="twitter:title" content="Combat Behaviour" />
<meta property="og:description" content="So I’m working on the combat system for my server, and I’m trying to determine the best way of handling it. Right now, I’m thinking about a CombatBehaviour class that looks like so  public interface CombatBehaviour {     public void onAttack(final MobileEntity aggressor); } And then have 3 main behaviours like so  public class AggressiveCombatBehaviour {     @Override     public void onAttack(final MobileEntity aggressor) {         // will automatically seek out and engage in combat with any mob..." />
<meta name="twitter:description" content="So I’m working on the combat system for my server, and I’m trying to determine the best way of handling it. Right now, I’m thinking about a CombatBehaviour class that looks like so  public interface CombatBehaviour {     public void onAttack(final MobileEntity aggressor); } And then have 3 main behaviours like so  public class AggressiveCombatBehaviour {     @Override     public void onAttack(final MobileEntity aggressor) {         // will automatically seek out and engage in combat with any mob..." />
<meta property="article:published_time" content="2012-05-13T22:17:39+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="442145.html">Combat Behaviour</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/zyle1992.html'><span itemprop='name'>zyle1992</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-05-13T22:17:39Z'>
            <time itemprop='dateModified' datetime='2016-08-03T02:40:25Z' class='post-time'>
              August 3, 2016,  2:40am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>So I’m working on the combat system for my server, and I’m trying to determine the best way of handling it. Right now, I’m thinking about a CombatBehaviour class that looks like so</p>
<pre><code class="lang-auto">public interface CombatBehaviour {
    public void onAttack(final MobileEntity aggressor);
}</code></pre>
<p>And then have 3 main behaviours like so</p>
<pre><code class="lang-auto">public class AggressiveCombatBehaviour {
    @Override
    public void onAttack(final MobileEntity aggressor) {
        // will automatically seek out and engage in combat with any mobile entity
    }
}</code></pre>
<pre><code class="lang-auto">public class DefensiveCombatBehaviour {
    @Override
    public void onAttack(final MobileEntity aggressor) {
        // will only engage in combat if provoked
    }
}</code></pre>
<pre><code class="lang-auto">public class PassiveCombatBehaviour {
    @Override
    public void onAttack(final MobileEntity aggressor) {
        // Will never engage in combat, even if provoked
    }
}</code></pre>
<p>However, this design already presents some problems (ie. only aggressive depending on current equipment, faction standing, level, etc).</p>
<p>What are some improvements you think could improve this design?</p>
      </div>

      <meta itemprop='headline' content='Combat Behaviour'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/n10si_t.html'><span itemprop='name'>n10si_t</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-05-13T23:05:43Z'>
            <time itemprop='dateModified' datetime='2016-08-03T02:40:26Z' class='post-time'>
              August 3, 2016,  2:40am
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>What NPC is going to stand there and let you kill it? Why even have a passive class</p>
      </div>

      <meta itemprop='headline' content='Combat Behaviour'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/zyle1992.html'><span itemprop='name'>zyle1992</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-05-13T23:33:39Z'>
            <time itemprop='dateModified' datetime='2016-08-03T02:40:27Z' class='post-time'>
              August 3, 2016,  2:40am
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Perhaps the end user wants an Npc that won’t fight back.</p>
      </div>

      <meta itemprop='headline' content='Combat Behaviour'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/the_wanderer.html'><span itemprop='name'>the_wanderer</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-05-14T00:55:16Z'>
            <time itemprop='dateModified' datetime='2016-08-03T02:40:29Z' class='post-time'>
              August 3, 2016,  2:40am
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>How about instead of defining whether an NPC is aggressive or not (as you stated, it is dynamic and would be hard to label) you make it check during the random walking process.</p>
      </div>

      <meta itemprop='headline' content='Combat Behaviour'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/zyle1992.html'><span itemprop='name'>zyle1992</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-05-14T03:49:38Z'>
            <time itemprop='dateModified' datetime='2016-08-03T02:40:34Z' class='post-time'>
              August 3, 2016,  2:40am
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="4" data-topic="442145">
<div class="title">
<div class="quote-controls"></div>
 The Wanderer:</div>
<blockquote>
<p>How about instead of defining whether an NPC is aggressive or not (as you stated, it is dynamic and would be hard to label) you make it check during the random walking process.</p>
</blockquote>
</aside>
<p>Because that makes the behaviour tightly coupled (like hardcoding items in the client)</p>
      </div>

      <meta itemprop='headline' content='Combat Behaviour'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/the_wanderer.html'><span itemprop='name'>the_wanderer</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-05-14T04:34:33Z'>
            <time itemprop='dateModified' datetime='2016-08-03T02:40:36Z' class='post-time'>
              August 3, 2016,  2:40am
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Then just have criteria it checks for. Pretty sure this would work. Just would need to expand the canAttack to support faction standings and such like you said.</p>
<p>[code=Java]public void onAttack(MobileEntity attacker, MobileEntity victim) {<br>
if(canAttack(attacker, victim)) {<br>
//do stuff<br>
}<br>
}</p>
<p>private boolean canAttack(MobileEntity attacker, MobileEntity victim) {<br>
if(victim instanceof Player) {<br>
int victimCombatLevel = victim.getSkills().getCombatLevel();<br>
int attackerCombatLevel = attacker.getSkills().getCombatLevel();<br>
if(Math.abs(victimCombatLevel - attackerCombatLevel) &lt;= 6) {<br>
return true;<br>
}<br>
}<br>
return false;<br>
}[/code]</p>
      </div>

      <meta itemprop='headline' content='Combat Behaviour'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/zyle1992.html'><span itemprop='name'>zyle1992</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-05-14T04:54:46Z'>
            <time itemprop='dateModified' datetime='2016-08-03T02:40:36Z' class='post-time'>
              August 3, 2016,  2:40am
            </time>
        <span itemprop='position'>#7</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“The Wanderer, post:6, topic:442145”]Then just have criteria it checks for. Pretty sure this would work. Just would need to expand the canAttack to support faction standings and such like you said.</p>
<p>[code=Java]public void onAttack(MobileEntity attacker, MobileEntity victim) {<br>
if(canAttack(attacker, victim)) {<br>
//do stuff<br>
}<br>
}</p>
<p>private boolean canAttack(MobileEntity attacker, MobileEntity victim) {<br>
if(victim instanceof Player) {<br>
int victimCombatLevel = victim.getSkills().getCombatLevel();<br>
int attackerCombatLevel = attacker.getSkills().getCombatLevel();<br>
if(Math.abs(victimCombatLevel - attackerCombatLevel) &lt;= 6) {<br>
return true;<br>
}<br>
}<br>
return false;<br>
}[/code][/quote]</p>
<p>You would need to override that method for every Npc. Some attack at 6 blocks, some 5, some 10. Some start with melee, some range, some magic. Some say something before they attack, some do specials. How would you handle that?</p>
<p>NOTE that I haven’t elaborated this enough, and one class like this isn’t going to solve it. For example, the Aggressive behviour isn’t different from the Defensive behaviour, if they only start when onAttack is called. I’m going to have to consider that in the future.</p>
      </div>

      <meta itemprop='headline' content='Combat Behaviour'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/davidi2.html'><span itemprop='name'>davidi2</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-05-14T05:03:08Z'>
            <time itemprop='dateModified' datetime='2016-08-03T02:40:36Z' class='post-time'>
              August 3, 2016,  2:40am
            </time>
        <span itemprop='position'>#8</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>There is no logical categorization you could use for all of those different variables. You will need to create, read, and use a NPC database for it. Having a passive, aggressive, or defensive variable is good, but it’s not a good way to categorize it, anymore than using RangedAttacker, MageAttacker, or MeleeAttacker would be. In other words, you are overthinking it. Don’t try to create class categories for each combat variable. Have each npc type have its own combat data, and then create a generic combat class that uses the variables.</p>
      </div>

      <meta itemprop='headline' content='Combat Behaviour'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/the_wanderer.html'><span itemprop='name'>the_wanderer</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-05-14T05:04:44Z'>
            <time itemprop='dateModified' datetime='2016-08-03T02:40:36Z' class='post-time'>
              August 3, 2016,  2:40am
            </time>
        <span itemprop='position'>#9</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Through a configuration file. Perhaps XML and parsed into binary? That’s how I tell what attack style for the npc to use, how far they can reach, and if it is a custom type (like say KBD or Jad) I put custom and have a script in ruby that handles that specific case.</p>
<pre><code class="lang-auto">&lt;NPCCombatDefinition&gt;
    &lt;distance&gt;10&lt;/distance&gt;
    &lt;type&gt;MAGIC&lt;/type&gt;
    &lt;message&gt;null&lt;/message&gt;
&lt;/NPCCombatDefinition&gt;</code></pre>
<p>That would be one without a special attack that attacks at 10 blocks with a magic attack that says nothing.</p>
<pre><code class="lang-auto">&lt;NPCCombatDefinition&gt;
    &lt;distance&gt;5&lt;/distance&gt;
    &lt;type&gt;RANGE&lt;/type&gt;
    &lt;message&gt;I'M ATTACKING YOU&lt;/message&gt;
&lt;/NPCCombatDefinition&gt;
&lt;NPCCombatDefinition&gt;
    &lt;distance&gt;5&lt;/distance&gt;
    &lt;type&gt;CUSTOM&lt;/type&gt;
    &lt;message&gt;RAWR&lt;/message&gt;
&lt;/NPCCombatDefinition&gt;</code></pre>
<p>If it is custom then you implement your own (like Jad where it has 3 different attack styles) otherwise you use the ranging action as the npc that uses range will attack the same way a player with a bow does. Just perhaps doesn’t have limited ammunition. <img src="../../images/emoji/twitter/stuck_out_tongueae52.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
<p>Edit - I just made those up. An actual example from my XML file is:</p>
<p><code>
  &lt;entry&gt;
    &lt;int&gt;2745&lt;/int&gt;
        &lt;CombatNPCDefinition&gt;
          &lt;maxHit&gt;1&lt;/maxHit&gt;
          &lt;combatCooldownDelay&gt;4&lt;/combatCooldownDelay&gt;
          &lt;respawnTicks&gt;10&lt;/respawnTicks&gt;
          &lt;attack&gt;
            &lt;id&gt;423&lt;/id&gt;
                &lt;delay&gt;0&lt;/delay&gt;
          &lt;/attack&gt;
          &lt;defend&gt;
            &lt;id&gt;424&lt;/id&gt;
                &lt;delay&gt;0&lt;/delay&gt;
          &lt;/defend&gt;
          &lt;death&gt;
            &lt;id&gt;836&lt;/id&gt;
                &lt;delay&gt;0&lt;/delay&gt;
          &lt;/death&gt;
          &lt;attackType&gt;CRUSH&lt;/attackType&gt;
          &lt;combatStyle&gt;AGGRESSIVE_1&lt;/combatStyle&gt;
          &lt;combatActionType&gt;CUSTOM&lt;/combatActionType&gt;
          &lt;skills&gt;
            &lt;entry&gt;
                  &lt;skill&gt;DEFENCE&lt;/skill&gt;
                  &lt;int&gt;5&lt;/int&gt;
                &lt;/entry&gt;
                &lt;entry&gt;
                  &lt;skill&gt;HITPOINTS&lt;/skill&gt;
                  &lt;int&gt;7&lt;/int&gt;
                &lt;/entry&gt;
                &lt;entry&gt;
                  &lt;skill&gt;ATTACK&lt;/skill&gt;
                  &lt;int&gt;5&lt;/int&gt;
                &lt;/entry&gt;
          &lt;/skills&gt;
          &lt;bonuses&gt;
            &lt;int&gt;10&lt;/int&gt;
                &lt;int&gt;10&lt;/int&gt;
                &lt;int&gt;10&lt;/int&gt;
            &lt;int&gt;10&lt;/int&gt;
                &lt;int&gt;10&lt;/int&gt;
                &lt;int&gt;0&lt;/int&gt;
                &lt;int&gt;0&lt;/int&gt;
                &lt;int&gt;0&lt;/int&gt;
                &lt;int&gt;0&lt;/int&gt;
                &lt;int&gt;0&lt;/int&gt;
                &lt;int&gt;20&lt;/int&gt;
                &lt;int&gt;0&lt;/int&gt;
                &lt;int&gt;0&lt;/int&gt;
          &lt;/bonuses&gt;
        &lt;/CombatNPCDefinition&gt;
  &lt;/entry&gt;</code></p>
<p>And David, I used entry because a HashMap is &lt;entry, key&gt; or I might have that backwards. So it isn’t a generic name, it’s for my xml stream to recognize it is putting that into the map. <img src="../../images/emoji/twitter/stuck_out_tongueae52.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
      </div>

      <meta itemprop='headline' content='Combat Behaviour'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/zyle1992.html'><span itemprop='name'>zyle1992</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-05-14T05:06:32Z'>
            <time itemprop='dateModified' datetime='2016-08-03T02:40:36Z' class='post-time'>
              August 3, 2016,  2:40am
            </time>
        <span itemprop='position'>#10</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote quote-modified" data-post="8" data-topic="442145">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forum.moparisthebest.com/davidi2/40/2579_1.png" class="avatar"> Davidi2:</div>
<blockquote>
<p>There is no logical categorization you could use for all of those different variables. You will need to create, read, and use a NPC database for it. Having a passive, aggressive, or defensive variable is good, but it’s not a good way to categorize it, anymore than using RangedAttacker, MageAttacker, or MeleeAttacker would be. In other words, you are overthinking it. Don’t try to create class categories for each combat variable. Have each npc type have its own combat data, and then create a generic combat class that uses the variables.</p>
</blockquote>
</aside>
<p>That was my initial idea, but that would greatly increase the number of variables required, especially for Npcs that don’t do anything.</p>
<p>For example, having an extra field “aggression_range” for aggressive Npcs, would also be added to Shopkeepers (even though the value would be 0)</p>
<p>[quote=“The Wanderer, post:9, topic:442145”]Through a configuration file. Perhaps XML and parsed into binary? That’s how I tell what attack style for the npc to use, how far they can reach, and if it is a custom type (like say KBD or Jad) I put custom and have a script in ruby that handles that specific case.</p>
<pre><code class="lang-auto">&lt;NPCCombatDefinition&gt;
    &lt;distance&gt;10&lt;/distance&gt;
    &lt;type&gt;MAGIC&lt;/type&gt;
    &lt;message&gt;null&lt;/message&gt;
&lt;/NPCCombatDefinition&gt;</code></pre>
<p>That would be one without a special attack that attacks at 10 blocks with a magic attack that says nothing.</p>
<pre><code class="lang-auto">&lt;NPCCombatDefinition&gt;
    &lt;distance&gt;5&lt;/distance&gt;
    &lt;type&gt;RANGE&lt;/type&gt;
    &lt;message&gt;I'M ATTACKING YOU&lt;/message&gt;
&lt;/NPCCombatDefinition&gt;
&lt;NPCCombatDefinition&gt;
    &lt;distance&gt;5&lt;/distance&gt;
    &lt;type&gt;CUSTOM&lt;/type&gt;
    &lt;message&gt;RAWR&lt;/message&gt;
&lt;/NPCCombatDefinition&gt;</code></pre>
<p>If it is custom then you implement your own (like Jad where it has 3 different attack styles) otherwise you use the ranging action as the npc that uses range will attack the same way a player with a bow does. Just perhaps doesn’t have limited ammunition. :P[/quote]</p>
<p>That is not dynamic. The KBD doesn’t say anything, yet for it to be valid XML, it must be included (assuming a DTD is present). And where would you define the “CUSTOM” type?</p>
      </div>

      <meta itemprop='headline' content='Combat Behaviour'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/davidi2.html'><span itemprop='name'>davidi2</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-05-14T05:09:58Z'>
            <time itemprop='dateModified' datetime='2016-08-03T02:40:36Z' class='post-time'>
              August 3, 2016,  2:40am
            </time>
        <span itemprop='position'>#11</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“zyle1992, post:10, topic:442145”][quote author=Davidi2 link=topic=544794.msg3993802#msg3993802 date=1336971788]<br>
There is no logical categorization you could use for all of those different variables. You will need to create, read, and use a NPC database for it. Having a passive, aggressive, or defensive variable is good, but it’s not a good way to categorize it, anymore than using RangedAttacker, MageAttacker, or MeleeAttacker would be. In other words, you are overthinking it. Don’t try to create class categories for each combat variable. Have each npc type have its own combat data, and then create a generic combat class that uses the variables.<br>
[/quote]</p>
<p>That was my initial idea, but that would greatly increase the number of variables required, especially for Npcs that don’t do anything.</p>
<p>For example, having an extra field “aggression_range” for aggressive Npcs, would also be added to Shopkeepers (even though the value would be 0)[/quote]Well you need to make your variables backwards compatible. In other words, you can’t limit your variables unless you create classes for each different possible type of NPC (which would be a few thousand, because there aren’t many that would perfectly match up except for the passive ones)</p>
<p>You could have a smaller configuration file that lists all of the passive monsters (ones that don’t need combat definitions), and not create instances of the combat definition classes for those.</p>
      </div>

      <meta itemprop='headline' content='Combat Behaviour'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/the_wanderer.html'><span itemprop='name'>the_wanderer</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-05-14T05:13:58Z'>
            <time itemprop='dateModified' datetime='2016-08-03T02:40:37Z' class='post-time'>
              August 3, 2016,  2:40am
            </time>
        <span itemprop='position'>#12</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p><code>
    /**
     * Loads the npc combat definitions.
     * @throws IOException if an I/O error occurs.
     * @throws IllegalStateException if the definitions have been loaded already.
     */
    public static void init() throws IOException {
        if (definitions != null) {
            throw new IllegalStateException("NPC definitions already loaded.");
        }
        logger.info("Loading combat NPC definitions...");
        try {
            /**
             * Load NPC definitions.
             */
            definitions = new HashMap&lt;Integer, CombatNPCDefinition&gt;();
            File file = new File("data/npcCombatDefinition.xml");
            if (file.exists()) {
                definitions = XMLController.readXML(file);
                for (int i : definitions.keySet()) {
                    CombatNPCDefinition def = definitions.get(i);
                    if (def == null) {
                        continue;
                    }
                    switch (def.getCombatActionType()) {
                        case MELEE:
                            def.setCombatAction(MeleeCombatAction.getAction());
                            break;
                        case RANGE:
                            def.setCombatAction(RangeCombatAction.getAction());
                            break;
                        case MAGE:
                            def.setCombatAction(MagicCombatAction.getAction());
                            break;
                        case CUSTOM:
                            File[] files = new File("build/classes/org/apollo/game/model/combat/action/npc").listFiles();
                            String packageName = "org.apollo.game.model.combat.action.npc.";
                            for (File f : files) {
                        	if (!f.getName().endsWith(".class")) {
                                    continue;
                                }
                                String fileName = packageName + f.getName().substring(0, f.getName().length() - 6);
                                String requiredName = packageName + Misc.formatName(NPCDefinition.forId(i).getName()).replace(" ", "");
                                if (!fileName.equals(requiredName)) {
                                    continue;
                                }
                                Class&lt;?&gt; fileClass = Class.forName(fileName);
                                if (fileClass.getSuperclass() != AbstractCombatAction.class) {
                                    continue;
                                }
                                AbstractCombatAction combatAction = (AbstractCombatAction) fileClass.newInstance();
                                def.setCombatAction(combatAction);
                                System.out.println("Loading custom npc attacks: "+fileName+" with id: "+i);
                            }
                            break;
                    }
                }
                logger.info("Loaded " + definitions.size() + " combat NPC definitions.");
            } else {
                logger.info("NPC combat definitions not found!");
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
}</code><br>
ATM the custom implementations are in Java but I plan on converting to ruby so the custom npcs are plugins and not in the core.</p>
<p>And I had one where it didn’t have a message? The message was null so in your reading you would set the message to null for that definition and then make check so if the message doesn’t equal null then you make the npc say that message.</p>
      </div>

      <meta itemprop='headline' content='Combat Behaviour'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/combat-behaviour/442145 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Aug 2019 08:54:44 GMT -->
</html>
