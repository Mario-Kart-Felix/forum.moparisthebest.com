<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/legendscape/330185 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Aug 2019 00:59:09 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Legendscape - Runescape - moparisthebest.com</title>
    <meta name="description" content="Has anyone looked into working with the legendscape source that is listed on 3hit&amp;#39;s rsc links page? 

It, like the leaked pp2p source, has 3 working quests which load and save player status. I would think most rscd_v25 s&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="330185.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Legendscape&#39;" href="330185.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/legendscape/330185" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/legendscape/330185" />
<meta property="og:title" content="Legendscape" />
<meta name="twitter:title" content="Legendscape" />
<meta property="og:description" content="Has anyone looked into working with the legendscape source that is listed on 3hit’s rsc links page?  It, like the leaked pp2p source, has 3 working quests which load and save player status. I would think most rscd_v25 servers would be interested in writing quests. While EasyRSC has some of them installed using a similar method, it just seems odd that such a gem in the rough would go unnoticed for so long.  I for one am very interested in the area of quest development." />
<meta name="twitter:description" content="Has anyone looked into working with the legendscape source that is listed on 3hit’s rsc links page?  It, like the leaked pp2p source, has 3 working quests which load and save player status. I would think most rscd_v25 servers would be interested in writing quests. While EasyRSC has some of them installed using a similar method, it just seems odd that such a gem in the rough would go unnoticed for so long.  I for one am very interested in the area of quest development." />
<meta property="article:published_time" content="2010-02-20T15:12:00+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="330185.html">Legendscape</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/darscape.html'><span itemprop='name'>darscape</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-02-20T15:12:00Z'>
            <time itemprop='dateModified' datetime='2016-07-31T14:52:21Z' class='post-time'>
              July 31, 2016,  2:52pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Has anyone looked into working with the legendscape source that is listed on 3hit’s rsc links page?</p>
<p>It, like the leaked pp2p source, has 3 working quests which load and save player status. I would think most rscd_v25 servers would be interested in writing quests. While EasyRSC has some of them installed using a similar method, it just seems odd that such a gem in the rough would go unnoticed for so long.</p>
<p>I for one am very interested in the area of quest development.</p>
      </div>

      <meta itemprop='headline' content='Legendscape'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/darscape.html'><span itemprop='name'>darscape</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-02-20T16:05:52Z'>
            <time itemprop='dateModified' datetime='2016-07-31T14:52:23Z' class='post-time'>
              July 31, 2016,  2:52pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hawt. I really hope Zilent will be releasing his NPCScripter.</p>
<p>The quests were written by punKrockeR (as far as I can tell).</p>
<p>Vampire Slayer:</p>
<p>[code]import org.rscdaemon.server.quest.<em>;<br>
import org.rscdaemon.server.model.</em>;<br>
import org.rscdaemon.server.event.*;</p>
<p>/**</p>
<ul>
<li>
<p>A basic test of the quest system’s capabilities.</p>
</li>
<li>
</li>
<li>
<p><span class="mention">@author</span> punKrockeR<br>
*/<br>
public class vampslay extends Quest<br>
{<br>
private World world = World.getWorld();</p>
<p>public final static int UID = 4;</p>
<p>public vampslay(Player owner, Integer uid)<br>
{<br>
super(owner, UID);<br>
}</p>
<p>public void define()<br>
{<br>
setName(“Vampire Slayer”); // Sets the name of this quest.<br>
setFinalStage(100); // The stage at which this quest ends.<br>
associateNpc(97); // Morgan<br>
associateNpc(98); // Dr. Harlow in Varrock inn.<br>
associateNpc(96); // Count Draynor<br>
}</p>
<p>public void completeQuest()<br>
{<br>
getOwner().incExp(0, 4000 * 10, false);<br>
getOwner().getActionSender().sendStat(0);<br>
getOwner().getActionSender().sendMessage("<span class="mention">@que</span>@You have been given “+4000*10+” attack experience!");</p>
<p>//	sleep(2500);<br>
world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 2500) {<br>
public void action() {<br>
getOwner().getActionSender().sendMessage("<span class="mention">@que</span>@You have completed " + getName() + “!”);<br>
getOwner().getActionSender().sendMessage("<span class="mention">@que</span>@<span class="mention">@gre</span>@You just gained 3 quest points!");<br>
getOwner().setQuestPoints(getOwner().getQuestPoints()+3);<br>
getOwner().getActionSender().sendQuest4Finished();<br>
}<br>
});<br>
}</p>
<p>private void handleNpc(final Npc npc)<br>
{<br>
if(npc.getID() == 97)<br>
{<br>
//	sayNpcMessage(“Please please help us, bold hero”, npc);<br>
startTalking(npc);<br>
if(!questStarted()) // Say start quest dialogue.<br>
{<br>
sayNpcMessage(“Please please help us, bold hero”, npc);<br>
//	sayNpcMessage(“What am I to do?”, npc);<br>
world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 1500) {<br>
public void action() {<br>
sayMessage(“What’s the problem?”);<br>
world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 1500) {<br>
public void action() {<br>
sayNpcMessage(“Our little village has been dreadfully ravaged by an evil vampire”, npc);</p>
<pre><code> 						startTalking(npc);
 					//	sayNpcMessage("I think I have a worthwhile quest for you actually", npc);
 						world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 1200) {
 							public void action() {
 								sayNpcMessage("There's hardly any of us left", npc);
 								world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 3000) {
 									public void action() {
 										sayNpcMessage("We need someone to get rid of him once and for good", npc);
 										//sleep(3000);
 										world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 3000) {
 											public void action() {
 												new QuestMenu(getOwner(), new String[] { "I can be that someone!", "Pfftt....I'm not helping you!" })
 												{
 													public void handleReply(final int option, String response)
 													{
 														if(option == 1)
 														{
 															startTalking(npc);
 															sayMessage("Pfftt....I'm not helping you!");
 														//	sleep(1200);
 															world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 1200) {
 																public void action() {
 																	sayNpcMessage("I guess Draynor will never be saved.  Good day.", npc);
 																	world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 1200) {
 																		public void action() {
 																			stopTalking(npc); // Reset talking vars and MobState.
 																		//	getOwner().setMenuHandler(null); // Remove this menu handler.
 																		}
 																	});
 																}
 															});
 														} else
 														{
 															startTalking(npc);
 															world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 1000) {
 																public void action() {
 																	setStage(1); // The user has begun the quest - set its stage to 1.
 																	sayMessage("I can be that someone!");
 																	world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 1200) {
 																		public void action() {
 																			sayNpcMessage("Thank you so much, brave "+owner.getUsername(), npc);
 																			world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 3000) {
 																				public void action() {
 																					sayNpcMessage("You must go speak to Dr. Harlow in Varrock.", npc);
 																					world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 3000) {
 																						public void action() {
 																							sayNpcMessage("He's in the Jolly Boar Inn.", npc);
 																							world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 1200) {
 																								public void action() {
 																									stopTalking(npc); // Reset talking vars and MobState.
 																								//	getOwner().setMenuHandler(null); // Remove this menu handler.
 																								}
 																							});
 																						}
 																					});
 																				}
 																			});
 																		}
 																	});
 																}
 															});
 														}
 													}
 												};
 											}
 										});
 									}
 								});
 							}
 						});
 					}
 				});
 			}
 		});
 	}
 	else if(getStage() == 1)
 	{
 		sayNpcMessage("You must speak to Dr. Harlow in the Jolly Boar Inn", npc);
 	//	sleep(1200);
 		world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 1200) {
 			public void action() {
 				sayNpcMessage("To continue your quest!", npc);
 				stopTalking(npc);
 			}
 		});
 	}
 	else if(getStage() == 2)
 	{
 		sayNpcMessage("You need to kill the vampire now. Remember a garlic and wield the stake!", npc);
 	//	sleep(1200);
 		owner.getInventory().add(new InvItem(217, 1));
 		owner.getActionSender().sendInventory();
 		world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 1200) {
 			public void action() {
 				sayNpcMessage("Good luck!", npc);
 				stopTalking(npc);
 			}
 		});
 	}
 	else
 	{
 		if(completed()) // We've already finished this NPC's quest, so just say a polite hello.
 			sayNpcMessage("Thank you for saving draynor!", npc);
 		stopTalking(npc);
 	}
 }
 else if(npc.getID() == 98){
 	if(getStage() == 1){
 		startTalking(npc);
 		sayNpcMessage("Buy me a drink pleesh", npc);
 		world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 3000) {
 			public void action() {
 				new QuestMenu(getOwner(), new String[] { "I think you've had enough", "Morgan is in trouble" })
 				{
 					public void handleReply(final int option, String response)
 					{
 						if(option==1){
 							sayMessage("Morgan is in trouble");
 							world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 3000) {
 								public void action() {
 									sayNpcMessage("Buy mee uh drenk and i wil halp you", npc);
 									world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 3000) {
 										public void action() {
 											if(owner.getInventory().remove(193, 1) &gt; -1){
 												setStage(2);
 												sayMessage("Here you go, one cold beer!", npc);
 												world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 1500) {
 													public void action() {
 														sayNpcMessage("Cheersh matey!", npc);
 														world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 3000) {
 															public void action() {
 																sayMessage("A vampire has been terrorizing Draynor.");
 																world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 3000) {
 																	public void action() {
 																		sayNpcMessage("In order to kill the vampire you'll need to have this stake.", npc);
 																		world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 3000) {
 																			public void action() {
 																				owner.getInventory().add(new InvItem(217, 1));
 																				owner.getActionSender().sendInventory();
 																				sayNpcMessage("You also need a clove of garlic.", npc);
 																				world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 3000) {
 																					public void action() {
 																						sayNpcMessage("I hope you save Draynor, bold adventurer.", npc);
 																						stopTalking(npc);
 																					}
 																				});
 																			}
 																		});
 																	}
 																});
 															}
 														});
 													}
 												});
 												owner.getActionSender().sendInventory();
 											}else{
 												sayMessage("I don't have a beer.");
 												world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 1500) {
 													public void action() {
 														sayNpcMessage("Wut da fak satrv yuu sdrar ded", npc);
 														stopTalking(npc);
 													}
 												});
 											}
 										}
 									});
 								}
 							});
 						}else{sayMessage("I think you've had enough");stopTalking(npc);}
 					}
 				};
 			}
 		});
 	}
 	else{owner.getActionSender().sendMessage("The "+npc.getDef().getName()+" does not seem interested in talking to you.");}
 }
 else{owner.getActionSender().sendMessage("The "+npc.getDef().getName()+" does not seem interested in talking to you.");}
</code></pre>
<p>}</p>
<p>/**</p>
<ul>
<li>This is an optional trigger. If an entity that has been associated</li>
<li>(associateNpc(), associateItem(), associateObject() etc.) has been</li>
<li>interacted with in any way by the player, this will be called, along</li>
<li>with the QuestTrigger enum to define the action.<br>
*/<br>
public void triggerEntity(QuestTrigger trigger, Entity entity)<br>
{<br>
if(entity instanceof Npc) // This entity is an NPC.<br>
{<br>
Npc npc = (Npc)entity;<br>
if(trigger == QuestTrigger.NPC_KILLED) // We killed the NPC.<br>
{<br>
if(npc.getID() == 96) // Vampire<br>
{<br>
if(getStage()==100){<br>
owner.getActionSender().sendMessage(“You have already finished this quest.”);<br>
return;<br>
}else if(getStage()!=2){<br>
owner.getActionSender().sendMessage(“You are in the wrong part of the quest.”);<br>
return;<br>
}else if(getStage()==2){<br>
setStage(getFinalStage());<br>
owner.getActionSender().sendMessage(“You drive the stake into the vampire’s heart…”);<br>
if(owner.getInventory().remove(217, 1) &gt; -1){<br>
owner.getActionSender().sendInventory();<br>
}<br>
return;<br>
}<br>
}<br>
} else<br>
if(trigger == QuestTrigger.NPC_TALK) // We’re talking to the NPC<br>
{<br>
handleNpc(npc);<br>
}<br>
}<br>
}<br>
}[/code]</li>
</ul>
</li>
</ul>
<p>Isolating the code changes from the original quest engine written by Reines requires a ton of time and effort. There are many changes to the miscpacketbuilder in both world server and listening server along with other quest handlers/loading/saving in the world server and listening server. Fortunately, legendscape was also built on the RSCD_v4 source and is fully compatible with my database. Tried to copy it all into the RSCD_v4 source I have been using and still had several unhandled packets with the listening server. After working on it extensively for the last week and half, I probably could export it fully now as I now understand which packets are used and where they are written. Right now I need to either take the existing code from my server and put it into that source or try to export the quest code again. I’m not sure which would take more time as installing SQL code in the world server for loading news upon login, the implementation of a connection throttle filter, and chat filter are a pain in the back to put back in.</p>
      </div>

      <meta itemprop='headline' content='Legendscape'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/snoopy89.html'><span itemprop='name'>snoopy89</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-02-20T16:13:40Z'>
            <time itemprop='dateModified' datetime='2016-07-31T14:52:23Z' class='post-time'>
              July 31, 2016,  2:52pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>and hixk…</p>
<p>pp2p leached the quest system and the quest from legendscape no doubt about it.</p>
      </div>

      <meta itemprop='headline' content='Legendscape'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/darscape.html'><span itemprop='name'>darscape</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-02-20T16:15:08Z'>
            <time itemprop='dateModified' datetime='2016-07-31T14:52:23Z' class='post-time'>
              July 31, 2016,  2:52pm
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Yeah, I took a look at it’s source (pp2p) and noticed that but also noticed they did a sloppy job with it and several parts were broken.</p>
      </div>

      <meta itemprop='headline' content='Legendscape'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/snoopy89.html'><span itemprop='name'>snoopy89</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-02-20T16:19:29Z'>
            <time itemprop='dateModified' datetime='2016-07-31T14:52:23Z' class='post-time'>
              July 31, 2016,  2:52pm
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote no-group quote-modified" data-post="4" data-topic="330185">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/darscape/40/5_513041d5f7104045db30895d3b90af16.png" class="avatar"> darscape:</div>
<blockquote>
<p>Yeah, I took a look at it’s source (pp2p) and noticed that but also noticed they did a sloppy job with it and several parts were broken.</p>
</blockquote>
</aside>
<p>yea  pp2p has to much junk, im suprised that it even started.</p>
      </div>

      <meta itemprop='headline' content='Legendscape'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/xEnt.html'><span itemprop='name'>xEnt</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-02-21T04:03:25Z'>
            <time itemprop='dateModified' datetime='2016-07-31T14:52:57Z' class='post-time'>
              July 31, 2016,  2:52pm
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>actually punKrockeR wrote that quest system, reines didn’t have anything to do with it. He actually released it on mopar, and nobody used it except RSCA. punKrockeR joined RSCA dev team and wrote a second (private) version of the quest engine as well as about 13 quests using it.</p>
      </div>

      <meta itemprop='headline' content='Legendscape'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/darscape.html'><span itemprop='name'>darscape</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-02-21T16:24:39Z'>
            <time itemprop='dateModified' datetime='2016-07-31T14:53:26Z' class='post-time'>
              July 31, 2016,  2:53pm
            </time>
        <span itemprop='position'>#7</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Does punKrockeR still code JAVA or has he retired?</p>
      </div>

      <meta itemprop='headline' content='Legendscape'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/KO9.html'><span itemprop='name'>KO9</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-02-21T23:44:26Z'>
            <time itemprop='dateModified' datetime='2016-07-31T14:53:42Z' class='post-time'>
              July 31, 2016,  2:53pm
            </time>
        <span itemprop='position'>#8</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“darscape, post:2, topic:330185”]Hawt. I really hope Zilent will be releasing his NPCScripter.</p>
<p>The quests were written by punKrockeR (as far as I can tell).</p>
<p>Vampire Slayer:</p>
<p>[code]import org.rscdaemon.server.quest.<em>;<br>
import org.rscdaemon.server.model.</em>;<br>
import org.rscdaemon.server.event.*;</p>
<p>/**</p>
<ul>
<li>
<p>A basic test of the quest system’s capabilities.</p>
</li>
<li>
</li>
<li>
<p><span class="mention">@author</span> punKrockeR<br>
*/<br>
public class vampslay extends Quest<br>
{<br>
private World world = World.getWorld();</p>
<p>public final static int UID = 4;</p>
<p>public vampslay(Player owner, Integer uid)<br>
{<br>
super(owner, UID);<br>
}</p>
<p>public void define()<br>
{<br>
setName(“Vampire Slayer”); // Sets the name of this quest.<br>
setFinalStage(100); // The stage at which this quest ends.<br>
associateNpc(97); // Morgan<br>
associateNpc(98); // Dr. Harlow in Varrock inn.<br>
associateNpc(96); // Count Draynor<br>
}</p>
<p>public void completeQuest()<br>
{<br>
getOwner().incExp(0, 4000 * 10, false);<br>
getOwner().getActionSender().sendStat(0);<br>
getOwner().getActionSender().sendMessage("<span class="mention">@que</span>@You have been given “+4000*10+” attack experience!");</p>
<p>//	sleep(2500);<br>
world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 2500) {<br>
public void action() {<br>
getOwner().getActionSender().sendMessage("<span class="mention">@que</span>@You have completed " + getName() + “!”);<br>
getOwner().getActionSender().sendMessage("<span class="mention">@que</span>@<span class="mention">@gre</span>@You just gained 3 quest points!");<br>
getOwner().setQuestPoints(getOwner().getQuestPoints()+3);<br>
getOwner().getActionSender().sendQuest4Finished();<br>
}<br>
});<br>
}</p>
<p>private void handleNpc(final Npc npc)<br>
{<br>
if(npc.getID() == 97)<br>
{<br>
//	sayNpcMessage(“Please please help us, bold hero”, npc);<br>
startTalking(npc);<br>
if(!questStarted()) // Say start quest dialogue.<br>
{<br>
sayNpcMessage(“Please please help us, bold hero”, npc);<br>
//	sayNpcMessage(“What am I to do?”, npc);<br>
world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 1500) {<br>
public void action() {<br>
sayMessage(“What’s the problem?”);<br>
world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 1500) {<br>
public void action() {<br>
sayNpcMessage(“Our little village has been dreadfully ravaged by an evil vampire”, npc);</p>
<pre><code> 						startTalking(npc);
 					//	sayNpcMessage("I think I have a worthwhile quest for you actually", npc);
 						world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 1200) {
 							public void action() {
 								sayNpcMessage("There's hardly any of us left", npc);
 								world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 3000) {
 									public void action() {
 										sayNpcMessage("We need someone to get rid of him once and for good", npc);
 										//sleep(3000);
 										world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 3000) {
 											public void action() {
 												new QuestMenu(getOwner(), new String[] { "I can be that someone!", "Pfftt....I'm not helping you!" })
 												{
 													public void handleReply(final int option, String response)
 													{
 														if(option == 1)
 														{
 															startTalking(npc);
 															sayMessage("Pfftt....I'm not helping you!");
 														//	sleep(1200);
 															world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 1200) {
 																public void action() {
 																	sayNpcMessage("I guess Draynor will never be saved.  Good day.", npc);
 																	world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 1200) {
 																		public void action() {
 																			stopTalking(npc); // Reset talking vars and MobState.
 																		//	getOwner().setMenuHandler(null); // Remove this menu handler.
 																		}
 																	});
 																}
 															});
 														} else
 														{
 															startTalking(npc);
 															world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 1000) {
 																public void action() {
 																	setStage(1); // The user has begun the quest - set its stage to 1.
 																	sayMessage("I can be that someone!");
 																	world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 1200) {
 																		public void action() {
 																			sayNpcMessage("Thank you so much, brave "+owner.getUsername(), npc);
 																			world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 3000) {
 																				public void action() {
 																					sayNpcMessage("You must go speak to Dr. Harlow in Varrock.", npc);
 																					world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 3000) {
 																						public void action() {
 																							sayNpcMessage("He's in the Jolly Boar Inn.", npc);
 																							world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 1200) {
 																								public void action() {
 																									stopTalking(npc); // Reset talking vars and MobState.
 																								//	getOwner().setMenuHandler(null); // Remove this menu handler.
 																								}
 																							});
 																						}
 																					});
 																				}
 																			});
 																		}
 																	});
 																}
 															});
 														}
 													}
 												};
 											}
 										});
 									}
 								});
 							}
 						});
 					}
 				});
 			}
 		});
 	}
 	else if(getStage() == 1)
 	{
 		sayNpcMessage("You must speak to Dr. Harlow in the Jolly Boar Inn", npc);
 	//	sleep(1200);
 		world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 1200) {
 			public void action() {
 				sayNpcMessage("To continue your quest!", npc);
 				stopTalking(npc);
 			}
 		});
 	}
 	else if(getStage() == 2)
 	{
 		sayNpcMessage("You need to kill the vampire now. Remember a garlic and wield the stake!", npc);
 	//	sleep(1200);
 		owner.getInventory().add(new InvItem(217, 1));
 		owner.getActionSender().sendInventory();
 		world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 1200) {
 			public void action() {
 				sayNpcMessage("Good luck!", npc);
 				stopTalking(npc);
 			}
 		});
 	}
 	else
 	{
 		if(completed()) // We've already finished this NPC's quest, so just say a polite hello.
 			sayNpcMessage("Thank you for saving draynor!", npc);
 		stopTalking(npc);
 	}
 }
 else if(npc.getID() == 98){
 	if(getStage() == 1){
 		startTalking(npc);
 		sayNpcMessage("Buy me a drink pleesh", npc);
 		world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 3000) {
 			public void action() {
 				new QuestMenu(getOwner(), new String[] { "I think you've had enough", "Morgan is in trouble" })
 				{
 					public void handleReply(final int option, String response)
 					{
 						if(option==1){
 							sayMessage("Morgan is in trouble");
 							world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 3000) {
 								public void action() {
 									sayNpcMessage("Buy mee uh drenk and i wil halp you", npc);
 									world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 3000) {
 										public void action() {
 											if(owner.getInventory().remove(193, 1) &gt; -1){
 												setStage(2);
 												sayMessage("Here you go, one cold beer!", npc);
 												world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 1500) {
 													public void action() {
 														sayNpcMessage("Cheersh matey!", npc);
 														world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 3000) {
 															public void action() {
 																sayMessage("A vampire has been terrorizing Draynor.");
 																world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 3000) {
 																	public void action() {
 																		sayNpcMessage("In order to kill the vampire you'll need to have this stake.", npc);
 																		world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 3000) {
 																			public void action() {
 																				owner.getInventory().add(new InvItem(217, 1));
 																				owner.getActionSender().sendInventory();
 																				sayNpcMessage("You also need a clove of garlic.", npc);
 																				world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 3000) {
 																					public void action() {
 																						sayNpcMessage("I hope you save Draynor, bold adventurer.", npc);
 																						stopTalking(npc);
 																					}
 																				});
 																			}
 																		});
 																	}
 																});
 															}
 														});
 													}
 												});
 												owner.getActionSender().sendInventory();
 											}else{
 												sayMessage("I don't have a beer.");
 												world.getDelayedEventHandler().add(new MiniEvent(getOwner(), 1500) {
 													public void action() {
 														sayNpcMessage("Wut da fak satrv yuu sdrar ded", npc);
 														stopTalking(npc);
 													}
 												});
 											}
 										}
 									});
 								}
 							});
 						}else{sayMessage("I think you've had enough");stopTalking(npc);}
 					}
 				};
 			}
 		});
 	}
 	else{owner.getActionSender().sendMessage("The "+npc.getDef().getName()+" does not seem interested in talking to you.");}
 }
 else{owner.getActionSender().sendMessage("The "+npc.getDef().getName()+" does not seem interested in talking to you.");}
</code></pre>
<p>}</p>
<p>/**</p>
<ul>
<li>This is an optional trigger. If an entity that has been associated</li>
<li>(associateNpc(), associateItem(), associateObject() etc.) has been</li>
<li>interacted with in any way by the player, this will be called, along</li>
<li>with the QuestTrigger enum to define the action.<br>
*/<br>
public void triggerEntity(QuestTrigger trigger, Entity entity)<br>
{<br>
if(entity instanceof Npc) // This entity is an NPC.<br>
{<br>
Npc npc = (Npc)entity;<br>
if(trigger == QuestTrigger.NPC_KILLED) // We killed the NPC.<br>
{<br>
if(npc.getID() == 96) // Vampire<br>
{<br>
if(getStage()==100){<br>
owner.getActionSender().sendMessage(“You have already finished this quest.”);<br>
return;<br>
}else if(getStage()!=2){<br>
owner.getActionSender().sendMessage(“You are in the wrong part of the quest.”);<br>
return;<br>
}else if(getStage()==2){<br>
setStage(getFinalStage());<br>
owner.getActionSender().sendMessage(“You drive the stake into the vampire’s heart…”);<br>
if(owner.getInventory().remove(217, 1) &gt; -1){<br>
owner.getActionSender().sendInventory();<br>
}<br>
return;<br>
}<br>
}<br>
} else<br>
if(trigger == QuestTrigger.NPC_TALK) // We’re talking to the NPC<br>
{<br>
handleNpc(npc);<br>
}<br>
}<br>
}<br>
}[/code]</li>
</ul>
</li>
</ul>
<p>Isolating the code changes from the original quest engine written by Reines requires a ton of time and effort. There are many changes to the miscpacketbuilder in both world server and listening server along with other quest handlers/loading/saving in the world server and listening server. Fortunately, legendscape was also built on the RSCD_v4 source and is fully compatible with my database. Tried to copy it all into the RSCD_v4 source I have been using and still had several unhandled packets with the listening server. After working on it extensively for the last week and half, I probably could export it fully now as I now understand which packets are used and where they are written. Right now I need to either take the existing code from my server and put it into that source or try to export the quest code again. I’m not sure which would take more time as installing SQL code in the world server for loading news upon login, the implementation of a connection throttle filter, and chat filter are a pain in the back to put back in.[/quote]</p>
<pre><code class="lang-auto">/**
 * A basic test of the quest system's capabilities.
 *
 * @author punKrockeR
 */</code></pre>
<p>That is about as much as Matt (punK) wrote out of that quest. Whomever wrote that quest clearly copied Matt’s example class and didn’t bother removing/modifying the header. Putting Matt as the author on that shoddily written class is an insult to his coding abilities.</p>
<p><a class="mention" href="../../u/darscape.html">@darscape</a>: he is lifing at the moment, not really doing much coding these days.</p>
      </div>

      <meta itemprop='headline' content='Legendscape'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Old_Rsc_Player.html'><span itemprop='name'>Old_Rsc_Player</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-02-21T23:46:39Z'>
            <time itemprop='dateModified' datetime='2016-07-31T14:53:43Z' class='post-time'>
              July 31, 2016,  2:53pm
            </time>
        <span itemprop='position'>#9</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>hes usually getting high.</p>
      </div>

      <meta itemprop='headline' content='Legendscape'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/darscape.html'><span itemprop='name'>darscape</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-02-22T02:12:40Z'>
            <time itemprop='dateModified' datetime='2016-07-31T14:53:50Z' class='post-time'>
              July 31, 2016,  2:53pm
            </time>
        <span itemprop='position'>#10</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>ew</p>
      </div>

      <meta itemprop='headline' content='Legendscape'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/legendscape/330185 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Aug 2019 00:59:10 GMT -->
</html>
