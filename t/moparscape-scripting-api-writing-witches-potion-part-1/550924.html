<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/moparscape-scripting-api-writing-witches-potion-part-1/550924 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:06:59 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Moparscape - Scripting API: Writing Witches Potion Part 1 - Runescape - moparisthebest.com</title>
    <meta name="description" content="https://www.youtube.com/watch?v=YwOQlqqqo4E 

Notes: 

I have to review on how I want the conventions of quests to be done and I need to finish a lot of other helper methods involved with quests. This however is writing &amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="550924.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Moparscape - Scripting API: Writing Witches Potion Part 1&#39;" href="550924.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/moparscape-scripting-api-writing-witches-potion-part-1/550924" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/moparscape-scripting-api-writing-witches-potion-part-1/550924" />
<meta property="og:title" content="Moparscape - Scripting API: Writing Witches Potion Part 1" />
<meta name="twitter:title" content="Moparscape - Scripting API: Writing Witches Potion Part 1" />
<meta property="og:description" content="https://www.youtube.com/watch?v=YwOQlqqqo4E  Notes:  I have to review on how I want the conventions of quests to be done and I need to finish a lot of other helper methods involved with quests. This however is writing ALL of the dialogue involved with the quest and updating the quest stage after dialogue is finished. Most of the video will be fluff of me coding and talking about future prospects. Tomorrows video will be fleshing out the quest helper methods (removing the items from the inventory..." />
<meta name="twitter:description" content="https://www.youtube.com/watch?v=YwOQlqqqo4E  Notes:  I have to review on how I want the conventions of quests to be done and I need to finish a lot of other helper methods involved with quests. This however is writing ALL of the dialogue involved with the quest and updating the quest stage after dialogue is finished. Most of the video will be fluff of me coding and talking about future prospects. Tomorrows video will be fleshing out the quest helper methods (removing the items from the inventory..." />
<meta property="article:published_time" content="2015-04-06T06:22:56+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="550924.html">Moparscape - Scripting API: Writing Witches Potion Part 1</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/sinisoul.html'><span itemprop='name'>sinisoul</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-04-06T06:22:56Z'>
            <time itemprop='dateModified' datetime='2016-08-04T15:01:54Z' class='post-time'>
              August 4, 2016,  3:01pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p><a href="https://www.youtube.com/watch?v=YwOQlqqqo4E" class="onebox" target="_blank" rel="nofollow noopener">https://www.youtube.com/watch?v=YwOQlqqqo4E</a></p>
<p>Notes:</p>
<p>I have to review on how I want the conventions of quests to be done and I need to finish a lot of other helper methods involved with quests. This however is writing ALL of the dialogue involved with the quest and updating the quest stage after dialogue is finished. Most of the video will be fluff of me coding and talking about future prospects. Tomorrows video will be fleshing out the quest helper methods (removing the items from the inventory, checking if they are there, etc) along with proper naming of all the module methods. Background artist is Banks.</p>
<p>Hope you enjoy! This took me 30 minutes which means on average we could finish a SIMPLE quest everyday if we put our minds to the effort and once its done once its done on all platforms using the same API.</p>
<p>Result script:</p>
<pre><code class="lang-auto">local module = {}

module.one = function(plr)
    plr:dialogueplr("&lt;p,calm&gt;I am in search of a quest.")
    plr:dialoguenpc("&lt;p,calm&gt;Hmmm... Maybe I can think of something for you.")
    plr:dialoguenpc("&lt;p,calm&gt;Would you like to become proficient in the dark arts.")
    plr:dialogueoption("Yes help me become one with my dark side.", module.dialogue_quest_start,
        "No I have my principle and honour.", function(plr)                             -- Just let them know theyre missing out
            plr:dialoguenpc("Suit yourself, but you're missing out.")
        end,
        "What, you mean improve my magic?", module.three)
end

module.dialogue_quest_start = function(plr)

    -- Have a little chit chat about getting the ingredients
    plr:dialoguenpc("Ok I'm going to make a potion to help bring out your darker self.")
    plr:dialoguenpc("You will need certain ingredients.")
    plr:dialogueplr("What do I need?")
    plr:dialoguenpc("You need an eye of newt, a rat's tail, an onion... Oh and a piece of burnt meat.")
    plr:dialoguenpc("Great I'll go get them.")

    -- Update the stage of the quest to being started
    plr:setvar(variables.witches_potion_stage, 1)
end

module.three = function(plr)
    plr:prompt("The witch sighs.")
    plr:dialoguenpc("Yes improve your magic...")
    plr:dialoguenpc("Do you have no sense of drama?")
    plr:dialogueoption("Yes I'd like to improve my magic.", function(plr)
            plr:prompt("The witch sighs.")
            plr:call(module.dialogue_quest_start)
        end,
        "No I'm not interested.", function(plr)
            plr:dialoguenpc("Many aren't to start off with.")
            plr:prompt("The witch smiles mysteriously.")
            plr:dialoguenpc("But I think you'll be drawn back to this place.")
        end,
        "Show me the mysteries of the dark arts....", function(plr)
            plr:prompt("The witch smiles mysteriously.")
            plr:call(module.dialogue_quest_start)
        end)
end

module.four = function(plr)
    plr:dialoguenpc("So have you found the things for the potion?")
    if true then    -- Check if items are present
        plr:dialogueplr("Yes I have everything!")
        plr:dialogueplr("Excellent, can I have them?")
        plr:prompt([[You pass the ingredients to Hetty and she puts them all into her&lt;p&gt;cauldron.
        Hetty closes her eyes and begins to chant. The cauldron&lt;p&gt;bubbles mysteriously.]])
        -- TODO: Remove the items from the player inventory
        plr:dialogueplr("Well, is it ready?")
        plr:dialoguenpc("Ok, now drink from the cauldron.")

        plr:setvar(variables.witches_potion_stage, 2)
    else
        plr:dialogueplr("I found some of the things you asked for:")
        -- TODO: player chat for what items are exisiting in the inventory
        plr:dialoguenpc("Graet, but I'll need the other ingredients as well.")
    end
end

return module</code></pre>
<p>Here are my notes used in the video:</p>
<pre><code class="lang-auto">Witches potion

"I can start this quest by talking to &lt;red&gt;Hetty&lt;/red&gt; in her house in &lt;red&gt;Rimmington&lt;/red&gt;, West of &lt;red&gt;Port Sarim&lt;/red&gt;"

- Talk to Hetty

"&lt;p,quiz&gt;What could you want with an old woman like me?"

Option -&gt;
"I am in search of a quest." (0)
"I've heard that you are a witch." (1)

(0)
"I am in search of a quest."
"Hmmm... Maybe I can think of something for you."
"Would you like to become proficient in the dark arts"

Option -&gt;
"Yes help me become one with my dark side." (2)
"No I have my principle and honour." (3)
"What, you mean improve my magic?" (4)

(1)
"I've heard that you are a witch."
"Yer it does seem to be getting fairly common knowledge."
"I fear I may get a visit from the witch hunters of Falador before long."

(2)
"Yes help me become one with my dark side."
(sub2)
"Ok I'm going to make a potion to help bring out your darker self."
"You will need certain ingredients."
"What do I need?"
"You need an eye of newt, a rat's tail, an onion... Oh and a piece of burnt meat."
"Great I'll go get them."

(3)
"No I have my principle and honour."
"Suit yourself, but you're missing out."

(4)
"What, you mean improve my magic?"
"The witch sighs."						Note: Standalone dialogue
"Yes improve your magic..."
"Do you have no sense of drama?"

Option -&gt;
"Yes I'd like to improve my magic." (5)
"No I'm not interested." (6)
"Show me the mysteries of the dark arts..." (7)

(5)
"The witch signs."															Note: Standalone dialogue
goto sub2

(6)
"No I'm not interested."
"Many aren't to start off with."
"The witch smiles mysteriously." 	Note: Standalone dialogue
"But I think you'll be drawn back to this place."

(7)
"The witch smiles mysteriously."	Note: Standalone dialogue
goto sub2


&lt;blue&gt;Hetty needs me to bring the following:&lt;/blue&gt;&lt;p,red&gt;An onion&lt;p&gt;A rat's tail&lt;p&gt;A burnt piece of meat&lt;p&gt;An eye of newt&lt;/red&gt;

I have eye of newt in my inventory:

&lt;st&gt;I have an eye of newty&lt;/st&gt;

When I have all the items just strikes through each of them with the same message

After first stage:

"I spoke to Hetty at her house at Rimmington. Hetty told me she could increase my magic powerif I can bring her certain ingredients for a potion."

"So have you found the things for the potion?"
"I found some of the things you asked for:"
"I don't have rats tail." http://prntscr.com/6q5s1o
"Great, but I'll need the other ingredients as well."

"So have you found the things for the potion?"
"Yes I have everything!"
"Excellent, can I have them?"
http://prntscr.com/6q5scx
"Well, is it ready?"
"Ok,now drink from the cauldron."

"I should drink from the &lt;red&gt;cauldron&lt;/red&gt; and improve my magic!"

http://prntscr.com/6q5sns
http://prntscr.com/6q5sqi
http://prntscr.com/6q5sse
http://prntscr.com/6q5t06</code></pre>
      </div>

      <meta itemprop='headline' content='Moparscape - Scripting API: Writing Witches Potion Part 1'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Vain1.html'><span itemprop='name'>Vain1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-04-06T13:09:41Z'>
            <time itemprop='dateModified' datetime='2016-08-04T15:02:09Z' class='post-time'>
              August 4, 2016,  3:02pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p><span class="bbcode-b">graet</span> work</p>
      </div>

      <meta itemprop='headline' content='Moparscape - Scripting API: Writing Witches Potion Part 1'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/sinisoul.html'><span itemprop='name'>sinisoul</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-04-06T13:19:38Z'>
            <time itemprop='dateModified' datetime='2016-08-04T15:02:09Z' class='post-time'>
              August 4, 2016,  3:02pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Sorry that the video was 30 minutes. Imagine if I did the entire quest! Probably a solid hour. Maybe more.</p>
      </div>

      <meta itemprop='headline' content='Moparscape - Scripting API: Writing Witches Potion Part 1'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/ox_random_xi.html'><span itemprop='name'>ox_random_xi</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-04-06T18:03:41Z'>
            <time itemprop='dateModified' datetime='2016-08-04T15:02:11Z' class='post-time'>
              August 4, 2016,  3:02pm
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I’ll have to take a look at this when I get home from school, maybe I’ll write a quest or two haha.</p>
      </div>

      <meta itemprop='headline' content='Moparscape - Scripting API: Writing Witches Potion Part 1'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/davidi2.html'><span itemprop='name'>davidi2</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-04-06T18:33:52Z'>
            <time itemprop='dateModified' datetime='2016-08-04T15:02:12Z' class='post-time'>
              August 4, 2016,  3:02pm
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>what happened to the player context so that you wouldnt need to be doing the plyr:</p>
<p>also do you have a list of completed commands</p>
      </div>

      <meta itemprop='headline' content='Moparscape - Scripting API: Writing Witches Potion Part 1'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/sinisoul.html'><span itemprop='name'>sinisoul</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-04-07T00:01:49Z'>
            <time itemprop='dateModified' datetime='2016-08-04T15:02:15Z' class='post-time'>
              August 4, 2016,  3:02pm
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I’ll explain to you later</p>
      </div>

      <meta itemprop='headline' content='Moparscape - Scripting API: Writing Witches Potion Part 1'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Ambokile.html'><span itemprop='name'>Ambokile</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-04-07T00:23:28Z'>
            <time itemprop='dateModified' datetime='2016-08-04T15:02:15Z' class='post-time'>
              August 4, 2016,  3:02pm
            </time>
        <span itemprop='position'>#7</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>This looks like a very nice API. Good job.</p>
      </div>

      <meta itemprop='headline' content='Moparscape - Scripting API: Writing Witches Potion Part 1'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/sinisoul.html'><span itemprop='name'>sinisoul</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-04-07T00:44:59Z'>
            <time itemprop='dateModified' datetime='2016-08-04T15:02:16Z' class='post-time'>
              August 4, 2016,  3:02pm
            </time>
        <span itemprop='position'>#8</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I will be releasing the repo, docs, and part 2 tonight. Stay tuned or get on irc and we can debate features together <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
      </div>

      <meta itemprop='headline' content='Moparscape - Scripting API: Writing Witches Potion Part 1'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/stCky.html'><span itemprop='name'>stCky</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-04-07T01:02:59Z'>
            <time itemprop='dateModified' datetime='2016-08-04T15:02:16Z' class='post-time'>
              August 4, 2016,  3:02pm
            </time>
        <span itemprop='position'>#9</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Das kinda cool brah, I’ll take a good look in my spare time and maybe get stuck in <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
      </div>

      <meta itemprop='headline' content='Moparscape - Scripting API: Writing Witches Potion Part 1'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/sinisoul.html'><span itemprop='name'>sinisoul</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-04-07T01:54:00Z'>
            <time itemprop='dateModified' datetime='2016-08-04T15:02:17Z' class='post-time'>
              August 4, 2016,  3:02pm
            </time>
        <span itemprop='position'>#10</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <pre><code class="lang-auto">local witches_potion = require('quest/witches_potion')

app:onoption(type.npc, option.first, npc.hetty, function(plr, npc, option)

    -- If witches potion is started then we need to check if the player has the required items.
    if plr:getvar(varplr.witches_potion_progress) &gt; 0 then

        witches_potion:dialogue_stage_1_check_items(plr)

    -- If withces potion is finished we provide a completely different dialogue
    elseif plr:getvar(varplr.witches_potion_progress) &gt;= witches_potion.complete_stage then
        plr:chatnpc('How\'s your magic comign along?')
        plr:chatplr('I\'m practing and slowly getting better.')
        plr:chatnpc('Good good.')
    else
        local dialogue = plr:optiondialogue()

        dialogue:option('I am in search of a quest.', witches_potion.dialogue_stage_0_quest_start)

        dialogue:option('I\'ve heard you\'re a witch', function(plr)
            plr:chatnpc('Yer it seems to be getting fairly common knowledge.')
            plr:chatnpc('I fear I may get a visit from the witch hunters of Falador before long.')
        end)
    end
end)</code></pre>
<p>I changed option dialogues because I hated forcing inline functions into a single method.</p>
      </div>

      <meta itemprop='headline' content='Moparscape - Scripting API: Writing Witches Potion Part 1'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/moparscape-scripting-api-writing-witches-potion-part-1/550924 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:06:59 GMT -->
</html>
