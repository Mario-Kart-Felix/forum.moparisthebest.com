<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/fixed-but-one-last-question/550269 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:07:07 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Fixed, but one last question - Runescape - moparisthebest.com</title>
    <meta name="description" content="When a player switches a attack style, her/she is no longer able to hit damage unless they teleport out and back in. Can anyone send me to a tut or explain what might be happening? Staying on a attack style will not glit&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="550269.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Fixed, but one last question&#39;" href="550269.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/fixed-but-one-last-question/550269" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/fixed-but-one-last-question/550269" />
<meta property="og:title" content="Fixed, but one last question" />
<meta name="twitter:title" content="Fixed, but one last question" />
<meta property="og:description" content="When a player switches a attack style, her/she is no longer able to hit damage unless they teleport out and back in. Can anyone send me to a tut or explain what might be happening? Staying on a attack style will not glitch out the npc!!! It happens to all NPC and all PLAYERS, and all WEAPONS that are used.  Its has to do with clicking any button ingame it seems to null the NPCs" />
<meta name="twitter:description" content="When a player switches a attack style, her/she is no longer able to hit damage unless they teleport out and back in. Can anyone send me to a tut or explain what might be happening? Staying on a attack style will not glitch out the npc!!! It happens to all NPC and all PLAYERS, and all WEAPONS that are used.  Its has to do with clicking any button ingame it seems to null the NPCs" />
<meta property="article:published_time" content="2015-02-28T05:06:06+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="550269.html">Fixed, but one last question</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Lordabyssal.html'><span itemprop='name'>Lordabyssal</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-02-28T05:06:06Z'>
            <time itemprop='dateModified' datetime='2016-08-04T14:55:25Z' class='post-time'>
              August 4, 2016,  2:55pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>When a player switches a attack style, her/she is no longer able to hit damage unless they teleport out and back in. Can anyone send me to a tut or explain what might be happening? Staying on a attack style will not glitch out the npc!!! It happens to all NPC and all PLAYERS, and all WEAPONS that are used.</p>
<p>Its has to do with clicking any button ingame it seems to null the NPCs</p>
      </div>

      <meta itemprop='headline' content='Fixed, but one last question'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/GfServerMaker1.html'><span itemprop='name'>GfServerMaker1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-02-28T05:25:55Z'>
            <time itemprop='dateModified' datetime='2016-08-04T14:55:25Z' class='post-time'>
              August 4, 2016,  2:55pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>If it has to deal with clickingbuttons, like you say… take a look in clickingbuttons.java</p>
      </div>

      <meta itemprop='headline' content='Fixed, but one last question'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/sk8rdude461.html'><span itemprop='name'>sk8rdude461</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-02-28T18:53:52Z'>
            <time itemprop='dateModified' datetime='2016-08-04T14:55:30Z' class='post-time'>
              August 4, 2016,  2:55pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>This doesn’t sound like the NPCs are nulling.</p>
<p>It actually sounds like the player would be nulled, if anything.</p>
<p>If the NPC nulled, how would any player be able to interact with it?</p>
<p>Show us the code related to the player switching combat styles.</p>
      </div>

      <meta itemprop='headline' content='Fixed, but one last question'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Lordabyssal.html'><span itemprop='name'>Lordabyssal</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-03-01T23:08:22Z'>
            <time itemprop='dateModified' datetime='2016-08-04T14:55:48Z' class='post-time'>
              August 4, 2016,  2:55pm
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I just tested another thing its not just the switching of combat styles anymore its anything to do with clicking buttons… I would have no Idea where to begin searching for such a thing. I did build a custom packet though. Packet 220, within PI.</p>
<p>This is how the client handles packet 220:</p>
<p>[code]case 220:<br>
String itemName = inStream.readString();<br>
int newID = Integer.parseInt(inStream.readString());<br>
int oldID = Integer.parseInt(inStream.readString());<br>
String def = inStream.readString();</p>
<pre><code>				//pushMessage("ItemID: " + newID, 0, "");
				
				itemUpgrades item = new itemUpgrades(itemName, newID, oldID);
				
				itemUpgrades.addItem(item);
				
				ItemDef newIDs = ItemDef.forID(newID);
				ItemDef oldIDs = ItemDef.forID(oldID);
				
				newIDs = ItemDef.clone(newIDs, oldIDs);
				
				newIDs.name = item.getName();
				newIDs.description = def.getBytes();
				
		        method22();
				
				pktType = -1;
				
				//JOptionPane.showMessageDialog(getParent(), String.valueOf(itemUpgrades.getUpItem().size()));
				
				return true;[/code]
</code></pre>
<p>This is how the server handles the packet 220:</p>
<p><code>public void changeName(String name, int itemID, int oldID, String def){
		synchronized (this) {
			if(getOutStream() != null) {
				outStream.createFrameVarSize(220);
				outStream.writeString(name);
				outStream.writeString(String.valueOf(itemID));
				outStream.writeString(String.valueOf(oldID));
				outStream.writeString(def);
				outStream.endFrameVarSize();
			}
		}
	}</code></p>
<p>Both of these are handle in client.java; client and server sided.</p>
      </div>

      <meta itemprop='headline' content='Fixed, but one last question'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/sk8rdude461.html'><span itemprop='name'>sk8rdude461</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-03-01T23:20:44Z'>
            <time itemprop='dateModified' datetime='2016-08-04T14:55:48Z' class='post-time'>
              August 4, 2016,  2:55pm
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Did you make sure to set the packet size correctly?</p>
<p>Also, if it’s anything clicking buttons related… Then I believe we need to see the code in ClickingButtons  <img src="../../images/emoji/twitter/stuck_out_tongueae52.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
      </div>

      <meta itemprop='headline' content='Fixed, but one last question'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Lordabyssal.html'><span itemprop='name'>Lordabyssal</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-03-03T02:35:50Z'>
            <time itemprop='dateModified' datetime='2016-08-04T14:55:59Z' class='post-time'>
              August 4, 2016,  2:55pm
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>So I was just playing around to see If I could figure out why it was nulling players/npcs and it works know…</p>
<p>Its fixed, But was wondering why the updateNpc method in the initialize method would cause this? (server sided):</p>
<p><code>getPA().logIntoPM();
			getItems().addSpecialBar(playerEquipment[playerWeapon]);
			saveTimer = Config.SAVE_TIMER;
			saveCharacter = true;
			Misc.println("[REGISTERED]: "+playerName+"");
			handler.updatePlayer(this, outStream);
			//handler.updateNPC(this, outStream);  //If this is called on login to breaks npc attacking.
			flushOutStream();</code></p>
<p>Why would this be, here is my npcupdate methid:</p>
<p>[code]public void updateNPC(Player plr, Stream str) {<br>
//synchronized(plr) {<br>
updateBlock.currentOffset = 0;</p>
<pre><code>		str.createFrameVarSizeWord(65);
		str.initBitAccess();
		
		str.writeBits(8, plr.npcListSize);
		int size = plr.npcListSize;
		plr.npcListSize = 0;
		
		for(int i = 0; i &lt; size; i++) {
			if(plr.RebuildNPCList == false &amp;&amp; plr.withinDistance(plr.npcList[i]) == true) {
				plr.npcList[i].updateNPCMovement(str);
				plr.npcList[i].appendNPCUpdateBlock(updateBlock);
				plr.npcList[plr.npcListSize++] = plr.npcList[i];
			} else {
				int id = plr.npcList[i].npcId;
				plr.npcInListBitmap[id&gt;&gt;3] &amp;= ~(1 &lt;&lt; (id&amp;7));		
				str.writeBits(1, 1);
				str.writeBits(2, 3);		
			}
		}
		
		for(int i = 0; i &lt; NPCHandler.maxNPCs; i++) {
			if(NPCHandler.npcs[i] != null) {
				int id = NPCHandler.npcs[i].npcId;
				if (plr.RebuildNPCList == false &amp;&amp; (plr.npcInListBitmap[id&gt;&gt;3]&amp;(1 &lt;&lt; (id&amp;7))) != 0) {
					
				} else if (plr.withinDistance(NPCHandler.npcs[i]) == false) {
					
				} else {
					//fixSummon(plr, NPCHandler.npcs[i], str);
					plr.addNewNPC(NPCHandler.npcs[i], str, updateBlock);
				}
			}
		}			
		plr.RebuildNPCList = false;

		if(updateBlock.currentOffset &gt; 0) {
			str.writeBits(14, 16383);	
			str.finishBitAccess();
			str.writeBytes(updateBlock.buffer, updateBlock.currentOffset, 0);
		} else {
			str.finishBitAccess();
		}
		str.endFrameVarSizeWord();
	//}
}[/code]
</code></pre>
<p>Would it be because its not synchronized?</p>
      </div>

      <meta itemprop='headline' content='Fixed, but one last question'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/sk8rdude461.html'><span itemprop='name'>sk8rdude461</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-03-03T13:05:14Z'>
            <time itemprop='dateModified' datetime='2016-08-04T14:56:01Z' class='post-time'>
              August 4, 2016,  2:56pm
            </time>
        <span itemprop='position'>#7</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p><a href="http://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html" data-bbcode="true" rel="nofollow noopener">synchronization</a> shouldn’t have anything to do with this.</p>
<p>If your updateNPC method is “breaking” npcs, then you need to make sure your client and npc bits match.</p>
<p>The updateNPC method sends all the  npc data to the client, you basically need to check to make sure the client is expecting the same data.</p>
      </div>

      <meta itemprop='headline' content='Fixed, but one last question'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/fixed-but-one-last-question/550269 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:07:07 GMT -->
</html>
