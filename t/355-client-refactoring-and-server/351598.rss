<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>355 Client Refactoring and Server</title>
    <link>https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598</link>
    <description>Well, this a development topic for a project I&#39;m starting. Basically, I&#39;m taking a 355 deob and renaming it, which hasn&#39;t been done before (as far as I know) and creating a server to go along with it.

[b]355 Client[/b]
Right now it loads the 377 cache, since I haven&#39;t found anything else (However if you have a 355 or something less than 377, that&#39;d be great :)). The Stream class is almost fully refactored, along with the Cryption class, and some other ones. A lot in the Client class is renamed, such as the player/npc updating and login procedures.

Here are the client &gt; server packets I&#39;ve found. I have created the full packet size list, and now finding packet IDs is really easy.
[code]1   - Focus change
3   - Not sure
12  - Not sure
45  - Chat
69  - Walk normal
72  - Set chat options
74  - Not sure, but called in the cylce under a check for an unassigned variable.
75  - Action button click
124 - Walk on command
125 - The equivelent of the 317 packet 77, whatever that is...
134 - Not sure, but another time packet
136 - Rotate camera
137 - Clicked
139 - Unknown, I think something that tells the server it&#39;s time to do ...
159 - Minimap walk with extra junk
177 - Dealing with interfaces
191 - Command
192 - Log out from inactivity
207 - Move item
213 - Another timer packet
251 - Report player
253 - Idle packet[/code]

[b]Server[/b]
Progress on this has been pretty good. It uses my stable Lex server base, which used to be a 317. Currently, player updating, NPC updating, and walking is done.
[code]3   - First object option
11  - Unknown, leads to many other packets including spawning objects
59  - Update NPCs
67  - Set ignore list
102 - Set client config
104 - Set multiple interface items
113 - Reset everything, including the socket (logout)
131 - Send message
149 - Set player context option
150 - Load map region
159 - Update players
165 - Not sure, but it deals with interface loading and resetting values
166 - Friend has logged in/out
167 - Set sidebar interface
173 - Send time left before system update
174 - Unknown
176 - Unknown
183 - Unknown, sets anInt1062
204 - Set interface text
205 - Open interface
220 - Send PM
233 - Set interface text color
235 - Unknown, sets anInt902 which deals with interfaces
236 - Unknown, resets anInt872
237 - Set the interface items (Resets existing)
248 - Unknown
253 - Set interface default media type and id[/code]

Here are the screenshots. This one is showing multiple player updating, along with right-clicking on all of them. And, when they all disconnect, nobody else disconnects and they&#39;re removed just fine :). If I didn&#39;t know any better, I would say it&#39;s done!
[img]http://img839.imageshack.us/img839/3824/3552.png[/img]

This is showing NPC updating. Walking is also done, but not important to show a screenshot for.
[img]http://img686.imageshack.us/img686/8016/3554.png[/img]

Important screenshots will be posted here, and all others will be posted below in the replies.

~Lin</description>
    
    <lastBuildDate>Fri, 06 Aug 2010 16:54:15 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>355 Client Refactoring and Server</title>
        <dc:creator><![CDATA[@CatsGoMeow CatsGoMeow]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/catsgomeow">@CatsGoMeow</a> wrote:</p>
          <blockquote>
              <p>This is looking great Lin, I am currently working on a 289 Server, I have got the client.<br>
Sad thing is the cache is missing ALOT of stuff. Anyway goodluck!</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/31">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/31</link>
        <pubDate>Fri, 06 Aug 2010 16:54:15 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-351598-31</guid>
        <source url="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598.rss">355 Client Refactoring and Server</source>
      </item>
      <item>
        <title>355 Client Refactoring and Server</title>
        <dc:creator><![CDATA[@moparisthebest Moparisthebest]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/moparisthebest">@moparisthebest</a> wrote:</p>
          <blockquote>
              <p>I believe I’ve said this before, but to clarify again, the $100 is basically just for the client, I don’t care if you wrote the server or not, or how complete it is (as long logging in and walking works), I just need one because that is the only way I can verify the client actually works.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/30">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/30</link>
        <pubDate>Thu, 05 Aug 2010 04:03:13 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-351598-30</guid>
        <source url="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598.rss">355 Client Refactoring and Server</source>
      </item>
      <item>
        <title>355 Client Refactoring and Server</title>
        <dc:creator><![CDATA[@fellixombc fellixombc]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/fellixombc">@fellixombc</a> wrote:</p>
          <blockquote>
              <p>Gj, this is looking good.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/29">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/29</link>
        <pubDate>Thu, 05 Aug 2010 02:05:35 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-351598-29</guid>
        <source url="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598.rss">355 Client Refactoring and Server</source>
      </item>
      <item>
        <title>355 Client Refactoring and Server</title>
        <dc:creator><![CDATA[@Lin Lin]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/lin">@Lin</a> wrote:</p>
          <blockquote>
              <p>[quote=“abraham2119, post:26, topic:351598”][quote author=Lin link=topic=447951.msg3291713#msg3291713 date=1280654683]<br>
Ya I do, that’s exactly what I said… Hence, why I changed the buffer size from 5K to something higher. It’s funny how you pretty much repeated everything I said.</p>
<p>And no, he’s not talking about buying the client; “I am now paying $100 for each open-source client and server combination that runs in MoparScape 4.1.” Besides, the client was <span class="bbcode-b">his</span> in the first place, so why would he want to buy something he practically already has? And no, I’m not doing the $9000 project, unlike you, so I’m ahead of you on this one.<br>
[/quote]Oh, you didn’t express yourself clearly. What a horrible solution, players will only be able to play with a modified client.</p>
<p>And I didn’t realize his proposition included the server. My bad.[/quote]Actually, all the clients out there are modified. The “deobs” are modified to cancel out the modpow operation, disable updating, and load the cache from the cache folder. I don’t think changing a number will be such a big deal, since if it gets released it will be considered a deob.</p>
<p><span class="bbcode-b">Edit: </span>NPCs.<br>
<img src="http://img686.imageshack.us/img686/8016/3554.png" alt width="" height=""></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/28">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/28</link>
        <pubDate>Sun, 01 Aug 2010 22:43:39 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-351598-28</guid>
        <source url="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598.rss">355 Client Refactoring and Server</source>
      </item>
      <item>
        <title>355 Client Refactoring and Server</title>
        <dc:creator><![CDATA[@_Vengeance _Vengeance]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/_vengeance">@_Vengeance</a> wrote:</p>
          <blockquote>
              <p>[quote=“abraham2119, post:26, topic:351598”][quote author=Lin link=topic=447951.msg3291713#msg3291713 date=1280654683]<br>
Ya I do, that’s exactly what I said… Hence, why I changed the buffer size from 5K to something higher. It’s funny how you pretty much repeated everything I said.</p>
<p>And no, he’s not talking about buying the client; “I am now paying $100 for each open-source client and server combination that runs in MoparScape 4.1.” Besides, the client was <span class="bbcode-b">his</span> in the first place, so why would he want to buy something he practically already has? And no, I’m not doing the $9000 project, unlike you, so I’m ahead of you on this one.<br>
[/quote]Oh, you didn’t express yourself clearly. What a horrible solution, players will only be able to play with a modified client.[/quote]</p>
<p>Why else would he be asking for a <span class="bbcode-b">client</span>/server combination?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/27">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/27</link>
        <pubDate>Sun, 01 Aug 2010 22:09:00 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-351598-27</guid>
        <source url="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598.rss">355 Client Refactoring and Server</source>
      </item>
      <item>
        <title>355 Client Refactoring and Server</title>
        <dc:creator><![CDATA[@abraham2119 abraham2119]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/abraham2119">@abraham2119</a> wrote:</p>
          <blockquote>
              <p>[quote=“Lin, post:25, topic:351598”]Ya I do, that’s exactly what I said… Hence, why I changed the buffer size from 5K to something higher. It’s funny how you pretty much repeated everything I said.</p>
<p>And no, he’s not talking about buying the client; “I am now paying $100 for each open-source client and server combination that runs in MoparScape 4.1.” Besides, the client was <span class="bbcode-b">his</span> in the first place, so why would he want to buy something he practically already has? And no, I’m not doing the $9000 project, unlike you, so I’m ahead of you on this one.[/quote]Oh, you didn’t express yourself clearly. What a horrible solution, players will only be able to play with a modified client.</p>
<p>And I didn’t realize his proposition included the server. My bad.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/26">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/26</link>
        <pubDate>Sun, 01 Aug 2010 16:23:21 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-351598-26</guid>
        <source url="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598.rss">355 Client Refactoring and Server</source>
      </item>
      <item>
        <title>355 Client Refactoring and Server</title>
        <dc:creator><![CDATA[@Lin Lin]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/lin">@Lin</a> wrote:</p>
          <blockquote>
              <p>Ya I do, that’s exactly what I said… Hence, why I changed the buffer size from 5K to something higher. It’s funny how you pretty much repeated everything I said.</p>
<p>And no, he’s not talking about buying the client; “I am now paying $100 for each open-source client and server combination that runs in MoparScape 4.1.” Besides, the client was <span class="bbcode-b">his</span> in the first place, so why would he want to buy something he practically already has? And no, I’m not doing the $9000 project, unlike you, so I’m ahead of you on this one.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/25">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/25</link>
        <pubDate>Sun, 01 Aug 2010 09:24:43 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-351598-25</guid>
        <source url="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598.rss">355 Client Refactoring and Server</source>
      </item>
      <item>
        <title>355 Client Refactoring and Server</title>
        <dc:creator><![CDATA[@abraham2119 abraham2119]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/abraham2119">@abraham2119</a> wrote:</p>
          <blockquote>
              <p>[quote=“Lin, post:23, topic:351598”][quote author=abraham2119 link=topic=447951.msg3291443#msg3291443 date=1280627347]</p>
<p>[quote author=the elve age link=topic=447951.msg3291304#msg3291304 date=1280617080]</p>
<aside class="quote no-group">
<blockquote>
<p>Well, good news. I found out the client doesn’t really allow 0-indexed players, which was what my problem was. So it’s fixed and player updating looks to be perfect. Hooray, time to move onto walking!</p>
</blockquote>
</aside>
<p>Are you going to add path finding soon? When you have walking/running/following down?<br>
[/quote]old runetek engines perform the path creation client sided then send the destination to the server split by direction, as opposed rt5 which just sends the destination coordinate; so no, he isnt going to add path finding</p>
<p>edit:</p>
<p>[quote author=Lin link=topic=447951.msg3290609#msg3290609 date=1280529531]<br>
Well, good news. I found out the client doesn’t really allow 0-indexed players, which was what my problem was. So it’s fixed and player updating looks to be perfect. Hooray, time to move onto walking!<br>
[/quote]are you handling client-sided buffer overflows? multiple chat/damage/animation/whatever updates within a tick?</p>
<p>[quote author=Lin link=topic=447951.msg3291307#msg3291307 date=1280617277]</p>
<p>[quote author=the elve age link=topic=447951.msg3291304#msg3291304 date=1280617080]</p>
<aside class="quote no-group">
<blockquote>
<p>Well, good news. I found out the client doesn’t really allow 0-indexed players, which was what my problem was. So it’s fixed and player updating looks to be perfect. Hooray, time to move onto walking!</p>
</blockquote>
</aside>
<p>Are you going to add path finding soon? When you have walking/running/following down?<br>
[/quote]Just posted to say walking works flawlessly <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"> Though, I took it from Hyperion because I didn’t want to learn the format of it. Though, as I had to fix a lot of stuff to have signed values working (Note that a byte in C# isn’t signed unless it’s an sbyte, which my buffer wasn’t) I probably could’ve pulled it off alone.<br>
[/quote]why doesnt your buffer have the ability to return signed values…<br>
[/quote]Actually, adding the pathfinding routine wouldn’t be very hard, as it is pretty short in the client. I would just have to have the map files dumped server-sided, which someone has already done for clipped npc movement.</p>
<p>As for buffer overflows, being the lazy half-assed person I am, I just increased the buffer size to allow updating 255 other players at once. And my buffer does have the ability to return signed values. However, a byte in C# is unsigned, which means instead of 255 being -1, it’s 255. In Java, a byte is unsigned and could just have a cast used return the proper value, but not in C#. I forgot about this so walking took a little longer than expected.</p>
<p><span class="bbcode-b">Oh, and if you read this Moparisthebest, if you want I can give you the server how it is right now, which is full player updating and walking, plus the entire packet size list. However, if not I will build onto it and add NPCs and some other important stuff.</span>[/quote]Do you know what I’m referring to when I say the client-sided buffer overflows? The client reads a packet and stores it in a buffer of 5K, anything more than that will overflow it and cause the client to spit out a fatal error. For other packets, there is no risk of overflowing it, but for player updating, it is very common. Since appearance updates are around 52 bytes of size and chat updates can reach ~250 bytes (assuming you don’t cap the chat limit), the flag based update for a single player can reach about 150 bytes on average (assuming they are doing plenty of tasks - chatting, most importantly) and since there is a 255 local player limit, and assuming they are all  doing these actions at the same time (highly unlikely, but still possible), the packet size for each would be around 40K, and thus causing the client to shit bricks.</p>
<p>And yes, I understand how byte signedness works; you, however, I’m not so sure. Java bytes are signed by the way, not unsigned - as there are no unsigned data types in the language. And sure enough, if you cast an unsigned value to a signed byte type, it will assume the signed value. This is so with C# and any other language as well.</p>
<p>By the way, Moparisthebest was talking about buying your <span class="bbcode-b">client</span>, not server. Believe me, there are a few way ahead of you (me, for instance) - and besides, yours probably doesn’t event comply with the requisites.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/24">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/24</link>
        <pubDate>Sun, 01 Aug 2010 03:29:50 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-351598-24</guid>
        <source url="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598.rss">355 Client Refactoring and Server</source>
      </item>
      <item>
        <title>355 Client Refactoring and Server</title>
        <dc:creator><![CDATA[@Lin Lin]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/lin">@Lin</a> wrote:</p>
          <blockquote>
              <p>[quote=“abraham2119, post:22, topic:351598”][quote author=the elve age link=topic=447951.msg3291304#msg3291304 date=1280617080]</p>
<aside class="quote no-group">
<blockquote>
<p>Well, good news. I found out the client doesn’t really allow 0-indexed players, which was what my problem was. So it’s fixed and player updating looks to be perfect. Hooray, time to move onto walking!</p>
</blockquote>
</aside>
<p>Are you going to add path finding soon? When you have walking/running/following down?<br>
[/quote]old runetek engines perform the path creation client sided then send the destination to the server split by direction, as opposed rt5 which just sends the destination coordinate; so no, he isnt going to add path finding</p>
<p>edit:</p>
<p>[quote author=Lin link=topic=447951.msg3290609#msg3290609 date=1280529531]<br>
Well, good news. I found out the client doesn’t really allow 0-indexed players, which was what my problem was. So it’s fixed and player updating looks to be perfect. Hooray, time to move onto walking!<br>
[/quote]are you handling client-sided buffer overflows? multiple chat/damage/animation/whatever updates within a tick?</p>
<p>[quote author=Lin link=topic=447951.msg3291307#msg3291307 date=1280617277]</p>
<p>[quote author=the elve age link=topic=447951.msg3291304#msg3291304 date=1280617080]</p>
<aside class="quote no-group">
<blockquote>
<p>Well, good news. I found out the client doesn’t really allow 0-indexed players, which was what my problem was. So it’s fixed and player updating looks to be perfect. Hooray, time to move onto walking!</p>
</blockquote>
</aside>
<p>Are you going to add path finding soon? When you have walking/running/following down?<br>
[/quote]Just posted to say walking works flawlessly <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"> Though, I took it from Hyperion because I didn’t want to learn the format of it. Though, as I had to fix a lot of stuff to have signed values working (Note that a byte in C# isn’t signed unless it’s an sbyte, which my buffer wasn’t) I probably could’ve pulled it off alone.<br>
[/quote]why doesnt your buffer have the ability to return signed values…[/quote]Actually, adding the pathfinding routine wouldn’t be very hard, as it is pretty short in the client. I would just have to have the map files dumped server-sided, which someone has already done for clipped npc movement.</p>
<p>As for buffer overflows, being the lazy half-assed person I am, I just increased the buffer size to allow updating 255 other players at once. And my buffer does have the ability to return signed values. However, a byte in C# is unsigned, which means instead of 255 being -1, it’s 255. In Java, a byte is unsigned and could just have a cast used return the proper value, but not in C#. I forgot about this so walking took a little longer than expected.</p>
<p><span class="bbcode-b">Oh, and if you read this Moparisthebest, if you want I can give you the server how it is right now, which is full player updating and walking, plus the entire packet size list. However, if not I will build onto it and add NPCs and some other important stuff.</span></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/23">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/23</link>
        <pubDate>Sun, 01 Aug 2010 02:42:30 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-351598-23</guid>
        <source url="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598.rss">355 Client Refactoring and Server</source>
      </item>
      <item>
        <title>355 Client Refactoring and Server</title>
        <dc:creator><![CDATA[@abraham2119 abraham2119]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/abraham2119">@abraham2119</a> wrote:</p>
          <blockquote>
              <p>[quote=“the elve age, post:20, topic:351598”][quote author=Lin link=topic=447951.msg3290609#msg3290609 date=1280529531]<br>
Well, good news. I found out the client doesn’t really allow 0-indexed players, which was what my problem was. So it’s fixed and player updating looks to be perfect. Hooray, time to move onto walking!<br>
[/quote]</p>
<p>Are you going to add path finding soon? When you have walking/running/following down?[/quote]old runetek engines perform the path creation client sided then send the destination to the server split by direction, as opposed rt5 which just sends the destination coordinate; so no, he isnt going to add path finding</p>
<p>edit:</p>
<p>[quote=“Lin, post:19, topic:351598”]Well, good news. I found out the client doesn’t really allow 0-indexed players, which was what my problem was. So it’s fixed and player updating looks to be perfect. Hooray, time to move onto walking![/quote]are you handling client-sided buffer overflows? multiple chat/damage/animation/whatever updates within a tick?</p>
<p>[quote=“Lin, post:21, topic:351598”][quote author=the elve age link=topic=447951.msg3291304#msg3291304 date=1280617080]</p>
<aside class="quote no-group">
<blockquote>
<p>Well, good news. I found out the client doesn’t really allow 0-indexed players, which was what my problem was. So it’s fixed and player updating looks to be perfect. Hooray, time to move onto walking!</p>
</blockquote>
</aside>
<p>Are you going to add path finding soon? When you have walking/running/following down?<br>
[/quote]Just posted to say walking works flawlessly <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"> Though, I took it from Hyperion because I didn’t want to learn the format of it. Though, as I had to fix a lot of stuff to have signed values working (Note that a byte in C# isn’t signed unless it’s an sbyte, which my buffer wasn’t) I probably could’ve pulled it off alone.[/quote]why doesnt your buffer have the ability to return signed values…</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/22">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/22</link>
        <pubDate>Sun, 01 Aug 2010 01:49:07 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-351598-22</guid>
        <source url="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598.rss">355 Client Refactoring and Server</source>
      </item>
      <item>
        <title>355 Client Refactoring and Server</title>
        <dc:creator><![CDATA[@Lin Lin]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/lin">@Lin</a> wrote:</p>
          <blockquote>
              <p>[quote=“the elve age, post:20, topic:351598”][quote author=Lin link=topic=447951.msg3290609#msg3290609 date=1280529531]<br>
Well, good news. I found out the client doesn’t really allow 0-indexed players, which was what my problem was. So it’s fixed and player updating looks to be perfect. Hooray, time to move onto walking!<br>
[/quote]</p>
<p>Are you going to add path finding soon? When you have walking/running/following down?[/quote]Just posted to say walking works flawlessly <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"> Though, I took it from Hyperion because I didn’t want to learn the format of it. Though, as I had to fix a lot of stuff to have signed values working (Note that a byte in C# isn’t signed unless it’s an sbyte, which my buffer wasn’t) I probably could’ve pulled it off alone.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/21">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/21</link>
        <pubDate>Sat, 31 Jul 2010 23:01:17 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-351598-21</guid>
        <source url="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598.rss">355 Client Refactoring and Server</source>
      </item>
      <item>
        <title>355 Client Refactoring and Server</title>
        <dc:creator><![CDATA[@the_elve_age the elve age]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/the_elve_age">@the_elve_age</a> wrote:</p>
          <blockquote>
              <aside class="quote no-group quote-modified" data-post="19" data-topic="351598">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/lin/40/5_513041d5f7104045db30895d3b90af16.png" class="avatar"> Lin:</div>
<blockquote>
<p>Well, good news. I found out the client doesn’t really allow 0-indexed players, which was what my problem was. So it’s fixed and player updating looks to be perfect. Hooray, time to move onto walking!</p>
</blockquote>
</aside>
<p>Are you going to add path finding soon? When you have walking/running/following down?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/20">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/20</link>
        <pubDate>Sat, 31 Jul 2010 22:58:00 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-351598-20</guid>
        <source url="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598.rss">355 Client Refactoring and Server</source>
      </item>
      <item>
        <title>355 Client Refactoring and Server</title>
        <dc:creator><![CDATA[@Lin Lin]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/lin">@Lin</a> wrote:</p>
          <blockquote>
              <p>Well, good news. I found out the client doesn’t really allow 0-indexed players, which was what my problem was. So it’s fixed and player updating looks to be perfect. Hooray, time to move onto walking!</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/19">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/19</link>
        <pubDate>Fri, 30 Jul 2010 22:38:51 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-351598-19</guid>
        <source url="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598.rss">355 Client Refactoring and Server</source>
      </item>
      <item>
        <title>355 Client Refactoring and Server</title>
        <dc:creator><![CDATA[@_Vengeance _Vengeance]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/_vengeance">@_Vengeance</a> wrote:</p>
          <blockquote>
              <p>[quote=“the elve age, post:5, topic:351598”][quote author=Moparisthebest link=topic=447951.msg3288228#msg3288228 date=1280355814]<br>
Are you going to make it so it will run in moparscape and then I can give you <span class="bbcode-b">$300</span> bucks? <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"><br>
[/quote]</p>
<p><a class="mention" href="/u/lin">@Lin</a> I have a 357 Cache if you need it.[/quote]</p>
<p>I would like this.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/18">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/18</link>
        <pubDate>Fri, 30 Jul 2010 21:52:42 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-351598-18</guid>
        <source url="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598.rss">355 Client Refactoring and Server</source>
      </item>
      <item>
        <title>355 Client Refactoring and Server</title>
        <dc:creator><![CDATA[@Jython super_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/jython">@Jython</a> wrote:</p>
          <blockquote>
              <p>Stream and Cryption nice</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/17">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/17</link>
        <pubDate>Fri, 30 Jul 2010 18:30:29 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-351598-17</guid>
        <source url="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598.rss">355 Client Refactoring and Server</source>
      </item>
      <item>
        <title>355 Client Refactoring and Server</title>
        <dc:creator><![CDATA[@Lin Lin]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/lin">@Lin</a> wrote:</p>
          <blockquote>
              <p>[quote=“the elve age, post:14, topic:351598”][quote author=Lin link=topic=447951.msg3289570#msg3289570 date=1280445315]<br>
Gee, it surely would make a lot of sense to throw away all the refactoring and packet discovering I’ve done, just to make the client match up two revisions with the cache!<br>
[/quote]</p>
<p>Have you really done that much? But its obviously your choice and not mine. So good luck.[/quote]Actually, I’ve only refactored 15 classes, but there’s some others I know the names of but haven’t gotten around to doing so.</p>
<p>[quote=“abraham2119, post:15, topic:351598”][quote author=Lin link=topic=447951.msg3288325#msg3288325 date=1280361197]</p>
<p>[quote author=Moparisthebest link=topic=447951.msg3288228#msg3288228 date=1280355814]<br>
Are you going to make it so it will run in moparscape and then I can give you $100 bucks? <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"><br>
[/quote]Well, that depends. Do you have the modpow part canceled out in the Stream class? <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"><br>
[/quote]…You mean the RSA encryption. And yes, if you’ve ever bothered to look at any clean client refactor, you’d see most (if not all) people just comment out the encryptRSA/whatever-the-fuck-you-want-to-call-it method invocation in the login block.[/quote]It’s called a joke.</p>
<p>Anyways, I figured out why the client was crashing. For some reason, instead of using the continue keyword, I used return. I’m not sure what was going through my head at the time, but the mismatched packet size no longer occurs. However, it’s not possible to click on another player who’s on the same spot as another player. This puzzles me too. Hopefully I’ll fix it though.</p>
<p><span class="bbcode-b">Edit: </span>Player updating SEEMS (for now) to be working wonderfully. I haven’t seen any bugs yet. Here’s a screenshot of it.<br>
<img src="http://img839.imageshack.us/img839/3824/3552.png" alt width="" height=""></p>
<p><span class="bbcode-b">Edit 2:</span> It seems I’m unable to right-click on the first player if I logged in after it did. I’ll have to look into it. I’m going to bed now though.</p>
<p><span class="bbcode-b">Edit 3:</span> I managed to get 351 players in one region all updating at once (mind you there is a 255 other player limit in the client), and I haven’t tried more simply because I don’t have the hardware to. If I hit around atleast 200 the client starts to lock up and unresponsive the majority of the time, so it’s hard to do benchmarks.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/16">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/16</link>
        <pubDate>Fri, 30 Jul 2010 05:04:42 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-351598-16</guid>
        <source url="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598.rss">355 Client Refactoring and Server</source>
      </item>
      <item>
        <title>355 Client Refactoring and Server</title>
        <dc:creator><![CDATA[@abraham2119 abraham2119]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/abraham2119">@abraham2119</a> wrote:</p>
          <blockquote>
              <p>[quote=“Lin, post:6, topic:351598”][quote author=Moparisthebest link=topic=447951.msg3288228#msg3288228 date=1280355814]<br>
Are you going to make it so it will run in moparscape and then I can give you $100 bucks? <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"><br>
[/quote]Well, that depends. Do you have the modpow part canceled out in the Stream class? :P[/quote]…You mean the RSA encryption. And yes, if you’ve ever bothered to look at any clean client refactor, you’d see most (if not all) people just comment out the encryptRSA/whatever-the-fuck-you-want-to-call-it method invocation in the login block.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/15">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/15</link>
        <pubDate>Fri, 30 Jul 2010 02:51:57 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-351598-15</guid>
        <source url="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598.rss">355 Client Refactoring and Server</source>
      </item>
      <item>
        <title>355 Client Refactoring and Server</title>
        <dc:creator><![CDATA[@the_elve_age the elve age]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/the_elve_age">@the_elve_age</a> wrote:</p>
          <blockquote>
              <aside class="quote no-group quote-modified" data-post="13" data-topic="351598">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/lin/40/5_513041d5f7104045db30895d3b90af16.png" class="avatar"> Lin:</div>
<blockquote>
<p>Gee, it surely would make a lot of sense to throw away all the refactoring and packet discovering I’ve done, just to make the client match up two revisions with the cache!</p>
</blockquote>
</aside>
<p>Have you really done that much? But its obviously your choice and not mine. So good luck.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/14">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/14</link>
        <pubDate>Fri, 30 Jul 2010 02:10:07 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-351598-14</guid>
        <source url="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598.rss">355 Client Refactoring and Server</source>
      </item>
      <item>
        <title>355 Client Refactoring and Server</title>
        <dc:creator><![CDATA[@Lin Lin]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/lin">@Lin</a> wrote:</p>
          <blockquote>
              <p>[quote=“the elve age, post:12, topic:351598”]Lin, what did it come to when I gave you the 421 RAW?</p>
<p>And are you using the 457? Why not just make a 457 client…?[/quote]Gee, it surely would make a lot of sense to throw away all the refactoring and packet discovering I’ve done, just to make the client match up two revisions with the cache! And I did nothing with the 421 cache. It’s basically useless.</p>
<p>[quote=“Moparisthebest, post:11, topic:351598”][quote author=Lin link=topic=447951.msg3288325#msg3288325 date=1280361197]</p>
<aside class="quote no-group">
<blockquote>
<p>Are you going to make it so it will run in moparscape and then I can give you $100 bucks? <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"><br>
[/quote]Well, that depends. Do you have the modpow part canceled out in the Stream class? <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
</blockquote>
</aside>
<p>You can write the client however you want, you just implement an interface and then it will run in moparscape.[/quote]Oh, all right. Also, you should update your requirements to have NPC updating, because that kind of makes the server useless. And a question: After I sell it to you, what are the restrictions on the server after that?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/13">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/13</link>
        <pubDate>Thu, 29 Jul 2010 23:15:15 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-351598-13</guid>
        <source url="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598.rss">355 Client Refactoring and Server</source>
      </item>
      <item>
        <title>355 Client Refactoring and Server</title>
        <dc:creator><![CDATA[@the_elve_age the elve age]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/the_elve_age">@the_elve_age</a> wrote:</p>
          <blockquote>
              <p>Lin, what did it come to when I gave you the 421 RAW?</p>
<p>And are you using the 457? Why not just make a 457 client…?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/12">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/12</link>
        <pubDate>Thu, 29 Jul 2010 20:45:13 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-351598-12</guid>
        <source url="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598.rss">355 Client Refactoring and Server</source>
      </item>
      <item>
        <title>355 Client Refactoring and Server</title>
        <dc:creator><![CDATA[@moparisthebest Moparisthebest]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/moparisthebest">@moparisthebest</a> wrote:</p>
          <blockquote>
              <p>[quote=“Lin, post:6, topic:351598”][quote author=Moparisthebest link=topic=447951.msg3288228#msg3288228 date=1280355814]<br>
Are you going to make it so it will run in moparscape and then I can give you $100 bucks? <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"><br>
[/quote]Well, that depends. Do you have the modpow part canceled out in the Stream class? :P[/quote]<br>
I think you are confused:</p>
<p>[quote=“Moparisthebest, post:1, topic:261879”][size=24pt]I am now paying $100 for each open-source client and server combination that runs in MoparScape 4.1.[/size][/anchor]</p>
<p>You just have to download the released MoparScape source code and implement an interface for the client and one for the server:<br>
<a href="http://cache.hybridscape.com/MoparScapeSources.jar" class="onebox" target="_blank">http://cache.hybridscape.com/MoparScapeSources.jar</a></p>
<p>Both of the interfaces need to be implemented completely for the $100 payout, the server doesn’t need to be much at all, as long as logging in and walking around is supported it is good enough for me.  The server doesn’t even have to be written by you, as long as the license allows you to modify and redistribute it.  The server jar is delivered in a zip file that contains the jar with the code as well as the files the server needs to run.  For an example of the correct structure, have a look at:<br>
<a href="http://graveman.info/server317.zip" class="onebox" target="_blank">http://graveman.info/server317.zip</a></p>
<p>I will only pay this fee on a first come first serve basis for each version number.  For example, if I get 5 PMs tomorrow all from different people who implemented this for 525 only the first will be paid.</p>
<p><span class="bbcode-u">Versions already completed, and who by:</span></p>
<p>[ul][li]317 - moparisthebest[/li]<br>
[li]508 - moparisthebest[/li][/ul]</p>
<p>As always, if you have any questions or concerns post them.[/quote]</p>
<p>You can write the client however you want, you just implement an interface and then it will run in moparscape.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/11">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/11</link>
        <pubDate>Thu, 29 Jul 2010 20:05:06 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-351598-11</guid>
        <source url="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598.rss">355 Client Refactoring and Server</source>
      </item>
      <item>
        <title>355 Client Refactoring and Server</title>
        <dc:creator><![CDATA[@Lin Lin]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/lin">@Lin</a> wrote:</p>
          <blockquote>
              <p>Well, I did all I wanted to tonight, which was add client &gt; server packets (I got 16 down) and get player updating working. Here’s a picture.<br>
<img src="http://img715.imageshack.us/img715/3168/3551.png" alt width="" height=""><br>
<span class="bbcode-s">Hopefully my fixes worked to stop the mismatched packet size when adding or disconnecting too many players.</span> As usual, I failed there again. I’m really not sure what’s going on, but hopefully I can fix it.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/10</link>
        <pubDate>Thu, 29 Jul 2010 11:00:00 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-351598-10</guid>
        <source url="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598.rss">355 Client Refactoring and Server</source>
      </item>
      <item>
        <title>355 Client Refactoring and Server</title>
        <dc:creator><![CDATA[@the_elve_age the elve age]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/the_elve_age">@the_elve_age</a> wrote:</p>
          <blockquote>
              <p>[quote=“I Vain I”][quote author=the elve age link=topic=447951.msg3288515#msg3288515 date=1280372227]<br>
Lin, I have the client/cache for you. Gimme your msn, or I’ll post it here publicly.<br>
[/quote]Post here please?<br>
I’d like it as well, and I’ll gladly repay you for it. :)[/quote]</p>
<p>Sorry bud, you trolled my topic. I even asked you not too politely.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/9</link>
        <pubDate>Thu, 29 Jul 2010 03:18:17 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-351598-9</guid>
        <source url="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598.rss">355 Client Refactoring and Server</source>
      </item>
      <item>
        <title>355 Client Refactoring and Server</title>
        <dc:creator><![CDATA[@the_elve_age the elve age]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/the_elve_age">@the_elve_age</a> wrote:</p>
          <blockquote>
              <p>Lin, I have the client/cache for you. Gimme your msn, or I’ll post it here publicly.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/8</link>
        <pubDate>Thu, 29 Jul 2010 02:57:07 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-351598-8</guid>
        <source url="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598.rss">355 Client Refactoring and Server</source>
      </item>
      <item>
        <title>355 Client Refactoring and Server</title>
        <dc:creator><![CDATA[@Lin Lin]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/lin">@Lin</a> wrote:</p>
          <blockquote>
              <p>No problem I Vain I. Anyway, I modified my stable 317 C# server I never got anywhere with and right now logging and some packet sending is done:<br>
<img src="http://img819.imageshack.us/img819/1/3550.png" alt width="" height=""><br>
I should get somewhere with packet receiving later, since I have to build the client &gt; server packet size list myself, and if I’m lucky, player updating.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598/7</link>
        <pubDate>Thu, 29 Jul 2010 02:28:26 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-351598-7</guid>
        <source url="https://forum.moparisthebest.com/t/355-client-refactoring-and-server/351598.rss">355 Client Refactoring and Server</source>
      </item>
  </channel>
</rss>
