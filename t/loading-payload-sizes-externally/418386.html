<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/loading-payload-sizes-externally/418386 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Aug 2019 18:56:40 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Loading payload sizes externally - Runescape - moparisthebest.com</title>
    <meta name="description" content="[size=14pt]Loading payload sizes externally[/size] 

It most server sources I see either in a constants or misc class, an integer array of all the packet payload sizes. They don&amp;#39;t need to be changed as they remain consta&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="418386.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Loading payload sizes externally&#39;" href="418386.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/loading-payload-sizes-externally/418386" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/loading-payload-sizes-externally/418386" />
<meta property="og:title" content="Loading payload sizes externally" />
<meta name="twitter:title" content="Loading payload sizes externally" />
<meta property="og:description" content="[size=14pt]Loading payload sizes externally[/size]  It most server sources I see either in a constants or misc class, an integer array of all the packet payload sizes. They don’t need to be changed as they remain constant unless changing from each revision. It would clear up the source code if these could be loaded externally as they are an eyesore. The following tutorial also makes it beneficial if your server supports multiple revisions.  Here is an example of what the integer array looks like..." />
<meta name="twitter:description" content="[size=14pt]Loading payload sizes externally[/size]  It most server sources I see either in a constants or misc class, an integer array of all the packet payload sizes. They don’t need to be changed as they remain constant unless changing from each revision. It would clear up the source code if these could be loaded externally as they are an eyesore. The following tutorial also makes it beneficial if your server supports multiple revisions.  Here is an example of what the integer array looks like..." />
<meta property="article:published_time" content="2011-10-16T08:45:11+00:00" />
<meta property="og:ignore_canonical" content="true" />

      <link rel="next" href="4183864658.html?page=2">


    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="418386.html">Loading payload sizes externally</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Wintercanon.html'><span itemprop='name'>Wintercanon</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-10-16T08:45:11Z'>
            <time itemprop='dateModified' datetime='2016-08-01T15:37:08Z' class='post-time'>
              August 1, 2016,  3:37pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[size=14pt]Loading payload sizes externally[/size]</p>
<p>It most server sources I see either in a constants or misc class, an integer array of all the packet payload sizes. They don’t need to be changed as they remain constant unless changing from each revision. It would clear up the source code if these could be loaded externally as they are an eyesore. The following tutorial also makes it beneficial if your server supports multiple revisions.</p>
<p>Here is an example of what the integer array looks like in either a constants or misc class (for those unsure of what I’m talking about):</p>
<pre><code class="lang-auto">public static final int packetLengths[] = {
	0, 0, 0, 1, -1, 0, 0, 0, 0, 0, // 0
	0, 0, 0, 0, 8, 0, 6, 2, 2, 0, // 10
	0, 2, 0, 6, 0, 12, 0, 0, 0, 0, // 20
	0, 0, 0, 0, 0, 8, 4, 0, 0, 2, // 30
	2, 6, 0, 6, 0, -1, 0, 0, 0, 0, // 40
	0, 0, 0, 12, 0, 0, 0, 0, 8, 0, // 50
	0, 8, 0, 0, 0, 0, 0, 0, 0, 0, // 60
	6, 0, 2, 2, 8, 6, 0, -1, 0, 6, // 70
	0, 0, 0, 0, 0, 1, 4, 6, 0, 0, // 80
	0, 0, 0, 0, 0, 3, 0, 0, -1, 0, // 90
	0, 13, 0, -1, 0, 0, 0, 0, 0, 0, // 100
	0, 0, 0, 0, 0, 0, 0, 6, 0, 0, // 110
	1, 0, 6, 0, 0, 0, -1, 0, 2, 6, // 120
	0, 4, 6, 8, 0, 6, 0, 0, 0, 2, // 130
	0, 0, 0, 0, 0, 6, 0, 0, 0, 0, // 140
	0, 0, 1, 2, 0, 2, 6, 0, 0, 0, // 150
	0, 0, 0, 0, -1, -1, 0, 0, 0, 0, // 160
	0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 170
	0, 8, 0, 3, 0, 2, 0, 0, 8, 1, // 180
	0, 0, 12, 0, 0, 0, 0, 0, 0, 0, // 190
	2, 0, 0, 0, 0, 0, 0, 0, 4, 0, // 200
	4, 0, 0, 0, 7, 8, 0, 0, 10, 0, // 210
	0, 0, 0, 0, 0, 0, -1, 0, 6, 0, // 220
	1, 0, 0, 0, 6, 0, 6, 8, 1, 0, // 230
	0, 4, 0, 0, 0, 0, -1, 0, -1, 4, // 240
	0, 0, 6, 6, 0, 0, 0 // 250
};</code></pre>
<p>First a static class to hold the data will be needed:</p>
<pre><code class="lang-auto">package com.didactic.net;

import com.didactic.util.Configuration;
import com.didactic.util.exceptions.EmulatorException;

import java.util.HashMap;
import java.util.Map;

public class ProtocolConstants {

    private static final Map&lt;Integer, int[]&gt; payloadSizes = new HashMap&lt;Integer, int[]&gt;();

    public static int getPayloadSize(int opcode) {
        if (payloadSizes.containsKey(Configuration.getRevision())) {
            return payloadSizes.get(Configuration.getRevision())[opcode];
        } else {
            throw new EmulatorException("No payload size data for revision " + Configuration.getRevision() + ".");
        }
    }

    public static int getStringDelimeter(int revision) {
        switch (revision) {
            case 317:
                return 10;
            default:
                return 0;
        }
    }

    public static Map&lt;Integer, int[]&gt; getPayloadSizes() {
        return payloadSizes;
    }

}</code></pre>
<p>Firstly a HashMap is used to bind the payload sizes to their respective revision number to support multiple revisions.</p>
<p>The getPayloadSize method grabs the size from the Map using a stored revision. This example I’ve given used Configuration.getRevision() to decide the revision needed as my server is multi-revision capable. If your server only supports one revision, change Configuration.getRevision() to 317 for example. The method first checks if the revision is loaded, before returning the integer representing the packet payload size. It will throw an exception if the revision isn’t loaded.</p>
<p>Also I will mention, you should change the EmulatorException (specific to my server) to an IndexOutOfBoundsException or whatever you feel is an appropriate signifier.</p>
<p>I’ve copied my entire class, so it still contains a getStringDelimeter method. This is because there are different RSString break bytes depending on the revision.</p>
<p>The getPayloadSizes method is used by our IO loaded to put data into the Map.</p>
<p>Next the actual class that will read from our external flat files:</p>
<pre><code class="lang-auto">package com.didactic.io;

import com.didactic.io.buffer.StreamBuffer;
import com.didactic.net.ProtocolConstants;

import java.io.*;

public class ProtocolDataReader {

    public static void load() throws IOException {
        File directory = new File("./data/protocol/");

        FilenameFilter payloadSizesFilter = new FilenameFilter() {
            public boolean accept(File file, String name) {
                return (name.startsWith("payload_sizes_") &amp;&amp; name.endsWith(".dat"));
            }
        };

        String[] payloadSizesFiles = directory.list(payloadSizesFilter);
        StringBuilder revisionsList = new StringBuilder();

        for (int fileIndex = 0; fileIndex &lt; payloadSizesFiles.length; fileIndex++) {
            File file = new File(directory + "/" + payloadSizesFiles[fileIndex]);
            StreamBuffer buffer = new StreamBuffer((int) file.length());

            FileInputStream inStream = new FileInputStream(file);
            inStream.read(buffer.getBuffer());
            inStream.close();

            int revision = Integer.parseInt(file.getName().substring(14, file.getName().length() - 4)));

            revisionsList.append(revision);

            if (fileIndex &lt; payloadSizesFiles.length - 1) {
                revisionsList.append(", ");
            }

            int[] payloadSizes = new int[(int) file.length()];

            for (int i = 0; i &lt; file.length(); i++) {
                payloadSizes[i] = buffer.readByte();
            }

            ProtocolConstants.getPayloadSizes().put(revision, payloadSizes);
        }

        System.out.println("Loaded payload sizes for revisions: " + revisionsList.toString() + ".");
    }

}</code></pre>
<p>Now I will explain the above code:</p>
<p>The directory variable holds the path to the flat files holding the data. This can be changed according to your desired file structure.</p>
<p>The files I’m using have the convention of “payload_sizes_{REVISION}.dat”, so the payloadSizesFilter is called upon by the File.list() method to filter out all files except these.</p>
<p>These are then saved into a String array named payloadSizesFiles.</p>
<p>The next variable ‘revisionsList’ is a StringBuilder that generates a String for all the revisions loaded. This acts as a logging utility only.</p>
<p>A loop then iterates through all the filenames filtered and reading them through the use of a FileInputStream which copies the contents to a byte array. I’ve used my own StreamBuffer class but this can be replaced with:</p>
<pre><code class="lang-auto">byte[] buffer = new byte[(int) file.length()];</code></pre>
<p>Then instead of using buffer.getBuffer() simple just replace it with buffer. Another change that needs to be made is in:</p>
<pre><code class="lang-auto">for (int i = 0; i &lt; file.length(); i++) {
     payloadSizes[i] = buffer.readByte();
}</code></pre>
<p>buffer.readByte() needs to be changed to buffer[ i ].</p>
<p>The revision number is parsed from the filename so the naming convention is crucial for this to work.</p>
<p>It converts the byte array into an integer array and places both variables into our Map in the first class as shown in the chunk:</p>
<pre><code class="lang-auto">int[] payloadSizes = new int[(int) file.length()];

for (int i = 0; i &lt; file.length(); i++) {
    payloadSizes[i] = buffer.readByte();
}

ProtocolConstants.getPayloadSizes().put(revision, payloadSizes);</code></pre>
<p>Lastly here is a link to the flat file which holds the payload sizes for packets in the revision 317 client: <a href="http://uppit.com/x85mkgzwug81/payload_sizes_317.dat" data-bbcode="true" rel="nofollow noopener">http://uppit.com/x85mkgzwug81/payload_sizes_317.dat</a></p>
      </div>

      <meta itemprop='headline' content='Loading payload sizes externally'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/whackatre.html'><span itemprop='name'>whackatre</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-10-16T12:37:47Z'>
            <time itemprop='dateModified' datetime='2016-08-01T15:37:12Z' class='post-time'>
              August 1, 2016,  3:37pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Nice job! <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
      </div>

      <meta itemprop='headline' content='Loading payload sizes externally'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/x1_att_ftw_x.html'><span itemprop='name'>x1_att_ftw_x</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-10-16T17:03:44Z'>
            <time itemprop='dateModified' datetime='2016-08-01T15:37:34Z' class='post-time'>
              August 1, 2016,  3:37pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>AHAH!<br>
i’ve Been Waiting For Somthing Like This!</p>
<p>Will BE Implementing Soon:-)</p>
      </div>

      <meta itemprop='headline' content='Loading payload sizes externally'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Wintercanon.html'><span itemprop='name'>Wintercanon</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-10-17T00:01:44Z'>
            <time itemprop='dateModified' datetime='2016-08-01T15:37:58Z' class='post-time'>
              August 1, 2016,  3:37pm
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“whackatre, post:2, topic:418386”]Nice job! :)[/quote]Thank you.</p>
<p>[quote=“x1 att ftw x, post:3, topic:418386”]AHAH!<br>
i’ve Been Waiting For Somthing Like This!</p>
<p>Will BE Implementing Soon:-)[/quote]No problem. <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
      </div>

      <meta itemprop='headline' content='Loading payload sizes externally'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/ExtremeX-Scape.html'><span itemprop='name'>ExtremeX-Scape</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-10-17T00:02:24Z'>
            <time itemprop='dateModified' datetime='2016-08-01T15:37:58Z' class='post-time'>
              August 1, 2016,  3:37pm
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Nice Wintercanon <img src="../../images/emoji/twitter/winkae52.png?v=5" title=":wink:" class="emoji" alt=":wink:"></p>
      </div>

      <meta itemprop='headline' content='Loading payload sizes externally'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/youridudock.html'><span itemprop='name'>youridudock</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-10-17T00:35:59Z'>
            <time itemprop='dateModified' datetime='2016-08-01T15:38:01Z' class='post-time'>
              August 1, 2016,  3:38pm
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="5" data-topic="418386">
<div class="title">
<div class="quote-controls"></div>
 AtomicInt_:</div>
<blockquote>
<p>Nice Wintercanon <img src="../../images/emoji/twitter/winkae52.png?v=5" title=":wink:" class="emoji" alt=":wink:"></p>
</blockquote>
</aside>
      </div>

      <meta itemprop='headline' content='Loading payload sizes externally'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/xmonster.html'><span itemprop='name'>xmonster</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-10-17T00:41:58Z'>
            <time itemprop='dateModified' datetime='2016-08-01T15:38:01Z' class='post-time'>
              August 1, 2016,  3:38pm
            </time>
        <span itemprop='position'>#7</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>omg i have been looking for this!! YOUR A FREAKING MONSTAAA :3</p>
      </div>

      <meta itemprop='headline' content='Loading payload sizes externally'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/iz3_legend.html'><span itemprop='name'>iz3_legend</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-10-17T00:50:51Z'>
            <time itemprop='dateModified' datetime='2016-08-01T15:38:02Z' class='post-time'>
              August 1, 2016,  3:38pm
            </time>
        <span itemprop='position'>#8</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="7" data-topic="418386">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/xmonster/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> xmonster:</div>
<blockquote>
<p>omg i have been looking for this!! YOUR A FREAKING MONSTAAA :3</p>
</blockquote>
</aside>
<p>I doubt that…</p>
<p>Gj bro, always nice to see you release something now and again.</p>
      </div>

      <meta itemprop='headline' content='Loading payload sizes externally'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/xmonster.html'><span itemprop='name'>xmonster</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-10-17T00:57:54Z'>
            <time itemprop='dateModified' datetime='2016-08-01T15:38:03Z' class='post-time'>
              August 1, 2016,  3:38pm
            </time>
        <span itemprop='position'>#9</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>omg you fucking troll… just because i dont have 200 rep doesnt mean i cant code… rep means nothing you troll. now gtfo my dick.</p>
      </div>

      <meta itemprop='headline' content='Loading payload sizes externally'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/ExtremeX-Scape.html'><span itemprop='name'>ExtremeX-Scape</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-10-17T00:58:39Z'>
            <time itemprop='dateModified' datetime='2016-08-01T15:38:03Z' class='post-time'>
              August 1, 2016,  3:38pm
            </time>
        <span itemprop='position'>#10</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>That’s right, his rep is locked. <img src="../../images/emoji/twitter/winkae52.png?v=5" title=":wink:" class="emoji" alt=":wink:"></p>
      </div>

      <meta itemprop='headline' content='Loading payload sizes externally'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/iz3_legend.html'><span itemprop='name'>iz3_legend</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-10-17T01:04:25Z'>
            <time itemprop='dateModified' datetime='2016-08-01T15:38:03Z' class='post-time'>
              August 1, 2016,  3:38pm
            </time>
        <span itemprop='position'>#11</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote quote-modified" data-post="9" data-topic="418386">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/xmonster/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> xmonster:</div>
<blockquote>
<p>omg you fucking troll… just because i dont have 200 rep doesnt mean i cant code… rep means nothing you troll. now gtfo my dick.</p>
</blockquote>
</aside>
<p>Rep means nothing. Im getting this from your posts and releases.</p>
      </div>

      <meta itemprop='headline' content='Loading payload sizes externally'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/xmonster.html'><span itemprop='name'>xmonster</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-10-17T01:05:19Z'>
            <time itemprop='dateModified' datetime='2016-08-01T15:38:03Z' class='post-time'>
              August 1, 2016,  3:38pm
            </time>
        <span itemprop='position'>#12</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote quote-modified" data-post="10" data-topic="418386">
<div class="title">
<div class="quote-controls"></div>
 AtomicInt_:</div>
<blockquote>
<p>That’s right, his rep is locked. <img src="../../images/emoji/twitter/winkae52.png?v=5" title=":wink:" class="emoji" alt=":wink:"></p>
</blockquote>
</aside>
<p>well im sorry … im actually a pretty decent coder… and atomic lol <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"> your the reason im rep locked hehe</p>
      </div>

      <meta itemprop='headline' content='Loading payload sizes externally'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Wintercanon.html'><span itemprop='name'>Wintercanon</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-10-17T01:16:21Z'>
            <time itemprop='dateModified' datetime='2016-08-01T15:38:04Z' class='post-time'>
              August 1, 2016,  3:38pm
            </time>
        <span itemprop='position'>#13</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Try not to derail guys. Rep is irrelevant. Thanks for the positive comments.</p>
      </div>

      <meta itemprop='headline' content='Loading payload sizes externally'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/HcoJustin.html'><span itemprop='name'>HcoJustin</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-10-17T01:34:08Z'>
            <time itemprop='dateModified' datetime='2016-08-01T15:38:05Z' class='post-time'>
              August 1, 2016,  3:38pm
            </time>
        <span itemprop='position'>#14</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I don’t see why it needs to be loaded externally. It’s a waste of resources on start up. Since it is constant, that is a PERFECT time to leave it in the source, and let the compiler handle optimizations.</p>
      </div>

      <meta itemprop='headline' content='Loading payload sizes externally'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/zyle1992.html'><span itemprop='name'>zyle1992</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-10-17T03:38:04Z'>
            <time itemprop='dateModified' datetime='2016-08-01T15:38:14Z' class='post-time'>
              August 1, 2016,  3:38pm
            </time>
        <span itemprop='position'>#15</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Why would you load all the payloads for all the revisions, if only one protocol can be (properly) implemented.</p>
      </div>

      <meta itemprop='headline' content='Loading payload sizes externally'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Wintercanon.html'><span itemprop='name'>Wintercanon</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-10-17T08:22:03Z'>
            <time itemprop='dateModified' datetime='2016-08-01T15:38:20Z' class='post-time'>
              August 1, 2016,  3:38pm
            </time>
        <span itemprop='position'>#16</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“zyle1992, post:15, topic:418386”]Why would you load all the payloads for all the revisions, if only one protocol can be (properly) implemented.[/quote]That’s a very good point. Quite a logic flaw on my part. I guess it would be beneficial to only load the revision data for the revision being emulated for that instance. Thanks.</p>
<p>[quote=“HcoJustin, post:14, topic:418386”]I don’t see why it needs to be loaded externally. It’s a waste of resources on start up. Since it is constant, that is a PERFECT time to leave it in the source, and let the compiler handle optimizations.[/quote]Perhaps, but couldn’t the same be argued for the items.dat, tradable.dat and stackable.dat constants parsed in other sources. From experience of learning to read through current source code it would be less overwhelming for people who don’t understand why an array of packet payload sizes need to be used at all.</p>
      </div>

      <meta itemprop='headline' content='Loading payload sizes externally'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/HcoJustin.html'><span itemprop='name'>HcoJustin</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-10-17T12:09:21Z'>
            <time itemprop='dateModified' datetime='2016-08-01T15:38:23Z' class='post-time'>
              August 1, 2016,  3:38pm
            </time>
        <span itemprop='position'>#17</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Wintercanon, post:16, topic:418386”][quote author=zyle1992 link=topic=520929.msg3785570#msg3785570 date=1318822684]<br>
Why would you load all the payloads for all the revisions, if only one protocol can be (properly) implemented.<br>
[/quote]That’s a very good point. Quite a logic flaw on my part. I guess it would be beneficial to only load the revision data for the revision being emulated for that instance. Thanks.</p>
<p>[quote author=HcoJustin link=topic=520929.msg3785438#msg3785438 date=1318815248]<br>
I don’t see why it needs to be loaded externally. It’s a waste of resources on start up. Since it is constant, that is a PERFECT time to leave it in the source, and let the compiler handle optimizations.<br>
[/quote]Perhaps, but couldn’t the same be argued for the items.dat, tradable.dat and stackable.dat constants parsed in other sources. From experience of learning to read through current source code it would be less overwhelming for people who don’t understand why an array of packet payload sizes need to be used at all.[/quote]</p>
<p>Those are done because we can’t have over 6000 stats for the items. Do you realize how large that is? Take the measley little payload sizes, multiply it by 6000+ depending on the item count, and crash your text editor when it tries to open. Payload sizes are still small enough to let us keep it in code. If you dont want it in your “misc” class, but it in the protocol decoder. No one should ever look there now that we’ve pretty much got that portion of it figured out</p>
      </div>

      <meta itemprop='headline' content='Loading payload sizes externally'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/demps2k9.html'><span itemprop='name'>demps2k9</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-10-18T10:53:25Z'>
            <time itemprop='dateModified' datetime='2016-08-01T15:40:05Z' class='post-time'>
              August 1, 2016,  3:40pm
            </time>
        <span itemprop='position'>#18</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Very nice. Good job on the release WinterCanon.</p>
      </div>

      <meta itemprop='headline' content='Loading payload sizes externally'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Int_Bauk.html'><span itemprop='name'>Int_Bauk</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-10-18T15:31:23Z'>
            <time itemprop='dateModified' datetime='2016-08-01T15:40:09Z' class='post-time'>
              August 1, 2016,  3:40pm
            </time>
        <span itemprop='position'>#19</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Half of you are saying “yeh great, good job yeh… i’ll be adding this now”, I bet the half that are saying this, don’t have a fucking clue about this tutorial.</p>
      </div>

      <meta itemprop='headline' content='Loading payload sizes externally'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/ExtremeX-Scape.html'><span itemprop='name'>ExtremeX-Scape</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-10-18T18:21:28Z'>
            <time itemprop='dateModified' datetime='2016-08-01T15:41:07Z' class='post-time'>
              August 1, 2016,  3:41pm
            </time>
        <span itemprop='position'>#20</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>So, 2.5 people don’t even know what this is?</p>
<p>I know what it is, I’m not going to be implementing it though.</p>
      </div>

      <meta itemprop='headline' content='Loading payload sizes externally'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>

  <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
      <span itemprop='name'><b><a rel="next" itemprop="url" href="4183864658.html?page=2">next page →</a></b></span>
  </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/loading-payload-sizes-externally/418386 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Aug 2019 18:56:42 GMT -->
</html>
