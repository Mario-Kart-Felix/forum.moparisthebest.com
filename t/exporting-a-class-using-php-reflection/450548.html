<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/exporting-a-class-using-php-reflection/450548 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Aug 2019 01:06:31 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Exporting a class using PHP Reflection - General Programming - moparisthebest.com</title>
    <meta name="description" content="Just thought I would share some utility methods with getting information on specified classes. The main point of this is my emulation of PHP’s export() function (mine is the exportClass() function). 

Use as,  

 &amp;lt;?php
a&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="450548.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Exporting a class using PHP Reflection&#39;" href="450548.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/exporting-a-class-using-php-reflection/450548" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/exporting-a-class-using-php-reflection/450548" />
<meta property="og:title" content="Exporting a class using PHP Reflection" />
<meta name="twitter:title" content="Exporting a class using PHP Reflection" />
<meta property="og:description" content="Just thought I would share some utility methods with getting information on specified classes. The main point of this is my emulation of PHP’s export() function (mine is the exportClass() function).  Use as,  &lt;?php  abstract class TestClass {          private $dummy;     public $dummy2;     protected $dummy3;     static $staticDummy;          public abstract function abstractMethod();     public function publicMethodWithArgs($arg, $arg2) {}     public function publicMethod() {}     public static..." />
<meta name="twitter:description" content="Just thought I would share some utility methods with getting information on specified classes. The main point of this is my emulation of PHP’s export() function (mine is the exportClass() function).  Use as,  &lt;?php  abstract class TestClass {          private $dummy;     public $dummy2;     protected $dummy3;     static $staticDummy;          public abstract function abstractMethod();     public function publicMethodWithArgs($arg, $arg2) {}     public function publicMethod() {}     public static..." />
<meta property="article:published_time" content="2012-07-21T00:46:37+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="450548.html">Exporting a class using PHP Reflection</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/general-programming.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>General Programming</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/justaguy.html'><span itemprop='name'>justaguy</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-07-21T00:46:37Z'>
            <time itemprop='dateModified' datetime='2016-08-03T17:18:23Z' class='post-time'>
              August 3, 2016,  5:18pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Just thought I would share some utility methods with getting information on specified classes. The main point of this is my emulation of PHP’s export() function (mine is the exportClass() function).</p>
<p>Use as,</p>
<pre><code class="lang-auto">&lt;?php

abstract class TestClass {
    
    private $dummy;
    public $dummy2;
    protected $dummy3;
    static $staticDummy;
    
    public abstract function abstractMethod();
    public function publicMethodWithArgs($arg, $arg2) {}
    public function publicMethod() {}
    public static function staticMethod($arg) {}
    protected function protectedMethod() {}
    private function privateMethod() {}
}

$class = ScanClass::loadClass('TestClass');
if (!$class) {
    die('Something broke.');
} else {
    echo '&lt;pre&gt;';
    echo $class-&gt;exportClass();
    echo '&lt;/pre&gt;';
}

?&gt;</code></pre>
<pre><code class="lang-auto">&lt;?php

class ScanClass {
    
    private static $clazz = null;
    
    public static function loadClass($className) {
        try {
            self::$clazz = new ReflectionClass($className);
        } catch (ReflectionException $ex) {
            return false;
        }
        
        return new ScanClass();
    }
    
    // Testing purposes - PHP's export()
    public static function ex() {
        return ReflectionClass::export(self::$clazz);
    }
    
    public function exportClass() {
        // So I have OCD..?
        define('PHP_TAB', "\t");

        $export = 'Class [ ' . (self::$clazz-&gt;isInterface() ? 'interface' : (self::$clazz-&gt;isAbstract() ? 'abstract ' : '') . 'class') . ' ' . self::$clazz-&gt;getName() . ' ';
        $parent = self::$clazz-&gt;getParentClass();
        if ($parent != null)
            $export .= 'extends ' . $parent-&gt;getName() . ' ';
        
        $interfaces = self::$clazz-&gt;getInterfaceNames();
        $interfaceCount = count($interfaces);
        if ($interfaceCount &gt; 0) {
            $export .= 'implements ';
            for ($i = 0; $i &lt; $interface_count; $i++)
                $export .= $interfaces[$i] . ($i &lt;= count($interfaceCount) ? '' : ', ');
        }
        
        $export .= '] {' . PHP_EOL;
        
        $staticFields = self::$clazz-&gt;getProperties(ReflectionMethod::IS_STATIC);
        $staticFieldCount = count($staticFields);
        $export .= PHP_TAB . '- Static properties [' . $staticFieldCount . '] {';
        if ($staticFieldCount &gt; 0) {
            for ($i = 0; $i &lt; $staticFieldCount; $i++) {
                $fieldProperty = $staticFields[$i];
                $export .= PHP_EOL . PHP_TAB . PHP_TAB . 'Static property [ ' . self::modifierIntToString($fieldProperty-&gt;getModifiers()) . ' $' . $fieldProperty-&gt;getName() . ' ]';
            }
        }
        
        $export .= PHP_EOL . PHP_TAB . '}' . PHP_EOL;
        
        $staticMethods = self::$clazz-&gt;getMethods(ReflectionMethod::IS_STATIC);
        $staticMethodCount = count($staticMethods);
        $export .= PHP_TAB . '- Static methods [' . $staticMethodCount . '] {';
        if ($staticMethodCount &gt; 0) {
            for ($i = 0; $i &lt; $staticMethodCount; $i++) {
                $methodProperty = $staticMethods[$i];
                $export .= PHP_EOL . PHP_TAB . PHP_TAB . 'Static method [ ' . self::modifierIntToString($methodProperty-&gt;getModifiers()) . ' ' . $methodProperty-&gt;getName() . ' ]';
            }
        }
        
        $export .= PHP_EOL . PHP_TAB . '}' . PHP_EOL;
        
        $fields = self::$clazz-&gt;getProperties(ReflectionMethod::IS_ABSTRACT | ReflectionMethod::IS_FINAL | ReflectionMethod::IS_PROTECTED | ReflectionMethod::IS_PUBLIC | ReflectionMethod::IS_PRIVATE);
        $fieldCount = count($fields);
        if ($fieldCount &gt; 0) {
            $validFields = 0;
            $exportTemp  = '';
            for ($i = 0; $i &lt; $fieldCount; $i++) {
                $fieldProperty = $fields[$i];
                if ($fieldProperty-&gt;isStatic())
                    continue;
                
                $exportTemp .= PHP_EOL . PHP_TAB . PHP_TAB . 'Property [ ' . self::modifierIntToString($fieldProperty-&gt;getModifiers()) . ' $' . $fieldProperty-&gt;getName() . ' ]';
                $validFields++;
            }
            
            $export .= PHP_TAB . '- Properties [' . $validFields . '] {' . $exportTemp;
        } else {
            $export .= PHP_TAB . '- Properties [0] {';
        }
        
        $export .= PHP_EOL . PHP_TAB . '}' . PHP_EOL;
        
        $methods = self::$clazz-&gt;getMethods(ReflectionMethod::IS_ABSTRACT | ReflectionMethod::IS_FINAL | ReflectionMethod::IS_PROTECTED | ReflectionMethod::IS_PUBLIC | ReflectionMethod::IS_PRIVATE);
        $methodCount = count($methods);
        if ($methodCount &gt; 0) {
            $exportTemp = '';
            $validMethods = 0;
            for ($i = 0; $i &lt; $methodCount; $i++) {
                $methodProperty = $methods[$i];
                if ($methodProperty-&gt;isStatic())
                    continue;
                
                $exportTemp .= PHP_EOL . PHP_TAB . PHP_TAB . 'Method [ ' . self::modifierIntToString($methodProperty-&gt;getModifiers()) . ' ' . $methodProperty-&gt;getName() . ' ]';
                $validMethods++;
            }
            
            $export .= PHP_TAB . '- Methods [' . $validMethods . '] {' . $exportTemp;
        } else {
            $export .= PHP_TAB . '- Methods [0] {';
        }
        
        $export .= PHP_EOL . PHP_TAB . '}' . PHP_EOL;
        return $export . '}';
    }
    
    private function modifierIntToString($modifier) {
        $str = '';
        switch ($modifier) {
            case 256:
            case 257:
            case 65792:
                $str = 'public';
                break;
            case 512:
            case 513:
            case 66048:
                $str = 'protected';
                break;
            case 1024:
            case 1025:
            case 66560:
                $str = 'private';
                break;
            case 8448:
                $str = 'constructor';
                break;
            case 65794:
                $str = 'abstract';
                break;
        }
        
        return $str;
    }
}

?&gt;</code></pre>
<p>An example run (doesn’t seem to format properly here),</p>
<blockquote>Class [ abstract class Test implements Test2 ] { 
   – Static properties [0] { 
   } 
   – Static methods [1] { 
      Static method [ private lol ] 
   } 
   – Properties [1] { 
      Property [ protected $static ] 
   } 
   – Methods [4] { 
      Method [ constructor __construct ] 
      Method [ protected lol2 ] 
      Method [ abstract lol3 ] 
      Method [ public lol4 ] 
   }
}</blockquote>
      </div>

      <meta itemprop='headline' content='Exporting a class using PHP Reflection'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/sppt.html'><span itemprop='name'>sppt</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-07-21T01:23:33Z'>
            <time itemprop='dateModified' datetime='2016-08-03T17:18:27Z' class='post-time'>
              August 3, 2016,  5:18pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>What exactly is the use of this?<br>
I have never come across a situation where I would need reflection in PHP.</p>
<p>Also, perhaps it’s better to name getSingleton to something like loadClasses, the standard library is confusing enough as it is <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
      </div>

      <meta itemprop='headline' content='Exporting a class using PHP Reflection'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/justaguy.html'><span itemprop='name'>justaguy</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-07-21T01:39:33Z'>
            <time itemprop='dateModified' datetime='2016-08-03T17:18:28Z' class='post-time'>
              August 3, 2016,  5:18pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“sppt, post:2, topic:450548”]What exactly is the use of this?<br>
I have never come across a situation where I would need reflection in PHP.</p>
<p>Also, perhaps it’s better to name getSingleton to something like loadClasses, the standard library is confusing enough as it is :)[/quote]</p>
<p>Sorry sppt, removed it for a couple minutes while I re-evaluate my code. It’s an older piece of code so it needs to be updated. Basically all I’m doing is emulating PHP’s export() function with the help of PHP Reflection.</p>
<p>I can’t think of a use for it, but I got bored one day so I made this!</p>
<p>Updated the code. I think it makes more sense now. <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
      </div>

      <meta itemprop='headline' content='Exporting a class using PHP Reflection'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Protosstribe.html'><span itemprop='name'>Protosstribe</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-07-21T18:51:13Z'>
            <time itemprop='dateModified' datetime='2016-08-03T17:19:24Z' class='post-time'>
              August 3, 2016,  5:19pm
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I used reflection in a PHP-project at work, where we needed a modular object oriented system. The core I built used IoC (Inversion of Control) using DI (Dependency Injection), and it was here reflection came into the picture. This approach made it really easy to extend or modify. So it was a success at work.</p>
      </div>

      <meta itemprop='headline' content='Exporting a class using PHP Reflection'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/exporting-a-class-using-php-reflection/450548 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Aug 2019 01:06:32 GMT -->
</html>
