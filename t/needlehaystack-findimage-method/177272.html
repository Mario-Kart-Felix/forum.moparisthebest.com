<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/needlehaystack-findimage-method/177272 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 16:25:51 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>NeedleHaystack FindImage Method - General Programming - moparisthebest.com</title>
    <meta name="description" content="This is the older version of a &amp;quot;needleHaystack&amp;quot; theory findImage(); method I used in JMacro, It can&amp;#39;t hurt to release it so that the java gurus can flame me for its terrible consistency and overal fugliness. I&amp;#39;m no longe&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="177272.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;NeedleHaystack FindImage Method&#39;" href="177272.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/needlehaystack-findimage-method/177272" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/needlehaystack-findimage-method/177272" />
<meta property="og:title" content="NeedleHaystack FindImage Method" />
<meta name="twitter:title" content="NeedleHaystack FindImage Method" />
<meta property="og:description" content="This is the older version of a “needleHaystack” theory findImage(); method I used in JMacro, It can’t hurt to release it so that the java gurus can flame me for its terrible consistency and overal fugliness. I’m no longer using the method because 1 it is slow and 2 its not very organized.  I just slopped it together to work with the entire screen but if you have the least bit of competance I assume you can see how to use this elsewhere.  Its already setup with a main method so it will compile an..." />
<meta name="twitter:description" content="This is the older version of a “needleHaystack” theory findImage(); method I used in JMacro, It can’t hurt to release it so that the java gurus can flame me for its terrible consistency and overal fugliness. I’m no longer using the method because 1 it is slow and 2 its not very organized.  I just slopped it together to work with the entire screen but if you have the least bit of competance I assume you can see how to use this elsewhere.  Its already setup with a main method so it will compile an..." />
<meta property="article:published_time" content="2008-01-31T06:26:52+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="177272.html">NeedleHaystack FindImage Method</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/general-programming.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>General Programming</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/speedster239.html'><span itemprop='name'>speedster239</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-01-31T06:26:52Z'>
            <time itemprop='dateModified' datetime='2016-07-30T19:15:21Z' class='post-time'>
              July 30, 2016,  7:15pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>This is the older version of a “needleHaystack” theory findImage(); method I used in JMacro, It can’t hurt to release it so that the java gurus can flame me for its terrible consistency and overal fugliness. I’m no longer using the method because 1 it is slow and 2 its not very organized.</p>
<p>I just slopped it together to work with the entire screen but if you have the least bit of competance I assume you can see how to use this elsewhere.</p>
<p>Its already setup with a main method so it will compile and search for icon.png</p>
<p>[b]I should also mention it recognizes the RGB{0,240,240} as a “mask” color, meaning that irrelevant pixels such as backgrounds for a desktop icon which won’t be “universal” or backgrounds for toptext can be shaded out on a square image and that it will be recognized as a valid part of the image.</p>
<p>The mouse will move to the “center” of the found image relative to its position on the screen.</p>
<p>It supports “tolerance” for modified/morphed/changed bitmaps such as in runescape.<br>
[/b]</p>
<pre><code class="lang-auto">Old Search Outputs for a Dual Core 1.0 gig RAM pc
Image Thread -
Performed findImage() for 1280x1024 pixel screen, searching for "start.png" a 19x19 pixel image in 231ms
Performed findImage() for 1280x1024 pixel screen, searching for "paint.png" a 21x43 pixel image in 101ms
Performed findImage() for 1280x1024 pixel screen, searching for "internet.png" a 16x14 pixel image in 334ms
Performed findImage() for 1280x1024 pixel screen, searching for "go.png" a 85x87 pixel image in 523ms
Performed findImage() for 1280x1024 pixel screen, searching for "run.png" a 3x7 pixel image in 112ms</code></pre>
<pre><code class="lang-auto">import javax.imageio.ImageIO;
import java.awt.*;
import java.awt.image.BufferedImage;
import java.io.File;

/**
 * Created with IntelliJ IDEA.
 * User: Vaughan D
 * Date: Jan 30, 2008
 * Time: 5:29:58 PM
 * To change this template use File | Settings | File Templates.
 */
public class findImage {
    public static boolean found = false;

    public static boolean findImage(String path, Dimension start, Dimension end, int tolerance, boolean move) {
        try {
            Robot r = new Robot();
            int checkSum = 0;
            BufferedImage searchImg = null;
            try {
                searchImg = ImageIO.read(new File(path));
            } catch (Exception ex) {
                System.out.println("Couldn't load the image we are searching for.");
            }
            Dimension d = Toolkit.getDefaultToolkit().getScreenSize();
            BufferedImage canvasImg = r.createScreenCapture(new Rectangle(d.width, d.height));
            Color firstPixel = new Color(searchImg.getRGB(0, 0));
            for (int y = start.height; y &lt; end.height; y++) {
                for (int x = start.width; x &lt; end.width; x++) {
                    Color curPixel = new Color(canvasImg.getRGB(x, y));
                    if (Math.abs(firstPixel.getRed() - curPixel.getRed()) &lt;= tolerance &amp;&amp; Math.abs(firstPixel.getGreen() - curPixel.getGreen()) &lt;= tolerance &amp;&amp; Math.abs(firstPixel.getBlue() - curPixel.getBlue()) &lt;= tolerance) {
                        for (int px = 1; px &lt; searchImg.getWidth(); px++) {
                            for (int py = 1; py &lt; searchImg.getHeight(); py++) {
                                Color lapsePixel = new Color(searchImg.getRGB(px, py));
                                if (px + x &gt;= end.width &amp;&amp; py + y &gt;= end.height) {
                                    return false;
                                }
                                Color canvasPixel = new Color(canvasImg.getRGB(x + px, y + py));
                                if (Math.abs(lapsePixel.getRed() - canvasPixel.getRed()) &lt;= tolerance + 10 &amp;&amp; Math.abs(lapsePixel.getGreen() - canvasPixel.getGreen()) &lt;= tolerance + 10 &amp;&amp; Math.abs(lapsePixel.getBlue() - canvasPixel.getBlue()) &lt;= tolerance + 10) {
                                    checkSum++;
                                    if (checkSum &gt;= .35 * (searchImg.getWidth() * searchImg.getHeight())) {
                                        if (move) {
                                            r.mouseMove(x + (searchImg.getWidth() / 2), y + (searchImg.getHeight() / 2));
                                        }
                                        found = true;
                                        return found;
                                    }
                                } else if (lapsePixel.getRed() == 0 &amp;&amp; lapsePixel.getGreen() == 240 &amp;&amp; lapsePixel.getBlue() == 240) {
                                    checkSum++;
                                    if (checkSum &gt;= .35 * (searchImg.getWidth() * searchImg.getHeight())) {
                                        if (move) {
                                            r.mouseMove(x + (searchImg.getWidth() / 2), y + (searchImg.getHeight() / 2));
                                        }
                                        found = true;
                                        return found;
                                    }
                                } else {
                                    checkSum = 0;
                                }
                            }
                        }
                    }
                }
            }
        } catch (Exception ex) {
        }
        return found;
    }

    public static void main(String[] args) {
        System.out.println(findImage("icon.png", new Dimension(0, 0), new Dimension(Toolkit.getDefaultToolkit().getScreenSize()), 5, true));
    }
}</code></pre>
<p>Again, I realize that code is ugly, principally why I am no longer using it.</p>
      </div>

      <meta itemprop='headline' content='NeedleHaystack FindImage Method'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/needlehaystack-findimage-method/177272 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 16:25:53 GMT -->
</html>
