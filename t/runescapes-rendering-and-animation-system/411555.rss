<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>RuneScape&#39;s Rendering and Animation System</title>
    <link>https://forum.moparisthebest.com/t/runescapes-rendering-and-animation-system/411555</link>
    <description>[SIZE=16pt][B]Animation Skins:[/B][/SIZE]
Let&#39;s start with TSKINS, VSKINS1, and PRI:. Let&#39;s start with the easiest of the three, PRI:. PRI: stands for priorities. This is how the client knows what to show over another object. This is why sometimes items will glitch in RuneScape because either the priorities are wrong, or it is nearly impossible to get the priorities to match with every single item. Sometimes a cape will show over a plate body, or plate legs on top of a plate body. The higher the value the more it will show over top of. Like the chest piece of a armor is PRI: 3, and the platelegs are PRI:2. 

Next we will do VSKINS. VSKINS is how you group each vertice in a model. If a vertex requires a numerical value of more than 100, e.g., gloves, you must make two separate objects. One labeled VSKINS1: and the other labeled VSKINS2:. Say you wanted the vertex to be grouped as 180. You would set that vertex&#39;s value to be 100 on VSKINS1: and 80 on VSKINS2:. Then DatMaker would combine the values and read it as 180 when converting to a .dat file extension. If you have ever played on a RSPS where when you walk your item glitches all up, this is because the VSKINS aren&#39;t correct. Basically they allow animation to be set to the model.

Next we have TSKINS. TSKINS are used for changing alpha values.

You can think of it this way. You have a bone O-----O. At the end are two O&#39;s. These stand for your VSKINS. The ------- stands for your priorities. And the TSKIN would go around the bone. Now let&#39;s say that the O on the left&#39;s value is 6 and the O on the right is 7. That bone cannot bend because there isn&#39;t a weight in between it. O--O----O. This bone could move. The order of the weights would go 6, 7, 8, from left to right. Generally as you get closer to the edge of a model, the VSKIN values increase.

[SIZE=16pt][B]Rendering System:[/B][/SIZE]
The max number of triangles with a priority value (excluding flags) that will be rendered in an unaltered client is 2000. If the model exceeds 2000 triangles with priority animation data, then the model will be returned as a null and will appear invisible. 

The max number of triangles, period, rendered in an unaltered client is 4096. That means if a model contains 4097 triangles, it will be returned as a null and appear invisible. 

That max model extents, meaning the maximum x,y,z value is +/-1024... sqrt(1024²*1024²) = 1448.1546 (RuneScape uses 1500 just to make sure).

When rendering a model, the client uses fixed point arithmatic ([URL=http://&quot;http://en.wikipedia.org/wiki/Fixed-point_arithmetic&quot;]Fixed Point Arithmetic[/URL]) which basically means any vertices less than 4 units in distance will end up at the same point on the screen. That is why if you ever try loading a high polygon-count model into the RuneScape client, the rendering will be shit.

[B][SIZE=16pt]Animations (::emote):[/SIZE][/B]
An unedited client can&#39;t load animation files with data chunks greater than 2^16 bytes long, neither can RSPoser (program by MrPotatoHead to make animations for a 317 client). RSPoser can, but then it crashes. The 474 and 508 animation files hold data in different locations; the frame duration in the 317 is in the file, in the 474, it&#39;s in seq.dat. Same with frame IDs.

[SIZE=16pt][B]Some notes and help from MrPotatoHead:[/B][/SIZE]
&lt;blockquote&gt;- take a look at the player equipment for old and new models, i was wondering why they used the tskin data they way they do on alot of models, it&#39;s pretty useless data in reality as it&#39;s only there for changing alpha values. 
Use the false color buton on datmaker and inspect the VSKIN and TSKIN values. 

- could do with some help &quot;mapping&quot; the relationships, but as usual i&#39;ll probably end up doing it myself so just point out anything interesting you might find.

[code]The false colors in datmaker show that the TSKIN colors and VSKIN numbers
have a direct relationship in that where the colors meet the VSKIN number
always changes to a number that is a direct property of the colors in the
triangles that use that vertex.
So in reality only a TSKIN needs to be made.

the tskin color to vskin scheme does NOT follow for ALL models.
It is however good enough for player and equiptment.
also some points are manually edited.... 

general arrangement for trousers.

tskin 21 only 	vskin = 38
tskin 21+20 	vskin = 37
tskin 20 only 	vskin = 36
tskin 20+23 	vskin = 35
tskin 23 only 	vskin = 43
tskin 22 only 	vskin = 41
tskin 22+23 	vskin = 40
tskin 17 only 	vskin = 30
tskin 17+22 	vskin = 29
tskin 24 only 	vskin = 44
tskin 22+24 	vskin = 42
tskin 22+23+24 	vskin = 39
tskin 24+19 	vskin = 34
tskin 19 only 	vskin = 33
tskin 18 only 	vskin = 32
tskin 18+19 	vskin = 31[/code]&lt;/blockquote&gt;


&lt;blockquote&gt;This is the vertex skin list from the 317 client for the character model, it is used to animate the model.
format is :- (description) [b]type[/b] animation_type [b]list[/b] vertex_skin_values.

Animation types are 0,1,2,3,5 (there is no 4)
0 sets the reference point
1 is translation
2 is rotation
3 is scale
5 is set transparency (uses triangle skin numbers instead - obviously) 

I&#39;m posting this for 2 reasons, 
1) CJ will find it very very interesting
2) it needs completing, (fill in the text in brackets) just by attempting to complete it you might start to understand why the character parts have to have certain vertex skins. Just a quick read should show you the left shoulder [b]has[/b] to be 25. Or that when you rotate the right arm and hand you rotate the whip as well, even if your not holding a whip.

Copy and past the code to notepad++ or something so you can view it better.

If anyone does complete this by christmas, please post it here. 
You&#39;ll see why i put the vskin checkbox into datmaker now :)

P.S. some NPC skin lists are very different to this one.

[code]
(Base Tri) type 0 list 0  
(V1_to_V129) type 1 list 1 3 2 8 4 5 19 17 26 23 22 20 21 25 28 27 50 51 56 52 53 65 54 66 30 29 41 39 40 42 37 38 35 31 32 34 47 46 48 45 6 7 9 10 11 12 13 14 15 16 18 24 33 36 43 44 49 55 57 58 59 60 61 62 63 64 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129  
(V1_to_V129) type 2 list 1 3 2 8 4 5 19 17 26 23 22 20 21 25 28 27 50 51 56 52 53 65 54 66 30 29 41 39 40 42 37 38 35 31 32 34 47 46 48 45 6 7 9 10 11 12 13 14 15 16 18 24 33 36 43 44 49 55 57 58 59 60 61 62 63 64 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129
(Neck) type 0 list 3 2 
(Head) type 2 list 1 3 
() type 0 list 29 
() type 1 list 1 3 2 8 19 17 26 23 22 20 21 25 28 27 50 51 56 52 53 65 54 66 9 10 11 12 13 14 15 16 18 24 49 55 58 59 60 61 62 63 64 69 72 86 91 92 93 94 109 110 111 112 113 114 115 116 117 118 119 120 121 123 129
() type 2 list 1 3 2 8 4 5 19 17 26 23 22 20 21 25 28 27 50 51 56 52 53 65 54 66 30 29 6 9 10 11 12 13 14 15 16 18 24 49 55 58 59 60 61 62 63 64 67 68 69 72 86 91 92 93 94 109 110 111 112 113 114 115 116 117 118 119 120 121 123 129
() type 0 list 40 101 102
() type 2 list 40 37 38 35 47 46 36 43 57 76 81 82
() type 0 list 37 35
() type 2 list 37 38 47 46 36 76 82
() type 0 list 47
() type 2 list 46
() type 0 list 42 103 122
() type 2 list 42 31 32 34 48 45 33 44 77 80 83 126 127
() type 0 list 31 34
() type 2 list 31 32 48 45 33 77 83
() type 0 list 48 
() type 2 list 45
(left shoulder) type 0 list 25
(left arm full) type 1 list 26 23 22 25 28 24 68
(left arm full) type 2 list 26 23 22 25 28 24 68
(left elbow) type 0 list 23
(left lower arm) type 2 list 22 28 68
(left hand) type 0 list 28
(left hand) type 1 list 28
(left hand) type 2 list 28
(right shoulder) type 0 list 21
(right arm full) type 1 list 19 17 20 21 27 50 51 56 52 53 65 54 66 18 55 61 62 63 64 67 70 87 88 123
(right arm full) type 2 list 19 17 20 21 27 50 51 56 52 53 65 54 66 18 55 61 62 63 64 67 70
(right elbow) type 0 list 17
(right lower arm) type 2 list 19 27 50 51 56 52 53 65 54 66 55 61 62 63 64 67 70 123 129
(right hand) type 0 list 27
(right hand) type 1 list 27 50 51 56 52 53 65 54 66 55 61 62 63 64 129
(right hand) type 2 list 27 50 51 56 52 53 65 54 66 55 61 62 63 64 70 129
() type 0 list 10
() type 2 list 9 11 12 13 14 15 16 109 
() type 0 list 9 
() type 2 list 12 13 14 15 16 
() type 0 list 14 
() type 2 list 12 13 15 
() type 0 list 13 
() type 2 list 12
() type 0 list 6
() type 2 list 7
() type 0 list 27 
() type 1 list 50 51 56 52 53 65 54 66 55 61 62 63 64 87 88
() type 2 list 50 51 52 53 65 54 66 55 61 62 63 64 
() type 0 list 108 
() type 2 list 95 98 104 108
() type 0 list 98 104
() type 2 list 95 98
() type 0 list 107
() type 2 list 96 97 99 100 105 106 107
() type 0 list 100 106
() type 2 list 96 97 100
() type 0 list 98 99 100
() type 3 list 95 96 97 98 99 100 104 105
() type 0 list 130
() type 1 list 130 131 132
() type 2 list 130 131 132
() type 0 list 96 97 100
() type 1 list 96 97 100
() type 0 list 1 3 2 8 4 5 19 17 26 23 22 20 28 27 30 29 41 39 40 42 37 38 35 31 32 34 0 47 46 48 45 6 7 9 10 11 12 13 14 33 36 69 94 109
() type 3 list 1 3 2 8 4 5 19 17 26 23 22 20 21 25 28 27 50 51 56 52 53 65 54 66 30 29 41 39 40 42 37 38 35 31 32 34 0 47 46 48 45 6 7 9 10 11 12 13 14 15 16 18 24 33 36 43 44 49 55 57 58 59 60 61 62 63 64 67 68 69 73 74 75 76 77 78 79 80 81 82 83 84 85 86 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121
() type 0 list 5 30 29
() type 3 list 41 39 40 42 37 38 35 31 32 34 47 46 48 45 7 12 13 14 15 16 33 36 43 44 76 77 79 80 81 82 83 95 96 97 98 99 100 101 102 103 104 105 106 107 108
() type 5 list 0 1 4 2 10 14 12 9 11 13 16 15 29 28 30 17 22 21 20 23 18 19 24 27 26 25 3 5 6 7 8 31 32 33 34 35 36 37 38 39 40 41 42 43
() type 5 list 44
() type 3 list 130
() type 0 list 111
() type 2 list 112 113 114 115 116
() type 0 list 114
() type 2 list 112 113 116
() type 0 list 112
() type 2 list 113
() type 0 list 110
() type 2 list 117 118 119 120 121
() type 0 list 119
() type 2 list 117 118 121
() type 0 list 117
() type 2 list 118
() type 0 list 111
() type 3 list 112 113 114 115 116
() type 0 list 110
() type 3 list 117 118 119 120 121
(whip handle) type 0 list 50
(whip all) type 3 list 50 51 56 52 53 65 54 66 55 61 62 63 64 87 88
(whip) type 0 list 51
(whip) type 2 list 56 52 53 65 54 66 55
(whip) type 0 list 53
(whip) type 2 list 56 53 65 54 66 55 61 62 63 64 87 88
(whip) type 0 list 54
(whip) type 2 list 56 54 66 55 61 62 63 64 87 88
(whip) type 0 list 56 66 55
(whip) type 2 list 56
(whip) type 0 list 64
(whip) type 2 list 61 62 63 87
(whip) type 0 list 63
(whip) type 2 list 61 62
(whip) type 0 list 62
(whip) type 2 list 61
() type 0 list 38 35 32 34 47 46 48 45
() type 3 list 38 32 47 46 48 45
() type 0 list 35 31
() type 3 list 37 38 31 32 47 46 48 45
() type 0 list 39
() type 3 list 39 40 42 37 38 35 31 32 34 47 46 48 45
() type 5 list 45 46 47 48 49 50 51 52
() type 0 list 9
() type 3 list 12 13 14 15 16
() type 0 list 1 3 2 8 4 5 19 17 26 23 22 20 21 25 28 27 30 29 41 39 40 42 37 38 35 31 32 34 0 47 46 48 45 6 7 9 10 11 12 13 14 18 24 49 133 130
() type 2 list 1 3 2 8 4 5 19 17 26 23 22 20 21 25 28 27 50 51 56 52 53 65 54 66 30 29 41 39 40 42 37 38 35 31 32 34 0 47 46 48 45 6 7 9 10 11 12 13 14 15 16 18 24 33 36 43 44 49 55 57 58 59 60 61 62 63 64 67 68 69 70 71 72 74 73 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155
() type 1 list 1 3 2 8 4 5 19 17 26 23 22 20 21 25 28 27 50 51 56 52 53 65 54 66 30 29 41 39 40 42 37 38 35 31 32 34 0 47 46 48 45 6 7 9 10 11 12 13 14 15 16 18 24 33 36 43 44 49 55 57 58 59 60 61 62 63 64 67 68 69 70 71 72 85 84 76 77 78 79 80 81 82 83 75 74 73 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 131 130 129 132 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155
 
[/code]&lt;/blockquote&gt;

Texture support in DatMaker written in Delphi by MrPotatoHead:
[code]unit trig;

interface

uses
  Windows, OpenGL,SysUtils, FileRSM, OpenGl1x, Math;

type
 Tex3Vx2UV = array[0..2] of TVector2d;

function SinRule(lenb,angA,angB : Double) : Double;
function len3D(x1,y1,z1,x2,y2,z2 : Integer) : Double;
function CosRule(len1,len2,len3 : Double) : Double;
procedure DoStuff;

var
  UV: array of Tex3Vx2UV;

implementation


// procedure to calculate all of the UV coordinates in the model file
// Call after loading the model and before displaying

procedure DoStuff;
var
ti,i,k,testflag,s0,su,sv : Integer;
lenau,lenaq,lenuq,lenus,lenav,lenvq,lentv : Double;
Angle_U,Angle_V,U_number,V_number,Angle_A,Angle_B : Double;
Error_Angle : Double;
begin

SetLength(UV, 0); SetLength(UV, GNumTriangles);

// for each triangle in model
for i := 0 to high(F) do
begin
 testflag := 0;
//for each point in model triangle.
for k := 0 to 2 do
  begin

    if M[i] &gt;1 then

        begin    //E1

        ti := ( (M[i] + 2) div 4) -1;
        lenau := len3D(V[Tex[ti][0]][0], V[Tex[ti][0]][1], V[Tex[ti][0]][2], V[Tex[ti][2]][0], V[Tex[ti][2]][1], V[Tex[ti][2]][2]) ;
        lenaq := len3D(V[Tex[ti][0]][0], V[Tex[ti][0]][1], V[Tex[ti][0]][2], V[F[i][k]][0], V[F[i][k]][1], V[F[i][k]][2]) ;
        lenuq := len3D(V[Tex[ti][2]][0], V[Tex[ti][2]][1], V[Tex[ti][2]][2], V[F[i][k]][0], V[F[i][k]][1], V[F[i][k]][2]) ;
        lenav := len3D(V[Tex[ti][0]][0], V[Tex[ti][0]][1], V[Tex[ti][0]][2], V[Tex[ti][1]][0], V[Tex[ti][1]][1], V[Tex[ti][1]][2]) ;
        lenvq := len3D(V[Tex[ti][1]][0], V[Tex[ti][1]][1], V[Tex[ti][1]][2], V[F[i][k]][0], V[F[i][k]][1], V[F[i][k]][2]) ;



        Error_angle := 0;
//get angle A and B  for error correction.
        If (lenaq &lt;&gt; 0) AND (lenau &lt;&gt; 0) AND (lenav &lt;&gt; 0) AND (lenaq &lt;&gt; 0) then
        begin
          Angle_A := CosRule(lenaq,lenau,lenuq) ;
          Angle_B := CosRule(lenav,lenaq,lenvq) ;
          Error_angle := (Angle_A + Angle_B) - 90;
        end;


//calculate U number

if (lenau = lenaq ) AND (lenuq = 0) then U_number := 1.0
else if (lenaq = 0) OR (lenau-lenaq = 0 ) then U_number := 0.0
 else
 begin
 Angle_U := CosRule(lenau,lenuq,lenaq) ;
 lenus := SinRule(lenuq,(90-Angle_U - Error_Angle),90) ;
If lenau &lt;&gt; 0 then U_number := (lenau - lenus) * (1 / lenau)
else MessageBox(0, PChar(&#39;division by Zero&#39;), PChar(&#39;NaN&#39;), MB_OK);
 end;

//calculate V_number

if (lenav =lenaq) AND (lenvq = 0)  then V_number := 1.0
else if (lenaq = 0) OR (lenav-lenaq = 0) then V_number := 0.0
else
 begin
 Angle_V := CosRule(lenvq,lenav,lenaq);
 lentv := SinRule(lenvq, (90 - Angle_V - Error_Angle), 90);
If lenav &lt;&gt; 0 then  V_number := (lenav - lentv) * (1 / lenav)
else MessageBox(0, PChar(&#39;division by Zero&#39;), PChar(&#39;NaN&#39;), MB_OK);
 end;



 UV[i][k][0] := V_number;
 UV[i][k][1] := 1-U_number;

end else       //end E1
begin
//for when no texture is used
UV[i][k][0] := 0;
UV[i][k][1] := 0;
end ;

end;  //end of k loop



end; //end of i loop

end;  //end of procedure


function len3D(x1,y1,z1,x2,y2,z2 : Integer) : Double;
begin
Result := Sqrt( ((x1-x2)*(x1-x2))+ ((y1-y2)*(y1-y2))+ ((z1-z2)*(z1-z2)) );
end;


function CosRule(len1,len2,len3 : Double) : Double;
var
temp1, radtemp : Double;
// len1 = a, len2 = b, len3 = c
begin
If (len1 &lt;= 0) OR (len2 &lt;= 0) then  MessageBox(0, PChar(&#39;division by Zero&#39;), PChar(&#39;NaN&#39;), MB_OK);
temp1 := ((len1*len1)+(len2*len2)-(len3*len3))/(2*len1*len2);
if (temp1 &lt; 1.0) AND (temp1 &gt; -1.0) then begin
//if (temp1 &lt; 1.0) then begin
radtemp := ArcCos(temp1);
Result := RadToDeg(ArcCos(temp1));
end else if (temp1 &gt;= 1.0) then Result := 0
else if (temp1 &lt;= -1.0) then result := 180;

//Result := ArcCos(temp1);
end;

function SinRule(lenb,angA,angB: Double) : Double;
var
temp1, radtemp : Double;
begin
// a / Sin(A) = b / Sin(B)
// therefore a = (b * Sin(A))/ Sin(B)
        if (Sin(DegToRad(angB))) &lt;= 0 then MessageBox(0, PChar(&#39;division by Zero in sin&#39;), PChar(&#39;NaN&#39;), MB_OK);
Result := (lenb * Sin(DegToRad(angA)) ) / (Sin(DegToRad(angB)));
end;

end.[/code]</description>
    
    <lastBuildDate>Wed, 24 Aug 2011 23:08:42 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/runescapes-rendering-and-animation-system/411555.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>RuneScape&#39;s Rendering and Animation System</title>
        <dc:creator><![CDATA[@the_wanderer The Wanderer]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/the_wanderer">@the_wanderer</a> wrote:</p>
          <blockquote>
              <p>I removed the links to the quotes because I posted this on other forums. Here are the links to the quotes:<br>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://forum.moparisthebest.com/uploads/default/original/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a.png" class="site-icon" width="32" height="32">
      <a href="https://forum.moparisthebest.com/" target="_blank">moparisthebest.com</a>
  </header>
  <article class="onebox-body">
    <img src="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" class="thumbnail onebox-avatar" width="500" height="500">

<h3><a href="https://forum.moparisthebest.com/" target="_blank">moparisthebest.com</a></h3>

<p>programming, irc, cars</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://forum.moparisthebest.com/uploads/default/original/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a.png" class="site-icon" width="32" height="32">
      <a href="https://forum.moparisthebest.com/" target="_blank">moparisthebest.com</a>
  </header>
  <article class="onebox-body">
    <img src="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" class="thumbnail onebox-avatar" width="500" height="500">

<h3><a href="https://forum.moparisthebest.com/" target="_blank">moparisthebest.com</a></h3>

<p>programming, irc, cars</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>and</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://forum.moparisthebest.com/uploads/default/original/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a.png" class="site-icon" width="32" height="32">
      <a href="https://forum.moparisthebest.com/" target="_blank">moparisthebest.com</a>
  </header>
  <article class="onebox-body">
    <img src="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" class="thumbnail onebox-avatar" width="500" height="500">

<h3><a href="https://forum.moparisthebest.com/" target="_blank">moparisthebest.com</a></h3>

<p>programming, irc, cars</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/runescapes-rendering-and-animation-system/411555/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/runescapes-rendering-and-animation-system/411555/10</link>
        <pubDate>Wed, 24 Aug 2011 23:08:42 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-411555-10</guid>
        <source url="https://forum.moparisthebest.com/t/runescapes-rendering-and-animation-system/411555.rss">RuneScape&#39;s Rendering and Animation System</source>
      </item>
      <item>
        <title>RuneScape&#39;s Rendering and Animation System</title>
        <dc:creator><![CDATA[@SilentCJ SilentCJ]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/silentcj">@SilentCJ</a> wrote:</p>
          <blockquote>
              <p>This is brilliant, great job.  I’ve never even seen some of them MrP quotes, where’d you find them? <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/runescapes-rendering-and-animation-system/411555/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/runescapes-rendering-and-animation-system/411555/9</link>
        <pubDate>Wed, 24 Aug 2011 11:09:45 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-411555-9</guid>
        <source url="https://forum.moparisthebest.com/t/runescapes-rendering-and-animation-system/411555.rss">RuneScape&#39;s Rendering and Animation System</source>
      </item>
      <item>
        <title>RuneScape&#39;s Rendering and Animation System</title>
        <dc:creator><![CDATA[@the_wanderer The Wanderer]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/the_wanderer">@the_wanderer</a> wrote:</p>
          <blockquote>
              <aside class="quote quote-modified" data-post="7" data-topic="411555">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/user_avatar/forum.moparisthebest.com/cole1497/40/10925_1.png" class="avatar"> Cole1497:</div>
<blockquote>
<p>I wish you’d do more tutorials. I never fully read them (no offense), but all of your tutorials are so well put together that the people who DO need them can learn something and use it in their servers at the same timewhich is totally unheard of nowadays.</p>
</blockquote>
</aside>
<p>Are you hinting at me to finish my Meta tut? <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
<p>Also as I side note, I had some of my terminology incorrect on the animation data. You do not actually weight the vertices. You just assign values to them to be grouped for animation. I just used logical reasoning to guess that you were weighting them, since you used the weight tool. Credits to Method for correcting me on that.</p>
<aside class="quote" data-post="4" data-topic="411555">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/user_avatar/forum.moparisthebest.com/davidi2/40/2579_1.png" class="avatar"> Davidi2:</div>
<blockquote>
<p>hey how can I get this to work on project insanity?</p>
</blockquote>
</aside>
<p>you so silly. pi is a server, not a client.  <img src="https://forum.moparisthebest.com/images/emoji/twitter/wink.png?v=5" title=":wink:" class="emoji" alt=":wink:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/runescapes-rendering-and-animation-system/411555/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/runescapes-rendering-and-animation-system/411555/8</link>
        <pubDate>Wed, 24 Aug 2011 00:24:44 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-411555-8</guid>
        <source url="https://forum.moparisthebest.com/t/runescapes-rendering-and-animation-system/411555.rss">RuneScape&#39;s Rendering and Animation System</source>
      </item>
      <item>
        <title>RuneScape&#39;s Rendering and Animation System</title>
        <dc:creator><![CDATA[@Cole1497 Cole1497]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/cole1497">@Cole1497</a> wrote:</p>
          <blockquote>
              <p>I wish you’d do more tutorials. I never fully read them (no offense), but all of your tutorials are so well put together that the people who DO need them can learn something and use it in their servers at the same timewhich is totally unheard of nowadays.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/runescapes-rendering-and-animation-system/411555/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/runescapes-rendering-and-animation-system/411555/7</link>
        <pubDate>Tue, 23 Aug 2011 04:56:34 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-411555-7</guid>
        <source url="https://forum.moparisthebest.com/t/runescapes-rendering-and-animation-system/411555.rss">RuneScape&#39;s Rendering and Animation System</source>
      </item>
      <item>
        <title>RuneScape&#39;s Rendering and Animation System</title>
        <dc:creator><![CDATA[@drubrkletern drubrkletern]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/drubrkletern">@drubrkletern</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="4" data-topic="411555">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/user_avatar/forum.moparisthebest.com/davidi2/40/2579_1.png" class="avatar"> Davidi2:</div>
<blockquote>
<p>hey how can I get this to work on project insanity?</p>
</blockquote>
</aside>
<p>IK I GOT 100 ERROR FIX NOOB!</p>
<p>OT</p>
<p>Nice <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/runescapes-rendering-and-animation-system/411555/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/runescapes-rendering-and-animation-system/411555/6</link>
        <pubDate>Tue, 23 Aug 2011 04:40:05 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-411555-6</guid>
        <source url="https://forum.moparisthebest.com/t/runescapes-rendering-and-animation-system/411555.rss">RuneScape&#39;s Rendering and Animation System</source>
      </item>
      <item>
        <title>RuneScape&#39;s Rendering and Animation System</title>
        <dc:creator><![CDATA[@DannyC DannyC]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/dannyc">@DannyC</a> wrote:</p>
          <blockquote>
              <aside class="quote quote-modified" data-post="3" data-topic="411555">
<div class="title">
<div class="quote-controls"></div>
 ExtremeX-Scape™:</div>
<blockquote>
<p>ofc no one comments because it’s not a leeched project insanity tutorial… sigh, anyway, Great job on this Wanderer!</p>
</blockquote>
</aside>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/runescapes-rendering-and-animation-system/411555/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/runescapes-rendering-and-animation-system/411555/5</link>
        <pubDate>Tue, 23 Aug 2011 04:38:12 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-411555-5</guid>
        <source url="https://forum.moparisthebest.com/t/runescapes-rendering-and-animation-system/411555.rss">RuneScape&#39;s Rendering and Animation System</source>
      </item>
      <item>
        <title>RuneScape&#39;s Rendering and Animation System</title>
        <dc:creator><![CDATA[@davidi2 Davidi2]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/davidi2">@davidi2</a> wrote:</p>
          <blockquote>
              <p>hey how can I get this to work on project insanity?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/runescapes-rendering-and-animation-system/411555/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/runescapes-rendering-and-animation-system/411555/4</link>
        <pubDate>Tue, 23 Aug 2011 04:30:45 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-411555-4</guid>
        <source url="https://forum.moparisthebest.com/t/runescapes-rendering-and-animation-system/411555.rss">RuneScape&#39;s Rendering and Animation System</source>
      </item>
      <item>
        <title>RuneScape&#39;s Rendering and Animation System</title>
        <dc:creator><![CDATA[@ExtremeX-Scape Ryley]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/extremex-scape">@ExtremeX-Scape</a> wrote:</p>
          <blockquote>
              <p>ofc no one comments because it’s not a leeched project insanity tutorial… sigh, anyway, Great job on this Wanderer!</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/runescapes-rendering-and-animation-system/411555/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/runescapes-rendering-and-animation-system/411555/3</link>
        <pubDate>Tue, 23 Aug 2011 04:20:41 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-411555-3</guid>
        <source url="https://forum.moparisthebest.com/t/runescapes-rendering-and-animation-system/411555.rss">RuneScape&#39;s Rendering and Animation System</source>
      </item>
      <item>
        <title>RuneScape&#39;s Rendering and Animation System</title>
        <dc:creator><![CDATA[@TheCyberMan TheCyberMan]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/thecyberman">@TheCyberMan</a> wrote:</p>
          <blockquote>
              <p>This is what you explained to me a few days ago! Fantastic explanation!</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/runescapes-rendering-and-animation-system/411555/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/runescapes-rendering-and-animation-system/411555/2</link>
        <pubDate>Tue, 23 Aug 2011 04:00:54 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-411555-2</guid>
        <source url="https://forum.moparisthebest.com/t/runescapes-rendering-and-animation-system/411555.rss">RuneScape&#39;s Rendering and Animation System</source>
      </item>
      <item>
        <title>RuneScape&#39;s Rendering and Animation System</title>
        <dc:creator><![CDATA[@the_wanderer The Wanderer]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/the_wanderer">@the_wanderer</a> wrote:</p>
          <blockquote>
              <p>[SIZE=16pt]<span class="bbcode-b">Animation Skins:</span>[/SIZE]<br>
Let’s start with TSKINS, VSKINS1, and PRI:. Let’s start with the easiest of the three, PRI:. PRI: stands for priorities. This is how the client knows what to show over another object. This is why sometimes items will glitch in RuneScape because either the priorities are wrong, or it is nearly impossible to get the priorities to match with every single item. Sometimes a cape will show over a plate body, or plate legs on top of a plate body. The higher the value the more it will show over top of. Like the chest piece of a armor is PRI: 3, and the platelegs are PRI:2.</p>
<p>Next we will do VSKINS. VSKINS is how you group each vertice in a model. If a vertex requires a numerical value of more than 100, e.g., gloves, you must make two separate objects. One labeled VSKINS1: and the other labeled VSKINS2:. Say you wanted the vertex to be grouped as 180. You would set that vertex’s value to be 100 on VSKINS1: and 80 on VSKINS2:. Then DatMaker would combine the values and read it as 180 when converting to a .dat file extension. If you have ever played on a RSPS where when you walk your item glitches all up, this is because the VSKINS aren’t correct. Basically they allow animation to be set to the model.</p>
<p>Next we have TSKINS. TSKINS are used for changing alpha values.</p>
<p>You can think of it this way. You have a bone O-----O. At the end are two O’s. These stand for your VSKINS. The ------- stands for your priorities. And the TSKIN would go around the bone. Now let’s say that the O on the left’s value is 6 and the O on the right is 7. That bone cannot bend because there isn’t a weight in between it. O–O----O. This bone could move. The order of the weights would go 6, 7, 8, from left to right. Generally as you get closer to the edge of a model, the VSKIN values increase.</p>
<p>[SIZE=16pt]<span class="bbcode-b">Rendering System:</span>[/SIZE]<br>
The max number of triangles with a priority value (excluding flags) that will be rendered in an unaltered client is 2000. If the model exceeds 2000 triangles with priority animation data, then the model will be returned as a null and will appear invisible.</p>
<p>The max number of triangles, period, rendered in an unaltered client is 4096. That means if a model contains 4097 triangles, it will be returned as a null and appear invisible.</p>
<p>That max model extents, meaning the maximum x,y,z value is +/-1024… sqrt(1024²*1024²) = 1448.1546 (RuneScape uses 1500 just to make sure).</p>
<p>When rendering a model, the client uses fixed point arithmatic (<a data-bbcode="true">Fixed Point Arithmetic</a>) which basically means any vertices less than 4 units in distance will end up at the same point on the screen. That is why if you ever try loading a high polygon-count model into the RuneScape client, the rendering will be shit.</p>
<p><span class="bbcode-b">[SIZE=16pt]Animations (::emote):[/SIZE]</span><br>
An unedited client can’t load animation files with data chunks greater than 2^16 bytes long, neither can RSPoser (program by MrPotatoHead to make animations for a 317 client). RSPoser can, but then it crashes. The 474 and 508 animation files hold data in different locations; the frame duration in the 317 is in the file, in the 474, it’s in seq.dat. Same with frame IDs.</p>
<p>[SIZE=16pt]<span class="bbcode-b">Some notes and help from MrPotatoHead:</span>[/SIZE]</p>
<blockquote>- take a look at the player equipment for old and new models, i was wondering why they used the tskin data they way they do on alot of models, it's pretty useless data in reality as it's only there for changing alpha values. 
Use the false color buton on datmaker and inspect the VSKIN and TSKIN values. 
<ul>
<li>could do with some help “mapping” the relationships, but as usual i’ll probably end up doing it myself so just point out anything interesting you might find.</li>
</ul>
<p>[code]The false colors in datmaker show that the TSKIN colors and VSKIN numbers<br>
have a direct relationship in that where the colors meet the VSKIN number<br>
always changes to a number that is a direct property of the colors in the<br>
triangles that use that vertex.<br>
So in reality only a TSKIN needs to be made.</p>
<p>the tskin color to vskin scheme does NOT follow for ALL models.<br>
It is however good enough for player and equiptment.<br>
also some points are manually edited…</p>
<p>general arrangement for trousers.</p>
<p>tskin 21 only 	vskin = 38<br>
tskin 21+20 	vskin = 37<br>
tskin 20 only 	vskin = 36<br>
tskin 20+23 	vskin = 35<br>
tskin 23 only 	vskin = 43<br>
tskin 22 only 	vskin = 41<br>
tskin 22+23 	vskin = 40<br>
tskin 17 only 	vskin = 30<br>
tskin 17+22 	vskin = 29<br>
tskin 24 only 	vskin = 44<br>
tskin 22+24 	vskin = 42<br>
tskin 22+23+24 	vskin = 39<br>
tskin 24+19 	vskin = 34<br>
tskin 19 only 	vskin = 33<br>
tskin 18 only 	vskin = 32<br>
tskin 18+19 	vskin = 31[/code]</p>
</blockquote>
<blockquote>This is the vertex skin list from the 317 client for the character model, it is used to animate the model.
format is :- (description) [b]type[/b] animation_type [b]list[/b] vertex_skin_values.
<p>Animation types are 0,1,2,3,5 (there is no 4)<br>
0 sets the reference point<br>
1 is translation<br>
2 is rotation<br>
3 is scale<br>
5 is set transparency (uses triangle skin numbers instead - obviously)</p>
<p>I’m posting this for 2 reasons,</p>
<ol>
<li>CJ will find it very very interesting</li>
<li>it needs completing, (fill in the text in brackets) just by attempting to complete it you might start to understand why the character parts have to have certain vertex skins. Just a quick read should show you the left shoulder <span class="bbcode-b">has</span> to be 25. Or that when you rotate the right arm and hand you rotate the whip as well, even if your not holding a whip.</li>
</ol>
<p>Copy and past the code to notepad++ or something so you can view it better.</p>
<p>If anyone does complete this by christmas, please post it here.<br>
You’ll see why i put the vskin checkbox into datmaker now <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>P.S. some NPC skin lists are very different to this one.</p>
<p>[code]<br>
(Base Tri) type 0 list 0<br>
(V1_to_V129) type 1 list 1 3 2 8 4 5 19 17 26 23 22 20 21 25 28 27 50 51 56 52 53 65 54 66 30 29 41 39 40 42 37 38 35 31 32 34 47 46 48 45 6 7 9 10 11 12 13 14 15 16 18 24 33 36 43 44 49 55 57 58 59 60 61 62 63 64 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129<br>
(V1_to_V129) type 2 list 1 3 2 8 4 5 19 17 26 23 22 20 21 25 28 27 50 51 56 52 53 65 54 66 30 29 41 39 40 42 37 38 35 31 32 34 47 46 48 45 6 7 9 10 11 12 13 14 15 16 18 24 33 36 43 44 49 55 57 58 59 60 61 62 63 64 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129<br>
(Neck) type 0 list 3 2<br>
(Head) type 2 list 1 3<br>
() type 0 list 29<br>
() type 1 list 1 3 2 8 19 17 26 23 22 20 21 25 28 27 50 51 56 52 53 65 54 66 9 10 11 12 13 14 15 16 18 24 49 55 58 59 60 61 62 63 64 69 72 86 91 92 93 94 109 110 111 112 113 114 115 116 117 118 119 120 121 123 129<br>
() type 2 list 1 3 2 8 4 5 19 17 26 23 22 20 21 25 28 27 50 51 56 52 53 65 54 66 30 29 6 9 10 11 12 13 14 15 16 18 24 49 55 58 59 60 61 62 63 64 67 68 69 72 86 91 92 93 94 109 110 111 112 113 114 115 116 117 118 119 120 121 123 129<br>
() type 0 list 40 101 102<br>
() type 2 list 40 37 38 35 47 46 36 43 57 76 81 82<br>
() type 0 list 37 35<br>
() type 2 list 37 38 47 46 36 76 82<br>
() type 0 list 47<br>
() type 2 list 46<br>
() type 0 list 42 103 122<br>
() type 2 list 42 31 32 34 48 45 33 44 77 80 83 126 127<br>
() type 0 list 31 34<br>
() type 2 list 31 32 48 45 33 77 83<br>
() type 0 list 48<br>
() type 2 list 45<br>
(left shoulder) type 0 list 25<br>
(left arm full) type 1 list 26 23 22 25 28 24 68<br>
(left arm full) type 2 list 26 23 22 25 28 24 68<br>
(left elbow) type 0 list 23<br>
(left lower arm) type 2 list 22 28 68<br>
(left hand) type 0 list 28<br>
(left hand) type 1 list 28<br>
(left hand) type 2 list 28<br>
(right shoulder) type 0 list 21<br>
(right arm full) type 1 list 19 17 20 21 27 50 51 56 52 53 65 54 66 18 55 61 62 63 64 67 70 87 88 123<br>
(right arm full) type 2 list 19 17 20 21 27 50 51 56 52 53 65 54 66 18 55 61 62 63 64 67 70<br>
(right elbow) type 0 list 17<br>
(right lower arm) type 2 list 19 27 50 51 56 52 53 65 54 66 55 61 62 63 64 67 70 123 129<br>
(right hand) type 0 list 27<br>
(right hand) type 1 list 27 50 51 56 52 53 65 54 66 55 61 62 63 64 129<br>
(right hand) type 2 list 27 50 51 56 52 53 65 54 66 55 61 62 63 64 70 129<br>
() type 0 list 10<br>
() type 2 list 9 11 12 13 14 15 16 109<br>
() type 0 list 9<br>
() type 2 list 12 13 14 15 16<br>
() type 0 list 14<br>
() type 2 list 12 13 15<br>
() type 0 list 13<br>
() type 2 list 12<br>
() type 0 list 6<br>
() type 2 list 7<br>
() type 0 list 27<br>
() type 1 list 50 51 56 52 53 65 54 66 55 61 62 63 64 87 88<br>
() type 2 list 50 51 52 53 65 54 66 55 61 62 63 64<br>
() type 0 list 108<br>
() type 2 list 95 98 104 108<br>
() type 0 list 98 104<br>
() type 2 list 95 98<br>
() type 0 list 107<br>
() type 2 list 96 97 99 100 105 106 107<br>
() type 0 list 100 106<br>
() type 2 list 96 97 100<br>
() type 0 list 98 99 100<br>
() type 3 list 95 96 97 98 99 100 104 105<br>
() type 0 list 130<br>
() type 1 list 130 131 132<br>
() type 2 list 130 131 132<br>
() type 0 list 96 97 100<br>
() type 1 list 96 97 100<br>
() type 0 list 1 3 2 8 4 5 19 17 26 23 22 20 28 27 30 29 41 39 40 42 37 38 35 31 32 34 0 47 46 48 45 6 7 9 10 11 12 13 14 33 36 69 94 109<br>
() type 3 list 1 3 2 8 4 5 19 17 26 23 22 20 21 25 28 27 50 51 56 52 53 65 54 66 30 29 41 39 40 42 37 38 35 31 32 34 0 47 46 48 45 6 7 9 10 11 12 13 14 15 16 18 24 33 36 43 44 49 55 57 58 59 60 61 62 63 64 67 68 69 73 74 75 76 77 78 79 80 81 82 83 84 85 86 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121<br>
() type 0 list 5 30 29<br>
() type 3 list 41 39 40 42 37 38 35 31 32 34 47 46 48 45 7 12 13 14 15 16 33 36 43 44 76 77 79 80 81 82 83 95 96 97 98 99 100 101 102 103 104 105 106 107 108<br>
() type 5 list 0 1 4 2 10 14 12 9 11 13 16 15 29 28 30 17 22 21 20 23 18 19 24 27 26 25 3 5 6 7 8 31 32 33 34 35 36 37 38 39 40 41 42 43<br>
() type 5 list 44<br>
() type 3 list 130<br>
() type 0 list 111<br>
() type 2 list 112 113 114 115 116<br>
() type 0 list 114<br>
() type 2 list 112 113 116<br>
() type 0 list 112<br>
() type 2 list 113<br>
() type 0 list 110<br>
() type 2 list 117 118 119 120 121<br>
() type 0 list 119<br>
() type 2 list 117 118 121<br>
() type 0 list 117<br>
() type 2 list 118<br>
() type 0 list 111<br>
() type 3 list 112 113 114 115 116<br>
() type 0 list 110<br>
() type 3 list 117 118 119 120 121<br>
(whip handle) type 0 list 50<br>
(whip all) type 3 list 50 51 56 52 53 65 54 66 55 61 62 63 64 87 88<br>
(whip) type 0 list 51<br>
(whip) type 2 list 56 52 53 65 54 66 55<br>
(whip) type 0 list 53<br>
(whip) type 2 list 56 53 65 54 66 55 61 62 63 64 87 88<br>
(whip) type 0 list 54<br>
(whip) type 2 list 56 54 66 55 61 62 63 64 87 88<br>
(whip) type 0 list 56 66 55<br>
(whip) type 2 list 56<br>
(whip) type 0 list 64<br>
(whip) type 2 list 61 62 63 87<br>
(whip) type 0 list 63<br>
(whip) type 2 list 61 62<br>
(whip) type 0 list 62<br>
(whip) type 2 list 61<br>
() type 0 list 38 35 32 34 47 46 48 45<br>
() type 3 list 38 32 47 46 48 45<br>
() type 0 list 35 31<br>
() type 3 list 37 38 31 32 47 46 48 45<br>
() type 0 list 39<br>
() type 3 list 39 40 42 37 38 35 31 32 34 47 46 48 45<br>
() type 5 list 45 46 47 48 49 50 51 52<br>
() type 0 list 9<br>
() type 3 list 12 13 14 15 16<br>
() type 0 list 1 3 2 8 4 5 19 17 26 23 22 20 21 25 28 27 30 29 41 39 40 42 37 38 35 31 32 34 0 47 46 48 45 6 7 9 10 11 12 13 14 18 24 49 133 130<br>
() type 2 list 1 3 2 8 4 5 19 17 26 23 22 20 21 25 28 27 50 51 56 52 53 65 54 66 30 29 41 39 40 42 37 38 35 31 32 34 0 47 46 48 45 6 7 9 10 11 12 13 14 15 16 18 24 33 36 43 44 49 55 57 58 59 60 61 62 63 64 67 68 69 70 71 72 74 73 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155<br>
() type 1 list 1 3 2 8 4 5 19 17 26 23 22 20 21 25 28 27 50 51 56 52 53 65 54 66 30 29 41 39 40 42 37 38 35 31 32 34 0 47 46 48 45 6 7 9 10 11 12 13 14 15 16 18 24 33 36 43 44 49 55 57 58 59 60 61 62 63 64 67 68 69 70 71 72 85 84 76 77 78 79 80 81 82 83 75 74 73 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 131 130 129 132 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155</p>
<p>[/code]</p>
</blockquote>
<p>Texture support in DatMaker written in Delphi by MrPotatoHead:</p>
<p>[code]unit trig;</p>
<p>interface</p>
<p>uses<br>
Windows, OpenGL,SysUtils, FileRSM, OpenGl1x, Math;</p>
<p>type<br>
Tex3Vx2UV = array[0…2] of TVector2d;</p>
<p>function SinRule(lenb,angA,angB : Double) : Double;<br>
function len3D(x1,y1,z1,x2,y2,z2 : Integer) : Double;<br>
function CosRule(len1,len2,len3 : Double) : Double;<br>
procedure DoStuff;</p>
<p>var<br>
UV: array of Tex3Vx2UV;</p>
<p>implementation</p>
<p>// procedure to calculate all of the UV coordinates in the model file<br>
// Call after loading the model and before displaying</p>
<p>procedure DoStuff;<br>
var<br>
ti,i,k,testflag,s0,su,sv : Integer;<br>
lenau,lenaq,lenuq,lenus,lenav,lenvq,lentv : Double;<br>
Angle_U,Angle_V,U_number,V_number,Angle_A,Angle_B : Double;<br>
Error_Angle : Double;<br>
begin</p>
<p>SetLength(UV, 0); SetLength(UV, GNumTriangles);</p>
<p>// for each triangle in model<br>
for i := 0 to high(F) do<br>
begin<br>
testflag := 0;<br>
//for each point in model triangle.<br>
for k := 0 to 2 do<br>
begin</p>
<pre><code>if M[i] &gt;1 then

    begin    //E1

    ti := ( (M[i] + 2) div 4) -1;
    lenau := len3D(V[Tex[ti][0]][0], V[Tex[ti][0]][1], V[Tex[ti][0]][2], V[Tex[ti][2]][0], V[Tex[ti][2]][1], V[Tex[ti][2]][2]) ;
    lenaq := len3D(V[Tex[ti][0]][0], V[Tex[ti][0]][1], V[Tex[ti][0]][2], V[F[i][k]][0], V[F[i][k]][1], V[F[i][k]][2]) ;
    lenuq := len3D(V[Tex[ti][2]][0], V[Tex[ti][2]][1], V[Tex[ti][2]][2], V[F[i][k]][0], V[F[i][k]][1], V[F[i][k]][2]) ;
    lenav := len3D(V[Tex[ti][0]][0], V[Tex[ti][0]][1], V[Tex[ti][0]][2], V[Tex[ti][1]][0], V[Tex[ti][1]][1], V[Tex[ti][1]][2]) ;
    lenvq := len3D(V[Tex[ti][1]][0], V[Tex[ti][1]][1], V[Tex[ti][1]][2], V[F[i][k]][0], V[F[i][k]][1], V[F[i][k]][2]) ;



    Error_angle := 0;
</code></pre>
<p>//get angle A and B  for error correction.<br>
If (lenaq &lt;&gt; 0) AND (lenau &lt;&gt; 0) AND (lenav &lt;&gt; 0) AND (lenaq &lt;&gt; 0) then<br>
begin<br>
Angle_A := CosRule(lenaq,lenau,lenuq) ;<br>
Angle_B := CosRule(lenav,lenaq,lenvq) ;<br>
Error_angle := (Angle_A + Angle_B) - 90;<br>
end;</p>
<p>//calculate U number</p>
<p>if (lenau = lenaq ) AND (lenuq = 0) then U_number := 1.0<br>
else if (lenaq = 0) OR (lenau-lenaq = 0 ) then U_number := 0.0<br>
else<br>
begin<br>
Angle_U := CosRule(lenau,lenuq,lenaq) ;<br>
lenus := SinRule(lenuq,(90-Angle_U - Error_Angle),90) ;<br>
If lenau &lt;&gt; 0 then U_number := (lenau - lenus) * (1 / lenau)<br>
else MessageBox(0, PChar(‘division by Zero’), PChar(‘NaN’), MB_OK);<br>
end;</p>
<p>//calculate V_number</p>
<p>if (lenav =lenaq) AND (lenvq = 0)  then V_number := 1.0<br>
else if (lenaq = 0) OR (lenav-lenaq = 0) then V_number := 0.0<br>
else<br>
begin<br>
Angle_V := CosRule(lenvq,lenav,lenaq);<br>
lentv := SinRule(lenvq, (90 - Angle_V - Error_Angle), 90);<br>
If lenav &lt;&gt; 0 then  V_number := (lenav - lentv) * (1 / lenav)<br>
else MessageBox(0, PChar(‘division by Zero’), PChar(‘NaN’), MB_OK);<br>
end;</p>
<p>UV[i][k][0] := V_number;<br>
UV[i][k][1] := 1-U_number;</p>
<p>end else       //end E1<br>
begin<br>
//for when no texture is used<br>
UV[i][k][0] := 0;<br>
UV[i][k][1] := 0;<br>
end ;</p>
<p>end;  //end of k loop</p>
<p>end; //end of i loop</p>
<p>end;  //end of procedure</p>
<p>function len3D(x1,y1,z1,x2,y2,z2 : Integer) : Double;<br>
begin<br>
Result := Sqrt( ((x1-x2)<em>(x1-x2))+ ((y1-y2)</em>(y1-y2))+ ((z1-z2)*(z1-z2)) );<br>
end;</p>
<p>function CosRule(len1,len2,len3 : Double) : Double;<br>
var<br>
temp1, radtemp : Double;<br>
// len1 = a, len2 = b, len3 = c<br>
begin<br>
If (len1 &lt;= 0) OR (len2 &lt;= 0) then  MessageBox(0, PChar(‘division by Zero’), PChar(‘NaN’), MB_OK);<br>
temp1 := ((len1<em>len1)+(len2</em>len2)-(len3<em>len3))/(2</em>len1*len2);<br>
if (temp1 &lt; 1.0) AND (temp1 &gt; -1.0) then begin<br>
//if (temp1 &lt; 1.0) then begin<br>
radtemp := ArcCos(temp1);<br>
Result := RadToDeg(ArcCos(temp1));<br>
end else if (temp1 &gt;= 1.0) then Result := 0<br>
else if (temp1 &lt;= -1.0) then result := 180;</p>
<p>//Result := ArcCos(temp1);<br>
end;</p>
<p>function SinRule(lenb,angA,angB: Double) : Double;<br>
var<br>
temp1, radtemp : Double;<br>
begin<br>
// a / Sin(A) = b / Sin(B)<br>
// therefore a = (b * Sin(A))/ Sin(B)<br>
if (Sin(DegToRad(angB))) &lt;= 0 then MessageBox(0, PChar(‘division by Zero in sin’), PChar(‘NaN’), MB_OK);<br>
Result := (lenb * Sin(DegToRad(angA)) ) / (Sin(DegToRad(angB)));<br>
end;</p>
<p>end.[/code]</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/runescapes-rendering-and-animation-system/411555/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/runescapes-rendering-and-animation-system/411555/1</link>
        <pubDate>Mon, 22 Aug 2011 06:12:00 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-411555-1</guid>
        <source url="https://forum.moparisthebest.com/t/runescapes-rendering-and-animation-system/411555.rss">RuneScape&#39;s Rendering and Animation System</source>
      </item>
  </channel>
</rss>
