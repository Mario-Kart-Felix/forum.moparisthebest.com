<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/snippet-almost-fully-refactored-login-protocol/537843 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Aug 2019 08:28:40 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>[Snippet] Almost fully refactored login protocol - Runescape - moparisthebest.com</title>
    <meta name="description" content="There are two variables that I don&amp;#39;t understand, if you know what they do then please tell me. Also, if you have any better names for anything, please let me know. I&amp;#39;m also interested if anyone can explain why two output&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="537843.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;[Snippet] Almost fully refactored login protocol&#39;" href="537843.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/snippet-almost-fully-refactored-login-protocol/537843" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/snippet-almost-fully-refactored-login-protocol/537843" />
<meta property="og:title" content="[Snippet] Almost fully refactored login protocol" />
<meta name="twitter:title" content="[Snippet] Almost fully refactored login protocol" />
<meta property="og:description" content="There are two variables that I don’t understand, if you know what they do then please tell me. Also, if you have any better names for anything, please let me know. I’m also interested if anyone can explain why two output streams are used.  [code=Java]	private void login(String username, String password, boolean recoveringConnection)  {  signlink.errorname = username;  try  {  if (!recoveringConnection)  {  loginMessage1 = “”;  loginMessage2 = “Connecting to server…”;  drawLoginScreen(true);  }  ..." />
<meta name="twitter:description" content="There are two variables that I don’t understand, if you know what they do then please tell me. Also, if you have any better names for anything, please let me know. I’m also interested if anyone can explain why two output streams are used.  [code=Java]	private void login(String username, String password, boolean recoveringConnection)  {  signlink.errorname = username;  try  {  if (!recoveringConnection)  {  loginMessage1 = “”;  loginMessage2 = “Connecting to server…”;  drawLoginScreen(true);  }  ..." />
<meta property="article:published_time" content="2013-12-30T22:08:55+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="537843.html">[Snippet] Almost fully refactored login protocol</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Ambokile.html'><span itemprop='name'>Ambokile</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2013-12-30T22:08:55Z'>
            <time itemprop='dateModified' datetime='2016-08-04T11:22:30Z' class='post-time'>
              August 4, 2016, 11:22am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>There are two variables that I don’t understand, if you know what they do then please tell me. Also, if you have any better names for anything, please let me know. I’m also interested if anyone can explain why two output streams are used.</p>
<p>[code=Java]	private void login(String username, String password, boolean recoveringConnection)<br>
{<br>
signlink.errorname = username;<br>
try<br>
{<br>
if (!recoveringConnection)<br>
{<br>
loginMessage1 = “”;<br>
loginMessage2 = “Connecting to server…”;<br>
drawLoginScreen(true);<br>
}<br>
buffer = new RSSocket(this, openSocket(43594 + portOffset));<br>
long nameLong = TextClass.nameToLong(username);<br>
int nameHash = (int) (nameLong &gt;&gt; 16 &amp; 31L);<br>
outStream1.offset = 0;<br>
outStream1.put(14);<br>
outStream1.put(nameHash);<br>
buffer.queueBytes(2, outStream1.payload);<br>
for (int junk = 0; junk &lt; 8; junk++)<br>
buffer.read();</p>
<pre><code>		int loginResponse = buffer.read();
		int originalLoginResponse = loginResponse;
		if (loginResponse == 0)
		{
			buffer.read(inStream.payload, 8);
			inStream.offset = 0;
			serverSessionKey = inStream.getLong();
			int seed[] = new int[4];
			seed[0] = (int) (Math.random() * 99999999D);
			seed[1] = (int) (Math.random() * 99999999D);
			seed[2] = (int) (serverSessionKey &gt;&gt; 32);
			seed[3] = (int) serverSessionKey;
			outStream1.offset = 0;
			outStream1.put(10);
			outStream1.putInt(seed[0]);
			outStream1.putInt(seed[1]);
			outStream1.putInt(seed[2]);
			outStream1.putInt(seed[3]);
			outStream1.putInt(signlink.uid);
			outStream1.putString(username);
			outStream1.putString(password);
			outStream1.doKeys();
			outStream2.offset = 0;
			if (recoveringConnection)
			{
				outStream2.put(18);
			}
			else
			{
				outStream2.put(16);
			}
			outStream2.put(outStream1.offset + 40);
			outStream2.put(255);
			outStream2.putShort(317);
			if(lowMemory)
			{
				outStream2.put(1);
			}
			else
			{
				outStream2.put(0);
			}
			
			for (int crcValue = 0; crcValue &lt; 9; crcValue++)
			{
				outStream2.putInt(crcValues[crcValue]);
			}

			outStream2.putBytes(outStream1.payload, outStream1.offset, 0);
			outStream1.isaacCipher = new ISAACCipher(seed);
			for (int index = 0; index &lt; 4; index++)
				seed[index] += 50;

			isaacCipher = new ISAACCipher(seed);
			buffer.queueBytes(outStream2.offset, outStream2.payload);
			loginResponse = buffer.read();
		}
		if (loginResponse == 1)
		{
			try
			{
				Thread.sleep(2000L);
			}
			catch (Exception _ex)
			{
			}
			login(username, password, recoveringConnection);
			return;
		}
		if (loginResponse == 2)
		{
			playerRights = buffer.read();
			flagged = buffer.read() == 1;
			lastClickTime = 0L;
			sameClickCounter = 0;
			mouseDetection.coord = 0;
			super.awtFocus = true;
			wasFocused = true;
			loggedIn = true;
			outStream1.offset = 0;
			inStream.offset = 0;
			packetOpcode = -1;
			firstLastOpcode = -1;
			secondLastOpcode = -1;
			thirdLastOpcode = -1;
			packetSize = 0;
			timeoutCounter = 0;
			systemUpdateTime = 0;
			anInt1011 = 0;
			hintIconType = 0;
			menuActionRow = 0;
			menuOpen = false;
			super.idleTime = 0;
			for (int message = 0; message &lt; 100; message++)
				chatMessages[message] = null;

			itemSelected = 0;
			spellSelected = 0;
			loadingStage = 0;
			trackCount = 0;
			cameraOffsetX = (int) (Math.random() * 100D) - 50;
			cameraOffsetY = (int) (Math.random() * 110D) - 55;
			viewRotationOffset = (int) (Math.random() * 80D) - 40;
			minimapRotation = (int) (Math.random() * 120D) - 60;
			minimapZoom = (int) (Math.random() * 30D) - 20;
			cameraX = (int) (Math.random() * 20D) - 10 &amp; 0x7ff;
			miniMapLock = 0;
			lastSceneId = -1;
			destinationX = 0;
			destinationY = 0;
			sessionPlayerCount = 0;
			sessionNpcCount = 0;
			for (int player = 0; player &lt; maxPlayers; player++)
			{
				sessionPlayers[player] = null;
				sessionPlayerUpdateStreams[player] = null;
			}

			for (int npc = 0; npc &lt; 16384; npc++)
				sessionNpcs[npc] = null;

			sessionPlayer = sessionPlayers[sessionPlayerIndex] = new Player();
			projectileQueue.clear();
			stillGraphicQueue.clear();
			for (int scene = 0; scene &lt; 4; scene++)
			{
				for (int x = 0; x &lt; 104; x++)
				{
					for (int y = 0; y &lt; 104; y++)
					{
						groundArray[scene][x][y] = null;
					}
				}
			}

			gameObjectSpawnQueue = new NodeList();
			friendListStatus = 0;
			friendListCount = 0;
			chatboxDialogId = -1;
			backDialogID = -1;
			openInterfaceID = -1;
			invOverlayInterfaceID = -1;
			currentStatusInterface = -1;
			isDialogueInterface = false;
			tabID = 3;
			inputType = 0;
			menuOpen = false;
			messagePromptRaised = false;
			clickToContinueString = null;
			multiCombat = 0;
			flashingSideBarID = -1;
			characterChangeGender = true;
			characterChangeGender();
			for (int color = 0; color &lt; 5; color++)
				characterEditColours[color] = 0;

			for (int action = 0; action &lt; 5; action++)
			{
				atPlayerActions[action] = null;
				atPlayerArray[action] = false;
			}

			anticheat6 = 0;
			anticheat3 = 0;
			anticheat15 = 0;
			anticheat9 = 0;
			anticheat13 = 0;
			anticheat7 = 0;
			anticheat5 = 0;
			anticheat8 = 0;
			//int anInt941 = 0;
			//int anInt1260 = 0;
			resetImageProducers2();
			return;
		}
		if (loginResponse == 3)
		{
			loginMessage1 = "";
			loginMessage2 = "Invalid username or password.";
			return;
		}
		if (loginResponse == 4)
		{
			loginMessage1 = "Your account has been disabled.";
			loginMessage2 = "Please check your message-center for details.";
			return;
		}
		if (loginResponse == 5)
		{
			loginMessage1 = "Your account is already logged in.";
			loginMessage2 = "Try again in 60 secs...";
			return;
		}
		if (loginResponse == 6)
		{
			loginMessage1 = "RuneScape has been updated!";
			loginMessage2 = "Please reload this page.";
			return;
		}
		if (loginResponse == 7)
		{
			loginMessage1 = "This world is full.";
			loginMessage2 = "Please use a different world.";
			return;
		}
		if (loginResponse == 8)
		{
			loginMessage1 = "Unable to connect.";
			loginMessage2 = "Login server offline.";
			return;
		}
		if (loginResponse == 9)
		{
			loginMessage1 = "Login limit exceeded.";
			loginMessage2 = "Too many connections from your address.";
			return;
		}
		if (loginResponse == 10)
		{
			loginMessage1 = "Unable to connect.";
			loginMessage2 = "Bad session id.";
			return;
		}
		if (loginResponse == 11)
		{
			loginMessage2 = "Login server rejected session.";
			loginMessage2 = "Please try again.";
			return;
		}
		if (loginResponse == 12)
		{
			loginMessage1 = "You need a members account to login to this world.";
			loginMessage2 = "Please subscribe, or use a different world.";
			return;
		}
		if (loginResponse == 13)
		{
			loginMessage1 = "Could not complete login.";
			loginMessage2 = "Please try using a different world.";
			return;
		}
		if (loginResponse == 14)
		{
			loginMessage1 = "The server is being updated.";
			loginMessage2 = "Please wait 1 minute and try again.";
			return;
		}
		if (loginResponse == 15)
		{
			loggedIn = true;
			outStream1.offset = 0;
			inStream.offset = 0;
			packetOpcode = -1;
			firstLastOpcode = -1;
			secondLastOpcode = -1;
			thirdLastOpcode = -1;
			packetSize = 0;
			timeoutCounter = 0;
			systemUpdateTime = 0;
			menuActionRow = 0;
			menuOpen = false;
			aLong824 = System.currentTimeMillis();
			return; 
		}
		if (loginResponse == 16)
		{
			loginMessage1 = "Login attempts exceeded.";
			loginMessage2 = "Please wait 1 minute and try again.";
			return;
		}
		if (loginResponse == 17)
		{
			loginMessage1 = "You are standing in a members-only area.";
			loginMessage2 = "To play on this world move to a free area first";
			return;
		}
		if (loginResponse == 20)
		{
			loginMessage1 = "Invalid loginserver requested";
			loginMessage2 = "Please try using a different world.";
			return;
		}
		if (loginResponse == 21)
		{
			for (int k1 = buffer.read(); k1 &gt;= 0; k1--)
			{
				loginMessage1 = "You have only just left another world";
				loginMessage2 = "Your profile will be transferred in: "
						+ k1 + " seconds";
				drawLoginScreen(true);
				try
				{
					Thread.sleep(1000L);
				}
				catch (Exception _ex)
				{
				}
			}

			login(username, password, recoveringConnection);
			return;
		}
		if (loginResponse == -1)
		{
			if (originalLoginResponse == 0)
			{
				if (loginFailures &lt; 2)
				{
					try
					{
						Thread.sleep(2000L);
					}
					catch (Exception _ex)
					{
					}
					loginFailures++;
					login(username, password, recoveringConnection);
					return;
				}
				else
				{
					loginMessage1 = "No response from loginserver";
					loginMessage2 = "Please wait 1 minute and try again.";
					return;
				}
			}
			else
			{
				loginMessage1 = "No response from server";
				loginMessage2 = "Please try using a different world.";
				return;
			}
		}
		else
		{
			System.out.println("response:" + loginResponse);
			loginMessage1 = "Unexpected server response";
			loginMessage2 = "Please try using a different world.";
			return;
		}
	}
	catch (IOException _ex)
	{
		loginMessage1 = "";
	}
	loginMessage2 = "Error connecting to server.";
}[/code]</code></pre>
      </div>

      <meta itemprop='headline' content='[Snippet] Almost fully refactored login protocol'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Docent.html'><span itemprop='name'>Docent</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2013-12-31T19:08:36Z'>
            <time itemprop='dateModified' datetime='2016-08-04T11:22:44Z' class='post-time'>
              August 4, 2016, 11:22am
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Great Job!</p>
      </div>

      <meta itemprop='headline' content='[Snippet] Almost fully refactored login protocol'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/silabsoft.html'><span itemprop='name'>silabsoft</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2013-12-31T19:58:54Z'>
            <time itemprop='dateModified' datetime='2016-08-04T11:22:45Z' class='post-time'>
              August 4, 2016, 11:22am
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I have a pretty well refactored 317 client laying around mind telling me which variables you are unsure about? Also those “anti cheat” values can be further refactored</p>
      </div>

      <meta itemprop='headline' content='[Snippet] Almost fully refactored login protocol'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Clawz_fury.html'><span itemprop='name'>Clawz_fury</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-01-01T01:01:43Z'>
            <time itemprop='dateModified' datetime='2016-08-04T11:22:49Z' class='post-time'>
              August 4, 2016, 11:22am
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>holy shit thanks for this</p>
      </div>

      <meta itemprop='headline' content='[Snippet] Almost fully refactored login protocol'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Ambokile.html'><span itemprop='name'>Ambokile</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-01-02T22:46:40Z'>
            <time itemprop='dateModified' datetime='2016-08-04T11:23:17Z' class='post-time'>
              August 4, 2016, 11:23am
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="3" data-topic="537843">
<div class="title">
<div class="quote-controls"></div>
 Miss Silabsoft:</div>
<blockquote>
<p>I have a pretty well refactored 317 client laying around mind telling me which variables you are unsure about? Also those “anti cheat” values can be further refactored</p>
</blockquote>
</aside>
<p>anInt1011 and aLong824 in the code above. I’ll be looking into the anticheat variables later on, I used another refactored client as reference for that, but I’ll be looking into those some more.</p>
<aside class="quote" data-post="4" data-topic="537843">
<div class="title">
<div class="quote-controls"></div>
 Clawz fury:</div>
<blockquote>
<p>holy shit thanks for this</p>
</blockquote>
</aside>
<p>No problem. Any other parts of the client you’d like to see most? I’ve done most of the sound classes.</p>
      </div>

      <meta itemprop='headline' content='[Snippet] Almost fully refactored login protocol'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="2" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Clawz_fury.html'><span itemprop='name'>Clawz_fury</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-01-03T02:45:32Z'>
            <time itemprop='dateModified' datetime='2016-08-04T11:23:21Z' class='post-time'>
              August 4, 2016, 11:23am
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="5" data-topic="537843">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/ambokile/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> Ambokile:</div>
<blockquote>
<p>No problem. Any other parts of the client you’d like to see most? I’ve done most of the sound classes.</p>
</blockquote>
</aside>
<p>server -&gt; client packets</p>
      </div>

      <meta itemprop='headline' content='[Snippet] Almost fully refactored login protocol'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/silabsoft.html'><span itemprop='name'>silabsoft</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-01-03T03:21:56Z'>
            <time itemprop='dateModified' datetime='2016-08-04T11:23:21Z' class='post-time'>
              August 4, 2016, 11:23am
            </time>
        <span itemprop='position'>#7</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Ambokile, post:5, topic:537843”][quote author=Miss Silabsoft link=topic=656668.msg4393951#msg4393951 date=1388519934]<br>
I have a pretty well refactored 317 client laying around mind telling me which variables you are unsure about? Also those “anti cheat” values can be further refactored<br>
[/quote]</p>
<p>anInt1011 and aLong824 in the code above. I’ll be looking into the anticheat variables later on, I used another refactored client as reference for that, but I’ll be looking into those some more.</p>
<aside class="quote">
<blockquote>
<p>holy shit thanks for this</p>
</blockquote>
</aside>
<p>No problem. Any other parts of the client you’d like to see most? I’ve done most of the sound classes.[/quote]</p>
<p>aLong824 -This is a current time placeholder When the client is loading terrain from the cache or ondemand it would set the current time and try to load the file, if the client takes longer than 36 seconds to load the nessesary files the client would throw a signlink error. The reason you find it in the “relogin” packet is because this value would normally already be previously set during normal gameplay and if you logout and don’t reset the time on login you would instantly throw the signlink error.</p>
<p>anInt1011 - This one is just leftover obfuscation it holds no value to the gamengine. You will notice that it can be set a value of 250 or 205 but it holds no purpose.</p>
      </div>

      <meta itemprop='headline' content='[Snippet] Almost fully refactored login protocol'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Ambokile.html'><span itemprop='name'>Ambokile</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-01-03T04:28:08Z'>
            <time itemprop='dateModified' datetime='2016-08-04T11:23:23Z' class='post-time'>
              August 4, 2016, 11:23am
            </time>
        <span itemprop='position'>#8</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Miss Silabsoft, post:7, topic:537843”][quote author=Ambokile link=topic=656668.msg4394493#msg4394493 date=1388702800]</p>
<aside class="quote">
<blockquote>
<p>I have a pretty well refactored 317 client laying around mind telling me which variables you are unsure about? Also those “anti cheat” values can be further refactored</p>
</blockquote>
</aside>
<p>anInt1011 and aLong824 in the code above. I’ll be looking into the anticheat variables later on, I used another refactored client as reference for that, but I’ll be looking into those some more.</p>
<aside class="quote">
<blockquote>
<p>holy shit thanks for this</p>
</blockquote>
</aside>
<p>No problem. Any other parts of the client you’d like to see most? I’ve done most of the sound classes.<br>
[/quote]</p>
<p>aLong824 -This is a current time placeholder When the client is loading terrain from the cache or ondemand it would set the current time and try to load the file, if the client takes longer than 36 seconds to load the nessesary files the client would throw a signlink error. The reason you find it in the “relogin” packet is because this value would normally already be previously set during normal gameplay and if you logout and don’t reset the time on login you would instantly throw the signlink error.</p>
<p>anInt1011 - This one is just leftover obfuscation it holds no value to the gamengine. You will notice that it can be set a value of 250 or 205 but it holds no purpose.[/quote]<br>
Thank you! I knew that aLong824 was used to time something, but I wasn’t sure what. What action do you suggest I take to anInt1011? I’ve been wary of just removing obfuscation leftovers because it will make it harder for people to compare their clients to mine.</p>
      </div>

      <meta itemprop='headline' content='[Snippet] Almost fully refactored login protocol'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/artem543.html'><span itemprop='name'>artem543</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-01-06T02:35:58Z'>
            <time itemprop='dateModified' datetime='2016-08-04T11:24:52Z' class='post-time'>
              August 4, 2016, 11:24am
            </time>
        <span itemprop='position'>#9</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Nothing impressive <img src="../../images/emoji/twitter/confusedae52.png?v=5" title=":confused:" class="emoji" alt=":confused:"></p>
      </div>

      <meta itemprop='headline' content='[Snippet] Almost fully refactored login protocol'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Ambokile.html'><span itemprop='name'>Ambokile</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-01-06T07:30:19Z'>
            <time itemprop='dateModified' datetime='2016-08-04T11:24:54Z' class='post-time'>
              August 4, 2016, 11:24am
            </time>
        <span itemprop='position'>#10</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="9" data-topic="537843">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/artem543/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> artem543:</div>
<blockquote>
<p>Nothing impressive <img src="../../images/emoji/twitter/confusedae52.png?v=5" title=":confused:" class="emoji" alt=":confused:"></p>
</blockquote>
</aside>
<p>I’ve yet to see any publicly released client that has a fully refactored login protocol, so this was released for those who with to understand it better but are unable to refactor it themselves.</p>
      </div>

      <meta itemprop='headline' content='[Snippet] Almost fully refactored login protocol'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/T41.html'><span itemprop='name'>T41</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-01-06T09:24:38Z'>
            <time itemprop='dateModified' datetime='2016-08-04T11:24:55Z' class='post-time'>
              August 4, 2016, 11:24am
            </time>
        <span itemprop='position'>#11</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>This is pretty rubbish naming, could use a lot more comments too.</p>
      </div>

      <meta itemprop='headline' content='[Snippet] Almost fully refactored login protocol'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/sinisoul.html'><span itemprop='name'>sinisoul</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-01-06T10:01:11Z'>
            <time itemprop='dateModified' datetime='2016-08-04T11:24:55Z' class='post-time'>
              August 4, 2016, 11:24am
            </time>
        <span itemprop='position'>#12</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Thing is we know all this. I’d like to see something that I haven’t seen in the past four years discovered.</p>
      </div>

      <meta itemprop='headline' content='[Snippet] Almost fully refactored login protocol'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Ambokile.html'><span itemprop='name'>Ambokile</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-01-06T12:07:45Z'>
            <time itemprop='dateModified' datetime='2016-08-04T11:24:56Z' class='post-time'>
              August 4, 2016, 11:24am
            </time>
        <span itemprop='position'>#13</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="11" data-topic="537843">
<div class="title">
<div class="quote-controls"></div>
 t4:</div>
<blockquote>
<p>This is pretty rubbish naming, could use a lot more comments too.</p>
</blockquote>
</aside>
<p>What naming would you improve? Yeah, I would have added comments but as sini said everyone knows what it does.</p>
<aside class="quote" data-post="12" data-topic="537843">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/sinisoul/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> sinisoul:</div>
<blockquote>
<p>Thing is we know all this. I’d like to see something that I haven’t seen in the past four years discovered.</p>
</blockquote>
</aside>
<p>It’s coming!</p>
      </div>

      <meta itemprop='headline' content='[Snippet] Almost fully refactored login protocol'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/T41.html'><span itemprop='name'>T41</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-01-06T12:49:40Z'>
            <time itemprop='dateModified' datetime='2016-08-04T11:24:56Z' class='post-time'>
              August 4, 2016, 11:24am
            </time>
        <span itemprop='position'>#14</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Well I don’t know, some of the naming leads me to believe you just copied whatever you saw in a server source. Take a look at my post in this section. I’ll be posting more like it in the future <img src="../../images/emoji/twitter/winkae52.png?v=5" title=":wink:" class="emoji" alt=":wink:"></p>
      </div>

      <meta itemprop='headline' content='[Snippet] Almost fully refactored login protocol'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Ambokile.html'><span itemprop='name'>Ambokile</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-01-06T13:33:33Z'>
            <time itemprop='dateModified' datetime='2016-08-04T11:24:56Z' class='post-time'>
              August 4, 2016, 11:24am
            </time>
        <span itemprop='position'>#15</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="14" data-topic="537843">
<div class="title">
<div class="quote-controls"></div>
 t4:</div>
<blockquote>
<p>Well I don’t know, some of the naming leads me to believe you just copied whatever you saw in a server source.</p>
</blockquote>
</aside>
<p>I didn’t use a server at all as my reference for this, I only used the login protocol documentation on <a href="http://rswiki.moparisthebest.com/" data-bbcode="true" rel="nofollow noopener">RSWiki</a>. Some of the names were bound to be wrong, I will take a look at yours later and adjust mine accordingly - thank you! <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
      </div>

      <meta itemprop='headline' content='[Snippet] Almost fully refactored login protocol'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/snippet-almost-fully-refactored-login-protocol/537843 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Aug 2019 08:28:41 GMT -->
</html>
