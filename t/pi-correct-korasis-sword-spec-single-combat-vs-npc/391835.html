<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/pi-correct-korasis-sword-spec-single-combat-vs-npc/391835 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Aug 2019 03:29:06 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>[PI] Correct Korasi&#39;s Sword spec (Single combat vs NPC) - Runescape - moparisthebest.com</title>
    <meta name="description" content="[image] 

[b]Before anyone says anything, this is using 317 gfx and animations.  Don&amp;#39;t like em, substitute them with the correct 641 ones. 

As i believe in learning by doing, I&amp;#39;m not including my PvP special or multi sp&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="391835.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;[PI] Correct Korasi&#39;s Sword spec (Single combat vs NPC)&#39;" href="391835.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://www.upload.ee/image/1286679/capture-1-new.gif" />
<meta property="og:image" content="http://www.upload.ee/image/1286679/capture-1-new.gif" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/pi-correct-korasis-sword-spec-single-combat-vs-npc/391835" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/pi-correct-korasis-sword-spec-single-combat-vs-npc/391835" />
<meta property="og:title" content="[PI] Correct Korasi&#39;s Sword spec (Single combat vs NPC)" />
<meta name="twitter:title" content="[PI] Correct Korasi&#39;s Sword spec (Single combat vs NPC)" />
<meta property="og:description" content="[b]Before anyone says anything, this is using 317 gfx and animations.  Don’t like em, substitute them with the correct 641 ones.  As i believe in learning by doing, I’m not including my PvP special or multi special.  You have to add those yourself.  Prereqs: Having special bar and draining for Korasi’s Sword[/b]  Firstly, open up CombatAssistant.java (Located at /src/server/model/players/).  Hit Ctr+F and search for   You should see a method like this:  	public void activateSpecial(int weapon,..." />
<meta name="twitter:description" content="[b]Before anyone says anything, this is using 317 gfx and animations.  Don’t like em, substitute them with the correct 641 ones.  As i believe in learning by doing, I’m not including my PvP special or multi special.  You have to add those yourself.  Prereqs: Having special bar and draining for Korasi’s Sword[/b]  Firstly, open up CombatAssistant.java (Located at /src/server/model/players/).  Hit Ctr+F and search for   You should see a method like this:  	public void activateSpecial(int weapon,..." />
<meta property="article:published_time" content="2011-04-20T23:26:10+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="391835.html">[PI] Correct Korasi&#39;s Sword spec (Single combat vs NPC)</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Owner_Fritz.html'><span itemprop='name'>Owner_Fritz</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-20T23:26:10Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:20:42Z' class='post-time'>
              August 1, 2016, 11:20am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p><img src="http://www.upload.ee/image/1286679/capture-1-new.gif" alt width="308" height="228"></p>
<p>[b]Before anyone says anything, this is using 317 gfx and animations.  Don’t like em, substitute them with the correct 641 ones.</p>
<p>As i believe in learning by doing, I’m not including my PvP special or multi special.  You have to add those yourself.</p>
<p>Prereqs: Having special bar and draining for Korasi’s Sword[/b]</p>
<p>Firstly, open up CombatAssistant.java (Located at /src/server/model/players/).</p>
<p>Hit Ctr+F and search for</p>
<pre><code class="lang-auto"></code></pre>
<p>You should see a method like this:</p>
<p><code>	public void activateSpecial(int weapon, int i){
		if(Server.npcHandler.npcs[i] == null &amp;&amp; c.npcIndex &gt; 0) {
			return;
		}
		if(Server.playerHandler.players[i] == null &amp;&amp; c.playerIndex &gt; 0) {
			return;
		}
		c.doubleHit = false;
		c.specEffect = 0;
		c.projectileStage = 0;
		c.specMaxHitIncrease = 2;
		if(c.npcIndex &gt; 0) {
			c.oldNpcIndex = i;
		} else if (c.playerIndex &gt; 0){
			c.oldPlayerIndex = i;
			Server.playerHandler.players[i].underAttackBy = c.playerId;
			Server.playerHandler.players[i].logoutDelay = System.currentTimeMillis();
			Server.playerHandler.players[i].singleCombatDelay = System.currentTimeMillis();
			Server.playerHandler.players[i].killerId = c.playerId;
		}
		switch(weapon) {
...And so on</code></p>
<p>Directly above</p>
<pre><code class="lang-auto"></code></pre>
<p>Add this:</p>
<p><code>	String weaponName = c.getItems().getItemName(weapon).toLowerCase();
	if(weaponName.contains("korasi")) {
		Random r = new Random();
		c.startAnimation(1872);
        	final double multiplier = r.nextDouble() + 0.5;
            if (c.npcIndex &gt; 0) {
            	final NPC n = NPCHandler.npcs[c.npcIndex];
    			EventManager.getSingleton().addEvent(new Event() {
    				int timer = 1;
    				public void execute(EventContainer c) {
    					if(c == null)
    						c.stop();
    					switch(timer) {
	    					case 1:
	    						n.gfx100(1224);
	    					break;
	    					case 0:
	    		            	npcMageDamage((int) (calculateMeleeMaxHit() * multiplier));
	        					c.stop();
	    					break;
    					}
    					timer--;
    				}
    			}, 600);
            	c.attackTimer = 5;
            }
	}</code></p>
<p>Lets go through what this does now.</p>
<p>First, we have this line:</p>
<pre><code class="lang-auto"></code></pre>
<p>Its function is to create a new String variable, which is text, named ‘weaponName’.  Never capitalize the first letter of a variable because good conventions state you should not.  (P.S. Conventions are what programmers use to make their code readable and open-source friendly)  The part after ’ = ’ calls a method inside of ItemAssistant.java (/src/server/model/items/) named ‘getItemName’ which gets the name of the weapon you are wielding.  It then uses a String method called ‘toLowerCase()’ to convert this name all to lower case letters.</p>
<pre><code class="lang-auto"></code></pre>
<p>This line checks to see if your weapon name contains ‘korasi’.  If it does, it does whatever is inside the brackets {}.</p>
<pre><code class="lang-auto"></code></pre>
<p>This calls the default constructor of the class Random and lets us access its methods with ‘r’.</p>
<pre><code class="lang-auto"></code></pre>
<p>Here we are calling the method ‘startAnimation’ from the class Player.  This is rather self-explanatory and makes your player do the indicated animation number, in this case, 1872.</p>
<pre><code class="lang-auto"></code></pre>
<p>This creates a new Double variable named multiplier.  For now, we are going to ignore ‘final’.  It then sets the variable using a method inside the Random class using ‘r’ named ‘nextDouble’.  This gets a random decimal from 0 to 1.  Then we add 0.5 to this so it will effectively getting a number from 0.5 to 1.5.</p>
<pre><code class="lang-auto"></code></pre>
<p>All this does is see if you are attacking an NPC and if so, do what is in the brackets.</p>
<pre><code class="lang-auto"></code></pre>
<p>With this, a new class NPC is being created named ‘n’ using the index of the npc we are attacking.  We can use this to access methods inside the NPC class.</p>
<pre><code class="lang-auto"></code></pre>
<p>This adds a new event to the EventManager class’s queue.</p>
<pre><code class="lang-auto"></code></pre>
<p>Here we are creating a new Integer named ‘timer’ and setting it to 1 INSIDE THE EVENT. This is important because we are able to access this variable inside the event.</p>
<pre><code class="lang-auto"></code></pre>
<p>This sets the method of which the Event will execute each time it ticks.</p>
<p><code>    					if(c == null)
    						c.stop();</code><br>
What we are doing here is checking if the player is still online/available.  If the player is not, it calls the method from EventManager class, ‘stop’, which ends the Event.</p>
<pre><code class="lang-auto"></code></pre>
<p>This starts a ‘switch’ that is checking what the value of ‘timer’ is.</p>
<p><code>	    					case 1:
	    						n.gfx100(1224);
	    					break;</code><br>
This is the first check the switch statement makes.  With ‘case 1:’, it says that if timer is equal to 1, do the following until a ‘break’ occurs.  Directly under this, it calls a method inside the NPC class named ‘gfx100’.  This creates a gfx on an NPC.  This here calls gfx number 1224.  Last is the ‘break’ line, which says to stop the switch statement there.</p>
<p><code>	    					case 0:
	    		            	npcMageDamage((int) (calculateMeleeMaxHit() * multiplier));
	        					c.stop();
	    					break;</code><br>
This is the second check the switch statement makes.  ‘case 0:’ is checking to see if ‘timer’ is equal to 0 and if it is, do the following up until the next ‘break’.  Next it calls the method ‘npcMageDamage’ and inputs the player’s max melee hit multiplied by the variable ‘multiplier’ we created earlier.  This method deals magic damage on the NPC instead of the melee damage it normally would.  After this, it calls ‘stop’ which ends the event.</p>
<p><code>
    					}
    					timer--;</code><br>
The bracket is simply ending the switch statement.  ‘timer–’ is subtracting one from the variable timer.</p>
<p><code>
    				}
    			}, 600);
            	c.attackTimer = 5;
            }
		}</code><br>
As before, all of the brackets are closing previous brackets.  ‘, 600)’ tells the Event to run every 600 ms, or one tick.  The next line sets the variable ‘attackTimer’ from the Player class to 5.  ‘attackTimer’ is what tells the player how long until they attack next.  We are setting it to 5 so it delays slightly after the special and you won’t double hit your opponent.</p>
<p>And add below</p>
<pre><code class="lang-auto"></code></pre>
<p>This:</p>
<p><code>	public void npcMageDamage(int damage) {
		int i = c.npcIndex;
		int bonusAttack = getBonusAttack(i);
		if (Misc.random(Server.npcHandler.npcs[i].defence) &gt; 10+ Misc.random(mageAtk()) + bonusAttack) {
			damage/=2;
		} else if (Server.npcHandler.npcs[i].npcType == 2881 || Server.npcHandler.npcs[i].npcType == 2882) {
			damage/=2;
		}
		if (Server.npcHandler.npcs[i].HP - damage &lt; 0) { 
			damage = Server.npcHandler.npcs[i].HP;
		}
		c.getPA().addSkillXP((damage*Config.MAGIC_EXP_RATE), 6); 
		c.getPA().addSkillXP((damage*Config.MAGIC_EXP_RATE/3), 3);
		c.getPA().refreshSkill(3);
		c.getPA().refreshSkill(6);
		if (damage &gt; 0) {
			if (Server.npcHandler.npcs[i].npcType &gt;= 3777 &amp;&amp; Server.npcHandler.npcs[i].npcType &lt;= 3780) {
				c.pcDamage += damage;					
			}				
		}
		Server.npcHandler.npcs[i].underAttack = true;
		Server.npcHandler.npcs[i].hitDiff = damage;
		Server.npcHandler.npcs[i].HP -= damage;
		Server.npcHandler.npcs[i].hitUpdateRequired = true;
		c.totalDamageDealt += damage;
		c.killingNpcIndex = c.oldNpcIndex;			
		Server.npcHandler.npcs[i].updateRequired = true;
	}</code><br>
This method takes a damage input and checks if the npc defends itself from part of the damage.  If so, it divides the damage by 2.  Then it adds the correct magic experience and the shows the hit. Sorry for the short explanation but I’m rather tired atm.</p>
      </div>

      <meta itemprop='headline' content='[PI] Correct Korasi&#39;s Sword spec (Single combat vs NPC)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Loveandpower.html'><span itemprop='name'>Loveandpower</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-20T23:29:45Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:20:43Z' class='post-time'>
              August 1, 2016, 11:20am
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Don’t you need the newest gfx/anims for the special?</p>
      </div>

      <meta itemprop='headline' content='[PI] Correct Korasi&#39;s Sword spec (Single combat vs NPC)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Owner_Fritz.html'><span itemprop='name'>Owner_Fritz</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-20T23:33:27Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:20:44Z' class='post-time'>
              August 1, 2016, 11:20am
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Looks fine with these 317 anims/gfx so I really cbf.  If you want to, you can change the IDs to the current ones however.</p>
      </div>

      <meta itemprop='headline' content='[PI] Correct Korasi&#39;s Sword spec (Single combat vs NPC)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/nico12096.html'><span itemprop='name'>nico12096</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-05-02T14:11:42Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:36:05Z' class='post-time'>
              August 1, 2016, 11:36am
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>i added it all correctly and these are my errors someone please help. <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p><code>src\server\model\players\CombatAssistant.java:2816: cannot find symbol
symbol  : class Random
location: class server.model.players.CombatAssistant
                                Random r = new Random();
                                ^
src\server\model\players\CombatAssistant.java:2816: cannot find symbol
symbol  : class Random
location: class server.model.players.CombatAssistant
                                Random r = new Random();
                                               ^
src\server\model\players\CombatAssistant.java:2818: operator + cannot be applied
 to Random.nextDouble,double
                                final double multiplier = r.nextDouble() + 0.5;
                                                                      ^
src\server\model\players\CombatAssistant.java:2818: incompatible types
found   : &lt;nulltype&gt;
required: double
                                final double multiplier = r.nextDouble() + 0.5;
                                                                         ^
Note: Some input files use unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details.
4 errors
Press any key to continue . . .</code></p>
      </div>

      <meta itemprop='headline' content='[PI] Correct Korasi&#39;s Sword spec (Single combat vs NPC)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/P_A_N_I_C.html'><span itemprop='name'>P_A_N_I_C</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-05-02T23:47:46Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:36:35Z' class='post-time'>
              August 1, 2016, 11:36am
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Very nice</p>
      </div>

      <meta itemprop='headline' content='[PI] Correct Korasi&#39;s Sword spec (Single combat vs NPC)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/pi-correct-korasis-sword-spec-single-combat-vs-npc/391835 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Aug 2019 03:29:07 GMT -->
</html>
