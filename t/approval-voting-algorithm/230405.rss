<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Approval Voting Algorithm</title>
    <link>https://forum.moparisthebest.com/t/approval-voting-algorithm/230405</link>
    <description>Well, I need a few smart people to look over my Algorithm and see if they can improve it.

Let me give you some background first though.

In Approval Voting, you vote for... well, who you approve of. So, lets say Canidates A, B, C, and D are running for office, and you would&#39;nt mind to see B, or C in office. But you would hate to see A, and D in office. 

So on your ballot you would put

B, C

Very simple, you can vote for as many as you like, but you only put the ones you approve of. In my Discrete Math class we have to do a Project a semester, We have a big list of projects, and this is the only one that involved programming. So it caught my eye.

Anyway, The project was to &quot;Create a program that allows you to enter in a number, then it will generate all possible ways of voting if approval voting is used. Use A, B, C, D... etc. as candidates.&quot;

So, I wrote this little robust class for the project. I implemented it into a GUI, but this is where all the calculation is going on, so I want to see if I can make the calculation any faster.


This was my original code:

[code]/**
 * Approval.java
 * by: Martin Stauber
 */

import java.util.ArrayList;
import java.util.List;

public class Approval
{

	public
	Approval (int numberOfChoices)
	{
		m_numberOfChoices = numberOfChoices;
		m_Max = numberOfChoices + 66;
		
		for(int i = 65; i &lt; 65 + numberOfChoices; i++)
			Populate(&quot;&quot;, i);
	}
	
	private void
	Populate (String orig, int end)
	{
		orig += (char)end;
		
		for(int i = end+1; i &lt; m_Max; i++)
		{
			if(!m_Choices.contains(orig))
				m_Choices.add(orig);
			Populate(orig, i);
		}
	}

	public List&lt;String&gt;
	getPossible ()
	{
		return m_Choices;
	}
	
	private int m_numberOfChoices;
	private int m_Max;
	private List&lt;String&gt; m_Choices = new ArrayList&lt;String&gt;();
    
}[/code]


I made it quite a bit faster by adding a temporary List&lt;string&gt; to cut down on the linear searching.

[code]class Approval
{
   public
   Approval(int numberOfChoices)
   {
      m_numberOfChoices = numberOfChoices;
      m_Max = numberOfChoices + 66;

      
      for (int i = 65; i &lt; 65 + numberOfChoices; i++)
      {
         Populate(&quot;&quot;, i);
         m_temp.Clear();
      }
         

   }

   private void
   Populate (string orig, int end)
   {
      orig += (char)end;

      for (int i = end + 1; i &lt; m_Max; i++)
      {
         if (!m_temp.contains(orig))
         {
            m_temp.add(orig);
            m_Choices.add(orig);
         }
         Populate(orig, i);
      }
   }

   public List&lt;String&gt;
   GetPossible ()
   {
      return m_Choices;
   }

   private int m_numberOfChoices;
   private int m_Max;
   private List&lt;String&gt; m_Choices = new ArrayList&lt;String&gt; ();
   private List&lt;String&gt; m_temp = new ArrayList&lt;String&gt; ();
}[/code]


If you can find anything I can change to make it go faster, please tell me.</description>
    
    <lastBuildDate>Thu, 11 Sep 2008 20:03:39 +0000</lastBuildDate>
    <category>General Programming</category>
    <atom:link href="https://forum.moparisthebest.com/t/approval-voting-algorithm/230405.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Approval Voting Algorithm</title>
        <dc:creator><![CDATA[@meiscooldude meiscooldude]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/meiscooldude">@meiscooldude</a> wrote:</p>
          <blockquote>
              <p>[quote=“R.I.P RSC, post:17, topic:230405”]So what you want is the following?</p>
<p>If you put 1, you get the answer of 1^1. If you put 2, you get the answer of 2^2? Or am I completely missing the picture here?[/quote]</p>
<p>The number of answers is always going to be (2^n) - 1, but it has to generate all possible ways of voting… My Binary Algorithm Implementation makes it go much faster… So this topic is as good as closed.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/approval-voting-algorithm/230405/18">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/approval-voting-algorithm/230405/18</link>
        <pubDate>Thu, 11 Sep 2008 20:03:39 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-230405-18</guid>
        <source url="https://forum.moparisthebest.com/t/approval-voting-algorithm/230405.rss">Approval Voting Algorithm</source>
      </item>
      <item>
        <title>Approval Voting Algorithm</title>
        <dc:creator><![CDATA[@R.I.P_RSC R.I.P RSC]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/r.i.p_rsc">@R.I.P_RSC</a> wrote:</p>
          <blockquote>
              <p>So what you want is the following?</p>
<p>If you put 1, you get the answer of 1^1. If you put 2, you get the answer of 2^2? Or am I completely missing the picture here?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/approval-voting-algorithm/230405/17">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/approval-voting-algorithm/230405/17</link>
        <pubDate>Thu, 11 Sep 2008 18:45:29 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-230405-17</guid>
        <source url="https://forum.moparisthebest.com/t/approval-voting-algorithm/230405.rss">Approval Voting Algorithm</source>
      </item>
      <item>
        <title>Approval Voting Algorithm</title>
        <dc:creator><![CDATA[@moparisthebest Moparisthebest]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/moparisthebest">@moparisthebest</a> wrote:</p>
          <blockquote>
              <p>Java doesn’t do JIT compiling from the start because sometimes it is slower:</p>
<p>[quote=“<a href="http://java.sun.com/developer/onlineTraining/Programming/JDCBook/perf2.html" rel="nofollow noopener">http://java.sun.com/developer/onlineTraining/Programming/JDCBook/perf2.html</a>”]Adaptive optimization</p>
<p>The Java Hotspot does not include a plug-in JIT compiler but instead compiles and inline methods that appear it has determined as being the most used in the application. This means that on the first pass through the Java bytecodes are interpreted as if you did not have a JIT compiler present. If the code then appears as being a hotspot in your application the hotspot compiler will compiler the bytecodes into native code which is then stored in a cache and inline methods at the same time. See the inlining section for details on the advantages to inlining code.</p>
<p>One advantage to selective compilation over a JIT compiler is that the byte compiler can be spend more time generating highly optimized for the areas that would benefit from the optimization most. The compiler can also avoid compiling code that may be best run in interpreted mode.</p>
<p>Earlier versions of the Java HotSpot VM were not able to optimize code that was not currently in use. The downside to this is if the application was in a huge busy loop the optimizer would not be able to compile the code for area until the loop had finished. Later Java Hotspot VM releases use on-stack replacement, meaning that code can be compiled into native code even if it is in use by the interpreter.[/quote]</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/approval-voting-algorithm/230405/16">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/approval-voting-algorithm/230405/16</link>
        <pubDate>Thu, 11 Sep 2008 06:27:55 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-230405-16</guid>
        <source url="https://forum.moparisthebest.com/t/approval-voting-algorithm/230405.rss">Approval Voting Algorithm</source>
      </item>
      <item>
        <title>Approval Voting Algorithm</title>
        <dc:creator><![CDATA[@k00dr k00dr]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/k00dr">@k00dr</a> wrote:</p>
          <blockquote>
              <p>Well Java isn’t but bytecode is.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/approval-voting-algorithm/230405/15">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/approval-voting-algorithm/230405/15</link>
        <pubDate>Thu, 11 Sep 2008 05:04:04 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-230405-15</guid>
        <source url="https://forum.moparisthebest.com/t/approval-voting-algorithm/230405.rss">Approval Voting Algorithm</source>
      </item>
      <item>
        <title>Approval Voting Algorithm</title>
        <dc:creator><![CDATA[@Pwnd Pwnd]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/pwnd">@Pwnd</a> wrote:</p>
          <blockquote>
              <p>Java isn’t interpreted.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/approval-voting-algorithm/230405/14">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/approval-voting-algorithm/230405/14</link>
        <pubDate>Thu, 11 Sep 2008 04:18:27 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-230405-14</guid>
        <source url="https://forum.moparisthebest.com/t/approval-voting-algorithm/230405.rss">Approval Voting Algorithm</source>
      </item>
      <item>
        <title>Approval Voting Algorithm</title>
        <dc:creator><![CDATA[@meiscooldude meiscooldude]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/meiscooldude">@meiscooldude</a> wrote:</p>
          <blockquote>
              <aside class="quote no-group" data-post="11" data-topic="230405">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/yz85racer/40/5_6bca9977b612b7aeef77ba1ec1cd67b3.png" class="avatar"> Yz85Racer:</div>
<blockquote>
<p>Off-topic: Why are you so focused on Algorithms? Do you have to do it for school?</p>
</blockquote>
</aside>
<p>Well, the Sorting algorithms were for work, they wanted to know exactly how good I was… This algorithm is for a Descrete math project… And I did the binary one because it was fun.</p>
<p>[quote=“Cheese_Police, post:12, topic:230405”][quote author=meiscooldude link=topic=303343.msg2433298#msg2433298 date=1221015571]<br>
I tested the program in C#, so its pretty close to native, it still took a while to generate all the choices for 15, and i didn’t have the patience for 20.<br>
[/quote][/quote]</p>
<p>The reason I didn’t say native is because its not compiled into native code, but rather to CLR. But then yes, it uses Just In Time before it is ran.</p>
<p>Do you know if Java uses Just In Time? or is it interpreted?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/approval-voting-algorithm/230405/13">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/approval-voting-algorithm/230405/13</link>
        <pubDate>Wed, 10 Sep 2008 23:25:14 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-230405-13</guid>
        <source url="https://forum.moparisthebest.com/t/approval-voting-algorithm/230405.rss">Approval Voting Algorithm</source>
      </item>
      <item>
        <title>Approval Voting Algorithm</title>
        <dc:creator><![CDATA[@Cheese_Police c|p]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/cheese_police">@Cheese_Police</a> wrote:</p>
          <blockquote>
              <aside class="quote no-group quote-modified" data-post="7" data-topic="230405">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/user_avatar/forum.moparisthebest.com/meiscooldude/40/205_1.png" class="avatar"> meiscooldude:</div>
<blockquote>
<p>I tested the program in C#, so its pretty close to native, it still took a while to generate all the choices for 15, and i didn’t have the patience for 20.</p>
</blockquote>
</aside>
<p>All .NET programs run natively, thanks to JIT compilation</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/approval-voting-algorithm/230405/12">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/approval-voting-algorithm/230405/12</link>
        <pubDate>Wed, 10 Sep 2008 23:06:37 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-230405-12</guid>
        <source url="https://forum.moparisthebest.com/t/approval-voting-algorithm/230405.rss">Approval Voting Algorithm</source>
      </item>
      <item>
        <title>Approval Voting Algorithm</title>
        <dc:creator><![CDATA[@Yz85Racer Yz85Racer]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/yz85racer">@Yz85Racer</a> wrote:</p>
          <blockquote>
              <p>Off-topic: Why are you so focused on Algorithms? Do you have to do it for school?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/approval-voting-algorithm/230405/11">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/approval-voting-algorithm/230405/11</link>
        <pubDate>Wed, 10 Sep 2008 22:19:43 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-230405-11</guid>
        <source url="https://forum.moparisthebest.com/t/approval-voting-algorithm/230405.rss">Approval Voting Algorithm</source>
      </item>
      <item>
        <title>Approval Voting Algorithm</title>
        <dc:creator><![CDATA[@meiscooldude meiscooldude]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/meiscooldude">@meiscooldude</a> wrote:</p>
          <blockquote>
              <aside class="quote no-group" data-post="9" data-topic="230405">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/user_avatar/forum.moparisthebest.com/moparisthebest/40/30_1.png" class="avatar"> Moparisthebest:</div>
<blockquote>
<p>Why would you be limited to 64 choices?</p>
</blockquote>
</aside>
<p>Well, you could use a long, which has 64 bits, and as you can see in my algorithm below, I’m doing a bitshift, so… connect the dots <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=6" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>Anyway, here is my implementation of the Binary Algorithm,</p>
<pre><code class="lang-auto">   public List&lt;String&gt;
   getPossible (int choices)
   {
      List&lt;string&gt; toReturn = new ArrayList&lt;String&gt;();

      choices = (int) Math.pow(2.0, choices);

      for (int i = 1; i &lt; choices; i++)
      {
         int oldI = i;
         String temp = "";
         for (int l = 65; l &lt; 65 + oldI; l++)
         {
            int t = i % 2;

            i = i &gt;&gt; 1;

            if (t == 1)
               temp += (char)l;
            
            if ( i == 0 )
               break;

         }
         toReturn.add(temp);
         i = oldI;
      }

      return toReturn;
   }[/code]

Here are my results, The first one is my binary algorithm, the second is my original recursive algorithm. As you can see, it runs much faster.

[code]Martin's Binary Algorithm Implementation v2 - 4203.2594999969 Milliseconds - 21 Choices
Martin's Binary Algorithm Implementation v2 - 2046.94050000608 Milliseconds - 20 Choices
Martin's Binary Algorithm Implementation v2 - 984.406500004232 Milliseconds - 19 Choices
Martin's Binary Algorithm Implementation v2 - 500.016000002623 Milliseconds - 18 Choices
Martin's Binary Algorithm Implementation v2 - 234.382500000298 Milliseconds - 17 Choices
Martin's Binary Algorithm Implementation v2 - 125.004000000656 Milliseconds - 16 Choices
Martin's Binary Algorithm Implementation v2 - 62.5020000040531 Milliseconds - 15 Choices
Martin's Binary Algorithm Implementation v2 - 31.250999994576 Milliseconds - 14 Choices
Martin's Binary Algorithm Implementation v2 - 0 Milliseconds - 13 Choices


Martin's Algorithm - 5593.92900000513 Milliseconds - 15 Choices
Martin's Algorithm - 1390.66950000077 Milliseconds - 14 Choices
Martin's Algorithm - 375.012000001967 Milliseconds - 13 Choices
Martin's Algorithm - 93.7529999986291 Milliseconds - 12 Choices
Martin's Algorithm - 31.250999994576 Milliseconds - 11 Choices
Martin's Algorithm - 15.6255000010133 Milliseconds - 10 Choices
Martin's Algorithm - 0 Milliseconds - 9 Choices
</code></pre>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/approval-voting-algorithm/230405/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/approval-voting-algorithm/230405/10</link>
        <pubDate>Wed, 10 Sep 2008 20:19:39 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-230405-10</guid>
        <source url="https://forum.moparisthebest.com/t/approval-voting-algorithm/230405.rss">Approval Voting Algorithm</source>
      </item>
      <item>
        <title>Approval Voting Algorithm</title>
        <dc:creator><![CDATA[@moparisthebest Moparisthebest]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/moparisthebest">@moparisthebest</a> wrote:</p>
          <blockquote>
              <p>[quote=“meiscooldude, post:5, topic:230405”][quote author=Moparisthebest link=topic=303343.msg2432814#msg2432814 date=1220995507]<br>
So basically you want the power set of a set that is of ‘n’ (specified) length?</p>
<p>Edit:<br>
Maybe you don’t know what a power set is:<br>
<a href="http://www.mathsisfun.com/sets/power-set.html" class="onebox" target="_blank" rel="nofollow noopener">http://www.mathsisfun.com/sets/power-set.html</a></p>
<p>Check out the ‘It’s Binary!’ section on that page, that would be an excellent algorithm and is easy to implement.</p>
<p>here is a generator:<br>
<a href="http://www.mathsisfun.com/sets/power-set-maker.html" class="onebox" target="_blank" rel="nofollow noopener">http://www.mathsisfun.com/sets/power-set-maker.html</a></p>
<p>That is what you are after correct?<br>
[/quote]</p>
<p>That is exactly what I am after, thank you very much. This project isn’t for a Computer Science class though, so it doesn’t matter what implementation I use, just that it works. But finding the solution was fun, so I might try to implement that binary algorithm just for fun. The only thing about the binary is you would be limited to 64 choices, not that it matters though, I don’t think there would be any point in seeing that many choices.</p>
<p>And if you think you know the <span class="bbcode-i">Big O</span> notation to my algorithm, please tell me… From what i can see, the binary Big O should be O(2^n)? correct me if I’m wrong.[/quote]</p>
<p>Why would you be limited to 64 choices?</p>
<p>And from a quick look, you are correct in your O limit.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/approval-voting-algorithm/230405/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/approval-voting-algorithm/230405/9</link>
        <pubDate>Wed, 10 Sep 2008 19:31:05 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-230405-9</guid>
        <source url="https://forum.moparisthebest.com/t/approval-voting-algorithm/230405.rss">Approval Voting Algorithm</source>
      </item>
      <item>
        <title>Approval Voting Algorithm</title>
        <dc:creator><![CDATA[@mod_taharok Taharok]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/mod_taharok">@mod_taharok</a> wrote:</p>
          <blockquote>
              <p>[quote=“meiscooldude, post:7, topic:230405”][quote author=Taharok link=topic=303343.msg2433291#msg2433291 date=1221015370]</p>
<aside class="quote no-group">
<blockquote>
<p>Lol, well Taharok, thanks for the lengthy reply, I’m glad you found this problem as fun as I did. As for the syntax errors, thats because I wrote my implementation in C# and then copied it over here and made it look like Java as best I could. But I missed a few places.</p>
<p>While I was in class, one of my class members was watching me and noticed how it matched the table. Which if you look at moparisthebest’s link, it makes since why.</p>
<p>I actually spent a whole class period and 3 hours at work implementing and creating my algorithm.</p>
<p>For your interest, My first version of the algorithm took 263 milliseconds to execute given 12 choices, my second only took 93 milliseconds to execute given the same number of choices. After that improvement I was fairly happy, and decided to go ahead and build.</p>
</blockquote>
</aside>
<p>Well, if you were testing it in C++, then it would be faster then in Java, just not that much faster. The algorithm is fast for low-end choices, but it raises almost exponentially (as the chart shows) as you climb into higher digits. Try testing your algorithm with 15 or even 20 choices, and you will see how slow it gets (or did for me).<br>
[/quote]</p>
<p>I tested the program in C#, so its pretty close to native, it still took a while to generate all the choices for 15, and i didn’t have the patience for 20.[/quote]</p>
<p>Well, when reading this topic, I had the impression you need optimization. I hope I didn’t <span class="bbcode-i">entirely</span> waste my free time tonight optimizing an algorithm which wasn’t going to be used. Regardless, as long as I know I helped someone, I will be alright. I won’t read anymore replies, as I am tired and need to recuperate my sleep. Hope you get a good grade tomorrow, bye.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/approval-voting-algorithm/230405/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/approval-voting-algorithm/230405/8</link>
        <pubDate>Wed, 10 Sep 2008 03:01:55 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-230405-8</guid>
        <source url="https://forum.moparisthebest.com/t/approval-voting-algorithm/230405.rss">Approval Voting Algorithm</source>
      </item>
      <item>
        <title>Approval Voting Algorithm</title>
        <dc:creator><![CDATA[@meiscooldude meiscooldude]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/meiscooldude">@meiscooldude</a> wrote:</p>
          <blockquote>
              <p>[quote=“Taharok, post:6, topic:230405”][quote author=meiscooldude link=topic=303343.msg2433273#msg2433273 date=1221013948]<br>
Lol, well Taharok, thanks for the lengthy reply, I’m glad you found this problem as fun as I did. As for the syntax errors, thats because I wrote my implementation in C# and then copied it over here and made it look like Java as best I could. But I missed a few places.</p>
<p>While I was in class, one of my class members was watching me and noticed how it matched the table. Which if you look at moparisthebest’s link, it makes since why.</p>
<p>I actually spent a whole class period and 3 hours at work implementing and creating my algorithm.</p>
<p>For your interest, My first version of the algorithm took 263 milliseconds to execute given 12 choices, my second only took 93 milliseconds to execute given the same number of choices. After that improvement I was fairly happy, and decided to go ahead and build.</p>
<p>[/quote]</p>
<p>Well, if you were testing it in C++, then it would be faster then in Java, just not that much faster. The algorithm is fast for low-end choices, but it raises almost exponentially (as the chart shows) as you climb into higher digits. Try testing your algorithm with 15 or even 20 choices, and you will see how slow it gets (or did for me).[/quote]</p>
<p>I tested the program in C#, so its pretty close to native, it still took a while to generate all the choices for 15, and i didn’t have the patience for 20.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/approval-voting-algorithm/230405/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/approval-voting-algorithm/230405/7</link>
        <pubDate>Wed, 10 Sep 2008 02:59:31 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-230405-7</guid>
        <source url="https://forum.moparisthebest.com/t/approval-voting-algorithm/230405.rss">Approval Voting Algorithm</source>
      </item>
      <item>
        <title>Approval Voting Algorithm</title>
        <dc:creator><![CDATA[@mod_taharok Taharok]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/mod_taharok">@mod_taharok</a> wrote:</p>
          <blockquote>
              <p>[quote=“meiscooldude, post:5, topic:230405”]Lol, well Taharok, thanks for the lengthy reply, I’m glad you found this problem as fun as I did. As for the syntax errors, thats because I wrote my implementation in C# and then copied it over here and made it look like Java as best I could. But I missed a few places.</p>
<p>While I was in class, one of my class members was watching me and noticed how it matched the table. Which if you look at moparisthebest’s link, it makes since why.</p>
<p>I actually spent a whole class period and 3 hours at work implementing and creating my algorithm.</p>
<p>For your interest, My first version of the algorithm took 263 milliseconds to execute given 12 choices, my second only took 93 milliseconds to execute given the same number of choices. After that improvement I was fairly happy, and decided to go ahead and build.[/quote]</p>
<p>Well, if you were testing it in C++, then it would be faster then in Java, just not that much faster. The algorithm is fast for low-end choices, but it raises almost exponentially (as the chart shows) as you climb into higher digits. Try testing your algorithm with 15 or even 20 choices, and you will see how slow it gets (or did for me).</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/approval-voting-algorithm/230405/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/approval-voting-algorithm/230405/6</link>
        <pubDate>Wed, 10 Sep 2008 02:56:10 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-230405-6</guid>
        <source url="https://forum.moparisthebest.com/t/approval-voting-algorithm/230405.rss">Approval Voting Algorithm</source>
      </item>
      <item>
        <title>Approval Voting Algorithm</title>
        <dc:creator><![CDATA[@meiscooldude meiscooldude]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/meiscooldude">@meiscooldude</a> wrote:</p>
          <blockquote>
              <p>[quote=“Moparisthebest, post:2, topic:230405”]So basically you want the power set of a set that is of ‘n’ (specified) length?</p>
<p>Edit:<br>
Maybe you don’t know what a power set is:<br>
<a href="http://www.mathsisfun.com/sets/power-set.html" class="onebox" target="_blank" rel="nofollow noopener">http://www.mathsisfun.com/sets/power-set.html</a></p>
<p>Check out the ‘It’s Binary!’ section on that page, that would be an excellent algorithm and is easy to implement.</p>
<p>here is a generator:<br>
<a href="http://www.mathsisfun.com/sets/power-set-maker.html" class="onebox" target="_blank" rel="nofollow noopener">http://www.mathsisfun.com/sets/power-set-maker.html</a></p>
<p>That is what you are after correct?[/quote]</p>
<p>That is exactly what I am after, thank you very much. This project isn’t for a Computer Science class though, so it doesn’t matter what implementation I use, just that it works. But finding the solution was fun, so I might try to implement that binary algorithm just for fun. The only thing about the binary is you would be limited to 64 choices, not that it matters though, I don’t think there would be any point in seeing that many choices.</p>
<p>And if you think you know the <span class="bbcode-i">Big O</span> notation to my algorithm, please tell me… From what i can see, the binary Big O should be O(2^n)? correct me if I’m wrong.[br][br][size=1]Posted on: September 09, 2008, 08:43:33 pm[/size][hr][quote=“Taharok, post:4, topic:230405”]Alright, after looking through the code, I saw several initial errors. Firstly, the method [tt]clear()[/tt] inside of java.awt.List is started with a lowercase letter. Secondly, there is no such class as [tt]string[/tt], unless you made your own? Sorry for being a perfectionist in this instance, but that was uncompilable code.</p>
<p>Now, I started to rebuild the class (just because I had a hard time reading it), and these errors urged me to test out the class. So, after some minor modifications (none that would dramatically change the speed of the algorithm), I threw it in Eclipse and tested it out. What I got astounded me. Loading 5 different choices took around 2 milliseconds. 15 choices took around 30 seconds to load. So, after evaluating the algorithm, the urge to make major changes came about.</p>
<p>I started dumping output from the algorithm, such as the amount of milliseconds and nanoseconds it took to load, as well as the entries it produced and the number of entries it produced. Using these different numbers, I went from 0-15 choices, and copied down the number of entries each one produced. None of them made mathematical sense, until I compared them to my bitmask table. I don’t know if you meant to do this, but your algorithm perfectly aligns with the common bitmask table.</p>
<p>For example, if I were to use your algorithm to generate 5 candidates worth of choices, I would get exactly 31 results. The following chart can be used to evaluate different choice amounts:</p>
<pre><code class="lang-auto">Num bits | max value	| hex value
------------------------------------
1	 | 1		| 0x1
2	 | 3		| 0x3
3	 | 7		| 0x7
4	 | 15		| 0xF
5	 | 31		| 0x1F
6	 | 63		| 0x3F
7	 | 127		| 0x7F
8	 | 255		| 0xFF
------------------------------------
9	 | 511		| 0x1FF
10	 | 1023		| 0x3FF
11	 | 2047		| 0x7FF
12	 | 4095		| 0xFFF
13	 | 8191		| 0x1FFF
14	 | 16383	| 0x3FFF
15	 | 32767	| 0x7FFF
16	 | 65535	| 0xFFFF
------------------------------------
17	 | 131071	| 0x1FFFF
18	 | 262143	| 0x3FFFF
19	 | 524287	| 0x7FFFF
20	 | 1048575	| 0xFFFFF
21	 | 2097151	| 0x1FFFFF
22	 | 4194303	| 0x3FFFFF
23	 | 8388607	| 0x7FFFFF
24	 | 16777215	| 0xFFFFFF
------------------------------------
25	 | 33554431	| 0x1FFFFFF
26	 | 67108863	| 0x3FFFFFF
27	 | 134217727	| 0x7FFFFFF
28	 | 268435455	| 0xFFFFFFF
29	 | 536870911	| 0x1FFFFFFF
30	 | 1073741823	| 0x3FFFFFFF
31	 | 2147483647	| 0x7FFFFFFF
32	 | 4294967295	| 0xFFFFFFFF
------------------------------------</code></pre>
<p>As you can see, it must be coincidence. Anyway, the load time was way too slow for my liking. So, I spent the next half hour, or so, revising and rebuilding the code. I removed all the List stuff (and reverted to raw arrays), I implemented the java.util.Arrays’ binarySearch algorithm, and redid some of the variables. The algorithm now loads about four times faster, but is still way too slow for my liking.</p>
<p>This algorithm could being enhanced further, but I spent around two hours myself on it and am quite satisfied with how far I got. The following is the code is my modified version of the algorithm. Ask any questions on the build and I will try to answer them as best I can. I hope you do well!</p>
<p>[code=Java]<br>
public class Approval {</p>
<pre><code>private int max, position;
private String[] choices;

public Approval(int numberOfChoices) {
	this.max = numberOfChoices + 1;
	this.choices = new String[0xffffffff &gt;&gt;&gt; (32 - numberOfChoices)];

	for (int i = 0; i &lt; numberOfChoices; i++)
		populate("", i);
}

private void populate(String orig, int end) {
	orig += (char)(end + 'A');

	for (int i = end + 1; i &lt; max; i++) {
		if (binarySearch(choices, orig) &lt; 0)
			choices[position++] = orig;

		populate(orig, i);
	}
}

/**
 * This is a copy of java.util.Arrays.binarySearch0() with
 * some appropriate modifications.
 */
private static int binarySearch(String[] a, String key) {
	int low = 0;
	int high = a.length - 1;

	while (low &lt;= high) {
		int mid = (low + high) &gt;&gt;&gt; 1;
		Comparable&lt;String&gt; midVal = (Comparable&lt;String&gt;)a[mid];
		int cmp;
		if (a[mid] == null)
			cmp = 1;
		else
			cmp = midVal.compareTo(key);

		if (cmp &lt; 0)
			low = mid + 1;
		else if (cmp &gt; 0)
			high = mid - 1;
		else
			return mid;
	}
	return -(low + 1);
}

public String[] getPossible() {
	return choices;
}
</code></pre>
<p>}<br>
[/code][/quote]</p>
<p>Lol, well Taharok, thanks for the lengthy reply, I’m glad you found this problem as fun as I did. As for the syntax errors, thats because I wrote my implementation in C# and then copied it over here and made it look like Java as best I could. But I missed a few places.</p>
<p>While I was in class, one of my class members was watching me and noticed how it matched the table. Which if you look at moparisthebest’s link, it makes since why.</p>
<p>I actually spent a whole class period and 3 hours at work implementing and creating my algorithm.</p>
<p>For your interest, My first version of the algorithm took 263 milliseconds to execute given 12 choices, my second only took 93 milliseconds to execute given the same number of choices. After that improvement I was fairly happy, and decided to go ahead and build.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/approval-voting-algorithm/230405/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/approval-voting-algorithm/230405/5</link>
        <pubDate>Wed, 10 Sep 2008 02:32:28 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-230405-5</guid>
        <source url="https://forum.moparisthebest.com/t/approval-voting-algorithm/230405.rss">Approval Voting Algorithm</source>
      </item>
      <item>
        <title>Approval Voting Algorithm</title>
        <dc:creator><![CDATA[@mod_taharok Taharok]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/mod_taharok">@mod_taharok</a> wrote:</p>
          <blockquote>
              <p>Alright, after looking through the code, I saw several initial errors. Firstly, the method [tt]clear()[/tt] inside of java.awt.List is started with a lowercase letter. Secondly, there is no such class as [tt]string[/tt], unless you made your own? Sorry for being a perfectionist in this instance, but that was uncompilable code.</p>
<p>Now, I started to rebuild the class (just because I had a hard time reading it), and these errors urged me to test out the class. So, after some minor modifications (none that would dramatically change the speed of the algorithm), I threw it in Eclipse and tested it out. What I got astounded me. Loading 5 different choices took around 2 milliseconds. 15 choices took around 30 seconds to load. So, after evaluating the algorithm, the urge to make major changes came about.</p>
<p>I started dumping output from the algorithm, such as the amount of milliseconds and nanoseconds it took to load, as well as the entries it produced and the number of entries it produced. Using these different numbers, I went from 0-15 choices, and copied down the number of entries each one produced. None of them made mathematical sense, until I compared them to my bitmask table. I don’t know if you meant to do this, but your algorithm perfectly aligns with the common bitmask table.</p>
<p>For example, if I were to use your algorithm to generate 5 candidates worth of choices, I would get exactly 31 results. The following chart can be used to evaluate different choice amounts:</p>
<pre><code class="lang-auto">Num bits | max value	| hex value
------------------------------------
1	 | 1		| 0x1
2	 | 3		| 0x3
3	 | 7		| 0x7
4	 | 15		| 0xF
5	 | 31		| 0x1F
6	 | 63		| 0x3F
7	 | 127		| 0x7F
8	 | 255		| 0xFF
------------------------------------
9	 | 511		| 0x1FF
10	 | 1023		| 0x3FF
11	 | 2047		| 0x7FF
12	 | 4095		| 0xFFF
13	 | 8191		| 0x1FFF
14	 | 16383	| 0x3FFF
15	 | 32767	| 0x7FFF
16	 | 65535	| 0xFFFF
------------------------------------
17	 | 131071	| 0x1FFFF
18	 | 262143	| 0x3FFFF
19	 | 524287	| 0x7FFFF
20	 | 1048575	| 0xFFFFF
21	 | 2097151	| 0x1FFFFF
22	 | 4194303	| 0x3FFFFF
23	 | 8388607	| 0x7FFFFF
24	 | 16777215	| 0xFFFFFF
------------------------------------
25	 | 33554431	| 0x1FFFFFF
26	 | 67108863	| 0x3FFFFFF
27	 | 134217727	| 0x7FFFFFF
28	 | 268435455	| 0xFFFFFFF
29	 | 536870911	| 0x1FFFFFFF
30	 | 1073741823	| 0x3FFFFFFF
31	 | 2147483647	| 0x7FFFFFFF
32	 | 4294967295	| 0xFFFFFFFF
------------------------------------</code></pre>
<p>As you can see, it must be coincidence. Anyway, the load time was way too slow for my liking. So, I spent the next half hour, or so, revising and rebuilding the code. I removed all the List stuff (and reverted to raw arrays), I implemented the java.util.Arrays’ binarySearch algorithm, and redid some of the variables. The algorithm now loads about four times faster, but is still way too slow for my liking.</p>
<p>This algorithm could being enhanced further, but I spent around two hours myself on it and am quite satisfied with how far I got. The following is the code is my modified version of the algorithm. Ask any questions on the build and I will try to answer them as best I can. I hope you do well!</p>
<pre><code class="lang-auto">public class Approval {

	private int max, position;
	private String[] choices;

	public Approval(int numberOfChoices) {
		this.max = numberOfChoices + 1;
		this.choices = new String[0xffffffff &gt;&gt;&gt; (32 - numberOfChoices)];

		for (int i = 0; i &lt; numberOfChoices; i++)
			populate("", i);
	}

	private void populate(String orig, int end) {
		orig += (char)(end + 'A');

		for (int i = end + 1; i &lt; max; i++) {
			if (binarySearch(choices, orig) &lt; 0)
				choices[position++] = orig;

			populate(orig, i);
		}
	}

	/**
	 * This is a copy of java.util.Arrays.binarySearch0() with
	 * some appropriate modifications.
	 */
	private static int binarySearch(String[] a, String key) {
		int low = 0;
		int high = a.length - 1;

		while (low &lt;= high) {
			int mid = (low + high) &gt;&gt;&gt; 1;
			Comparable&lt;String&gt; midVal = (Comparable&lt;String&gt;)a[mid];
			int cmp;
			if (a[mid] == null)
				cmp = 1;
			else
				cmp = midVal.compareTo(key);

			if (cmp &lt; 0)
				low = mid + 1;
			else if (cmp &gt; 0)
				high = mid - 1;
			else
				return mid;
		}
		return -(low + 1);
	}

	public String[] getPossible() {
		return choices;
	}

}</code></pre>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/approval-voting-algorithm/230405/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/approval-voting-algorithm/230405/4</link>
        <pubDate>Wed, 10 Sep 2008 02:31:14 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-230405-4</guid>
        <source url="https://forum.moparisthebest.com/t/approval-voting-algorithm/230405.rss">Approval Voting Algorithm</source>
      </item>
      <item>
        <title>Approval Voting Algorithm</title>
        <dc:creator><![CDATA[@frank frank_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/frank">@frank</a> wrote:</p>
          <blockquote>
              <ul>
<li>use a char instead of a String</li>
</ul>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/approval-voting-algorithm/230405/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/approval-voting-algorithm/230405/3</link>
        <pubDate>Tue, 09 Sep 2008 22:37:49 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-230405-3</guid>
        <source url="https://forum.moparisthebest.com/t/approval-voting-algorithm/230405.rss">Approval Voting Algorithm</source>
      </item>
      <item>
        <title>Approval Voting Algorithm</title>
        <dc:creator><![CDATA[@moparisthebest Moparisthebest]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/moparisthebest">@moparisthebest</a> wrote:</p>
          <blockquote>
              <p>So basically you want the power set of a set that is of ‘n’ (specified) length?</p>
<p>Edit:<br>
Maybe you don’t know what a power set is:<br>
<a href="http://www.mathsisfun.com/sets/power-set.html" class="onebox" target="_blank" rel="nofollow noopener">http://www.mathsisfun.com/sets/power-set.html</a></p>
<p>Check out the ‘It’s Binary!’ section on that page, that would be an excellent algorithm and is easy to implement.</p>
<p>here is a generator:<br>
<a href="http://www.mathsisfun.com/sets/power-set-maker.html" class="onebox" target="_blank" rel="nofollow noopener">http://www.mathsisfun.com/sets/power-set-maker.html</a></p>
<p>That is what you are after correct?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/approval-voting-algorithm/230405/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/approval-voting-algorithm/230405/2</link>
        <pubDate>Tue, 09 Sep 2008 21:25:07 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-230405-2</guid>
        <source url="https://forum.moparisthebest.com/t/approval-voting-algorithm/230405.rss">Approval Voting Algorithm</source>
      </item>
      <item>
        <title>Approval Voting Algorithm</title>
        <dc:creator><![CDATA[@meiscooldude meiscooldude]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/meiscooldude">@meiscooldude</a> wrote:</p>
          <blockquote>
              <p>Well, I need a few smart people to look over my Algorithm and see if they can improve it.</p>
<p>Let me give you some background first though.</p>
<p>In Approval Voting, you vote for… well, who you approve of. So, lets say Canidates A, B, C, and D are running for office, and you would’nt mind to see B, or C in office. But you would hate to see A, and D in office.</p>
<p>So on your ballot you would put</p>
<p>B, C</p>
<p>Very simple, you can vote for as many as you like, but you only put the ones you approve of. In my Discrete Math class we have to do a Project a semester, We have a big list of projects, and this is the only one that involved programming. So it caught my eye.</p>
<p>Anyway, The project was to “Create a program that allows you to enter in a number, then it will generate all possible ways of voting if approval voting is used. Use A, B, C, D… etc. as candidates.”</p>
<p>So, I wrote this little robust class for the project. I implemented it into a GUI, but this is where all the calculation is going on, so I want to see if I can make the calculation any faster.</p>
<p>This was my original code:</p>
<p>[code]/**</p>
<ul>
<li>Approval.java</li>
<li>by: Martin Stauber<br>
*/</li>
</ul>
<p>import java.util.ArrayList;<br>
import java.util.List;</p>
<p>public class Approval<br>
{</p>
<pre><code>public
Approval (int numberOfChoices)
{
	m_numberOfChoices = numberOfChoices;
	m_Max = numberOfChoices + 66;
	
	for(int i = 65; i &lt; 65 + numberOfChoices; i++)
		Populate("", i);
}

private void
Populate (String orig, int end)
{
	orig += (char)end;
	
	for(int i = end+1; i &lt; m_Max; i++)
	{
		if(!m_Choices.contains(orig))
			m_Choices.add(orig);
		Populate(orig, i);
	}
}

public List&lt;String&gt;
getPossible ()
{
	return m_Choices;
}

private int m_numberOfChoices;
private int m_Max;
private List&lt;String&gt; m_Choices = new ArrayList&lt;String&gt;();
</code></pre>
<p>}[/code]</p>
<p>I made it quite a bit faster by adding a temporary List to cut down on the linear searching.</p>
<p>[code]class Approval<br>
{<br>
public<br>
Approval(int numberOfChoices)<br>
{<br>
m_numberOfChoices = numberOfChoices;<br>
m_Max = numberOfChoices + 66;</p>
<pre><code>  for (int i = 65; i &lt; 65 + numberOfChoices; i++)
  {
     Populate("", i);
     m_temp.Clear();
  }
</code></pre>
<p>}</p>
<p>private void<br>
Populate (string orig, int end)<br>
{<br>
orig += (char)end;</p>
<pre><code>  for (int i = end + 1; i &lt; m_Max; i++)
  {
     if (!m_temp.contains(orig))
     {
        m_temp.add(orig);
        m_Choices.add(orig);
     }
     Populate(orig, i);
  }
</code></pre>
<p>}</p>
<p>public List<br>
GetPossible ()<br>
{<br>
return m_Choices;<br>
}</p>
<p>private int m_numberOfChoices;<br>
private int m_Max;<br>
private List m_Choices = new ArrayList ();<br>
private List m_temp = new ArrayList ();<br>
}[/code]</p>
<p>If you can find anything I can change to make it go faster, please tell me.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/approval-voting-algorithm/230405/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/approval-voting-algorithm/230405/1</link>
        <pubDate>Tue, 09 Sep 2008 20:41:47 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-230405-1</guid>
        <source url="https://forum.moparisthebest.com/t/approval-voting-algorithm/230405.rss">Approval Voting Algorithm</source>
      </item>
  </channel>
</rss>
