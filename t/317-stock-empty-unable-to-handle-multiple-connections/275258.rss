<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>317 - &quot;Stock Empty&quot;... Unable to handle multiple connections</title>
    <link>https://forum.moparisthebest.com/t/317-stock-empty-unable-to-handle-multiple-connections/275258</link>
    <description>Well, I knew I&#39;d be stumped at a 317 base again, and I was right. I&#39;ve tried adding the server allowing multiple connections. I got far, and it should work, but apparently something isn&#39;t right when the client is handling packets (Incoming, the loop). It&#39;s being cause from the [i]stream.frameStackPtr[/i] being less than 0 in the [i]stream.endFrameVarSize[/i] method. Why the frameStackPtr is less than 0, I&#39;m not sure.

This same problem persists even when logging out (Yes, the proper way... Hopefully) and trying to log in again. I&#39;ve looked at BlackScape and saw I was doing basically the same thing that server was doing.

If it helps at all, here&#39;s what method is called on a new connection.

[code]	public static void newPlayerConnected(java.net.Socket s)
	{
		for (int i = 0; i &lt; maxPlayers; i++)
		{
			if (Players[i] == null)
			{
				newPlayerSlot = i;
				i = maxPlayers + 1;
			}
		}

		userSlot = newPlayerSlot;
		clientHandler c = new clientHandler(s, newPlayerSlot);
		(new Thread(c)).start();
	}[/code]Yes, I got the general idea of it from the server as well... Am I just supposed to know this stuff (Don&#39;t comment...)?

I&#39;m calling it when a connection is receieved. It all works fine on the first log in; the login actions, my player class variables, etc... But I&#39;m still stumped on the cause of this error.

And if it helps much, I&#39;m basically using the same login method (Why wouldn&#39;t you?... Again, don&#39;t comment) as the original wL source. It&#39;s just edited a bit to fit in my class split-up.

Thanks for you help,

~Lin</description>
    
    <lastBuildDate>Fri, 24 Apr 2009 07:04:34 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/317-stock-empty-unable-to-handle-multiple-connections/275258.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>317 - &quot;Stock Empty&quot;... Unable to handle multiple connections</title>
        <dc:creator><![CDATA[@Lin Lin]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/lin">@Lin</a> wrote:</p>
          <blockquote>
              <p>Well, I knew I’d be stumped at a 317 base again, and I was right. I’ve tried adding the server allowing multiple connections. I got far, and it should work, but apparently something isn’t right when the client is handling packets (Incoming, the loop). It’s being cause from the <span class="bbcode-i">stream.frameStackPtr</span> being less than 0 in the <span class="bbcode-i">stream.endFrameVarSize</span> method. Why the frameStackPtr is less than 0, I’m not sure.</p>
<p>This same problem persists even when logging out (Yes, the proper way… Hopefully) and trying to log in again. I’ve looked at BlackScape and saw I was doing basically the same thing that server was doing.</p>
<p>If it helps at all, here’s what method is called on a new connection.</p>
<p>[code]	public static void newPlayerConnected(java.net.Socket s)<br>
{<br>
for (int i = 0; i &lt; maxPlayers; i++)<br>
{<br>
if (Players[i] == null)<br>
{<br>
newPlayerSlot = i;<br>
i = maxPlayers + 1;<br>
}<br>
}</p>
<pre><code>	userSlot = newPlayerSlot;
	clientHandler c = new clientHandler(s, newPlayerSlot);
	(new Thread(c)).start();
}[/code]Yes, I got the general idea of it from the server as well... Am I just supposed to know this stuff (Don't comment...)?
</code></pre>
<p>I’m calling it when a connection is receieved. It all works fine on the first log in; the login actions, my player class variables, etc… But I’m still stumped on the cause of this error.</p>
<p>And if it helps much, I’m basically using the same login method (Why wouldn’t you?.. Again, don’t comment) as the original wL source. It’s just edited a bit to fit in my class split-up.</p>
<p>Thanks for you help,</p>
<p>~Lin</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-stock-empty-unable-to-handle-multiple-connections/275258/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-stock-empty-unable-to-handle-multiple-connections/275258/1</link>
        <pubDate>Fri, 24 Apr 2009 07:04:34 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-275258-1</guid>
        <source url="https://forum.moparisthebest.com/t/317-stock-empty-unable-to-handle-multiple-connections/275258.rss">317 - &quot;Stock Empty&quot;... Unable to handle multiple connections</source>
      </item>
  </channel>
</rss>
