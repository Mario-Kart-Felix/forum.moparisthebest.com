<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/prevent-a-game-from-setting-discl-exclusive/458249 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 21:31:19 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Prevent a game from setting DISCL_EXCLUSIVE - General Programming - moparisthebest.com</title>
    <meta name="description" content="just wondering what the simplest way to prevent a game from setting DISCL_EXCLUSIVE on the keyboard device is. 

i was just going to write IDirectInput8 and IDirectInputDevice8 wrappers then hook DirectInput8Create and s&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="458249.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Prevent a game from setting DISCL_EXCLUSIVE&#39;" href="458249.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/prevent-a-game-from-setting-discl-exclusive/458249" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/prevent-a-game-from-setting-discl-exclusive/458249" />
<meta property="og:title" content="Prevent a game from setting DISCL_EXCLUSIVE" />
<meta name="twitter:title" content="Prevent a game from setting DISCL_EXCLUSIVE" />
<meta property="og:description" content="just wondering what the simplest way to prevent a game from setting DISCL_EXCLUSIVE on the keyboard device is.  i was just going to write IDirectInput8 and IDirectInputDevice8 wrappers then hook DirectInput8Create and supply my wrappers then just in SetCooperativeLevel for the keyboard device just set DISCL_NONEXCLUSIVE.  is there any simpler way to go about this? i was also thinking maybe find the keyboard’s IDirectInputDevice8 pointer and just hook SetCooperativeLevel then see if ecx is the ke..." />
<meta name="twitter:description" content="just wondering what the simplest way to prevent a game from setting DISCL_EXCLUSIVE on the keyboard device is.  i was just going to write IDirectInput8 and IDirectInputDevice8 wrappers then hook DirectInput8Create and supply my wrappers then just in SetCooperativeLevel for the keyboard device just set DISCL_NONEXCLUSIVE.  is there any simpler way to go about this? i was also thinking maybe find the keyboard’s IDirectInputDevice8 pointer and just hook SetCooperativeLevel then see if ecx is the ke..." />
<meta property="article:published_time" content="2012-09-03T21:23:58+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="458249.html">Prevent a game from setting DISCL_EXCLUSIVE</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/general-programming.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>General Programming</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/_bool.html'><span itemprop='name'>_bool</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-09-03T21:23:58Z'>
            <time itemprop='dateModified' datetime='2016-08-03T23:54:35Z' class='post-time'>
              August 3, 2016, 11:54pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>just wondering what the simplest way to prevent a game from setting DISCL_EXCLUSIVE on the keyboard device is.</p>
<p>i was just going to write IDirectInput8 and IDirectInputDevice8 wrappers then hook DirectInput8Create and supply my wrappers then just in SetCooperativeLevel for the keyboard device just set DISCL_NONEXCLUSIVE.</p>
<p>is there any simpler way to go about this? i was also thinking maybe find the keyboard’s IDirectInputDevice8 pointer and just hook SetCooperativeLevel then see if ecx is the keyboard and then set DISCL_NONEXCLUSIVE there.</p>
      </div>

      <meta itemprop='headline' content='Prevent a game from setting DISCL_EXCLUSIVE'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/nade.html'><span itemprop='name'>nade</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-10-11T16:22:03Z'>
            <time itemprop='dateModified' datetime='2016-08-04T00:38:01Z' class='post-time'>
              August 4, 2016, 12:38am
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Wrote this in notepad.</p>
<p>inb4, calling convention is thiscall and not stdcall</p>
<pre><code class="lang-auto">typedef HRESULT* ( __stdcall tSetCooperativeLevel )( HWND hwnd, DWORD dwFlags );
const HRESULT*  __stdcall hkSetCooperativeLevel( HWND hwnd, DWORD dwFlags );
tSetCooperativeLevel oSetCooperativeLevel = NULL;

printf( "Hook\t\t%p-&gt;%p\n", dwFuncAddress, ( PBYTE )&amp;hkSetCooperativeLevel );
oSetCooperativeLevel = ( tSetCooperativeLevel )DetourFunction( dwFuncAddress, ( PBYTE )&amp;hkSetCooperativeLevel )


HRESULT__stdcall hkSetCooperativeLevel( HWND hwnd, DWORD dwFlags )
{
    __asm pushad;

    // change dwFlags here

    __asm popad;
    return oSetCooperativeLevel( hwnd, dwFlags );
}</code></pre>
<p>using Microsoft Detours 1.5. Probably is thiscall actually. No worries though, if it is you can convert it to fastcall.</p>
<p>Change stdcall to fastcall in typedefs and add<br>
void *thisptr, void *unknown</p>
<p>as the first params</p>
      </div>

      <meta itemprop='headline' content='Prevent a game from setting DISCL_EXCLUSIVE'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/_bool.html'><span itemprop='name'>_bool</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-10-12T01:08:50Z'>
            <time itemprop='dateModified' datetime='2016-08-04T00:38:25Z' class='post-time'>
              August 4, 2016, 12:38am
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“nade, post:2, topic:458249”]Wrote this in notepad.</p>
<p>inb4, calling convention is thiscall and not stdcall</p>
<pre><code class="lang-auto">typedef HRESULT* ( __stdcall tSetCooperativeLevel )( HWND hwnd, DWORD dwFlags );
const HRESULT*  __stdcall hkSetCooperativeLevel( HWND hwnd, DWORD dwFlags );
tSetCooperativeLevel oSetCooperativeLevel = NULL;

printf( "Hook\t\t%p-&gt;%p\n", dwFuncAddress, ( PBYTE )&amp;hkSetCooperativeLevel );
oSetCooperativeLevel = ( tSetCooperativeLevel )DetourFunction( dwFuncAddress, ( PBYTE )&amp;hkSetCooperativeLevel )


HRESULT__stdcall hkSetCooperativeLevel( HWND hwnd, DWORD dwFlags )
{
    __asm pushad;

    // change dwFlags here

    __asm popad;
    return oSetCooperativeLevel( hwnd, dwFlags );
}</code></pre>
<p>using Microsoft Detours 1.5. Probably is thiscall actually. No worries though, if it is you can convert it to fastcall.</p>
<p>Change stdcall to fastcall in typedefs and add<br>
void *thisptr, void *unknown</p>
<p>as the first params[/quote]</p>
<p>that would apply your flags to all devices that call SetCooperativeLevel unless you locate the IDirectInputDevice8 pointer (in my case I only wanted the keyboard device changed). I ended up just writing a DInput8 wrapper as I wanted to tinker with device state and the keyboard’s buffered data. Also, referring the second param in your fastcall function, unknown is an inadequate name considering it’s known that it is the value passed in EDX.</p>
      </div>

      <meta itemprop='headline' content='Prevent a game from setting DISCL_EXCLUSIVE'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/nade.html'><span itemprop='name'>nade</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-10-13T19:55:48Z'>
            <time itemprop='dateModified' datetime='2016-08-04T00:39:26Z' class='post-time'>
              August 4, 2016, 12:39am
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Thanks would have been enough.</p>
      </div>

      <meta itemprop='headline' content='Prevent a game from setting DISCL_EXCLUSIVE'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/slavemaster.html'><span itemprop='name'>slavemaster</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-10-19T00:39:36Z'>
            <time itemprop='dateModified' datetime='2016-08-04T00:44:24Z' class='post-time'>
              August 4, 2016, 12:44am
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Yes but then he couldn’t show off about knowing an x86 register.</p>
      </div>

      <meta itemprop='headline' content='Prevent a game from setting DISCL_EXCLUSIVE'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/_bool.html'><span itemprop='name'>_bool</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-11-17T05:51:47Z'>
            <time itemprop='dateModified' datetime='2016-08-04T01:13:35Z' class='post-time'>
              August 4, 2016,  1:13am
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote quote-modified" data-post="5" data-topic="458249">
<div class="title">
<div class="quote-controls"></div>
 veer:</div>
<blockquote>
<p>Yes but then he couldn’t show off about knowing an x86 register.</p>
</blockquote>
</aside>
<p>my point was he’s being one of those gay useless gamedeception/uc-forum faggots who just writes a bunch of bullshit assuming everyone is a dickweed turtle shit instead of answering simple questions.</p>
      </div>

      <meta itemprop='headline' content='Prevent a game from setting DISCL_EXCLUSIVE'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/nade.html'><span itemprop='name'>nade</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-11-21T17:07:16Z'>
            <time itemprop='dateModified' datetime='2016-08-04T01:17:52Z' class='post-time'>
              August 4, 2016,  1:17am
            </time>
        <span itemprop='position'>#7</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <blockquote>who just writes a bunch of bullshit assuming everyone is a dickweed turtle shit instead of answering simple questions.</blockquote>
<p>You must have a hard time controlling your emotions. If hormonal mood swings get the best of you, here is a menstrual calendar app that might help: <a href="https://itunes.apple.com/ca/app/iperiod-free-period-menstrual/id340757216?mt=8" rel="nofollow noopener">https://itunes.apple.com/ca/app/iperiod-free-period-menstrual/id340757216?mt=8</a></p>
<p>Also my solution was better.</p>
      </div>

      <meta itemprop='headline' content='Prevent a game from setting DISCL_EXCLUSIVE'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/_bool.html'><span itemprop='name'>_bool</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-11-21T19:48:38Z'>
            <time itemprop='dateModified' datetime='2016-08-04T01:18:01Z' class='post-time'>
              August 4, 2016,  1:18am
            </time>
        <span itemprop='position'>#8</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“nade, post:7, topic:458249”][quote]<br>
who just writes a bunch of bullshit assuming everyone is a dickweed turtle shit instead of answering simple questions.<br>
[/quote]</p>
<p>You must have a hard time controlling your emotions. If hormonal mood swings get the best of you, here is a menstrual calendar app that might help: <a href="https://itunes.apple.com/ca/app/iperiod-free-period-menstrual/id340757216?mt=8" rel="nofollow noopener">https://itunes.apple.com/ca/app/iperiod-free-period-menstrual/id340757216?mt=8</a></p>
<p>Also my solution was better.[/quote]<br>
your solution was what i explained in the second part without the device check. you must have a hard time reading.</p>
      </div>

      <meta itemprop='headline' content='Prevent a game from setting DISCL_EXCLUSIVE'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/prevent-a-game-from-setting-discl-exclusive/458249 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 21:31:20 GMT -->
</html>
