<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Prevent a game from setting DISCL_EXCLUSIVE</title>
    <link>https://forum.moparisthebest.com/t/prevent-a-game-from-setting-discl-exclusive/458249</link>
    <description>just wondering what the simplest way to prevent a game from setting DISCL_EXCLUSIVE on the keyboard device is.

i was just going to write IDirectInput8 and IDirectInputDevice8 wrappers then hook DirectInput8Create and supply my wrappers then just in SetCooperativeLevel for the keyboard device just set DISCL_NONEXCLUSIVE.

is there any simpler way to go about this? i was also thinking maybe find the keyboard&#39;s IDirectInputDevice8 pointer and just hook SetCooperativeLevel then see if ecx is the keyboard and then set DISCL_NONEXCLUSIVE there.</description>
    
    <lastBuildDate>Wed, 21 Nov 2012 19:48:38 +0000</lastBuildDate>
    <category>General Programming</category>
    <atom:link href="https://forum.moparisthebest.com/t/prevent-a-game-from-setting-discl-exclusive/458249.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Prevent a game from setting DISCL_EXCLUSIVE</title>
        <dc:creator><![CDATA[@_bool]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/_bool">@_bool</a> wrote:</p>
          <blockquote>
              <p>[quote=“nade, post:7, topic:458249”][quote]<br>
who just writes a bunch of bullshit assuming everyone is a dickweed turtle shit instead of answering simple questions.<br>
[/quote]</p>
<p>You must have a hard time controlling your emotions. If hormonal mood swings get the best of you, here is a menstrual calendar app that might help: <a href="https://itunes.apple.com/ca/app/iperiod-free-period-menstrual/id340757216?mt=8" rel="nofollow noopener">https://itunes.apple.com/ca/app/iperiod-free-period-menstrual/id340757216?mt=8</a></p>
<p>Also my solution was better.[/quote]<br>
your solution was what i explained in the second part without the device check. you must have a hard time reading.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/prevent-a-game-from-setting-discl-exclusive/458249/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/prevent-a-game-from-setting-discl-exclusive/458249/8</link>
        <pubDate>Wed, 21 Nov 2012 19:48:38 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-458249-8</guid>
        <source url="https://forum.moparisthebest.com/t/prevent-a-game-from-setting-discl-exclusive/458249.rss">Prevent a game from setting DISCL_EXCLUSIVE</source>
      </item>
      <item>
        <title>Prevent a game from setting DISCL_EXCLUSIVE</title>
        <dc:creator><![CDATA[@nade nade]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/nade">@nade</a> wrote:</p>
          <blockquote>
              <blockquote>who just writes a bunch of bullshit assuming everyone is a dickweed turtle shit instead of answering simple questions.</blockquote>
<p>You must have a hard time controlling your emotions. If hormonal mood swings get the best of you, here is a menstrual calendar app that might help: <a href="https://itunes.apple.com/ca/app/iperiod-free-period-menstrual/id340757216?mt=8" rel="nofollow noopener">https://itunes.apple.com/ca/app/iperiod-free-period-menstrual/id340757216?mt=8</a></p>
<p>Also my solution was better.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/prevent-a-game-from-setting-discl-exclusive/458249/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/prevent-a-game-from-setting-discl-exclusive/458249/7</link>
        <pubDate>Wed, 21 Nov 2012 17:07:16 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-458249-7</guid>
        <source url="https://forum.moparisthebest.com/t/prevent-a-game-from-setting-discl-exclusive/458249.rss">Prevent a game from setting DISCL_EXCLUSIVE</source>
      </item>
      <item>
        <title>Prevent a game from setting DISCL_EXCLUSIVE</title>
        <dc:creator><![CDATA[@_bool]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/_bool">@_bool</a> wrote:</p>
          <blockquote>
              <aside class="quote quote-modified" data-post="5" data-topic="458249">
<div class="title">
<div class="quote-controls"></div>
 veer:</div>
<blockquote>
<p>Yes but then he couldn’t show off about knowing an x86 register.</p>
</blockquote>
</aside>
<p>my point was he’s being one of those gay useless gamedeception/uc-forum faggots who just writes a bunch of bullshit assuming everyone is a dickweed turtle shit instead of answering simple questions.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/prevent-a-game-from-setting-discl-exclusive/458249/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/prevent-a-game-from-setting-discl-exclusive/458249/6</link>
        <pubDate>Sat, 17 Nov 2012 05:51:47 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-458249-6</guid>
        <source url="https://forum.moparisthebest.com/t/prevent-a-game-from-setting-discl-exclusive/458249.rss">Prevent a game from setting DISCL_EXCLUSIVE</source>
      </item>
      <item>
        <title>Prevent a game from setting DISCL_EXCLUSIVE</title>
        <dc:creator><![CDATA[@slavemaster veer]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/slavemaster">@slavemaster</a> wrote:</p>
          <blockquote>
              <p>Yes but then he couldn’t show off about knowing an x86 register.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/prevent-a-game-from-setting-discl-exclusive/458249/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/prevent-a-game-from-setting-discl-exclusive/458249/5</link>
        <pubDate>Fri, 19 Oct 2012 00:39:36 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-458249-5</guid>
        <source url="https://forum.moparisthebest.com/t/prevent-a-game-from-setting-discl-exclusive/458249.rss">Prevent a game from setting DISCL_EXCLUSIVE</source>
      </item>
      <item>
        <title>Prevent a game from setting DISCL_EXCLUSIVE</title>
        <dc:creator><![CDATA[@nade nade]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/nade">@nade</a> wrote:</p>
          <blockquote>
              <p>Thanks would have been enough.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/prevent-a-game-from-setting-discl-exclusive/458249/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/prevent-a-game-from-setting-discl-exclusive/458249/4</link>
        <pubDate>Sat, 13 Oct 2012 19:55:48 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-458249-4</guid>
        <source url="https://forum.moparisthebest.com/t/prevent-a-game-from-setting-discl-exclusive/458249.rss">Prevent a game from setting DISCL_EXCLUSIVE</source>
      </item>
      <item>
        <title>Prevent a game from setting DISCL_EXCLUSIVE</title>
        <dc:creator><![CDATA[@_bool]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/_bool">@_bool</a> wrote:</p>
          <blockquote>
              <p>[quote=“nade, post:2, topic:458249”]Wrote this in notepad.</p>
<p>inb4, calling convention is thiscall and not stdcall</p>
<pre><code class="lang-auto">typedef HRESULT* ( __stdcall tSetCooperativeLevel )( HWND hwnd, DWORD dwFlags );
const HRESULT*  __stdcall hkSetCooperativeLevel( HWND hwnd, DWORD dwFlags );
tSetCooperativeLevel oSetCooperativeLevel = NULL;

printf( "Hook\t\t%p-&gt;%p\n", dwFuncAddress, ( PBYTE )&amp;hkSetCooperativeLevel );
oSetCooperativeLevel = ( tSetCooperativeLevel )DetourFunction( dwFuncAddress, ( PBYTE )&amp;hkSetCooperativeLevel )


HRESULT__stdcall hkSetCooperativeLevel( HWND hwnd, DWORD dwFlags )
{
    __asm pushad;

    // change dwFlags here

    __asm popad;
    return oSetCooperativeLevel( hwnd, dwFlags );
}</code></pre>
<p>using Microsoft Detours 1.5. Probably is thiscall actually. No worries though, if it is you can convert it to fastcall.</p>
<p>Change stdcall to fastcall in typedefs and add<br>
void *thisptr, void *unknown</p>
<p>as the first params[/quote]</p>
<p>that would apply your flags to all devices that call SetCooperativeLevel unless you locate the IDirectInputDevice8 pointer (in my case I only wanted the keyboard device changed). I ended up just writing a DInput8 wrapper as I wanted to tinker with device state and the keyboard’s buffered data. Also, referring the second param in your fastcall function, unknown is an inadequate name considering it’s known that it is the value passed in EDX.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/prevent-a-game-from-setting-discl-exclusive/458249/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/prevent-a-game-from-setting-discl-exclusive/458249/3</link>
        <pubDate>Fri, 12 Oct 2012 01:08:50 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-458249-3</guid>
        <source url="https://forum.moparisthebest.com/t/prevent-a-game-from-setting-discl-exclusive/458249.rss">Prevent a game from setting DISCL_EXCLUSIVE</source>
      </item>
      <item>
        <title>Prevent a game from setting DISCL_EXCLUSIVE</title>
        <dc:creator><![CDATA[@nade nade]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/nade">@nade</a> wrote:</p>
          <blockquote>
              <p>Wrote this in notepad.</p>
<p>inb4, calling convention is thiscall and not stdcall</p>
<pre><code class="lang-auto">typedef HRESULT* ( __stdcall tSetCooperativeLevel )( HWND hwnd, DWORD dwFlags );
const HRESULT*  __stdcall hkSetCooperativeLevel( HWND hwnd, DWORD dwFlags );
tSetCooperativeLevel oSetCooperativeLevel = NULL;

printf( "Hook\t\t%p-&gt;%p\n", dwFuncAddress, ( PBYTE )&amp;hkSetCooperativeLevel );
oSetCooperativeLevel = ( tSetCooperativeLevel )DetourFunction( dwFuncAddress, ( PBYTE )&amp;hkSetCooperativeLevel )


HRESULT__stdcall hkSetCooperativeLevel( HWND hwnd, DWORD dwFlags )
{
    __asm pushad;

    // change dwFlags here

    __asm popad;
    return oSetCooperativeLevel( hwnd, dwFlags );
}</code></pre>
<p>using Microsoft Detours 1.5. Probably is thiscall actually. No worries though, if it is you can convert it to fastcall.</p>
<p>Change stdcall to fastcall in typedefs and add<br>
void *thisptr, void *unknown</p>
<p>as the first params</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/prevent-a-game-from-setting-discl-exclusive/458249/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/prevent-a-game-from-setting-discl-exclusive/458249/2</link>
        <pubDate>Thu, 11 Oct 2012 16:22:03 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-458249-2</guid>
        <source url="https://forum.moparisthebest.com/t/prevent-a-game-from-setting-discl-exclusive/458249.rss">Prevent a game from setting DISCL_EXCLUSIVE</source>
      </item>
      <item>
        <title>Prevent a game from setting DISCL_EXCLUSIVE</title>
        <dc:creator><![CDATA[@_bool]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/_bool">@_bool</a> wrote:</p>
          <blockquote>
              <p>just wondering what the simplest way to prevent a game from setting DISCL_EXCLUSIVE on the keyboard device is.</p>
<p>i was just going to write IDirectInput8 and IDirectInputDevice8 wrappers then hook DirectInput8Create and supply my wrappers then just in SetCooperativeLevel for the keyboard device just set DISCL_NONEXCLUSIVE.</p>
<p>is there any simpler way to go about this? i was also thinking maybe find the keyboard’s IDirectInputDevice8 pointer and just hook SetCooperativeLevel then see if ecx is the keyboard and then set DISCL_NONEXCLUSIVE there.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/prevent-a-game-from-setting-discl-exclusive/458249/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/prevent-a-game-from-setting-discl-exclusive/458249/1</link>
        <pubDate>Mon, 03 Sep 2012 21:23:58 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-458249-1</guid>
        <source url="https://forum.moparisthebest.com/t/prevent-a-game-from-setting-discl-exclusive/458249.rss">Prevent a game from setting DISCL_EXCLUSIVE</source>
      </item>
  </channel>
</rss>
