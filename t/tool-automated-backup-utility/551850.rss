<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>[Tool] Automated Backup Utility</title>
    <link>https://forum.moparisthebest.com/t/tool-automated-backup-utility/551850</link>
    <description>[size=14pt][u][b]Travis&#39; Automated Backup Utility[/b][/u][/size]
Here&#39;s another quick tool I made, this time for server owners and developers.

[u][b]What it does[/b][/u]
It simply backs up the provided directory to a zip file, removing the need for manual or integrated backup methods.
While it&#39;s designed with backing up the player files in mind, you can really backup anything you&#39;d like with it. Databases, Logs, whatever suits your purposes. So long as it&#39;s all saved in a local directory, it should be able to read it.

[u][b]Why it&#39;s needed[/b][/u]
Many servers that are smaller do not keep backups of their players, and if they do, it&#39;s typically done manually about once a day, meaning it&#39;s still possible to lose an entire day worth of work(or sometimes having to start completely over) just due to the host having to switch VPS providers. This has happened far too many times for me, whether it be an economy reset or switching hosts, it&#39;s been the reason a lot of people quit a server.
This ensure that there will always be an up-to-date backup available for the host to use, so long as this is used properly.

[u][b]How to use it[/b][/u]
It takes 2 arguments, so you should set it up to run through a .bat file.
1. The directory you wish to backup, I.E the folder with all of your player files in it
2. The rate of backups in minutes

Example: RSPSABU &quot;c:/rsps/data/players&quot; 20
Will backup the directory c:/rsps/data/players to a zip file every 20 minutes

[b]If you&#39;re hosting on a VPS, it is [u]highly[/u] recommended that you keep this program in a cloud storage folder such as google drive to ensure that you can get to the backups even if your VPS goes down or service stops![/b]

[u]Disk Space[/u]
Keep in mind how much space you have so you don&#39;t go too crazy with the amount of backups. If you have about 3-4mb of players, you&#39;ll only use up about 500mb of space per month, but with 20mb of players you&#39;ll use up almost 4gb of space in the same time span.
I personally recommend one backup every 4 hours, that gives you 6 backups a day, however it just depends on how much you have to work with.

[u][b]Download[/b][/u]
Requires the .NET framework 4.5.1 found [url=https://msdn.microsoft.com/en-us/vstudio/aa496123]here[/url]
Virus Scan: http://bit.ly/1RSfjov

Uppit: [URL=http://upx.nz/Se5Iha]RSPSABU.zip - 3 KB[/URL]

[u][b]Source[/b][/u]
The source is small enough to fit in a code block since it was a single class.
Written in C# using Visual Studio
[spoiler=Source]
Add two references: System.IO.Compression and System.IO.Compression.FileSystem
[code]
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.IO;
using System.IO.Compression;
using System.Threading;

namespace RSPSABU
{
    class RSPSABU
    {
        static string _PlayerDir;
        static int _BackupTime;
        static string _CurTime;
        static void Main(string[] args)
        {
            try
            {
                _PlayerDir = args[0];
                _BackupTime = Convert.ToInt32(args[1]);
            }
            catch(Exception e)
            {
                Console.WriteLine(&quot;Invalid application arguments, see included text file for usage information&quot;);
                Console.Write(&quot;Press any key to exit&quot;);
                Console.ReadKey();
                Environment.Exit(1);
            }
            Console.Title = &quot;Automated Backup Utility&quot;;
            Console.WriteLine(&quot;RuneScape Private Server Automated Backup Utility&quot;);
            Console.WriteLine(&quot;Written by CSharp95/Travis, contact at traviscondren95@gmail.com&quot;);
            Thread.Sleep(3000);
            Console.Clear();
            Console.WriteLine(&quot;Directory {0} will be archived every {1} minutes&quot;, _PlayerDir, _BackupTime);
            int _l = 0;
            int _n;
            Console.WriteLine(&quot;Starting backup loop&quot;);
            while (_l &lt;= _BackupTime)
            {
                if (_l == _BackupTime)
                {
                    _CurTime = GetDate();
                    Console.WriteLine(&quot;Backing up &quot; + _CurTime);
                    CompressFile(_PlayerDir);
                    _l = 0;
                }
                else
                {
                    _n = _BackupTime - _l;
                    Console.WriteLine(&quot;Next backup in &quot; + _n + &quot; minutes&quot;);
                    _l++;
                    SleepThread(1);
                }
            }
        }
        static string GetDate()
        {
            string _result = DateTime.Now.ToString(&quot;yyyy-MM-dd hh-mm&quot;);
            return _result;
        }
        static void CompressFile(string _file)
        {
            try
            {
                ZipFile.CreateFromDirectory(_PlayerDir, _CurTime + &quot;.zip&quot;);
            }
            catch (Exception e)
            {
                Console.WriteLine(e.Message);
            }
        }
        static void SleepThread(int _time)
        {
            _time = _time * 60000;
            Thread.Sleep(_time);
        }
    }
}

[/code]
Not the cleanest but there&#39;s not much to learn from here, so I decided against commenting it.
[/spoiler]

As always, please leave feedback, good or bad it&#39;s appreciated.</description>
    
    <lastBuildDate>Sat, 06 Jun 2015 19:47:30 +0000</lastBuildDate>
    <category>General Discussion</category>
    <atom:link href="https://forum.moparisthebest.com/t/tool-automated-backup-utility/551850.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>[Tool] Automated Backup Utility</title>
        <dc:creator><![CDATA[@bowserjr2 Bowser jr]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/bowserjr2">@bowserjr2</a> wrote:</p>
          <blockquote>
              <p>If you want to save space, don’t make copies of something that hasn’t changed since last the backup. You’ll just need to make full copies once in a while if you want people to be able to delete old backups.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/tool-automated-backup-utility/551850/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/tool-automated-backup-utility/551850/8</link>
        <pubDate>Sat, 06 Jun 2015 19:47:30 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-551850-8</guid>
        <source url="https://forum.moparisthebest.com/t/tool-automated-backup-utility/551850.rss">[Tool] Automated Backup Utility</source>
      </item>
      <item>
        <title>[Tool] Automated Backup Utility</title>
        <dc:creator><![CDATA[@CSharp95 CSharp95]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/csharp95">@CSharp95</a> wrote:</p>
          <blockquote>
              <p>[quote=“Pure_, post:5, topic:551850”]Feedback:</p>
<p>[ul][li]Conventions pls[/li]<br>
[li]How is the user going to terminate your software without going into task manager? - Writing this in java so that it can be implemented into the server as a library may be a better idea to prevent this.[/li]<br>
[li]Note: that since your backing up isnt async, the delay wont actually be 30mins but a little greater[/li][/ul]</p>
<p>Your logic for waiting is not very pretty, you have two reasonable options:</p>
<ol>
<li>Simplistic - note how it trims your logic by a lot</li>
</ol>
<p>[code=csharp]…</p>
<p>while (Running) {<br>
Thread.Sleep(backupDelay); // ie 30 mins would be 30 * 60 * 1000<br>
Backup();<br>
}</p>
<p>…[/code]</p>
<ol start="2">
<li>Timer - this specific implementation runs on a background thread so it wont lock up your application either (note other classes called Timer exist and may behave differently)<br>
<a href="https://msdn.microsoft.com/en-us/library/system.threading.timer%28v=vs.110%29.aspx" data-bbcode="true" rel="nofollow noopener">System.Threading.Timer</a> - <a href="http://stackoverflow.com/questions/4409558/c-sharp-timer-run-every-5th-minute" data-bbcode="true" rel="nofollow noopener">example</a>[/quote]<br>
Thanks for the feedback.<br>
A lot of it simply comes from me being a rather lousy programmer and this being more of a 20 minute project as compared to something I’ve been developing for a while. I plan to improve it and tweak it some until I’m happy with it.<br>
I never thought of making the backup loop async, or a way to exit the application beyond closing the console. I’ll fix that up after I finish my lunch.</li>
</ol>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/tool-automated-backup-utility/551850/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/tool-automated-backup-utility/551850/7</link>
        <pubDate>Sat, 06 Jun 2015 17:32:53 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-551850-7</guid>
        <source url="https://forum.moparisthebest.com/t/tool-automated-backup-utility/551850.rss">[Tool] Automated Backup Utility</source>
      </item>
      <item>
        <title>[Tool] Automated Backup Utility</title>
        <dc:creator><![CDATA[@haviland4 haviland4]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/haviland4">@haviland4</a> wrote:</p>
          <blockquote>
              <p>Awesome work i will probably use this  <img src="https://forum.moparisthebest.com/images/emoji/twitter/wink.png?v=5" title=":wink:" class="emoji" alt=":wink:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/tool-automated-backup-utility/551850/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/tool-automated-backup-utility/551850/6</link>
        <pubDate>Sat, 06 Jun 2015 15:26:40 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-551850-6</guid>
        <source url="https://forum.moparisthebest.com/t/tool-automated-backup-utility/551850.rss">[Tool] Automated Backup Utility</source>
      </item>
      <item>
        <title>[Tool] Automated Backup Utility</title>
        <dc:creator><![CDATA[@pure2ownage Pure_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/pure2ownage">@pure2ownage</a> wrote:</p>
          <blockquote>
              <p>Feedback:</p>
<p>[ul][li]Conventions pls[/li]<br>
[li]How is the user going to terminate your software without going into task manager? - Writing this in java so that it can be implemented into the server as a library may be a better idea to prevent this.[/li]<br>
[li]Note: that since your backing up isnt async, the delay wont actually be 30mins but a little greater[/li][/ul]</p>
<p>Your logic for waiting is not very pretty, you have two reasonable options:</p>
<ol>
<li>Simplistic - note how it trims your logic by a lot</li>
</ol>
<p>[code=csharp]…</p>
<p>while (Running) {<br>
Thread.Sleep(backupDelay); // ie 30 mins would be 30 * 60 * 1000<br>
Backup();<br>
}</p>
<p>…[/code]</p>
<ol start="2">
<li>Timer - this specific implementation runs on a background thread so it wont lock up your application either (note other classes called Timer exist and may behave differently)<br>
<a href="https://msdn.microsoft.com/en-us/library/system.threading.timer%28v=vs.110%29.aspx" data-bbcode="true" rel="nofollow noopener">System.Threading.Timer</a> - <a href="http://stackoverflow.com/questions/4409558/c-sharp-timer-run-every-5th-minute" data-bbcode="true" rel="nofollow noopener">example</a>
</li>
</ol>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/tool-automated-backup-utility/551850/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/tool-automated-backup-utility/551850/5</link>
        <pubDate>Sat, 06 Jun 2015 15:23:35 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-551850-5</guid>
        <source url="https://forum.moparisthebest.com/t/tool-automated-backup-utility/551850.rss">[Tool] Automated Backup Utility</source>
      </item>
      <item>
        <title>[Tool] Automated Backup Utility</title>
        <dc:creator><![CDATA[@Cres Cres]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/cres">@Cres</a> wrote:</p>
          <blockquote>
              <p>just make it save as n-th back-up and make it check how many backups exist. if it exceeds x, you make it delete the last one</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/tool-automated-backup-utility/551850/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/tool-automated-backup-utility/551850/4</link>
        <pubDate>Sat, 06 Jun 2015 14:40:01 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-551850-4</guid>
        <source url="https://forum.moparisthebest.com/t/tool-automated-backup-utility/551850.rss">[Tool] Automated Backup Utility</source>
      </item>
      <item>
        <title>[Tool] Automated Backup Utility</title>
        <dc:creator><![CDATA[@CSharp95 CSharp95]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/csharp95">@CSharp95</a> wrote:</p>
          <blockquote>
              <p>[quote=“Cres, post:2, topic:551850”]maybe have an option where the backup overwrites previous backups but only for x times</p>
<p>this will prevent the backups taking up heaps of memory while still providing enough back-ups to switch back to</p>
<p>other than that, it’s nice but such a thing really doesn’t take a lot of work to make<br>
hope people will make use of it[/quote]<br>
I considered that, actually. It’s possible, though I don’t know how it would save the timestamp since it currently saves it in the title of the archive. It could possibly just write it to a text file, but this seems less convenient for whenever it’s needed.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/tool-automated-backup-utility/551850/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/tool-automated-backup-utility/551850/3</link>
        <pubDate>Sat, 06 Jun 2015 14:32:10 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-551850-3</guid>
        <source url="https://forum.moparisthebest.com/t/tool-automated-backup-utility/551850.rss">[Tool] Automated Backup Utility</source>
      </item>
      <item>
        <title>[Tool] Automated Backup Utility</title>
        <dc:creator><![CDATA[@Cres Cres]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/cres">@Cres</a> wrote:</p>
          <blockquote>
              <p>maybe have an option where the backup overwrites previous backups but only for x times</p>
<p>this will prevent the backups taking up heaps of memory while still providing enough back-ups to switch back to</p>
<p>other than that, it’s nice but such a thing really doesn’t take a lot of work to make<br>
hope people will make use of it</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/tool-automated-backup-utility/551850/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/tool-automated-backup-utility/551850/2</link>
        <pubDate>Sat, 06 Jun 2015 12:17:56 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-551850-2</guid>
        <source url="https://forum.moparisthebest.com/t/tool-automated-backup-utility/551850.rss">[Tool] Automated Backup Utility</source>
      </item>
      <item>
        <title>[Tool] Automated Backup Utility</title>
        <dc:creator><![CDATA[@CSharp95 CSharp95]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/csharp95">@CSharp95</a> wrote:</p>
          <blockquote>
              <p>[size=14pt]<span class="bbcode-u"><span class="bbcode-b">Travis’ Automated Backup Utility</span></span>[/size]<br>
Here’s another quick tool I made, this time for server owners and developers.</p>
<p><span class="bbcode-u"><span class="bbcode-b">What it does</span></span><br>
It simply backs up the provided directory to a zip file, removing the need for manual or integrated backup methods.<br>
While it’s designed with backing up the player files in mind, you can really backup anything you’d like with it. Databases, Logs, whatever suits your purposes. So long as it’s all saved in a local directory, it should be able to read it.</p>
<p><span class="bbcode-u"><span class="bbcode-b">Why it’s needed</span></span><br>
Many servers that are smaller do not keep backups of their players, and if they do, it’s typically done manually about once a day, meaning it’s still possible to lose an entire day worth of work(or sometimes having to start completely over) just due to the host having to switch VPS providers. This has happened far too many times for me, whether it be an economy reset or switching hosts, it’s been the reason a lot of people quit a server.<br>
This ensure that there will always be an up-to-date backup available for the host to use, so long as this is used properly.</p>
<p><span class="bbcode-u"><span class="bbcode-b">How to use it</span></span><br>
It takes 2 arguments, so you should set it up to run through a .bat file.</p>
<ol>
<li>The directory you wish to backup, I.E the folder with all of your player files in it</li>
<li>The rate of backups in minutes</li>
</ol>
<p>Example: RSPSABU “c:/rsps/data/players” 20<br>
Will backup the directory c:/rsps/data/players to a zip file every 20 minutes</p>
<p><span class="bbcode-b">If you’re hosting on a VPS, it is <span class="bbcode-u">highly</span> recommended that you keep this program in a cloud storage folder such as google drive to ensure that you can get to the backups even if your VPS goes down or service stops!</span></p>
<p><span class="bbcode-u">Disk Space</span><br>
Keep in mind how much space you have so you don’t go too crazy with the amount of backups. If you have about 3-4mb of players, you’ll only use up about 500mb of space per month, but with 20mb of players you’ll use up almost 4gb of space in the same time span.<br>
I personally recommend one backup every 4 hours, that gives you 6 backups a day, however it just depends on how much you have to work with.</p>
<p><span class="bbcode-u"><span class="bbcode-b">Download</span></span><br>
Requires the .NET framework 4.5.1 found <a href="https://msdn.microsoft.com/en-us/vstudio/aa496123" data-bbcode="true" rel="nofollow noopener">here</a><br>
Virus Scan: <a href="http://bit.ly/1RSfjov" rel="nofollow noopener">http://bit.ly/1RSfjov</a></p>
<p>Uppit: [URL=http://upx.nz/Se5Iha]RSPSABU.zip - 3 KB[/URL]</p>
<p><span class="bbcode-u"><span class="bbcode-b">Source</span></span><br>
The source is small enough to fit in a code block since it was a single class.<br>
Written in C# using Visual Studio<br>
[spoiler=Source]<br>
Add two references: System.IO.Compression and System.IO.Compression.FileSystem</p>
<pre><code class="lang-auto">using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.IO;
using System.IO.Compression;
using System.Threading;

namespace RSPSABU
{
    class RSPSABU
    {
        static string _PlayerDir;
        static int _BackupTime;
        static string _CurTime;
        static void Main(string[] args)
        {
            try
            {
                _PlayerDir = args[0];
                _BackupTime = Convert.ToInt32(args[1]);
            }
            catch(Exception e)
            {
                Console.WriteLine("Invalid application arguments, see included text file for usage information");
                Console.Write("Press any key to exit");
                Console.ReadKey();
                Environment.Exit(1);
            }
            Console.Title = "Automated Backup Utility";
            Console.WriteLine("RuneScape Private Server Automated Backup Utility");
            Console.WriteLine("Written by CSharp95/Travis, contact at traviscondren95@gmail.com");
            Thread.Sleep(3000);
            Console.Clear();
            Console.WriteLine("Directory {0} will be archived every {1} minutes", _PlayerDir, _BackupTime);
            int _l = 0;
            int _n;
            Console.WriteLine("Starting backup loop");
            while (_l &lt;= _BackupTime)
            {
                if (_l == _BackupTime)
                {
                    _CurTime = GetDate();
                    Console.WriteLine("Backing up " + _CurTime);
                    CompressFile(_PlayerDir);
                    _l = 0;
                }
                else
                {
                    _n = _BackupTime - _l;
                    Console.WriteLine("Next backup in " + _n + " minutes");
                    _l++;
                    SleepThread(1);
                }
            }
        }
        static string GetDate()
        {
            string _result = DateTime.Now.ToString("yyyy-MM-dd hh-mm");
            return _result;
        }
        static void CompressFile(string _file)
        {
            try
            {
                ZipFile.CreateFromDirectory(_PlayerDir, _CurTime + ".zip");
            }
            catch (Exception e)
            {
                Console.WriteLine(e.Message);
            }
        }
        static void SleepThread(int _time)
        {
            _time = _time * 60000;
            Thread.Sleep(_time);
        }
    }
}
</code></pre>
<p>Not the cleanest but there’s not much to learn from here, so I decided against commenting it.<br>
[/spoiler]</p>
<p>As always, please leave feedback, good or bad it’s appreciated.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/tool-automated-backup-utility/551850/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/tool-automated-backup-utility/551850/1</link>
        <pubDate>Sat, 06 Jun 2015 12:08:38 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-551850-1</guid>
        <source url="https://forum.moparisthebest.com/t/tool-automated-backup-utility/551850.rss">[Tool] Automated Backup Utility</source>
      </item>
  </channel>
</rss>
