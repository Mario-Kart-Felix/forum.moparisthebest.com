<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>My ip ban kinda work</title>
    <link>https://forum.moparisthebest.com/t/my-ip-ban-kinda-work/172910</link>
    <description>like when he gets kicked/logged off hes banned but it wont block him from logging in everytime...anyone know how to fix? im on project czar</description>
    
    <lastBuildDate>Sun, 13 Jan 2008 08:15:11 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/my-ip-ban-kinda-work/172910.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>My ip ban kinda work</title>
        <dc:creator><![CDATA[@drask182 drask182]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/drask182">@drask182</a> wrote:</p>
          <blockquote>
              <p>[quote=“BurnInSilence, post:2, topic:172910”]1.Open up your client.java and find this code:<br>
Code:</p>
<p>public void appendToBanned(String player) {</p>
<pre><code>    BufferedWriter bw = null;

    try {
        bw = new BufferedWriter(new FileWriter("data/bannedusers.txt", true));
        player = player.replaceAll("_", " ");
        bw.write(player);
        bw.newLine();
        bw.flush();
    } catch (IOException ioe) {
        ioe.printStackTrace();
    } finally {
        if (bw != null) {
            try {
                bw.close();
            } catch (IOException ioe2) {
                sendMessage("Error banning user!");
            }
        }
    }

}
</code></pre>
<p>.</p>
<p>2.Declare this above it<br>
Code:</p>
<p>public void appendToBannedIps(String player) {</p>
<pre><code>    BufferedWriter bw = null;

    try {
        bw = new BufferedWriter(new FileWriter("data/bannedips.txt", true));
        bw.write(player);
        bw.newLine();
        bw.flush();
    } catch (IOException ioe) {
        ioe.printStackTrace();
    } finally {
        if (bw != null) {
            try {
                bw.close();
            } catch (IOException ioe2) {
                sendMessage("Error ip banning user!");
            }
        }
    }
}
</code></pre>
<p>.</p>
<p>^^That send’s the ip and write’s the players ip in your Banned ip’s list in your data folder.</p>
<p>3.In your client.java find the int:<br>
Code:</p>
<p>public int checkbannedusers() {</p>
<p>Add this above it.<br>
Code:</p>
<p>public int checkbannedips() {<br>
try {<br>
BufferedReader in = new BufferedReader(<br>
new FileReader("./data/bannedips.txt"));<br>
String data = null;</p>
<pre><code>        while ((data = in.readLine()) != null) {
            if (connectedFrom.equalsIgnoreCase(data)) {
                return 5;
            }
        }
    } catch (IOException e) {
        System.out.println("Critical error while checking banned ips!");
        e.printStackTrace();
    }
    return 0;
}
</code></pre>
<p>^^ This int check’s to see if the player is ipbanned when they log onto your server.</p>
<p>4.In your client.java find this:</p>
<p>Code:</p>
<p>// start of ban list, 4 = your account has been disabled check your message centre for details</p>
<p>Under that there should be these two lines.</p>
<p>Code:</p>
<p>checkbannedusers();<br>
checkbannedips();</p>
<p>If there isn’t the chckbannedips one add it under checkbannedusers();.</p>
<p>Now this code should be under check bannedips(); and users:</p>
<p>Code:</p>
<pre><code>        if (checkbannedusers() == 5) {
            returnCode = 4;
            System.out.println(
                    playerName + " failed to logon because they are banned.");
            appendToLR(
                    playerName + " failed to logon because they are banned.");
            savefile = false;
            disconnected = true;
        }
</code></pre>
<p>Add this under that:</p>
<p>Code:</p>
<p>if (checkbannedips() == 5) {<br>
returnCode = 4;<br>
System.out.println(<br>
playerName<br>
+ " failed to logon because their ip is banned.");<br>
appendToLR(<br>
playerName<br>
+ " failed to logon because their ip is banned.");<br>
savefile = false;<br>
disconnected = true;<br>
}</p>
<p>^^This make’s it so the player can’t log in.</p>
<p>5.Now add the command if you don’t already have it.<br>
Code:</p>
<p>if (command.startsWith(“ipban”)<br>
&amp;&amp; (playerRights &gt;= 3 || playerName.equalsIgnoreCase(“D D 3”))) {<br>
String victim = command.substring(6);<br>
int index = PlayerHandler.getPlayerID(victim);<br>
client v = (client) server.playerHandler.players[index];</p>
<pre><code>        appendToBannedIps(v.connectedFrom);
        v.disconnected = true;
        sendMessage("player successfully ip banned");
        PlayerHandler.messageToAll = playerName
                + ": HAS IP BANNED THE PLAYER: " + command.substring(5);
        BufferedWriter bw = null;

        try {
            bw = new BufferedWriter(
                    new FileWriter("logs/ipbanlogs.txt", true));
            bw.write(playerName + " banned" + victim);
            bw.newLine();
            bw.flush();
        } catch (IOException ioe) {
            ioe.printStackTrace();
        } finally {
            if (bw != null) {
                try {
                    bw.close();
                } catch (IOException ioe2) {
                    sendMessage("Error logging ip bans!");
                }
            }
        }
    }
</code></pre>
<p>^^This tell’s everyone on the server who is getting ipbanne’d and send’s it to your folder:DATA, to the file bannedip’s then with the above stuff being added make’s them not being able to log in.<br>
not my tut, not taking credit[/quote]use a code to do that</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/my-ip-ban-kinda-work/172910/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/my-ip-ban-kinda-work/172910/4</link>
        <pubDate>Sun, 13 Jan 2008 08:15:11 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-172910-4</guid>
        <source url="https://forum.moparisthebest.com/t/my-ip-ban-kinda-work/172910.rss">My ip ban kinda work</source>
      </item>
      <item>
        <title>My ip ban kinda work</title>
        <dc:creator><![CDATA[@heybaby05 heybaby05]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/heybaby05">@heybaby05</a> wrote:</p>
          <blockquote>
              <p>lmao i done that and it still lerts them in if they make new names…</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/my-ip-ban-kinda-work/172910/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/my-ip-ban-kinda-work/172910/3</link>
        <pubDate>Sun, 13 Jan 2008 07:20:37 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-172910-3</guid>
        <source url="https://forum.moparisthebest.com/t/my-ip-ban-kinda-work/172910.rss">My ip ban kinda work</source>
      </item>
      <item>
        <title>My ip ban kinda work</title>
        <dc:creator><![CDATA[@BurnInSilence BurnInSilence]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/burninsilence">@BurnInSilence</a> wrote:</p>
          <blockquote>
              <p>1.Open up your client.java and find this code:<br>
Code:</p>
<p>public void appendToBanned(String player) {</p>
<pre><code>    BufferedWriter bw = null;

    try {
        bw = new BufferedWriter(new FileWriter("data/bannedusers.txt", true));
        player = player.replaceAll("_", " ");
        bw.write(player);
        bw.newLine();
        bw.flush();
    } catch (IOException ioe) {
        ioe.printStackTrace();
    } finally {
        if (bw != null) {
            try {
                bw.close();
            } catch (IOException ioe2) {
                sendMessage("Error banning user!");
            }
        }
    }

}
</code></pre>
<p>.</p>
<p>2.Declare this above it<br>
Code:</p>
<p>public void appendToBannedIps(String player) {</p>
<pre><code>    BufferedWriter bw = null;

    try {
        bw = new BufferedWriter(new FileWriter("data/bannedips.txt", true));
        bw.write(player);
        bw.newLine();
        bw.flush();
    } catch (IOException ioe) {
        ioe.printStackTrace();
    } finally {
        if (bw != null) {
            try {
                bw.close();
            } catch (IOException ioe2) {
                sendMessage("Error ip banning user!");
            }
        }
    }
}
</code></pre>
<p>.</p>
<p>^^That send’s the ip and write’s the players ip in your Banned ip’s list in your data folder.</p>
<p>3.In your client.java find the int:<br>
Code:</p>
<p>public int checkbannedusers() {</p>
<p>Add this above it.<br>
Code:</p>
<p>public int checkbannedips() {<br>
try {<br>
BufferedReader in = new BufferedReader(<br>
new FileReader("./data/bannedips.txt"));<br>
String data = null;</p>
<pre><code>        while ((data = in.readLine()) != null) {
            if (connectedFrom.equalsIgnoreCase(data)) {
                return 5;
            }
        }
    } catch (IOException e) {
        System.out.println("Critical error while checking banned ips!");
        e.printStackTrace();
    }
    return 0;
}
</code></pre>
<p>^^ This int check’s to see if the player is ipbanned when they log onto your server.</p>
<p>4.In your client.java find this:</p>
<p>Code:</p>
<p>// start of ban list, 4 = your account has been disabled check your message centre for details</p>
<p>Under that there should be these two lines.</p>
<p>Code:</p>
<p>checkbannedusers();<br>
checkbannedips();</p>
<p>If there isn’t the chckbannedips one add it under checkbannedusers();.</p>
<p>Now this code should be under check bannedips(); and users:</p>
<p>Code:</p>
<pre><code>        if (checkbannedusers() == 5) {
            returnCode = 4;
            System.out.println(
                    playerName + " failed to logon because they are banned.");
            appendToLR(
                    playerName + " failed to logon because they are banned.");
            savefile = false;
            disconnected = true;
        }
</code></pre>
<p>Add this under that:</p>
<p>Code:</p>
<p>if (checkbannedips() == 5) {<br>
returnCode = 4;<br>
System.out.println(<br>
playerName<br>
+ " failed to logon because their ip is banned.");<br>
appendToLR(<br>
playerName<br>
+ " failed to logon because their ip is banned.");<br>
savefile = false;<br>
disconnected = true;<br>
}</p>
<p>^^This make’s it so the player can’t log in.</p>
<p>5.Now add the command if you don’t already have it.<br>
Code:</p>
<p>if (command.startsWith(“ipban”)<br>
&amp;&amp; (playerRights &gt;= 3 || playerName.equalsIgnoreCase(“D D 3”))) {<br>
String victim = command.substring(6);<br>
int index = PlayerHandler.getPlayerID(victim);<br>
client v = (client) server.playerHandler.players[index];</p>
<pre><code>        appendToBannedIps(v.connectedFrom);
        v.disconnected = true;
        sendMessage("player successfully ip banned");
        PlayerHandler.messageToAll = playerName
                + ": HAS IP BANNED THE PLAYER: " + command.substring(5);
        BufferedWriter bw = null;

        try {
            bw = new BufferedWriter(
                    new FileWriter("logs/ipbanlogs.txt", true));
            bw.write(playerName + " banned" + victim);
            bw.newLine();
            bw.flush();
        } catch (IOException ioe) {
            ioe.printStackTrace();
        } finally {
            if (bw != null) {
                try {
                    bw.close();
                } catch (IOException ioe2) {
                    sendMessage("Error logging ip bans!");
                }
            }
        }
    }
</code></pre>
<p>^^This tell’s everyone on the server who is getting ipbanne’d and send’s it to your folder:DATA, to the file bannedip’s then with the above stuff being added make’s them not being able to log in.<br>
not my tut, not taking credit</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/my-ip-ban-kinda-work/172910/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/my-ip-ban-kinda-work/172910/2</link>
        <pubDate>Sun, 13 Jan 2008 07:17:21 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-172910-2</guid>
        <source url="https://forum.moparisthebest.com/t/my-ip-ban-kinda-work/172910.rss">My ip ban kinda work</source>
      </item>
      <item>
        <title>My ip ban kinda work</title>
        <dc:creator><![CDATA[@Goddess Goddess]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/goddess">@Goddess</a> wrote:</p>
          <blockquote>
              <p>like when he gets kicked/logged off hes banned but it wont block him from logging in everytime…anyone know how to fix? im on project czar</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/my-ip-ban-kinda-work/172910/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/my-ip-ban-kinda-work/172910/1</link>
        <pubDate>Sun, 13 Jan 2008 06:57:22 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-172910-1</guid>
        <source url="https://forum.moparisthebest.com/t/my-ip-ban-kinda-work/172910.rss">My ip ban kinda work</source>
      </item>
  </channel>
</rss>
