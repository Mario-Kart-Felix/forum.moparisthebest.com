<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/the-runescape-region-system/317793 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Aug 2019 01:43:24 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>The runescape region system - Runescape - moparisthebest.com</title>
    <meta name="description" content="a ton of people act like they know it, etc, but they don&amp;#39;t. so, how does it work? how big are different regions? what about &amp;#39;bases&amp;#39;? how does it all work? feel free collaborate all information regarding it in this thread&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="317793.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;The runescape region system&#39;" href="317793.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/the-runescape-region-system/317793" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/the-runescape-region-system/317793" />
<meta property="og:title" content="The runescape region system" />
<meta name="twitter:title" content="The runescape region system" />
<meta property="og:description" content="a ton of people act like they know it, etc, but they don’t. so, how does it work? how big are different regions? what about ‘bases’? how does it all work? feel free collaborate all information regarding it in this thread 😛" />
<meta name="twitter:description" content="a ton of people act like they know it, etc, but they don’t. so, how does it work? how big are different regions? what about ‘bases’? how does it all work? feel free collaborate all information regarding it in this thread 😛" />
<meta property="article:published_time" content="2009-12-05T18:40:41+00:00" />
<meta property="og:ignore_canonical" content="true" />

      <link rel="next" href="3177934658.html?page=2">


    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="317793.html">The runescape region system</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Jython.html'><span itemprop='name'>Jython</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-12-05T18:40:41Z'>
            <time itemprop='dateModified' datetime='2016-07-31T12:56:24Z' class='post-time'>
              July 31, 2016, 12:56pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>a ton of people act like they know it, etc, but they don’t. so, how does it work? how big are different regions? what about ‘bases’? how does it all work? feel free collaborate all information regarding it in this thread <img src="../../images/emoji/twitter/stuck_out_tongueae52.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
      </div>

      <meta itemprop='headline' content='The runescape region system'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Unhandled.html'><span itemprop='name'>Unhandled</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-12-05T21:17:13Z'>
            <time itemprop='dateModified' datetime='2016-07-31T12:56:46Z' class='post-time'>
              July 31, 2016, 12:56pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>104x104 amirite?</p>
      </div>

      <meta itemprop='headline' content='The runescape region system'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/frank.html'><span itemprop='name'>frank</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-12-05T21:49:15Z'>
            <time itemprop='dateModified' datetime='2016-07-31T12:56:49Z' class='post-time'>
              July 31, 2016, 12:56pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>last time i looked (rsc) there were 4 sections of map, each 52x52, that made up the current loaded area</p>
      </div>

      <meta itemprop='headline' content='The runescape region system'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Jython.html'><span itemprop='name'>Jython</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-12-05T22:45:43Z'>
            <time itemprop='dateModified' datetime='2016-07-31T12:56:54Z' class='post-time'>
              July 31, 2016, 12:56pm
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote no-group" data-post="2" data-topic="317793">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/unhandled/40/5_513041d5f7104045db30895d3b90af16.png" class="avatar"> Unhandled:</div>
<blockquote>
<p>104x104 amirite?</p>
</blockquote>
</aside>
<p>thats the visible ‘region’, made up of other regions.</p>
      </div>

      <meta itemprop='headline' content='The runescape region system'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/xEnt.html'><span itemprop='name'>xEnt</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-12-06T03:41:18Z'>
            <time itemprop='dateModified' datetime='2016-07-31T12:57:20Z' class='post-time'>
              July 31, 2016, 12:57pm
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“frank_, post:3, topic:317793”]last time i looked (rsc) there were 4 sections of map, each 52x52, that made up the current loaded area[/quote]48*48</p>
      </div>

      <meta itemprop='headline' content='The runescape region system'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/frank.html'><span itemprop='name'>frank</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-12-06T08:17:55Z'>
            <time itemprop='dateModified' datetime='2016-07-31T12:57:36Z' class='post-time'>
              July 31, 2016, 12:57pm
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>orly <img src="../../images/emoji/twitter/confusedae52.png?v=5" title=":confused:" class="emoji" alt=":confused:"></p>
      </div>

      <meta itemprop='headline' content='The runescape region system'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/peterbjornx.html'><span itemprop='name'>peterbjornx</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-12-06T10:47:47Z'>
            <time itemprop='dateModified' datetime='2016-07-31T12:57:43Z' class='post-time'>
              July 31, 2016, 12:57pm
            </time>
        <span itemprop='position'>#7</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>a region file is 64<em>64</em>4 , a client loads multiple regions and trims them to form a 104<em>104</em>4 region,the lines x104 y104 are not being rendered as seperate tiles, there being used as the edges of the tiles besides them</p>
      </div>

      <meta itemprop='headline' content='The runescape region system'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Jython.html'><span itemprop='name'>Jython</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-12-06T15:55:02Z'>
            <time itemprop='dateModified' datetime='2016-07-31T12:57:59Z' class='post-time'>
              July 31, 2016, 12:57pm
            </time>
        <span itemprop='position'>#8</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote no-group quote-modified" data-post="7" data-topic="317793">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forum.moparisthebest.com/peterbjornx/40/2671_1.png" class="avatar"> peterbjornx:</div>
<blockquote>
<p>a region file is 64<em>64</em>4 , a client loads multiple regions and trims them to form a 104<em>104</em>4 region,the lines x104 y104 are not being rendered as seperate tiles, there being used as the edges of the tiles besides them</p>
</blockquote>
</aside>
<p>yes, i know all about what you just posted; however, my questions are about code like this</p>
<p><code>x = waypoint_x_queue[0] * 128 + model_bound_radius * 64;
y = waypoint_y_queue[0] * 128 + model_bound_radius * 64;</code><br>
what importance is 128?</p>
      </div>

      <meta itemprop='headline' content='The runescape region system'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Cheese_Police.html'><span itemprop='name'>Cheese_Police</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-12-06T16:02:00Z'>
            <time itemprop='dateModified' datetime='2016-07-31T12:57:59Z' class='post-time'>
              July 31, 2016, 12:57pm
            </time>
        <span itemprop='position'>#9</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>this is from client revision 317:</p>
<p>[code]    public void method313(int _x, int _y, int _yaw, int _z, int _plane, int _pitch)<br>
{<br>
if(_x &lt; 0)<br>
_x = 0;<br>
else<br>
if(_x &gt;= maxTileX * 128)<br>
_x = maxTileX * 128 - 1;<br>
if(_y &lt; 0)<br>
_y = 0;<br>
else<br>
if(_y &gt;= maxTileY * 128)<br>
_y = maxTileY * 128 - 1;<br>
anInt448++;<br>
renderSinePitch = Model.sineTable[_pitch];<br>
renderCosinePitch = Model.cosineTable[_pitch];<br>
renderSineYaw = Model.sineTable[_yaw];<br>
renderCosineYaw = Model.cosineTable[_yaw];<br>
aBooleanArrayArray492 = aBooleanArrayArrayArrayArray491[(_pitch - 128) / 32][_yaw / 64];<br>
anInt455 = _x;<br>
anInt456 = _z;<br>
anInt457 = _y;<br>
anInt453 = _x / 128;<br>
anInt454 = _y / 128;<br>
renderPlane = _plane;<br>
renderTileXStart = anInt453 - 25;<br>
if(renderTileXStart &lt; 0)<br>
renderTileXStart = 0;<br>
renderTileYStart = anInt454 - 25;<br>
if(renderTileYStart &lt; 0)<br>
renderTileYStart = 0;<br>
renderTileX = anInt453 + 25;<br>
if(renderTileX &gt; maxTileX)<br>
renderTileX = maxTileX;<br>
renderTileY = anInt454 + 25;<br>
if(renderTileY &gt; maxTileY)<br>
renderTileY = maxTileY;<br>
method319();<br>
anInt446 = 0;<br>
for(int k1 = anInt442; k1 &lt; anInt437; k1++)<br>
{<br>
Ground tiles[][] = groundArray[k1];<br>
for(int t_x = renderTileXStart; t_x &lt; renderTileX; t_x++)<br>
{<br>
for(int t_y = renderTileYStart; t_y &lt; renderTileY; t_y++)<br>
{<br>
Ground tile = tiles[t_x][t_y];<br>
if(tile != null)<br>
if(tile.anInt1321 &gt; _plane || (!aBooleanArrayArray492[(t_x - anInt453) + 25][(t_y - anInt454) + 25] &amp;&amp; anIntArrayArrayArray440[k1][t_x][t_y] - _z &lt; 2000))<br>
{<br>
tile.aBoolean1322 = false;<br>
tile.aBoolean1323 = false;<br>
tile.anInt1325 = 0;<br>
} else<br>
{<br>
tile.aBoolean1322 = true;<br>
tile.aBoolean1323 = true;<br>
tile.hasRenderables = tile.renderableCount &gt; 0;<br>
anInt446++;<br>
}<br>
}</p>
<pre><code>        }

    }

    for(int l1 = anInt442; l1 &lt; anInt437; l1++)
    {
        Ground tiles[][] = groundArray[l1];
        for(int l2 = -25; l2 &lt;= 0; l2++)
        {
            int i3 = anInt453 + l2;
            int k3 = anInt453 - l2;
            if(i3 &gt;= renderTileXStart || k3 &lt; renderTileX)
            {
                for(int i4 = -25; i4 &lt;= 0; i4++)
                {
                    int k4 = anInt454 + i4;
                    int i5 = anInt454 - i4;
                    if(i3 &gt;= renderTileXStart)
                    {
                        if(k4 &gt;= renderTileYStart)
                        {
                            Ground class30_sub3_1 = tiles[i3][k4];
                            if(class30_sub3_1 != null &amp;&amp; class30_sub3_1.aBoolean1322)
                                method314(class30_sub3_1, true);
                        }
                        if(i5 &lt; renderTileY)
                        {
                            Ground class30_sub3_2 = tiles[i3][i5];
                            if(class30_sub3_2 != null &amp;&amp; class30_sub3_2.aBoolean1322)
                                method314(class30_sub3_2, true);
                        }
                    }
                    if(k3 &lt; renderTileX)
                    {
                        if(k4 &gt;= renderTileYStart)
                        {
                            Ground class30_sub3_3 = tiles[k3][k4];
                            if(class30_sub3_3 != null &amp;&amp; class30_sub3_3.aBoolean1322)
                                method314(class30_sub3_3, true);
                        }
                        if(i5 &lt; renderTileY)
                        {
                            Ground class30_sub3_4 = tiles[k3][i5];
                            if(class30_sub3_4 != null &amp;&amp; class30_sub3_4.aBoolean1322)
                                method314(class30_sub3_4, true);
                        }
                    }
                    if(anInt446 == 0)
                    {
                        aBoolean467 = false;
                        return;
                    }
                }

            }
        }

    }

    for(int j2 = anInt442; j2 &lt; anInt437; j2++)
    {
        Ground aclass30_sub3_2[][] = groundArray[j2];
        for(int j3 = -25; j3 &lt;= 0; j3++)
        {
            int l3 = anInt453 + j3;
            int j4 = anInt453 - j3;
            if(l3 &gt;= renderTileXStart || j4 &lt; renderTileX)
            {
                for(int l4 = -25; l4 &lt;= 0; l4++)
                {
                    int j5 = anInt454 + l4;
                    int k5 = anInt454 - l4;
                    if(l3 &gt;= renderTileXStart)
                    {
                        if(j5 &gt;= renderTileYStart)
                        {
                            Ground class30_sub3_5 = aclass30_sub3_2[l3][j5];
                            if(class30_sub3_5 != null &amp;&amp; class30_sub3_5.aBoolean1322)
                                method314(class30_sub3_5, false);
                        }
                        if(k5 &lt; renderTileY)
                        {
                            Ground class30_sub3_6 = aclass30_sub3_2[l3][k5];
                            if(class30_sub3_6 != null &amp;&amp; class30_sub3_6.aBoolean1322)
                                method314(class30_sub3_6, false);
                        }
                    }
                    if(j4 &lt; renderTileX)
                    {
                        if(j5 &gt;= renderTileYStart)
                        {
                            Ground class30_sub3_7 = aclass30_sub3_2[j4][j5];
                            if(class30_sub3_7 != null &amp;&amp; class30_sub3_7.aBoolean1322)
                                method314(class30_sub3_7, false);
                        }
                        if(k5 &lt; renderTileY)
                        {
                            Ground class30_sub3_8 = aclass30_sub3_2[j4][k5];
                            if(class30_sub3_8 != null &amp;&amp; class30_sub3_8.aBoolean1322)
                                method314(class30_sub3_8, false);
                        }
                    }
                    if(anInt446 == 0)
                    {
                        aBoolean467 = false;
                        return;
                    }
                }

            }
        }

    }

    aBoolean467 = false;
}[/code]
</code></pre>
<pre><code class="lang-auto">private static boolean[][][][] aBooleanArrayArrayArrayArray491 = new boolean[8][32][51][51];</code></pre>
<p>aBooleanArrayArrayArrayArray491 maintains clipping status of ground tiles.<br>
The first 2 dimensions are for camera angle, and the latter 2 are obviously the tile clipping status itself.</p>
<p>Note the size of the last 2 dimensions.  There is more code similar to this where instead of 51x51, it is 53x53, which makes me think those calculations are either inclusive or exclusive of the 4 tiles the player is standing on respectively.  Of course, assuming the view distance of the player is 25 tiles (I haven’t tested, but that code looks pretty obvious to me).</p>
<p>I say 4 tiles because the z distance from the actual map plane that an entity is rendered at is calculated from the average heights of the tile it is standing on and 3 adjacent ones:<br>
<span class="bbcode-u">|a|b|</span><br>
|c|d|<br>
where a is the tile the entity is on.  It’s not directly related to this code, but I have a sneaking suspicion…</p>
<p>And super_:</p>
<p>We discussed that on IRC and determined 128 is the actual size of a ground tile (in rendering units (pixels)). The latter portion of those statements determines how many pixels to offset a model (for example, most NPCs have a ‘model_bound_radius’ of 1, making them get drawn in the middle of a tile.  NPCs like TzTok-Jad have a bigger radius and get offset further, so they don’t look retarded by having their model draw over other shit, and other shit draw over it).<br>
The snippet you pasted is from the Entity/Mobile class, in others (I can’t remember, but I’m pretty sure in the ground object class), there is both a width and height of the model in tiles (rough, it’s a bounding box).  Radius is misnomered (yeah, I used it in my post, so what).</p>
<p><img src="../../images/emoji/twitter/smileyae52.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"></p>
      </div>

      <meta itemprop='headline' content='The runescape region system'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Jython.html'><span itemprop='name'>Jython</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-12-06T16:19:46Z'>
            <time itemprop='dateModified' datetime='2016-07-31T12:58:00Z' class='post-time'>
              July 31, 2016, 12:58pm
            </time>
        <span itemprop='position'>#10</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>so ‘model_bound_radius’ is in fact just a model bounding ‘cube’ width/height ?</p>
      </div>

      <meta itemprop='headline' content='The runescape region system'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Cheese_Police.html'><span itemprop='name'>Cheese_Police</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-12-06T16:38:07Z'>
            <time itemprop='dateModified' datetime='2016-07-31T12:58:02Z' class='post-time'>
              July 31, 2016, 12:58pm
            </time>
        <span itemprop='position'>#11</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote no-group quote-modified" data-post="10" data-topic="317793">
<div class="title">
<div class="quote-controls"></div>
 oksuper_:</div>
<blockquote>
<p>so ‘model_bound_radius’ is in fact just a model bounding ‘cube’ width/height ?</p>
</blockquote>
</aside>
<p>Something like that.</p>
<p>Also, I think it’s important to mention:</p>
<p><code>        x = smallX[0] * 128 + boundingCube * 64;
        y = smallY[0] * 128 + boundingCube * 64;</code></p>
<p>[code]    private void renderPlayers(boolean first)<br>
{<br>
if(myPlayer.x &gt;&gt; 7 == destX &amp;&amp; myPlayer.y &gt;&gt; 7 == destY)<br>
destX = 0;<br>
int player_count = playerCount;<br>
if(first)<br>
player_count = 1;<br>
for(int l = 0; l &lt; player_count; l++)<br>
{<br>
Player player;<br>
int i1;<br>
if(first)<br>
{<br>
player = myPlayer;<br>
i1 = myPlayerIndex &lt;&lt; 14;<br>
} else<br>
{<br>
player = playerArray[playerIndices[l]];<br>
i1 = playerIndices[l] &lt;&lt; 14;<br>
}<br>
if(player == null || !player.isVisible())<br>
continue;<br>
player.aBoolean1699 = (lowMem &amp;&amp; playerCount &gt; 50 || playerCount &gt; 200) &amp;&amp; !first &amp;&amp; player.anInt1517 == player.anInt1511;<br>
int tile_x = player.x &gt;&gt; 7;<br>
int tile_y = player.y &gt;&gt; 7;<br>
if(tile_x &lt; 0 || tile_x &gt;= 104 || tile_y &lt; 0 || tile_y &gt;= 104)<br>
continue;</p>
<pre><code>        // what is this?
        if(player.aModel_1714 != null &amp;&amp; loopCycle &gt;= player.anInt1707 &amp;&amp; loopCycle &lt; player.anInt1708)
        {
            player.aBoolean1699 = false;
            player.renderHeight = getEntityTerrainHeightOffset(plane, player.y, player.x);
            worldController.method286(plane, player.y, player, player.orientation, player.anInt1722, player.x, player.renderHeight, player.anInt1719, player.anInt1721, i1, player.anInt1720);
            continue;
        }

        if((player.x &amp; 0x7f) == 64 &amp;&amp; (player.y &amp; 0x7f) == 64)
        {
            if(anIntArrayArray929[tile_x][tile_y] == anInt1265)
                continue;
            anIntArrayArray929[tile_x][tile_y] = anInt1265;
        }
        player.renderHeight = getEntityTerrainHeightOffset(plane, player.y, player.x);
        worldController.placeAnimable(plane, player.orientation, player.renderHeight, i1, player.y, 60, player.x, player, player.aBoolean1541);
    }

}[/code]
</code></pre>
<p>[code]    private int getEntityTerrainHeightOffset(int plane, int y, int x)<br>
{<br>
int tile_x = x &gt;&gt; 7;<br>
int tile_y = y &gt;&gt; 7;<br>
if(tile_x &lt; 0 || tile_y &lt; 0 || tile_x &gt; 103 || tile_y &gt; 103)<br>
return 0;</p>
<pre><code>    int _plane = plane;
    if(_plane &lt; 3 &amp;&amp; (byteGroundArray[1][tile_x][tile_y] &amp; 2) == 2)
        _plane++;
                     
    // XXX: not a scale, refactor
    int tile_xscale = x &amp; 0x7f;
    int tile_yscale = y &amp; 0x7f;
    // calculate average tile height of top row (normalized)
    int top_avg = ((tileMeanHeight[_plane][tile_x][tile_y] * (128 - tile_xscale)) + (tileMeanHeight[_plane][tile_x + 1][tile_y] * tile_xscale)) &gt;&gt; 7;
    // and the bottom row (normalized)
    int bottom_avg = ((tileMeanHeight[_plane][tile_x][tile_y + 1] * (128 - tile_xscale)) + (tileMeanHeight[_plane][tile_x + 1][tile_y + 1] * tile_xscale)) &gt;&gt; 7;
    // average them both (and normalize) and return
    return ((top_avg * (128 - tile_yscale)) + (bottom_avg * tile_yscale)) &gt;&gt; 7;
}[/code]
</code></pre>
<p>Entity.x/Entity.y in moparisthebest’s deob is a packed field (I guess you could call it that).  The last 7 bits determine how much to offset the model (center etc), the rest are the actual tile x/y.   Throughout my refactor so far I’ve been using a rather lame quake-esque name ‘r_screenx’ ‘r_screeny’ ‘r_screenz’:</p>
<p>[code]    private void worldToScreen(Entity entity, int i)<br>
{<br>
worldToScreen(entity.x, i, entity.y);<br>
}</p>
<pre><code>private void worldToScreen(int r_screenx, int _height, int r_screeny)
{
    if(r_screenx &lt; 128 || r_screeny &lt; 128 || r_screenx &gt; 0x3300 || r_screeny &gt; 0x3300)
    {
        wtsScreenX = -1;
        wtsScreenY = -1;
        return;
    }
    int r_screenz = getEntityTerrainHeightOffset(plane, r_screeny, r_screenx) - _height;
    r_screenx -= xCameraPos;
    r_screenz -= zCameraPos;
    r_screeny -= yCameraPos;

    // XXX: refactor
    int sineY = Model.sineTable[cameraPitch];
    int cosineY = Model.cosineTable[cameraPitch];
    int sineX = Model.sineTable[cameraYaw];
    int cosineX = Model.cosineTable[cameraYaw];


    int temp = ((r_screeny * sineX) + (r_screenx * cosineX)) &gt;&gt; 16;

    r_screeny = ((r_screeny * cosineX) - (r_screenx * sineX)) &gt;&gt; 16;
    r_screenx = temp;

    temp = ((r_screenz * cosineY) - (r_screeny * sineY)) &gt;&gt; 16;

    r_screeny = ((r_screenz * sineY) + (r_screeny * cosineY)) &gt;&gt; 16;
    r_screenz = temp;

    if(r_screeny &gt;= 50)
    {
        wtsScreenX = Texture.textureInt1 + (r_screenx &lt;&lt; 9) / r_screeny;
        wtsScreenY = Texture.textureInt2 + (r_screenz &lt;&lt; 9) / r_screeny;
        //String s = String.format("[%d + (%d * 512) / %d, %d + (%d * 512) / %d", Texture.textureInt1, r_screenx, r_screeny,
        //                                                                        Texture.textureInt2, r_screenz, r_screeny);
        //chatTextDrawingArea.drawText(0xff0000, s, wtsScreenY - 10, wtsScreenX);
    } else
    {
        wtsScreenX = -1;
        wtsScreenY = -1;
    }
}[/code]
</code></pre>
<p>The ‘screen’ being the 3d ‘screen’/canvas/whatever the fuck.  Texture.textureInt1/2 in that example are the width/height of the texture of the model currently being rendered.</p>
<p>minor edit: frank_, I know you’re gonna cry about naming.  Don’t worry, it will be cleaned up eventually (probably never).</p>
      </div>

      <meta itemprop='headline' content='The runescape region system'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/frank.html'><span itemprop='name'>frank</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-12-07T00:13:46Z'>
            <time itemprop='dateModified' datetime='2016-07-31T12:58:51Z' class='post-time'>
              July 31, 2016, 12:58pm
            </time>
        <span itemprop='position'>#12</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>your naming is infinitely better than all of the others’</p>
      </div>

      <meta itemprop='headline' content='The runescape region system'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/system.html'><span itemprop='name'>system</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-12-14T04:57:06Z'>
            <time itemprop='dateModified' datetime='2016-07-31T13:08:18Z' class='post-time'>
              July 31, 2016,  1:08pm
            </time>
        <span itemprop='position'>#13</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I’d like to know this as well, there really is some confusion.<br>
Tell you what I think a region is, for what it’s worth, probably wrong.</p>
<p>Map files are 64x64 tiles with 4 height levels per map, each tile is 128 units across (-64 to +64).<br>
Loading maps takes time to decompress so you load 'em into memory, memory can’t be 64x64 tiles otherwise you could stand next to unloaded tiles at the edges, so you need &gt; 64x64 tiles.<br>
They use 104x104, don’t know why though, it might be so the edges of a region don’t coincide with the edges of a map. You could give each region a unique ID if this were the case.<br>
Although it could be a java heap constraint? Dunno.</p>
<p>This ‘region’ isn’t what is drawn, it is what is held in memory. I can only get 25x25 squares to draw if I zoom out alot.<br>
There are also 4 height ‘layers’ to the maps, so you need 104x104x4 array elements to store the map for a ‘region’.</p>
<p>Haven’t got a clue what a ‘base’ is.</p>
<p>Think you should ask Graham what he means by region.</p>
      </div>

      <meta itemprop='headline' content='The runescape region system'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Jython.html'><span itemprop='name'>Jython</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-12-14T22:48:26Z'>
            <time itemprop='dateModified' datetime='2016-07-31T13:09:07Z' class='post-time'>
              July 31, 2016,  1:09pm
            </time>
        <span itemprop='position'>#14</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>each height ‘layer’ is a plane or floor level a player can be standing on. i have know of the 104x104 however i don’t understand why 104x104 etc; the 64x64 tile maps i understand.</p>
      </div>

      <meta itemprop='headline' content='The runescape region system'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/system.html'><span itemprop='name'>system</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-12-14T23:54:07Z'>
            <time itemprop='dateModified' datetime='2016-07-31T13:09:14Z' class='post-time'>
              July 31, 2016,  1:09pm
            </time>
        <span itemprop='position'>#15</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Ok, if your array is 64x64, and you load a 64x64 map, you could then run to the edge of the floor and stand next to a black square that isn’t loaded, you can’t go past this because there is nothing to click on.<br>
So you need an array bigger than 64x64 to load other maps into the array so that when you reach the loaded maps edge, you can see the other map.<br>
It might be simple in that they just took an arbitary number of 20 squares to add to the edges.</p>
<p>I’m thinking it’s just an area of memory to allow scrolling, not figured out how the scrolling works yet, whether they shift 1 tile at a time or shift the 64x64 map when you get to the edge. CBA</p>
<p>Think that’s all people are going on about when they talk about regions, they get confused because of the packets the server sends to fill the ‘region’ with players.<br>
If you increase the size to say +40 squares added to the edge to make a 144x144 region, the server would need to find all players in a larger area, which would increase the server load.</p>
<p>Make any sense?<br>
Don’t take it as fact though, could be completely wrong, it’s just a guess.</p>
      </div>

      <meta itemprop='headline' content='The runescape region system'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/i_own_pking.html'><span itemprop='name'>i_own_pking</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-12-29T00:48:54Z'>
            <time itemprop='dateModified' datetime='2016-07-31T13:34:37Z' class='post-time'>
              July 31, 2016,  1:34pm
            </time>
        <span itemprop='position'>#16</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Regions are actually 64x64 tiles and then they have 4 heights, however, more than 1 region is loaded at a time, the regions loaded are done as follows;</p>
<p><code>for(int regionX = (bigRegionX - 6) / 8; regionX &lt;= (bigRegionX + 6) / 8; regionX++)
	for(int regionY = (bigRegionY - 6) / 8; regionY &lt;= (bigRegionY + 6) / 8; regionY++)</code></p>
<p>bigRegionX and bigRegionY are the values the server sends to the client, this is;</p>
<pre><code class="lang-auto">(Actual co-ordinate / 8)</code></pre>
<p>Now, each actual map region should be co-ordinates / 64.</p>
<p>Map regions have an unique id, and each region id is calculated like this;</p>
<pre><code class="lang-auto">(mapRegionX &lt;&lt; 8) + mapRegionY;</code></pre>
<p>This id is then used to locate the landscape map id and object map id, from the “map_index” data chunk.</p>
<p>Now, the 104x104 tile “buffer” is a cut of the current region you are on plus the other loaded regions.</p>
<p>So, im guessing if enter a region from teleporting or logging in and you are in the dead center of it the client will load 9 maps and the 104x104 array will look like the following image;</p>
<p><img src="http://img6.imageshack.us/img6/7317/region.png" alt width="" height=""></p>
      </div>

      <meta itemprop='headline' content='The runescape region system'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Jython.html'><span itemprop='name'>Jython</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-12-29T02:40:30Z'>
            <time itemprop='dateModified' datetime='2016-07-31T13:34:48Z' class='post-time'>
              July 31, 2016,  1:34pm
            </time>
        <span itemprop='position'>#17</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>welll your post was kind of pointless because i and likely everyone else in the thread knew it but you’re from moparscape so i’ll congratulate you</p>
      </div>

      <meta itemprop='headline' content='The runescape region system'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/i_own_pking.html'><span itemprop='name'>i_own_pking</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-12-29T23:13:38Z'>
            <time itemprop='dateModified' datetime='2016-07-31T13:36:41Z' class='post-time'>
              July 31, 2016,  1:36pm
            </time>
        <span itemprop='position'>#18</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote no-group quote-modified" data-post="17" data-topic="317793">
<div class="title">
<div class="quote-controls"></div>
 oksuper_:</div>
<blockquote>
<p>welll your post was kind of pointless because i and likely everyone else in the thread new it but you’re from moparscape so i’ll congratulate you</p>
</blockquote>
</aside>
<p>Actually, im from rune server, “Zee best”. This is the first time ive been on this site in probly almost a year, and longer for actual <a href="http://moparisthebest.com/" rel="nofollow noopener">moparisthebest.com</a>.</p>
      </div>

      <meta itemprop='headline' content='The runescape region system'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Original_Daniel.html'><span itemprop='name'>Original_Daniel</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-12-30T02:18:28Z'>
            <time itemprop='dateModified' datetime='2016-07-31T13:37:04Z' class='post-time'>
              July 31, 2016,  1:37pm
            </time>
        <span itemprop='position'>#19</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote no-group quote-modified" data-post="18" data-topic="317793">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/i_own_pking/40/5_513041d5f7104045db30895d3b90af16.png" class="avatar"> i_own_pking:</div>
<blockquote>
<p>Actually, im from rune server, “Zee best”. This is the first time ive been on this site in probly almost a year, and longer for actual <a href="http://moparisthebest.com/" rel="nofollow noopener">moparisthebest.com</a>.</p>
</blockquote>
</aside>
<p>potayto potarto</p>
      </div>

      <meta itemprop='headline' content='The runescape region system'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Killer-99-pkz.html'><span itemprop='name'>Killer-99-pkz</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-12-30T13:49:54Z'>
            <time itemprop='dateModified' datetime='2016-07-31T13:37:44Z' class='post-time'>
              July 31, 2016,  1:37pm
            </time>
        <span itemprop='position'>#20</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“c|p, post:11, topic:317793”][quote author=oksuper_ link=topic=414306.msg3051394#msg3051394 date=1260116386]<br>
so ‘model_bound_radius’ is in fact just a model bounding ‘cube’ width/height ?<br>
[/quote]</p>
<p>Something like that.</p>
<p>Also, I think it’s important to mention:</p>
<p><code>        x = smallX[0] * 128 + boundingCube * 64;
        y = smallY[0] * 128 + boundingCube * 64;</code></p>
<p>[code]    private void renderPlayers(boolean first)<br>
{<br>
if(myPlayer.x &gt;&gt; 7 == destX &amp;&amp; myPlayer.y &gt;&gt; 7 == destY)<br>
destX = 0;<br>
int player_count = playerCount;<br>
if(first)<br>
player_count = 1;<br>
for(int l = 0; l &lt; player_count; l++)<br>
{<br>
Player player;<br>
int i1;<br>
if(first)<br>
{<br>
player = myPlayer;<br>
i1 = myPlayerIndex &lt;&lt; 14;<br>
} else<br>
{<br>
player = playerArray[playerIndices[l]];<br>
i1 = playerIndices[l] &lt;&lt; 14;<br>
}<br>
if(player == null || !player.isVisible())<br>
continue;<br>
player.aBoolean1699 = (lowMem &amp;&amp; playerCount &gt; 50 || playerCount &gt; 200) &amp;&amp; !first &amp;&amp; player.anInt1517 == player.anInt1511;<br>
int tile_x = player.x &gt;&gt; 7;<br>
int tile_y = player.y &gt;&gt; 7;<br>
if(tile_x &lt; 0 || tile_x &gt;= 104 || tile_y &lt; 0 || tile_y &gt;= 104)<br>
continue;</p>
<pre><code>        // what is this?
        if(player.aModel_1714 != null &amp;&amp; loopCycle &gt;= player.anInt1707 &amp;&amp; loopCycle &lt; player.anInt1708)
        {
            player.aBoolean1699 = false;
            player.renderHeight = getEntityTerrainHeightOffset(plane, player.y, player.x);
            worldController.method286(plane, player.y, player, player.orientation, player.anInt1722, player.x, player.renderHeight, player.anInt1719, player.anInt1721, i1, player.anInt1720);
            continue;
        }

        if((player.x &amp; 0x7f) == 64 &amp;&amp; (player.y &amp; 0x7f) == 64)
        {
            if(anIntArrayArray929[tile_x][tile_y] == anInt1265)
                continue;
            anIntArrayArray929[tile_x][tile_y] = anInt1265;
        }
        player.renderHeight = getEntityTerrainHeightOffset(plane, player.y, player.x);
        worldController.placeAnimable(plane, player.orientation, player.renderHeight, i1, player.y, 60, player.x, player, player.aBoolean1541);
    }

}[/code]
</code></pre>
<p>[code]    private int getEntityTerrainHeightOffset(int plane, int y, int x)<br>
{<br>
int tile_x = x &gt;&gt; 7;<br>
int tile_y = y &gt;&gt; 7;<br>
if(tile_x &lt; 0 || tile_y &lt; 0 || tile_x &gt; 103 || tile_y &gt; 103)<br>
return 0;</p>
<pre><code>    int _plane = plane;
    if(_plane &lt; 3 &amp;&amp; (byteGroundArray[1][tile_x][tile_y] &amp; 2) == 2)
        _plane++;
                     
    // XXX: not a scale, refactor
    int tile_xscale = x &amp; 0x7f;
    int tile_yscale = y &amp; 0x7f;
    // calculate average tile height of top row (normalized)
    int top_avg = ((tileMeanHeight[_plane][tile_x][tile_y] * (128 - tile_xscale)) + (tileMeanHeight[_plane][tile_x + 1][tile_y] * tile_xscale)) &gt;&gt; 7;
    // and the bottom row (normalized)
    int bottom_avg = ((tileMeanHeight[_plane][tile_x][tile_y + 1] * (128 - tile_xscale)) + (tileMeanHeight[_plane][tile_x + 1][tile_y + 1] * tile_xscale)) &gt;&gt; 7;
    // average them both (and normalize) and return
    return ((top_avg * (128 - tile_yscale)) + (bottom_avg * tile_yscale)) &gt;&gt; 7;
}[/code]
</code></pre>
<p>Entity.x/Entity.y in moparisthebest’s deob is a packed field (I guess you could call it that).  The last 7 bits determine how much to offset the model (center etc), the rest are the actual tile x/y.   Throughout my refactor so far I’ve been using a rather lame quake-esque name ‘r_screenx’ ‘r_screeny’ ‘r_screenz’:</p>
<p>[code]    private void worldToScreen(Entity entity, int i)<br>
{<br>
worldToScreen(entity.x, i, entity.y);<br>
}</p>
<pre><code>private void worldToScreen(int r_screenx, int _height, int r_screeny)
{
    if(r_screenx &lt; 128 || r_screeny &lt; 128 || r_screenx &gt; 0x3300 || r_screeny &gt; 0x3300)
    {
        wtsScreenX = -1;
        wtsScreenY = -1;
        return;
    }
    int r_screenz = getEntityTerrainHeightOffset(plane, r_screeny, r_screenx) - _height;
    r_screenx -= xCameraPos;
    r_screenz -= zCameraPos;
    r_screeny -= yCameraPos;

    // XXX: refactor
    int sineY = Model.sineTable[cameraPitch];
    int cosineY = Model.cosineTable[cameraPitch];
    int sineX = Model.sineTable[cameraYaw];
    int cosineX = Model.cosineTable[cameraYaw];


    int temp = ((r_screeny * sineX) + (r_screenx * cosineX)) &gt;&gt; 16;

    r_screeny = ((r_screeny * cosineX) - (r_screenx * sineX)) &gt;&gt; 16;
    r_screenx = temp;

    temp = ((r_screenz * cosineY) - (r_screeny * sineY)) &gt;&gt; 16;

    r_screeny = ((r_screenz * sineY) + (r_screeny * cosineY)) &gt;&gt; 16;
    r_screenz = temp;

    if(r_screeny &gt;= 50)
    {
        wtsScreenX = Texture.textureInt1 + (r_screenx &lt;&lt; 9) / r_screeny;
        wtsScreenY = Texture.textureInt2 + (r_screenz &lt;&lt; 9) / r_screeny;
        //String s = String.format("[%d + (%d * 512) / %d, %d + (%d * 512) / %d", Texture.textureInt1, r_screenx, r_screeny,
        //                                                                        Texture.textureInt2, r_screenz, r_screeny);
        //chatTextDrawingArea.drawText(0xff0000, s, wtsScreenY - 10, wtsScreenX);
    } else
    {
        wtsScreenX = -1;
        wtsScreenY = -1;
    }
}[/code]
</code></pre>
<p>The ‘screen’ being the 3d ‘screen’/canvas/whatever the fuck.  Texture.textureInt1/2 in that example are the width/height of the texture of the model currently being rendered.</p>
<p>minor edit: frank_, I know you’re gonna cry about naming.  Don’t worry, it will be cleaned up eventually (probably never).[/quote]<br>
What cave did u get that out of?</p>
      </div>

      <meta itemprop='headline' content='The runescape region system'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>

  <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
      <span itemprop='name'><b><a rel="next" itemprop="url" href="3177934658.html?page=2">next page →</a></b></span>
  </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/the-runescape-region-system/317793 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Aug 2019 01:43:27 GMT -->
</html>
