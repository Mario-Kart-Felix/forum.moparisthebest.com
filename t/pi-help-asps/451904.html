<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/pi-help-asps/451904 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Aug 2019 01:13:10 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>[PI] help asps! - Runescape - moparisthebest.com</title>
    <meta name="description" content="i have downloaded the insanityx source and fixed all what i can, but now that theres 10+ players on a guy came and told me that there was an big bug in the assult minigame (barbariandefence), and the bug was that, you ca&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="451904.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;[PI] help asps!&#39;" href="451904.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/pi-help-asps/451904" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/pi-help-asps/451904" />
<meta property="og:title" content="[PI] help asps!" />
<meta name="twitter:title" content="[PI] help asps!" />
<meta property="og:description" content="i have downloaded the insanityx source and fixed all what i can, but now that theres 10+ players on a guy came and told me that there was an big bug in the assult minigame (barbariandefence), and the bug was that, you can’t attack the npc’s inside it. can someone please help me?  CODE:  [code]package server.model.minigames;  import server.model.players.Client;  import server.model.npcs.NPC;  import server.Server;  import server.util.Misc;  /**    @author Sanity : Edited by notepad/ Redone BY GAB..." />
<meta name="twitter:description" content="i have downloaded the insanityx source and fixed all what i can, but now that theres 10+ players on a guy came and told me that there was an big bug in the assult minigame (barbariandefence), and the bug was that, you can’t attack the npc’s inside it. can someone please help me?  CODE:  [code]package server.model.minigames;  import server.model.players.Client;  import server.model.npcs.NPC;  import server.Server;  import server.util.Misc;  /**    @author Sanity : Edited by notepad/ Redone BY GAB..." />
<meta property="article:published_time" content="2012-07-29T22:40:29+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="451904.html">[PI] help asps!</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/ownedin3d.html'><span itemprop='name'>ownedin3d</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-07-29T22:40:29Z'>
            <time itemprop='dateModified' datetime='2016-08-03T19:47:04Z' class='post-time'>
              August 3, 2016,  7:47pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>i have downloaded the insanityx source and fixed all what i can, but now that theres 10+ players on a guy came and told me that there was an big bug in the assult minigame (barbariandefence), and the bug was that, you can’t attack the npc’s inside it. can someone please help me?</p>
<p>CODE:</p>
<p>[code]package server.model.minigames;</p>
<p>import server.model.players.Client;<br>
import server.model.npcs.NPC;<br>
import server.Server;<br>
import server.util.Misc;</p>
<p>/**</p>
<ul>
<li>
<span class="mention">@author</span> Sanity : Edited by notepad/ Redone BY GABBE - Added events to send youre delt damage ect. Redid spawning npc’s, added how much points you will receive and alot more.  WORKS PERFECT NOW, fixed the spirit’s anims ect!<br>
*/</li>
</ul>
<p>public class BarbarianDefence {<br>
private final int[][] WAVES = {{5213, 5213, 5230, 5230}, // Wave 1<br>
{5213, 5213, 5230, 5230, 5213, 5213, 5230, 5230}, // Wave 2<br>
{5214, 5214, 5231, 5231, 5213, 5213, 5230, 5230}, // Wave 3<br>
{5214, 5214, 5231, 5231, 5214, 5214, 5231, 5231}, // Wave 5<br>
{5215, 5215, 5232, 5232, 5214, 5214, 5231, 5231}, // Wave 4<br>
{5215, 5215, 5232, 5232, 5215, 5215, 5232, 5232}, // Wave 5<br>
{5216, 5216, 5233, 5233, 5215, 5215, 5232, 5232}, // Wave 6<br>
{5216, 5216, 5233, 5233, 5216, 5216, 5233, 5233}, // Wave 7<br>
{5217, 5217, 5234, 5234, 5216, 5216, 5233, 5233}, // Wave 8<br>
{5217, 5217, 5234, 5234, 5217, 5217, 5234, 5234}, // Wave 9<br>
{5218, 5218, 5235, 5235, 5217, 5217, 5234, 5234}, // Wave 10<br>
{5218, 5218, 5235, 5235, 5218, 5218, 5235, 5235}, // Wave 11<br>
{5219, 5219, 5236, 5236, 5218, 5218, 5235, 5235}, // Wave 12<br>
{5219, 5219, 5236, 5236, 5219, 5219, 5236, 5236}, // Wave 13<br>
{5219, 5219, 5237, 5237, 5219, 5219, 5236, 5236}, // Wave 14<br>
{5219, 5219, 5237, 5237, 5219, 5219, 5237, 5237}, // Wave 15<br>
{5215, 5215, 5232, 5232, 5215, 5215, 5232, 5232, 5216, 5216, 5233, 5233}, // Wave 16<br>
{5216, 5216, 5234, 5234, 5216, 5216, 5234, 5234, 5219, 5219, 5237, 5237}, // Wave 17<br>
{5217, 5217, 5235, 5235, 5216, 5216, 5234, 5234, 5219, 5219, 5237, 5237}, // Wave 18<br>
{5218, 5218, 5236, 5236, 5216, 5216, 5234, 5234, 5219, 5219, 5237, 5237}, // Wave 19<br>
{5218, 5218, 5236, 5236, 5216, 5216, 5234, 5234, 5219, 5219, 5237, 5237}, // Wave 20<br>
{5218, 5218, 5236, 5236, 5217, 5217, 5235, 5235, 5219, 5219, 5237, 5237}, // Wave 21<br>
{5218, 5218, 5236, 5236, 5218, 5218, 5235, 5235, 5218, 5218, 5236, 5236}, // Wave 22<br>
{5219, 5219, 5237, 5237, 5218, 5218, 5236, 5236, 5219, 5219, 5237, 5237}, // Wave 23<br>
{5219, 5219, 5237, 5237, 5219, 5219, 5237, 5237, 5219, 5219, 5237, 5237}, // Wave 24<br>
{5247}, // Wave 25 - FINAL WAVE<br>
};</p>
<pre><code>private final int[][] COORDS = {{3160, 9758}, {3176, 9758}, {3169, 9755}, {3168, 9761}, 
								{3161, 9758}, {3175, 9758}, {3169, 9756}, {3168, 9760}, 
								{3164, 9761}, {3164, 9755}, {3172, 9761}, {3172, 9755}};

public boolean killableNpcs(int i) {
	switch (Server.npcHandler.npcs[i].npcType) {
		case 5213: case 5214: case 5215: case 5216: case 5217: case 5218: case 5219: /* Penance fighters*/
		case 5229: case 5230: case 5231: case 5232: case 5233: case 5234: case 5235: 
		case 5236: case 5237: /* Penance rangers */ case 5247: /* Penance queen*/
		return true;		
	}
	return false;
}
				

public void spawnWave(Client c) {
	if (c != null &amp;&amp; c.inBarbDef) {
		c.getCombat().resetPrayers();
		if (c.barbWave &gt;= WAVES.length) {
			endGame(c, true);
			c.barbWave = 0;
			return;				
		}
			c.getPA().movePlayer(3169, 9757, c.playerId * 4);
			c.sendMessage("The Spirit teleports you into the middle.");
			c.sendMessage("&lt;shad=13369497&gt;[BARB ASSAULT BOT] Welcome to wave "+(c.barbWave+1)+"/25!");
		int npcAmount = WAVES[c.barbWave].length;
		for (int j = 0; j &lt; npcAmount; j++) {
			int npc = WAVES[c.barbWave][j];
			int X = COORDS[j][0];
			int Y = COORDS[j][1];
			int H = c.heightLevel;
			int hp = getHp(npc);
			int max = getMax(npc);
			int atk = getAtk(npc);
			int def = getDef(npc);
			Server.npcHandler.spawnNpc55(c, npc, X, Y, H, 0, hp, max, atk, def, true, npc == 5247);
			if (npc == 5247)
				spawnHelpers(c, COORDS);
			c.getPA().stillGfx(86, X, Y, c.heightLevel, 0);
		}
		if (c.spawned1 == false) 
			Server.npcHandler.spawnNpc56(c, 751, 3168, 9758, c.heightLevel, 0, 0, 0, 0, 0, false, false);
			c.spawned1 = true;
		//	c.barbLeader = 1;
		//NPC n = Server.npcHandler.npcs[c.barbLeader];
		//n.forceChat("Minions, WHAT ARE YOU DOING? GET HIM!!");
		//n.forceChat(n.barbRandom(c, Misc.random(5)));
	//	n.forceChat("Minions, WHAT ARE YOU DOING? GET HIM!!");
		c.barbsToKill = npcAmount;
		c.barbsKilled = 0;
												NPC n = Server.npcHandler.npcs[c.barbLeader];
		n.forceChat("Minions, WHAT ARE YOU DOING? GET HIM!!");
					n.requestAnimation(6728, 0);
		n.gfx0(1176);
	}
}


public void endGame(Client c, boolean victory) {
	int pointsToAdd = ((int)c.barbDamage/80) + (victory ? 40 : 0);
	c.barbPoints += pointsToAdd;
	c.sendMessage(victory ? "Congratulations, you've completed all " +WAVES.length+ " waves of Barbarian Defense!" : "Oh dear, you've failed to survive all the waves!");
	c.sendMessage("You recieve " +pointsToAdd+ " points for your efforts.");
	c.barbDamage = c.barbLeader = 0;
	System.out.println("Barbarian Assault Completed By: "+c.playerName+"");
	NPC n = Server.npcHandler.npcs[c.barbLeader];
	c.getPA().movePlayer(3187, 9758, 0);		
	c.inBarbDef = false;
	c.playerLevel[1] = c.getPA().getLevelForXP(c.playerXP[1]);
</code></pre>
<p>c.playerLevel[2] = c.getPA().getLevelForXP(c.playerXP[2]);<br>
c.playerLevel[3] = c.getPA().getLevelForXP(c.playerXP[3]);<br>
c.playerLevel[4] = c.getPA().getLevelForXP(c.playerXP[4]);<br>
c.playerLevel[5] = c.getPA().getLevelForXP(c.playerXP[5]);<br>
c.playerLevel[6] = c.getPA().getLevelForXP(c.playerXP[6]);<br>
c.getPA().refreshSkill(1);<br>
c.getPA().refreshSkill(2);<br>
c.getPA().refreshSkill(3);<br>
c.getPA().refreshSkill(4);<br>
c.getPA().refreshSkill(5);<br>
c.getPA().refreshSkill(6);<br>
c.barbWave = 0;<br>
c.needstorelog = true;<br>
c.spawned1 = false;<br>
}</p>
<pre><code>public void enter(Client c) {
if(c.needstorelog == true) {
c.sendMessage("Anti Bug System: Please relog before starting a new wave.");
return;
}
c.spawned1 = false;
	c.getPA().movePlayer(3169, 9757, c.playerId * 4);
	System.out.println("Barbarian Assault Started By: "+c.playerName+"");
	c.inBarbDef = true;
	//c.barbLeader = -1;
	spawnWave(c);
}


public void spawnHelpers(Client c, int[][] coords) {
	for (int j = 1; j &lt; coords.length; j++)
		Server.npcHandler.spawnNpc55(c, 751, coords[j][0], coords[j][1], c.heightLevel, 0, 45, 7, 100, 50, true, false);
		c.lastBDWave = true;
		c.getPA().movePlayer(3169, 9757, c.playerId * 4);
		c.sendMessage("The spirit drags you into the middle!");																
																							
}

public int getHp(int npc) {
	switch (npc) {
	/* Penance fighters */
	case 5213: return 32;
	case 5214: return 37;
	case 5215: return 38;
	case 5216: return 49;
	case 5217: return 50;
	case 5218: return 56;
	case 5219: return 57;
	/* Penance rangers */
	case 5229: return 20;
	case 5230: return 28;
	case 5231: return 29;
	case 5232: return 34;
	case 5233: return 41;
	case 5234: return 50;
	case 5235: return 50;
	case 5236: return 55;
	case 5237: return 58;
	/* Penance queen */
	case 5247: return 250;
	}
	return 10;
}

public int getMax(int npc) {
	switch (npc) {
	/* Penance fighters */
	case 5213: return 5;
	case 5214: return 5;
	case 5215: return 6;
	case 5216: return 6;
	case 5217: return 7;
	case 5218: return 8;
	case 5219: return 9;
	/* Penance rangers */
	case 5229: return 3;
	case 5230: return 4;
	case 5231: return 4;
	case 5232: return 5;
	case 5233: return 5;
	case 5234: return 6;
	case 5235: return 7;
	case 5236: return 8;
	case 5237: return 9;
	/* Penance queen */
	case 5247: return 40;
	}
	return 5;
}

public int getAtk(int npc) {
	switch (npc) {
	/* Penance fighters */
	case 5213:
	case 5214:
	case 5215: return 145;
	case 5216: 
	case 5217: 
	case 5218: return 165;
	case 5219: return 180;
	/* Penance rangers */
	case 5229:
	case 5230:
	case 5231: return 125;
	case 5232: 
	case 5233: 
	case 5234: return 135;
	case 5235: 
	case 5236: 
	case 5237: return 150;
	/* Penance queen */
	case 5247: return 400;
	}
	return 100;
}

public int getDef(int npc) {
	switch (npc) {
	/* Penance fighters */
	case 5213:
	case 5214:
	case 5215: return 110;
	case 5216: 
	case 5217: 
	case 5218: return 120;
	case 5219: return 140;
	/* Penance rangers */
	case 5229:
	case 5230:
	case 5231: return 90;
	case 5232: 
	case 5233: 
	case 5234: return 100;
	case 5235: 
	case 5236: 
	case 5237: return 120;
	/* Penance queen */
	case 5247: return 250;
	}
	return 100;
}
</code></pre>
<p>}[/code]</p>
      </div>

      <meta itemprop='headline' content='[PI] help asps!'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/pi-help-asps/451904 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Aug 2019 01:13:11 GMT -->
</html>
