<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/317-login-sequence-issue/551613 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:06:50 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>317 Login Sequence Issue - Runescape - moparisthebest.com</title>
    <meta name="description" content="This is my first thread and first time ever developing a RuneScape Private Server, but I&amp;#39;ve been programming for about 10 years and have had a pretty good influence in CO Private Server development. I&amp;#39;m trying to write m&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="551613.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;317 Login Sequence Issue&#39;" href="551613.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/317-login-sequence-issue/551613" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/317-login-sequence-issue/551613" />
<meta property="og:title" content="317 Login Sequence Issue" />
<meta name="twitter:title" content="317 Login Sequence Issue" />
<meta property="og:description" content="This is my first thread and first time ever developing a RuneScape Private Server, but I’ve been programming for about 10 years and have had a pretty good influence in CO Private Server development. I’m trying to write my own source from scratch (In C#) targetting 317, but I seem to have an issue (At least to my knowledge.)  I’ve been trying to adapt knowledge reading packet protocols and the way other sources are handling login. It’s a bit confusing and not too straight forward, but I think I g..." />
<meta name="twitter:description" content="This is my first thread and first time ever developing a RuneScape Private Server, but I’ve been programming for about 10 years and have had a pretty good influence in CO Private Server development. I’m trying to write my own source from scratch (In C#) targetting 317, but I seem to have an issue (At least to my knowledge.)  I’ve been trying to adapt knowledge reading packet protocols and the way other sources are handling login. It’s a bit confusing and not too straight forward, but I think I g..." />
<meta property="article:published_time" content="2015-05-21T22:10:53+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="551613.html">317 Login Sequence Issue</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Bauzz.html'><span itemprop='name'>Bauzz</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-05-21T22:10:53Z'>
            <time itemprop='dateModified' datetime='2016-08-04T15:08:31Z' class='post-time'>
              August 4, 2016,  3:08pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>This is my first thread and first time ever developing a RuneScape Private Server, but I’ve been programming for about 10 years and have had a pretty good influence in CO Private Server development. I’m trying to write my own source from scratch (In C#) targetting 317, but I seem to have an issue (At least to my knowledge.)</p>
<p>I’ve been trying to adapt knowledge reading packet protocols and the way other sources are handling login. It’s a bit confusing and not too straight forward, but I think I got it some how.</p>
<p>This is how I am handling my login sequence so far.</p>
<pre><code class="lang-auto">{
	client.ReadByte(); // ignore ... (This is 14 ??)
				
	var nameBit = client.ReadByte();
				
	client.WriteZero(8); // ignored by the client ...
				
	// key-exchange
	client.WriteByte(0);
	client.WriteInt64(serverSessionKey);	
				
	client.ReadUInt16(); // ignore ...
	
	byte loginType = client.ReadByte();
	Console.WriteLine(loginType);
}</code></pre>
<p>To my knowledge then loginType is supposed to be 16 or 18.<br>
However I get 255 as the loginType.</p>
<p>Am I missing any packets that I have to send/receive or am I doing it totally wrong so far?</p>
<p>If anyone can point out what I’m doing wrong.</p>
<p>PS: What I’m seeking is not some code to copy-paste, but some guidance whether I’m on the right track or not.</p>
      </div>

      <meta itemprop='headline' content='317 Login Sequence Issue'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/whackatre.html'><span itemprop='name'>whackatre</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-05-21T22:31:27Z'>
            <time itemprop='dateModified' datetime='2016-08-04T15:08:31Z' class='post-time'>
              August 4, 2016,  3:08pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <blockquote>Stage 3: Client -&gt; Server
Data Type	Value
byte	"connect status"
byte	"size"
byte	255
short	317</blockquote>
<p>so afaik, you ignored the connect sts and size when you read the short, and then you read the next byte (255). does that make sense? rswiki says the sts is 16 or 18.</p>
      </div>

      <meta itemprop='headline' content='317 Login Sequence Issue'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Bauzz.html'><span itemprop='name'>Bauzz</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-05-22T09:17:46Z'>
            <time itemprop='dateModified' datetime='2016-08-04T15:08:33Z' class='post-time'>
              August 4, 2016,  3:08pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Thanks a lot for the heads up!<br>
Now modified my code, however I get everything as expected, except for the last short. It get 15617 and not 317 as expected.</p>
<p>This is what I get “16”, “73”, “255”, “15617”.<br>
Still trying to mess around and see if it’s something I did wrong.</p>
<p>Here is my code:</p>
<pre><code class="lang-auto">{
				client.ReadByte(); // ignore ...
				
				var nameBit = client.ReadByte();
				
				client.WriteZero(8); // ignored by the client ...
				
				// key-exchange
				client.WriteByte(0);
				client.WriteInt64(serverSessionKey);	
				
				// login info beginning ...
				var status = client.ReadByte();
				var size = client.ReadByte();
				var data1 = client.ReadByte();
				var data2 = client.ReadUInt16();
				Console.WriteLine("{0} {1} {2} {3}", status, size, data1, data2);
			}</code></pre>
      </div>

      <meta itemprop='headline' content='317 Login Sequence Issue'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/whackatre.html'><span itemprop='name'>whackatre</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-05-22T10:52:24Z'>
            <time itemprop='dateModified' datetime='2016-08-04T15:08:33Z' class='post-time'>
              August 4, 2016,  3:08pm
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Bauzz, post:3, topic:551613”]Thanks a lot for the heads up!<br>
Now modified my code, however I get everything as expected, except for the last short. It get 15617 and not 317 as expected.</p>
<p>This is what I get “16”, “73”, “255”, “15617”.<br>
Still trying to mess around and see if it’s something I did wrong.</p>
<p>Here is my code:</p>
<p>[code]<br>
{<br>
client.ReadByte(); // ignore …</p>
<pre><code>			var nameBit = client.ReadByte();
			
			client.WriteZero(8); // ignored by the client ...
			
			// key-exchange
			client.WriteByte(0);
			client.WriteInt64(serverSessionKey);	
			
			// login info beginning ...
			var status = client.ReadByte();
			var size = client.ReadByte();
			var data1 = client.ReadByte();
			var data2 = client.ReadUInt16();
			Console.WriteLine("{0} {1} {2} {3}", status, size, data1, data2);
		}
</code></pre>
<p>[/code][/quote]</p>
<p>not sure, sorry. make sure you check endianness and signed/unsigned though. could be the problem.</p>
      </div>

      <meta itemprop='headline' content='317 Login Sequence Issue'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Bauzz.html'><span itemprop='name'>Bauzz</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-05-22T11:55:54Z'>
            <time itemprop='dateModified' datetime='2016-08-04T15:08:33Z' class='post-time'>
              August 4, 2016,  3:08pm
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Thank you a lot, totally didn’t take Endian into account. I get the correct values now.</p>
      </div>

      <meta itemprop='headline' content='317 Login Sequence Issue'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/317-login-sequence-issue/551613 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:06:50 GMT -->
</html>
