<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Error with cache downloder</title>
    <link>https://forum.moparisthebest.com/t/error-with-cache-downloder/552687</link>
    <description>the error
[IMG]http://i57.tinypic.com/25hil1g.png[/img]
this is my cachedownloder.java
[code]import java.io.File;
import java.io.IOException;
import java.io.OutputStream;
import java.io.FileWriter;
import java.io.BufferedWriter;
import java.io.BufferedOutputStream;
import java.io.BufferedInputStream;
import java.io.FileOutputStream;
import java.io.FileInputStream;
import java.io.InputStream;
import java.net.URLConnection;
import java.net.URL;
import java.util.zip.ZipFile;
import java.util.zip.ZipEntry;
import java.util.zip.ZipInputStream;
import java.util.Enumeration;

import sign.signlink;

public class CacheDownloader {

	private client client;

	private final int BUFFER = 1024;

	private final int VERSION = 5; // Version of cache
	//private String cacheLink = &quot;http://dl.dropbox.com/s/2ll3rv2faifep31/V2.1%20Cache.zip&quot;; // Link to cache
	private String cacheLink = &quot;http://dl.dropbox.com/s/2ll3rv2faifep31/V2.1%20Cache.zip&quot;; // Link to cache
	
	private String fileToExtract = getCacheDir() + getArchivedName();

	public CacheDownloader(client client) {
		this.client = client;
	}

	private void drawLoadingText(String text) {
		client.drawLoadingText(35, text);
		//System.out.println(text);
	}


	private void drawLoadingText(int amount, String text) {
		client.drawLoadingText(amount, text);
		//System.out.println(text);
	}

	private String getCacheDir() {
		return signlink.findcachedir();
	}

	private String getCacheLink() {
		return cacheLink;
	}

	private int getCacheVersion() {
		return VERSION;
	}

	public CacheDownloader downloadCache() {
		try {
		File location = new File(getCacheDir());
		File version = new File(getCacheDir() + &quot;/cacheVersion&quot; + getCacheVersion() + &quot;.dat&quot;);
		
		if(!location.exists()) {
			//drawLoadingText(&quot;Loading new Updates....&quot;);
			downloadFile(getCacheLink(), getArchivedName());

			unZip();
			//System.out.println(&quot;UNZIP&quot;);

			BufferedWriter versionFile = new BufferedWriter(new FileWriter(getCacheDir() + &quot;/cacheVersion&quot; + getCacheVersion() + &quot;.dat&quot;));
			versionFile.close();
			deleteZIP(getArchivedName());
		} else {
			if(!version.exists()) {
				//drawLoadingText(&quot;~ First Time Installation, Only Once! ~&quot;);
				downloadFile(getCacheLink(), getArchivedName());

				unZip();
				//System.out.println(&quot;UNZIP&quot;);

				BufferedWriter versionFile = new BufferedWriter(new FileWriter(getCacheDir() + &quot;/cacheVersion&quot; + getCacheVersion() + &quot;.dat&quot;));
				versionFile.close();
				deleteZIP(getArchivedName());

			} else {
				return null;
			}
		}
		} catch(Exception e) {

		}
		return null;
	}
	
	private void downloadFile(String adress, String localFileName) {
		OutputStream out = null;
		URLConnection conn;
		InputStream in = null;
		
		try {

			URL url = new URL(adress);
			out = new BufferedOutputStream(
				new FileOutputStream(getCacheDir() + &quot;/&quot; +localFileName)); 

			conn = url.openConnection();
			in = conn.getInputStream(); 
		
			byte[] data = new byte[BUFFER]; 
	
			int numRead;
			long numWritten = 0;
			int length = conn.getContentLength();

	
			while((numRead = in.read(data)) != -1) {
				out.write(data, 0, numRead);
				numWritten += numRead;

            			int percentage = (int)(((double)numWritten / (double)length) * 100D);
				drawLoadingText(percentage, &quot;Downloading Cache &quot; + percentage + &quot;%...&quot;);

			}

			System.out.println(localFileName + &quot;\t&quot; + numWritten);
			drawLoadingText(&quot;Unpacking..&quot;);

		} catch (Exception exception) {
			exception.printStackTrace();
		} finally {
			try {
				if (in != null) {
					in.close();
				}
				if (out != null) {
					out.close();
				}
			} catch (IOException ioe) {
			}
		}

	}

	private String getArchivedName() {
		int lastSlashIndex = getCacheLink().lastIndexOf(&#39;/&#39;);
		if (lastSlashIndex &gt;= 0 
			&amp;&amp; lastSlashIndex &lt; getCacheLink().length() -1) { 
			return getCacheLink().substring(lastSlashIndex + 1);
		} else {
			//System.err.println(&quot;error retreiving archivaed name.&quot;);
		}
		return &quot;&quot;;
	}




	private void unZip() {

		try {
    			InputStream in = 
				new BufferedInputStream(new FileInputStream(fileToExtract));
			ZipInputStream zin = new ZipInputStream(in);
			ZipEntry e;

			while((e=zin.getNextEntry()) != null) {

               			if(e.isDirectory()) {
					(new File(getCacheDir() + e.getName())).mkdir();
               			} else {

				if (e.getName().equals(fileToExtract)) {
					unzip(zin, fileToExtract);
					break;
				}
       					unzip(zin, getCacheDir() + e.getName());
				}
				//System.out.println(&quot;unzipping2 &quot; + e.getName());
			}
			zin.close();

		} catch(Exception e) {
			e.printStackTrace();
		}
	}

private void deleteZIP(String fileName){
    // A File object to represent the filename
    File f = new File(getCacheDir() + fileName);

    // Make sure the file or directory exists and isn&#39;t write protected
    if (!f.exists())
      throw new IllegalArgumentException(
          &quot;Delete: no such file or directory: &quot; + fileName);

    if (!f.canWrite())
      throw new IllegalArgumentException(&quot;Delete: write protected: &quot;
          + fileName);

    // If it is a directory, make sure it is empty
    if (f.isDirectory()) {
      String[] files = f.list();
      if (files.length &gt; 0)
        throw new IllegalArgumentException(
            &quot;Delete: directory not empty: &quot; + fileName);
    }

    // Attempt to delete it
    boolean success = f.delete();

    if (!success)
      throw new IllegalArgumentException(&quot;Delete: deletion failed&quot;);

	}

	private void unzip(ZipInputStream zin, String s) 
		throws IOException {

		FileOutputStream out = new FileOutputStream(s);
		//System.out.println(&quot;unzipping &quot; + s);
		byte [] b = new byte[BUFFER];
		int len = 0;

		while ((len = zin.read(b)) != -1) {
			out.write(b,0,len);
		}
		out.close();
	}
}[/code]</description>
    
    <lastBuildDate>Thu, 20 Aug 2015 23:41:11 +0000</lastBuildDate>
    <category>Game Development</category>
    <atom:link href="https://forum.moparisthebest.com/t/error-with-cache-downloder/552687.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Error with cache downloder</title>
        <dc:creator><![CDATA[@Welliton_inc Welliton_inc]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/welliton_inc">@Welliton_inc</a> wrote:</p>
          <blockquote>
              <p>[quote=“kittea, post:9, topic:552687”][quote author=Welliton_inc link=topic=671602.msg4493637#msg4493637 date=1439950396]</p>
<aside class="quote">
<blockquote>
<p>Welliton Inc, you’re the most annoying person on moparscape. A lot of people learn by just getting into it and figuring it out. You’re not a god at programming. People are always told to ask questions and once they do you just bash them, so GTFO</p>
<p>Sincerely,<br>
Kittea</p>
</blockquote>
</aside>
<p>Do what you want. But how can you actually expect to put a server online to the public if you don’t even bother to learn Java? It is 2015, maybe if it was 2008 you could get away with making a server that was generic whist not having a single clue what to do. You call it “bashing” I call it a does of the truth. And the fact that you are disagreeing with me tells me you are one of those people. In which case I will remember your username so when you post your server on the advertisement thread I will know it is you.<br>
[/quote]</p>
<p>I don’t develop RSPSs, I’m just around the community because I’m stuck like all the other veterans. People will slowly learn without having Java knowledge and maybe someday have a great server. So why not just give them constructive critisiscm instead of bashing their knowledge in Java.</p>
<p>Sincerely,<br>
Kittea[/quote]</p>
<p>Again, you don’t know what your even talking about. If you actually read my previous statement, i’m referring to the ones who decide to <span class="bbcode-b">put up</span> their server <span class="bbcode-b">without</span> any experience of Java. Once the server is up, there is no going back. Every server has bugs and glitches, but once the “coder” makes a mistake/is experiencing a game breaking bug which is brought upon the server they will crumble.</p>
<p>However, there are many people who just use RSPS to experiment and implement different ideas. If you don’t have any experience in the language of Java, then you should be experimenting, but for the sake of others don’t put up a server knowing that you won’t know what to do if something game-breaking occurs…</p>
<p>Also, stop speaking like you’re writing a letter… First proof read the things you write before trying to suggest what it is you’re trying to express is “letter-quality”.</p>
<p>That is all.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/error-with-cache-downloder/552687/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/error-with-cache-downloder/552687/10</link>
        <pubDate>Thu, 20 Aug 2015 23:41:11 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-552687-10</guid>
        <source url="https://forum.moparisthebest.com/t/error-with-cache-downloder/552687.rss">Error with cache downloder</source>
      </item>
      <item>
        <title>Error with cache downloder</title>
        <dc:creator><![CDATA[@kittea kittea]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/kittea">@kittea</a> wrote:</p>
          <blockquote>
              <p>[quote=“Welliton_inc, post:8, topic:552687”][quote author=kittea link=topic=671602.msg4493625#msg4493625 date=1439943997]<br>
Welliton Inc, you’re the most annoying person on moparscape. A lot of people learn by just getting into it and figuring it out. You’re not a god at programming. People are always told to ask questions and once they do you just bash them, so GTFO</p>
<p>Sincerely,<br>
Kittea<br>
[/quote]</p>
<p>Do what you want. But how can you actually expect to put a server online to the public if you don’t even bother to learn Java? It is 2015, maybe if it was 2008 you could get away with making a server that was generic whist not having a single clue what to do. You call it “bashing” I call it a does of the truth. And the fact that you are disagreeing with me tells me you are one of those people. In which case I will remember your username so when you post your server on the advertisement thread I will know it is you.[/quote]</p>
<p>I don’t develop RSPSs, I’m just around the community because I’m stuck like all the other veterans. People will slowly learn without having Java knowledge and maybe someday have a great server. So why not just give them constructive critisiscm instead of bashing their knowledge in Java.</p>
<p>Sincerely,<br>
Kittea</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/error-with-cache-downloder/552687/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/error-with-cache-downloder/552687/9</link>
        <pubDate>Thu, 20 Aug 2015 21:25:22 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-552687-9</guid>
        <source url="https://forum.moparisthebest.com/t/error-with-cache-downloder/552687.rss">Error with cache downloder</source>
      </item>
      <item>
        <title>Error with cache downloder</title>
        <dc:creator><![CDATA[@Welliton_inc Welliton_inc]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/welliton_inc">@Welliton_inc</a> wrote:</p>
          <blockquote>
              <p>[quote=“kittea, post:7, topic:552687”]Welliton Inc, you’re the most annoying person on moparscape. A lot of people learn by just getting into it and figuring it out. You’re not a god at programming. People are always told to ask questions and once they do you just bash them, so GTFO</p>
<p>Sincerely,<br>
Kittea[/quote]</p>
<p>Do what you want. But how can you actually expect to put a server online to the public if you don’t even bother to learn Java? It is 2015, maybe if it was 2008 you could get away with making a server that was generic whist not having a single clue what to do. You call it “bashing” I call it a does of the truth. And the fact that you are disagreeing with me tells me you are one of those people. In which case I will remember your username so when you post your server on the advertisement thread I will know it is you.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/error-with-cache-downloder/552687/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/error-with-cache-downloder/552687/8</link>
        <pubDate>Wed, 19 Aug 2015 02:13:16 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-552687-8</guid>
        <source url="https://forum.moparisthebest.com/t/error-with-cache-downloder/552687.rss">Error with cache downloder</source>
      </item>
      <item>
        <title>Error with cache downloder</title>
        <dc:creator><![CDATA[@kittea kittea]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/kittea">@kittea</a> wrote:</p>
          <blockquote>
              <p>Welliton Inc, you’re the most annoying person on moparscape. A lot of people learn by just getting into it and figuring it out. You’re not a god at programming. People are always told to ask questions and once they do you just bash them, so GTFO</p>
<p>Sincerely,<br>
Kittea</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/error-with-cache-downloder/552687/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/error-with-cache-downloder/552687/7</link>
        <pubDate>Wed, 19 Aug 2015 00:26:37 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-552687-7</guid>
        <source url="https://forum.moparisthebest.com/t/error-with-cache-downloder/552687.rss">Error with cache downloder</source>
      </item>
      <item>
        <title>Error with cache downloder</title>
        <dc:creator><![CDATA[@Welliton_inc Welliton_inc]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/welliton_inc">@Welliton_inc</a> wrote:</p>
          <blockquote>
              <p>[quote=“D3i7y, post:4, topic:552687”]They are right about not understanding. But never give up on anything that’s for quitters it took me forever to convert client code the last few hours (4 1/2 Hours lol)  but even a novice programmer can use google when in doubt. This is a common issue i had this problem when i downloaded a source to rip some code from it to convert it for my deltascape server i have been fiddling around with for a few months for fun.</p>
<p>Keep at it google is very helpful even for rsps just use keywords.[/quote]</p>
<p>None of what you said is what I meant in my original post. What you’re basically saying is that you just spent hours figuring something out which could have taken a matter of seconds if you actually bothered to learn some Java. What you’re doing is pretty stubborn. If you are actually going to make a server and put it up to the public, I wouldn’t want to be playing under an owner who doesn’t even bother learning Java, because once they fuck up with the coding they have no clue about, they’ll crumble.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/error-with-cache-downloder/552687/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/error-with-cache-downloder/552687/6</link>
        <pubDate>Sun, 09 Aug 2015 20:33:56 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-552687-6</guid>
        <source url="https://forum.moparisthebest.com/t/error-with-cache-downloder/552687.rss">Error with cache downloder</source>
      </item>
      <item>
        <title>Error with cache downloder</title>
        <dc:creator><![CDATA[@Twd1995 Twd1995]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/twd1995">@Twd1995</a> wrote:</p>
          <blockquote>
              <p>I can fix this in like 10 seconds. Add me on Skype: tyty43095</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/error-with-cache-downloder/552687/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/error-with-cache-downloder/552687/5</link>
        <pubDate>Sun, 09 Aug 2015 09:08:31 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-552687-5</guid>
        <source url="https://forum.moparisthebest.com/t/error-with-cache-downloder/552687.rss">Error with cache downloder</source>
      </item>
      <item>
        <title>Error with cache downloder</title>
        <dc:creator><![CDATA[@D3i7y D3i7y]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/d3i7y">@D3i7y</a> wrote:</p>
          <blockquote>
              <p>They are right about not understanding. But never give up on anything that’s for quitters it took me forever to convert client code the last few hours (4 1/2 Hours lol)  but even a novice programmer can use google when in doubt. This is a common issue i had this problem when i downloaded a source to rip some code from it to convert it for my deltascape server i have been fiddling around with for a few months for fun.</p>
<p>Keep at it google is very helpful even for rsps just use keywords.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/error-with-cache-downloder/552687/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/error-with-cache-downloder/552687/4</link>
        <pubDate>Sun, 09 Aug 2015 04:46:14 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-552687-4</guid>
        <source url="https://forum.moparisthebest.com/t/error-with-cache-downloder/552687.rss">Error with cache downloder</source>
      </item>
      <item>
        <title>Error with cache downloder</title>
        <dc:creator><![CDATA[@Welliton_inc Welliton_inc]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/welliton_inc">@Welliton_inc</a> wrote:</p>
          <blockquote>
              <p>I know this may come of rude, but it don’t mean it to. But if you can’t even read errors and understand what they mean even when it’s telling you what the problem is, then I worry for whatever server you may be hosting.</p>
<p>it’s not just you, I’ve seen like 20 people ask the same thing regarding this mapconfig error. Could be due to all of you downloading the same source and client. But I hope you, and everyone else, actually learns some Java before hosting your server to the public. Or else you’re going to crumble when you’re faced with a game breaking error.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/error-with-cache-downloder/552687/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/error-with-cache-downloder/552687/3</link>
        <pubDate>Thu, 30 Jul 2015 11:06:33 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-552687-3</guid>
        <source url="https://forum.moparisthebest.com/t/error-with-cache-downloder/552687.rss">Error with cache downloder</source>
      </item>
      <item>
        <title>Error with cache downloder</title>
        <dc:creator><![CDATA[@gawdz666 gawdz666]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/gawdz666">@gawdz666</a> wrote:</p>
          <blockquote>
              <p>It tells you right in your error.</p>
<p>something is looking for</p>
<pre><code class="lang-auto"></code></pre>
<p>so if that file isn’t in this specific directory then it will fail.</p>
<p>look at client.java on line 111.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/error-with-cache-downloder/552687/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/error-with-cache-downloder/552687/2</link>
        <pubDate>Wed, 29 Jul 2015 18:20:21 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-552687-2</guid>
        <source url="https://forum.moparisthebest.com/t/error-with-cache-downloder/552687.rss">Error with cache downloder</source>
      </item>
      <item>
        <title>Error with cache downloder</title>
        <dc:creator><![CDATA[@idk_122 idk 122]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/idk_122">@idk_122</a> wrote:</p>
          <blockquote>
              <p>the error<br>
<img src="http://i57.tinypic.com/25hil1g.png" alt width="669" height="486"><br>
this is my cachedownloder.java</p>
<p>[code]import java.io.File;<br>
import java.io.IOException;<br>
import java.io.OutputStream;<br>
import java.io.FileWriter;<br>
import java.io.BufferedWriter;<br>
import java.io.BufferedOutputStream;<br>
import java.io.BufferedInputStream;<br>
import java.io.FileOutputStream;<br>
import java.io.FileInputStream;<br>
import java.io.InputStream;<br>
import java.net.URLConnection;<br>
import java.net.URL;<br>
import java.util.zip.ZipFile;<br>
import java.util.zip.ZipEntry;<br>
import java.util.zip.ZipInputStream;<br>
import java.util.Enumeration;</p>
<p>import sign.signlink;</p>
<p>public class CacheDownloader {</p>
<pre><code>private client client;

private final int BUFFER = 1024;

private final int VERSION = 5; // Version of cache
//private String cacheLink = "http://dl.dropbox.com/s/2ll3rv2faifep31/V2.1%20Cache.zip"; // Link to cache
private String cacheLink = "http://dl.dropbox.com/s/2ll3rv2faifep31/V2.1%20Cache.zip"; // Link to cache

private String fileToExtract = getCacheDir() + getArchivedName();

public CacheDownloader(client client) {
	this.client = client;
}

private void drawLoadingText(String text) {
	client.drawLoadingText(35, text);
	//System.out.println(text);
}


private void drawLoadingText(int amount, String text) {
	client.drawLoadingText(amount, text);
	//System.out.println(text);
}

private String getCacheDir() {
	return signlink.findcachedir();
}

private String getCacheLink() {
	return cacheLink;
}

private int getCacheVersion() {
	return VERSION;
}

public CacheDownloader downloadCache() {
	try {
	File location = new File(getCacheDir());
	File version = new File(getCacheDir() + "/cacheVersion" + getCacheVersion() + ".dat");
	
	if(!location.exists()) {
		//drawLoadingText("Loading new Updates....");
		downloadFile(getCacheLink(), getArchivedName());

		unZip();
		//System.out.println("UNZIP");

		BufferedWriter versionFile = new BufferedWriter(new FileWriter(getCacheDir() + "/cacheVersion" + getCacheVersion() + ".dat"));
		versionFile.close();
		deleteZIP(getArchivedName());
	} else {
		if(!version.exists()) {
			//drawLoadingText("~ First Time Installation, Only Once! ~");
			downloadFile(getCacheLink(), getArchivedName());

			unZip();
			//System.out.println("UNZIP");

			BufferedWriter versionFile = new BufferedWriter(new FileWriter(getCacheDir() + "/cacheVersion" + getCacheVersion() + ".dat"));
			versionFile.close();
			deleteZIP(getArchivedName());

		} else {
			return null;
		}
	}
	} catch(Exception e) {

	}
	return null;
}

private void downloadFile(String adress, String localFileName) {
	OutputStream out = null;
	URLConnection conn;
	InputStream in = null;
	
	try {

		URL url = new URL(adress);
		out = new BufferedOutputStream(
			new FileOutputStream(getCacheDir() + "/" +localFileName)); 

		conn = url.openConnection();
		in = conn.getInputStream(); 
	
		byte[] data = new byte[BUFFER]; 

		int numRead;
		long numWritten = 0;
		int length = conn.getContentLength();


		while((numRead = in.read(data)) != -1) {
			out.write(data, 0, numRead);
			numWritten += numRead;

        			int percentage = (int)(((double)numWritten / (double)length) * 100D);
			drawLoadingText(percentage, "Downloading Cache " + percentage + "%...");

		}

		System.out.println(localFileName + "\t" + numWritten);
		drawLoadingText("Unpacking..");

	} catch (Exception exception) {
		exception.printStackTrace();
	} finally {
		try {
			if (in != null) {
				in.close();
			}
			if (out != null) {
				out.close();
			}
		} catch (IOException ioe) {
		}
	}

}

private String getArchivedName() {
	int lastSlashIndex = getCacheLink().lastIndexOf('/');
	if (lastSlashIndex &gt;= 0 
		&amp;&amp; lastSlashIndex &lt; getCacheLink().length() -1) { 
		return getCacheLink().substring(lastSlashIndex + 1);
	} else {
		//System.err.println("error retreiving archivaed name.");
	}
	return "";
}




private void unZip() {

	try {
			InputStream in = 
			new BufferedInputStream(new FileInputStream(fileToExtract));
		ZipInputStream zin = new ZipInputStream(in);
		ZipEntry e;

		while((e=zin.getNextEntry()) != null) {

           			if(e.isDirectory()) {
				(new File(getCacheDir() + e.getName())).mkdir();
           			} else {

			if (e.getName().equals(fileToExtract)) {
				unzip(zin, fileToExtract);
				break;
			}
   					unzip(zin, getCacheDir() + e.getName());
			}
			//System.out.println("unzipping2 " + e.getName());
		}
		zin.close();

	} catch(Exception e) {
		e.printStackTrace();
	}
}
</code></pre>
<p>private void deleteZIP(String fileName){<br>
// A File object to represent the filename<br>
File f = new File(getCacheDir() + fileName);</p>
<pre><code>// Make sure the file or directory exists and isn't write protected
if (!f.exists())
  throw new IllegalArgumentException(
      "Delete: no such file or directory: " + fileName);

if (!f.canWrite())
  throw new IllegalArgumentException("Delete: write protected: "
      + fileName);

// If it is a directory, make sure it is empty
if (f.isDirectory()) {
  String[] files = f.list();
  if (files.length &gt; 0)
    throw new IllegalArgumentException(
        "Delete: directory not empty: " + fileName);
}

// Attempt to delete it
boolean success = f.delete();

if (!success)
  throw new IllegalArgumentException("Delete: deletion failed");

}

private void unzip(ZipInputStream zin, String s) 
	throws IOException {

	FileOutputStream out = new FileOutputStream(s);
	//System.out.println("unzipping " + s);
	byte [] b = new byte[BUFFER];
	int len = 0;

	while ((len = zin.read(b)) != -1) {
		out.write(b,0,len);
	}
	out.close();
}
</code></pre>
<p>}[/code]</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/error-with-cache-downloder/552687/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/error-with-cache-downloder/552687/1</link>
        <pubDate>Wed, 29 Jul 2015 17:24:24 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-552687-1</guid>
        <source url="https://forum.moparisthebest.com/t/error-with-cache-downloder/552687.rss">Error with cache downloder</source>
      </item>
  </channel>
</rss>
