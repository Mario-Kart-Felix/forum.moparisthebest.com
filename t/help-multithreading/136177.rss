<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>[help]multithreading :\</title>
    <link>https://forum.moparisthebest.com/t/help-multithreading/136177</link>
    <description>problem: if my mulitplayer client is listening for stuff from server (endless loop) my applet stops doing everything(painting, run,...) i guess i need to double-thread but can anyone gime an example of how to make another thread for one void? :\ ( i googled it and tryed for about 6 hours and all it did is nothing (after the login :|) )

heres the code ( i used a chat on this forum for example to make server and client)
i need a second thread for the void listen  ;D

if u dont understand something just post  :|

and dont laugh about the long code at keydown event :o just made an fake editbox :P

[code]import java.io.*;
import java.awt.*; 
import java.applet.*;
import java.net.Socket;
import java.net.*;
import java.lang.Thread;
import java.lang.*;

public class Client extends Applet implements Runnable, Loadable, HotSpotListener 
{ 
     RealMedia rm; 
     HotSpot hs1, hs2;
     public boolean playing = false;
     public String Message = &quot;&quot;;
     public int ScreenID = 1;
     public int PORT = 1234;
     public int MX;
     public int MY;
     public Socket S = null;
     Thread th;
      public String IP = &quot;localhost&quot;;
     public String Nick = &quot;&quot;;
     public String Pass = &quot;&quot;;
     public String inputbox1Text = &quot;&quot;;
     public String inputbox2Text = &quot;&quot;;
     public DataInputStream IS = null;
     public DataOutputStream OS = null;
     	private Image dbImage;
	private Graphics dbg;
	    Font f = new Font (&quot;Serif&quot;, Font.BOLD, 20);
	    public int SelItem = 0;
public boolean listening = false;
     
     public void connect() {
		IP = &quot;192.168.1.6&quot;;
		PORT = 1234;
		try
		{
			S = new Socket(IP, PORT);
			IS = new DataInputStream(S.getInputStream());
			OS = new DataOutputStream(S.getOutputStream());
		}
		catch(IOException ioe)
		{
			Message = &quot;Could not connect.&quot;;
			System.exit(1);
		}
			if(Nick.length() &lt;= 0)
			{
				Message = &quot;Please enter a nickname.&quot;;
			}
			else
			{
				try 
				{
					int x = sendNick(Nick, Pass);
					switch(x)
					{
					case 1:
						ScreenID = 3;
						playing = true;
						break;
					case 2:
					Nick = &quot;&quot;;
					break;
					case 3:
					Nick = &quot;&quot;;
					break;
					}
				} 
				catch (IOException e) 
				{
				}
		}
		
		if(S != null)
		{
			if(IS != null &amp;&amp; OS != null)
			{
				listen();
			}
		}
	}
	
	    public boolean keyDown(Event event, int i) {			
			if (ScreenID == 2) {
			if (SelItem == 1) {
			if (i == 97) {
			inputbox1Text = inputbox1Text + &quot;a&quot;;
			}
			if (i == 98) {
			inputbox1Text = inputbox1Text + &quot;b&quot;;
			}
			if (i == 99) {
			inputbox1Text = inputbox1Text + &quot;c&quot;;
			}
			if (i == 100) {
			inputbox1Text = inputbox1Text + &quot;d&quot;;
			}
			if (i == 101) {
			inputbox1Text = inputbox1Text + &quot;e&quot;;
			}
			if (i == 102) {
			inputbox1Text = inputbox1Text + &quot;f&quot;;
			}
			if (i == 103) {
			inputbox1Text = inputbox1Text + &quot;g&quot;;
			}
			if (i == 104) {
			inputbox1Text = inputbox1Text + &quot;h&quot;;
			}
			if (i == 105) {
			inputbox1Text = inputbox1Text + &quot;i&quot;;
			}
			if (i == 106) {
			inputbox1Text = inputbox1Text + &quot;j&quot;;
			}
			if (i == 107) {
			inputbox1Text = inputbox1Text + &quot;k&quot;;
			}
			if (i == 108) {
			inputbox1Text = inputbox1Text + &quot;l&quot;;
			}
			if (i == 109) {
			inputbox1Text = inputbox1Text + &quot;m&quot;;
			}
			if (i == 110) {
			inputbox1Text = inputbox1Text + &quot;n&quot;;
			}
			if (i == 111) {
			inputbox1Text = inputbox1Text + &quot;o&quot;;
			}
			if (i == 112) {
			inputbox1Text = inputbox1Text + &quot;p&quot;;
			}
			if (i == 113) {
			inputbox1Text = inputbox1Text + &quot;q&quot;;
			}
			if (i == 114) {
			inputbox1Text = inputbox1Text + &quot;r&quot;;
			}
			if (i == 115) {
			inputbox1Text = inputbox1Text + &quot;s&quot;;
			}
			if (i == 116) {
			inputbox1Text = inputbox1Text + &quot;t&quot;;
			}
			if (i == 117) {
			inputbox1Text = inputbox1Text + &quot;u&quot;;
			}
			if (i == 118) {
			inputbox1Text = inputbox1Text + &quot;v&quot;;
			}
			if (i == 119) {
			inputbox1Text = inputbox1Text + &quot;w&quot;;
			}
			if (i == 120) {
			inputbox1Text = inputbox1Text + &quot;x&quot;;
			}
			if (i == 121) {
			inputbox1Text = inputbox1Text + &quot;y&quot;;
			}
			if (i == 122) {
			inputbox1Text = inputbox1Text + &quot;z&quot;;
			}
			}
			if (SelItem == 2) {
			if (i == 97) {
			inputbox2Text = inputbox2Text + &quot;a&quot;;
			}
			if (i == 98) {
			inputbox2Text = inputbox2Text + &quot;b&quot;;
			}
			if (i == 99) {
			inputbox2Text = inputbox2Text + &quot;c&quot;;
			}
			if (i == 100) {
			inputbox2Text = inputbox2Text + &quot;d&quot;;
			}
			if (i == 101) {
			inputbox2Text = inputbox2Text + &quot;e&quot;;
			}
			if (i == 102) {
			inputbox2Text = inputbox2Text + &quot;f&quot;;
			}
			if (i == 103) {
			inputbox2Text = inputbox2Text + &quot;g&quot;;
			}
			if (i == 104) {
			inputbox2Text = inputbox2Text + &quot;h&quot;;
			}
			if (i == 105) {
			inputbox2Text = inputbox2Text + &quot;i&quot;;
			}
			if (i == 106) {
			inputbox2Text = inputbox2Text + &quot;j&quot;;
			}
			if (i == 107) {
			inputbox2Text = inputbox2Text + &quot;k&quot;;
			}
			if (i == 108) {
			inputbox2Text = inputbox2Text + &quot;l&quot;;
			}
			if (i == 109) {
			inputbox2Text = inputbox2Text + &quot;m&quot;;
			}
			if (i == 110) {
			inputbox2Text = inputbox2Text + &quot;n&quot;;
			}
			if (i == 111) {
			inputbox2Text = inputbox2Text + &quot;o&quot;;
			}
			if (i == 112) {
			inputbox2Text = inputbox2Text + &quot;p&quot;;
			}
			if (i == 113) {
			inputbox2Text = inputbox2Text + &quot;q&quot;;
			}
			if (i == 114) {
			inputbox2Text = inputbox2Text + &quot;r&quot;;
			}
			if (i == 115) {
			inputbox2Text = inputbox2Text + &quot;s&quot;;
			}
			if (i == 116) {
			inputbox2Text = inputbox2Text + &quot;t&quot;;
			}
			if (i == 117) {
			inputbox2Text = inputbox2Text + &quot;u&quot;;
			}
			if (i == 118) {
			inputbox2Text = inputbox2Text + &quot;v&quot;;
			}
			if (i == 119) {
			inputbox2Text = inputbox2Text + &quot;w&quot;;
			}
			if (i == 120) {
			inputbox2Text = inputbox2Text + &quot;x&quot;;
			}
			if (i == 121) {
			inputbox2Text = inputbox2Text + &quot;y&quot;;
			}
			if (i == 122) {
			inputbox2Text = inputbox2Text + &quot;z&quot;;
			}
			}
			}
			
			return false;
		}
	public boolean mouseMove (Event e, int x, int y) {
	MX = x;
	MY = y;
	return true;
	}
		
		public boolean mouseDown (Event e, int x, int y)
	{
if (ScreenID == 2) {
if (x &gt; 315 &amp;&amp; x &lt; 590 &amp;&amp; y &gt; 202 &amp;&amp; y &lt; 222) {
SelItem = 1;
}
else if (x &gt; 315 &amp;&amp; x &lt; 590 &amp;&amp; y &gt; 242 &amp;&amp; y &lt; 264) {
SelItem = 2;
}
}
return false;
}
     
     	public int sendNick(String nick, String pass) throws IOException
	{
		OS.writeInt(1);
		OS.writeUTF(nick);
		OS.writeUTF(pass);
		int respond = 0;
		
		while((respond = IS.readInt()) != -1)
		{
			if(respond &gt; -1)
			{
				return respond;
			}
		}
		
		return 0;
	}
	
		public void run ()
	{
		Thread.currentThread().setPriority(Thread.MIN_PRIORITY);

		while (true)
		{
			repaint();
/*if (listening) {
listen();
}*/

			try
			{
				Thread.sleep (50);
			}
			catch (InterruptedException ex)
			{
			}
			Thread.currentThread().setPriority(Thread.MAX_PRIORITY);
		}
		}
	
	public void listen()
	{
		while(true)
		{
			try
			{
				int ID = 0;
				while((ID = IS.readInt()) != -1)
				{
					parseID(ID);
repaint();
					}
			}
			catch(IOException ioe)
			{
				System.exit(1);
			}
		}
	}
	public void parseID(int ID) throws IOException {
	switch(ID) {
	case 1:
	Nick = IS.readUTF();
	break;
	case 2:
	break;
	case 3:
	Message = IS.readUTF();
	break;
	case 4:
	Message = IS.readUTF();
	repaint();
	break;
	}
	}
	
public void start() {
th = new Thread(this);
th.start();
}
public void stop() {
th.stop();
}
     
     public void init() 
     { 
	setFont (f);
          setLayout(null); 
          setBackground(Color.black); 
          rm = new RealMedia(this); 
          rm.add(&quot;BackGround.JPG&quot;,&quot;background&quot;);
          rm.add(&quot;BackGround-part2.JPG&quot;,&quot;background-2&quot;);
          rm.add(&quot;PlayButton.JPG&quot;); 
          rm.add(&quot;PlayButton-Mouse.JPG&quot;); 
          rm.add(&quot;PlayButton-Click.JPG&quot;);
          rm.add(&quot;LoginButton.JPG&quot;);
          rm.add(&quot;LoginButton-Mouse.JPG&quot;);
          rm.add(&quot;LoginButton-Click.JPG&quot;);
          rm.load(); 
     } 
     public void startUp() 
     { 
          hs1 = new HotSpot(this); 
          hs1.setImage(rm.get(&quot;PlayButton.JPG&quot;),1); 
          hs1.setImage(rm.get(&quot;PlayButton-Mouse.JPG&quot;),2); 
          hs1.setImage(rm.get(&quot;PlayButton-Click.JPG&quot;),3); 
          hs1.setBounds(350,250,150,50); 
          add(hs1); 
          hs1.repaint();
          hs2 = new HotSpot(this);
          hs2.setImage(rm.get(&quot;LoginButton.JPG&quot;),1);
          hs2.setImage(rm.get(&quot;LoginButton-Mouse.JPG&quot;),2);
          hs2.setImage(rm.get(&quot;LoginButton-Click.JPG&quot;),3);
          hs2.setBounds(375,300,150,50);
          hs2.repaint();
     } 
     public void paint(Graphics g) 
     { 
          g.setColor(Color.white);
          if (!rm.isLoaded())  
          { 
              g.drawString(&quot;loading file &quot;+rm.getCurrent(),20,20); 
               g.drawString(&quot;of &quot;+rm.getTotalFiles(),20,40);    
               g.drawString(&quot;Percent: &quot;+rm.getPercent(),20,60);    
               g.fillRect(20,80,rm.getPercent(),20);    
          } 
          else 
          {
          if (playing == false) {
          g.drawImage(rm.get(&quot;background&quot;),0,0,this);
          if (ScreenID == 2) {
          g.drawImage(rm.get(&quot;background-2&quot;),300,200,this);
          g.drawString(&quot;Username:&quot;+inputbox1Text, 316, 218);
          g.drawString(&quot;Password:&quot;+inputbox2Text, 320, 260);
if (SelItem == 1) {
g.drawRect(315,202,275,25);
}
if (SelItem == 2) {
g.drawRect(315,242,275,25);
}
          }
          } 
          if (ScreenID == 3) {
          }
          }
                    g.drawString(MX + &quot;,&quot; +MY+ &quot;,&quot; +Message,MX,MY); // debugging &gt;.&lt;
     }
     	public void update (Graphics g)
	{
		if (dbImage == null)
		{
			dbImage = createImage (this.getSize().width, this.getSize().height);
			dbg = dbImage.getGraphics ();
		}
		dbg.setColor (getBackground ());
		dbg.fillRect (0, 0, this.getSize().width, this.getSize().height);
		dbg.setColor (getForeground());
		paint (dbg);
		g.drawImage (dbImage, 0, 0, this);
	}
     public void hotSpotEvent(HotSpot hs) 
     { 
          if (hs == hs1) {
          ScreenID = 2;
          remove(hs1);
          add(hs2);
          }
          if (hs == hs2) {
          remove(hs2);
          Nick = inputbox1Text;
          Pass = inputbox2Text;
          connect();
          }
          repaint();  
     }
     public Image loadImage(String file)  
     { 
            return getImage(getCodeBase(),file); 
     }
     public AudioClip loadAudio(String file)  
     { 
            return getAudioClip(getDocumentBase(),file); 
     }  
}[/code]</description>
    
    <lastBuildDate>Mon, 10 Sep 2007 21:56:39 +0000</lastBuildDate>
    <category>General Programming</category>
    <atom:link href="https://forum.moparisthebest.com/t/help-multithreading/136177.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>[help]multithreading :\</title>
        <dc:creator><![CDATA[@i_loot_i i loot i]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/i_loot_i">@i_loot_i</a> wrote:</p>
          <blockquote>
              <p>could u help me ?</p>
<p>i’m working on a chat system the only thing is i can’t make it connect with me , so other ppl can talk to other ppl on the chat system , now i found a way but thne it says , can’t connect with it …</p>
<p>plz help ?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/help-multithreading/136177/14">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/help-multithreading/136177/14</link>
        <pubDate>Mon, 10 Sep 2007 21:56:39 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-136177-14</guid>
        <source url="https://forum.moparisthebest.com/t/help-multithreading/136177.rss">[help]multithreading :\</source>
      </item>
      <item>
        <title>[help]multithreading :\</title>
        <dc:creator><![CDATA[@pk_blooder pk_blooder]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/pk_blooder">@pk_blooder</a> wrote:</p>
          <blockquote>
              <p>o ye <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=6" title=":smiley:" class="emoji" alt=":smiley:"> soz for late reaction i was not @ home <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=6" title=":smiley:" class="emoji" alt=":smiley:"> leme try something <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=6" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
<p>edit: this should work? :\ ( it doesnt  :()</p>
<p><code>	public void listen() {
	try {
	int ID = 0;
	if (IS.available() &gt;= 4) {
	ID = IS.readInt();
	parseID(ID);
	}
	}
	catch(IOException ioe) {
	System.exit(1);
	}
	}</code></p>
<pre><code class="lang-auto">	public void run () {
	Thread.currentThread().setPriority(Thread.MIN_PRIORITY);
	while (true)
	{
	repaint();
	if (listening) {
	listen();
	}
	try {
	Thread.sleep (50);
	}
	catch (InterruptedException ex) {
	}
	Thread.currentThread().setPriority(Thread.MAX_PRIORITY);
	}
	}</code></pre>
<p>yes taharok it is still single threaded but the double threaded version is a failure <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=6" title=":smiley:" class="emoji" alt=":smiley:"> u dont even have to connect to not let it repaint &gt;.&gt; ( it repaints till i try to enter some stuff in my fake editboxes:s)</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/help-multithreading/136177/13">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/help-multithreading/136177/13</link>
        <pubDate>Mon, 27 Aug 2007 16:12:17 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-136177-13</guid>
        <source url="https://forum.moparisthebest.com/t/help-multithreading/136177.rss">[help]multithreading :\</source>
      </item>
      <item>
        <title>[help]multithreading :\</title>
        <dc:creator><![CDATA[@mod_taharok Taharok]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/mod_taharok">@mod_taharok</a> wrote:</p>
          <blockquote>
              <p>[quote=“pk_blooder, post:8, topic:136177”][quote author=Mod Taharok link=topic=187668.msg1696243#msg1696243 date=1187929995]<br>
You should really only two threads: one for the main program, and one for looping. The looping should have a precise timer to make sure the packet communication and defined fps are achieved. And, each loop should update the game which includes processing any newly received packets and canvas repainting.</p>
<p>[/quote]</p>
<p>thats my problem :\ i tried to make more then one thread but didnt work ( guess im to dumb 8-))</p>
<aside class="quote no-group">
<blockquote>
<p>java.io.InputStream.available()</p>
</blockquote>
</aside>
<p>leme try that <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=6" title=":smiley:" class="emoji" alt=":smiley:"></p>
<p>EDIT: like that? <code>				if (IS.available() &lt; 1) {
				ID = IS.readInt();
					parseID(ID);
}</code><br>
googled it and it said its the amount of bytes left to read <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=6" title=":smiley:" class="emoji" alt=":smiley:"></p>
<p>EDIT2: w00T it worked tyvm for help guys :D[br][size=1]Posted on: August 24, 2007, 02:02:53 AM[/size][hr]soz for double post but still doesnt work :\ it only repaints when i change to another program and then back to IE :[/quote]</p>
<p>Make your second thread’s looping include the repainting of the canvas/panel/frame.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/help-multithreading/136177/12">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/help-multithreading/136177/12</link>
        <pubDate>Sun, 26 Aug 2007 02:26:05 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-136177-12</guid>
        <source url="https://forum.moparisthebest.com/t/help-multithreading/136177.rss">[help]multithreading :\</source>
      </item>
      <item>
        <title>[help]multithreading :\</title>
        <dc:creator><![CDATA[@Javacisnotrecognized _^_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/javacisnotrecognized">@Javacisnotrecognized</a> wrote:</p>
          <blockquote>
              <p>Showoff &gt;_&gt;</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/help-multithreading/136177/11">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/help-multithreading/136177/11</link>
        <pubDate>Sat, 25 Aug 2007 22:09:06 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-136177-11</guid>
        <source url="https://forum.moparisthebest.com/t/help-multithreading/136177.rss">[help]multithreading :\</source>
      </item>
      <item>
        <title>[help]multithreading :\</title>
        <dc:creator><![CDATA[@Iamadam Iamadam]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/iamadam">@Iamadam</a> wrote:</p>
          <blockquote>
              <p><code>if (IS.available() &gt;= 4) {
   ID = IS.readInt();
   parseID(ID);
}</code></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/help-multithreading/136177/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/help-multithreading/136177/10</link>
        <pubDate>Sat, 25 Aug 2007 17:57:43 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-136177-10</guid>
        <source url="https://forum.moparisthebest.com/t/help-multithreading/136177.rss">[help]multithreading :\</source>
      </item>
      <item>
        <title>[help]multithreading :\</title>
        <dc:creator><![CDATA[@Javacisnotrecognized _^_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/javacisnotrecognized">@Javacisnotrecognized</a> wrote:</p>
          <blockquote>
              <p>[quote=“pk_blooder, post:8, topic:136177”]EDIT: like that? <code>				if (IS.available() &lt; 1) {
				ID = IS.readInt();
					parseID(ID);
}</code>[/quote]</p>
<p>That should be</p>
<p><code>
if (IS.available() &gt; 4) {
   ID = IS.readInt();
   parseID(ID);
}</code></p>
<p>Since you had less than, and an int is 4 bytes…</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/help-multithreading/136177/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/help-multithreading/136177/9</link>
        <pubDate>Sat, 25 Aug 2007 15:59:28 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-136177-9</guid>
        <source url="https://forum.moparisthebest.com/t/help-multithreading/136177.rss">[help]multithreading :\</source>
      </item>
      <item>
        <title>[help]multithreading :\</title>
        <dc:creator><![CDATA[@pk_blooder pk_blooder]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/pk_blooder">@pk_blooder</a> wrote:</p>
          <blockquote>
              <aside class="quote no-group" data-post="7" data-topic="136177">
<div class="title">
<div class="quote-controls"></div>
 Mod Taharok:</div>
<blockquote>
<p>You should really only two threads: one for the main program, and one for looping. The looping should have a precise timer to make sure the packet communication and defined fps are achieved. And, each loop should update the game which includes processing any newly received packets and canvas repainting.</p>
</blockquote>
</aside>
<p>thats my problem :\ i tried to make more then one thread but didnt work ( guess im to dumb 8-))</p>
<aside class="quote no-group" data-post="5" data-topic="136177">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/javacisnotrecognized/40/5_6259e4fa9dfe0dec282fb0955bb1974c.png" class="avatar"> Javacisnotrecognized:</div>
<blockquote>
<p>java.io.InputStream.available()</p>
</blockquote>
</aside>
<p>leme try that <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=6" title=":smiley:" class="emoji" alt=":smiley:"></p>
<p>EDIT: like that? <code>				if (IS.available() &lt; 1) {
				ID = IS.readInt();
					parseID(ID);
}</code><br>
googled it and it said its the amount of bytes left to read <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=6" title=":smiley:" class="emoji" alt=":smiley:"></p>
<p>EDIT2: w00T it worked tyvm for help guys :D[br][size=1]Posted on: August 24, 2007, 02:02:53 AM[/size][hr]soz for double post but still doesnt work :\ it only repaints when i change to another program and then back to IE :\</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/help-multithreading/136177/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/help-multithreading/136177/8</link>
        <pubDate>Sat, 25 Aug 2007 13:36:51 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-136177-8</guid>
        <source url="https://forum.moparisthebest.com/t/help-multithreading/136177.rss">[help]multithreading :\</source>
      </item>
      <item>
        <title>[help]multithreading :\</title>
        <dc:creator><![CDATA[@mod_taharok Taharok]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/mod_taharok">@mod_taharok</a> wrote:</p>
          <blockquote>
              <p>You should really only two threads: one for the main program, and one for looping. The looping should have a precise timer to make sure the packet communication and defined fps are achieved. And, each loop should update the game which includes processing any newly received packets and canvas repainting.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/help-multithreading/136177/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/help-multithreading/136177/7</link>
        <pubDate>Fri, 24 Aug 2007 04:33:15 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-136177-7</guid>
        <source url="https://forum.moparisthebest.com/t/help-multithreading/136177.rss">[help]multithreading :\</source>
      </item>
      <item>
        <title>[help]multithreading :\</title>
        <dc:creator><![CDATA[@1337h4x 1337h4x]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/1337h4x">@1337h4x</a> wrote:</p>
          <blockquote>
              <p>did you override update()?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/help-multithreading/136177/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/help-multithreading/136177/6</link>
        <pubDate>Fri, 24 Aug 2007 01:58:36 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-136177-6</guid>
        <source url="https://forum.moparisthebest.com/t/help-multithreading/136177.rss">[help]multithreading :\</source>
      </item>
      <item>
        <title>[help]multithreading :\</title>
        <dc:creator><![CDATA[@Javacisnotrecognized _^_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/javacisnotrecognized">@Javacisnotrecognized</a> wrote:</p>
          <blockquote>
              <p>java.io.InputStream.available()</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/help-multithreading/136177/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/help-multithreading/136177/5</link>
        <pubDate>Thu, 23 Aug 2007 21:59:35 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-136177-5</guid>
        <source url="https://forum.moparisthebest.com/t/help-multithreading/136177.rss">[help]multithreading :\</source>
      </item>
      <item>
        <title>[help]multithreading :\</title>
        <dc:creator><![CDATA[@pk_blooder pk_blooder]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/pk_blooder">@pk_blooder</a> wrote:</p>
          <blockquote>
              <p>[quote=“Javacisnotrecognized, post:3, topic:136177”]You could replace your keyDown code with this:</p>
<p><code>
public boolean keyDown(Event event, int i) {
   if(ScreenID == 2) {
      if(SelItem == 1){
         if(i =&gt; 97 &amp;&amp; i &lt;= 122) inputbox1Text += (char)i;
      } else if(SelItem == 2){ 
         if(i =&gt; 97 &amp;&amp; i &lt;= 122) inputbox2Text += (char)i;
      }
    }
  }
  return false;
}</code></p>
<p>But I don’t see why your applet wouldn’t redraw. I think it might be this</p>
<p><code>
    System.exit(1);</code></p>
<p>if your applet isn’t privileged, that will throw an exception and mess something up.[/quote]</p>
<p>thx about the keydown :o</p>
<p>its cuz its only using one thread and if i do IS.readInt or UTF it waits till something is send from my server and then continues, when its waiting the thread is " doing something " and wont do anything else (i think :|)</p>
<p>EDIT: is there a way to look if theres something to read before reading it? that would fix my problem cuz i will only need 1 thread then  <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=6" title=":smiley:" class="emoji" alt=":smiley:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/help-multithreading/136177/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/help-multithreading/136177/4</link>
        <pubDate>Thu, 23 Aug 2007 21:35:19 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-136177-4</guid>
        <source url="https://forum.moparisthebest.com/t/help-multithreading/136177.rss">[help]multithreading :\</source>
      </item>
      <item>
        <title>[help]multithreading :\</title>
        <dc:creator><![CDATA[@Javacisnotrecognized _^_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/javacisnotrecognized">@Javacisnotrecognized</a> wrote:</p>
          <blockquote>
              <p>You could replace your keyDown code with this:</p>
<p><code>
public boolean keyDown(Event event, int i) {
   if(ScreenID == 2) {
      if(SelItem == 1){
         if(i =&gt; 97 &amp;&amp; i &lt;= 122) inputbox1Text += (char)i;
      } else if(SelItem == 2){ 
         if(i =&gt; 97 &amp;&amp; i &lt;= 122) inputbox2Text += (char)i;
      }
    }
  }
  return false;
}</code></p>
<p>But I don’t see why your applet wouldn’t redraw. I think it might be this</p>
<p><code>
    System.exit(1);</code></p>
<p>if your applet isn’t privileged, that will throw an exception and mess something up.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/help-multithreading/136177/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/help-multithreading/136177/3</link>
        <pubDate>Thu, 23 Aug 2007 21:28:22 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-136177-3</guid>
        <source url="https://forum.moparisthebest.com/t/help-multithreading/136177.rss">[help]multithreading :\</source>
      </item>
      <item>
        <title>[help]multithreading :\</title>
        <dc:creator><![CDATA[@RLN RLN]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/rln">@RLN</a> wrote:</p>
          <blockquote>
              <p>I’m not going to look at your code, but it shouldn’t be a problem if it reads a packet in between every update… why would you want it to paint something that isn’t updated? You could use a thread but I don’t think it’s worth the trouble. I have a feeling you have an error in your code just by scanning it.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/help-multithreading/136177/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/help-multithreading/136177/2</link>
        <pubDate>Thu, 23 Aug 2007 20:48:52 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-136177-2</guid>
        <source url="https://forum.moparisthebest.com/t/help-multithreading/136177.rss">[help]multithreading :\</source>
      </item>
      <item>
        <title>[help]multithreading :\</title>
        <dc:creator><![CDATA[@pk_blooder pk_blooder]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/pk_blooder">@pk_blooder</a> wrote:</p>
          <blockquote>
              <p>problem: if my mulitplayer client is listening for stuff from server (endless loop) my applet stops doing everything(painting, run,…) i guess i need to double-thread but can anyone gime an example of how to make another thread for one void? :\ ( i googled it and tryed for about 6 hours and all it did is nothing (after the login :|) )</p>
<p>heres the code ( i used a chat on this forum for example to make server and client)<br>
i need a second thread for the void listen  ;D</p>
<p>if u dont understand something just post  <img src="https://forum.moparisthebest.com/images/emoji/twitter/expressionless.png?v=6" title=":expressionless:" class="emoji" alt=":expressionless:"></p>
<p>and dont laugh about the long code at keydown event :o just made an fake editbox <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=6" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
<p>[code]import <a href="http://java.io" rel="nofollow noopener">java.io</a>.<em>;<br>
import java.awt.</em>;<br>
import java.applet.<em>;<br>
import java.net.Socket;<br>
import <a href="http://java.net" rel="nofollow noopener">java.net</a>.</em>;<br>
import java.lang.Thread;<br>
import java.lang.*;</p>
<p>public class Client extends Applet implements Runnable, Loadable, HotSpotListener<br>
{<br>
RealMedia rm;<br>
HotSpot hs1, hs2;<br>
public boolean playing = false;<br>
public String Message = “”;<br>
public int ScreenID = 1;<br>
public int PORT = 1234;<br>
public int MX;<br>
public int MY;<br>
public Socket S = null;<br>
Thread th;<br>
public String IP = “localhost”;<br>
public String Nick = “”;<br>
public String Pass = “”;<br>
public String inputbox1Text = “”;<br>
public String inputbox2Text = “”;<br>
public DataInputStream IS = null;<br>
public DataOutputStream OS = null;<br>
private Image dbImage;<br>
private Graphics dbg;<br>
Font f = new Font (“Serif”, Font.BOLD, 20);<br>
public int SelItem = 0;<br>
public boolean listening = false;</p>
<pre><code> public void connect() {
	IP = "192.168.1.6";
	PORT = 1234;
	try
	{
		S = new Socket(IP, PORT);
		IS = new DataInputStream(S.getInputStream());
		OS = new DataOutputStream(S.getOutputStream());
	}
	catch(IOException ioe)
	{
		Message = "Could not connect.";
		System.exit(1);
	}
		if(Nick.length() &lt;= 0)
		{
			Message = "Please enter a nickname.";
		}
		else
		{
			try 
			{
				int x = sendNick(Nick, Pass);
				switch(x)
				{
				case 1:
					ScreenID = 3;
					playing = true;
					break;
				case 2:
				Nick = "";
				break;
				case 3:
				Nick = "";
				break;
				}
			} 
			catch (IOException e) 
			{
			}
	}
	
	if(S != null)
	{
		if(IS != null &amp;&amp; OS != null)
		{
			listen();
		}
	}
}

    public boolean keyDown(Event event, int i) {			
		if (ScreenID == 2) {
		if (SelItem == 1) {
		if (i == 97) {
		inputbox1Text = inputbox1Text + "a";
		}
		if (i == 98) {
		inputbox1Text = inputbox1Text + "b";
		}
		if (i == 99) {
		inputbox1Text = inputbox1Text + "c";
		}
		if (i == 100) {
		inputbox1Text = inputbox1Text + "d";
		}
		if (i == 101) {
		inputbox1Text = inputbox1Text + "e";
		}
		if (i == 102) {
		inputbox1Text = inputbox1Text + "f";
		}
		if (i == 103) {
		inputbox1Text = inputbox1Text + "g";
		}
		if (i == 104) {
		inputbox1Text = inputbox1Text + "h";
		}
		if (i == 105) {
		inputbox1Text = inputbox1Text + "i";
		}
		if (i == 106) {
		inputbox1Text = inputbox1Text + "j";
		}
		if (i == 107) {
		inputbox1Text = inputbox1Text + "k";
		}
		if (i == 108) {
		inputbox1Text = inputbox1Text + "l";
		}
		if (i == 109) {
		inputbox1Text = inputbox1Text + "m";
		}
		if (i == 110) {
		inputbox1Text = inputbox1Text + "n";
		}
		if (i == 111) {
		inputbox1Text = inputbox1Text + "o";
		}
		if (i == 112) {
		inputbox1Text = inputbox1Text + "p";
		}
		if (i == 113) {
		inputbox1Text = inputbox1Text + "q";
		}
		if (i == 114) {
		inputbox1Text = inputbox1Text + "r";
		}
		if (i == 115) {
		inputbox1Text = inputbox1Text + "s";
		}
		if (i == 116) {
		inputbox1Text = inputbox1Text + "t";
		}
		if (i == 117) {
		inputbox1Text = inputbox1Text + "u";
		}
		if (i == 118) {
		inputbox1Text = inputbox1Text + "v";
		}
		if (i == 119) {
		inputbox1Text = inputbox1Text + "w";
		}
		if (i == 120) {
		inputbox1Text = inputbox1Text + "x";
		}
		if (i == 121) {
		inputbox1Text = inputbox1Text + "y";
		}
		if (i == 122) {
		inputbox1Text = inputbox1Text + "z";
		}
		}
		if (SelItem == 2) {
		if (i == 97) {
		inputbox2Text = inputbox2Text + "a";
		}
		if (i == 98) {
		inputbox2Text = inputbox2Text + "b";
		}
		if (i == 99) {
		inputbox2Text = inputbox2Text + "c";
		}
		if (i == 100) {
		inputbox2Text = inputbox2Text + "d";
		}
		if (i == 101) {
		inputbox2Text = inputbox2Text + "e";
		}
		if (i == 102) {
		inputbox2Text = inputbox2Text + "f";
		}
		if (i == 103) {
		inputbox2Text = inputbox2Text + "g";
		}
		if (i == 104) {
		inputbox2Text = inputbox2Text + "h";
		}
		if (i == 105) {
		inputbox2Text = inputbox2Text + "i";
		}
		if (i == 106) {
		inputbox2Text = inputbox2Text + "j";
		}
		if (i == 107) {
		inputbox2Text = inputbox2Text + "k";
		}
		if (i == 108) {
		inputbox2Text = inputbox2Text + "l";
		}
		if (i == 109) {
		inputbox2Text = inputbox2Text + "m";
		}
		if (i == 110) {
		inputbox2Text = inputbox2Text + "n";
		}
		if (i == 111) {
		inputbox2Text = inputbox2Text + "o";
		}
		if (i == 112) {
		inputbox2Text = inputbox2Text + "p";
		}
		if (i == 113) {
		inputbox2Text = inputbox2Text + "q";
		}
		if (i == 114) {
		inputbox2Text = inputbox2Text + "r";
		}
		if (i == 115) {
		inputbox2Text = inputbox2Text + "s";
		}
		if (i == 116) {
		inputbox2Text = inputbox2Text + "t";
		}
		if (i == 117) {
		inputbox2Text = inputbox2Text + "u";
		}
		if (i == 118) {
		inputbox2Text = inputbox2Text + "v";
		}
		if (i == 119) {
		inputbox2Text = inputbox2Text + "w";
		}
		if (i == 120) {
		inputbox2Text = inputbox2Text + "x";
		}
		if (i == 121) {
		inputbox2Text = inputbox2Text + "y";
		}
		if (i == 122) {
		inputbox2Text = inputbox2Text + "z";
		}
		}
		}
		
		return false;
	}
public boolean mouseMove (Event e, int x, int y) {
MX = x;
MY = y;
return true;
}
	
	public boolean mouseDown (Event e, int x, int y)
{
</code></pre>
<p>if (ScreenID == 2) {<br>
if (x &gt; 315 &amp;&amp; x &lt; 590 &amp;&amp; y &gt; 202 &amp;&amp; y &lt; 222) {<br>
SelItem = 1;<br>
}<br>
else if (x &gt; 315 &amp;&amp; x &lt; 590 &amp;&amp; y &gt; 242 &amp;&amp; y &lt; 264) {<br>
SelItem = 2;<br>
}<br>
}<br>
return false;<br>
}</p>
<pre><code> 	public int sendNick(String nick, String pass) throws IOException
{
	OS.writeInt(1);
	OS.writeUTF(nick);
	OS.writeUTF(pass);
	int respond = 0;
	
	while((respond = IS.readInt()) != -1)
	{
		if(respond &gt; -1)
		{
			return respond;
		}
	}
	
	return 0;
}

	public void run ()
{
	Thread.currentThread().setPriority(Thread.MIN_PRIORITY);

	while (true)
	{
		repaint();
</code></pre>
<p>/<em>if (listening) {<br>
listen();<br>
}</em>/</p>
<pre><code>		try
		{
			Thread.sleep (50);
		}
		catch (InterruptedException ex)
		{
		}
		Thread.currentThread().setPriority(Thread.MAX_PRIORITY);
	}
	}

public void listen()
{
	while(true)
	{
		try
		{
			int ID = 0;
			while((ID = IS.readInt()) != -1)
			{
				parseID(ID);
</code></pre>
<p>repaint();<br>
}<br>
}<br>
catch(IOException ioe)<br>
{<br>
System.exit(1);<br>
}<br>
}<br>
}<br>
public void parseID(int ID) throws IOException {<br>
switch(ID) {<br>
case 1:<br>
Nick = IS.readUTF();<br>
break;<br>
case 2:<br>
break;<br>
case 3:<br>
Message = IS.readUTF();<br>
break;<br>
case 4:<br>
Message = IS.readUTF();<br>
repaint();<br>
break;<br>
}<br>
}</p>
<p>public void start() {<br>
th = new Thread(this);<br>
th.start();<br>
}<br>
public void stop() {<br>
th.stop();<br>
}</p>
<pre><code> public void init() 
 { 
setFont (f);
      setLayout(null); 
      setBackground(Color.black); 
      rm = new RealMedia(this); 
      rm.add("BackGround.JPG","background");
      rm.add("BackGround-part2.JPG","background-2");
      rm.add("PlayButton.JPG"); 
      rm.add("PlayButton-Mouse.JPG"); 
      rm.add("PlayButton-Click.JPG");
      rm.add("LoginButton.JPG");
      rm.add("LoginButton-Mouse.JPG");
      rm.add("LoginButton-Click.JPG");
      rm.load(); 
 } 
 public void startUp() 
 { 
      hs1 = new HotSpot(this); 
      hs1.setImage(rm.get("PlayButton.JPG"),1); 
      hs1.setImage(rm.get("PlayButton-Mouse.JPG"),2); 
      hs1.setImage(rm.get("PlayButton-Click.JPG"),3); 
      hs1.setBounds(350,250,150,50); 
      add(hs1); 
      hs1.repaint();
      hs2 = new HotSpot(this);
      hs2.setImage(rm.get("LoginButton.JPG"),1);
      hs2.setImage(rm.get("LoginButton-Mouse.JPG"),2);
      hs2.setImage(rm.get("LoginButton-Click.JPG"),3);
      hs2.setBounds(375,300,150,50);
      hs2.repaint();
 } 
 public void paint(Graphics g) 
 { 
      g.setColor(Color.white);
      if (!rm.isLoaded())  
      { 
          g.drawString("loading file "+rm.getCurrent(),20,20); 
           g.drawString("of "+rm.getTotalFiles(),20,40);    
           g.drawString("Percent: "+rm.getPercent(),20,60);    
           g.fillRect(20,80,rm.getPercent(),20);    
      } 
      else 
      {
      if (playing == false) {
      g.drawImage(rm.get("background"),0,0,this);
      if (ScreenID == 2) {
      g.drawImage(rm.get("background-2"),300,200,this);
      g.drawString("Username:"+inputbox1Text, 316, 218);
      g.drawString("Password:"+inputbox2Text, 320, 260);
</code></pre>
<p>if (SelItem == 1) {<br>
g.drawRect(315,202,275,25);<br>
}<br>
if (SelItem == 2) {<br>
g.drawRect(315,242,275,25);<br>
}<br>
}<br>
}<br>
if (ScreenID == 3) {<br>
}<br>
}<br>
g.drawString(MX + “,” +MY+ “,” +Message,MX,MY); // debugging &gt;.&lt;<br>
}<br>
public void update (Graphics g)<br>
{<br>
if (dbImage == null)<br>
{<br>
dbImage = createImage (this.getSize().width, this.getSize().height);<br>
dbg = dbImage.getGraphics ();<br>
}<br>
dbg.setColor (getBackground ());<br>
dbg.fillRect (0, 0, this.getSize().width, this.getSize().height);<br>
dbg.setColor (getForeground());<br>
paint (dbg);<br>
g.drawImage (dbImage, 0, 0, this);<br>
}<br>
public void hotSpotEvent(HotSpot hs)<br>
{<br>
if (hs == hs1) {<br>
ScreenID = 2;<br>
remove(hs1);<br>
add(hs2);<br>
}<br>
if (hs == hs2) {<br>
remove(hs2);<br>
Nick = inputbox1Text;<br>
Pass = inputbox2Text;<br>
connect();<br>
}<br>
repaint();<br>
}<br>
public Image loadImage(String file)<br>
{<br>
return getImage(getCodeBase(),file);<br>
}<br>
public AudioClip loadAudio(String file)<br>
{<br>
return getAudioClip(getDocumentBase(),file);<br>
}<br>
}[/code]</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/help-multithreading/136177/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/help-multithreading/136177/1</link>
        <pubDate>Thu, 23 Aug 2007 18:52:55 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-136177-1</guid>
        <source url="https://forum.moparisthebest.com/t/help-multithreading/136177.rss">[help]multithreading :\</source>
      </item>
  </channel>
</rss>
