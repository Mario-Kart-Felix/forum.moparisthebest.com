<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/solved-pi-server-client-packet-sends-an-unrecognized-character/548020 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:07:36 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>[Solved][PI] Server &gt; Client packet sends an unrecognized character? - Runescape - moparisthebest.com</title>
    <meta name="description" content="So I decided I&amp;#39;d try to write a custom packet for my server because the current ones won&amp;#39;t do what I want them to. Packet works, except it&amp;#39;s sending an extra character in front of the String I send to the client.. 

That&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="548020.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;[Solved][PI] Server &gt; Client packet sends an unrecognized character?&#39;" href="548020.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/solved-pi-server-client-packet-sends-an-unrecognized-character/548020" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/solved-pi-server-client-packet-sends-an-unrecognized-character/548020" />
<meta property="og:title" content="[Solved][PI] Server &gt; Client packet sends an unrecognized character?" />
<meta name="twitter:title" content="[Solved][PI] Server &gt; Client packet sends an unrecognized character?" />
<meta property="og:description" content="So I decided I’d try to write a custom packet for my server because the current ones won’t do what I want them to. Packet works, except it’s sending an extra character in front of the String I send to the client…  That might sound a bit confusing or odd, so let me show you what I mean.  I send the string “test” to the client using packet 29 (my custom one).  The client’s ONLY job with the packet right now is to read it, and print whatever is in the String.  This is the output:   ♣test  The chara..." />
<meta name="twitter:description" content="So I decided I’d try to write a custom packet for my server because the current ones won’t do what I want them to. Packet works, except it’s sending an extra character in front of the String I send to the client…  That might sound a bit confusing or odd, so let me show you what I mean.  I send the string “test” to the client using packet 29 (my custom one).  The client’s ONLY job with the packet right now is to read it, and print whatever is in the String.  This is the output:   ♣test  The chara..." />
<meta property="article:published_time" content="2014-11-23T20:46:47+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="548020.html">[Solved][PI] Server &gt; Client packet sends an unrecognized character?</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/sk8rdude461.html'><span itemprop='name'>sk8rdude461</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-11-23T20:46:47Z'>
            <time itemprop='dateModified' datetime='2016-08-04T14:00:25Z' class='post-time'>
              August 4, 2016,  2:00pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>So I decided I’d try to write a custom packet for my server because the current ones won’t do what I want them to. Packet works, except it’s sending an extra character in front of the String I send to the client…</p>
<p>That might sound a bit confusing or odd, so let me show you what I mean.</p>
<p>I send the string “test” to the client using packet 29 (my custom one).<br>
The client’s ONLY job with the packet right now is to read it, and print whatever is in the String.<br>
This is the output:</p>
<p><code>
♣test</code><br>
The character before ‘test’ isn’t in my code. I don’t really know where it came from.</p>
<p>Below is my code. I’m using (of course) a 317 PI server with a renamed 317 client. The client is loading extra/custom data but that shouldn’t affect anything.</p>
<p>Server sided:</p>
<pre><code class="lang-auto"></code></pre>
<p><code>	public void packetTest(String s) {
		synchronized (this) {
			if (getOutStream() != null) {
				outStream.createFrameVarSize(29);
				outStream.writeString(s);
				outStream.endFrameVarSize();
			}
		}
	}</code><br>
I essentially mirrored packet 253 (<a href="https://rswiki.moparisthebest.com/index.php?title=317:Send_message" data-bbcode="true" rel="nofollow noopener">Send message</a>) for this because it sends a string to the client. However, my string is for something totally different.</p>
<p>Here’s the client sided code:</p>
<p><code>			case 29:
				String title = inStream.readString();
				System.out.println(title);
				pktType = -1;
				return true;</code></p>
<p>And I changed the packet size to 6 (same as send message I believe… could be wrong).<br>
I might have forgot a step when making the packet, but everything seems correct.</p>
<p>Note: unrecognized because when it printed in eclipse it printed as a box and question mark.</p>
<p><span class="bbcode-b">Edit</span>:<br>
It seems I had the packet size incorrect. Changing it to -1 seems to have corrected the issue.</p>
<p>Silly me.</p>
      </div>

      <meta itemprop='headline' content='[Solved][PI] Server &gt; Client packet sends an unrecognized character?'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/matzie.html'><span itemprop='name'>matzie</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-11-24T06:46:48Z'>
            <time itemprop='dateModified' datetime='2016-08-04T14:00:37Z' class='post-time'>
              August 4, 2016,  2:00pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Yes. The side (-1) for packet denotes var-size packet(1 byte for length). (-2) denotes a var-word sized packet. (2 bytes for length)<br>
0-127 denote fixed lengths<br>
(-128) - (-3) are unused</p>
      </div>

      <meta itemprop='headline' content='[Solved][PI] Server &gt; Client packet sends an unrecognized character?'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/sk8rdude461.html'><span itemprop='name'>sk8rdude461</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-11-24T17:29:34Z'>
            <time itemprop='dateModified' datetime='2016-08-04T14:00:39Z' class='post-time'>
              August 4, 2016,  2:00pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="2" data-topic="548020">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/matzie/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> matzie:</div>
<blockquote>
<p>Yes. The side (-1) for packet denotes var-size packet(1 byte for length). (-2) denotes a var-word sized packet. (2 bytes for length)</p>
</blockquote>
</aside>
<p>Thnx I’ll have to remember that.</p>
      </div>

      <meta itemprop='headline' content='[Solved][PI] Server &gt; Client packet sends an unrecognized character?'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/solved-pi-server-client-packet-sends-an-unrecognized-character/548020 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:07:36 GMT -->
</html>
