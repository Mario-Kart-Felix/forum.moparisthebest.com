<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>How do i prevent the server crashing?</title>
    <link>https://forum.moparisthebest.com/t/how-do-i-prevent-the-server-crashing/172881</link>
    <description>heres the code from the server.java


[code]// taking into account the time spend in the processing code for more accurate timing
			long timeSpent = System.currentTimeMillis() - lastTicks;
			totalTimeSpentProcessing += timeSpent;
			if(timeSpent &gt;= cycleTime) {
				timeSpent = cycleTime;
				if(++waitFails &gt; 100) {
					//shutdownServer = false;
					misc.println(&quot;[KERNEL]: machine is too slow to run this server!&quot;);
				}
			}
			try {
				Thread.sleep(cycleTime-timeSpent);
			} catch(java.lang.Exception _ex) { }
			lastTicks = System.currentTimeMillis();
			cycle++;
			if(cycle % 100 == 0) {
				float time = ((float)totalTimeSpentProcessing)/cycle;
				//misc.println_debug(&quot;[KERNEL]: &quot;+(time*100/cycleTime)+&quot;% processing time&quot;);
			}
			if (cycle % 3600 == 0) {
				System.gc();
			}
			if (ShutDown == false) {
				if (ShutDownCounter &gt;= 99999) {
					shutdownServer = false;
				}
				ShutDownCounter++;
			}
		}

		// shut down the server
		playerHandler.destruct();
		clientHandler.killServer();
		clientHandler = null;
	}
	public static server clientHandler = null;			// handles all the clients
	public static java.net.ServerSocket clientListener = null;
	public static boolean shutdownServer = false;		// set this to true in order to shut down and kill the server
	public static boolean shutdownClientHandler;			// signals ClientHandler to shut down
	public static int serverlistenerPort = 43594; //43594=default

	public static PlayerHandler playerHandler = null;
	public static NPCHandler npcHandler = null;
	public static ItemHandler itemHandler = null;
	public static ShopHandler shopHandler = null;
      public static antilag antilag = null;
	public static WorldObject worldObject = null;
      public static itemspawnpoints itemspawnpoints = null;
      public static GraphicsHandler GraphicsHandler = null;
      public static ObjectHandler objectHandler = null;
      public static DialogueHandler dialogueHandler = null; 
      public static SkillHandler skillHandler = null;

	public static void calcTime() {
		long curTime = System.currentTimeMillis();
		updateSeconds = 180 - ((int)(curTime - startTime) / 1000);
		if(updateSeconds == 0) {
			shutdownServer = true;
		}
	}[/code]</description>
    
    <lastBuildDate>Sun, 13 Jan 2008 05:18:01 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/how-do-i-prevent-the-server-crashing/172881.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>How do i prevent the server crashing?</title>
        <dc:creator><![CDATA[@i_pwnz_nubz i_pwnz_nubz]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/i_pwnz_nubz">@i_pwnz_nubz</a> wrote:</p>
          <blockquote>
              <p>yea it is on the right section.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/how-do-i-prevent-the-server-crashing/172881/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/how-do-i-prevent-the-server-crashing/172881/3</link>
        <pubDate>Sun, 13 Jan 2008 05:18:01 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-172881-3</guid>
        <source url="https://forum.moparisthebest.com/t/how-do-i-prevent-the-server-crashing/172881.rss">How do i prevent the server crashing?</source>
      </item>
      <item>
        <title>How do i prevent the server crashing?</title>
        <dc:creator><![CDATA[@drask182 drask182]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/drask182">@drask182</a> wrote:</p>
          <blockquote>
              <p>wrong section</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/how-do-i-prevent-the-server-crashing/172881/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/how-do-i-prevent-the-server-crashing/172881/2</link>
        <pubDate>Sun, 13 Jan 2008 05:16:15 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-172881-2</guid>
        <source url="https://forum.moparisthebest.com/t/how-do-i-prevent-the-server-crashing/172881.rss">How do i prevent the server crashing?</source>
      </item>
      <item>
        <title>How do i prevent the server crashing?</title>
        <dc:creator><![CDATA[@i_pwnz_nubz i_pwnz_nubz]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/i_pwnz_nubz">@i_pwnz_nubz</a> wrote:</p>
          <blockquote>
              <p>heres the code from the server.java</p>
<p>[code]// taking into account the time spend in the processing code for more accurate timing<br>
long timeSpent = System.currentTimeMillis() - lastTicks;<br>
totalTimeSpentProcessing += timeSpent;<br>
if(timeSpent &gt;= cycleTime) {<br>
timeSpent = cycleTime;<br>
if(++waitFails &gt; 100) {<br>
//shutdownServer = false;<br>
misc.println("[KERNEL]: machine is too slow to run this server!");<br>
}<br>
}<br>
try {<br>
Thread.sleep(cycleTime-timeSpent);<br>
} catch(java.lang.Exception _ex) { }<br>
lastTicks = System.currentTimeMillis();<br>
cycle++;<br>
if(cycle % 100 == 0) {<br>
float time = ((float)totalTimeSpentProcessing)/cycle;<br>
//misc.println_debug("[KERNEL]: “+(time*100/cycleTime)+”% processing time");<br>
}<br>
if (cycle % 3600 == 0) {<br>
System.gc();<br>
}<br>
if (ShutDown == false) {<br>
if (ShutDownCounter &gt;= 99999) {<br>
shutdownServer = false;<br>
}<br>
ShutDownCounter++;<br>
}<br>
}</p>
<pre><code>	// shut down the server
	playerHandler.destruct();
	clientHandler.killServer();
	clientHandler = null;
}
public static server clientHandler = null;			// handles all the clients
public static java.net.ServerSocket clientListener = null;
public static boolean shutdownServer = false;		// set this to true in order to shut down and kill the server
public static boolean shutdownClientHandler;			// signals ClientHandler to shut down
public static int serverlistenerPort = 43594; //43594=default

public static PlayerHandler playerHandler = null;
public static NPCHandler npcHandler = null;
public static ItemHandler itemHandler = null;
public static ShopHandler shopHandler = null;
  public static antilag antilag = null;
public static WorldObject worldObject = null;
  public static itemspawnpoints itemspawnpoints = null;
  public static GraphicsHandler GraphicsHandler = null;
  public static ObjectHandler objectHandler = null;
  public static DialogueHandler dialogueHandler = null; 
  public static SkillHandler skillHandler = null;

public static void calcTime() {
	long curTime = System.currentTimeMillis();
	updateSeconds = 180 - ((int)(curTime - startTime) / 1000);
	if(updateSeconds == 0) {
		shutdownServer = true;
	}
}[/code]</code></pre>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/how-do-i-prevent-the-server-crashing/172881/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/how-do-i-prevent-the-server-crashing/172881/1</link>
        <pubDate>Sun, 13 Jan 2008 05:14:23 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-172881-1</guid>
        <source url="https://forum.moparisthebest.com/t/how-do-i-prevent-the-server-crashing/172881.rss">How do i prevent the server crashing?</source>
      </item>
  </channel>
</rss>
