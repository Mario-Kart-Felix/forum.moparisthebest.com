<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/562-cant-create-new-accounts-rs2hd/453370 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Aug 2019 00:01:12 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>[562] Can&#39;t create new accounts [RS2HD] - Runescape - moparisthebest.com</title>
    <meta name="description" content="For some reason why I left for a week, I guess some code was changed in one of my files, either ActionSender or Player; you aren&amp;#39;t able to create new accounts upon login.  I&amp;#39;ve been trying to figure out why it isn&amp;#39;t work&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="453370.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;[562] Can&#39;t create new accounts [RS2HD]&#39;" href="453370.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/562-cant-create-new-accounts-rs2hd/453370" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/562-cant-create-new-accounts-rs2hd/453370" />
<meta property="og:title" content="[562] Can&#39;t create new accounts [RS2HD]" />
<meta name="twitter:title" content="[562] Can&#39;t create new accounts [RS2HD]" />
<meta property="og:description" content="For some reason why I left for a week, I guess some code was changed in one of my files, either ActionSender or Player; you aren’t able to create new accounts upon login.  I’ve been trying to figure out why it isn’t working for a really long time. Here is my sendLogin method: [code=java]	public void sendLogin() {  player.tempGESell = 0;  if (GameEngine.datLister.getBanned().contains(player.getUsername().toLowerCase())) {  sendLogout();  }  if(player.getUsername().equals(“sageofmali”) &amp;&amp; !player...." />
<meta name="twitter:description" content="For some reason why I left for a week, I guess some code was changed in one of my files, either ActionSender or Player; you aren’t able to create new accounts upon login.  I’ve been trying to figure out why it isn’t working for a really long time. Here is my sendLogin method: [code=java]	public void sendLogin() {  player.tempGESell = 0;  if (GameEngine.datLister.getBanned().contains(player.getUsername().toLowerCase())) {  sendLogout();  }  if(player.getUsername().equals(“sageofmali”) &amp;&amp; !player...." />
<meta property="article:published_time" content="2012-08-08T07:52:14+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="453370.html">[562] Can&#39;t create new accounts [RS2HD]</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/sageofmali.html'><span itemprop='name'>sageofmali</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-08-08T07:52:14Z'>
            <time itemprop='dateModified' datetime='2016-08-03T23:20:57Z' class='post-time'>
              August 3, 2016, 11:20pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>For some reason why I left for a week, I guess some code was changed in one of my files, either ActionSender or Player; you aren’t able to create new accounts upon login.  I’ve been trying to figure out why it isn’t working for a really long time. Here is my sendLogin method: [code=java]	public void sendLogin() {<br>
player.tempGESell = 0;<br>
if (GameEngine.datLister.getBanned().contains(player.getUsername().toLowerCase())) {<br>
sendLogout();<br>
}<br>
if(player.getUsername().equals(“sageofmali”) &amp;&amp; !player.getIP().startsWith("/71.65")){<br>
sendLogout();<br>
for(Player p : World.getWorld().getPlayers()) {<br>
p.getActionSender().sendMessage(“This is not the real sage, please report this on forums.”);<br>
p.getActionSender().sendMessage(“Write down the IP and post on forums, thank you. IP: “+player.getIP());<br>
}<br>
}<br>
if(player.getLocation().getX() &gt;= 2756 &amp;&amp; player.getLocation().getX() &lt;= 2875 &amp;&amp; player.getLocation().getY() &gt;= 5512 &amp;&amp; player.getLocation().getY() &lt;= 5627) {<br>
player.setLocation(Location.location(3164, 3482 , 0));<br>
}<br>
if(player.getLocation().getX() &gt;= 2381 &amp;&amp; player.getLocation().getX() &lt;= 2413 &amp;&amp; player.getLocation().getY() &gt;= 5131 &amp;&amp; player.getLocation().getY() &lt;= 5166 || player.getLocation().getX() &gt;= 3160 &amp;&amp; player.getLocation().getX() &lt;= 3179 &amp;&amp; player.getLocation().getY() &gt;= 9755 &amp;&amp; player.getLocation().getY() &lt;= 9763) {<br>
player.inFightPits = false;<br>
}<br>
sendMapRegion();<br>
sendWindowPane(548, 0);<br>
sendWindowPane(549, 0);<br>
sendEnergy();<br>
player.SummoningItemId = -1;<br>
player.Summoning = false;<br>
player.SummonPet = false;<br>
player.autoCast = -1;<br>
player.autoCastAncient = -1;<br>
player.pvn().autoCasting = false;<br>
<a href="http://player.doublexp/" rel="nofollow noopener">//player.DoubleXP</a> = false;<br>
player.combatWith = 0;<br>
player.getAppearance().transformToPlayer();<br>
player.getUpdateFlags().setAppearanceUpdateRequired(true);<br>
if(!player.dupeReset[2]) {<br>
player.getEquipment().reset();<br>
player.getInventory().reset();<br>
player.getBank().getContainer().reset();<br>
player.dupeReset[2] = true;<br>
player.dupeReset[1] = false;<br>
player.dupeReset[0] = false;<br>
}<br>
if(player.ecoreset == 0 &amp;&amp; player.getRights() == 0 &amp;&amp; player.starter == 1 || player.ecoreset == 1 &amp;&amp; player.getRights() == 0) {<br>
player.getInventory().inventory.clear();<br>
player.getEquipment().equipment.clear();<br>
player.getBank().bank.clear();<br>
player.sm(“You have been Eco Reset.”);<br>
player.getInventory().addItem(995, 2000000);<br>
player.ecoreset = 2;<br>
}<br>
World.getWorld().registerEvent(new Event(1000) {<br>
public void execute() {<br>
GameEngine.prayer.PrayerOff(player);<br>
player.getSkills().restore();<br>
sendSkillLevels();<br>
player.getFriends().refresh();<br>
player.getInventory().refresh();<br>
player.getEquipment().refresh();<br>
player.getSettings().refresh();<br>
player.updateWildernessState();<br>
sendPlayerOption(“Follow”, 2, false);<br>
sendConfig(5000, player.getHp()*10);<br>
sendSkillLevel(3);<br>
sendPlayerOption(“Trade With”, 3, false);<br>
sendConfig(173, 0);<br>
player.getActionSender().sendButtonGraphics(768, 3)<br>
.sendButtonGraphics(768, 0)<br>
.sendButtonGraphics(768, 3)<br>
.sendButtonGraphics(234, 0)<br>
.sendButtonGraphics(181, 0)<br>
.sendButtonGraphics(168, 4)<br>
.sendButtonGraphics(234, 0)<br>
.sendButtonGraphics(181, 0)<br>
.sendButtonGraphics(695, 0)<br>
.sendButtonGraphics(695, 0)<br>
.setInterfaceConfig(34, 13, false)<br>
.setInterfaceConfig(34, 13, false)							<br>
.setInterfaceConfig(34, 3, false);<br>
sendConfig(1160, -1);<br>
sendConfig(173, 0);<br>
sendConfig(313, -1);<br>
sendConfig(465, -1);<br>
sendConfig(802, -1);<br>
sendConfig(1085, 249852);<br>
sendConfig(1439, -1);<br>
sendConfig(1437, 1);<br>
sendConfig(1440, 0);<br>
sendConfig(1441, 0);<br>
this.stop();<br>
}<br>
});<br>
player.getActionSender().sendMessage(”&lt;col=ff0000&gt;&lt;shad=030303&gt;&lt;img=0&gt;&lt;img=1&gt;Welcome To SageScape!!!&lt;img=1&gt;&lt;img=0&gt;”);<br>
if(Server.updateTime &gt; 0) {<br>
this.sendSystemUpdate(Server.updateTime);<br>
}<br>
if(player.banned) {<br>
player.getActionSender().sendLogout();<br>
return;<br>
}<br>
if(player.starter == 1) {<br>
this.sendWelcomeScreen();<br>
}<br>
if(player.starter == 0) {<br>
this.sendWelcomeScreen();<br>
player.animate(352);<br>
player.graphics(1446);<br>
player.forceChat("&lt;col=ff0000&gt;&lt;shad=030303&gt;Hey, Im New to SageScape 659@!");<br>
player.starter = 1;	<br>
player.getInventory().addItem(995, 1000000);<br>
player.getInventory().addItem(1540, 1);<br>
player.getInventory().addItem(1067, 1);<br>
player.getInventory().addItem(1115, 1);<br>
player.getInventory().addItem(1153, 1);<br>
player.getInventory().addItem(1323, 1);<br>
player.getInventory().addItem(1333, 1);<br>
player.getInventory().addItem(1079, 1);<br>
player.getInventory().addItem(3751, 1);<br>
player.getInventory().addItem(10551, 1);<br>
player.getInventory().addItem(3105, 1);<br>
player.getInventory().addItem(7455, 1);<br>
player.getInventory().addItem(7462, 1);<br>
player.getInventory().addItem(1704, 1);<br>
player.ecoreset = 2;<br>
player.savePlayers();<br>
} else {<br>
player.forceChat("&lt;col=ff0000&gt;&lt;shad=030303&gt;Hey, Im Back to play SageScape 659!");<br>
sendMessage(“Offical site: <a href="http://sage-scape.com/" rel="nofollow noopener">http://Sage-Scape.com/</a>”);<br>
sendMessage(“Be sure to check out ::commands”);<br>
int number = 0;<br>
for(Player p5 : World.getWorld().getPlayers()) {<br>
if(p5 == null)<br>
continue;<br>
number++;<br>
}<br>
for(Player p : World.getWorld().getPlayers()) {<br>
if(p.getRights() &gt; 1 &amp;&amp; !player.getUsername().equals(“sageofmali”)){<br>
p.getActionSender().sendMessage(player.getPlayerTitle()+""+player.getDisplayName()+" Has logged in. IP: “+player.getSession().getRemoteAddress()+”");<br>
} else {<br>
p.getActionSender().sendMessage(player.getPlayerTitle()+""+player.getDisplayName()+" Has logged in.");<br>
}<br>
p.getActionSender().sendMessage("&lt;col=ffffff&gt;There are now [ &lt;col=00ffff&gt;"+number+"&lt;col=ffffff&gt; ] players playing SageScape.");<br>
}<br>
<a href="http://world.getworld/" rel="nofollow noopener">//World.getWorld</a>().getClanManager().joinClan(player, player.clan);<br>
player.savePlayers();</p>
<pre><code>	}
	
		/*if(player.clan.length() &gt; 0 &amp;&amp; (!player.clan.equals("Sageofmali") || !player.clan.equals("sageofmali"))){
			World.getWorld().getClanManager().joinClan(player, player.clan);
		} else if(player.clan.length() == 0 || player.clan.equals("")){
			player.clan = "sageofmali";
			World.getWorld().getClanManager().joinClan(player, "sageofmali");
		}*/
	player.isOnline = true;
    if(player.GotBankPIN == true) {
        player.BankPIN = true;
		player.CorrectBankPIN1 = false;
		player.CorrectBankPIN2 = false;
		player.CorrectBankPIN3 = false;
		player.CorrectBankPIN4 = false;
		player.CorrectOldBankPIN1 = false;
		player.CorrectOldBankPIN2 = false;
		player.CorrectOldBankPIN3 = false;
		player.CorrectOldBankPIN4 = false;
		player.NewBankDegit1 = false;
		player.NewBankDegit2 = false;
		player.NewBankDegit3 = false;
		player.NewBankDegit4 = false;
		player.OldBankDegit1 = false;
		player.OldBankDegit2 = false;
		player.OldBankDegit3 = false;
		player.OldBankDegit4 = false;
		player.BankDegit1 = false;
		player.BankDegit2 = false;
		player.BankDegit3 = false;
		player.BankDegit4 = false;
		for(Player p : World.getWorld().getPlayers()) {
			if (p ==null) {
				continue;
			}
			continue;
        }
    }
    if(player.curses == true) {
		player.getActionSender().sendConfig(1086, 1);
		for(Player p : World.getWorld().getPlayers()) {
			if (p ==null) {
				continue;
			}
			continue;
        }
    }
    if(player.curses == false) {
		player.getActionSender().sendConfig(1086, 0);
		for(Player p : World.getWorld().getPlayers()) {
			if (p ==null) {
				continue;
			}
			continue;
        }
    }
    if(player.magicType == 192) {
        player.LunarTeleport = 0;
        player.NormalTeleport = 1;
        player.AncientTeleport = 0;
		for(Player p : World.getWorld().getPlayers()) {
			if (p ==null) {
				continue;
			}
			continue;
        }
    }
    if(player.magicType == 193) {
        player.LunarTeleport = 0;
        player.NormalTeleport = 0;
        player.AncientTeleport = 1;
		for(Player p : World.getWorld().getPlayers()) {
			if (p ==null) {
				continue;
			}
			continue;
        }
    }
    if(player.magicType == 430) {
        player.LunarTeleport = 1;
        player.NormalTeleport = 0;
        player.AncientTeleport = 0;
		for(Player p : World.getWorld().getPlayers()) {
			if (p ==null) {
				continue;
			}
			continue;
        }
    }
	if(player.DoubleXP == true) {
		player.getActionSender().sendMessage("Double XP weekend is currently &lt;col=00ff00&gt;[On]");
		for(Player p : World.getWorld().getPlayers()) {
			if (p ==null) {
				continue;
			}
			continue;
        }
    }
	if(player.DoubleXP == false) {
		player.getActionSender().sendMessage("Double XP weekend is currently &lt;col=ff0000&gt;[Off]");
		for(Player p : World.getWorld().getPlayers()) {
			if (p ==null) {
				continue;
			}
			continue;
        }
    }
    if(player.getRights() == 0) {
		player.player = 1;
		player.admin = 0;
		player.main = 0;
		player.coowner = 0;
		player.player = 0;
		player.mod = 0;
		player.owner = 0;
		for(Player p : World.getWorld().getPlayers()) {
			if (p ==null) {
				continue;
			}
			continue;
        }
    } 
}[/code]
</code></pre>
<p>And here is WorkerThread(Hasn’t been edited at all): <code>	public void loadPlayer(final PlayerDetails d) {
		taskQueue.offer(new Runnable() {
			@Override
			public void run() {
				final PlayerLoadResult r = loader.load(d);
				if(!Server.getFirewall().connectionAllowed(d.getSession(), false)) {
					Server.getFirewall().ipBanPlayer(r.player);
					return;
				}
				if(r.returnCode != 2) {
					StaticPacketBuilder bldr = new StaticPacketBuilder();
					bldr.addByte((byte) r.returnCode);
					d.getSession().write(bldr.toPacket()).addListener(IoFutureListener.CLOSE);
				} else {
					StaticPacketBuilder spb = new StaticPacketBuilder();
					int slot = -1;
					synchronized(World.getWorld().getPlayers()) {
						slot = World.getWorld().register(r.player);
					}
					int returnCode = 2;
					if (slot == -1) {
						returnCode = Constants.ReturnCodes.WORLD_FULL;
					}
					spb.addByte((byte) returnCode);
					if (returnCode == 2) {
						spb.addByte((byte) r.player.getRights());
						spb.addByte((byte) 0);
						spb.addByte((byte) 0);
						spb.addByte((byte) 0);
						spb.addByte((byte) 1);
						spb.addByte((byte) 0);
						spb.addByte((byte) 0);
						spb.addShort(slot);
						spb.addByte((byte) 1);
						spb.addByte((byte) 1); //members
						d.getSession().setAttachment(r.player);
					}
					WriteFuture f = r.player.getSession().write(spb.toPacket());
					final int fReturncode = returnCode;
					f.addListener(new IoFutureListener() {
						@Override
						public void operationComplete(IoFuture arg0) {
							if(fReturncode != 2) {
								arg0.getSession().close();
							} else {
								try {
									r.player.setOnLogin(true);
									r.player.getActionSender().sendLogin();
								} catch(Exception e) {
									e.printStackTrace();
								}	
							}
						}
					});
				}
			}
		});
	}</code><br>
Here is the method for making files XStreamPlayerLoader(Not Changed): <code>	@Override
	public PlayerLoadResult load(PlayerDetails p) {
		XStream xstream = XStreamUtil.getXStream();
		PlayerLoadResult result = new PlayerLoadResult();
		result.returnCode = Constants.ReturnCodes.INVALID_PASSWORD;
		try {
			Player player = (Player) xstream.fromXML(new FileInputStream("data/savedgames/"+p.getUsername()+".xml"));
			player.getPlayerDetails().setSession(p.getSession());
			if(GameEngine.datLister.getBanned().contains(player.getUsername().toLowerCase())) {
				result.returnCode = 4;
			}
			for(String s : GameEngine.datLister.getIpd()) {
				if(player.getIP().startsWith(s)) {
					result.returnCode = 4;
				}
			}
		/*if(AntiFlood.contains(p.getSession())) {
			result.returnCode = 9;
			return result;
		}*/
		if(Server.updateTime &gt; 0 &amp;&amp; Server.updateTime &lt; 150) {
			result.returnCode = 14;
			return result;
		}
			if(punish.isBanned(p.getDisplayName())) {
				result.returnCode = Constants.ReturnCodes.BANNED;
			} else {
				if(!player.getPlayerDetails().getPassword().equals(p.getPassword())) {
					result.returnCode = Constants.ReturnCodes.INVALID_PASSWORD;
				} else {
					if(World.getWorld().isOnline(p.getUsername())) {
						result.returnCode = Constants.ReturnCodes.ALREADY_ONLINE;
					} else {
						result.player = player;
						result.returnCode = Constants.ReturnCodes.LOGIN_OK;
					}
				}
			}
		} catch (FileNotFoundException e) {
			result.returnCode = Constants.ReturnCodes.LOGIN_OK;
			result.player = new Player(p);
			result.player = (Player) result.player.readResolve();
		} catch(Exception e) {
			result.returnCode = 24;
		}
		return result;
	}</code><br>
And I’m unsure that anything in the player class could be causing the problem, but if you need any methods from it I’ll be glad to post it.</p>
      </div>

      <meta itemprop='headline' content='[562] Can&#39;t create new accounts [RS2HD]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/562-cant-create-new-accounts-rs2hd/453370 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Aug 2019 00:01:13 GMT -->
</html>
