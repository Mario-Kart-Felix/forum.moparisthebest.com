<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/classnotfound-hell/158380 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 16:56:52 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>ClassNotFound hell - General Programming - moparisthebest.com</title>
    <meta name="description" content="This is pissing me off no end. 

Okay I instrument the java byte code to call my code. So a method would have a method would have the call Stuff.staticMethod() added. The problem is that the class Stuff cannot be found. &amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="158380.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;ClassNotFound hell&#39;" href="158380.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/classnotfound-hell/158380" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/classnotfound-hell/158380" />
<meta property="og:title" content="ClassNotFound hell" />
<meta name="twitter:title" content="ClassNotFound hell" />
<meta property="og:description" content="This is pissing me off no end.  Okay I instrument the java byte code to call my code. So a method would have a method would have the call Stuff.staticMethod() added. The problem is that the class Stuff cannot be found. So how do I define the class so that instumented classes can access it?[br][size=1]Posted on: 14 November 2007, 09:24:28 PM[/size][hr]I’m a tool. Loading classes from two different (and in some cases a total of 4!) class loaders confused the hell out of me.  The best way to do it ..." />
<meta name="twitter:description" content="This is pissing me off no end.  Okay I instrument the java byte code to call my code. So a method would have a method would have the call Stuff.staticMethod() added. The problem is that the class Stuff cannot be found. So how do I define the class so that instumented classes can access it?[br][size=1]Posted on: 14 November 2007, 09:24:28 PM[/size][hr]I’m a tool. Loading classes from two different (and in some cases a total of 4!) class loaders confused the hell out of me.  The best way to do it ..." />
<meta property="article:published_time" content="2007-11-14T19:31:52+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="158380.html">ClassNotFound hell</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/general-programming.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>General Programming</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/BAsh_CntLgn.html'><span itemprop='name'>BAsh_CntLgn</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2007-11-14T19:31:52Z'>
            <time itemprop='dateModified' datetime='2016-07-30T16:53:28Z' class='post-time'>
              July 30, 2016,  4:53pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>This is pissing me off no end.</p>
<p>Okay I instrument the java byte code to call my code. So a method would have a method would have the call Stuff.staticMethod() added. The problem is that the class Stuff cannot be found. So how do I define the class so that instumented classes can access it?[br][size=1]Posted on: 14 November 2007, 09:24:28 PM[/size][hr]I’m a tool. Loading classes from two different (and in some cases a total of 4!) class loaders confused the hell out of me.</p>
<p>The best way to do it is the Instrumentation.appendToBootstrapClassLoaderSearch() method. Probably should be using system class loader but oh well. Its annoying how I have to dump the files to disk rather than load them dynamically.</p>
      </div>

      <meta itemprop='headline' content='ClassNotFound hell'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/moparisthebest.html'><span itemprop='name'>moparisthebest</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2007-11-15T01:00:35Z'>
            <time itemprop='dateModified' datetime='2016-07-30T16:53:41Z' class='post-time'>
              July 30, 2016,  4:53pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Why not edit classes at runtime, have a look at ClassEditor in cherokee.  You can choose to dump them to disk and use later, but it is certainly easier to debug if you do it all at runtime.</p>
      </div>

      <meta itemprop='headline' content='ClassNotFound hell'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/yakman.html'><span itemprop='name'>yakman</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2007-11-15T02:44:32Z'>
            <time itemprop='dateModified' datetime='2016-07-30T16:53:47Z' class='post-time'>
              July 30, 2016,  4:53pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>well bash i didnt understand too well when you were trying to say<br>
it seems to me like, you put INVOKESTATIC to your own method somewhere, then put those classes in a classloader, but when it gets to that part it says “class not found exception”<br>
and when you dump them to file, and load with bootstrap classloader, it works</p>
<p>well i dont know whats wrong, its always worked for me when i make a custom classloader</p>
<p>do you maybe override loadClass(), if you do that, you also have to search in the classloader’s parent if you dont find it, or you could just override findClass() which makes things easier.</p>
<p>if that doesnt work, call ClassLoader.getParent().toString() and see what you get, maybe you get some other random classloader</p>
      </div>

      <meta itemprop='headline' content='ClassNotFound hell'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/BAsh_CntLgn.html'><span itemprop='name'>BAsh_CntLgn</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2007-11-15T04:36:10Z'>
            <time itemprop='dateModified' datetime='2016-07-30T16:53:54Z' class='post-time'>
              July 30, 2016,  4:53pm
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Okay, when I posted that question I was watching the chasers(channel 7 got pwnd) and really wasn’t paying much attention, sorry.</p>
<p>Okay so I extended ClassFileTransformer and had the applet classes going past in bytecode. I edited that bytecode to add calls with INVOKESTATIC. The target of which were classes defined from the same source as my ClassFileTransformer. The problem was that the ClassFileTransformer class was defined in a different classloader chain than the applet. Hence the no class found exception.</p>
<p>This is the “chain” of classloaders that applet runs from, they try to get the class from the applet classloader, if that fails the request gets passed on to the parent:<br>
AppletClassLoader -&gt; SystemClassLoader -&gt; BootstrapClassLoader<br>
This is the chain my instrumentation classes run from:<br>
InstrumentationAgentClassLoader -&gt; SystemClassLoader -&gt; BootstrapClassLoader</p>
<p>With the classes defined with the bootstrap classloader I can inject my classes in to a place in the chain so they can be resolved. The problem is that the classes have to be created on disk and passed as a JarFile to the class Instrumentation. This is very annoying, but it works.</p>
      </div>

      <meta itemprop='headline' content='ClassNotFound hell'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/classnotfound-hell/158380 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 16:56:53 GMT -->
</html>
