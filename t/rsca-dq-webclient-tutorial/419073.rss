<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>RSCA/DQ Webclient Tutorial</title>
    <link>https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073</link>
    <description>I have been working on this nonstop for almost 7 hours now. I think it will work with RSCA but you might have to do some debugging if you get an error. I know that this works correctly with the DarkQuest client fresh from a SVN checkout.

1.) You will need to add MIME types to your webserver to support .jag, .mem. and .rscd files. I just set them all as &quot;application/x-zip-compressed&quot;

2.) You will need to create a folder in the root of your webserver&#39;s WWW directory, name it &quot;cache&quot;, and copy all of the files in the DarkQuest data folder in to it.

3.) I suggest importing the project into Netbeans/Eclipse, it will help the debugging process go by much easier.

4.) Both the RSCA and DarkQuest clients currently rely on the lib folder&#39;s .jar library files to run the mudclient. It looks like the traditional webclients managed to run without the library files. Find a way to not need the lib files and you will be set.

5.) There are no file versions associated with the client cache files so I personally won&#39;t be using this because I prefer the MD5 hash checker method for the time being. This is enough to get you started and from there go figure it out.

6.) Open up mudclient.java and add these imports:
[code]
import java.io.FileOutputStream;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.URL;
import java.util.Iterator;
[/code]


Replace the method:
[code]protected final byte[] load(String filename)[/code]

With:
[code]
        protected final byte[] load(String filename) {
		mudclient.loadCachedFile(filename);
		return super.load(Config.CONF_DIR + File.separator + filename);
	}
[/code]

Search for:
[code]
public static File loadCachedFile(String filename)
[/code]
and delete the entire method.

Find:
[code]
final void method45
[/code]

and above it, add:
[code]
        public static String[] dB = {&quot;http://YOUR_WEBSITE.COM/cache/&quot;}; //RENAME /cache/ TO YOUR CACHE FOLDER IN WWW
        public static File loadCachedFile(String s1) {
            File file = new File((new StringBuilder()).append(Config.CONF_DIR).append(&quot;/&quot;).append(s1).toString());
            if(!file.isFile()) {
                System.out.println((new StringBuilder()).append(&quot;Data file not found locally: &quot;).append(s1).toString());
                boolean flag = false;
                ArrayList arraylist = new ArrayList();
                String as1[] = dB;
                int i1 = as1.length;
                for(int j1 = 0; j1 &lt; i1;) {
                    String s2 = as1[j1];
                    String s3 = (new StringBuilder()).append(s2).append(s1).toString();
                    System.out.print((new StringBuilder()).append(&quot;\tTrying &quot;).append(s2).append(&quot; =&gt; &quot;).toString());
                    try {
                        HttpURLConnection httpurlconnection = (HttpURLConnection)(new URL(s3)).openConnection();
                        if(httpurlconnection.getResponseCode() != 200) {
                            System.out.println(&quot;Unable to obtain file.&quot;);
                            continue;
                        }
                        System.out.print(&quot;Downloading.. &quot;);
                        InputStream inputstream = httpurlconnection.getInputStream();
                        file.createNewFile();
                        FileOutputStream fileoutputstream = new FileOutputStream(file);
                        byte abyte0[] = new byte[1024];
                        for(int k1 = 0; (k1 = inputstream.read(abyte0)) != -1;)
                        fileoutputstream.write(abyte0, 0, k1);
                        inputstream.close();
                        fileoutputstream.close();
                        System.out.println(&quot;Done.&quot;);
                        break;
                    }
                    catch(Exception exception1) {
                        System.out.println(&quot;Unable to obtain file.&quot;);
                        arraylist.add(exception1);
                        j1++;
                    }
                }
                if(arraylist.size() == dB.length) {
                    System.out.println((new StringBuilder()).append(&quot;Downloading data file &quot;).append(s1).append(&quot; failed.\nPlease report the error, and include the following exception data:&quot;).toString());
                    Exception exception;
                    for(Iterator iterator = arraylist.iterator(); iterator.hasNext(); exception.printStackTrace())
                    exception = (Exception)iterator.next();
                    System.exit(1);
                }
            }
            s1 = file.getAbsolutePath();
            return file;
        }
        //End cache loader
[/code]

Search for:
[code]
audioReader = new AudioReader();
[/code]

Remove the rest of the method after that and replace the rest of the method with:
[code]
return;
		} catch (Throwable throwable) {
			System.out.println(&quot;Unable to init sounds:&quot; + throwable);
		}
	}
[/code]


Save mudclient.java and open conf/Config.java

Find:
[code]
public static String SERVER_IP
[/code]

Replace the entire line with:
[code]
public static String SERVER_IP = &quot;YOUR_GAME_SERVER_IP&quot;, HOME_DIR = &quot;YOUR_HOME_CACHE_FOLDER_NAME&quot;, CONF_DIR = System.getProperty(&quot;user.home&quot;) + File.separator + HOME_DIR, MEDIA_DIR = CONF_DIR;
[/code]

Find:
[code]
public static Properties loadConfig()
[/code]

Replace the entire method with:
[code]
                //Creates cache folder if missing
                File home = new File((new StringBuilder()).append(CONF_DIR).toString());
                if(!home.exists())
			try {
                                home.mkdir();
                                System.out.println(&quot;Created cache folder&quot;);
                        } catch (Exception e) {
				System.out.println(&quot;Unable to create cache folder!&quot;);
			}
                //Creates client config file if missing
                File f = new File(CONF_DIR + File.separator + &quot;config.properties&quot;);
		if(!f.exists())
			try {
				f.createNewFile();
			} catch (IOException e1) {
				System.out.println(&quot;Unable to create configuration file!&quot;);
			}
		Properties defaultProps = new Properties();
		try {
			defaultProps.load(new FileInputStream(CONF_DIR + File.separator + &quot;config.properties&quot;));
		} catch (Exception e) {
			e.printStackTrace();
		}
		return defaultProps;
	}
[/code]


I&#39;m too burned out to answer questions about this right now. Maybe later.</description>
    
    <lastBuildDate>Sun, 30 Oct 2011 23:25:28 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>RSCA/DQ Webclient Tutorial</title>
        <dc:creator><![CDATA[@imthenull imthenull]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/imthenull">@imthenull</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="14" data-topic="419073">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/rscshadow/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> RSCShadow:</div>
<blockquote>
<p>Yeah but everyone uses Eclipse.</p>
</blockquote>
</aside>
<p>true dat, yo.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073/15">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073/15</link>
        <pubDate>Sun, 30 Oct 2011 23:25:28 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-419073-15</guid>
        <source url="https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073.rss">RSCA/DQ Webclient Tutorial</source>
      </item>
      <item>
        <title>RSCA/DQ Webclient Tutorial</title>
        <dc:creator><![CDATA[@RSCShadow RSCShadow]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/rscshadow">@RSCShadow</a> wrote:</p>
          <blockquote>
              <p>Yeah but everyone uses Eclipse.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073/14">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073/14</link>
        <pubDate>Sun, 30 Oct 2011 22:01:04 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-419073-14</guid>
        <source url="https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073.rss">RSCA/DQ Webclient Tutorial</source>
      </item>
      <item>
        <title>RSCA/DQ Webclient Tutorial</title>
        <dc:creator><![CDATA[@cleako cleako]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/cleako">@cleako</a> wrote:</p>
          <blockquote>
              <p>I discovered you can have Netbeans compress the library jars into the main client jar if needed without much work.</p>
<p>Open your project folder and enter the folder “nbproject” and search for “build-impl.xml”</p>
<p>Open it and search for:</p>
<pre><code class="lang-auto">&lt;target name="-post-jar"&gt;</code></pre>
<p>Replace that  …  entry with something along the lines of:</p>
<pre><code class="lang-auto">&lt;target name="-post-jar"&gt;
        &lt;!-- BEGIN WOLFIE LIBRARY IMPORTS --&gt;
       &lt;jar update="true" destfile="${dist.jar}"&gt;
           &lt;zipfileset src="lib/defs.jar"/&gt;
		   &lt;zipfileset src="lib/hex-string.jar"/&gt;
		   &lt;zipfileset src="lib/jmf.jar"/&gt;
		   &lt;zipfileset src="lib/slf4j.jar"/&gt;
		   &lt;zipfileset src="lib/xmlpull.jar"/&gt;
		   &lt;zipfileset src="lib/xpp3.jar"/&gt;
		   &lt;zipfileset src="lib/xstream.jar"/&gt;
       &lt;/jar&gt;
        &lt;!-- END WOLFIE LIBRARY IMPORTS --&gt;
    &lt;/target&gt;</code></pre>
<p>Do a clean build and then go to your project folder’s “dist” folder and double click on your compiled jar. It should launch without the need of having “Copy Dependent Libraries” checked in the project properties under the Build &gt; Packaging entry. Without trimming unneeded files from the fat jar, it is 2.67mb.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073/13">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073/13</link>
        <pubDate>Sun, 30 Oct 2011 21:57:11 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-419073-13</guid>
        <source url="https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073.rss">RSCA/DQ Webclient Tutorial</source>
      </item>
      <item>
        <title>RSCA/DQ Webclient Tutorial</title>
        <dc:creator><![CDATA[@CodeForFame CodeForFame]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/codeforfame">@CodeForFame</a> wrote:</p>
          <blockquote>
              <p>[quote=“cleako, post:11, topic:419073”]After looking at the contents of the jar, interesting…</p>
<p>I see what you mean by creating a “fat” jar now.[/quote]Ant should automatically make it ‘fat’.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073/12">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073/12</link>
        <pubDate>Sat, 22 Oct 2011 20:46:14 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-419073-12</guid>
        <source url="https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073.rss">RSCA/DQ Webclient Tutorial</source>
      </item>
      <item>
        <title>RSCA/DQ Webclient Tutorial</title>
        <dc:creator><![CDATA[@cleako cleako]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/cleako">@cleako</a> wrote:</p>
          <blockquote>
              <p>After looking at the contents of the jar, interesting…</p>
<p>I see what you mean by creating a “fat” jar now.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073/11">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073/11</link>
        <pubDate>Sat, 22 Oct 2011 19:59:25 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-419073-11</guid>
        <source url="https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073.rss">RSCA/DQ Webclient Tutorial</source>
      </item>
      <item>
        <title>RSCA/DQ Webclient Tutorial</title>
        <dc:creator><![CDATA[@CodeForFame CodeForFame]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/codeforfame">@CodeForFame</a> wrote:</p>
          <blockquote>
              <p>[quote=“cleako, post:9, topic:419073”]There are missing classes in the client git project.</p>
<p>import org.moparscape.iface.ClientInterface;<br>
import org.moparscape.userver.Server;[/quote]Nope, you didn’t add the libraries to the path…</p>
<p>You need to add ‘MoparScape.jar’.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073/10</link>
        <pubDate>Sat, 22 Oct 2011 17:53:18 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-419073-10</guid>
        <source url="https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073.rss">RSCA/DQ Webclient Tutorial</source>
      </item>
      <item>
        <title>RSCA/DQ Webclient Tutorial</title>
        <dc:creator><![CDATA[@cleako cleako]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/cleako">@cleako</a> wrote:</p>
          <blockquote>
              <p>There are missing classes in the client git project.</p>
<p>import org.moparscape.iface.ClientInterface;<br>
import org.moparscape.userver.Server;</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073/9</link>
        <pubDate>Sat, 22 Oct 2011 17:34:05 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-419073-9</guid>
        <source url="https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073.rss">RSCA/DQ Webclient Tutorial</source>
      </item>
      <item>
        <title>RSCA/DQ Webclient Tutorial</title>
        <dc:creator><![CDATA[@CodeForFame CodeForFame]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/codeforfame">@CodeForFame</a> wrote:</p>
          <blockquote>
              <p>[quote=“cleako, post:7, topic:419073”]Do you use netbeans? What configuration do you use?[/quote]I use Eclipse, and it’s as simply as ticking a box.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073/8</link>
        <pubDate>Sat, 22 Oct 2011 16:26:33 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-419073-8</guid>
        <source url="https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073.rss">RSCA/DQ Webclient Tutorial</source>
      </item>
      <item>
        <title>RSCA/DQ Webclient Tutorial</title>
        <dc:creator><![CDATA[@cleako cleako]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/cleako">@cleako</a> wrote:</p>
          <blockquote>
              <p>Do you use netbeans? What configuration do you use?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073/7</link>
        <pubDate>Sat, 22 Oct 2011 15:50:11 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-419073-7</guid>
        <source url="https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073.rss">RSCA/DQ Webclient Tutorial</source>
      </item>
      <item>
        <title>RSCA/DQ Webclient Tutorial</title>
        <dc:creator><![CDATA[@CodeForFame CodeForFame]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/codeforfame">@CodeForFame</a> wrote:</p>
          <blockquote>
              <p>[quote=“cleako, post:5, topic:419073”]What about being forced to include the library jar files? Can MoparClassic’s client run without them?[/quote]It depends on how you export it…</p>
<p>I export it so the libraries are included in the JAR, because having a separate folder is annoying.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073/6</link>
        <pubDate>Sat, 22 Oct 2011 15:42:09 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-419073-6</guid>
        <source url="https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073.rss">RSCA/DQ Webclient Tutorial</source>
      </item>
      <item>
        <title>RSCA/DQ Webclient Tutorial</title>
        <dc:creator><![CDATA[@cleako cleako]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/cleako">@cleako</a> wrote:</p>
          <blockquote>
              <p>What about being forced to include the library jar files? Can MoparClassic’s client run without them?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073/5</link>
        <pubDate>Sat, 22 Oct 2011 15:14:01 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-419073-5</guid>
        <source url="https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073.rss">RSCA/DQ Webclient Tutorial</source>
      </item>
      <item>
        <title>RSCA/DQ Webclient Tutorial</title>
        <dc:creator><![CDATA[@CodeForFame CodeForFame]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/codeforfame">@CodeForFame</a> wrote:</p>
          <blockquote>
              <p>[quote=“cleako, post:3, topic:419073”]Damn it. With MoparClassic’s cache loader, do you just change the client version to inform the player clients to download a fresh copy of the cache? Does it operate without the lib files for the webclient? I wish I had found this earlier.</p>
<p>Looks like its time to drop DarkQuest and move to what is far superior.[/quote]Currently it just checks if the files exist or not.</p>
<p>MoparClassic’s cache shouldn’t be changing, so it shouldn’t be an issue.  But, it would be nice for it to be able to be updated.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073/4</link>
        <pubDate>Sat, 22 Oct 2011 15:03:50 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-419073-4</guid>
        <source url="https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073.rss">RSCA/DQ Webclient Tutorial</source>
      </item>
      <item>
        <title>RSCA/DQ Webclient Tutorial</title>
        <dc:creator><![CDATA[@cleako cleako]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/cleako">@cleako</a> wrote:</p>
          <blockquote>
              <p>Damn it. With MoparClassic’s cache loader, do you just change the client version to inform the player clients to download a fresh copy of the cache? Does it operate without the lib files for the webclient? I wish I had found this earlier.</p>
<p>Looks like its time to drop DarkQuest and move to what is far superior.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073/3</link>
        <pubDate>Sat, 22 Oct 2011 12:55:03 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-419073-3</guid>
        <source url="https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073.rss">RSCA/DQ Webclient Tutorial</source>
      </item>
      <item>
        <title>RSCA/DQ Webclient Tutorial</title>
        <dc:creator><![CDATA[@CodeForFame CodeForFame]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/codeforfame">@CodeForFame</a> wrote:</p>
          <blockquote>
              <p>You could have just looked off of the MoparClassic client…</p>
<p><aside class="onebox githubcommit">
  <header class="source">
      <a href="https://github.com/CodeForFame/Client/commit/61fcd083f40949a82e0b798e5f224a4d61a67a3e" target="_blank" rel="nofollow noopener">github.com/CodeForFame/Client</a>
  </header>
  <article class="onebox-body">
      <a href="https://github.com/CodeForFame" target="_blank" rel="nofollow noopener">
    <img alt="CodeForFame" src="https://avatars2.githubusercontent.com/u/785526?v=4" class="thumbnail onebox-avatar" width="90" height="90">
  </a>

<h4>
  <a href="https://github.com/CodeForFame/Client/commit/61fcd083f40949a82e0b798e5f224a4d61a67a3e" target="_blank" rel="nofollow noopener">Merge pull request #2 from Joe0/master</a>
</h4>

  <pre class="message" style="white-space: pre-wrap;">Updates</pre>

<div class="date">
  by <a href="https://github.com/CodeForFame" target="_blank" rel="nofollow noopener">CodeForFame</a>
  on <a href="https://github.com/CodeForFame/Client/commit/61fcd083f40949a82e0b798e5f224a4d61a67a3e" target="_blank" rel="nofollow noopener">03:16PM - 18 Oct 11</a>
</div>

<div class="github-commit-stats">
  changed <strong>6 files</strong>
  with <strong>1885 additions</strong>
  and <strong>1590 deletions</strong>.
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
<br>
Line 9876 or so is the only change to the mudclient.</p>
<p>The rest of the changes are in the other files.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073/2</link>
        <pubDate>Sat, 22 Oct 2011 05:55:23 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-419073-2</guid>
        <source url="https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073.rss">RSCA/DQ Webclient Tutorial</source>
      </item>
      <item>
        <title>RSCA/DQ Webclient Tutorial</title>
        <dc:creator><![CDATA[@cleako cleako]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/cleako">@cleako</a> wrote:</p>
          <blockquote>
              <p>I have been working on this nonstop for almost 7 hours now. I think it will work with RSCA but you might have to do some debugging if you get an error. I know that this works correctly with the DarkQuest client fresh from a SVN checkout.</p>
<p>1.) You will need to add MIME types to your webserver to support .jag, .mem. and .rscd files. I just set them all as “application/x-zip-compressed”</p>
<p>2.) You will need to create a folder in the root of your webserver’s WWW directory, name it “cache”, and copy all of the files in the DarkQuest data folder in to it.</p>
<p>3.) I suggest importing the project into Netbeans/Eclipse, it will help the debugging process go by much easier.</p>
<p>4.) Both the RSCA and DarkQuest clients currently rely on the lib folder’s .jar library files to run the mudclient. It looks like the traditional webclients managed to run without the library files. Find a way to not need the lib files and you will be set.</p>
<p>5.) There are no file versions associated with the client cache files so I personally won’t be using this because I prefer the MD5 hash checker method for the time being. This is enough to get you started and from there go figure it out.</p>
<p>6.) Open up mudclient.java and add these imports:</p>
<pre><code class="lang-auto">import java.io.FileOutputStream;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.URL;
import java.util.Iterator;</code></pre>
<p>Replace the method:</p>
<pre><code class="lang-auto"></code></pre>
<p>With:</p>
<pre><code class="lang-auto">        protected final byte[] load(String filename) {
		mudclient.loadCachedFile(filename);
		return super.load(Config.CONF_DIR + File.separator + filename);
	}</code></pre>
<p>Search for:</p>
<pre><code class="lang-auto">public static File loadCachedFile(String filename)</code></pre>
<p>and delete the entire method.</p>
<p>Find:</p>
<pre><code class="lang-auto">final void method45</code></pre>
<p>and above it, add:</p>
<pre><code class="lang-auto">        public static String[] dB = {"http://YOUR_WEBSITE.COM/cache/"}; //RENAME /cache/ TO YOUR CACHE FOLDER IN WWW
        public static File loadCachedFile(String s1) {
            File file = new File((new StringBuilder()).append(Config.CONF_DIR).append("/").append(s1).toString());
            if(!file.isFile()) {
                System.out.println((new StringBuilder()).append("Data file not found locally: ").append(s1).toString());
                boolean flag = false;
                ArrayList arraylist = new ArrayList();
                String as1[] = dB;
                int i1 = as1.length;
                for(int j1 = 0; j1 &lt; i1;) {
                    String s2 = as1[j1];
                    String s3 = (new StringBuilder()).append(s2).append(s1).toString();
                    System.out.print((new StringBuilder()).append("\tTrying ").append(s2).append(" =&gt; ").toString());
                    try {
                        HttpURLConnection httpurlconnection = (HttpURLConnection)(new URL(s3)).openConnection();
                        if(httpurlconnection.getResponseCode() != 200) {
                            System.out.println("Unable to obtain file.");
                            continue;
                        }
                        System.out.print("Downloading.. ");
                        InputStream inputstream = httpurlconnection.getInputStream();
                        file.createNewFile();
                        FileOutputStream fileoutputstream = new FileOutputStream(file);
                        byte abyte0[] = new byte[1024];
                        for(int k1 = 0; (k1 = inputstream.read(abyte0)) != -1;)
                        fileoutputstream.write(abyte0, 0, k1);
                        inputstream.close();
                        fileoutputstream.close();
                        System.out.println("Done.");
                        break;
                    }
                    catch(Exception exception1) {
                        System.out.println("Unable to obtain file.");
                        arraylist.add(exception1);
                        j1++;
                    }
                }
                if(arraylist.size() == dB.length) {
                    System.out.println((new StringBuilder()).append("Downloading data file ").append(s1).append(" failed.\nPlease report the error, and include the following exception data:").toString());
                    Exception exception;
                    for(Iterator iterator = arraylist.iterator(); iterator.hasNext(); exception.printStackTrace())
                    exception = (Exception)iterator.next();
                    System.exit(1);
                }
            }
            s1 = file.getAbsolutePath();
            return file;
        }
        //End cache loader</code></pre>
<p>Search for:</p>
<pre><code class="lang-auto">audioReader = new AudioReader();</code></pre>
<p>Remove the rest of the method after that and replace the rest of the method with:</p>
<pre><code class="lang-auto">return;
		} catch (Throwable throwable) {
			System.out.println("Unable to init sounds:" + throwable);
		}
	}</code></pre>
<p>Save mudclient.java and open conf/Config.java</p>
<p>Find:</p>
<pre><code class="lang-auto">public static String SERVER_IP</code></pre>
<p>Replace the entire line with:</p>
<pre><code class="lang-auto">public static String SERVER_IP = "YOUR_GAME_SERVER_IP", HOME_DIR = "YOUR_HOME_CACHE_FOLDER_NAME", CONF_DIR = System.getProperty("user.home") + File.separator + HOME_DIR, MEDIA_DIR = CONF_DIR;</code></pre>
<p>Find:</p>
<pre><code class="lang-auto">public static Properties loadConfig()</code></pre>
<p>Replace the entire method with:</p>
<pre><code class="lang-auto">                //Creates cache folder if missing
                File home = new File((new StringBuilder()).append(CONF_DIR).toString());
                if(!home.exists())
			try {
                                home.mkdir();
                                System.out.println("Created cache folder");
                        } catch (Exception e) {
				System.out.println("Unable to create cache folder!");
			}
                //Creates client config file if missing
                File f = new File(CONF_DIR + File.separator + "config.properties");
		if(!f.exists())
			try {
				f.createNewFile();
			} catch (IOException e1) {
				System.out.println("Unable to create configuration file!");
			}
		Properties defaultProps = new Properties();
		try {
			defaultProps.load(new FileInputStream(CONF_DIR + File.separator + "config.properties"));
		} catch (Exception e) {
			e.printStackTrace();
		}
		return defaultProps;
	}</code></pre>
<p>I’m too burned out to answer questions about this right now. Maybe later.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073/1</link>
        <pubDate>Sat, 22 Oct 2011 04:01:27 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-419073-1</guid>
        <source url="https://forum.moparisthebest.com/t/rsca-dq-webclient-tutorial/419073.rss">RSCA/DQ Webclient Tutorial</source>
      </item>
  </channel>
</rss>
