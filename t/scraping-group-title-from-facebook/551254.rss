<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Scraping group title from Facebook</title>
    <link>https://forum.moparisthebest.com/t/scraping-group-title-from-facebook/551254</link>
    <description>I&#39;m trying to get some information from this page here:
https://www.facebook.com/groups/574916095895510/?fref=ts

When you click &quot;See all&quot;, the members list is displayed. I&#39;m trying to get the following text: &quot;Members of UCLA class of 2018 Official Group&quot;.

However, I get the following error when I try to print the text from the XPath:

[code]Traceback (most recent call last):
    File &quot;scraper.py&quot;, line 35, in &lt;module&gt;
        print title.text()
AttributeError: &#39;NoneType&#39; object has no attribute &#39;text&#39;[/code]

When I dump the session as an image, the title is visible, so I know that the text is available for scraping.

Here is my full code:

[code=Python]
    import time
    import dryscrape
    import json
    import ast
    
    username = &#39;USERNAME&#39;
    password = &#39;PASSWORD&#39;
    
    # set up a web scraping session
    sess = dryscrape.Session(base_url = &#39;https://www.facebook.com/&#39;)
    
    # visit homepage and log in
    print &quot;Logging in...&quot;
    sess.visit(&#39;/login.php?next=https%3A%2F%2Fwww.facebook.com%2Fgroups%2F574916095895510%2F%3Ffref%3Dts&#39;)
    
    # Set username and password
    username_field = sess.at_css(&#39;#email&#39;)
    password_field = sess.at_css(&#39;#pass&#39;)
    username_field.set(username)
    password_field.set(password)
    
    # Submit the form
    username_field.form().submit()
    
    # Wait
    time.sleep(3)
    
    print &quot;Viewing all members...&quot;
    see_all_button = sess.at_xpath(&#39;//*[@id=&quot;pagelet_group_profile_members&quot;]/div/div/div/div[1]/div/a&#39;)
    see_all_button.click()
    
    time.sleep(3)
    
    title = sess.at_xpath(&#39;//*[@id=&quot;u_z_0&quot;]/div/div[1]/h3&#39;)
    print title.text()
    
    sess.render(&#39;fb.png&#39;)[/code]

Here is the image, as you can see the title is visible:
[url=http://i.imgur.com/fgp4let.png][img width=800]http://i.imgur.com/fgp4let.png[/img][/url]</description>
    
    <lastBuildDate>Tue, 28 Apr 2015 06:27:06 +0000</lastBuildDate>
    <category>General Programming</category>
    <atom:link href="https://forum.moparisthebest.com/t/scraping-group-title-from-facebook/551254.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Scraping group title from Facebook</title>
        <dc:creator><![CDATA[@HcoJustin HcoJustin]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/hcojustin">@HcoJustin</a> wrote:</p>
          <blockquote>
              <p>[quote=“Ambokile, post:6, topic:551254”]I’ve created an access token but when I visit this link:<br>
<a href="https://graph.facebook.com/574916095895510/members?access_token=xxx" class="onebox" target="_blank" rel="nofollow noopener">https://graph.facebook.com/574916095895510/members?access_token=xxx</a></p>
<p>I get the following response:</p>
<p>[code]{<br>
“data”: [</p>
<p>]<br>
}[/code][/quote]</p>
<p>If the group is private, you won’t be able to get access to the member list until you become a member yourself. If you can’t/don’t want to join the group, you’ll probably have to resort to scraping. As justaguy pointed out, the page structure is very dynamic. It is going to be difficult to come up with a query that will find what you are looking for.</p>
<p>As stated by the docs: <a href="https://developers.facebook.com/docs/graph-api/reference/v2.3/group/members" rel="nofollow noopener">https://developers.facebook.com/docs/graph-api/reference/v2.3/group/members</a></p>
<blockquote>A user access token, [b]for a member of the group[/b], with user_groups permission is required.</blockquote>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/scraping-group-title-from-facebook/551254/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/scraping-group-title-from-facebook/551254/7</link>
        <pubDate>Tue, 28 Apr 2015 06:27:06 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-551254-7</guid>
        <source url="https://forum.moparisthebest.com/t/scraping-group-title-from-facebook/551254.rss">Scraping group title from Facebook</source>
      </item>
      <item>
        <title>Scraping group title from Facebook</title>
        <dc:creator><![CDATA[@Ambokile Ambokile]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ambokile">@Ambokile</a> wrote:</p>
          <blockquote>
              <p>I’ve created an access token but when I visit this link:<br>
<a href="https://graph.facebook.com/574916095895510/members?access_token=xxx" class="onebox" target="_blank" rel="nofollow noopener">https://graph.facebook.com/574916095895510/members?access_token=xxx</a></p>
<p>I get the following response:</p>
<p>[code]{<br>
“data”: [</p>
<p>]<br>
}[/code]</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/scraping-group-title-from-facebook/551254/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/scraping-group-title-from-facebook/551254/6</link>
        <pubDate>Mon, 27 Apr 2015 17:49:48 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-551254-6</guid>
        <source url="https://forum.moparisthebest.com/t/scraping-group-title-from-facebook/551254.rss">Scraping group title from Facebook</source>
      </item>
      <item>
        <title>Scraping group title from Facebook</title>
        <dc:creator><![CDATA[@justaguy justaguy]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/justaguy">@justaguy</a> wrote:</p>
          <blockquote>
              <p>[quote=“Ambokile, post:4, topic:551254”][quote author=HcoJustin link=topic=670170.msg4481377#msg4481377 date=1430153883]<br>
The id of the element you are trying to select changes every time you view the page. You’ll either have to pull your data from the title in the head, or use the Graph API. <a href="https://developers.facebook.com/docs/graph-api/reference/v2.3/group" rel="nofollow noopener">https://developers.facebook.com/docs/graph-api/reference/v2.3/group</a></p>
<p>If you use the API you’ll get a response similar to</p>
<p><code>{
  "description": "Welcome UCLA Class of 2018! This group here to serve as a resource for prospective and accepted students to network and have fun!\n\nEnjoy the group and feel free to invite other friends attending UCLA! \n\nPlease be aware of the following:\nThis group is not affiliated with UCLA, nor is it in any way sponsored or endorsed or created on authority of a university department or administrative unit. This group is merely a meeting space for future students. The group title states \"Official\" This is not meant to imply an affiliation of this group to the university.  ", 
  "email": "574916095895510@groups.facebook.com", 
  "icon": "https://fbstatic-a.akamaihd.net/rsrc.php/v2/y0/r/XCrOg4YmGg4.png", 
  "name": "UCLA class of 2018 Official Group", 
  "owner": {
    "id": "693624504070171", 
    "name": "Dave Lichtenberger"
  }, 
  "privacy": "CLOSED", 
  "updated_time": "2015-04-27T06:47:36+0000", 
  "id": "5749160958955"
}</code><br>
[/quote]</p>
<p>My goal with the project is to get a list of all members of the group. Is that possible with the Graph API?[/quote]</p>
<p><a href="http://stackoverflow.com/questions/4087227/list-the-members-of-a-facebook-group-via-api" class="onebox" target="_blank" rel="nofollow noopener">http://stackoverflow.com/questions/4087227/list-the-members-of-a-facebook-group-via-api</a></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/scraping-group-title-from-facebook/551254/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/scraping-group-title-from-facebook/551254/5</link>
        <pubDate>Mon, 27 Apr 2015 17:14:16 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-551254-5</guid>
        <source url="https://forum.moparisthebest.com/t/scraping-group-title-from-facebook/551254.rss">Scraping group title from Facebook</source>
      </item>
      <item>
        <title>Scraping group title from Facebook</title>
        <dc:creator><![CDATA[@Ambokile Ambokile]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ambokile">@Ambokile</a> wrote:</p>
          <blockquote>
              <p>[quote=“HcoJustin, post:2, topic:551254”]The id of the element you are trying to select changes every time you view the page. You’ll either have to pull your data from the title in the head, or use the Graph API. <a href="https://developers.facebook.com/docs/graph-api/reference/v2.3/group" rel="nofollow noopener">https://developers.facebook.com/docs/graph-api/reference/v2.3/group</a></p>
<p>If you use the API you’ll get a response similar to</p>
<p><code>{
  "description": "Welcome UCLA Class of 2018! This group here to serve as a resource for prospective and accepted students to network and have fun!\n\nEnjoy the group and feel free to invite other friends attending UCLA! \n\nPlease be aware of the following:\nThis group is not affiliated with UCLA, nor is it in any way sponsored or endorsed or created on authority of a university department or administrative unit. This group is merely a meeting space for future students. The group title states \"Official\" This is not meant to imply an affiliation of this group to the university.  ", 
  "email": "574916095895510@groups.facebook.com", 
  "icon": "https://fbstatic-a.akamaihd.net/rsrc.php/v2/y0/r/XCrOg4YmGg4.png", 
  "name": "UCLA class of 2018 Official Group", 
  "owner": {
    "id": "693624504070171", 
    "name": "Dave Lichtenberger"
  }, 
  "privacy": "CLOSED", 
  "updated_time": "2015-04-27T06:47:36+0000", 
  "id": "5749160958955"
}</code>[/quote]</p>
<p>My goal with the project is to get a list of all members of the group. Is that possible with the Graph API?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/scraping-group-title-from-facebook/551254/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/scraping-group-title-from-facebook/551254/4</link>
        <pubDate>Mon, 27 Apr 2015 17:12:50 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-551254-4</guid>
        <source url="https://forum.moparisthebest.com/t/scraping-group-title-from-facebook/551254.rss">Scraping group title from Facebook</source>
      </item>
      <item>
        <title>Scraping group title from Facebook</title>
        <dc:creator><![CDATA[@justaguy justaguy]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/justaguy">@justaguy</a> wrote:</p>
          <blockquote>
              <p>Your XPath query is giving me something different than what is displayed by firebug. It appears the id you supplied changes because I get u_g_0 rather than u_z_0 (the 0 at the end might change too since according to firebug there are several divs with things like u_r_2c, etc.). Since Facebook has a very dynamic structure, you’re going to have to be as specific as possible. Try:</p>
<pre><code class="lang-auto"></code></pre>
<p>As an aside: the Facebook API as HcoJustin pointed out is a better idea.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/scraping-group-title-from-facebook/551254/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/scraping-group-title-from-facebook/551254/3</link>
        <pubDate>Mon, 27 Apr 2015 17:11:48 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-551254-3</guid>
        <source url="https://forum.moparisthebest.com/t/scraping-group-title-from-facebook/551254.rss">Scraping group title from Facebook</source>
      </item>
      <item>
        <title>Scraping group title from Facebook</title>
        <dc:creator><![CDATA[@HcoJustin HcoJustin]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/hcojustin">@HcoJustin</a> wrote:</p>
          <blockquote>
              <p>The id of the element you are trying to select changes every time you view the page. You’ll either have to pull your data from the title in the head, or use the Graph API. <a href="https://developers.facebook.com/docs/graph-api/reference/v2.3/group" rel="nofollow noopener">https://developers.facebook.com/docs/graph-api/reference/v2.3/group</a></p>
<p>If you use the API you’ll get a response similar to</p>
<p><code>{
  "description": "Welcome UCLA Class of 2018! This group here to serve as a resource for prospective and accepted students to network and have fun!\n\nEnjoy the group and feel free to invite other friends attending UCLA! \n\nPlease be aware of the following:\nThis group is not affiliated with UCLA, nor is it in any way sponsored or endorsed or created on authority of a university department or administrative unit. This group is merely a meeting space for future students. The group title states \"Official\" This is not meant to imply an affiliation of this group to the university.  ", 
  "email": "574916095895510@groups.facebook.com", 
  "icon": "https://fbstatic-a.akamaihd.net/rsrc.php/v2/y0/r/XCrOg4YmGg4.png", 
  "name": "UCLA class of 2018 Official Group", 
  "owner": {
    "id": "693624504070171", 
    "name": "Dave Lichtenberger"
  }, 
  "privacy": "CLOSED", 
  "updated_time": "2015-04-27T06:47:36+0000", 
  "id": "5749160958955"
}</code></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/scraping-group-title-from-facebook/551254/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/scraping-group-title-from-facebook/551254/2</link>
        <pubDate>Mon, 27 Apr 2015 16:58:03 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-551254-2</guid>
        <source url="https://forum.moparisthebest.com/t/scraping-group-title-from-facebook/551254.rss">Scraping group title from Facebook</source>
      </item>
      <item>
        <title>Scraping group title from Facebook</title>
        <dc:creator><![CDATA[@Ambokile Ambokile]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ambokile">@Ambokile</a> wrote:</p>
          <blockquote>
              <p>I’m trying to get some information from this page here:<br>
<a href="https://www.facebook.com/groups/574916095895510/?fref=ts" class="onebox" target="_blank" rel="nofollow noopener">https://www.facebook.com/groups/574916095895510/?fref=ts</a></p>
<p>When you click “See all”, the members list is displayed. I’m trying to get the following text: “Members of UCLA class of 2018 Official Group”.</p>
<p>However, I get the following error when I try to print the text from the XPath:</p>
<p><code>Traceback (most recent call last):
    File "scraper.py", line 35, in &lt;module&gt;
        print title.text()
AttributeError: 'NoneType' object has no attribute 'text'</code></p>
<p>When I dump the session as an image, the title is visible, so I know that the text is available for scraping.</p>
<p>Here is my full code:</p>
<p>[code=Python]<br>
import time<br>
import dryscrape<br>
import json<br>
import ast</p>
<pre><code>username = 'USERNAME'
password = 'PASSWORD'

# set up a web scraping session
sess = dryscrape.Session(base_url = 'https://www.facebook.com/')

# visit homepage and log in
print "Logging in..."
sess.visit('/login.php?next=https%3A%2F%2Fwww.facebook.com%2Fgroups%2F574916095895510%2F%3Ffref%3Dts')

# Set username and password
username_field = sess.at_css('#email')
password_field = sess.at_css('#pass')
username_field.set(username)
password_field.set(password)

# Submit the form
username_field.form().submit()

# Wait
time.sleep(3)

print "Viewing all members..."
see_all_button = sess.at_xpath('//*[@id="pagelet_group_profile_members"]/div/div/div/div[1]/div/a')
see_all_button.click()

time.sleep(3)

title = sess.at_xpath('//*[@id="u_z_0"]/div/div[1]/h3')
print title.text()

sess.render('fb.png')[/code]
</code></pre>
<p>Here is the image, as you can see the title is visible:<br>
<a href="http://i.imgur.com/fgp4let.png" data-bbcode="true" rel="nofollow noopener"><img src="http://i.imgur.com/fgp4let.png" alt width="" height=""></a></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/scraping-group-title-from-facebook/551254/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/scraping-group-title-from-facebook/551254/1</link>
        <pubDate>Mon, 27 Apr 2015 15:47:32 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-551254-1</guid>
        <source url="https://forum.moparisthebest.com/t/scraping-group-title-from-facebook/551254.rss">Scraping group title from Facebook</source>
      </item>
  </channel>
</rss>
