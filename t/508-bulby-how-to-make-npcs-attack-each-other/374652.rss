<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>[508] [bulby] How to make NPC&#39;s attack each other</title>
    <link>https://forum.moparisthebest.com/t/508-bulby-how-to-make-npcs-attack-each-other/374652</link>
    <description>Hello.. I need to know if anyone could help me make Npc&#39;s Attack each other.</description>
    
    <lastBuildDate>Thu, 23 Dec 2010 18:41:06 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/508-bulby-how-to-make-npcs-attack-each-other/374652.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>[508] [bulby] How to make NPC&#39;s attack each other</title>
        <dc:creator><![CDATA[@tinyscape TinyScape]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/tinyscape">@tinyscape</a> wrote:</p>
          <blockquote>
              <p>[quote=“a?, post:1, topic:374652”]Hello… I need to know if anyone could help me make Npc’s Attack each other.[/quote]Uh… Make a new java file called VersusNpc.java in bubly.nps.combat then save there. Now put this code in that VersusNpc.java file.</p>
<p>[code]package palidino76.rs2.npcs.combat;</p>
<p>import palidino76.rs2.<em>;<br>
import palidino76.rs2.util.</em>;<br>
import palidino76.rs2.npcs.*;</p>
<p>public class VersusNpc {</p>
<pre><code>NPC n;

/**
 * Class constructor
 * @param n the npc which the constructor should be created for.
 */
public VersusNpc(NPC n) {
	this.n = n;
}

/**
 * NPC vs NPC combat system melee.
 */
public void appendMelee() {
	NPC n1 = Server.engine.npcs[n.npcEnemy];
	if (n == null || n1 == null) {
		resetAttack();
		return;
	}
	if (n.faceToRequest != n.npcEnemy) {
		n.requestFaceTo(n.npcEnemy);
	}
	for (int i = 0; i &lt; n.npcMagics.length; i++) {
		if (n.npcType == n.npcMagics[i]) {
			if (Misc.getDistance(n.absX, n.absY, n1.absX, n1.absY) &lt;= 7) {
				appendMagic();
				return;
			}
		}
	}
	if (Misc.getDistance(n.absX, n.absY, n1.absX, n1.absY) &gt; 1) {
		return;
	}
	if (n.attackDelay == 0) {
		n.requestAnim(getCombatAnim(), 0);
		n1.appendHit(1, 0);
		setAttackDelay(getCombatDelay());
	}
}

/**
 * NPC vs NPC combat system magic.
 */
public void appendMagic() {
	NPC n1 = Server.engine.npcs[n.npcEnemy];
	if (n == null || n1 == null) {
		resetAttack();
		return;
	}
	if (n.faceToRequest != n.npcEnemy) {
		n.requestFaceTo(n.npcEnemy);
	}
	if (Misc.getDistance(n.absX, n.absY, n1.absX, n1.absY) &gt; 10) {
		return;
	}
	if (n.attackDelay == 0) {
		n.requestAnim(getCombatAnim(), 0);
		setDamageDelay(2);
		setAttackDelay(getCombatDelay());
	}
}

/**
 * If NPC uses magic and hit delay reaches 0 this method gets activated.
 */
public void addDamageToNpcEvent() {
	NPC n1 = Server.engine.npcs[n.npcEnemy];
	if (n == null || n1 == null) {
		resetAttack();
		return;
	}
	if (Misc.getDistance(n.absX, n.absY, n1.absX, n1.absY) &gt; 7) {
		return;
	}
	if (n.damageDelay == 0) {
		n1.requestGFX(getCombatGraphic(), 0);
		n.requestAnim(getCombatAnim(), 0);
		n1.appendHit(getHit(), 0);
		setDamageDelay(-1);
	}
}

int getHit() {
	switch (n.npcType) {

		case 2253: return 40;
		case 6257: return Misc.random(17);

		default:
			return 1;
	}
}

/**
 * Resets attack of npc vs npc.
 */
public void resetAttack() {
	n.npcEnemy = 0;
	n.attackingNpc = false;
}

/**
 * Holds values to get starting graphic of npc.
 */
int getCombatGraphic() {
	switch (n.npcType) {

		case 6257:
			return 76;

		case 2253:
			return 76;

		default:
			return -1;
	}
}

/**
 * Holds values to get combat delay of npc.
 */
int getCombatDelay() {
	switch (n.npcType) {

		case 3846:
			return 8;

		case 6257:
			return 7;

		case 2253:
			return 6;

		default:
			return 7;
	}
}

/**
 * Holds values and sets combat animation for the npc.
 */
int getCombatAnim() {
	switch (n.npcType) {

		case 6257:
			return 811;

		case 3846:
			return 3980;

		case 2253:
			return 811;

		case 158:
			return 1833;

		default:
			return 422;
	}
}

/**
 * Sets the damage delay to a value
 * @param damageDelay the delay which is going to be setted.
 */
void setDamageDelay(int damageDelay) {
	n.damageDelay = damageDelay;
}

/**
 * sets the attack delay to a value.
 * @param attackDelay the delay which is gonna be setted through a method.
 */
void setAttackDelay(int attackDelay) {
	n.attackDelay = attackDelay;
}
</code></pre>
<p>}[/code]<br>
Then add this in NPC.java:</p>
<p><code>		if (npcType == XXXX) {
			if (Server.engine.npcs[i].npcType == XXXX) {
				if (npcEnemy &gt; 0 || Server.engine.npcs[i].currentHP &lt;= 0 || currentHP &lt;= 0 || this == null || Server.engine.npcs[i] == null) {
					versNpc.resetAttack();
					return;
				}
				randomWalk = false;
				npcEnemy = i;
				attackingNpc = true;
				Server.engine.npcs[i].randomWalk = false;
			}
		}</code><br>
The X’s are the Npc’S ID <code>if (npcType == XXXX) {
			if (Server.engine.npcs[i].npcType == XXXX) {</code> Top is the Npc you want to attack the botton one. Sorry if it’s unclear…</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/508-bulby-how-to-make-npcs-attack-each-other/374652/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/508-bulby-how-to-make-npcs-attack-each-other/374652/2</link>
        <pubDate>Thu, 23 Dec 2010 18:41:06 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-374652-2</guid>
        <source url="https://forum.moparisthebest.com/t/508-bulby-how-to-make-npcs-attack-each-other/374652.rss">[508] [bulby] How to make NPC&#39;s attack each other</source>
      </item>
      <item>
        <title>[508] [bulby] How to make NPC&#39;s attack each other</title>
        <dc:creator><![CDATA[@a114 a?]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/a114">@a114</a> wrote:</p>
          <blockquote>
              <p>Hello… I need to know if anyone could help me make Npc’s Attack each other.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/508-bulby-how-to-make-npcs-attack-each-other/374652/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/508-bulby-how-to-make-npcs-attack-each-other/374652/1</link>
        <pubDate>Thu, 23 Dec 2010 12:09:35 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-374652-1</guid>
        <source url="https://forum.moparisthebest.com/t/508-bulby-how-to-make-npcs-attack-each-other/374652.rss">[508] [bulby] How to make NPC&#39;s attack each other</source>
      </item>
  </channel>
</rss>
