<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Reference Tables of the New Engine</title>
    <link>https://forum.moparisthebest.com/t/reference-tables-of-the-new-engine/290551</link>
    <description>[size=99pt]I AM SUPER_[/size]

[center][size=6pt]The Reference Table Structure[/size][/center]

[center][size=5pt]Table of Contents:[/center]

[ul][li]Old engine history[/li]
[li]New engine history[/li]
[li]Reference tables[/li]
[li]Examples[/li][/ul]

[center]


[size=5pt]Old engine history[/size][/center]

    The old engine of RuneScape operated on &#39;named&#39; files by using what I call their Archive format, which is a large block composed of file entries, each with a compressed size, decompressed size, start offset, a file identifier hash (converts a variable-sized text file name to a packed 32-bit integer),
and the file&#39;s data scribed into the archive. The archives made use of BZIP2 compression on their data in order to reduce their sizes vastly. Many people who had not decoded the format had named it &#39;JAG Compression&#39;, after defyboy&#39;s original research in 2006-07 (?). Since then, JaGeX has abandoned their old Archive format (also called JAG, after their original RSC-era file extensions) and now have retreated back to using their raw uncompressed file system. 

[center][size=5pt]New engine history[/size][/center]

    Because simply using the raw file system isn&#39;t smart because file&#39;s won&#39;t be compressed, the good workers of JaGeX employed the concept of [b]containers[/b]. Containers are simply seen as raw files to the file system I/O class, but are in a specific format that yet again allows compression. Each container consists of a header that contains it&#39;s compression type and decompressed size. Depending on the compression type, the file is either compressed
using GZIP (type 2+), BZIP2 (type 1), or not compressed at all (type 0). Every client revision comes with it&#39;s own container unpacking method. Now that compression is taken care of, what about &#39;naming&#39; files? This is where the reference tables come into play.

[center][size=5pt]Reference tables[/size][/center]

    The use of reference tables started at the same exact time the file system identified by 255 was dropped into your &#39;cache&#39; directory. A [b]reference table[/b] is a file within file system 255 in a specific format. Every reference table contains important information on each file in it&#39;s described file system. The data for each of these files in the reference table is called an entry. The format for a reference table is described below.
 
   Reference tables start off with a version number (if 6, an unidentified integer is read which is believed to possible by a file system name identifier hash).  Following is a flag telling if the table contains file identifier hashes. An important fact to note is that file identifiers are hashed differently than in the Archive format. After the flag comes in, the number of entries is read, and that many &#39;spacing&#39; values are read. After spacing values, if file name hashes are supported, it reads a file identifier for each entry. Right after comes a set of CRC32 checksums of each entry (used internally by client to version-check it&#39;s file system data). The next set of data, dubbed &#39;field4&#39; by it&#39;s position relative to the other reference table &#39;fields&#39;, is currently unknown. Speculations state it could possibly be the entry file&#39;s version of some sort. Later comes field 5, or children count. Every entry could potentially house several children, or &#39;sub-files&#39;. After children count, the children offsets inside their parent&#39;s file data are read, later surpassed by a check to if the table contains file identifier hashes. If it does, it then reads each child&#39;s identifier hashes.
This concludes the format.

[center][size=5pt]Examples[/size][/center]

    For example, file system 5 holds map and landscape related files. Map files are identified by mX_Y and landscape by lX_Y, where X and Y are the map and landscape&#39;s owner map region coordinates. Defyboy has started an attempt to bruteforce many of the file identifiers into their natural names. They can be found under &#39;names.txt&#39; within the CacheEdit project&#39;s SVN folder. The update server of the official runescape server&#39;s serves requests with the raw file data in the file system. An example can be seen within the &#39;update keys&#39;. &#39;Update keys&#39; are actually the file data of the reference table of file system 255 itself, which are contained within the special container format.</description>
    
    <lastBuildDate>Wed, 05 Aug 2009 17:14:51 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/reference-tables-of-the-new-engine/290551.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Reference Tables of the New Engine</title>
        <dc:creator><![CDATA[@lesterknome lesterknome]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/lesterknome">@lesterknome</a> wrote:</p>
          <blockquote>
              <aside class="quote no-group quote-modified" data-post="8" data-topic="290551">
<div class="title">
<div class="quote-controls"></div>
 Cowie`:</div>
<blockquote>
<p>something tells me you’re a retard <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
</blockquote>
</aside>
<p>Cowie where did you come from?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/reference-tables-of-the-new-engine/290551/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/reference-tables-of-the-new-engine/290551/9</link>
        <pubDate>Wed, 05 Aug 2009 17:14:51 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-290551-9</guid>
        <source url="https://forum.moparisthebest.com/t/reference-tables-of-the-new-engine/290551.rss">Reference Tables of the New Engine</source>
      </item>
      <item>
        <title>Reference Tables of the New Engine</title>
        <dc:creator><![CDATA[@eVokki1 Cowie`]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/evokki1">@eVokki1</a> wrote:</p>
          <blockquote>
              <aside class="quote no-group" data-post="6" data-topic="290551">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/aintaro/40/5_513041d5f7104045db30895d3b90af16.png" class="avatar"> Aintaro:</div>
<blockquote>
<p>somthing tells me that you just copied this <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
</blockquote>
</aside>
<p>something tells me you’re a retard <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/reference-tables-of-the-new-engine/290551/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/reference-tables-of-the-new-engine/290551/8</link>
        <pubDate>Wed, 05 Aug 2009 15:56:30 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-290551-8</guid>
        <source url="https://forum.moparisthebest.com/t/reference-tables-of-the-new-engine/290551.rss">Reference Tables of the New Engine</source>
      </item>
      <item>
        <title>Reference Tables of the New Engine</title>
        <dc:creator><![CDATA[@Jython super_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/jython">@Jython</a> wrote:</p>
          <blockquote>
              <aside class="quote no-group" data-post="6" data-topic="290551">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/aintaro/40/5_513041d5f7104045db30895d3b90af16.png" class="avatar"> Aintaro:</div>
<blockquote>
<p>somthing tells me that you just copied this <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
</blockquote>
</aside>
<p>Something tells me you are clueless <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/reference-tables-of-the-new-engine/290551/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/reference-tables-of-the-new-engine/290551/7</link>
        <pubDate>Wed, 05 Aug 2009 15:52:31 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-290551-7</guid>
        <source url="https://forum.moparisthebest.com/t/reference-tables-of-the-new-engine/290551.rss">Reference Tables of the New Engine</source>
      </item>
      <item>
        <title>Reference Tables of the New Engine</title>
        <dc:creator><![CDATA[@Aintaro Aintaro]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/aintaro">@Aintaro</a> wrote:</p>
          <blockquote>
              <p>somthing tells me that you just copied this <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/reference-tables-of-the-new-engine/290551/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/reference-tables-of-the-new-engine/290551/6</link>
        <pubDate>Wed, 05 Aug 2009 11:17:59 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-290551-6</guid>
        <source url="https://forum.moparisthebest.com/t/reference-tables-of-the-new-engine/290551.rss">Reference Tables of the New Engine</source>
      </item>
      <item>
        <title>Reference Tables of the New Engine</title>
        <dc:creator><![CDATA[@Jython super_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/jython">@Jython</a> wrote:</p>
          <blockquote>
              <p>blimp</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/reference-tables-of-the-new-engine/290551/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/reference-tables-of-the-new-engine/290551/5</link>
        <pubDate>Tue, 04 Aug 2009 17:12:33 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-290551-5</guid>
        <source url="https://forum.moparisthebest.com/t/reference-tables-of-the-new-engine/290551.rss">Reference Tables of the New Engine</source>
      </item>
      <item>
        <title>Reference Tables of the New Engine</title>
        <dc:creator><![CDATA[@xpatx xpatx]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/xpatx">@xpatx</a> wrote:</p>
          <blockquote>
              <p>super_ says:<br>
no noob facer</p>
<p>&lt;3333333333333333</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/reference-tables-of-the-new-engine/290551/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/reference-tables-of-the-new-engine/290551/4</link>
        <pubDate>Sun, 02 Aug 2009 21:18:38 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-290551-4</guid>
        <source url="https://forum.moparisthebest.com/t/reference-tables-of-the-new-engine/290551.rss">Reference Tables of the New Engine</source>
      </item>
      <item>
        <title>Reference Tables of the New Engine</title>
        <dc:creator><![CDATA[@rune_sleep rune_sleep]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/rune_sleep">@rune_sleep</a> wrote:</p>
          <blockquote>
              <p>Nice Job Again -.- How Many Posts??!!??</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/reference-tables-of-the-new-engine/290551/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/reference-tables-of-the-new-engine/290551/3</link>
        <pubDate>Tue, 28 Jul 2009 19:27:16 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-290551-3</guid>
        <source url="https://forum.moparisthebest.com/t/reference-tables-of-the-new-engine/290551.rss">Reference Tables of the New Engine</source>
      </item>
      <item>
        <title>Reference Tables of the New Engine</title>
        <dc:creator><![CDATA[@vortex vortex]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/vortex">@vortex</a> wrote:</p>
          <blockquote>
              <p>LOLSUPER_ tl;dr but nice tut</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/reference-tables-of-the-new-engine/290551/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/reference-tables-of-the-new-engine/290551/2</link>
        <pubDate>Mon, 27 Jul 2009 20:15:34 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-290551-2</guid>
        <source url="https://forum.moparisthebest.com/t/reference-tables-of-the-new-engine/290551.rss">Reference Tables of the New Engine</source>
      </item>
      <item>
        <title>Reference Tables of the New Engine</title>
        <dc:creator><![CDATA[@Jython super_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/jython">@Jython</a> wrote:</p>
          <blockquote>
              <p>[size=99pt]I AM SUPER_[/size]</p>
<p>[center][size=6pt]The Reference Table Structure[/size][/center]</p>
<p>[center][size=5pt]Table of Contents:[/center]</p>
<p>[ul][li]Old engine history[/li]<br>
[li]New engine history[/li]<br>
[li]Reference tables[/li]<br>
[li]Examples[/li][/ul]</p>
<p>[center]</p>
<p>[size=5pt]Old engine history[/size][/center]</p>
<pre><code>The old engine of RuneScape operated on 'named' files by using what I call their Archive format, which is a large block composed of file entries, each with a compressed size, decompressed size, start offset, a file identifier hash (converts a variable-sized text file name to a packed 32-bit integer),
</code></pre>
<p>and the file’s data scribed into the archive. The archives made use of BZIP2 compression on their data in order to reduce their sizes vastly. Many people who had not decoded the format had named it ‘JAG Compression’, after defyboy’s original research in 2006-07 (?). Since then, JaGeX has abandoned their old Archive format (also called JAG, after their original RSC-era file extensions) and now have retreated back to using their raw uncompressed file system.</p>
<p>[center][size=5pt]New engine history[/size][/center]</p>
<pre><code>Because simply using the raw file system isn't smart because file's won't be compressed, the good workers of JaGeX employed the concept of [b]containers[/b]. Containers are simply seen as raw files to the file system I/O class, but are in a specific format that yet again allows compression. Each container consists of a header that contains it's compression type and decompressed size. Depending on the compression type, the file is either compressed
</code></pre>
<p>using GZIP (type 2+), BZIP2 (type 1), or not compressed at all (type 0). Every client revision comes with it’s own container unpacking method. Now that compression is taken care of, what about ‘naming’ files? This is where the reference tables come into play.</p>
<p>[center][size=5pt]Reference tables[/size][/center]</p>
<pre><code>The use of reference tables started at the same exact time the file system identified by 255 was dropped into your 'cache' directory. A [b]reference table[/b] is a file within file system 255 in a specific format. Every reference table contains important information on each file in it's described file system. The data for each of these files in the reference table is called an entry. The format for a reference table is described below.
</code></pre>
<p>Reference tables start off with a version number (if 6, an unidentified integer is read which is believed to possible by a file system name identifier hash).  Following is a flag telling if the table contains file identifier hashes. An important fact to note is that file identifiers are hashed differently than in the Archive format. After the flag comes in, the number of entries is read, and that many ‘spacing’ values are read. After spacing values, if file name hashes are supported, it reads a file identifier for each entry. Right after comes a set of CRC32 checksums of each entry (used internally by client to version-check it’s file system data). The next set of data, dubbed ‘field4’ by it’s position relative to the other reference table ‘fields’, is currently unknown. Speculations state it could possibly be the entry file’s version of some sort. Later comes field 5, or children count. Every entry could potentially house several children, or ‘sub-files’. After children count, the children offsets inside their parent’s file data are read, later surpassed by a check to if the table contains file identifier hashes. If it does, it then reads each child’s identifier hashes.<br>
This concludes the format.</p>
<p>[center][size=5pt]Examples[/size][/center]</p>
<pre><code>For example, file system 5 holds map and landscape related files. Map files are identified by mX_Y and landscape by lX_Y, where X and Y are the map and landscape's owner map region coordinates. Defyboy has started an attempt to bruteforce many of the file identifiers into their natural names. They can be found under 'names.txt' within the CacheEdit project's SVN folder. The update server of the official runescape server's serves requests with the raw file data in the file system. An example can be seen within the 'update keys'. 'Update keys' are actually the file data of the reference table of file system 255 itself, which are contained within the special container format.</code></pre>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/reference-tables-of-the-new-engine/290551/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/reference-tables-of-the-new-engine/290551/1</link>
        <pubDate>Fri, 24 Jul 2009 01:35:34 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-290551-1</guid>
        <source url="https://forum.moparisthebest.com/t/reference-tables-of-the-new-engine/290551.rss">Reference Tables of the New Engine</source>
      </item>
  </channel>
</rss>
