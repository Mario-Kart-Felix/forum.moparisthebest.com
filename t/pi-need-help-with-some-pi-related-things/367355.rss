<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>[PI] Need help with some PI related things</title>
    <link>https://forum.moparisthebest.com/t/pi-need-help-with-some-pi-related-things/367355</link>
    <description>1. IP Tracker on character file
Does any one know how to add IP to character data and make it keep track of last IP used to log on. I want to have a thing where it tells me who&#39;s IP last logged into the account so that I may prevent cheating. 

2. Friend&#39;s list not working 100%
I am not really sure if this is client or server-sided. I was told that the friend&#39;s list is broken on PI, like when you add someone, it stays either Green or Red even when it doesn&#39;t correspond. Ex. When someone is one, the added person&#39;s name is in Red. Any one know how to fix? I been given a fix before, but it turns its green rather than red even when they were on.

3. Improved player command
Does anyone know how to track who&#39;s online? Like the command :: players shows you how many people are online and I want to know who is online, something similar to the cPanel on some delta sources.

4. PM log/Chat log/CC log/Trade log and whatever else you can think of
A way to save whatever people type in a PM into a text file. Same for the rest.

5. I just added a few custom NPCs or switched the NPCs ID. Like on the client side GWD NPCs were already in the client that came with PI, but I decided to switch the IDs around and the NPCs are not the GWD NPCs, but like guards and dwarfs... any idea? It may be server side, but I am not sure. Original IDs where 25__, but I changed them to 62__. Any idea why its being stupid?

6. I check the kick and mute command that was already in PI and it seems that kick only disconnects them and relogs them in and mute does nothing but adds them to the mute list...

I decided to put everything in one thread to make it easier.</description>
    
    <lastBuildDate>Thu, 04 Nov 2010 23:19:16 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/pi-need-help-with-some-pi-related-things/367355.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>[PI] Need help with some PI related things</title>
        <dc:creator><![CDATA[@PServ123 PServ123]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/pserv123">@PServ123</a> wrote:</p>
          <blockquote>
              <p>Oh, damn. Does anyone else know?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-need-help-with-some-pi-related-things/367355/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-need-help-with-some-pi-related-things/367355/5</link>
        <pubDate>Thu, 04 Nov 2010 23:19:16 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-367355-5</guid>
        <source url="https://forum.moparisthebest.com/t/pi-need-help-with-some-pi-related-things/367355.rss">[PI] Need help with some PI related things</source>
      </item>
      <item>
        <title>[PI] Need help with some PI related things</title>
        <dc:creator><![CDATA[@Keatrm Keatrm]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/keatrm">@Keatrm</a> wrote:</p>
          <blockquote>
              <p>My friend changed it up and gave it to me, so I don’t know, sorry :[</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-need-help-with-some-pi-related-things/367355/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-need-help-with-some-pi-related-things/367355/4</link>
        <pubDate>Thu, 04 Nov 2010 21:34:55 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-367355-4</guid>
        <source url="https://forum.moparisthebest.com/t/pi-need-help-with-some-pi-related-things/367355.rss">[PI] Need help with some PI related things</source>
      </item>
      <item>
        <title>[PI] Need help with some PI related things</title>
        <dc:creator><![CDATA[@PServ123 PServ123]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/pserv123">@PServ123</a> wrote:</p>
          <blockquote>
              <p>Nah, for the player command, I need it to show me who’s online.</p>
<p>Oh, could you please tell me what you changed? I changed my connection file alot, so its different.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-need-help-with-some-pi-related-things/367355/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-need-help-with-some-pi-related-things/367355/3</link>
        <pubDate>Thu, 04 Nov 2010 21:17:50 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-367355-3</guid>
        <source url="https://forum.moparisthebest.com/t/pi-need-help-with-some-pi-related-things/367355.rss">[PI] Need help with some PI related things</source>
      </item>
      <item>
        <title>[PI] Need help with some PI related things</title>
        <dc:creator><![CDATA[@Keatrm Keatrm]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/keatrm">@Keatrm</a> wrote:</p>
          <blockquote>
              <p>I can give you the ::players command? Is that what you want?</p>
<pre><code>		if (playerCommand.equalsIgnoreCase("players")) {
			c.sendMessage("Currently, there is "+PlayerHandler.getPlayerCount()+ " player(s) online.");
		}
</code></pre>
<p>oh and for the mute, you need to make changes in the connection file!</p>
<p>Replace everything in connection with this:</p>
<p>[code]package server;</p>
<p>import java.io.BufferedReader;<br>
import java.io.BufferedWriter;<br>
import java.io.FileReader;<br>
import java.io.FileWriter;<br>
import java.io.IOException;<br>
import java.util.ArrayList;<br>
import server.model.players.Client;</p>
<p>/**</p>
<ul>
<li>Connection Check Class</li>
<li>
</li>
<li>
<span class="mention">@author</span> Ryan / Lmctruck30</li>
<li>
</li>
</ul>
<p>*/</p>
<p>public class Connection {</p>
<pre><code>public static ArrayList &lt;String&gt;bannedIps = new ArrayList&lt;String&gt; ();
public static ArrayList &lt;String&gt;bannedNames = new ArrayList&lt;String&gt; ();
public static ArrayList &lt;String&gt;mutedIps = new ArrayList&lt;String&gt; ();
public static ArrayList &lt;String&gt;mutedNames = new ArrayList&lt;String&gt; ();
public static ArrayList &lt;String&gt;loginLimitExceeded = new ArrayList&lt;String&gt; ();


/**
* Adds the banned usernames and ips from the text file to the ban list
**/
public static void initialize() {
	banUsers();
	banIps();
	muteUsers();
	muteIps();
}	

/**
 * Adding Name To List
 */
public static void addIpToLoginList(String IP) {
	loginLimitExceeded.add(IP);
}

/**
 * Remove Ip From List
 */
public static void removeIpFromLoginList(String IP) {
	loginLimitExceeded.remove(IP);
}

/**
 * Clear Name List
 */
public static void clearLoginList() {
	loginLimitExceeded.clear();
}

public static boolean checkLoginList(String IP) {
	loginLimitExceeded.add(IP);
	int num = 0;
	for(String ips : loginLimitExceeded) {
		if(IP.equals(ips)) {
			num++;
		}
	}
	if(num &gt; 5) {
		return true;
	}
	return false;
}

public static void unMuteUser(String name) {
	mutedNames.remove(name);
	deleteFromFile("./Data/bans/UsersMuted.txt", name);	
}

public static void unIPMuteUser(String name) {
	mutedIps.remove(name);
	deleteFromFile("./Data/bans/IpsMuted.txt", name);	
}

/**
* Adding Ban IP
**/
public static void addIpToBanList(String IP) {
	bannedIps.add(IP);
}

public static void addIpToMuteList(String IP) {
	mutedIps.add(IP);
	addIpToMuteFile(IP);
}


/**
* Removing Ban IP
**/
public static void removeIpFromBanList(String IP) {
	bannedIps.remove(IP);
}

/**
* Contains Ban IP
**/
public static boolean isIpBanned(String IP) {
	if(bannedIps.contains(IP)) {
		return true;
	}
	return false;
}


/**
* Adding banned username
**/
public static void addNameToBanList(String name) {
	bannedNames.add(name.toLowerCase());
}

public static void addNameToMuteList(String name) {
	mutedNames.add(name.toLowerCase());
	addUserToFile(name);
}


/**
* Removing banned username
**/
public static void removeNameFromBanList(String name) {
	bannedNames.remove(name.toLowerCase());
	deleteFromFile("./Data/bans/UsersBanned.txt", name);
}

public static void removeNameFromMuteList(String name) {
	bannedNames.remove(name.toLowerCase());
	deleteFromFile("./Data/bans/UsersMuted.txt", name);
}

public static void deleteFromFile(String file, String name) {
	try {
		BufferedReader r = new BufferedReader(new FileReader(file));
		ArrayList&lt;String&gt; contents = new ArrayList&lt;String&gt;();
		while(true) {
			String line = r.readLine();
			if(line == null) {
				break;
			} else {
				line = line.trim();
			}
			if(!line.equalsIgnoreCase(name)) {
				contents.add(line);
			}
		}
		r.close();
		BufferedWriter w = new BufferedWriter(new FileWriter(file));
		for(String line : contents) {
			w.write(line, 0, line.length());
			w.newLine();
		}
		w.flush();
		w.close();
	} catch (Exception e) {}
}

/**
* Contains banned username
**/
public static boolean isNamedBanned(String name) {
	if(bannedNames.contains(name.toLowerCase())) {
		return true;
	}
	return false;
}


/**
* Reads all usernames from text file then adds them all to the ban list
**/
public static void banUsers() {
	try {
		BufferedReader in = new BufferedReader(new FileReader("./Data/bans/UsersBanned.txt"));
		String data = null;
		try {
			while ((data = in.readLine()) != null) {
				addNameToBanList(data);
			}
		} finally {
			in.close();
		}
	} catch (IOException e) {
		e.printStackTrace();
	}
}

public static void muteUsers() {
	try {
		BufferedReader in = new BufferedReader(new FileReader("./Data/bans/UsersMuted.txt"));
		String data = null;
		try {
			while ((data = in.readLine()) != null) {
				mutedNames.add(data);
			}
		} finally {
			in.close();
		}
	} catch (IOException e) {
		e.printStackTrace();
	}
}
/**
* Reads all the Ips from text file then adds them all to ban list
**/
public static void banIps() {
	try {
		BufferedReader in = new BufferedReader(new FileReader("./Data/bans/IpsBanned.txt"));
		String data = null;
		try {
			while ((data = in.readLine()) != null) {
				addIpToBanList(data);
			}
		} finally {
			in.close();
		}
	} catch (IOException e) {
		e.printStackTrace();
	}
}

public static void muteIps() {
	try {
		BufferedReader in = new BufferedReader(new FileReader("./Data/bans/IpsMuted.txt"));
		String data = null;
		try {
			while ((data = in.readLine()) != null) {
				mutedIps.add(data);
			}
		} finally {
			in.close();
		}
	} catch (IOException e) {
		e.printStackTrace();
	}
}
/**
* Writes the username into the text file - when using the ::ban playername command
**/
public static void addNameToFile(String Name) {
	try {
		BufferedWriter out = new BufferedWriter(new FileWriter("./Data/bans/UsersBanned.txt", true));
	    try {
			out.newLine();
			out.write(Name);
	    } finally {
			out.close();
	    }
	} catch (IOException e) {
		e.printStackTrace();
	}
}

public static void addUserToFile(String Name) {
	try {
		BufferedWriter out = new BufferedWriter(new FileWriter("./Data/bans/UsersMuted.txt", true));
	    try {
			out.newLine();
			out.write(Name);
	    } finally {
			out.close();
	    }
	} catch (IOException e) {
		e.printStackTrace();
	}
}





/**
* Writes the IP into the text file - use ::ipban username
**/
public static void addIpToFile(String Name) {
	try {
		BufferedWriter out = new BufferedWriter(new FileWriter("./Data/bans/IpsBanned.txt", true));
	    try {
			out.newLine();
			out.write(Name);
	    } finally {
			out.close();
	    }
	} catch (IOException e) {
		e.printStackTrace();
	}
}

public static void addIpToMuteFile(String Name) {
	try {
		BufferedWriter out = new BufferedWriter(new FileWriter("./Data/bans/IpsMuted.txt", true));
	    try {
			out.newLine();
			out.write(Name);
	    } finally {
			out.close();
	    }
	} catch (IOException e) {
		e.printStackTrace();
	}
}

public static boolean isMuted(Client c) {
	return mutedNames.contains(c.playerName) || mutedIps.contains(c.connectedFrom);	
}
</code></pre>
<p>}[/code]</p>
<p>BE SURE TO MAKE BACKUPS FIRST!</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-need-help-with-some-pi-related-things/367355/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-need-help-with-some-pi-related-things/367355/2</link>
        <pubDate>Thu, 04 Nov 2010 21:15:03 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-367355-2</guid>
        <source url="https://forum.moparisthebest.com/t/pi-need-help-with-some-pi-related-things/367355.rss">[PI] Need help with some PI related things</source>
      </item>
      <item>
        <title>[PI] Need help with some PI related things</title>
        <dc:creator><![CDATA[@PServ123 PServ123]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/pserv123">@PServ123</a> wrote:</p>
          <blockquote>
              <ol>
<li>
<p>IP Tracker on character file<br>
Does any one know how to add IP to character data and make it keep track of last IP used to log on. I want to have a thing where it tells me who’s IP last logged into the account so that I may prevent cheating.</p>
</li>
<li>
<p>Friend’s list not working 100%<br>
I am not really sure if this is client or server-sided. I was told that the friend’s list is broken on PI, like when you add someone, it stays either Green or Red even when it doesn’t correspond. Ex. When someone is one, the added person’s name is in Red. Any one know how to fix? I been given a fix before, but it turns its green rather than red even when they were on.</p>
</li>
<li>
<p>Improved player command<br>
Does anyone know how to track who’s online? Like the command :: players shows you how many people are online and I want to know who is online, something similar to the cPanel on some delta sources.</p>
</li>
<li>
<p>PM log/Chat log/CC log/Trade log and whatever else you can think of<br>
A way to save whatever people type in a PM into a text file. Same for the rest.</p>
</li>
<li>
<p>I just added a few custom NPCs or switched the NPCs ID. Like on the client side GWD NPCs were already in the client that came with PI, but I decided to switch the IDs around and the NPCs are not the GWD NPCs, but like guards and dwarfs… any idea? It may be server side, but I am not sure. Original IDs where 25__, but I changed them to 62__. Any idea why its being stupid?</p>
</li>
<li>
<p>I check the kick and mute command that was already in PI and it seems that kick only disconnects them and relogs them in and mute does nothing but adds them to the mute list…</p>
</li>
</ol>
<p>I decided to put everything in one thread to make it easier.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-need-help-with-some-pi-related-things/367355/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-need-help-with-some-pi-related-things/367355/1</link>
        <pubDate>Thu, 04 Nov 2010 21:13:04 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-367355-1</guid>
        <source url="https://forum.moparisthebest.com/t/pi-need-help-with-some-pi-related-things/367355.rss">[PI] Need help with some PI related things</source>
      </item>
  </channel>
</rss>
