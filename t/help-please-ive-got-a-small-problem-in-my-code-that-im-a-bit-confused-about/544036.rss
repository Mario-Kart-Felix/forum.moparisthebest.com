<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Help, please, I&#39;ve got a small problem in my code that I&#39;m a bit confused about</title>
    <link>https://forum.moparisthebest.com/t/help-please-ive-got-a-small-problem-in-my-code-that-im-a-bit-confused-about/544036</link>
    <description>Hi, everyone. So I&#39;m testing out sockets and sending data from client to client, but what I&#39;m doing is not working right.

So, I have everything set up, and what it&#39;s supposed to do is this:

[code]&quot;Please write your name.&quot;
Austin (enter)
//Now this will make your name Austin.
//Next message you say will be &#39;Austin: (message)&#39;
[/code]

But, it&#39;s not writing it properly. 

Here&#39;s my code:

Server - 
[code=java]

import java.io.*;
import java.net.*;


/**
 * - Austin
 */
public class Server {

    static ServerSocket serverSocket;
    static Socket socket;
    static DataOutputStream out;
    static DataInputStream in;
    static User[] user = new User[10];

    public static void main(String[] args) throws Exception {

        System.out.println(&quot;Starting server...&quot;);

        serverSocket = new ServerSocket(7777);

        System.out.println(&quot;Server started successfully&quot;);

        while (true) {

            socket = serverSocket.accept();

            for (int i = 0; i &lt; 10; i++) {

                System.out.println(&quot;Connection from &quot; + socket.getInetAddress());

                in = new DataInputStream(socket.getInputStream());
                if (user[i] == null) {

                    user[i] = new User(out, in, user);

                    Thread thread = new Thread();

                    thread.start();

                    break;

                }

            }

        }
    }


}

class User implements Runnable {

    DataOutputStream out;
    DataInputStream in;
    User[] user = new User[10];
    String name;

    public User(DataOutputStream out, DataInputStream in, User[] user) {
        this.out = out;
        this.in = in;
        this.user = user;
    }

    public void run() {
        try {
            name = in.readUTF();
        } catch (IOException e) {
            e.printStackTrace();
        }
        while (true) {
            try {

                String message = in.readUTF();

                for (int i = 0; i &lt; 10; i++) {

                    if (user[i] != null) {

                        user[i].out.writeUTF(name + &quot;: &quot; + message);

                    }
                }

            } catch (IOException e) {
                this.in = null;
                this.out = null;

            }

        }

    }
}
[/code]

Client - 

[code=java]

import java.net.*;
import java.io.*;
import java.util.Scanner;


/**
 * - Austin
 */
public class Client {

    static Socket socket;
    static DataInputStream in;
    static DataOutputStream out;


    public static void main(String[] args) throws Exception {

        /**
         * Connects to the localhost from the server
         */

        System.out.println(&quot;Connecting...&quot;);

        socket = new Socket(&quot;localhost&quot;, 7777);

        System.out.println(&quot;Connection successful.&quot;);

        in = new DataInputStream(socket.getInputStream());

        out = new DataOutputStream(socket.getOutputStream());

        Input input = new Input(in);

        Thread thread = new Thread(input);

        thread.start();

        Scanner sc = new Scanner(System.in);

        System.out.println(&quot;Write your name and press enter&quot;);

        String name = sc.nextLine();

        out.writeUTF(sc.nextLine());

        while(true) {
            String sendMessage = sc.nextLine();
            out.writeUTF(sendMessage);
        }



    }



}
class Input implements Runnable {

    DataInputStream in;



    public Input(DataInputStream in) {
        this.in = in;

    }



    public void run() {

        while(true) {
            String message;
            try {
                message = in.readUTF();
                System.out.println(message);
            } catch (IOException e) {
                e.printStackTrace();
            }


        }

    }
}
[/code]

Here&#39;s what happens when I try to do it:

[code]
Connecting...
Connection successful.
Write your name and press enter

Austin
Hello. This is a test.

Not working :/
[/code]</description>
    
    <lastBuildDate>Wed, 18 Jun 2014 06:08:34 +0000</lastBuildDate>
    <category>General Programming</category>
    <atom:link href="https://forum.moparisthebest.com/t/help-please-ive-got-a-small-problem-in-my-code-that-im-a-bit-confused-about/544036.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Help, please, I&#39;ve got a small problem in my code that I&#39;m a bit confused about</title>
        <dc:creator><![CDATA[@Pwnd Pwnd]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/pwnd">@Pwnd</a> wrote:</p>
          <blockquote>
              <p>Your thread does nothing.  You just make a thread and then it ends immediately because it’s just an empty Thread object.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/help-please-ive-got-a-small-problem-in-my-code-that-im-a-bit-confused-about/544036/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/help-please-ive-got-a-small-problem-in-my-code-that-im-a-bit-confused-about/544036/2</link>
        <pubDate>Wed, 18 Jun 2014 06:08:34 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-544036-2</guid>
        <source url="https://forum.moparisthebest.com/t/help-please-ive-got-a-small-problem-in-my-code-that-im-a-bit-confused-about/544036.rss">Help, please, I&#39;ve got a small problem in my code that I&#39;m a bit confused about</source>
      </item>
      <item>
        <title>Help, please, I&#39;ve got a small problem in my code that I&#39;m a bit confused about</title>
        <dc:creator><![CDATA[@sorecheeny sorecheeny]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sorecheeny">@sorecheeny</a> wrote:</p>
          <blockquote>
              <p>Hi, everyone. So I’m testing out sockets and sending data from client to client, but what I’m doing is not working right.</p>
<p>So, I have everything set up, and what it’s supposed to do is this:</p>
<p><code>"Please write your name."
Austin (enter)
//Now this will make your name Austin.
//Next message you say will be 'Austin: (message)'
</code></p>
<p>But, it’s not writing it properly.</p>
<p>Here’s my code:</p>
<p>Server -</p>
<pre><code class="lang-auto">
import java.io.*;
import java.net.*;


/**
 * - Austin
 */
public class Server {

    static ServerSocket serverSocket;
    static Socket socket;
    static DataOutputStream out;
    static DataInputStream in;
    static User[] user = new User[10];

    public static void main(String[] args) throws Exception {

        System.out.println("Starting server...");

        serverSocket = new ServerSocket(7777);

        System.out.println("Server started successfully");

        while (true) {

            socket = serverSocket.accept();

            for (int i = 0; i &lt; 10; i++) {

                System.out.println("Connection from " + socket.getInetAddress());

                in = new DataInputStream(socket.getInputStream());
                if (user[i] == null) {

                    user[i] = new User(out, in, user);

                    Thread thread = new Thread();

                    thread.start();

                    break;

                }

            }

        }
    }


}

class User implements Runnable {

    DataOutputStream out;
    DataInputStream in;
    User[] user = new User[10];
    String name;

    public User(DataOutputStream out, DataInputStream in, User[] user) {
        this.out = out;
        this.in = in;
        this.user = user;
    }

    public void run() {
        try {
            name = in.readUTF();
        } catch (IOException e) {
            e.printStackTrace();
        }
        while (true) {
            try {

                String message = in.readUTF();

                for (int i = 0; i &lt; 10; i++) {

                    if (user[i] != null) {

                        user[i].out.writeUTF(name + ": " + message);

                    }
                }

            } catch (IOException e) {
                this.in = null;
                this.out = null;

            }

        }

    }
}</code></pre>
<p>Client -</p>
<pre><code class="lang-auto">
import java.net.*;
import java.io.*;
import java.util.Scanner;


/**
 * - Austin
 */
public class Client {

    static Socket socket;
    static DataInputStream in;
    static DataOutputStream out;


    public static void main(String[] args) throws Exception {

        /**
         * Connects to the localhost from the server
         */

        System.out.println("Connecting...");

        socket = new Socket("localhost", 7777);

        System.out.println("Connection successful.");

        in = new DataInputStream(socket.getInputStream());

        out = new DataOutputStream(socket.getOutputStream());

        Input input = new Input(in);

        Thread thread = new Thread(input);

        thread.start();

        Scanner sc = new Scanner(System.in);

        System.out.println("Write your name and press enter");

        String name = sc.nextLine();

        out.writeUTF(sc.nextLine());

        while(true) {
            String sendMessage = sc.nextLine();
            out.writeUTF(sendMessage);
        }



    }



}
class Input implements Runnable {

    DataInputStream in;



    public Input(DataInputStream in) {
        this.in = in;

    }



    public void run() {

        while(true) {
            String message;
            try {
                message = in.readUTF();
                System.out.println(message);
            } catch (IOException e) {
                e.printStackTrace();
            }


        }

    }
}</code></pre>
<p>Here’s what happens when I try to do it:</p>
<pre><code class="lang-auto">Connecting...
Connection successful.
Write your name and press enter

Austin
Hello. This is a test.

Not working :/</code></pre>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/help-please-ive-got-a-small-problem-in-my-code-that-im-a-bit-confused-about/544036/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/help-please-ive-got-a-small-problem-in-my-code-that-im-a-bit-confused-about/544036/1</link>
        <pubDate>Tue, 17 Jun 2014 05:19:39 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-544036-1</guid>
        <source url="https://forum.moparisthebest.com/t/help-please-ive-got-a-small-problem-in-my-code-that-im-a-bit-confused-about/544036.rss">Help, please, I&#39;ve got a small problem in my code that I&#39;m a bit confused about</source>
      </item>
  </channel>
</rss>
