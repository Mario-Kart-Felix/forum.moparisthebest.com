<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Deriving Accessor Methods From 317</title>
    <link>https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509</link>
    <description>Started looking into the NPC class
I have made a little progress tonight but I am tired so I am going to bed for now I will update when i get working methods</description>
    
    <lastBuildDate>Mon, 09 Jul 2007 22:06:48 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Deriving Accessor Methods From 317</title>
        <dc:creator><![CDATA[@Ferty Ferty]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ferty">@Ferty</a> wrote:</p>
          <blockquote>
              <p>hmm I think im going to try and write  script that attacks guards tonight using my accessormethods[br][size=1]Posted on: July 06, 2007, 01:13:06 PM[/size][hr]I figured out the main graphics processing goes on in world controller, when it goes to draw objects on the screen it uses the objects instance of animable and calls method443 which is located in animable, method 443 does similar calculations to my entscreenpos method and then calls a method inside texture.class also called method 443 so im thinkin herein lies the answer to object screen position ;D[br][size=1]Posted on: July 07, 2007, 09:37:47 PM[/size][hr]Okay I finally got a working objectToScreen methods <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=6" title=":smiley:" class="emoji" alt=":smiley:"></p>
<p>Note: this is minus the methods to get a find the nearest object instance etc.</p>
<p>also, the method calcObjectScreenPos is just a port of calcEntityScreenPos with the inputs rearranged and such, here it is:</p>
<pre><code class="lang-auto">                            int x = nearObjectX - baseX;
                            x = x &lt;&lt; 7;
                            int y = nearObjectY - baseY;
                            y = y &lt;&lt; 7;
                            int height = object5.aClass30_Sub2_Sub4_521.modelHeight;
                            calcObjectScreenPos(x, y, height / 2);</code></pre>
<p>and yes i know all the math could be done in two lines but i was sure of the order of operations and wanted to be sure the bit shift would occur as the last step in the equation :)[br][size=1]Posted on: July 09, 2007, 11:05:22 AM[/size][hr]Okay I finally got a working objectToScreen methods <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=6" title=":smiley:" class="emoji" alt=":smiley:"></p>
<p>Note: this is minus the methods to get a find the nearest object instance etc.<br>
nearOBjectX and y are just temporary variables till we implement some sort of tile class to store x and y co-ordinates <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=6" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>also, the method calcObjectScreenPos is just a port of calcEntityScreenPos with the inputs rearranged and such, here it is:</p>
<pre><code class="lang-auto">                            int x = nearObjectX - baseX;
                            x = x &lt;&lt; 7;
                            int y = nearObjectY - baseY;
                            y = y &lt;&lt; 7;
                            int height = object5.aClass30_Sub2_Sub4_521.modelHeight;
                            calcObjectScreenPos(x, y, height / 2);</code></pre>
<p>and yes i know all the math could be done in two lines but i was sure of the order of operations and wanted to be sure the bit shift would occur as the last step in the equation <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=6" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/35">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/35</link>
        <pubDate>Mon, 09 Jul 2007 22:06:48 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-117509-35</guid>
        <source url="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509.rss">Deriving Accessor Methods From 317</source>
      </item>
      <item>
        <title>Deriving Accessor Methods From 317</title>
        <dc:creator><![CDATA[@moparisthebest Moparisthebest]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/moparisthebest">@moparisthebest</a> wrote:</p>
          <blockquote>
              <p>Here it is all put together with Cherokee (note that compile.sh and run317.sh work perfectly, and I also changed compile.bat and run317.bat, but I can’t test those, so you may have to fix something)</p>
<p>edit: you must have a cache folder in your working directory for it to work, <a href="http://www.moparisthebest.com/cache/cache.zip" rel="nofollow noopener">http://www.moparisthebest.com/cache/cache.zip</a></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/34">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/34</link>
        <pubDate>Wed, 04 Jul 2007 09:19:58 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-117509-34</guid>
        <source url="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509.rss">Deriving Accessor Methods From 317</source>
      </item>
      <item>
        <title>Deriving Accessor Methods From 317</title>
        <dc:creator><![CDATA[@Ferty Ferty]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ferty">@Ferty</a> wrote:</p>
          <blockquote>
              <p>bleh, I must be having a mind block this should be that hard but I cant seem to find any leads on how the client calculates where to draw objects, I think im going to search in the client were groundArray[][][] appears see if i get anything form that[br][size=1]Posted on: July 03, 2007, 10:40:33 AM[/size][hr]I think i figured out of the ground array works<br>
there are 4 levels in runescape you start at 2, you can go down a lader to 1, you can go up a ladder to 3 and up a another to 4, im assuming these are know as planes so we have</p>
<pre><code class="lang-auto">groundArray[plane][x][y];</code></pre>
<p>so i am now assuming bytegroundarray contains the data on the objects?<br>
hmm it also seems rs loads sections of the map in 105 X 105 chunks as you walk around</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/33">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/33</link>
        <pubDate>Tue, 03 Jul 2007 21:49:38 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-117509-33</guid>
        <source url="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509.rss">Deriving Accessor Methods From 317</source>
      </item>
      <item>
        <title>Deriving Accessor Methods From 317</title>
        <dc:creator><![CDATA[@moparisthebest Moparisthebest]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/moparisthebest">@moparisthebest</a> wrote:</p>
          <blockquote>
              <p>The math for finding objects has to be somewhere in the client as well, it is just a matter of finding it. <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=6" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/32">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/32</link>
        <pubDate>Tue, 03 Jul 2007 09:46:37 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-117509-32</guid>
        <source url="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509.rss">Deriving Accessor Methods From 317</source>
      </item>
      <item>
        <title>Deriving Accessor Methods From 317</title>
        <dc:creator><![CDATA[@Ferty Ferty]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ferty">@Ferty</a> wrote:</p>
          <blockquote>
              <p>pretty much sanme three methods, but for players, note i could only test this on my own player but it seems to work perfect</p>
<pre><code class="lang-auto">    public Player[] getPlayers() {

        return playerArray;

    } </code></pre>
<pre><code class="lang-auto">    public synchronized Player findPlayerByName(String name) {

        for (Player player : getPlayers()) {

            if (player == null)

                continue;

            if (player != null)

                if (player.name != null &amp;&amp;

                        player.name.equals(name))

        }

        return null;

    }  </code></pre>
<pre><code class="lang-auto">    private void playerScreenPos(Player player)
    {
      if(player != null){
        calcEntityScreenPos(player.x, player.height / 2, player.y);
	System.out.println("Player " + player.name + " found at " + spriteDrawX + "," + spriteDrawY);
      }
      else
        System.out.println("Null Player Exception");
    }  </code></pre>
<p>Im going to actually make the screenPos methods throw an exception, and eventually get them to return an instance of a tile class that I’ll write once i get this into cherokee :-P[br][size=1]Posted on: June 30, 2007, 07:59:47 AM[/size][hr]i wrote up some methods to find the neart object by type/id (since those are readily availible in xml documents) but im about 100% sure the same methods will not work for finding the screen position of objects that i used for entities  :mad: :mad: :mad: :mad: :mad: :mad: :mad: :mad: :mad:</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/31">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/31</link>
        <pubDate>Mon, 02 Jul 2007 05:47:01 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-117509-31</guid>
        <source url="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509.rss">Deriving Accessor Methods From 317</source>
      </item>
      <item>
        <title>Deriving Accessor Methods From 317</title>
        <dc:creator><![CDATA[@moparisthebest Moparisthebest]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/moparisthebest">@moparisthebest</a> wrote:</p>
          <blockquote>
              <p>I would try the easy approach first, it has been awhile since I have dealt with multi-threaded code that had to access arrays at the same time.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/30">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/30</link>
        <pubDate>Sat, 30 Jun 2007 10:33:23 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-117509-30</guid>
        <source url="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509.rss">Deriving Accessor Methods From 317</source>
      </item>
      <item>
        <title>Deriving Accessor Methods From 317</title>
        <dc:creator><![CDATA[@Ferty Ferty]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ferty">@Ferty</a> wrote:</p>
          <blockquote>
              <p>No, actually I dont think it will, what if we set the clients npcArray to synchronized that might cause all kind of havoc but it would allow only one method to access it at once</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/29">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/29</link>
        <pubDate>Sat, 30 Jun 2007 07:45:51 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-117509-29</guid>
        <source url="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509.rss">Deriving Accessor Methods From 317</source>
      </item>
      <item>
        <title>Deriving Accessor Methods From 317</title>
        <dc:creator><![CDATA[@moparisthebest Moparisthebest]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/moparisthebest">@moparisthebest</a> wrote:</p>
          <blockquote>
              <p>[quote=“Ferty, post:27, topic:117509”]oh man this is driving me nuts im going to go back to making methods now lol<br>
I looked into making things threadsafe on google and if i set the section of the method findNpcByName that actually acsesses the npc array to synchronized would that make it safe?[/quote]</p>
<p>Probably.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/28">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/28</link>
        <pubDate>Sat, 30 Jun 2007 07:23:34 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-117509-28</guid>
        <source url="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509.rss">Deriving Accessor Methods From 317</source>
      </item>
      <item>
        <title>Deriving Accessor Methods From 317</title>
        <dc:creator><![CDATA[@Ferty Ferty]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ferty">@Ferty</a> wrote:</p>
          <blockquote>
              <p>oh man this is driving me nuts im going to go back to making methods now lol<br>
I looked into making things threadsafe on google and if i set the section of the method findNpcByName that actually acsesses the npc array to synchronized would that make it safe?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/27">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/27</link>
        <pubDate>Sat, 30 Jun 2007 07:02:27 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-117509-27</guid>
        <source url="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509.rss">Deriving Accessor Methods From 317</source>
      </item>
      <item>
        <title>Deriving Accessor Methods From 317</title>
        <dc:creator><![CDATA[@moparisthebest Moparisthebest]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/moparisthebest">@moparisthebest</a> wrote:</p>
          <blockquote>
              <aside class="quote no-group" data-post="25" data-topic="117509">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/user_avatar/forum.moparisthebest.com/ferty/40/93_2.png" class="avatar"> Ferty:</div>
<blockquote>
<p>the only thing im having problems with is specifying where to find the client files for 317 doesnt want to work for me <img src="https://forum.moparisthebest.com/images/emoji/twitter/confused.png?v=6" title=":confused:" class="emoji" alt=":confused:"></p>
</blockquote>
</aside>
<p>Put them in the src directory, since they are not in a package.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/26">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/26</link>
        <pubDate>Sat, 30 Jun 2007 06:48:40 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-117509-26</guid>
        <source url="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509.rss">Deriving Accessor Methods From 317</source>
      </item>
      <item>
        <title>Deriving Accessor Methods From 317</title>
        <dc:creator><![CDATA[@Ferty Ferty]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ferty">@Ferty</a> wrote:</p>
          <blockquote>
              <p>the only thing im having problems with is specifying where to find the client files for 317 doesnt want to work for me <img src="https://forum.moparisthebest.com/images/emoji/twitter/confused.png?v=6" title=":confused:" class="emoji" alt=":confused:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/25">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/25</link>
        <pubDate>Sat, 30 Jun 2007 06:46:42 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-117509-25</guid>
        <source url="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509.rss">Deriving Accessor Methods From 317</source>
      </item>
      <item>
        <title>Deriving Accessor Methods From 317</title>
        <dc:creator><![CDATA[@moparisthebest Moparisthebest]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/moparisthebest">@moparisthebest</a> wrote:</p>
          <blockquote>
              <p>You pretty much need an IDE to compile it, or ant, but I don’t know how to use the latter.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/24">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/24</link>
        <pubDate>Sat, 30 Jun 2007 06:41:40 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-117509-24</guid>
        <source url="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509.rss">Deriving Accessor Methods From 317</source>
      </item>
      <item>
        <title>Deriving Accessor Methods From 317</title>
        <dc:creator><![CDATA[@Ferty Ferty]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ferty">@Ferty</a> wrote:</p>
          <blockquote>
              <p>alright ill work on that, I may need some help on suggestion 2, anyways im excited to get this into cherokke to try the mous methods with it by i cant seem to get it to compile <img src="https://forum.moparisthebest.com/images/emoji/twitter/frowning.png?v=6" title=":frowning:" class="emoji" alt=":frowning:"></p>
<p>Perhaps you could insert theese methods into your own 317 accessormethods and tell me how it runs</p>
<p>EDIT<br>
I am not very familiar with coding threadsafe applications will changing it to:<br>
public synchronized NPC findNpcByName(String name)<br>
make it threadsafe?</p>
<p>Oh, and I had no intention of putting getNPCs(); into accessormethods that was just incase i needed it for the debugging i was doing</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/23">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/23</link>
        <pubDate>Sat, 30 Jun 2007 06:22:15 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-117509-23</guid>
        <source url="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509.rss">Deriving Accessor Methods From 317</source>
      </item>
      <item>
        <title>Deriving Accessor Methods From 317</title>
        <dc:creator><![CDATA[@moparisthebest Moparisthebest]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/moparisthebest">@moparisthebest</a> wrote:</p>
          <blockquote>
              <p>Great <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=6" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>I only have three suggestions:</p>
<ol>
<li>
<p>npcScreenPos should throw a nullpointer exception instead of printing ‘npc is null’ (it should also return x,y, but you already knew that :P)</p>
</li>
<li>
<p>findNPCByName is not threadsafe, we need to synchronize it with an object or something so that we don’t get any nasty ConcurrentAccessExceptions.</p>
</li>
<li>
<p>We should never return the NPC array to the hands of the script writer for the reason mentioned above, not thread safe.</p>
</li>
</ol>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/22">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/22</link>
        <pubDate>Sat, 30 Jun 2007 06:15:22 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-117509-22</guid>
        <source url="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509.rss">Deriving Accessor Methods From 317</source>
      </item>
      <item>
        <title>Deriving Accessor Methods From 317</title>
        <dc:creator><![CDATA[@Ferty Ferty]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ferty">@Ferty</a> wrote:</p>
          <blockquote>
              <p>Okay I perfected (for the most part) the NPC Screen position methods here they are:</p>
<ul>
<li>
<ul>
<li>Returns the NPC[] Array - *</li>
</ul>
</li>
</ul>
<pre><code class="lang-auto">    public NPC[] getNPCs() {

        return npcArray;

    }  </code></pre>
<ul>
<li>
<ul>
<li>Finds the first instace(not necessarily the nearest) of an NPC with a given Name - *</li>
</ul>
</li>
</ul>
<pre><code class="lang-auto">    public NPC findNPCByName(String name) {

        for (NPC npc : getNPCs()) {

            if (npc == null)

                continue;

            if (npc.desc != null)

                if (npc.desc.name != null &amp;&amp;

                        npc.desc.name.equals(name)){

                    //System.out.println("NPC " + name + " found!");
                    return npc;
                    } 

        }

        return null;

    } </code></pre>
<ul>
<li>
<ul>
<li>Calculates given npc instance’s position on screen, I found that dividing the height by 2 gives coords in just about the exact center of the npc(about belly button height on Aubury who is located behind varrock Bank)  - *</li>
</ul>
</li>
</ul>
<pre><code class="lang-auto">    private void npcScreenPos(NPC npc)
    {
      if(npc != null){
        calcEntityScreenPos(npc.x, npc.height / 2, npc.y);
	System.out.println("NPC " + npc.desc.name + " found at " + spriteDrawX + "," + spriteDrawY);
      }
      else
        System.out.println("Null NPC Exception");
    }</code></pre>
<p>Feel free to edit/optomize where you feel necessary, suggestions welcome <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=6" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>I alos attached a screeshot of the clients outptu after i mapped this:</p>
<pre><code class="lang-auto">npcScreenPos(findNPCByName(inputString.substring(10,inputString.length())));</code></pre>
<p>to the command ::findnpc npc_name</p>
<p>Oh and also IM fairly sure that client.Method46 could be renamed to createNewNPC(); or somthing of the like have a look at it then</p>
<p><a href="http://rafb.net/p/a1jKjj56.html" data-bbcode="true" rel="nofollow noopener">http://rafb.net/p/a1jKjj56.html</a><br>
[br][size=1]Posted on: June 29, 2007, 10:20:37 AM[/size][hr]oh and also, The method you named npcScreenpos is also used for players, it just uses (Entity ent, int i) instead of (int, int, int) which calcEntityScreenPos uses. so maby it should be renamed?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/21">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/21</link>
        <pubDate>Fri, 29 Jun 2007 22:55:13 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-117509-21</guid>
        <source url="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509.rss">Deriving Accessor Methods From 317</source>
      </item>
      <item>
        <title>Deriving Accessor Methods From 317</title>
        <dc:creator><![CDATA[@moparisthebest Moparisthebest]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/moparisthebest">@moparisthebest</a> wrote:</p>
          <blockquote>
              <p>Ah, I see, a better way to do that would be to store the things sent to those methods and add them in Cherokee at the right moment, the engine just needs a little work.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/20">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/20</link>
        <pubDate>Fri, 29 Jun 2007 20:45:43 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-117509-20</guid>
        <source url="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509.rss">Deriving Accessor Methods From 317</source>
      </item>
      <item>
        <title>Deriving Accessor Methods From 317</title>
        <dc:creator><![CDATA[@yakman yakman]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/yakman">@yakman</a> wrote:</p>
          <blockquote>
              <aside class="quote no-group" data-post="18" data-topic="117509">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/user_avatar/forum.moparisthebest.com/moparisthebest/40/30_2.png" class="avatar"> Moparisthebest:</div>
<blockquote>
<p>Come to think about it, we should change that to avoid problems with people creating their own setup classes.  We should save the variable applet in the Cherokee class so that it would work either way because the end user shouldn’t need to worry about the inner workings of the framework.</p>
</blockquote>
</aside>
<p>dont do that ether, heres the reason<br>
do you remember those methods called setFrameTitle, setScriptDir and stuff like that, which you can call from a setup class<br>
when you first call getAppletInstance, the JFrame and ScriptManager arnt made, so if you called those methods you get null pointer exceptions,<br>
the way around it is to count the number of times the applet instance is accessed, the ScriptManager is made on the second time, the frame is made on the fourth</p>
<p>like heres an example of its use</p>
<pre><code class="lang-auto">	public Applet getAppletInstance() {
		appletAccessedCount++;
		if(appletAccessedCount == 2) {
			Cherokee._instance.setScriptDir("..\\Scripts");
		}else
		if(appletAccessedCount == 4) {
			Cherokee._instance.setTitle(" - Some Applet");
		}
		return theApplet;
	}</code></pre>
<p>you could change it so everything is constructed at the beginning, but i kind of like this method, its grown on me  :rolleyes: <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=6" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
<p>edit: i changed my mind and edited it mopar’s way</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/19">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/19</link>
        <pubDate>Fri, 29 Jun 2007 20:41:46 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-117509-19</guid>
        <source url="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509.rss">Deriving Accessor Methods From 317</source>
      </item>
      <item>
        <title>Deriving Accessor Methods From 317</title>
        <dc:creator><![CDATA[@moparisthebest Moparisthebest]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/moparisthebest">@moparisthebest</a> wrote:</p>
          <blockquote>
              <p>Good catch yakman, you save the day once again. <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=6" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>edit:<br>
Come to think about it, we should change that to avoid problems with people creating their own setup classes.  We should save the variable applet in the Cherokee class so that it would work either way because the end user shouldn’t need to worry about the inner workings of the framework.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/18">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/18</link>
        <pubDate>Fri, 29 Jun 2007 20:07:06 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-117509-18</guid>
        <source url="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509.rss">Deriving Accessor Methods From 317</source>
      </item>
      <item>
        <title>Deriving Accessor Methods From 317</title>
        <dc:creator><![CDATA[@yakman yakman]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/yakman">@yakman</a> wrote:</p>
          <blockquote>
              <blockquote>[code]
	public Applet getAppletInstance() {
		return new client(); //make sure the client classes are in your classpath when running cherokee
	}
[/code]</blockquote>
<p>probably better not to do that because cherokee calls that method loads of times, like<br>
panel.add(setup.getAppletInstance(),BorderLayout.CENTER);</p>
<p>setup.getAppletInstance().init();<br>
setup.getAppletInstance().start();</p>
<p>so every time it does something, a whole new client is made<br>
make it so its made in the constructor and just accesses the field<br>
replace that part with this</p>
<pre><code class="lang-auto">	private Applet client;

	public 317Setup() {
		client = new client(); //make sure the client classes are in your classpath when running cherokee
	}

	/**
	 * Returns the applet instance which has not has init() called yet
	 */
	public Applet getAppletInstance() {
		return client;
	}</code></pre>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/17">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/17</link>
        <pubDate>Fri, 29 Jun 2007 18:00:39 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-117509-17</guid>
        <source url="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509.rss">Deriving Accessor Methods From 317</source>
      </item>
      <item>
        <title>Deriving Accessor Methods From 317</title>
        <dc:creator><![CDATA[@moparisthebest Moparisthebest]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/moparisthebest">@moparisthebest</a> wrote:</p>
          <blockquote>
              <p>Ferty asked for a cherokee setup class to use with this, so before I go to bed I will write it here in the reply box:</p>
<pre><code class="lang-auto">package com.cherokee.rs.317;

import com.cherokee.Cherokee;
import com.cherokee.AccessorMethods;
import com.cherokee.securitymanager.AppletSecurityManager;
import com.cherokee.Setup;

import java.applet.Applet;
import java.awt.Dimension;

public class 317Setup implements Setup{

        Applet client;

	/**
	* Loads the jar file and main class
	*/
	public 317Setup() {
             client = new client();
	}

	/**
	 * Returns the applet instance which has not has init() called yet
	 */
	public Applet getAppletInstance() {
		return client; //make sure the client classes are in your classpath when running cherokee
	}

	/**
	 * Returns the size the applet should be
	 */
	public Dimension getAppletDimension() {
		return new Dimension(765,503);
	}

	/**
	 * Returns the accessor methods that scripts use for interacting with the applet
	 */
	public AccessorMethods getAccessorMethods(){
		//return new 317AccessorMethods(); //need to make that class first
                return null;
	}
}</code></pre>
<p>and 317.conf:</p>
<pre><code class="lang-auto">#Cherokee conf file for RuneScape 317.
getCodeBase=http://localhost
getDocumentBase=http://localhost
Setup=com.cherokee.rs.317.317Setup
#below are the applet parameters
nodeid=0
portoff=0
lowmem=1
free=0</code></pre>
<p><a class="mention" href="/u/edit">@edit</a>: yakman caught me</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/16">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/16</link>
        <pubDate>Fri, 29 Jun 2007 10:10:10 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-117509-16</guid>
        <source url="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509.rss">Deriving Accessor Methods From 317</source>
      </item>
      <item>
        <title>Deriving Accessor Methods From 317</title>
        <dc:creator><![CDATA[@Ferty Ferty]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ferty">@Ferty</a> wrote:</p>
          <blockquote>
              <p> make sure theres only like one npc around you<br>
 and your character is stationary<br>
 bcuase this will dump co-ords of anything that extends entity</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/15">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/15</link>
        <pubDate>Fri, 29 Jun 2007 09:26:52 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-117509-15</guid>
        <source url="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509.rss">Deriving Accessor Methods From 317</source>
      </item>
      <item>
        <title>Deriving Accessor Methods From 317</title>
        <dc:creator><![CDATA[@moparisthebest Moparisthebest]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/moparisthebest">@moparisthebest</a> wrote:</p>
          <blockquote>
              <p>Here is a server to test it with, start it with the command ‘java server’</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/14">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/14</link>
        <pubDate>Fri, 29 Jun 2007 08:40:24 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-117509-14</guid>
        <source url="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509.rss">Deriving Accessor Methods From 317</source>
      </item>
      <item>
        <title>Deriving Accessor Methods From 317</title>
        <dc:creator><![CDATA[@Ferty Ferty]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ferty">@Ferty</a> wrote:</p>
          <blockquote>
              <p>Well i got slapped in the face by the client heres our method</p>
<pre><code class="lang-auto">private void calcEntityScreenPos(int i, int j, int l)
    {
        if(i &lt; 128 || l &lt; 128 || i &gt; 13056 || l &gt; 13056)
        {
            spriteDrawX = -1;
            spriteDrawY = -1;
            return;
        }
        int i1 = method42(plane, l, i) - j;
        i -= xCameraPos;
        i1 -= zCameraPos;
        l -= yCameraPos;
        int j1 = Model.modelIntArray1[yCameraCurve];
        int k1 = Model.modelIntArray2[yCameraCurve];
        int l1 = Model.modelIntArray1[xCameraCurve];
        int i2 = Model.modelIntArray2[xCameraCurve];
        int j2 = l * l1 + i * i2 &gt;&gt; 16;
        l = l * i2 - i * l1 &gt;&gt; 16;
        i = j2;
        j2 = i1 * k1 - l * j1 &gt;&gt; 16;
        l = i1 * j1 + l * k1 &gt;&gt; 16;
        i1 = j2;
        if(l &gt;= 50)
        {
            spriteDrawX = Texture.textureInt1 + (i &lt;&lt; 9) / l;
            spriteDrawY = Texture.textureInt2 + (i1 &lt;&lt; 9) / l;
        } else
        {
            spriteDrawX = -1;
            spriteDrawY = -1;
        }
    }</code></pre>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/13">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/13</link>
        <pubDate>Fri, 29 Jun 2007 06:52:38 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-117509-13</guid>
        <source url="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509.rss">Deriving Accessor Methods From 317</source>
      </item>
      <item>
        <title>Deriving Accessor Methods From 317</title>
        <dc:creator><![CDATA[@moparisthebest Moparisthebest]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/moparisthebest">@moparisthebest</a> wrote:</p>
          <blockquote>
              <p>What are you trying to connect to? It should connect to any server that is running on localhost (unless you edit it)</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/12">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/12</link>
        <pubDate>Fri, 29 Jun 2007 06:31:58 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-117509-12</guid>
        <source url="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509.rss">Deriving Accessor Methods From 317</source>
      </item>
      <item>
        <title>Deriving Accessor Methods From 317</title>
        <dc:creator><![CDATA[@Ferty Ferty]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ferty">@Ferty</a> wrote:</p>
          <blockquote>
              <p>I edited theese methods so you can insert them right into your renamed client (I snatched the Tile.java from aryan)</p>
<pre><code class="lang-auto">    private Tile worldToScreen(int x, int y, int height)
    {
        int something;
        something = unknownTileCalculation(x, y) - height;
        x -= xCameraPos;
        y -= yCameraPos;
        something -= zCameraPos;
        int j1 = getModelIntArray1(yCameraCurve);
        int k1 = getModelIntArray2(yCameraCurve);
        int l1 = getModelIntArray1(xCameraCurve);
        int i2 = getModelIntArray2(xCameraCurve);
        int j2 = y * l1 + x * i2 &gt;&gt; 16;
        y = y * i2 - x * l1 &gt;&gt; 16;
        x = j2;
        j2 = something * k1 - y * j1 &gt;&gt; 16;
        y = something * j1 + y * k1 &gt;&gt; 16;
        something = j2;
        if(y &gt;= 50)
            return new Tile(getTextureInt1() + (x &lt;&lt; 9) / y, getTextureInt2() + (something &lt;&lt; 9) / y);
        return null;
    }  </code></pre>
<pre><code class="lang-auto">    private int unknownTileCalculation(int x, int y)
    {
	int smallX = x &gt;&gt; 7;
        int smallY = y &gt;&gt; 7;
        int tmp = plane;
        if(tmp &lt; 3 &amp;&amp; (byteGroundArray[1][smallX][smallY] &amp; 2) == 2)
            tmp++;
        int x2 = x &amp; 0x7f;
        int y2 = y &amp; 0x7f;
        int tmp1 = intGroundArray[tmp][smallX][smallY] * (128 - x2) + intGroundArray[tmp][smallX + 1][smallY] * x2 &gt;&gt; 7;
        int tmp2 = intGroundArray[tmp][smallX][smallY + 1] * (128 - x2) + intGroundArray[tmp][smallX + 1][smallY + 1] * x2 &gt;&gt; 7;
        return tmp1 * (128 - y2) + tmp2 * y2 &gt;&gt; 7;
    }</code></pre>
<pre><code class="lang-auto">    public int getModelIntArray1(int val)

    {

        return Model.modelIntArray1[val];

    }



    public int getModelIntArray2(int val)

    {

        return Model.modelIntArray2[val];

    }
    
    public int getTextureInt1()

    {

        return Texture.textureInt1;

    }



    public int getTextureInt2()

    {

        return Texture.textureInt2;

    }</code></pre>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/11">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509/11</link>
        <pubDate>Fri, 29 Jun 2007 05:49:40 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-117509-11</guid>
        <source url="https://forum.moparisthebest.com/t/deriving-accessor-methods-from-317/117509.rss">Deriving Accessor Methods From 317</source>
      </item>
  </channel>
</rss>
