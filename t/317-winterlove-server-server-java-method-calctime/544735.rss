<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>317 winterLove server: (Server.java) - Method &quot;calcTime&quot;</title>
    <link>https://forum.moparisthebest.com/t/317-winterlove-server-server-java-method-calctime/544735</link>
    <description>Hello! I got a 317 winterLove-project that I am currently working on,
and the most of the work goes to understanding the code.
And by that, I mean understanding the RSPS-logic in the Java-code.

In my Server.java-file, the server&#39;s main-class got a method called &quot;calcTime&quot; wich looks like this:
[code]
public static void calcTime()	{
    long curTime = System.currentTimeMillis();
    updateSeconds = 180 - ((int)(curTime - startTime) / 1000);
    
    if (updateSeconds == 0)	{
        shutDownServer = true;
    }
}
[/code]

I assume this method is connected to the updating-cycle somehow, but what is it&#39;s purpose, and how does it work?
It&#39;s used once in the class, and that&#39;s inside an if-statement like so:
[code]
if (updateServer == true)	{
    calcTime();
}
[/code]

I appreciate any help! :)</description>
    
    <lastBuildDate>Thu, 10 Jul 2014 02:54:48 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/317-winterlove-server-server-java-method-calctime/544735.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>317 winterLove server: (Server.java) - Method &quot;calcTime&quot;</title>
        <dc:creator><![CDATA[@matzie matzie]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/matzie">@matzie</a> wrote:</p>
          <blockquote>
              <p>[quote=“Ole Kristian, post:5, topic:544735”][quote]<br>
If you mean server update, then yes.<br>
[/quote]</p>
<p>Is server update the same as system update, as where all the players are getting the yellow test “System update in: xx”?[/quote]<br>
My bad. i forgot that it was actually called “System update” lol.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-winterlove-server-server-java-method-calctime/544735/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-winterlove-server-server-java-method-calctime/544735/7</link>
        <pubDate>Thu, 10 Jul 2014 02:54:48 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-544735-7</guid>
        <source url="https://forum.moparisthebest.com/t/317-winterlove-server-server-java-method-calctime/544735.rss">317 winterLove server: (Server.java) - Method &quot;calcTime&quot;</source>
      </item>
      <item>
        <title>317 winterLove server: (Server.java) - Method &quot;calcTime&quot;</title>
        <dc:creator><![CDATA[@RandQm RandQm]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/randqm">@RandQm</a> wrote:</p>
          <blockquote>
              <p>[quote=“Ole Kristian, post:5, topic:544735”][quote]<br>
If you mean server update, then yes.<br>
[/quote]</p>
<p>Is server update the same as system update, as where all the players are getting the yellow test “System update in: xx”?[/quote]</p>
<p>Yes, system update is the name of the packet that gets sent to the player clients that shows the “System update in: xx”</p>
<p><code>        str.createFrame(114);
        str.writeWordBigEndian(updateSeconds * 50 / 30);</code><br>
<img src="http://i62.tinypic.com/xodrbn.png" alt width="" height=""><br>
<a href="http://rsps.wikia.com/wiki/317_Protocol" class="onebox" target="_blank" rel="nofollow noopener">http://rsps.wikia.com/wiki/317_Protocol</a></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-winterlove-server-server-java-method-calctime/544735/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-winterlove-server-server-java-method-calctime/544735/6</link>
        <pubDate>Wed, 09 Jul 2014 15:54:31 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-544735-6</guid>
        <source url="https://forum.moparisthebest.com/t/317-winterlove-server-server-java-method-calctime/544735.rss">317 winterLove server: (Server.java) - Method &quot;calcTime&quot;</source>
      </item>
      <item>
        <title>317 winterLove server: (Server.java) - Method &quot;calcTime&quot;</title>
        <dc:creator><![CDATA[@Ole_Kristian Ole Kristian]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ole_kristian">@Ole_Kristian</a> wrote:</p>
          <blockquote>
              <blockquote>If you mean server update, then yes.</blockquote>
<p>Is server update the same as system update, as where all the players are getting the yellow test “System update in: xx”?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-winterlove-server-server-java-method-calctime/544735/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-winterlove-server-server-java-method-calctime/544735/5</link>
        <pubDate>Wed, 09 Jul 2014 09:10:09 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-544735-5</guid>
        <source url="https://forum.moparisthebest.com/t/317-winterlove-server-server-java-method-calctime/544735.rss">317 winterLove server: (Server.java) - Method &quot;calcTime&quot;</source>
      </item>
      <item>
        <title>317 winterLove server: (Server.java) - Method &quot;calcTime&quot;</title>
        <dc:creator><![CDATA[@matzie matzie]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/matzie">@matzie</a> wrote:</p>
          <blockquote>
              <p>If you mean server update, then yes.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-winterlove-server-server-java-method-calctime/544735/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-winterlove-server-server-java-method-calctime/544735/4</link>
        <pubDate>Tue, 08 Jul 2014 16:28:20 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-544735-4</guid>
        <source url="https://forum.moparisthebest.com/t/317-winterlove-server-server-java-method-calctime/544735.rss">317 winterLove server: (Server.java) - Method &quot;calcTime&quot;</source>
      </item>
      <item>
        <title>317 winterLove server: (Server.java) - Method &quot;calcTime&quot;</title>
        <dc:creator><![CDATA[@Ole_Kristian Ole Kristian]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ole_kristian">@Ole_Kristian</a> wrote:</p>
          <blockquote>
              <blockquote>If you'd take a look in your playerhandler under (i think updatePlayer) you might see something like this:
<pre><code class="lang-auto">if (updateRunning)
str.createFrame(#);
str.writeSomething(Server.udateSeconds);</code></pre>
<p>If you do I’m pretty sure it’s the system update <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
</blockquote>
<p>Bingo! I looked in my PlayerHandler-class and I found this part of code:</p>
<pre><code class="lang-auto">public void updatePlayer(Player plr, stream str)	{
    updateBlock.currentOffset = 0;
    
    if (updateRunning &amp;&amp; updateAnnounced == false)	{
        str.createFrame(114);
        str.writeWordBigEndian(updateSeconds * 50 / 30);
    }
    
    ...</code></pre>
<p>(This is the top of my “updatePlayer”-method).</p>
<p>Does this mean that Server.class’ “clacTime”-method is about the system update and not the cycle-update? <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-winterlove-server-server-java-method-calctime/544735/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-winterlove-server-server-java-method-calctime/544735/3</link>
        <pubDate>Tue, 08 Jul 2014 13:40:30 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-544735-3</guid>
        <source url="https://forum.moparisthebest.com/t/317-winterlove-server-server-java-method-calctime/544735.rss">317 winterLove server: (Server.java) - Method &quot;calcTime&quot;</source>
      </item>
      <item>
        <title>317 winterLove server: (Server.java) - Method &quot;calcTime&quot;</title>
        <dc:creator><![CDATA[@RandQm RandQm]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/randqm">@RandQm</a> wrote:</p>
          <blockquote>
              <p>I’m not sure as it’s been to long since I worked with WL but,<br>
I bet that’s the system update. You know when you see "System Update in …"<br>
When the system update is requested (probably via a command) the updateseconds will be set, and in this method they are being updated.</p>
<p>If you’d take a look in your playerhandler under (i think updatePlayer) you might see something like this:</p>
<p><code>if (updateRunning)
str.createFrame(#);
str.writeSomething(Server.udateSeconds);</code><br>
If you do I’m pretty sure it’s the system update <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-winterlove-server-server-java-method-calctime/544735/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-winterlove-server-server-java-method-calctime/544735/2</link>
        <pubDate>Tue, 08 Jul 2014 01:03:07 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-544735-2</guid>
        <source url="https://forum.moparisthebest.com/t/317-winterlove-server-server-java-method-calctime/544735.rss">317 winterLove server: (Server.java) - Method &quot;calcTime&quot;</source>
      </item>
      <item>
        <title>317 winterLove server: (Server.java) - Method &quot;calcTime&quot;</title>
        <dc:creator><![CDATA[@Ole_Kristian Ole Kristian]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ole_kristian">@Ole_Kristian</a> wrote:</p>
          <blockquote>
              <p>Hello! I got a 317 winterLove-project that I am currently working on,<br>
and the most of the work goes to understanding the code.<br>
And by that, I mean understanding the RSPS-logic in the Java-code.</p>
<p>In my Server.java-file, the server’s main-class got a method called “calcTime” wich looks like this:</p>
<pre><code class="lang-auto">public static void calcTime()	{
    long curTime = System.currentTimeMillis();
    updateSeconds = 180 - ((int)(curTime - startTime) / 1000);
    
    if (updateSeconds == 0)	{
        shutDownServer = true;
    }
}</code></pre>
<p>I assume this method is connected to the updating-cycle somehow, but what is it’s purpose, and how does it work?<br>
It’s used once in the class, and that’s inside an if-statement like so:</p>
<pre><code class="lang-auto">if (updateServer == true)	{
    calcTime();
}</code></pre>
<p>I appreciate any help! <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-winterlove-server-server-java-method-calctime/544735/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-winterlove-server-server-java-method-calctime/544735/1</link>
        <pubDate>Tue, 08 Jul 2014 00:37:11 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-544735-1</guid>
        <source url="https://forum.moparisthebest.com/t/317-winterlove-server-server-java-method-calctime/544735.rss">317 winterLove server: (Server.java) - Method &quot;calcTime&quot;</source>
      </item>
  </channel>
</rss>
