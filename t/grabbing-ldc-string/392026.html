<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/grabbing-ldc-string/392026 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Aug 2019 02:23:31 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Grabbing LDC String - Runescape - moparisthebest.com</title>
    <meta name="description" content="I&amp;#39;ve come across a problem that I could not solve.  What I was aiming at doing was making something to grab LDC Strings and dump them into a file.  I&amp;#39;ve got that all to work, but I have to access the constant pool to get&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="392026.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Grabbing LDC String&#39;" href="392026.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/grabbing-ldc-string/392026" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/grabbing-ldc-string/392026" />
<meta property="og:title" content="Grabbing LDC String" />
<meta name="twitter:title" content="Grabbing LDC String" />
<meta property="og:description" content="I’ve come across a problem that I could not solve.  What I was aiming at doing was making something to grab LDC Strings and dump them into a file.  I’ve got that all to work, but I have to access the constant pool to get the LDC string.  What I want to do is get the information without accessing the constant pool.  Since we are on the subject, how come nsn1, nsn2, gpos, etc don’t show up in the Constant pool?  They didn’t for me at least.  ^.^;  Here’s the code I am using at the moment :    pack..." />
<meta name="twitter:description" content="I’ve come across a problem that I could not solve.  What I was aiming at doing was making something to grab LDC Strings and dump them into a file.  I’ve got that all to work, but I have to access the constant pool to get the LDC string.  What I want to do is get the information without accessing the constant pool.  Since we are on the subject, how come nsn1, nsn2, gpos, etc don’t show up in the Constant pool?  They didn’t for me at least.  ^.^;  Here’s the code I am using at the moment :    pack..." />
<meta property="article:published_time" content="2011-04-22T05:59:34+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="392026.html">Grabbing LDC String</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/packersfa52.html'><span itemprop='name'>packersfa52</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-22T05:59:34Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:22:19Z' class='post-time'>
              August 1, 2016, 11:22am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I’ve come across a problem that I could not solve.  What I was aiming at doing was making something to grab LDC Strings and dump them into a file.  I’ve got that all to work, but I have to access the constant pool to get the LDC string.  What I want to do is get the information without accessing the constant pool.</p>
<p>Since we are on the subject, how come nsn1, nsn2, gpos, etc don’t show up in the Constant pool?  They didn’t for me at least.  ^.^;</p>
<p>Here’s the code I am using at the moment :</p>
<pre><code class="lang-auto">

package Updater.Updater;
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileWriter;
import java.util.Iterator;

import org.apache.bcel.Constants;
import org.apache.bcel.classfile.ConstantPool;
import org.apache.bcel.classfile.Method;
import org.apache.bcel.generic.ClassGen;
import org.apache.bcel.generic.Instruction;
import org.apache.bcel.generic.InstructionHandle;
import org.apache.bcel.generic.InstructionList;
import org.apache.bcel.generic.LoadInstruction;
import org.apache.bcel.generic.MethodGen;
import org.apache.bcel.util.InstructionFinder;

import com.rshacking.rhf.files.ClassContainer;
import com.rshacking.rhf.files.JarContainer;
public class ldcFinder {

	public ldcFinder() {
		try{
			FileWriter fstream = new FileWriter("ldc.txt");
			BufferedWriter out = new BufferedWriter(fstream);
			JarContainer jc = new JarContainer(new File("rs_injected-645.jar"));
			for (ClassContainer cc : jc.getClassFiles().values()) {
				ClassGen cg = new ClassGen(cc.getBCEL());
				for(Method m : cg.getMethods()) {
					MethodGen mg = new MethodGen(m,cg.getClassName(),cg.getConstantPool());
					if(!m.isInterface()) {
						if(!m.isNative()) {
							if(!m.isAbstract()) {
								if(m.getCode().getCode() != null) {
									InstructionFinder finder = new InstructionFinder(new InstructionList(m.getCode().getCode()));
									for (Iterator&lt;InstructionHandle[]&gt; it = finder.search("ldc"); it.hasNext();) {
										InstructionHandle[] ih = it.next();
										Instruction instruction = ih[0].getInstruction();
										out.write("\n"+cg.getClassName() + "." + mg.getName() + " String :" + cg.getConstantPool().getConstant(Constants.LDC).toString());
									}
								}
							}
						}
					}
				}
			}
			out.close();
		} catch (Exception e){
			System.err.println("Error: " + e.getMessage());
		}
	}

	public static void main(String[] args) {
		new ldcFinder();
	}
}
</code></pre>
<p>It does return a full file of every ldc used and it is a pretty massive file.</p>
<p>Sorry if this seems like a rudimentary question, I’m still a little new to bcel in general.</p>
      </div>

      <meta itemprop='headline' content='Grabbing LDC String'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Pwnd.html'><span itemprop='name'>Pwnd</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-22T07:36:33Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:22:21Z' class='post-time'>
              August 1, 2016, 11:22am
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>if (!m.isNative() &amp;&amp; !m.interface() &amp;&amp; …</p>
<p>^Just sayin’.</p>
<p>And I think that’s just how BCEL works…  Dunno, been way too long.</p>
      </div>

      <meta itemprop='headline' content='Grabbing LDC String'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/frank.html'><span itemprop='name'>frank</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-22T08:16:17Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:22:22Z' class='post-time'>
              August 1, 2016, 11:22am
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>you are probably better off iterating the constantpool</p>
      </div>

      <meta itemprop='headline' content='Grabbing LDC String'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Speljohan.html'><span itemprop='name'>Speljohan</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-22T08:39:40Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:22:22Z' class='post-time'>
              August 1, 2016, 11:22am
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“packersfa52, post:1, topic:392026”]Since we are on the subject, how come nsn1, nsn2, gpos, etc don’t show up in the Constant pool?  They didn’t for me at least.  ^.^;[/quote]UTF8-entries, not String-entries.</p>
      </div>

      <meta itemprop='headline' content='Grabbing LDC String'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/frank.html'><span itemprop='name'>frank</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-22T09:02:05Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:22:22Z' class='post-time'>
              August 1, 2016, 11:22am
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>that, or they are part of larger strings</p>
      </div>

      <meta itemprop='headline' content='Grabbing LDC String'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/packersfa52.html'><span itemprop='name'>packersfa52</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-22T13:08:08Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:22:35Z' class='post-time'>
              August 1, 2016, 11:22am
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Thank you every body.  I’ll look into your solutions/answers once I get back from work.</p>
      </div>

      <meta itemprop='headline' content='Grabbing LDC String'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Jython.html'><span itemprop='name'>Jython</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-22T23:10:02Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:23:13Z' class='post-time'>
              August 1, 2016, 11:23am
            </time>
        <span itemprop='position'>#7</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>the constant pool is as stated a symbol table. each “item” is a symbol entry which contain different types of data, and instructions reference these items through “constant pool indices” or rather symbol pointers. a better solution is to just search these tables for strings (CONSTANT_String structure in JVM Spec) and dump the data. the only way to access this data is logically resolving these symbol pointers through the symbol table itself, so you’re out of luck for another solution.</p>
      </div>

      <meta itemprop='headline' content='Grabbing LDC String'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/packersfa52.html'><span itemprop='name'>packersfa52</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-22T23:41:50Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:23:15Z' class='post-time'>
              August 1, 2016, 11:23am
            </time>
        <span itemprop='position'>#8</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote quote-modified" data-post="7" data-topic="392026">
<div class="title">
<div class="quote-controls"></div>
 super_:</div>
<blockquote>
<p>the constant pool is as stated a symbol table. each “item” is a symbol entry which contain different types of data, and instructions reference these items through “constant pool indices” or rather symbol pointers. a better solution is to just search these tables for strings (CONSTANT_String structure in JVM Spec) and dump the data. the only way to access this data is logically resolving these symbol pointers through the symbol table itself, so you’re out of luck for another solution.</p>
</blockquote>
</aside>
<p>Thank you for the advice.  I probably won’t continue this project then :P.</p>
      </div>

      <meta itemprop='headline' content='Grabbing LDC String'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/the_bank.html'><span itemprop='name'>the_bank</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-22T23:44:19Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:23:15Z' class='post-time'>
              August 1, 2016, 11:23am
            </time>
        <span itemprop='position'>#9</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>What was the point?</p>
      </div>

      <meta itemprop='headline' content='Grabbing LDC String'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Jython.html'><span itemprop='name'>Jython</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-23T00:53:40Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:23:18Z' class='post-time'>
              August 1, 2016, 11:23am
            </time>
        <span itemprop='position'>#10</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>sorry, didn’t even read the first post. the error in your code here is you’re using Constants.LDC as a symbol pointer when its the opcode of the LDC instruction. instead you want LDC.getIndex()</p>
      </div>

      <meta itemprop='headline' content='Grabbing LDC String'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/SpeedIsMeh.html'><span itemprop='name'>SpeedIsMeh</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-05-26T14:14:50Z'>
            <time itemprop='dateModified' datetime='2016-08-01T12:01:24Z' class='post-time'>
              August 1, 2016, 12:01pm
            </time>
        <span itemprop='position'>#11</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <pre><code class="lang-auto">
import java.io.FileWriter;
import java.io.PrintWriter;
import java.util.Enumeration;
import java.util.jar.JarEntry;
import java.util.jar.JarFile;

import org.apache.bcel.classfile.ClassParser;
import org.apache.bcel.classfile.Constant;
import org.apache.bcel.classfile.ConstantString;
import org.apache.bcel.generic.ClassGen;
import org.apache.bcel.generic.ConstantPoolGen;

public class StringFinder {
	public static void main(String[] args) {
		new StringFinder(args[0]);
	}

	public StringFinder(final String file_name) {
		try {
			JarFile f = new JarFile(file_name);
			Enumeration&lt;JarEntry&gt; entries = f.entries();
			PrintWriter out = new PrintWriter(new FileWriter("log.txt"));
			out.println("Searching constant pool for strings in jar file: "
					+ f.getName());

			while (entries.hasMoreElements()) {
				JarEntry entry = entries.nextElement();
				if (entry.getName().contains(".class")) {
					ClassParser cp = new ClassParser(f.getInputStream(entry),
							entry.getName().replace(".class", ""));
					ClassGen cg = new ClassGen(cp.parse());

					out.println(entry.getName());

					ConstantPoolGen cpg = cg.getConstantPool();
					for (Constant c : cpg.getConstantPool().getConstantPool()) {
						if (c instanceof ConstantString) {
							out.println(((ConstantString) c)
									.getConstantValue(cpg.getConstantPool()));
						}
					}

				}
			}
			out.close();

		} catch (Exception e) {
			e.printStackTrace();
		}
	}
}</code></pre>
      </div>

      <meta itemprop='headline' content='Grabbing LDC String'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Jython.html'><span itemprop='name'>Jython</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-05-30T14:09:43Z'>
            <time itemprop='dateModified' datetime='2016-08-01T12:06:04Z' class='post-time'>
              August 1, 2016, 12:06pm
            </time>
        <span itemprop='position'>#12</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“SpeedIsMeh, post:11, topic:392026”][code]</p>
<p>import java.io.FileWriter;<br>
import java.io.PrintWriter;<br>
import java.util.Enumeration;<br>
import java.util.jar.JarEntry;<br>
import java.util.jar.JarFile;</p>
<p>import org.apache.bcel.classfile.ClassParser;<br>
import org.apache.bcel.classfile.Constant;<br>
import org.apache.bcel.classfile.ConstantString;<br>
import org.apache.bcel.generic.ClassGen;<br>
import org.apache.bcel.generic.ConstantPoolGen;</p>
<p>public class StringFinder {<br>
public static void main(String[] args) {<br>
new StringFinder(args[0]);<br>
}</p>
<pre><code>public StringFinder(final String file_name) {
	try {
		JarFile f = new JarFile(file_name);
		Enumeration&lt;JarEntry&gt; entries = f.entries();
		PrintWriter out = new PrintWriter(new FileWriter("log.txt"));
		out.println("Searching constant pool for strings in jar file: "
				+ f.getName());

		while (entries.hasMoreElements()) {
			JarEntry entry = entries.nextElement();
			if (entry.getName().contains(".class")) {
				ClassParser cp = new ClassParser(f.getInputStream(entry),
						entry.getName().replace(".class", ""));
				ClassGen cg = new ClassGen(cp.parse());

				out.println(entry.getName());

				ConstantPoolGen cpg = cg.getConstantPool();
				for (Constant c : cpg.getConstantPool().getConstantPool()) {
					if (c instanceof ConstantString) {
						out.println(((ConstantString) c)
								.getConstantValue(cpg.getConstantPool()));
					}
				}

			}
		}
		out.close();

	} catch (Exception e) {
		e.printStackTrace();
	}
}
</code></pre>
<p>}<br>
[/code][/quote]<br>
…why?</p>
      </div>

      <meta itemprop='headline' content='Grabbing LDC String'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/SpeedIsMeh.html'><span itemprop='name'>SpeedIsMeh</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-05-30T23:11:56Z'>
            <time itemprop='dateModified' datetime='2016-08-01T12:06:35Z' class='post-time'>
              August 1, 2016, 12:06pm
            </time>
        <span itemprop='position'>#13</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“super_, post:12, topic:392026”][quote author=SpeedIsMeh link=topic=489190.msg3609361#msg3609361 date=1306419290]</p>
<pre><code class="lang-auto">
import java.io.FileWriter;
import java.io.PrintWriter;
import java.util.Enumeration;
import java.util.jar.JarEntry;
import java.util.jar.JarFile;

import org.apache.bcel.classfile.ClassParser;
import org.apache.bcel.classfile.Constant;
import org.apache.bcel.classfile.ConstantString;
import org.apache.bcel.generic.ClassGen;
import org.apache.bcel.generic.ConstantPoolGen;

public class StringFinder {
	public static void main(String[] args) {
		new StringFinder(args[0]);
	}

	public StringFinder(final String file_name) {
		try {
			JarFile f = new JarFile(file_name);
			Enumeration&lt;JarEntry&gt; entries = f.entries();
			PrintWriter out = new PrintWriter(new FileWriter("log.txt"));
			out.println("Searching constant pool for strings in jar file: "
					+ f.getName());

			while (entries.hasMoreElements()) {
				JarEntry entry = entries.nextElement();
				if (entry.getName().contains(".class")) {
					ClassParser cp = new ClassParser(f.getInputStream(entry),
							entry.getName().replace(".class", ""));
					ClassGen cg = new ClassGen(cp.parse());

					out.println(entry.getName());

					ConstantPoolGen cpg = cg.getConstantPool();
					for (Constant c : cpg.getConstantPool().getConstantPool()) {
						if (c instanceof ConstantString) {
							out.println(((ConstantString) c)
									.getConstantValue(cpg.getConstantPool()));
						}
					}

				}
			}
			out.close();

		} catch (Exception e) {
			e.printStackTrace();
		}
	}
}</code></pre>
<p>[/quote]<br>
…why?[/quote]</p>
<aside class="quote" data-post="3" data-topic="392026">
<div class="title">
<div class="quote-controls"></div>
 frank_:</div>
<blockquote>
<p>you are probably better off iterating the constantpool</p>
</blockquote>
</aside>
<p>I was showing how to do that.</p>
      </div>

      <meta itemprop='headline' content='Grabbing LDC String'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/grabbing-ldc-string/392026 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Aug 2019 02:23:32 GMT -->
</html>
