<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>New Chat Server!</title>
    <link>https://forum.moparisthebest.com/t/new-chat-server/361381</link>
    <description>[center][size=20pt]Chat Server v4
By Davidi2[/size][/center]
[u][b]Current Features:[/b][/u]

[ul][li]Connect[/li]
[li]Chatting[/li]
[li]Simple GUI[/li]
[li]Nick Changing[/li]
[li]Color Coding[/li]
[li]User List + Updating[/li]
[li]Ban[/li]
[li]Warn (Progressive, two warnings, then incremental mute times)[/li]
[li]5 lines, 5 seconds timer; if you go past it calls the warn method (see above)[/li]
[li]Nick Registration &amp; Login[/li]
[li]Private Messaging[/li]
[li]Kick[/li]
[li]Promote/Demote[/li][/ul]

[u][b]Features to Come:[/b][/u]

[ul][li]Other Commands[/li]
[li]URL highlighting[/li]
[li]Nick highlighting[/li][/ul]


This works on the same principles as a RSPS, as it hosts a server at your IP (and a port of your choosing), and allows my client to connect to it from anywhere with internet access.

[u][b]Credits:[/b][/u]

[ul][li]Java Is My Bitch - Picture models :P[/li]
[li]Beta Testers - Helping me find bugs; giving ideas[/li]
[li]Davidi2 - Writing all of it[/li][/ul]

To test it for yourself: [url=http://76.104.173.251/chatclient]My hosted chat server[/url]
[img]http://img819.imageshack.us/img819/351/85493117.png[/img]
[img]http://img4.imageshack.us/img4/6308/96539221.png[/img]
[img]http://img517.imageshack.us/img517/5909/94082036.png[/img]

Classes:
http://pastebin.com/WXC9i1PK - ChatServer.java (main handling)
http://pastebin.com/WzHZJyu2 - UserSocket.java (Server-client IO here)
http://pastebin.com/UN2CAavg - NickManager &amp; DataManager.java (scroll down for nickmanager; handles files, handles nicks)
http://pastebin.com/Zuu2fjbV - ConnectionManager &amp; StartUp.java (scroll down for startup; handles sockets, driver class)

User.java
[code=java]import java.net.*;
import java.io.*;
import java.awt.*;

public class User extends Thread {

public boolean reading = true;
public int userID;
public UserSocket rwSocket;
public PrintWriter print;
public Socket socket;
public String username = getUsername();
public ChatServer cs;
public int rights = 0;
public boolean spamTimerStarted = false;
public int numMessages;
public long timeCounter = System.currentTimeMillis();
public int warnLevel; 
public long muteTimer = 0;
boolean real = false;
public long mutedAt;

	public User(Socket socket, int id, ChatServer cs) {
 	       this.rwSocket = new UserSocket(this, socket);
	       this.userID = id;
	       this.print = new PrintWriter(rwSocket.output, false);
	       this.start();
	       this.socket = socket;
	       this.cs = cs;
		rwSocket.writePacketID(6);
		rwSocket.writeString(username);
	}

	public void destruct() {
		cs.destroy(this);
    	}

	public void stopSpamTimer() {
		numMessages = 0;
		timeCounter = 0;
		spamTimerStarted = false;
	}

	public void startSpamTimer() {
		numMessages = 0;
		timeCounter = System.currentTimeMillis();
		spamTimerStarted = true;
	}

	public void warn() {
		warnLevel++;
		if(warnLevel &gt;  6) {
			warnLevel = 6;
		}
		switch(warnLevel) {
			case 1:
				cs.outputAllLine(username + &quot; has been given a warning for spamming.&quot;, Color.green.darker());
			break;
			case 2:
				cs.outputAllLine(username + &quot; has been given a warning for spamming.&quot;, Color.orange);
			break;
			case 3:
				cs.outputAllLine(username + &quot; has been muted (30 seconds) for spamming.&quot;, Color.red);
				muteTimer = 30000;
			break;
			case 4:
				cs.outputAllLine(username + &quot; has been muted (60 seconds) for spamming.&quot;, Color.red);
				muteTimer = 60000;
			break;
			case 5:
				cs.outputAllLine(username + &quot; has been muted (5 minutes) for spamming.&quot;, Color.red);
				muteTimer = 300000;
			break;
			case 6:
				cs.outputAllLine(username + &quot; has been muted (10 minutes) for spamming.&quot;, Color.red);
				muteTimer = 600000;
			break;
		}
		if(muteTimer &gt; 0) {
			mutedAt = System.currentTimeMillis();
		}
	}

	public void warnP(User u2, String reason) {
		warnLevel++;
		if(warnLevel &gt;  6) {
			warnLevel = 6;
		}
		switch(warnLevel) {
			case 1:
				cs.outputAllLine(username + &quot; has been given a warning (1) by &quot; + u2.username + &quot;. Reason: &quot; + reason, Color.green.darker());
			break;
			case 2:
				cs.outputAllLine(username + &quot; has been given a warning (2) by &quot; + u2.username + &quot;. Reason: &quot; + reason, Color.orange);
			break;
			case 3:
				cs.outputAllLine(username + &quot; has been muted (30 seconds) by &quot; + u2.username + &quot;. Reason: &quot; + reason, Color.red);
				muteTimer = 30000;
			break;
			case 4:
				cs.outputAllLine(username + &quot; has been muted (60 seconds) by &quot; + u2.username + &quot;. Reason: &quot; + reason, Color.red);
				muteTimer = 60000;
			break;
			case 5:
				cs.outputAllLine(username + &quot; has been muted (5 minutes) by &quot; + u2.username + &quot;. Reason: &quot; + reason, Color.red);
				muteTimer = 300000;
			break;
			case 6:
				cs.outputAllLine(username + &quot; has been muted (10 minutes) by &quot; + u2.username + &quot;. Reason: &quot; + reason, Color.red);
				muteTimer = 600000;
			break;
		}
		if(muteTimer &gt; 0) {
			mutedAt = System.currentTimeMillis();
		}
	}

	public void run() {
		while (reading) {
			try {
				rwSocket.readAllBytes();
				if(rwSocket.readByteQueue.size() &gt; 3) {
						rwSocket.parseInput();
				}
				rwSocket.writeAllBytes();
				Thread.sleep(300);
			}
			catch (Exception e) { //Probably dc&#39;d. Caught successfully
				e.printStackTrace();
			}
			if(spamTimerStarted &amp;&amp; (System.currentTimeMillis() - timeCounter &gt;= 5000)) {
				numMessages = 0;
				spamTimerStarted = false;
				timeCounter = System.currentTimeMillis();
			}
			if(muteTimer &gt; 0) {
				muteTimer -= System.currentTimeMillis() - mutedAt;
				mutedAt = System.currentTimeMillis();
			}
		}
	}

	public void chatOutputLine(String message, Color c) {
		rwSocket.writePacketID(1);
		rwSocket.writeInt(c.getRGB());
		rwSocket.writeString(&quot;\n&quot; + message);
	}

	public void chatOutput(String message, Color c) {
		rwSocket.writePacketID(1);
		rwSocket.writeInt(c.getRGB());
		rwSocket.writeString(message);
	}
	public Color getColor() {
		Color color = Color.black;
		switch (rights) {
			case 1:
				color = Color.blue;
			break;
			case 2:
				color = Color.orange.darker();
			break;
		}
		return color;
	}
	public String getUsername() { 
		boolean found = false;
		String allUsernames = &quot;&quot;;
		int random = (int) (Math.random() * (20000));
		if(random &lt; 10000) {
			random += 10000;
		}
		while(!(found)) {
			for (User u : ChatServer.users) {
				if(u != null) {
					allUsernames += u.username;
				}
			}
			if(!(allUsernames.contains(Integer.toString(random)))) {
				found = true;
			}
			else {
				random++;
			}
		}
		return (&quot;User&quot; + random);
	}

}
[/code]

Commands.java
[code=java]import java.awt.Color;

public class Commands {
	
	static ChatServer cs = StartUp.ChatServer;

	public static void doCommand(String input, User u) {
		String[] parts = input.split(&quot; &quot;);
		if(parts[0].equals(&quot;me&quot;)) {
			String emote;
			try {
				emote = input.substring(input.indexOf(parts[0])+parts[0].length()+1);
			} catch(Exception e) {
				return;
			}
			cs.outputAllLine(&quot;* &quot; + u.username + &quot; &quot; + emote, Color.pink);
			
		}
		else if(parts[0].equals(&quot;register&quot;)) {
			String pass1=&quot;password&quot;;
			String pass2=&quot;password2&quot;;
			try {
				pass1 = parts[1];
				pass2 = parts[2];
			} catch(Exception e) {
				u.chatOutputLine(&quot;Command format: /register password confirmpass&quot;, Color.red);
				return;
			}
			if(pass1.equals(pass2)) {
				cs.nickManager.register(u, pass1);
			} else {
				u.chatOutputLine(&quot;The passwords do not match.&quot;, Color.red);
			}	
		}
		else if(parts[0].equals(&quot;login&quot;)) {
			String nick=&quot;&quot;;
			String pass=&quot;password&quot;;
			try {
				nick = parts[1];
				pass = parts[2];
			} catch(Exception e) {
				u.chatOutputLine(&quot;Command format: /login name pass&quot;, Color.red);
				return;
			}
			cs.nickManager.login(u, nick, pass);	
		}
		else if(parts[0].equals(&quot;pm&quot;)) {
			User user2 = null;
			String message = null;
			try {
				user2 = cs.getUserByName(parts[1]);
				message = input.substring(input.indexOf(parts[1])+parts[1].length()+1);
			} catch(Exception e) {
				u.chatOutputLine(&quot;Command format: /pm nick message&quot;, Color.red);
				return;
			}
			if(user2 != null) {
				u.chatOutputLine(&quot;To &quot; + user2.username + &quot;: &quot; + message, Color.magenta.darker());
				user2.chatOutputLine(&quot;From &quot; + u.username + &quot;: &quot; + message, Color.magenta.darker());
				return;
			} else {
				u.chatOutputLine(&quot;User not found.&quot;, Color.red);
				return;
			}
		}
		else if(parts[0].equals(&quot;kick&quot;)) {
			if(checkRights(1, u)) {
				User user2 = null;
				String reason = null;
				try {
					user2 = cs.getUserByName(parts[1]);
				} catch(Exception e) {
					u.chatOutputLine(&quot;Command format: /kick nick reason(optional)&quot;, Color.red);
					return;
				}
				try {
					reason = input.substring(input.indexOf(parts[1])+parts[1].length()+1);
				} catch(Exception e) {}
				if(user2 != null) {
					if(user2.rights &gt;= u.rights) {
						u.chatOutputLine(&quot;You can&#39;t kick someone unless they have lower rights than you.&quot;, Color.red);
						return;
					}
					else {
						cs.kick(user2, u, reason == null ? &quot;None&quot; : reason);
						return;
					}
				} else {
					u.chatOutputLine(&quot;User not found.&quot;, Color.red);
					return;
				}
			}
		}
		else if(parts[0].equals(&quot;ban&quot;)) {
			if(checkRights(2, u)) {
				User user2 = null;
				String reason = null;
				try {
					user2 = cs.getUserByName(parts[1]);
				} catch(Exception e) {
					u.chatOutputLine(&quot;Command format: /ban nick reason(optional)&quot;, Color.red);
					return;
				}
				try {
					reason = input.substring(input.indexOf(parts[1])+parts[1].length()+1);
				} catch(Exception e) {}
				if(user2 != null) {
					cs.ban(user2, u, reason == null ? &quot;None&quot; : reason);
					return;
				} else {
					u.chatOutputLine(&quot;User not found.&quot;, Color.red);
					return;
				}
			}
		}
		else if(parts[0].equals(&quot;unban&quot;)) {
			String nick = &quot;&quot;;
			if(checkRights(2, u)) {
				try {
					nick = parts[1];
				} catch(Exception e) {
					u.chatOutputLine(&quot;Command format: /unban nick&quot;, Color.red);
					return;
				}
				cs.unban(u, nick);
			}
		}
		else if(parts[0].equals(&quot;warn&quot;)) {
			if(checkRights(1, u)) {
				User user2 = null;
				String reason = null;
				try {
					user2 = cs.getUserByName(parts[1]);
				} catch(Exception e) {
					u.chatOutputLine(&quot;Command format: /warn nick&quot;, Color.red);
					return;
				}
				try {
					reason = input.substring(input.indexOf(parts[1])+parts[1].length()+1);
				} catch(Exception e) {}
				if(user2 != null) {
					user2.warnP(u, reason == null ? &quot;None&quot; : reason );
					return;
				} else {
					u.chatOutputLine(&quot;User not found.&quot;, Color.red);
					return;
				}
			}
		}
		else if(parts[0].equals(&quot;promote&quot;)) {
			if(checkRights(2, u)) {
				User user2 = null;
				try {
					user2 = cs.getUserByName(parts[1]);
				} catch(Exception e) {
					u.chatOutputLine(&quot;Command format: /promote nick&quot;, Color.red);
					return;
				}
				if(user2 != null) {
					if(user2.rights &lt; 2) {
						user2.rights++;
						cs.outputAllLine(user2.username + &quot; has been promoted!&quot;, Color.blue);
					} else {
						u.chatOutputLine(&quot;That person is already an admin!&quot;, Color.red);
					}
					return;
				} else {
					u.chatOutputLine(&quot;User not found.&quot;, Color.red);
					return;
				}
			}
		}
		else if(parts[0].equals(&quot;demote&quot;)) {
			if(checkRights(2, u)) {
				User user2 = null;
				try {
					user2 = cs.getUserByName(parts[1]);
				} catch(Exception e) {
					u.chatOutputLine(&quot;Command format: /demote nick&quot;, Color.red);
					return;
				}
				if(user2 != null) {
					if(user2.rights &gt; 0) {
						user2.rights = 0;
						cs.outputAllLine(user2.username + &quot; has been demoted!&quot;, Color.blue);
					} else {
						u.chatOutputLine(&quot;That person is not staff!&quot;, Color.red);
					}
					return;
				} else {
					u.chatOutputLine(&quot;User not found.&quot;, Color.red);
					return;
				}
			}
		}
		else {
			u.chatOutputLine(&quot;That is not a recognized command.&quot;, Color.red);
		}

	}

	static boolean checkRights(int required, User u) {
		if(u.rights &gt;= required) {
			return true;
		} else {
			u.chatOutputLine(&quot;You do not have the rights to use that command.&quot;, Color.red);
			return false;
		}
	}

}[/code]</description>
    
    <lastBuildDate>Sun, 26 Sep 2010 00:16:22 +0000</lastBuildDate>
    <category>General Programming</category>
    <atom:link href="https://forum.moparisthebest.com/t/new-chat-server/361381.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>New Chat Server!</title>
        <dc:creator><![CDATA[@Java_Is_My_Bitch2 Java Is My Bitch]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/java_is_my_bitch2">@Java_Is_My_Bitch2</a> wrote:</p>
          <blockquote>
              <p>[quote=“Lin, post:19, topic:361381”]I just realized how much people here are jerks, especially you Silab. You in general really lack civilization and probably couldn’t refrain from being an asshole on these forums to save your life. David, a word of advice: don’t post your stuff here. No matter how good it is, only those who couldn’t do better will appreciate it. Those who can will sit behind their “protective computer screen” (Zoltanman, you win!) and flame you until you decide you’ve have enough since they have nothing better to do.[/quote]Very nicely put.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/new-chat-server/361381/20">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/new-chat-server/361381/20</link>
        <pubDate>Sun, 26 Sep 2010 00:16:22 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-361381-20</guid>
        <source url="https://forum.moparisthebest.com/t/new-chat-server/361381.rss">New Chat Server!</source>
      </item>
      <item>
        <title>New Chat Server!</title>
        <dc:creator><![CDATA[@Lin Lin]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/lin">@Lin</a> wrote:</p>
          <blockquote>
              <p>I just realized how much people here are jerks, especially you Silab. You in general really lack civilization and probably couldn’t refrain from being an asshole on these forums to save your life. David, a word of advice: don’t post your stuff here. No matter how good it is, only those who couldn’t do better will appreciate it. Those who can will sit behind their “protective computer screen” (Zoltanman, you win!) and flame you until you decide you’ve have enough since they have nothing better to do.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/new-chat-server/361381/19">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/new-chat-server/361381/19</link>
        <pubDate>Sat, 25 Sep 2010 05:20:12 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-361381-19</guid>
        <source url="https://forum.moparisthebest.com/t/new-chat-server/361381.rss">New Chat Server!</source>
      </item>
      <item>
        <title>New Chat Server!</title>
        <dc:creator><![CDATA[@silabsoft RuneAgent]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/silabsoft">@silabsoft</a> wrote:</p>
          <blockquote>
              <p>[quote=“Davidi2, post:17, topic:361381”][quote author=Miss Silabsoft link=topic=457660.msg3350406#msg3350406 date=1285257191]<br>
this servers going to need a auto restarter soon enough the way your progressing from V1 to V2<br>
[/quote]Really? I’ve had it running for 3 days straight now…</p>
<p>And have had at least 2 people try to crash it.[/quote]<br>
really? winterloves original server also works but then whitefang happened and the servers of today were born.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/new-chat-server/361381/18">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/new-chat-server/361381/18</link>
        <pubDate>Thu, 23 Sep 2010 16:05:26 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-361381-18</guid>
        <source url="https://forum.moparisthebest.com/t/new-chat-server/361381.rss">New Chat Server!</source>
      </item>
      <item>
        <title>New Chat Server!</title>
        <dc:creator><![CDATA[@davidi2 Davidi2]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/davidi2">@davidi2</a> wrote:</p>
          <blockquote>
              <p>[quote=“Miss Silabsoft, post:16, topic:361381”]this servers going to need a auto restarter soon enough the way your progressing from V1 to V2[/quote]Really? I’ve had it running for 3 days straight now…</p>
<p>And have had at least 2 people try to crash it.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/new-chat-server/361381/17">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/new-chat-server/361381/17</link>
        <pubDate>Thu, 23 Sep 2010 15:56:33 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-361381-17</guid>
        <source url="https://forum.moparisthebest.com/t/new-chat-server/361381.rss">New Chat Server!</source>
      </item>
      <item>
        <title>New Chat Server!</title>
        <dc:creator><![CDATA[@silabsoft RuneAgent]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/silabsoft">@silabsoft</a> wrote:</p>
          <blockquote>
              <p>this servers going to need a auto restarter soon enough the way your progressing from V1 to V2</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/new-chat-server/361381/16">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/new-chat-server/361381/16</link>
        <pubDate>Thu, 23 Sep 2010 15:53:11 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-361381-16</guid>
        <source url="https://forum.moparisthebest.com/t/new-chat-server/361381.rss">New Chat Server!</source>
      </item>
      <item>
        <title>New Chat Server!</title>
        <dc:creator><![CDATA[@davidi2 Davidi2]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/davidi2">@davidi2</a> wrote:</p>
          <blockquote>
              <p>[quote=“Miss Silabsoft, post:14, topic:361381”][quote author=Davidi2 link=topic=457660.msg3350137#msg3350137 date=1285209823]</p>
<aside class="quote no-group">
<blockquote>
<p>why the hell do you use ArrayList<b> why not just use ByteArrayOutput/InputStream… actually why the hell would you use either you should be able to just write what you need to write with a bytearray no need for a expandable array when you are writing the same size packets repetitively.<br>
[/quote]They’re not always the same size.</b></p>
</blockquote>
</aside>
<p>hurr durr on the few packets the sizes varies why not spend a byte for declaring the payload size then using a loop for pulling those bytes in the array. I mean you did compare this to a RSPS you must have some knowledge of the runescape protocol and how Jagex does things right? The way you are abusing that ArrayList it makes the ArrayList sad.[/quote]I would declare payloads, but it seemed easier to just do it manually when I handle each packet. Why? Because I only have like 10 packets, RSPS’s have over 200. If I continue this project and it starts to have more packets, I might send a payload byte.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/new-chat-server/361381/15">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/new-chat-server/361381/15</link>
        <pubDate>Thu, 23 Sep 2010 15:36:03 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-361381-15</guid>
        <source url="https://forum.moparisthebest.com/t/new-chat-server/361381.rss">New Chat Server!</source>
      </item>
      <item>
        <title>New Chat Server!</title>
        <dc:creator><![CDATA[@silabsoft RuneAgent]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/silabsoft">@silabsoft</a> wrote:</p>
          <blockquote>
              <p>[quote=“Davidi2, post:13, topic:361381”][quote author=`Alec link=topic=457660.msg3350108#msg3350108 date=1285206718]</p>
<aside class="quote no-group">
<blockquote>
<aside class="quote no-group">
<blockquote>
<p>so fucking really, learn your place and sit the fuck down</p>
</blockquote>
</aside>
<p>Want me to go off on you for not knowing cars like I do? No you wouldn’t. So let him learn, you’re not doing any good by raging behind your protective computer screen.</p>
</blockquote>
</aside>
<aside class="quote no-group">
<blockquote>
<p>hurr durr im davidi2 im the best i make the cool java yo me &gt; you lelellel im better than everyone</p>
</blockquote>
</aside>
<p>ps that’s why he’s telling davidi2 to shut the fuck up.<br>
[/quote]I never once said anything REMOTELY like that, and I never even said this was a great program. All I am doing is releasing my work to this community. You and Abraham seem to think that I’m posting this to brag about it, which <span class="bbcode-b">I’M NOT</span>.</p>
<p>[quote author=Miss Silabsoft link=topic=457660.msg3349952#msg3349952 date=1285194913]<br>
why the hell do you use ArrayList<b> why not just use ByteArrayOutput/InputStream… actually why the hell would you use either you should be able to just write what you need to write with a bytearray no need for a expandable array when you are writing the same size packets repetitively.<br>
[/quote]They’re not always the same size.[/quote]<br>
hurr durr on the few packets the sizes varies why not spend a byte for declaring the payload size then using a loop for pulling those bytes in the array. I mean you did compare this to a RSPS you must have some knowledge of the runescape protocol and how Jagex does things right? The way you are abusing that ArrayList it makes the ArrayList sad.</b></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/new-chat-server/361381/14">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/new-chat-server/361381/14</link>
        <pubDate>Thu, 23 Sep 2010 04:14:29 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-361381-14</guid>
        <source url="https://forum.moparisthebest.com/t/new-chat-server/361381.rss">New Chat Server!</source>
      </item>
      <item>
        <title>New Chat Server!</title>
        <dc:creator><![CDATA[@davidi2 Davidi2]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/davidi2">@davidi2</a> wrote:</p>
          <blockquote>
              <p>[quote="`Alec, post:19, topic:361382"][quote author=zoltanman link=topic=457660.msg3349892#msg3349892 date=1285191281]</p>
<aside class="quote no-group">
<blockquote>
<p>so fucking really, learn your place and sit the fuck down</p>
</blockquote>
</aside>
<p>Want me to go off on you for not knowing cars like I do? No you wouldn’t. So let him learn, you’re not doing any good by raging behind your protective computer screen.<br>
[/quote]</p>
<aside class="quote no-group">
<blockquote>
<p>hurr durr im davidi2 im the best i make the cool java yo me &gt; you lelellel im better than everyone</p>
</blockquote>
</aside>
<p>ps that’s why he’s telling davidi2 to shut the fuck up.[/quote]I never once said anything REMOTELY like that, and I never even said this was a great program. All I am doing is releasing my work to this community. You and Abraham seem to think that I’m posting this to brag about it, which <span class="bbcode-b">I’M NOT</span>.</p>
<p>[quote=“Miss Silabsoft, post:12, topic:361381”]why the hell do you use ArrayList<b> why not just use ByteArrayOutput/InputStream… actually why the hell would you use either you should be able to just write what you need to write with a bytearray no need for a expandable array when you are writing the same size packets repetitively.[/quote]They’re not always the same size.</b></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/new-chat-server/361381/13">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/new-chat-server/361381/13</link>
        <pubDate>Thu, 23 Sep 2010 02:43:43 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-361381-13</guid>
        <source url="https://forum.moparisthebest.com/t/new-chat-server/361381.rss">New Chat Server!</source>
      </item>
      <item>
        <title>New Chat Server!</title>
        <dc:creator><![CDATA[@silabsoft RuneAgent]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/silabsoft">@silabsoft</a> wrote:</p>
          <blockquote>
              <p>why the hell do you use ArrayList<b> why not just use ByteArrayOutput/InputStream… actually why the hell would you use either you should be able to just write what you need to write with a bytearray no need for a expandable array when you are writing the same size packets repetitively.</b></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/new-chat-server/361381/12">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/new-chat-server/361381/12</link>
        <pubDate>Wed, 22 Sep 2010 22:35:13 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-361381-12</guid>
        <source url="https://forum.moparisthebest.com/t/new-chat-server/361381.rss">New Chat Server!</source>
      </item>
      <item>
        <title>New Chat Server!</title>
        <dc:creator><![CDATA[@pure2ownage Pure_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/pure2ownage">@pure2ownage</a> wrote:</p>
          <blockquote>
              <aside class="quote no-group quote-modified" data-post="10" data-topic="361381">
<div class="title">
<div class="quote-controls"></div>
 Java Is My Bitch:</div>
<blockquote>
<p>Yea, well put it this way: A chat server doesn’t really need to be the most efficient thing ever, I think it’s a huge improvement from the last chat server. All you assholes are doing is putting him down, where as you should simply tell him what’s wrong, and what’s better. If you make your constructive criticism to harsh, it no longer is constructive. The thing that pushes people to their limits is <span class="bbcode-b">POSITIVE</span> affirmation.</p>
</blockquote>
</aside>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/new-chat-server/361381/11">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/new-chat-server/361381/11</link>
        <pubDate>Wed, 22 Sep 2010 22:00:03 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-361381-11</guid>
        <source url="https://forum.moparisthebest.com/t/new-chat-server/361381.rss">New Chat Server!</source>
      </item>
      <item>
        <title>New Chat Server!</title>
        <dc:creator><![CDATA[@Java_Is_My_Bitch2 Java Is My Bitch]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/java_is_my_bitch2">@Java_Is_My_Bitch2</a> wrote:</p>
          <blockquote>
              <p>Yea, well put it this way: A chat server doesn’t really need to be the most efficient thing ever, I think it’s a huge improvement from the last chat server. All you assholes are doing is putting him down, where as you should simply tell him what’s wrong, and what’s better. If you make your constructive criticism to harsh, it no longer is constructive. The thing that pushes people to their limits is <span class="bbcode-b">POSITIVE</span> affirmation.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/new-chat-server/361381/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/new-chat-server/361381/10</link>
        <pubDate>Wed, 22 Sep 2010 21:36:23 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-361381-10</guid>
        <source url="https://forum.moparisthebest.com/t/new-chat-server/361381.rss">New Chat Server!</source>
      </item>
      <item>
        <title>New Chat Server!</title>
        <dc:creator><![CDATA[@zoltanman zoltanman]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/zoltanman">@zoltanman</a> wrote:</p>
          <blockquote>
              <aside class="quote no-group" data-post="12" data-topic="361382">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/abraham2119/40/5_513041d5f7104045db30895d3b90af16.png" class="avatar">
</div>
<blockquote>
<p>so fucking really, learn your place and sit the fuck down</p>
</blockquote>
</aside>
<p>Want me to go off on you for not knowing cars like I do? No you wouldn’t. So let him learn, you’re not doing any good by raging behind your protective computer screen.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/new-chat-server/361381/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/new-chat-server/361381/9</link>
        <pubDate>Wed, 22 Sep 2010 21:34:41 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-361381-9</guid>
        <source url="https://forum.moparisthebest.com/t/new-chat-server/361381.rss">New Chat Server!</source>
      </item>
      <item>
        <title>New Chat Server!</title>
        <dc:creator><![CDATA[@DivineSouls DivineSouls]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/divinesouls">@DivineSouls</a> wrote:</p>
          <blockquote>
              <p>…This is a horrible community in many ways. I don’t see why people can’t just respect the work that someone has spent their time on. If you see that something is wrong, or if it could be made in a different way which is much more efficient, why can’t people not be a faggot and just tell them in a respectful manner. lol…</p>
<p>Good Job David.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/new-chat-server/361381/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/new-chat-server/361381/8</link>
        <pubDate>Wed, 22 Sep 2010 20:55:05 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-361381-8</guid>
        <source url="https://forum.moparisthebest.com/t/new-chat-server/361381.rss">New Chat Server!</source>
      </item>
      <item>
        <title>New Chat Server!</title>
        <dc:creator><![CDATA[@Canownueazy Canownueazy]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/canownueazy">@Canownueazy</a> wrote:</p>
          <blockquote>
              <p>Use MINA please.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/new-chat-server/361381/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/new-chat-server/361381/7</link>
        <pubDate>Wed, 22 Sep 2010 10:19:40 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-361381-7</guid>
        <source url="https://forum.moparisthebest.com/t/new-chat-server/361381.rss">New Chat Server!</source>
      </item>
      <item>
        <title>New Chat Server!</title>
        <dc:creator><![CDATA[@davidi2 Davidi2]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/davidi2">@davidi2</a> wrote:</p>
          <blockquote>
              <p>A way people could crash the server was by closing their socket after sending a byte, so when I catch the closed socket (which then destructs the user, making the queues null) it would get return an index out of bounds exception.</p>
<p>I didn’t have the try/catch there to begin with, I only added it during the beta testing mode when I was getting the IOOBE in runtime for that block of code.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/new-chat-server/361381/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/new-chat-server/361381/6</link>
        <pubDate>Wed, 22 Sep 2010 08:22:05 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-361381-6</guid>
        <source url="https://forum.moparisthebest.com/t/new-chat-server/361381.rss">New Chat Server!</source>
      </item>
      <item>
        <title>New Chat Server!</title>
        <dc:creator><![CDATA[@Lin Lin]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/lin">@Lin</a> wrote:</p>
          <blockquote>
              <p>Just as a heads up, checking if something is null and proceeding without a try/catch statement is much better. So, if you can, avoid using those for small things like…</p>
<p><code>                for(int i = 0; i &lt; size; i++) {
                        try {
                                b = writeByteQueue.get(0);
                        } catch(IndexOutOfBoundsException e) {
                                return;
                        }
                        try {
                                output.write((byte) b);
                                writeByteQueue.remove(0);
                        } catch(Exception e) {
                                user.destruct();
                        }
                }</code>It’d be better to just check if the byte queue has the first item and the output can take the new byte. Although, why you have a try/catch statement on the adding and removing of the byte (the second part) is beyond me, since you’ve already established whether or not the queue has a byte available (depending on what the output is. If it’s a direct networking stream, then you’re doin’ it wrong).</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/new-chat-server/361381/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/new-chat-server/361381/5</link>
        <pubDate>Wed, 22 Sep 2010 08:13:18 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-361381-5</guid>
        <source url="https://forum.moparisthebest.com/t/new-chat-server/361381.rss">New Chat Server!</source>
      </item>
      <item>
        <title>New Chat Server!</title>
        <dc:creator><![CDATA[@John459 John459]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/john459">@John459</a> wrote:</p>
          <blockquote>
              <p>Still has room for improvement, I will admit it is better than your old one though. Not by too much, but it has improved.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/new-chat-server/361381/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/new-chat-server/361381/4</link>
        <pubDate>Wed, 22 Sep 2010 04:51:29 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-361381-4</guid>
        <source url="https://forum.moparisthebest.com/t/new-chat-server/361381.rss">New Chat Server!</source>
      </item>
      <item>
        <title>New Chat Server!</title>
        <dc:creator><![CDATA[@davidi2 Davidi2]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/davidi2">@davidi2</a> wrote:</p>
          <blockquote>
              <p>[quote=“Scape-JAVA, post:2, topic:361381”]Good work David ;).[/quote]Thanks <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/new-chat-server/361381/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/new-chat-server/361381/3</link>
        <pubDate>Wed, 22 Sep 2010 04:30:14 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-361381-3</guid>
        <source url="https://forum.moparisthebest.com/t/new-chat-server/361381.rss">New Chat Server!</source>
      </item>
      <item>
        <title>New Chat Server!</title>
        <dc:creator><![CDATA[@Scape-JAVA Scape-JAVA]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/scape-java">@Scape-JAVA</a> wrote:</p>
          <blockquote>
              <p>Good work David ;).</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/new-chat-server/361381/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/new-chat-server/361381/2</link>
        <pubDate>Wed, 22 Sep 2010 04:07:25 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-361381-2</guid>
        <source url="https://forum.moparisthebest.com/t/new-chat-server/361381.rss">New Chat Server!</source>
      </item>
      <item>
        <title>New Chat Server!</title>
        <dc:creator><![CDATA[@davidi2 Davidi2]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/davidi2">@davidi2</a> wrote:</p>
          <blockquote>
              <p>[center][size=20pt]Chat Server v4<br>
By Davidi2[/size][/center]<br>
<span class="bbcode-u"><span class="bbcode-b">Current Features:</span></span></p>
<p>[ul][li]Connect[/li]<br>
[li]Chatting[/li]<br>
[li]Simple GUI[/li]<br>
[li]Nick Changing[/li]<br>
[li]Color Coding[/li]<br>
[li]User List + Updating[/li]<br>
[li]Ban[/li]<br>
[li]Warn (Progressive, two warnings, then incremental mute times)[/li]<br>
[li]5 lines, 5 seconds timer; if you go past it calls the warn method (see above)[/li]<br>
[li]Nick Registration &amp; Login[/li]<br>
[li]Private Messaging[/li]<br>
[li]Kick[/li]<br>
[li]Promote/Demote[/li][/ul]</p>
<p><span class="bbcode-u"><span class="bbcode-b">Features to Come:</span></span></p>
<p>[ul][li]Other Commands[/li]<br>
[li]URL highlighting[/li]<br>
[li]Nick highlighting[/li][/ul]</p>
<p>This works on the same principles as a RSPS, as it hosts a server at your IP (and a port of your choosing), and allows my client to connect to it from anywhere with internet access.</p>
<p><span class="bbcode-u"><span class="bbcode-b">Credits:</span></span></p>
<p>[ul][li]Java Is My Bitch - Picture models :P[/li]<br>
[li]Beta Testers - Helping me find bugs; giving ideas[/li]<br>
[li]Davidi2 - Writing all of it[/li][/ul]</p>
<p>To test it for yourself: <a href="http://76.104.173.251/chatclient" data-bbcode="true">My hosted chat server</a><br>
<img src="http://img819.imageshack.us/img819/351/85493117.png" alt width="" height=""><br>
<img src="http://img4.imageshack.us/img4/6308/96539221.png" alt width="" height=""><br>
<img src="http://img517.imageshack.us/img517/5909/94082036.png" alt width="" height=""></p>
<p>Classes:<br>
<a href="http://pastebin.com/WXC9i1PK">http://pastebin.com/WXC9i1PK</a> - ChatServer.java (main handling)<br>
<a href="http://pastebin.com/WzHZJyu2">http://pastebin.com/WzHZJyu2</a> - UserSocket.java (Server-client IO here)<br>
<a href="http://pastebin.com/UN2CAavg">http://pastebin.com/UN2CAavg</a> - NickManager &amp; DataManager.java (scroll down for nickmanager; handles files, handles nicks)<br>
<a href="http://pastebin.com/Zuu2fjbV">http://pastebin.com/Zuu2fjbV</a> - ConnectionManager &amp; StartUp.java (scroll down for startup; handles sockets, driver class)</p>
<p>User.java</p>
<p>[code=java]import <a href="http://java.net">java.net</a>.<em>;<br>
import <a href="http://java.io">java.io</a>.</em>;<br>
import java.awt.*;</p>
<p>public class User extends Thread {</p>
<p>public boolean reading = true;<br>
public int userID;<br>
public UserSocket rwSocket;<br>
public PrintWriter print;<br>
public Socket socket;<br>
public String username = getUsername();<br>
public ChatServer cs;<br>
public int rights = 0;<br>
public boolean spamTimerStarted = false;<br>
public int numMessages;<br>
public long timeCounter = System.currentTimeMillis();<br>
public int warnLevel;<br>
public long muteTimer = 0;<br>
boolean real = false;<br>
public long mutedAt;</p>
<pre><code>public User(Socket socket, int id, ChatServer cs) {
       this.rwSocket = new UserSocket(this, socket);
       this.userID = id;
       this.print = new PrintWriter(rwSocket.output, false);
       this.start();
       this.socket = socket;
       this.cs = cs;
	rwSocket.writePacketID(6);
	rwSocket.writeString(username);
}

public void destruct() {
	cs.destroy(this);
	}

public void stopSpamTimer() {
	numMessages = 0;
	timeCounter = 0;
	spamTimerStarted = false;
}

public void startSpamTimer() {
	numMessages = 0;
	timeCounter = System.currentTimeMillis();
	spamTimerStarted = true;
}

public void warn() {
	warnLevel++;
	if(warnLevel &gt;  6) {
		warnLevel = 6;
	}
	switch(warnLevel) {
		case 1:
			cs.outputAllLine(username + " has been given a warning for spamming.", Color.green.darker());
		break;
		case 2:
			cs.outputAllLine(username + " has been given a warning for spamming.", Color.orange);
		break;
		case 3:
			cs.outputAllLine(username + " has been muted (30 seconds) for spamming.", Color.red);
			muteTimer = 30000;
		break;
		case 4:
			cs.outputAllLine(username + " has been muted (60 seconds) for spamming.", Color.red);
			muteTimer = 60000;
		break;
		case 5:
			cs.outputAllLine(username + " has been muted (5 minutes) for spamming.", Color.red);
			muteTimer = 300000;
		break;
		case 6:
			cs.outputAllLine(username + " has been muted (10 minutes) for spamming.", Color.red);
			muteTimer = 600000;
		break;
	}
	if(muteTimer &gt; 0) {
		mutedAt = System.currentTimeMillis();
	}
}

public void warnP(User u2, String reason) {
	warnLevel++;
	if(warnLevel &gt;  6) {
		warnLevel = 6;
	}
	switch(warnLevel) {
		case 1:
			cs.outputAllLine(username + " has been given a warning (1) by " + u2.username + ". Reason: " + reason, Color.green.darker());
		break;
		case 2:
			cs.outputAllLine(username + " has been given a warning (2) by " + u2.username + ". Reason: " + reason, Color.orange);
		break;
		case 3:
			cs.outputAllLine(username + " has been muted (30 seconds) by " + u2.username + ". Reason: " + reason, Color.red);
			muteTimer = 30000;
		break;
		case 4:
			cs.outputAllLine(username + " has been muted (60 seconds) by " + u2.username + ". Reason: " + reason, Color.red);
			muteTimer = 60000;
		break;
		case 5:
			cs.outputAllLine(username + " has been muted (5 minutes) by " + u2.username + ". Reason: " + reason, Color.red);
			muteTimer = 300000;
		break;
		case 6:
			cs.outputAllLine(username + " has been muted (10 minutes) by " + u2.username + ". Reason: " + reason, Color.red);
			muteTimer = 600000;
		break;
	}
	if(muteTimer &gt; 0) {
		mutedAt = System.currentTimeMillis();
	}
}

public void run() {
	while (reading) {
		try {
			rwSocket.readAllBytes();
			if(rwSocket.readByteQueue.size() &gt; 3) {
					rwSocket.parseInput();
			}
			rwSocket.writeAllBytes();
			Thread.sleep(300);
		}
		catch (Exception e) { //Probably dc'd. Caught successfully
			e.printStackTrace();
		}
		if(spamTimerStarted &amp;&amp; (System.currentTimeMillis() - timeCounter &gt;= 5000)) {
			numMessages = 0;
			spamTimerStarted = false;
			timeCounter = System.currentTimeMillis();
		}
		if(muteTimer &gt; 0) {
			muteTimer -= System.currentTimeMillis() - mutedAt;
			mutedAt = System.currentTimeMillis();
		}
	}
}

public void chatOutputLine(String message, Color c) {
	rwSocket.writePacketID(1);
	rwSocket.writeInt(c.getRGB());
	rwSocket.writeString("\n" + message);
}

public void chatOutput(String message, Color c) {
	rwSocket.writePacketID(1);
	rwSocket.writeInt(c.getRGB());
	rwSocket.writeString(message);
}
public Color getColor() {
	Color color = Color.black;
	switch (rights) {
		case 1:
			color = Color.blue;
		break;
		case 2:
			color = Color.orange.darker();
		break;
	}
	return color;
}
public String getUsername() { 
	boolean found = false;
	String allUsernames = "";
	int random = (int) (Math.random() * (20000));
	if(random &lt; 10000) {
		random += 10000;
	}
	while(!(found)) {
		for (User u : ChatServer.users) {
			if(u != null) {
				allUsernames += u.username;
			}
		}
		if(!(allUsernames.contains(Integer.toString(random)))) {
			found = true;
		}
		else {
			random++;
		}
	}
	return ("User" + random);
}
</code></pre>
<p>}<br>
[/code]</p>
<p>Commands.java</p>
<p>[code=java]import java.awt.Color;</p>
<p>public class Commands {</p>
<pre><code>static ChatServer cs = StartUp.ChatServer;

public static void doCommand(String input, User u) {
	String[] parts = input.split(" ");
	if(parts[0].equals("me")) {
		String emote;
		try {
			emote = input.substring(input.indexOf(parts[0])+parts[0].length()+1);
		} catch(Exception e) {
			return;
		}
		cs.outputAllLine("* " + u.username + " " + emote, Color.pink);
		
	}
	else if(parts[0].equals("register")) {
		String pass1="password";
		String pass2="password2";
		try {
			pass1 = parts[1];
			pass2 = parts[2];
		} catch(Exception e) {
			u.chatOutputLine("Command format: /register password confirmpass", Color.red);
			return;
		}
		if(pass1.equals(pass2)) {
			cs.nickManager.register(u, pass1);
		} else {
			u.chatOutputLine("The passwords do not match.", Color.red);
		}	
	}
	else if(parts[0].equals("login")) {
		String nick="";
		String pass="password";
		try {
			nick = parts[1];
			pass = parts[2];
		} catch(Exception e) {
			u.chatOutputLine("Command format: /login name pass", Color.red);
			return;
		}
		cs.nickManager.login(u, nick, pass);	
	}
	else if(parts[0].equals("pm")) {
		User user2 = null;
		String message = null;
		try {
			user2 = cs.getUserByName(parts[1]);
			message = input.substring(input.indexOf(parts[1])+parts[1].length()+1);
		} catch(Exception e) {
			u.chatOutputLine("Command format: /pm nick message", Color.red);
			return;
		}
		if(user2 != null) {
			u.chatOutputLine("To " + user2.username + ": " + message, Color.magenta.darker());
			user2.chatOutputLine("From " + u.username + ": " + message, Color.magenta.darker());
			return;
		} else {
			u.chatOutputLine("User not found.", Color.red);
			return;
		}
	}
	else if(parts[0].equals("kick")) {
		if(checkRights(1, u)) {
			User user2 = null;
			String reason = null;
			try {
				user2 = cs.getUserByName(parts[1]);
			} catch(Exception e) {
				u.chatOutputLine("Command format: /kick nick reason(optional)", Color.red);
				return;
			}
			try {
				reason = input.substring(input.indexOf(parts[1])+parts[1].length()+1);
			} catch(Exception e) {}
			if(user2 != null) {
				if(user2.rights &gt;= u.rights) {
					u.chatOutputLine("You can't kick someone unless they have lower rights than you.", Color.red);
					return;
				}
				else {
					cs.kick(user2, u, reason == null ? "None" : reason);
					return;
				}
			} else {
				u.chatOutputLine("User not found.", Color.red);
				return;
			}
		}
	}
	else if(parts[0].equals("ban")) {
		if(checkRights(2, u)) {
			User user2 = null;
			String reason = null;
			try {
				user2 = cs.getUserByName(parts[1]);
			} catch(Exception e) {
				u.chatOutputLine("Command format: /ban nick reason(optional)", Color.red);
				return;
			}
			try {
				reason = input.substring(input.indexOf(parts[1])+parts[1].length()+1);
			} catch(Exception e) {}
			if(user2 != null) {
				cs.ban(user2, u, reason == null ? "None" : reason);
				return;
			} else {
				u.chatOutputLine("User not found.", Color.red);
				return;
			}
		}
	}
	else if(parts[0].equals("unban")) {
		String nick = "";
		if(checkRights(2, u)) {
			try {
				nick = parts[1];
			} catch(Exception e) {
				u.chatOutputLine("Command format: /unban nick", Color.red);
				return;
			}
			cs.unban(u, nick);
		}
	}
	else if(parts[0].equals("warn")) {
		if(checkRights(1, u)) {
			User user2 = null;
			String reason = null;
			try {
				user2 = cs.getUserByName(parts[1]);
			} catch(Exception e) {
				u.chatOutputLine("Command format: /warn nick", Color.red);
				return;
			}
			try {
				reason = input.substring(input.indexOf(parts[1])+parts[1].length()+1);
			} catch(Exception e) {}
			if(user2 != null) {
				user2.warnP(u, reason == null ? "None" : reason );
				return;
			} else {
				u.chatOutputLine("User not found.", Color.red);
				return;
			}
		}
	}
	else if(parts[0].equals("promote")) {
		if(checkRights(2, u)) {
			User user2 = null;
			try {
				user2 = cs.getUserByName(parts[1]);
			} catch(Exception e) {
				u.chatOutputLine("Command format: /promote nick", Color.red);
				return;
			}
			if(user2 != null) {
				if(user2.rights &lt; 2) {
					user2.rights++;
					cs.outputAllLine(user2.username + " has been promoted!", Color.blue);
				} else {
					u.chatOutputLine("That person is already an admin!", Color.red);
				}
				return;
			} else {
				u.chatOutputLine("User not found.", Color.red);
				return;
			}
		}
	}
	else if(parts[0].equals("demote")) {
		if(checkRights(2, u)) {
			User user2 = null;
			try {
				user2 = cs.getUserByName(parts[1]);
			} catch(Exception e) {
				u.chatOutputLine("Command format: /demote nick", Color.red);
				return;
			}
			if(user2 != null) {
				if(user2.rights &gt; 0) {
					user2.rights = 0;
					cs.outputAllLine(user2.username + " has been demoted!", Color.blue);
				} else {
					u.chatOutputLine("That person is not staff!", Color.red);
				}
				return;
			} else {
				u.chatOutputLine("User not found.", Color.red);
				return;
			}
		}
	}
	else {
		u.chatOutputLine("That is not a recognized command.", Color.red);
	}

}

static boolean checkRights(int required, User u) {
	if(u.rights &gt;= required) {
		return true;
	} else {
		u.chatOutputLine("You do not have the rights to use that command.", Color.red);
		return false;
	}
}
</code></pre>
<p>}[/code]</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/new-chat-server/361381/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/new-chat-server/361381/1</link>
        <pubDate>Wed, 22 Sep 2010 00:40:20 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-361381-1</guid>
        <source url="https://forum.moparisthebest.com/t/new-chat-server/361381.rss">New Chat Server!</source>
      </item>
  </channel>
</rss>
