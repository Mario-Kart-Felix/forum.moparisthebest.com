<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/refactored-194-classes/374474 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Aug 2019 09:29:18 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Refactored 194 classes - Runescape - moparisthebest.com</title>
    <meta name="description" content="These are all from the 194 client. I couldn&amp;#39;t find a better board for this. 

Class5 = RSSocket Class37 = StringUtils 

[code=java]import java.io.InputStream; import java.io.IOException; import java.io.OutputStream; impo&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="374474.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Refactored 194 classes&#39;" href="374474.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/refactored-194-classes/374474" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/refactored-194-classes/374474" />
<meta property="og:title" content="Refactored 194 classes" />
<meta name="twitter:title" content="Refactored 194 classes" />
<meta property="og:description" content="These are all from the 194 client. I couldn’t find a better board for this.  Class5 = RSSocket  Class37 = StringUtils  [code=java]import java.io.InputStream;  import java.io.IOException;  import java.io.OutputStream;  import java.net.Socket;  public final class RSSocket implements Runnable {  private Applet_Sub1 applet; private boolean closed = false; private boolean writing = false; private boolean aBoolean92 = false; //TODO private byte[] buffer; private int bufferIndex; private int writeIndex..." />
<meta name="twitter:description" content="These are all from the 194 client. I couldn’t find a better board for this.  Class5 = RSSocket  Class37 = StringUtils  [code=java]import java.io.InputStream;  import java.io.IOException;  import java.io.OutputStream;  import java.net.Socket;  public final class RSSocket implements Runnable {  private Applet_Sub1 applet; private boolean closed = false; private boolean writing = false; private boolean aBoolean92 = false; //TODO private byte[] buffer; private int bufferIndex; private int writeIndex..." />
<meta property="article:published_time" content="2010-12-22T11:53:53+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="374474.html">Refactored 194 classes</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Rixxx.html'><span itemprop='name'>Rixxx</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-12-22T11:53:53Z'>
            <time itemprop='dateModified' datetime='2016-08-01T01:43:29Z' class='post-time'>
              August 1, 2016,  1:43am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>These are all from the <span class="bbcode-b">194 client</span>. I couldn’t find a better board for this.</p>
<p>Class5 = RSSocket<br>
Class37 = StringUtils</p>
<p>[code=java]import java.io.InputStream;<br>
import java.io.IOException;<br>
import java.io.OutputStream;<br>
import java.net.Socket;</p>
<p>public final class RSSocket implements Runnable {</p>
<pre><code>private Applet_Sub1 applet;
private boolean closed = false;
private boolean writing = false;
private boolean aBoolean92 = false; //TODO
private byte[] buffer;
private int bufferIndex;
private int writeIndex;
private InputStream inputStream;
private OutputStream outputStream;
private Socket socket;

/**
 * The RSSocket constructor.
 * 
 * @param applet
 *  The RSApplet.
 * @param socket
 *  The socket.
 * @throws IOException
 *  If there is any error getting the
 *  input or output streams.
 */
public RSSocket(Applet_Sub1 applet, Socket socket) throws IOException {
    ((RSSocket) this).applet = applet;
    this.socket = socket;
    this.socket.setSoTimeout(30000);
    this.socket.setTcpNoDelay(true);
    this.inputStream = socket.getInputStream();
    this.outputStream = socket.getOutputStream();
}

/**
 * Closes the RSSocket.
 */
public void close() {
    try {
        if (inputStream != null)
            inputStream.close();
        if (outputStream != null)
            outputStream.close();
        if (socket != null)
            socket.close();
    } catch (IOException io) {
        System.out.println("Error closing stream!");
    }
    writing = false; // Hmm...?
    synchronized (this) {
        this.notify();
    }
    buffer = null;
    closed = true;
}

/**
 * Reads the next byte of data.
 *
 * @return
 *  The next byte of data
 * @throws IOException
 *  If an I/O error occurs.
 * @see
 *  java.io.InputStream#read()
 */
public int read() throws IOException {
    return closed ? 0 : inputStream.read();
}

/**
 * Returns the number of bytes that can be read.
 *
 * @return
 *  The number of bytes that can be read;
 * @throws IOException
 *  If an I/O error occurs.
 * @see
 *  java.io.InputStream#available()
 */
public int available() throws IOException {
    return closed ? 0 : inputStream.available();
}

/**
 * Reads up to &lt;code&gt;maxBytes&lt;/code&gt; bytes
 * of data in the &lt;code&gt;buffer&lt;/byte&gt;,
 * starting from &lt;code&gt;offset&lt;/code&gt; bytes
 * in a loop.
 *
 * @param buffer
 *  The array of bytes to read in.
 * @param offset
 *  The offset.
 * @param maxBytes
 *  The maximum number of bytes to read.
 * @throws IOException
 *  If an I/O error occurs.
 */
public void read(byte[] buffer, int offset, int maxBytes) throws IOException {
    if (!closed) {
        // The total number of bytes read into the buffer.
        int totalBytes;

        for (; maxBytes &gt; 0; maxBytes -= totalBytes) {
            totalBytes = inputStream.read(buffer, offset, maxBytes);
            if (totalBytes &lt;= 0)
                throw new IOException("No bytes!");
            offset += totalBytes;
        }
    }
}

/**
 * Queues bytes into the &lt;code&gt;buffer&lt;/code&gt;.
 *
 * @param buffer
 *  The array of bytes.
 * @param i
 *  A dummy var.
 * @throws IOException
 *  If any I/O error occurs.
 */
public void queue(byte[] buffer, int i) throws IOException {
    if (!closed) {
        if (aBoolean92) {
            aBoolean92 = false;
            throw new IOException("Error in writer thread!");
        }
        if (buffer == null) {
            buffer = new byte[5000];
        }
        synchronized (this) {
            for (int idx = 0; idx &lt; i; idx++) {
                this.buffer[bufferIndex] = buffer[idx];
                bufferIndex = (bufferIndex + 1) % 5000;
                if (bufferIndex == (writeIndex + 4900) % 5000) {
                    throw new IOException("Buffer overflow!");
                }
            }
            if (!writing) {
                writing = true;
                applet.method12(this, 2);
            }
            this.notify();
        }
    }
}

/**
 * The thread.
 */
@Override
public void run() {
    System.out.println("Stream writer started.");
    while (writing) {
        int i;
        // most probably
        int remaining;

        synchronized (this) {
            if (bufferIndex == writeIndex) {
                try {
                    this.wait();
                } catch (InterruptedException ie) {
                    System.out.println("Interrupted while waiting!");
                }
            }
            if (!writing)
                break;
            i = writeIndex;
            remaining = (bufferIndex &gt;= writeIndex) ? bufferIndex-writeIndex : 5000 - writeIndex;
        }
        if (remaining &gt; 0) {
            try {
                outputStream.write(buffer, i, remaining);
            } catch (IOException io) {
                aBoolean92 = true;
            }
            writeIndex = (writeIndex + remaining) % 5000;
            try {
                if (bufferIndex == writeIndex) {
                    outputStream.flush();
                }
            } catch (IOException io) {
                aBoolean92 = true;
            }
        }
    }
    System.out.println("Stream writer stopped.");
}
</code></pre>
<p>}[/code]</p>
      </div>

      <meta itemprop='headline' content='Refactored 194 classes'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/ollie123.html'><span itemprop='name'>ollie123</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-12-22T16:46:55Z'>
            <time itemprop='dateModified' datetime='2016-08-01T01:43:42Z' class='post-time'>
              August 1, 2016,  1:43am
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Nice to see people are still dabbling with this.</p>
<p>Can you tell me where you got your 194 from?</p>
      </div>

      <meta itemprop='headline' content='Refactored 194 classes'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Rixxx.html'><span itemprop='name'>Rixxx</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-12-23T04:01:21Z'>
            <time itemprop='dateModified' datetime='2016-08-01T01:44:42Z' class='post-time'>
              August 1, 2016,  1:44am
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p><a href="http://www.moparisthebest.com/smf/index.php/topic,346599.0.html" rel="nofollow noopener">http://www.moparisthebest.com/smf/index.php/topic,346599.0.html</a> <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>An almost-refactored StringUtils class:</p>
<p>[code=java]import sign.signlink;</p>
<p>public final class StringUtils {<br>
static char[] aCharArray522 = new char[12];<br>
static char[] validCharacters = {<br>
‘_’, ‘a’, ‘b’, ‘c’, ‘d’, ‘e’, ‘f’, ‘g’, ‘h’,<br>
‘i’, ‘j’, ‘k’, ‘l’, ‘m’, ‘n’, ‘o’, ‘p’, ‘q’,<br>
‘r’, ‘s’, ‘t’, ‘u’, ‘v’,  ‘w’, ‘x’, ‘y’, ‘z’,<br>
‘0’, ‘1’, ‘2’, ‘3’, ‘4’, ‘5’, ‘6’, ‘7’, ‘8’,<br>
‘9’<br>
};</p>
<pre><code>/**
 * Gets a username as a long from a string.
 *
 * @param usernameAsString
 *  The username as a string.
 * @return
 *  The username as a long.
 */
public static long getUsernameAsLong(String usernameAsString) {
    usernameAsString = usernameAsString.trim();
    long usernameAsLong = 0L;

    // 12 = max username length
    for (int i = 0; i &lt; usernameAsString.length() &amp;&amp; i &lt; 12; i++) {
        char c = usernameAsString.charAt(i);
        usernameAsLong *= 37L;
        if (c &gt;= 'A' &amp;&amp; c &lt;= 'Z') {
            usernameAsLong += (long) ('\001' + c - 'A');
        } else if (c &gt;= 'a' &amp;&amp; c &lt;= 'z') {
            usernameAsLong += (long) ('\001' + c - 'a');
        } else if (c &gt;= '0' &amp;&amp; c &lt;= '9') {
            usernameAsLong += (long) ('\033' + c - '0');
        }
    }
    return usernameAsLong;
}

//TODO
public static long method420(String string, byte i) {
    string = string.toLowerCase();
    long l = 0L;

    for (int i_1 = 0; i_1 &lt; string.length(); i_1++) {
        l = l * 61L + (long) string.charAt(i_1) - 32L;
    }
    if (i != 6) {
        throw new NullPointerException();
    }
    return l;
}

/**
 * Censors a string.
 *
 * @param string
 *  The string to censor.
 * @return
 *  A censored string.
 */
public static String censorString(String string) {
    String string_6 = "";

    for (int i_7 = 0; i_7 &lt; string.length(); i_7++) {
        string_6 += "*";
    }
    return string_6;
}

/**
 * Formats a string, usually in
 * a chat.
 *
 * e.g. hello. world -&gt; Hello. World
 *
 * @param string
 *  The string to format.
 * @return
 *  The formatted string.
 */
public static String formatString(String string) {
    string = string.toLowerCase();
    char[] cs = string.toCharArray();
    int i_3 = cs.length;
    boolean bool = true;

    for (int i_4 = 0; i_4 &lt; i_3; i_4++) {
        char c = cs[i_4];

        if (bool &amp;&amp; c &gt;= 'a' &amp;&amp; c &lt;= 'z') {
            cs[i_4] += -32;
            bool = false;
        }
        if (c == '.' || c == '!') {
            bool = true;
        }
    }
    return new String(cs);
}

/**
 * Formats a username by capitalizing the
 * first letter and/or replacing underscores
 * with spaces.
 *
 * e.g. hurr_durr -&gt; Hurr durr
 * 
 * @param string
 *  The username to format.
 * @return
 *  A formatted username.
 */
public static String formatUsername(String string) {
    if (string.length() &gt; 0) {
        char[] cs = string.toCharArray();

        for (int i_2 = 0; i_2 &lt; cs.length; i_2++) {
            if (cs[i_2] == '_') {
                cs[i_2] = ' ';
                if (i_2 + 1 &lt; cs.length &amp;&amp; cs[i_2 + 1] &gt;= 'a'
                        &amp;&amp; cs[i_2 + 1] &lt;= 'z') {
                    cs[i_2 + 1] = (char) (cs[i_2 + 1] + 'A' - 'a');
                }
            }
        }
        if (cs[0] &gt;= 'a' &amp;&amp; cs[0] &lt;= 'z') {
            cs[0] = (char) (cs[0] + 'A' - 'a');
        }
        return new String(cs);
    }
    return string;
}

/**
 * Gets a username as a string from a long.
 *
 * @param usernameAsLong
 *  The username as a long.
 * @return
 *  The username as a string.
 */
public static String getUsernameAsString(long usernameAsLong) {
    try {
        if (usernameAsLong &lt; 0L || usernameAsLong &gt;= 6582952005840035281L) {
            return "invalid_name";
        }
        int i = 0;
        while (usernameAsLong != 0L) {
            long l_0 = usernameAsLong;
            usernameAsLong /= 37L;
            aCharArray522[11 - i++] = validCharacters[(int) (l_0 - usernameAsLong * 37L)];
        }
        return new String(aCharArray522, 12 - i, i);
    } catch (RuntimeException re) {
        signlink.reporterror(
                "17221, " + usernameAsLong + ", "
                + re.toString());
        throw new RuntimeException();
    }
}
</code></pre>
<p>}[/code]</p>
      </div>

      <meta itemprop='headline' content='Refactored 194 classes'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/refactored-194-classes/374474 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Aug 2019 09:29:18 GMT -->
</html>
