<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>PI simulating killing monsters and adding loot to bank</title>
    <link>https://forum.moparisthebest.com/t/pi-simulating-killing-monsters-and-adding-loot-to-bank/551961</link>
    <description>title says it all..

But im having some issues:/

it stops at random amount of &quot;npcs killed&quot; and dosent continue.. 
I hope some of ya can help me:/

Command to choose npc id and amount to kill
[code]if (playerCommand.startsWith(&quot;kill&quot;)){
				try{
			String[] args = playerCommand.split(&quot; &quot;);
					if(args.length == 3) {
			NPCHandler.killMonstersMethod(c,Integer.parseInt(args[1]), Integer.parseInt(args[2]));
			}else {
			c.sendMessage(&quot;Use as : ::kill *** *** npcid, times to kill)&quot;);
			}
			} catch(Exception e){
			}
			}[/code]

The method:
[code]
				c.sendMessage(&quot;killmonstersmethod started&quot;);
		int npc = 0;
		int a;
			npcs[i].npcType = i;
			for (a = 1; a &lt;= amount; a++){
				c.sendMessage(&quot;killed: &quot;+a+&quot; of &quot;+amount+&quot; of npc &quot;+i+&quot;&quot;);
		int random = Misc.random(NPCDrops.normalDrops.get(npcs[i].npcType).length-1);
		int random1 = Misc.random(NPCDrops.normalDrops.get(npcs[i].npcType).length-1);
			if (NPCDrops.constantDrops.get(npcs[i].npcType) != null) {
				for (int item : NPCDrops.constantDrops.get(npcs[i].npcType)) {	
						c.getItems().addItemToBank(item,1);
						c.getItems().addItemToBank(NPCDrops.normalDrops.get(npcs[i].npcType)[random1][0],NPCDrops.normalDrops.get(npcs[i].npcType)[random1][1]);
				        int raredrops = Misc.random(99)+1;
						if (raredrops &gt;= 98){
							int Random = Misc.random(NPCDrops.rareDrops.get(npcs[i].npcType).length-1);
							int Random1 = Misc.random(NPCDrops.rareDrops.get(npcs[i].npcType).length-1);
							c.getItems().addItemToBank(NPCDrops.rareDrops.get(npcs[i].npcType)[random][0],NPCDrops.rareDrops.get(npcs[i].npcType)[random][1]);
						}
				}	
			}
			}
			if (a != amount){
			c.sendMessage(&quot;the script froze but is resetting and should kill the rest&quot;);
			killMonstersMethod(c,i, a - amount);
				return;
			}
			
			c.sendMessage(&quot;You have now killed &quot;+amount+&quot; of npc id: &quot;+i+&quot;, loot was added to your bank &quot;);

		}[/code]</description>
    
    <lastBuildDate>Sat, 13 Jun 2015 15:34:30 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/pi-simulating-killing-monsters-and-adding-loot-to-bank/551961.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>PI simulating killing monsters and adding loot to bank</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <p>[quote=“Quintorz, post:13, topic:551961”]errors :</p>
<p>[code]src\server\model\npcs\NPCHandler.java:2626: error: incompatible types: int[] can<br>
not be converted to NPCDrops<br>
NPCDrops constantDrops = NPCDrops.constantDrops.get(npcType)<br>
;<br>
^<br>
src\server\model\npcs\NPCHandler.java:2627: error: incompatible types: int[][] c<br>
annot be converted to NPCDrops<br>
NPCDrops normalDrops = NPCDrops.normalDrops.get(npcType); //<br>
Was never used?<br>
^<br>
src\server\model\npcs\NPCHandler.java:2628: error: incompatible types: int[][] c<br>
annot be converted to NPCDrops<br>
NPCDrops rareDrops = NPCDrops.rareDrops.get(npcType);<br>
^<br>
src\server\model\npcs\NPCHandler.java:2633: error: for-each not applicable to ex<br>
pression type<br>
for (int item: constantDrops) {<br>
^<br>
required: array or java.lang.Iterable<br>
found:    NPCDrops<br>
src\server\model\npcs\NPCHandler.java:2642: error: cannot find symbol<br>
int randomDrop = Misc.random(rareDrop ? (rareDrops.l<br>
ength - 1) : (normalDrops.length - 1));<br>
^<br>
symbol:   variable length<br>
location: variable rareDrops of type NPCDrops<br>
src\server\model\npcs\NPCHandler.java:2642: error: cannot find symbol<br>
int randomDrop = Misc.random(rareDrop ? (rareDrops.l<br>
ength - 1) : (normalDrops.length - 1));</p>
<pre><code>                     ^
</code></pre>
<p>symbol:   variable length<br>
location: variable normalDrops of type NPCDrops<br>
src\server\model\npcs\NPCHandler.java:2644: error: array required, but NPCDrops<br>
found<br>
c.getItems().addItemToBank(rareDrops[randomD<br>
rop][0], rareDrops[randomDrop][1]);<br>
^<br>
src\server\model\npcs\NPCHandler.java:2644: error: array required, but NPCDrops<br>
found<br>
c.getItems().addItemToBank(rareDrops[randomD<br>
rop][0], rareDrops[randomDrop][1]);</p>
<pre><code>              ^
</code></pre>
<p>src\server\model\npcs\NPCHandler.java:2646: error: array required, but NPCDrops<br>
found<br>
c.getItems().addItemToBank(normalDrops[rando<br>
mDrop][0], normalDrops[randomDrop][1]);<br>
^<br>
src\server\model\npcs\NPCHandler.java:2646: error: array required, but NPCDrops<br>
found<br>
c.getItems().addItemToBank(normalDrops[rando<br>
mDrop][0], normalDrops[randomDrop][1]);</p>
<pre><code>                  ^
</code></pre>
<p>Note: Some input files use unchecked or unsafe operations.<br>
Note: Recompile with -Xlint:unchecked for details.<br>
10 errors<br>
Press any key to continue . . .[/code][/quote]<br>
Like I said, the code provided was never tested. The most I can do is write what I can only <span class="bbcode-i">assume</span> would work based on what you provide.</p>
<p>The first few errors are due the NPCDrop objects within the method I created (normalDrops, constantDrops, rareDrops) are not arrays. So you need to add [] for the constantDrops, and [][] for the normalDrops and rareDrops.<br>
That will eliminate some.</p>
<p>After that compiles we can work on the next errors.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-simulating-killing-monsters-and-adding-loot-to-bank/551961/14">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-simulating-killing-monsters-and-adding-loot-to-bank/551961/14</link>
        <pubDate>Sat, 13 Jun 2015 15:34:30 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-551961-14</guid>
        <source url="https://forum.moparisthebest.com/t/pi-simulating-killing-monsters-and-adding-loot-to-bank/551961.rss">PI simulating killing monsters and adding loot to bank</source>
      </item>
      <item>
        <title>PI simulating killing monsters and adding loot to bank</title>
        <dc:creator><![CDATA[@Quintorz Quintorz]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/quintorz">@Quintorz</a> wrote:</p>
          <blockquote>
              <p>[quote=“sk8rdude461, post:11, topic:551961”]Oh. if you’re trying to do that it takes a lot less code than what I provided.</p>
<p>To simulate a kill, you don’t actually have to modify the NPC at all.<br>
All you’d have to do is grab it’s drops as I did, and then loop the constant drops X times, and then within that loop add in the normal item drop and the rare item drop.</p>
<p><code>public static void killAndBank(Client c, int npcType, int amountToKill) {
	/*
	 * Making sure client is not null, as they're getting the drops.
	 */
	if (c == null) {
		return;
	}
	try {
		/*
		 * Loading NPCDrops for the NPC.
		 * Does not need to be in loop as the npcType NEVER changes.
		 */
		NPCDrops constantDrops = NPCDrops.constantDrops.get(npcType);
		NPCDrops normalDrops = NPCDrops.normalDrops.get(npcType); // Was never used?
		NPCDrops rareDrops = NPCDrops.rareDrops.get(npcType);
		boolean rareDrop = false;
		int ringOfWealth = 0;
		int npcDropRate = NPCDrops.dropRarity.get(npcType).intValue();
		for (int i = 0; i &lt; amountToKill; i++) {
			for (int item: constantDrops) {
				c.getItems().addItemToBank(item, 1);
			}
			/*
			 * This was modelled after the standard PI's rareDrops(int npcIndex) method.
			 * It will either drop 1 rare item or 1 normal item assuming the NPCDrops are not null. 
			 */
			ringOfWealth = (c.playerEquipment[c.playerRing] == 2572 &amp;&amp; (npcDropRate - 3 &gt; 0) ? (1 + Misc.random(2)) : 0);
			rareDrop = Misc.random(npcDropRate - ringOfWealth) == 0;
			int randomDrop = Misc.random(rareDrop ? (rareDrops.length - 1) : (normalDrops.length - 1));
			if (rareDrop &amp;&amp; rareDrops != null) {
				c.getItems().addItemToBank(rareDrops[randomDrop][0], rareDrops[randomDrop][1]);
			} else if (!rareDrop &amp;&amp; normalDrops != null) {
				c.getItems().addItemToBank(normalDrops[randomDrop][0], normalDrops[randomDrop][1]);
			}
			/*
			 * Finished getting drops from NPC, tell player they killed.
			 */
			c.sendMessage("Killed " + i + " of " + amountToKill + " for npc id: " + npcType);
		}
		c.sendMessage("All " + amountToKill + " NPCs with a id of " + npcType + " have been killed.");
	} catch (NullPointerException er) {
		/*
		 * If anything goes wrong, the catch should handle it and prevent the serve from crashing.
		 * It will trace any error to console.
		 */
		c.sendMessage("An error occurred when attempting to kill NPCs. Please read console.");
		er.printStackTrace();
	}
}</code>[/quote]</p>
<p>errors :</p>
<p>[code]src\server\model\npcs\NPCHandler.java:2626: error: incompatible types: int[] can<br>
not be converted to NPCDrops<br>
NPCDrops constantDrops = NPCDrops.constantDrops.get(npcType)<br>
;<br>
^<br>
src\server\model\npcs\NPCHandler.java:2627: error: incompatible types: int[][] c<br>
annot be converted to NPCDrops<br>
NPCDrops normalDrops = NPCDrops.normalDrops.get(npcType); //<br>
Was never used?<br>
^<br>
src\server\model\npcs\NPCHandler.java:2628: error: incompatible types: int[][] c<br>
annot be converted to NPCDrops<br>
NPCDrops rareDrops = NPCDrops.rareDrops.get(npcType);<br>
^<br>
src\server\model\npcs\NPCHandler.java:2633: error: for-each not applicable to ex<br>
pression type<br>
for (int item: constantDrops) {<br>
^<br>
required: array or java.lang.Iterable<br>
found:    NPCDrops<br>
src\server\model\npcs\NPCHandler.java:2642: error: cannot find symbol<br>
int randomDrop = Misc.random(rareDrop ? (rareDrops.l<br>
ength - 1) : (normalDrops.length - 1));<br>
^<br>
symbol:   variable length<br>
location: variable rareDrops of type NPCDrops<br>
src\server\model\npcs\NPCHandler.java:2642: error: cannot find symbol<br>
int randomDrop = Misc.random(rareDrop ? (rareDrops.l<br>
ength - 1) : (normalDrops.length - 1));</p>
<pre><code>                     ^
</code></pre>
<p>symbol:   variable length<br>
location: variable normalDrops of type NPCDrops<br>
src\server\model\npcs\NPCHandler.java:2644: error: array required, but NPCDrops<br>
found<br>
c.getItems().addItemToBank(rareDrops[randomD<br>
rop][0], rareDrops[randomDrop][1]);<br>
^<br>
src\server\model\npcs\NPCHandler.java:2644: error: array required, but NPCDrops<br>
found<br>
c.getItems().addItemToBank(rareDrops[randomD<br>
rop][0], rareDrops[randomDrop][1]);</p>
<pre><code>              ^
</code></pre>
<p>src\server\model\npcs\NPCHandler.java:2646: error: array required, but NPCDrops<br>
found<br>
c.getItems().addItemToBank(normalDrops[rando<br>
mDrop][0], normalDrops[randomDrop][1]);<br>
^<br>
src\server\model\npcs\NPCHandler.java:2646: error: array required, but NPCDrops<br>
found<br>
c.getItems().addItemToBank(normalDrops[rando<br>
mDrop][0], normalDrops[randomDrop][1]);</p>
<pre><code>                  ^
</code></pre>
<p>Note: Some input files use unchecked or unsafe operations.<br>
Note: Recompile with -Xlint:unchecked for details.<br>
10 errors<br>
Press any key to continue . . .[/code]</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-simulating-killing-monsters-and-adding-loot-to-bank/551961/13">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-simulating-killing-monsters-and-adding-loot-to-bank/551961/13</link>
        <pubDate>Sat, 13 Jun 2015 13:17:56 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-551961-13</guid>
        <source url="https://forum.moparisthebest.com/t/pi-simulating-killing-monsters-and-adding-loot-to-bank/551961.rss">PI simulating killing monsters and adding loot to bank</source>
      </item>
      <item>
        <title>PI simulating killing monsters and adding loot to bank</title>
        <dc:creator><![CDATA[@matzie matzie]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/matzie">@matzie</a> wrote:</p>
          <blockquote>
              <p>[quote=“sk8rdude461, post:11, topic:551961”]Oh. if you’re trying to do that it takes a lot less code than what I provided.</p>
<p>To simulate a kill, you don’t actually have to modify the NPC at all.<br>
All you’d have to do is grab it’s drops as I did, and then loop the constant drops X times, and then within that loop add in the normal item drop and the rare item drop.</p>
<p><code>public static void killAndBank(Client c, int npcType, int amountToKill) {
	/*
	 * Making sure client is not null, as they're getting the drops.
	 */
	if (c == null) {
		return;
	}
	try {
		/*
		 * Loading NPCDrops for the NPC.
		 * Does not need to be in loop as the npcType NEVER changes.
		 */
		NPCDrops constantDrops = NPCDrops.constantDrops.get(npcType);
		NPCDrops normalDrops = NPCDrops.normalDrops.get(npcType); // Was never used?
		NPCDrops rareDrops = NPCDrops.rareDrops.get(npcType);
		boolean rareDrop = false;
		int ringOfWealth = 0;
		int npcDropRate = NPCDrops.dropRarity.get(npcType).intValue();
		for (int i = 0; i &lt; amountToKill; i++) {
			for (int item: constantDrops) {
				c.getItems().addItemToBank(item, 1);
			}
			/*
			 * This was modelled after the standard PI's rareDrops(int npcIndex) method.
			 * It will either drop 1 rare item or 1 normal item assuming the NPCDrops are not null. 
			 */
			ringOfWealth = (c.playerEquipment[c.playerRing] == 2572 &amp;&amp; (npcDropRate - 3 &gt; 0) ? (1 + Misc.random(2)) : 0);
			rareDrop = Misc.random(npcDropRate - ringOfWealth) == 0;
			int randomDrop = Misc.random(rareDrop ? (rareDrops.length - 1) : (normalDrops.length - 1));
			if (rareDrop &amp;&amp; rareDrops != null) {
				c.getItems().addItemToBank(rareDrops[randomDrop][0], rareDrops[randomDrop][1]);
			} else if (!rareDrop &amp;&amp; normalDrops != null) {
				c.getItems().addItemToBank(normalDrops[randomDrop][0], normalDrops[randomDrop][1]);
			}
			/*
			 * Finished getting drops from NPC, tell player they killed.
			 */
			c.sendMessage("Killed " + i + " of " + amountToKill + " for npc id: " + npcType);
		}
		c.sendMessage("All " + amountToKill + " NPCs with a id of " + npcType + " have been killed.");
	} catch (NullPointerException er) {
		/*
		 * If anything goes wrong, the catch should handle it and prevent the serve from crashing.
		 * It will trace any error to console.
		 */
		c.sendMessage("An error occurred when attempting to kill NPCs. Please read console.");
		er.printStackTrace();
	}
}</code>[/quote]<br>
I feel sorry for who ever was fighting npc <span class="hashtag">#50</span> lol.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-simulating-killing-monsters-and-adding-loot-to-bank/551961/12">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-simulating-killing-monsters-and-adding-loot-to-bank/551961/12</link>
        <pubDate>Sat, 13 Jun 2015 04:08:39 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-551961-12</guid>
        <source url="https://forum.moparisthebest.com/t/pi-simulating-killing-monsters-and-adding-loot-to-bank/551961.rss">PI simulating killing monsters and adding loot to bank</source>
      </item>
      <item>
        <title>PI simulating killing monsters and adding loot to bank</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <p>Oh. if you’re trying to do that it takes a lot less code than what I provided.</p>
<p>To simulate a kill, you don’t actually have to modify the NPC at all.<br>
All you’d have to do is grab it’s drops as I did, and then loop the constant drops X times, and then within that loop add in the normal item drop and the rare item drop.</p>
<p><code>public static void killAndBank(Client c, int npcType, int amountToKill) {
	/*
	 * Making sure client is not null, as they're getting the drops.
	 */
	if (c == null) {
		return;
	}
	try {
		/*
		 * Loading NPCDrops for the NPC.
		 * Does not need to be in loop as the npcType NEVER changes.
		 */
		NPCDrops constantDrops = NPCDrops.constantDrops.get(npcType);
		NPCDrops normalDrops = NPCDrops.normalDrops.get(npcType); // Was never used?
		NPCDrops rareDrops = NPCDrops.rareDrops.get(npcType);
		boolean rareDrop = false;
		int ringOfWealth = 0;
		int npcDropRate = NPCDrops.dropRarity.get(npcType).intValue();
		for (int i = 0; i &lt; amountToKill; i++) {
			for (int item: constantDrops) {
				c.getItems().addItemToBank(item, 1);
			}
			/*
			 * This was modelled after the standard PI's rareDrops(int npcIndex) method.
			 * It will either drop 1 rare item or 1 normal item assuming the NPCDrops are not null. 
			 */
			ringOfWealth = (c.playerEquipment[c.playerRing] == 2572 &amp;&amp; (npcDropRate - 3 &gt; 0) ? (1 + Misc.random(2)) : 0);
			rareDrop = Misc.random(npcDropRate - ringOfWealth) == 0;
			int randomDrop = Misc.random(rareDrop ? (rareDrops.length - 1) : (normalDrops.length - 1));
			if (rareDrop &amp;&amp; rareDrops != null) {
				c.getItems().addItemToBank(rareDrops[randomDrop][0], rareDrops[randomDrop][1]);
			} else if (!rareDrop &amp;&amp; normalDrops != null) {
				c.getItems().addItemToBank(normalDrops[randomDrop][0], normalDrops[randomDrop][1]);
			}
			/*
			 * Finished getting drops from NPC, tell player they killed.
			 */
			c.sendMessage("Killed " + i + " of " + amountToKill + " for npc id: " + npcType);
		}
		c.sendMessage("All " + amountToKill + " NPCs with a id of " + npcType + " have been killed.");
	} catch (NullPointerException er) {
		/*
		 * If anything goes wrong, the catch should handle it and prevent the serve from crashing.
		 * It will trace any error to console.
		 */
		c.sendMessage("An error occurred when attempting to kill NPCs. Please read console.");
		er.printStackTrace();
	}
}</code></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-simulating-killing-monsters-and-adding-loot-to-bank/551961/11">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-simulating-killing-monsters-and-adding-loot-to-bank/551961/11</link>
        <pubDate>Fri, 12 Jun 2015 17:11:19 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-551961-11</guid>
        <source url="https://forum.moparisthebest.com/t/pi-simulating-killing-monsters-and-adding-loot-to-bank/551961.rss">PI simulating killing monsters and adding loot to bank</source>
      </item>
      <item>
        <title>PI simulating killing monsters and adding loot to bank</title>
        <dc:creator><![CDATA[@Quintorz Quintorz]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/quintorz">@Quintorz</a> wrote:</p>
          <blockquote>
              <p>[quote=“sk8rdude461, post:9, topic:551961”]Since you didn’t give the method start, I’m not exactly sure what the “i” variable is…<br>
However, if you are using “i” from your command and are using the command like this:<br>
::kill 101 (101 being the npcId of a goblin) then that’s why the command is not working.<br>
In your method you use i as the index for the npc… And your npc ID does not equal the index.</p>
<p>You also set the npcType for the npc at the index of i to the value of i… That could cause some strange changes in the server/client.</p>
<p>Your code is rather… Messy (Even matzie’s cleaned format) and I’m not understanding exactly what you’re trying to do.</p>
<p>Are you trying to kill all of 1 npcType (so all of the goblins if you type ::kill 101) and then add the items to bank as if you killed them?<br>
Are you adding all rares or just 1 randomly? Are you adding all normal drops or one randomly as well? How about constants?</p>
<p>There are ways you can clean the method… 10 fold.</p>
<p>I made a copy of your code… The best I could with what was provided. In theory it will work, but I didn’t test it.<br>
It’s also poorly documented to explain what I did.</p>
<p>[code=java]public static NPC getNpcForId(int npcId) {<br>
for(NPC n : NPCHandler.npcs) {<br>
if(n != null &amp;&amp; n.npcType == npcId) {<br>
return n;<br>
}<br>
}<br>
return null;<br>
}</p>
<p>public static void killAndBank(Client c, int npcType) {<br>
/*<br>
* Making sure client is not null, as they’re getting the drops.<br>
<em>/<br>
if(c == null) {<br>
return;<br>
}<br>
/</em><br>
* Verify that at least 1 of the NPCs exist under the npcType.<br>
<em>/<br>
if(getNpcForId(npcType) == null) {<br>
c.sendMessage("Could not find npc with ID: " + npcType);<br>
return;<br>
}<br>
try {<br>
/</em><br>
* Loading NPCDrops for the NPC.<br>
* Does not need to be in loop as the npcType NEVER changes.<br>
<em>/<br>
NPCDrops constantDrops = NPCDrops.constantDrops.get(npcType);<br>
NPCDrops normalDrops = NPCDrops.normalDrops.get(npcType);// Was never used?<br>
NPCDrops rareDrops = NPCDrops.rareDrops.get(npcType);<br>
int amountKilled = 0;// How many you killed.<br>
/</em><br>
* Looping through all existing NPCs to find/kill ALL NPCs with a npcType<br>
* that is equal to the npcType we are looking for.<br>
<em>/<br>
for(NPC n : NPCHandler.npcs) {<br>
if(n != null &amp;&amp; n.npcType == npcType) {<br>
for (int item : constantDrops) {<br>
c.getItems().addItemToBank(item, 1);<br>
/</em><br>
* With how it’s currently set up you will randomly get a rare drops<br>
* as the CONSTANT drops are being added to your bank. This was modelled<br>
* after what I saw in your code.<br>
<em>/<br>
boolean rareDrop = (Misc.random(99) + 1) &gt; 98;<br>
if(rareDrop &amp;&amp; rareDrops != null) {<br>
int randomDrop = Misc.random(rareDrops.length-1);<br>
c.getItems().addItemToBank(rareDrops[randomDrop][0], rareDrops[randomDrop][1]);<br>
}<br>
}<br>
/</em><br>
* Finished getting drops from NPC. time to kill.<br>
<em>/<br>
n.HP = 0;<br>
n.isDead = true;<br>
n.applyDead = false;<br>
n.needRespawn = false;<br>
amountKilled++;<br>
c.sendMessage("Killed NPC with index of " + n.npcIndex);<br>
}<br>
}<br>
c.sendMessage("You killed " + amountKilled + " of npc id: " + npcType + “, loot was added to your bank.”);<br>
} catch(NullPointerException er) {<br>
/</em><br>
* If anything goes wrong, the catch should handle it and prevent the serve from crashing.<br>
* It will trace any error to console.<br>
*/<br>
c.sendMessage(“An error occurred when attempting to kill NPCs. Please read console.”);<br>
er.printStackTrace();<br>
}<br>
}[/code][/quote]</p>
<p>Im trying to make it so it simulates killing etc 100 kbds and adding the drops to the bank if i type ::kill 50 100 ingame</p>
<p>The full method is :<br>
And the “i” is the npc id</p>
<p>[code]public static void killMonstersMethod(Client c,int i, int amount) {<br>
c.sendMessage(“killmonstersmethod started”);<br>
int npc = 0;<br>
int a;<br>
npcs[i].npcType = i;<br>
for (a = 0; a &lt; amount; a++) {<br>
c.sendMessage("killed: " + (a+1) + " of " + amount + " of npc " + i + “”);<br>
int random = Misc.random(NPCDrops.normalDrops.get(npcs[i].npcType).length-1);<br>
int random1 = Misc.random(NPCDrops.normalDrops.get(npcs[i].npcType).length-1);<br>
if (NPCDrops.constantDrops.get(npcs[i].npcType) != null) {<br>
for (int item : NPCDrops.constantDrops.get(npcs[i].npcType)) {	<br>
c.getItems().addItemToBank(item,1);<br>
c.getItems().addItemToBank(NPCDrops.normalDrops.get(npcs[i].npcType)[random1][0],NPCDrops.normalDrops.get(npcs[i].npcType)[random1][1]);<br>
int raredrops = Misc.random(99)+1;<br>
if (raredrops &gt;= 98){<br>
int Random = Misc.random(NPCDrops.rareDrops.get(npcs[i].npcType).length-1);<br>
int Random1 = Misc.random(NPCDrops.rareDrops.get(npcs[i].npcType).length-1);<br>
c.getItems().addItemToBank(NPCDrops.rareDrops.get(npcs[i].npcType)[random][0],NPCDrops.rareDrops.get(npcs[i].npcType)[random][1]);<br>
}<br>
}	<br>
}<br>
}<br>
if (a != amount){<br>
c.sendMessage(“the script froze but is resetting and should kill the rest”);<br>
killMonstersMethod(c,i, a - amount);<br>
return;<br>
}</p>
<pre><code>		c.sendMessage("You have now killed "+amount+" of npc id: "+i+", loot was added to your bank ");

	}[/code]</code></pre>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-simulating-killing-monsters-and-adding-loot-to-bank/551961/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-simulating-killing-monsters-and-adding-loot-to-bank/551961/10</link>
        <pubDate>Fri, 12 Jun 2015 16:05:57 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-551961-10</guid>
        <source url="https://forum.moparisthebest.com/t/pi-simulating-killing-monsters-and-adding-loot-to-bank/551961.rss">PI simulating killing monsters and adding loot to bank</source>
      </item>
      <item>
        <title>PI simulating killing monsters and adding loot to bank</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <p>Since you didn’t give the method start, I’m not exactly sure what the “i” variable is…<br>
However, if you are using “i” from your command and are using the command like this:<br>
::kill 101 (101 being the npcId of a goblin) then that’s why the command is not working.<br>
In your method you use i as the index for the npc… And your npc ID does not equal the index.</p>
<p>You also set the npcType for the npc at the index of i to the value of i… That could cause some strange changes in the server/client.</p>
<p>Your code is rather… Messy (Even matzie’s cleaned format) and I’m not understanding exactly what you’re trying to do.</p>
<p>Are you trying to kill all of 1 npcType (so all of the goblins if you type ::kill 101) and then add the items to bank as if you killed them?<br>
Are you adding all rares or just 1 randomly? Are you adding all normal drops or one randomly as well? How about constants?</p>
<p>There are ways you can clean the method… 10 fold.</p>
<p>I made a copy of your code… The best I could with what was provided. In theory it will work, but I didn’t test it.<br>
It’s also poorly documented to explain what I did.</p>
<p>[code=java]public static NPC getNpcForId(int npcId) {<br>
for(NPC n : NPCHandler.npcs) {<br>
if(n != null &amp;&amp; n.npcType == npcId) {<br>
return n;<br>
}<br>
}<br>
return null;<br>
}</p>
<p>public static void killAndBank(Client c, int npcType) {<br>
/*<br>
* Making sure client is not null, as they’re getting the drops.<br>
<em>/<br>
if(c == null) {<br>
return;<br>
}<br>
/</em><br>
* Verify that at least 1 of the NPCs exist under the npcType.<br>
<em>/<br>
if(getNpcForId(npcType) == null) {<br>
c.sendMessage("Could not find npc with ID: " + npcType);<br>
return;<br>
}<br>
try {<br>
/</em><br>
* Loading NPCDrops for the NPC.<br>
* Does not need to be in loop as the npcType NEVER changes.<br>
<em>/<br>
NPCDrops constantDrops = NPCDrops.constantDrops.get(npcType);<br>
NPCDrops normalDrops = NPCDrops.normalDrops.get(npcType);// Was never used?<br>
NPCDrops rareDrops = NPCDrops.rareDrops.get(npcType);<br>
int amountKilled = 0;// How many you killed.<br>
/</em><br>
* Looping through all existing NPCs to find/kill ALL NPCs with a npcType<br>
* that is equal to the npcType we are looking for.<br>
<em>/<br>
for(NPC n : NPCHandler.npcs) {<br>
if(n != null &amp;&amp; n.npcType == npcType) {<br>
for (int item : constantDrops) {<br>
c.getItems().addItemToBank(item, 1);<br>
/</em><br>
* With how it’s currently set up you will randomly get a rare drops<br>
* as the CONSTANT drops are being added to your bank. This was modelled<br>
* after what I saw in your code.<br>
<em>/<br>
boolean rareDrop = (Misc.random(99) + 1) &gt; 98;<br>
if(rareDrop &amp;&amp; rareDrops != null) {<br>
int randomDrop = Misc.random(rareDrops.length-1);<br>
c.getItems().addItemToBank(rareDrops[randomDrop][0], rareDrops[randomDrop][1]);<br>
}<br>
}<br>
/</em><br>
* Finished getting drops from NPC. time to kill.<br>
<em>/<br>
n.HP = 0;<br>
n.isDead = true;<br>
n.applyDead = false;<br>
n.needRespawn = false;<br>
amountKilled++;<br>
c.sendMessage("Killed NPC with index of " + n.npcIndex);<br>
}<br>
}<br>
c.sendMessage("You killed " + amountKilled + " of npc id: " + npcType + “, loot was added to your bank.”);<br>
} catch(NullPointerException er) {<br>
/</em><br>
* If anything goes wrong, the catch should handle it and prevent the serve from crashing.<br>
* It will trace any error to console.<br>
*/<br>
c.sendMessage(“An error occurred when attempting to kill NPCs. Please read console.”);<br>
er.printStackTrace();<br>
}<br>
}[/code]</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-simulating-killing-monsters-and-adding-loot-to-bank/551961/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-simulating-killing-monsters-and-adding-loot-to-bank/551961/9</link>
        <pubDate>Fri, 12 Jun 2015 15:53:42 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-551961-9</guid>
        <source url="https://forum.moparisthebest.com/t/pi-simulating-killing-monsters-and-adding-loot-to-bank/551961.rss">PI simulating killing monsters and adding loot to bank</source>
      </item>
      <item>
        <title>PI simulating killing monsters and adding loot to bank</title>
        <dc:creator><![CDATA[@matzie matzie]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/matzie">@matzie</a> wrote:</p>
          <blockquote>
              <p><span class="bbcode-s">post the entire method? I want to see your variables. (For killMonsterMEthod)</span><br>
Nevermind dont need them.<br>
Your problem is somewhere in the bank method or following logic.<br>
can you explain this line to me?</p>
<pre><code class="lang-auto"></code></pre>
<p>You have a try/catch block for the exception and its just throwing it and silently it gets discarded.</p>
<p>do a stack trace in your catch and look where your real problem is. because your loop code is fine(loosely defined).</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-simulating-killing-monsters-and-adding-loot-to-bank/551961/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-simulating-killing-monsters-and-adding-loot-to-bank/551961/8</link>
        <pubDate>Fri, 12 Jun 2015 14:13:29 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-551961-8</guid>
        <source url="https://forum.moparisthebest.com/t/pi-simulating-killing-monsters-and-adding-loot-to-bank/551961.rss">PI simulating killing monsters and adding loot to bank</source>
      </item>
      <item>
        <title>PI simulating killing monsters and adding loot to bank</title>
        <dc:creator><![CDATA[@Quintorz Quintorz]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/quintorz">@Quintorz</a> wrote:</p>
          <blockquote>
              <p>[quote=“matzie, post:6, topic:551961”]<code>for (a = 0; a &lt; amount; a++) {
            c.sendMessage("killed: " + (a+1) + " of " + amount + " of npc " + i + "");</code>[/quote]</p>
<p>stopped again… look:</p>
<p><a href="http://prntscr.com/7g463v" class="onebox" target="_blank" rel="nofollow noopener">http://prntscr.com/7g463v</a></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-simulating-killing-monsters-and-adding-loot-to-bank/551961/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-simulating-killing-monsters-and-adding-loot-to-bank/551961/7</link>
        <pubDate>Fri, 12 Jun 2015 13:59:23 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-551961-7</guid>
        <source url="https://forum.moparisthebest.com/t/pi-simulating-killing-monsters-and-adding-loot-to-bank/551961.rss">PI simulating killing monsters and adding loot to bank</source>
      </item>
      <item>
        <title>PI simulating killing monsters and adding loot to bank</title>
        <dc:creator><![CDATA[@matzie matzie]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/matzie">@matzie</a> wrote:</p>
          <blockquote>
              <p><code>for (a = 0; a &lt; amount; a++) {
            c.sendMessage("killed: " + (a+1) + " of " + amount + " of npc " + i + "");</code></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-simulating-killing-monsters-and-adding-loot-to-bank/551961/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-simulating-killing-monsters-and-adding-loot-to-bank/551961/6</link>
        <pubDate>Fri, 12 Jun 2015 13:45:48 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-551961-6</guid>
        <source url="https://forum.moparisthebest.com/t/pi-simulating-killing-monsters-and-adding-loot-to-bank/551961.rss">PI simulating killing monsters and adding loot to bank</source>
      </item>
      <item>
        <title>PI simulating killing monsters and adding loot to bank</title>
        <dc:creator><![CDATA[@Quintorz Quintorz]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/quintorz">@Quintorz</a> wrote:</p>
          <blockquote>
              <p>[quote=“matzie, post:4, topic:551961”][code=java5]<br>
c.sendMessage(“killmonstersmethod started”);<br>
int npc = 0;<br>
int a;<br>
npcs[i].npcType = i;<br>
for (a = 1; a &lt;= amount; a++) {<br>
c.sendMessage("killed: " + a + " of " + amount + " of npc " + i + “”);<br>
int random = Misc.random(NPCDrops.normalDrops.get(npcs[i].npcType).length - 1);<br>
int random1 = Misc.random(NPCDrops.normalDrops.get(npcs[i].npcType).length - 1);<br>
if (NPCDrops.constantDrops.get(npcs[i].npcType) != null) {<br>
for (int item : NPCDrops.constantDrops.get(npcs[i].npcType)) {<br>
c.getItems().addItemToBank(item, 1);<br>
c.getItems().addItemToBank(NPCDrops.normalDrops.get(npcs[i].npcType)[random1][0], NPCDrops.normalDrops.get(npcs[i].npcType)[random1][1]);<br>
int raredrops = Misc.random(99) + 1;<br>
if (raredrops &gt;= 98) {<br>
int Random = Misc.random(NPCDrops.rareDrops.get(npcs[i].npcType).length - 1);<br>
int Random1 = Misc.random(NPCDrops.rareDrops.get(npcs[i].npcType).length - 1);<br>
c.getItems().addItemToBank(NPCDrops.rareDrops.get(npcs[i].npcType)[random][0], NPCDrops.rareDrops.get(npcs[i].npcType)[random][1]);<br>
}<br>
}<br>
}<br>
}<br>
if (a != amount) {<br>
c.sendMessage(“the script froze but is resetting and should kill the rest”);<br>
killMonstersMethod(c, i, a - amount);<br>
return;<br>
}</p>
<pre><code>    c.sendMessage("You have now killed " + amount + " of npc id: " + i + ", loot was added to your bank ");

}[/code]
</code></pre>
<p>You did not start out having killed one already.<br>
The reason your if is triggered is because when the loop finishes a = amount + 1, that is the value needed to exit the loop.<br>
your if should be if (a &lt;=amount) { //do it again} but in reality, your for loop has no way to exit early without an error, and there is no error catching here. Your code would not be executed if it were to exit prematurely.[/quote]</p>
<p>can you help me a little bit, im tired. ive been working on makiing this work for a long time. and my brain is tired.<br>
what do i have to change to make it work as it should ?<br>
Dont ya have skype or something like that?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-simulating-killing-monsters-and-adding-loot-to-bank/551961/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-simulating-killing-monsters-and-adding-loot-to-bank/551961/5</link>
        <pubDate>Fri, 12 Jun 2015 13:41:24 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-551961-5</guid>
        <source url="https://forum.moparisthebest.com/t/pi-simulating-killing-monsters-and-adding-loot-to-bank/551961.rss">PI simulating killing monsters and adding loot to bank</source>
      </item>
      <item>
        <title>PI simulating killing monsters and adding loot to bank</title>
        <dc:creator><![CDATA[@matzie matzie]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/matzie">@matzie</a> wrote:</p>
          <blockquote>
              <p>[code=java5]<br>
c.sendMessage(“killmonstersmethod started”);<br>
int npc = 0;<br>
int a;<br>
npcs[i].npcType = i;<br>
for (a = 1; a &lt;= amount; a++) {<br>
c.sendMessage("killed: " + a + " of " + amount + " of npc " + i + “”);<br>
int random = Misc.random(NPCDrops.normalDrops.get(npcs[i].npcType).length - 1);<br>
int random1 = Misc.random(NPCDrops.normalDrops.get(npcs[i].npcType).length - 1);<br>
if (NPCDrops.constantDrops.get(npcs[i].npcType) != null) {<br>
for (int item : NPCDrops.constantDrops.get(npcs[i].npcType)) {<br>
c.getItems().addItemToBank(item, 1);<br>
c.getItems().addItemToBank(NPCDrops.normalDrops.get(npcs[i].npcType)[random1][0], NPCDrops.normalDrops.get(npcs[i].npcType)[random1][1]);<br>
int raredrops = Misc.random(99) + 1;<br>
if (raredrops &gt;= 98) {<br>
int Random = Misc.random(NPCDrops.rareDrops.get(npcs[i].npcType).length - 1);<br>
int Random1 = Misc.random(NPCDrops.rareDrops.get(npcs[i].npcType).length - 1);<br>
c.getItems().addItemToBank(NPCDrops.rareDrops.get(npcs[i].npcType)[random][0], NPCDrops.rareDrops.get(npcs[i].npcType)[random][1]);<br>
}<br>
}<br>
}<br>
}<br>
if (a != amount) {<br>
c.sendMessage(“the script froze but is resetting and should kill the rest”);<br>
killMonstersMethod(c, i, a - amount);<br>
return;<br>
}</p>
<pre><code>    c.sendMessage("You have now killed " + amount + " of npc id: " + i + ", loot was added to your bank ");

}[/code]
</code></pre>
<p>You did not start out having killed one already.<br>
The reason your if is triggered is because when the loop finishes a = amount + 1, that is the value needed to exit the loop.<br>
your if should be if (a &lt;=amount) { //do it again} but in reality, your for loop has no way to exit early without an error, and there is no error catching here. Your code would not be executed if it were to exit prematurely.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-simulating-killing-monsters-and-adding-loot-to-bank/551961/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-simulating-killing-monsters-and-adding-loot-to-bank/551961/4</link>
        <pubDate>Fri, 12 Jun 2015 13:27:03 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-551961-4</guid>
        <source url="https://forum.moparisthebest.com/t/pi-simulating-killing-monsters-and-adding-loot-to-bank/551961.rss">PI simulating killing monsters and adding loot to bank</source>
      </item>
      <item>
        <title>PI simulating killing monsters and adding loot to bank</title>
        <dc:creator><![CDATA[@Quintorz Quintorz]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/quintorz">@Quintorz</a> wrote:</p>
          <blockquote>
              <p>[quote=“Driman Rune, post:2, topic:551961”][quote author=Quintorz link=topic=670878.msg4486218#msg4486218 date=1434111502]<br>
title says it all…</p>
<p>But im having some issues:/</p>
<p>it stops at random amount of “npcs killed” and dosent continue…<br>
I hope some of ya can help me:/</p>
<p>Command to choose npc id and amount to kill</p>
<p><code>if (playerCommand.startsWith("kill")){
				try{
			String[] args = playerCommand.split(" ");
					if(args.length == 3) {
			NPCHandler.killMonstersMethod(c,Integer.parseInt(args[1]), Integer.parseInt(args[2]));
			}else {
			c.sendMessage("Use as : ::kill *** *** npcid, times to kill)");
			}
			} catch(Exception e){
			}
			}</code></p>
<p>The method:</p>
<p>[code]<br>
c.sendMessage(“killmonstersmethod started”);<br>
int npc = 0;<br>
int a;<br>
npcs[i].npcType = i;<br>
for (a = 1; a &lt;= amount; a++){<br>
c.sendMessage(“killed: “+a+” of “+amount+” of npc “+i+””);<br>
int random = Misc.random(NPCDrops.normalDrops.get(npcs[i].npcType).length-1);<br>
int random1 = Misc.random(NPCDrops.normalDrops.get(npcs[i].npcType).length-1);<br>
if (NPCDrops.constantDrops.get(npcs[i].npcType) != null) {<br>
for (int item : NPCDrops.constantDrops.get(npcs[i].npcType)) {	<br>
c.getItems().addItemToBank(item,1);<br>
c.getItems().addItemToBank(NPCDrops.normalDrops.get(npcs[i].npcType)[random1][0],NPCDrops.normalDrops.get(npcs[i].npcType)[random1][1]);<br>
int raredrops = Misc.random(99)+1;<br>
if (raredrops &gt;= 98){<br>
int Random = Misc.random(NPCDrops.rareDrops.get(npcs[i].npcType).length-1);<br>
int Random1 = Misc.random(NPCDrops.rareDrops.get(npcs[i].npcType).length-1);<br>
c.getItems().addItemToBank(NPCDrops.rareDrops.get(npcs[i].npcType)[random][0],NPCDrops.rareDrops.get(npcs[i].npcType)[random][1]);<br>
}<br>
}	<br>
}<br>
}<br>
if (a != amount){<br>
c.sendMessage(“the script froze but is resetting and should kill the rest”);<br>
killMonstersMethod(c,i, a - amount);<br>
return;<br>
}</p>
<pre><code>		c.sendMessage("You have now killed "+amount+" of npc id: "+i+", loot was added to your bank ");

	}[/code]
</code></pre>
<p>[/quote]</p>
<p>Overall horribly done.</p>
<aside class="quote">
<blockquote>
<p>int Random = Misc.random(NPCDrops.rareDrops.get(npcs[i].npcType).length-1);</p>
</blockquote>
</aside>
<p>should be random, this isn’t <a href="http://vb.net" rel="nofollow noopener">vb.net</a>.[/quote]</p>
<p>That is why i posted it here… to get help</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-simulating-killing-monsters-and-adding-loot-to-bank/551961/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-simulating-killing-monsters-and-adding-loot-to-bank/551961/3</link>
        <pubDate>Fri, 12 Jun 2015 13:24:21 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-551961-3</guid>
        <source url="https://forum.moparisthebest.com/t/pi-simulating-killing-monsters-and-adding-loot-to-bank/551961.rss">PI simulating killing monsters and adding loot to bank</source>
      </item>
      <item>
        <title>PI simulating killing monsters and adding loot to bank</title>
        <dc:creator><![CDATA[@Driman_Rune Driman Rune]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/driman_rune">@Driman_Rune</a> wrote:</p>
          <blockquote>
              <p>[quote=“Quintorz, post:1, topic:551961”]title says it all…</p>
<p>But im having some issues:/</p>
<p>it stops at random amount of “npcs killed” and dosent continue…<br>
I hope some of ya can help me:/</p>
<p>Command to choose npc id and amount to kill</p>
<p><code>if (playerCommand.startsWith("kill")){
				try{
			String[] args = playerCommand.split(" ");
					if(args.length == 3) {
			NPCHandler.killMonstersMethod(c,Integer.parseInt(args[1]), Integer.parseInt(args[2]));
			}else {
			c.sendMessage("Use as : ::kill *** *** npcid, times to kill)");
			}
			} catch(Exception e){
			}
			}</code></p>
<p>The method:</p>
<p>[code]<br>
c.sendMessage(“killmonstersmethod started”);<br>
int npc = 0;<br>
int a;<br>
npcs[i].npcType = i;<br>
for (a = 1; a &lt;= amount; a++){<br>
c.sendMessage(“killed: “+a+” of “+amount+” of npc “+i+””);<br>
int random = Misc.random(NPCDrops.normalDrops.get(npcs[i].npcType).length-1);<br>
int random1 = Misc.random(NPCDrops.normalDrops.get(npcs[i].npcType).length-1);<br>
if (NPCDrops.constantDrops.get(npcs[i].npcType) != null) {<br>
for (int item : NPCDrops.constantDrops.get(npcs[i].npcType)) {	<br>
c.getItems().addItemToBank(item,1);<br>
c.getItems().addItemToBank(NPCDrops.normalDrops.get(npcs[i].npcType)[random1][0],NPCDrops.normalDrops.get(npcs[i].npcType)[random1][1]);<br>
int raredrops = Misc.random(99)+1;<br>
if (raredrops &gt;= 98){<br>
int Random = Misc.random(NPCDrops.rareDrops.get(npcs[i].npcType).length-1);<br>
int Random1 = Misc.random(NPCDrops.rareDrops.get(npcs[i].npcType).length-1);<br>
c.getItems().addItemToBank(NPCDrops.rareDrops.get(npcs[i].npcType)[random][0],NPCDrops.rareDrops.get(npcs[i].npcType)[random][1]);<br>
}<br>
}	<br>
}<br>
}<br>
if (a != amount){<br>
c.sendMessage(“the script froze but is resetting and should kill the rest”);<br>
killMonstersMethod(c,i, a - amount);<br>
return;<br>
}</p>
<pre><code>		c.sendMessage("You have now killed "+amount+" of npc id: "+i+", loot was added to your bank ");

	}[/code][/quote]
</code></pre>
<p>Overall horribly done.</p>
<blockquote>int Random = Misc.random(NPCDrops.rareDrops.get(npcs[i].npcType).length-1);</blockquote>
should be random, this isn't vb.net.
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-simulating-killing-monsters-and-adding-loot-to-bank/551961/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-simulating-killing-monsters-and-adding-loot-to-bank/551961/2</link>
        <pubDate>Fri, 12 Jun 2015 13:18:31 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-551961-2</guid>
        <source url="https://forum.moparisthebest.com/t/pi-simulating-killing-monsters-and-adding-loot-to-bank/551961.rss">PI simulating killing monsters and adding loot to bank</source>
      </item>
      <item>
        <title>PI simulating killing monsters and adding loot to bank</title>
        <dc:creator><![CDATA[@Quintorz Quintorz]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/quintorz">@Quintorz</a> wrote:</p>
          <blockquote>
              <p>title says it all…</p>
<p>But im having some issues:/</p>
<p>it stops at random amount of “npcs killed” and dosent continue…<br>
I hope some of ya can help me:/</p>
<p>Command to choose npc id and amount to kill</p>
<p><code>if (playerCommand.startsWith("kill")){
				try{
			String[] args = playerCommand.split(" ");
					if(args.length == 3) {
			NPCHandler.killMonstersMethod(c,Integer.parseInt(args[1]), Integer.parseInt(args[2]));
			}else {
			c.sendMessage("Use as : ::kill *** *** npcid, times to kill)");
			}
			} catch(Exception e){
			}
			}</code></p>
<p>The method:</p>
<p>[code]<br>
c.sendMessage(“killmonstersmethod started”);<br>
int npc = 0;<br>
int a;<br>
npcs[i].npcType = i;<br>
for (a = 1; a &lt;= amount; a++){<br>
c.sendMessage(“killed: “+a+” of “+amount+” of npc “+i+””);<br>
int random = Misc.random(NPCDrops.normalDrops.get(npcs[i].npcType).length-1);<br>
int random1 = Misc.random(NPCDrops.normalDrops.get(npcs[i].npcType).length-1);<br>
if (NPCDrops.constantDrops.get(npcs[i].npcType) != null) {<br>
for (int item : NPCDrops.constantDrops.get(npcs[i].npcType)) {	<br>
c.getItems().addItemToBank(item,1);<br>
c.getItems().addItemToBank(NPCDrops.normalDrops.get(npcs[i].npcType)[random1][0],NPCDrops.normalDrops.get(npcs[i].npcType)[random1][1]);<br>
int raredrops = Misc.random(99)+1;<br>
if (raredrops &gt;= 98){<br>
int Random = Misc.random(NPCDrops.rareDrops.get(npcs[i].npcType).length-1);<br>
int Random1 = Misc.random(NPCDrops.rareDrops.get(npcs[i].npcType).length-1);<br>
c.getItems().addItemToBank(NPCDrops.rareDrops.get(npcs[i].npcType)[random][0],NPCDrops.rareDrops.get(npcs[i].npcType)[random][1]);<br>
}<br>
}	<br>
}<br>
}<br>
if (a != amount){<br>
c.sendMessage(“the script froze but is resetting and should kill the rest”);<br>
killMonstersMethod(c,i, a - amount);<br>
return;<br>
}</p>
<pre><code>		c.sendMessage("You have now killed "+amount+" of npc id: "+i+", loot was added to your bank ");

	}[/code]</code></pre>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-simulating-killing-monsters-and-adding-loot-to-bank/551961/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-simulating-killing-monsters-and-adding-loot-to-bank/551961/1</link>
        <pubDate>Fri, 12 Jun 2015 12:18:22 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-551961-1</guid>
        <source url="https://forum.moparisthebest.com/t/pi-simulating-killing-monsters-and-adding-loot-to-bank/551961.rss">PI simulating killing monsters and adding loot to bank</source>
      </item>
  </channel>
</rss>
