<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>[667+] Random Rewards Event (with a random generated Command)</title>
    <link>https://forum.moparisthebest.com/t/667-random-rewards-event-with-a-random-generated-command/478412</link>
    <description>Alright, so here&#39;s my thing where you a command is randomly generated and then a player can type the command every 3 minutes when it shows up in-game. Works perfect, no way around it to get multiple results, and things like that.


So first, we&#39;re gonna add one boolean, and one empty string into Settings.java


[code]
public static String RANDOM_COMMAND;
public static boolean RANDOM_REWARD;[/code]


We&#39;re using a String which is left empty so it can be set by the event that occurs every 30 minutes, and the boolean flags to true, so that way the command can&#39;t be retyped after its been typed again. It&#39;s only set back to false after the randomly generated string has been typed as a command, which is announced in-game. Now for the method to randomly generate a  string. This will go in com.rs.Launcher.


[code]
public static String generateString(Random rng, String characters, int length) {
      char[] text = new char[length];
      for (int i = 0; i &lt; length; i++) {
         text[i] = characters.charAt(rng.nextInt(characters.length()));
      }
      return new String(text);
   }[/code]


That will generate a random string based on how you use it when you make a method. It can be set to randomly generate any characters or numbers in a randomized order. This for some reason does work better, however, if it only generates lowercase letters and numbers.


Alright, now still in Launcher, add this method somewhere:


[code]

private static void RandomRewardsTask() {
      CoresManager.slowExecutor.scheduleWithFixedDelay(new Runnable() {
         @Override
         public void run() {
            Settings.RANDOM_REWARD = true;
            System.err
                  .println(&quot;[Rewards] Reward Issued, waiting for someone to claim...&quot;);
            Settings.RANDOM_COMMAND = generateString(new Random(),
                  &quot;abcdefghij1234567890&quot;, 7);
            for (Player player : World.getPlayers()) {
               if (player == null || !player.hasStarted()
                     || player.hasFinished())
                  continue;
               player.getPackets().sendGameMessage(
                     &quot;&lt;img=5&gt; [&lt;col=FFAA00&gt;Notice&lt;/col&gt;]&lt;col=FFAA00&gt; First person to type ::&quot;
                           + Settings.RANDOM_COMMAND
                           + &quot; gets a free item!&quot;);
            }
         }
      }, 1, 30, TimeUnit.MINUTES);
   }[/code]


This is where the magic happens. This starts the event after 1 minute of the server being offline, then it occurs every 30 minutes after that. This will set the boolean to true we added in Settings.java, and set the String that we&#39;ve added. (This method must also be initialized when the server loads.)


Next, we need to add some stuff into com.rs.game.content.custom (If you dont have this package, then you can just make it, or put it else where and change the packaging.)


[code]
package com.rs.game.player.content.custom;


import com.rs.cache.loaders.ItemDefinitions;
import com.rs.game.player.Player;


/**
 * @author King Fox
 * @date Dec. 25, 2012 @ 2:30am CST
 */


public class RandomRewards {
   
   /**
    * The item list, edit these id&#39;s
    */
   private static int randomItemList[] = { 
      2354, 2354, 2354, 2354, 2354,
      2360, 2360, 2360, 2360, 2360,
      448, 448, 448, 448, 448, 
      452, 452, 452, 452, 452,
      1618, 1618, 1618, 1618, 1618,
      200, 200, 200, 200, 200,
      4151
   };
   
   /**
    * Selects a random number from above
    */
   public static int giveRandomItem() {
      return randomItemList[(int) (Math.random()*randomItemList.length)];
   }
   
   
   /**
    * Add more than one number to make it more common, or to make 
    * other numbers less common.
    */
   private static int RandomAmounts[] = { 
      100,100,100,100,100,100,100,100,100,
      200,200,200,200,200,200, 200,
      300,300,300,300,
      400,400,
      500
   };
   
   /**
    * Selects an amount randomly from the above
    */
   public static int getRandomAmount() {
      return RandomAmounts[(int) (Math.random()*RandomAmounts.length)];
   }
   
   /**
    * Calls the methods above, and displays the amount
    * and item given. If its a certain item like 4151 below,
    * then you can display a separate message, as i also have
    */
   public static void Reward(Player p) {
      int item = giveRandomItem();
      ItemDefinitions defs = ItemDefinitions.getItemDefinitions(item);
      String name = defs == null ? &quot;&quot; : defs.getName().toLowerCase();
      int amount = getRandomAmount();
      
      if (item == 4151) {
      p.GlobalMessage(&quot;&lt;img=5&gt; [&lt;col=FF0000&gt;Notice&lt;/col&gt;] &lt;col=FF0000&gt;&quot;+p.getDisplayName()+&quot; has claimed the rare &quot;+name+&quot;!&quot;);
      p.getInventory().addItem(4151, 1);
      } else {
         p.getInventory().addItem(item, amount);
         p.GlobalMessage(&quot;&lt;img=5&gt; [&lt;col=FF0000&gt;Notice&lt;/col&gt;] &lt;col=FF0000&gt;&quot;+p.getDisplayName()+&quot; has claimed &quot;+amount+&quot; &quot;+name+&quot;.&quot;);
      }
   }
}[/code]


All you need to know is commented for you i suppose. Cant get much more self explanatory than that. And so finally, here&#39;s the command that you will need:


[code]if (cmd[0].equals(Settings.RANDOM_COMMAND)) {
   if(Settings.RANDOM_REWARD) {
      player.ResetAttempts();
      Settings.RANDOM_REWARD = false;
      RandomRewards.Reward(player);
      System.err.println(&quot;[Rewards] Reward claimed by &quot;+player.getDisplayName()+&quot;&quot;);
      return true;
   } 
}[/code]




Alright, and there you have it, a fully functional randomly generated command that gives a play a random item, and random amount every 30 minutes, that can only be typed once the event has occured defined by the method in Launcher.java Ik my tutorial is alittle sloppy, but either way result should be the same.




Also, you might need this method:

[code]
public void GlobalMessage(String message) {
      for (Player players : World.getPlayers()) {
         if (players == null || !players.isRunning())
            continue;
         players.getPackets().sendGameMessage(&quot;&quot;+message+&quot;&quot;);
      }
   }[/code]


Thanks
~Fox</description>
    
    <lastBuildDate>Sun, 13 Apr 2014 06:20:38 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/667-random-rewards-event-with-a-random-generated-command/478412.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>[667+] Random Rewards Event (with a random generated Command)</title>
        <dc:creator><![CDATA[@pure2ownage Pure_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/pure2ownage">@pure2ownage</a> wrote:</p>
          <blockquote>
              <p>[quote=“matzie, post:9, topic:478412”][quote author=Pure_ link=topic=596636.msg4408216#msg4408216 date=1392689880]</p>
<aside class="quote">
<blockquote>
<p>Note: Before people ask, because I know someone will, an undeclared Boolean is True.<br>
…<br>
[/quote]An uninitialized boolean’s value is false.</p>
</blockquote>
</aside>
<p>if you create an array of primitatives, the values are all set default (0,false - depending on type) - though if you create a single one it tells you it must be initialized first.</p>
<p>boolean arr[] = new boolean[10];<br>
if (arr[0]);//no error<br>
boolean single;<br>
if (single);//gives error[/quote]I don’t know why you felt the need to grave-dig this. But you are correct, the JVM ‘sets’ the default values of primitive types to 0 (in a booleans case, false).</p>
<p><a href="http://www.fluffycat.com/Java/Primitive-Variables/" class="onebox" target="_blank" rel="nofollow noopener">http://www.fluffycat.com/Java/Primitive-Variables/</a><br>
<a href="http://stackoverflow.com/questions/6226290/default-value-of-boolean-in-java" class="onebox" target="_blank" rel="nofollow noopener">http://stackoverflow.com/questions/6226290/default-value-of-boolean-in-java</a></p>
<p>etc etc</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/667-random-rewards-event-with-a-random-generated-command/478412/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/667-random-rewards-event-with-a-random-generated-command/478412/10</link>
        <pubDate>Sun, 13 Apr 2014 06:20:38 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-478412-10</guid>
        <source url="https://forum.moparisthebest.com/t/667-random-rewards-event-with-a-random-generated-command/478412.rss">[667+] Random Rewards Event (with a random generated Command)</source>
      </item>
      <item>
        <title>[667+] Random Rewards Event (with a random generated Command)</title>
        <dc:creator><![CDATA[@matzie matzie]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/matzie">@matzie</a> wrote:</p>
          <blockquote>
              <p>[quote=“Pure_, post:8, topic:478412”][quote author=Team_Rocket link=topic=596636.msg4200741#msg4200741 date=1358152831]<br>
Note: Before people ask, because I know someone will, an undeclared Boolean is True.<br>
…<br>
[/quote]An uninitialized boolean’s value is false.[/quote]</p>
<p>if you create an array of primitatives, the values are all set default (0,false - depending on type) - though if you create a single one it tells you it must be initialized first.</p>
<p>boolean arr[] = new boolean[10];<br>
if (arr[0]);//no error<br>
boolean single;<br>
if (single);//gives error</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/667-random-rewards-event-with-a-random-generated-command/478412/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/667-random-rewards-event-with-a-random-generated-command/478412/9</link>
        <pubDate>Sun, 13 Apr 2014 05:27:06 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-478412-9</guid>
        <source url="https://forum.moparisthebest.com/t/667-random-rewards-event-with-a-random-generated-command/478412.rss">[667+] Random Rewards Event (with a random generated Command)</source>
      </item>
      <item>
        <title>[667+] Random Rewards Event (with a random generated Command)</title>
        <dc:creator><![CDATA[@pure2ownage Pure_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/pure2ownage">@pure2ownage</a> wrote:</p>
          <blockquote>
              <p>[quote=“Team_Rocket, post:2, topic:478412”]Note: Before people ask, because I know someone will, an undeclared Boolean is True.<br>
…[/quote]An uninitialized boolean’s value is false.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/667-random-rewards-event-with-a-random-generated-command/478412/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/667-random-rewards-event-with-a-random-generated-command/478412/8</link>
        <pubDate>Tue, 18 Feb 2014 02:18:00 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-478412-8</guid>
        <source url="https://forum.moparisthebest.com/t/667-random-rewards-event-with-a-random-generated-command/478412.rss">[667+] Random Rewards Event (with a random generated Command)</source>
      </item>
      <item>
        <title>[667+] Random Rewards Event (with a random generated Command)</title>
        <dc:creator><![CDATA[@Fox2007 Fox2007]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/fox2007">@Fox2007</a> wrote:</p>
          <blockquote>
              <p>np <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/667-random-rewards-event-with-a-random-generated-command/478412/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/667-random-rewards-event-with-a-random-generated-command/478412/7</link>
        <pubDate>Wed, 30 Jan 2013 13:51:56 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-478412-7</guid>
        <source url="https://forum.moparisthebest.com/t/667-random-rewards-event-with-a-random-generated-command/478412.rss">[667+] Random Rewards Event (with a random generated Command)</source>
      </item>
      <item>
        <title>[667+] Random Rewards Event (with a random generated Command)</title>
        <dc:creator><![CDATA[@nos12 nos12]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/nos12">@nos12</a> wrote:</p>
          <blockquote>
              <p>work<br>
thanks.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/667-random-rewards-event-with-a-random-generated-command/478412/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/667-random-rewards-event-with-a-random-generated-command/478412/6</link>
        <pubDate>Wed, 30 Jan 2013 11:00:49 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-478412-6</guid>
        <source url="https://forum.moparisthebest.com/t/667-random-rewards-event-with-a-random-generated-command/478412.rss">[667+] Random Rewards Event (with a random generated Command)</source>
      </item>
      <item>
        <title>[667+] Random Rewards Event (with a random generated Command)</title>
        <dc:creator><![CDATA[@Fox2007 Fox2007]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/fox2007">@Fox2007</a> wrote:</p>
          <blockquote>
              <p><a class="mention" href="/u/team_rocket">@Team_Rocket</a>: Poor Conventions lol, no offense. Just saying…<br>
Also, i always thought an “undeclared” boolean was false. XD</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/667-random-rewards-event-with-a-random-generated-command/478412/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/667-random-rewards-event-with-a-random-generated-command/478412/5</link>
        <pubDate>Wed, 16 Jan 2013 08:22:55 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-478412-5</guid>
        <source url="https://forum.moparisthebest.com/t/667-random-rewards-event-with-a-random-generated-command/478412.rss">[667+] Random Rewards Event (with a random generated Command)</source>
      </item>
      <item>
        <title>[667+] Random Rewards Event (with a random generated Command)</title>
        <dc:creator><![CDATA[@TimeRS3 TimeRS3]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/timers3">@TimeRS3</a> wrote:</p>
          <blockquote>
              <p>this is actually pretty creative good job</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/667-random-rewards-event-with-a-random-generated-command/478412/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/667-random-rewards-event-with-a-random-generated-command/478412/4</link>
        <pubDate>Mon, 14 Jan 2013 20:15:31 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-478412-4</guid>
        <source url="https://forum.moparisthebest.com/t/667-random-rewards-event-with-a-random-generated-command/478412.rss">[667+] Random Rewards Event (with a random generated Command)</source>
      </item>
      <item>
        <title>[667+] Random Rewards Event (with a random generated Command)</title>
        <dc:creator><![CDATA[@The_Web_Guy The Web Guy]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/the_web_guy">@The_Web_Guy</a> wrote:</p>
          <blockquote>
              <p>I like it, you’ve done a nice job with this. I’ll try it later and let you know my thoughts.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/667-random-rewards-event-with-a-random-generated-command/478412/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/667-random-rewards-event-with-a-random-generated-command/478412/3</link>
        <pubDate>Mon, 14 Jan 2013 15:17:09 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-478412-3</guid>
        <source url="https://forum.moparisthebest.com/t/667-random-rewards-event-with-a-random-generated-command/478412.rss">[667+] Random Rewards Event (with a random generated Command)</source>
      </item>
      <item>
        <title>[667+] Random Rewards Event (with a random generated Command)</title>
        <dc:creator><![CDATA[@Team_Rocket Team_Rocket]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/team_rocket">@Team_Rocket</a> wrote:</p>
          <blockquote>
              <p>Note: Before people ask, because I know someone will, an undeclared Boolean is True.</p>
<p>EDIT: I’ve taken the liberty of organizing this and adding Tags. Feel free to replace this Code with yours. It’s the same, It’s just enforced and easier on the eyes.</p>
<pre><code class="lang-auto">     public static String RANDOM_COMMAND;
     
     public static boolean RANDOM_REWARD;</code></pre>
<pre><code class="lang-auto">     public static String generateString(Random rng, String characters, int length) {
               char[] text = new char[length];
          for (int i = 0; i &lt; length; i++) {
               text[i] = characters.charAt(rng.nextInt(characters.length()));
          }
               return new String(text);
     }</code></pre>
<pre><code class="lang-auto">     private static void RandomRewardsTask() {
               CoresManager.slowExecutor.scheduleWithFixedDelay(new Runnable() {

     @Override
     public void run() {
          Settings.RANDOM_REWARD = true;
               System.err.println("[Rewards] Reward Issued, waiting for someone to claim...");
                    Settings.RANDOM_COMMAND = generateString(new Random(), "abcdefghij1234567890", 7);

     for (Player player : World.getPlayers()) {
          if (player == null || !player.hasStarted() || player.hasFinished())
     continue;
               player.getPackets().sendGameMessage("&lt;img=5&gt; [&lt;col=FFAA00&gt;Notice&lt;/col&gt;]&lt;col=FFAA00&gt; First person to type ::" + Settings.RANDOM_COMMAND + " gets a free item!");
                    }
               }
          }, 1, 30, TimeUnit.MINUTES);
     }</code></pre>
<pre><code class="lang-auto">package com.rs.game.player.content.custom;

import com.rs.game.player.Player;
import com.rs.cache.loaders.ItemDefinitions;

/**
 * @author King Fox
 * @date Dec. 25, 2012 @ 2:30am CST
 */

public class RandomRewards {
   
   /**
    * The item list, edit these id's
    */
   private static int randomItemList[] = {
        2354, 2354, 2354, 2354, 2354, 2360, 2360, 2360, 2360, 2360, 448, 448, 448, 448, 448, 452, 452, 452, 452, 452, 1618, 1618, 1618, 1618, 1618, 200, 200, 200, 200, 200, 4151
   };
   
   /**
    * Selects a random number from above
    */
   public static int giveRandomItem() {
        return randomItemList[(int) (Math.random()*randomItemList.length)];
   }
   
   /**
    * Add more than one number to make it more common, or to make
    * other numbers less common.
    */
   private static int RandomAmounts[] = {
      100,100,100,100,100,100,100,100,100, 200,200,200,200,200,200, 200, 300,300,300,300, 400,400, 500
   };
   
   /**
    * Selects an amount randomly from the above
    */
   public static int getRandomAmount() {
      return RandomAmounts[(int) (Math.random()*RandomAmounts.length)];
   }
   
   /**
    * Calls the methods above, and displays the amount
    * and item given. If its a certain item like 4151 below,
    * then you can display a separate message, as i also have
    */
     public static void Reward(Player p) {
          ItemDefinitions defs = ItemDefinitions.getItemDefinitions(item);
               int item = giveRandomItem();
                    int amount = getRandomAmount(); 
                         String name = defs == null ? "" : defs.getName().toLowerCase();
     
     if (item == 4151) {
          p.GlobalMessage("&lt;img=5&gt; [&lt;col=FF0000&gt;Notice&lt;/col&gt;] &lt;col=FF0000&gt;"+p.getDisplayName()+" has claimed the rare "+name+"!");
               p.getInventory().addItem(4151, 1);
     } else {
          p.getInventory().addItem(item, amount);
               p.GlobalMessage("&lt;img=5&gt; [&lt;col=FF0000&gt;Notice&lt;/col&gt;] &lt;col=FF0000&gt;"+p.getDisplayName()+" has claimed "+amount+" "+name+".");
               }
          }
     }</code></pre>
<pre><code class="lang-auto">     if (cmd[0].equals(Settings.RANDOM_COMMAND)) {
          if(Settings.RANDOM_REWARD) {
               player.ResetAttempts();
                    Settings.RANDOM_REWARD = false;
                         RandomRewards.Reward(player);
          System.err.println("[Rewards] Reward claimed by "+player.getDisplayName()+"");
     return true;
          }
     }</code></pre>
<pre><code class="lang-auto">     public void GlobalMessage(String message) {
          for (Player players : World.getPlayers()) {
     if (players == null || !players.isRunning())
          continue;
               players.getPackets().sendGameMessage(""+message+"");
          }
     }</code></pre>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/667-random-rewards-event-with-a-random-generated-command/478412/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/667-random-rewards-event-with-a-random-generated-command/478412/2</link>
        <pubDate>Mon, 14 Jan 2013 08:40:31 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-478412-2</guid>
        <source url="https://forum.moparisthebest.com/t/667-random-rewards-event-with-a-random-generated-command/478412.rss">[667+] Random Rewards Event (with a random generated Command)</source>
      </item>
      <item>
        <title>[667+] Random Rewards Event (with a random generated Command)</title>
        <dc:creator><![CDATA[@Fox2007 Fox2007]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/fox2007">@Fox2007</a> wrote:</p>
          <blockquote>
              <p>Alright, so here’s my thing where you a command is randomly generated and then a player can type the command every 3 minutes when it shows up in-game. Works perfect, no way around it to get multiple results, and things like that.</p>
<p>So first, we’re gonna add one boolean, and one empty string into Settings.java</p>
<p><code>
public static String RANDOM_COMMAND;
public static boolean RANDOM_REWARD;</code></p>
<p>We’re using a String which is left empty so it can be set by the event that occurs every 30 minutes, and the boolean flags to true, so that way the command can’t be retyped after its been typed again. It’s only set back to false after the randomly generated string has been typed as a command, which is announced in-game. Now for the method to randomly generate a  string. This will go in com.rs.Launcher.</p>
<p><code>
public static String generateString(Random rng, String characters, int length) {
      char[] text = new char[length];
      for (int i = 0; i &lt; length; i++) {
         text[i] = characters.charAt(rng.nextInt(characters.length()));
      }
      return new String(text);
   }</code></p>
<p>That will generate a random string based on how you use it when you make a method. It can be set to randomly generate any characters or numbers in a randomized order. This for some reason does work better, however, if it only generates lowercase letters and numbers.</p>
<p>Alright, now still in Launcher, add this method somewhere:</p>
<p>[code]</p>
<p>private static void RandomRewardsTask() {<br>
CoresManager.slowExecutor.scheduleWithFixedDelay(new Runnable() {<br>
<a class="mention" href="/u/override">@Override</a><br>
public void run() {<br>
Settings.RANDOM_REWARD = true;<br>
System.err<br>
.println("[Rewards] Reward Issued, waiting for someone to claim…");<br>
Settings.RANDOM_COMMAND = generateString(new Random(),<br>
“abcdefghij1234567890”, 7);<br>
for (Player player : World.getPlayers()) {<br>
if (player == null || !player.hasStarted()<br>
|| player.hasFinished())<br>
continue;<br>
player.getPackets().sendGameMessage(<br>
“&lt;img=5&gt; [&lt;col=FFAA00&gt;Notice]&lt;col=FFAA00&gt; First person to type ::”<br>
+ Settings.RANDOM_COMMAND<br>
+ " gets a free item!");<br>
}<br>
}<br>
}, 1, 30, TimeUnit.MINUTES);<br>
}[/code]</p>
<p>This is where the magic happens. This starts the event after 1 minute of the server being offline, then it occurs every 30 minutes after that. This will set the boolean to true we added in Settings.java, and set the String that we’ve added. (This method must also be initialized when the server loads.)</p>
<p>Next, we need to add some stuff into com.rs.game.content.custom (If you dont have this package, then you can just make it, or put it else where and change the packaging.)</p>
<p>[code]<br>
package com.rs.game.player.content.custom;</p>
<p>import com.rs.cache.loaders.ItemDefinitions;<br>
import com.rs.game.player.Player;</p>
<p>/**</p>
<ul>
<li>
<span class="mention">@author</span> King Fox</li>
<li>
<a class="mention" href="/u/date">@date</a> Dec. 25, 2012 @ 2:30am CST<br>
*/</li>
</ul>
<p>public class RandomRewards {</p>
<p>/**<br>
* The item list, edit these id’s<br>
*/<br>
private static int randomItemList[] = {<br>
2354, 2354, 2354, 2354, 2354,<br>
2360, 2360, 2360, 2360, 2360,<br>
448, 448, 448, 448, 448,<br>
452, 452, 452, 452, 452,<br>
1618, 1618, 1618, 1618, 1618,<br>
200, 200, 200, 200, 200,<br>
4151<br>
};</p>
<p>/**<br>
* Selects a random number from above<br>
*/<br>
public static int giveRandomItem() {<br>
return randomItemList[(int) (Math.random()*randomItemList.length)];<br>
}</p>
<p>/**<br>
* Add more than one number to make it more common, or to make<br>
* other numbers less common.<br>
*/<br>
private static int RandomAmounts[] = {<br>
100,100,100,100,100,100,100,100,100,<br>
200,200,200,200,200,200, 200,<br>
300,300,300,300,<br>
400,400,<br>
500<br>
};</p>
<p>/**<br>
* Selects an amount randomly from the above<br>
*/<br>
public static int getRandomAmount() {<br>
return RandomAmounts[(int) (Math.random()*RandomAmounts.length)];<br>
}</p>
<p>/**<br>
* Calls the methods above, and displays the amount<br>
* and item given. If its a certain item like 4151 below,<br>
* then you can display a separate message, as i also have<br>
*/<br>
public static void Reward(Player p) {<br>
int item = giveRandomItem();<br>
ItemDefinitions defs = ItemDefinitions.getItemDefinitions(item);<br>
String name = defs == null ? “” : defs.getName().toLowerCase();<br>
int amount = getRandomAmount();</p>
<pre><code>  if (item == 4151) {
  p.GlobalMessage("&lt;img=5&gt; [&lt;col=FF0000&gt;Notice&lt;/col&gt;] &lt;col=FF0000&gt;"+p.getDisplayName()+" has claimed the rare "+name+"!");
  p.getInventory().addItem(4151, 1);
  } else {
     p.getInventory().addItem(item, amount);
     p.GlobalMessage("&lt;img=5&gt; [&lt;col=FF0000&gt;Notice&lt;/col&gt;] &lt;col=FF0000&gt;"+p.getDisplayName()+" has claimed "+amount+" "+name+".");
  }
</code></pre>
<p>}<br>
}[/code]</p>
<p>All you need to know is commented for you i suppose. Cant get much more self explanatory than that. And so finally, here’s the command that you will need:</p>
<p><code>if (cmd[0].equals(Settings.RANDOM_COMMAND)) {
   if(Settings.RANDOM_REWARD) {
      player.ResetAttempts();
      Settings.RANDOM_REWARD = false;
      RandomRewards.Reward(player);
      System.err.println("[Rewards] Reward claimed by "+player.getDisplayName()+"");
      return true;
   } 
}</code></p>
<p>Alright, and there you have it, a fully functional randomly generated command that gives a play a random item, and random amount every 30 minutes, that can only be typed once the event has occured defined by the method in Launcher.java Ik my tutorial is alittle sloppy, but either way result should be the same.</p>
<p>Also, you might need this method:</p>
<p><code>
public void GlobalMessage(String message) {
      for (Player players : World.getPlayers()) {
         if (players == null || !players.isRunning())
            continue;
         players.getPackets().sendGameMessage(""+message+"");
      }
   }</code></p>
<p>Thanks<br>
~Fox</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/667-random-rewards-event-with-a-random-generated-command/478412/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/667-random-rewards-event-with-a-random-generated-command/478412/1</link>
        <pubDate>Mon, 14 Jan 2013 08:22:57 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-478412-1</guid>
        <source url="https://forum.moparisthebest.com/t/667-random-rewards-event-with-a-random-generated-command/478412.rss">[667+] Random Rewards Event (with a random generated Command)</source>
      </item>
  </channel>
</rss>
