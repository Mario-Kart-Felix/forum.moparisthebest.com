<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Autocasting Bug</title>
    <link>https://forum.moparisthebest.com/t/autocasting-bug/343866</link>
    <description>When I use autocast, everything works fine, except for one flaw.
Right after the user casts the first spell, he walks up to the target before casting the spell again.
This does [b]not[/b] happen when casting spells without autocast, which helped me narrow the issue down to these lines...

[code]			if ((playerEquipment[playerWeapon] == element) &amp;&amp; autocasting &amp;&amp; autocastID &gt; 0 &amp;&amp; pvpmode == true &amp;&amp; AttackingOn2.pvpmode == true) {
				int playerTargetX = server.playerHandler.players[AttackingOn].absX;
				int playerTargetY = server.playerHandler.players[AttackingOn].absY;
				int playerTargetCombat = server.playerHandler.players[AttackingOn].combat;
				int playerTargetHealth = server.playerHandler.players[AttackingOn].playerLevel[playerHitpoints];
				if (System.currentTimeMillis() - lastAttack &lt; 4000) {
					//sM(&quot;You must wait 4 seconds before casting this kind of spell again&quot;);
					return false;
				}
				if (!playerMage(AttackingOn)) {
					return false;
				}
				inCombat = true;
				lastCombat = System.currentTimeMillis();
				lastAttack = lastCombat;

				TurnPlayerTo(playerTargetX, playerTargetY);
				updateRequired = true;
				appearanceUpdateRequired = true;

				toX = absX;
				toY = absY;
                		newWalkCmdSteps = 0;
                		newWalkCmdX[0] = newWalkCmdY[0] = tmpNWCX[0] = tmpNWCY[0] = 0;
                		getNextPlayerMovement();
				MagicHandler.playerX = playerTargetX;
				MagicHandler.playerY = playerTargetY;
				MagicHandler.playerHP = playerTargetHealth;
				AttackingOn2.offTimer = System.currentTimeMillis();
				AttackingOn2.hitID = playerId;
				spellPlayerIndex = MagicHandler.magicSpellPlayer(autocastID, playerId, AttackingOn, playerLevel[6]);
				return true;
		}[/code]


Any suggestions?</description>
    
    <lastBuildDate>Sun, 13 Jun 2010 01:26:50 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/autocasting-bug/343866.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Autocasting Bug</title>
        <dc:creator><![CDATA[@revengr revengr]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/revengr">@revengr</a> wrote:</p>
          <blockquote>
              <p>When I use autocast, everything works fine, except for one flaw.<br>
Right after the user casts the first spell, he walks up to the target before casting the spell again.<br>
This does <span class="bbcode-b">not</span> happen when casting spells without autocast, which helped me narrow the issue down to these lines…</p>
<p>[code]			if ((playerEquipment[playerWeapon] == element) &amp;&amp; autocasting &amp;&amp; autocastID &gt; 0 &amp;&amp; pvpmode == true &amp;&amp; AttackingOn2.pvpmode == true) {<br>
int playerTargetX = server.playerHandler.players[AttackingOn].absX;<br>
int playerTargetY = server.playerHandler.players[AttackingOn].absY;<br>
int playerTargetCombat = server.playerHandler.players[AttackingOn].combat;<br>
int playerTargetHealth = server.playerHandler.players[AttackingOn].playerLevel[playerHitpoints];<br>
if (System.currentTimeMillis() - lastAttack &lt; 4000) {<br>
//sM(“You must wait 4 seconds before casting this kind of spell again”);<br>
return false;<br>
}<br>
if (!playerMage(AttackingOn)) {<br>
return false;<br>
}<br>
inCombat = true;<br>
lastCombat = System.currentTimeMillis();<br>
lastAttack = lastCombat;</p>
<pre><code>			TurnPlayerTo(playerTargetX, playerTargetY);
			updateRequired = true;
			appearanceUpdateRequired = true;

			toX = absX;
			toY = absY;
            		newWalkCmdSteps = 0;
            		newWalkCmdX[0] = newWalkCmdY[0] = tmpNWCX[0] = tmpNWCY[0] = 0;
            		getNextPlayerMovement();
			MagicHandler.playerX = playerTargetX;
			MagicHandler.playerY = playerTargetY;
			MagicHandler.playerHP = playerTargetHealth;
			AttackingOn2.offTimer = System.currentTimeMillis();
			AttackingOn2.hitID = playerId;
			spellPlayerIndex = MagicHandler.magicSpellPlayer(autocastID, playerId, AttackingOn, playerLevel[6]);
			return true;
	}[/code]
</code></pre>
<p>Any suggestions?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/autocasting-bug/343866/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/autocasting-bug/343866/1</link>
        <pubDate>Sun, 13 Jun 2010 01:26:50 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-343866-1</guid>
        <source url="https://forum.moparisthebest.com/t/autocasting-bug/343866.rss">Autocasting Bug</source>
      </item>
  </channel>
</rss>
