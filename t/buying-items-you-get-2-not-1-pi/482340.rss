<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Buying items, you get 2 not 1. [PI]</title>
    <link>https://forum.moparisthebest.com/t/buying-items-you-get-2-not-1-pi/482340</link>
    <description>It seems when you buy any item on my serve (haven&#39;t tested special shops) you get 2 of that item, but it charges for one.
Say I want a anti-dragon shield. They cost 20gp. I&#39;ve got 100k. I click buy 1. and 2 show in inventory and end with 99980gp.

I think this is handled in the shop assistant via buyitem. But I don&#39;t know for sure.
what ever code you need, tell me.</description>
    
    <lastBuildDate>Mon, 11 Feb 2013 11:14:25 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/buying-items-you-get-2-not-1-pi/482340.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Buying items, you get 2 not 1. [PI]</title>
        <dc:creator><![CDATA[@Christmas_tree Christmas_tree]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/christmas_tree">@Christmas_tree</a> wrote:</p>
          <blockquote>
              <p>Pretty sure you’re repeating code in your buyitem() method. Chat me ok Skype later</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/buying-items-you-get-2-not-1-pi/482340/14">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/buying-items-you-get-2-not-1-pi/482340/14</link>
        <pubDate>Mon, 11 Feb 2013 11:14:25 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-482340-14</guid>
        <source url="https://forum.moparisthebest.com/t/buying-items-you-get-2-not-1-pi/482340.rss">Buying items, you get 2 not 1. [PI]</source>
      </item>
      <item>
        <title>Buying items, you get 2 not 1. [PI]</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <p>[quote=“VorargC, post:12, topic:482340”]No, 3900 is for buying and 3823 is for selling…</p>
<p>Does it only happen on a specific shop or all of them?</p>
<p>Post the shop id of the one you tried.[/quote]<br>
It’s every shop, every item. I haven’t tried my special shops (pk points, level points, etc).</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/buying-items-you-get-2-not-1-pi/482340/13">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/buying-items-you-get-2-not-1-pi/482340/13</link>
        <pubDate>Mon, 11 Feb 2013 06:47:20 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-482340-13</guid>
        <source url="https://forum.moparisthebest.com/t/buying-items-you-get-2-not-1-pi/482340.rss">Buying items, you get 2 not 1. [PI]</source>
      </item>
      <item>
        <title>Buying items, you get 2 not 1. [PI]</title>
        <dc:creator><![CDATA[@VorargC VorargC]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/vorargc">@VorargC</a> wrote:</p>
          <blockquote>
              <p>No, 3900 is for buying and 3823 is for selling…</p>
<p>Does it only happen on a specific shop or all of them?</p>
<p>Post the shop id of the one you tried.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/buying-items-you-get-2-not-1-pi/482340/12">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/buying-items-you-get-2-not-1-pi/482340/12</link>
        <pubDate>Mon, 11 Feb 2013 06:40:44 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-482340-12</guid>
        <source url="https://forum.moparisthebest.com/t/buying-items-you-get-2-not-1-pi/482340.rss">Buying items, you get 2 not 1. [PI]</source>
      </item>
      <item>
        <title>Buying items, you get 2 not 1. [PI]</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="10" data-topic="482340">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/vorargc/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> VorargC:</div>
<blockquote>
<p>search for case 3900 in bank5 should be something wrong there</p>
</blockquote>
</aside>
<p>I found 2 cases that are different, but do the exact same thing. Could that be the issue?</p>
<pre><code class="lang-auto">			case 3900:
			c.getShops().buyItem(removeId, removeSlot, 1);
			break;
			
			case 3823:
			c.getShops().sellItem(removeId, removeSlot, 1);
			break;</code></pre>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/buying-items-you-get-2-not-1-pi/482340/11">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/buying-items-you-get-2-not-1-pi/482340/11</link>
        <pubDate>Mon, 11 Feb 2013 06:32:25 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-482340-11</guid>
        <source url="https://forum.moparisthebest.com/t/buying-items-you-get-2-not-1-pi/482340.rss">Buying items, you get 2 not 1. [PI]</source>
      </item>
      <item>
        <title>Buying items, you get 2 not 1. [PI]</title>
        <dc:creator><![CDATA[@VorargC VorargC]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/vorargc">@VorargC</a> wrote:</p>
          <blockquote>
              <p>search for case 3900 in bank5 should be something wrong there</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/buying-items-you-get-2-not-1-pi/482340/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/buying-items-you-get-2-not-1-pi/482340/10</link>
        <pubDate>Mon, 11 Feb 2013 06:30:22 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-482340-10</guid>
        <source url="https://forum.moparisthebest.com/t/buying-items-you-get-2-not-1-pi/482340.rss">Buying items, you get 2 not 1. [PI]</source>
      </item>
      <item>
        <title>Buying items, you get 2 not 1. [PI]</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <p>From what I found, packet 117 on my server is:<br>
packetId[117] = new Bank5();</p>
<p>I could post my bank5.java if needed.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/buying-items-you-get-2-not-1-pi/482340/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/buying-items-you-get-2-not-1-pi/482340/9</link>
        <pubDate>Mon, 11 Feb 2013 05:42:06 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-482340-9</guid>
        <source url="https://forum.moparisthebest.com/t/buying-items-you-get-2-not-1-pi/482340.rss">Buying items, you get 2 not 1. [PI]</source>
      </item>
      <item>
        <title>Buying items, you get 2 not 1. [PI]</title>
        <dc:creator><![CDATA[@Clawz_fury lare69]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/clawz_fury">@Clawz_fury</a> wrote:</p>
          <blockquote>
              <p>the problem lies within packet 117. find that on your server and post it here</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/buying-items-you-get-2-not-1-pi/482340/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/buying-items-you-get-2-not-1-pi/482340/8</link>
        <pubDate>Mon, 11 Feb 2013 05:35:24 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-482340-8</guid>
        <source url="https://forum.moparisthebest.com/t/buying-items-you-get-2-not-1-pi/482340.rss">Buying items, you get 2 not 1. [PI]</source>
      </item>
      <item>
        <title>Buying items, you get 2 not 1. [PI]</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <p>Sorry was gone all weekend :S</p>
<p>Buy:</p>
<p>[code=java]<br>
public boolean buyItem(int itemID, int fromSlot, int amount) {<br>
if(c.myShopId == 7390 &amp;&amp; c.myShopClient != null &amp;&amp; !c.myShopClient.properLogout &amp;&amp; !c.playerName.equals(c.myShopClient.playerName)){<br>
int bought = 0;<br>
int price = c.myShopClient.playerShopP[fromSlot];<br>
if(amount &gt; c.myShopClient.playerShopN[fromSlot])<br>
amount = c.myShopClient.playerShopN[fromSlot];<br>
for(int x = 0; x &lt; amount; x++){<br>
if(c.getItems().playerHasItem(7478, c.myShopClient.playerShopP[fromSlot]) &amp;&amp; c.getItems().freeSlots() &gt; 0){<br>
c.getItems().deleteItem2(7478, c.myShopClient.playerShopP[fromSlot]);<br>
c.getItems().addItem(c.myShopClient.playerShop[fromSlot], 1);<br>
c.myShopClient.playerShopN[fromSlot]–;<br>
c.myShopClient.playerCollect += c.myShopClient.playerShopP[fromSlot];<br>
if(c.myShopClient.playerShopN[fromSlot] == 0){<br>
c.myShopClient.playerShop[fromSlot] = 0;<br>
c.myShopClient.playerShopP[fromSlot] = 0;<br>
}<br>
bought++;<br>
}else{<br>
c.sendMessage(“Not enought space or money.”);<br>
break;<br>
}<br>
}<br>
if(bought &gt; 0){<br>
resetShop(c.myShopClient);<br>
c.getItems().resetItems(3823);;<br>
c.sendMessage(“You just bought “+bought+” “+c.getItems().getItemName(itemID)+” for “+ (bought*price));<br>
c.myShopClient.sendMessage(c.playerName+” has bought “+bought+” “+c.getItems().getItemName(itemID)+” from you!”);<br>
c.myShopClient.sendMessage(“You now have “+c.myShopClient.playerCollect+” DT’s to collect (::collect)”);<br>
}<br>
return false;<br>
}else if(c.myShopId == 7390 &amp;&amp; c.myShopClient != null &amp;&amp; !c.myShopClient.properLogout &amp;&amp; c.playerName.equals(c.myShopClient.playerName)){<br>
if(amount &gt; c.myShopClient.playerShopN[fromSlot])<br>
amount = c.myShopClient.playerShopN[fromSlot];<br>
for(int x = 0; x &lt; amount; x++){<br>
if(c.getItems().freeSlots() &gt; 0){<br>
c.getItems().addItem(c.myShopClient.playerShop[fromSlot], 1);<br>
c.myShopClient.playerShopN[fromSlot]–;<br>
if(c.myShopClient.playerShopN[fromSlot] == 0){<br>
c.myShopClient.playerShop[fromSlot] = 0;<br>
c.myShopClient.playerShopP[fromSlot] = 0;<br>
fixShop©;<br>
}<br>
}else{<br>
c.sendMessage(“Not enought space.”);<br>
break;<br>
}<br>
}<br>
resetShop(c.myShopClient);<br>
c.getItems().resetItems(3823);<br>
return false;<br>
}else if(c.myShopId == 7390){<br>
return false;<br>
}<br>
if(System.currentTimeMillis() - buyDelay &lt; 1500) {<br>
return false;<br>
}</p>
<pre><code>	if (c.myShopId == 14) {
		skillBuy(itemID);
		return false;

	} else if (c.myShopId == 15) {
		buyVoid(itemID);
		return false;		
	
	} else if (c.myShopId == 1) {
		buyVoid(itemID);
		return false;
            }
	if(itemID != itemID) {
		c.sendMessage("Don't dupe or you will be IP Banned");
		return false;
	}

	if(!shopSellsItem(itemID))
		return false;

	if (amount &gt; 0) {
		if (amount &gt; Server.shopHandler.ShopItemsN[c.myShopId][fromSlot]) {
			amount = Server.shopHandler.ShopItemsN[c.myShopId][fromSlot];
		}
		//double ShopValue;
		//double TotPrice;
		int TotPrice2 = 0;
		//int Overstock;
		int Slot = 0;
		int Slot1 = 0;//Tokkul
		int Slot2 = 0;//Pking Points
		int Slot3 = 0;//Donator Gold
		int Slot4 = 0;//Dragon Tokens

		if (c.myShopId == 18) {
			handleOtherShop(itemID);
			return false;
		}	
		if (c.myShopId == 73) {
			handleOtherShop(itemID);
			return false;
		}	
		if (c.myShopId == 74) {
			handleOtherShop(itemID);
			return false;
		}
		if (c.myShopId == 10) {
			handleOtherShop(itemID);
			return false;
		}
		if (c.myShopId == 11) {
			handleOtherShop(itemID);
			return false;
		}
		if (c.myShopId == 48) {
			handleOtherShop(itemID);
			return false;
		}
</code></pre>
<p>if (amount &gt; 1000) {<br>
TotPrice2 = (int) Math.floor(getItemShopValue(itemID, 0,<br>
fromSlot)) * amount;<br>
Slot = c.getItems().getItemSlot(995);<br>
if (Slot == -1 &amp;&amp; TotPrice2 != 0) {<br>
c.sendMessage(“You don’t have enough coins.”);<br>
}<br>
if (TotPrice2 &lt;= 1) {<br>
TotPrice2 = (int) Math.floor(getItemShopValue(itemID, 0,<br>
fromSlot));<br>
}<br>
if (TotPrice2 &lt;= 0) {<br>
if (c.getItems().freeSlots() &gt; 0) {<br>
c.getItems().addItem(itemID, amount);<br>
Server.shopHandler.ShopItemsN[c.myShopId][fromSlot] -= 1;<br>
Server.shopHandler.ShopItemsDelay[c.myShopId][fromSlot] = 0;<br>
if ((fromSlot + 1) &gt; Server.shopHandler.ShopItemsStandard[c.myShopId]) {<br>
Server.shopHandler.ShopItems[c.myShopId][fromSlot] = 0;<br>
}<br>
} else {<br>
c.sendMessage(“Not enough space in your inventory.”);<br>
}<br>
} else if (c.playerItemsN[Slot] &gt;= TotPrice2) {<br>
if (c.getItems().freeSlots() &gt; 0) {<br>
c.getItems().deleteItem(995,<br>
c.getItems().getItemSlot(995), TotPrice2);<br>
c.getItems().addItem(itemID, amount);<br>
Server.shopHandler.ShopItemsN[c.myShopId][fromSlot] -= amount;<br>
Server.shopHandler.ShopItemsDelay[c.myShopId][fromSlot] = 0;<br>
if ((fromSlot + 1) &gt; Server.shopHandler.ShopItemsStandard[c.myShopId]) {<br>
Server.shopHandler.ShopItems[c.myShopId][fromSlot] = 0;<br>
}<br>
} else {<br>
c.sendMessage(“Not enough space in your inventory.”);<br>
}<br>
} else {<br>
c.sendMessage(“You don’t have enough coins.”);<br>
}<br>
} else {<br>
}				<br>
for (int i = amount; i &gt; 0; i–) {<br>
TotPrice2 = (int)Math.floor(getItemShopValue(itemID, 0, fromSlot));<br>
Slot = c.getItems().getItemSlot(995);<br>
Slot1 = c.getItems().getItemSlot(6529);<br>
Slot3 = c.getItems().getItemSlot(5555);<br>
Slot4 = c.getItems().getItemSlot(7478);<br>
if (Slot == -1 &amp;&amp; c.myShopId != 11 &amp;&amp; c.myShopId != 29 &amp;&amp; c.myShopId != 30 &amp;&amp; c.myShopId != 31 &amp;&amp; c.myShopId != 47) {<br>
c.sendMessage(“You don’t have enough coins.”);<br>
break;<br>
}<br>
if (Slot == -1 &amp;&amp; c.MoneyCash == 0 &amp;&amp; c.myShopId != 11 &amp;&amp; c.myShopId != 29 &amp;&amp; c.myShopId != 30 &amp;&amp; c.myShopId != 31 &amp;&amp; c.myShopId != 47 &amp;&amp; c.myShopId != 100 &amp;&amp; c.myShopId != 99) {<br>
c.sendMessage(“You don’t have any coins.”);<br>
break;<br>
}else if(c.myShopId != 11 &amp;&amp; c.myShopId != 29 || c.myShopId != 30 || c.myShopId != 31 || c.myShopId != 47 || c.myShopId != 99 || c.myShopId != 100) {<br>
if (c.MoneyCash &gt;=TotPrice2) {<br>
if (c.getItems().freeSlots() &gt; 0) {<br>
buyDelay = System.currentTimeMillis();<br>
c.MoneyCash = c.MoneyCash - TotPrice2;<br>
if(c.MoneyCash &gt; 99999 &amp;&amp; c.MoneyCash &lt;= 999999) {<br>
c.getPA().sendFrame126(""+c.MoneyCash/1000+“K”, 8134);<br>
} else if(c.MoneyCash &gt; 999999 &amp;&amp; c.MoneyCash &lt;= 2147483647) {<br>
c.getPA().sendFrame126(""+c.MoneyCash/1000000+“M”, 8134);<br>
} else {<br>
c.getPA().sendFrame126(""+c.MoneyCash+"", 8134);<br>
}<br>
c.getPA().sendFrame126(""+c.MoneyCash+"", 8135);<br>
c.getItems().addItem(itemID, 1);<br>
ShopHandler.ShopItemsN[c.myShopId][fromSlot] -= 1;<br>
ShopHandler.ShopItemsDelay[c.myShopId][fromSlot] = 0;<br>
if ((fromSlot + 1) &gt; ShopHandler.ShopItemsStandard[c.myShopId]) {<br>
ShopHandler.ShopItems[c.myShopId][fromSlot] = 0;<br>
c.sendMessage(“You bought an item(s) with the money in your money pouch.”);<br>
}<br>
} else {<br>
c.sendMessage(“You don’t have enough space in your inventory.”);<br>
break;<br>
}</p>
<pre><code>                                    } else if (c.playerItemsN[Slot] &gt;= TotPrice2) {
					if (c.getItems().freeSlots() &gt; 0) {
						buyDelay = System.currentTimeMillis();
						c.getItems().deleteItem(995, c.getItems().getItemSlot(995), TotPrice2);
						c.getItems().addItem(itemID, 1);
						ShopHandler.ShopItemsN[c.myShopId][fromSlot] -= 1;
						ShopHandler.ShopItemsDelay[c.myShopId][fromSlot] = 0;
						if ((fromSlot + 1) &gt; ShopHandler.ShopItemsStandard[c.myShopId]) {
							ShopHandler.ShopItems[c.myShopId][fromSlot] = 0;
						}
					} else {
						c.sendMessage("You don't have enough space in your inventory.");
						break;
					}
				} else {
					c.sendMessage("You don't have enough coins.");
					break;
				}
            }
			if(Slot1 == -1 &amp;&amp; c.myShopId == 29 || c.myShopId == 30 || c.myShopId == 31) {
				c.sendMessage("You don't have enough tokkul.");
				break;
			}
			if(Slot3 == -1 &amp;&amp; c.myShopId == 11) {
				c.sendMessage("You don't have enough Level Points.");
				break;
			}
			if(Slot4 == -1 &amp;&amp; c.myShopId == 78) {
				c.sendMessage("You don't have enough DT's.");
				break;
			}
		
            if(TotPrice2 &lt;= 1) {
            	TotPrice2 = (int)Math.floor(getItemShopValue(itemID, 0, fromSlot));
            	TotPrice2 *= 1.66;
            }
            if(c.myShopId == 29 || c.myShopId == 30 || c.myShopId == 31) {
            	if (c.playerItemsN[Slot1] &gt;= TotPrice2) {
					if (c.getItems().freeSlots() &gt; 0) {
						buyDelay = System.currentTimeMillis();
						c.getItems().deleteItem(6529, c.getItems().getItemSlot(6529), TotPrice2);
						c.getItems().addItem(itemID, 1);
						Server.shopHandler.ShopItemsN[c.myShopId][fromSlot] -= 1;
						Server.shopHandler.ShopItemsDelay[c.myShopId][fromSlot] = 0;
						if ((fromSlot + 1) &gt; Server.shopHandler.ShopItemsStandard[c.myShopId]) {
							Server.shopHandler.ShopItems[c.myShopId][fromSlot] = 0;
						}
					} else {
						c.sendMessage("You don't have enough space in your inventory.");
						break;
					}
				} else {
					c.sendMessage("You don't have enough tokkul.");
					break;
				}
            }
            else if(c.myShopId == 47) {
            	if (c.pkPoints &gt;= TotPrice2) {
					if (c.getItems().freeSlots() &gt; 0) {
						buyDelay = System.currentTimeMillis();
						c.pkPoints -= TotPrice2;
						c.getItems().addItem(itemID, 1);
						Server.shopHandler.ShopItemsN[c.myShopId][fromSlot] -= 1;
						Server.shopHandler.ShopItemsDelay[c.myShopId][fromSlot] = 0;
						if ((fromSlot + 1) &gt; Server.shopHandler.ShopItemsStandard[c.myShopId]) {
							Server.shopHandler.ShopItems[c.myShopId][fromSlot] = 0;
						}
					} else {
						c.sendMessage("You don't have enough space in your inventory.");
						break;
					}
				} else {
					c.sendMessage("You don't have enough NPoints.");
					break;
				}
            }
            else if(c.myShopId == 48) {
            	if (c.SPoints &gt;= TotPrice2) {
					if (c.getItems().freeSlots() &gt; 0) {
						buyDelay = System.currentTimeMillis();
						c.SPoints -= TotPrice2;
						c.getItems().addItem(itemID, 1);
						Server.shopHandler.ShopItemsN[c.myShopId][fromSlot] -= 1;
						Server.shopHandler.ShopItemsDelay[c.myShopId][fromSlot] = 0;
						if ((fromSlot + 1) &gt; Server.shopHandler.ShopItemsStandard[c.myShopId]) {
							Server.shopHandler.ShopItems[c.myShopId][fromSlot] = 0;
						}
					} else {
						c.sendMessage("You don't have enough space in your inventory.");
						break;
					}
				} else {
					c.sendMessage("You don't have enough Slayer Points.");
					break;
				}
            }
            else if(c.myShopId == 11) {
                    if (c.lvlPoints &gt;= TotPrice2) {
                                            if (c.getItems().freeSlots() &gt; 0) {
                                                    buyDelay = System.currentTimeMillis();
                                                    c.lvlPoints -= TotPrice2;
                                                    c.getItems().addItem(itemID, 1);
                                                    Server.shopHandler.ShopItemsN[c.myShopId][fromSlot] -= 1;
                                                    Server.shopHandler.ShopItemsDelay[c.myShopId][fromSlot] = 0;
                                                    if ((fromSlot + 1) &gt; Server.shopHandler.ShopItemsStandard[c.myShopId]) {
                                                            Server.shopHandler.ShopItems[c.myShopId][fromSlot] = 0;
                                                    }
                                            } else {
                                                    c.sendMessage("You don't have enough space in your inventory.");
                                                    break;
                                            }
                                    } else {
                                            c.sendMessage("You don't have enough lvl Points.");
                                            break;
                                    }
            }
            else if(c.myShopId == 10) {
                    if (c.donorPoints &gt;= TotPrice2) {
                                            if (c.getItems().freeSlots() &gt; 0) {
                                                    buyDelay = System.currentTimeMillis();
                                                    c.donorPoints -= TotPrice2;
                                                    c.getItems().addItem(itemID, 1);
                                                    Server.shopHandler.ShopItemsN[c.myShopId][fromSlot] -= 1;
                                                    Server.shopHandler.ShopItemsDelay[c.myShopId][fromSlot] = 0;
                                                    if ((fromSlot + 1) &gt; Server.shopHandler.ShopItemsStandard[c.myShopId]) {
                                                            Server.shopHandler.ShopItems[c.myShopId][fromSlot] = 0;
                                                    }
                                            } else {
                                                    c.sendMessage("You don't have enough space in your inventory.");
                                                    break;
                                            }
                                    } else {
                                            c.sendMessage("You don't have enough Donor Points.");
                                            break;
                                    }
            }
            else if(c.myShopId == 78) {
            	if (c.playerItemsN[Slot4] &gt;= TotPrice2) {
					if (c.getItems().freeSlots() &gt; 0) {
						buyDelay = System.currentTimeMillis();
						c.getItems().deleteItem(7478, c.getItems().getItemSlot(7478), TotPrice2);
						c.getItems().addItem(itemID, 1);
						Server.shopHandler.ShopItemsN[c.myShopId][fromSlot] -= 1;
						Server.shopHandler.ShopItemsDelay[c.myShopId][fromSlot] = 0;
						if ((fromSlot + 1) &gt; Server.shopHandler.ShopItemsStandard[c.myShopId]) {
							Server.shopHandler.ShopItems[c.myShopId][fromSlot] = 0;
						}
					} else {
						c.sendMessage("You don't have enough space in your inventory.");
						break;
					}
				} else {
					c.sendMessage("You don't have enough DT's.");
					break;
				}
            }
    else if(c.myShopId != 11 &amp;&amp; c.myShopId != 29 || c.myShopId != 30 || c.myShopId != 31 || c.myShopId != 47) {
				if (c.playerItemsN[Slot] &gt;= TotPrice2) {
					if (c.getItems().freeSlots() &gt; 0) {
						buyDelay = System.currentTimeMillis();
						c.getItems().deleteItem(995, c.getItems().getItemSlot(995), TotPrice2);
						c.getItems().addItem(itemID, 1);
						Server.shopHandler.ShopItemsN[c.myShopId][fromSlot] -= 1;
						Server.shopHandler.ShopItemsDelay[c.myShopId][fromSlot] = 0;
						if ((fromSlot + 1) &gt; Server.shopHandler.ShopItemsStandard[c.myShopId]) {
							Server.shopHandler.ShopItems[c.myShopId][fromSlot] = 0;
						}
					} else {
						c.sendMessage("You don't have enough space in your inventory.");
						break;
					}
				} else {
					c.sendMessage("You don't have enough coins.");
					break;
				}
	}
		}
		c.getItems().resetItems(3823);
		resetShop(c.myShopId);
		updatePlayerShop();
		return true;
	}
	return false;
}
</code></pre>
<p>[/java]</p>
<p>openshop:</p>
<pre><code class="lang-auto">	public void openShop(int ShopID){
		c.getItems().resetItems(3823);
		resetShop(ShopID);
		c.isShopping = true;
		c.myShopId = ShopID;
		c.getPA().sendFrame248(3824, 3822);
		c.getPA().sendFrame126(Server.shopHandler.ShopName[ShopID], 3901);
	}</code></pre>
<p>reset/update shop:</p>
<pre><code class="lang-auto">	public void updateshop(int i){
		resetShop(i);
	}
	
	public void resetShop(int ShopID) {
		synchronized(c) {
			int TotalItems = 0;
			for (int i = 0; i &lt; Server.shopHandler.MaxShopItems; i++) {
				if (Server.shopHandler.ShopItems[ShopID][i] &gt; 0) {
					TotalItems++;
				}
			}
			if (TotalItems &gt; Server.shopHandler.MaxShopItems) {
				TotalItems = Server.shopHandler.MaxShopItems;
			}
			c.getOutStream().createFrameVarSizeWord(53);
			c.getOutStream().writeWord(3900);
			c.getOutStream().writeWord(TotalItems);
 			int TotalCount = 0;
			for (int i = 0; i &lt; Server.shopHandler.ShopItems.length; i++) {
				if (Server.shopHandler.ShopItems[ShopID][i] &gt; 0 || i &lt;= Server.shopHandler.ShopItemsStandard[ShopID]) {
					if (Server.shopHandler.ShopItemsN[ShopID][i] &gt; 254) {
						c.getOutStream().writeByte(255); 					
						c.getOutStream().writeDWord_v2(Server.shopHandler.ShopItemsN[ShopID][i]);	
					} else {
						c.getOutStream().writeByte(Server.shopHandler.ShopItemsN[ShopID][i]);
					}
					if (Server.shopHandler.ShopItems[ShopID][i] &gt; Config.ITEM_LIMIT || Server.shopHandler.ShopItems[ShopID][i] &lt; 0) {
						Server.shopHandler.ShopItems[ShopID][i] = Config.ITEM_LIMIT;
					}
					c.getOutStream().writeWordBigEndianA(Server.shopHandler.ShopItems[ShopID][i]);
					TotalCount++;
				}
				if (TotalCount &gt; TotalItems) {
					break;
				}
			}
			c.getOutStream().endFrameVarSizeWord();
			c.flushOutStream();	
		}
	}</code></pre>
<p>getItemShopValue:</p>
<pre><code class="lang-auto">	public double getItemShopValue(int ItemID, int Type, int fromSlot) {
		if(c.myShopId == 7390){
			return c.myShopClient.playerShopP[fromSlot];
		}
		double ShopValue = 1;
		double Overstock = 0;
		double TotPrice = 0;
		for (int i = 0; i &lt; Config.ITEM_LIMIT; i++) {
			if (Server.itemHandler.ItemList[i] != null) {
				if (Server.itemHandler.ItemList[i].itemId == ItemID) {
					ShopValue = Server.itemHandler.ItemList[i].ShopValue;
				}
			}
		}
		
		TotPrice = ShopValue;

		if (Server.shopHandler.ShopBModifier[c.myShopId] == 1) {
			TotPrice *= 1; 
			TotPrice *= 1;
			if (Type == 1) {
				TotPrice *= 1; 
			}
		} else if (Type == 1) {
			TotPrice *= 1; 
		}
		return TotPrice;
	}</code></pre>
<p>Idk what else I should add.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/buying-items-you-get-2-not-1-pi/482340/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/buying-items-you-get-2-not-1-pi/482340/7</link>
        <pubDate>Mon, 11 Feb 2013 04:10:45 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-482340-7</guid>
        <source url="https://forum.moparisthebest.com/t/buying-items-you-get-2-not-1-pi/482340.rss">Buying items, you get 2 not 1. [PI]</source>
      </item>
      <item>
        <title>Buying items, you get 2 not 1. [PI]</title>
        <dc:creator><![CDATA[@Christmas_tree Christmas_tree]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/christmas_tree">@Christmas_tree</a> wrote:</p>
          <blockquote>
              <p>Post your buy methods and your shop methods.</p>
<p>Chat me on Skype tomorrow if you need help</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/buying-items-you-get-2-not-1-pi/482340/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/buying-items-you-get-2-not-1-pi/482340/6</link>
        <pubDate>Sun, 10 Feb 2013 00:13:00 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-482340-6</guid>
        <source url="https://forum.moparisthebest.com/t/buying-items-you-get-2-not-1-pi/482340.rss">Buying items, you get 2 not 1. [PI]</source>
      </item>
      <item>
        <title>Buying items, you get 2 not 1. [PI]</title>
        <dc:creator><![CDATA[@Host_Gushers Host Gushers]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/host_gushers">@Host_Gushers</a> wrote:</p>
          <blockquote>
              <p>check your buying method.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/buying-items-you-get-2-not-1-pi/482340/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/buying-items-you-get-2-not-1-pi/482340/5</link>
        <pubDate>Sat, 09 Feb 2013 22:06:43 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-482340-5</guid>
        <source url="https://forum.moparisthebest.com/t/buying-items-you-get-2-not-1-pi/482340.rss">Buying items, you get 2 not 1. [PI]</source>
      </item>
      <item>
        <title>Buying items, you get 2 not 1. [PI]</title>
        <dc:creator><![CDATA[@CoderOops CoderOops]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/coderoops">@CoderOops</a> wrote:</p>
          <blockquote>
              <p>[quote=“sk8rdude461, post:3, topic:482340”][quote author=CoderOops link=topic=600577.msg4217416#msg4217416 date=1360446734]<br>
Prolly double code somewhere… You need to delete another of those code lines.</p>
<p>[/quote]<br>
I’m not finding it anywhere.</p>
<p>I found a couple instances of where it adds items, but it also removes money at the same time.[/quote]</p>
<p>It might be in different place… That is problem about using someone’s Project… Because you don’t know, where everything is…</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/buying-items-you-get-2-not-1-pi/482340/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/buying-items-you-get-2-not-1-pi/482340/4</link>
        <pubDate>Sat, 09 Feb 2013 22:05:40 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-482340-4</guid>
        <source url="https://forum.moparisthebest.com/t/buying-items-you-get-2-not-1-pi/482340.rss">Buying items, you get 2 not 1. [PI]</source>
      </item>
      <item>
        <title>Buying items, you get 2 not 1. [PI]</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <aside class="quote quote-modified" data-post="2" data-topic="482340">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/coderoops/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> CoderOops:</div>
<blockquote>
<p>Prolly double code somewhere… You need to delete another of those code lines.</p>
</blockquote>
</aside>
<p>I’m not finding it anywhere.</p>
<p>I found a couple instances of where it adds items, but it also removes money at the same time.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/buying-items-you-get-2-not-1-pi/482340/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/buying-items-you-get-2-not-1-pi/482340/3</link>
        <pubDate>Sat, 09 Feb 2013 22:03:46 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-482340-3</guid>
        <source url="https://forum.moparisthebest.com/t/buying-items-you-get-2-not-1-pi/482340.rss">Buying items, you get 2 not 1. [PI]</source>
      </item>
      <item>
        <title>Buying items, you get 2 not 1. [PI]</title>
        <dc:creator><![CDATA[@CoderOops CoderOops]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/coderoops">@CoderOops</a> wrote:</p>
          <blockquote>
              <p>Prolly double code somewhere… You need to delete another of those code lines.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/buying-items-you-get-2-not-1-pi/482340/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/buying-items-you-get-2-not-1-pi/482340/2</link>
        <pubDate>Sat, 09 Feb 2013 21:52:14 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-482340-2</guid>
        <source url="https://forum.moparisthebest.com/t/buying-items-you-get-2-not-1-pi/482340.rss">Buying items, you get 2 not 1. [PI]</source>
      </item>
      <item>
        <title>Buying items, you get 2 not 1. [PI]</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <p>It seems when you buy any item on my serve (haven’t tested special shops) you get 2 of that item, but it charges for one.<br>
Say I want a anti-dragon shield. They cost 20gp. I’ve got 100k. I click buy 1. and 2 show in inventory and end with 99980gp.</p>
<p>I think this is handled in the shop assistant via buyitem. But I don’t know for sure.<br>
what ever code you need, tell me.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/buying-items-you-get-2-not-1-pi/482340/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/buying-items-you-get-2-not-1-pi/482340/1</link>
        <pubDate>Sat, 09 Feb 2013 21:18:22 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-482340-1</guid>
        <source url="https://forum.moparisthebest.com/t/buying-items-you-get-2-not-1-pi/482340.rss">Buying items, you get 2 not 1. [PI]</source>
      </item>
  </channel>
</rss>
