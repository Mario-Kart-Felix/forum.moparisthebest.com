<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/using-the-assist-chat/544568 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:05:57 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Using the assist chat? - Game Development - moparisthebest.com</title>
    <meta name="description" content="Hey guys. I&amp;#39;ve been digging in my client and I can&amp;#39;t seem to figure out how to use the assist chat area. I was trying to compare it to the other chat types but it seemed rather confusing how everything was done. 

In bui&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="544568.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Using the assist chat?&#39;" href="544568.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/using-the-assist-chat/544568" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/using-the-assist-chat/544568" />
<meta property="og:title" content="Using the assist chat?" />
<meta name="twitter:title" content="Using the assist chat?" />
<meta property="og:description" content="Hey guys. I’ve been digging in my client and I can’t seem to figure out how to use the assist chat area.  I was trying to compare it to the other chat types but it seemed rather confusing how everything was done.  In buildChatAreaMenu it has all the settings for each menu and it builds each chat type, ex:   			if (chatTypeView == 3 || chatTypeView == 4) { 				buildDuelorTrade(j); 				break; 			}  Below the menu build it has all the code for right clicking in each of the chat types.  Here’s the c..." />
<meta name="twitter:description" content="Hey guys. I’ve been digging in my client and I can’t seem to figure out how to use the assist chat area.  I was trying to compare it to the other chat types but it seemed rather confusing how everything was done.  In buildChatAreaMenu it has all the settings for each menu and it builds each chat type, ex:   			if (chatTypeView == 3 || chatTypeView == 4) { 				buildDuelorTrade(j); 				break; 			}  Below the menu build it has all the code for right clicking in each of the chat types.  Here’s the c..." />
<meta property="article:published_time" content="2014-07-03T05:57:11+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="544568.html">Using the assist chat?</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/general-programming.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>General Programming</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/general-programming/game-development.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Game Development</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/sk8rdude461.html'><span itemprop='name'>sk8rdude461</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-07-03T05:57:11Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:23:12Z' class='post-time'>
              August 4, 2016,  1:23pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hey guys. I’ve been digging in my client and I can’t seem to figure out how to use the assist chat area.<br>
I was trying to compare it to the other chat types but it seemed rather confusing how everything was done.</p>
<p>In buildChatAreaMenu it has all the settings for each menu and it builds each chat type, ex:</p>
<p><code>
			if (chatTypeView == 3 || chatTypeView == 4) {
				buildDuelorTrade(j);
				break;
			}</code></p>
<p>Below the menu build it has all the code for right clicking in each of the chat types.</p>
<p>Here’s the code to build the duelortrade menu</p>
<pre><code class="lang-auto">
	private void buildDuelorTrade(int j) {
		int l = 0;
		for (int i1 = 0; i1 &lt; 500; i1++) {
			if (chatMessages[i1] == null)
				continue;
			if (chatTypeView != 3 &amp;&amp; chatTypeView != 4)
				continue;
			int j1 = chatTypes[i1];
			String s = chatNames[i1];
			int k1 = (70 - l * 14 + 42) + anInt1089 + 4 + 5;
			if (k1 &lt; -23)
				break;
			/*
			 * This is where the client handles where to start player text for
			 * the duel and trade chat area. We switch from substring 5 to
			 * substring 6 when the crown numbers become double digits. This is
			 * because we have to start the text after the @cr#@ text because we
			 * don't want that showing.
			 */
			if (s != null &amp;&amp; s.startsWith("@cr1@"))
				s = s.substring(5);
			if (s != null &amp;&amp; s.startsWith("@cr2@"))
				s = s.substring(5);
			if (s != null &amp;&amp; s.startsWith("@cr3@"))
				s = s.substring(5);
			if (s != null &amp;&amp; s.startsWith("@cr4@"))
				s = s.substring(5);
			if (s != null &amp;&amp; s.startsWith("@cr5@"))
				s = s.substring(5);
			if (s != null &amp;&amp; s.startsWith("@cr6@"))
				s = s.substring(5);
			if (s != null &amp;&amp; s.startsWith("@cr7@"))
				s = s.substring(5);
			if (s != null &amp;&amp; s.startsWith("@cr8@"))
				s = s.substring(5);
			if (s != null &amp;&amp; s.startsWith("@cr9@"))
				s = s.substring(5);
			if (s != null &amp;&amp; s.startsWith("@cr10@"))
				s = s.substring(6);
			if (s != null &amp;&amp; s.startsWith("@cr11@"))
				s = s.substring(6);
			if (s != null &amp;&amp; s.startsWith("@cr12@"))
				s = s.substring(6);
			if (s != null &amp;&amp; s.startsWith("@cr13@"))
				s = s.substring(6);
			if (s != null &amp;&amp; s.startsWith("@cr14@"))
				s = s.substring(6);

			if (chatTypeView == 3 &amp;&amp; j1 == 4
					&amp;&amp; (tradeMode == 0 || tradeMode == 1 &amp;&amp; isFriendOrSelf(s))) {
				if (j &gt; k1 - 14 &amp;&amp; j &lt;= k1) {
					menuActionName[menuActionRow] = "Accept trade @whi@" + s;
					menuActionID[menuActionRow] = 484;
					menuActionRow++;
				}
				l++;
			}
			if (chatTypeView == 4 &amp;&amp; j1 == 8
					&amp;&amp; (tradeMode == 0 || tradeMode == 1 &amp;&amp; isFriendOrSelf(s))) {
				if (j &gt; k1 - 14 &amp;&amp; j &lt;= k1) {
					menuActionName[menuActionRow] = "Accept challenge @whi@"
							+ s;
					menuActionID[menuActionRow] = 6;
					menuActionRow++;
				}
				l++;
			}
			if (j1 == 12) {
				if (j &gt; k1 - 14 &amp;&amp; j &lt;= k1) {
					menuActionName[menuActionRow] = "Go-to @cya@" + s;
					menuActionID[menuActionRow] = 915;
					menuActionRow++;
				}
				l++;
			}
		}
	}</code></pre>
<p>The <span class="mention">@cr</span> stuff is for modicons, I plan to rewrite that part.</p>
<p>Now looking more into how the trade/duel requests work, this is what I found.<br>
In packet 253, it determines the chat type. And mostly they’re separated based on the start/end of the word.</p>
<p>[code=java]<br>
if (s.endsWith(":tradereq:")) {<br>
String s3 = s.substring(0, s.indexOf(":"));<br>
long l17 = TextClass.longForName(s3);<br>
boolean flag2 = false;<br>
for (int j27 = 0; j27 &lt; ignoreCount; j27++) {<br>
if (ignoreListAsLongs[j27] != l17)<br>
continue;<br>
flag2 = true;<br>
}<br>
if (!flag2 &amp;&amp; anInt1251 == 0)<br>
pushMessage(“wishes to trade with you.”, 4, s3);<br>
} else if (s.endsWith(":chalreq:")) {<br>
String s5 = s.substring(0, s.indexOf(":"));<br>
long l19 = TextClass.longForName(s5);<br>
boolean flag4 = false;<br>
for (int l27 = 0; l27 &lt; ignoreCount; l27++) {<br>
if (ignoreListAsLongs[l27] != l19)<br>
continue;<br>
flag4 = true;</p>
<pre><code>				}
				if (!flag4 &amp;&amp; anInt1251 == 0) {
					String s8 = s.substring(s.indexOf(":") + 1,
							s.length() - 9);
					pushMessage(s8, 8, s5);
				}
			}[/code]
</code></pre>
<p>Using all of this, what would I do to make use of the assist chat menu/area? I was thinking basically just duplicate the duelortrade method and then replace the 3 (removing the 4) with a new chat number for it. But I don’t know what I’d need to do in packet 253 for it to push the message into the correct chat area.</p>
      </div>

      <meta itemprop='headline' content='Using the assist chat?'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/ohokay.html'><span itemprop='name'>ohokay</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-07-03T16:39:39Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:23:17Z' class='post-time'>
              August 4, 2016,  1:23pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>chatTypeView == 3 ?</p>
<pre><code class="lang-auto">pushMessage("wishes to trade with you.", 4, s3);</code></pre>
<p>The “4” represents the type of chat to be sent, whether it be pm, normal text, duel text, trade etc…</p>
<p>I think the actual displaying of the text, based on what tab you’re in is either in that method you posted, or the drawChatArea method</p>
      </div>

      <meta itemprop='headline' content='Using the assist chat?'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/sk8rdude461.html'><span itemprop='name'>sk8rdude461</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-07-04T20:28:46Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:23:34Z' class='post-time'>
              August 4, 2016,  1:23pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Okay so I got the assist chat working. Mostly. However, the messages don’t send to each client all the way.<br>
They show up in the debug code I have, but that’s it.</p>
<p>It’s really strange. It works on one client but not the other. though they are ran off the exact same compiled files.<br>
[spoiler=“Large_Media”]<br>
<img src="http://puu.sh/9WWo4/f3be273d50.jpg" alt width="" height=""><br>
[/spoiler]<br>
The consoles are aligned with their respected client.</p>
      </div>

      <meta itemprop='headline' content='Using the assist chat?'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/using-the-assist-chat/544568 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:05:57 GMT -->
</html>
