<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/cron-problem-debian/193710 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:06:06 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Cron problem (debian) - Technology - moparisthebest.com</title>
    <meta name="description" content="I installed cron onto my debian machine and i made a crontab file called crontab.root which is meant to execute every half an hour calling the file restart-server, and inside the file restart-server is this:  

 #!/bin/b&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="193710.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Cron problem (debian)&#39;" href="193710.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/cron-problem-debian/193710" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/cron-problem-debian/193710" />
<meta property="og:title" content="Cron problem (debian)" />
<meta name="twitter:title" content="Cron problem (debian)" />
<meta property="og:description" content="I installed cron onto my debian machine and i made a crontab file called crontab.root which is meant to execute every half an hour calling the file restart-server, and inside the file restart-server is this:  #!/bin/bash echo &quot;killing java server&quot; kill `ps -ef | awk &#39; {if ($8==&quot;java&quot;) print $2} &#39;` echo &quot;java server killed - sleep 5&quot; sleep 5 echo &quot;sleep over - starting java&quot; nohup java /home/server &amp; echo &quot;server started&quot;   If i run the file manually (./restart-server) it does exactly what its me..." />
<meta name="twitter:description" content="I installed cron onto my debian machine and i made a crontab file called crontab.root which is meant to execute every half an hour calling the file restart-server, and inside the file restart-server is this:  #!/bin/bash echo &quot;killing java server&quot; kill `ps -ef | awk &#39; {if ($8==&quot;java&quot;) print $2} &#39;` echo &quot;java server killed - sleep 5&quot; sleep 5 echo &quot;sleep over - starting java&quot; nohup java /home/server &amp; echo &quot;server started&quot;   If i run the file manually (./restart-server) it does exactly what its me..." />
<meta property="article:published_time" content="2008-03-28T21:47:34+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="193710.html">Cron problem (debian)</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/technology.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Technology</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/eczema3.html'><span itemprop='name'>eczema3</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-03-28T21:47:34Z'>
            <time itemprop='dateModified' datetime='2016-07-30T21:11:41Z' class='post-time'>
              July 30, 2016,  9:11pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I installed cron onto my debian machine and i made a crontab file called crontab.root which is meant to execute every half an hour calling the file restart-server, and inside the file restart-server is this:</p>
<p><code>#!/bin/bash
echo "killing java server"
kill `ps -ef | awk ' {if ($8=="java") print $2} '`
echo "java server killed - sleep 5"
sleep 5
echo "sleep over - starting java"
nohup java /home/server &amp;
echo "server started"
</code><br>
If i run the file manually (./restart-server) it does exactly what its meant to and theres no errors found, but when the sheduled cron task runs it, everything set to echo is echoed and all tasks are completed so the server is killed. But the server doesn’t come back up again and there isnt any errors.</p>
<p>Anyone got an ideas?</p>
      </div>

      <meta itemprop='headline' content='Cron problem (debian)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/moparisthebest.html'><span itemprop='name'>moparisthebest</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-03-29T20:56:27Z'>
            <time itemprop='dateModified' datetime='2016-07-30T21:14:36Z' class='post-time'>
              July 30, 2016,  9:14pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Why not simply drop the script into ‘/etc/cron.hourly’ where it is supposed to go?</p>
      </div>

      <meta itemprop='headline' content='Cron problem (debian)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/eczema3.html'><span itemprop='name'>eczema3</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-03-29T23:38:13Z'>
            <time itemprop='dateModified' datetime='2016-07-30T21:14:49Z' class='post-time'>
              July 30, 2016,  9:14pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>so what, just add</p>
<p><code>#!/bin/bash
echo "killing java server"
kill `ps -ef | awk ' {if ($8=="java") print $2} '`
echo "java server killed - sleep 5"
sleep 5
echo "sleep over - starting java"
nohup java /home/server &amp;
echo "server started"</code><br>
to cron.hourly?</p>
      </div>

      <meta itemprop='headline' content='Cron problem (debian)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/moparisthebest.html'><span itemprop='name'>moparisthebest</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-03-31T23:20:25Z'>
            <time itemprop='dateModified' datetime='2016-07-30T21:19:44Z' class='post-time'>
              July 30, 2016,  9:19pm
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>‘/etc/cron.hourly’ is a folder, put your script in there.</p>
      </div>

      <meta itemprop='headline' content='Cron problem (debian)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/eczema3.html'><span itemprop='name'>eczema3</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-04-02T20:25:25Z'>
            <time itemprop='dateModified' datetime='2016-07-30T21:24:31Z' class='post-time'>
              July 30, 2016,  9:24pm
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>tried that, it still doesnt bring the server back it only kills it… :S</p>
      </div>

      <meta itemprop='headline' content='Cron problem (debian)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/moparisthebest.html'><span itemprop='name'>moparisthebest</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-04-02T22:54:58Z'>
            <time itemprop='dateModified' datetime='2016-07-30T21:24:43Z' class='post-time'>
              July 30, 2016,  9:24pm
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Perhaps because ‘nohup java /home/server &amp;’ isn’t correct?</p>
      </div>

      <meta itemprop='headline' content='Cron problem (debian)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/eczema3.html'><span itemprop='name'>eczema3</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-04-03T21:04:59Z'>
            <time itemprop='dateModified' datetime='2016-07-30T21:26:24Z' class='post-time'>
              July 30, 2016,  9:26pm
            </time>
        <span itemprop='position'>#7</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>But when i run the script manually by typing, ./restart-server it works absolutley fine. I tihnk my dad may have found  solution: He checked out what variables the machine had runing all the time, then he checked what variables cron had running, turns out that cron had 0 variables &gt;_&gt;</p>
      </div>

      <meta itemprop='headline' content='Cron problem (debian)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/lanboyo.html'><span itemprop='name'>lanboyo</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-04-04T01:16:14Z'>
            <time itemprop='dateModified' datetime='2016-07-30T21:26:44Z' class='post-time'>
              July 30, 2016,  9:26pm
            </time>
        <span itemprop='position'>#8</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Yes, the cron user doesn’t have much in the way of environment variables.</p>
<p>Your problem is probably running without a terminal. redirect your output to a file and see what happens…</p>
<p>nohup java /home/server 1&gt; /tmp/javalog 2&gt;&amp;1</p>
      </div>

      <meta itemprop='headline' content='Cron problem (debian)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/eczema3.html'><span itemprop='name'>eczema3</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-04-05T02:41:26Z'>
            <time itemprop='dateModified' datetime='2016-07-30T21:28:35Z' class='post-time'>
              July 30, 2016,  9:28pm
            </time>
        <span itemprop='position'>#9</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>with a nohup command, output is automatically written to a file called ‘nohup.out’ and ive checked that, nothing abnormal is there.</p>
      </div>

      <meta itemprop='headline' content='Cron problem (debian)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/cron-problem-debian/193710 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:06:06 GMT -->
</html>
