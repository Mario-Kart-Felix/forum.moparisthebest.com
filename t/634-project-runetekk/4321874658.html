<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/634-project-runetekk/432187?page=2 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Aug 2019 13:15:01 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>[634]Project RuneTekk - Runescape - moparisthebest.com</title>
    <meta name="description" content="*">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="4321874658.html?page=2" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;[634]Project RuneTekk&#39;" href="432187.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/634-project-runetekk/432187?page=2" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/634-project-runetekk/432187?page=2" />
<meta property="og:title" content="[634]Project RuneTekk" />
<meta name="twitter:title" content="[634]Project RuneTekk" />
<meta property="og:description" content="[quote=“sinisoul, post:20, topic:432187”][quote author=Metho D link=topic=534899.msg3911343#msg3911343 date=1328755921]   Icee.  What’s in the Raster class?  [/quote]  Raster stuff, obviously. :&gt;[/quote]  ಠ_ಠ  Did you forget the -i(s|z)er at the end of Raster? Post code!" />
<meta name="twitter:description" content="[quote=“sinisoul, post:20, topic:432187”][quote author=Metho D link=topic=534899.msg3911343#msg3911343 date=1328755921]   Icee.  What’s in the Raster class?  [/quote]  Raster stuff, obviously. :&gt;[/quote]  ಠ_ಠ  Did you forget the -i(s|z)er at the end of Raster? Post code!" />
<meta property="article:published_time" content="2012-02-09T03:25:36+00:00" />
<meta property="og:ignore_canonical" content="true" />

      <link rel="prev" href="432187.html">
      <link rel="next" href="4321879ba9.html?page=3">


    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="432187.html">[634]Project RuneTekk</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Metho_D.html'><span itemprop='name'>Metho_D</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-02-09T03:25:36Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:51:33Z' class='post-time'>
              August 2, 2016,  3:51pm
            </time>
        <span itemprop='position'>#21</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“sinisoul, post:20, topic:432187”][quote author=Metho D link=topic=534899.msg3911343#msg3911343 date=1328755921]</p>
<aside class="quote">
<blockquote>
<p>I’m just giving you shit. I actually thought you designed that bit but I found it a bit cool that you actually rewrote the client to make a very appropriate design even though it was based off how the client downloads files.</p>
</blockquote>
</aside>
<p>Icee.</p>
<p>What’s in the Raster class?<br>
[/quote]</p>
<p>Raster stuff, obviously. :&gt;[/quote]</p>
<p>ಠ_ಠ</p>
<p>Did you forget the -i(s|z)er at the end of Raster? Post code!</p>
      </div>

      <meta itemprop='headline' content='[634]Project RuneTekk'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/sinisoul.html'><span itemprop='name'>sinisoul</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-02-09T03:32:30Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:51:34Z' class='post-time'>
              August 2, 2016,  3:51pm
            </time>
        <span itemprop='position'>#22</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Metho D, post:21, topic:432187”][quote author=sinisoul link=topic=534899.msg3911348#msg3911348 date=1328756092]</p>
<aside class="quote no-group">
<blockquote>
<aside class="quote no-group">
<blockquote>
<p>I’m just giving you shit. I actually thought you designed that bit but I found it a bit cool that you actually rewrote the client to make a very appropriate design even though it was based off how the client downloads files.</p>
</blockquote>
</aside>
<p>Icee.</p>
<p>What’s in the Raster class?</p>
</blockquote>
</aside>
<p>Raster stuff, obviously. :&gt;<br>
[/quote]</p>
<p>ಠ_ಠ</p>
<p>Did you forget the -i(s|z)er at the end of Raster? Post code![/quote]</p>
<p>As soon as I figure out why the current toolkit isn’t set anywhere in the client ಠ_ಠ</p>
<p><img src="http://i3.kym-cdn.com/entries/icons/original/000/003/619/Untitled-1.jpg" alt width="" height=""></p>
<pre><code class="lang-auto">Class348_Sub8.currentToolkit = Class104.method958</code></pre>
<p>Edit:</p>
<p>Just broke 100 renamed classes. Also got my old web developer from Evelus back <img src="../../images/emoji/twitter/slight_smilec164.png?v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>Edit 2:</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="http://i.imgur.com/AsXP6.png" title="AsXP6.png" rel="nofollow noopener"><img src="http://i.imgur.com/AsXP6.png" alt width="690" height="460"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use xlink:href="#far-image"></use></svg><span class="filename">AsXP6.png</span><span class="informations">795×530</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div></p>
<p>Removed the update server for now.</p>
<p>Edit 3:</p>
<p>Fucked up most of the graphic modes. Gah.</p>
      </div>

      <meta itemprop='headline' content='[634]Project RuneTekk'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/neroxx.html'><span itemprop='name'>neroxx</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-02-10T16:26:09Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:52:42Z' class='post-time'>
              August 2, 2016,  3:52pm
            </time>
        <span itemprop='position'>#23</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>100% supporter of this &lt;3</p>
      </div>

      <meta itemprop='headline' content='[634]Project RuneTekk'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/sinisoul.html'><span itemprop='name'>sinisoul</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-02-10T16:27:31Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:52:42Z' class='post-time'>
              August 2, 2016,  3:52pm
            </time>
        <span itemprop='position'>#24</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Thanks bud. Updated the OP a bit.</p>
<p>Well I finished a little custom networking package. My whole philosophy behind networking has been to be very conservative when parsing/handling packets. I wanted to create a scheme I know worked with how the client functioned as a whole and had finer control. The networking library, although not finished, does not take much to create a basic server. I created a small example for myself to use, which I provided below, that handles the JS5 server handshake packet. Please note that packets can be parsed in quantities and not when bytes are received. From here I will simply need to create a ‘Passport’ medium that carries the information for a connection between pathways and then design my server. I don’t see why people over complicate this.</p>
<p>Terribad simple example of how networking would be set up.</p>
<pre><code class="lang-auto">package org.runetekk.net;

import java.net.Socket;
import java.util.LinkedList;
import java.util.List;
import org.runetekk.com.AbstractFork;
import org.runetekk.com.BasicPacket;
import org.runetekk.com.IncomingPacket;
import org.runetekk.com.PacketHandler;
import org.runetekk.com.Passport;
import org.runetekk.com.Pathway;

/**
 * Test.java
 * @version 1.0.0
 * @author RuneTekk Development (SiniSoul)
 */
public class Test {
    
    public static void main(String[] args) throws Exception {
        Pathway pathway = new Pathway(new AbstractFork[] { new JS5Handshake() });
        ServerWorker serverWorker = new ServerWorker();     
        serverWorker.initialize(40000);
        List&lt;Passport&gt; handlers = new LinkedList&lt;Passport&gt;();
        for(;;) {
            for(int i = 0; i &lt; 10; i++) {
                Socket socket = serverWorker.getAcceptedSocket();
                if(socket == null) {
                    break;
                }
                SocketHandler handler = new SocketHandler(socket, 5000);
                PacketHandler packetHandler = new PacketHandler(handler);
                packetHandler.setDefaultPathway(pathway);
                Passport passport = new Passport(packetHandler);
                handlers.add(passport);
            }
            for(Passport handler : handlers) {
                boolean bool = handler.getPacketHandler().readPackets(1) == 1;
                if(!bool)
                    continue;
                handler.generateServerSessionKey();
                System.out.println(handler.getServerSessionKey());
                int a = 5; //For breakpoints.
            }
        }
    } 
    
    static class JS5Handshake extends AbstractFork {
        
        JS5Handshake() {
            super(new BasicPacket(15, 4));
        }

        @Override
        protected void handlePassport(Passport passport, IncomingPacket packet) {
            throw new UnsupportedOperationException("Not supported yet.");
        }

        @Override
        protected void handleError(Passport passport, Exception ex) {
            throw new UnsupportedOperationException("Not supported yet.");
        }
    }
}</code></pre>
<p>If you have any criticism or ideas, feel free to post it but please have good reasoning.</p>
<p>Edit: I’ll be adding a new stage to the thread after I feel good about my networking package. Be on the look for that later.</p>
<p>Edit 2: Still bent out of shape for what scripting language I want to integrate. I was thinking Lua for speed but Ruby is nice too…hmm…</p>
      </div>

      <meta itemprop='headline' content='[634]Project RuneTekk'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/CoderChris.html'><span itemprop='name'>CoderChris</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-02-10T21:44:52Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:52:56Z' class='post-time'>
              August 2, 2016,  3:52pm
            </time>
        <span itemprop='position'>#25</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Good Luck <img src="../../images/emoji/twitter/stuck_out_tongueae52.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
      </div>

      <meta itemprop='headline' content='[634]Project RuneTekk'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Pure_Slay.html'><span itemprop='name'>Pure_Slay</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-02-11T02:51:59Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:53:11Z' class='post-time'>
              August 2, 2016,  3:53pm
            </time>
        <span itemprop='position'>#26</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Use netty for networking… good luck.</p>
      </div>

      <meta itemprop='headline' content='[634]Project RuneTekk'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="2" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/the_wanderer.html'><span itemprop='name'>the_wanderer</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-02-11T02:58:20Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:53:11Z' class='post-time'>
              August 2, 2016,  3:53pm
            </time>
        <span itemprop='position'>#27</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote quote-modified" data-post="26" data-topic="432187">
<div class="title">
<div class="quote-controls"></div>
 Pure Slay:</div>
<blockquote>
<p>Use netty for networking… good luck.</p>
</blockquote>
</aside>
<p>Always curious. What is the benefits of using a library like mina or netty over just IO/NIO? Besides I believe people have said it is easier.</p>
      </div>

      <meta itemprop='headline' content='[634]Project RuneTekk'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/sinisoul.html'><span itemprop='name'>sinisoul</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-02-11T03:04:38Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:53:11Z' class='post-time'>
              August 2, 2016,  3:53pm
            </time>
        <span itemprop='position'>#28</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote quote-modified" data-post="26" data-topic="432187">
<div class="title">
<div class="quote-controls"></div>
 Pure Slay:</div>
<blockquote>
<p>Use netty for networking… good luck.</p>
</blockquote>
</aside>
<p>Noty. My little implementation will do fine.</p>
<pre><code class="lang-auto">package org.runetekk;

import org.runetekk.utils.ScriptManager;
import org.runetekk.utils.ServerMode;
import org.runetekk.utils.StartupScripts;
import javax.script.ScriptContext;
import javax.script.Bindings;

/**
 * Main.java
 * @version 1.0.0
 * @author RuneTekk Development (SiniSoul)
 */
public final class Main {
    
    /**
     * The current server mode in use as of now.
     */
    public static ServerMode currentServerMode;
    
    /**
     * The scripts to run when the program is starting up.
     */
    public static StartupScripts startupScripts;
    
    /**
     * The main entry point of the program.
     * @param args The command line arguments.
     */
    public static void main(String[] args) throws Exception {
        if(args.length &lt; 1) {
            System.err.println("Arguments: &lt;live/setup&gt;...");
            return;
        }
        currentServerMode = ServerMode.getServerMode(args[0]);
        if(currentServerMode == null) {
            System.err.println("Invalid server mode: " + args[0] + "...");
            return;
        }
        System.out.println("RuneTekk Mode[" + currentServerMode + "]Starting up...");
        startupScripts = StartupScripts.getScripts(currentServerMode);
        if(startupScripts != null) {
            System.out.println("RuneTekk Mode[" + currentServerMode + "]Processing startup scripts...");
            ScriptManager scriptManager = new ScriptManager("jruby");
            Bindings bindings = scriptManager.getScriptEngine().createBindings();
            bindings.put("args", args);
            scriptManager.getScriptEngine().setBindings(bindings, ScriptContext.ENGINE_SCOPE);
            startupScripts.processScripts(scriptManager, "./bin/scripts/");
        }
    }
}</code></pre>
<p>Finished basic start up scripts. The scripts ran depend on the server mode and for right now I am writing the ondemand server setup.</p>
      </div>

      <meta itemprop='headline' content='[634]Project RuneTekk'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Pure_Slay.html'><span itemprop='name'>Pure_Slay</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-02-11T03:16:31Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:53:12Z' class='post-time'>
              August 2, 2016,  3:53pm
            </time>
        <span itemprop='position'>#29</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“The Wanderer, post:27, topic:432187”][quote author=Pure Slay link=topic=534899.msg3913048#msg3913048 date=1328928719]<br>
Use netty for networking… good luck.<br>
[/quote]<br>
Always curious. What is the benefits of using a library like mina or netty over just IO/NIO? Besides I believe people have said it is easier.[/quote]</p>
<p>I thought this poster sums it up well.</p>
<aside class="quote">
<blockquote>
<p>The main advantage of Netty over simply reading from and writing to sockets using streams is that Netty supports non-blocking, asynchronous I/O (using Java’s NIO API); when you use streams to read and write from sockets (and you start a new thread for each connected accepted from a ServerSocket) you are using blocking, synchronous I/O.</p>
<p>The Netty approach scales much better, which is important if your system needs to be able to handle many (thousands) of connections at the same time. If your system does not need to scale to many simultaneous connections, it might not be worth the trouble to use a framework like Netty.</p>
<p>Some more background information: Threads are relatively expensive resources in an operating system. Each thread needs memory for the stack (which can be for example 2 MB in size). When you create thousands of threads, this is going to cost a lot of memory; also, operating systems have limits on the number of threads that can be created. So you don’t want to start a new thread for each accepted connection. The idea of asynchronous I/O is to decouple the threads from the connections (no one-to-one relation). There can be many more connections than threads, and whenever some event happens on one of the connections (for example, data is received), a thread from a thread pool is temporarily used to handle the event.</p>
</blockquote>
</aside>
      </div>

      <meta itemprop='headline' content='[634]Project RuneTekk'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/sinisoul.html'><span itemprop='name'>sinisoul</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-02-11T03:58:20Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:53:14Z' class='post-time'>
              August 2, 2016,  3:53pm
            </time>
        <span itemprop='position'>#30</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Pure Slay, post:29, topic:432187”][quote author=The Wanderer link=topic=534899.msg3913057#msg3913057 date=1328929100]</p>
<aside class="quote">
<blockquote>
<p>Use netty for networking… good luck.</p>
</blockquote>
</aside>
<p>Always curious. What is the benefits of using a library like mina or netty over just IO/NIO? Besides I believe people have said it is easier.<br>
[/quote]</p>
<p>I thought this poster sums it up well.</p>
<p>[QUOTE]<br>
The main advantage of Netty over simply reading from and writing to sockets using streams is that Netty supports non-blocking, asynchronous I/O (using Java’s NIO API); when you use streams to read and write from sockets (and you start a new thread for each connected accepted from a ServerSocket) you are using blocking, synchronous I/O.</p>
<p>The Netty approach scales much better, which is important if your system needs to be able to handle many (thousands) of connections at the same time. If your system does not need to scale to many simultaneous connections, it might not be worth the trouble to use a framework like Netty.</p>
<p>Some more background information: Threads are relatively expensive resources in an operating system. Each thread needs memory for the stack (which can be for example 2 MB in size). When you create thousands of threads, this is going to cost a lot of memory; also, operating systems have limits on the number of threads that can be created. So you don’t want to start a new thread for each accepted connection. The idea of asynchronous I/O is to decouple the threads from the connections (no one-to-one relation). There can be many more connections than threads, and whenever some event happens on one of the connections (for example, data is received), a thread from a thread pool is temporarily used to handle the event.<br>
[/QUOTE][/quote]</p>
<p>Bloated networking package versus quantitative approach. I’ll take my approach.  Also note that it mentions thousands of threads. I don’t think it’s fit for any sort of critical review or argument.</p>
      </div>

      <meta itemprop='headline' content='[634]Project RuneTekk'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/davidi2.html'><span itemprop='name'>davidi2</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-02-12T02:20:37Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:54:28Z' class='post-time'>
              August 2, 2016,  3:54pm
            </time>
        <span itemprop='position'>#31</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>That post has nothing to do with Netty, that’s just about asynchio itself vs Thread-per-client. I personally wouldn’t use Netty either, but that’s just because I dislike using external resources in general (and like you, I think it’s a bit bloated for things like this). For a RSPS, nonblocking networking is important, as you should be able to support <span class="bbcode-i">thousands</span> (2, as everyone knows) of connections. Asynchio is pretty important, and no matter how much you beef up or obscurely name normal the normal IO operations, it’s not gunna be the same</p>
      </div>

      <meta itemprop='headline' content='[634]Project RuneTekk'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/sinisoul.html'><span itemprop='name'>sinisoul</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-02-12T02:23:33Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:54:28Z' class='post-time'>
              August 2, 2016,  3:54pm
            </time>
        <span itemprop='position'>#32</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote quote-modified" data-post="31" data-topic="432187">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forum.moparisthebest.com/davidi2/40/2579_1.png" class="avatar"> Davidi2:</div>
<blockquote>
<p>That post has nothing to do with Netty, that’s just about asynchio itself vs Thread-per-client. I personally wouldn’t use Netty either, but that’s just because I dislike using external resources in general (and like you, I think it’s a bit bloated for things like this). For a RSPS, nonblocking networking is important, as you should be able to support <span class="bbcode-i">thousands</span> (2, as everyone knows) of connections. Asynchio is pretty important, and no matter how much you beef up or obscurely name normal the normal IO operations, it’s not gunna be the same</p>
</blockquote>
</aside>
<p>How does non-blocking have anything to do with handling connections? Well, other than accepting connections.</p>
      </div>

      <meta itemprop='headline' content='[634]Project RuneTekk'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/davidi2.html'><span itemprop='name'>davidi2</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-02-12T02:26:57Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:54:28Z' class='post-time'>
              August 2, 2016,  3:54pm
            </time>
        <span itemprop='position'>#33</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“sinisoul, post:32, topic:432187”][quote author=Davidi2 link=topic=534899.msg3914151#msg3914151 date=1329013237]<br>
That post has nothing to do with Netty, that’s just about asynchio itself vs Thread-per-client. I personally wouldn’t use Netty either, but that’s just because I dislike using external resources in general (and like you, I think it’s a bit bloated for things like this). For a RSPS, nonblocking networking is important, as you should be able to support <span class="bbcode-i">thousands</span> (2, as everyone knows) of connections. Asynchio is pretty important, and no matter how much you beef up or obscurely name normal the normal IO operations, it’s not gunna be the same<br>
[/quote]</p>
<p>How does non-blocking have anything to do with handling connections? From what I understand it is solely just a method of accepting connections.[/quote]Nope. Just Google asynchronous IO. It applies to most of the IO operations.</p>
<p>As an example:</p>
<p>A blocking IO system would read from a slow socket until it was finished, and let faster ones pile up behind it, increasing latency.<br>
Non blocking IO would accept them as they arrive, and not wait until a slower socket was completed to handle faster ones. However it means you need to pay closer attention to your design pattern, or you will run into concurrency issues, or even just remove the advantage of the nonblocking IO altogether</p>
      </div>

      <meta itemprop='headline' content='[634]Project RuneTekk'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/sinisoul.html'><span itemprop='name'>sinisoul</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-02-12T02:34:32Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:54:29Z' class='post-time'>
              August 2, 2016,  3:54pm
            </time>
        <span itemprop='position'>#34</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Davidi2, post:33, topic:432187”][quote author=sinisoul link=topic=534899.msg3914155#msg3914155 date=1329013413]</p>
<aside class="quote">
<blockquote>
<p>That post has nothing to do with Netty, that’s just about asynchio itself vs Thread-per-client. I personally wouldn’t use Netty either, but that’s just because I dislike using external resources in general (and like you, I think it’s a bit bloated for things like this). For a RSPS, nonblocking networking is important, as you should be able to support <span class="bbcode-i">thousands</span> (2, as everyone knows) of connections. Asynchio is pretty important, and no matter how much you beef up or obscurely name normal the normal IO operations, it’s not gunna be the same</p>
</blockquote>
</aside>
<p>How does non-blocking have anything to do with handling connections? From what I understand it is solely just a method of accepting connections.<br>
[/quote]Nope. Just Google asynchronous IO. It applies to most of the IO operations.</p>
<p>As an example:</p>
<p>A blocking IO system would read from a slow socket until it was finished, and let faster ones pile up behind it, increasing latency.<br>
Non blocking IO would accept them as they arrive, and not wait until a slower socket was completed to handle faster ones. However it means you need to pay closer attention to your design pattern, or you will run into concurrency issues, or even just remove the advantage of the nonblocking IO altogether[/quote]</p>
<p>I’m following the advice of my friends who I consider ‘experts’ (have jobs at oracle and have created successful companies that deal with this) and they all said that a single thread for an acceptor coupled with appropriate handlers would be perfectly fine for this situation. Not saying I’m not investigating the situation but for design purposes it has been easier to using blocking IO. Most of the problem with people supporting 2000 players doesn’t really boil down to networking. Even if your networking is a perfect design, which people claim that ‘netty’ is the best way to go, I have never seen a server support more than 1200 connections. So I will stand behind my belief that my system will work until I have a valid example of what works best. Also to note I am past working on my networking API and more on the system design.</p>
      </div>

      <meta itemprop='headline' content='[634]Project RuneTekk'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/imsuperman05.html'><span itemprop='name'>imsuperman05</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-02-12T02:39:25Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:54:29Z' class='post-time'>
              August 2, 2016,  3:54pm
            </time>
        <span itemprop='position'>#35</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>What’s “blocking IO”?</p>
      </div>

      <meta itemprop='headline' content='[634]Project RuneTekk'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/davidi2.html'><span itemprop='name'>davidi2</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-02-12T02:40:12Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:54:29Z' class='post-time'>
              August 2, 2016,  3:54pm
            </time>
        <span itemprop='position'>#36</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Psh. Even getting an Oracle Java Master certificate is a joke if you have the money. But anyways… you could technically use 2 threads to handle all of it (one for the acceptor and one to loop through all connections and check for data); or even one really (which it looks like you are doing), but you <span class="bbcode-b">will</span> run into latency issues that way. Honestly that’s just common sense. Things are going to pile up, at least from what I can you have above. It even looks like you’re handling the packet before moving on to the next one, not just reading it, which is bad ‘system design’ as well. Something you should fix, if that’s what you doing. Can’t see the ‘readPackets(int)’ method though.</p>
      </div>

      <meta itemprop='headline' content='[634]Project RuneTekk'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/sinisoul.html'><span itemprop='name'>sinisoul</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-02-12T02:45:19Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:54:29Z' class='post-time'>
              August 2, 2016,  3:54pm
            </time>
        <span itemprop='position'>#37</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote quote-modified" data-post="36" data-topic="432187">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forum.moparisthebest.com/davidi2/40/2579_1.png" class="avatar"> Davidi2:</div>
<blockquote>
<p>Psh. Even getting an Oracle Java Master certificate is a joke if you have the money. But anyways… you could technically use 2 threads to handle all of it (one for the acceptor and one to loop through all connections and check for data); or even one really (which it looks like you are doing), but you <span class="bbcode-b">will</span> run into latency issues that way. Honestly that’s just common sense. Things are going to pile up, at least from what I can you have above. It even looks like you’re handling the packet before moving on to the next one, not just reading it, which is bad ‘system design’ as well. Something you should fix, if that’s what you doing. Can’t see the ‘readPackets(int)’ method though.</p>
</blockquote>
</aside>
<p>What made you an expert? I don’t really want to explain how the system works so I’ll post that class:</p>
<p>Design is obvious. Read what is needed and then if you can’t read what you need in the appropriate amount of time, call a timeout and then appropriately read the expected data if needed or move on. This is a networking api, and isn’t created to be straight forward because I will use this again for future projects. So I won’t respond to why not change the design posts.</p>
<pre><code class="lang-auto">package org.runetekk.com;

import java.io.IOException;
import java.util.LinkedList;
import java.util.Queue;
import org.runetekk.net.SocketHandler;
import org.runetekk.util.ISAACCipher;

/**
 * PacketHandler.java
 * @version 1.0.0
 * @author RuneTekk Development (SiniSoul)
 */
public final class PacketHandler {
    
    /**
     * The {@link SocketHandler} that this passport will read and write to.
     */
    private SocketHandler socketHandler;
    
    /**
     * The queue of previously parsed packets that are ready to be handled.
     */
    private Queue&lt;ForkPacket&gt; parsedPackets;
    
    /**
     * The queue of exceptions thrown while handling the packets.
     */
    private Queue&lt;Exception&gt; packetExceptions;
    
    /**
     * The outgoing packets that will be written to the socket handler.
     */
    private Queue&lt;OutgoingPacket&gt; outgoingPackets;
    
    /**
     * The {@link ISAACCipher} for when the incoming packets are spoofed.
     */
    private ISAACCipher incomingIsaacCipher;
    
    /**
     * The {@link ISAACCipher} for when the outgoing packets are spoofed.
     */
    private ISAACCipher outgoingIsaacCipher;
    
    /**
     * The default {@link Pathway} for this passport to take.
     */
    private Pathway defaultPathway;
    
    /**
     * The current {@link Pathway} that this passport will take.
     */
    private Pathway currentPathway;
    
    /**
     * The currently being read packet of this passport.
     */
    private ForkPacket currentPacket; 
    
    /**
     * Option to anticipate data lost from a packet timeout.
     */
    private boolean skipTimeoutData;
    
    /**
     * The amount of bytes to skip because of timed out packets.
     */
    private int lostSkip;
    
    /**
     * The amount of time before the 
     */
    private long packetTimeout;
    
    /**
     * Sets the {@link ISAACCipher} packet deciphering.
     * @param isaac The ISAACCipher.
     */
    public void setIncomingIsaacCipher(ISAACCipher isaac) {
        this.incomingIsaacCipher = isaac;
    }
    
    /**
     * Sets the {@link ISAACCipher} packet deciphering.
     * @param seeds The seeds to initialize the cipher with.
     */
    public void setIncomingIssacCipher(int[] seeds) {
        this.incomingIsaacCipher = new ISAACCipher(seeds);
    }
    
    /**
     * Sets the {@link ISAACCipher} packet enciphering.
     * @param isaac The ISAACCipher.
     */
    public void setOutgoingIsaacCipher(ISAACCipher isaac) {
        this.outgoingIsaacCipher = isaac;
    }
    
    /**
     * Sets the {@link ISAACCipher} packet enciphering.
     * @param seeds The seeds to initialize the cipher with.
     */
    public void setOutgoingIssacCipher(int[] seeds) {
        this.outgoingIsaacCipher = new ISAACCipher(seeds);
    }
    
    /**
     * Sets the default pathway for this handler.
     * @param pathway The pathway.
     */
    public void setDefaultPathway(Pathway pathway) {
        this.defaultPathway = pathway;
    }
    
    /**
     * Sets the current pathway for this handler.
     * @param pathway The current pathway.
     */
    public void setCurrentPathway(Pathway pathway) {
        this.currentPathway = pathway;
    }
    
    /**
     * Sets the amount of time before the packet is considered to be timed out.
     * @param timeout The time in milliseconds.
     */
    public void setPacketTimeout(long timeout) {
        this.packetTimeout = timeout;
    }
    
    /**
     * Sets the option to skip the remaining data from a packet timeout.
     * @param skip The skip option.
     */
    public void setSkipTimeoutData(boolean skip) {
        this.skipTimeoutData = skip;
    }
    
    /**
     * Gets the socket handler.
     * @return The socket handler.
     */
    public SocketHandler getSocketHandler() {
        return socketHandler;
    }
    
    /**
     * Attempts to read as many packets as it can 
     * @param amount The amount of packets to read.
     * @return The amount of packets successfully read.
     */
    public int readPackets(int amount) throws IOException {
        if(currentPathway == null)
            currentPathway = defaultPathway;
        if(currentPathway == null)
            return 0;
        int i = 0;
        for(; i &lt; amount; i++) {
            boolean bool = readPacket();
            if(currentPacket == null)
                break;
            if(skipTimeoutData &amp;&amp; System.currentTimeMillis() - currentPacket.timestamp &gt; packetTimeout) {
                packetExceptions.add(new PacketException("Packet timeout - " + currentPacket));
                lostSkip = currentPacket.packet.getRemaining();               
                currentPacket = null;
                continue;
            }   
            if(!bool)
                break;
            parsedPackets.add(currentPacket);
            currentPacket = null;
        }
        return i;
    }
    
    /**
     * Reads the current packet.
     * @return If the packet was read.
     * @throws IOException An IOException was thrown while reading the packet.
     */
    private boolean readPacket() throws IOException {
        if(currentPathway == null)
            currentPathway = defaultPathway;
        if(currentPathway == null)
            return false;
        if(currentPacket != null) {
            int oldRemaining = currentPacket.packet.getRemaining();            
            boolean bool = currentPacket.packet.read(socketHandler);
            if(oldRemaining &lt; 0)
                oldRemaining = currentPacket.packet.getRemaining();
            if(oldRemaining &gt; currentPacket.packet.getRemaining()) {
                currentPacket.timestamp = System.currentTimeMillis();
            }
            return bool;
        } else {
            int avail = socketHandler.getAvailable();
            if(skipTimeoutData &amp;&amp; lostSkip &gt; 0) {
                int amount = avail &gt; lostSkip ? lostSkip : avail;
                socketHandler.read(new byte[amount], 0, amount);
                avail -= lostSkip;
                if(avail &lt; 0)
                    avail = 0;
            }
            if(avail &lt; 1)
                return false;           
            int opcode = socketHandler.read() &amp; 255;
            opcode = incomingIsaacCipher != null ? opcode - incomingIsaacCipher.getNextValue() : opcode;
            AbstractFork fork = currentPathway.getFork(opcode);
            if(fork != null)
                currentPacket = new ForkPacket(fork);
            else
                packetExceptions.add(new ForkException("unknwn fork opcode - " + opcode));
            return readPacket();
        }       
    }
    
    /**
     * Puts a packet into the outgoing packets queue.
     * @param packet The packet to put into the queue.
     */
    public void putPacket(OutgoingPacket packet) {
        byte[] array = new byte[packet.getSrc().length + (packet.getOpcode() &gt; 127 ? 2 : 1) + (packet.getSize() &gt; 0 ? 0 : packet.getSize() == -1 ? 1 : 2)];
        array[0] = (byte) (((packet.getOpcode() &gt; 127 ? packet.getOpcode() &amp; 0x7F00 &gt;&gt; 8 : packet.getOpcode() &amp; 0x7F) + (outgoingIsaacCipher != null ? outgoingIsaacCipher.getNextValue() : 0)) &amp; 0xFF);
        if(packet.getOpcode() &gt; 127)
            array[1] = (byte) (((packet.getOpcode() &amp; 0xFF) + (outgoingIsaacCipher != null ? outgoingIsaacCipher.getNextValue() : 0)) &amp; 0xFF);
        System.arraycopy(packet.getSrc(), 0, array, packet.getOpcode() &gt; 127 ? 2 : 1, packet.getSrc().length);
        outgoingPackets.add((OutgoingPacket) packet.createDuplicate(2));
    }
    
    /**
     * Gets the next parsed {@link ForkPacket} and removes it from the parsed packet queue.
     * @return The packet.
     */
    public ForkPacket getNextPacket() {
        return parsedPackets.poll();
    }
    
    /**
     * Constructs a new {@link PacketHandler};
     * @param socket The socket to create the packet handler from.
     */
    public PacketHandler(SocketHandler handler) {
        this.socketHandler = handler;
        parsedPackets = new LinkedList&lt;ForkPacket&gt;();
        packetExceptions = new LinkedList&lt;Exception&gt;();
        outgoingPackets = new LinkedList&lt;OutgoingPacket&gt;();
        packetTimeout = 15000;
    }
}</code></pre>
<pre><code class="lang-auto">/**
     * Reads a packet from a {@link SocketHandler}.
     * @param socketHandler The {@link SocketHandler} to read the packet from.
     * @return The packet has successfully been read.
     * @throws IOException An IOException was thrown while reading the packet.
     */
    public boolean read(SocketHandler socketHandler) throws IOException {
        if(isFinished())
            return true;
        int avail = socketHandler.getAvailable();
        int needed = buffer == null ? (getSize() == -1 ? 1 : getSize() == -2 ? 
                2 : getSize()) : 1;
        if(buffer != null)
            if(avail &gt; buffer.getCapacity() - buffer.getOffset())
                avail = buffer.getCapacity() - buffer.getOffset();
        if(avail &lt; needed)
            return false;
        if(buffer == null) {
            int size = getSize();
            if(size &lt; 0) {
                if(size &lt; -1) {
                    byte[] temporary = new byte[2];
                    socketHandler.read(temporary, 0, temporary.length);
                    size = ((temporary[0] &amp; 255) &lt;&lt; 8) | (temporary[1] &amp; 255);
                } else {
                    size = socketHandler.read() &amp; 255;
                }
            }
            if(size &lt; 0)
                throw new IOException("ps &lt; 0");
            buffer = new Buffer(size);
            return read(socketHandler);
        }
        byte[] bytes = new byte[avail];
        socketHandler.read(bytes, 0, bytes.length);
        buffer.put(bytes, 0, bytes.length);
        return buffer.getOffset() == buffer.getCapacity();
    }</code></pre>
<p>[br]</p>
<p>In actual update news, I have finalized my design for the ‘servers’ or actually application I can say. Since it’s not completely done I won’t explain how it works but I love how the dependencies are set up so I can mix and match what services I want included with the application. This is actually the majority of what I scripted.</p>
<pre><code class="lang-auto">RuneTekk Mode[Live]Starting up...
RuneTekk Mode[Live]Executing the Ondemand initialization script..
Initializing the scripts to be ran for live mode...
Loading the global configuration file...
Initializing the Ondemand service for the application...
Setting the Ondemand parent table buffer...
Registering the Ondemand service to the application...
Initializing the Game service for the application...
Initializing the Game Server service for the application...
Registering the Game Server service to the application...
Successfully registered the Game Server on port 40000...
RuneTekk Mode[Live]Initialization has finished successfully...</code></pre>
      </div>

      <meta itemprop='headline' content='[634]Project RuneTekk'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/davidi2.html'><span itemprop='name'>davidi2</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-02-12T03:13:08Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:54:30Z' class='post-time'>
              August 2, 2016,  3:54pm
            </time>
        <span itemprop='position'>#38</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I spent a long time reading about the oracle certificates and looking at past questions, that’s what. I did an entire essay on them in my furthering education class last year. Unless you mean expert on this subject, in which case I’m not, but I haven’t claimed to be. This is the very basics of asynch io.</p>
<p>Well done. You’ve managed to screw over anyone with a bad connection and cause them to wait for the next cycle, whereas NIO would handle them all fine simultaneously. It actually almost looks like what you’re trying to do is what NIO does by itself, which is pretty redundant.</p>
<p>PS - What is your default packet timeout going to be? Don’t forget some places can pretty normally get a default latency of around 200ms or more, and then depending on the location of the majority of your players, you could be looking at quite a few seconds of wasted time.</p>
      </div>

      <meta itemprop='headline' content='[634]Project RuneTekk'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/sinisoul.html'><span itemprop='name'>sinisoul</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-02-12T03:16:46Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:54:30Z' class='post-time'>
              August 2, 2016,  3:54pm
            </time>
        <span itemprop='position'>#39</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Davidi2, post:38, topic:432187”]I spent a long time reading about the oracle certificates and looking at past questions, that’s what. I did an entire essay on them in my furthering education class last year. Unless you mean expert on this subject, in which case I’m not, but I haven’t claimed to be. This is the very basics of asynch io.</p>
<p>Well done. You’ve managed to screw over anyone with a bad connection and cause them to wait for the next cycle, whereas NIO would handle them all fine simultaneously. It actually almost looks like what you’re trying to do is what NIO does by itself, which is pretty redundant.[/quote]</p>
<p>Kay. See I don’t understand your point because no matter if you have a good or bad connection the currently packet will be cached until it is finished. So say I want to read two packets but I only have half of one then it will read that half of the packet and keep ahold of the data for the second packet that wasn’t read. Next cycle, you want to read two packets so you read the current packet plus one more packet if it’s available. Where in all of this do you have a problem?</p>
<pre><code class="lang-auto">    /**
     * The queue of previously parsed packets that are ready to be handled.
     */
    private Queue&lt;ForkPacket&gt; parsedPackets;</code></pre>
<p><em>cough</em></p>
<pre><code class="lang-auto">byte[] bytes = new byte[avail];
socketHandler.read(bytes, 0, bytes.length);
buffer.put(bytes, 0, bytes.length);</code></pre>
<p><em>cough</em></p>
<p>The default timeout would be determined after I got a reasonable statistic on what it should be. The reason for a packet timeout is for clients that disconnect unexpectedly but I guess it could work for players with a bad connection.</p>
      </div>

      <meta itemprop='headline' content='[634]Project RuneTekk'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/davidi2.html'><span itemprop='name'>davidi2</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-02-12T03:45:13Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:54:33Z' class='post-time'>
              August 2, 2016,  3:54pm
            </time>
        <span itemprop='position'>#40</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote quote-modified" data-post="39" data-topic="432187">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/sinisoul/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> sinisoul:</div>
<blockquote>
<p>Kay. See I don’t understand your point because no matter if you have a good or bad connection the currently packet will be cached until it is finished. So say I want to read two packets but I only have half of one then it will read that half of the packet and keep ahold of the data for the second packet that wasn’t read. Next cycle, you want to read two packets so you read the current packet plus one more packet if it’s available. Where in all of this do you have a problem?</p>
</blockquote>
</aside>
<p>Right here</p>
<p>[quote=“sinisoul, post:39, topic:432187”]Next cycle[/quote]You’re forcing them to wait through the entire player connection queue again, which with a full load, and lets just say a 50ms timeout with 400 players (which is harshly underestimated), could be up to 20 seconds. You’d probably never have everyone hit the timeout though, but you always are supposed to expect the worst. This would also make your server extremely easy to lag, just with a simple program that simulates the max timeout every time with a few participants.</p>
      </div>

      <meta itemprop='headline' content='[634]Project RuneTekk'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>

  <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
      <span itemprop='name'><a rel="prev" itemprop="url" href="432187.html">← previous page</a></span>
      <span itemprop='name'><b><a rel="next" itemprop="url" href="4321879ba9.html?page=3">next page →</a></b></span>
  </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/634-project-runetekk/432187?page=2 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Aug 2019 13:15:02 GMT -->
</html>
