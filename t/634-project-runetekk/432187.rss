<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>[634]Project RuneTekk</title>
    <link>https://forum.moparisthebest.com/t/634-project-runetekk/432187</link>
    <description>*</description>
    
    <lastBuildDate>Wed, 29 Feb 2012 06:32:51 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/634-project-runetekk/432187.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>[634]Project RuneTekk</title>
        <dc:creator><![CDATA[@sinisoul sini]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sinisoul">@sinisoul</a> wrote:</p>
          <blockquote>
              <p>Got caught up with <a href="http://tinyurl.com/6sl8sep" rel="nofollow noopener">http://tinyurl.com/6sl8sep</a> so this is on hold. Sorry about that. Still working on this during my free time, but that has been very limited <img src="https://forum.moparisthebest.com/images/emoji/twitter/frowning.png?v=5" title=":frowning:" class="emoji" alt=":frowning:"></p>
<p>Edit: Moderators don’t kill me, I committed to something I said I was going to do before this and I have to follow through.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/634-project-runetekk/432187/67">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/634-project-runetekk/432187/67</link>
        <pubDate>Wed, 29 Feb 2012 06:32:51 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-432187-67</guid>
        <source url="https://forum.moparisthebest.com/t/634-project-runetekk/432187.rss">[634]Project RuneTekk</source>
      </item>
      <item>
        <title>[634]Project RuneTekk</title>
        <dc:creator><![CDATA[@Skyru Skyru]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/skyru">@Skyru</a> wrote:</p>
          <blockquote>
              <p>Looks great sinisoul. I’m looking for daily updates. <img src="https://forum.moparisthebest.com/images/emoji/twitter/wink.png?v=5" title=":wink:" class="emoji" alt=":wink:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/634-project-runetekk/432187/66">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/634-project-runetekk/432187/66</link>
        <pubDate>Wed, 29 Feb 2012 04:11:50 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-432187-66</guid>
        <source url="https://forum.moparisthebest.com/t/634-project-runetekk/432187.rss">[634]Project RuneTekk</source>
      </item>
      <item>
        <title>[634]Project RuneTekk</title>
        <dc:creator><![CDATA[@Ruby_Forums_Coder Ruby]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ruby_forums_coder">@Ruby_Forums_Coder</a> wrote:</p>
          <blockquote>
              <p>Looks amazing! good luck mate.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/634-project-runetekk/432187/65">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/634-project-runetekk/432187/65</link>
        <pubDate>Tue, 28 Feb 2012 09:59:36 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-432187-65</guid>
        <source url="https://forum.moparisthebest.com/t/634-project-runetekk/432187.rss">[634]Project RuneTekk</source>
      </item>
      <item>
        <title>[634]Project RuneTekk</title>
        <dc:creator><![CDATA[@sinisoul sini]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sinisoul">@sinisoul</a> wrote:</p>
          <blockquote>
              <p>[quote=“jmood128, post:63, topic:432187”]Good luck with the project… You have a lot of Ctrl+H ahead of you. <img src="https://forum.moparisthebest.com/images/emoji/twitter/wink.png?v=5" title=":wink:" class="emoji" alt=":wink:"></p>
<p>Just wondering… Why not just be a cool kid and rewrite the 317 client for us less smart kids who just want to leech it and not have to use non-renamed/renamed tutorials when most of the client isn’t even renamed. :([/quote]</p>
<p>I use an IDE with very nice refactoring tools. I did rewrite the majority of my 317 client. It’s completely renamed, for the most part, but anyway.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/634-project-runetekk/432187/64">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/634-project-runetekk/432187/64</link>
        <pubDate>Tue, 21 Feb 2012 02:52:29 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-432187-64</guid>
        <source url="https://forum.moparisthebest.com/t/634-project-runetekk/432187.rss">[634]Project RuneTekk</source>
      </item>
      <item>
        <title>[634]Project RuneTekk</title>
        <dc:creator><![CDATA[@doom_j doom_j]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/doom_j">@doom_j</a> wrote:</p>
          <blockquote>
              <p>Good luck with the project… You have a lot of Ctrl+H ahead of you. <img src="https://forum.moparisthebest.com/images/emoji/twitter/wink.png?v=5" title=":wink:" class="emoji" alt=":wink:"></p>
<p>Just wondering… Why not just be a cool kid and rewrite the 317 client for us less smart kids who just want to leech it and not have to use non-renamed/renamed tutorials when most of the client isn’t even renamed. <img src="https://forum.moparisthebest.com/images/emoji/twitter/frowning.png?v=5" title=":frowning:" class="emoji" alt=":frowning:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/634-project-runetekk/432187/63">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/634-project-runetekk/432187/63</link>
        <pubDate>Tue, 21 Feb 2012 02:47:25 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-432187-63</guid>
        <source url="https://forum.moparisthebest.com/t/634-project-runetekk/432187.rss">[634]Project RuneTekk</source>
      </item>
      <item>
        <title>[634]Project RuneTekk</title>
        <dc:creator><![CDATA[@Native1 Native^]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/native1">@Native1</a> wrote:</p>
          <blockquote>
              <p>Finally. <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/634-project-runetekk/432187/62">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/634-project-runetekk/432187/62</link>
        <pubDate>Mon, 20 Feb 2012 22:07:26 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-432187-62</guid>
        <source url="https://forum.moparisthebest.com/t/634-project-runetekk/432187.rss">[634]Project RuneTekk</source>
      </item>
      <item>
        <title>[634]Project RuneTekk</title>
        <dc:creator><![CDATA[@sinisoul sini]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sinisoul">@sinisoul</a> wrote:</p>
          <blockquote>
              <p>Alright! I’m back on track with this because my engineering/robotics season ends tomorrow. I was working last night to try and identify some packets and found that much of the documentation of what each packet is, was incorrectly documented. Well not entirely but most of it was very misunderstood. Also notice that most of my client script dumps are out of date with some fairly important setting opcodes. So I fixed that. I figured since my Ondemand structure will need more work, I could start on a basic lobby server and improve my networking design. I’d expect that to be done by the end of next week. For some new snippets:</p>
<p>Update run energy script</p>
<pre><code class="lang-auto">================================================
      Client Script 1110 Dumped by SiniSoul    
      Instruction Size: 7
      Integer Arguments: 0 
      String  Arguments: 0 
================================================

================================================
                 Instructions                   
================================================

Offset: 0, getRunEnergy , Operand: 0
Offset: 1, integerToString , Operand: 0
Offset: 2, PUSHS , Operand: %
Offset: 3, CONCAT , Operand: 2
Offset: 4, PUSHI , Operand: 17104909
Offset: 5, setWidgetText , Operand: 0
Offset: 6, RETURN , Operand: 0</code></pre>
<p>A script with the get setting opcode</p>
<pre><code class="lang-auto">Offset: 17, changeWidgetId , Operand: 0
Offset: 18, GETSETTING , Operand: 8087
Offset: 19, SWITCH , Operand: 0</code></pre>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/634-project-runetekk/432187/61">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/634-project-runetekk/432187/61</link>
        <pubDate>Mon, 20 Feb 2012 22:02:30 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-432187-61</guid>
        <source url="https://forum.moparisthebest.com/t/634-project-runetekk/432187.rss">[634]Project RuneTekk</source>
      </item>
      <item>
        <title>[634]Project RuneTekk</title>
        <dc:creator><![CDATA[@Uncalled Uncalled]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/uncalled">@Uncalled</a> wrote:</p>
          <blockquote>
              <p>I’ve been busy not being on Mopar to check up on this project regularly. I just bump it and check up on it like every 2-3 weeks.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/634-project-runetekk/432187/60">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/634-project-runetekk/432187/60</link>
        <pubDate>Sun, 19 Feb 2012 21:40:24 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-432187-60</guid>
        <source url="https://forum.moparisthebest.com/t/634-project-runetekk/432187.rss">[634]Project RuneTekk</source>
      </item>
      <item>
        <title>[634]Project RuneTekk</title>
        <dc:creator><![CDATA[@sinisoul sini]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sinisoul">@sinisoul</a> wrote:</p>
          <blockquote>
              <p>Sorry I’ve been very busy with some non-emulation stuff (Engineering/social life). This will pick up again soon.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/634-project-runetekk/432187/59">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/634-project-runetekk/432187/59</link>
        <pubDate>Sun, 19 Feb 2012 21:38:23 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-432187-59</guid>
        <source url="https://forum.moparisthebest.com/t/634-project-runetekk/432187.rss">[634]Project RuneTekk</source>
      </item>
      <item>
        <title>[634]Project RuneTekk</title>
        <dc:creator><![CDATA[@g0d_of_war1 g0d of war1]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/g0d_of_war1">@g0d_of_war1</a> wrote:</p>
          <blockquote>
              <p>Good luck sinsoul <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/634-project-runetekk/432187/58">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/634-project-runetekk/432187/58</link>
        <pubDate>Thu, 16 Feb 2012 16:03:13 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-432187-58</guid>
        <source url="https://forum.moparisthebest.com/t/634-project-runetekk/432187.rss">[634]Project RuneTekk</source>
      </item>
      <item>
        <title>[634]Project RuneTekk</title>
        <dc:creator><![CDATA[@sinisoul sini]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sinisoul">@sinisoul</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="56" data-topic="432187">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/m1lkman/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> m1lkman:</div>
<blockquote>
<p>When will beta be released I wants to play</p>
</blockquote>
</aside>
<p>Not for a very long time.</p>
<pre><code class="lang-auto">package org.runetekk.services;

import java.io.IOException;
import org.evelus.fs.FileArchive;
import org.evelus.fs.entries.IndexTable;
import org.evelus.fs.impl.ModernFileSystem;
import org.runetekk.io.DirectBuffer;
import org.runetekk.ondemand.FileFetcher;

/**
 * ArchiveFetcherService.java
 * @version 1.0.0
 * @author RuneTekk Development (SiniSoul)
 */
public class ArchiveFetcherService implements FileFetcher, Runnable {
    
    /**
     * The parent table buffer.
     */
    private DirectBuffer parentTable;
    
    /**
     * The file system to load all the archive buffers from.
     */
    private ModernFileSystem fileSystem;
    
    /**
     * The archive entries loaded on this {@link ArchiveFetcherService}.
     */
    private ArchiveEntry[][] archiveEntries;
    
    /**
     * Represents an archive for this fetcher.
     */
    private class ArchiveEntry {
        
        /**
         * The archives buffer.
         */
        Object buffer;
        
        /**
         * The amount of times the archive was retrieved.
         */
        int retrieved;
    }
    
    /**
     * The configuration for how the archives will be loaded.
     */
    private byte[][] loadingconfig;
    
    /**
     * The thread for this {@link AbstractServer}.
     */
    private Thread thread;
    
    /**
     * The current state of the thread for this service.
     */
    private boolean isPaused;
    
   @Override
    public void initialize() {
        if(thread != null) {
            destroy();
        }  
        archiveEntries = new ArchiveEntry[256][];       
        loadingconfig = new byte[256][];
        for(int i = 0; i &lt; 256; i++) {
            IndexTable table = fileSystem.getIndexTable(i);
            if(table == null) {
                archiveEntries[i] = new ArchiveEntry[0];
                loadingconfig[i] = new byte[0];
                continue;
            }  
            int maximumEntry = -1;
            for(int j = 0; j &lt; table.getAmountEntries(); j++) {
                int id;
                if((id = table.getEntry(j).getEntryId()) &gt; maximumEntry)
                    maximumEntry = id;
            }
            archiveEntries[i] = new ArchiveEntry[maximumEntry + 1];
            loadingconfig[i] = new byte[maximumEntry + 1];
            for(int j = 0; j &lt; table.getAmountEntries(); j++) {
                loadingconfig[i][table.getEntry(j).getEntryId()] = (byte) -1;
            }
        }      
        thread = new Thread(this);
        thread.setPriority(5);
        thread.start();
    }
    
    @Override
    public void run() {
        for(;;) {
            synchronized(this) {
                if(isPaused)
                    break;
            }
        }
    }   
    
    @Override
    public void loadArchive(int index, int file) throws IOException {
        if(archiveEntries[index][file] == null) {
            FileArchive fileArchive = new FileArchive();
            fileSystem.getIndex(index).read(fileArchive, file);
            ArchiveEntry archive = new ArchiveEntry();
            if(loadingconfig[index][file] == -1) {
                archive.buffer = fileArchive.getArray();
            } else if(loadingconfig[index][file] == -2) {
                DirectBuffer buffer = new DirectBuffer();
                buffer.put(fileArchive.getArray());
                archive.buffer = buffer;
            }
        }
    }
    
    @Override
    public byte[] getArchive(int index, int file, int off, int len) throws IOException {
        if(loadingconfig == null) {
            throw new IOException();
        }
        if(index != 255 &amp;&amp; file != 255) {
            if(index &lt; 0 || loadingconfig.length &gt;= index || file &lt; 0 || loadingconfig[index].length &gt;= file)
                throw new IOException();
            if(loadingconfig[index][file] == 0)
                return null;
            if(archiveEntries[index][file] == null)
                loadArchive(index, file);
            ArchiveEntry archive = archiveEntries[index][file];
            archive.retrieved++;
            if(archive.buffer instanceof DirectBuffer) {
                return ((DirectBuffer) archive.buffer).get(off, len);
            } else {
                byte[] bytes = new byte[len];
                System.arraycopy((byte[]) archive.buffer, off, bytes, 0, len);
                return bytes;
            }
        } else {
            return parentTable.getPayload();
        }
    }

    @Override
    public String getName() {
        return "filefetcher";
    }
        
    /**
     * Destroys this {@link AbstractServer}.
     */
    public void destroy() {
        if(!isPaused)  {
            if(thread != null) {
                synchronized(this) {
                    isPaused = true;
                    notifyAll();
                }
                try {
                    thread.join();
                } catch(InterruptedException iex) {
                }
            }
            archiveEntries = null;
            loadingconfig = null;
            thread = null;
        }
    }
    
    /**
     * Constructs a new {@link ArchiveFetcherService}.
     * @param fileSystem The file system to load this disk file fetcher from.
     * @param parentTableSource The source of the parent table.
     */
    public ArchiveFetcherService(ModernFileSystem fileSystem, byte[] parentTableSource) {
        this.fileSystem = fileSystem;
        parentTable = new DirectBuffer();
        parentTable.put(parentTableSource);
    }
}</code></pre>
<p>Working on finishing this and I apologize for the thread mostly consisting of code snippets but I am really trying to stick to making sure the design of the ondemand server is well thought out. After this it should be pretty easy to load files but I am concerned about some dependency issues between the ondemand server and the fetcher service. But it shouldn’t be a problem as of now.</p>
<p>So in total, now, there are three threads running (for each service). And this is not including the lobby/lobby server. So in total there will eventually be about 5 + other services.</p>
<p>Also did a memory profile and there are some memory bits I will be fixing. Overall it isn’t bad but my filesystem library is pretty bulky and is taking about…20% of the total memory. I can cut that out entirely once its done so.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/634-project-runetekk/432187/57">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/634-project-runetekk/432187/57</link>
        <pubDate>Mon, 13 Feb 2012 08:43:22 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-432187-57</guid>
        <source url="https://forum.moparisthebest.com/t/634-project-runetekk/432187.rss">[634]Project RuneTekk</source>
      </item>
      <item>
        <title>[634]Project RuneTekk</title>
        <dc:creator><![CDATA[@m1lkman m1lkman]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/m1lkman">@m1lkman</a> wrote:</p>
          <blockquote>
              <p>When will beta be released I wants to play</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/634-project-runetekk/432187/56">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/634-project-runetekk/432187/56</link>
        <pubDate>Sun, 12 Feb 2012 20:58:49 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-432187-56</guid>
        <source url="https://forum.moparisthebest.com/t/634-project-runetekk/432187.rss">[634]Project RuneTekk</source>
      </item>
      <item>
        <title>[634]Project RuneTekk</title>
        <dc:creator><![CDATA[@halflive9 halflive9]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/halflive9">@halflive9</a> wrote:</p>
          <blockquote>
              <p>Looking good sinisoul.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/634-project-runetekk/432187/55">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/634-project-runetekk/432187/55</link>
        <pubDate>Sun, 12 Feb 2012 18:04:34 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-432187-55</guid>
        <source url="https://forum.moparisthebest.com/t/634-project-runetekk/432187.rss">[634]Project RuneTekk</source>
      </item>
      <item>
        <title>[634]Project RuneTekk</title>
        <dc:creator><![CDATA[@sinisoul sini]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sinisoul">@sinisoul</a> wrote:</p>
          <blockquote>
              <p>[quote=“Native^, post:53, topic:432187”][quote author=sinisoul link=topic=534899.msg3914513#msg3914513 date=1329041358]</p>
<pre><code class="lang-auto">raise 'Global configuration is nil!' unless $globalconfig != nil

puts 'Initializing the Game Server service for the application...'

#Initialize the server worker for the game server
raise 'Game server port number is nil!' unless $globalconfig['gameport'] != nil
worker = org.runetekk.net.ServerWorker.new
service = org.runetekk.servers.GameServer.new(worker)
service.setServerPort($globalconfig['gameport'])

#Initialize the determiner pathway and set it as the default pathway
determinerforks = []
if org.runetekk.Main::applicationMode == org.runetekk.utils.ApplicationMode::ODONLY or
   org.runetekk.Main::appplicationMode == org.runetekk.utils.ApplicationMode::LIVE
   #Kinda important to note that all ondemand packets are 3 bytes in size
   ondemandforks = []
   ondemandforks &lt;&lt; org.runetekk.ondemand.OnlineFork.new(2, 3)
   ondemandforks &lt;&lt; org.runetekk.ondemand.OfflineFork.new(3, 3)
   ondemandforks &lt;&lt; org.runetekk.ondemand.ConnectionFork.new(6, 3)
   ondemandforks &lt;&lt; org.runetekk.ondemand.DisconnectFork.new(7, 3)
   ondemandpathway = org.runetekk.com.Pathway.new(ondemandforks)
   puts 'Putting the ondemand fork into the determine fork array...'
   determinerforks &lt;&lt; org.runetekk.ondemand.OndemandFork.new(ondemandpathway, 15, 4)
end
defaultpathway = org.runetekk.com.Pathway.new(determinerforks)
service.setDefaultPathway(defaultpathway)

#Register the game server service to the application
puts 'Registering the Game Server service to the application...'
org.runetekk.Main::registerApplicationService(service)
puts "Successfully registered the Game Server on port #{$globalconfig['gameport']}..."</code></pre>
<p>Wait, your server is in Ruby?<br>
[/quote][/quote]</p>
<p>No not all of it. Most of the configuring of the server is done in Ruby,</p>
<pre><code class="lang-auto">package org.runetekk;

import java.util.HashMap;
import java.util.Map;
import javax.script.Bindings;
import javax.script.ScriptContext;
import org.runetekk.utils.ApplicationMode;
import org.runetekk.utils.ApplicationService;
import org.runetekk.utils.ScriptManager;

/**
 * Main.java
 * @version 1.0.0
 * @author RuneTekk Development (SiniSoul)
 */
public final class Main {
    
    /**
     * The application mode in use as of now.
     */
    public static ApplicationMode applicationMode;
    
    /**
     * The services registered to this application.
     */
    private static Map&lt;String, ApplicationService&gt; applicationServices;
    
    /**
     * 
     * @param service 
     */
    public static void registerApplicationService(ApplicationService service) {
        //Eventually handle when a service needs to be unregistered
        service.initialize();
        applicationServices.put(service.getName(), service);
    }
    
    /**
     * 
     * @param name 
     */
    public static void unregisterApplicationService(String name) {
        //Eventually handle when a service needs to be unregistered
        applicationServices.remove(name);
    }
    
    /**
     * 
     * @param name
     * @return 
     */
    public static ApplicationService getApplicationService(String name) {
        return applicationServices.get(name);
    }
    
    /**
     * The main entry point of the program.
     * @param args The command line arguments.
     */
    public static void main(String[] args) throws Exception {
        if(args.length &lt; 1) {
            System.err.println("Arguments: &lt;live/setup&gt;...");
            return;
        }
        applicationMode = ApplicationMode.getServerMode(args[0]);
        if(applicationMode == null) {
            System.err.println("Invalid server mode: " + args[0] + "...");
            ApplicationMode[] modes = ApplicationMode.getServerModes();
            System.err.print("Supported: ");
            for(ApplicationMode mode : modes) {
                System.err.print(mode + (mode == modes[modes.length - 1] ? "\n" : ", "));
            }
            return;
        }
        System.out.println("RuneTekk Mode[" + applicationMode + "]Starting up...");
        if(applicationMode == ApplicationMode.STEPUPOD) {
            System.out.println("RuneTekk Mode[" + applicationMode + "]Executing the setup script..");
            ScriptManager scriptManager = new ScriptManager("jruby");
            Bindings bindings = scriptManager.getScriptEngine().getBindings(ScriptContext.ENGINE_SCOPE);
            bindings.put("SCRIPTDIR", args[1] + "setupod/");
            bindings.put("args", args);
            scriptManager.getScriptEngine().setBindings(bindings, ScriptContext.ENGINE_SCOPE);
            scriptManager.executeScript(args[1] + "setupod/", "setup.rb");
            System.out.println("RuneTekk Mode[" + applicationMode + "]Ondemand setup has finished successfully...");
            return;
        }
        if(applicationMode == ApplicationMode.LIVEMODE || applicationMode == ApplicationMode.GAMEONLY || applicationMode == ApplicationMode.ODONLY) {
            System.out.println("RuneTekk Mode[" + applicationMode + "]Executing the initialization scripts..");
            ScriptManager scriptManager = new ScriptManager("jruby");
            Bindings bindings = scriptManager.getScriptEngine().getBindings(ScriptContext.ENGINE_SCOPE);
            bindings.put("SCRIPTDIR", args[1] + "live/");
            bindings.put("args", args);
            scriptManager.executeScript(args[1] + "live/", "init.rb");
            if(applicationMode == ApplicationMode.ODONLY || applicationMode == ApplicationMode.LIVEMODE)
                scriptManager.executeScript(args[1] + "live/", "initod.rb");
            if(applicationMode == ApplicationMode.GAMEONLY || applicationMode == ApplicationMode.LIVEMODE)
                scriptManager.executeScript(args[1] + "live/", "initgame.rb");
            scriptManager.executeScript(args[1] + "live/", "initgs.rb");
            System.out.println("RuneTekk Mode[" + applicationMode + "]Initialization has finished successfully...");
            return;
        }
    }
    
    static {
        applicationServices = new HashMap&lt;String, ApplicationService&gt;();
    }
}</code></pre>
<p><img src="http://i.imgur.com/67O9P.png" alt width="228" height="437"></p>
<p>Also to mention you have the tekknet/tekkfs libraries to add onto that.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/634-project-runetekk/432187/54">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/634-project-runetekk/432187/54</link>
        <pubDate>Sun, 12 Feb 2012 10:19:30 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-432187-54</guid>
        <source url="https://forum.moparisthebest.com/t/634-project-runetekk/432187.rss">[634]Project RuneTekk</source>
      </item>
      <item>
        <title>[634]Project RuneTekk</title>
        <dc:creator><![CDATA[@Native1 Native^]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/native1">@Native1</a> wrote:</p>
          <blockquote>
              <p>[quote=“sinisoul, post:52, topic:432187”][code]<br>
raise ‘Global configuration is nil!’ unless $globalconfig != nil</p>
<p>puts ‘Initializing the Game Server service for the application…’</p>
<p><span class="hashtag">#Initialize</span> the server worker for the game server<br>
raise ‘Game server port number is nil!’ unless $globalconfig[‘gameport’] != nil<br>
worker = org.runetekk.net.ServerWorker.new<br>
service = org.runetekk.servers.GameServer.new(worker)<br>
service.setServerPort($globalconfig[‘gameport’])</p>
<p><span class="hashtag">#Initialize</span> the determiner pathway and set it as the default pathway<br>
determinerforks = []<br>
if org.runetekk.Main::applicationMode == org.runetekk.utils.ApplicationMode::ODONLY or<br>
org.runetekk.Main::appplicationMode == org.runetekk.utils.ApplicationMode::LIVE<br>
<span class="hashtag">#Kinda</span> important to note that all ondemand packets are 3 bytes in size<br>
ondemandforks = []<br>
ondemandforks &lt;&lt; org.runetekk.ondemand.OnlineFork.new(2, 3)<br>
ondemandforks &lt;&lt; org.runetekk.ondemand.OfflineFork.new(3, 3)<br>
ondemandforks &lt;&lt; org.runetekk.ondemand.ConnectionFork.new(6, 3)<br>
ondemandforks &lt;&lt; org.runetekk.ondemand.DisconnectFork.new(7, 3)<br>
ondemandpathway = org.runetekk.com.Pathway.new(ondemandforks)<br>
puts ‘Putting the ondemand fork into the determine fork array…’<br>
determinerforks &lt;&lt; org.runetekk.ondemand.OndemandFork.new(ondemandpathway, 15, 4)<br>
end<br>
defaultpathway = org.runetekk.com.Pathway.new(determinerforks)<br>
service.setDefaultPathway(defaultpathway)</p>
<p><span class="hashtag">#Register</span> the game server service to the application<br>
puts ‘Registering the Game Server service to the application…’<br>
org.runetekk.Main::registerApplicationService(service)<br>
puts “Successfully registered the Game Server on port #{$globalconfig[‘gameport’]}…”<br>
[/code]<br>
Wait, your server is in Ruby?[/quote]</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/634-project-runetekk/432187/53">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/634-project-runetekk/432187/53</link>
        <pubDate>Sun, 12 Feb 2012 10:13:02 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-432187-53</guid>
        <source url="https://forum.moparisthebest.com/t/634-project-runetekk/432187.rss">[634]Project RuneTekk</source>
      </item>
      <item>
        <title>[634]Project RuneTekk</title>
        <dc:creator><![CDATA[@sinisoul sini]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sinisoul">@sinisoul</a> wrote:</p>
          <blockquote>
              <p>God, tons of people with infractions on this thread.  <img src="https://forum.moparisthebest.com/images/emoji/twitter/expressionless.png?v=5" title=":expressionless:" class="emoji" alt=":expressionless:"> Anyway, finished most of the forks for the Ondemand server and changed up my networking API just a bit for practical uses and design.</p>
<pre><code class="lang-auto">RuneTekk Mode[Ondemand Only]Starting up...
RuneTekk Mode[Ondemand Only]Executing the initialization scripts..
Initializing the scripts to be ran for live mode...
Loading the global configuration file...
Initializing the Ondemand service for the application...
Setting the Ondemand parent table buffer...
Registering the Ondemand service to the application...
Initializing the Game Server service for the application...
Putting the ondemand fork into the determine fork array...
Registering the Game Server service to the application...
Successfully registered the Game Server on port 50000...
RuneTekk Mode[Ondemand Only]Initialization has finished successfully...
RuneTekk Mode[Ondemand Only]Accepted connection from 127.0.0.1...
634
Connection request!
Client is offline...:C</code></pre>
<pre><code class="lang-auto">634
Connection request!
Client is offline...:C</code></pre>
<p>634 = revision (sent during ondemand for)<br>
Connection request! (sent during the connection fork)<br>
Client is offline…:C (sent to indicate that the client is not online)</p>
<p>I’m liking the design very much so far. The forks are very easy to configure and manage:</p>
<pre><code class="lang-auto">raise 'Global configuration is nil!' unless $globalconfig != nil

puts 'Initializing the Game Server service for the application...'

#Initialize the server worker for the game server
raise 'Game server port number is nil!' unless $globalconfig['gameport'] != nil
worker = org.runetekk.net.ServerWorker.new
service = org.runetekk.servers.GameServer.new(worker)
service.setServerPort($globalconfig['gameport'])

#Initialize the determiner pathway and set it as the default pathway
determinerforks = []
if org.runetekk.Main::applicationMode == org.runetekk.utils.ApplicationMode::ODONLY or
   org.runetekk.Main::appplicationMode == org.runetekk.utils.ApplicationMode::LIVE
   #Kinda important to note that all ondemand packets are 3 bytes in size
   ondemandforks = []
   ondemandforks &lt;&lt; org.runetekk.ondemand.OnlineFork.new(2, 3)
   ondemandforks &lt;&lt; org.runetekk.ondemand.OfflineFork.new(3, 3)
   ondemandforks &lt;&lt; org.runetekk.ondemand.ConnectionFork.new(6, 3)
   ondemandforks &lt;&lt; org.runetekk.ondemand.DisconnectFork.new(7, 3)
   ondemandpathway = org.runetekk.com.Pathway.new(ondemandforks)
   puts 'Putting the ondemand fork into the determine fork array...'
   determinerforks &lt;&lt; org.runetekk.ondemand.OndemandFork.new(ondemandpathway, 15, 4)
end
defaultpathway = org.runetekk.com.Pathway.new(determinerforks)
service.setDefaultPathway(defaultpathway)

#Register the game server service to the application
puts 'Registering the Game Server service to the application...'
org.runetekk.Main::registerApplicationService(service)
puts "Successfully registered the Game Server on port #{$globalconfig['gameport']}..."</code></pre>
<p>And I can easily change the mode to run ondemand or another game server feature.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/634-project-runetekk/432187/52">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/634-project-runetekk/432187/52</link>
        <pubDate>Sun, 12 Feb 2012 10:09:18 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-432187-52</guid>
        <source url="https://forum.moparisthebest.com/t/634-project-runetekk/432187.rss">[634]Project RuneTekk</source>
      </item>
      <item>
        <title>[634]Project RuneTekk</title>
        <dc:creator><![CDATA[@imsuperman05 imsuperman05]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/imsuperman05">@imsuperman05</a> wrote:</p>
          <blockquote>
              <p>[quote=“AtomicInt_, post:50, topic:432187”][quote author=sinisoul link=topic=534899.msg3914370#msg3914370 date=1329023871]<br>
baddy351 = Kieran<br>
[/quote]</p>
<p>I know, I live literally five minutes away from him. &gt;.&lt;[/quote]<br>
i wish i did</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/634-project-runetekk/432187/51">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/634-project-runetekk/432187/51</link>
        <pubDate>Sun, 12 Feb 2012 05:20:04 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-432187-51</guid>
        <source url="https://forum.moparisthebest.com/t/634-project-runetekk/432187.rss">[634]Project RuneTekk</source>
      </item>
      <item>
        <title>[634]Project RuneTekk</title>
        <dc:creator><![CDATA[@ExtremeX-Scape Ryley]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/extremex-scape">@ExtremeX-Scape</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="49" data-topic="432187">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/sinisoul/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> sinisoul:</div>
<blockquote>
<p>baddy351 = Kieran</p>
</blockquote>
</aside>
<p>I know, I live literally five minutes away from him. &gt;.&lt;</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/634-project-runetekk/432187/50">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/634-project-runetekk/432187/50</link>
        <pubDate>Sun, 12 Feb 2012 05:19:28 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-432187-50</guid>
        <source url="https://forum.moparisthebest.com/t/634-project-runetekk/432187.rss">[634]Project RuneTekk</source>
      </item>
      <item>
        <title>[634]Project RuneTekk</title>
        <dc:creator><![CDATA[@sinisoul sini]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sinisoul">@sinisoul</a> wrote:</p>
          <blockquote>
              <p>baddy351 = Kieran</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/634-project-runetekk/432187/49">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/634-project-runetekk/432187/49</link>
        <pubDate>Sun, 12 Feb 2012 05:17:51 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-432187-49</guid>
        <source url="https://forum.moparisthebest.com/t/634-project-runetekk/432187.rss">[634]Project RuneTekk</source>
      </item>
      <item>
        <title>[634]Project RuneTekk</title>
        <dc:creator><![CDATA[@imsuperman05 imsuperman05]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/imsuperman05">@imsuperman05</a> wrote:</p>
          <blockquote>
              <aside class="quote quote-modified" data-post="47" data-topic="432187">
<div class="title">
<div class="quote-controls"></div>
 AtomicInt_:</div>
<blockquote>
<p>GF Kieran.[/quote][quote=“AtomicInt_, post:47, topic:432187”]GF Kieran.[/quote][quote=“AtomicInt_, post:47, topic:432187”]GF Kieran.[/quote][quote=“AtomicInt_, post:47, topic:432187”]GF Kieran.</p>
</blockquote>
</aside>
<p>GOOD FIGHT</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/634-project-runetekk/432187/48">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/634-project-runetekk/432187/48</link>
        <pubDate>Sun, 12 Feb 2012 05:16:17 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-432187-48</guid>
        <source url="https://forum.moparisthebest.com/t/634-project-runetekk/432187.rss">[634]Project RuneTekk</source>
      </item>
      <item>
        <title>[634]Project RuneTekk</title>
        <dc:creator><![CDATA[@ExtremeX-Scape Ryley]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/extremex-scape">@ExtremeX-Scape</a> wrote:</p>
          <blockquote>
              <p>GF Kieran.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/634-project-runetekk/432187/47">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/634-project-runetekk/432187/47</link>
        <pubDate>Sun, 12 Feb 2012 05:13:00 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-432187-47</guid>
        <source url="https://forum.moparisthebest.com/t/634-project-runetekk/432187.rss">[634]Project RuneTekk</source>
      </item>
      <item>
        <title>[634]Project RuneTekk</title>
        <dc:creator><![CDATA[@drubrkletern drubrkletern]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/drubrkletern">@drubrkletern</a> wrote:</p>
          <blockquote>
              <p>So its coming along great I see!<br>
DONT QUIT ON IT</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/634-project-runetekk/432187/46">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/634-project-runetekk/432187/46</link>
        <pubDate>Sun, 12 Feb 2012 05:11:26 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-432187-46</guid>
        <source url="https://forum.moparisthebest.com/t/634-project-runetekk/432187.rss">[634]Project RuneTekk</source>
      </item>
      <item>
        <title>[634]Project RuneTekk</title>
        <dc:creator><![CDATA[@sinisoul sini]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sinisoul">@sinisoul</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="44" data-topic="432187">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/baddy351/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> baddy351:</div>
<blockquote>
<p>inb4ifuckitup &lt;3</p>
</blockquote>
</aside>
<p>ah yeah i forgot to say, ur fired.</p>
<blockquote>Hadyn Fitzgerald says
http://asm.ow2.org/
you sir are...wow
is this a troll?
Kieran Bailey says
=fail=
i always thought ASM = Assembly 
&gt;.&gt;
Hadyn Fitzgerald says
sigh
Kieran Bailey says
So i was learning assembl
i searched ASM
it came up with assembly
so I was learning it
&gt;.&gt;.</blockquote>
<blockquote>Kieran Bailey says
ah
do i just add the asm
as a library
i assume?
Hadyn Fitzgerald says
why would you do it now?
Kieran Bailey says
Why not.
Hadyn Fitzgerald says
but yes...its an API
Kieran Bailey says
I am pissed
I spent nearly a month
learning assembly
for nothing
Hadyn Fitzgerald says
idk assembly so ++ you</blockquote>
<p>derp.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/634-project-runetekk/432187/45">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/634-project-runetekk/432187/45</link>
        <pubDate>Sun, 12 Feb 2012 04:32:49 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-432187-45</guid>
        <source url="https://forum.moparisthebest.com/t/634-project-runetekk/432187.rss">[634]Project RuneTekk</source>
      </item>
      <item>
        <title>[634]Project RuneTekk</title>
        <dc:creator><![CDATA[@baddy351 baddy351]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/baddy351">@baddy351</a> wrote:</p>
          <blockquote>
              <p>inb4ifuckitup &lt;3</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/634-project-runetekk/432187/44">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/634-project-runetekk/432187/44</link>
        <pubDate>Sun, 12 Feb 2012 04:31:12 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-432187-44</guid>
        <source url="https://forum.moparisthebest.com/t/634-project-runetekk/432187.rss">[634]Project RuneTekk</source>
      </item>
      <item>
        <title>[634]Project RuneTekk</title>
        <dc:creator><![CDATA[@sinisoul sini]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sinisoul">@sinisoul</a> wrote:</p>
          <blockquote>
              <aside class="quote quote-modified" data-post="42" data-topic="432187">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/imsuperman05/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> imsuperman05:</div>
<blockquote>
<p>Tried to learn what you guys were debating about, but got lost.  Anywho, how’s the project going?  Did you finish networking completely?</p>
</blockquote>
</aside>
<p>Going great. Ondemand should be done tonight.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/634-project-runetekk/432187/43">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/634-project-runetekk/432187/43</link>
        <pubDate>Sun, 12 Feb 2012 04:28:46 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-432187-43</guid>
        <source url="https://forum.moparisthebest.com/t/634-project-runetekk/432187.rss">[634]Project RuneTekk</source>
      </item>
  </channel>
</rss>
