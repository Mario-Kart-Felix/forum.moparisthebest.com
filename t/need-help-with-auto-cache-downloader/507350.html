<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/need-help-with-auto-cache-downloader/507350 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 05:49:25 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Need help with auto cache downloader - Runescape - moparisthebest.com</title>
    <meta name="description" content="Hey guys  

i&amp;#39;v been making my own RSPS for some time now mainly working on the and sourse side of things. Saving the cache side for last! as its the part that I suck the most at only because of getting the auto cache do&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="507350.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Need help with auto cache downloader&#39;" href="507350.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/need-help-with-auto-cache-downloader/507350" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/need-help-with-auto-cache-downloader/507350" />
<meta property="og:title" content="Need help with auto cache downloader" />
<meta name="twitter:title" content="Need help with auto cache downloader" />
<meta property="og:description" content="Hey guys  i’v been making my own RSPS for some time now mainly working on the and sourse side of things. Saving the cache side for last! as its the part that I suck the most at only because of getting the auto cache downloader working again. And personally im quite good at coding sourse and client side. but as I have already said the cache downloader is what I hate.  So I have remade my cache and done a lot of updates to it. I already have my “cachedownloader” file all set and ready to go. And i..." />
<meta name="twitter:description" content="Hey guys  i’v been making my own RSPS for some time now mainly working on the and sourse side of things. Saving the cache side for last! as its the part that I suck the most at only because of getting the auto cache downloader working again. And personally im quite good at coding sourse and client side. but as I have already said the cache downloader is what I hate.  So I have remade my cache and done a lot of updates to it. I already have my “cachedownloader” file all set and ready to go. And i..." />
<meta property="article:published_time" content="2013-03-11T21:45:14+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="507350.html">Need help with auto cache downloader</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Dr_Jig.html'><span itemprop='name'>Dr_Jig</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2013-03-11T21:45:14Z'>
            <time itemprop='dateModified' datetime='2016-08-04T05:41:54Z' class='post-time'>
              August 4, 2016,  5:41am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hey guys</p>
<p>i’v been making my own RSPS for some time now mainly working on the and sourse side of things. Saving the cache side for last! as its the part that I suck the most at only because of getting the auto cache downloader working again. And personally im quite good at coding sourse and client side. but as I have already said the cache downloader is what I hate.</p>
<p>So I have remade my cache and done a lot of updates to it. I already have my “cachedownloader” file all set and ready to go. And it works for my old cache. but I need help uploading my new cache somewhere, Dropbox I think? and getting the link to put into my cachedownloader to download and release to c: drive. If you can help i’d appreciate it a lot! Heres my Skype so you can add me if you want: Cody.way2</p>
<p>Heres the code that I have for my old cache, I need help uploading and getting another one of these links. (well atleast that’s what I think needs done) haha I sound very nooby at coding.</p>
<p>This is the code I have for my cachedownloader. sorry about the huge post. I just really need help</p>
<p>import java.io.File;<br>
import java.io.IOException;<br>
import java.io.OutputStream;<br>
import java.io.FileWriter;<br>
import java.io.BufferedWriter;<br>
import java.io.BufferedOutputStream;<br>
import java.io.BufferedInputStream;<br>
import java.io.FileOutputStream;<br>
import java.io.FileInputStream;<br>
import java.io.InputStream;<br>
import java.net.URLConnection;<br>
import java.net.URL;<br>
import java.util.zip.ZipFile;<br>
import java.util.zip.ZipEntry;<br>
import java.util.zip.ZipInputStream;<br>
import java.util.Enumeration;</p>
<p>import sign.signlink;</p>
<p>public class CacheDownloader {</p>
<p>private client client;</p>
<p>private final int BUFFER = 1024;<br>
/**<br>
*This is where the Cache downloader coding starts<br>
<strong>/<br>
private final int VERSION = 5;<br>
private String cacheLink = “<a href="https://dl.dropbox.com/u/91577463/TrisidiaX Cache/TrisidiaX V3 Release Cache.zip" rel="nofollow noopener">https://dl.dropbox.com/u/91577463/TrisidiaX%20Cache/TrisidiaX%20V3%20Release%20Cache.zip</a>”;<br>
/</strong><br>
*Cache Downloader Ends<br>
**/<br>
private String fileToExtract = getCacheDir() + getArchivedName();</p>
<p>public CacheDownloader(client client) {<br>
this.client = client;<br>
}</p>
<p>private void drawLoadingText(String text) {<br>
client.drawLoadingText(35, text);<br>
<a href="http://system.out.println/" rel="nofollow noopener">//System.out.println</a>(text);<br>
}</p>
<p>private void drawLoadingText(int amount, String text) {<br>
client.drawLoadingText(amount, text);<br>
<a href="http://system.out.println/" rel="nofollow noopener">//System.out.println</a>(text);<br>
}</p>
<p>private String getCacheDir() {<br>
return signlink.findcachedir();<br>
}</p>
<p>private String getCacheLink() {<br>
return cacheLink;<br>
}</p>
<p>private int getCacheVersion() {<br>
return VERSION;<br>
}</p>
<p>public CacheDownloader downloadCache() {<br>
try {<br>
File location = new File(getCacheDir());<br>
File version = new File(getCacheDir() + “/cacheVersion” + getCacheVersion() + “.dat”);</p>
<p>if(!location.exists()) {<br>
//drawLoadingText(“Loading new Updates…”);<br>
downloadFile(getCacheLink(), getArchivedName());</p>
<p>unZip();<br>
<a href="http://system.out.println/" rel="nofollow noopener">//System.out.println</a>(“UNZIP”);</p>
<p>BufferedWriter versionFile = new BufferedWriter(new FileWriter(getCacheDir() + “/cacheVersion” + getCacheVersion() + “.dat”));<br>
versionFile.close();<br>
deleteZIP(getArchivedName());<br>
} else {<br>
if(!version.exists()) {<br>
//drawLoadingText("~ First Time Installation, Only Once! ~");<br>
downloadFile(getCacheLink(), getArchivedName());</p>
<p>unZip();<br>
<a href="http://system.out.println/" rel="nofollow noopener">//System.out.println</a>(“UNZIP”);</p>
<p>BufferedWriter versionFile = new BufferedWriter(new FileWriter(getCacheDir() + “/cacheVersion” + getCacheVersion() + “.dat”));<br>
versionFile.close();<br>
deleteZIP(getArchivedName());</p>
<p>} else {<br>
return null;<br>
}<br>
}<br>
} catch(Exception e) {</p>
<p>}<br>
return null;<br>
}</p>
<p>private void downloadFile(String adress, String localFileName) {<br>
OutputStream out = null;<br>
URLConnection conn;<br>
InputStream in = null;</p>
<p>try {</p>
<p>URL url = new URL(adress);<br>
out = new BufferedOutputStream(<br>
new FileOutputStream(getCacheDir() + “/” +localFileName));</p>
<p>conn = url.openConnection();<br>
in = conn.getInputStream();</p>
<p>byte[] data = new byte[BUFFER];</p>
<p>int numRead;<br>
long numWritten = 0;<br>
int length = conn.getContentLength();</p>
<p>while((numRead = in.read(data)) != -1) {<br>
out.write(data, 0, numRead);<br>
numWritten += numRead;</p>
<p>int percentage = (int)(((double)numWritten / (double)length) * 100D);<br>
drawLoadingText(percentage, "Downloading Cache " + percentage + “%…”);</p>
<p>}</p>
<p>System.out.println(localFileName + “\t” + numWritten);<br>
drawLoadingText(“Unpacking Cache %…”);</p>
<p>} catch (Exception exception) {<br>
exception.printStackTrace();<br>
} finally {<br>
try {<br>
if (in != null) {<br>
in.close();<br>
}<br>
if (out != null) {<br>
out.close();<br>
}<br>
} catch (IOException ioe) {<br>
}<br>
}</p>
<p>}</p>
<p>private String getArchivedName() {<br>
int lastSlashIndex = getCacheLink().lastIndexOf(’/’);<br>
if (lastSlashIndex &gt;= 0<br>
&amp;&amp; lastSlashIndex &lt; getCacheLink().length() -1) {<br>
return getCacheLink().substring(lastSlashIndex + 1);<br>
} else {<br>
<a href="http://system.err.println/" rel="nofollow noopener">//System.err.println</a>(“error retreiving archivaed name.”);<br>
}<br>
return “”;<br>
}</p>
<p>private void unZip() {</p>
<p>try {<br>
InputStream in =<br>
new BufferedInputStream(new FileInputStream(fileToExtract));<br>
ZipInputStream zin = new ZipInputStream(in);<br>
ZipEntry e;</p>
<p>while((e=zin.getNextEntry()) != null) {</p>
<p>if(e.isDirectory()) {<br>
(new File(getCacheDir() + e.getName())).mkdir();<br>
} else {</p>
<p>if (e.getName().equals(fileToExtract)) {<br>
unzip(zin, fileToExtract);<br>
break;<br>
}<br>
unzip(zin, getCacheDir() + e.getName());<br>
}<br>
<a href="http://system.out.println/" rel="nofollow noopener">//System.out.println</a>("unzipping2 " + e.getName());<br>
}<br>
zin.close();</p>
<p>} catch(Exception e) {<br>
e.printStackTrace();<br>
}<br>
}</p>
<p>private void deleteZIP(String fileName){<br>
// A File object to represent the filename<br>
File f = new File(getCacheDir() + fileName);</p>
<p>// Make sure the file or directory exists and isn’t write protected<br>
if (!f.exists())<br>
throw new IllegalArgumentException(<br>
"Delete: no such file or directory: " + fileName);</p>
<p>if (!f.canWrite())<br>
throw new IllegalArgumentException("Delete: write protected: "</p>
<ul>
<li>fileName);</li>
</ul>
<p>// If it is a directory, make sure it is empty<br>
if (f.isDirectory()) {<br>
String[] files = f.list();<br>
if (files.length &gt; 0)<br>
throw new IllegalArgumentException(<br>
"Delete: directory not empty: " + fileName);<br>
}</p>
<p>// Attempt to delete it<br>
boolean success = f.delete();</p>
<p>if (!success)<br>
throw new IllegalArgumentException(“Delete: deletion failed”);</p>
<p>}</p>
<p>private void unzip(ZipInputStream zin, String s)<br>
throws IOException {</p>
<p>FileOutputStream out = new FileOutputStream(s);<br>
<a href="http://system.out.println/" rel="nofollow noopener">//System.out.println</a>("unzipping " + s);<br>
byte [] b = new byte[BUFFER];<br>
int len = 0;</p>
<p>while ((len = zin.read(b)) != -1) {<br>
out.write(b,0,len);<br>
}<br>
out.close();<br>
}<br>
}</p>
      </div>

      <meta itemprop='headline' content='Need help with auto cache downloader'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/need-help-with-auto-cache-downloader/507350 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 05:49:26 GMT -->
</html>
