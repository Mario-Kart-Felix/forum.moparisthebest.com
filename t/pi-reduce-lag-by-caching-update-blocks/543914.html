<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/pi-reduce-lag-by-caching-update-blocks/543914 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 22:12:51 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>[PI] Reduce lag by caching update blocks! - Runescape - moparisthebest.com</title>
    <meta name="description" content="What is a cached update block? 

Definition of the word cache: store away in hiding or for future use. 

That means when we cache update blocks we are storing the data constructed from the update blocks in memory somewhe&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="543914.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;[PI] Reduce lag by caching update blocks!&#39;" href="543914.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/pi-reduce-lag-by-caching-update-blocks/543914" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/pi-reduce-lag-by-caching-update-blocks/543914" />
<meta property="og:title" content="[PI] Reduce lag by caching update blocks!" />
<meta name="twitter:title" content="[PI] Reduce lag by caching update blocks!" />
<meta property="og:description" content="What is a cached update block?  [B]Definition of the word cache: store away in hiding or for future use.[/B]  That means when we cache update blocks we are storing the data constructed from the update blocks in memory somewhere, so we can use it later on.  [B][U]So how does caching update blocks improve performance?[/U][/B]  Building the update blocks in player updating is what eats up a mass majority of the cycle time. If you look at player updating in a traditional project insanity server it f..." />
<meta name="twitter:description" content="What is a cached update block?  [B]Definition of the word cache: store away in hiding or for future use.[/B]  That means when we cache update blocks we are storing the data constructed from the update blocks in memory somewhere, so we can use it later on.  [B][U]So how does caching update blocks improve performance?[/U][/B]  Building the update blocks in player updating is what eats up a mass majority of the cycle time. If you look at player updating in a traditional project insanity server it f..." />
<meta property="article:published_time" content="2014-06-13T04:30:20+00:00" />
<meta property="og:ignore_canonical" content="true" />

      <link rel="next" href="5439144658.html?page=2">


    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="543914.html">[PI] Reduce lag by caching update blocks!</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Clawz_fury.html'><span itemprop='name'>Clawz_fury</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-06-13T04:30:20Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:15:59Z' class='post-time'>
              August 4, 2016,  1:15pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p><span class="bbcode-b"><span class="bbcode-u">What is a <span class="bbcode-i">cached update block</span>?</span></span></p>
<p>[B]Definition of the word <span class="bbcode-i">cache</span>: store away in hiding or for future use.[/B]</p>
<p>That means when we <span class="bbcode-i">cache</span> update blocks we are storing the data constructed from the update blocks in memory somewhere, so we can use it later on.</p>
<p>[B][U]So how does caching update blocks improve performance?[/U][/B]</p>
<p>Building the update blocks in player updating is what eats up a mass majority of the cycle time. If you look at player updating in a traditional project insanity server it first updates the player like so:</p>
<p><code>        plr.updateThisPlayerMovement(str);
        boolean saveChatTextUpdate = plr.chatTextUpdateRequired;
        plr.chatTextUpdateRequired = false;
        plr.appendPlayerUpdateBlock(updateBlock);
        plr.chatTextUpdateRequired = saveChatTextUpdate;
        str.writeBits(8, plr.playerListSize);</code></p>
<p>and then goes on to update for players around you…</p>
<p><code>         int size = plr.playerListSize;
        if (size &gt; 255)
            size = 255;
        plr.playerListSize = 0;
        for (int i = 0; i &lt; size; i++) {
            if (!plr.didTeleport &amp;&amp; !plr.playerList[i].didTeleport &amp;&amp; plr.withinDistance(plr.playerList[i])) {
                plr.playerList[i].updatePlayerMovement(str);
                plr.playerList[i].appendPlayerUpdateBlock(updateBlock);
                plr.playerList[plr.playerListSize++] = plr.playerList[i];
            } else {
                int id = plr.playerList[i].slot;
                plr.playerInListBitmap[id &gt;&gt; 3] &amp;= ~(1 &lt;&lt; (id &amp; 7));
                str.writeBits(1, 1);
                str.writeBits(2, 3);
            }
        }</code></p>
<p>The problem here is that when updating for players around you, you are unnecessarily rebuilding the update blocks for all of those players. Remember what I said in the beginning about how building the update blocks eats up a majority of the cycle time (the longer a cycle takes = the more stress the server is on). When we cache update blocks we are essentially ‘reusing’ previously constructed blocks instead of taking out the time to construct new ones (building less update blocks = less cycle time = less lag).</p>
<p>You’re only really going to see a noticeable difference in performance when there are lots of players in the same region, especially if those players are doing things like talking, walking, fighting, equipping armor, etc.</p>
<p><span class="bbcode-b"><span class="bbcode-u">Caching update blocks</span></span></p>
<p>If you’re using any project insanity derivative you shouldn’t have a problem getting this working. Make sure you follow the instructions carefully, it wouldn’t hurt to backup your files as well.</p>
<p>Open up the ‘Player’ class and declare this:</p>
<p>[CODE]    private Stream cachedBlock;</p>
<pre><code>public Stream getCachedBlock() {
    return cachedBlock;
}

public void setCachedBlock(Stream cachedBlock) {
    this.cachedBlock = cachedBlock;
}[/CODE]
</code></pre>
<p>Replace your ‘appendPlayerUpdateBlock’ method with this one</p>
<p>[code]    public void appendPlayerUpdateBlock(Stream str, Player thisPlayer, boolean needsBlock) {<br>
if (!updateRequired &amp;&amp; !chatTextUpdateRequired)<br>
return; // nothing required</p>
<pre><code>    if (getCachedBlock() != null &amp;&amp; !this.playerName.equals(thisPlayer.playerName) &amp;&amp; !needsBlock) {
        str.writeBytes(getCachedBlock().buffer, getCachedBlock().currentOffset, 0);
        return;
    }

    // XXX: For people who don't have resizable buffers the size might need
    // to be increased!
    Stream cacheStream = new Stream(new byte[300]);

    int updateMask = 0;
    if (graphicsUpdateRequired) {
        updateMask |= 0x100;
    }
    if (animationUpdateRequired) {
        updateMask |= 8;
    }
    if (forcedChatUpdateRequired) {
        updateMask |= 4;
    }
    if (chatTextUpdateRequired) {
        updateMask |= 0x80;
    }
    if (appearanceUpdateRequired) {
        updateMask |= 0x10;
    }
    if (faceEntityUpdateRequired) {
        updateMask |= 1;
    }
    if (facePositionUpdateRequired) {
        updateMask |= 2;
    }
    if (hitUpdateRequired) {
        updateMask |= 0x20;
    }

    if (secondaryHitUpdateRequired) {
        updateMask |= 0x200;
    }

    if (updateMask &gt;= 0x100) {
        updateMask |= 0x40;
        cacheStream.writeByte(updateMask &amp; 0xFF);
        cacheStream.writeByte(updateMask &gt;&gt; 8);
    } else {
        cacheStream.writeByte(updateMask);
    }

    // now writing the various update blocks itself - note that their
    // order crucial
    if (graphicsUpdateRequired) {
        appendMask100Update(cacheStream);
    }
    if (animationUpdateRequired) {
        appendAnimationRequest(cacheStream);
    }
    if (forcedChatUpdateRequired) {
        appendForcedChat(cacheStream);
    }
    if (chatTextUpdateRequired) {
        appendPlayerChatText(cacheStream);
    }
    if (faceEntityUpdateRequired) {
        appendFaceUpdate(cacheStream);
    }
    if (appearanceUpdateRequired) {
        appendPlayerAppearance(cacheStream);
    }
    if (facePositionUpdateRequired) {
        appendSetFocusDestination(cacheStream);
    }
    if (hitUpdateRequired) {
        appendHitUpdate(cacheStream);
    }
    if (secondaryHitUpdateRequired) {
        appendHitUpdate2(cacheStream);
    }

    if (!this.playerName.equals(thisPlayer.playerName) &amp;&amp; !needsBlock) {
        setCachedBlock(cacheStream);
    }

    /** Add the cached block to the update block. */
    str.writeBytes(cacheStream.buffer, cacheStream.currentOffset, 0);
}[/code]
</code></pre>
<p>Look for this inside of the ‘addNewPlayer’ method</p>
<pre><code class="lang-auto"></code></pre>
<p>and replace it with this</p>
<pre><code class="lang-auto"></code></pre>
<p>Then open ‘PlayerHandler’ and search for</p>
<pre><code class="lang-auto"></code></pre>
<p>and add this under it</p>
<pre><code class="lang-auto"></code></pre>
<p>Then find this inside of the ‘updatePlayer’ method</p>
<pre><code class="lang-auto"></code></pre>
<p>and replace it with</p>
<pre><code class="lang-auto"></code></pre>
<p>Find this inside of the same method</p>
<pre><code class="lang-auto"></code></pre>
<p>and replace it with</p>
<pre><code class="lang-auto"></code></pre>
<p>And we’re done! If you can login with multiple players online you did everything right.</p>
<p><span class="bbcode-b"><span class="bbcode-u">Credits</span></span></p>
<p>Graham</p>
      </div>

      <meta itemprop='headline' content='[PI] Reduce lag by caching update blocks!'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/ExtremeX-Scape.html'><span itemprop='name'>ExtremeX-Scape</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-06-13T07:24:46Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:16:17Z' class='post-time'>
              August 4, 2016,  1:16pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Like I said before caching every update block would be pointless. Caching appearance update blocks would be all that is needed imo.</p>
<p>How many times are you going to have the same chat block or the same graphic block? Not enough to cache the entire update block.</p>
      </div>

      <meta itemprop='headline' content='[PI] Reduce lag by caching update blocks!'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Clawz_fury.html'><span itemprop='name'>Clawz_fury</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-06-13T14:28:59Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:16:20Z' class='post-time'>
              August 4, 2016,  1:16pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“AtomicInt_, post:2, topic:543914”]Like I said before caching every update block would be pointless. Caching appearance update blocks would be all that is needed imo.</p>
<p>How many times are you going to have the same chat block or the same graphic block? Not enough to cache the entire update block.[/quote]<br>
That doesn’t make sense since the cached block is reset after every cycle, I asked blake about it and this is what he said.</p>
<blockquote>[6/9/2014 8:27:53 PM] lare96: hey sorry to bother you, im currently caching update blocks and was told by a friend that i should only cache the appearance block because its less likely to change as opposed to something like talking, is this good advice?
[6/9/2014 9:20:51 PM] Blake Beaupain: yeah that's the only permanent update block
[6/9/2014 9:20:52 PM] Blake Beaupain: really
[6/9/2014 9:20:57 PM] Blake Beaupain: animations are a one-cycle thing
[6/9/2014 9:21:10 PM] Blake Beaupain: oh wait no lol
[6/9/2014 9:21:12 PM] Blake Beaupain: it doesn't work that way
[6/9/2014 9:21:13 PM] Blake Beaupain: you there?
[6/9/2014 9:21:46 PM] lare96: yeah im here
[6/9/2014 9:21:53 PM] Blake Beaupain: okay
[6/9/2014 9:22:03 PM] Blake Beaupain: all update blocks are reset after one cycle
[6/9/2014 9:22:09 PM] lare96: right
[6/9/2014 9:22:19 PM] Blake Beaupain: you don't calculate and send the appearance block every cycle
[6/9/2014 9:22:24 PM] Blake Beaupain: you only send them when the appearance changes
[6/9/2014 9:22:44 PM] Blake Beaupain: the point of caching is to re-use the same encoded block for each player that views the current player you're updating
[6/9/2014 9:22:53 PM | Edited 9:23:00 PM] Blake Beaupain: so you don't have to prepare and encode it hundreds of times in one update cycle
[6/9/2014 9:23:27 PM | Edited 9:23:33 PM] Blake Beaupain: so i cache the entire set of blocks including the update bitmask</blockquote>
      </div>

      <meta itemprop='headline' content='[PI] Reduce lag by caching update blocks!'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Ashi.html'><span itemprop='name'>Ashi</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-06-13T16:02:33Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:16:20Z' class='post-time'>
              August 4, 2016,  1:16pm
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>It’ll increase performance sure but not significantly. It does not matter.</p>
      </div>

      <meta itemprop='headline' content='[PI] Reduce lag by caching update blocks!'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="2" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Clawz_fury.html'><span itemprop='name'>Clawz_fury</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-06-13T16:09:55Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:16:21Z' class='post-time'>
              August 4, 2016,  1:16pm
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="4" data-topic="543914">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/ashi/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> Ashi:</div>
<blockquote>
<p>It’ll increase performance sure but not significantly. It does not matter.</p>
</blockquote>
</aside>
<p>pretty sure you’re talking out of your ass</p>
<p>do you know how many more update blocks you will have to build if you have lots players in the same region? it does matter. update blocks should be cached, and if it didn’t matter no one would do it</p>
      </div>

      <meta itemprop='headline' content='[PI] Reduce lag by caching update blocks!'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Ashi.html'><span itemprop='name'>Ashi</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-06-13T16:12:06Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:16:21Z' class='post-time'>
              August 4, 2016,  1:16pm
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>The majority of the server processing time is spent elsewhere so the performance gain from caching appearances is very little <img src="../../images/emoji/twitter/coolae52.png?v=5" title=":cool:" class="emoji" alt=":cool:"><br>
Caching the appearance is unlikely to provide any real performance benefit</p>
      </div>

      <meta itemprop='headline' content='[PI] Reduce lag by caching update blocks!'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/HcoJustin.html'><span itemprop='name'>HcoJustin</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-06-13T20:21:35Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:16:26Z' class='post-time'>
              August 4, 2016,  1:16pm
            </time>
        <span itemprop='position'>#7</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“lare69, post:5, topic:543914”][quote author=Ashi link=topic=662795.msg4429720#msg4429720 date=1402675353]<br>
It’ll increase performance sure but not significantly. It does not matter.<br>
[/quote]<br>
pretty sure you’re talking out of your ass</p>
<p>do you know how many more update blocks you will have to build if you have lots players in the same region? it does matter. update blocks should be cached, and if it didn’t matter no one would do it[/quote]<br>
Local player list only supports 255 players. Regardless of how many players in the region, you cannot send more than 255. Most of the update blocks are building buffers. The only one that requires heavy lifting is packing the chat, but if you cached that it would be a simple array copy. The appearance block requires a bit of branching but still nothing heavy.</p>
<p>Yes it is an improvement, although I don’t believe it is a huge one.</p>
      </div>

      <meta itemprop='headline' content='[PI] Reduce lag by caching update blocks!'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Clawz_fury.html'><span itemprop='name'>Clawz_fury</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-06-13T22:40:33Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:16:29Z' class='post-time'>
              August 4, 2016,  1:16pm
            </time>
        <span itemprop='position'>#8</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Ashi, post:6, topic:543914”]The majority of the server processing time is spent elsewhere so the performance gain from caching appearances is very little <img src="../../images/emoji/twitter/coolae52.png?v=5" title=":cool:" class="emoji" alt=":cool:"><br>
Caching the appearance is unlikely to provide any real performance benefit[/quote]<br>
whaaaaaaaaaaat? player updating is what eats up a majority of the cycle… I’ve done benchmarks that prove it <img src="../../images/emoji/twitter/confusedae52.png?v=5" title=":confused:" class="emoji" alt=":confused:"></p>
<p>[quote=“HcoJustin, post:7, topic:543914”]Local player list only supports 255 players. Regardless of how many players in the region, you cannot send more than 255. Most of the update blocks are building buffers. The only one that requires heavy lifting is packing the chat, but if you cached that it would be a simple array copy. The appearance block requires a bit of branching but still nothing heavy.</p>
<p>Yes it is an improvement, although I don’t believe it is a huge one.[/quote]<br>
I agree with you here <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
      </div>

      <meta itemprop='headline' content='[PI] Reduce lag by caching update blocks!'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Ashi.html'><span itemprop='name'>Ashi</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-06-14T07:27:10Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:16:36Z' class='post-time'>
              August 4, 2016,  1:16pm
            </time>
        <span itemprop='position'>#9</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>How “well” did your “benchmarking” turn out for this? Post results.</p>
      </div>

      <meta itemprop='headline' content='[PI] Reduce lag by caching update blocks!'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/strucker.html'><span itemprop='name'>strucker</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-06-14T15:34:20Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:16:40Z' class='post-time'>
              August 4, 2016,  1:16pm
            </time>
        <span itemprop='position'>#10</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>i feel stupid now</p>
      </div>

      <meta itemprop='headline' content='[PI] Reduce lag by caching update blocks!'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/sk8rdude461.html'><span itemprop='name'>sk8rdude461</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-06-14T16:43:17Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:16:40Z' class='post-time'>
              August 4, 2016,  1:16pm
            </time>
        <span itemprop='position'>#11</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I’m not going to say whether this is an improvement or not, because more than likely it is.<br>
I just want to see how much of an improvement it is before adding it, because it may not be worth it…</p>
      </div>

      <meta itemprop='headline' content='[PI] Reduce lag by caching update blocks!'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="2" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/pure2ownage.html'><span itemprop='name'>pure2ownage</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-06-14T16:54:13Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:16:40Z' class='post-time'>
              August 4, 2016,  1:16pm
            </time>
        <span itemprop='position'>#12</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“sk8rdude461, post:11, topic:543914”]I’m not going to say whether this is an improvement or not, because more than likely it is.<br>
I just want to see how much of an improvement it is before adding it, because it may not be worth it…[/quote]I doubt it’s significant, unless if you uncap regional updates/use an increased server cap.</p>
      </div>

      <meta itemprop='headline' content='[PI] Reduce lag by caching update blocks!'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/matzie.html'><span itemprop='name'>matzie</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-06-14T17:02:55Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:16:41Z' class='post-time'>
              August 4, 2016,  1:16pm
            </time>
        <span itemprop='position'>#13</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>It sounds like a good concept to me. I think there might be a some room for improvement though.<br>
It seems this would make a better structure to me.<br>
Update Block Manager:<br>
-Told of an update(any of the mask updates)<br>
-Write those values to memory.<br>
-Set that flag to “needed”<br>
-Sets stream state as modified<br>
-pack<br>
if modified<br>
-Compiles all “needed” values to a byte-stream<br>
-Sets stream state as recent<br>
return byte stream<br>
-flush<br>
clear all flags and byte stream</p>
      </div>

      <meta itemprop='headline' content='[PI] Reduce lag by caching update blocks!'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Clawz_fury.html'><span itemprop='name'>Clawz_fury</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-06-14T19:05:49Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:16:42Z' class='post-time'>
              August 4, 2016,  1:16pm
            </time>
        <span itemprop='position'>#14</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p><a class="mention" href="../../u/people.html">@people</a> complaining about performance, did you even bother to read the thread?</p>
<aside class="quote" data-post="1" data-topic="543914">
<div class="title">
<div class="quote-controls"></div>
 lare69:</div>
<blockquote>
<p>You’re only really going to see a noticeable difference in performance when there are lots of players in the same region, especially if those players are doing things like talking, walking, fighting, equipping armor, etc.</p>
</blockquote>
</aside>
<p>I never once stated something like this was going to fix the ‘lag’ problem that project insanity has so I don’t see why I’m being attacked. It does reduce lag and increase performance, so what’s the issue?</p>
<aside class="quote" data-post="9" data-topic="543914">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/ashi/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> Ashi:</div>
<blockquote>
<p>How “well” did your “benchmarking” turn out for this? Post results.</p>
</blockquote>
</aside>
<p>I didn’t do benchmarks for project insanity so I wouldn’t know. I did do benchmarks that showed improvement for Asteria though but that was after a lot of optimizations including this one. It honestly doesn’t matter what you say or think though because my point still remains true that player updating (along with network events) <span class="bbcode-b">is</span> what eats up a majority of the cycle… so “stop” being "a " (see what I did there?) pretentious bit<span class="bbcode-b"></span>ch and just accept the fact that you aren’t right for once</p>
<p>Alright alright I’ll give you the benefit of the doubt. Since player updating isn’t what eats up the majority of the cycle, prove me wrong?</p>
<p>[quote=“sk8rdude461, post:11, topic:543914”]I’m not going to say whether this is an improvement or not, because more than likely it is.<br>
I just want to see how much of an improvement it is before adding it, because it may not be worth it…[/quote]<br>
Explain the logic behind that? If its an improvement, why wouldn’t you add it? It takes two seconds to add <img src="../../images/emoji/twitter/stuck_out_tongueae52.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
<p>If you have a major lag problem, this isn’t going to magically to fix it. It is an improvement though <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>[quote=“matzie, post:13, topic:543914”]It sounds like a good concept to me. I think there might be a some room for improvement though.<br>
It seems this would make a better structure to me.<br>
Update Block Manager:<br>
-Told of an update(any of the mask updates)<br>
-Write those values to memory.<br>
-Set that flag to “needed”<br>
-Sets stream state as modified<br>
-pack<br>
if modified<br>
-Compiles all “needed” values to a byte-stream<br>
-Sets stream state as recent<br>
return byte stream<br>
-flush<br>
clear all flags and byte stream[/quote]<br>
The cached block is already only caching the updates that are needed so you wouldn’t need an update block manager. The second part of the concept is already being done in the code, although this a lazy way to go about it <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
      </div>

      <meta itemprop='headline' content='[PI] Reduce lag by caching update blocks!'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/arham_4.html'><span itemprop='name'>arham_4</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-06-14T19:17:18Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:16:43Z' class='post-time'>
              August 4, 2016,  1:16pm
            </time>
        <span itemprop='position'>#15</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Graham, post:1, topic:288551”]<span class="bbcode-b">Caching update blocks</span></p>
<p>Say you had 100 players in a region, and then a new one logs in. In a traditional server, each 100 players will reconstruct the new player’s appearance update block when they login. This server will cache update blocks for the duration of the cycle, so it only happens once, at the expense of slightly more memory usage.</p>
<p>This should give some improvements when there are a lot of players in an area, especially if the updates are large (like appearance blocks).[/quote]</p>
<p>Key word: “some”. This should give <span class="bbcode-i">some</span> improvements.</p>
<p>Lare never said, “this will fix every single lag problem in PI.”</p>
      </div>

      <meta itemprop='headline' content='[PI] Reduce lag by caching update blocks!'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="3" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Ashi.html'><span itemprop='name'>Ashi</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-06-14T19:18:05Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:16:43Z' class='post-time'>
              August 4, 2016,  1:16pm
            </time>
        <span itemprop='position'>#16</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“arham 4, post:15, topic:543914”][quote author=Graham link=topic=381494.msg2866591#msg2866591 date=1247502807]<br>
<span class="bbcode-b">Caching update blocks</span></p>
<p>Say you had 100 players in a region, and then a new one logs in. In a traditional server, each 100 players will reconstruct the new player’s appearance update block when they login. This server will cache update blocks for the duration of the cycle, so it only happens once, at the expense of slightly more memory usage.</p>
<p>This should give some improvements when there are a lot of players in an area, especially if the updates are large (like appearance blocks).<br>
[/quote]</p>
<p>Key word: “some”. This should give <span class="bbcode-i">some</span> improvements.[/quote]<br>
Nobody is saying that it does not give any improvements you derp. But some is not a lot.</p>
      </div>

      <meta itemprop='headline' content='[PI] Reduce lag by caching update blocks!'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/arham_4.html'><span itemprop='name'>arham_4</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-06-14T19:18:58Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:16:43Z' class='post-time'>
              August 4, 2016,  1:16pm
            </time>
        <span itemprop='position'>#17</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Ashi, post:16, topic:543914”][quote author=arham 4 link=topic=662795.msg4429956#msg4429956 date=1402773438]</p>
<aside class="quote">
<blockquote>
<p><span class="bbcode-b">Caching update blocks</span></p>
<p>Say you had 100 players in a region, and then a new one logs in. In a traditional server, each 100 players will reconstruct the new player’s appearance update block when they login. This server will cache update blocks for the duration of the cycle, so it only happens once, at the expense of slightly more memory usage.</p>
<p>This should give some improvements when there are a lot of players in an area, especially if the updates are large (like appearance blocks).</p>
</blockquote>
</aside>
<p>Key word: “some”. This should give <span class="bbcode-i">some</span> improvements.<br>
[/quote]<br>
Nobody is saying that it does not give any improvements you derp. But some is not a lot.[/quote]<br>
Why not reside to <span class="bbcode-i">some</span>?</p>
<p>It doesn’t hurt.</p>
      </div>

      <meta itemprop='headline' content='[PI] Reduce lag by caching update blocks!'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Ashi.html'><span itemprop='name'>Ashi</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-06-14T20:03:03Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:16:43Z' class='post-time'>
              August 4, 2016,  1:16pm
            </time>
        <span itemprop='position'>#18</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>My server isn’t crap that requires every little bit of performance gain it can get. That’s why I don’t care about “some” lol.</p>
      </div>

      <meta itemprop='headline' content='[PI] Reduce lag by caching update blocks!'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Clawz_fury.html'><span itemprop='name'>Clawz_fury</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-06-14T20:39:50Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:16:43Z' class='post-time'>
              August 4, 2016,  1:16pm
            </time>
        <span itemprop='position'>#19</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“arham 4, post:15, topic:543914”][quote author=Graham link=topic=381494.msg2866591#msg2866591 date=1247502807]<br>
<span class="bbcode-b">Caching update blocks</span></p>
<p>Say you had 100 players in a region, and then a new one logs in. In a traditional server, each 100 players will reconstruct the new player’s appearance update block when they login. This server will cache update blocks for the duration of the cycle, so it only happens once, at the expense of slightly more memory usage.</p>
<p>This should give some improvements when there are a lot of players in an area, especially if the updates are large (like appearance blocks).<br>
[/quote]</p>
<p>Key word: “some”. This should give <span class="bbcode-i">some</span> improvements.</p>
<p>Lare never said, “this will fix every single lag problem in PI.”[/quote]<br>
^^ this is why i hate releasing stuff on here lol i get attacked almost every time i release a tutorial or something of this nature. im cool with constructive criticism but blatant stupidity is really irritating</p>
<aside class="quote" data-post="18" data-topic="543914">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/ashi/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> Ashi:</div>
<blockquote>
<p>My server isn’t crap that requires every little bit of performance gain it can get. That’s why I don’t care about “some” lol.</p>
</blockquote>
</aside>
<p>ok its official you are an IDIOT, just leave</p>
<p>if it wasn’t important then graham wouldn’t have added it to hyperion/apollo</p>
<p>/discussion</p>
      </div>

      <meta itemprop='headline' content='[PI] Reduce lag by caching update blocks!'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Ashi.html'><span itemprop='name'>Ashi</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-06-14T21:34:20Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:16:44Z' class='post-time'>
              August 4, 2016,  1:16pm
            </time>
        <span itemprop='position'>#20</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Okay lets do it because Graham did it!</p>
      </div>

      <meta itemprop='headline' content='[PI] Reduce lag by caching update blocks!'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>

  <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
      <span itemprop='name'><b><a rel="next" itemprop="url" href="5439144658.html?page=2">next page →</a></b></span>
  </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/pi-reduce-lag-by-caching-update-blocks/543914 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 22:12:53 GMT -->
</html>
