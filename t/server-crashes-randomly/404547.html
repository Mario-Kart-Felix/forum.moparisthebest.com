<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/server-crashes-randomly/404547 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Aug 2019 23:55:12 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Server crashes randomly! - Runescape - moparisthebest.com</title>
    <meta name="description" content="well the source i got brokenx PI had messed up npchandler so i found a guide how to fix it but now once every 10 hours if u kill a certian npc the server crashes, i found one npc is hill giant id 117 but it doesnt always&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="404547.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Server crashes randomly!&#39;" href="404547.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/server-crashes-randomly/404547" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/server-crashes-randomly/404547" />
<meta property="og:title" content="Server crashes randomly!" />
<meta name="twitter:title" content="Server crashes randomly!" />
<meta property="og:description" content="well the source i got brokenx PI had messed up npchandler so i found a guide how to fix it but now once every 10 hours if u kill a certian npc the server crashes, i found one npc is hill giant id 117 but it doesnt always crash heres the error i get sometimes when server crashes [7/15/11 3:02 PM]: java.lang.NullPointerException [7/15/11 3:02 PM]:      at server.model.npcs.NPCHandler.dropItems(NPCHandler.jav a:1698) [7/15/11 3:02 PM]:      at server.model.npcs.NPCHandler.process(NPCHandler.java: 1..." />
<meta name="twitter:description" content="well the source i got brokenx PI had messed up npchandler so i found a guide how to fix it but now once every 10 hours if u kill a certian npc the server crashes, i found one npc is hill giant id 117 but it doesnt always crash heres the error i get sometimes when server crashes [7/15/11 3:02 PM]: java.lang.NullPointerException [7/15/11 3:02 PM]:      at server.model.npcs.NPCHandler.dropItems(NPCHandler.jav a:1698) [7/15/11 3:02 PM]:      at server.model.npcs.NPCHandler.process(NPCHandler.java: 1..." />
<meta property="article:published_time" content="2011-07-16T15:41:11+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="404547.html">Server crashes randomly!</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/vovik.html'><span itemprop='name'>vovik</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-07-16T15:41:11Z'>
            <time itemprop='dateModified' datetime='2016-08-01T13:14:14Z' class='post-time'>
              August 1, 2016,  1:14pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>well the source i got brokenx PI had messed up npchandler so i found a guide how to fix it but now once every 10 hours if u kill a certian npc the server crashes, i found one npc is hill giant id 117 but it doesnt always crash heres the error i get sometimes when server crashes <code>[7/15/11 3:02 PM]: java.lang.NullPointerException
[7/15/11 3:02 PM]:      at server.model.npcs.NPCHandler.dropItems(NPCHandler.jav
a:1698)
[7/15/11 3:02 PM]:      at server.model.npcs.NPCHandler.process(NPCHandler.java:
1517)
[7/15/11 3:02 PM]:      at server.Server.main(Server.java:163)
[7/15/11 3:02 PM]: A fatal exception has been thrown!
[7/15/11 3:02 PM]: Saved game for deadly mind.
Press any key to continue . . .</code></p>
<p>heres the link (1517) <code>dropItems(i); // npc drops items!</code> in npchandler<br>
line (1698) <code>Server.itemHandler.createGroundItem(c, item, npcs[i].absX, npcs[i].absY, 1, c.playerId);</code></p>
<p>and line 163 in server.java <code>npcHandler.process();</code></p>
<p>here public void process() [CODE]	public void process() {<br>
for (int i = 0; i &lt; maxNPCs; i++) {<br>
if (npcs[i] == null) continue;<br>
npcs[i].clearUpdateFlags();</p>
<pre><code>	}
            
	for (int i = 0; i &lt; maxNPCs; i++) {
		if (npcs[i] != null) {
			if (npcs[i].actionTimer &gt; 0) {
				npcs[i].actionTimer--;
			}
			
			if (npcs[i].freezeTimer &gt; 0) {
				npcs[i].freezeTimer--;
			}
			
			if (npcs[i].hitDelayTimer &gt; 0) {
				npcs[i].hitDelayTimer--;
			}
			
			if (npcs[i].hitDelayTimer == 1) {
				npcs[i].hitDelayTimer = 0;
               					applyDamage(i);
			}
			
			if(npcs[i].attackTimer &gt; 0) {
				npcs[i].attackTimer--;
			}
				
			if(npcs[i].spawnedBy &gt; 0) { // delete summons npc
				if(Server.playerHandler.players[npcs[i].spawnedBy] == null
				|| Server.playerHandler.players[npcs[i].spawnedBy].heightLevel != npcs[i].heightLevel	
				|| Server.playerHandler.players[npcs[i].spawnedBy].respawnTimer &gt; 0 
				|| !Server.playerHandler.players[npcs[i].spawnedBy].goodDistance(npcs[i].getX(), npcs[i].getY(), Server.playerHandler.players[npcs[i].spawnedBy].getX(), Server.playerHandler.players[npcs[i].spawnedBy].getY(), 20)) {
						
					if(Server.playerHandler.players[npcs[i].spawnedBy] != null) {
						for(int o = 0; o &lt; Server.playerHandler.players[npcs[i].spawnedBy].barrowsNpcs.length; o++){
							if(npcs[i].npcType == Server.playerHandler.players[npcs[i].spawnedBy].barrowsNpcs[o][0]) {
								if (Server.playerHandler.players[npcs[i].spawnedBy].barrowsNpcs[o][1] == 1)
									Server.playerHandler.players[npcs[i].spawnedBy].barrowsNpcs[o][1] = 0;
							}
						}
					}
					npcs[i] = null;
				}
			}
			if (npcs[i] == null) continue;
			
			/**
			* Attacking player
			**/
			if (isAggressive(i) &amp;&amp; !npcs[i].underAttack &amp;&amp; !npcs[i].isDead &amp;&amp; !switchesAttackers(i)) {
				npcs[i].killerId = getCloseRandomPlayer(i);
			} else if (isAggressive(i) &amp;&amp; !npcs[i].underAttack &amp;&amp; !npcs[i].isDead &amp;&amp; switchesAttackers(i)) {
				npcs[i].killerId = getCloseRandomPlayer(i);
			}
			
			if (System.currentTimeMillis() - npcs[i].lastDamageTaken &gt; 5000)
				npcs[i].underAttackBy = 0;
			
			if((npcs[i].killerId &gt; 0 || npcs[i].underAttack) &amp;&amp; !npcs[i].walkingHome &amp;&amp; retaliates(npcs[i].npcType)) {
				if(!npcs[i].isDead) {
					int p = npcs[i].killerId;
					if(Server.playerHandler.players[p] != null) {
						Client c = (Client) Server.playerHandler.players[p];					
						followPlayer(i, c.playerId);
						if (npcs[i] == null) continue;
						if(npcs[i].attackTimer == 0) {
							if(c != null) {
								attackPlayer(c, i);
							} else {
								npcs[i].killerId = 0;
								npcs[i].underAttack = false;
								npcs[i].facePlayer(0);
							}
						}
					} else {
						npcs[i].killerId = 0;
						npcs[i].underAttack = false;
						npcs[i].facePlayer(0);
					}
				}
			}
			
			
	
			/**
			* Random walking and walking home
			**/
			if (npcs[i] == null) continue;
			if((!npcs[i].underAttack || npcs[i].walkingHome) &amp;&amp; npcs[i].randomWalk &amp;&amp; !npcs[i].isDead) {
				npcs[i].facePlayer(0);
				npcs[i].killerId = 0;	
				if(npcs[i].spawnedBy == 0) {
					if((npcs[i].absX &gt; npcs[i].makeX + Config.NPC_RANDOM_WALK_DISTANCE) || (npcs[i].absX &lt; npcs[i].makeX - Config.NPC_RANDOM_WALK_DISTANCE) || (npcs[i].absY &gt; npcs[i].makeY + Config.NPC_RANDOM_WALK_DISTANCE) || (npcs[i].absY &lt; npcs[i].makeY - Config.NPC_RANDOM_WALK_DISTANCE)) {
						npcs[i].walkingHome = true;
					}
				}
				if (npcs[i].walkingHome &amp;&amp; npcs[i].absX == npcs[i].makeX &amp;&amp; npcs[i].absY == npcs[i].makeY) {
					npcs[i].walkingHome = false;
				} else if(npcs[i].walkingHome) {
					npcs[i].moveX = GetMove(npcs[i].absX, npcs[i].makeX);
		      		npcs[i].moveY = GetMove(npcs[i].absY, npcs[i].makeY);
					npcs[i].getNextNPCMovement(i); 
					npcs[i].updateRequired = true;
				}
				if(npcs[i].walkingType == 1) {
					if(Misc.random(3)== 1 &amp;&amp; !npcs[i].walkingHome) {
						int MoveX = 0;
						int MoveY = 0;			
						int Rnd = Misc.random(9);
						if (Rnd == 1) {
							MoveX = 1;
							MoveY = 1;
						} else if (Rnd == 2) {
							MoveX = -1;
						} else if (Rnd == 3) {
							MoveY = -1;
						} else if (Rnd == 4) {
							MoveX = 1;
						} else if (Rnd == 5) {
							MoveY = 1;
						} else if (Rnd == 6) {
							MoveX = -1;
							MoveY = -1;
						} else if (Rnd == 7) {
							MoveX = -1;
							MoveY = 1;
						} else if (Rnd == 8) {
							MoveX = 1;
							MoveY = -1;
						}
									
						if (MoveX == 1) {
							if (npcs[i].absX + MoveX &lt; npcs[i].makeX + 1) {
								npcs[i].moveX = MoveX;
							} else {
								npcs[i].moveX = 0;
							}
						}
						
						if (MoveX == -1) {
							if (npcs[i].absX - MoveX &gt; npcs[i].makeX - 1)  {
								npcs[i].moveX = MoveX;
							} else {
								npcs[i].moveX = 0;
							}
						}
						
						if(MoveY == 1) {
							if(npcs[i].absY + MoveY &lt; npcs[i].makeY + 1) {
								npcs[i].moveY = MoveY;
							} else {
								npcs[i].moveY = 0;
							}
						}
						
						if(MoveY == -1) {
							if(npcs[i].absY - MoveY &gt; npcs[i].makeY - 1)  {
								npcs[i].moveY = MoveY;
							} else {
								npcs[i].moveY = 0;
							}
						}
							

						int x = (npcs[i].absX + npcs[i].moveX);
						int y = (npcs[i].absY + npcs[i].moveY);
						if (VirtualWorld.I(npcs[i].heightLevel, npcs[i].absX, npcs[i].absY, x, y, 0))
							npcs[i].getNextNPCMovement(i);
						else
						{
							npcs[i].moveX = 0;
							npcs[i].moveY = 0;
						} 
						npcs[i].updateRequired = true;
					}
				}
			}
	
			
			if (npcs[i].isDead == true) {
				if (npcs[i].actionTimer == 0 &amp;&amp; npcs[i].applyDead == false &amp;&amp; npcs[i].needRespawn == false) {
					npcs[i].updateRequired = true;
					npcs[i].facePlayer(0);
					npcs[i].killedBy = getNpcKillerId(i);
					npcs[i].animNumber = getDeadEmote(i); // dead emote
					npcs[i].animUpdateRequired = true;
					npcs[i].freezeTimer = 0;
					npcs[i].applyDead = true;
					killedBarrow(i);
					if (isFightCaveNpc(i))
						killedTzhaar(i);
					if (isRFDNpc(i))
						killedRFD(i);
					npcs[i].actionTimer = 4; // delete time
					resetPlayersInCombat(i);
				} else if (npcs[i].actionTimer == 0 &amp;&amp; npcs[i].applyDead == true &amp;&amp;  npcs[i].needRespawn == false) {						
					npcs[i].needRespawn = true;
					npcs[i].actionTimer = getRespawnTime(i); // respawn time
					dropItems(i); // npc drops items!
					appendSlayerExperience(i);
					npcs[i].absX = npcs[i].makeX;
					npcs[i].absY = npcs[i].makeY;				
					npcs[i].HP = npcs[i].MaxHP;
					npcs[i].animNumber = 0x328;
					npcs[i].updateRequired = true;
					npcs[i].animUpdateRequired = true;
					if (npcs[i].npcType &gt;= 2440 &amp;&amp; npcs[i].npcType &lt;= 2446) {
						Server.objectManager.removeObject(npcs[i].absX, npcs[i].absY);
					}

					if (npcs[i].npcType == 2745) {
						handleJadDeath(i);
					}
					if (npcs[i].npcType == 3491) {
						handleRFDDeath(i);
					}
				} else if (npcs[i].actionTimer == 0 &amp;&amp; npcs[i].needRespawn == true) {					
					if(npcs[i].spawnedBy &gt; 0) {
						npcs[i] = null;
					} else {
						int old1 = npcs[i].npcType;
						int old2 = npcs[i].makeX;
						int old3 = npcs[i].makeY;
						int old4 = npcs[i].heightLevel;
						int old5 = npcs[i].walkingType;
						int old6 = npcs[i].MaxHP;
						int old7 = npcs[i].maxHit;
						int old8 = npcs[i].attack;	
						int old9 = npcs[i].defence;
						
						npcs[i] = null;
						newNPC(old1, old2, old3, old4, old5, old6, old7, old8, old9);
					}
				}
			}
		}
	}
}[/CODE]
</code></pre>
<p>Hope you can help <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
      </div>

      <meta itemprop='headline' content='Server crashes randomly!'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/James-RevolutionX.html'><span itemprop='name'>James-RevolutionX</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-07-16T17:46:15Z'>
            <time itemprop='dateModified' datetime='2016-08-01T13:14:32Z' class='post-time'>
              August 1, 2016,  1:14pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>The Command Prompt is saying there’s a <span class="bbcode-b">exception</span>. The exception method creates an object and hands it off to the runtime system. The object, called an exception object, contains information about the error, including its type and the state of the program when the error occurred. Creating an exception object and handing it to the runtime system is called throwing an exception.</p>
<p>Here’s a diagram to explain a little better.</p>
<p><a href="http://imageshack.us/photo/my-images/37/42558085.png/" data-bbcode="true" rel="nofollow noopener"><img src="http://img37.imageshack.us/img37/7199/42558085.png" alt width="" height=""></a></p>
<p>Could you please post your NPChandler.java.</p>
      </div>

      <meta itemprop='headline' content='Server crashes randomly!'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/server-crashes-randomly/404547 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Aug 2019 23:55:14 GMT -->
</html>
