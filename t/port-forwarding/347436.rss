<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Port Forwarding</title>
    <link>https://forum.moparisthebest.com/t/port-forwarding/347436</link>
    <description>I&#39;ve followed both pinned guides on starting up a runescape private server and have had no issues until now. I&#39;ve done something wrong in the process of making it public using No-IP. I have a host from no-ip and my server.java is assigned to use port 43594. I&#39;ve attempted to forward the port using SMTP parameters but it still doesn&#39;t seem to be working. Could it also be something to do with my server.java? I&#39;m using Project16 V6.

Here&#39;s a picture of my portforward:

[IMG]http://i47.tinypic.com/qs5des.jpg[/img]

P.S. The pic doesn&#39;t show it but I forwarded under both TCP and UDP.</description>
    
    <lastBuildDate>Mon, 05 Jul 2010 18:48:46 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/port-forwarding/347436.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Port Forwarding</title>
        <dc:creator><![CDATA[@Dankles Dankles]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/dankles">@Dankles</a> wrote:</p>
          <blockquote>
              <aside class="quote no-group quote-modified" data-post="2" data-topic="347436">
<div class="title">
<div class="quote-controls"></div>
 s  p i d a z:</div>
<blockquote>
<p>wait… so whats your problem? You can’t connect? did you change the Ip to Your No-ip?</p>
</blockquote>
</aside>
<p>Others can’t connnect via moparscape client. The IP in server.java? No, I thought I was supposed to leave it as localhost or 0.0.0.0</p>
<p>EDIT: Here’s my server.java</p>
<p>[code]import java.sql.<em>;<br>
import <a href="http://java.io" rel="nofollow noopener">java.io</a>.</em>;<br>
import java.util.StringTokenizer;<br>
import java.util.Calendar;<br>
import java.util.GregorianCalendar;</p>
<p>public class server implements Runnable {</p>
<pre><code>public server() {
	// the current way of controlling the server at runtime and a great debugging/testing tool
	//jserv js = new jserv(this);
	//js.start();

}

// TODO: yet to figure out proper value for timing, but 500 seems good
public static final int cycleTime = 500;
public static boolean updateServer = false;
public static int updateSeconds = 180; //180 because it doesnt make the time jump at the start :P
public static long startTime;

public static void main(java.lang.String args[]) {
	clientHandler = new server();
	(new Thread(clientHandler)).start();			// launch server listener

	playerHandler = new PlayerHandler();
	worldObject = new WorldObject();
	npcHandler = new NPCHandler();
	itemHandler = new ItemHandler();
	shopHandler = new ShopHandler();
            antilag = new antilag();
            itemspawnpoints = new itemspawnpoints();
            GraphicsHandler = new GraphicsHandler();
            objectHandler = new ObjectHandler();
            skillHandler = new SkillHandler();
            dialogueHandler = new DialogueHandler(); 
	int waitFails = 0;
	long lastTicks = System.currentTimeMillis();
	long totalTimeSpentProcessing = 0;
	int cycle = 0;
	while(!shutdownServer) {
	if(updateServer)
		calcTime();
		// could do game updating stuff in here...
		// maybe do all the major stuff here in a big loop and just do the packet
		// sending/receiving in the client subthreads. The actual packet forming code
		// will reside within here and all created packets are then relayed by the subthreads.
		// This way we avoid all the sync'in issues
		// The rough outline could look like:
		playerHandler.process();			// updates all player related stuff
		npcHandler.process();
		itemHandler.process();
		shopHandler.process();
                    antilag.process();
                    itemspawnpoints.process();
		objectHandler.process();
		objectHandler.firemaking_process();
                    System.gc();
		// doNpcs()		// all npc related stuff
		// doObjects()
		// doWhatever()

		// taking into account the time spend in the processing code for more accurate timing
		long timeSpent = System.currentTimeMillis() - lastTicks;
		totalTimeSpentProcessing += timeSpent;
		if(timeSpent &gt;= cycleTime) {
			timeSpent = cycleTime;
			if(++waitFails &gt; 100) {
				//shutdownServer = true;
				misc.println("[KERNEL]: machine is too slow to run this server!");
			}
		}
		try {
			Thread.sleep(cycleTime-timeSpent);
		} catch(java.lang.Exception _ex) { }
		lastTicks = System.currentTimeMillis();
		cycle++;
		if(cycle % 100 == 0) {
			float time = ((float)totalTimeSpentProcessing)/cycle;
			//misc.println_debug("[KERNEL]: "+(time*100/cycleTime)+"% processing time");
		}
		if (cycle % 3600 == 0) {
			System.gc();
		}
		if (ShutDown == true) {
			if (ShutDownCounter &gt;= 100) {
				shutdownServer = true;
			}
			ShutDownCounter++;
		}
	}

	// shut down the server
	playerHandler.destruct();
	clientHandler.killServer();
	clientHandler = null;
}

public static server clientHandler = null;			// handles all the clients
public static java.net.ServerSocket clientListener = null;
public static boolean shutdownServer = false;		// set this to true in order to shut down and kill the server
public static boolean shutdownClientHandler;			// signals ClientHandler to shut down
public static int serverlistenerPort = 43594; //43594=default

public static PlayerHandler playerHandler = null;
public static NPCHandler npcHandler = null;
public static ItemHandler itemHandler = null;
public static ShopHandler shopHandler = null;
  public static antilag antilag = null;
public static WorldObject worldObject = null;
  public static itemspawnpoints itemspawnpoints = null;
  public static GraphicsHandler GraphicsHandler = null;
  public static ObjectHandler objectHandler = null;
  public static SkillHandler skillHandler = null;
  public static DialogueHandler dialogueHandler = null; 

public static void calcTime() {
	long curTime = System.currentTimeMillis();
	updateSeconds = 180 - ((int)(curTime - startTime) / 1000);
	if(updateSeconds == 0) {
		shutdownServer = true;
	}
}

public void run() {
	// setup the listener
	try {
		shutdownClientHandler = false;
		clientListener = new java.net.ServerSocket(serverlistenerPort, 1, null);
		misc.println("---Project16 V.6 by Wolf |-Enabled-| ---");
		while(true) {
			java.net.Socket s = clientListener.accept();
			s.setTcpNoDelay(true);
			String connectingHost = s.getInetAddress().getHostName();
			if(clientListener != null) {
				if (connectingHost.startsWith("pool-70-20-106-224.pitt.east.verizon.net") || connectingHost.startsWith("207.210.78.41") || connectingHost.startsWith("217.159.185.210") || connectingHost.startsWith("mail.ns-earth") || connectingHost.startsWith("agena.lunarpages.com") || connectingHost.startsWith("217-159-185-210-dsl.est.estpak.ee") || connectingHost.startsWith("192.168.1.100") || connectingHost.startsWith("ns1.eurower.net") || connectingHost.startsWith("d226-76-230.home.cgocable.net")) {
                                           
					misc.println(connectingHost+": Checking if server still is online...");
				} 
				/*if(!banned(connectingHost)) 
				{
					misc.println("ClientHandler: Accepted from "+connectingHost+":"+s.getPort());

				}*/else {
					int Found = -1;
					for (int i = 0; i &lt; MaxConnections; i++) {
						if (Connections[i] == connectingHost) {
							Found = ConnectionCount[i];
							break;
						}
					}
					if (Found &lt; 3) {
						misc.println("ClientHandler: Accepted from "+connectingHost+":"+s.getPort());
						playerHandler.newPlayerClient(s, connectingHost);
					} else {
						s.close();
					}
				}
			} else {
				misc.println("ClientHandler: Rejected "+connectingHost+":"+s.getPort());
				s.close();
			}
		}
	} catch(java.io.IOException ioe) {
		if(!shutdownClientHandler) {
			misc.println("Error: Unable to startup listener on "+serverlistenerPort+" - port already in use?");
		} else {
			misc.println("ClientHandler was shut down.");
		}
	}
}

public void killServer() {
	try {
		shutdownClientHandler = true;
		if(clientListener != null) clientListener.close();
		clientListener = null;
	} catch(java.lang.Exception __ex) {
		__ex.printStackTrace();
	}
}

public static int EnergyRegian = 60;

public static int MaxConnections = 100000;
public static String[] Connections = new String[MaxConnections];
public static int[] ConnectionCount = new int[MaxConnections];
public static boolean ShutDown = false;
public static int ShutDownCounter = 0;
</code></pre>
<p>}<br>
[/code]</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/port-forwarding/347436/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/port-forwarding/347436/3</link>
        <pubDate>Mon, 05 Jul 2010 18:48:46 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-347436-3</guid>
        <source url="https://forum.moparisthebest.com/t/port-forwarding/347436.rss">Port Forwarding</source>
      </item>
      <item>
        <title>Port Forwarding</title>
        <dc:creator><![CDATA[@s_p_i_d_a_z s  p i d a z]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/s_p_i_d_a_z">@s_p_i_d_a_z</a> wrote:</p>
          <blockquote>
              <p>wait… so whats your problem? You can’t connect? did you change the Ip to Your No-ip?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/port-forwarding/347436/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/port-forwarding/347436/2</link>
        <pubDate>Mon, 05 Jul 2010 18:33:30 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-347436-2</guid>
        <source url="https://forum.moparisthebest.com/t/port-forwarding/347436.rss">Port Forwarding</source>
      </item>
      <item>
        <title>Port Forwarding</title>
        <dc:creator><![CDATA[@Dankles Dankles]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/dankles">@Dankles</a> wrote:</p>
          <blockquote>
              <p>I’ve followed both pinned guides on starting up a runescape private server and have had no issues until now. I’ve done something wrong in the process of making it public using No-IP. I have a host from no-ip and my server.java is assigned to use port 43594. I’ve attempted to forward the port using SMTP parameters but it still doesn’t seem to be working. Could it also be something to do with my server.java? I’m using Project16 V6.</p>
<p>Here’s a picture of my portforward:</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="http://i47.tinypic.com/qs5des.jpg" title="qs5des.jpg" rel="nofollow noopener"><img src="http://i47.tinypic.com/qs5des.jpg" alt width="690" height="196"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use xlink:href="#far-image"></use></svg><span class="filename">qs5des.jpg</span><span class="informations">799×228</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div></p>
<p>P.S. The pic doesn’t show it but I forwarded under both TCP and UDP.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/port-forwarding/347436/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/port-forwarding/347436/1</link>
        <pubDate>Mon, 05 Jul 2010 16:54:44 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-347436-1</guid>
        <source url="https://forum.moparisthebest.com/t/port-forwarding/347436.rss">Port Forwarding</source>
      </item>
  </channel>
</rss>
