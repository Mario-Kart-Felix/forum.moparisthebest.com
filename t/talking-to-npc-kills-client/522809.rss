<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Talking to NPC kills client</title>
    <link>https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809</link>
    <description>I haven&#39;t actually been able to test all dialogues or everything, but for some reason when I use sendNpcChatX(strings);
My client crashes.
The crash code:
[code]
Exception in thread &quot;Thread-5&quot; java.lang.ArrayIndexOutOfBoundsException
[/code]
Yeah, for some reason it stopped printing the full error(right after I started typing up this topic -.-)

But I feel it&#39;s something with the npc&#39;s chat head in the chat area, because it works fine if I use sendStatement, and sendOption.</description>
    
    <lastBuildDate>Thu, 27 Jun 2013 00:55:34 +0000</lastBuildDate>
    <category>Game Development</category>
    <atom:link href="https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Talking to NPC kills client</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="14" data-topic="522809">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/ambokile/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> Ambokile:</div>
<blockquote>
<p>Try commenting out that line entirely and see if you still get the error.</p>
</blockquote>
</aside>
<p>Yeah if I remove the sendNpcChat, and just use sendStatement, there isn’t an error</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809/15">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809/15</link>
        <pubDate>Thu, 27 Jun 2013 00:55:34 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-522809-15</guid>
        <source url="https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809.rss">Talking to NPC kills client</source>
      </item>
      <item>
        <title>Talking to NPC kills client</title>
        <dc:creator><![CDATA[@Ambokile Ambokile]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ambokile">@Ambokile</a> wrote:</p>
          <blockquote>
              <p>Try commenting out that line entirely and see if you still get the error.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809/14">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809/14</link>
        <pubDate>Wed, 26 Jun 2013 22:40:29 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-522809-14</guid>
        <source url="https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809.rss">Talking to NPC kills client</source>
      </item>
      <item>
        <title>Talking to NPC kills client</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="12" data-topic="522809">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/ambokile/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> Ambokile:</div>
<blockquote>
<p>Handle energy decrease in the walking method, and have an event run every x seconds to restore energy. Set the text in these two methods.</p>
</blockquote>
</aside>
<p>Sounds good, and for the chat error (To be honest, I’ve just been using sendStatement’s for the time being)?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809/13">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809/13</link>
        <pubDate>Wed, 26 Jun 2013 22:01:03 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-522809-13</guid>
        <source url="https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809.rss">Talking to NPC kills client</source>
      </item>
      <item>
        <title>Talking to NPC kills client</title>
        <dc:creator><![CDATA[@Ambokile Ambokile]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ambokile">@Ambokile</a> wrote:</p>
          <blockquote>
              <p>Handle energy decrease in the walking method, and have an event run every x seconds to restore energy. Set the text in these two methods.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809/12">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809/12</link>
        <pubDate>Wed, 26 Jun 2013 21:22:50 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-522809-12</guid>
        <source url="https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809.rss">Talking to NPC kills client</source>
      </item>
      <item>
        <title>Talking to NPC kills client</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <aside class="quote quote-modified" data-post="10" data-topic="522809">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/ambokile/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> Ambokile:</div>
<blockquote>
<p>It looks like it’s to do with run energy. Try to disable the sending of run energy and see if that fixes it.</p>
</blockquote>
</aside>
<p>Oh yeah. I was adding run energy and the formula. Something had me put it in the process.<br>
Know a better way I could update the run energy %?<br>
[hr]<br>
Anyways,<br>
It still throws the error. <span class="bbcode-i">but</span> I have good news.<br>
I change the npc chat a bit:<br>
from this:<br>
sendNpcChat1(“Ello, and what are you after then?”, c.talkingNpc, “Vannaka”, 200);<br>
to this:<br>
sendNpcChat1(“Ello, and what are you after then?”, c.talkingNpc, “Vannaka”, 600);</p>
<p>and this is what the error was:</p>
<pre><code class="lang-auto">Exception in thread "Thread-5" java.lang.ArrayIndexOutOfBoundsException: 5308558
	at FrameReader.forId(FrameReader.java:122)
	at Model.method470(Model.java:2035)
	at RSInterface.method209(RSInterface.java:2500)
	at client.drawInterface(client.java:8637)
	at client.drawChatArea(client.java:596)
	at client.drawGameScreen(client.java:8300)
	at client.processDrawing(client.java:9078)
	at RSApplet.run(RSApplet.java:96)
	at client.run(client.java:5200)
	at java.lang.Thread.run(Unknown Source)</code></pre>
<p>So maybe I need to lower the number more?</p>
<p>Edit: Nope; changed the number to 0. Same error</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809/11">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809/11</link>
        <pubDate>Wed, 26 Jun 2013 19:31:31 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-522809-11</guid>
        <source url="https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809.rss">Talking to NPC kills client</source>
      </item>
      <item>
        <title>Talking to NPC kills client</title>
        <dc:creator><![CDATA[@Ambokile Ambokile]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ambokile">@Ambokile</a> wrote:</p>
          <blockquote>
              <p>It looks like it’s to do with run energy. Try to disable the sending of run energy and see if that fixes it.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809/10</link>
        <pubDate>Wed, 26 Jun 2013 13:44:12 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-522809-10</guid>
        <source url="https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809.rss">Talking to NPC kills client</source>
      </item>
      <item>
        <title>Talking to NPC kills client</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <pre><code class="lang-auto">126: Vannaka (4884)
126: Ello, and what are you after then? (4885)
126: 100% (8674)
126: 100% (8675)
126: 100% (8676)
126: 100% (8677)
126: 100% (8678)
126: 100% (8679)
126: 100% (8680)
Exception in thread "Thread-5" java.lang.ArrayIndexOutOfBoundsException</code></pre>
<p>But this was consistently printing the entire time:</p>
<pre><code class="lang-auto">126: 100% (8674)
126: 100% (8675)
126: 100% (8676)
126: 100% (8677)
126: 100% (8678)
126: 100% (8679)
126: 100% (8680)
126: 100% (8674)
126: 100% (8675)
126: 100% (8676)
126: 100% (8677)
126: 100% (8678)
126: 100% (8679)
126: 100% (8680)</code></pre>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809/9</link>
        <pubDate>Tue, 25 Jun 2013 21:19:44 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-522809-9</guid>
        <source url="https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809.rss">Talking to NPC kills client</source>
      </item>
      <item>
        <title>Talking to NPC kills client</title>
        <dc:creator><![CDATA[@Ambokile Ambokile]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ambokile">@Ambokile</a> wrote:</p>
          <blockquote>
              <p><code>        public void sendFrame126(String str, int i) {
                RSInterface.interfaceCache[i].disabledMessage = str;
                if(RSInterface.interfaceCache[i].parentID == tabInterfaceIDs[tabID])
                        needDrawTabArea = true;
        }</code></p>
<p>Under RSInterface.interfaceCache[i].disabledMessage = str; add this line:</p>
<pre><code class="lang-auto"></code></pre>
<p>Print the results.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809/8</link>
        <pubDate>Tue, 25 Jun 2013 21:12:03 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-522809-8</guid>
        <source url="https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809.rss">Talking to NPC kills client</source>
      </item>
      <item>
        <title>Talking to NPC kills client</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="6" data-topic="522809">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/ambokile/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> Ambokile:</div>
<blockquote>
<p>Ah your packets are all split into different methods. Post the updateStrings and sendFrame126 methods, please.</p>
</blockquote>
</aside>
<pre><code class="lang-auto">	public void sendFrame126(String str, int i) {
		RSInterface.interfaceCache[i].disabledMessage = str;
		if(RSInterface.interfaceCache[i].parentID == tabInterfaceIDs[tabID])
			needDrawTabArea = true;
	}
	
	public void sendFrame126(String str, int i, int color) {
		RSInterface.interfaceCache[i].disabledMessage = str;
		if(RSInterface.interfaceCache[i].parentID == tabInterfaceIDs[tabID])
			needDrawTabArea = true;
		RSInterface.disabledColor(i, color);
	}</code></pre>
<p>and</p>
<pre><code class="lang-auto">	public void updateStrings(String str, int i) {
		switch(i) {
			case 1675: sendFrame126(str, 17508); break;//Stab
			case 1676: sendFrame126(str, 17509); break;//Slash
			case 1677: sendFrame126(str, 17510); break;//Cursh
			case 1678: sendFrame126(str, 17511); break;//Magic
			case 1679: sendFrame126(str, 17512); break;//Range
			case 1680: sendFrame126(str, 17513); break;//Stab
			case 1681: sendFrame126(str, 17514); break;//Slash
			case 1682: sendFrame126(str, 17515); break;//Crush
			case 1683: sendFrame126(str, 17516); break;//Magic
			case 1684: sendFrame126(str, 17517); break;//Range
			case 1686: sendFrame126(str, 17518); break;//Strength
			case 1687: sendFrame126(str, 17519); break;//Prayer
		}
	}</code></pre>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809/7</link>
        <pubDate>Tue, 25 Jun 2013 21:05:29 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-522809-7</guid>
        <source url="https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809.rss">Talking to NPC kills client</source>
      </item>
      <item>
        <title>Talking to NPC kills client</title>
        <dc:creator><![CDATA[@Ambokile Ambokile]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ambokile">@Ambokile</a> wrote:</p>
          <blockquote>
              <p>Ah your packets are all split into different methods. Post the updateStrings and sendFrame126 methods, please.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809/6</link>
        <pubDate>Tue, 25 Jun 2013 20:59:03 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-522809-6</guid>
        <source url="https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809.rss">Talking to NPC kills client</source>
      </item>
      <item>
        <title>Talking to NPC kills client</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <pre><code class="lang-auto">				case 126:
					String text = inStream.readString();
					int frame = inStream.method435();
					if (text.startsWith("www.")) {
						openURL(text);
						pktType = -1;
						return true;
					}
					updateStrings(text, frame);
					sendFrame126(text, frame);
					if (frame &gt;= 18144 &amp;&amp; frame &lt;= 18244) {
						clanList[frame - 18144] = text;
					}
					pktType = -1;
					return true;</code></pre>
<p>I assume this is it?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809/5</link>
        <pubDate>Tue, 25 Jun 2013 20:55:34 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-522809-5</guid>
        <source url="https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809.rss">Talking to NPC kills client</source>
      </item>
      <item>
        <title>Talking to NPC kills client</title>
        <dc:creator><![CDATA[@Ambokile Ambokile]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ambokile">@Ambokile</a> wrote:</p>
          <blockquote>
              <p>In the Client class of your client, find this:</p>
<pre><code class="lang-auto"></code></pre>
<p>you should come across this (yours will have different naming but same structure):</p>
<p><code>			if (packetOpcode == 126)
			{
				String s1 = inputStream.readString();
				int k13 = inputStream.method435();
				RSInterface.interfaceCache[k13].message = s1;
				if (RSInterface.interfaceCache[k13].parentID == tabInterfaceIDs[tabID])
					redrawTab = true;
				packetOpcode = -1;
				return true;
			}</code></p>
<p>Under this:</p>
<pre><code class="lang-auto"></code></pre>
<p>Insert a print line saying “hello”. It should be printed twice before the crash. If it prints only once, or doesn’t print at all, then the problem is either in packet 126 or packet 200. Tell me the results.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809/4</link>
        <pubDate>Tue, 25 Jun 2013 17:00:57 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-522809-4</guid>
        <source url="https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809.rss">Talking to NPC kills client</source>
      </item>
      <item>
        <title>Talking to NPC kills client</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="2" data-topic="522809">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/ambokile/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> Ambokile:</div>
<blockquote>
<p>In your sendNpcChatX method, what arrays are mentioned? Please post the code of that method.</p>
</blockquote>
</aside>
<p>I was using sendNpcChat1 when I got the error:</p>
<pre><code class="lang-auto">	public void sendNpcChat1(String s, int ChatNpc, String name, int A) {
		c.getPA().sendFrame200(4883, A);
		c.getPA().sendFrame126(name, 4884);
		c.getPA().sendFrame126(s, 4885);
		c.getPA().sendFrame75(ChatNpc, 4883);
		c.getPA().sendFrame164(4882);
	}</code></pre>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809/3</link>
        <pubDate>Tue, 25 Jun 2013 16:41:56 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-522809-3</guid>
        <source url="https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809.rss">Talking to NPC kills client</source>
      </item>
      <item>
        <title>Talking to NPC kills client</title>
        <dc:creator><![CDATA[@Ambokile Ambokile]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ambokile">@Ambokile</a> wrote:</p>
          <blockquote>
              <p>In your sendNpcChatX method, what arrays are mentioned? Please post the code of that method.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809/2</link>
        <pubDate>Tue, 25 Jun 2013 14:48:31 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-522809-2</guid>
        <source url="https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809.rss">Talking to NPC kills client</source>
      </item>
      <item>
        <title>Talking to NPC kills client</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <p>I haven’t actually been able to test all dialogues or everything, but for some reason when I use sendNpcChatX(strings);<br>
My client crashes.<br>
The crash code:</p>
<pre><code class="lang-auto">Exception in thread "Thread-5" java.lang.ArrayIndexOutOfBoundsException</code></pre>
<p>Yeah, for some reason it stopped printing the full error(right after I started typing up this topic -.-)</p>
<p>But I feel it’s something with the npc’s chat head in the chat area, because it works fine if I use sendStatement, and sendOption.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809/1</link>
        <pubDate>Tue, 25 Jun 2013 13:10:14 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-522809-1</guid>
        <source url="https://forum.moparisthebest.com/t/talking-to-npc-kills-client/522809.rss">Talking to NPC kills client</source>
      </item>
  </channel>
</rss>
