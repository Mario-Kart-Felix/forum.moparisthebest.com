<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/membership-system-help/555280 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:05:17 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Membership System [Help] - Runescape - moparisthebest.com</title>
    <meta name="description" content="[CENTER]Could somebody help me get this working please? The membership scroll works and gives the status.  But only problem is that I set it for 30 seconds and after 30 seconds I could still teleport to a member&amp;#39;s island&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="555280.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Membership System [Help]&#39;" href="555280.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/membership-system-help/555280" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/membership-system-help/555280" />
<meta property="og:title" content="Membership System [Help]" />
<meta name="twitter:title" content="Membership System [Help]" />
<meta property="og:description" content="[CENTER]Could somebody help me get this working please?  The membership scroll works and gives the status.  But only problem is that I set it for 30 seconds and after 30 seconds I could still teleport  to a member’s island. I’m doing something wrong here.  I think it has something to do with my long that I am doing wrong.  Could anybody please help me out? Thnkx.[/CENTER]  [spoiler=membership system]  public class Membership {  /**  * The amount of milliseconds in a month.  */ private static fin..." />
<meta name="twitter:description" content="[CENTER]Could somebody help me get this working please?  The membership scroll works and gives the status.  But only problem is that I set it for 30 seconds and after 30 seconds I could still teleport  to a member’s island. I’m doing something wrong here.  I think it has something to do with my long that I am doing wrong.  Could anybody please help me out? Thnkx.[/CENTER]  [spoiler=membership system]  public class Membership {  /**  * The amount of milliseconds in a month.  */ private static fin..." />
<meta property="article:published_time" content="2016-04-26T22:43:22+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="555280.html">Membership System [Help]</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/imback4more.html'><span itemprop='name'>imback4more</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2016-04-26T22:43:22Z'>
            <time itemprop='dateModified' datetime='2016-08-04T17:55:53Z' class='post-time'>
              August 4, 2016,  5:55pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[CENTER]Could somebody help me get this working please?<br>
The membership scroll works and gives the status.<br>
But only problem is that I set it for 30 seconds and after 30 seconds I could still teleport<br>
to a member’s island. I’m doing something wrong here.<br>
I think it has something to do with my long that I am doing wrong.<br>
Could anybody please help me out? Thnkx.[/CENTER]<br>
[spoiler=membership system]<br>
public class Membership {</p>
<pre><code>/**
 * The amount of milliseconds in a month.
 */
private static final long MILLISECONDS_IN_A_MONTH = 20000l; //2592000000l

public static void giveMembership(Player player) {
	if (player.getMembershipDate() == null &amp;&amp; !player.getMemRights().isMembersTrue()) {
		player.setMembershipDate(new Timestamp(System.currentTimeMillis() + (MILLISECONDS_IN_A_MONTH)));
	player.getPacketSender().sendMessage("&lt;col=255&gt;Congratulations on become a pledged member for 30 days@bla@!!!");
	player.getInventory().delete(*****, 1);
	MemberRights MemRights = null;
	MemRights = MemberRights.MEMBERSHIP_;
	if(MemRights != null &amp;&amp; MemRights != player.getMemRights()) {
		player.setMemRights(MemRights);
	}
	}
}

public static boolean isConfirmedMember(Player player) {
	checkMembership(player);
	if(player.getMembershipDate() != null &amp;&amp; player.getMembershipDate().after(new Timestamp(System.currentTimeMillis())))
		return true;
	return false;
}

public static void resetMembership(Player player) {
	player.setLongMembershipDates(null);
}

public static void checkMembership(Player player) {
	if (!isConfirmedMember(player))
		resetMembership(player);
	MemberRights MemRights = null;
	MemRights = MemberRights.NONE;
	if(MemRights != null &amp;&amp; MemRights != player.getMemRights()) {
		player.setMemRights(MemRights);
	}
}
</code></pre>
<p>[/spoiler]<br>
[spoiler=membership scroll]<br>
case *****: //member’s scroll<br>
//gives 30 day membership<br>
if(player.getAmountDonated() &gt;= 20) {<br>
player.getPacketSender().sendMessage("<a class="mention" href="../../u/red.html">@red</a>@You are already a Donator. You may not Redeem this scroll.");<br>
return;<br>
} else if (player.getMemRights().isMembersTrue()) {<br>
player.getPacketSender().sendMessage("<a class="mention" href="../../u/red.html">@red</a>@You already have a Membership ongoing. You may not Redeem this scroll.");<br>
return;<br>
}<br>
Membership.giveMembership(player);<br>
break;[/spoiler]<br>
[spoiler=player.java]<br>
private Timestamp membershipDate;<br>
public Long longMembershipDate;<br>
public Player setMembershipDate(Timestamp timestamp) {<br>
this.membershipDate = timestamp;<br>
return this;<br>
}</p>
<pre><code>public void setLongMembershipDates(Long longMembershipDate) {
	this.longMembershipDate = longMembershipDate;
	return;
}

public Timestamp getMembershipDate() {
	return membershipDate;
}[/spoiler]
</code></pre>
<p>My problem is that after 30 seconds the player-rights for membership is still there, when it shouldn’t be. I know I’m missing something, but what?</p>
<p>Should be like this in the character’s file when having membership</p>
<pre><code class="lang-auto"></code></pre>
<p>Then this once time is up</p>
<pre><code class="lang-auto"></code></pre>
<p>How do I get the system to check when time is up?</p>
      </div>

      <meta itemprop='headline' content='Membership System [Help]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Soulxs.html'><span itemprop='name'>Soulxs</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2016-04-27T12:36:01Z'>
            <time itemprop='dateModified' datetime='2016-08-04T17:55:54Z' class='post-time'>
              August 4, 2016,  5:55pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I’d say check it when someone is trying to perform a member-only action (to save memory).<br>
So in the teleportation spell to the member island, do something like:</p>
<pre><code class="lang-auto">if(!Membership.isConfirmedMember(player)) {
   return;
}</code></pre>
      </div>

      <meta itemprop='headline' content='Membership System [Help]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/matzie.html'><span itemprop='name'>matzie</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2016-04-27T17:30:06Z'>
            <time itemprop='dateModified' datetime='2016-08-04T17:55:55Z' class='post-time'>
              August 4, 2016,  5:55pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Umm…</p>
<blockquote>Init:isConfirmedMember(steve);
&gt;isConfirmedMember(steve)
&gt;call to checkMembership(steve)
&gt;checkMembership(steve)
&gt;call to isConfirmedMember(steve)
&gt;isConfirmedMember(steve)
&gt;call to checkMembership(steve)
&gt;checkMembership(steve)
&gt;call to isConfirmedMember(steve)
&gt;isConfirmedMember(steve)
&gt;call to checkMembership(steve)
&gt;checkMembership(steve)
&gt;call to isConfirmedMember(steve)
&gt;isConfirmedMember(steve)
&gt;call to checkMembership(steve)
&gt;checkMembership(steve)
&gt;call to isConfirmedMember(steve)
...</blockquote>
<p>There might be something wrong with that code…</p>
      </div>

      <meta itemprop='headline' content='Membership System [Help]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/imback4more.html'><span itemprop='name'>imback4more</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2016-04-27T17:51:53Z'>
            <time itemprop='dateModified' datetime='2016-08-04T17:55:55Z' class='post-time'>
              August 4, 2016,  5:55pm
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“matzie, post:3, topic:555280”]Umm…</p>
<p>[quote]Init:isConfirmedMember(steve);</p>
<blockquote>
<p>isConfirmedMember(steve)<br>
call to checkMembership(steve)<br>
checkMembership(steve)<br>
call to isConfirmedMember(steve)<br>
isConfirmedMember(steve)<br>
call to checkMembership(steve)<br>
checkMembership(steve)<br>
call to isConfirmedMember(steve)<br>
isConfirmedMember(steve)<br>
call to checkMembership(steve)<br>
checkMembership(steve)<br>
call to isConfirmedMember(steve)<br>
isConfirmedMember(steve)<br>
call to checkMembership(steve)<br>
checkMembership(steve)<br>
call to isConfirmedMember(steve)<br>
…</p>
</blockquote>
<p>[/quote]</p>
<p>There might be something wrong with that code…[/quote]<br>
lol you did isConfirmedMember(player) in the givemembership method.</p>
<p>[quote=“Soulxs, post:2, topic:555280”]I’d say check it when someone is trying to perform a member-only action (to save memory).<br>
So in the teleportation spell to the member island, do something like:</p>
<p><code>
if(!Membership.isConfirmedMember(player)) {
   return;
}
</code>[/quote]</p>
<p>I already have it checked if they are a member or not when they teleport. My problem is the membership status won’t go away. How to fix this?</p>
      </div>

      <meta itemprop='headline' content='Membership System [Help]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/WarTusk-RSPS.html'><span itemprop='name'>WarTusk-RSPS</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2016-04-27T19:00:37Z'>
            <time itemprop='dateModified' datetime='2016-08-04T17:55:56Z' class='post-time'>
              August 4, 2016,  5:55pm
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“imback4more, post:1, topic:555280”][CENTER]Could somebody help me get this working please?<br>
The membership scroll works and gives the status.<br>
But only problem is that I set it for 30 seconds and after 30 seconds I could still teleport<br>
to a member’s island. I’m doing something wrong here.<br>
I think it has something to do with my long that I am doing wrong.<br>
Could anybody please help me out? Thnkx.[/CENTER]<br>
[spoiler=membership system]<br>
public class Membership {</p>
<pre><code>/**
 * The amount of milliseconds in a month.
 */
private static final long MILLISECONDS_IN_A_MONTH = 20000l; //2592000000l

public static void giveMembership(Player player) {
	if (player.getMembershipDate() == null &amp;&amp; !player.getMemRights().isMembersTrue()) {
		player.setMembershipDate(new Timestamp(System.currentTimeMillis() + (MILLISECONDS_IN_A_MONTH)));
	player.getPacketSender().sendMessage("&lt;col=255&gt;Congratulations on become a pledged member for 30 days@bla@!!!");
	player.getInventory().delete(*****, 1);
	MemberRights MemRights = null;
	MemRights = MemberRights.MEMBERSHIP_;
	if(MemRights != null &amp;&amp; MemRights != player.getMemRights()) {
		player.setMemRights(MemRights);
	}
	}
}

public static boolean isConfirmedMember(Player player) {
	checkMembership(player);
	if(player.getMembershipDate() != null &amp;&amp; player.getMembershipDate().after(new Timestamp(System.currentTimeMillis())))
		return true;
	return false;
}

public static void resetMembership(Player player) {
	player.setLongMembershipDates(null);
}

public static void checkMembership(Player player) {
	if (!isConfirmedMember(player))
		resetMembership(player);
	MemberRights MemRights = null;
	MemRights = MemberRights.NONE;
	if(MemRights != null &amp;&amp; MemRights != player.getMemRights()) {
		player.setMemRights(MemRights);
	}
}
</code></pre>
<p>[/spoiler]<br>
[spoiler=membership scroll]<br>
case *****: //member’s scroll<br>
//gives 30 day membership<br>
if(player.getAmountDonated() &gt;= 20) {<br>
player.getPacketSender().sendMessage("<a class="mention" href="../../u/red.html">@red</a>@You are already a Donator. You may not Redeem this scroll.");<br>
return;<br>
} else if (player.getMemRights().isMembersTrue()) {<br>
player.getPacketSender().sendMessage("<a class="mention" href="../../u/red.html">@red</a>@You already have a Membership ongoing. You may not Redeem this scroll.");<br>
return;<br>
}<br>
Membership.giveMembership(player);<br>
break;[/spoiler]<br>
[spoiler=player.java]<br>
private Timestamp membershipDate;<br>
public Long longMembershipDate;<br>
public Player setMembershipDate(Timestamp timestamp) {<br>
this.membershipDate = timestamp;<br>
return this;<br>
}</p>
<pre><code>public void setLongMembershipDates(Long longMembershipDate) {
	this.longMembershipDate = longMembershipDate;
	return;
}

public Timestamp getMembershipDate() {
	return membershipDate;
}[/spoiler]
</code></pre>
<p><span class="bbcode-b">My problem is that after 30 seconds the player-rights for membership is still there, when it shouldn’t be. I know I’m missing something, but what?</span></p>
<p>Should be like this in the character’s file when having membership</p>
<pre><code class="lang-auto"></code></pre>
<p>Then this once time is up</p>
<pre><code class="lang-auto"></code></pre>
<p><span class="bbcode-b">How do I get the system to check when time is up?</span>[/quote]What calls the method ‘checkMembership’?</p>
<p>Under that “checkMembership void” I can see that you already have it set so that it will turn your membership to <span class="bbcode-b">none</span>.</p>
<p>MemRights = MemberRights.NONE;</p>
<p>So the way I’d do it is to put it in the -Client ‘Login initialize’- area. So every time a player logs in it will check that player to see if they have more membership time or not. And if they don’t then it will change their membership rights to none.</p>
<p>So I would make it so it’s like:</p>
<p>If(MembershipTime &lt;= 0 {<br>
MemRights = MemberRights.NONE;<br>
}</p>
<p>It would be a good place also to add a message of how much membership time they have left every time they login.</p>
<p>Or add that code in your Client process instead so that it is constantly checking your membership time.</p>
<p>Might be better ways to do it but that’s what I think of on the top of my head.</p>
<p>Edit:Easiest might be just to add that piece of code to the teleport that is checking if you are a member or not.</p>
<p>If (membership == true) {<br>
teleportPlayer;<br>
} else {<br>
message(“You have no more membership time left”);<br>
MemRights = MemberRights.NONE;<br>
}</p>
      </div>

      <meta itemprop='headline' content='Membership System [Help]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/imback4more.html'><span itemprop='name'>imback4more</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2016-04-29T04:46:09Z'>
            <time itemprop='dateModified' datetime='2016-08-04T17:56:12Z' class='post-time'>
              August 4, 2016,  5:56pm
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“WarTusk-RSPS, post:5, topic:555280”][quote author=imback4more link=topic=674207.msg4507490#msg4507490 date=1461710602]<br>
[CENTER]Could somebody help me get this working please?<br>
The membership scroll works and gives the status.<br>
But only problem is that I set it for 30 seconds and after 30 seconds I could still teleport<br>
to a member’s island. I’m doing something wrong here.<br>
I think it has something to do with my long that I am doing wrong.<br>
Could anybody please help me out? Thnkx.[/CENTER]<br>
[spoiler=membership system]<br>
public class Membership {</p>
<pre><code>/**
 * The amount of milliseconds in a month.
 */
private static final long MILLISECONDS_IN_A_MONTH = 20000l; //2592000000l

public static void giveMembership(Player player) {
	if (player.getMembershipDate() == null &amp;&amp; !player.getMemRights().isMembersTrue()) {
		player.setMembershipDate(new Timestamp(System.currentTimeMillis() + (MILLISECONDS_IN_A_MONTH)));
	player.getPacketSender().sendMessage("&lt;col=255&gt;Congratulations on become a pledged member for 30 days@bla@!!!");
	player.getInventory().delete(*****, 1);
	MemberRights MemRights = null;
	MemRights = MemberRights.MEMBERSHIP_;
	if(MemRights != null &amp;&amp; MemRights != player.getMemRights()) {
		player.setMemRights(MemRights);
	}
	}
}

public static boolean isConfirmedMember(Player player) {
	checkMembership(player);
	if(player.getMembershipDate() != null &amp;&amp; player.getMembershipDate().after(new Timestamp(System.currentTimeMillis())))
		return true;
	return false;
}

public static void resetMembership(Player player) {
	player.setLongMembershipDates(null);
}

public static void checkMembership(Player player) {
	if (!isConfirmedMember(player))
		resetMembership(player);
	MemberRights MemRights = null;
	MemRights = MemberRights.NONE;
	if(MemRights != null &amp;&amp; MemRights != player.getMemRights()) {
		player.setMemRights(MemRights);
	}
}
</code></pre>
<p>[/spoiler]<br>
[spoiler=membership scroll]<br>
case *****: //member’s scroll<br>
//gives 30 day membership<br>
if(player.getAmountDonated() &gt;= 20) {<br>
player.getPacketSender().sendMessage("<a class="mention" href="../../u/red.html">@red</a>@You are already a Donator. You may not Redeem this scroll.");<br>
return;<br>
} else if (player.getMemRights().isMembersTrue()) {<br>
player.getPacketSender().sendMessage("<a class="mention" href="../../u/red.html">@red</a>@You already have a Membership ongoing. You may not Redeem this scroll.");<br>
return;<br>
}<br>
Membership.giveMembership(player);<br>
break;[/spoiler]<br>
[spoiler=player.java]<br>
private Timestamp membershipDate;<br>
public Long longMembershipDate;<br>
public Player setMembershipDate(Timestamp timestamp) {<br>
this.membershipDate = timestamp;<br>
return this;<br>
}</p>
<pre><code>public void setLongMembershipDates(Long longMembershipDate) {
	this.longMembershipDate = longMembershipDate;
	return;
}

public Timestamp getMembershipDate() {
	return membershipDate;
}[/spoiler]
</code></pre>
<p><span class="bbcode-b">My problem is that after 30 seconds the player-rights for membership is still there, when it shouldn’t be. I know I’m missing something, but what?</span></p>
<p>Should be like this in the character’s file when having membership</p>
<pre><code class="lang-auto"></code></pre>
<p>Then this once time is up</p>
<pre><code class="lang-auto"></code></pre>
<p><span class="bbcode-b">How do I get the system to check when time is up?</span><br>
[/quote]What calls the method ‘checkMembership’?</p>
<p>Under that “checkMembership void” I can see that you already have it set so that it will turn your membership to <span class="bbcode-b">none</span>.</p>
<p>MemRights = MemberRights.NONE;</p>
<p>So the way I’d do it is to put it in the -Client ‘Login initialize’- area. So every time a player logs in it will check that player to see if they have more membership time or not. And if they don’t then it will change their membership rights to none.</p>
<p>So I would make it so it’s like:</p>
<p>If(MembershipTime &lt;= 0 {<br>
MemRights = MemberRights.NONE;<br>
}</p>
<p>It would be a good place also to add a message of how much membership time they have left every time they login.</p>
<p>Or add that code in your Client process instead so that it is constantly checking your membership time.</p>
<p>Might be better ways to do it but that’s what I think of on the top of my head.</p>
<p>Edit:Easiest might be just to add that piece of code to the teleport that is checking if you are a member or not.</p>
<p>If (membership == true) {<br>
teleportPlayer;<br>
} else {<br>
message(“You have no more membership time left”);<br>
MemRights = MemberRights.NONE;<br>
}[/quote]</p>
<p>Could you help me out? Skype me kk_killah. Name is omniscient man</p>
      </div>

      <meta itemprop='headline' content='Membership System [Help]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/membership-system-help/555280 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:05:17 GMT -->
</html>
