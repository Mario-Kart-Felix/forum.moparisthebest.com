<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/runescapes-plane-angle-system/293983 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Aug 2019 09:33:05 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>RuneScapes plane angle system - Runescape - moparisthebest.com</title>
    <meta name="description" content="Well I&amp;#39;m not sure if this has been posted before, but I thought it would be useful knowledge for any client hackers out there. 

I&amp;#39;m sure that you all know about our currently used plane angle system (360 degrees in a wh&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="293983.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;RuneScapes plane angle system&#39;" href="293983.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/runescapes-plane-angle-system/293983" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/runescapes-plane-angle-system/293983" />
<meta property="og:title" content="RuneScapes plane angle system" />
<meta name="twitter:title" content="RuneScapes plane angle system" />
<meta property="og:description" content="Well I’m not sure if this has been posted before, but I thought it would be useful knowledge for any client hackers out there.  I’m sure that you all know about our currently used plane angle system (360 degrees in a whole circle). And I’m hoping that quite a lot of people here know about radians, for those of you who don’t I’d suggest having a quick glance at http://en.wikipedia.org/wiki/Radian (Although it’s not really necessary to understand this article).  Now the RuneScape plane angle syste..." />
<meta name="twitter:description" content="Well I’m not sure if this has been posted before, but I thought it would be useful knowledge for any client hackers out there.  I’m sure that you all know about our currently used plane angle system (360 degrees in a whole circle). And I’m hoping that quite a lot of people here know about radians, for those of you who don’t I’d suggest having a quick glance at http://en.wikipedia.org/wiki/Radian (Although it’s not really necessary to understand this article).  Now the RuneScape plane angle syste..." />
<meta property="article:published_time" content="2009-08-09T18:09:37+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="293983.html">RuneScapes plane angle system</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/newbiehacker.html'><span itemprop='name'>newbiehacker</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-08-09T18:09:37Z'>
            <time itemprop='dateModified' datetime='2016-07-31T09:56:03Z' class='post-time'>
              July 31, 2016,  9:56am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Well I’m not sure if this has been posted before, but I thought it would be useful knowledge for any client hackers out there.</p>
<p>I’m sure that you all know about our currently used plane angle system (360 degrees in a whole circle). And I’m hoping that quite a lot of people here know about radians, for those of you who don’t I’d suggest having a quick glance at <a href="http://en.wikipedia.org/wiki/Radian" rel="nofollow noopener">http://en.wikipedia.org/wiki/Radian</a> (Although it’s not really necessary to understand this article).</p>
<p>Now the RuneScape plane angle system doesn’t follow our convention of 360 degrees for a whole circle, they instead use 2048 degrees.  Jagex have been clever in their implementation, I’m sure most of you here are aware of the taboo on FPUs (floating point units) for their (apparent) slowness.  This can obviously create a lot of overhead in a 3d game engine that is doing millions of floating point calculations a second, and a game engine definitely does not want lag.  Jagex have overcome this by multiplying all the components in their 3d calculations by 65536 and casting to an integer, this is rather clever as it allows operations on integers instead of floats, and the conversions only have to be done once per calculation, unfortunately this does mean that some precision is lost, but not a lot.  Also to prevent constantly having to recalculate radians from degrees they generate a lookup table (this is where I found all of this information).</p>
<p>The version of the client I found this in was 317 although I’m sure that it hasn’t changed too dramatically since then.</p>
<p>Here’s the snippet I found:</p>
<pre><code class="lang-auto">        for (int k = 0; k &lt; 2048; k++) {
            sineTable[k] = (int) (65536D * Math.sin((double) k * 0.0030679614999999999D));
            cosineTable[k] = (int) (65536D * Math.cos((double) k * 0.0030679614999999999D));
        }
        double test = 6.283185152; // 2048 * 0.0030679614999999999D
        double pi2 = 6.283185307179586; // Math.PI * 2... 2 pi is a full rotation in radians</code></pre>
<p>Unfortunately due to the multiplication and the cast from float to int, the precision is dropped as mentioned above so I decided to find out how different it is, here is my code:</p>
<pre><code class="lang-auto">        double maxLoss = 0, minLoss = Double.MAX_VALUE, avgLoss = 0;
        for (int k = 0; k &lt; 2048; k++) {
            double sineval = Math.sin((double) k * 0.0030679614999999999D);
            double cosineval = Math.cos((double) k * 0.0030679614999999999D);
            sineTable[k] = (int) (65536D * sineval);
            cosineTable[k] = (int) (65536D * cosineval);

            // Find out the precision lost
            double sinedelta = Math.abs(sineval - (sineTable[k] / 65536D));
            double cosinedelta = Math.abs(cosineval - (cosineTable[k] / 65536D));

            avgLoss = (avgLoss + sinedelta) / 2D;
            avgLoss = (avgLoss + cosinedelta) / 2D;

            if(sinedelta &lt; minLoss)
                minLoss = sinedelta;
            if(cosinedelta &lt; minLoss)
                minLoss = cosinedelta;
            if(sinedelta &gt; maxLoss)
                maxLoss = sinedelta;
            if(cosinedelta &gt; maxLoss)
                maxLoss = cosinedelta;
        }
        System.out.println("Precision lost [min:" + minLoss + "/max:" + maxLoss + "/avg:" + avgLoss + "]");</code></pre>
<p>The precision lost was much, much smaller than I thought it would be:</p>
<pre><code class="lang-auto">Precision lost [min:0.0/max:1.5258789061722844E-5/avg:7.333105735440489E-6]</code></pre>
<p>The maximum precision lost was ~1.5x10^-5 which is 5 decimals!  So the precision lost was a lot less than I thought it would be.</p>
<p>I hope that you’ve learnt something by reading this thread as that was obviously my goal, thanks for reading and have fun messing around with the RuneScape internals, I know I will.</p>
      </div>

      <meta itemprop='headline' content='RuneScapes plane angle system'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Jython.html'><span itemprop='name'>Jython</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-08-09T18:10:18Z'>
            <time itemprop='dateModified' datetime='2016-07-31T09:56:03Z' class='post-time'>
              July 31, 2016,  9:56am
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Interesting read &lt;3</p>
      </div>

      <meta itemprop='headline' content='RuneScapes plane angle system'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Unhandled.html'><span itemprop='name'>Unhandled</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-08-09T19:14:06Z'>
            <time itemprop='dateModified' datetime='2016-07-31T09:56:06Z' class='post-time'>
              July 31, 2016,  9:56am
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Isn’t this more of a rotation system than a coordinate system? I always thought of coordinate systems as positioning (Cartesian coordinates etc).</p>
<p>Also, how is the data stored in the cache? With this system or radians/degrees or what?</p>
      </div>

      <meta itemprop='headline' content='RuneScapes plane angle system'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/newbiehacker.html'><span itemprop='name'>newbiehacker</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-08-09T19:37:42Z'>
            <time itemprop='dateModified' datetime='2016-07-31T09:56:08Z' class='post-time'>
              July 31, 2016,  9:56am
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>yes you’re right this is a rotation system, I was pretty tired when writing this.  The data isn’t stored in the cache.</p>
      </div>

      <meta itemprop='headline' content='RuneScapes plane angle system'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/lawl.html'><span itemprop='name'>lawl</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-08-09T21:55:25Z'>
            <time itemprop='dateModified' datetime='2016-07-31T09:56:18Z' class='post-time'>
              July 31, 2016,  9:56am
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p><img src="../../images/emoji/twitter/confusedae52.png?v=5" title=":confused:" class="emoji" alt=":confused:"><br>
[center]<img src="http://www.moparisthebest.com/smf/Themes/default/images/warnwarn.gif" alt width="" height=""> Please don’t spam bad for health please[/center]</p>
      </div>

      <meta itemprop='headline' content='RuneScapes plane angle system'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/frank.html'><span itemprop='name'>frank</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-08-09T23:33:19Z'>
            <time itemprop='dateModified' datetime='2016-07-31T09:56:29Z' class='post-time'>
              July 31, 2016,  9:56am
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>not thread-worthy</p>
      </div>

      <meta itemprop='headline' content='RuneScapes plane angle system'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/The_Flames.html'><span itemprop='name'>The_Flames</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-08-12T21:50:24Z'>
            <time itemprop='dateModified' datetime='2016-07-31T10:01:18Z' class='post-time'>
              July 31, 2016, 10:01am
            </time>
        <span itemprop='position'>#7</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote no-group" data-post="6" data-topic="293983">
<div class="title">
<div class="quote-controls"></div>
 frank_:</div>
<blockquote>
<p>not thread-worthy</p>
</blockquote>
</aside>
<p>I found it fairly interested to read.</p>
<p>Good work newbiehacker <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
      </div>

      <meta itemprop='headline' content='RuneScapes plane angle system'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/system.html'><span itemprop='name'>system</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-08-25T00:12:07Z'>
            <time itemprop='dateModified' datetime='2016-07-31T10:23:34Z' class='post-time'>
              July 31, 2016, 10:23am
            </time>
        <span itemprop='position'>#8</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote no-group quote-modified" data-post="1" data-topic="293983">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/newbiehacker/40/5_513041d5f7104045db30895d3b90af16.png" class="avatar"> newbiehacker:</div>
<blockquote>
<p>Jagex have been clever in their implementation.</p>
</blockquote>
</aside>
<p>No they haven’t, sin and cos lookup tables have been around for donkies years.<br>
So has fixed point arithmatic.<br>
The precission that is lost is based on scale within the model system, jagex use 16 bits and have to fit their drawing region into this, so the models only have a range of 128 units, which is at the low end of the scale. A 1x1 unit square will vanish when rotated at this scale, the 4 vertices will end up at same point within model space.</p>
<p>Their system was designed for 16 bit systems with no GFX accelerator and no FPU.<br>
It’s only real use today is for 3D on mobile technologies, but they missed the boat already. <img src="../../images/emoji/twitter/smileyae52.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"></p>
      </div>

      <meta itemprop='headline' content='RuneScapes plane angle system'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/runescapes-plane-angle-system/293983 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Aug 2019 09:33:06 GMT -->
</html>
