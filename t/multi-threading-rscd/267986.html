<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/multi-threading-rscd/267986 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Aug 2019 18:17:47 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Multi threading RSCD - Runescape - moparisthebest.com</title>
    <meta name="description" content="As we know, RSCA is the most popular server with around 250 players on at once, though it can&amp;#39;t fit much more due to it becoming unstable. 

Ive thought of various ways of multi threading RSCD, here&amp;#39;s an example of one o&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="267986.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Multi threading RSCD&#39;" href="267986.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://img22.imageshack.us/img22/4237/blueprints.png" />
<meta property="og:image" content="http://img22.imageshack.us/img22/4237/blueprints.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/multi-threading-rscd/267986" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/multi-threading-rscd/267986" />
<meta property="og:title" content="Multi threading RSCD" />
<meta name="twitter:title" content="Multi threading RSCD" />
<meta property="og:description" content="As we know, RSCA is the most popular server with around 250 players on at once, though it can’t fit much more due to it becoming unstable.  Ive thought of various ways of multi threading RSCD, here’s an example of one of my better ideas.    the 3 threads will pretty much have exactly what the current gameengine loop has now (except things like npc movement)  the other thread will have a loop, except it will only be accepting connections, and allocating the player to the next available thread, th..." />
<meta name="twitter:description" content="As we know, RSCA is the most popular server with around 250 players on at once, though it can’t fit much more due to it becoming unstable.  Ive thought of various ways of multi threading RSCD, here’s an example of one of my better ideas.    the 3 threads will pretty much have exactly what the current gameengine loop has now (except things like npc movement)  the other thread will have a loop, except it will only be accepting connections, and allocating the player to the next available thread, th..." />
<meta property="article:published_time" content="2009-03-17T13:41:33+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="267986.html">Multi threading RSCD</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/xEnt.html'><span itemprop='name'>xEnt</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-03-17T13:41:33Z'>
            <time itemprop='dateModified' datetime='2016-07-31T06:16:24Z' class='post-time'>
              July 31, 2016,  6:16am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>As we know, RSCA is the most popular server with around 250 players on at once, though it can’t fit much more due to it becoming unstable.</p>
<p>Ive thought of various ways of multi threading RSCD, here’s an example of one of my better ideas.</p>
<p><img src="http://img22.imageshack.us/img22/4237/blueprints.png" alt width="" height=""></p>
<p>the 3 threads will pretty much have exactly what the current gameengine loop has now (except things like npc movement)</p>
<p>the other thread will have a loop, except it will only be accepting connections, and allocating the player to the next available thread, this thread will also move npc’s and anything else that is not player specific.</p>
<p>The outcome is 3 threads handling delayed events, incoming and outgoing packets to 200 players each, or 100 or whatever the number you like. This should make good use of a quad core CPU.</p>
<p>Thoughts? cons? pros?</p>
      </div>

      <meta itemprop='headline' content='Multi threading RSCD'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Vrunk.html'><span itemprop='name'>Vrunk</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-03-17T14:41:22Z'>
            <time itemprop='dateModified' datetime='2016-07-31T06:16:26Z' class='post-time'>
              July 31, 2016,  6:16am
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Not sure exactly what you’re aiming for, but I thought of a simple improvement for the system with DelayedEvents:</p>
<p><img src="http://img8.imageshack.us/img8/52/ss20090317110057.png" alt width="" height=""></p>
<p>Change those two data structures to one data structure (<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/DelayQueue.html" data-bbcode="true" rel="nofollow noopener">DelayQueue</a>), and use drainTo(Collection)<br>
That will eliminate the need to loop through all the delayed events every game cycle (only the events whose time has expired will be removed+processed from the queue each cycle).</p>
      </div>

      <meta itemprop='headline' content='Multi threading RSCD'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/lothy.html'><span itemprop='name'>lothy</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-03-17T22:47:39Z'>
            <time itemprop='dateModified' datetime='2016-07-31T06:17:07Z' class='post-time'>
              July 31, 2016,  6:17am
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Imo, learn to use the Queue collection. Have a Queue (in particular, a concurrent thread-safe queue) that stores incoming packets, have a queue that stores DelayedEvent objects.</p>
<p>Then use some sort of thread pool structure (I’m sure that there’s one in the concurrency package), and have the threads operate on those queues as they have objects added to them.<br>
You shouldn’t explicitly assign tasks to threads.</p>
      </div>

      <meta itemprop='headline' content='Multi threading RSCD'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Vrunk.html'><span itemprop='name'>Vrunk</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-03-18T16:07:00Z'>
            <time itemprop='dateModified' datetime='2016-07-31T06:17:44Z' class='post-time'>
              July 31, 2016,  6:17am
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>i.e. an implementation of <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/BlockingQueue.html" data-bbcode="true" rel="nofollow noopener">BlockingQueue</a> for the two queues, and an implementation of <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/Executor.html" data-bbcode="true" rel="nofollow noopener">Executor</a> for the thread pool.</p>
      </div>

      <meta itemprop='headline' content='Multi threading RSCD'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/multi-threading-rscd/267986 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Aug 2019 18:17:48 GMT -->
</html>
