<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/help-with-php-mysql/236688 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 14:48:13 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Help with php mysql - General Programming - moparisthebest.com</title>
    <meta name="description" content="I am building a content management system for my website. It is not going to be released. It&amp;#39;s just so other administrators can modify links and content. But i&amp;#39;m having some problems with moving links up and down. They a&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="236688.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Help with php mysql&#39;" href="236688.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/help-with-php-mysql/236688" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/help-with-php-mysql/236688" />
<meta property="og:title" content="Help with php mysql" />
<meta name="twitter:title" content="Help with php mysql" />
<meta property="og:description" content="I am building a content management system for my website. It is not going to be released. It’s just so other administrators can modify links and content. But i’m having some problems with moving links up and down. They are displayed in their order by their ‘id’ field in the mysql database table.  Pretty much what I want to do is swap the id of the selected link with the one above it if your moving it up and the one below it if your moving it down.  I am using the get variable to set the id that ..." />
<meta name="twitter:description" content="I am building a content management system for my website. It is not going to be released. It’s just so other administrators can modify links and content. But i’m having some problems with moving links up and down. They are displayed in their order by their ‘id’ field in the mysql database table.  Pretty much what I want to do is swap the id of the selected link with the one above it if your moving it up and the one below it if your moving it down.  I am using the get variable to set the id that ..." />
<meta property="article:published_time" content="2008-10-14T21:32:26+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="236688.html">Help with php mysql</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/general-programming.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>General Programming</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Cald_Panda.html'><span itemprop='name'>Cald_Panda</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-10-14T21:32:26Z'>
            <time itemprop='dateModified' datetime='2016-07-31T02:20:03Z' class='post-time'>
              July 31, 2016,  2:20am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I am building a content management system for my website. It is not going to be released. It’s just so other administrators can modify links and content. But i’m having some problems with moving links up and down. They are displayed in their order by their ‘id’ field in the mysql database table.</p>
<p>Pretty much what I want to do is swap the id of the selected link with the one above it if your moving it up and the one below it if your moving it down.</p>
<p>I am using the get variable to set the id that needs to be moved up. Here is what I have so far:</p>
<pre><code class="lang-auto">if (isset($_GET['moveup'])) {
	$result = mysql_query("SELECT * FROM cpf_pages")or die(mysql_error());
	while($row = mysql_fetch_array($result)) {
		$moveup = $_GET['moveup'];
		$movedown = $_GET['moveup']--;
		mysql_query("UPDATE cpf_pages SET id = '-1' WHERE id = '".$moveup."'");
		mysql_query("UPDATE cpf_pages SET id = '-2' WHERE id = '".$movedown."'");
		mysql_query("UPDATE cpf_pages SET id = '".$moveup."' WHERE id = '-2'");
		mysql_query("UPDATE cpf_pages SET id = '".$movedown."' WHERE id = '-1'");
		header("Location: managepages.php");
	}
}</code></pre>
<p>The code is pretty much self explanatory, but if you are confused with something I would be glad to explain it.</p>
<p>The reason it doesn’t just swap the id’s is because it won’t swap them at the same time. Then the database thinks it will have 2 of the same id’s so it cancels out the operation. So what I tried to do was set them at -1 and -2 so it would free up the ideas then change them to the id’s I wanted in the first place. I hope you understand what i’m saying.</p>
<p>Any help would be appreciated, thanks.[br][br][size=1]Posted on: October 18, 2008, 08:04:05 am[/size][hr]3 days and no posts? Does no-one here know MySQL?</p>
      </div>

      <meta itemprop='headline' content='Help with php mysql'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/N00b1.html'><span itemprop='name'>N00b1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-10-18T18:35:51Z'>
            <time itemprop='dateModified' datetime='2016-07-31T02:25:38Z' class='post-time'>
              July 31, 2016,  2:25am
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>this is just a retarded way of doing it…</p>
<p>use a function…</p>
      </div>

      <meta itemprop='headline' content='Help with php mysql'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Cald_Panda.html'><span itemprop='name'>Cald_Panda</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-10-18T22:12:50Z'>
            <time itemprop='dateModified' datetime='2016-07-31T02:25:55Z' class='post-time'>
              July 31, 2016,  2:25am
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>can you elaborate on how I would do that sorry?</p>
      </div>

      <meta itemprop='headline' content='Help with php mysql'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/runescape3dude.html'><span itemprop='name'>runescape3dude</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-10-19T18:43:12Z'>
            <time itemprop='dateModified' datetime='2019-01-21T05:37:00Z' class='post-time'>
              January 21, 2019,  5:37am
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <pre><code class="lang-auto">moveup('23');
function moveup($moveup) {
	$result = mysql_query("SELECT * FROM cpf_pages")or die(mysql_error());
	while($row = mysql_fetch_array($result)) {
	$movedown = $moveup--;
		mysql_query("UPDATE cpf_pages SET id = '-1' WHERE id = '".$moveup."'");
		mysql_query("UPDATE cpf_pages SET id = '-2' WHERE id = '".$movedown."'");
		mysql_query("UPDATE cpf_pages SET id = '".$moveup."' WHERE id = '-2'");
		mysql_query("UPDATE cpf_pages SET id = '".$movedown."' WHERE id = '-1'");
		header("Location: managepages.php");
	}
}</code></pre>
<p>Something like that?</p>
      </div>

      <meta itemprop='headline' content='Help with php mysql'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Cald_Panda.html'><span itemprop='name'>Cald_Panda</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-10-20T01:52:09Z'>
            <time itemprop='dateModified' datetime='2016-07-31T02:27:55Z' class='post-time'>
              July 31, 2016,  2:27am
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>what is the benefit of using a function for this?</p>
<p>Even if I did. It doesn’t solve my problem with it not even working.</p>
      </div>

      <meta itemprop='headline' content='Help with php mysql'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Yummy_Cakes.html'><span itemprop='name'>Yummy_Cakes</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-10-20T01:54:57Z'>
            <time itemprop='dateModified' datetime='2016-07-31T02:27:55Z' class='post-time'>
              July 31, 2016,  2:27am
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“runescape3dude, post:4, topic:236688”][quote author=Cald Panda link=topic=312403.msg2495312#msg2495312 date=1224367970]<br>
can you elaborate on how I would do that sorry?<br>
[/quote]</p>
<pre><code class="lang-auto">moveup('23');
function moveup($moveup) {
	$result = mysql_query("SELECT * FROM cpf_pages")or die(mysql_error());
	while($row = mysql_fetch_array($result)) {
	$movedown = $moveup--;
		mysql_query("UPDATE cpf_pages SET id = '-1' WHERE id = '".$moveup."'");
		mysql_query("UPDATE cpf_pages SET id = '-2' WHERE id = '".$movedown."'");
		mysql_query("UPDATE cpf_pages SET id = '".$moveup."' WHERE id = '-2'");
		mysql_query("UPDATE cpf_pages SET id = '".$movedown."' WHERE id = '-1'");
		header("Location: managepages.php");
	}
}</code></pre>
<p>Something like that?[/quote]</p>
<p>i hope you realize moveup = movedown - 1</p>
      </div>

      <meta itemprop='headline' content='Help with php mysql'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/OnlyOneRule.html'><span itemprop='name'>OnlyOneRule</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-10-20T11:07:13Z'>
            <time itemprop='dateModified' datetime='2016-07-31T02:28:30Z' class='post-time'>
              July 31, 2016,  2:28am
            </time>
        <span itemprop='position'>#7</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Try this, should work.</p>
<p>[php]function moveup($moveup)<br>
{<br>
$moveUpQuery = mysql_query(“SELECT * FROM <code>cpf_pages</code> WHERE <code>id</code> = ‘$moveup’”);<br>
$moveUpArray = mysql_fetch_assoc($moveUpQuery);</p>
<pre><code>$totalRows = mysql_num_rows( mysql_query("SELECT * FROM `cpf_pages`") );

// Set the id to the max id +1 first, so there can't be any duplicated ids.
mysql_query("UPDATE `cpf_pages` SET `id` = '$totalRows'+1 WHERE `id` = '{$moveUpArray['id']}'");

// Update the row that will be moved down.
mysql_query("UPDATE `cpf_pages` SET `id` = '{$moveUpArray['id']}' WHERE `id` = '{$moveUpArray['id']}'-1");

// Finally update the row that will be moved up to its proper id.
mysql_query("UPDATE `cpf_pages` SET `id` = '{$moveUpArray['id']}'-1 WHERE `id` = '$totalRows'+1");

header("Location: managepages.php");
</code></pre>
<p>}[/php]</p>
      </div>

      <meta itemprop='headline' content='Help with php mysql'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/N00b1.html'><span itemprop='name'>N00b1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-10-21T21:10:44Z'>
            <time itemprop='dateModified' datetime='2016-07-31T02:31:15Z' class='post-time'>
              July 31, 2016,  2:31am
            </time>
        <span itemprop='position'>#8</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>anyway ive been away from a few days, OnlyOneRule has got the idea there, sorry i didnt post any code didnt have time to make any that nite</p>
      </div>

      <meta itemprop='headline' content='Help with php mysql'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Cald_Panda.html'><span itemprop='name'>Cald_Panda</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-10-22T07:15:10Z'>
            <time itemprop='dateModified' datetime='2016-07-31T02:32:02Z' class='post-time'>
              July 31, 2016,  2:32am
            </time>
        <span itemprop='position'>#9</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>it’s okay. I will try it out tonight.</p>
      </div>

      <meta itemprop='headline' content='Help with php mysql'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/OnlyOneRule.html'><span itemprop='name'>OnlyOneRule</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-10-23T14:08:19Z'>
            <time itemprop='dateModified' datetime='2016-07-31T02:33:33Z' class='post-time'>
              July 31, 2016,  2:33am
            </time>
        <span itemprop='position'>#10</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I just noticed something in that code I made, you would probobally be better of making a new query to order by id desc limit 1 and then adding 1, instead of counting the number of rows.</p>
      </div>

      <meta itemprop='headline' content='Help with php mysql'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Cald_Panda.html'><span itemprop='name'>Cald_Panda</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-10-24T08:12:46Z'>
            <time itemprop='dateModified' datetime='2016-07-31T02:35:11Z' class='post-time'>
              July 31, 2016,  2:35am
            </time>
        <span itemprop='position'>#11</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>i’m not the best at sql could you help me with that. What do you mean limit 1 and then adding 1?</p>
      </div>

      <meta itemprop='headline' content='Help with php mysql'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/OnlyOneRule.html'><span itemprop='name'>OnlyOneRule</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-10-24T11:14:34Z'>
            <time itemprop='dateModified' datetime='2016-07-31T02:35:16Z' class='post-time'>
              July 31, 2016,  2:35am
            </time>
        <span itemprop='position'>#12</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[php]function moveup($moveup)<br>
{<br>
$moveUpQuery = mysql_query(“SELECT * FROM <code>cpf_pages</code> WHERE <code>id</code> = ‘$moveup’”);<br>
$moveUpArray = mysql_fetch_assoc($moveUpQuery);</p>
<pre><code>// There is still the possability of there being a row with the id 4, even if there are only 3 rows.
// This should prevent that.
// Insetad of counting the total rows like this $totalRows = mysql_num_rows( mysql_query("SELECT * FROM `cpf_pages`") )
// Order by the highest value, and then add 1 so there can;t be a duplicate id value.
$biggestIdQuery = mysql_query("SELECT * FROM `cpf_pages` ORDER BY `id` DESC LIMIT 1");
$biggestIdArray = mysql_fetch_assoc( $biggestIdQuery );


// Set the id to the max id +1 first, so there can't be any duplicated ids.
mysql_query("UPDATE `cpf_pages` SET `id` = '{$biggestIdArray['id']}'+1 WHERE `id` = '{$moveUpArray['id']}'");

// Update the row that will be moved down.
mysql_query("UPDATE `cpf_pages` SET `id` = '{$moveUpArray['id']}' WHERE `id` = '{$moveUpArray['id']}'-1");

// Finally update the row that will be moved up to its proper id.
mysql_query("UPDATE `cpf_pages` SET `id` = '{$moveUpArray['id']}'-1 WHERE `id` = '{$biggestIdArray['id']}'+1");

header("Location: managepages.php");
</code></pre>
<p>}[/php]</p>
      </div>

      <meta itemprop='headline' content='Help with php mysql'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Cald_Panda.html'><span itemprop='name'>Cald_Panda</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-10-24T22:13:18Z'>
            <time itemprop='dateModified' datetime='2016-07-31T02:36:17Z' class='post-time'>
              July 31, 2016,  2:36am
            </time>
        <span itemprop='position'>#13</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Thank you for the help. I appreciate it heaps.</p>
<p>Edit: What is more efficient about the second code then the first?</p>
      </div>

      <meta itemprop='headline' content='Help with php mysql'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/OnlyOneRule.html'><span itemprop='name'>OnlyOneRule</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-10-28T12:54:25Z'>
            <time itemprop='dateModified' datetime='2016-07-31T02:40:52Z' class='post-time'>
              July 31, 2016,  2:40am
            </time>
        <span itemprop='position'>#14</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Right say you orgionally had 7 rows, then the highets id would be 7.<br>
Now say you want to delete id 3. the highest id is still going ot be 7. But there will only be 6 rows.<br>
So the first code was adding 1 to the ammount of rows. Meaning there would be a duplicate of 7 when you add 1. This should return an error.<br>
Thats why the second one orders it by the highest id and then adds 1.</p>
      </div>

      <meta itemprop='headline' content='Help with php mysql'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/help-with-php-mysql/236688 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 14:48:15 GMT -->
</html>
