<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/pi-additem-error-and-a-sidebar-question/477981 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 10:08:11 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>[PI] addItem error, and a sidebar question - Runescape - moparisthebest.com</title>
    <meta name="description" content="Quite simple, I&amp;#39;m working on adding a dialogue that gives you 2 items when you click it. The error is, until you quit the dialogue, it keeps giving you the item, once the inventory is full, it shows the error &amp;quot;Not enough&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="477981.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;[PI] addItem error, and a sidebar question&#39;" href="477981.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/pi-additem-error-and-a-sidebar-question/477981" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/pi-additem-error-and-a-sidebar-question/477981" />
<meta property="og:title" content="[PI] addItem error, and a sidebar question" />
<meta name="twitter:title" content="[PI] addItem error, and a sidebar question" />
<meta property="og:description" content="Quite simple, I’m working on adding a dialogue that gives you 2 items when you click it.  The error is, until you quit the dialogue, it keeps giving you the item, once the inventory is full, it shows the error “Not enough space in inventory” and continues to try and add them.  Now, I’m certain the error isn’t in the code in the dialogues, but in the actual addItem(); method, so I’ve posted it below:  [code=java]	public static boolean addItem2(final Client c, final int item, int amount) {  try {  ..." />
<meta name="twitter:description" content="Quite simple, I’m working on adding a dialogue that gives you 2 items when you click it.  The error is, until you quit the dialogue, it keeps giving you the item, once the inventory is full, it shows the error “Not enough space in inventory” and continues to try and add them.  Now, I’m certain the error isn’t in the code in the dialogues, but in the actual addItem(); method, so I’ve posted it below:  [code=java]	public static boolean addItem2(final Client c, final int item, int amount) {  try {  ..." />
<meta property="article:published_time" content="2013-01-09T12:11:09+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="477981.html">[PI] addItem error, and a sidebar question</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/sk8rdude461.html'><span itemprop='name'>sk8rdude461</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2013-01-09T12:11:09Z'>
            <time itemprop='dateModified' datetime='2016-08-04T02:06:47Z' class='post-time'>
              August 4, 2016,  2:06am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Quite simple, I’m working on adding a dialogue that gives you 2 items when you click it.<br>
The error is, until you quit the dialogue, it keeps giving you the item, once the inventory is full, it shows the error “Not enough space in inventory” and continues to try and add them.<br>
Now, I’m certain the error isn’t in the code in the dialogues, but in the actual addItem(); method, so I’ve posted it below:</p>
<p>[code=java]	public static boolean addItem2(final Client c, final int item, int amount) {<br>
try {<br>
if (item == -1)<br>
return false;<br>
if (!itemStackable[item] || amount &lt; 1) {<br>
amount = 1;<br>
}</p>
<pre><code>		if ((c.getInventory().freeSlots() &gt;= amount &amp;&amp; !itemStackable[item])
				|| c.getInventory().freeSlots() &gt; 0) {
			for (int i = 0; i &lt; c.playerItems.length; i++) {
				if (c.playerItems[i] == (item + 1) &amp;&amp; itemStackable[item]
						&amp;&amp; c.playerItems[i] &gt; 0) {
					c.playerItems[i] = (short)(item + 1);
					if ((c.playerItemsN[i] + amount) &lt; Constants.MAX_ITEM_AMOUNT
							&amp;&amp; (c.playerItemsN[i] + amount) &gt; -1) {
						c.playerItemsN[i] += amount;
					} else {
						c.playerItemsN[i] = (short)Constants.MAX_ITEM_AMOUNT;
					}
					c.outStream.createFrameVarSizeWord(34);
					c.outStream.writeWord(3214);
					c.outStream.writeByte(i);
					c.outStream.writeWord(c.playerItems[i]);
					if (c.playerItemsN[i] &gt; 254) {
						c.outStream.writeByte(255);
						c.outStream.writeDWord(c.playerItemsN[i]);
					} else {
						c.outStream.writeByte(c.playerItemsN[i]);
					}
					c.outStream.endFrameVarSizeWord();
					i = 30;
					return true;
				}
			}
			for (int i = 0; i &lt; c.playerItems.length; i++) {
				if (c.playerItems[i] &lt;= 0) {
					c.playerItems[i] = (short)(item + 1);
					if (amount &lt; Constants.MAX_ITEM_AMOUNT &amp;&amp; amount &gt; -1) {
						c.playerItemsN[i] = (short)amount;
					} else {
						c.playerItemsN[i] = (short)Constants.MAX_ITEM_AMOUNT;
					}
					c.outStream.createFrameVarSizeWord(34);
					c.outStream.writeWord(3214);
					c.outStream.writeByte(i);
					c.outStream.writeWord(c.playerItems[i]);
					if (c.playerItemsN[i] &gt; 254) {
						c.outStream.writeByte(255);
						c.outStream.writeDWord(c.playerItemsN[i]);
					} else {
						c.outStream.writeByte(c.playerItemsN[i]);
					}
					c.outStream.endFrameVarSizeWord();
					i = 30;
					return true;
				}
			}
			return false;
		} else {
			ItemHandler.addItem(item, c.absX, c.absY, amount, c.playerId,
					false);
			return false;
		}
	} catch (final Exception E) {
		return false;
	}
}[/code]
</code></pre>
<p>Now, onto my question. I’ve added perfect flashing icons (yeah, you heard that right) on the clients side. Meaning it flashed, you click it, and it doesn’t flash anymore. But, I want to know how to add dialogues, and other stuff to them. So I could send a message like “Look at your quest tab to see the new highlighed quest <em>It’s flashing</em>”. Then once you click it it would say something like “Quest X has been added, feel free to look at it”.</p>
      </div>

      <meta itemprop='headline' content='[PI] addItem error, and a sidebar question'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/pi-additem-error-and-a-sidebar-question/477981 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 10:08:12 GMT -->
</html>
