<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/how-to-implement-javascript-scripts-for-your-server/371306 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Aug 2019 10:35:45 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>How to implement JavaScript scripts for your server - Runescape - moparisthebest.com</title>
    <meta name="description" content="I. AM. NINJASTYLZ. [image] 

Purpose: To improve server efficiency Difficulty: 6/10 Assumed Knowledge: Reading+Understanding/Comprehending Classes Modified: Script.java, ExampleScript.java, Test.js Tested On(if it applie&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="371306.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;How to implement JavaScript scripts for your server&#39;" href="371306.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://img258.imageshack.us/img258/7388/ninjab.png" />
<meta property="og:image" content="http://img258.imageshack.us/img258/7388/ninjab.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/how-to-implement-javascript-scripts-for-your-server/371306" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/how-to-implement-javascript-scripts-for-your-server/371306" />
<meta property="og:title" content="How to implement JavaScript scripts for your server" />
<meta name="twitter:title" content="How to implement JavaScript scripts for your server" />
<meta property="og:description" content="I. AM. NINJASTYLZ.    Purpose: To improve server efficiency  Difficulty: 6/10  Assumed Knowledge: Reading+Understanding/Comprehending  Classes Modified: Script.java, ExampleScript.java, Test.js  Tested On(if it applies): Standalone  First I’ll give main Pros+Cons of loading scripts on the spot compared to cacheing them:  Loading on-queue:  Pros: Removes need to restart server when scripts have been edited, once saved will take effect immidately, consumes less RAM/Memory.  Cons: Will increase CPU..." />
<meta name="twitter:description" content="I. AM. NINJASTYLZ.    Purpose: To improve server efficiency  Difficulty: 6/10  Assumed Knowledge: Reading+Understanding/Comprehending  Classes Modified: Script.java, ExampleScript.java, Test.js  Tested On(if it applies): Standalone  First I’ll give main Pros+Cons of loading scripts on the spot compared to cacheing them:  Loading on-queue:  Pros: Removes need to restart server when scripts have been edited, once saved will take effect immidately, consumes less RAM/Memory.  Cons: Will increase CPU..." />
<meta property="article:published_time" content="2010-12-01T21:19:00+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="371306.html">How to implement JavaScript scripts for your server</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Stupid_Ninja.html'><span itemprop='name'>Stupid_Ninja</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-12-01T21:19:00Z'>
            <time itemprop='dateModified' datetime='2016-08-01T01:18:01Z' class='post-time'>
              August 1, 2016,  1:18am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I. AM. NINJASTYLZ.<br>
<img src="http://img258.imageshack.us/img258/7388/ninjab.png" alt width="" height=""></p>
<p><span class="bbcode-b">Purpose: To improve server efficiency<br>
Difficulty: 6/10<br>
Assumed Knowledge: Reading+Understanding/Comprehending<br>
Classes Modified: Script.java, ExampleScript.java, Test.js<br>
Tested On(if it applies): Standalone</span></p>
<p>First I’ll give main Pros+Cons of loading scripts on the spot compared to cacheing them:</p>
<p>Loading on-queue:<br>
Pros: Removes need to restart server when scripts have been edited, once saved will take effect immidately, consumes less RAM/Memory.<br>
Cons: Will increase CPU usage of server(will vary depending on scripts+demand), actions executed within scripts will be delayed(again varying depending on scripts+demand)</p>
<p>Cacheing on startup:<br>
Pros: CPU usage of server will be minorly effected by scripts, actions executed within scripts will be faster than loading on-queue.<br>
Cons: Once a script is edited requires server restart to take effect(Though this can be avoided by making a command to recache scripts, or even a specific script), increases RAM/Memory consumption.</p>
<p>Seeing as some people may have difficulties with this tutorial here is the download link up the top of everything setup for you to use as a guideline:<br>
<a href="http://uppit.com/wh31zc5alsg8/JS_Test.rar" data-bbcode="true" rel="nofollow noopener">UppIT - Free File hosting - JS Test.rar</a></p>
<p>So first add my Script.java file I created: [COLOR=red]MAKE SURE YOU CHANGE PACKAGE ACCORDING TO SAVE LOCATION!!![/COLOR]</p>
<p>[code]package MAKESURETOCHANGEPACKAGE;</p>
<p>import java.io.File;<br>
import java.io.FileNotFoundException;<br>
import java.io.FileReader;<br>
import javax.script.Invocable;<br>
import javax.script.ScriptEngine;<br>
import javax.script.ScriptEngineManager;</p>
<p>public class Script {</p>
<pre><code>/*
 * Script.java - Created for implementation of JavaScripts
 * Created by Ninjastylz of r-s/Stupid Ninja of Mopar
 */

private static ScriptEngine engine;

public static Invocable getInvocable(String path) {
	try {
		engine = null;
		File sf = new File(path);
		if (!sf.exists()) {
			throw new FileNotFoundException(path);
		}
		engine = new ScriptEngineManager().getEngineByName("JavaScript");
		engine.eval(new FileReader(path));
		return (Invocable) engine;
	} catch (Exception e) {
		System.out.println("Failed to invoke script: "+path);
		e.printStackTrace();
		return null;
	}
}
</code></pre>
<p>}[/code]</p>
<p>That class contains my method for getting an ‘Invocable’ version of a JavaScript file. For those of you who don’t know that is just a type of object that can be applied to any interface class(explained next) that will overwrite methods in that interface(Explanation of how we’re using it).</p>
<p>Now to make an interface class for a specific type of script, this file is very small and only contains names of methods, which will be overwritten in the JavaScript file in ‘functions’.<br>
[COLOR=red]NOTE: Instead of public ‘class’ xxxx at the beginning of file make sure to put public ‘interface’ xxxx!!![/COLOR]<br>
An example of an interface script(ExampleScript.java): [COLOR=red]MAKE SURE YOU CHANGE PACKAGE ACCORDING TO SAVE LOCATION!!![/COLOR]</p>
<p>[code]package MAKESURETOCHANGEPACKAGE;</p>
<p>public interface ExampleScript {</p>
<pre><code>public void doTest();
</code></pre>
<p>}[/code]</p>
<p>And it’s that simple!</p>
<p>Now to create a simple JavaScript file that can be applied to our ExampleScript interface. Make a new folder called “ExampleScript” in the same directory as the batch/etc. file that runs your server.<br>
Once made go inside and save this file in there(Test.js, if you have trouble saving read below):</p>
<p><code>function doTest () {
	for (var i = 0; i &lt; 10; i++) {
		println("JavaScript test: " + i);
	}
}</code></p>
<p>[COLOR=red]DO THE FOLLOWING STEP ONLY IF YOU HAVE TROUBLE SAVING A .js FILE(Windows)[/COLOR]<br>
Most of you probably wont have saved a .js file on your computer before with notepad/other text editor. And so you’ll probably find yourself with a file called ‘Test.js’ that is still a text file. To fix this first take the .js off of the file name. Secondly save this batch file with any name in the same folder as the script and run it once, then delete. Once it has been run it will have renamed your text file to a .js file:</p>
<pre><code class="lang-auto">ren Test.txt Text.js</code></pre>
<p>So now you’ve created all the new files you need to place the following code somewhere in you’re server that you can access while its running(or call it when it’s starting up).<br>
[COLOR=red]NOTE: Make sure ExampleScript/Script classes are imported!<br>
NOTE2: Make sure ‘javax.script.Invocable’[/COLOR]<br>
[COLOR=blue]SIDENOTE: This is implementing the ‘load-on-queue’ technique[/COLOR]</p>
<p><code>	ExampleScript ex;
	Invocable tmp = Script.getInvocable("ExampleScript/Test.js");
	if (tmp != null) {
		ex = tmp.getInterface(ExampleScript.class);
		ex.doTest();
	} else {
		System.out.println("Failed to load+invoke test script!");
	}</code></p>
<p>Now save+compile+run and you should get something like this:<br>
<img src="http://img17.imageshack.us/img17/4342/screenshotcq.png" alt width="" height=""></p>
<p>Hopefully you’ve learn’t something from this tutorial.<br>
Unfortunately though this is all I’m going to be teaching in this tutorial</p>
      </div>

      <meta itemprop='headline' content='How to implement JavaScript scripts for your server'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/system.html'><span itemprop='name'>system</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-12-01T21:28:56Z'>
            <time itemprop='dateModified' datetime='2016-08-01T01:18:02Z' class='post-time'>
              August 1, 2016,  1:18am
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Point is.</p>
      </div>

      <meta itemprop='headline' content='How to implement JavaScript scripts for your server'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/doom_j.html'><span itemprop='name'>doom_j</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-12-01T21:55:30Z'>
            <time itemprop='dateModified' datetime='2016-08-01T01:18:03Z' class='post-time'>
              August 1, 2016,  1:18am
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote no-group" data-post="2" data-topic="371306">
<div class="title">
<div class="quote-controls"></div>
 listenir:</div>
<blockquote>
<p>Point is.</p>
</blockquote>
</aside>
<p>It implements a scripting language to your server, how can you get the point?..</p>
      </div>

      <meta itemprop='headline' content='How to implement JavaScript scripts for your server'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/teufel.html'><span itemprop='name'>teufel</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-12-02T00:57:47Z'>
            <time itemprop='dateModified' datetime='2016-08-01T01:18:18Z' class='post-time'>
              August 1, 2016,  1:18am
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Nice, might use on next project.</p>
      </div>

      <meta itemprop='headline' content='How to implement JavaScript scripts for your server'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/how-to-implement-javascript-scripts-for-your-server/371306 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Aug 2019 10:35:46 GMT -->
</html>
