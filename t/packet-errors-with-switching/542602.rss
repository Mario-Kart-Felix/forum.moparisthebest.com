<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Packet errors with switching?</title>
    <link>https://forum.moparisthebest.com/t/packet-errors-with-switching/542602</link>
    <description>I&#39;m sure everyone knows one of the solutions to better switching, by prioritising the wear item packet over others, but when I seem to do it, on some occasions it seems to disconnect me from the game and I can&#39;t figure out why this is happening or the logic behind it.

Here&#39;s the error it gives me
[code=java]
Error: ohokay Too many players: j: 55, playerCount: 1
java.lang.RuntimeException: eek
        at lIIIIIlll.IlllllIII.IIIlIllIl(Unknown Source) //method134 or something to do with player updating
        at lIIIIIlll.IlllllIII.lIIIIIlll(Unknown Source)
        at lIIIIIlll.IlllllIII.IIlIIlIlI(Unknown Source)
        at lIIIIIlll.IlllllIII.lIIIIIlll(Unknown Source)
        at lIIIIIlll.lIIlllIIl.run(Unknown Source)
        at lIIIIIlll.IlllllIII.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source)
Error: T2 - 81,174,126 - 79,3099,3530 - -94,111,-1,-128,1,0,0,81,1,-40,8,0,1,0,0
,0,0,-61,1,9,-1,44,76,76,-89,27,-71,24,66,43,55,55,-86,0,39,-52,0,31,38,29,8,0,1
,1,2,5,2,3,40,3,
[/code]

Here&#39;s the code that handles the packet

[code=java]
			if (packet.getId() == 41) {
				plr.wearId = packet.readUnsignedWord();
				plr.wearSlot = packet.readUnsignedWordA();
				plr.interfaceId = packet.readUnsignedWordA();
				plr.getItems().wearItem(plr.wearId, plr.wearSlot);
				return;
			}
[/code]

It&#39;s definitely something to do with this because the dcing only occurs when this code is active.

[code=java]
   private void method134(Stream stream) {
        int j = stream.readBits(8);
        if (j &lt; playerCount) {
            for (int k = j; k &lt; playerCount; k++) {
                anIntArray840[anInt839++] = playerIndices[k];
            }

        }
        if (j &gt; playerCount) {
            SignLink.reporterror(myUsername + &quot; Too many players: j: &quot; + j + &quot;, playerCount: &quot; + playerCount);
            throw new RuntimeException(&quot;eek&quot;);
        }
        playerCount = 0;
        for (int l = 0; l &lt; j; l++) {
            int i1 = playerIndices[l];
            Player player = playerArray[i1];
            int j1 = stream.readBits(1);
            if (j1 == 0) {
                playerIndices[playerCount++] = i1;
                player.anInt1537 = loopCycle;
            } else {
                int k1 = stream.readBits(2);
                if (k1 == 0) {
                    playerIndices[playerCount++] = i1;
                    player.anInt1537 = loopCycle;
                    anIntArray894[anInt893++] = i1;
                } else if (k1 == 1) {
                    playerIndices[playerCount++] = i1;
                    player.anInt1537 = loopCycle;
                    int l1 = stream.readBits(3);
                    player.moveInDir(false, l1);
                    int j2 = stream.readBits(1);
                    if (j2 == 1) {
                        anIntArray894[anInt893++] = i1;
                    }
                } else if (k1 == 2) {
                    playerIndices[playerCount++] = i1;
                    player.anInt1537 = loopCycle;
                    int i2 = stream.readBits(3);
                    player.moveInDir(true, i2);
                    int k2 = stream.readBits(3);
                    player.moveInDir(true, k2);
                    int l2 = stream.readBits(1);
                    if (l2 == 1) {
                        anIntArray894[anInt893++] = i1;
                    }
                } else if (k1 == 3) {
                    anIntArray840[anInt839++] = i1;
                }
            }
        }
    }
[/code]

It&#39;s a rare occurance that I can&#39;t seem to replicate, but happens when switching items, switching to spec etc...

I was thinking it was because of perhaps it&#39;s reading the wrong packets or wrong data from somewhere but I&#39;ve checked packet 41 and it seems to be sending the correct data from the client. 

Any ideas what might be the cause?</description>
    
    <lastBuildDate>Mon, 05 May 2014 14:05:13 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/packet-errors-with-switching/542602.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Packet errors with switching?</title>
        <dc:creator><![CDATA[@ohokay ohokay]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ohokay">@ohokay</a> wrote:</p>
          <blockquote>
              <p>[quote=“matzie, post:16, topic:542602”]Look for the code in your server that handles packet 81. Your packet 41 is the equip packet.<br>
The only thing i could guess is your PacketHandler (for Writing to the stream) is not synchronized between threads in your server and is having multiple ones written at the same time.[/quote]</p>
<pre><code class="lang-auto">		if (didTeleport) {
			str.createPacketReservedWord(81);
			str.bitAccess();
			str.writeBits(1, 1);
			str.writeBits(2, 3);
			str.writeBits(2, heightLevel);
			str.writeBits(1, 1);
			str.writeBits(1, (updateRequired) ? 1 : 0);
			str.writeBits(7, currentY);
			str.writeBits(7, currentX);
			return;
		}</code></pre>
<p>Player updating I’m guessing.</p>
<p>The last point would probably be a better explanation. Writing the packet 41 as well as other packets at the same time because they’re not in a queue any more. I’ll give it a shot</p>
<p>Edit: Even after synchronising the packet execution again for the new code it still throws the same error from time to time.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/packet-errors-with-switching/542602/17">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/packet-errors-with-switching/542602/17</link>
        <pubDate>Mon, 05 May 2014 14:05:13 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-542602-17</guid>
        <source url="https://forum.moparisthebest.com/t/packet-errors-with-switching/542602.rss">Packet errors with switching?</source>
      </item>
      <item>
        <title>Packet errors with switching?</title>
        <dc:creator><![CDATA[@matzie matzie]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/matzie">@matzie</a> wrote:</p>
          <blockquote>
              <p>Look for the code in your server that handles packet 81. Your packet 41 is the equip packet.<br>
The only thing i could guess is your PacketHandler (for Writing to the stream) is not synchronized between threads in your server and is having multiple ones written at the same time.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/packet-errors-with-switching/542602/16">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/packet-errors-with-switching/542602/16</link>
        <pubDate>Sat, 03 May 2014 17:45:51 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-542602-16</guid>
        <source url="https://forum.moparisthebest.com/t/packet-errors-with-switching/542602.rss">Packet errors with switching?</source>
      </item>
      <item>
        <title>Packet errors with switching?</title>
        <dc:creator><![CDATA[@ohokay ohokay]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ohokay">@ohokay</a> wrote:</p>
          <blockquote>
              <p>[quote=“matzie, post:14, topic:542602”][quote author=ohokay link=topic=661475.msg4421411#msg4421411 date=1398644078]<br>
I’m sure everyone knows one of the solutions to better switching, by prioritising the wear item packet over others, but when I seem to do it, on some occasions it seems to disconnect me from the game and I can’t figure out why this is happening or the logic behind it.</p>
<p>Here’s the error it gives me</p>
<pre><code class="lang-auto">Error: ohokay Too many players: j: 55, playerCount: 1
java.lang.RuntimeException: eek
        at lIIIIIlll.IlllllIII.IIIlIllIl(Unknown Source) //method134 or something to do with player updating
        at lIIIIIlll.IlllllIII.lIIIIIlll(Unknown Source)
        at lIIIIIlll.IlllllIII.IIlIIlIlI(Unknown Source)
        at lIIIIIlll.IlllllIII.lIIIIIlll(Unknown Source)
        at lIIIIIlll.lIIlllIIl.run(Unknown Source)
        at lIIIIIlll.IlllllIII.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source)
Error: T2 - 81,174,126 - 79,3099,3530 - -94,111,-1,-128,1,0,0,81,1,-40,8,0,1,0,0
,0,0,-61,1,9,-1,44,76,76,-89,27,-71,24,66,43,55,55,-86,0,39,-52,0,31,38,29,8,0,1
,1,2,5,2,3,40,3,</code></pre>
<p>Here’s the code that handles the packet</p>
<pre><code class="lang-auto">			if (packet.getId() == 41) {
				plr.wearId = packet.readUnsignedWord();
				plr.wearSlot = packet.readUnsignedWordA();
				plr.interfaceId = packet.readUnsignedWordA();
				plr.getItems().wearItem(plr.wearId, plr.wearSlot);
				return;
			}</code></pre>
<p>It’s definitely something to do with this because the dcing only occurs when this code is active.</p>
<pre><code class="lang-auto">   private void method134(Stream stream) {
        int j = stream.readBits(8);
        if (j &lt; playerCount) {
            for (int k = j; k &lt; playerCount; k++) {
                anIntArray840[anInt839++] = playerIndices[k];
            }

        }
        if (j &gt; playerCount) {
            SignLink.reporterror(myUsername + " Too many players: j: " + j + ", playerCount: " + playerCount);
            throw new RuntimeException("eek");
        }
        playerCount = 0;
        for (int l = 0; l &lt; j; l++) {
            int i1 = playerIndices[l];
            Player player = playerArray[i1];
            int j1 = stream.readBits(1);
            if (j1 == 0) {
                playerIndices[playerCount++] = i1;
                player.anInt1537 = loopCycle;
            } else {
                int k1 = stream.readBits(2);
                if (k1 == 0) {
                    playerIndices[playerCount++] = i1;
                    player.anInt1537 = loopCycle;
                    anIntArray894[anInt893++] = i1;
                } else if (k1 == 1) {
                    playerIndices[playerCount++] = i1;
                    player.anInt1537 = loopCycle;
                    int l1 = stream.readBits(3);
                    player.moveInDir(false, l1);
                    int j2 = stream.readBits(1);
                    if (j2 == 1) {
                        anIntArray894[anInt893++] = i1;
                    }
                } else if (k1 == 2) {
                    playerIndices[playerCount++] = i1;
                    player.anInt1537 = loopCycle;
                    int i2 = stream.readBits(3);
                    player.moveInDir(true, i2);
                    int k2 = stream.readBits(3);
                    player.moveInDir(true, k2);
                    int l2 = stream.readBits(1);
                    if (l2 == 1) {
                        anIntArray894[anInt893++] = i1;
                    }
                } else if (k1 == 3) {
                    anIntArray840[anInt839++] = i1;
                }
            }
        }
    }</code></pre>
<p>It’s a rare occurance that I can’t seem to replicate, but happens when switching items, switching to spec etc…</p>
<p>I was thinking it was because of perhaps it’s reading the wrong packets or wrong data from somewhere but I’ve checked packet 41 and it seems to be sending the correct data from the client.</p>
<p>Any ideas what might be the cause?<br>
[/quote]</p>
<p>[quote]Error: T2 - 81,174,126 - 79,3099,3530 - -94,111,-1,-128,1,0,0,81,1,-40,8,0,1,0,0<br>
,0,0,-61,1,9,-1,44,76,76,-89,27,-71,24,66,43,55,55,-86,0,39,-52,0,31,38,29,8,0,1<br>
,1,2,5,2,3,40,3,[/quote]<br>
That is the packet id read in when it threw the exception.<br>
you keep saying that packet 41 is the one you prioritized… See where the conflict is now?<br>
41 != 81<br>
I don’t know if you understand the error people are telling you.[/quote]</p>
<p>I can see that lol. That brings me to my actual question. Why is this happening?</p>
<p>You can see from the code I have added like 4 lines? Why does that throw the error and in other bases it doesn’t</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/packet-errors-with-switching/542602/15">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/packet-errors-with-switching/542602/15</link>
        <pubDate>Sat, 03 May 2014 17:30:09 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-542602-15</guid>
        <source url="https://forum.moparisthebest.com/t/packet-errors-with-switching/542602.rss">Packet errors with switching?</source>
      </item>
      <item>
        <title>Packet errors with switching?</title>
        <dc:creator><![CDATA[@matzie matzie]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/matzie">@matzie</a> wrote:</p>
          <blockquote>
              <p>[quote=“ohokay, post:1, topic:542602”]I’m sure everyone knows one of the solutions to better switching, by prioritising the wear item packet over others, but when I seem to do it, on some occasions it seems to disconnect me from the game and I can’t figure out why this is happening or the logic behind it.</p>
<p>Here’s the error it gives me</p>
<pre><code class="lang-auto">Error: ohokay Too many players: j: 55, playerCount: 1
java.lang.RuntimeException: eek
        at lIIIIIlll.IlllllIII.IIIlIllIl(Unknown Source) //method134 or something to do with player updating
        at lIIIIIlll.IlllllIII.lIIIIIlll(Unknown Source)
        at lIIIIIlll.IlllllIII.IIlIIlIlI(Unknown Source)
        at lIIIIIlll.IlllllIII.lIIIIIlll(Unknown Source)
        at lIIIIIlll.lIIlllIIl.run(Unknown Source)
        at lIIIIIlll.IlllllIII.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source)
Error: T2 - 81,174,126 - 79,3099,3530 - -94,111,-1,-128,1,0,0,81,1,-40,8,0,1,0,0
,0,0,-61,1,9,-1,44,76,76,-89,27,-71,24,66,43,55,55,-86,0,39,-52,0,31,38,29,8,0,1
,1,2,5,2,3,40,3,</code></pre>
<p>Here’s the code that handles the packet</p>
<pre><code class="lang-auto">			if (packet.getId() == 41) {
				plr.wearId = packet.readUnsignedWord();
				plr.wearSlot = packet.readUnsignedWordA();
				plr.interfaceId = packet.readUnsignedWordA();
				plr.getItems().wearItem(plr.wearId, plr.wearSlot);
				return;
			}</code></pre>
<p>It’s definitely something to do with this because the dcing only occurs when this code is active.</p>
<pre><code class="lang-auto">   private void method134(Stream stream) {
        int j = stream.readBits(8);
        if (j &lt; playerCount) {
            for (int k = j; k &lt; playerCount; k++) {
                anIntArray840[anInt839++] = playerIndices[k];
            }

        }
        if (j &gt; playerCount) {
            SignLink.reporterror(myUsername + " Too many players: j: " + j + ", playerCount: " + playerCount);
            throw new RuntimeException("eek");
        }
        playerCount = 0;
        for (int l = 0; l &lt; j; l++) {
            int i1 = playerIndices[l];
            Player player = playerArray[i1];
            int j1 = stream.readBits(1);
            if (j1 == 0) {
                playerIndices[playerCount++] = i1;
                player.anInt1537 = loopCycle;
            } else {
                int k1 = stream.readBits(2);
                if (k1 == 0) {
                    playerIndices[playerCount++] = i1;
                    player.anInt1537 = loopCycle;
                    anIntArray894[anInt893++] = i1;
                } else if (k1 == 1) {
                    playerIndices[playerCount++] = i1;
                    player.anInt1537 = loopCycle;
                    int l1 = stream.readBits(3);
                    player.moveInDir(false, l1);
                    int j2 = stream.readBits(1);
                    if (j2 == 1) {
                        anIntArray894[anInt893++] = i1;
                    }
                } else if (k1 == 2) {
                    playerIndices[playerCount++] = i1;
                    player.anInt1537 = loopCycle;
                    int i2 = stream.readBits(3);
                    player.moveInDir(true, i2);
                    int k2 = stream.readBits(3);
                    player.moveInDir(true, k2);
                    int l2 = stream.readBits(1);
                    if (l2 == 1) {
                        anIntArray894[anInt893++] = i1;
                    }
                } else if (k1 == 3) {
                    anIntArray840[anInt839++] = i1;
                }
            }
        }
    }</code></pre>
<p>It’s a rare occurance that I can’t seem to replicate, but happens when switching items, switching to spec etc…</p>
<p>I was thinking it was because of perhaps it’s reading the wrong packets or wrong data from somewhere but I’ve checked packet 41 and it seems to be sending the correct data from the client.</p>
<p>Any ideas what might be the cause?[/quote]</p>
<blockquote>Error: T2 - 81,174,126 - 79,3099,3530 - -94,111,-1,-128,1,0,0,81,1,-40,8,0,1,0,0
,0,0,-61,1,9,-1,44,76,76,-89,27,-71,24,66,43,55,55,-86,0,39,-52,0,31,38,29,8,0,1
,1,2,5,2,3,40,3,</blockquote>
That is the packet id read in when it threw the exception.
you keep saying that packet 41 is the one you prioritized... See where the conflict is now?
41 != 81
I don't know if you understand the error people are telling you.
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/packet-errors-with-switching/542602/14">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/packet-errors-with-switching/542602/14</link>
        <pubDate>Sat, 03 May 2014 01:20:02 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-542602-14</guid>
        <source url="https://forum.moparisthebest.com/t/packet-errors-with-switching/542602.rss">Packet errors with switching?</source>
      </item>
      <item>
        <title>Packet errors with switching?</title>
        <dc:creator><![CDATA[@ohokay ohokay]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ohokay">@ohokay</a> wrote:</p>
          <blockquote>
              <p>I don’t think you understand… I know what a runtime exception is.</p>
<p>I’m asking WHY this error is caused from the code I added. All it does is read the values from packet 41 and equip the item</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/packet-errors-with-switching/542602/13">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/packet-errors-with-switching/542602/13</link>
        <pubDate>Fri, 02 May 2014 11:15:36 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-542602-13</guid>
        <source url="https://forum.moparisthebest.com/t/packet-errors-with-switching/542602.rss">Packet errors with switching?</source>
      </item>
      <item>
        <title>Packet errors with switching?</title>
        <dc:creator><![CDATA[@xXSh0ckXx xXSh0ckXx]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/xxsh0ckxx">@xXSh0ckXx</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="11" data-topic="542602">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/ohokay/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> ohokay:</div>
<blockquote>
<p>Lol I can see how it works, I stated that in my first post. I’m looking for why it happens with the code I added</p>
</blockquote>
</aside>
<p>:palm: I’ve attached a link to the oracle docs in one of the previous posts about how a runtime exception but k…</p>
<p>[spoiler=How Runtime Exception’s get causes.]Runtime exceptions represent problems that are the result of a programming problem, and as such, the API client code cannot reasonably be expected to recover from them or to handle them in any way. Such problems include arithmetic exceptions, such as dividing by zero; pointer exceptions, such as trying to access an object through a null reference; and indexing exceptions, such as attempting to access an array element through an index that is too large or too small.[/spoiler]</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/packet-errors-with-switching/542602/12">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/packet-errors-with-switching/542602/12</link>
        <pubDate>Fri, 02 May 2014 09:09:04 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-542602-12</guid>
        <source url="https://forum.moparisthebest.com/t/packet-errors-with-switching/542602.rss">Packet errors with switching?</source>
      </item>
      <item>
        <title>Packet errors with switching?</title>
        <dc:creator><![CDATA[@ohokay ohokay]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ohokay">@ohokay</a> wrote:</p>
          <blockquote>
              <p>Lol I can see how it works, I stated that in my first post. I’m looking for why it happens with the code I added</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/packet-errors-with-switching/542602/11">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/packet-errors-with-switching/542602/11</link>
        <pubDate>Thu, 01 May 2014 12:38:56 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-542602-11</guid>
        <source url="https://forum.moparisthebest.com/t/packet-errors-with-switching/542602.rss">Packet errors with switching?</source>
      </item>
      <item>
        <title>Packet errors with switching?</title>
        <dc:creator><![CDATA[@xXSh0ckXx xXSh0ckXx]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/xxsh0ckxx">@xXSh0ckXx</a> wrote:</p>
          <blockquote>
              <p>[quote=“ohokay, post:9, topic:542602”][quote author=xXSh0ckXx link=topic=661475.msg4421906#msg4421906 date=1398848991]</p>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<p>I know what they both are…</p>
<p>What I’m trying to find out is why it is causing these errors when it shouldn’t.</p>
</blockquote>
</aside>
<p>Think like that: Why shouldn’t it give errors?</p>
</blockquote>
</aside>
<p>What are you even saying?</p>
</blockquote>
</aside>
<p>Just think. If you can’t seem to fix it, rip a packet method off a different source.</p>
<p>And don’t edit the error’s you’re getting as they’re confusing when in an error a comment appears lol.</p>
</blockquote>
</aside>
<p>I have already said in my original post that it is sending the correct data, and is reading the correct data for packet 41.</p>
<p>I haven’t edited anything, that is the obfuscated client output and I posted a comment next to it saying what method it is. But that’s not important, you can tell the methods from the first line of the error.</p>
<p>Any useful help?</p>
</blockquote>
</aside>
<p>The packet seems to be legit.<br>
Go for method60 and post it here. I’m sure the local player updating is for the appearance only (correct me if i’m wrong). I’m not that good with PI’s.<br>
[/quote]</p>
<pre><code class="lang-auto">   private void method134(Stream stream) {
        int j = stream.readBits(8);
        if (j &lt; playerCount) {
            for (int k = j; k &lt; playerCount; k++) {
                anIntArray840[anInt839++] = playerIndices[k];
            }

        }
        if (j &gt; playerCount) {
            SignLink.reporterror(myUsername + " Too many players: j: " + j + ", playerCount: " + playerCount);
            throw new RuntimeException("eek");
        }
        playerCount = 0;
        for (int l = 0; l &lt; j; l++) {
            int i1 = playerIndices[l];
            Player player = playerArray[i1];
            int j1 = stream.readBits(1);
            if (j1 == 0) {
                playerIndices[playerCount++] = i1;
                player.anInt1537 = loopCycle;
            } else {
                int k1 = stream.readBits(2);
                if (k1 == 0) {
                    playerIndices[playerCount++] = i1;
                    player.anInt1537 = loopCycle;
                    anIntArray894[anInt893++] = i1;
                } else if (k1 == 1) {
                    playerIndices[playerCount++] = i1;
                    player.anInt1537 = loopCycle;
                    int l1 = stream.readBits(3);
                    player.moveInDir(false, l1);
                    int j2 = stream.readBits(1);
                    if (j2 == 1) {
                        anIntArray894[anInt893++] = i1;
                    }
                } else if (k1 == 2) {
                    playerIndices[playerCount++] = i1;
                    player.anInt1537 = loopCycle;
                    int i2 = stream.readBits(3);
                    player.moveInDir(true, i2);
                    int k2 = stream.readBits(3);
                    player.moveInDir(true, k2);
                    int l2 = stream.readBits(1);
                    if (l2 == 1) {
                        anIntArray894[anInt893++] = i1;
                    }
                } else if (k1 == 3) {
                    anIntArray840[anInt839++] = i1;
                }
            }
        }
    }</code></pre>
<p>I’m just trying to understand why it’s happening.</p>
<pre><code class="lang-auto">j = stream.readBits(8);</code></pre>
<p>Seems to be the issue but this method doesn’t need editing, it’s the data that is being read/sent from the server.[/quote]<br>
Confusing. It’s so fking confused, i’m glad that i’ve moved into 718’s.<br>
Alright, let’s go ahead.</p>
<p>As you can see the for loop has an int called k, which assigns to itself j. Open declaration of playerIndices.</p>
<pre><code class="lang-auto">        int j = stream.readBits(8);
            for (int k = j; k &lt; playerCount; k++) {
                anIntArray840[anInt839++] = playerIndices[k];
            }</code></pre>
<p>Maybe is it increasing the Bits read ?<br>
As you can see, k equals j, and after playerCount k is getting increased</p>
<p>[code=java]<br>
for (int k = j; k &lt; playerCount; k++) {<br>
[/java]<br>
This is basically k</p>
<p><code>
 int j = stream.readBits(8);
[/java]</code></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/packet-errors-with-switching/542602/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/packet-errors-with-switching/542602/10</link>
        <pubDate>Wed, 30 Apr 2014 21:23:50 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-542602-10</guid>
        <source url="https://forum.moparisthebest.com/t/packet-errors-with-switching/542602.rss">Packet errors with switching?</source>
      </item>
      <item>
        <title>Packet errors with switching?</title>
        <dc:creator><![CDATA[@ohokay ohokay]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ohokay">@ohokay</a> wrote:</p>
          <blockquote>
              <p>[quote=“xXSh0ckXx, post:8, topic:542602”][quote author=ohokay link=topic=661475.msg4421801#msg4421801 date=1398805215]</p>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<p>I know what they both are…</p>
<p>What I’m trying to find out is why it is causing these errors when it shouldn’t.</p>
</blockquote>
</aside>
<p>Think like that: Why shouldn’t it give errors?</p>
</blockquote>
</aside>
<p>What are you even saying?</p>
</blockquote>
</aside>
<p>Just think. If you can’t seem to fix it, rip a packet method off a different source.</p>
<p>And don’t edit the error’s you’re getting as they’re confusing when in an error a comment appears lol.</p>
</blockquote>
</aside>
<p>I have already said in my original post that it is sending the correct data, and is reading the correct data for packet 41.</p>
<p>I haven’t edited anything, that is the obfuscated client output and I posted a comment next to it saying what method it is. But that’s not important, you can tell the methods from the first line of the error.</p>
<p>Any useful help?<br>
[/quote]</p>
<p>The packet seems to be legit.<br>
Go for method60 and post it here. I’m sure the local player updating is for the appearance only (correct me if i’m wrong). I’m not that good with PI’s.[/quote]</p>
<pre><code class="lang-auto">   private void method134(Stream stream) {
        int j = stream.readBits(8);
        if (j &lt; playerCount) {
            for (int k = j; k &lt; playerCount; k++) {
                anIntArray840[anInt839++] = playerIndices[k];
            }

        }
        if (j &gt; playerCount) {
            SignLink.reporterror(myUsername + " Too many players: j: " + j + ", playerCount: " + playerCount);
            throw new RuntimeException("eek");
        }
        playerCount = 0;
        for (int l = 0; l &lt; j; l++) {
            int i1 = playerIndices[l];
            Player player = playerArray[i1];
            int j1 = stream.readBits(1);
            if (j1 == 0) {
                playerIndices[playerCount++] = i1;
                player.anInt1537 = loopCycle;
            } else {
                int k1 = stream.readBits(2);
                if (k1 == 0) {
                    playerIndices[playerCount++] = i1;
                    player.anInt1537 = loopCycle;
                    anIntArray894[anInt893++] = i1;
                } else if (k1 == 1) {
                    playerIndices[playerCount++] = i1;
                    player.anInt1537 = loopCycle;
                    int l1 = stream.readBits(3);
                    player.moveInDir(false, l1);
                    int j2 = stream.readBits(1);
                    if (j2 == 1) {
                        anIntArray894[anInt893++] = i1;
                    }
                } else if (k1 == 2) {
                    playerIndices[playerCount++] = i1;
                    player.anInt1537 = loopCycle;
                    int i2 = stream.readBits(3);
                    player.moveInDir(true, i2);
                    int k2 = stream.readBits(3);
                    player.moveInDir(true, k2);
                    int l2 = stream.readBits(1);
                    if (l2 == 1) {
                        anIntArray894[anInt893++] = i1;
                    }
                } else if (k1 == 3) {
                    anIntArray840[anInt839++] = i1;
                }
            }
        }
    }</code></pre>
<p>I’m just trying to understand why it’s happening.</p>
<pre><code class="lang-auto">j = stream.readBits(8);</code></pre>
<p>Seems to be the issue but this method doesn’t need editing, it’s the data that is being read/sent from the server.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/packet-errors-with-switching/542602/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/packet-errors-with-switching/542602/9</link>
        <pubDate>Wed, 30 Apr 2014 17:22:29 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-542602-9</guid>
        <source url="https://forum.moparisthebest.com/t/packet-errors-with-switching/542602.rss">Packet errors with switching?</source>
      </item>
      <item>
        <title>Packet errors with switching?</title>
        <dc:creator><![CDATA[@xXSh0ckXx xXSh0ckXx]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/xxsh0ckxx">@xXSh0ckXx</a> wrote:</p>
          <blockquote>
              <p>[quote=“ohokay, post:7, topic:542602”][quote author=xXSh0ckXx link=topic=661475.msg4421800#msg4421800 date=1398804952]</p>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<p>I know what they both are…</p>
<p>What I’m trying to find out is why it is causing these errors when it shouldn’t.</p>
</blockquote>
</aside>
<p>Think like that: Why shouldn’t it give errors?</p>
</blockquote>
</aside>
<p>What are you even saying?</p>
</blockquote>
</aside>
<p>Just think. If you can’t seem to fix it, rip a packet method off a different source.</p>
<p>And don’t edit the error’s you’re getting as they’re confusing when in an error a comment appears lol.<br>
[/quote]</p>
<p>I have already said in my original post that it is sending the correct data, and is reading the correct data for packet 41.</p>
<p>I haven’t edited anything, that is the obfuscated client output and I posted a comment next to it saying what method it is. But that’s not important, you can tell the methods from the first line of the error.</p>
<p>Any useful help?[/quote]</p>
<p>The packet seems to be legit.<br>
Go for method134 and post it here. I’m sure the local player updating is for the appearance only (correct me if i’m wrong). I’m not that good with PI’s.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/packet-errors-with-switching/542602/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/packet-errors-with-switching/542602/8</link>
        <pubDate>Wed, 30 Apr 2014 09:09:51 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-542602-8</guid>
        <source url="https://forum.moparisthebest.com/t/packet-errors-with-switching/542602.rss">Packet errors with switching?</source>
      </item>
      <item>
        <title>Packet errors with switching?</title>
        <dc:creator><![CDATA[@ohokay ohokay]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ohokay">@ohokay</a> wrote:</p>
          <blockquote>
              <p>[quote=“xXSh0ckXx, post:6, topic:542602”][quote author=ohokay link=topic=661475.msg4421799#msg4421799 date=1398804685]</p>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<p>I know what they both are…</p>
<p>What I’m trying to find out is why it is causing these errors when it shouldn’t.</p>
</blockquote>
</aside>
<p>Think like that: Why shouldn’t it give errors?</p>
</blockquote>
</aside>
<p>What are you even saying?<br>
[/quote]<br>
Just think. If you can’t seem to fix it, rip a packet method off a different source.</p>
<p>And don’t edit the error’s you’re getting as they’re confusing when in an error a comment appears lol.[/quote]</p>
<p>I have already said in my original post that it is sending the correct data, and is reading the correct data for packet 41.</p>
<p>I haven’t edited anything, that is the obfuscated client output and I posted a comment next to it saying what method it is. But that’s not important, you can tell the methods from the first line of the error.</p>
<p>Any useful help?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/packet-errors-with-switching/542602/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/packet-errors-with-switching/542602/7</link>
        <pubDate>Tue, 29 Apr 2014 21:00:15 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-542602-7</guid>
        <source url="https://forum.moparisthebest.com/t/packet-errors-with-switching/542602.rss">Packet errors with switching?</source>
      </item>
      <item>
        <title>Packet errors with switching?</title>
        <dc:creator><![CDATA[@xXSh0ckXx xXSh0ckXx]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/xxsh0ckxx">@xXSh0ckXx</a> wrote:</p>
          <blockquote>
              <p>[quote=“ohokay, post:5, topic:542602”][quote author=xXSh0ckXx link=topic=661475.msg4421773#msg4421773 date=1398793509]</p>
<aside class="quote">
<blockquote>
<p>I know what they both are…</p>
<p>What I’m trying to find out is why it is causing these errors when it shouldn’t.</p>
</blockquote>
</aside>
<p>Think like that: Why shouldn’t it give errors?<br>
[/quote]</p>
<p>What are you even saying?[/quote]<br>
Just think. If you can’t seem to fix it, rip a packet method off a different source.</p>
<p>And don’t edit the error’s you’re getting as they’re confusing when in an error a comment appears lol.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/packet-errors-with-switching/542602/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/packet-errors-with-switching/542602/6</link>
        <pubDate>Tue, 29 Apr 2014 20:55:52 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-542602-6</guid>
        <source url="https://forum.moparisthebest.com/t/packet-errors-with-switching/542602.rss">Packet errors with switching?</source>
      </item>
      <item>
        <title>Packet errors with switching?</title>
        <dc:creator><![CDATA[@ohokay ohokay]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ohokay">@ohokay</a> wrote:</p>
          <blockquote>
              <p>[quote=“xXSh0ckXx, post:4, topic:542602”][quote author=ohokay link=topic=661475.msg4421724#msg4421724 date=1398762393]<br>
I know what they both are…</p>
<p>What I’m trying to find out is why it is causing these errors when it shouldn’t.<br>
[/quote]<br>
Think like that: Why shouldn’t it give errors?[/quote]</p>
<p>What are you even saying?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/packet-errors-with-switching/542602/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/packet-errors-with-switching/542602/5</link>
        <pubDate>Tue, 29 Apr 2014 20:51:25 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-542602-5</guid>
        <source url="https://forum.moparisthebest.com/t/packet-errors-with-switching/542602.rss">Packet errors with switching?</source>
      </item>
      <item>
        <title>Packet errors with switching?</title>
        <dc:creator><![CDATA[@xXSh0ckXx xXSh0ckXx]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/xxsh0ckxx">@xXSh0ckXx</a> wrote:</p>
          <blockquote>
              <p>[quote=“ohokay, post:3, topic:542602”]I know what they both are…</p>
<p>What I’m trying to find out is why it is causing these errors when it shouldn’t.[/quote]<br>
Think like that: Why shouldn’t it give errors?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/packet-errors-with-switching/542602/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/packet-errors-with-switching/542602/4</link>
        <pubDate>Tue, 29 Apr 2014 17:45:09 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-542602-4</guid>
        <source url="https://forum.moparisthebest.com/t/packet-errors-with-switching/542602.rss">Packet errors with switching?</source>
      </item>
      <item>
        <title>Packet errors with switching?</title>
        <dc:creator><![CDATA[@ohokay ohokay]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ohokay">@ohokay</a> wrote:</p>
          <blockquote>
              <p>I know what they both are…</p>
<p>What I’m trying to find out is why it is causing these errors when it shouldn’t.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/packet-errors-with-switching/542602/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/packet-errors-with-switching/542602/3</link>
        <pubDate>Tue, 29 Apr 2014 09:06:33 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-542602-3</guid>
        <source url="https://forum.moparisthebest.com/t/packet-errors-with-switching/542602.rss">Packet errors with switching?</source>
      </item>
      <item>
        <title>Packet errors with switching?</title>
        <dc:creator><![CDATA[@xXSh0ckXx xXSh0ckXx]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/xxsh0ckxx">@xXSh0ckXx</a> wrote:</p>
          <blockquote>
              <p><code>T2 - 81,174,126 - 79,3099,3530 - -94,111,-1,-128,1,0,0,81,1,-40,8,0,1,0,0
,0,0,-61,1,9,-1,44,76,76,-89,27,-71,24,66,43,55,55,-86,0,39,-52,0,31,38,29,8,0,1
,1,2,5,2,3,40,3,</code></p>
<p>T2 - Exception caught during packet handling</p>
<p>T2 -  ,  ,  -  ,  ,  - </p>
<p>Good luck <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>**EDIT: <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/RuntimeException.html" rel="nofollow noopener">http://docs.oracle.com/javase/6/docs/api/java/lang/RuntimeException.html</a></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/packet-errors-with-switching/542602/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/packet-errors-with-switching/542602/2</link>
        <pubDate>Mon, 28 Apr 2014 17:29:06 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-542602-2</guid>
        <source url="https://forum.moparisthebest.com/t/packet-errors-with-switching/542602.rss">Packet errors with switching?</source>
      </item>
      <item>
        <title>Packet errors with switching?</title>
        <dc:creator><![CDATA[@ohokay ohokay]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ohokay">@ohokay</a> wrote:</p>
          <blockquote>
              <p>I’m sure everyone knows one of the solutions to better switching, by prioritising the wear item packet over others, but when I seem to do it, on some occasions it seems to disconnect me from the game and I can’t figure out why this is happening or the logic behind it.</p>
<p>Here’s the error it gives me</p>
<pre><code class="lang-auto">Error: ohokay Too many players: j: 55, playerCount: 1
java.lang.RuntimeException: eek
        at lIIIIIlll.IlllllIII.IIIlIllIl(Unknown Source) //method134 or something to do with player updating
        at lIIIIIlll.IlllllIII.lIIIIIlll(Unknown Source)
        at lIIIIIlll.IlllllIII.IIlIIlIlI(Unknown Source)
        at lIIIIIlll.IlllllIII.lIIIIIlll(Unknown Source)
        at lIIIIIlll.lIIlllIIl.run(Unknown Source)
        at lIIIIIlll.IlllllIII.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source)
Error: T2 - 81,174,126 - 79,3099,3530 - -94,111,-1,-128,1,0,0,81,1,-40,8,0,1,0,0
,0,0,-61,1,9,-1,44,76,76,-89,27,-71,24,66,43,55,55,-86,0,39,-52,0,31,38,29,8,0,1
,1,2,5,2,3,40,3,</code></pre>
<p>Here’s the code that handles the packet</p>
<pre><code class="lang-auto">			if (packet.getId() == 41) {
				plr.wearId = packet.readUnsignedWord();
				plr.wearSlot = packet.readUnsignedWordA();
				plr.interfaceId = packet.readUnsignedWordA();
				plr.getItems().wearItem(plr.wearId, plr.wearSlot);
				return;
			}</code></pre>
<p>It’s definitely something to do with this because the dcing only occurs when this code is active.</p>
<pre><code class="lang-auto">   private void method134(Stream stream) {
        int j = stream.readBits(8);
        if (j &lt; playerCount) {
            for (int k = j; k &lt; playerCount; k++) {
                anIntArray840[anInt839++] = playerIndices[k];
            }

        }
        if (j &gt; playerCount) {
            SignLink.reporterror(myUsername + " Too many players: j: " + j + ", playerCount: " + playerCount);
            throw new RuntimeException("eek");
        }
        playerCount = 0;
        for (int l = 0; l &lt; j; l++) {
            int i1 = playerIndices[l];
            Player player = playerArray[i1];
            int j1 = stream.readBits(1);
            if (j1 == 0) {
                playerIndices[playerCount++] = i1;
                player.anInt1537 = loopCycle;
            } else {
                int k1 = stream.readBits(2);
                if (k1 == 0) {
                    playerIndices[playerCount++] = i1;
                    player.anInt1537 = loopCycle;
                    anIntArray894[anInt893++] = i1;
                } else if (k1 == 1) {
                    playerIndices[playerCount++] = i1;
                    player.anInt1537 = loopCycle;
                    int l1 = stream.readBits(3);
                    player.moveInDir(false, l1);
                    int j2 = stream.readBits(1);
                    if (j2 == 1) {
                        anIntArray894[anInt893++] = i1;
                    }
                } else if (k1 == 2) {
                    playerIndices[playerCount++] = i1;
                    player.anInt1537 = loopCycle;
                    int i2 = stream.readBits(3);
                    player.moveInDir(true, i2);
                    int k2 = stream.readBits(3);
                    player.moveInDir(true, k2);
                    int l2 = stream.readBits(1);
                    if (l2 == 1) {
                        anIntArray894[anInt893++] = i1;
                    }
                } else if (k1 == 3) {
                    anIntArray840[anInt839++] = i1;
                }
            }
        }
    }</code></pre>
<p>It’s a rare occurance that I can’t seem to replicate, but happens when switching items, switching to spec etc…</p>
<p>I was thinking it was because of perhaps it’s reading the wrong packets or wrong data from somewhere but I’ve checked packet 41 and it seems to be sending the correct data from the client.</p>
<p>Any ideas what might be the cause?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/packet-errors-with-switching/542602/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/packet-errors-with-switching/542602/1</link>
        <pubDate>Mon, 28 Apr 2014 00:14:38 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-542602-1</guid>
        <source url="https://forum.moparisthebest.com/t/packet-errors-with-switching/542602.rss">Packet errors with switching?</source>
      </item>
  </channel>
</rss>
