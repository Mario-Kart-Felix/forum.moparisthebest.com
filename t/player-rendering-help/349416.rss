<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Player rendering help</title>
    <link>https://forum.moparisthebest.com/t/player-rendering-help/349416</link>
    <description>Before I start, I know I&#39;m probably going to get flamed and told to go to moparscape.. But, I don&#39;t feel they have the knowledge to help me. I also don&#39;t want to get spoon fed, I want to learn.

I&#39;m using the really basic source, (the one where you fly about with all the items on the floor) and I&#39;m trying to get player rendering. I think I&#39;m going wrong with the player update masks. This is what happens when I try to login.

why.

&lt;blockquote&gt;Error: Error packet size mismatch in getplayer pos:7 psize:8
Error: T2 - 81,73,-1 - 8,3040,3192 - 0,64,0,6,-1,67,-4,-28,

Error: Error packet size mismatch in getplayer pos:11 psize:10
Error: T2 - 81,73,-1 - 10,3072,3224 - -26,-127,0,6,-1,67,-4,-28,0,64,

Error: Error packet size mismatch in getplayer pos:14 psize:12
Error: T2 - 81,73,-1 - 12,3072,3224 - -26,-127,0,6,-1,67,-4,-28,0,64,0,0,&lt;/blockquote&gt;

Any push in the right direction would be appreciated. Thanks.</description>
    
    <lastBuildDate>Sat, 24 Jul 2010 03:15:40 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/player-rendering-help/349416.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Player rendering help</title>
        <dc:creator><![CDATA[@Jython super_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/jython">@Jython</a> wrote:</p>
          <blockquote>
              <p>s/y(t)e/i\1/</p>
<p>neway the error is that you are writing the wrong datatypes or wrong data in general, hence the pointer into the frame buffer is not at the end.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/player-rendering-help/349416/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/player-rendering-help/349416/9</link>
        <pubDate>Sat, 24 Jul 2010 03:15:40 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-349416-9</guid>
        <source url="https://forum.moparisthebest.com/t/player-rendering-help/349416.rss">Player rendering help</source>
      </item>
      <item>
        <title>Player rendering help</title>
        <dc:creator><![CDATA[@Epic_Steve Epic Steve]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/epic_steve">@Epic_Steve</a> wrote:</p>
          <blockquote>
              <pre><code class="lang-auto">   public void writeBits(int numBits, int value) {
        int bytePos = bitPosition &gt;&gt; 3;
        int bitOffset = 8 - (bitPosition &amp; 7);
        bitPosition += numBits;

        for (; numBits &gt; bitOffset; bitOffset = 8) {
            buffer[bytePos] &amp;= ~bitMaskOut[bitOffset];        // mask out the desired area
            buffer[bytePos++] |= (value &gt;&gt; (numBits - bitOffset)) &amp; bitMaskOut[bitOffset];

            numBits -= bitOffset;
        }
        if (numBits == bitOffset) {
            buffer[bytePos] &amp;= ~bitMaskOut[bitOffset];
            buffer[bytePos] |= value &amp; bitMaskOut[bitOffset];
        } else {
            buffer[bytePos] &amp;= ~(bitMaskOut[numBits] &lt;&lt; (bitOffset - numBits));
            buffer[bytePos] |= (value &amp; bitMaskOut[numBits]) &lt;&lt; (bitOffset - numBits);
        }
    }</code></pre>
<p>There’s the method. If that is what you wanted.</p>
<p>The client is requesting 11 bytes.</p>
<pre><code class="lang-auto">int j = stream.readBits(11);
if(j == 2047)
                break;</code></pre>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/player-rendering-help/349416/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/player-rendering-help/349416/8</link>
        <pubDate>Fri, 23 Jul 2010 22:44:59 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-349416-8</guid>
        <source url="https://forum.moparisthebest.com/t/player-rendering-help/349416.rss">Player rendering help</source>
      </item>
      <item>
        <title>Player rendering help</title>
        <dc:creator><![CDATA[@eczema3 eczema3]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/eczema3">@eczema3</a> wrote:</p>
          <blockquote>
              <p>Reading a source that I have, I can see this:</p>
<p>[code]        if (updateBlock.currentOffset &gt; 0) {<br>
str.writeBits(11, 2047);<br>
str.finishBitAccess();</p>
<pre><code>        str.writeBytes(updateBlock.buffer, updateBlock.currentOffset, 0);
    }[/code]
</code></pre>
<p>You appear to be writing stuff between that, so idk…</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/player-rendering-help/349416/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/player-rendering-help/349416/7</link>
        <pubDate>Fri, 23 Jul 2010 20:39:14 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-349416-7</guid>
        <source url="https://forum.moparisthebest.com/t/player-rendering-help/349416.rss">Player rendering help</source>
      </item>
      <item>
        <title>Player rendering help</title>
        <dc:creator><![CDATA[@White_Castle White Castle]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/white_castle">@White_Castle</a> wrote:</p>
          <blockquote>
              <p>Um, will you post outStream.writeBits(int,int) for me? It seems like the first argument is the # of bits you want to write. You are writing 12, but specifying 11. This may be the source of your woes.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/player-rendering-help/349416/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/player-rendering-help/349416/6</link>
        <pubDate>Fri, 23 Jul 2010 20:00:51 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-349416-6</guid>
        <source url="https://forum.moparisthebest.com/t/player-rendering-help/349416.rss">Player rendering help</source>
      </item>
      <item>
        <title>Player rendering help</title>
        <dc:creator><![CDATA[@Epic_Steve Epic Steve]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/epic_steve">@Epic_Steve</a> wrote:</p>
          <blockquote>
              <p>Thanks, I’ve narrowed it down to,</p>
<pre><code class="lang-auto">            outStream.writeBits(11, 2047);    // magic EOF
         //   outStream.writeBits(1, 1);
         //   outStream.writeBits(1, 1);
         //   outStream.writeBits(5, 25);
        //    outStream.writeBits(5, 25);

            outStream.finishBitAccess();

        //    outStream.writeWord(0x10);
          //  outStream.writeWord(0x10 &gt;&gt; 8);</code></pre>
<p>With them lines commented out, it loads the map but no player, with them lines not commented out, then I get the mismatched packet error. I’ll look in the client and see what I can find.[/code]</p>
<p>But then, it seems to be reading what the client is requesting. Unless I’m missing something.</p>
<pre><code class="lang-auto">if(j == 2047)
                break;
            if(playerArray[j] == null)
            {
                playerArray[j] = new Player();
                if(aStreamArray895s[j] != null)
                    playerArray[j].updatePlayer(aStreamArray895s[j]);
            }
            playerIndices[playerCount++] = j;
		 System.out.println("PLAYERS: " + playerCount);
            Player player = playerArray[j];
            player.anInt1537 = loopCycle;
            int k = stream.readBits(1);
            if(k == 1)
                anIntArray894[anInt893++] = j;
            int l = stream.readBits(1);
            int i1 = stream.readBits(5);
            if(i1 &gt; 15)
                i1 -= 32;
            int j1 = stream.readBits(5);
            if(j1 &gt; 15)
                j1 -= 32;
            player.setPos(myPlayer.smallX[0] + j1, myPlayer.smallY[0] + i1, l == 1);</code></pre>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/player-rendering-help/349416/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/player-rendering-help/349416/5</link>
        <pubDate>Fri, 23 Jul 2010 19:39:45 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-349416-5</guid>
        <source url="https://forum.moparisthebest.com/t/player-rendering-help/349416.rss">Player rendering help</source>
      </item>
      <item>
        <title>Player rendering help</title>
        <dc:creator><![CDATA[@White_Castle White Castle]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/white_castle">@White_Castle</a> wrote:</p>
          <blockquote>
              <p>You’re sending a malformed packet. That’s what “packet mismatch size” means. Poke around in the client to see what form it’s looking for and you should be golden.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/player-rendering-help/349416/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/player-rendering-help/349416/4</link>
        <pubDate>Fri, 16 Jul 2010 21:10:45 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-349416-4</guid>
        <source url="https://forum.moparisthebest.com/t/player-rendering-help/349416.rss">Player rendering help</source>
      </item>
      <item>
        <title>Player rendering help</title>
        <dc:creator><![CDATA[@Epic_Steve Epic Steve]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/epic_steve">@Epic_Steve</a> wrote:</p>
          <blockquote>
              <p>Thanks for your reply, I’ll start as soon as I get home from Maidstone and I’ll ask them and see if they can help.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/player-rendering-help/349416/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/player-rendering-help/349416/3</link>
        <pubDate>Fri, 16 Jul 2010 15:37:46 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-349416-3</guid>
        <source url="https://forum.moparisthebest.com/t/player-rendering-help/349416.rss">Player rendering help</source>
      </item>
      <item>
        <title>Player rendering help</title>
        <dc:creator><![CDATA[@NewbieNewty Newty]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/newbienewty">@NewbieNewty</a> wrote:</p>
          <blockquote>
              <p>If your going to start with that basic, and shitty, source, then why don’t you just go ahead and write one from scratch instead?</p>
<p>Also, these questions can be answered by a variety of different people on the <span class="hashtag">#moparscape</span> IRC channel. Try asking either Evil_, (Anthony), Lin, _mutex, Shiver, and there might be a few other that I’m missing but those are the majority of the active users that know anything on moparscape.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/player-rendering-help/349416/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/player-rendering-help/349416/2</link>
        <pubDate>Fri, 16 Jul 2010 15:28:05 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-349416-2</guid>
        <source url="https://forum.moparisthebest.com/t/player-rendering-help/349416.rss">Player rendering help</source>
      </item>
      <item>
        <title>Player rendering help</title>
        <dc:creator><![CDATA[@Epic_Steve Epic Steve]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/epic_steve">@Epic_Steve</a> wrote:</p>
          <blockquote>
              <p>Before I start, I know I’m probably going to get flamed and told to go to moparscape… But, I don’t feel they have the knowledge to help me. I also don’t want to get spoon fed, I want to learn.</p>
<p>I’m using the really basic source, (the one where you fly about with all the items on the floor) and I’m trying to get player rendering. I think I’m going wrong with the player update masks. This is what happens when I try to login.</p>
<p>why.</p>
<blockquote>Error: Error packet size mismatch in getplayer pos:7 psize:8
Error: T2 - 81,73,-1 - 8,3040,3192 - 0,64,0,6,-1,67,-4,-28,
<p>Error: Error packet size mismatch in getplayer pos:11 psize:10<br>
Error: T2 - 81,73,-1 - 10,3072,3224 - -26,-127,0,6,-1,67,-4,-28,0,64,</p>
<p>Error: Error packet size mismatch in getplayer pos:14 psize:12<br>
Error: T2 - 81,73,-1 - 12,3072,3224 - -26,-127,0,6,-1,67,-4,-28,0,64,0,0,</p>
</blockquote>
<p>Any push in the right direction would be appreciated. Thanks.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/player-rendering-help/349416/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/player-rendering-help/349416/1</link>
        <pubDate>Fri, 16 Jul 2010 15:04:29 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-349416-1</guid>
        <source url="https://forum.moparisthebest.com/t/player-rendering-help/349416.rss">Player rendering help</source>
      </item>
  </channel>
</rss>
