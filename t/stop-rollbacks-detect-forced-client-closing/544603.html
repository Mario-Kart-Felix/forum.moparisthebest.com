<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/stop-rollbacks-detect-forced-client-closing/544603 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 23:52:25 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Stop rollbacks! (Detect forced client closing) - Runescape - moparisthebest.com</title>
    <meta name="description" content="This is for stopping detecting a forced client shutdown. Also this gives you a little intro on creating your own custom rs packets. 

The communication in rs/rsps happens via packets. The server e.g. sends a packet to th&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="544603.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Stop rollbacks! (Detect forced client closing)&#39;" href="544603.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/stop-rollbacks-detect-forced-client-closing/544603" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/stop-rollbacks-detect-forced-client-closing/544603" />
<meta property="og:title" content="Stop rollbacks! (Detect forced client closing)" />
<meta name="twitter:title" content="Stop rollbacks! (Detect forced client closing)" />
<meta property="og:description" content="This is for stopping detecting a forced client shutdown.  Also this gives you a little intro on creating your own custom rs packets.  The communication in rs/rsps happens via packets.  The server e.g. sends a packet to the client telling the client to play a sound.  The client can send a packet to server that the player has clicked a button.  When we look to the packets we will see the client can receive a packet with opcode 1 (animation reset), but the server does not.  So if we want to send a ..." />
<meta name="twitter:description" content="This is for stopping detecting a forced client shutdown.  Also this gives you a little intro on creating your own custom rs packets.  The communication in rs/rsps happens via packets.  The server e.g. sends a packet to the client telling the client to play a sound.  The client can send a packet to server that the player has clicked a button.  When we look to the packets we will see the client can receive a packet with opcode 1 (animation reset), but the server does not.  So if we want to send a ..." />
<meta property="article:published_time" content="2014-07-03T21:53:21+00:00" />
<meta property="og:ignore_canonical" content="true" />

      <link rel="next" href="5446034658.html?page=2">


    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="544603.html">Stop rollbacks! (Detect forced client closing)</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/RandQm.html'><span itemprop='name'>RandQm</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-07-03T21:53:21Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:23:22Z' class='post-time'>
              August 4, 2016,  1:23pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>This is for stopping detecting a forced client shutdown.<br>
Also this gives you a little intro on creating your own custom rs packets.</p>
<p>The communication in rs/rsps happens via packets.<br>
The server e.g. sends a packet to the client telling the client to play a sound.<br>
The client can send a packet to server that the player has clicked a button.</p>
<p>When we look to the packets we will see the client can receive a packet with opcode 1 (animation reset), but the server does not.<br>
So if we want to send a packet from the client to the server we can use that opcode.</p>
<p><span class="bbcode-b">Client sided:</span><br>
First of all we need to modify the closing event of the client. The actual screen we’re seeing.<br>
Go into your JFrame class or wherever the JFrame code is handled.</p>
<p>Under the InitIU method or whatever the method is called that builds the JFrame:</p>
<p>[code=java]<br>
frame.addWindowListener(new WindowAdapter() {<br>
<a class="mention" href="../../u/override.html">@Override</a><br>
public void windowClosing(WindowEvent arg0) {<br>
if (getOutStream() != null) {<br>
getOutStream().createFrame(1);</p>
<pre><code>        try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    //making sure it's getting closed.
    WindowEvent wev = new WindowEvent(frame, WindowEvent.WINDOW_CLOSING);
    Toolkit.getDefaultToolkit().getSystemEventQueue().postEvent(wev);
    frame.setVisible(false);
    frame.dispose();
    System.exit(0);
}
</code></pre>
<p>});[/code]</p>
<p>We create an event on window closing, when it’s closing we send a packet to the server.</p>
<p><code>
getOutStream().createFrame(1);</code><br>
I added a thread sleep because sometimes the packet wasn’t send and with the sleep it always is.</p>
<p><span class="bbcode-b">Then server sided:</span><br>
Add your packet listener:</p>
<pre><code class="lang-auto">public class Disconnected implements InPacket {

	
	@Override
	public void handle(Player2 player, Packet packet) {
		System.out.println("Disconnected client.");
		player.logout();
	}

}
</code></pre>
<p>And don’t forget to register your packet:</p>
<pre><code class="lang-auto">packets[1] =  new Disconnected();</code></pre>
<p><span class="bbcode-b">EDIT: </span>I added a check to see if the stream is not null since it’s possible that somebody closes the client without ever having logged in.<br>
In that case the stream would be null and would throw errors.</p>
      </div>

      <meta itemprop='headline' content='Stop rollbacks! (Detect forced client closing)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/jummppy.html'><span itemprop='name'>jummppy</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-07-03T21:56:00Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:23:22Z' class='post-time'>
              August 4, 2016,  1:23pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Go RandQm keep making useful stuff for your server! Seems kinda simple too.</p>
      </div>

      <meta itemprop='headline' content='Stop rollbacks! (Detect forced client closing)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Fridder.html'><span itemprop='name'>Fridder</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-07-04T03:17:12Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:23:25Z' class='post-time'>
              August 4, 2016,  1:23pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Nice, thanks for this.</p>
      </div>

      <meta itemprop='headline' content='Stop rollbacks! (Detect forced client closing)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Clawz_fury.html'><span itemprop='name'>Clawz_fury</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-07-05T02:57:01Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:23:38Z' class='post-time'>
              August 4, 2016,  1:23pm
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>smart, don’t really like the implementation but great idea</p>
<p>edit: when the player closes the client, the host is already disconnected server side. or were you referring to forced closes like using task manager or turning off your computer?</p>
      </div>

      <meta itemprop='headline' content='Stop rollbacks! (Detect forced client closing)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/silabsoft.html'><span itemprop='name'>silabsoft</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-07-05T07:09:21Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:23:40Z' class='post-time'>
              August 4, 2016,  1:23pm
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>WAT? why not just handle it during the socket disconnect event?</p>
      </div>

      <meta itemprop='headline' content='Stop rollbacks! (Detect forced client closing)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Clawz_fury.html'><span itemprop='name'>Clawz_fury</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-07-05T16:06:41Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:23:42Z' class='post-time'>
              August 4, 2016,  1:23pm
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="5" data-topic="544603">
<div class="title">
<div class="quote-controls"></div>
 Miss Silabsoft:</div>
<blockquote>
<p>WAT? why not just handle it during the socket disconnect event?</p>
</blockquote>
</aside>
<p>elaborate/link to javadocs on that?</p>
      </div>

      <meta itemprop='headline' content='Stop rollbacks! (Detect forced client closing)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Ashi.html'><span itemprop='name'>Ashi</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-07-05T16:08:10Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:23:42Z' class='post-time'>
              August 4, 2016,  1:23pm
            </time>
        <span itemprop='position'>#7</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“lare69, post:6, topic:544603”][quote author=Miss Silabsoft link=topic=663478.msg4434426#msg4434426 date=1404544161]<br>
WAT? why not just handle it during the socket disconnect event?<br>
[/quote]<br>
elaborate/link to javadocs on that?[/quote]<br>
Ever used Netty?</p>
      </div>

      <meta itemprop='headline' content='Stop rollbacks! (Detect forced client closing)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Death_Style.html'><span itemprop='name'>Death_Style</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-07-05T16:11:52Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:23:42Z' class='post-time'>
              August 4, 2016,  1:23pm
            </time>
        <span itemprop='position'>#8</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>i’m so distrustful of you people now</p>
      </div>

      <meta itemprop='headline' content='Stop rollbacks! (Detect forced client closing)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/sorecheeny.html'><span itemprop='name'>sorecheeny</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-07-05T19:36:08Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:23:44Z' class='post-time'>
              August 4, 2016,  1:23pm
            </time>
        <span itemprop='position'>#9</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>This is nice. Might use if I need it.</p>
      </div>

      <meta itemprop='headline' content='Stop rollbacks! (Detect forced client closing)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Clawz_fury.html'><span itemprop='name'>Clawz_fury</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-07-05T20:07:03Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:23:45Z' class='post-time'>
              August 4, 2016,  1:23pm
            </time>
        <span itemprop='position'>#10</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Ashi, post:7, topic:544603”][quote author=lare69 link=topic=663478.msg4434459#msg4434459 date=1404576401]</p>
<aside class="quote">
<blockquote>
<p>WAT? why not just handle it during the socket disconnect event?</p>
</blockquote>
</aside>
<p>elaborate/link to javadocs on that?<br>
[/quote]<br>
Ever used Netty?[/quote]<br>
Nope</p>
      </div>

      <meta itemprop='headline' content='Stop rollbacks! (Detect forced client closing)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/pure2ownage.html'><span itemprop='name'>pure2ownage</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-07-05T20:52:49Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:23:45Z' class='post-time'>
              August 4, 2016,  1:23pm
            </time>
        <span itemprop='position'>#11</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I just assume if it’s not in the client, then it’s in the server. So should OP.</p>
      </div>

      <meta itemprop='headline' content='Stop rollbacks! (Detect forced client closing)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Ashi.html'><span itemprop='name'>Ashi</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-07-05T21:38:33Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:23:46Z' class='post-time'>
              August 4, 2016,  1:23pm
            </time>
        <span itemprop='position'>#12</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“lare69, post:10, topic:544603”][quote author=Ashi link=topic=663478.msg4434461#msg4434461 date=1404576490]</p>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<p>WAT? why not just handle it during the socket disconnect event?</p>
</blockquote>
</aside>
<p>elaborate/link to javadocs on that?</p>
</blockquote>
</aside>
<p>Ever used Netty?<br>
[/quote]<br>
Nope[/quote]<br>
Okay when you create a channel to listen for data that would an active connection. When the channel closes you won’t get any more data so just do the stuff you would do to deregister the player.</p>
<p>Netty and Mina both handle this for you e.g.</p>
<p>In Mina you when you extend IoHandlerAdapter you can override sessionClosed(IoSession) which will do your dirty work. Just add crap like</p>
<p>if (player == null)<br>
return;<br>
logout();<br>
//etc.</p>
<p>Or using Socket</p>
<p>if (socket.isClosed())<br>
//do stuff</p>
      </div>

      <meta itemprop='headline' content='Stop rollbacks! (Detect forced client closing)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/RandQm.html'><span itemprop='name'>RandQm</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-07-05T23:16:57Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:23:47Z' class='post-time'>
              August 4, 2016,  1:23pm
            </time>
        <span itemprop='position'>#13</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“lare69, post:4, topic:544603”]smart, don’t really like the implementation but great idea</p>
<p>edit: when the player closes the client, the host is already disconnected server side. or were you referring to forced closes like using task manager or turning off your computer?[/quote]<br>
The client connection is alive until the player logs out or closes it’s JFrame.<br>
I’m catching the closing of the JFrame here, so when the player would click close without logging out we can instantly<br>
let the server know that and handle what we want to happen when this occurs.</p>
<p>I don’t doubt there are better ways, or existing events for it but I wanted to use a custom packet for learning purposes here.</p>
      </div>

      <meta itemprop='headline' content='Stop rollbacks! (Detect forced client closing)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/The_Web_Guy.html'><span itemprop='name'>The_Web_Guy</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-07-06T00:02:09Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:23:47Z' class='post-time'>
              August 4, 2016,  1:23pm
            </time>
        <span itemprop='position'>#14</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Very simple but very nice. This could possibly prevent some dupes in some cases. Keep up the great work! I’ll probably use this.</p>
      </div>

      <meta itemprop='headline' content='Stop rollbacks! (Detect forced client closing)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Death_Style.html'><span itemprop='name'>Death_Style</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-07-06T03:26:51Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:23:48Z' class='post-time'>
              August 4, 2016,  1:23pm
            </time>
        <span itemprop='position'>#15</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="14" data-topic="544603">
<div class="title">
<div class="quote-controls"></div>
 The Web Guy:</div>
<blockquote>
<p>Very simple but very nice. This could possibly prevent some dupes in some cases. Keep up the great work! I’ll probably use this.</p>
</blockquote>
</aside>
<p>what kind of web guy are you</p>
      </div>

      <meta itemprop='headline' content='Stop rollbacks! (Detect forced client closing)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="2" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/sorecheeny.html'><span itemprop='name'>sorecheeny</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-07-06T03:28:33Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:23:48Z' class='post-time'>
              August 4, 2016,  1:23pm
            </time>
        <span itemprop='position'>#16</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Death Style, post:15, topic:544603”][quote author=The Web Guy link=topic=663478.msg4434575#msg4434575 date=1404604929]<br>
Very simple but very nice. This could possibly prevent some dupes in some cases. Keep up the great work! I’ll probably use this.<br>
[/quote]<br>
what kind of web guy are you[/quote]</p>
<p>He’s <span class="bbcode-b">The</span> Web Guy.</p>
      </div>

      <meta itemprop='headline' content='Stop rollbacks! (Detect forced client closing)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/The_Web_Guy.html'><span itemprop='name'>The_Web_Guy</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-07-06T06:06:11Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:23:49Z' class='post-time'>
              August 4, 2016,  1:23pm
            </time>
        <span itemprop='position'>#17</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Death Style, post:15, topic:544603”][quote author=The Web Guy link=topic=663478.msg4434575#msg4434575 date=1404604929]<br>
Very simple but very nice. This could possibly prevent some dupes in some cases. Keep up the great work! I’ll probably use this.<br>
[/quote]<br>
what kind of web guy are you[/quote]</p>
<p>Just because I give someone a good job on a nice snippet? Cool. Stop being a faggot.</p>
      </div>

      <meta itemprop='headline' content='Stop rollbacks! (Detect forced client closing)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Death_Style.html'><span itemprop='name'>Death_Style</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-07-06T06:48:49Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:23:50Z' class='post-time'>
              August 4, 2016,  1:23pm
            </time>
        <span itemprop='position'>#18</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>no because you said you’ll probably use this</p>
<p>right way:</p>
<ol>
<li>socket disconnect -&gt; handle client exit</li>
</ol>
<p>wrong way:</p>
<ol>
<li>window closed packet -&gt; handle client exit</li>
<li>socket disconnect</li>
</ol>
<p>if my internet dies or pc randomly crashes it will never send the window closed packet and whatever you’re expecting to happen when the client is shut down will never happen. there is a reason this packet doesn’t already exist. tutorial is nice and taught me how to create new packets, but you should never rely on the client to tell the server it’s exiting instead of just handling the actual socket disconnect</p>
      </div>

      <meta itemprop='headline' content='Stop rollbacks! (Detect forced client closing)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/The_Web_Guy.html'><span itemprop='name'>The_Web_Guy</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-07-06T17:56:41Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:23:52Z' class='post-time'>
              August 4, 2016,  1:23pm
            </time>
        <span itemprop='position'>#19</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Death Style, post:18, topic:544603”]no because you said you’ll probably use this</p>
<p>right way:</p>
<ol>
<li>socket disconnect -&gt; handle client exit</li>
</ol>
<p>wrong way:</p>
<ol>
<li>window closed packet -&gt; handle client exit</li>
<li>socket disconnect</li>
</ol>
<p>if my internet dies or pc randomly crashes it will never send the window closed packet and whatever you’re expecting to happen when the client is shut down will never happen. there is a reason this packet doesn’t already exist. tutorial is nice and taught me how to create new packets, but you should never rely on the client to tell the server it’s exiting instead of just handling the actual socket disconnect[/quote]</p>
<p>Why not use it? Seems cool.</p>
      </div>

      <meta itemprop='headline' content='Stop rollbacks! (Detect forced client closing)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="2" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Ashi.html'><span itemprop='name'>Ashi</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-07-06T18:01:11Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:23:53Z' class='post-time'>
              August 4, 2016,  1:23pm
            </time>
        <span itemprop='position'>#20</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“The Web Guy, post:19, topic:544603”][quote author=Death Style link=topic=663478.msg4434619#msg4434619 date=1404629329]<br>
no because you said you’ll probably use this</p>
<p>right way:</p>
<ol>
<li>socket disconnect -&gt; handle client exit</li>
</ol>
<p>wrong way:</p>
<ol>
<li>window closed packet -&gt; handle client exit</li>
<li>socket disconnect</li>
</ol>
<p>if my internet dies or pc randomly crashes it will never send the window closed packet and whatever you’re expecting to happen when the client is shut down will never happen. there is a reason this packet doesn’t already exist. tutorial is nice and taught me how to create new packets, but you should never rely on the client to tell the server it’s exiting instead of just handling the actual socket disconnect<br>
[/quote]</p>
<p>Why not use it? Seems cool.[/quote]<br>
No wonder people call you stupid.</p>
      </div>

      <meta itemprop='headline' content='Stop rollbacks! (Detect forced client closing)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>

  <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
      <span itemprop='name'><b><a rel="next" itemprop="url" href="5446034658.html?page=2">next page →</a></b></span>
  </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/stop-rollbacks-detect-forced-client-closing/544603 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 23:52:27 GMT -->
</html>
