<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Any custom minigame base [INCLUDES USE OF TIMERS]</title>
    <link>https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491</link>
    <description>Spent a while typing this out. Is a bit dull and boring. DONT NAGG ABOUT CONVENTIONS.

Purpose: Base for any minigame...
Difficulty: 1 - if you don&#39;t understand after this, don&#39;t hesitate to PM me...
Assumed Knowledge: The ability to read and to be able to implement it into your own server.
Server Base: -
Classes Modified: Depends what source...

To start with, i am going to esume you have an eventmanager or similar. I am going to use tj007&#39;s timer. I shall also show an example of using process (for those who choose not to use eventmanager or similar)

Ok so lets begin. We are first going to implement a timer. (If you didn&#39;t know by now, this tutorial is basics)

To start with, we need to have an int/long which will allow us to have a number and edit it.

Public static int is allowed to be changed, whereas Public final static int is NOT allowed to be changed.

So i shall create an int called timerTask.

[CODE]
public int timerTask;
[/CODE]

Naturally when you create a piece of code like that, the defult value will be 0.

If you would like the value to be somthing different - say 60 - then you would write it like this

[CODE]
public int timerTask = 60;
[/CODE]

Simplez.

Now - to make the number increase or decrease. If you want to do this, you are going to need to use either
[CODE]
+=[/CODE]
or
[CODE]
-=[/CODE]
a value.

say we want to take off one number every second (like most minigames would want), we would write a piece of code like this...
[CODE]
if(timerTask &gt; 0) { //If the number timerTask is more than zero
timerTask -= 1; //Then take away one from the number.
}
[/CODE]

Code is self explainitory. So, when implemented, the number will go
[CODE]
60
59
58
57[/CODE]

Until we get to &quot;0&quot;, where it will stop at &quot;0&quot;

If you want your timer to be on a continous loop, we will need to reset the timer to a different value when it get&#39;s to zero.

[CODE]
if(timerTask == 0) { //If the timerTask int equals zero then...
timerTask = 60; //the int timerTask will automatically go back to 60 and loop again...
}[/CODE]

[B]Review:[/B]

We have so far got this code:

This is implemented at the top of the class -
[CODE]public int timerTask = 60;
[/CODE]
(DEPENDING ON WHAT YOU WANT)
We have looked at this code so far, but done NOTHING WITH IT.
[CODE]
if(timerTask &gt; 0) { //If the number timerTask is more than zero
timerTask -= 1; //Then take away one from the number.
}
[/CODE]
[CODE]
if(timerTask == 0) { //If the timerTask int equals zero then...
timerTask = 60; //the int timerTask will automatically go back to 60 and loop again...
}[/CODE]

Now it&#39;s time to do somthing with it.

TimerExecutor:
[CODE]
TimerExecutor.getSingleton().add(
	new Timer(time to run for in ms)
	{
		@Override
		public void execute()
		{
		if(timerTask &gt; 0) {
		timerTask -= 1;
		}
                if(timerTask == 0) {
                timerTask = 60;
                }
			this.setActive(true);
		}
	});
[/CODE]

For the above piece of code you will need to find a way to activate it first time yourself...

Process() users...

You will need to first double the &quot;60&quot; to 120

[CODE]public int timerTask = 120;[/CODE]

then place this under process()
[CODE]
		if(timerTask &gt; 0) {
		timerTask -= 1;
		}
                if(timerTask == 0) {
                timerTask = 120;
                }
[/CODE]

THE NUMBER IS DOUBLED BECAUSE PROCESS IS CALLED EVERY 500ms = half a second

Now we have a basic timer, fully explained that will count down from 60 to 0 on a timer and 120 to 0 on process() and the number is then reset to it&#39;s original number.

Now we have a timer we need to use it to our advantage. 

First off we shall need to use an isinarea boolean. This i cannot help you with, but can tell you how you can do it.

[CODE]
  public boolean inWantedArea() {
    if (absX &gt;= SMALLEST X SIZE &amp;&amp; absX &lt;= LARGEST X SIZE &amp;&amp; absY &gt;= SMALLEST Y SIZE &amp;&amp; absY &lt;= LARGEST Y SIZE) {
      return true;
    } else {
      return false;
    }
  }[/CODE]

Ok im now going to show you how to make a piece of code to make it so that if a player is inWantedArea(), he will be teleported when the timer is at 0.

We need to refer back to this.

[CODE]
		if(timerTask &gt; 0) {
		timerTask -= 1;
		}
//PIECE OF CODE NEEDED TO TELEPORT PEOPLE WHEN TIMER IS 0
                if(timerTask == 0) {
                timerTask = 120;
                }
//PIECE OF CODE NEEDED TO TELEPORT PEOPLE WHEN TIMER IS 0
[/CODE]

We want the teleport to occour when timerTask equals zero, and we want it to be so that it only teleports people in the area inWantedArea().

To do this we are again going to need a piece of code that checks if the players are there.

We can do this by using

[CODE]
if(inWantedArea()) { //if is inWantedArea then
toX = 100;
toY = 100; //To x &amp;&amp; y wherever you want.
}
[/CODE]

so now our code looks like:

[CODE]
		if(timerTask &gt; 0) {
		timerTask -= 1;
		}
//PIECE OF CODE NEEDED TO TELEPORT PEOPLE WHEN TIMER IS 0
                if(timerTask == 0) {
                timerTask = 120;
                if(inWantedArea()) { //if is inWantedArea then
                toX = 100;
                toY = 100; //To x &amp;&amp; y wherever you want.
                }
                }
//PIECE OF CODE NEEDED TO TELEPORT PEOPLE WHEN TIMER IS 0
[/CODE]

Simples.

[U]So now we have:[/U]
A 60 second timer / 120 at 500ms on a loop.
Waiting area 
A teleport from the waiting area.


Now we are going to add a piece of code to make the people who are already in the minigame teleport away.

Again, im afraid i cannot help you with the coordinated.

[CODE]  public boolean inMiniGame() {
    if (absX &gt;= SMALLEST X SIZE &amp;&amp; absX &lt;= LARGEST X SIZE &amp;&amp; absY &gt;= SMALLEST Y SIZE &amp;&amp; absY &lt;= LARGEST Y SIZE) {
      return true;
    } else {
      return false;
    }
  }[/CODE]

inWantedArea - Waiting area
inMiniGame - within the mini game.

So now if we want the players to teleport when the timer is 5 (which allows 5 seconds between players entering and exiting)

[CODE]if(timerTask == 10) { // if the int timerTask is 10 then...
if (inMiniGame()) { //If a player is in the minigame
sendMessage(&quot;Game Over!&quot;); //SEND MESSAGE MAY BE sM
toX = 100; 
toY = 100;// To X &amp;&amp; Y wherever.
}
}[/CODE]


So now our process / timer should look like this:

[CODE]
		if(timerTask &gt; 0) {
		timerTask -= 1;
		}
                if(timerTask == 0) {
                timerTask = 120;
                if(inWantedArea()) { //if is inWantedArea then
                toX = 100;
                toY = 100; //To x &amp;&amp; y wherever you want.
                }
                }
                if(timerTask == 10) { // if the int timerTask is 10 then...
                if (inMiniGame()) { //If a player is in the minigame
                sendMessage(&quot;Game Over!&quot;); //sendMessage MAY BE sM
                toX = 100; 
                toY = 100;// To X &amp;&amp; Y wherever.
                }
                }
[/CODE]

[U]So now we have:[/U]
A 60 second timer / 120 at 500ms on a loop.
Waiting area 
A teleport from the waiting area.
A teleport for people within the game when the 60 second timer is at 10 seconds.

This is an ideal base for any minigame. 

[SIZE=&quot;6&quot;][COLOR=&quot;Red&quot;]-----------------REQUESTED: INTERFACES-----------------[/COLOR][/SIZE]

How to add an interface displaying a timer.

First we have to make the interface walkable.

[CODE]
		setInterfaceWalkable(*INTERFACE ID*);
[/CODE]

In the case of wanting 3 lines of text at the top of a screen - like in castlewars, we can use interface 6673.

[CODE]
		setInterfaceWalkable(6673);
[/CODE]

Now we can walk when we want to display interface 6673.
Now to send the interface.

[CODE]
    		sendFrame126(&quot;            , 6570);// Need spaces to get it in line.
    		sendFrame126(&quot;&quot;, 6572);//Below
    		sendFrame126(&quot;&quot;, 6664);//Below
[/CODE]
Write whatever you want between your brackets

If you want the interface to always be displayed, put all of the code in the tags in a timer.

If not then on a timer add this

We need to check if the player is in the area so...
[CODE]
if(isInMinigame) { //if is in minigame then
}[/CODE]
then put the rest in between

[CODE]
if(isInMinigame) { //if is in minigame then
		setInterfaceWalkable(6673);
    		sendFrame126(&quot;            bla, 6570);// Need spaces to get it in line.
    		sendFrame126(&quot;bla&quot;, 6572);//Below
    		sendFrame126(&quot;bla&quot;, 6664);//Below
}[/CODE]

TO MAKE THE TIMER DISPLAY!

Take your sendframe

[CODE]
sendFrame126(&quot;&quot;, 6664);

[/CODE]

and after the second &quot; and before the , add +timerTask

Now it looks like this:

[CODE]
sendFrame126(&quot;Time till start:&quot;+timerTask, 6664);

[/CODE]

[SIZE=&quot;6&quot;]If you want anything else related to minigames PLEASE! post it below and i shall add.[/SIZE]

Credz 2 me</description>
    
    <lastBuildDate>Thu, 14 Apr 2011 22:49:05 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Any custom minigame base [INCLUDES USE OF TIMERS]</title>
        <dc:creator><![CDATA[@RunescapeBR RunescapeBR]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/runescapebr">@RunescapeBR</a> wrote:</p>
          <blockquote>
              <aside class="quote quote-modified" data-post="15" data-topic="390491">
<div class="title">
<div class="quote-controls"></div>
 Bill_:</div>
<blockquote>
<p>Videos take so long though and you have to explain everything…</p>
</blockquote>
</aside>
<p>You don’t have to explain it, just zoom in on you working on the codes, and we can follow with the written guide you have here.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491/16">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491/16</link>
        <pubDate>Thu, 14 Apr 2011 22:49:05 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-390491-16</guid>
        <source url="https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491.rss">Any custom minigame base [INCLUDES USE OF TIMERS]</source>
      </item>
      <item>
        <title>Any custom minigame base [INCLUDES USE OF TIMERS]</title>
        <dc:creator><![CDATA[@Bill1 Bill_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/bill1">@Bill1</a> wrote:</p>
          <blockquote>
              <p>[quote=“RunescapeBR, post:13, topic:390491”]I couldn’t get this to work. It came up with several errors.</p>
<p>If you have any spare time, do you think you could just make a video on it? It’d be much better for us noobs.</p>
<p>Thanks. :P[/quote]</p>
<p>Videos take so long though and you have to explain everything…</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491/15">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491/15</link>
        <pubDate>Thu, 14 Apr 2011 22:20:14 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-390491-15</guid>
        <source url="https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491.rss">Any custom minigame base [INCLUDES USE OF TIMERS]</source>
      </item>
      <item>
        <title>Any custom minigame base [INCLUDES USE OF TIMERS]</title>
        <dc:creator><![CDATA[@farme farme]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/farme">@farme</a> wrote:</p>
          <blockquote>
              <p>Try to learn a bit java before trying to code it then?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491/14">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491/14</link>
        <pubDate>Thu, 14 Apr 2011 19:05:28 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-390491-14</guid>
        <source url="https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491.rss">Any custom minigame base [INCLUDES USE OF TIMERS]</source>
      </item>
      <item>
        <title>Any custom minigame base [INCLUDES USE OF TIMERS]</title>
        <dc:creator><![CDATA[@RunescapeBR RunescapeBR]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/runescapebr">@RunescapeBR</a> wrote:</p>
          <blockquote>
              <p>I couldn’t get this to work. It came up with several errors.</p>
<p>If you have any spare time, do you think you could just make a video on it? It’d be much better for us noobs.</p>
<p>Thanks. <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491/13">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491/13</link>
        <pubDate>Thu, 14 Apr 2011 18:01:50 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-390491-13</guid>
        <source url="https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491.rss">Any custom minigame base [INCLUDES USE OF TIMERS]</source>
      </item>
      <item>
        <title>Any custom minigame base [INCLUDES USE OF TIMERS]</title>
        <dc:creator><![CDATA[@Bill1 Bill_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/bill1">@Bill1</a> wrote:</p>
          <blockquote>
              <p>[quote=“Clawz fury, post:11, topic:390491”][quote author=Bill_ link=topic=486403.msg3566310#msg3566310 date=1302675616]<br>
That is for if you don’t have timertask. Look above it.<br>
[/quote]<br>
What? anyone can use the Timer/TimerTask classes; just import them from the Java library?</p>
<p><code>import java.util.Timer;
import java.util.TimerTask;</code>[/quote]</p>
<p>Sorry, meant timerexecutor</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491/12">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491/12</link>
        <pubDate>Thu, 14 Apr 2011 15:04:20 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-390491-12</guid>
        <source url="https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491.rss">Any custom minigame base [INCLUDES USE OF TIMERS]</source>
      </item>
      <item>
        <title>Any custom minigame base [INCLUDES USE OF TIMERS]</title>
        <dc:creator><![CDATA[@Clawz_fury lare69]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/clawz_fury">@Clawz_fury</a> wrote:</p>
          <blockquote>
              <aside class="quote quote-modified" data-post="10" data-topic="390491">
<div class="title">
<div class="quote-controls"></div>
 Bill_:</div>
<blockquote>
<p>That is for if you don’t have timertask. Look above it.</p>
</blockquote>
</aside>
<p>What? anyone can use the Timer/TimerTask classes; just import them from the Java library?</p>
<p><code>import java.util.Timer;
import java.util.TimerTask;</code></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491/11">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491/11</link>
        <pubDate>Wed, 13 Apr 2011 22:10:10 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-390491-11</guid>
        <source url="https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491.rss">Any custom minigame base [INCLUDES USE OF TIMERS]</source>
      </item>
      <item>
        <title>Any custom minigame base [INCLUDES USE OF TIMERS]</title>
        <dc:creator><![CDATA[@Bill1 Bill_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/bill1">@Bill1</a> wrote:</p>
          <blockquote>
              <p>That is for if you don’t have timertask. Look above it.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491/10</link>
        <pubDate>Wed, 13 Apr 2011 06:20:16 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-390491-10</guid>
        <source url="https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491.rss">Any custom minigame base [INCLUDES USE OF TIMERS]</source>
      </item>
      <item>
        <title>Any custom minigame base [INCLUDES USE OF TIMERS]</title>
        <dc:creator><![CDATA[@Clawz_fury lare69]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/clawz_fury">@Clawz_fury</a> wrote:</p>
          <blockquote>
              <p>[quote=“Bill_, post:1, topic:390491”]then place this under process()</p>
<p><code>
		if(timerTask &gt; 0) {
		timerTask -= 1;
		}
                if(timerTask == 0) {
                timerTask = 120;
                }
</code>[/quote]<br>
Yeah, because that’s totally not shoving crap in process, and that’s using classes from the Java library right?<br>
It also doesn’t matter whether you are doubling the number or not.</p>
<p>Why?</p>
<p>[quote=“Graham”]You may be wondering why I say process() is unreliable for timing. Process() is called every 500ms. The main server loop ensures this. If you have a look at the code, you even see it takes into account the previous processing time.</p>
<p>For instance on a large server, a situation like this happens:</p>
<ol>
<li>
<p>Players are being processed, there are hundreds so it takes a long time. (E.g. 200 ms).</p>
</li>
<li>
<p>Server sleeps for 300 ms</p>
</li>
</ol>
<p>That means the total execution time of the loop would have been 500ms, meaning a stable call to the player processing every 500 ms.</p>
<p>Now we are going to step through your server and see what actually happens when the players are processed.</p>
<p>In the server class, you will see this call in the main server loop:</p>
<pre><code class="lang-auto"></code></pre>
<p>That’s being called every 500ms and runs in a stable loop.</p>
<p>So lets go to the PlayerHandler class, and see what the process() there is actually doing.</p>
<p>It is pretty complicated and scary, but we are looking for this part:</p>
<p>[code=java]<br>
for(int i = 0; i &lt; MAXIMUM_PLAYERS; i++) {<br>
if(players[i] == null) continue;</p>
<pre><code>		players[i].actionAmount--;

		players[i].preProcessing();
		while(players[i].process());
		players[i].postProcessing();[/code]
</code></pre>
<p>If you can see, players[i].process is being called in a while loop. That means it could be called multiple times. So our process() method in the client class, which some people use for timing could actually be run more than once every 500ms, making unreliable timers! Your timers could be running twice, three times or four times as fast!</p>
<p>As it runs on a while loop, whenever true is returned, it runs a second time. If you see, true is returned whenever a whole packet is read.</p>
<p>That means, a clever bot (or player), could send a huge amount of packets in 500 ms. Maybe 10. Maybe 20. And then that would cause process() to be called 10 or 20 times a second. Maybe every 30, 40 or 50!</p>
<p>In fact, you don’t even need a bot to do this. Mass clicking will do. So that means, your process() timers could be running anywhere from 10x - 50x faster than they should with a clever player!</p>
<p>That is why process() is a complete failure for putting timers. In fact, in my opinion, you should only put packet processing code there.</p>
<p>Also, if you put lots of timers (that don’t run often), there is little point. Why have it consuming CPU power when you could put them in a list (array) of events?[/quote]</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491/9</link>
        <pubDate>Wed, 13 Apr 2011 01:37:41 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-390491-9</guid>
        <source url="https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491.rss">Any custom minigame base [INCLUDES USE OF TIMERS]</source>
      </item>
      <item>
        <title>Any custom minigame base [INCLUDES USE OF TIMERS]</title>
        <dc:creator><![CDATA[@Bill1 Bill_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/bill1">@Bill1</a> wrote:</p>
          <blockquote>
              <p>[quote=“Clawz fury, post:7, topic:390491”]Also, why not use the t/tt classes instead of shoving stuff in process? (It’s proven process is inaccurate for timing)</p>
<p>If you don’t know what I am talking about, I’ll be releasing a Zombie Minigame and you can see it in there.[/quote]</p>
<p>…i did</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491/8</link>
        <pubDate>Tue, 12 Apr 2011 14:53:59 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-390491-8</guid>
        <source url="https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491.rss">Any custom minigame base [INCLUDES USE OF TIMERS]</source>
      </item>
      <item>
        <title>Any custom minigame base [INCLUDES USE OF TIMERS]</title>
        <dc:creator><![CDATA[@Clawz_fury lare69]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/clawz_fury">@Clawz_fury</a> wrote:</p>
          <blockquote>
              <p>Also, why not use the t/tt classes instead of shoving stuff in process? (It’s proven process is inaccurate for timing)</p>
<p>If you don’t know what I am talking about, I’ll be releasing a Zombie Minigame and you can see it in there.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491/7</link>
        <pubDate>Tue, 12 Apr 2011 11:18:18 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-390491-7</guid>
        <source url="https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491.rss">Any custom minigame base [INCLUDES USE OF TIMERS]</source>
      </item>
      <item>
        <title>Any custom minigame base [INCLUDES USE OF TIMERS]</title>
        <dc:creator><![CDATA[@Bill1 Bill_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/bill1">@Bill1</a> wrote:</p>
          <blockquote>
              <aside class="quote quote-modified" data-post="4" data-topic="390491">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/deathschaos9/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> deathschaos9:</div>
<blockquote>
<p>We already have several castle wars tutorials. Since we don’t need anymore, I’ve removed that part of your post. I’ve also cleaned up and renamed the remaining tutorial.</p>
</blockquote>
</aside>
<p>Thanks bro, yea your right - it isn’t needed</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491/6</link>
        <pubDate>Tue, 12 Apr 2011 06:21:40 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-390491-6</guid>
        <source url="https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491.rss">Any custom minigame base [INCLUDES USE OF TIMERS]</source>
      </item>
      <item>
        <title>Any custom minigame base [INCLUDES USE OF TIMERS]</title>
        <dc:creator><![CDATA[@Loveandpower Loveandpower]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/loveandpower">@Loveandpower</a> wrote:</p>
          <blockquote>
              <p>This isn’t too bad. I hope somebody can make something unique using this. <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>Going to link a couple of friends with this.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491/5</link>
        <pubDate>Tue, 12 Apr 2011 00:00:03 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-390491-5</guid>
        <source url="https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491.rss">Any custom minigame base [INCLUDES USE OF TIMERS]</source>
      </item>
      <item>
        <title>Any custom minigame base [INCLUDES USE OF TIMERS]</title>
        <dc:creator><![CDATA[@deathschaos9 DeathsChaos9]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/deathschaos9">@deathschaos9</a> wrote:</p>
          <blockquote>
              <p>We already have several castle wars tutorials. Since we don’t need anymore, I’ve removed that part of your post. I’ve also cleaned up and renamed the remaining tutorial.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491/4</link>
        <pubDate>Mon, 11 Apr 2011 21:41:34 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-390491-4</guid>
        <source url="https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491.rss">Any custom minigame base [INCLUDES USE OF TIMERS]</source>
      </item>
      <item>
        <title>Any custom minigame base [INCLUDES USE OF TIMERS]</title>
        <dc:creator><![CDATA[@Bill1 Bill_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/bill1">@Bill1</a> wrote:</p>
          <blockquote>
              <aside class="quote quote-modified" data-post="2" data-topic="390491">
<div class="title">
<div class="quote-controls"></div>
 jmood128:</div>
<blockquote>
<p>You should use a tick based event manager…</p>
</blockquote>
</aside>
<p>This was before it was released. Now i do <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491/3</link>
        <pubDate>Mon, 11 Apr 2011 16:06:44 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-390491-3</guid>
        <source url="https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491.rss">Any custom minigame base [INCLUDES USE OF TIMERS]</source>
      </item>
      <item>
        <title>Any custom minigame base [INCLUDES USE OF TIMERS]</title>
        <dc:creator><![CDATA[@doom_j doom_j]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/doom_j">@doom_j</a> wrote:</p>
          <blockquote>
              <p>You should use a tick based event manager…</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491/2</link>
        <pubDate>Mon, 11 Apr 2011 16:03:50 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-390491-2</guid>
        <source url="https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491.rss">Any custom minigame base [INCLUDES USE OF TIMERS]</source>
      </item>
      <item>
        <title>Any custom minigame base [INCLUDES USE OF TIMERS]</title>
        <dc:creator><![CDATA[@Bill1 Bill_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/bill1">@Bill1</a> wrote:</p>
          <blockquote>
              <p>Spent a while typing this out. Is a bit dull and boring. DONT NAGG ABOUT CONVENTIONS.</p>
<p>Purpose: Base for any minigame…<br>
Difficulty: 1 - if you don’t understand after this, don’t hesitate to PM me…<br>
Assumed Knowledge: The ability to read and to be able to implement it into your own server.<br>
Server Base: -<br>
Classes Modified: Depends what source…</p>
<p>To start with, i am going to esume you have an eventmanager or similar. I am going to use tj007’s timer. I shall also show an example of using process (for those who choose not to use eventmanager or similar)</p>
<p>Ok so lets begin. We are first going to implement a timer. (If you didn’t know by now, this tutorial is basics)</p>
<p>To start with, we need to have an int/long which will allow us to have a number and edit it.</p>
<p>Public static int is allowed to be changed, whereas Public final static int is NOT allowed to be changed.</p>
<p>So i shall create an int called timerTask.</p>
<pre><code class="lang-auto">public int timerTask;</code></pre>
<p>Naturally when you create a piece of code like that, the defult value will be 0.</p>
<p>If you would like the value to be somthing different - say 60 - then you would write it like this</p>
<pre><code class="lang-auto">public int timerTask = 60;</code></pre>
<p>Simplez.</p>
<p>Now - to make the number increase or decrease. If you want to do this, you are going to need to use either</p>
<p><code>
+=</code><br>
or</p>
<p><code>
-=</code><br>
a value.</p>
<p>say we want to take off one number every second (like most minigames would want), we would write a piece of code like this…</p>
<pre><code class="lang-auto">if(timerTask &gt; 0) { //If the number timerTask is more than zero
timerTask -= 1; //Then take away one from the number.
}</code></pre>
<p>Code is self explainitory. So, when implemented, the number will go</p>
<p><code>
60
59
58
57</code></p>
<p>Until we get to “0”, where it will stop at “0”</p>
<p>If you want your timer to be on a continous loop, we will need to reset the timer to a different value when it get’s to zero.</p>
<pre><code class="lang-auto">if(timerTask == 0) { //If the timerTask int equals zero then...
timerTask = 60; //the int timerTask will automatically go back to 60 and loop again...
}[/CODE]

[B]Review:[/B]

We have so far got this code:

This is implemented at the top of the class -
[CODE]public int timerTask = 60;</code></pre>
<p>(DEPENDING ON WHAT YOU WANT)<br>
We have looked at this code so far, but done NOTHING WITH IT.</p>
<pre><code class="lang-auto">if(timerTask &gt; 0) { //If the number timerTask is more than zero
timerTask -= 1; //Then take away one from the number.
}</code></pre>
<p><code>
if(timerTask == 0) { //If the timerTask int equals zero then...
timerTask = 60; //the int timerTask will automatically go back to 60 and loop again...
}</code></p>
<p>Now it’s time to do somthing with it.</p>
<p>TimerExecutor:</p>
<pre><code class="lang-auto">TimerExecutor.getSingleton().add(
	new Timer(time to run for in ms)
	{
		@Override
		public void execute()
		{
		if(timerTask &gt; 0) {
		timerTask -= 1;
		}
                if(timerTask == 0) {
                timerTask = 60;
                }
			this.setActive(true);
		}
	});</code></pre>
<p>For the above piece of code you will need to find a way to activate it first time yourself…</p>
<p>Process() users…</p>
<p>You will need to first double the “60” to 120</p>
<pre><code class="lang-auto"></code></pre>
<p>then place this under process()</p>
<pre><code class="lang-auto">		if(timerTask &gt; 0) {
		timerTask -= 1;
		}
                if(timerTask == 0) {
                timerTask = 120;
                }</code></pre>
<p>THE NUMBER IS DOUBLED BECAUSE PROCESS IS CALLED EVERY 500ms = half a second</p>
<p>Now we have a basic timer, fully explained that will count down from 60 to 0 on a timer and 120 to 0 on process() and the number is then reset to it’s original number.</p>
<p>Now we have a timer we need to use it to our advantage.</p>
<p>First off we shall need to use an isinarea boolean. This i cannot help you with, but can tell you how you can do it.</p>
<p><code>
  public boolean inWantedArea() {
    if (absX &gt;= SMALLEST X SIZE &amp;&amp; absX &lt;= LARGEST X SIZE &amp;&amp; absY &gt;= SMALLEST Y SIZE &amp;&amp; absY &lt;= LARGEST Y SIZE) {
      return true;
    } else {
      return false;
    }
  }</code></p>
<p>Ok im now going to show you how to make a piece of code to make it so that if a player is inWantedArea(), he will be teleported when the timer is at 0.</p>
<p>We need to refer back to this.</p>
<pre><code class="lang-auto">		if(timerTask &gt; 0) {
		timerTask -= 1;
		}
//PIECE OF CODE NEEDED TO TELEPORT PEOPLE WHEN TIMER IS 0
                if(timerTask == 0) {
                timerTask = 120;
                }
//PIECE OF CODE NEEDED TO TELEPORT PEOPLE WHEN TIMER IS 0</code></pre>
<p>We want the teleport to occour when timerTask equals zero, and we want it to be so that it only teleports people in the area inWantedArea().</p>
<p>To do this we are again going to need a piece of code that checks if the players are there.</p>
<p>We can do this by using</p>
<pre><code class="lang-auto">if(inWantedArea()) { //if is inWantedArea then
toX = 100;
toY = 100; //To x &amp;&amp; y wherever you want.
}</code></pre>
<p>so now our code looks like:</p>
<pre><code class="lang-auto">		if(timerTask &gt; 0) {
		timerTask -= 1;
		}
//PIECE OF CODE NEEDED TO TELEPORT PEOPLE WHEN TIMER IS 0
                if(timerTask == 0) {
                timerTask = 120;
                if(inWantedArea()) { //if is inWantedArea then
                toX = 100;
                toY = 100; //To x &amp;&amp; y wherever you want.
                }
                }
//PIECE OF CODE NEEDED TO TELEPORT PEOPLE WHEN TIMER IS 0</code></pre>
<p>Simples.</p>
<p><span class="bbcode-u">So now we have:</span><br>
A 60 second timer / 120 at 500ms on a loop.<br>
Waiting area<br>
A teleport from the waiting area.</p>
<p>Now we are going to add a piece of code to make the people who are already in the minigame teleport away.</p>
<p>Again, im afraid i cannot help you with the coordinated.</p>
<p><code>  public boolean inMiniGame() {
    if (absX &gt;= SMALLEST X SIZE &amp;&amp; absX &lt;= LARGEST X SIZE &amp;&amp; absY &gt;= SMALLEST Y SIZE &amp;&amp; absY &lt;= LARGEST Y SIZE) {
      return true;
    } else {
      return false;
    }
  }</code></p>
<p>inWantedArea - Waiting area<br>
inMiniGame - within the mini game.</p>
<p>So now if we want the players to teleport when the timer is 5 (which allows 5 seconds between players entering and exiting)</p>
<p><code>if(timerTask == 10) { // if the int timerTask is 10 then...
if (inMiniGame()) { //If a player is in the minigame
sendMessage("Game Over!"); //SEND MESSAGE MAY BE sM
toX = 100; 
toY = 100;// To X &amp;&amp; Y wherever.
}
}</code></p>
<p>So now our process / timer should look like this:</p>
<pre><code class="lang-auto">		if(timerTask &gt; 0) {
		timerTask -= 1;
		}
                if(timerTask == 0) {
                timerTask = 120;
                if(inWantedArea()) { //if is inWantedArea then
                toX = 100;
                toY = 100; //To x &amp;&amp; y wherever you want.
                }
                }
                if(timerTask == 10) { // if the int timerTask is 10 then...
                if (inMiniGame()) { //If a player is in the minigame
                sendMessage("Game Over!"); //sendMessage MAY BE sM
                toX = 100; 
                toY = 100;// To X &amp;&amp; Y wherever.
                }
                }</code></pre>
<p><span class="bbcode-u">So now we have:</span><br>
A 60 second timer / 120 at 500ms on a loop.<br>
Waiting area<br>
A teleport from the waiting area.<br>
A teleport for people within the game when the 60 second timer is at 10 seconds.</p>
<p>This is an ideal base for any minigame.</p>
<p>[SIZE=“6”][COLOR=“Red”]-----------------REQUESTED: INTERFACES-----------------[/COLOR][/SIZE]</p>
<p>How to add an interface displaying a timer.</p>
<p>First we have to make the interface walkable.</p>
<pre><code class="lang-auto">		setInterfaceWalkable(*INTERFACE ID*);</code></pre>
<p>In the case of wanting 3 lines of text at the top of a screen - like in castlewars, we can use interface 6673.</p>
<pre><code class="lang-auto">		setInterfaceWalkable(6673);</code></pre>
<p>Now we can walk when we want to display interface 6673.<br>
Now to send the interface.</p>
<pre><code class="lang-auto">    		sendFrame126("            , 6570);// Need spaces to get it in line.
    		sendFrame126("", 6572);//Below
    		sendFrame126("", 6664);//Below</code></pre>
<p>Write whatever you want between your brackets</p>
<p>If you want the interface to always be displayed, put all of the code in the tags in a timer.</p>
<p>If not then on a timer add this</p>
<p>We need to check if the player is in the area so…</p>
<p><code>
if(isInMinigame) { //if is in minigame then
}</code><br>
then put the rest in between</p>
<p><code>
if(isInMinigame) { //if is in minigame then
		setInterfaceWalkable(6673);
    		sendFrame126("            bla, 6570);// Need spaces to get it in line.
    		sendFrame126("bla", 6572);//Below
    		sendFrame126("bla", 6664);//Below
}</code></p>
<p>TO MAKE THE TIMER DISPLAY!</p>
<p>Take your sendframe</p>
<pre><code class="lang-auto">sendFrame126("", 6664);
</code></pre>
<p>and after the second " and before the , add +timerTask</p>
<p>Now it looks like this:</p>
<pre><code class="lang-auto">sendFrame126("Time till start:"+timerTask, 6664);
</code></pre>
<p>[SIZE=“6”]If you want anything else related to minigames PLEASE! post it below and i shall add.[/SIZE]</p>
<p>Credz 2 me</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491/1</link>
        <pubDate>Mon, 11 Apr 2011 15:50:10 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-390491-1</guid>
        <source url="https://forum.moparisthebest.com/t/any-custom-minigame-base-includes-use-of-timers/390491.rss">Any custom minigame base [INCLUDES USE OF TIMERS]</source>
      </item>
  </channel>
</rss>
