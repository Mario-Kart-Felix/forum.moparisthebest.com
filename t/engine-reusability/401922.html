<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/engine-reusability/401922 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Aug 2019 15:24:51 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Engine Reusability? - General Programming - moparisthebest.com</title>
    <meta name="description" content="So In the process of creating a simple game, I&amp;#39;m trying to create a game engine as well so I could reuse a majority of it later on. Would it be better to have the main loop inside the engine with some virtual methods to &amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="401922.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Engine Reusability?&#39;" href="401922.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/engine-reusability/401922" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/engine-reusability/401922" />
<meta property="og:title" content="Engine Reusability?" />
<meta name="twitter:title" content="Engine Reusability?" />
<meta property="og:description" content="So In the process of creating a simple game, I’m trying to create a game engine as well so I could reuse a majority of it later on. Would it be better to have the main loop inside the engine with some virtual methods to override if you want some processing done in between? Or let the user control the loop…  I.E.  [code=cpp]#include “engine/GameEngine.h”  int main(int argc, char* argv[]) {  GameEngine engine;  if(engine.initialize()) { 	long last_tick = SDL_GetTicks();  	while(engine.is_running()..." />
<meta name="twitter:description" content="So In the process of creating a simple game, I’m trying to create a game engine as well so I could reuse a majority of it later on. Would it be better to have the main loop inside the engine with some virtual methods to override if you want some processing done in between? Or let the user control the loop…  I.E.  [code=cpp]#include “engine/GameEngine.h”  int main(int argc, char* argv[]) {  GameEngine engine;  if(engine.initialize()) { 	long last_tick = SDL_GetTicks();  	while(engine.is_running()..." />
<meta property="article:published_time" content="2011-07-02T03:54:16+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="401922.html">Engine Reusability?</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/general-programming.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>General Programming</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/HcoJustin.html'><span itemprop='name'>HcoJustin</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-07-02T03:54:16Z'>
            <time itemprop='dateModified' datetime='2016-08-01T12:49:23Z' class='post-time'>
              August 1, 2016, 12:49pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>So In the process of creating a simple game, I’m trying to create a game engine as well so I could reuse a majority of it later on. Would it be better to have the main loop inside the engine with some virtual methods to override if you want some processing done in between? Or let the user control the loop…</p>
<p>I.E.</p>
<p>[code=cpp]<span class="hashtag">#include</span> “engine/GameEngine.h”</p>
<p>int main(int argc, char* argv[]) {<br>
GameEngine engine;</p>
<pre><code>if(engine.initialize()) {
	long last_tick = SDL_GetTicks();

	while(engine.is_running()) {
		engine.poll_events();

		long this_tick = SDL_GetTicks();
		float delta = this_tick - last_tick;
		last_tick = this_tick;

		engine.update(delta);
		engine.render(delta);
	}
	engine.cleanup();
	return 0;
} else {
	engine.cleanup();
	return 1;
}
</code></pre>
<p>}[/code]</p>
<p>or something like</p>
<p>[code=cpp]<span class="hashtag">#include</span> “engine/GameEngine.h”</p>
<p>int main(int argc, char* argv[]) {<br>
GameEngine engine;</p>
<pre><code>if(engine.initialize()) {
	engine.start();
	return 0;
} else {
	engine.cleanup();
	return 1;
}
</code></pre>
<p>}[/code]</p>
<p>And have a pre/post_update/render method</p>
      </div>

      <meta itemprop='headline' content='Engine Reusability?'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Tu1.html'><span itemprop='name'>Tu1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-07-02T05:15:41Z'>
            <time itemprop='dateModified' datetime='2016-08-01T12:49:26Z' class='post-time'>
              August 1, 2016, 12:49pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>this is what i was thinking about doing but idk if it’s good idk if it works either i wrote it in the textbox</p>
<p>it could give you can idea though i got the design from another engine i was playing around with</p>
<pre><code class="lang-auto">// define directives

class Engine
{
  public:
    virtual bool Init();
    virtual int Clean();
};

class App : public Engine
{
  public:
    int Main(int, char**);
    bool Init();
    int Clean();
};

bool App::Init()
{
  return Engine::Init();
}

int App::Main(int argc, char *argv[])
{
  Init();

  SDL_Event event;

  while(1)
  {
    Event(&amp;event);
    Logic();
    Render();
  }

  return Clean();
}

int App::Clean()
{
  return Engine::Clean();
}

int main(int argc, char *argv[])
{
  App app;
  return app.Main(argc, argv);
}</code></pre>
<p>this is what i am using now it’s nothing like the one above because i am just trying to write a framework i can use</p>
<pre><code class="lang-auto">#include "App.h"

App::App()
{
  Init();
}

App::~App()
{
  Close();
}

bool App::Load()
{
  Player.SetType(TYPE_PLAYER);
  Stick.SetType(TYPE_OBJECT);
  
  return 1;
}

void App::Render()
{
  G.FillScreen(0, 0, 0);
  
  for(int i = 0; i &lt; (int) Entity::EntityList.size(); i++)
  {
    if(!Entity::EntityList[i]) continue;
    Entity::EntityList[i]-&gt;CalculateDirection();
    Entity::EntityList[i]-&gt;Render(G.GetScreen());
  }
  
  G.UpdateScreen();
  SDL_Delay(20);
}

void App::Logic()
{
  if(Player.CollidesWith(&amp;Stick) == true)
  {
  }
  
  for(int i = 0; i &lt; (int) Entity::EntityList.size(); i++)
  {
    if(!Entity::EntityList[i]) continue;
    Entity::EntityList[i]-&gt;Logic();
  }
}

void App::Event()
{
    while(SDL_PollEvent(&amp;E))
    {
      switch(E.type)
      {
        case SDL_QUIT:
          Running = false;
          break;
        case SDL_KEYDOWN:
          switch(E.key.keysym.sym)
          {
            case SDLK_UP:
              Player.Move(DIR_UP);
              break;
            case SDLK_DOWN:
              Player.Move(DIR_DOWN);
              break;
            case SDLK_LEFT:
              Player.Move(DIR_LEFT);
              break;
            case SDLK_RIGHT:
              Player.Move(DIR_RIGHT);
              break;
          }
          break;
        case SDL_KEYUP:
          switch(E.key.keysym.sym)
          {
            case SDLK_UP:
              Player.Move(DIR_DOWN);
              break;
            case SDLK_DOWN:
              Player.Move(DIR_UP);
              break;
            case SDLK_LEFT:
              Player.Move(DIR_RIGHT);
              break;
            case SDLK_RIGHT:
              Player.Move(DIR_LEFT);
              break;
          }
          break;
      }
    }
}

int App::Main(int argc, char *argv[])
{
  SDL_Event event;
  
  while(Running)
  {
    Event();
    Logic();
    Render();
  }
  
  return 0;
}

bool App::Init()
{
  G.Init();
  G.CreateScreen(640, 480, 0, "Title");
  Running = true;
  Load();
  
  return 1;
}

void App::Close()
{
  for(int i = 0; i &lt; (int) Entity::EntityList.size(); i++)
  {
    if(!Entity::EntityList[i]) continue;
    Entity::EntityList[i]-&gt;FreeBuffer();
  }
}</code></pre>
      </div>

      <meta itemprop='headline' content='Engine Reusability?'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/_s11.html'><span itemprop='name'>_s11</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-07-02T14:37:26Z'>
            <time itemprop='dateModified' datetime='2016-08-01T12:50:08Z' class='post-time'>
              August 1, 2016, 12:50pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Tu, App::Main -_-</p>
<p><span class="mention">@OP</span>, personally i keep the game loop hidden for no real reason, it just seems a bit cleaner. and instead of your overriding idea, you could create a callback registering system where each callback registered is invoked during the game loop (perhaps allow the user to specify when the callback should be executed ie. pre-rendering etc.)</p>
      </div>

      <meta itemprop='headline' content='Engine Reusability?'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/HcoJustin.html'><span itemprop='name'>HcoJustin</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-07-02T22:45:49Z'>
            <time itemprop='dateModified' datetime='2016-08-01T12:51:05Z' class='post-time'>
              August 1, 2016, 12:51pm
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote="<em>s, post:3, topic:401922"]Tu, App::Main -</em>-</p>
<p><span class="mention">@OP</span>, personally i keep the game loop hidden for no real reason, it just seems a bit cleaner. and instead of your overriding idea, you could create a callback registering system where each callback registered is invoked during the game loop (perhaps allow the user to specify when the callback should be executed ie. pre-rendering etc.)[/quote]</p>
<p>Ahh I had forgotten about callbacks, thanks</p>
      </div>

      <meta itemprop='headline' content='Engine Reusability?'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Jython.html'><span itemprop='name'>Jython</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-07-03T00:21:23Z'>
            <time itemprop='dateModified' datetime='2016-08-01T12:51:11Z' class='post-time'>
              August 1, 2016, 12:51pm
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>an engine should have update-display frames</p>
      </div>

      <meta itemprop='headline' content='Engine Reusability?'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/engine-reusability/401922 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Aug 2019 15:24:52 GMT -->
</html>
