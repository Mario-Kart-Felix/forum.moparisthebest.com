<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Banking bug [PI]</title>
    <link>https://forum.moparisthebest.com/t/banking-bug-pi/506683</link>
    <description>This is a very obvious, and well known issue, and it works with any item, assuming you manage to collect 2,147,483,647 of that item, and more in your bank (and vice versa).
If you don&#39;t know it, however, here&#39;s an explanation.

Say I&#39;ve got 1.5B coins in my bank.
and another 2.0B in my inventory.
If I withdraw, or bank, all the money (withdraw all 1.5B, or bank the 2.0B) will be added together, and obviously be over the value above.
Now the remainder between the added values, (assuming they are 1,500,000,000 and 2,000,000,000) 3.5B, is subtracted from the maximum number if an int (above). that equals: -1,352,516,353. Say this is one of your players (assuming it&#39;s not a money based eco). They&#39;d obviously be pissed on the loss of over 1b coins. What I need help is developing something in the bank(all of em) class(es) to prevent this. It&#39;d prevent it by checking if the 2 are equal to, or over, the max int. If it is, the max int is put in the bank (or taken out, depending on what type of transaction you were doing), and the rests sits in the bank (or in the inventory), and sends a message saying &quot;Bank Full&quot; or &quot;Inventory Full&quot;</description>
    
    <lastBuildDate>Sat, 09 Mar 2013 16:31:28 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/banking-bug-pi/506683.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Banking bug [PI]</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <p>[quote=“JavaLearner, post:11, topic:506683”]Or in your ItemAssisant, make a new int array with the most frequent items which can go over the max value of an Integer.</p>
<p>Like</p>
<pre><code class="lang-auto"></code></pre>
<p>In your fromBank method, after your</p>
<pre><code class="lang-auto"></code></pre>
<p>Add:</p>
<p><code>for(int i = 0; i &lt; maxItems.length; i++){
				if(itemID == maxItems[i]){
				      if(c.getItems().getItemAmount(itemID) + amount &gt; Integer.MAX_VALUE)
						c.sendMessage("You have too much money in your inventory");
                                                return;
				}
			}</code></p>
<p>I haven’t checked if this works.<br>
This was made in 3 minutes, no flames… Constructive criticism is always welcome.[/quote]</p>
<p>Hmm, I like the idea.<br>
I might modify it the tiniest of bits, but from what I see, this <span class="bbcode-i">should</span> work.</p>
<p>I found this in my bankItem method:</p>
<pre><code class="lang-auto">				if (!alreadyInBank &amp;&amp; freeBankSlots() &gt; 0) {
						for (int i=0; i&lt;Config.BANK_SIZE; i++) {
							if (c.bankItems[i] &lt;= 0) {
									toBankSlot = i;
									i=Config.BANK_SIZE+1;
							}
						}
						c.bankItems[toBankSlot] = c.playerItems[fromSlot];
						if (c.playerItemsN[fromSlot]&lt;amount){
							amount = c.playerItemsN[fromSlot];
						}
						if ((c.bankItemsN[toBankSlot] + amount) &lt;= Config.MAXITEM_AMOUNT &amp;&amp; (c.bankItemsN[toBankSlot] + amount) &gt; -1) {
							c.bankItemsN[toBankSlot] += amount;
						} else {
							c.sendMessage("Bank full!");
							return false;
						}
						deleteItem((c.playerItems[fromSlot]-1), fromSlot, amount);
						resetTempItems();
						resetBank();
						return true;
				}
				else if (alreadyInBank) {
						if ((c.bankItemsN[toBankSlot] + amount) &lt;= Config.MAXITEM_AMOUNT &amp;&amp; (c.bankItemsN[toBankSlot] + amount) &gt; -1) {
							c.bankItemsN[toBankSlot] += amount;
						} else {
							c.sendMessage("Bank full!");
							return false;
						}
						deleteItem((c.playerItems[fromSlot]-1), fromSlot, amount);
						resetTempItems();
						resetBank();
						return true;
				} else {
						c.sendMessage("Bank full!");
						return false;
				}</code></pre>
<p>I don’t know what parts work and what parts don’t.<br>
All I know is that if I try to store more than Config.MAXITEM_AMOUNT. It says bank full.<br>
That’s what I need for my from bank method <img src="https://forum.moparisthebest.com/images/emoji/twitter/frowning.png?v=5" title=":frowning:" class="emoji" alt=":frowning:"></p>
<p><a class="mention" href="/u/java">@Java</a>,<br>
I can’t withdraw money with the code you supplied me, I’d assume that applies to all items I’d put in the array</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/banking-bug-pi/506683/12">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/banking-bug-pi/506683/12</link>
        <pubDate>Sat, 09 Mar 2013 16:31:28 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-506683-12</guid>
        <source url="https://forum.moparisthebest.com/t/banking-bug-pi/506683.rss">Banking bug [PI]</source>
      </item>
      <item>
        <title>Banking bug [PI]</title>
        <dc:creator><![CDATA[@JavaLearner JavaLearner]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/javalearner">@JavaLearner</a> wrote:</p>
          <blockquote>
              <p>Or in your ItemAssisant, make a new int array with the most frequent items which can go over the max value of an Integer.</p>
<p>Like</p>
<pre><code class="lang-auto"></code></pre>
<p>In your fromBank method, after your</p>
<pre><code class="lang-auto"></code></pre>
<p>Add:</p>
<p><code>for(int i = 0; i &lt; maxItems.length; i++){
				if(itemID == maxItems[i]){
				      if(c.getItems().getItemAmount(itemID) + amount &gt; Integer.MAX_VALUE)
						c.sendMessage("You have too much money in your inventory");
                                                return;
				}
			}</code></p>
<p>I haven’t checked if this works.<br>
This was made in 3 minutes, no flames… Constructive criticism is always welcome.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/banking-bug-pi/506683/11">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/banking-bug-pi/506683/11</link>
        <pubDate>Sat, 09 Mar 2013 14:38:22 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-506683-11</guid>
        <source url="https://forum.moparisthebest.com/t/banking-bug-pi/506683.rss">Banking bug [PI]</source>
      </item>
      <item>
        <title>Banking bug [PI]</title>
        <dc:creator><![CDATA[@ExtremeX-Scape Ryley]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/extremex-scape">@ExtremeX-Scape</a> wrote:</p>
          <blockquote>
              <p>[quote=“Sup22211, post:9, topic:506683”]<code>
int maxAmount = 2147000000;
int bankSize = playerBankSize;
</code><br>
I dont have time now but you can try the above ^[/quote]</p>
<p>Integer.MAX_VALUE …</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/banking-bug-pi/506683/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/banking-bug-pi/506683/10</link>
        <pubDate>Sat, 09 Mar 2013 00:46:35 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-506683-10</guid>
        <source url="https://forum.moparisthebest.com/t/banking-bug-pi/506683.rss">Banking bug [PI]</source>
      </item>
      <item>
        <title>Banking bug [PI]</title>
        <dc:creator><![CDATA[@Sup22211 Sup22211]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sup22211">@Sup22211</a> wrote:</p>
          <blockquote>
              <pre><code class="lang-auto">int maxAmount = 2147000000;
int bankSize = playerBankSize;</code></pre>
<p>I dont have time now but you can try the above ^</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/banking-bug-pi/506683/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/banking-bug-pi/506683/9</link>
        <pubDate>Fri, 08 Mar 2013 11:54:14 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-506683-9</guid>
        <source url="https://forum.moparisthebest.com/t/banking-bug-pi/506683.rss">Banking bug [PI]</source>
      </item>
      <item>
        <title>Banking bug [PI]</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="7" data-topic="506683">
<div class="title">
<div class="quote-controls"></div>
 AtomicInt_:</div>
<blockquote>
<p>I believe there is a contains method for the inventory.</p>
</blockquote>
</aside>
<p>There is to my knowledge. But I’ve never been good at forloops, in any programming language, and I don’t know where to start.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/banking-bug-pi/506683/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/banking-bug-pi/506683/8</link>
        <pubDate>Fri, 08 Mar 2013 00:22:03 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-506683-8</guid>
        <source url="https://forum.moparisthebest.com/t/banking-bug-pi/506683.rss">Banking bug [PI]</source>
      </item>
      <item>
        <title>Banking bug [PI]</title>
        <dc:creator><![CDATA[@ExtremeX-Scape Ryley]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/extremex-scape">@ExtremeX-Scape</a> wrote:</p>
          <blockquote>
              <p>I believe there is a contains method for the inventory.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/banking-bug-pi/506683/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/banking-bug-pi/506683/7</link>
        <pubDate>Fri, 08 Mar 2013 00:18:27 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-506683-7</guid>
        <source url="https://forum.moparisthebest.com/t/banking-bug-pi/506683.rss">Banking bug [PI]</source>
      </item>
      <item>
        <title>Banking bug [PI]</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <p>[quote=“AtomicInt_, post:5, topic:506683”]A simple check should solve the issue.</p>
<p><code>
if (player.getWidgets().isOpen(Bank.BANK_WIDGET)) {
    if (player.getInventory().contains(995)) {
        if (player.getBank().contains(995)) {
            int count = player.getInventory().getItem(995).stack() += player.getBank().getItem(995).stack();
            if (count &gt; Integer.MAX_VALUE) {
                // ... withdraw the amount that equals 2,147,... (it's simple math lol)
                return;
            }
        }
    }
}</code></p>
<p>Obviously, you wouldn’t do this in Project Insanity, this is how I would do this in my server.[/quote]</p>
<p>Yeah, I need to write some form a forloop for it to check all items in bank/inventory.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/banking-bug-pi/506683/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/banking-bug-pi/506683/6</link>
        <pubDate>Fri, 08 Mar 2013 00:14:13 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-506683-6</guid>
        <source url="https://forum.moparisthebest.com/t/banking-bug-pi/506683.rss">Banking bug [PI]</source>
      </item>
      <item>
        <title>Banking bug [PI]</title>
        <dc:creator><![CDATA[@ExtremeX-Scape Ryley]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/extremex-scape">@ExtremeX-Scape</a> wrote:</p>
          <blockquote>
              <p>A simple check should solve the issue.</p>
<p><code>
if (player.getWidgets().isOpen(Bank.BANK_WIDGET)) {
    if (player.getInventory().contains(995)) {
        if (player.getBank().contains(995)) {
            int count = player.getInventory().getItem(995).stack() += player.getBank().getItem(995).stack();
            if (count &gt; Integer.MAX_VALUE) {
                // ... withdraw the amount that equals 2,147,... (it's simple math lol)
                return;
            }
        }
    }
}</code></p>
<p>Obviously, you wouldn’t do this in Project Insanity, this is how I would do this in my server.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/banking-bug-pi/506683/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/banking-bug-pi/506683/5</link>
        <pubDate>Thu, 07 Mar 2013 23:58:14 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-506683-5</guid>
        <source url="https://forum.moparisthebest.com/t/banking-bug-pi/506683.rss">Banking bug [PI]</source>
      </item>
      <item>
        <title>Banking bug [PI]</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <p>[quote=“Sup22211, post:3, topic:506683”]I’ll try to help you. make a for loop that loops your entire bank and if he will ‘catch’ and item that the value is more then ‘max’ (int) send him a message (Anti-Losing system. The amount of the current item is more then you can)<br>
is that what you mean?[/quote]<br>
Essentially. If A+B is greater than max int, only max int would be withdrawn or deposited, the rest would remain in the area of withdrawal.<br>
So if I am depositing an item from my inventory, that would be A. and the same item is in my bank, that’d be B. if A+B is greater than max int. The remainder would stay with A, my inventory.<br>
and vice versa for taking from bank to inventory.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/banking-bug-pi/506683/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/banking-bug-pi/506683/4</link>
        <pubDate>Thu, 07 Mar 2013 23:50:58 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-506683-4</guid>
        <source url="https://forum.moparisthebest.com/t/banking-bug-pi/506683.rss">Banking bug [PI]</source>
      </item>
      <item>
        <title>Banking bug [PI]</title>
        <dc:creator><![CDATA[@Sup22211 Sup22211]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sup22211">@Sup22211</a> wrote:</p>
          <blockquote>
              <p>I’ll try to help you. make a for loop that loops your entire bank and if he will ‘catch’ and item that the value is more then ‘max’ (int) send him a message (Anti-Losing system. The amount of the current item is more then you can)<br>
is that what you mean?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/banking-bug-pi/506683/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/banking-bug-pi/506683/3</link>
        <pubDate>Thu, 07 Mar 2013 14:59:10 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-506683-3</guid>
        <source url="https://forum.moparisthebest.com/t/banking-bug-pi/506683.rss">Banking bug [PI]</source>
      </item>
      <item>
        <title>Banking bug [PI]</title>
        <dc:creator><![CDATA[@ohokay ohokay]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ohokay">@ohokay</a> wrote:</p>
          <blockquote>
              <p>Look for where the money is withdrawn, and add code that wi check to see if the player inventory has enough space to withdraw the full amount.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/banking-bug-pi/506683/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/banking-bug-pi/506683/2</link>
        <pubDate>Thu, 07 Mar 2013 13:23:27 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-506683-2</guid>
        <source url="https://forum.moparisthebest.com/t/banking-bug-pi/506683.rss">Banking bug [PI]</source>
      </item>
      <item>
        <title>Banking bug [PI]</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <p>This is a very obvious, and well known issue, and it works with any item, assuming you manage to collect 2,147,483,647 of that item, and more in your bank (and vice versa).<br>
If you don’t know it, however, here’s an explanation.</p>
<p>Say I’ve got 1.5B coins in my bank.<br>
and another 2.0B in my inventory.<br>
If I withdraw, or bank, all the money (withdraw all 1.5B, or bank the 2.0B) will be added together, and obviously be over the value above.<br>
Now the remainder between the added values, (assuming they are 1,500,000,000 and 2,000,000,000) 3.5B, is subtracted from the maximum number if an int (above). that equals: -1,352,516,353. Say this is one of your players (assuming it’s not a money based eco). They’d obviously be pissed on the loss of over 1b coins. What I need help is developing something in the bank(all of em) class(es) to prevent this. It’d prevent it by checking if the 2 are equal to, or over, the max int. If it is, the max int is put in the bank (or taken out, depending on what type of transaction you were doing), and the rests sits in the bank (or in the inventory), and sends a message saying “Bank Full” or “Inventory Full”</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/banking-bug-pi/506683/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/banking-bug-pi/506683/1</link>
        <pubDate>Wed, 06 Mar 2013 23:48:39 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-506683-1</guid>
        <source url="https://forum.moparisthebest.com/t/banking-bug-pi/506683.rss">Banking bug [PI]</source>
      </item>
  </channel>
</rss>
