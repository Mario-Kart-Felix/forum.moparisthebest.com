<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>PSBL&#39;s Loader</title>
    <link>https://forum.moparisthebest.com/t/psbls-loader/67118</link>
    <description>Here&#39;s my copy of the PSBL loader done in BCEL. Notice how lazy I am, world.java isn&#39;t done correctly..

Screenshot: 
[img]http://img222.imageshack.us/img222/8643/screenyig5.png[/img]


But none the less, this is a working build; enjoy.

[code]package com.bawt.loader;
import com.bawt.hook.Loader;

import java.applet.Applet;
import java.awt.Insets;
import java.awt.Frame;
import java.awt.event.WindowListener;
import java.awt.event.WindowEvent;
import java.awt.event.MouseEvent;

public class Application extends Frame implements WindowListener {
    public static void main(String args[]) {
        if (args != null &amp;&amp; args.length == 2 &amp;&amp; args[0].length() &gt; 0  &amp;&amp; args[1].length() &gt; 0) {
            try {
                new Application(Integer.parseInt(args[0]), args[1].trim().toLowerCase().startsWith(&quot;t&quot;));
                return;
            } catch (Exception e) {}
        }
        System.out.println(&quot;Usage: [worldnumber&lt;int&gt;] [lowdetail&lt;true/false&gt;]&quot;);
    }

    public Loader loader;

    public Application(int worldnumber, boolean lowdetail) {
        super(&quot;Pplsuqbawlz&#39;s BAWT Loader : World &quot; + worldnumber);
        try {
            World world = new World(worldnumber, lowdetail);
            this.setTitle(&quot;Pplsuqbawlz&#39;s BAWT Loader : World &quot; + worldnumber + &quot; : &quot; + world.getCodeBase().toString() + world.getParameter(&quot;archive&quot;));
            CLoader classloader = new CLoader(world.getCodeBase().toString() + world.getParameter(&quot;archive&quot;));
            Applet applet = (Applet) classloader.loadClass(world.getParameter(&quot;code&quot;).replaceAll(&quot;.class&quot;, &quot;&quot;)).newInstance();
            applet.setStub(world);
            this.add(&quot;Center&quot;, applet);
            this.addWindowListener(this);
            this.setResizable(false);                                                                                                                 
            this.pack();
            Insets in = this.getInsets();
            this.setSize(in.right + in.left + Integer.parseInt(world.getParameter(&quot;width&quot;)), in.bottom + in.top + Integer.parseInt(world.getParameter(&quot;height&quot;)));
            this.setVisible(true);
            applet.init();
            world.active = true;
            applet.start();
            loader = (Loader)applet;
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public void windowOpened(WindowEvent e) {
    }

    public void windowClosing(WindowEvent e) {
        System.exit(0);
    }

    public void windowClosed(WindowEvent e) {
    }

    public void windowIconified(WindowEvent e) {
    }

    public void windowDeiconified(WindowEvent e) {
    }

    public void windowActivated(WindowEvent e) {
    }

    public void windowDeactivated(WindowEvent e) {
    }
}[/code]

[code]package com.bawt.loader;

import org.apache.bcel.Constants;
import org.apache.bcel.classfile.*;
import org.apache.bcel.generic.*;

import java.io.File;
import java.io.IOException;
import java.net.JarURLConnection;
import java.net.URL;
import java.util.jar.JarFile;
import java.util.zip.ZipEntry;

class CLoader extends ClassLoader {
    private JarFile jar;

    public CLoader(String archive) throws IOException {
        URL u = new URL(&quot;jar:&quot; + archive + &quot;!/&quot;);
        JarURLConnection jurl = (JarURLConnection) u.openConnection();
        jar = jurl.getJarFile();
    }

    public Class&lt;?&gt; loadClass(String name) throws ClassNotFoundException {
        Class c = null;
        try {
            c = super.findSystemClass(name);
        } catch (ClassNotFoundException cnfe) {
            try {
                ZipEntry zip = jar.getEntry(name.replaceAll(&quot;\\.&quot;, File.pathSeparator) + &quot;.class&quot;);

                JavaClass jc = new ClassParser(jar.getInputStream(zip), name).parse();

                if (name.equals(&quot;loader&quot;)) {
                    ClassGen cg = new ClassGen(jc);
                    cg.addInterface(&quot;com.bawt.hook.Loader&quot;);
                    Field fields[] = cg.getFields();
                    for (Field f : fields) {
                        String signature = f.getType().getSignature();
                        if (signature.equals(&quot;Ljava/applet/Applet;&quot;)) {
                            cg = addMethodToReturnField(cg, &quot;getClient&quot;, f.getName(), f.getType());
                        } else if (signature.equals(&quot;Z&quot;)) {
                            cg = addMethodToReturnField(cg, &quot;isError&quot;, f.getName(), f.getType());
                        }
                    }
                    jc = cg.getJavaClass();
                } else if(jc.getSuperclassName().equals(&quot;java.lang.ClassLoader&quot;)) {
                    ClassGen cg = new ClassGen(jc);
                    ConstantPoolGen cpg = cg.getConstantPool();
                    ((ConstantClass)cpg.getConstant(cg.getSuperclassNameIndex())).setNameIndex(cpg.addUtf8(&quot;com/bawt/loader/ClientStrap&quot;));
                    cpg.setConstant(cpg.lookupUtf8(&quot;defineClass&quot;), new ConstantUtf8(&quot;injectDefine&quot;));
                    jc = cg.getJavaClass(); 
                }

                byte buffer[] = jc.getBytes();

                c = defineClass(name, buffer, 0, buffer.length);

            } catch (Exception e) {
                e.printStackTrace();
            }
        }
        if (c != null) return c;
        return super.loadClass(name);
    }

    private ClassGen addMethodToReturnField(ClassGen cg, String methodname, String fieldname, Type fieldtype) {
        ConstantPoolGen cpg = cg.getConstantPool();
        InstructionList il = new InstructionList();
        InstructionFactory factory = new InstructionFactory(cg, cpg);
        String classname = cg.getClassName();
        MethodGen mg = new MethodGen(Constants.ACC_PUBLIC, fieldtype, Type.NO_ARGS, new String[]{}, methodname, classname, il, cpg);
        il.append(new ALOAD(0));
        il.append(factory.createGetField(classname, fieldname, fieldtype));
        il.append(factory.createReturn(fieldtype));
        mg.setMaxLocals();
        mg.setMaxStack();
        cg.addMethod(mg.getMethod());
        return cg;
    }
}[/code]

[code]package com.bawt.hook;

import java.applet.Applet;

public interface Loader {
    public boolean isError();

    public Applet getClient();
}
[/code]

[code]package com.bawt.loader;

import java.applet.AppletContext;
import java.applet.AppletStub;
import java.io.DataInputStream;
import java.net.URL;
import java.net.URLConnection;
import java.util.HashMap;

public class World implements AppletStub {
    public boolean active;
    private URL documentbase;
    private URL codebase;
    private HashMap&lt;String, String&gt; params = new HashMap&lt;String, String&gt;();

    public World(int num, boolean lowdetail) throws Exception {
        params = new HashMap&lt;String, String&gt;();

        String detail = &quot;http://www.runescape.com/sl.ws?plugin=0&amp;&quot;;
        if(lowdetail) {
            detail += &quot;lores.x=Low+Detail&quot;;
        } else {
            detail += &quot;hires.x=High+Detail&quot;;
        }

        downloadHTML(&quot;http://www.runescape.com/&quot;);
        downloadHTML(&quot;http://www.runescape.com/title.ws&quot;, &quot;http://runescape.com/&quot;);
        downloadHTML(&quot;http://www.runescape.com/detail.ws&quot;, &quot;http://www.runescape.com/title.ws&quot;);
        String serverpage = downloadHTML(detail, &quot;http://www.runescape.com/detail.ws&quot;);

        String link = serverpage.substring(0, serverpage.indexOf(&quot;\&quot;&gt;World &quot; + num + &quot;&lt;/a&gt;&quot;));
        link = link.substring(link.lastIndexOf(&quot;\&quot;&quot;) + 1);
        String cbase = link.substring(0, link.indexOf(&quot;runescape.com/&quot;) + 14);

        documentbase = new URL(link);
        codebase = new URL(cbase);

        String world = downloadHTML(link, detail);
        world = world.substring(world.indexOf(&quot;&lt;noscript&gt;&quot;) + 10);
        world = world.substring(0, world.indexOf(&quot;&lt;/noscript&gt;&quot;));

        String tags[] = world.split(&quot;&gt;&quot;);
        for (int i = 0; i &lt; tags.length - 1; i++) {
            String cur = tags[i].trim().substring(1).toLowerCase();
            if (cur.startsWith(&quot;applet&quot;)) {
                cur = cur.substring(7);
                while (cur.length() &gt; 0) {
                    int eq = cur.indexOf(&quot;=&quot;);
                    int sp = cur.indexOf(&quot; &quot;);
                    if (eq == -1 || sp == -1) break;
                    params.put(cur.substring(0, eq).trim(), cur.substring(eq + 1, sp).trim());
                    cur = cur.substring(sp).trim();
                }
            } else if (cur.startsWith(&quot;param&quot;)) {
                cur += &quot; &quot;;
                String name = cur.substring(cur.indexOf(&quot;name=&quot;) + 5);
                String value = cur.substring(cur.indexOf(&quot;value=&quot;) + 6);
                params.put(name.substring(0, name.indexOf(&quot; &quot;)).trim(), value.substring(0, value.indexOf(&quot; &quot;)).trim());
            }
        }
    }

    private String downloadHTML(String address) throws Exception {
        return downloadHTML(address, null);
    }

    private String downloadHTML(String address, String referer) throws Exception {
        URL url = new URL(address);
        URLConnection conn = url.openConnection();
        conn.setRequestProperty(&quot;User-Agent&quot;, &quot;Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.0.1) Gecko/20060111 Firefox/1.5.0.1&quot;);
        conn.setRequestProperty(&quot;Accept&quot;, &quot;text/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8&quot;);
        conn.setRequestProperty(&quot;Accept-Language&quot;, &quot;en-us,en;q=0.5&quot;);
        conn.setRequestProperty(&quot;Accept-Encoding&quot;, &quot;gzip,deflate&quot;);
        conn.setRequestProperty(&quot;Accept-Charset&quot;, &quot;UTF-8,*&quot;);
        if (referer != null) conn.setRequestProperty(&quot;Referer&quot;, referer);
        conn.setRequestProperty(&quot;Keep-Alive&quot;, &quot;300&quot;);

        String contsize = conn.getHeaderField(&quot;Content-length&quot;);
        if (contsize == null) contsize = &quot;0&quot;;

        byte buffer[] = new byte[Integer.parseInt(contsize)];
        DataInputStream ds = new DataInputStream(conn.getInputStream());
        ds.readFully(buffer);
        Thread.sleep(250 + (int) Math.random() * 250);

        return new String(buffer);
    }

    public boolean isActive() {
        return active;
    }

    public URL getDocumentBase() {
        return documentbase;
    }

    public URL getCodeBase() {
        return codebase;
    }

    public String getParameter(String name) {
        String value = params.get(name);
        return value == null ? &quot;&quot; : value;
    }

    public AppletContext getAppletContext() {
        return null;
    }

    public void appletResize(int i, int i1) {
    }
}[/code]

[code]package com.bawt.loader;

import com.bawt.update.ClientPatcher;
import com.bawt.update.ClientPackage;

public class ClientStrap extends ClassLoader {
//    ClientPatcher patch;

    public ClientStrap() {
//        System.out.println(&quot;Updating...&quot;);
//        try {
//            patch = new ClientPatcher(ClientPackage.unpack());
//        } catch (Exception e) {
//            e.printStackTrace();
//        }
//        System.out.println(&quot;Done!&quot;);
    }

    protected final Class&lt;?&gt; injectDefine(String name, byte[] b, int off, int len) {
//        b = patch.findClass(name).getJavaClass().getBytes();
//        return super.defineClass(name, b, 0, b.length);
        return super.defineClass(name, b, off, len);
    }
}
[/code]</description>
    
    <lastBuildDate>Wed, 25 Apr 2007 11:57:22 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/psbls-loader/67118.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>PSBL&#39;s Loader</title>
        <dc:creator><![CDATA[@Greeny Greeny]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/greeny">@Greeny</a> wrote:</p>
          <blockquote>
              <aside class="quote no-group quote-modified" data-post="22" data-topic="67118">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/solarwind/40/5_6259e4fa9dfe0dec282fb0955bb1974c.png" class="avatar"> solarwind:</div>
<blockquote>
<p>Can someone please zip this up? I’m having trouble getting it to work.</p>
</blockquote>
</aside>
<p>Have you made sure its a working world.java?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/psbls-loader/67118/24">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/psbls-loader/67118/24</link>
        <pubDate>Wed, 25 Apr 2007 11:57:22 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67118-24</guid>
        <source url="https://forum.moparisthebest.com/t/psbls-loader/67118.rss">PSBL&#39;s Loader</source>
      </item>
      <item>
        <title>PSBL&#39;s Loader</title>
        <dc:creator><![CDATA[@moparisthebest Moparisthebest]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/moparisthebest">@moparisthebest</a> wrote:</p>
          <blockquote>
              <p>What kind of trouble?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/psbls-loader/67118/23">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/psbls-loader/67118/23</link>
        <pubDate>Wed, 25 Apr 2007 04:23:07 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67118-23</guid>
        <source url="https://forum.moparisthebest.com/t/psbls-loader/67118.rss">PSBL&#39;s Loader</source>
      </item>
      <item>
        <title>PSBL&#39;s Loader</title>
        <dc:creator><![CDATA[@solarwind solarwind]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/solarwind">@solarwind</a> wrote:</p>
          <blockquote>
              <p>Can someone please zip this up? I’m having trouble getting it to work.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/psbls-loader/67118/22">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/psbls-loader/67118/22</link>
        <pubDate>Wed, 25 Apr 2007 04:14:33 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67118-22</guid>
        <source url="https://forum.moparisthebest.com/t/psbls-loader/67118.rss">PSBL&#39;s Loader</source>
      </item>
      <item>
        <title>PSBL&#39;s Loader</title>
        <dc:creator><![CDATA[@ilyaostr9 io9]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ilyaostr9">@ilyaostr9</a> wrote:</p>
          <blockquote>
              <aside class="quote no-group quote-modified" data-post="20" data-topic="67118">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/vbcoderx/40/5_6259e4fa9dfe0dec282fb0955bb1974c.png" class="avatar"> vbcoderx:</div>
<blockquote>
<p>wouldn’t this not work because they don’t put the archive= thing in the html? now its in a java script?</p>
</blockquote>
</aside>
<p>Yup, just modfy world.java to load plugin.js?plugin=[PLUGIN HERE]&amp;type=[FIGURE IT OUT] and get the shit from there</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/psbls-loader/67118/21">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/psbls-loader/67118/21</link>
        <pubDate>Mon, 09 Apr 2007 05:10:47 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67118-21</guid>
        <source url="https://forum.moparisthebest.com/t/psbls-loader/67118.rss">PSBL&#39;s Loader</source>
      </item>
      <item>
        <title>PSBL&#39;s Loader</title>
        <dc:creator><![CDATA[@vbcoderx vbcoderx]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/vbcoderx">@vbcoderx</a> wrote:</p>
          <blockquote>
              <p>wouldn’t this not work because they don’t put the archive= thing in the html? now its in a java script?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/psbls-loader/67118/20">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/psbls-loader/67118/20</link>
        <pubDate>Sun, 08 Apr 2007 22:45:19 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67118-20</guid>
        <source url="https://forum.moparisthebest.com/t/psbls-loader/67118.rss">PSBL&#39;s Loader</source>
      </item>
      <item>
        <title>PSBL&#39;s Loader</title>
        <dc:creator><![CDATA[@shangtsung1 shangtsung1]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/shangtsung1">@shangtsung1</a> wrote:</p>
          <blockquote>
              <p>ahh thx <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=6" title=":smiley:" class="emoji" alt=":smiley:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/psbls-loader/67118/19">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/psbls-loader/67118/19</link>
        <pubDate>Sun, 08 Apr 2007 07:29:57 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67118-19</guid>
        <source url="https://forum.moparisthebest.com/t/psbls-loader/67118.rss">PSBL&#39;s Loader</source>
      </item>
      <item>
        <title>PSBL&#39;s Loader</title>
        <dc:creator><![CDATA[@marluxia marluxia]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/marluxia">@marluxia</a> wrote:</p>
          <blockquote>
              <p>you need bcel.jar</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/psbls-loader/67118/18">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/psbls-loader/67118/18</link>
        <pubDate>Sun, 08 Apr 2007 07:21:03 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67118-18</guid>
        <source url="https://forum.moparisthebest.com/t/psbls-loader/67118.rss">PSBL&#39;s Loader</source>
      </item>
      <item>
        <title>PSBL&#39;s Loader</title>
        <dc:creator><![CDATA[@shangtsung1 shangtsung1]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/shangtsung1">@shangtsung1</a> wrote:</p>
          <blockquote>
              <p>Application.java:2: package com.bawt.hook does not exist<br>
import com.bawt.hook.Loader;<br>
^<br>
Application.java:22: cannot find symbol<br>
symbol  : class Loader<br>
location: class com.bawt.loader.Application<br>
public Loader loader;<br>
^<br>
ClientStrap.java:3: package com.bawt.update does not exist<br>
import com.bawt.update.ClientPatcher;<br>
^<br>
ClientStrap.java:4: package com.bawt.update does not exist<br>
import com.bawt.update.ClientPackage;<br>
^<br>
CLoader.java:3: package org.apache.bcel does not exist<br>
import org.apache.bcel.Constants;<br>
^<br>
CLoader.java:4: package org.apache.bcel.classfile does not exist<br>
import org.apache.bcel.classfile.<em>;<br>
^<br>
CLoader.java:5: package org.apache.bcel.generic does not exist<br>
import org.apache.bcel.generic.</em>;<br>
^<br>
CLoader.java:66: cannot find symbol<br>
symbol  : class ClassGen<br>
location: class com.bawt.loader.CLoader<br>
private ClassGen addMethodToReturnField(ClassGen cg, String methodname, Stri<br>
ng fieldname, Type fieldtype) {<br>
^<br>
CLoader.java:66: cannot find symbol<br>
symbol  : class Type<br>
location: class com.bawt.loader.CLoader<br>
private ClassGen addMethodToReturnField(ClassGen cg, String methodname, Stri<br>
ng fieldname, Type fieldtype) {</p>
<pre><code>          ^
</code></pre>
<p>CLoader.java:66: cannot find symbol<br>
symbol  : class ClassGen<br>
location: class com.bawt.loader.CLoader<br>
private ClassGen addMethodToReturnField(ClassGen cg, String methodname, Stri<br>
ng fieldname, Type fieldtype) {<br>
^<br>
Application.java:27: cannot find symbol<br>
symbol  : class World<br>
location: class com.bawt.loader.Application<br>
World world = new World(worldnumber, lowdetail);<br>
^<br>
Application.java:27: cannot find symbol<br>
symbol  : class World<br>
location: class com.bawt.loader.Application<br>
World world = new World(worldnumber, lowdetail);<br>
^<br>
Application.java:37: operator + cannot be applied to int,<br>
this.setSize(in.right + in.left + Integer.parseInt(world.getParamete<br>
r(“width”)), in.bottom + in.top + Integer.parseInt(world.getParameter(“height”))<br>
);<br>
^<br>
Application.java:37: operator + cannot be applied to int,<br>
this.setSize(in.right + in.left + Integer.parseInt(world.getParamete<br>
r(“width”)), in.bottom + in.top + Integer.parseInt(world.getParameter(“height”))<br>
);</p>
<pre><code>                   ^
</code></pre>
<p>Application.java:37: cannot find symbol<br>
symbol  : method setSize(,)<br>
location: class com.bawt.loader.Application<br>
this.setSize(in.right + in.left + Integer.parseInt(world.getParamete<br>
r(“width”)), in.bottom + in.top + Integer.parseInt(world.getParameter(“height”))<br>
);<br>
^<br>
Application.java:42: cannot find symbol<br>
symbol  : class Loader<br>
location: class com.bawt.loader.Application<br>
loader = (Loader)applet;<br>
^<br>
CLoader.java:31: cannot find symbol<br>
symbol  : class JavaClass<br>
location: class com.bawt.loader.CLoader<br>
JavaClass jc = new ClassParser(jar.getInputStream(zip), name).pa<br>
rse();<br>
^<br>
CLoader.java:31: cannot find symbol<br>
symbol  : class ClassParser<br>
location: class com.bawt.loader.CLoader<br>
JavaClass jc = new ClassParser(jar.getInputStream(zip), name).pa<br>
rse();<br>
^<br>
CLoader.java:34: cannot find symbol<br>
symbol  : class ClassGen<br>
location: class com.bawt.loader.CLoader<br>
ClassGen cg = new ClassGen(jc);<br>
^<br>
CLoader.java:34: cannot find symbol<br>
symbol  : class ClassGen<br>
location: class com.bawt.loader.CLoader<br>
ClassGen cg = new ClassGen(jc);<br>
^<br>
CLoader.java:36: cannot find symbol<br>
symbol  : class Field<br>
location: class com.bawt.loader.CLoader<br>
Field fields[] = cg.getFields();<br>
^<br>
CLoader.java:37: cannot find symbol<br>
symbol  : class Field<br>
location: class com.bawt.loader.CLoader<br>
for (Field f : fields) {<br>
^<br>
CLoader.java:47: cannot find symbol<br>
symbol  : class ClassGen<br>
location: class com.bawt.loader.CLoader<br>
ClassGen cg = new ClassGen(jc);<br>
^<br>
CLoader.java:47: cannot find symbol<br>
symbol  : class ClassGen<br>
location: class com.bawt.loader.CLoader<br>
ClassGen cg = new ClassGen(jc);<br>
^<br>
CLoader.java:48: cannot find symbol<br>
symbol  : class ConstantPoolGen<br>
location: class com.bawt.loader.CLoader<br>
ConstantPoolGen cpg = cg.getConstantPool();<br>
^<br>
CLoader.java:49: cannot find symbol<br>
symbol  : class ConstantClass<br>
location: class com.bawt.loader.CLoader<br>
((ConstantClass)cpg.getConstant(cg.getSuperclassNameIndex())<br>
).setNameIndex(cpg.addUtf8(“com/bawt/loader/ClientStrap”));<br>
^<br>
CLoader.java:50: cannot find symbol<br>
symbol  : class ConstantUtf8<br>
location: class com.bawt.loader.CLoader<br>
cpg.setConstant(cpg.lookupUtf8(“defineClass”), new ConstantU<br>
tf8(“injectDefine”));<br>
^<br>
CLoader.java:67: cannot find symbol<br>
symbol  : class ConstantPoolGen<br>
location: class com.bawt.loader.CLoader<br>
ConstantPoolGen cpg = cg.getConstantPool();<br>
^<br>
CLoader.java:68: cannot find symbol<br>
symbol  : class InstructionList<br>
location: class com.bawt.loader.CLoader<br>
InstructionList il = new InstructionList();<br>
^<br>
CLoader.java:68: cannot find symbol<br>
symbol  : class InstructionList<br>
location: class com.bawt.loader.CLoader<br>
InstructionList il = new InstructionList();<br>
^<br>
CLoader.java:69: cannot find symbol<br>
symbol  : class InstructionFactory<br>
location: class com.bawt.loader.CLoader<br>
InstructionFactory factory = new InstructionFactory(cg, cpg);<br>
^<br>
CLoader.java:69: cannot find symbol<br>
symbol  : class InstructionFactory<br>
location: class com.bawt.loader.CLoader<br>
InstructionFactory factory = new InstructionFactory(cg, cpg);<br>
^<br>
CLoader.java:71: cannot find symbol<br>
symbol  : class MethodGen<br>
location: class com.bawt.loader.CLoader<br>
MethodGen mg = new MethodGen(Constants.ACC_PUBLIC, fieldtype, Type.NO_AR<br>
GS, new String[]{}, methodname, classname, il, cpg);<br>
^<br>
CLoader.java:71: cannot find symbol<br>
symbol  : class MethodGen<br>
location: class com.bawt.loader.CLoader<br>
MethodGen mg = new MethodGen(Constants.ACC_PUBLIC, fieldtype, Type.NO_AR<br>
GS, new String[]{}, methodname, classname, il, cpg);<br>
^<br>
CLoader.java:71: cannot find symbol<br>
symbol  : variable Constants<br>
location: class com.bawt.loader.CLoader<br>
MethodGen mg = new MethodGen(Constants.ACC_PUBLIC, fieldtype, Type.NO_AR<br>
GS, new String[]{}, methodname, classname, il, cpg);<br>
^<br>
CLoader.java:71: cannot find symbol<br>
symbol  : variable Type<br>
location: class com.bawt.loader.CLoader<br>
MethodGen mg = new MethodGen(Constants.ACC_PUBLIC, fieldtype, Type.NO_AR<br>
GS, new String[]{}, methodname, classname, il, cpg);<br>
^<br>
CLoader.java:72: cannot find symbol<br>
symbol  : class ALOAD<br>
location: class com.bawt.loader.CLoader<br>
il.append(new ALOAD(0));<br>
^<br>
37 errors</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/psbls-loader/67118/17">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/psbls-loader/67118/17</link>
        <pubDate>Sun, 08 Apr 2007 07:14:41 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67118-17</guid>
        <source url="https://forum.moparisthebest.com/t/psbls-loader/67118.rss">PSBL&#39;s Loader</source>
      </item>
      <item>
        <title>PSBL&#39;s Loader</title>
        <dc:creator><![CDATA[@sup000 sup000]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sup000">@sup000</a> wrote:</p>
          <blockquote>
              <p>thanks for you time Ollie, i will try this as soon as i get 5 mins. Again, thank you for continued help.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/psbls-loader/67118/16">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/psbls-loader/67118/16</link>
        <pubDate>Thu, 05 Apr 2007 19:33:57 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67118-16</guid>
        <source url="https://forum.moparisthebest.com/t/psbls-loader/67118.rss">PSBL&#39;s Loader</source>
      </item>
      <item>
        <title>PSBL&#39;s Loader</title>
        <dc:creator><![CDATA[@Ollie Ollie]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ollie">@Ollie</a> wrote:</p>
          <blockquote>
              <p>use my stub, just rename it to World.java, and rename <code>public RevStub(int world, boolean lowdetail) throws Exception {</code> to <code>public World(int world, boolean lowdetail) throws Exception { </code></p>
<p>add this method to it and it will work:</p>
<p><code>
public World(int w) throws Exception{
   new World(w, true);
}</code></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/psbls-loader/67118/15">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/psbls-loader/67118/15</link>
        <pubDate>Thu, 05 Apr 2007 17:13:45 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67118-15</guid>
        <source url="https://forum.moparisthebest.com/t/psbls-loader/67118.rss">PSBL&#39;s Loader</source>
      </item>
      <item>
        <title>PSBL&#39;s Loader</title>
        <dc:creator><![CDATA[@sup000 sup000]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sup000">@sup000</a> wrote:</p>
          <blockquote>
              <p>many thanks, i presumed my unexpected file error was due to my patching, seems i was running on my linux machine, with no internet connection <img src="https://forum.moparisthebest.com/images/emoji/twitter/confused.png?v=6" title=":confused:" class="emoji" alt=":confused:"> sorry, and thanks ++[br][size=1]Posted on: March 31, 2007, 07:51:44 AM[/size][hr]im still having problems :\ spoonfeed please?</p>
<p>[code]<br>
C:\Documents and Settings\sams\Desktop\bot project&gt;java Application 83 true<br>
java.lang.NullPointerException<br>
at Application.(Application.java:29)<br>
at Application.main(Application.java:14)</p>
<p>C:\Documents and Settings\sams\Desktop\bot project&gt;pause<br>
Press any key to continue . . .[/code]</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/psbls-loader/67118/14">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/psbls-loader/67118/14</link>
        <pubDate>Thu, 05 Apr 2007 12:22:50 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67118-14</guid>
        <source url="https://forum.moparisthebest.com/t/psbls-loader/67118.rss">PSBL&#39;s Loader</source>
      </item>
      <item>
        <title>PSBL&#39;s Loader</title>
        <dc:creator><![CDATA[@Ollie Ollie]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ollie">@Ollie</a> wrote:</p>
          <blockquote>
              <p>[quote=“sup000, post:12, topic:67118”]sorry its old but i have only just been looking at this now i got some time on my hands <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=6" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>all looks very nice but i am having problems inseting ollies patch without errors. Maybe something has changed, maybe its me. Think someone could give me a guider, without bashing me too hard?[/quote]</p>
<p>heres my stub, it works fine.</p>
<p>[code]package com.bot;</p>
<p>import <a href="http://java.io" rel="nofollow noopener">java.io</a>.<em>;<br>
import <a href="http://java.net" rel="nofollow noopener">java.net</a>.</em>;<br>
import java.applet.*;</p>
<p>public class RevStub implements AppletStub {</p>
<pre><code>private java.util.Properties params = new java.util.Properties();
private URL codebase, documentbase;
public String archive, loader;

public RevStub(int world, boolean lowdetail) throws Exception {

    readPage(new URL("http://www.runescape.com/"));
     readPage(
     new URL(
     "http://www.runescape.com/lang/en/aff/runescape/title.ws"),
     "/");
     readPage(
     new URL(
     "http://www.runescape.com/lang/en/aff/runescape/detail.ws"),
     "/title.ws");
    String serverlist = readPage(
            new URL(
                    "http://www.runescape.com/"
                            + (lowdetail
                                    ? "sln.ws?plugin=0&amp;lores.x=Low+Detail"
                                    : "slj.ws?plugin=0&amp;hires.x=High+Detail")),
                                    "/detail.ws");
    String link = serverlist.substring(0,
            serverlist.indexOf("\"&gt;World " + world + "&lt;"));

    link = link.substring(link.lastIndexOf("\"") + 1);
    String prefix = link.substring(link.indexOf("http://") + 7,
            link.indexOf(".runescape"));
    String cbase = "http://" + prefix + ".runescape.com/";

    documentbase = new URL(link);
    codebase = new URL(cbase);
		
    URL url = new URL(documentbase.toString());

    BufferedReader files = new BufferedReader(
            new InputStreamReader(url.openConnection().getInputStream()));
    String temp = "";

    while ((temp = files.readLine()) != null) {
        for (int i; (i = temp.indexOf("param name=")) != -1;) {
            temp = temp.substring(i += 11);
            String name = temp.substring(0, temp.indexOf(" "));

            temp = temp.substring(temp.indexOf("value=") + 6);
            String value = temp.substring(0, temp.indexOf("&gt;"));

            params.put(name, value);
        }
        if (temp.contains("archive=")) {
            String other = temp.substring(temp.indexOf("archive=") + 8);

            params.put("archive", other.substring(0, other.indexOf(" ")));
        }
        params.put("width", "765");
        params.put("height", "503");
    }
}
	
private static String readPage(URL url) throws IOException, InterruptedException {
    return readPage(url, null);
}

private static String readPage(URL url, String ref) throws IOException, InterruptedException {
    URLConnection uc = url.openConnection();

    uc.setDoInput(true);
    uc.setDoOutput(true);
    uc.setUseCaches(false);
    uc.setRequestProperty("Content-Type",
            "application/x-www-form-urlencoded");
    uc.setRequestProperty("User-Agent",
            "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8) Gecko/20051111 Firefox/1.5");
    uc.setRequestProperty("Referer", ref);
    uc.setRequestProperty("Cookie",
            "serverlist_order=PWML; RSCOUNTRY=0; RSORIGIN=RUNESCAPE");
    DataInputStream di = new DataInputStream(uc.getInputStream());
    byte[] buffer = new byte[uc.getContentLength()];

    di.readFully(buffer);
    di.close();
    Thread.sleep(250 + (int) Math.random() * 500);
    return new String(buffer);
}
  
public URL getCodeBase() {
    return codebase;
}

public URL getDocumentBase() {
    return documentbase;
}

public String getParameter(String name) {
    return params.getProperty(name);
}

public AppletContext getAppletContext() {
    return null;
}

public void appletResize(int width, int height) {}

public boolean isActive() {
    return true;
}
</code></pre>
<p>}[/code]</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/psbls-loader/67118/13">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/psbls-loader/67118/13</link>
        <pubDate>Sat, 31 Mar 2007 14:39:55 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67118-13</guid>
        <source url="https://forum.moparisthebest.com/t/psbls-loader/67118.rss">PSBL&#39;s Loader</source>
      </item>
      <item>
        <title>PSBL&#39;s Loader</title>
        <dc:creator><![CDATA[@sup000 sup000]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sup000">@sup000</a> wrote:</p>
          <blockquote>
              <p>sorry its old but i have only just been looking at this now i got some time on my hands <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=6" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>all looks very nice but i am having problems inseting ollies patch without errors. Maybe something has changed, maybe its me. Think someone could give me a guider, without bashing me too hard?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/psbls-loader/67118/12">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/psbls-loader/67118/12</link>
        <pubDate>Sat, 31 Mar 2007 11:30:21 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67118-12</guid>
        <source url="https://forum.moparisthebest.com/t/psbls-loader/67118.rss">PSBL&#39;s Loader</source>
      </item>
      <item>
        <title>PSBL&#39;s Loader</title>
        <dc:creator><![CDATA[@pplsuqbawlz pplsuqbawlz]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/pplsuqbawlz">@pplsuqbawlz</a> wrote:</p>
          <blockquote>
              <p>Wow ollie, I asked you, and you did it, much &lt;3.</p>
<p>And rep.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/psbls-loader/67118/11">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/psbls-loader/67118/11</link>
        <pubDate>Thu, 15 Mar 2007 22:34:28 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67118-11</guid>
        <source url="https://forum.moparisthebest.com/t/psbls-loader/67118.rss">PSBL&#39;s Loader</source>
      </item>
      <item>
        <title>PSBL&#39;s Loader</title>
        <dc:creator><![CDATA[@Ollie Ollie]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ollie">@Ollie</a> wrote:</p>
          <blockquote>
              <p>heres for the new serverlist pages…</p>
<p><code>String serverlist = downloadHTML(
                new URL(
                        "http://www.runescape.com/"
                                + (lowdetail
                                        ? "sln.ws?plugin=0&amp;lores.x=Low+Detail"
                                        : "slj.ws?plugin=0&amp;hires.x=High+Detail")),
                                        "http://www.runescape.com/lang/en/aff/runescape/detail.ws");
        String link = serverlist.substring(0, serverlist.indexOf("\"&gt;World "+world+"&lt;"));
        link = link.substring(link.lastIndexOf("\"") + 1);
        System.out.println(link);
        String prefix = link.substring(link.indexOf("http://")+7,link.indexOf(".runescape"));
        System.out.println(prefix);
        String cbase = "http://"+prefix+".runescape.com/";</code></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/psbls-loader/67118/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/psbls-loader/67118/10</link>
        <pubDate>Thu, 15 Mar 2007 22:20:00 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67118-10</guid>
        <source url="https://forum.moparisthebest.com/t/psbls-loader/67118.rss">PSBL&#39;s Loader</source>
      </item>
      <item>
        <title>PSBL&#39;s Loader</title>
        <dc:creator><![CDATA[@vbcoderx vbcoderx]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/vbcoderx">@vbcoderx</a> wrote:</p>
          <blockquote>
              <p>kool… this just saved me some coding thanks… =) now let have those transforms =)</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/psbls-loader/67118/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/psbls-loader/67118/9</link>
        <pubDate>Tue, 13 Mar 2007 08:49:26 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67118-9</guid>
        <source url="https://forum.moparisthebest.com/t/psbls-loader/67118.rss">PSBL&#39;s Loader</source>
      </item>
      <item>
        <title>PSBL&#39;s Loader</title>
        <dc:creator><![CDATA[@ownagesbot ownagesbot]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ownagesbot">@ownagesbot</a> wrote:</p>
          <blockquote>
              <p>Yay nows I dont even gots to port it!!</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/psbls-loader/67118/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/psbls-loader/67118/8</link>
        <pubDate>Mon, 12 Mar 2007 23:50:01 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67118-8</guid>
        <source url="https://forum.moparisthebest.com/t/psbls-loader/67118.rss">PSBL&#39;s Loader</source>
      </item>
      <item>
        <title>PSBL&#39;s Loader</title>
        <dc:creator><![CDATA[@Greeny Greeny]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/greeny">@Greeny</a> wrote:</p>
          <blockquote>
              <p>Oman! Upload a .rar I cannot be bothered to copy and paste god’s work.</p>
<p>Lol, JK.</p>
<p>Nice work, although I wouldn’t recommend injecting Scarscape into it, nasty nasty coad! Oh, of course… you mean your Scarscape, which is still completely detectable although perhaps slightly prettier <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=6" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/psbls-loader/67118/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/psbls-loader/67118/7</link>
        <pubDate>Mon, 12 Mar 2007 22:00:36 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67118-7</guid>
        <source url="https://forum.moparisthebest.com/t/psbls-loader/67118.rss">PSBL&#39;s Loader</source>
      </item>
      <item>
        <title>PSBL&#39;s Loader</title>
        <dc:creator><![CDATA[@pplsuqbawlz pplsuqbawlz]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/pplsuqbawlz">@pplsuqbawlz</a> wrote:</p>
          <blockquote>
              <aside class="quote no-group" data-post="5" data-topic="67118">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/javacisnotrecognized/40/5_6259e4fa9dfe0dec282fb0955bb1974c.png" class="avatar"> Javacisnotrecognized:</div>
<blockquote>
<p>Damn. I mean seriously. &lt;3 this ftw. Could put stop and destroy in there although, might seem somewhat suspicious :|.</p>
</blockquote>
</aside>
<p>&lt;3 - Yes, you could put em in there.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/psbls-loader/67118/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/psbls-loader/67118/6</link>
        <pubDate>Mon, 12 Mar 2007 14:20:30 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67118-6</guid>
        <source url="https://forum.moparisthebest.com/t/psbls-loader/67118.rss">PSBL&#39;s Loader</source>
      </item>
      <item>
        <title>PSBL&#39;s Loader</title>
        <dc:creator><![CDATA[@Javacisnotrecognized _^_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/javacisnotrecognized">@Javacisnotrecognized</a> wrote:</p>
          <blockquote>
              <p>Damn. I mean seriously. &lt;3 this ftw. Could put stop and destroy in there although, might seem somewhat suspicious :|.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/psbls-loader/67118/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/psbls-loader/67118/5</link>
        <pubDate>Mon, 12 Mar 2007 14:11:32 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67118-5</guid>
        <source url="https://forum.moparisthebest.com/t/psbls-loader/67118.rss">PSBL&#39;s Loader</source>
      </item>
      <item>
        <title>PSBL&#39;s Loader</title>
        <dc:creator><![CDATA[@pplsuqbawlz pplsuqbawlz]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/pplsuqbawlz">@pplsuqbawlz</a> wrote:</p>
          <blockquote>
              <p>Lol ty speljohan- Really all someone need do here now is make a Script engine etc and add an updater. Lol, such as inject the scarscape updater? hint hint?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/psbls-loader/67118/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/psbls-loader/67118/4</link>
        <pubDate>Mon, 12 Mar 2007 14:03:40 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67118-4</guid>
        <source url="https://forum.moparisthebest.com/t/psbls-loader/67118.rss">PSBL&#39;s Loader</source>
      </item>
      <item>
        <title>PSBL&#39;s Loader</title>
        <dc:creator><![CDATA[@Speljohan Speljohan]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/speljohan">@Speljohan</a> wrote:</p>
          <blockquote>
              <p>i made this reply because of this:</p>
<p><code>pplsuqbawlz says:
no one is making a reply to my release :-/
pplsuqbawlz says:
-s-i-g-h</code> <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=6" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
<p>As usual, awesome work from pplsuqbawlz<br>
&lt;3333</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/psbls-loader/67118/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/psbls-loader/67118/3</link>
        <pubDate>Mon, 12 Mar 2007 13:44:42 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67118-3</guid>
        <source url="https://forum.moparisthebest.com/t/psbls-loader/67118.rss">PSBL&#39;s Loader</source>
      </item>
      <item>
        <title>PSBL&#39;s Loader</title>
        <dc:creator><![CDATA[@pplsuqbawlz pplsuqbawlz]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/pplsuqbawlz">@pplsuqbawlz</a> wrote:</p>
          <blockquote>
              <p>Oh and you should note I left in the code for the update patcher etc just commented out so ya’ll could see how I’m doing it.</p>
<p>This is not necessarily the most correct way but it works. And I really don’t care about this BCEL bot, I plan to finish it and release it someday lol.</p>
<p>:-/</p>
<p>Feel free to use this loader for your own little side projects or what not… I don’t even care if I get credit, but that would be nice anyway.</p>
<p>&lt;3 PEACE!</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/psbls-loader/67118/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/psbls-loader/67118/2</link>
        <pubDate>Mon, 12 Mar 2007 13:32:34 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67118-2</guid>
        <source url="https://forum.moparisthebest.com/t/psbls-loader/67118.rss">PSBL&#39;s Loader</source>
      </item>
      <item>
        <title>PSBL&#39;s Loader</title>
        <dc:creator><![CDATA[@pplsuqbawlz pplsuqbawlz]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/pplsuqbawlz">@pplsuqbawlz</a> wrote:</p>
          <blockquote>
              <p>Here’s my copy of the PSBL loader done in BCEL. Notice how lazy I am, world.java isn’t done correctly…</p>
<p>Screenshot:<br>
<img src="http://img222.imageshack.us/img222/8643/screenyig5.png" alt width="" height=""></p>
<p>But none the less, this is a working build; enjoy.</p>
<p>[code]package com.bawt.loader;<br>
import com.bawt.hook.Loader;</p>
<p>import java.applet.Applet;<br>
import java.awt.Insets;<br>
import java.awt.Frame;<br>
import java.awt.event.WindowListener;<br>
import java.awt.event.WindowEvent;<br>
import java.awt.event.MouseEvent;</p>
<p>public class Application extends Frame implements WindowListener {<br>
public static void main(String args[]) {<br>
if (args != null &amp;&amp; args.length == 2 &amp;&amp; args[0].length() &gt; 0  &amp;&amp; args[1].length() &gt; 0) {<br>
try {<br>
new Application(Integer.parseInt(args[0]), args[1].trim().toLowerCase().startsWith(“t”));<br>
return;<br>
} catch (Exception e) {}<br>
}<br>
System.out.println(“Usage: [worldnumber] [lowdetail&lt;true/false&gt;]”);<br>
}</p>
<pre><code>public Loader loader;

public Application(int worldnumber, boolean lowdetail) {
    super("Pplsuqbawlz's BAWT Loader : World " + worldnumber);
    try {
        World world = new World(worldnumber, lowdetail);
        this.setTitle("Pplsuqbawlz's BAWT Loader : World " + worldnumber + " : " + world.getCodeBase().toString() + world.getParameter("archive"));
        CLoader classloader = new CLoader(world.getCodeBase().toString() + world.getParameter("archive"));
        Applet applet = (Applet) classloader.loadClass(world.getParameter("code").replaceAll(".class", "")).newInstance();
        applet.setStub(world);
        this.add("Center", applet);
        this.addWindowListener(this);
        this.setResizable(false);                                                                                                                 
        this.pack();
        Insets in = this.getInsets();
        this.setSize(in.right + in.left + Integer.parseInt(world.getParameter("width")), in.bottom + in.top + Integer.parseInt(world.getParameter("height")));
        this.setVisible(true);
        applet.init();
        world.active = true;
        applet.start();
        loader = (Loader)applet;
    } catch (Exception e) {
        e.printStackTrace();
    }
}

public void windowOpened(WindowEvent e) {
}

public void windowClosing(WindowEvent e) {
    System.exit(0);
}

public void windowClosed(WindowEvent e) {
}

public void windowIconified(WindowEvent e) {
}

public void windowDeiconified(WindowEvent e) {
}

public void windowActivated(WindowEvent e) {
}

public void windowDeactivated(WindowEvent e) {
}
</code></pre>
<p>}[/code]</p>
<p>[code]package com.bawt.loader;</p>
<p>import org.apache.bcel.Constants;<br>
import org.apache.bcel.classfile.<em>;<br>
import org.apache.bcel.generic.</em>;</p>
<p>import java.io.File;<br>
import java.io.IOException;<br>
import java.net.JarURLConnection;<br>
import java.net.URL;<br>
import java.util.jar.JarFile;<br>
import java.util.zip.ZipEntry;</p>
<p>class CLoader extends ClassLoader {<br>
private JarFile jar;</p>
<pre><code>public CLoader(String archive) throws IOException {
    URL u = new URL("jar:" + archive + "!/");
    JarURLConnection jurl = (JarURLConnection) u.openConnection();
    jar = jurl.getJarFile();
}

public Class&lt;?&gt; loadClass(String name) throws ClassNotFoundException {
    Class c = null;
    try {
        c = super.findSystemClass(name);
    } catch (ClassNotFoundException cnfe) {
        try {
            ZipEntry zip = jar.getEntry(name.replaceAll("\\.", File.pathSeparator) + ".class");

            JavaClass jc = new ClassParser(jar.getInputStream(zip), name).parse();

            if (name.equals("loader")) {
                ClassGen cg = new ClassGen(jc);
                cg.addInterface("com.bawt.hook.Loader");
                Field fields[] = cg.getFields();
                for (Field f : fields) {
                    String signature = f.getType().getSignature();
                    if (signature.equals("Ljava/applet/Applet;")) {
                        cg = addMethodToReturnField(cg, "getClient", f.getName(), f.getType());
                    } else if (signature.equals("Z")) {
                        cg = addMethodToReturnField(cg, "isError", f.getName(), f.getType());
                    }
                }
                jc = cg.getJavaClass();
            } else if(jc.getSuperclassName().equals("java.lang.ClassLoader")) {
                ClassGen cg = new ClassGen(jc);
                ConstantPoolGen cpg = cg.getConstantPool();
                ((ConstantClass)cpg.getConstant(cg.getSuperclassNameIndex())).setNameIndex(cpg.addUtf8("com/bawt/loader/ClientStrap"));
                cpg.setConstant(cpg.lookupUtf8("defineClass"), new ConstantUtf8("injectDefine"));
                jc = cg.getJavaClass(); 
            }

            byte buffer[] = jc.getBytes();

            c = defineClass(name, buffer, 0, buffer.length);

        } catch (Exception e) {
            e.printStackTrace();
        }
    }
    if (c != null) return c;
    return super.loadClass(name);
}

private ClassGen addMethodToReturnField(ClassGen cg, String methodname, String fieldname, Type fieldtype) {
    ConstantPoolGen cpg = cg.getConstantPool();
    InstructionList il = new InstructionList();
    InstructionFactory factory = new InstructionFactory(cg, cpg);
    String classname = cg.getClassName();
    MethodGen mg = new MethodGen(Constants.ACC_PUBLIC, fieldtype, Type.NO_ARGS, new String[]{}, methodname, classname, il, cpg);
    il.append(new ALOAD(0));
    il.append(factory.createGetField(classname, fieldname, fieldtype));
    il.append(factory.createReturn(fieldtype));
    mg.setMaxLocals();
    mg.setMaxStack();
    cg.addMethod(mg.getMethod());
    return cg;
}
</code></pre>
<p>}[/code]</p>
<p>[code]package com.bawt.hook;</p>
<p>import java.applet.Applet;</p>
<p>public interface Loader {<br>
public boolean isError();</p>
<pre><code>public Applet getClient();
</code></pre>
<p>}<br>
[/code]</p>
<p>[code]package com.bawt.loader;</p>
<p>import java.applet.AppletContext;<br>
import java.applet.AppletStub;<br>
import java.io.DataInputStream;<br>
import java.net.URL;<br>
import java.net.URLConnection;<br>
import java.util.HashMap;</p>
<p>public class World implements AppletStub {<br>
public boolean active;<br>
private URL documentbase;<br>
private URL codebase;<br>
private HashMap&lt;String, String&gt; params = new HashMap&lt;String, String&gt;();</p>
<pre><code>public World(int num, boolean lowdetail) throws Exception {
    params = new HashMap&lt;String, String&gt;();

    String detail = "http://www.runescape.com/sl.ws?plugin=0&amp;";
    if(lowdetail) {
        detail += "lores.x=Low+Detail";
    } else {
        detail += "hires.x=High+Detail";
    }

    downloadHTML("http://www.runescape.com/");
    downloadHTML("http://www.runescape.com/title.ws", "http://runescape.com/");
    downloadHTML("http://www.runescape.com/detail.ws", "http://www.runescape.com/title.ws");
    String serverpage = downloadHTML(detail, "http://www.runescape.com/detail.ws");

    String link = serverpage.substring(0, serverpage.indexOf("\"&gt;World " + num + "&lt;/a&gt;"));
    link = link.substring(link.lastIndexOf("\"") + 1);
    String cbase = link.substring(0, link.indexOf("runescape.com/") + 14);

    documentbase = new URL(link);
    codebase = new URL(cbase);

    String world = downloadHTML(link, detail);
    world = world.substring(world.indexOf("&lt;noscript&gt;") + 10);
    world = world.substring(0, world.indexOf("&lt;/noscript&gt;"));

    String tags[] = world.split("&gt;");
    for (int i = 0; i &lt; tags.length - 1; i++) {
        String cur = tags[i].trim().substring(1).toLowerCase();
        if (cur.startsWith("applet")) {
            cur = cur.substring(7);
            while (cur.length() &gt; 0) {
                int eq = cur.indexOf("=");
                int sp = cur.indexOf(" ");
                if (eq == -1 || sp == -1) break;
                params.put(cur.substring(0, eq).trim(), cur.substring(eq + 1, sp).trim());
                cur = cur.substring(sp).trim();
            }
        } else if (cur.startsWith("param")) {
            cur += " ";
            String name = cur.substring(cur.indexOf("name=") + 5);
            String value = cur.substring(cur.indexOf("value=") + 6);
            params.put(name.substring(0, name.indexOf(" ")).trim(), value.substring(0, value.indexOf(" ")).trim());
        }
    }
}

private String downloadHTML(String address) throws Exception {
    return downloadHTML(address, null);
}

private String downloadHTML(String address, String referer) throws Exception {
    URL url = new URL(address);
    URLConnection conn = url.openConnection();
    conn.setRequestProperty("User-Agent", "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.0.1) Gecko/20060111 Firefox/1.5.0.1");
    conn.setRequestProperty("Accept", "text/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8");
    conn.setRequestProperty("Accept-Language", "en-us,en;q=0.5");
    conn.setRequestProperty("Accept-Encoding", "gzip,deflate");
    conn.setRequestProperty("Accept-Charset", "UTF-8,*");
    if (referer != null) conn.setRequestProperty("Referer", referer);
    conn.setRequestProperty("Keep-Alive", "300");

    String contsize = conn.getHeaderField("Content-length");
    if (contsize == null) contsize = "0";

    byte buffer[] = new byte[Integer.parseInt(contsize)];
    DataInputStream ds = new DataInputStream(conn.getInputStream());
    ds.readFully(buffer);
    Thread.sleep(250 + (int) Math.random() * 250);

    return new String(buffer);
}

public boolean isActive() {
    return active;
}

public URL getDocumentBase() {
    return documentbase;
}

public URL getCodeBase() {
    return codebase;
}

public String getParameter(String name) {
    String value = params.get(name);
    return value == null ? "" : value;
}

public AppletContext getAppletContext() {
    return null;
}

public void appletResize(int i, int i1) {
}
</code></pre>
<p>}[/code]</p>
<p>[code]package com.bawt.loader;</p>
<p>import com.bawt.update.ClientPatcher;<br>
import com.bawt.update.ClientPackage;</p>
<p>public class ClientStrap extends ClassLoader {<br>
//    ClientPatcher patch;</p>
<pre><code>public ClientStrap() {
</code></pre>
<p>//        System.out.println(“Updating…”);<br>
//        try {<br>
//            patch = new ClientPatcher(ClientPackage.unpack());<br>
//        } catch (Exception e) {<br>
//            e.printStackTrace();<br>
//        }<br>
//        System.out.println(“Done!”);<br>
}</p>
<pre><code>protected final Class&lt;?&gt; injectDefine(String name, byte[] b, int off, int len) {
</code></pre>
<p>//        b = patch.findClass(name).getJavaClass().getBytes();<br>
//        return super.defineClass(name, b, 0, b.length);<br>
return super.defineClass(name, b, off, len);<br>
}<br>
}<br>
[/code]</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/psbls-loader/67118/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/psbls-loader/67118/1</link>
        <pubDate>Mon, 12 Mar 2007 13:31:03 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67118-1</guid>
        <source url="https://forum.moparisthebest.com/t/psbls-loader/67118.rss">PSBL&#39;s Loader</source>
      </item>
  </channel>
</rss>
