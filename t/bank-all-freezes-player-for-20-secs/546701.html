<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/bank-all-freezes-player-for-20-secs/546701 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:42:24 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Bank all freezes player for 20 secs - Runescape - moparisthebest.com</title>
    <meta name="description" content="case 89223: //Deposit Inventory
				for(int itemID = 0; itemID &amp;lt; 101; itemID++) {
					for(int invSlot = 0; invSlot &amp;lt; 28; invSlot++) {
						c.getItems().bankItem(itemID, invSlot, 2147000000);
					}
				}
				break;

c&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="546701.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Bank all freezes player for 20 secs&#39;" href="546701.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/bank-all-freezes-player-for-20-secs/546701" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/bank-all-freezes-player-for-20-secs/546701" />
<meta property="og:title" content="Bank all freezes player for 20 secs" />
<meta name="twitter:title" content="Bank all freezes player for 20 secs" />
<meta property="og:description" content="case 89223: //Deposit Inventory 				for(int itemID = 0; itemID &lt; 101; itemID++) { 					for(int invSlot = 0; invSlot &lt; 28; invSlot++) { 						c.getItems().bankItem(itemID, invSlot, 2147000000); 					} 				} 				break;  clickbutton id  below is bank all classs  [code]package server.model.players.packets;  import server.model.items.GameItem;  import server.model.items.Item;  import server.model.players.Client;  import server.model.players.PacketType;  /**    Bank All Items  **/  public class BankAl..." />
<meta name="twitter:description" content="case 89223: //Deposit Inventory 				for(int itemID = 0; itemID &lt; 101; itemID++) { 					for(int invSlot = 0; invSlot &lt; 28; invSlot++) { 						c.getItems().bankItem(itemID, invSlot, 2147000000); 					} 				} 				break;  clickbutton id  below is bank all classs  [code]package server.model.players.packets;  import server.model.items.GameItem;  import server.model.items.Item;  import server.model.players.Client;  import server.model.players.PacketType;  /**    Bank All Items  **/  public class BankAl..." />
<meta property="article:published_time" content="2014-09-13T20:54:35+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="546701.html">Bank all freezes player for 20 secs</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/I_Smoke_Kush.html'><span itemprop='name'>I_Smoke_Kush</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-09-13T20:54:35Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:47:03Z' class='post-time'>
              August 4, 2016,  1:47pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p><code>case 89223: //Deposit Inventory
				for(int itemID = 0; itemID &lt; 101; itemID++) {
					for(int invSlot = 0; invSlot &lt; 28; invSlot++) {
						c.getItems().bankItem(itemID, invSlot, 2147000000);
					}
				}
				break;</code></p>
<p>clickbutton id</p>
<p>below is bank all classs</p>
<p>[code]package server.model.players.packets;</p>
<p>import server.model.items.GameItem;<br>
import server.model.items.Item;<br>
import server.model.players.Client;<br>
import server.model.players.PacketType;</p>
<p>/**</p>
<ul>
<li>
<p>Bank All Items<br>
**/<br>
public class BankAll implements PacketType {</p>
<p><a class="mention" href="../../u/override.html">@Override</a><br>
public void processPacket(Client c, int packetType, int packetSize) {<br>
int removeSlot = c.getInStream().readUnsignedWordA();<br>
int interfaceId = c.getInStream().readUnsignedWord();<br>
int removeId = c.getInStream().readUnsignedWordA();</p>
<pre><code> switch(interfaceId){			
 	case 3900:
 	c.getShops().buyItem(removeId, removeSlot, 10);
 	break;
 	
 	case 3823:
 	if(c.storing) {
 		
 		return;
 	}
 	if(c.inTrade) {
 		c.sendMessage("You can't sell items while trading!");
 		return;
 	}
 	c.getShops().sellItem(removeId, removeSlot, 10);
 	break;
 	
 	case 5064:
 	if(c.storing) {
 		
 		return;
 	}
 	if(c.inTrade) {
 		c.sendMessage("You can't bank items while trading!");
 		return;
 	}
 	if(c.storing) {
 		
 		return;
 	}
 	if (Item.itemStackable[removeId]) {
 		c.getItems().bankItem(c.playerItems[removeSlot] , removeSlot, c.playerItemsN[removeSlot]);
 	} else {
 		c.getItems().bankItem(c.playerItems[removeSlot] , removeSlot, c.getItems().itemAmount(c.playerItems[removeSlot]));
 	}
 	break;
 	
 	case 5382:
 	if(c.storing) {
 		
 		return;
 	}
 	c.getItems().fromBank(c.bankItems[removeSlot] , removeSlot, c.bankItemsN[removeSlot]);
 	break;	
 	
 	case 3322:
 	if(c.storing) {
 		
 		return;
 	}
 	if(c.duelStatus &lt;= 0) { 
 		if(Item.itemStackable[removeId]){
 			c.getTradeAndDuel().tradeItem(removeId, removeSlot, c.playerItemsN[removeSlot]);
     	} else {
 			c.getTradeAndDuel().tradeItem(removeId, removeSlot, 28);  
 		}
 	} else {
 		if(Item.itemStackable[removeId] || Item.itemIsNote[removeId]) {
 			c.getTradeAndDuel().stakeItem(removeId, removeSlot, c.playerItemsN[removeSlot]);
 		} else {
 			c.getTradeAndDuel().stakeItem(removeId, removeSlot, 28);
 		}
 	}
 	break;
 	
 	case 3415: 
 	if(c.storing) {
 		
 		return;
 	}
 	if(c.duelStatus &lt;= 0) { 
 		if(Item.itemStackable[removeId]) {
 			for (GameItem item : c.getTradeAndDuel().offeredItems) {
 				if(item.id == removeId) {
 					c.getTradeAndDuel().fromTrade(removeId, removeSlot, c.getTradeAndDuel().offeredItems.get(removeSlot).amount);
 				}
 			}
 		} else {
 			for (GameItem item : c.getTradeAndDuel().offeredItems) {
 				if(item.id == removeId) {
 					c.getTradeAndDuel().fromTrade(removeId, removeSlot, 28);
 				}
 			}
 		}
     } 
 	break;
 	
 	case 6669:
 	if(c.storing) {
 		
 		return;
 	}
 	if(Item.itemStackable[removeId] || Item.itemIsNote[removeId]) {
 		for (GameItem item : c.getTradeAndDuel().stakedItems) {
 			if(item.id == removeId) {
 				c.getTradeAndDuel().fromDuel(removeId, removeSlot, c.getTradeAndDuel().stakedItems.get(removeSlot).amount);
 			}
 		}
 				
 	} else {
 		c.getTradeAndDuel().fromDuel(removeId, removeSlot, 28);
 	}
 	break;

 }
</code></pre>
<p>}</p>
</li>
</ul>
<p>}<br>
[/code]</p>
      </div>

      <meta itemprop='headline' content='Bank all freezes player for 20 secs'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Vain1.html'><span itemprop='name'>Vain1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-09-13T22:18:22Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:47:04Z' class='post-time'>
              August 4, 2016,  1:47pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>for the deposit-inventory, you’re essentially banking 214,700,000,000 items per account, with no checks whatsoever.</p>
<p>you didn’t post the method calls for the bank-all.</p>
      </div>

      <meta itemprop='headline' content='Bank all freezes player for 20 secs'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/tyb97.html'><span itemprop='name'>tyb97</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-09-13T22:28:32Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:47:04Z' class='post-time'>
              August 4, 2016,  1:47pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“I Smoke Kush, post:1, topic:546701”]<code>case 89223: //Deposit Inventory
				for(int itemID = 0; itemID &lt; 101; itemID++) {
					for(int invSlot = 0; invSlot &lt; 28; invSlot++) {
						c.getItems().bankItem(itemID, invSlot, 2147000000);
					}
				}
				break;</code>[/quote]<br>
What in the hell is going on with this nested loop? I <span class="bbcode-b">really</span> don’t know why this is so fucked up, but this mess is probably the reason why.</p>
<p>You need to loop through the players inventory collection, and move those items into the bank, and remove them from the players inventory. Note: This is pseudo-code, not based off of any source, just writing this down so you can get the concept.</p>
<p><code>
case 89223:
    for (Item item : player.getInventory()) {
		player.getInventory().removeItem(item, player.getInventory().getSlot(item.getID()));
		player.getBank().addItem(item);
    }
break;</code></p>
<p>Something along those lines. Iterate through the players inventory collection, remove the item from the inventory, add it to the bank.</p>
      </div>

      <meta itemprop='headline' content='Bank all freezes player for 20 secs'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Vain1.html'><span itemprop='name'>Vain1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-09-13T23:49:55Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:47:04Z' class='post-time'>
              August 4, 2016,  1:47pm
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>^ you should check to see if it can be added to the bank before attempting it.</p>
<p>not positive, but im sure the bank.addItem(int) method checks to see if the bank has space or not, but at this point you’ve already deleted the item. so if this method fails, you lost the item completely.</p>
      </div>

      <meta itemprop='headline' content='Bank all freezes player for 20 secs'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="2" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/tyb97.html'><span itemprop='name'>tyb97</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-09-13T23:55:30Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:47:04Z' class='post-time'>
              August 4, 2016,  1:47pm
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Vain_, post:4, topic:546701”]^ you should check to see if it can be added to the bank before attempting it.</p>
<p>not positive, but im sure the bank.addItem(int) method checks to see if the bank has space or not, but at this point you’ve already deleted the item. so if this method fails, you lost the item completely.[/quote]<br>
Yeah I wasn’t accounting for the bankItem method and all that, just a general concept. Also I didn’t include any checks in my code, which as Vain_ said, you really should. These checks can prevent dupes and accidental loss of items.</p>
      </div>

      <meta itemprop='headline' content='Bank all freezes player for 20 secs'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/ExtremeX-Scape.html'><span itemprop='name'>ExtremeX-Scape</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-09-14T07:55:55Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:47:07Z' class='post-time'>
              August 4, 2016,  1:47pm
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Vain_, post:4, topic:546701”]^ you should check to see if it can be added to the bank before attempting it.</p>
<p>not positive, but im sure the bank.addItem(int) method checks to see if the bank has space or not, but at this point you’ve already deleted the item. so if this method fails, you lost the item completely.[/quote]</p>
<p>when are containers going to be designed with all of this in mind?</p>
<p><code>
for (Item item : player.getInventory()) {
    Item removed = player.getInventory().remove(item);
    if (removed != null) {
        // notify failed and break
    }
    // otherwise bank
}</code></p>
<p>This would be a good way, imho to control state without all of the legacy code that would typically be involved…</p>
      </div>

      <meta itemprop='headline' content='Bank all freezes player for 20 secs'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/FusionLord.html'><span itemprop='name'>FusionLord</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-09-14T10:13:57Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:47:08Z' class='post-time'>
              August 4, 2016,  1:47pm
            </time>
        <span itemprop='position'>#7</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“tyb97, post:3, topic:546701”][quote author=I Smoke Kush link=topic=665599.msg4449700#msg4449700 date=1410641675]</p>
<p><code>case 89223: //Deposit Inventory
				for(int itemID = 0; itemID &lt; 101; itemID++) {
					for(int invSlot = 0; invSlot &lt; 28; invSlot++) {
						c.getItems().bankItem(itemID, invSlot, 2147000000);
					}
				}
				break;</code><br>
[/quote]<br>
What in the hell is going on with this nested loop? I <span class="bbcode-b">really</span> don’t know why this is so fudgeed up, but this mess is probably the reason why.</p>
<p>You need to loop through the players inventory collection, and move those items into the bank, and remove them from the players inventory. Note: This is pseudo-code, not based off of any source, just writing this down so you can get the concept.</p>
<p><code>case 89223:
    for (Item item : player.getInventory()) {
		player.getInventory().removeItem(item, player.getInventory().getSlot(item.getID()));
		player.getBank().addItem(item);
    }
break;</code></p>
<p>Something along those lines. Iterate through the players inventory collection, remove the item from the inventory, add it to the bank.[/quote]<br>
You were on the right track but if you remove them in a loop that is accessing the array you can cause an ConcurrentModificationException.</p>
<p>this is with Asteria 2.0 so it would need to be tailored to your source…</p>
<pre><code class="lang-auto">case 89223:
    for (Iterator&lt;Item&gt; iter = player.getInventory().getIterator(); iter.hasNext(); ) {
        if (player.getBank().deposit(iter.next())) {
            iter.remove();
        }
    }
break;</code></pre>
      </div>

      <meta itemprop='headline' content='Bank all freezes player for 20 secs'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="3" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/tyb97.html'><span itemprop='name'>tyb97</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-09-14T15:32:04Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:47:11Z' class='post-time'>
              August 4, 2016,  1:47pm
            </time>
        <span itemprop='position'>#8</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“FusionLord, post:7, topic:546701”][quote author=tyb97 link=topic=665599.msg4449714#msg4449714 date=1410647312]</p>
<aside class="quote">
<blockquote>
<p><code>case 89223: //Deposit Inventory
				for(int itemID = 0; itemID &lt; 101; itemID++) {
					for(int invSlot = 0; invSlot &lt; 28; invSlot++) {
						c.getItems().bankItem(itemID, invSlot, 2147000000);
					}
				}
				break;</code></p>
</blockquote>
</aside>
<p>What in the hell is going on with this nested loop? I <span class="bbcode-b">really</span> don’t know why this is so fudgeed up, but this mess is probably the reason why.</p>
<p>You need to loop through the players inventory collection, and move those items into the bank, and remove them from the players inventory. Note: This is pseudo-code, not based off of any source, just writing this down so you can get the concept.</p>
<p><code>case 89223:
    for (Item item : player.getInventory()) {
		player.getInventory().removeItem(item, player.getInventory().getSlot(item.getID()));
		player.getBank().addItem(item);
    }
break;</code></p>
<p>Something along those lines. Iterate through the players inventory collection, remove the item from the inventory, add it to the bank.<br>
[/quote]<br>
You were on the right track but if you remove them in a loop that is accessing the array you can cause an ConcurrentModificationException.</p>
<p>this is with Asteria 2.0 so it would need to be tailored to your source…</p>
<p><code>
case 89223:
    for (Iterator&lt;Item&gt; iter = player.getInventory().getIterator(); iter.hasNext(); ) {
        if (player.getBank().deposit(iter.next())) {
            iter.remove();
        }
    }
break;
</code>[/quote]<br>
No, this is wrong. you’re calling a remove method on an item, which does nothing. Other than that the code is the exact same as mine, just with a retarded ass looking for loop, mine just didn’t have any checks. Mostly because the OP’s source probably doesn’t have a boolean method for his deposit method, and I was trying to get it as close to his as I could. However AtomicInt_'s example was the best.</p>
      </div>

      <meta itemprop='headline' content='Bank all freezes player for 20 secs'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/arham_4.html'><span itemprop='name'>arham_4</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-09-14T15:33:54Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:47:11Z' class='post-time'>
              August 4, 2016,  1:47pm
            </time>
        <span itemprop='position'>#9</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“FusionLord, post:7, topic:546701”][quote author=tyb97 link=topic=665599.msg4449714#msg4449714 date=1410647312]</p>
<aside class="quote">
<blockquote>
<p><code>case 89223: //Deposit Inventory
				for(int itemID = 0; itemID &lt; 101; itemID++) {
					for(int invSlot = 0; invSlot &lt; 28; invSlot++) {
						c.getItems().bankItem(itemID, invSlot, 2147000000);
					}
				}
				break;</code></p>
</blockquote>
</aside>
<p>What in the hell is going on with this nested loop? I <span class="bbcode-b">really</span> don’t know why this is so fudgeed up, but this mess is probably the reason why.</p>
<p>You need to loop through the players inventory collection, and move those items into the bank, and remove them from the players inventory. Note: This is pseudo-code, not based off of any source, just writing this down so you can get the concept.</p>
<p><code>case 89223:
    for (Item item : player.getInventory()) {
		player.getInventory().removeItem(item, player.getInventory().getSlot(item.getID()));
		player.getBank().addItem(item);
    }
break;</code></p>
<p>Something along those lines. Iterate through the players inventory collection, remove the item from the inventory, add it to the bank.<br>
[/quote]<br>
You were on the right track but if you remove them in a loop that is accessing the array you can cause an ConcurrentModificationException.</p>
<p>this is with Asteria 2.0 so it would need to be tailored to your source…</p>
<p><code>
case 89223:
    for (Iterator&lt;Item&gt; iter = player.getInventory().getIterator(); iter.hasNext(); ) {
        if (player.getBank().deposit(iter.next())) {
            iter.remove();
        }
    }
break;
</code>[/quote]<br>
You do realize if you are simply just reading data, both a for-each statement and an iterator have no difference. Besides, the for-each statement uses the iterator anyways…</p>
<p>However, if you are using the loop to get data, like this:</p>
<p><code>
for(int i = 0; i &lt; World.getPlayers().size(); i++) {
   Player player = World.getPlayers().get(i);
}</code><br>
Then using an iterator is superior.</p>
<p>Refer to this for more details:<br>
<a href="http://stackoverflow.com/questions/2113216/which-is-more-efficient-a-for-each-loop-or-an-iterator" class="onebox" target="_blank" rel="nofollow noopener">http://stackoverflow.com/questions/2113216/which-is-more-efficient-a-for-each-loop-or-an-iterator</a></p>
      </div>

      <meta itemprop='headline' content='Bank all freezes player for 20 secs'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/ExtremeX-Scape.html'><span itemprop='name'>ExtremeX-Scape</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-09-14T15:50:37Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:47:11Z' class='post-time'>
              August 4, 2016,  1:47pm
            </time>
        <span itemprop='position'>#10</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“FusionLord, post:7, topic:546701”][quote author=tyb97 link=topic=665599.msg4449714#msg4449714 date=1410647312]</p>
<aside class="quote">
<blockquote>
<p><code>case 89223: //Deposit Inventory
				for(int itemID = 0; itemID &lt; 101; itemID++) {
					for(int invSlot = 0; invSlot &lt; 28; invSlot++) {
						c.getItems().bankItem(itemID, invSlot, 2147000000);
					}
				}
				break;</code></p>
</blockquote>
</aside>
<p>What in the hell is going on with this nested loop? I <span class="bbcode-b">really</span> don’t know why this is so fudgeed up, but this mess is probably the reason why.</p>
<p>You need to loop through the players inventory collection, and move those items into the bank, and remove them from the players inventory. Note: This is pseudo-code, not based off of any source, just writing this down so you can get the concept.</p>
<p><code>case 89223:
    for (Item item : player.getInventory()) {
		player.getInventory().removeItem(item, player.getInventory().getSlot(item.getID()));
		player.getBank().addItem(item);
    }
break;</code></p>
<p>Something along those lines. Iterate through the players inventory collection, remove the item from the inventory, add it to the bank.<br>
[/quote]<br>
You were on the right track but if you remove them in a loop that is accessing the array you can cause an ConcurrentModificationException.</p>
<p>this is with Asteria 2.0 so it would need to be tailored to your source…</p>
<p><code>
case 89223:
    for (Iterator&lt;Item&gt; iter = player.getInventory().getIterator(); iter.hasNext(); ) {
        if (player.getBank().deposit(iter.next())) {
            iter.remove();
        }
    }
break;
</code>[/quote]</p>
<p>This is the case with Asteria due to the fact that its item container is a <span class="bbcode-b">collection</span>, you do not need to worry about this when using an array. (Asteria is the only server afaik that uses an actual collection for items)</p>
      </div>

      <meta itemprop='headline' content='Bank all freezes player for 20 secs'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Vain1.html'><span itemprop='name'>Vain1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-09-14T15:55:13Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:47:11Z' class='post-time'>
              August 4, 2016,  1:47pm
            </time>
        <span itemprop='position'>#11</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>i still see no checks for whether the item can be banked, just simply if it has been. now, i could be mistaken - im not sure if the deposit/bankitem methods check for the bank size or whatnot, but it’d still be safe measures to do it yourself.</p>
      </div>

      <meta itemprop='headline' content='Bank all freezes player for 20 secs'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/tyb97.html'><span itemprop='name'>tyb97</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-09-14T15:57:08Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:47:11Z' class='post-time'>
              August 4, 2016,  1:47pm
            </time>
        <span itemprop='position'>#12</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="11" data-topic="546701">
<div class="title">
<div class="quote-controls"></div>
 Vain_:</div>
<blockquote>
<p>i still see no checks for whether the item can be banked, just simply if it has been. now, i could be mistaken - im not sure if the deposit/bankitem methods check for the bank size or whatnot, but it’d still be safe measures to do it yourself.</p>
</blockquote>
</aside>
<p>Nobody can be bothered to add any in these instances. We assume the OP will handle these himself. We’re just explaining to him the concept of things.</p>
      </div>

      <meta itemprop='headline' content='Bank all freezes player for 20 secs'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Vain1.html'><span itemprop='name'>Vain1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-09-14T16:00:03Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:47:11Z' class='post-time'>
              August 4, 2016,  1:47pm
            </time>
        <span itemprop='position'>#13</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>the op posted this topic with the title ‘bank <span class="bbcode-u">all</span>’</p>
<p>he then posted a method call for <span class="bbcode-u">deposit inventory</span> and a class for <span class="bbcode-u">bank all</span></p>
<p>he also shows a method attempting to bank 214,700,000,000 items that don’t exist / nor are checked for / removed.</p>
<p>i honestly don’t believe he will be able to accomplish this without being spoonfed.</p>
      </div>

      <meta itemprop='headline' content='Bank all freezes player for 20 secs'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/ExtremeX-Scape.html'><span itemprop='name'>ExtremeX-Scape</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-09-14T16:00:41Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:47:11Z' class='post-time'>
              August 4, 2016,  1:47pm
            </time>
        <span itemprop='position'>#14</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>OP obviously smokes kush, he will be able to perform this task with ease.</p>
      </div>

      <meta itemprop='headline' content='Bank all freezes player for 20 secs'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/bank-all-freezes-player-for-20-secs/546701 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:42:25 GMT -->
</html>
