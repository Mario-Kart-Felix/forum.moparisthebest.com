<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/c-delegate-and-event-tutorial/328679?page=2 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 07:29:38 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>C# delegate and event tutorial - General Programming - moparisthebest.com</title>
    <meta name="description" content="Well I recently started learning C#, and to be quite honest I&amp;#39;m already in love with it lol.  It has so many great features! One of the things I really loved was Delegates and Events it really makes making an event drive&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="3286794658.html?page=2" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;C# delegate and event tutorial&#39;" href="328679.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/c-delegate-and-event-tutorial/328679?page=2" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/c-delegate-and-event-tutorial/328679?page=2" />
<meta property="og:title" content="C# delegate and event tutorial" />
<meta name="twitter:title" content="C# delegate and event tutorial" />
<meta property="og:description" content="[quote=“abraham2119, post:19, topic:328679”][quote author=oksuper_ link=topic=425076.msg3122200#msg3122200 date=1265637228]  template &lt;typename hndlr_type&gt; class event {     private:         std::vector&lt;hndlr_type&gt; handlers;     public:         void operator()(int arg_cnt, ...) {             ... do da rest  ...         }          void operator+=(hndlr_type&amp; hndlr) {             handlers.push_back(hndlr);         } }; ... typedef void (* irc_msg_listener)(irc_user&amp;, std::string); event&lt;irc_msg_li..." />
<meta name="twitter:description" content="[quote=“abraham2119, post:19, topic:328679”][quote author=oksuper_ link=topic=425076.msg3122200#msg3122200 date=1265637228]  template &lt;typename hndlr_type&gt; class event {     private:         std::vector&lt;hndlr_type&gt; handlers;     public:         void operator()(int arg_cnt, ...) {             ... do da rest  ...         }          void operator+=(hndlr_type&amp; hndlr) {             handlers.push_back(hndlr);         } }; ... typedef void (* irc_msg_listener)(irc_user&amp;, std::string); event&lt;irc_msg_li..." />
<meta property="article:published_time" content="2010-02-09T03:37:00+00:00" />
<meta property="og:ignore_canonical" content="true" />

      <link rel="prev" href="328679.html">


    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="328679.html">C# delegate and event tutorial</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/general-programming.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>General Programming</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Jython.html'><span itemprop='name'>Jython</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-02-09T03:37:00Z'>
            <time itemprop='dateModified' datetime='2016-07-31T14:38:05Z' class='post-time'>
              July 31, 2016,  2:38pm
            </time>
        <span itemprop='position'>#21</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“abraham2119, post:19, topic:328679”][quote author=oksuper_ link=topic=425076.msg3122200#msg3122200 date=1265637228]</p>
<pre><code class="lang-auto">template &lt;typename hndlr_type&gt;
class event {
    private:
        std::vector&lt;hndlr_type&gt; handlers;
    public:
        void operator()(int arg_cnt, ...) {
            ... do da rest  ...
        }

        void operator+=(hndlr_type&amp; hndlr) {
            handlers.push_back(hndlr);
        }
};
...
typedef void (* irc_msg_listener)(irc_user&amp;, std::string);
event&lt;irc_msg_listener&gt; evt;
...
evt += my_msg_listener;
...
evt(sender, "gay");</code></pre>
<p>something like that… baddabing<br>
ps that is prolly wrong seeing as i did it all in my head and i am a nerd<br>
[/quote]That obviously does not provide the same functionality as C# delegates mainly because with your design, you cannot store pointers to functions that are not of the same type within the same ‘event’ object. Unless you either use inline assembly or use a ‘void *’ to store the address of any function and have the user cast to its respective type, I don’t see a way of properly achieving this.[/quote]<br>
no shit you can only add a single type… afaik that is the fucking point.</p>
      </div>

      <meta itemprop='headline' content='C# delegate and event tutorial'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/abraham2119.html'><span itemprop='name'>abraham2119</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-02-09T05:16:19Z'>
            <time itemprop='dateModified' datetime='2016-07-31T14:38:09Z' class='post-time'>
              July 31, 2016,  2:38pm
            </time>
        <span itemprop='position'>#22</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Oh never mind, I thought delegates could store multiple types (I didn’t know how the callback methods were invoked until reading this thread again).</p>
<p>Anyways, I made the small implementation in C:</p>
<p>event.h</p>
<pre><code class="lang-auto">/* event.h */
#ifndef _EVENT

#define _EVENT

#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

typedef struct {
    int handlerc;
    int size;
    void **handlers;
} event;

extern void invoke_handlers(event *); /*Have user iterate through 'handlers', cast to respective function type and invoke*/
void init_event(event *);
void add_handler(event *, void *);
void remove_handler(event *, int);
void dispose_event(event *);

#endif</code></pre>
<p>event.c</p>
<pre><code class="lang-auto">/* event.c */
#include "event.h"

void init_event(event *e)
{
    e-&gt;handlerc = 0;
    e-&gt;size = 10;
    e-&gt;handlers = malloc(sizeof(void *) * 10);
}

void add_handler(event *e, void *handler)
{
    if (e-&gt;handlerc &gt;= e-&gt;size) {
        e-&gt;size += 10;
        e-&gt;handlers = realloc(e-&gt;handlers, sizeof(void *) * e-&gt;size);
        if (e-&gt;handlers == NULL) {
            perror("Couldn't allocate enough memory..");
            exit(1);
        }
    }
    e-&gt;handlers[e-&gt;handlerc++] = handler;
}

void remove_handler(event *e, int index)
{
    e-&gt;handlers[index] = NULL;
    for (; index &lt; (e-&gt;handlerc - 1); index++) {
        e-&gt;handlers[index] = e-&gt;handlers[index + 1];
    }
    e-&gt;handlerc--;
}

void dispose_event(event *e)
{
    free(e-&gt;handlers);
}</code></pre>
<p>Usage:</p>
<p>main.c</p>
<pre><code class="lang-auto">/* main.c */
#include &lt;stdio.h&gt;
#include "event.h"

void test_func(void)
{
    printf("Test\n");
}

void test_func2(void)
{
    printf("Test2\n");
}

void invoke_handlers(event *e)
{
    int i;
    for (i = 0; i &lt; e-&gt;handlerc; i++) {
        ((void (*)(void)) e-&gt;handlers[i]) ();
    }
}

int main(int argc, char **argv)
{
    event e;
    init_event(&amp;e);
    add_handler(&amp;e, &amp;test_func);
    add_handler(&amp;e, &amp;test_func2);
    invoke_handlers(&amp;e);
    dispose_event(&amp;e);
    
    return 0;
}</code></pre>
<p>It’s much cleaner in C++ though and obviously not type safe. <img src="../../images/emoji/twitter/stuck_out_tongueae52.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
      </div>

      <meta itemprop='headline' content='C# delegate and event tutorial'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>

  <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
      <span itemprop='name'><a rel="prev" itemprop="url" href="328679.html">← previous page</a></span>
  </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/c-delegate-and-event-tutorial/328679?page=2 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 07:29:38 GMT -->
</html>
