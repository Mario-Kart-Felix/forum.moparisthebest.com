<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/algorithm-idenficiation/445093 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Aug 2019 02:35:16 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Algorithm Idenficiation - General Programming - moparisthebest.com</title>
    <meta name="description" content="Going to go out on the limb to guess this is huffman encoding but I couldn&amp;#39;t really be sure? I don&amp;#39;t know what the &amp;#39;values&amp;#39; array is other than it&amp;#39;s used to signify a character. Taken from a modern Runescape, Huffmans cl&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="445093.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Algorithm Idenficiation&#39;" href="445093.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/algorithm-idenficiation/445093" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/algorithm-idenficiation/445093" />
<meta property="og:title" content="Algorithm Idenficiation" />
<meta name="twitter:title" content="Algorithm Idenficiation" />
<meta property="og:description" content="Going to go out on the limb to guess this is huffman encoding but I couldn’t really be sure? I don’t know what the ‘values’ array is other than it’s used to signify a character. Taken from a modern Runescape, Huffmans class. If anyone was wondering. I’d just like a bit more information on how this actually works in layman terms.  final int encode(byte[] src, byte[] dest, int srcOff, int destOff, int len) { 	try { 	    anInt3771++; 	    int value = 0; 	    len += srcOff; 	    int bitOffset = dest..." />
<meta name="twitter:description" content="Going to go out on the limb to guess this is huffman encoding but I couldn’t really be sure? I don’t know what the ‘values’ array is other than it’s used to signify a character. Taken from a modern Runescape, Huffmans class. If anyone was wondering. I’d just like a bit more information on how this actually works in layman terms.  final int encode(byte[] src, byte[] dest, int srcOff, int destOff, int len) { 	try { 	    anInt3771++; 	    int value = 0; 	    len += srcOff; 	    int bitOffset = dest..." />
<meta property="article:published_time" content="2012-06-14T09:25:55+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="445093.html">Algorithm Idenficiation</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/general-programming.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>General Programming</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/sinisoul.html'><span itemprop='name'>sinisoul</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-06-14T09:25:55Z'>
            <time itemprop='dateModified' datetime='2016-08-03T03:12:36Z' class='post-time'>
              August 3, 2016,  3:12am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Going to go out on the limb to guess this is huffman encoding but I couldn’t really be sure? I don’t know what the ‘values’ array is other than it’s used to signify a character. Taken from a modern Runescape, Huffmans class. If anyone was wondering. I’d just like a bit more information on how this actually works in layman terms.</p>
<pre><code class="lang-auto">final int encode(byte[] src, byte[] dest, int srcOff, int destOff, int len) {
	try {
	    anInt3771++;
	    int value = 0;
	    len += srcOff;
	    int bitOffset = destOff &lt;&lt; 3;
	    for (/**/; (srcOff) &lt; (len); srcOff++) {
		int dataValue = 0xff &amp; src[srcOff];
		int v = values[dataValue];
		int offset = bitOffsets[dataValue];
		if (offset == 0)
		    throw new RuntimeException("No codeword for data value " + dataValue);
		int byteOff = bitOffset &gt;&gt; 3;
		int localBit = bitOffset &amp; 0x7;
		value &amp;= -localBit &gt;&gt; 31;
		int nextOff = (localBit + offset - 1 &gt;&gt; 3) + byteOff;
		bitOffset += offset;
		localBit += 24;
		dest[byteOff]  = (byte) (value = Class273.bitOr(value, v &gt;&gt;&gt; localBit));
		if ((byteOff ^ 0xffffffff) &gt; (nextOff ^ 0xffffffff)) {
		    byteOff++;
		    localBit -= 8;
		    dest[byteOff] = (byte) (value = v &gt;&gt;&gt; localBit);
		    if ((nextOff ^ 0xffffffff) &lt; (byteOff ^ 0xffffffff)) {
			byteOff++;
			localBit -= 8;
			dest[byteOff] = (byte) (value = v &gt;&gt;&gt; localBit);
			if (nextOff &gt; byteOff) {
			    localBit -= 8;
			    byteOff++;
			    dest[byteOff] = (byte) (value = v &gt;&gt;&gt; localBit);
			    if (byteOff &lt; nextOff) {
				localBit -= 8;
				byteOff++;
				dest[byteOff] = (byte) (value = v &lt;&lt; -localBit);
			    }
			}
		    }
		}
	    }
	    return (bitOffset + 7 &gt;&gt; 3) - destOff;
	} catch (RuntimeException runtimeexception) {
	    throw Class348_Sub17.method2929(runtimeexception,
					    ("wda.C(" + len + ',' + srcOff + ','
					     + destOff + ','
					     + (src != null ? "{...}" : "null")
					     + ',' 
					     + (dest != null ? "{...}"
						: "null")
					     + ')'));
	}
    }</code></pre>
      </div>

      <meta itemprop='headline' content='Algorithm Idenficiation'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/slavemaster.html'><span itemprop='name'>slavemaster</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-06-14T18:10:54Z'>
            <time itemprop='dateModified' datetime='2016-08-03T03:13:11Z' class='post-time'>
              August 3, 2016,  3:13am
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>It’s encoding using the Huffman table built in the class’ constructor. values is really the dictionary of  “code words” (bit strings) themselves, while bitOffsets gives you the length of each code word (which is meant to be positively correlated with frequency). If you had code that hadn’t already been refactored with your guessed names, I’d have been able to show you how simple the code was.</p>
<p>P.S. All those if-branches are for handling the case of longer codes, up to 40-bits in length.</p>
<p>[code]class HuffmanCodec {</p>
<p>…</p>
<p>final int encode(byte[] in, int in_off, int len, byte[] out, int out_off) {<br>
len += in_off;</p>
<pre><code>int cur = 0;

int out_bit_ptr = out_off &lt;&lt; 3;
int in_ptr = in_off;
while (in_ptr &lt; len) {
  int val = in[in_ptr++] &amp; 0xff;

  int code = codes[val];
  int code_len = code_lens[val];
  if (code_len == 0) { /* you can't encode a value with 0 bits */
    throw new RuntimeException("No codeword for data value " + val);
  }

  int out_ptr = out_bit_ptr &gt;&gt; 3;
  int out_bit_off = out_bit_ptr &amp; 7;
  cur &amp;= -out_bit_off &gt;&gt; 31;

  int end_ptr = (out_bit_off + code_len - 1 &gt;&gt; 3) + out_ptr;
  out_bit_ptr += code_len;
  out_bit_off += 24;

  out[out_ptr] = (byte) (cur |= (code &gt;&gt;&gt; out_bit_off));
  while (out_ptr &lt; end_ptr &amp;&amp; out_bit_off &gt;= -8) {
    out[out_ptr++] = (byte) (cur = (out_bit_off -= 8) &gt; 0 ? (code &gt;&gt;&gt; out_bit_off) : (code &lt;&lt; -out_bit_off));
  }
}

return (out_bit_ptr + 7 &gt;&gt;&gt; 3) - out_off;
</code></pre>
<p>}<br>
}[/code]</p>
      </div>

      <meta itemprop='headline' content='Algorithm Idenficiation'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/sinisoul.html'><span itemprop='name'>sinisoul</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-06-14T19:07:20Z'>
            <time itemprop='dateModified' datetime='2016-08-03T03:13:18Z' class='post-time'>
              August 3, 2016,  3:13am
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“veer, post:2, topic:445093”]It’s encoding using the Huffman table built in the classes constructor. values is really the dictionary of  “code words” (bit strings) themselves, while bitOffsets gives you the length of each code word (which is meant to be positively correlated with frequency). If you had code that hadn’t already been refactored with your guessed names, I’d have been able to show you how simple the code was.</p>
<p>P.S. All those if-branches are for handling the case of longer codes, up to 40-bits in length.</p>
<p>[code]class HuffmanCodec {</p>
<p>…</p>
<p>final int encode(byte[] in, int in_off, int len, byte[] out, int out_off) {<br>
len += in_off;</p>
<pre><code>int cur = 0;

int out_bit_ptr = out_off &lt;&lt; 3;
int in_ptr = in_off;
while (in_ptr &lt; len) {
  int val = in[in_ptr++] &amp; 0xff;

  int code = codes[val];
  int code_len = code_lens[val];
  if (code_len == 0) { /* you can't encode a value with 0 bits */
    throw new RuntimeException("No codeword for data value " + val);
  }

  int out_ptr = out_bit_ptr &gt;&gt; 3;
  int out_bit_off = out_bit_ptr &amp; 7;
  cur &amp;= -out_bit_off &gt;&gt; 31;

  int end_ptr = (out_bit_off + code_len - 1 &gt;&gt; 3) + out_ptr;
  out_bit_ptr += code_len;
  out_bit_off += 24;

  out[out_ptr] = (byte) (cur |= (code &gt;&gt;&gt; out_bit_off));
  while (out_ptr &lt; end_ptr &amp;&amp; out_bit_off &gt;= -8) {
    out[out_ptr++] = (byte) (cur = (out_bit_off -= 8) &gt; 0 ? (code &gt;&gt;&gt; out_bit_off) : (code &lt;&lt; -out_bit_off));
  }
}

return (out_bit_ptr + 7 &gt;&gt;&gt; 3) - out_off;
</code></pre>
<p>}<br>
}[/code][/quote]</p>
<p>I rewrote most of it because it really wasn’t that complex, I was just curious as to what the codeword meant. Thanks!</p>
      </div>

      <meta itemprop='headline' content='Algorithm Idenficiation'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/algorithm-idenficiation/445093 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Aug 2019 02:35:17 GMT -->
</html>
