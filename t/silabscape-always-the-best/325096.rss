<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Silabscape - Always the best!</title>
    <link>https://forum.moparisthebest.com/t/silabscape-always-the-best/325096</link>
    <description>here is attempt 2: 

I took the idea of Interactions and made it more generic so it can include Player To Player Interactions, Mob to Mob interactions, and Player to GameObject Interactions (requiring GameObjects to become an entity).

[code]
public abstract class EntityInteractionEvent {
    public enum InteractionType {
        ATTACK(0),
        PICKPOCKET(3),
        TRADE(4),
        BANK(3),
        TELEPORT(3),
        FISH(1),
        LURE(1),
        BAIT(3),
        CAGE(1),
        HARPOON(3),
        NET(1),
        PICK_UP(1),
        PICK(1),
        PAY(3),
        STEAL_FROM(3),
        TACKLE(1),
        PASS_TO(1),
        STROKE(3),
        INTERACT_WITH(4),
        SEARCH(1),
        WATCH(3),
        BUY_PASS(4),
        PUSH(1),
        BUY(4),
        HEAL(3),
        TAKE(1),
        TALK(1),
        PLUCK(4),
        TRADE_GENERAL_STORE(3),
        TRADE_BUILDERS_STORE(4),
        TALK_TO(1),
        TRADE_WITH(4),
        TAP(1),
        KICK(3),
        SHOOT(4),
        SHOW_GOAL(5),
        GIVE_STICK(1),
        CHOP_DOWN(1),
        SWORD_GIVE(3),
        PET(3),
        KNOCK_OUT(5),
        GRAB_FEATHER(3),
        SMASH_ICE(2),
        PROD(1),
        LISTEN_TO(1),
        TRAVEL(3),
        DESTROY(2),
        TRADE_CO_OP(3),
        TRADE_DRINKS(4),
        WALK_HERE(3),
        FOLLOW(4),
        PULL(3),
        BIG_PUSH(4),
        PLACE(5);

        private int index;

        private InteractionType(int index) {
            this.index = index;
        }
        public int getInteractionIndex(){
            return index;
        }

    }

    public abstract boolean meetsRequirements(Entity antagonist,Entity target);

    public abstract void execute(Entity antagonist,Entity target);

    public abstract InteractionType getInteractionType();
}
[/code]

Next I made 3 Events these all relating to Player to Mob Interactions:

[code]
public class GenericAttackEvent extends EntityInteractionEvent {


    public boolean meetsRequirements(Entity antagonist, Entity target) {
        return true;
    }

    public void execute(Entity antagonist, Entity target) {
       ((Player)antagonist).getActionSender().sendMessage(&quot;I would start an attack event if i didnt suck&quot;);
    }

    public InteractionType getInteractionType() {
       return InteractionType.ATTACK;
    }
}
[/code]
[code]
public class GenericTalkEvent extends EntityInteractionEvent {
    public boolean meetsRequirements(Entity antagonist, Entity target) {
        return true;
    }

    public void execute(Entity antagonist, Entity target) {
         ((Mob)target).setMessage(&quot;get out of here!&quot;);
    }

    public InteractionType getInteractionType() {
        return InteractionType.TALK;
    }
}

[/code]
[code]
public class OnlySilbaTalk extends EntityInteractionEvent {

    public boolean meetsRequirements(Entity antagonist, Entity target) {
       return ((Player)antagonist).getName().equalsIgnoreCase(&quot;silba&quot;);
    }

    public void execute(Entity antagonist, Entity target) {
        ((Mob)target).setMessage(&quot;How big is your client.java?&quot;);
    }

    public InteractionType getInteractionType() {
        return InteractionType.TALK_TO;
    }
}
[/code]

Next I modified the MobInteractionPacketHandler to execute an event if requirements are met:

[code]
public class MobInteractionPacketHandler implements PacketHandler {

    private final int ATTACK_MOB = 72;
    private final int INTERACTION_OPTION_1 = 155;

    public void handle(Player player, Packet packet) {
        int interactionId = -1;
        int index = -1;
        if (packet.getOpcode() == ATTACK_MOB) {
            index = packet.getShortA();
            interactionId = 0;
        }
        if (packet.getOpcode() == INTERACTION_OPTION_1) {
            index = packet.getLEShort();
            interactionId = 1;
        }
        

        if (interactionId == -1)
            return;

        Mob mob = player.getLocalNPCs().get(index - 1);
        if (mob == null)
            return;

        for (EntityInteractionEvent e : mob.getInteractions()) {
            if (e.getInteractionType().getInteractionIndex() == interactionId) {
                if (e.meetsRequirements(player, mob)) {
                    e.execute(player, mob);
                    break;
                }
            }
        }
    }
}
[/code]

(I am nto really happy with having to cycle through the list like this. but at this time since mobs usually only have a few interactions it should be acceptable.)


In the example I have all spawned mobs with all 3 Events attached to them. (Generics always going last in the list)


Results:
[img]http://silabsoft.org/images/event/mobs2/0.PNG[/img]
[img]http://silabsoft.org/images/event/mobs2/1.PNG[/img]
[img]http://silabsoft.org/images/event/mobs2/2.PNG[/img]
[img]http://silabsoft.org/images/event/mobs2/3.PNG[/img]</description>
    
    <lastBuildDate>Thu, 04 Feb 2010 10:37:29 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Silabscape - Always the best!</title>
        <dc:creator><![CDATA[@system system]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/system">@system</a> wrote:</p>
          <blockquote>
              <p><img src="http://silabsoft.org/images/event/mobs2/3.PNG" alt width="" height=""></p>
<p>Lol’d</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/25">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/25</link>
        <pubDate>Thu, 04 Feb 2010 10:37:29 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-325096-25</guid>
        <source url="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096.rss">Silabscape - Always the best!</source>
      </item>
      <item>
        <title>Silabscape - Always the best!</title>
        <dc:creator><![CDATA[@cartman2 cartman2]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/cartman2">@cartman2</a> wrote:</p>
          <blockquote>
              <p>cool rep++<br>
if i could:p<br>
some1 rep miss silabsoft for me plz:p</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/24">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/24</link>
        <pubDate>Wed, 03 Feb 2010 18:29:11 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-325096-24</guid>
        <source url="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096.rss">Silabscape - Always the best!</source>
      </item>
      <item>
        <title>Silabscape - Always the best!</title>
        <dc:creator><![CDATA[@Jython super_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/jython">@Jython</a> wrote:</p>
          <blockquote>
              <p>use a priorityqueue if you want… a prioritized queue</p>
<p>regardless i had a system similar to this.</p>
<p>[code]interface EntityBehavior {</p>
<pre><code>public void respond(Entity target, Stimulus stimulus, Environment environment);
</code></pre>
<p>}[/code]</p>
<p>i kinda modeled it after how ‘life’ is defined, i.e. responding to stimuli</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/23">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/23</link>
        <pubDate>Tue, 02 Feb 2010 00:42:43 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-325096-23</guid>
        <source url="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096.rss">Silabscape - Always the best!</source>
      </item>
      <item>
        <title>Silabscape - Always the best!</title>
        <dc:creator><![CDATA[@silabsoft RuneAgent]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/silabsoft">@silabsoft</a> wrote:</p>
          <blockquote>
              <p>the behaviors are attached to the spawned npc. so all you would have to do is when loading your spawned npc add different events to the chain.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/22">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/22</link>
        <pubDate>Thu, 28 Jan 2010 18:08:09 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-325096-22</guid>
        <source url="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096.rss">Silabscape - Always the best!</source>
      </item>
      <item>
        <title>Silabscape - Always the best!</title>
        <dc:creator><![CDATA[@surfer25 surfer25]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/surfer25">@surfer25</a> wrote:</p>
          <blockquote>
              <p>What if you wanted the same npc to behave differently in the same region? How would you go about implementing that with your current method?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/21">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/21</link>
        <pubDate>Thu, 28 Jan 2010 12:12:20 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-325096-21</guid>
        <source url="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096.rss">Silabscape - Always the best!</source>
      </item>
      <item>
        <title>Silabscape - Always the best!</title>
        <dc:creator><![CDATA[@Anfernio Anfernio]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/anfernio">@Anfernio</a> wrote:</p>
          <blockquote>
              <p>itt: silabsoft changing her thread title to Silabscape with a slogan.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/20">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/20</link>
        <pubDate>Fri, 15 Jan 2010 23:11:37 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-325096-20</guid>
        <source url="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096.rss">Silabscape - Always the best!</source>
      </item>
      <item>
        <title>Silabscape - Always the best!</title>
        <dc:creator><![CDATA[@silabsoft RuneAgent]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/silabsoft">@silabsoft</a> wrote:</p>
          <blockquote>
              <aside class="quote no-group quote-modified" data-post="17" data-topic="325096">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/lin/40/5_513041d5f7104045db30895d3b90af16.png" class="avatar"> Lin:</div>
<blockquote>
<p>How is this coming? I’m interesting to see where it goes.</p>
</blockquote>
</aside>
<p>I’m now rewriting it as this method is ineffective for what I really want to do.</p>
<p>Fixed: If index = 2 calls Attack Packet (just changed to index 0 for packet processesing):<br>
SMASH_ICE(0)<br>
DESTROY(0)</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/19">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/19</link>
        <pubDate>Fri, 15 Jan 2010 03:38:28 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-325096-19</guid>
        <source url="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096.rss">Silabscape - Always the best!</source>
      </item>
      <item>
        <title>Silabscape - Always the best!</title>
        <dc:creator><![CDATA[@JlStepper JlStepper]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/jlstepper">@JlStepper</a> wrote:</p>
          <blockquote>
              <p>Looks Good, The Gameframe And Base Is Kinda Old But It’s Cool. Good Luck On This : )<br>
I’m Working On One Myself, Feel Free To Check It Out People : )</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/18">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/18</link>
        <pubDate>Fri, 15 Jan 2010 01:34:57 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-325096-18</guid>
        <source url="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096.rss">Silabscape - Always the best!</source>
      </item>
      <item>
        <title>Silabscape - Always the best!</title>
        <dc:creator><![CDATA[@Lin Lin]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/lin">@Lin</a> wrote:</p>
          <blockquote>
              <p>How is this coming? I’m interesting to see where it goes.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/17">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/17</link>
        <pubDate>Fri, 15 Jan 2010 00:11:03 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-325096-17</guid>
        <source url="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096.rss">Silabscape - Always the best!</source>
      </item>
      <item>
        <title>Silabscape - Always the best!</title>
        <dc:creator><![CDATA[@silabsoft RuneAgent]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/silabsoft">@silabsoft</a> wrote:</p>
          <blockquote>
              <p>up to 5 different actions as i recall. but they can be completely different.[br][br][size=1]Posted on: January 13, 2010, 10:06:29 pm[/size][hr][quote=“PeeHPee, post:15, topic:325096”][quote author=Miss Silabsoft link=topic=421442.msg3096782#msg3096782 date=1263390798]</p>
<aside class="quote no-group">
<blockquote>
<p>why not create an Event object instead of having several methods for different events?</p>
</blockquote>
</aside>
<p>If you are suggesting having one event object then queuing them for processing. no that sounds terrible.<br>
[/quote]<br>
rofl no, i mean an event system like sun’s Swing event system.</p>
<pre><code class="lang-auto">interface MobInteractionListener {
    void interaction(InteractionEvent evt);
}</code></pre>
<p>edit: this is taking into account the fact that i do not know how many different actions can be performed on a mob in runescape.[/quote]</p>
<p>It turns out this may have to be the way this is done as some “actions” share packets… for example</p>
<p>“Pickpocketing” has the actionId of 225<br>
“Trade-Co-op” also has the actionId of 225</p>
<p>actionId 225 share the same packet of:</p>
<pre><code class="lang-auto">                stream.createFrame(17);
                stream.method433(i1);</code></pre>
<p>So I suppose if I do it the way you suggest and have each Spawned npcs hold a few Separate action triggers. It will solve my problem.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/16">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/16</link>
        <pubDate>Wed, 13 Jan 2010 20:32:25 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-325096-16</guid>
        <source url="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096.rss">Silabscape - Always the best!</source>
      </item>
      <item>
        <title>Silabscape - Always the best!</title>
        <dc:creator><![CDATA[@PeeHPee PeeHPee]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/peehpee">@PeeHPee</a> wrote:</p>
          <blockquote>
              <p>[quote=“Miss Silabsoft, post:14, topic:325096”][quote author=PeeHPee link=topic=421442.msg3096777#msg3096777 date=1263390039]<br>
why not create an Event object instead of having several methods for different events?<br>
[/quote]<br>
If you are suggesting having one event object then queuing them for processing. no that sounds terrible.[/quote]<br>
rofl no, i mean an event system like sun’s Swing event system.</p>
<pre><code class="lang-auto">interface MobInteractionListener {
    void interaction(InteractionEvent evt);
}</code></pre>
<p>edit: this is taking into account the fact that i do not know how many different actions can be performed on a mob in runescape.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/15">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/15</link>
        <pubDate>Wed, 13 Jan 2010 18:57:46 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-325096-15</guid>
        <source url="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096.rss">Silabscape - Always the best!</source>
      </item>
      <item>
        <title>Silabscape - Always the best!</title>
        <dc:creator><![CDATA[@silabsoft RuneAgent]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/silabsoft">@silabsoft</a> wrote:</p>
          <blockquote>
              <aside class="quote no-group" data-post="13" data-topic="325096">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/peehpee/40/5_513041d5f7104045db30895d3b90af16.png" class="avatar"> PeeHPee:</div>
<blockquote>
<p>why not create an Event object instead of having several methods for different events?</p>
</blockquote>
</aside>
<p>If you are suggesting having one event object then queuing them for processing. no that sounds terrible.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/14">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/14</link>
        <pubDate>Wed, 13 Jan 2010 13:53:18 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-325096-14</guid>
        <source url="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096.rss">Silabscape - Always the best!</source>
      </item>
      <item>
        <title>Silabscape - Always the best!</title>
        <dc:creator><![CDATA[@PeeHPee PeeHPee]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/peehpee">@PeeHPee</a> wrote:</p>
          <blockquote>
              <p>why not create an Event object instead of having several methods for different events?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/13">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/13</link>
        <pubDate>Wed, 13 Jan 2010 13:40:39 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-325096-13</guid>
        <source url="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096.rss">Silabscape - Always the best!</source>
      </item>
      <item>
        <title>Silabscape - Always the best!</title>
        <dc:creator><![CDATA[@Lin Lin]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/lin">@Lin</a> wrote:</p>
          <blockquote>
              <p>Aah, that’s a better idea than I was giving you. How do you plan on loading the NPC types though? That one suggestion about using the bitwise operators so you could have a single value for a flexible npc in a binary file probably would work well, and then just make it so it sets an NPC flag. Then when you go to perform an action, just check the flag and do what you want to it. This would probably save a lot of space. For example, you could have it so the value 1 signified it was attackable, and 2 meant you could talk to it, such as a man. In the binary file, you’d place 0x3. Then back in the loading process, you’d do something like this.</p>
<p><code>if (value &amp; 0x1 != 0) //Attackable
    npc.attackable = true;
if (value &amp; 0x2 != 0) { //Has a dialogue
    npc.hasDialogue = true;
    //Implement some other loading here, like maybe the index of a dialogue script or action it gets.
}</code>And so on. Then there isn’t really a need to have an interface, so you could just have a single class and check the flags (Assuming they’re all in the Entity class) and perform actions. Or, instead of setting flags, you could store the value to save memory and then perform the math, but then there’s the bad side of doing unnecessary operations.</p>
<p>Sorry if I didn’t make sense in this post. I’m very tired and about to go to bed.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/12">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/12</link>
        <pubDate>Wed, 13 Jan 2010 06:14:51 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-325096-12</guid>
        <source url="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096.rss">Silabscape - Always the best!</source>
      </item>
      <item>
        <title>Silabscape - Always the best!</title>
        <dc:creator><![CDATA[@Anfernio Anfernio]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/anfernio">@Anfernio</a> wrote:</p>
          <blockquote>
              <p>can i leech plz</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/11">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/11</link>
        <pubDate>Wed, 13 Jan 2010 05:58:08 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-325096-11</guid>
        <source url="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096.rss">Silabscape - Always the best!</source>
      </item>
      <item>
        <title>Silabscape - Always the best!</title>
        <dc:creator><![CDATA[@relmitos relmitos]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/relmitos">@relmitos</a> wrote:</p>
          <blockquote>
              <aside class="quote no-group" data-post="5" data-topic="325096">
<div class="title">
<div class="quote-controls"></div>
 Miss Silabsoft:</div>
<blockquote>
<p>mobile object</p>
</blockquote>
</aside>
<p>Monster or Beast in MMO terms.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/10</link>
        <pubDate>Wed, 13 Jan 2010 04:45:00 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-325096-10</guid>
        <source url="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096.rss">Silabscape - Always the best!</source>
      </item>
      <item>
        <title>Silabscape - Always the best!</title>
        <dc:creator><![CDATA[@surfer25 surfer25]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/surfer25">@surfer25</a> wrote:</p>
          <blockquote>
              <p>[quote=“Palidino_, post:7, topic:325096”][quote author=kickingjamie link=topic=421442.msg3095370#msg3095370 date=1263248826]<br>
so one npc could be talking and the exact same npc could be somewere else talking but saying somthing different? or be a shop? is that what this would do? and good work if it is…<br>
[/quote]<br>
Yeah, it allows for individual actions rather then by NPC kind.</p>
<p>I am curious though as to how she has/plans to implement this since I imagine NPC spawns are loaded from a file, and it wouldn’t be safe to base it off the position in the file since adding a new NPC to the top of the file would “break” it so to speak.[/quote]</p>
<p>Your assumming they are loaded from a File, you can just implement them straight in the code</p>
<pre><code class="lang-auto">new NPC(xxxx, yyyy, z);</code></pre>
<p>Although that would be quite a bitch to do if you have say 1000 npcs.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/9</link>
        <pubDate>Tue, 12 Jan 2010 06:55:43 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-325096-9</guid>
        <source url="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096.rss">Silabscape - Always the best!</source>
      </item>
      <item>
        <title>Silabscape - Always the best!</title>
        <dc:creator><![CDATA[@Mowiez Mowiez]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/mowiez">@Mowiez</a> wrote:</p>
          <blockquote>
              <p>Wow, This is crazy. Nice job!</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/8</link>
        <pubDate>Tue, 12 Jan 2010 00:58:03 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-325096-8</guid>
        <source url="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096.rss">Silabscape - Always the best!</source>
      </item>
      <item>
        <title>Silabscape - Always the best!</title>
        <dc:creator><![CDATA[@Palidino1 Palidino_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/palidino1">@Palidino1</a> wrote:</p>
          <blockquote>
              <aside class="quote no-group quote-modified" data-post="6" data-topic="325096">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/kickingjamie/40/5_513041d5f7104045db30895d3b90af16.png" class="avatar"> kickingjamie:</div>
<blockquote>
<p>so one npc could be talking and the exact same npc could be somewere else talking but saying somthing different? or be a shop? is that what this would do? and good work if it is…</p>
</blockquote>
</aside>
<p>Yeah, it allows for individual actions rather then by NPC kind.</p>
<p>I am curious though as to how she has/plans to implement this since I imagine NPC spawns are loaded from a file, and it wouldn’t be safe to base it off the position in the file since adding a new NPC to the top of the file would “break” it so to speak.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/7</link>
        <pubDate>Tue, 12 Jan 2010 00:16:17 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-325096-7</guid>
        <source url="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096.rss">Silabscape - Always the best!</source>
      </item>
      <item>
        <title>Silabscape - Always the best!</title>
        <dc:creator><![CDATA[@kickingjamie kickingjamie]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/kickingjamie">@kickingjamie</a> wrote:</p>
          <blockquote>
              <p>so one npc could be talking and the exact same npc could be somewere else talking but saying somthing different? or be a shop? is that what this would do? and good work if it is…</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/6</link>
        <pubDate>Mon, 11 Jan 2010 22:27:06 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-325096-6</guid>
        <source url="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096.rss">Silabscape - Always the best!</source>
      </item>
      <item>
        <title>Silabscape - Always the best!</title>
        <dc:creator><![CDATA[@silabsoft RuneAgent]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/silabsoft">@silabsoft</a> wrote:</p>
          <blockquote>
              <p>mobile object</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/5</link>
        <pubDate>Mon, 11 Jan 2010 20:50:01 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-325096-5</guid>
        <source url="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096.rss">Silabscape - Always the best!</source>
      </item>
      <item>
        <title>Silabscape - Always the best!</title>
        <dc:creator><![CDATA[@Palidino1 Palidino_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/palidino1">@Palidino1</a> wrote:</p>
          <blockquote>
              <p>What does Mob stand for?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/4</link>
        <pubDate>Mon, 11 Jan 2010 20:40:21 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-325096-4</guid>
        <source url="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096.rss">Silabscape - Always the best!</source>
      </item>
      <item>
        <title>Silabscape - Always the best!</title>
        <dc:creator><![CDATA[@glestrts glestrts]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/glestrts">@glestrts</a> wrote:</p>
          <blockquote>
              <p>gj on this, topics like this wont improve most sources with obsolete if then statements over night, but in the long run this could help make people switch from wL to hyperion and make more stable, efficient servers.</p>
<p>Or, they could add a bunch of shat into it and make it as bad as wL with crummy statements, and huge processes.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/3</link>
        <pubDate>Mon, 11 Jan 2010 16:02:43 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-325096-3</guid>
        <source url="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096.rss">Silabscape - Always the best!</source>
      </item>
      <item>
        <title>Silabscape - Always the best!</title>
        <dc:creator><![CDATA[@dualcourse dualcourse]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/dualcourse">@dualcourse</a> wrote:</p>
          <blockquote>
              <p>emmm , its abit random  <img src="https://forum.moparisthebest.com/images/emoji/twitter/cool.png?v=5" title=":cool:" class="emoji" alt=":cool:"> but yeh its cool nice miss silabsoft</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/2</link>
        <pubDate>Mon, 11 Jan 2010 15:06:02 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-325096-2</guid>
        <source url="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096.rss">Silabscape - Always the best!</source>
      </item>
      <item>
        <title>Silabscape - Always the best!</title>
        <dc:creator><![CDATA[@silabsoft RuneAgent]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/silabsoft">@silabsoft</a> wrote:</p>
          <blockquote>
              <p>here is attempt 2:</p>
<p>I took the idea of Interactions and made it more generic so it can include Player To Player Interactions, Mob to Mob interactions, and Player to GameObject Interactions (requiring GameObjects to become an entity).</p>
<pre><code class="lang-auto">public abstract class EntityInteractionEvent {
    public enum InteractionType {
        ATTACK(0),
        PICKPOCKET(3),
        TRADE(4),
        BANK(3),
        TELEPORT(3),
        FISH(1),
        LURE(1),
        BAIT(3),
        CAGE(1),
        HARPOON(3),
        NET(1),
        PICK_UP(1),
        PICK(1),
        PAY(3),
        STEAL_FROM(3),
        TACKLE(1),
        PASS_TO(1),
        STROKE(3),
        INTERACT_WITH(4),
        SEARCH(1),
        WATCH(3),
        BUY_PASS(4),
        PUSH(1),
        BUY(4),
        HEAL(3),
        TAKE(1),
        TALK(1),
        PLUCK(4),
        TRADE_GENERAL_STORE(3),
        TRADE_BUILDERS_STORE(4),
        TALK_TO(1),
        TRADE_WITH(4),
        TAP(1),
        KICK(3),
        SHOOT(4),
        SHOW_GOAL(5),
        GIVE_STICK(1),
        CHOP_DOWN(1),
        SWORD_GIVE(3),
        PET(3),
        KNOCK_OUT(5),
        GRAB_FEATHER(3),
        SMASH_ICE(2),
        PROD(1),
        LISTEN_TO(1),
        TRAVEL(3),
        DESTROY(2),
        TRADE_CO_OP(3),
        TRADE_DRINKS(4),
        WALK_HERE(3),
        FOLLOW(4),
        PULL(3),
        BIG_PUSH(4),
        PLACE(5);

        private int index;

        private InteractionType(int index) {
            this.index = index;
        }
        public int getInteractionIndex(){
            return index;
        }

    }

    public abstract boolean meetsRequirements(Entity antagonist,Entity target);

    public abstract void execute(Entity antagonist,Entity target);

    public abstract InteractionType getInteractionType();
}</code></pre>
<p>Next I made 3 Events these all relating to Player to Mob Interactions:</p>
<pre><code class="lang-auto">public class GenericAttackEvent extends EntityInteractionEvent {


    public boolean meetsRequirements(Entity antagonist, Entity target) {
        return true;
    }

    public void execute(Entity antagonist, Entity target) {
       ((Player)antagonist).getActionSender().sendMessage("I would start an attack event if i didnt suck");
    }

    public InteractionType getInteractionType() {
       return InteractionType.ATTACK;
    }
}</code></pre>
<pre><code class="lang-auto">public class GenericTalkEvent extends EntityInteractionEvent {
    public boolean meetsRequirements(Entity antagonist, Entity target) {
        return true;
    }

    public void execute(Entity antagonist, Entity target) {
         ((Mob)target).setMessage("get out of here!");
    }

    public InteractionType getInteractionType() {
        return InteractionType.TALK;
    }
}
</code></pre>
<pre><code class="lang-auto">public class OnlySilbaTalk extends EntityInteractionEvent {

    public boolean meetsRequirements(Entity antagonist, Entity target) {
       return ((Player)antagonist).getName().equalsIgnoreCase("silba");
    }

    public void execute(Entity antagonist, Entity target) {
        ((Mob)target).setMessage("How big is your client.java?");
    }

    public InteractionType getInteractionType() {
        return InteractionType.TALK_TO;
    }
}</code></pre>
<p>Next I modified the MobInteractionPacketHandler to execute an event if requirements are met:</p>
<pre><code class="lang-auto">public class MobInteractionPacketHandler implements PacketHandler {

    private final int ATTACK_MOB = 72;
    private final int INTERACTION_OPTION_1 = 155;

    public void handle(Player player, Packet packet) {
        int interactionId = -1;
        int index = -1;
        if (packet.getOpcode() == ATTACK_MOB) {
            index = packet.getShortA();
            interactionId = 0;
        }
        if (packet.getOpcode() == INTERACTION_OPTION_1) {
            index = packet.getLEShort();
            interactionId = 1;
        }
        

        if (interactionId == -1)
            return;

        Mob mob = player.getLocalNPCs().get(index - 1);
        if (mob == null)
            return;

        for (EntityInteractionEvent e : mob.getInteractions()) {
            if (e.getInteractionType().getInteractionIndex() == interactionId) {
                if (e.meetsRequirements(player, mob)) {
                    e.execute(player, mob);
                    break;
                }
            }
        }
    }
}</code></pre>
<p>(I am nto really happy with having to cycle through the list like this. but at this time since mobs usually only have a few interactions it should be acceptable.)</p>
<p>In the example I have all spawned mobs with all 3 Events attached to them. (Generics always going last in the list)</p>
<p>Results:<br>
<img src="http://silabsoft.org/images/event/mobs2/0.PNG" alt width="" height=""><br>
<img src="http://silabsoft.org/images/event/mobs2/1.PNG" alt width="" height=""><br>
<img src="http://silabsoft.org/images/event/mobs2/2.PNG" alt width="" height=""><br>
<img src="http://silabsoft.org/images/event/mobs2/3.PNG" alt width="" height=""></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/silabscape-always-the-best/325096/1</link>
        <pubDate>Mon, 11 Jan 2010 14:59:03 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-325096-1</guid>
        <source url="https://forum.moparisthebest.com/t/silabscape-always-the-best/325096.rss">Silabscape - Always the best!</source>
      </item>
  </channel>
</rss>
