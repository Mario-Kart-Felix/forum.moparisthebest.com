<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/c-code-efficiency-euler-3/460570?page=2 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 23:00:47 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>[C] Code Efficiency (Euler #3) - General Programming - moparisthebest.com</title>
    <meta name="description" content="This is problem #3 for Project Euler (which I have just started doing) by the way. I was just wondering if there&amp;#39;s a better algorithm to do this. 

I actually originally did this in Python, but it was so horribly slow (I&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="4605704658.html?page=2" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;[C] Code Efficiency (Euler #3)&#39;" href="460570.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/c-code-efficiency-euler-3/460570?page=2" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/c-code-efficiency-euler-3/460570?page=2" />
<meta property="og:title" content="[C] Code Efficiency (Euler #3)" />
<meta name="twitter:title" content="[C] Code Efficiency (Euler #3)" />
<meta property="og:description" content="[quote=“t4, post:19, topic:460570”][quote author=The Enforcer link=topic=563500.msg4110883#msg4110883 date=1348507466]   Uh, that’s not how the sieve works…    No. You’re starting from 2 * i which is not optimal, it’s safe to start from i². Furthermore, you perform two arithmetic operations every step to calculate comp, instead of one.  [/quote]  I saw nothing stating that starting at i^2 was allowed. The basic algorithm states you should multiply each integer from 2 to n by 2, 3, … to the squar..." />
<meta name="twitter:description" content="[quote=“t4, post:19, topic:460570”][quote author=The Enforcer link=topic=563500.msg4110883#msg4110883 date=1348507466]   Uh, that’s not how the sieve works…    No. You’re starting from 2 * i which is not optimal, it’s safe to start from i². Furthermore, you perform two arithmetic operations every step to calculate comp, instead of one.  [/quote]  I saw nothing stating that starting at i^2 was allowed. The basic algorithm states you should multiply each integer from 2 to n by 2, 3, … to the squar..." />
<meta property="article:published_time" content="2012-09-24T20:18:04+00:00" />
<meta property="og:ignore_canonical" content="true" />

      <link rel="prev" href="460570.html">


    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="460570.html">[C] Code Efficiency (Euler #3)</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/general-programming.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>General Programming</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/The_Enforcer.html'><span itemprop='name'>The_Enforcer</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-09-24T20:18:04Z'>
            <time itemprop='dateModified' datetime='2016-08-04T00:20:58Z' class='post-time'>
              August 4, 2016, 12:20am
            </time>
        <span itemprop='position'>#21</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“t4, post:19, topic:460570”][quote author=The Enforcer link=topic=563500.msg4110883#msg4110883 date=1348507466]</p>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<p>Replace this line</p>
<pre><code class="lang-auto"></code></pre>
<p>with the following superior line.</p>
<pre><code class="lang-auto"></code></pre>
</blockquote>
</aside>
<p>Uh, that’s not how the sieve works…</p>
</blockquote>
</aside>
<p>No. You’re starting from 2 * i which is not optimal, it’s safe to start from i². Furthermore, you perform two arithmetic operations every step to calculate comp, instead of one.<br>
[/quote]<br>
I saw nothing stating that starting at i^2 was allowed. The basic algorithm states you should multiply each integer from 2 to n by 2, 3, … to the square of n.[/quote]</p>
<p><aside class="onebox wikipedia">
  <header class="source">
      <a href="https://en.wikipedia.org/wiki/Sieve_of_Eratosthenes" target="_blank" rel="nofollow noopener">en.wikipedia.org</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:445/369;"><img src="http://upload.wikimedia.org/wikipedia/commons/b/b9/Sieve_of_Eratosthenes_animation.gif" class="thumbnail"></div>

<h3><a href="https://en.wikipedia.org/wiki/Sieve_of_Eratosthenes" target="_blank" rel="nofollow noopener">Sieve of Eratosthenes</a></h3>

<p>In mathematics, the sieve of Eratosthenes is a simple, ancient algorithm for finding all prime numbers up to any given limit. It does so by iteratively marking as composite (i.e., not prime) the multiples of each prime, starting with the first prime number, 2. The multiples of a given prime are generated as a sequence of numbers starting from that prime, with constant difference between them that is equal to that prime. This is the sieve's key distinction from using trial division to sequentially...</p>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
<br>
<span class="bbcode-b">As a refinement, it is sufficient to mark the numbers in step 3 starting from p², as all the smaller multiples of p will have already been marked at that point.</span></p>
      </div>

      <meta itemprop='headline' content='[C] Code Efficiency (Euler #3)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/T41.html'><span itemprop='name'>T41</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-09-24T20:37:09Z'>
            <time itemprop='dateModified' datetime='2016-08-04T00:20:58Z' class='post-time'>
              August 4, 2016, 12:20am
            </time>
        <span itemprop='position'>#22</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“The Enforcer, post:21, topic:460570”][quote author=t4 link=topic=563500.msg4110964#msg4110964 date=1348516829]</p>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<p>Replace this line</p>
<pre><code class="lang-auto"></code></pre>
<p>with the following superior line.</p>
<pre><code class="lang-auto"></code></pre>
</blockquote>
</aside>
<p>Uh, that’s not how the sieve works…</p>
</blockquote>
</aside>
<p>No. You’re starting from 2 * i which is not optimal, it’s safe to start from i². Furthermore, you perform two arithmetic operations every step to calculate comp, instead of one.</p>
</blockquote>
</aside>
<p>I saw nothing stating that starting at i^2 was allowed. The basic algorithm states you should multiply each integer from 2 to n by 2, 3, … to the square of n.<br>
[/quote]</p>
<p><aside class="onebox wikipedia">
  <header class="source">
      <a href="https://en.wikipedia.org/wiki/Sieve_of_Eratosthenes" target="_blank" rel="nofollow noopener">en.wikipedia.org</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:445/369;"><img src="http://upload.wikimedia.org/wikipedia/commons/b/b9/Sieve_of_Eratosthenes_animation.gif" class="thumbnail"></div>

<h3><a href="https://en.wikipedia.org/wiki/Sieve_of_Eratosthenes" target="_blank" rel="nofollow noopener">Sieve of Eratosthenes</a></h3>

<p>In mathematics, the sieve of Eratosthenes is a simple, ancient algorithm for finding all prime numbers up to any given limit. It does so by iteratively marking as composite (i.e., not prime) the multiples of each prime, starting with the first prime number, 2. The multiples of a given prime are generated as a sequence of numbers starting from that prime, with constant difference between them that is equal to that prime. This is the sieve's key distinction from using trial division to sequentially...</p>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
<br>
<span class="bbcode-b">As a refinement, it is sufficient to mark the numbers in step 3 starting from p², as all the smaller multiples of p will have already been marked at that point.</span>[/quote]<br>
fair enough <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
      </div>

      <meta itemprop='headline' content='[C] Code Efficiency (Euler #3)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/The_Enforcer.html'><span itemprop='name'>The_Enforcer</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-09-25T18:44:31Z'>
            <time itemprop='dateModified' datetime='2016-08-04T00:21:55Z' class='post-time'>
              August 4, 2016, 12:21am
            </time>
        <span itemprop='position'>#23</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Here is my superior prime sieve, written in the superior C++ language.</p>
<pre><code class="lang-auto">#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;cstdlib&gt;
#include &lt;ctime&gt;

std::vector&lt;unsigned int&gt; primeSieve(const unsigned int n)
{
	std::vector&lt;unsigned int&gt; primes;
	std::vector&lt;bool&gt; sieve(n, true);

	for (unsigned int i = 2; i &lt; n; ++i)
	{
		if (sieve[i])
		{
			for (std::size_t j = i * i; j &lt; n; j += i)
			{
				sieve[j] = false;
			}

			primes.push_back(i);
		}
	}

	return primes;
}

int main()
{
	std::cout &lt;&lt; "The superior C++ Eratothenes sieve - created by The Enforcer (REAL SUPERIOR GUY)." &lt;&lt; std::endl;

	const std::clock_t startClocks = std::clock();
	const std::vector&lt;unsigned int&gt; primes = primeSieve(200000000);
	const std::clock_t clocksTaken = std::clock() - startClocks;
	std::cout &lt;&lt; "Size: " &lt;&lt; primes.size() &lt;&lt; "." &lt;&lt; std::endl;
	std::cout &lt;&lt; "Clocks taken: " &lt;&lt; clocksTaken &lt;&lt; "." &lt;&lt; std::endl;

	std::cin.sync();
	std::cin.get();
	return EXIT_SUCCESS;
}</code></pre>
<p>As you can see my code is extremely superior since I myself am extremely superior. Furthermore, for the sieve I’m using the superior std::vector specialization which is actually a dynamic bitset. It not only consumes eight times less memory, but it also outperforms a raw byte/bool array by a factor of 1.5. Hold on, this is not all. My sieve also returns a vector of primes instead of returning a sieve. Returning the sieve itself would be nonsense, customers want primes - not a sieve of primes (unless the goal is to look up integers for primality). Let’s be honest, SUPERIOR.</p>
      </div>

      <meta itemprop='headline' content='[C] Code Efficiency (Euler #3)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>

  <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
      <span itemprop='name'><a rel="prev" itemprop="url" href="460570.html">← previous page</a></span>
  </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/c-code-efficiency-euler-3/460570?page=2 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 23:00:48 GMT -->
</html>
