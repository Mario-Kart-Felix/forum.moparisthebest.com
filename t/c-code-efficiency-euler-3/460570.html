<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/c-code-efficiency-euler-3/460570 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 22:54:36 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>[C] Code Efficiency (Euler #3) - General Programming - moparisthebest.com</title>
    <meta name="description" content="This is problem #3 for Project Euler (which I have just started doing) by the way. I was just wondering if there&amp;#39;s a better algorithm to do this. 

I actually originally did this in Python, but it was so horribly slow (I&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="460570.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;[C] Code Efficiency (Euler #3)&#39;" href="460570.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/c-code-efficiency-euler-3/460570" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/c-code-efficiency-euler-3/460570" />
<meta property="og:title" content="[C] Code Efficiency (Euler #3)" />
<meta name="twitter:title" content="[C] Code Efficiency (Euler #3)" />
<meta property="og:description" content="This is problem #3 for Project Euler (which I have just started doing) by the way. I was just wondering if there’s a better algorithm to do this.  I actually originally did this in Python, but it was so horribly slow (I’m not sure why exactly my code sucked ass (number too large for a list was one of them), but the program never actually completed).  /*  projecteuler.net - problem three  @author whackatre  */  #include &lt;stdlib.h&gt; #include &lt;stdio.h&gt;  int main(int argc, char* argv[]) { 	long long ..." />
<meta name="twitter:description" content="This is problem #3 for Project Euler (which I have just started doing) by the way. I was just wondering if there’s a better algorithm to do this.  I actually originally did this in Python, but it was so horribly slow (I’m not sure why exactly my code sucked ass (number too large for a list was one of them), but the program never actually completed).  /*  projecteuler.net - problem three  @author whackatre  */  #include &lt;stdlib.h&gt; #include &lt;stdio.h&gt;  int main(int argc, char* argv[]) { 	long long ..." />
<meta property="article:published_time" content="2012-09-19T07:14:05+00:00" />
<meta property="og:ignore_canonical" content="true" />

      <link rel="next" href="4605704658.html?page=2">


    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="460570.html">[C] Code Efficiency (Euler #3)</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/general-programming.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>General Programming</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/whackatre.html'><span itemprop='name'>whackatre</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-09-19T07:14:05Z'>
            <time itemprop='dateModified' datetime='2016-08-04T00:12:46Z' class='post-time'>
              August 4, 2016, 12:12am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>This is problem <span class="hashtag">#3</span> for Project Euler (which I have just started doing) by the way. I was just wondering if there’s a better algorithm to do this.</p>
<p>I actually originally did this in Python, but it was so horribly slow (I’m not sure why exactly my code sucked ass (number too large for a list was one of them), but the program never actually completed).</p>
<pre><code class="lang-auto">/*
 projecteuler.net - problem three
 @author whackatre
 */

#include &lt;stdlib.h&gt;
#include &lt;stdio.h&gt;

int main(int argc, char* argv[])
{
	long long i, j;
	long long num = 600851475143; // 13195;
	long long lpf = 0;
	for (i = 2; i &lt; num / 2; i++)
	{
		if (num % i == 0)
		{
			int j_prime = 1;
			printf("%lld\n", i);
			for (j = 2; j &lt; i / 2; j++)
			{
				if (i % j == 0)
				{
					j_prime = 0;
					break;
				}
			}
			if (j_prime)
			{
				lpf = i;
			}
			else
			{
				break;
			}
		}
	}
	printf("Largest Prime Factor: %lld\n", lpf);
	return 0;
}</code></pre>
<p>The process time was less than one second.</p>
<p>Original Question:</p>
<blockquote>The prime factors of 13195 are 5, 7, 13 and 29.
<p>What is the largest prime factor of the number 600851475143 ?</p>
</blockquote>
<p>Any ideas?</p>
      </div>

      <meta itemprop='headline' content='[C] Code Efficiency (Euler #3)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/T41.html'><span itemprop='name'>T41</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-09-19T13:13:54Z'>
            <time itemprop='dateModified' datetime='2016-08-04T00:12:54Z' class='post-time'>
              August 4, 2016, 12:12am
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Here are a few algorithms for generating primes:<br>
<a href="http://en.wikibooks.org/wiki/Efficient_Prime_Number_Generating_Algorithms" class="onebox" target="_blank" rel="nofollow noopener">http://en.wikibooks.org/wiki/Efficient_Prime_Number_Generating_Algorithms</a></p>
<p>Protip:<br>
Don’t use raw primitive type names (short, int, long, long long, etc) as they may be of difference size on different systems. The most portable thing to do (and proper) is to use stdint.h (<a href="http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/stdint.h.html" rel="nofollow noopener">http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/stdint.h.html</a>)</p>
      </div>

      <meta itemprop='headline' content='[C] Code Efficiency (Euler #3)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/mod_taharok.html'><span itemprop='name'>mod_taharok</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-09-19T14:33:29Z'>
            <time itemprop='dateModified' datetime='2016-08-04T00:12:56Z' class='post-time'>
              August 4, 2016, 12:12am
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Also, a more straightforward way to iteratively build a table of primes is to list all primes before the sqrt(n) for any integer n, and then check whether any prime in that table divides n. You can do that in a single loop. As far as the expensive sqrt goes, there are very fast integer-based sqrts you can find on the internet. Next is finding all primes &lt;= sqrt(n). It’s easy to weed out about half while checking for modulo of 2 for even numbers, but it may take a bit of creativity for finding the rest quickly. sqrt(600851475143) is definitely not a small number, lol. <img src="../../images/emoji/twitter/stuck_out_tongueae52.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
      </div>

      <meta itemprop='headline' content='[C] Code Efficiency (Euler #3)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/_bool.html'><span itemprop='name'>_bool</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-09-19T20:36:16Z'>
            <time itemprop='dateModified' datetime='2016-08-04T00:13:18Z' class='post-time'>
              August 4, 2016, 12:13am
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“t4, post:2, topic:460570”]Here are a few algorithms for generating primes:<br>
<a href="http://en.wikibooks.org/wiki/Efficient_Prime_Number_Generating_Algorithms" class="onebox" target="_blank" rel="nofollow noopener">http://en.wikibooks.org/wiki/Efficient_Prime_Number_Generating_Algorithms</a></p>
<p>Protip:<br>
Don’t use raw primitive type names (short, int, long, long long, etc) as they may be of difference size on different systems. The most portable thing to do (and proper) is to use stdint.h (<a href="http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/stdint.h.html" rel="nofollow noopener">http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/stdint.h.html</a>)[/quote]<br>
the size of the data type is irrelevant (in this case), the standard clearly defines the range a data type must accommodate.</p>
<p>edit: it should be noted that the standard defines range in terms of the minimum range.</p>
      </div>

      <meta itemprop='headline' content='[C] Code Efficiency (Euler #3)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/The_Enforcer.html'><span itemprop='name'>The_Enforcer</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-09-19T21:30:58Z'>
            <time itemprop='dateModified' datetime='2016-08-04T00:13:22Z' class='post-time'>
              August 4, 2016, 12:13am
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Whackatre, post:1, topic:460570”]This is problem <span class="hashtag">#3</span> for Project Euler (which I have just started doing) by the way. I was just wondering if there’s a better algorithm to do this.</p>
<p>I actually originally did this in Python, but it was so horribly slow (I’m not sure why exactly my code sucked ass (number too large for a list was one of them), but the program never actually completed).</p>
<pre><code class="lang-auto">/*
 projecteuler.net - problem three
 @author whackatre
 */

#include &lt;stdlib.h&gt;
#include &lt;stdio.h&gt;

int main(int argc, char* argv[])
{
	long long i, j;
	long long num = 600851475143; // 13195;
	long long lpf = 0;
	for (i = 2; i &lt; num / 2; i++)
	{
		if (num % i == 0)
		{
			int j_prime = 1;
			printf("%lld\n", i);
			for (j = 2; j &lt; i / 2; j++)
			{
				if (i % j == 0)
				{
					j_prime = 0;
					break;
				}
			}
			if (j_prime)
			{
				lpf = i;
			}
			else
			{
				break;
			}
		}
	}
	printf("Largest Prime Factor: %lld\n", lpf);
	return 0;
}</code></pre>
<p>The process time was less than one second.</p>
<p>Original Question:</p>
<aside class="quote">
<blockquote>
<p>The prime factors of 13195 are 5, 7, 13 and 29.</p>
<p>What is the largest prime factor of the number 600851475143 ?</p>
</blockquote>
</aside>
<p>Any ideas?[/quote]<br>
Your algorithm is flawed, it doesn’t do what it should do - so it’s wrong to even judge its efficiency. Try the inputs 19 and 152. Figure out yourself what you did wrong.</p>
<p>[quote="(Anthony), post:4, topic:460570"][quote author=t4 link=topic=563500.msg4106580#msg4106580 date=1348060434]<br>
Here are a few algorithms for generating primes:<br>
<a href="http://en.wikibooks.org/wiki/Efficient_Prime_Number_Generating_Algorithms" class="onebox" target="_blank" rel="nofollow noopener">http://en.wikibooks.org/wiki/Efficient_Prime_Number_Generating_Algorithms</a></p>
<p>Protip:<br>
Don’t use raw primitive type names (short, int, long, long long, etc) as they may be of difference size on different systems. The most portable thing to do (and proper) is to use stdint.h (<a href="http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/stdint.h.html" rel="nofollow noopener">http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/stdint.h.html</a>)<br>
[/quote]<br>
the size of the data type is irrelevant (in this case), the standard clearly defines the range a data type must accommodate.</p>
<p>edit: it should be noted that the standard defines range in terms of the minimum range.[/quote]<br>
The stdint.h typedefs are useful when you need exact bit-width or don’t want to consume unneeded bits. However, in this case it doesn’t matter at all - long long is the largest integer type and it makes sense to use it incase larger integers are to be factored. Although, an unsigned long long would make more sense.</p>
<aside class="quote quote-modified" data-post="3" data-topic="460570">
<div class="title">
<div class="quote-controls"></div>
 Taharok:</div>
<blockquote>
<p>Also, a more straightforward way to iteratively build a table of primes is to list all primes before the sqrt(n) for any integer n, and then check whether any prime in that table divides n. You can do that in a single loop. As far as the expensive sqrt goes, there are very fast integer-based sqrts you can find on the internet. Next is finding all primes &lt;= sqrt(n). It’s easy to weed out about half while checking for modulo of 2 for even numbers, but it may take a bit of creativity for finding the rest quickly. sqrt(600851475143) is definitely not a small number, lol. <img src="../../images/emoji/twitter/stuck_out_tongueae52.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
</blockquote>
</aside>
<p>There are efficient prime number sieves for generating primes in the range [a; b]. If the task is to simply factorize an integer using trial division, pregenerating primes will do more harm than good. Have a go with <span class="bbcode-b">17849117530175954689</span>.</p>
      </div>

      <meta itemprop='headline' content='[C] Code Efficiency (Euler #3)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/_bool.html'><span itemprop='name'>_bool</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-09-19T21:34:20Z'>
            <time itemprop='dateModified' datetime='2016-08-04T00:13:22Z' class='post-time'>
              August 4, 2016, 12:13am
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote quote-modified" data-post="5" data-topic="460570">
<div class="title">
<div class="quote-controls"></div>
 The Enforcer:</div>
<blockquote>
<p>The stdint.h typedefs are useful when you need exact bit-width or don’t want to consume unneeded bits. However, in this case it doesn’t matter at all - long long is the largest integer type and it makes sense to use it incase larger integers are to be factored. Although, an unsigned long long would make more sense.</p>
</blockquote>
</aside>
<p>hence “(in this case)”</p>
      </div>

      <meta itemprop='headline' content='[C] Code Efficiency (Euler #3)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/The_Enforcer.html'><span itemprop='name'>The_Enforcer</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-09-20T14:12:56Z'>
            <time itemprop='dateModified' datetime='2016-08-04T00:14:00Z' class='post-time'>
              August 4, 2016, 12:14am
            </time>
        <span itemprop='position'>#7</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Here is my superior factorizer, written in the superior C++ language.</p>
<p><a href="http://pastie.org/4760370" class="onebox" target="_blank" rel="nofollow noopener">http://pastie.org/4760370</a></p>
<pre><code class="lang-auto">#include &lt;iostream&gt;
#include &lt;cmath&gt;
#include &lt;ctime&gt;

unsigned long long largestPrimeFactor(unsigned long long integer)
{
	for (bool factorize = true; factorize &amp;&amp; integer &gt; 3; )
	{
		factorize = false;

		if (integer % 2 == 0)
		{
			integer /= 2;
			factorize = true;
		}
		else if (integer % 3 == 0)
		{
			integer /= 3;
			factorize = true;
		}
		else
		{
			const unsigned long long sqrt = static_cast&lt;unsigned long long&gt;(std::sqrt(integer));

			for (unsigned long long i = 5, j = 7; i &lt;= sqrt; i += 6, j += 6)
			{
				if (integer % i == 0)
				{
					integer /= i;
					factorize = true;
					break;
				}
				else if (integer % j == 0)
				{
					integer /= j;
					factorize = true;
					break;
				}
			}
		}
	}

	return integer;
}

void benchmark(const unsigned long long integer)
{
	std::cout &lt;&lt; "Factorizing: " &lt;&lt; integer &lt;&lt; "." &lt;&lt; std::endl;
	const std::clock_t startClocks = std::clock();
	volatile const unsigned long long factor = largestPrimeFactor(integer);
	const std::clock_t clocksTaken = std::clock() - startClocks;
	std::cout &lt;&lt; "Factor: " &lt;&lt; factor &lt;&lt; "." &lt;&lt; std::endl;
	std::cout &lt;&lt; "Clocks taken: " &lt;&lt; clocksTaken &lt;&lt; ".\n" &lt;&lt; std::endl;
}

int main()
{
	const unsigned long long a = 3267000013;
	const unsigned long long b = 5463458053;
	const unsigned long long c = a * b;
	benchmark(600851475143);
	benchmark(c);

	std::cin.sync();
	std::cin.get();
	return EXIT_SUCCESS;
}</code></pre>
<pre><code class="lang-auto">Factorizing: 600851475143.
Factor: 6857.
Clocks taken: 0.

Factorizing: 17849117530175954689.
Factor: 5463458053.
Clocks taken: 5457.</code></pre>
<p>Note: This is probably as fast as trial division can get.</p>
      </div>

      <meta itemprop='headline' content='[C] Code Efficiency (Euler #3)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/_s11.html'><span itemprop='name'>_s11</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-09-22T13:19:50Z'>
            <time itemprop='dateModified' datetime='2016-08-04T00:17:01Z' class='post-time'>
              August 4, 2016, 12:17am
            </time>
        <span itemprop='position'>#8</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“The Enforcer, post:7, topic:460570”]Here is my superior factorizer, written in the superior C++ language.</p>
<p><a href="http://pastie.org/4760370" class="onebox" target="_blank" rel="nofollow noopener">http://pastie.org/4760370</a></p>
<pre><code class="lang-auto">#include &lt;iostream&gt;
#include &lt;cmath&gt;
#include &lt;ctime&gt;

unsigned long long largestPrimeFactor(unsigned long long integer)
{
	for (bool factorize = true; factorize &amp;&amp; integer &gt; 3; )
	{
		factorize = false;

		if (integer % 2 == 0)
		{
			integer /= 2;
			factorize = true;
		}
		else if (integer % 3 == 0)
		{
			integer /= 3;
			factorize = true;
		}
		else
		{
			const unsigned long long sqrt = static_cast&lt;unsigned long long&gt;(std::sqrt(integer));

			for (unsigned long long i = 5, j = 7; i &lt;= sqrt; i += 6, j += 6)
			{
				if (integer % i == 0)
				{
					integer /= i;
					factorize = true;
					break;
				}
				else if (integer % j == 0)
				{
					integer /= j;
					factorize = true;
					break;
				}
			}
		}
	}

	return integer;
}

void benchmark(const unsigned long long integer)
{
	std::cout &lt;&lt; "Factorizing: " &lt;&lt; integer &lt;&lt; "." &lt;&lt; std::endl;
	const std::clock_t startClocks = std::clock();
	volatile const unsigned long long factor = largestPrimeFactor(integer);
	const std::clock_t clocksTaken = std::clock() - startClocks;
	std::cout &lt;&lt; "Factor: " &lt;&lt; factor &lt;&lt; "." &lt;&lt; std::endl;
	std::cout &lt;&lt; "Clocks taken: " &lt;&lt; clocksTaken &lt;&lt; ".\n" &lt;&lt; std::endl;
}

int main()
{
	const unsigned long long a = 3267000013;
	const unsigned long long b = 5463458053;
	const unsigned long long c = a * b;
	benchmark(600851475143);
	benchmark(c);

	std::cin.sync();
	std::cin.get();
	return EXIT_SUCCESS;
}</code></pre>
<pre><code class="lang-auto">Factorizing: 600851475143.
Factor: 6857.
Clocks taken: 0.

Factorizing: 17849117530175954689.
Factor: 5463458053.
Clocks taken: 5457.</code></pre>
<p>Note: This is probably as fast as trial division can get.[/quote]<br>
jesus christ that’s verbose… <span class="hashtag">#include</span>  because you wrote ‘unsigned long long’ approximately 100 times.</p>
<p>edit: why is that volatile there?</p>
      </div>

      <meta itemprop='headline' content='[C] Code Efficiency (Euler #3)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/The_Enforcer.html'><span itemprop='name'>The_Enforcer</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-09-22T13:31:57Z'>
            <time itemprop='dateModified' datetime='2016-08-04T00:17:02Z' class='post-time'>
              August 4, 2016, 12:17am
            </time>
        <span itemprop='position'>#9</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="8" data-topic="460570">
<div class="title">
<div class="quote-controls"></div>
 s1gma:</div>
<blockquote>
<p>edit: why is that volatile there?</p>
</blockquote>
</aside>
<p>VC++ decided to optimize away the ‘factor’ variable and move the function call to the second std::cout statement.</p>
      </div>

      <meta itemprop='headline' content='[C] Code Efficiency (Euler #3)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/_s11.html'><span itemprop='name'>_s11</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-09-22T14:47:56Z'>
            <time itemprop='dateModified' datetime='2016-08-04T00:17:09Z' class='post-time'>
              August 4, 2016, 12:17am
            </time>
        <span itemprop='position'>#10</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“The Enforcer, post:9, topic:460570”][quote author=s1gma link=topic=563500.msg4108733#msg4108733 date=1348319990]<br>
edit: why is that volatile there?<br>
[/quote]</p>
<p>VC++ decided to optimize away the ‘factor’ variable and move the function call to the second std::cout statement.[/quote]what a dick</p>
      </div>

      <meta itemprop='headline' content='[C] Code Efficiency (Euler #3)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/T41.html'><span itemprop='name'>T41</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-09-22T15:02:48Z'>
            <time itemprop='dateModified' datetime='2016-08-04T00:17:10Z' class='post-time'>
              August 4, 2016, 12:17am
            </time>
        <span itemprop='position'>#11</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>guess you shouldn’t be using VStudio…</p>
      </div>

      <meta itemprop='headline' content='[C] Code Efficiency (Euler #3)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/The_Enforcer.html'><span itemprop='name'>The_Enforcer</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-09-22T16:01:10Z'>
            <time itemprop='dateModified' datetime='2016-08-04T00:17:16Z' class='post-time'>
              August 4, 2016, 12:17am
            </time>
        <span itemprop='position'>#12</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“s1gma, post:10, topic:460570”][quote author=The Enforcer link=topic=563500.msg4108741#msg4108741 date=1348320717]</p>
<aside class="quote">
<blockquote>
<p>edit: why is that volatile there?</p>
</blockquote>
</aside>
<p>VC++ decided to optimize away the ‘factor’ variable and move the function call to the second std::cout statement.<br>
[/quote]what a dick[/quote]</p>
<aside class="quote quote-modified" data-post="11" data-topic="460570">
<div class="title">
<div class="quote-controls"></div>
 t4:</div>
<blockquote>
<p>guess you shouldn’t be using VStudio…</p>
</blockquote>
</aside>
<p>It’s a valid optimization. If the function largestPrimeFactor had any external side effects or if there was a dependency on the ‘factor’ variable, then the function call would not be moved forward. The variable was made volatile for timing purposes only.</p>
      </div>

      <meta itemprop='headline' content='[C] Code Efficiency (Euler #3)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/T41.html'><span itemprop='name'>T41</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-09-24T00:51:14Z'>
            <time itemprop='dateModified' datetime='2016-08-04T00:20:02Z' class='post-time'>
              August 4, 2016, 12:20am
            </time>
        <span itemprop='position'>#13</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I messed around a bit and I ended up doing the following. It’s pretty fast - I tested dumping all primes up to 2.2 billion; it took around 40 seconds to generate and pipe to a file. The numbers were accurate too. Obviously, this implementation is only good up to the limit of uint64.</p>
<p>Here is a Sieve of Eratosthenes implementation:</p>
<pre><code class="lang-auto">/**
  primegen.c
  Author: t4
*/

#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;stdint.h&gt;
#include &lt;inttypes.h&gt;

#include "eratosthenes.h"

int main(int argc, char* argv[]) {
  uint64_t n = strtoq(argv[1], NULL, 10);
  eratosthenes_mem* mem = eratosthenes_sieve(n);
  for(uint64_t i = 2; i &lt; n; ++i) {
    if(mem[i]) {
      printf("%" PRIu64 " ", i);
    }
  }
  printf("\n");
  free(mem);
  return 0;
}</code></pre>
<pre><code class="lang-auto">/**
  eratosthenes.c
  Author: t4
*/

#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include &lt;inttypes.h&gt;
#include &lt;math.h&gt;

#include "eratosthenes.h"

eratosthenes_mem* eratosthenes_sieve(uint64_t n) {
  eratosthenes_mem* m = (eratosthenes_mem*) malloc(n * sizeof(eratosthenes_mem));
  memset(m, 1, n * sizeof(eratosthenes_mem));

  uint64_t limit = sqrt((long double) n);

  for(uint64_t i = 2; i &lt; limit; ++i) {
    if(m[i]) {
      uint64_t comp;
      for(int mult = 2; (comp = mult * i) &lt; n; ++mult) {
        m[comp] = 0;
      }
    }
  }
  return m;
}

int8_t is_eratosthenes_prime(eratosthenes_mem* m, uint64_t i) {
  return m[i] == 1;
}</code></pre>
<pre><code class="lang-auto">/**
  eratosthenes.h
  Author: t4
*/

#include &lt;stdint.h&gt;

#ifndef ERATOSTHENES_H
#define ERATOSTHENES_H 

typedef char eratosthenes_mem;

eratosthenes_mem* eratosthenes_sieve(uint64_t n);

int8_t is_eratosthenes_prime(eratosthenes_mem* m, uint64_t i);

#endif</code></pre>
      </div>

      <meta itemprop='headline' content='[C] Code Efficiency (Euler #3)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="2" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/_s11.html'><span itemprop='name'>_s11</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-09-24T06:06:17Z'>
            <time itemprop='dateModified' datetime='2016-08-04T00:20:24Z' class='post-time'>
              August 4, 2016, 12:20am
            </time>
        <span itemprop='position'>#14</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“t4, post:13, topic:460570”]I messed around a bit and I ended up doing the following. It’s pretty fast - I tested dumping all primes up to 2.2 billion; it took around 40 seconds to generate and pipe to a file. The numbers were accurate too. Obviously, this implementation is only good up to the limit of uint64.</p>
<p>Here is a Sieve of Eratosthenes implementation:</p>
<pre><code class="lang-auto">/**
  primegen.c
  Author: t4
*/

#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;stdint.h&gt;
#include &lt;inttypes.h&gt;

#include "eratosthenes.h"

int main(int argc, char* argv[]) {
  uint64_t n = strtoq(argv[1], NULL, 10);
  eratosthenes_mem* mem = eratosthenes_sieve(n);
  for(uint64_t i = 2; i &lt; n; ++i) {
    if(mem[i]) {
      printf("%" PRIu64 " ", i);
    }
  }
  printf("\n");
  free(mem);
  return 0;
}</code></pre>
<pre><code class="lang-auto">/**
  eratosthenes.c
  Author: t4
*/

#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include &lt;inttypes.h&gt;
#include &lt;math.h&gt;

#include "eratosthenes.h"

eratosthenes_mem* eratosthenes_sieve(uint64_t n) {
  eratosthenes_mem* m = (eratosthenes_mem*) malloc(n * sizeof(eratosthenes_mem));
  memset(m, 1, n * sizeof(eratosthenes_mem));

  uint64_t limit = sqrt((long double) n);

  for(uint64_t i = 2; i &lt; limit; ++i) {
    if(m[i]) {
      uint64_t comp;
      for(int mult = 2; (comp = mult * i) &lt; n; ++mult) {
        m[comp] = 0;
      }
    }
  }
  return m;
}

int8_t is_eratosthenes_prime(eratosthenes_mem* m, uint64_t i) {
  return m[i] == 1;
}</code></pre>
<p>[code=c]<br>
/**<br>
eratosthenes.h<br>
Author: t4<br>
*/</p>
<p><span class="hashtag">#include</span> &lt;stdint.h&gt;</p>
<p><span class="hashtag">#ifndef</span> ERATOSTHENES_H<br>
<span class="hashtag">#define</span> ERATOSTHENES_H</p>
<p>typedef char eratosthenes_mem;</p>
<p>eratosthenes_mem* eratosthenes_sieve(uint64_t n);</p>
<p>int8_t is_eratosthenes_prime(eratosthenes_mem* m, uint64_t i);</p>
<p><span class="hashtag">#endif</span><br>
[/code][/quote]<a href="http://en.wikipedia.org/wiki/Sieve_of_Atkin" data-bbcode="true" rel="nofollow noopener">cool now make it even faster</a></p>
      </div>

      <meta itemprop='headline' content='[C] Code Efficiency (Euler #3)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/T41.html'><span itemprop='name'>T41</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-09-24T12:36:52Z'>
            <time itemprop='dateModified' datetime='2016-08-04T00:20:35Z' class='post-time'>
              August 4, 2016, 12:20am
            </time>
        <span itemprop='position'>#15</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“s1gma, post:14, topic:460570”][quote author=t4 link=topic=563500.msg4110407#msg4110407 date=1348447874]<br>
I messed around a bit and I ended up doing the following. It’s pretty fast - I tested dumping all primes up to 2.2 billion; it took around 40 seconds to generate and pipe to a file. The numbers were accurate too. Obviously, this implementation is only good up to the limit of uint64.</p>
<p>Here is a Sieve of Eratosthenes implementation:</p>
<pre><code class="lang-auto">/**
  primegen.c
  Author: t4
*/

#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;stdint.h&gt;
#include &lt;inttypes.h&gt;

#include "eratosthenes.h"

int main(int argc, char* argv[]) {
  uint64_t n = strtoq(argv[1], NULL, 10);
  eratosthenes_mem* mem = eratosthenes_sieve(n);
  for(uint64_t i = 2; i &lt; n; ++i) {
    if(mem[i]) {
      printf("%" PRIu64 " ", i);
    }
  }
  printf("\n");
  free(mem);
  return 0;
}</code></pre>
<pre><code class="lang-auto">/**
  eratosthenes.c
  Author: t4
*/

#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include &lt;inttypes.h&gt;
#include &lt;math.h&gt;

#include "eratosthenes.h"

eratosthenes_mem* eratosthenes_sieve(uint64_t n) {
  eratosthenes_mem* m = (eratosthenes_mem*) malloc(n * sizeof(eratosthenes_mem));
  memset(m, 1, n * sizeof(eratosthenes_mem));

  uint64_t limit = sqrt((long double) n);

  for(uint64_t i = 2; i &lt; limit; ++i) {
    if(m[i]) {
      uint64_t comp;
      for(int mult = 2; (comp = mult * i) &lt; n; ++mult) {
        m[comp] = 0;
      }
    }
  }
  return m;
}

int8_t is_eratosthenes_prime(eratosthenes_mem* m, uint64_t i) {
  return m[i] == 1;
}</code></pre>
<pre><code class="lang-auto">/**
  eratosthenes.h
  Author: t4
*/

#include &lt;stdint.h&gt;

#ifndef ERATOSTHENES_H
#define ERATOSTHENES_H 

typedef char eratosthenes_mem;

eratosthenes_mem* eratosthenes_sieve(uint64_t n);

int8_t is_eratosthenes_prime(eratosthenes_mem* m, uint64_t i);

#endif</code></pre>
<p>[/quote]<a href="http://en.wikipedia.org/wiki/Sieve_of_Atkin" data-bbcode="true" rel="nofollow noopener">cool now make it even faster</a>[/quote]</p>
<pre><code class="lang-auto">$ ls src/
atkin.c  atkin.h  eratosthenes.c  eratosthenes.h  primegen.c</code></pre>
<p>I was doing both, atkin isn’t done yet.</p>
      </div>

      <meta itemprop='headline' content='[C] Code Efficiency (Euler #3)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/The_Enforcer.html'><span itemprop='name'>The_Enforcer</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-09-24T16:33:29Z'>
            <time itemprop='dateModified' datetime='2016-08-04T00:20:48Z' class='post-time'>
              August 4, 2016, 12:20am
            </time>
        <span itemprop='position'>#16</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“t4, post:13, topic:460570”]I messed around a bit and I ended up doing the following. It’s pretty fast - I tested dumping all primes up to 2.2 billion; it took around 40 seconds to generate and pipe to a file. The numbers were accurate too. Obviously, this implementation is only good up to the limit of uint64.</p>
<p>Here is a Sieve of Eratosthenes implementation:</p>
<pre><code class="lang-auto">/**
  primegen.c
  Author: t4
*/

#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;stdint.h&gt;
#include &lt;inttypes.h&gt;

#include "eratosthenes.h"

int main(int argc, char* argv[]) {
  uint64_t n = strtoq(argv[1], NULL, 10);
  eratosthenes_mem* mem = eratosthenes_sieve(n);
  for(uint64_t i = 2; i &lt; n; ++i) {
    if(mem[i]) {
      printf("%" PRIu64 " ", i);
    }
  }
  printf("\n");
  free(mem);
  return 0;
}</code></pre>
<pre><code class="lang-auto">/**
  eratosthenes.c
  Author: t4
*/

#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include &lt;inttypes.h&gt;
#include &lt;math.h&gt;

#include "eratosthenes.h"

eratosthenes_mem* eratosthenes_sieve(uint64_t n) {
  eratosthenes_mem* m = (eratosthenes_mem*) malloc(n * sizeof(eratosthenes_mem));
  memset(m, 1, n * sizeof(eratosthenes_mem));

  uint64_t limit = sqrt((long double) n);

  for(uint64_t i = 2; i &lt; limit; ++i) {
    if(m[i]) {
      uint64_t comp;
      for(int mult = 2; (comp = mult * i) &lt; n; ++mult) {
        m[comp] = 0;
      }
    }
  }
  return m;
}

int8_t is_eratosthenes_prime(eratosthenes_mem* m, uint64_t i) {
  return m[i] == 1;
}</code></pre>
<p>[code=c]<br>
/**<br>
eratosthenes.h<br>
Author: t4<br>
*/</p>
<p><span class="hashtag">#include</span> &lt;stdint.h&gt;</p>
<p><span class="hashtag">#ifndef</span> ERATOSTHENES_H<br>
<span class="hashtag">#define</span> ERATOSTHENES_H</p>
<p>typedef char eratosthenes_mem;</p>
<p>eratosthenes_mem* eratosthenes_sieve(uint64_t n);</p>
<p>int8_t is_eratosthenes_prime(eratosthenes_mem* m, uint64_t i);</p>
<p><span class="hashtag">#endif</span><br>
[/code][/quote]</p>
<p>Replace this line</p>
<pre><code class="lang-auto"></code></pre>
<p>with the following superior line.</p>
<pre><code class="lang-auto"></code></pre>
      </div>

      <meta itemprop='headline' content='[C] Code Efficiency (Euler #3)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/T41.html'><span itemprop='name'>T41</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-09-24T17:11:38Z'>
            <time itemprop='dateModified' datetime='2016-08-04T00:20:49Z' class='post-time'>
              August 4, 2016, 12:20am
            </time>
        <span itemprop='position'>#17</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“The Enforcer, post:16, topic:460570”]Replace this line</p>
<pre><code class="lang-auto"></code></pre>
<p>with the following superior line.</p>
<pre><code class="lang-auto"></code></pre>
<p>Uh, that’s not how the sieve works…</p>
      </div>

      <meta itemprop='headline' content='[C] Code Efficiency (Euler #3)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/The_Enforcer.html'><span itemprop='name'>The_Enforcer</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-09-24T17:24:26Z'>
            <time itemprop='dateModified' datetime='2016-08-04T00:20:49Z' class='post-time'>
              August 4, 2016, 12:20am
            </time>
        <span itemprop='position'>#18</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“t4, post:17, topic:460570”][quote author=The Enforcer link=topic=563500.msg4110862#msg4110862 date=1348504409]<br>
Replace this line</p>
<pre><code class="lang-auto"></code></pre>
<p>with the following superior line.</p>
<pre><code class="lang-auto"></code></pre>
<p>[/quote]<br>
Uh, that’s not how the sieve works…[/quote]</p>
<p>No. You’re starting from 2 * i which is not optimal, it’s safe to start from i². Furthermore, you perform two arithmetic operations every step to calculate comp, instead of one.</p>
      </div>

      <meta itemprop='headline' content='[C] Code Efficiency (Euler #3)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/T41.html'><span itemprop='name'>T41</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-09-24T20:00:29Z'>
            <time itemprop='dateModified' datetime='2016-08-04T00:20:57Z' class='post-time'>
              August 4, 2016, 12:20am
            </time>
        <span itemprop='position'>#19</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“The Enforcer, post:18, topic:460570”][quote author=t4 link=topic=563500.msg4110872#msg4110872 date=1348506698]</p>
<aside class="quote">
<blockquote>
<p>Replace this line</p>
<pre><code class="lang-auto"></code></pre>
<p>with the following superior line.</p>
<pre><code class="lang-auto"></code></pre>
</blockquote>
</aside>
<p>Uh, that’s not how the sieve works…<br>
[/quote]</p>
<p>No. You’re starting from 2 * i which is not optimal, it’s safe to start from i². Furthermore, you perform two arithmetic operations every step to calculate comp, instead of one.[/quote]<br>
I saw nothing stating that starting at i^2 was allowed. The basic algorithm states you should multiply each integer from 2 to n by 2, 3, … to the square of n.</p>
      </div>

      <meta itemprop='headline' content='[C] Code Efficiency (Euler #3)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/_bool.html'><span itemprop='name'>_bool</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-09-24T20:14:24Z'>
            <time itemprop='dateModified' datetime='2016-08-04T00:20:57Z' class='post-time'>
              August 4, 2016, 12:20am
            </time>
        <span itemprop='position'>#20</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="onebox wikipedia">
  <header class="source">
      <a href="https://en.wikipedia.org/wiki/Sieve_of_Eratosthenes" target="_blank" rel="nofollow noopener">en.wikipedia.org</a>
  </header>
  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:445/369;"><img src="http://upload.wikimedia.org/wikipedia/commons/b/b9/Sieve_of_Eratosthenes_animation.gif" class="thumbnail"></div>

<h3><a href="https://en.wikipedia.org/wiki/Sieve_of_Eratosthenes" target="_blank" rel="nofollow noopener">Sieve of Eratosthenes</a></h3>

<p>In mathematics, the sieve of Eratosthenes is a simple, ancient algorithm for finding all prime numbers up to any given limit. It does so by iteratively marking as composite (i.e., not prime) the multiples of each prime, starting with the first prime number, 2. The multiples of a given prime are generated as a sequence of numbers starting from that prime, with constant difference between them that is equal to that prime. This is the sieve's key distinction from using trial division to sequentially...</p>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>“As a refinement, it is sufficient to mark the numbers in step 3 starting from p^2, as all the smaller multiples of p will have already been marked at that point.”</p>
<p>man, this whole reading thing is rlly tough</p>
      </div>

      <meta itemprop='headline' content='[C] Code Efficiency (Euler #3)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>

  <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
      <span itemprop='name'><b><a rel="next" itemprop="url" href="4605704658.html?page=2">next page →</a></b></span>
  </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/c-code-efficiency-euler-3/460570 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 22:54:38 GMT -->
</html>
