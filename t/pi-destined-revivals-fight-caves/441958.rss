<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>[PI] Destined-Revival&#39;s Fight Caves</title>
    <link>https://forum.moparisthebest.com/t/pi-destined-revivals-fight-caves/441958</link>
    <description>[CENTER][U][B]Destined-Revival&#39;s Fight Caves - [/B][/U]

[I]What does this have:[/I]

[ul][*]Cleaner code than original project insanity FightCaves.
[*]Full 63 waves.
[*]Two different npc affects: tz-kih drains prayer at the rate of damage + 1 = drain, and the tz-kek splits into 2 smaller version when killed.[/ul]


[B][I]First:[/I][/B]
Replace your FightCaves class with mine:
[CODE]package server.rs2.content.minigames;

import server.Server;
import server.rs2.entity.npcs.NPCHandler;
import server.rs2.entity.players.Client;

/**
 * @author Kurt Cobain
 */
public class FightCaves {
	
	public static final int TZ_KIH = 2627, TZ_KEK_SPAWN = 2738, TZ_KEK = 2630, TOK_XIL = 2631, YT_MEJKOT = 2741, KET_ZEK = 2743, TZTOK_JAD = 2745;
	
	/**
	 * Holds the data for the 63 waves fight cave.
	 */
	private final int[][] WAVES = {{TZ_KIH},
								  {TZ_KIH,TZ_KIH},
								  {TZ_KEK},
								  {TZ_KEK,TZ_KIH},
								  {TZ_KEK,TZ_KIH,TZ_KIH},
								  {TZ_KEK,TZ_KEK},
								  {TOK_XIL},
								  {TOK_XIL,TZ_KIH},
								  {TOK_XIL,TZ_KIH,TZ_KIH},
								  {TOK_XIL,TZ_KEK},
								  {TOK_XIL,TZ_KEK,TZ_KIH},
								  {TOK_XIL,TZ_KEK,TZ_KIH,TZ_KIH},
								  {TOK_XIL,TZ_KEK,TZ_KEK},
								  {TOK_XIL,TOK_XIL},
								  {YT_MEJKOT},
								  {YT_MEJKOT,TZ_KIH},
								  {YT_MEJKOT,TZ_KIH,TZ_KIH},
								  {YT_MEJKOT,TZ_KEK},
								  {YT_MEJKOT,TZ_KEK,TZ_KIH},
								  {YT_MEJKOT,TZ_KEK,TZ_KIH,TZ_KIH},
								  {YT_MEJKOT,TZ_KEK,TZ_KEK},
								  {YT_MEJKOT,TOK_XIL},
								  {YT_MEJKOT,TOK_XIL,TZ_KIH},
								  {YT_MEJKOT,TOK_XIL,TZ_KIH,TZ_KIH},
								  {YT_MEJKOT,TOK_XIL,TZ_KEK},
								  {YT_MEJKOT,TOK_XIL,TZ_KEK,TZ_KIH},
								  {YT_MEJKOT,TOK_XIL,TZ_KEK,TZ_KIH,TZ_KIH},
								  {YT_MEJKOT,TOK_XIL,TZ_KEK,TZ_KEK},
								  {YT_MEJKOT,TOK_XIL,TOK_XIL},
								  {YT_MEJKOT,YT_MEJKOT},
								  {KET_ZEK},
								  {KET_ZEK,TZ_KIH},
								  {KET_ZEK,TZ_KIH,TZ_KIH},
								  {KET_ZEK,TZ_KEK},
								  {KET_ZEK,TZ_KEK,TZ_KIH},
								  {KET_ZEK,TZ_KEK,TZ_KIH,TZ_KIH},
								  {KET_ZEK,TZ_KEK,TZ_KEK},
								  {KET_ZEK,TOK_XIL},
								  {KET_ZEK,TOK_XIL,TZ_KIH},
								  {KET_ZEK,TOK_XIL,TZ_KIH,TZ_KIH},
								  {KET_ZEK,TOK_XIL,TZ_KEK},
								  {KET_ZEK,TOK_XIL,TZ_KEK,TZ_KIH},
								  {KET_ZEK,TOK_XIL,TZ_KEK,TZ_KIH,TZ_KIH},
								  {KET_ZEK,TOK_XIL,TZ_KEK,TZ_KEK},
								  {KET_ZEK,TOK_XIL,TOK_XIL},
								  {KET_ZEK,YT_MEJKOT},
								  {KET_ZEK,YT_MEJKOT,TZ_KIH},
								  {KET_ZEK,YT_MEJKOT,TZ_KIH,TZ_KIH},
								  {KET_ZEK,YT_MEJKOT,TZ_KEK},
								  {KET_ZEK,YT_MEJKOT,TZ_KEK,TZ_KIH},
								  {KET_ZEK,YT_MEJKOT,TZ_KEK,TZ_KIH,TZ_KIH},
								  {KET_ZEK,YT_MEJKOT,TZ_KEK,TZ_KEK},
								  {KET_ZEK,YT_MEJKOT,TOK_XIL},
								  {KET_ZEK,YT_MEJKOT,TOK_XIL,TZ_KIH},
								  {KET_ZEK,YT_MEJKOT,TOK_XIL,TZ_KIH,TZ_KIH},
								  {KET_ZEK,YT_MEJKOT,TOK_XIL,TZ_KEK},
								  {KET_ZEK,YT_MEJKOT,TOK_XIL,TZ_KEK,TZ_KIH},
								  {KET_ZEK,YT_MEJKOT,TOK_XIL,TZ_KEK,TZ_KIH,TZ_KIH},
								  {KET_ZEK,YT_MEJKOT,TOK_XIL,TZ_KEK,TZ_KEK},
								  {KET_ZEK,YT_MEJKOT,TOK_XIL,TOK_XIL},
								  {KET_ZEK,YT_MEJKOT,YT_MEJKOT},
								  {KET_ZEK,KET_ZEK},
								  {TZTOK_JAD}};
	
	private final static int[][] COORDINATES = {{2403, 5094}, {2390, 5096}, {2392, 5077}, {2408, 5080}, {2413, 5108}, {2381, 5106}, {2379, 5072}, {2420, 5082}};

	/**
	 * Handles spawning the next fightcave wave.
	 * @param c
	 * 		The player.
	 */
	public void spawnNextWave(Client c) {
		if (c != null) {
			if (c.waveId &gt;= WAVES.length) {
				c.waveId = 0;
				return;				
			}
			if (c.waveId &lt; 0){
				return;
			}
			int npcAmount = WAVES[c.waveId].length;
			for (int j = 0; j &lt; npcAmount; j++) {
				int npc = WAVES[c.waveId][j];
				int X = COORDINATES[j][0];
				int Y = COORDINATES[j][1];
				int H = c.heightLevel;
				int hp = getHp(npc);
				int max = getMax(npc);
				int atk = getAtk(npc);
				int def = getDef(npc);
				Server.npcHandler.spawnNpc(c, npc, X, Y, H, 0, hp, max, atk, def, false, true);				
			}
			c.tzhaarToKill = npcAmount;
			c.tzhaarKilled = 0;
		}
	}
	
	/**
	 * Handles the correct tz-kih effect; prayer
	 * is drained by the formula: drain = damage + 1
	 * @param c
	 * 		The player
	 * @param i
	 * 		The npcId
	 * @param damage
	 * 		What the npchit
	 */
	public static void tzKihEffect(Client c,int i, int damage) {
		if(NPCHandler.npcs[i].npcType == TZ_KIH) {
			if(c != null) {
				if(c.playerLevel[5] &gt; 0) {
					c.playerLevel[5] -= 1 + damage;
					c.getPA().refreshSkill(5);
				}
			}	
		}
	}
	
	/**
	 * Handles the correct tz-kek effect; when you kill
	 * tz-kek it splits into 2 smaller version of itself.
	 * @param c
	 * 		The player.
	 * @param i
	 * 		The npcId.
	 */
	public static void tzKekEffect(Client c, int i) {
		if(NPCHandler.npcs[i].npcType == TZ_KEK) {
			
			int x = NPCHandler.npcs[i].absX + 2;
			int y = NPCHandler.npcs[i].absY + 2;
			int x1 = NPCHandler.npcs[i].absX - 2;
			int y1 = NPCHandler.npcs[i].absY - 2;
	
			int hp = getHp(TZ_KEK_SPAWN);
			int max = getMax(TZ_KEK_SPAWN);
			int atk = getAtk(TZ_KEK_SPAWN);
			int def = getDef(TZ_KEK_SPAWN);
			
			if(c != null) {
				if(c.tzKekTimer == 0) {
					if(NPCHandler.npcs[i].isDead) {
						Server.npcHandler.spawnNpc(c, TZ_KEK_SPAWN, x, y, c.heightLevel, 0, hp, max, atk, def, true, true);
						Server.npcHandler.spawnNpc(c, TZ_KEK_SPAWN, x1, y1, c.heightLevel, 0, hp, max, atk, def, true, true);
					}
				}
			}
		}
	}
	
	public static int getHp(int npc) {
		switch (npc) {
			case TZ_KIH:
			case TZ_KEK_SPAWN:
			return 10;
			case TZ_KEK:
			return 20;
			case TOK_XIL:
			return 40;
			case YT_MEJKOT:
			return 80;
			case KET_ZEK: 
			return 150;
			case TZTOK_JAD:
			return 250;		
		}
		return 100;
	}
	
	public static int getMax(int npc) {
		switch (npc) {
			case TZ_KIH:
			case TZ_KEK_SPAWN:
			return 4;
			case TZ_KEK:
			return 7;
			case TOK_XIL:
			return 13;
			case YT_MEJKOT:
			return 28;
			case KET_ZEK: 
			return 54;
			case TZTOK_JAD:
			return 97;		
		}
		return 5;
	}
	
	public static int getAtk(int npc) {
		switch (npc) {
			case TZ_KIH:
			case TZ_KEK_SPAWN:
			return 30;
			case TZ_KEK:
			return 50;
			case TOK_XIL:
			return 100;
			case YT_MEJKOT:
			return 150;
			case KET_ZEK: 
			return 450;
			case TZTOK_JAD:
			return 650;		
		}
		return 100;
	}
	
	public static int getDef(int npc) {
		switch (npc) {
			case TZ_KIH:
			case TZ_KEK_SPAWN:
			return 30;
			case TZ_KEK:
			return 50;
			case TOK_XIL:
			return 100;
			case YT_MEJKOT:
			return 150;
			case KET_ZEK: 
			return 300;
			case TZTOK_JAD:
			return 500;		
		}
		return 100;
	}
	
}[/CODE]
[B]Remember to change packaging and imports.[/B]

[B][I]Second:[/I][/B]
Then go into PlayerAssistant class and replace/add these methods:
[CODE]	public void resetTzhaar() {
		c.waveId = -1;
		c.tzhaarToKill = -1;
		c.tzhaarKilled = -1;
		movePlayer(2438, 5168, 0);
	}

	public void enterCaves() {
		c.getPA().movePlayer(2413,5117, c.playerId * 4);
		c.waveId = 0;
		c.tzhaarToKill = -1;
		c.tzhaarKilled = -1;
		EventManager.getSingleton().addEvent(new Event() {
			public void execute(EventContainer e) {
				Server.fightCaves.spawnNextWave((Client)PlayerHandler.players[c.playerId]);
				e.stop();
			}
		}, 10000);
	}[/CODE]
That adds the methods for resetting the variables if you die or finish the fight caves mini-game, and for starting the mini-game when you enter the cave.
[B]You will have to do a few things related with the giveLife method if you haven&#39;t already.[/B]

[B][I]Third: [/I][/B]
Add/replace these in your Player class
[CODE]public int tzhaarToKill = 0, tzhaarKilled = 0, tzKekSpawn = 0, caveWave, tzhaarNpcs;[/CODE]
These are the variables that must be used in the mini-game: tzhaarToKill is how many you must kill for the next wave, tzhaarKilled is how many you have killed, tzKekSpawn is how many of the spawns you have killed.

[B][I]Fourth: [/I][/B]
Go into your NPCHandler class and add/replace these methods:
[CODE]	/**
	 * Checks if a tzhaar npc has been killed, if so then it checks if
	 * it needs to do the tz-kek effect. If tzKek spawn has been killed
	 * twice or didn&#39;t need to be killed it calls killedTzhaar.
	 * @param i
	 * 		The npc.
	 */
	private void tzhaarDeathHandler(int i) {
		if (isFightCaveNpc(i) &amp;&amp; npcs[i].npcType != FightCaves.TZ_KEK)
			killedTzhaar(i);
		if(npcs[i].npcType == FightCaves.TZ_KEK_SPAWN) {
			int p = npcs[i].killerId;
			if (PlayerHandler.players[p] != null) {
				Client c = (Client) PlayerHandler.players[p];
				c.tzKekSpawn += 1;
				if(c.tzKekSpawn == 2) {
					killedTzhaar(i);
					c.tzKekSpawn = 0;
				}
			}
		}
		if(npcs[i].npcType == FightCaves.TZ_KEK) {
			int p = npcs[i].killerId;
			if (PlayerHandler.players[p] != null) {
				Client c = (Client) PlayerHandler.players[p];
				FightCaves.tzKekEffect(c, i);
			}
		}
	}
	
	/**
	 * Raises the count of tzhaarKilled, if tzhaarKilled is equal to the amount
	 * needed to kill to move onto the next wave it raises wave id then starts next
	 * wave.
	 * @param i
	 * 		The npc.
	 */
	private void killedTzhaar(int i) {
		final Client c2 = (Client) PlayerHandler.players[npcs[i].spawnedBy];
			c2.tzhaarKilled++;
		if (c2.tzhaarKilled == c2.tzhaarToKill) {
			c2.waveId++;
			EventManager.getSingleton().addEvent(new Event() {
				public void execute(EventContainer c) {
					if (c2 != null) {
						Server.fightCaves.spawnNextWave(c2);
					}
					c.stop();
				}
			}, 7500);

		}
	}
	
	/**
	 * Handles the death of tztok-jad by ending the game and rewarding the player
	 * with a fire cape.
	 * @param i
	 * 		The npc.
	 */
	public void handleJadDeath(int i) {
		Client c = (Client) PlayerHandler.players[npcs[i].spawnedBy];
		c.getItems().addItem(6570, 1);
		c.sendMessage(&quot;Congratulations on completing the fight caves minigame!&quot;);
		c.getPA().resetTzhaar();
		c.waveId = 300;
	}
	
	/**
	 * Checks if something is a fight cave npc.
	 * @param i
	 * 		The npc.
	 * @return
	 * 		Whether or not it is a fight caves npc.
	 */
	public boolean isFightCaveNpc(int i) {
		switch (npcs[i].npcType) {
			case FightCaves.TZ_KIH:
			case FightCaves.TZ_KEK:
			case FightCaves.TOK_XIL:
			case FightCaves.YT_MEJKOT:
			case FightCaves.KET_ZEK: 
			case FightCaves.TZTOK_JAD:
			return true;		
		}
		return false;
	}[/CODE]
That adds the methods and booleans which will be called when needed: such as when checking if a tzhaar npc has died it will use the isFightCaveNpc boolean, and then it will either continue with the rest of the code or stop.
Then find the loadSpell method and in it add/replace these
[CODE]		case FightCaves.TZTOK_JAD:
			int r3 = 0;
			if (goodDistance(npcs[i].absX, npcs[i].absY,
					PlayerHandler.players[npcs[i].spawnedBy].absX,
					PlayerHandler.players[npcs[i].spawnedBy].absY, 1))
				r3 = Misc.random(2);
			else
				r3 = Misc.random(1);
			if (r3 == 0) {
				npcs[i].attackType = 2;
				npcs[i].endGfx = 157;
				npcs[i].projectileId = 448;
			} else if (r3 == 1) {
				npcs[i].attackType = 1;
				npcs[i].endGfx = 451;
				npcs[i].projectileId = -1;
			} else if (r3 == 2) {
				npcs[i].attackType = 0;
				npcs[i].projectileId = -1;
			}
		break;
		
		case FightCaves.KET_ZEK:
			npcs[i].attackType = 2;
			npcs[i].projectileId = 445;
			npcs[i].endGfx = 446;
		break;

		case FightCaves.TOK_XIL:
			npcs[i].attackType = 1;
			npcs[i].projectileId = 443;
		break;[/CODE]
That adds the spells for the different tzhaar npcs.
Then find your applyDamage method and add this:
[CODE]FightCaves.tzKihEffect(c, i, damage);[/CODE]
below
[CODE]handleSpecialEffects(c, i, damage);[/CODE]
That calls the tzKihEffect method right when damage is applied.
Then find your process method and add this:
[CODE]tzhaarDeathHandler(i);[/CODE]
below
[CODE]appendSlayerExperience(i);[/CODE]
That calls the tzhaarDeathHandler method after the npc has died and finished the death emote.
[B]Make sure to import the FightCaves class.[/B]

[B][I]Credits: [/I][/B]
Me
Sanity

If I missed anything tell me.
[/CENTER]</description>
    
    <lastBuildDate>Sat, 22 Dec 2012 12:30:41 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/pi-destined-revivals-fight-caves/441958.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>[PI] Destined-Revival&#39;s Fight Caves</title>
        <dc:creator><![CDATA[@luna-scape luna-scape]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/luna-scape">@luna-scape</a> wrote:</p>
          <blockquote>
              <p>Nice tut m8 but i get this error:</p>
<p><a href="http://www.imagebam.com/image/fe2eb3227171121" data-bbcode="true" rel="nofollow noopener"><img src="http://thumbnails108.imagebam.com/22718/fe2eb3227171121.jpg" alt width="350" height="178"></a></p>
<p>I believe this had sumthing to do with the imports?<br>
Which one i have to add?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-destined-revivals-fight-caves/441958/14">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-destined-revivals-fight-caves/441958/14</link>
        <pubDate>Sat, 22 Dec 2012 12:30:41 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-441958-14</guid>
        <source url="https://forum.moparisthebest.com/t/pi-destined-revivals-fight-caves/441958.rss">[PI] Destined-Revival&#39;s Fight Caves</source>
      </item>
      <item>
        <title>[PI] Destined-Revival&#39;s Fight Caves</title>
        <dc:creator><![CDATA[@xknightpk xknightpk]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/xknightpk">@xknightpk</a> wrote:</p>
          <blockquote>
              <p>I don’t see any laziness in your coding, good job!  <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-destined-revivals-fight-caves/441958/13">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-destined-revivals-fight-caves/441958/13</link>
        <pubDate>Sat, 16 Jun 2012 08:05:14 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-441958-13</guid>
        <source url="https://forum.moparisthebest.com/t/pi-destined-revivals-fight-caves/441958.rss">[PI] Destined-Revival&#39;s Fight Caves</source>
      </item>
      <item>
        <title>[PI] Destined-Revival&#39;s Fight Caves</title>
        <dc:creator><![CDATA[@kronixz kronikz]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/kronixz">@kronixz</a> wrote:</p>
          <blockquote>
              <p>[quote=“Code kai, post:11, topic:441958”]<code>src\rs2\model\players\PlayerAssistant.java:594: error: package Server does not e
xist
                                Server.fightCaves.spawnNextWave((Client)PlayerHa
ndler.players[c.playerId]);
                                      ^
src\rs2\model\npcs\NPCHandler.java:359: error: package Server does not exist
                                                Server.fightCaves.spawnNextWave(
c2);
                                                      ^
Note: src\rs2\world\map\I.java uses unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details.
2 errors
Press any key to continue . . .</code></p>
<p>What is this error?[/quote]<br>
You have to add the imports.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-destined-revivals-fight-caves/441958/12">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-destined-revivals-fight-caves/441958/12</link>
        <pubDate>Fri, 15 Jun 2012 15:24:33 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-441958-12</guid>
        <source url="https://forum.moparisthebest.com/t/pi-destined-revivals-fight-caves/441958.rss">[PI] Destined-Revival&#39;s Fight Caves</source>
      </item>
      <item>
        <title>[PI] Destined-Revival&#39;s Fight Caves</title>
        <dc:creator><![CDATA[@Code_kai Code kai]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/code_kai">@Code_kai</a> wrote:</p>
          <blockquote>
              <p><code>src\rs2\model\players\PlayerAssistant.java:594: error: package Server does not e
xist
                                Server.fightCaves.spawnNextWave((Client)PlayerHa
ndler.players[c.playerId]);
                                      ^
src\rs2\model\npcs\NPCHandler.java:359: error: package Server does not exist
                                                Server.fightCaves.spawnNextWave(
c2);
                                                      ^
Note: src\rs2\world\map\I.java uses unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details.
2 errors
Press any key to continue . . .</code></p>
<p>What is this error?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-destined-revivals-fight-caves/441958/11">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-destined-revivals-fight-caves/441958/11</link>
        <pubDate>Fri, 15 Jun 2012 01:26:12 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-441958-11</guid>
        <source url="https://forum.moparisthebest.com/t/pi-destined-revivals-fight-caves/441958.rss">[PI] Destined-Revival&#39;s Fight Caves</source>
      </item>
      <item>
        <title>[PI] Destined-Revival&#39;s Fight Caves</title>
        <dc:creator><![CDATA[@revanet revanet]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/revanet">@revanet</a> wrote:</p>
          <blockquote>
              <p>Nice job.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-destined-revivals-fight-caves/441958/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-destined-revivals-fight-caves/441958/10</link>
        <pubDate>Mon, 21 May 2012 04:29:24 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-441958-10</guid>
        <source url="https://forum.moparisthebest.com/t/pi-destined-revivals-fight-caves/441958.rss">[PI] Destined-Revival&#39;s Fight Caves</source>
      </item>
      <item>
        <title>[PI] Destined-Revival&#39;s Fight Caves</title>
        <dc:creator><![CDATA[@lmfao_beat lmfao beat]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/lmfao_beat">@lmfao_beat</a> wrote:</p>
          <blockquote>
              <p>[quote=“itai, post:8, topic:441958”][quote author=lmfao beat link=topic=544620.msg3993990#msg3993990 date=1337016730]<br>
hi guys,<br>
i got few errors what said</p>
<p>errors are in FightCaves.java ; NPCHandler.java;.<br>
error: cannot find symbol<br>
-&gt;    if(c.tzKekTimer == 0) {       (FightCaves.java)<br>
^<br>
-&gt;   if (isFightCaveNpc(i) &amp;&amp; npcs[i].npctype != FightCaves.TZ_KEK)           (NPCHandler.java)<br>
^<br>
-&gt;      if(PlayerHandler.players[p] != null) {           (NPCHandler.java)</p>
<p>and others are similar like above<br>
i got like 26 errors total and fixed 15 by my self and i’m stuck now<br>
so i hope you guys can help me.</p>
<p>[/quote]<br>
You didn’t declare the variables.[/quote]<br>
thanks for support<br>
but i don’t know how to do that.<br>
if some one could explaine me how to do that.<br>
because i’m new to RSPS stuff and i’m learning.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-destined-revivals-fight-caves/441958/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-destined-revivals-fight-caves/441958/9</link>
        <pubDate>Sun, 20 May 2012 17:53:14 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-441958-9</guid>
        <source url="https://forum.moparisthebest.com/t/pi-destined-revivals-fight-caves/441958.rss">[PI] Destined-Revival&#39;s Fight Caves</source>
      </item>
      <item>
        <title>[PI] Destined-Revival&#39;s Fight Caves</title>
        <dc:creator><![CDATA[@itai itai]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/itai">@itai</a> wrote:</p>
          <blockquote>
              <p>[quote=“lmfao beat, post:5, topic:441958”]hi guys,<br>
i got few errors what said</p>
<p>errors are in FightCaves.java ; NPCHandler.java;.<br>
error: cannot find symbol<br>
-&gt;    if(c.tzKekTimer == 0) {       (FightCaves.java)<br>
^<br>
-&gt;   if (isFightCaveNpc(i) &amp;&amp; npcs[i].npctype != FightCaves.TZ_KEK)           (NPCHandler.java)<br>
^<br>
-&gt;      if(PlayerHandler.players[p] != null) {           (NPCHandler.java)</p>
<p>and others are similar like above<br>
i got like 26 errors total and fixed 15 by my self and i’m stuck now<br>
so i hope you guys can help me.<br>
[/quote]<br>
You didn’t declare the variables.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-destined-revivals-fight-caves/441958/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-destined-revivals-fight-caves/441958/8</link>
        <pubDate>Sat, 19 May 2012 04:25:15 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-441958-8</guid>
        <source url="https://forum.moparisthebest.com/t/pi-destined-revivals-fight-caves/441958.rss">[PI] Destined-Revival&#39;s Fight Caves</source>
      </item>
      <item>
        <title>[PI] Destined-Revival&#39;s Fight Caves</title>
        <dc:creator><![CDATA[@lurtz1230 lurtz1230]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/lurtz1230">@lurtz1230</a> wrote:</p>
          <blockquote>
              <p>Looks ok, try not to center the code tho, makes it hard to read.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-destined-revivals-fight-caves/441958/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-destined-revivals-fight-caves/441958/7</link>
        <pubDate>Tue, 15 May 2012 17:00:32 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-441958-7</guid>
        <source url="https://forum.moparisthebest.com/t/pi-destined-revivals-fight-caves/441958.rss">[PI] Destined-Revival&#39;s Fight Caves</source>
      </item>
      <item>
        <title>[PI] Destined-Revival&#39;s Fight Caves</title>
        <dc:creator><![CDATA[@demps2k9 demps2k9]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/demps2k9">@demps2k9</a> wrote:</p>
          <blockquote>
              <p>Rather nice. Good job.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-destined-revivals-fight-caves/441958/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-destined-revivals-fight-caves/441958/6</link>
        <pubDate>Mon, 14 May 2012 19:15:13 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-441958-6</guid>
        <source url="https://forum.moparisthebest.com/t/pi-destined-revivals-fight-caves/441958.rss">[PI] Destined-Revival&#39;s Fight Caves</source>
      </item>
      <item>
        <title>[PI] Destined-Revival&#39;s Fight Caves</title>
        <dc:creator><![CDATA[@lmfao_beat lmfao beat]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/lmfao_beat">@lmfao_beat</a> wrote:</p>
          <blockquote>
              <p>hi guys,<br>
i got few errors what said</p>
<p>errors are in FightCaves.java ; NPCHandler.java;.<br>
error: cannot find symbol<br>
-&gt;    if(c.tzKekTimer == 0) {       (FightCaves.java)<br>
^<br>
-&gt;   if (isFightCaveNpc(i) &amp;&amp; npcs[i].npctype != FightCaves.TZ_KEK)           (NPCHandler.java)<br>
^<br>
-&gt;      if(PlayerHandler.players[p] != null) {           (NPCHandler.java)</p>
<p>and others are similar like above<br>
i got like 26 errors total and fixed 15 by my self and i’m stuck now<br>
so i hope you guys can help me.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-destined-revivals-fight-caves/441958/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-destined-revivals-fight-caves/441958/5</link>
        <pubDate>Mon, 14 May 2012 17:32:10 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-441958-5</guid>
        <source url="https://forum.moparisthebest.com/t/pi-destined-revivals-fight-caves/441958.rss">[PI] Destined-Revival&#39;s Fight Caves</source>
      </item>
      <item>
        <title>[PI] Destined-Revival&#39;s Fight Caves</title>
        <dc:creator><![CDATA[@Loveandpower Loveandpower]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/loveandpower">@Loveandpower</a> wrote:</p>
          <blockquote>
              <p>very clean, very impressive.  Probably the  second b est I’ve  seen. rep worthy enjoy</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-destined-revivals-fight-caves/441958/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-destined-revivals-fight-caves/441958/4</link>
        <pubDate>Sat, 12 May 2012 05:26:33 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-441958-4</guid>
        <source url="https://forum.moparisthebest.com/t/pi-destined-revivals-fight-caves/441958.rss">[PI] Destined-Revival&#39;s Fight Caves</source>
      </item>
      <item>
        <title>[PI] Destined-Revival&#39;s Fight Caves</title>
        <dc:creator><![CDATA[@itai itai]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/itai">@itai</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="2" data-topic="441958">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/riipiinftw/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> RiiPiiNFtW:</div>
<blockquote>
<p>This is a snippet, try to explain your code more and it will be considered a tutorial and not moved.</p>
</blockquote>
</aside>
<p>Explained it a bit more, hopefully between that and the notes inside the code it is enough <img src="https://forum.moparisthebest.com/images/emoji/twitter/wink.png?v=5" title=":wink:" class="emoji" alt=":wink:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-destined-revivals-fight-caves/441958/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-destined-revivals-fight-caves/441958/3</link>
        <pubDate>Fri, 11 May 2012 21:58:23 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-441958-3</guid>
        <source url="https://forum.moparisthebest.com/t/pi-destined-revivals-fight-caves/441958.rss">[PI] Destined-Revival&#39;s Fight Caves</source>
      </item>
      <item>
        <title>[PI] Destined-Revival&#39;s Fight Caves</title>
        <dc:creator><![CDATA[@RiiPiiNFtW RiiPiiNFtW]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/riipiinftw">@RiiPiiNFtW</a> wrote:</p>
          <blockquote>
              <p>This is a snippet, try to explain your code more and it will be considered a tutorial and not moved.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-destined-revivals-fight-caves/441958/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-destined-revivals-fight-caves/441958/2</link>
        <pubDate>Fri, 11 May 2012 21:47:52 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-441958-2</guid>
        <source url="https://forum.moparisthebest.com/t/pi-destined-revivals-fight-caves/441958.rss">[PI] Destined-Revival&#39;s Fight Caves</source>
      </item>
      <item>
        <title>[PI] Destined-Revival&#39;s Fight Caves</title>
        <dc:creator><![CDATA[@itai itai]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/itai">@itai</a> wrote:</p>
          <blockquote>
              <p>[CENTER]<span class="bbcode-u"><span class="bbcode-b">Destined-Revival’s Fight Caves - </span></span></p>
<p><span class="bbcode-i">What does this have:</span></p>
<p>[ul][<em>]Cleaner code than original project insanity FightCaves.<br>
[</em>]Full 63 waves.<br>
[*]Two different npc affects: tz-kih drains prayer at the rate of damage + 1 = drain, and the tz-kek splits into 2 smaller version when killed.[/ul]</p>
<p><span class="bbcode-b"><span class="bbcode-i">First:</span></span><br>
Replace your FightCaves class with mine:</p>
<p>[CODE]package server.rs2.content.minigames;</p>
<p>import server.Server;<br>
import server.rs2.entity.npcs.NPCHandler;<br>
import server.rs2.entity.players.Client;</p>
<p>/**</p>
<ul>
<li>
<p><span class="mention">@author</span> Kurt Cobain<br>
*/<br>
public class FightCaves {</p>
<p>public static final int TZ_KIH = 2627, TZ_KEK_SPAWN = 2738, TZ_KEK = 2630, TOK_XIL = 2631, YT_MEJKOT = 2741, KET_ZEK = 2743, TZTOK_JAD = 2745;</p>
<p>/**</p>
<ul>
<li>Holds the data for the 63 waves fight cave.<br>
*/<br>
private final int[][] WAVES = {{TZ_KIH},<br>
{TZ_KIH,TZ_KIH},<br>
{TZ_KEK},<br>
{TZ_KEK,TZ_KIH},<br>
{TZ_KEK,TZ_KIH,TZ_KIH},<br>
{TZ_KEK,TZ_KEK},<br>
{TOK_XIL},<br>
{TOK_XIL,TZ_KIH},<br>
{TOK_XIL,TZ_KIH,TZ_KIH},<br>
{TOK_XIL,TZ_KEK},<br>
{TOK_XIL,TZ_KEK,TZ_KIH},<br>
{TOK_XIL,TZ_KEK,TZ_KIH,TZ_KIH},<br>
{TOK_XIL,TZ_KEK,TZ_KEK},<br>
{TOK_XIL,TOK_XIL},<br>
{YT_MEJKOT},<br>
{YT_MEJKOT,TZ_KIH},<br>
{YT_MEJKOT,TZ_KIH,TZ_KIH},<br>
{YT_MEJKOT,TZ_KEK},<br>
{YT_MEJKOT,TZ_KEK,TZ_KIH},<br>
{YT_MEJKOT,TZ_KEK,TZ_KIH,TZ_KIH},<br>
{YT_MEJKOT,TZ_KEK,TZ_KEK},<br>
{YT_MEJKOT,TOK_XIL},<br>
{YT_MEJKOT,TOK_XIL,TZ_KIH},<br>
{YT_MEJKOT,TOK_XIL,TZ_KIH,TZ_KIH},<br>
{YT_MEJKOT,TOK_XIL,TZ_KEK},<br>
{YT_MEJKOT,TOK_XIL,TZ_KEK,TZ_KIH},<br>
{YT_MEJKOT,TOK_XIL,TZ_KEK,TZ_KIH,TZ_KIH},<br>
{YT_MEJKOT,TOK_XIL,TZ_KEK,TZ_KEK},<br>
{YT_MEJKOT,TOK_XIL,TOK_XIL},<br>
{YT_MEJKOT,YT_MEJKOT},<br>
{KET_ZEK},<br>
{KET_ZEK,TZ_KIH},<br>
{KET_ZEK,TZ_KIH,TZ_KIH},<br>
{KET_ZEK,TZ_KEK},<br>
{KET_ZEK,TZ_KEK,TZ_KIH},<br>
{KET_ZEK,TZ_KEK,TZ_KIH,TZ_KIH},<br>
{KET_ZEK,TZ_KEK,TZ_KEK},<br>
{KET_ZEK,TOK_XIL},<br>
{KET_ZEK,TOK_XIL,TZ_KIH},<br>
{KET_ZEK,TOK_XIL,TZ_KIH,TZ_KIH},<br>
{KET_ZEK,TOK_XIL,TZ_KEK},<br>
{KET_ZEK,TOK_XIL,TZ_KEK,TZ_KIH},<br>
{KET_ZEK,TOK_XIL,TZ_KEK,TZ_KIH,TZ_KIH},<br>
{KET_ZEK,TOK_XIL,TZ_KEK,TZ_KEK},<br>
{KET_ZEK,TOK_XIL,TOK_XIL},<br>
{KET_ZEK,YT_MEJKOT},<br>
{KET_ZEK,YT_MEJKOT,TZ_KIH},<br>
{KET_ZEK,YT_MEJKOT,TZ_KIH,TZ_KIH},<br>
{KET_ZEK,YT_MEJKOT,TZ_KEK},<br>
{KET_ZEK,YT_MEJKOT,TZ_KEK,TZ_KIH},<br>
{KET_ZEK,YT_MEJKOT,TZ_KEK,TZ_KIH,TZ_KIH},<br>
{KET_ZEK,YT_MEJKOT,TZ_KEK,TZ_KEK},<br>
{KET_ZEK,YT_MEJKOT,TOK_XIL},<br>
{KET_ZEK,YT_MEJKOT,TOK_XIL,TZ_KIH},<br>
{KET_ZEK,YT_MEJKOT,TOK_XIL,TZ_KIH,TZ_KIH},<br>
{KET_ZEK,YT_MEJKOT,TOK_XIL,TZ_KEK},<br>
{KET_ZEK,YT_MEJKOT,TOK_XIL,TZ_KEK,TZ_KIH},<br>
{KET_ZEK,YT_MEJKOT,TOK_XIL,TZ_KEK,TZ_KIH,TZ_KIH},<br>
{KET_ZEK,YT_MEJKOT,TOK_XIL,TZ_KEK,TZ_KEK},<br>
{KET_ZEK,YT_MEJKOT,TOK_XIL,TOK_XIL},<br>
{KET_ZEK,YT_MEJKOT,YT_MEJKOT},<br>
{KET_ZEK,KET_ZEK},<br>
{TZTOK_JAD}};</li>
</ul>
<p>private final static int[][] COORDINATES = {{2403, 5094}, {2390, 5096}, {2392, 5077}, {2408, 5080}, {2413, 5108}, {2381, 5106}, {2379, 5072}, {2420, 5082}};</p>
<p>/**</p>
<ul>
<li>Handles spawning the next fightcave wave.</li>
<li>
<a class="mention" href="/u/param">@param</a> c</li>
<li>
<pre><code> The player.
</code></pre>
</li>
</ul>
<p>*/<br>
public void spawnNextWave(Client c) {<br>
if (c != null) {<br>
if (c.waveId &gt;= WAVES.length) {<br>
c.waveId = 0;<br>
return;				<br>
}<br>
if (c.waveId &lt; 0){<br>
return;<br>
}<br>
int npcAmount = WAVES[c.waveId].length;<br>
for (int j = 0; j &lt; npcAmount; j++) {<br>
int npc = WAVES[c.waveId][j];<br>
int X = COORDINATES[j][0];<br>
int Y = COORDINATES[j][1];<br>
int H = c.heightLevel;<br>
int hp = getHp(npc);<br>
int max = getMax(npc);<br>
int atk = getAtk(npc);<br>
int def = getDef(npc);<br>
Server.npcHandler.spawnNpc(c, npc, X, Y, H, 0, hp, max, atk, def, false, true);				<br>
}<br>
c.tzhaarToKill = npcAmount;<br>
c.tzhaarKilled = 0;<br>
}<br>
}</p>
<p>/**</p>
<ul>
<li>Handles the correct tz-kih effect; prayer</li>
<li>is drained by the formula: drain = damage + 1</li>
<li>
<a class="mention" href="/u/param">@param</a> c</li>
<li>
<pre><code> The player
</code></pre>
</li>
<li>
<a class="mention" href="/u/param">@param</a> i</li>
<li>
<pre><code> The npcId
</code></pre>
</li>
<li>
<a class="mention" href="/u/param">@param</a> damage</li>
<li>
<pre><code> What the npchit
</code></pre>
</li>
</ul>
<p>*/<br>
public static void tzKihEffect(Client c,int i, int damage) {<br>
if(NPCHandler.npcs[i].npcType == TZ_KIH) {<br>
if(c != null) {<br>
if(c.playerLevel[5] &gt; 0) {<br>
c.playerLevel[5] -= 1 + damage;<br>
c.getPA().refreshSkill(5);<br>
}<br>
}	<br>
}<br>
}</p>
<p>/**</p>
<ul>
<li>Handles the correct tz-kek effect; when you kill</li>
<li>tz-kek it splits into 2 smaller version of itself.</li>
<li>
<a class="mention" href="/u/param">@param</a> c</li>
<li>
<pre><code> The player.
</code></pre>
</li>
<li>
<a class="mention" href="/u/param">@param</a> i</li>
<li>
<pre><code> The npcId.
</code></pre>
</li>
</ul>
<p>*/<br>
public static void tzKekEffect(Client c, int i) {<br>
if(NPCHandler.npcs[i].npcType == TZ_KEK) {</p>
<pre><code> 	int x = NPCHandler.npcs[i].absX + 2;
 	int y = NPCHandler.npcs[i].absY + 2;
 	int x1 = NPCHandler.npcs[i].absX - 2;
 	int y1 = NPCHandler.npcs[i].absY - 2;

 	int hp = getHp(TZ_KEK_SPAWN);
 	int max = getMax(TZ_KEK_SPAWN);
 	int atk = getAtk(TZ_KEK_SPAWN);
 	int def = getDef(TZ_KEK_SPAWN);
 	
 	if(c != null) {
 		if(c.tzKekTimer == 0) {
 			if(NPCHandler.npcs[i].isDead) {
 				Server.npcHandler.spawnNpc(c, TZ_KEK_SPAWN, x, y, c.heightLevel, 0, hp, max, atk, def, true, true);
 				Server.npcHandler.spawnNpc(c, TZ_KEK_SPAWN, x1, y1, c.heightLevel, 0, hp, max, atk, def, true, true);
 			}
 		}
 	}
 }
</code></pre>
<p>}</p>
<p>public static int getHp(int npc) {<br>
switch (npc) {<br>
case TZ_KIH:<br>
case TZ_KEK_SPAWN:<br>
return 10;<br>
case TZ_KEK:<br>
return 20;<br>
case TOK_XIL:<br>
return 40;<br>
case YT_MEJKOT:<br>
return 80;<br>
case KET_ZEK:<br>
return 150;<br>
case TZTOK_JAD:<br>
return 250;		<br>
}<br>
return 100;<br>
}</p>
<p>public static int getMax(int npc) {<br>
switch (npc) {<br>
case TZ_KIH:<br>
case TZ_KEK_SPAWN:<br>
return 4;<br>
case TZ_KEK:<br>
return 7;<br>
case TOK_XIL:<br>
return 13;<br>
case YT_MEJKOT:<br>
return 28;<br>
case KET_ZEK:<br>
return 54;<br>
case TZTOK_JAD:<br>
return 97;		<br>
}<br>
return 5;<br>
}</p>
<p>public static int getAtk(int npc) {<br>
switch (npc) {<br>
case TZ_KIH:<br>
case TZ_KEK_SPAWN:<br>
return 30;<br>
case TZ_KEK:<br>
return 50;<br>
case TOK_XIL:<br>
return 100;<br>
case YT_MEJKOT:<br>
return 150;<br>
case KET_ZEK:<br>
return 450;<br>
case TZTOK_JAD:<br>
return 650;		<br>
}<br>
return 100;<br>
}</p>
<p>public static int getDef(int npc) {<br>
switch (npc) {<br>
case TZ_KIH:<br>
case TZ_KEK_SPAWN:<br>
return 30;<br>
case TZ_KEK:<br>
return 50;<br>
case TOK_XIL:<br>
return 100;<br>
case YT_MEJKOT:<br>
return 150;<br>
case KET_ZEK:<br>
return 300;<br>
case TZTOK_JAD:<br>
return 500;		<br>
}<br>
return 100;<br>
}</p>
</li>
</ul>
<p>}[/CODE]<br>
<span class="bbcode-b">Remember to change packaging and imports.</span></p>
<p><span class="bbcode-b"><span class="bbcode-i">Second:</span></span><br>
Then go into PlayerAssistant class and replace/add these methods:</p>
<p>[CODE]	public void resetTzhaar() {<br>
c.waveId = -1;<br>
c.tzhaarToKill = -1;<br>
c.tzhaarKilled = -1;<br>
movePlayer(2438, 5168, 0);<br>
}</p>
<pre><code>public void enterCaves() {
	c.getPA().movePlayer(2413,5117, c.playerId * 4);
	c.waveId = 0;
	c.tzhaarToKill = -1;
	c.tzhaarKilled = -1;
	EventManager.getSingleton().addEvent(new Event() {
		public void execute(EventContainer e) {
			Server.fightCaves.spawnNextWave((Client)PlayerHandler.players[c.playerId]);
			e.stop();
		}
	}, 10000);
}[/CODE]
</code></pre>
<p>That adds the methods for resetting the variables if you die or finish the fight caves mini-game, and for starting the mini-game when you enter the cave.<br>
<span class="bbcode-b">You will have to do a few things related with the giveLife method if you haven’t already.</span></p>
<p><span class="bbcode-b"><span class="bbcode-i">Third: </span></span><br>
Add/replace these in your Player class</p>
<pre><code class="lang-auto"></code></pre>
<p>These are the variables that must be used in the mini-game: tzhaarToKill is how many you must kill for the next wave, tzhaarKilled is how many you have killed, tzKekSpawn is how many of the spawns you have killed.</p>
<p><span class="bbcode-b"><span class="bbcode-i">Fourth: </span></span><br>
Go into your NPCHandler class and add/replace these methods:</p>
<p>[CODE]	/**<br>
* Checks if a tzhaar npc has been killed, if so then it checks if<br>
* it needs to do the tz-kek effect. If tzKek spawn has been killed<br>
* twice or didn’t need to be killed it calls killedTzhaar.<br>
* <a class="mention" href="/u/param">@param</a> i<br>
* 		The npc.<br>
*/<br>
private void tzhaarDeathHandler(int i) {<br>
if (isFightCaveNpc(i) &amp;&amp; npcs[i].npcType != FightCaves.TZ_KEK)<br>
killedTzhaar(i);<br>
if(npcs[i].npcType == FightCaves.TZ_KEK_SPAWN) {<br>
int p = npcs[i].killerId;<br>
if (PlayerHandler.players[p] != null) {<br>
Client c = (Client) PlayerHandler.players[p];<br>
c.tzKekSpawn += 1;<br>
if(c.tzKekSpawn == 2) {<br>
killedTzhaar(i);<br>
c.tzKekSpawn = 0;<br>
}<br>
}<br>
}<br>
if(npcs[i].npcType == FightCaves.TZ_KEK) {<br>
int p = npcs[i].killerId;<br>
if (PlayerHandler.players[p] != null) {<br>
Client c = (Client) PlayerHandler.players[p];<br>
FightCaves.tzKekEffect(c, i);<br>
}<br>
}<br>
}</p>
<pre><code>/**
 * Raises the count of tzhaarKilled, if tzhaarKilled is equal to the amount
 * needed to kill to move onto the next wave it raises wave id then starts next
 * wave.
 * @param i
 * 		The npc.
 */
private void killedTzhaar(int i) {
	final Client c2 = (Client) PlayerHandler.players[npcs[i].spawnedBy];
		c2.tzhaarKilled++;
	if (c2.tzhaarKilled == c2.tzhaarToKill) {
		c2.waveId++;
		EventManager.getSingleton().addEvent(new Event() {
			public void execute(EventContainer c) {
				if (c2 != null) {
					Server.fightCaves.spawnNextWave(c2);
				}
				c.stop();
			}
		}, 7500);

	}
}

/**
 * Handles the death of tztok-jad by ending the game and rewarding the player
 * with a fire cape.
 * @param i
 * 		The npc.
 */
public void handleJadDeath(int i) {
	Client c = (Client) PlayerHandler.players[npcs[i].spawnedBy];
	c.getItems().addItem(6570, 1);
	c.sendMessage("Congratulations on completing the fight caves minigame!");
	c.getPA().resetTzhaar();
	c.waveId = 300;
}

/**
 * Checks if something is a fight cave npc.
 * @param i
 * 		The npc.
 * @return
 * 		Whether or not it is a fight caves npc.
 */
public boolean isFightCaveNpc(int i) {
	switch (npcs[i].npcType) {
		case FightCaves.TZ_KIH:
		case FightCaves.TZ_KEK:
		case FightCaves.TOK_XIL:
		case FightCaves.YT_MEJKOT:
		case FightCaves.KET_ZEK: 
		case FightCaves.TZTOK_JAD:
		return true;		
	}
	return false;
}[/CODE]
</code></pre>
<p>That adds the methods and booleans which will be called when needed: such as when checking if a tzhaar npc has died it will use the isFightCaveNpc boolean, and then it will either continue with the rest of the code or stop.<br>
Then find the loadSpell method and in it add/replace these</p>
<p>[CODE]		case FightCaves.TZTOK_JAD:<br>
int r3 = 0;<br>
if (goodDistance(npcs[i].absX, npcs[i].absY,<br>
PlayerHandler.players[npcs[i].spawnedBy].absX,<br>
PlayerHandler.players[npcs[i].spawnedBy].absY, 1))<br>
r3 = Misc.random(2);<br>
else<br>
r3 = Misc.random(1);<br>
if (r3 == 0) {<br>
npcs[i].attackType = 2;<br>
npcs[i].endGfx = 157;<br>
npcs[i].projectileId = 448;<br>
} else if (r3 == 1) {<br>
npcs[i].attackType = 1;<br>
npcs[i].endGfx = 451;<br>
npcs[i].projectileId = -1;<br>
} else if (r3 == 2) {<br>
npcs[i].attackType = 0;<br>
npcs[i].projectileId = -1;<br>
}<br>
break;</p>
<pre><code>	case FightCaves.KET_ZEK:
		npcs[i].attackType = 2;
		npcs[i].projectileId = 445;
		npcs[i].endGfx = 446;
	break;

	case FightCaves.TOK_XIL:
		npcs[i].attackType = 1;
		npcs[i].projectileId = 443;
	break;[/CODE]
</code></pre>
<p>That adds the spells for the different tzhaar npcs.<br>
Then find your applyDamage method and add this:</p>
<pre><code class="lang-auto"></code></pre>
<p>below</p>
<pre><code class="lang-auto"></code></pre>
<p>That calls the tzKihEffect method right when damage is applied.<br>
Then find your process method and add this:</p>
<pre><code class="lang-auto"></code></pre>
<p>below</p>
<pre><code class="lang-auto"></code></pre>
<p>That calls the tzhaarDeathHandler method after the npc has died and finished the death emote.<br>
<span class="bbcode-b">Make sure to import the FightCaves class.</span></p>
<p><span class="bbcode-b"><span class="bbcode-i">Credits: </span></span><br>
Me<br>
Sanity</p>
<p>If I missed anything tell me.<br>
[/CENTER]</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-destined-revivals-fight-caves/441958/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-destined-revivals-fight-caves/441958/1</link>
        <pubDate>Fri, 11 May 2012 21:31:55 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-441958-1</guid>
        <source url="https://forum.moparisthebest.com/t/pi-destined-revivals-fight-caves/441958.rss">[PI] Destined-Revival&#39;s Fight Caves</source>
      </item>
  </channel>
</rss>
