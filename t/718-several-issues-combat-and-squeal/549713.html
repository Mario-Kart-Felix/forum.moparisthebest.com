<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/718-several-issues-combat-and-squeal/549713 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:07:15 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>718 Several issues (Combat and Squeal) - Runescape - moparisthebest.com</title>
    <meta name="description" content="I&amp;#39;m having several problems. First of all my Magic only gives 1-10 xp as I mentioned before. 

Second of all my Squeal of Fortune is an issue. It puts the wrong items you win in your bank. For example if you win Bandos C&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="549713.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;718 Several issues (Combat and Squeal)&#39;" href="549713.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/718-several-issues-combat-and-squeal/549713" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/718-several-issues-combat-and-squeal/549713" />
<meta property="og:title" content="718 Several issues (Combat and Squeal)" />
<meta name="twitter:title" content="718 Several issues (Combat and Squeal)" />
<meta property="og:description" content="I’m having several problems.  First of all my Magic only gives 1-10 xp as I mentioned before.  Second of all my Squeal of Fortune is an issue. It puts the wrong items you win in your bank.  For example if you win Bandos Chestplate, it will put a Iron ore sometimes.  Squeal.java:  [code]package com.rs.game.player.content;  import java.util.concurrent.TimeUnit;  import com.rs.Settings;  import com.rs.cores.CoresManager;  import com.rs.game.item.Item;  import com.rs.game.item.ItemsContainer;  impor..." />
<meta name="twitter:description" content="I’m having several problems.  First of all my Magic only gives 1-10 xp as I mentioned before.  Second of all my Squeal of Fortune is an issue. It puts the wrong items you win in your bank.  For example if you win Bandos Chestplate, it will put a Iron ore sometimes.  Squeal.java:  [code]package com.rs.game.player.content;  import java.util.concurrent.TimeUnit;  import com.rs.Settings;  import com.rs.cores.CoresManager;  import com.rs.game.item.Item;  import com.rs.game.item.ItemsContainer;  impor..." />
<meta property="article:published_time" content="2015-02-05T20:20:03+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="549713.html">718 Several issues (Combat and Squeal)</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/ic3cr34m.html'><span itemprop='name'>ic3cr34m</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-02-05T20:20:03Z'>
            <time itemprop='dateModified' datetime='2016-08-04T14:19:59Z' class='post-time'>
              August 4, 2016,  2:19pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I’m having several problems.<br>
First of all my Magic only gives 1-10 xp as I mentioned before.</p>
<p>Second of all my Squeal of Fortune is an issue. It puts the wrong items you win in your bank.<br>
For example if you win Bandos Chestplate, it will put a Iron ore sometimes.</p>
<p>Squeal.java:</p>
<p>[code]package com.rs.game.player.content;</p>
<p>import java.util.concurrent.TimeUnit;</p>
<p>import com.rs.Settings;<br>
import com.rs.cores.CoresManager;<br>
import com.rs.game.item.Item;<br>
import com.rs.game.item.ItemsContainer;<br>
import com.rs.game.player.Player;<br>
import com.rs.utils.Logger;<br>
import com.rs.utils.Utils;</p>
<p>public class Squeal {</p>
<pre><code>public static void openWindow(Player player) {
	if (player.getRights() &gt;= 2) {
		if (player.getAttackedByDelay() + 10000 &gt; Utils.currentTimeMillis()) {
			player.getPackets()
					.sendGameMessage(
							"You cannot open Squeal of Fortune while in combat.");
			return;
			}
		if (player.getInterfaceManager().containsScreenInter()) {
				player.getPackets()
				.sendGameMessage(
						"Please finish what you're doing before opening Squeal of Fortune.");
				return;
			}
	player.isSpining = false;
	player.stopAll();
	
	player.getPackets().sendRunScript(5879);
	player.getPackets().sendConfigByFile(11155, 3);
	player.getPackets().sendWindowsPane(1253, 0);
	sendItems(player);
	refresh(player);
} else {
	player.sm("Not available.");
}
}
public static void sendTicket(Player player) {
	  player.sm("Congratulations! You have earned a spin on the Squeal of Fortune!");
	   player.squealSpins += 1;
	   refresh(player);
	   //TODO find config for this.
	 }
 public static void sendRandomTicket(Player player, int chance) {
	  if(Utils.random(chance) == 1) {
	   if(player.squealSpins &gt; 10) {
	    player.sm("You must have no more than 10 spins to be eligible to recieve random activity spins.");
	    return;
	   }
	  player.sm("Congratulations! You've earned a ticket for a free spin on the Squeal of Fortune!");
	  if(!player.getInventory().hasFreeSlots()) {
	   player.squealSpins += 1;
	   refresh(player);
	   player.sm("Your inventory was full, so your spin ticket was automatically redeemed into spins.", true);
	  } else
	  player.getInventory().addItem(24154, 1);
	 }
	 }
public static void sendButton(Player player) {
	if (player.getRights() &gt;= 2) {
	if (player.squealSpins &gt;= 1) {
	player.getInterfaceManager().sendOverlay(1252, true);
	refresh(player);
	} else {
		player.getInterfaceManager().closeOverlay(true);
		refresh(player);
	}
}
}
public static void closeButton(Player player) {
	player.getInterfaceManager().closeOverlay(true);
	player.sm("You can access the Squeal of Fortune from the side panel, and you can show the button again by logging out and back in.");
}
public static void close(Player player) {
	player.getPackets().sendWindowsPane(
			player.getInterfaceManager().hasRezizableScreen() ? 746
					: 548, 0);
	Squeal.sendButton(player);
}
public static void decreaseSpins(Player player) {
	player.squealSpins -= 1;
	refresh(player);
}
public static void increaseSpins(Player player, int i) {
	player.squealSpins += i;
	refresh(player);
}
public static void refresh(Player player) {
	player.getPackets().sendConfigByFile(11026, player.squealSpins + 1);
	}
public static void sendDailySpins(Player player) {
	if (player.squealSpins &gt;= 2) {
	//int hours   = (int) ((player.getSqueal() / (1000*60*60)) % 24);
		if (player.getSqueal() &lt; Utils.currentTimeMillis()) {
	player.setSqueal(Utils.currentTimeMillis()
			+ (24 * 60 * 60 * 1000));
	player.squealSpins += 2;
	refresh(player);
	player.sm("You have received your daily spins for Squeal of Fortune!", true);
		/*} else {
			player.sm("You will receive your daily spins for Squeal of Fortune in "+hours * 2+" hours.", true);TODO

		}*/
	}
	}
}

public static void buySpins(final Player player) {
		close(player);
		sendDelayedLogout(player);
}
public static void spin(Player player) {
	if(player.squealSpins &lt; 1) {
		close(player);
		player.getPackets().sendGameMessage("You do not have enough spins to continue.");
		return;
	} else {	
		if(player.isSpining == true)
			return;
		player.isSpining = true;
		decreaseSpins(player);
		int reward = Utils.random(1, 1000);
		int slot = 0;
		int slotchange = Utils.getRandom(6);
		if (reward &gt;= 1 &amp;&amp; reward &lt;= 920) {
			if (slotchange == 1) {
				slot = 1;
			} else if (slotchange == 2) {
				slot = 3;
			} else if (slotchange == 3) {
				slot = 5;
			} else if (slotchange == 4) {
				slot = 7;
			} else if (slotchange == 5) {
				slot = 10;
			} else if (slotchange == 6) {
				slot = 12;
			}
		} else if (reward &gt;= 921 &amp;&amp; reward &lt;= 987) {
			if (slotchange &gt;= 5) {
				slot = 6;
			} else if (slotchange &lt;= 2) {
				slot = 9;
			} else if (slotchange &gt;= 3 &amp;&amp; slotchange &lt; 5) {
				slot = 11;
			}
		} else if (reward &gt;= 988 &amp;&amp; reward &lt;= 997) {
			if (slotchange &gt;= 5) {
				slot = 0;
			} else if (slotchange &lt;= 2) {
				slot = 4;
			} else if (slotchange &gt;= 3 &amp;&amp; slotchange &lt; 5) {
				slot = 8;
			}
		} else if (reward &gt;= 998) {
			slot = 2;
		}
		
		//Logger.log("Squeal", player.getDisplayName()+" has used a spin. Spins remaining: "+player.squealSpins);
		player.getPackets().sendConfigByFile(10860, slot); // Squeal Reward
		player.getPackets().sendGlobalConfig(1781, 0);
		player.getPackets().sendGlobalConfig(1781, 0);
		 player.getPackets().sendGlobalConfig(1781, Utils.getRandom(13));
		   player.getPackets().sendConfigByFile(10860, itemWon);
		   player.getPackets().sendGlobalConfig(1790, 1);
		   player.getPackets().sendConfigByFile(10861, itemWon);
		itemWon = slotchange;
	}
	}

	public static void claimItem(Player player) {
		int amount = getBox().getAmount();
		int id = getBox().getId();
		player.isSpining = false;
		if (id == 995) {
			player.getMoneyPouch().addMoney(amount,
					amount, true, true);
			close(player);
		} else {
			player.getBank().addItem(id, amount,
					true);
			close(player);
			player.getPackets().sendGameMessage(
					""+amount+" " + getBox().getName() +(amount == 1 ? " " : "s ")+(amount == 1 ? "has" : "have")+"  been added to your bank.");
		}
	}
	public static void discardItem(Player player) {
		player.sm("You discard your prize.");
		close(player);
	}
	public static void sendDelayedLogout(final Player player) {
		int LOGOUT_ALERT = 1254;
		int LOGGING_OUT = 1255;
		@SuppressWarnings("unused")
		int LOGOUT_REQUEST = 1256;
		if (player.getAttackedByDelay() + 10000 &gt; Utils.currentTimeMillis()) {
			player.getInterfaceManager().sendInterface(LOGOUT_ALERT);
			return;
		}
		player.getInterfaceManager().sendInterface(LOGGING_OUT);
		CoresManager.slowExecutor.schedule(new Runnable() {
			@Override
			public void run() {
				player.getPackets().sendOpenURL(Settings.PAYMENTS_LINK);
				player.forceLogout();
			}
			
		}, 5, TimeUnit.SECONDS);
	}
	public static void sendItems(Player player) {
		items.clear();
		items.add(getRare(1)); // Rare
		items.add(getCommon(1)); // Common
		items.add(getSRare()); // Super-Rare
		items.add(getCommon(2)); // Common
		items.add(getRare(2)); // Rare
		items.add(getCommon(3)); // Common
		items.add(getUnCommon(1)); // UnCommon
		items.add(getCommon(4)); // Common
		items.add(getRare(3)); // Rare
		items.add(getUnCommon(2)); // UnCommon
		items.add(getCommon(5)); // Com
		items.add(getUnCommon(3)); // UnCom
		items.add(getCommon(6)); // Common
		player.getPackets().sendItems(665, false, items);
	}
    public static Item getBox() {
		Item[] box = items.getItems();
                return box[itemWon];
	}
	private static int itemWon;
	static ItemsContainer&lt;Item&gt; items = new ItemsContainer&lt;Item&gt;(13, true);
	
	private static Item[] SUPER_RARE_ITEM = { new Item(995, 200000000), new Item(995, 10000000), new Item(989, 5), new Item(24440, 1), new Item(23716, 1), new Item(23671, 1),
		new Item(23674) 
		};
	 
		private static Item[] RARE_SLOT1 = { new Item(23715), new Item(23679), new Item(23680),
		new Item(23681), new Item(23682), new Item(23683), new Item(23690) 
		},
		RARE_SLOT2 = { new Item(23684), new Item(23685), new Item(23686),
		new Item(23687), new Item(23688), new Item(23689) 
		},
		RARE_SLOT3 = { new Item(23691), new Item(23692), new Item(23693),
		new Item(23694), new Item(23695), new Item(23696),
		new Item(23697), new Item(23698), new Item(23699),
		new Item(23700) };
	 
		private static Item[] UNCOMMON_SLOT1 = { new Item(9181), new Item(9183),
		new Item(857) }, UNCOMMON_SLOT2 = { new Item(1119), new Item(1121),
		new Item(1123), new Item(1127) },
		UNCOMMON_SLOT3 = { new Item(12976), new Item(1133), new Item(23714) 
		};
	 
		private static Item[] COMMON_SLOT1 = { new Item(23713), new Item(9177), new Item(9179),
		new Item(9174) }, COMMON_SLOT2 = { new Item(2, 30),
		new Item(886, 300) }, COMMON_SLOT3 = { new Item(1515, 15),
		new Item(444, 20) }, COMMON_SLOT4 = { new Item(563, 40),
		new Item(843), new Item(1325), new Item(1313), new Item(1361) },
		COMMON_SLOT5 = { new Item(1367), new Item(1297), new Item(1327),
		new Item(1205) }, COMMON_SLOT6 = { new Item(853),
		new Item(1311), new Item(1365), new Item(1353),
		new Item(1295), new Item(1325) };
		public static Item getSRare() {
			return SUPER_RARE_ITEM[(int) (Math.random() * SUPER_RARE_ITEM.length)];
		}

		public static Item getRare(int slot) {
			if (slot == 2) {
			return RARE_SLOT2[(int) (Math.random() * RARE_SLOT2.length)];
		} else if (slot == 3) {
			return RARE_SLOT3[(int) (Math.random() * RARE_SLOT3.length)];
		} else {
			//System.out.println(""
					//+ RARE_SLOT1[(int) (Math.random() * RARE_SLOT1.length)]);
			return RARE_SLOT1[(int) (Math.random() * RARE_SLOT1.length)];
			}
		}

		public static Item getCommon(int slot) {
			if (slot == 2) {
			return COMMON_SLOT1[(int) (Math.random() * COMMON_SLOT1.length)];
		} else if (slot == 3) {
			return COMMON_SLOT2[(int) (Math.random() * COMMON_SLOT2.length)];
		} else if (slot == 4) {
			return COMMON_SLOT3[(int) (Math.random() * COMMON_SLOT3.length)];
		} else if (slot == 5) {
			return COMMON_SLOT4[(int) (Math.random() * COMMON_SLOT4.length)];
		} else if (slot == 6) {
			return COMMON_SLOT5[(int) (Math.random() * COMMON_SLOT5.length)];
		} else {
			return COMMON_SLOT6[(int) (Math.random() * COMMON_SLOT6.length)];
			}
		}

		public static Item getUnCommon(int slot) {
			if (slot == 2) {
			return UNCOMMON_SLOT1[(int) (Math.random() * UNCOMMON_SLOT1.length)];
		} else if (slot == 3) {
			return UNCOMMON_SLOT2[(int) (Math.random() * UNCOMMON_SLOT2.length)];
		} else {
			return UNCOMMON_SLOT3[(int) (Math.random() * UNCOMMON_SLOT3.length)];
			}
		}
</code></pre>
<p>}[/code]</p>
<p>The last problem I have is every weapon says “kick, punch, and block” instead of the proper attacks.<br>
All I ask is someone to help please.</p>
      </div>

      <meta itemprop='headline' content='718 Several issues (Combat and Squeal)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/718-several-issues-combat-and-squeal/549713 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:07:15 GMT -->
</html>
