<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/java-2d-scrolling-world-help/464696 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 22:19:08 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Java 2D scrolling world [Help] - General Programming - moparisthebest.com</title>
    <meta name="description" content="Hello, I am making a side-scroller and I would like to ask for help. The problem is that the program doesn&amp;#39;t think a polygon is within camera sight if the mouse Y is less than the lowest Y point or the mouse X is less th&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="464696.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Java 2D scrolling world [Help]&#39;" href="464696.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/java-2d-scrolling-world-help/464696" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/java-2d-scrolling-world-help/464696" />
<meta property="og:title" content="Java 2D scrolling world [Help]" />
<meta name="twitter:title" content="Java 2D scrolling world [Help]" />
<meta property="og:description" content="Hello, I am making a side-scroller and I would like to ask for help. The problem is that the program doesn’t think a polygon is within camera sight if the mouse Y is less than the lowest Y point or the mouse X is less than the lowest X point of the polygon.  Please examine the code and tell me if you see anything wrong. I think it has to do with the cameraXMin and cameraYMin, because I did set the mode to fullscreen, but I’m not sure why the getWidth()/getHeight() methods wouldn’t work the same ..." />
<meta name="twitter:description" content="Hello, I am making a side-scroller and I would like to ask for help. The problem is that the program doesn’t think a polygon is within camera sight if the mouse Y is less than the lowest Y point or the mouse X is less than the lowest X point of the polygon.  Please examine the code and tell me if you see anything wrong. I think it has to do with the cameraXMin and cameraYMin, because I did set the mode to fullscreen, but I’m not sure why the getWidth()/getHeight() methods wouldn’t work the same ..." />
<meta property="article:published_time" content="2012-10-20T14:00:02+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="464696.html">Java 2D scrolling world [Help]</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/general-programming.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>General Programming</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/eyeownyew.html'><span itemprop='name'>eyeownyew</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-10-20T14:00:02Z'>
            <time itemprop='dateModified' datetime='2016-08-04T00:46:08Z' class='post-time'>
              August 4, 2016, 12:46am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hello, I am making a side-scroller and I would like to ask for help. The problem is that the program doesn’t think a polygon is within camera sight if the mouse Y is less than the lowest Y point or the mouse X is less than the lowest X point of the polygon.</p>
<p>Please examine the code and tell me if you see anything wrong. I think it has to do with the cameraXMin and cameraYMin, because I did set the mode to fullscreen, but I’m not sure why the getWidth()/getHeight() methods wouldn’t work the same for fullscreen</p>
<p>The two parts that are incredibly spaced out (fillPolygon) are the parts that are messed up. In the first example, the polygon does not get drawn, however, in the second example, it gets drawn even if it is not actually on the screen. This is a problem as the worlds are rather large and it can cause an insane amount of lag if there are tons of polygons being drawn off-camera.</p>
<p>[code=java]	public void paint(Graphics g) {<br>
super.paint(g);<br>
Graphics2D g2d = (Graphics2D) g;<br>
if (Main.engine.f != null) {<br>
cameraXMin = x - (Main.engine.f.getWidth() / 2);<br>
cameraXMax = x + (Main.engine.f.getWidth() / 2);<br>
cameraYMin = y - (Main.engine.f.getHeight() / 2);<br>
cameraYMax = y + (Main.engine.f.getHeight() / 2);<br>
}<br>
int lineXMin = 4900, lineXMax = 5200, lineYMin = 4900, lineYMax = 5200;<br>
// drawWorld(g);<br>
int[] xs = new int[] { lineXMin, lineXMax, lineXMin };<br>
int[] ys = new int[] { lineYMin, lineYMax, lineYMax };<br>
boolean isOnScreen = false;<br>
for (int i = 0; i &lt; 3; i++)<br>
if (cameraXMin &lt; xs[i] &amp;&amp; cameraXMax &gt; xs[i] &amp;&amp; cameraYMin &lt; ys[i]<br>
&amp;&amp; cameraYMax &gt; ys[i])<br>
isOnScreen = true;<br>
else<br>
g2d.drawString(“Is on screen = false”, 500, 20);</p>
<pre><code>	g2d.setColor(Color.blue);



	if (isOnScreen)
		g2d.fillPolygon(new int[] { xs[0] - x, xs[1] - x, xs[2] - x },
				new int[] { ys[0] - y, ys[1] - y, ys[2] - y }, 3);



	g2d.fillPolygon(new int[] { xs[0] - x, xs[1] - x, xs[2] - x },
			new int[] { ys[0] - y, ys[1] - y, ys[2] - y }, 3);



	g2d.setColor(Color.black);
	g2d.drawString("X: " + x + ", Y: " + y, 20, 20);
}[/code]</code></pre>
      </div>

      <meta itemprop='headline' content='Java 2D scrolling world [Help]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/silabsoft.html'><span itemprop='name'>silabsoft</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-10-20T16:26:07Z'>
            <time itemprop='dateModified' datetime='2016-08-04T00:46:14Z' class='post-time'>
              August 4, 2016, 12:46am
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>why not skip the drawing of entities that are out of the view area, I am sure you have some sort of coordinate system for your entities.</p>
      </div>

      <meta itemprop='headline' content='Java 2D scrolling world [Help]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/eyeownyew.html'><span itemprop='name'>eyeownyew</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-10-20T17:24:19Z'>
            <time itemprop='dateModified' datetime='2016-08-04T00:46:17Z' class='post-time'>
              August 4, 2016, 12:46am
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="2" data-topic="464696">
<div class="title">
<div class="quote-controls"></div>
 Miss Silabsoft:</div>
<blockquote>
<p>why not skip the drawing of entities that are out of the view area, I am sure you have some sort of coordinate system for your entities.</p>
</blockquote>
</aside>
<p>I found the problem actually. I was thinking that my X and Y values were the mouse (in the center of the screen), but the X and Y values for the scrolling area of the screen is actually the top left corner of the screen. Not sure how this messed my math up, still looking around for the error.</p>
<p>EDIT:<br>
Fixed it. Here is the fixed code, in case anyone was curious:</p>
<p>[code=java]	public void paint(Graphics g) {<br>
super.paint(g);<br>
Graphics2D g2d = (Graphics2D) g;<br>
if (Main.engine.f != null) {<br>
frameWidth = Main.engine.f.getWidth();<br>
frameHeight = Main.engine.f.getHeight();<br>
}<br>
cameraXMin = x - (frameWidth / 2);<br>
cameraXMax = x + (frameWidth / 2);<br>
cameraYMin = y - (frameHeight / 2);<br>
cameraYMax = y + (frameHeight / 2);<br>
System.out.println("" + cameraXMin + " " + cameraXMax + " "<br>
+ cameraYMin + " " + cameraYMax + " " + x + " " + y);<br>
int lineXMin = 4900, lineXMax = 5200, lineYMin = 4900, lineYMax = 5200;</p>
<pre><code>	int[] xs = new int[] { lineXMin, lineXMax, lineXMin };
	int[] ys = new int[] { lineYMin, lineYMax, lineYMax };
	boolean isOnScreen = false;
	for (int i = 0; i &lt; 3; i++)
		if (cameraXMin &lt; xs[i]-(frameWidth/2) &amp;&amp; cameraXMax &gt; xs[i]-(frameWidth/2)
				&amp;&amp; cameraYMin &lt; ys[i]-(frameHeight/2) &amp;&amp; cameraYMax &gt; ys[i]-(frameHeight/2))
			isOnScreen = true;

	g2d.setColor(Color.blue);
	if (isOnScreen)
		g2d.fillPolygon(new int[] { xs[0] - x, xs[1] - x, xs[2] - x },
				new int[] { ys[0] - y, ys[1] - y, ys[2] - y }, 3);
}[/code]
</code></pre>
<p>Removed some of the irrelevant parts. The problem had to do with the calculation of the camera minima and maxima</p>
      </div>

      <meta itemprop='headline' content='Java 2D scrolling world [Help]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/java-2d-scrolling-world-help/464696 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 22:19:09 GMT -->
</html>
