<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/combat-formulas/453423?page=2 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 22:37:52 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Combat Formulas - Runescape - moparisthebest.com</title>
    <meta name="description" content="Hey, Does anyone know where to get them or have them?">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="4534234658.html?page=2" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Combat Formulas&#39;" href="453423.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/combat-formulas/453423?page=2" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/combat-formulas/453423?page=2" />
<meta property="og:title" content="Combat Formulas" />
<meta name="twitter:title" content="Combat Formulas" />
<meta property="og:description" content="[quote=“wildskiller, post:19, topic:453423”][quote author=Loveandpower link=topic=556269.msg4072463#msg4072463 date=1344477993]   Having negative stats creates command prompt errors saying some shit about dividing by 0, and I didn’t notice I had this  if (accuracy &lt; 1) { 			accuracy = 1; 		}  That just makes it 100% hit accuracy  :o  This is the best I can come up with  [code=java]public static double getMeleeAccuracyFormula(Mob source, Mob victim, double accuracy) {  int type = getBonusType(sou..." />
<meta name="twitter:description" content="[quote=“wildskiller, post:19, topic:453423”][quote author=Loveandpower link=topic=556269.msg4072463#msg4072463 date=1344477993]   Having negative stats creates command prompt errors saying some shit about dividing by 0, and I didn’t notice I had this  if (accuracy &lt; 1) { 			accuracy = 1; 		}  That just makes it 100% hit accuracy  :o  This is the best I can come up with  [code=java]public static double getMeleeAccuracyFormula(Mob source, Mob victim, double accuracy) {  int type = getBonusType(sou..." />
<meta property="article:published_time" content="2012-08-10T04:57:29+00:00" />
<meta property="og:ignore_canonical" content="true" />

      <link rel="prev" href="453423.html">


    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="453423.html">Combat Formulas</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/imsuperman05.html'><span itemprop='name'>imsuperman05</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-08-10T04:57:29Z'>
            <time itemprop='dateModified' datetime='2016-08-03T23:23:07Z' class='post-time'>
              August 3, 2016, 11:23pm
            </time>
        <span itemprop='position'>#21</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“wildskiller, post:19, topic:453423”][quote author=Loveandpower link=topic=556269.msg4072463#msg4072463 date=1344477993]</p>
<aside class="quote">
<blockquote>
<p>This is what I wrote for my melee accuracy formula</p>
<p>[code=java]public static double getMeleeAccuracy(Mob source, Mob victim, double accuracy) {</p>
<pre><code>	int type = getBonusType(source);
	
	int defBonus = victim.isNPC() ? victim.getNPC().getDefinition().getDefenceBonus(type) : victim.getPlayer().getBonuses().getDefence(type);
	
	int attBonus = source.isPlayer() ? source.getPlayer().getBonuses().getBonus(type) : source.getNPC().getDefinition().getBonuses()[type];
	
	int attLevel = source.isPlayer() ? source.getPlayer().getSkills().getLevel(0) : source.getNPC().getDefinition().getAttackLevel();
	
	int defLevel = victim.isNPC() ? victim.getNPC().getDefinition().getDefenceLevel() : victim.getPlayer().getSkills().getLevel(1);
	
	if (defLevel &lt;= 0) {
		defLevel = 1;
	}
	if (attLevel &lt;= 0) {
		attLevel = 1;
	}
	accuracy = (attBonus * attLevel) / (defBonus * defLevel);
	
	accuracy += (attBonus / 100) - (defBonus / 100);
	
	if (accuracy &lt; 1) {
		accuracy = 1;
	}
	
	return accuracy;
}[/code]
</code></pre>
<p>[/quote]don’t really see how that’s any better <img src="../../images/emoji/twitter/confusedae52.png?v=5" title=":confused:" class="emoji" alt=":confused:"></p>
<p><code>if (attLevel &lt;= 0) {
			attLevel = 1;
		}</code></p>
<p>you do realize in rs you can have negative stats?</p>
</blockquote>
</aside>
<p>Having negative stats creates command prompt errors saying some shit about dividing by 0, and I didn’t notice I had this</p>
<p><code>if (accuracy &lt; 1) {
			accuracy = 1;
		}</code></p>
<p>That just makes it 100% hit accuracy  :o</p>
<p>This is the best I can come up with</p>
<p>[code=java]public static double getMeleeAccuracyFormula(Mob source, Mob victim, double accuracy) {<br>
int type = getBonusType(source);</p>
<pre><code>	int vtype = getBonusType(victim);
	
	int defBonus = victim.isNPC() ? victim.getNPC().getDefinition().getDefenceBonus(vtype) : victim.getPlayer().getBonuses().getDefence(vtype);
	
	int attBonus = source.isPlayer() ? source.getPlayer().getBonuses().getBonus(type) : source.getNPC().getDefinition().getBonuses()[type];
	
	int attLevel = source.isPlayer() ? source.getPlayer().getSkills().getLevel(0) : source.getNPC().getDefinition().getAttackLevel();
	
	int defLevel = victim.isNPC() ? victim.getNPC().getDefinition().getDefenceLevel() : victim.getPlayer().getSkills().getLevel(1);
	
	double attMult = source.isPlayer() ? source.getPlayer().getPrayer().getAttackModifier() : source.getNPC().getAttackModifier();
	
	accuracy = (attBonus * attLevel) / (defBonus * defLevel);
	
	accuracy += (attBonus / 100) - (defBonus / 100);
	
	return accuracy + attMult;
}[/code][/quote]I remember reading some articles about how Jagex' combat formula does certain random rolls for melee.  I can't remember much of it though, the read was too long ago.</code></pre>
      </div>

      <meta itemprop='headline' content='Combat Formulas'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/davidi2.html'><span itemprop='name'>davidi2</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-08-10T05:24:36Z'>
            <time itemprop='dateModified' datetime='2016-08-03T23:23:08Z' class='post-time'>
              August 3, 2016, 11:23pm
            </time>
        <span itemprop='position'>#22</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p><code>		int aR = attackRoll();
		int dR = enemy.getCombat().defendRoll();
		if(aR &gt;= dR) {
			if(Math.random() &gt; (1 - (dR+1) / (2 * aR))) {
				hitDamage = 0;
			}
		} else {
			if(Math.random() &gt; ((aR-1) / (2 * dR))) {
				hitDamage = 0;
			}
		}
		enemy.appendHit(p, hitDamage, 0);</code></p>
<p>[code=java]	public int attackRoll() {<br>
Player p = (Player)entity;<br>
double effectiveAttack = (double)p.getSkills().getLevel(Skills.ATTACK);<br>
//prayer effects go here<br>
effectiveAttack += 8.0;<br>
switch(p.attackStyle) {<br>
case ACCURATE_STAB:<br>
case ACCURATE_SLASH:<br>
case ACCURATE_CRUSH:<br>
effectiveAttack += 3.0;<br>
break;<br>
case SHARED_STAB:<br>
case SHARED_SLASH:<br>
case SHARED_CRUSH:<br>
effectiveAttack += 1.0;<br>
break;<br>
}<br>
switch(p.attackStyle) {<br>
case ACCURATE_STAB:<br>
case SHARED_STAB:<br>
case AGGRESSIVE_STAB:<br>
case DEFENSIVE_STAB:<br>
return (int)(effectiveAttack * (1.0 + (p.equipmentBonus[0] / 64.0)) * 10.0);<br>
case ACCURATE_SLASH:<br>
case SHARED_SLASH:<br>
case AGGRESSIVE_SLASH:<br>
case DEFENSIVE_SLASH:<br>
return (int)(effectiveAttack * (1.0 + (p.equipmentBonus[1] / 64.0)) * 10.0);<br>
case ACCURATE_CRUSH:<br>
case SHARED_CRUSH:<br>
case AGGRESSIVE_CRUSH:<br>
case DEFENSIVE_CRUSH:<br>
return (int)(effectiveAttack * (1.0 + (p.equipmentBonus[2] / 64.0)) * 10.0);<br>
default:<br>
return (int)(effectiveAttack * 10.0);<br>
}<br>
}</p>
<pre><code>@Override
public int defendRoll() {
	Player p = (Player)entity;
	double effectiveDefence = (double)p.getSkills().getLevel(Skills.DEFENCE);
	//prayer effects
	effectiveDefence += 8.0;
	switch(p.attackStyle) {
	case DEFENSIVE_STAB:
	case DEFENSIVE_SLASH:
	case DEFENSIVE_CRUSH:
		effectiveDefence += 3.0;
		break;
	case SHARED_STAB:
	case SHARED_SLASH:
	case SHARED_CRUSH:
		effectiveDefence += 1.0;
		break;
	}
	if(enemy instanceof Player) {
		switch(((Player)enemy).attackStyle) {
		case ACCURATE_STAB:
		case SHARED_STAB:
		case AGGRESSIVE_STAB:
		case DEFENSIVE_STAB:
			return (int)(effectiveDefence * (1.0 + (p.equipmentBonus[5] / 64.0)) * 10.0);
		case ACCURATE_SLASH:
		case SHARED_SLASH:
		case AGGRESSIVE_SLASH:
		case DEFENSIVE_SLASH:
			return (int)(effectiveDefence * (1.0 + (p.equipmentBonus[6] / 64.0)) * 10.0);
		case ACCURATE_CRUSH:
		case SHARED_CRUSH:
		case AGGRESSIVE_CRUSH:
		case DEFENSIVE_CRUSH:
			return (int)(effectiveDefence * (1.0 + (p.equipmentBonus[7] / 64.0)) * 10.0);
		}
	} else {
		return (int)(effectiveDefence * (1.0 + ((p.equipmentBonus[5] + p.equipmentBonus[6] + p.equipmentBonus[7]) / 192.0)) * 10.0);
	}
	return (int)(effectiveDefence * 10.0); 
}
</code></pre>
<p>[/code]<br>
Please ignore ugly switch statements etc</p>
<p>Max hit formula is widely known so I wont include that.</p>
      </div>

      <meta itemprop='headline' content='Combat Formulas'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Loveandpower.html'><span itemprop='name'>Loveandpower</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-08-10T05:31:11Z'>
            <time itemprop='dateModified' datetime='2016-08-03T23:23:09Z' class='post-time'>
              August 3, 2016, 11:23pm
            </time>
        <span itemprop='position'>#23</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p><span class="bbcode-s">I’m not sure I 100% understand your code david lol<br>
</span></p>
<p>nvm, I get what your doing now</p>
      </div>

      <meta itemprop='headline' content='Combat Formulas'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/davidi2.html'><span itemprop='name'>davidi2</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-08-10T05:34:08Z'>
            <time itemprop='dateModified' datetime='2016-08-03T23:23:09Z' class='post-time'>
              August 3, 2016, 11:23pm
            </time>
        <span itemprop='position'>#24</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Each person gets a ‘roll’ based on their bonuses (prayers, armor, weapons) and levels. The rolls are used in another small formula to see if the attack should be a ‘miss’ or a hit.</p>
      </div>

      <meta itemprop='headline' content='Combat Formulas'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Loveandpower.html'><span itemprop='name'>Loveandpower</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-08-10T05:36:00Z'>
            <time itemprop='dateModified' datetime='2016-08-03T23:23:09Z' class='post-time'>
              August 3, 2016, 11:23pm
            </time>
        <span itemprop='position'>#25</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>yeah I saw that  after  re-reading it  a couple of times. I like the way you have it set up too bad most people won’t  know what to do with that haha</p>
      </div>

      <meta itemprop='headline' content='Combat Formulas'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/wildskiller.html'><span itemprop='name'>wildskiller</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-08-10T15:52:06Z'>
            <time itemprop='dateModified' datetime='2016-08-03T23:23:34Z' class='post-time'>
              August 3, 2016, 11:23pm
            </time>
        <span itemprop='position'>#26</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Davidi2, post:22, topic:453423”]<code>		int aR = attackRoll();
		int dR = enemy.getCombat().defendRoll();
		if(aR &gt;= dR) {
			if(Math.random() &gt; (1 - (dR+1) / (2 * aR))) {
				hitDamage = 0;
			}
		} else {
			if(Math.random() &gt; ((aR-1) / (2 * dR))) {
				hitDamage = 0;
			}
		}
		enemy.appendHit(p, hitDamage, 0);</code></p>
<p>[code=java]	public int attackRoll() {<br>
Player p = (Player)entity;<br>
double effectiveAttack = (double)p.getSkills().getLevel(Skills.ATTACK);<br>
//prayer effects go here<br>
effectiveAttack += 8.0;<br>
switch(p.attackStyle) {<br>
case ACCURATE_STAB:<br>
case ACCURATE_SLASH:<br>
case ACCURATE_CRUSH:<br>
effectiveAttack += 3.0;<br>
break;<br>
case SHARED_STAB:<br>
case SHARED_SLASH:<br>
case SHARED_CRUSH:<br>
effectiveAttack += 1.0;<br>
break;<br>
}<br>
switch(p.attackStyle) {<br>
case ACCURATE_STAB:<br>
case SHARED_STAB:<br>
case AGGRESSIVE_STAB:<br>
case DEFENSIVE_STAB:<br>
return (int)(effectiveAttack * (1.0 + (p.equipmentBonus[0] / 64.0)) * 10.0);<br>
case ACCURATE_SLASH:<br>
case SHARED_SLASH:<br>
case AGGRESSIVE_SLASH:<br>
case DEFENSIVE_SLASH:<br>
return (int)(effectiveAttack * (1.0 + (p.equipmentBonus[1] / 64.0)) * 10.0);<br>
case ACCURATE_CRUSH:<br>
case SHARED_CRUSH:<br>
case AGGRESSIVE_CRUSH:<br>
case DEFENSIVE_CRUSH:<br>
return (int)(effectiveAttack * (1.0 + (p.equipmentBonus[2] / 64.0)) * 10.0);<br>
default:<br>
return (int)(effectiveAttack * 10.0);<br>
}<br>
}</p>
<pre><code>@Override
public int defendRoll() {
	Player p = (Player)entity;
	double effectiveDefence = (double)p.getSkills().getLevel(Skills.DEFENCE);
	//prayer effects
	effectiveDefence += 8.0;
	switch(p.attackStyle) {
	case DEFENSIVE_STAB:
	case DEFENSIVE_SLASH:
	case DEFENSIVE_CRUSH:
		effectiveDefence += 3.0;
		break;
	case SHARED_STAB:
	case SHARED_SLASH:
	case SHARED_CRUSH:
		effectiveDefence += 1.0;
		break;
	}
	if(enemy instanceof Player) {
		switch(((Player)enemy).attackStyle) {
		case ACCURATE_STAB:
		case SHARED_STAB:
		case AGGRESSIVE_STAB:
		case DEFENSIVE_STAB:
			return (int)(effectiveDefence * (1.0 + (p.equipmentBonus[5] / 64.0)) * 10.0);
		case ACCURATE_SLASH:
		case SHARED_SLASH:
		case AGGRESSIVE_SLASH:
		case DEFENSIVE_SLASH:
			return (int)(effectiveDefence * (1.0 + (p.equipmentBonus[6] / 64.0)) * 10.0);
		case ACCURATE_CRUSH:
		case SHARED_CRUSH:
		case AGGRESSIVE_CRUSH:
		case DEFENSIVE_CRUSH:
			return (int)(effectiveDefence * (1.0 + (p.equipmentBonus[7] / 64.0)) * 10.0);
		}
	} else {
		return (int)(effectiveDefence * (1.0 + ((p.equipmentBonus[5] + p.equipmentBonus[6] + p.equipmentBonus[7]) / 192.0)) * 10.0);
	}
	return (int)(effectiveDefence * 10.0); 
}
</code></pre>
<p>[/code]<br>
Please ignore ugly switch statements etc</p>
<p>Max hit formula is widely known so I wont include that.[/quote]<br>
=O Definitely replacing mine with this, and all switch statements are ugly.</p>
<p>What would the damage have to do with accuracy?</p>
      </div>

      <meta itemprop='headline' content='Combat Formulas'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/the_wanderer.html'><span itemprop='name'>the_wanderer</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-08-19T06:30:11Z'>
            <time itemprop='dateModified' datetime='2016-08-03T23:34:04Z' class='post-time'>
              August 3, 2016, 11:34pm
            </time>
        <span itemprop='position'>#27</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I’m guessing you just made up those constants? Like /64 * 10 and whatnot?</p>
      </div>

      <meta itemprop='headline' content='Combat Formulas'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/davidi2.html'><span itemprop='name'>davidi2</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-08-19T06:31:30Z'>
            <time itemprop='dateModified' datetime='2016-08-03T23:34:04Z' class='post-time'>
              August 3, 2016, 11:34pm
            </time>
        <span itemprop='position'>#28</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Nope, taken from the widely accepted combat accuracy formulas on the RS forums with thousands of hours of testing <img src="../../images/emoji/twitter/stuck_out_tongueae52.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
      </div>

      <meta itemprop='headline' content='Combat Formulas'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/arham_4.html'><span itemprop='name'>arham_4</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-08-20T18:50:13Z'>
            <time itemprop='dateModified' datetime='2016-08-03T23:36:32Z' class='post-time'>
              August 3, 2016, 11:36pm
            </time>
        <span itemprop='position'>#29</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <pre><code class="lang-auto">public class CombatManager extends CombatData {
	
	Client c;
	
	public CombatManager (Client c) {
		this.c = c;
	}
	
	
	/*
	 * Player VS. player combat.
	 */
	public Client opponent;
	
	public int opponentIndex;
	public int skullTimeLeft;
	public int combatTimer;
	public int doubleHitTimer;
	private int underAttackBy;
	
	public boolean poisoned;
	public boolean isAttacking;
	public boolean doubleHit;
	public boolean inCombat;
	private boolean skulled;
	
	
	public void startPlayerCombat() {
		c.faceNPC(32768 + opponentIndex);
		if (opponent == null || c == null || opponent.playerId &lt; 1 || c.playerId &lt; 1) {
			c.sM("Yours or your opponents character is corrupt. Try relogging.");
			return;
		}
		if (opponent.currentHealth &lt; 1) {
			c.sM("This player is already dead.");
			return;
		}
		if (underAttackBy &gt; 0 &amp;&amp; underAttackBy != opponent.playerId) {
			c.sM("You are already under attack.");
			return;
		}
		if (opponent.getCM().underAttackBy &gt; 0 &amp;&amp; opponent.getCM().underAttackBy != c.playerId) {
			c.sM("This player is already under attack.");
			return;
		} else {
			if (c.multiPK()){
				c.wildyLevel = 50;
			}
			if (c.getFightPits().inFightPitsGame()) {
				c.wildyLevel = 126;
			}
			if (opponent.combatLevel + opponent.wildyLevel &lt; c.combatLevel
					|| c.combatLevel + c.wildyLevel &lt; opponent.combatLevel) {
				c.sM("Your level difference is too great.");
				c.sM("You need to move deeper into the Wilderness.");
				return;
			} else {
				if (!isAttacking &amp;&amp; inCombat) {
					isAttacking = true;
				} else {
					c.KillerId = opponent.playerId;
					opponent.KillerId = c.playerId;
					skullTimeLeft = 2000;
					skulledTimer();
					opponent.getCM().opponent = c;
					opponent.getCM().underAttackBy = c.playerId;
					underAttackBy = opponent.playerId;
					inCombat = true;
					opponent.getCM().inCombat = true;
					isAttacking = true;
					playerCombatProcess();
					opponent.getCM().playerCombatProcess();
					if (opponent.autoRetaliate &gt; 0)
						opponent.getCM().isAttacking = true;
				}
			}
		}
	}
	
	private void playerCombatProcess() {
		Server.getTaskScheduler().schedule(new Task(1, false) {
			@Override
			protected void execute() {
				if (c.disconnected || !inCombat) {
					resetPlayerCombat();
					opponent.getCM().resetPlayerCombat();
					stop();
				} else {
					if (doubleHitTimer &gt; 0)
						doubleHitTimer --;
					if (combatTimer &gt; 0)
						combatTimer --;
					if (doubleHitTimer == 0) {
						if (doubleHit) {
							int shit = Misc.random(hitDamage);
							PlayerHandler.players[opponent.playerId].dealDamage(shit);
							PlayerHandler.players[opponent.playerId].hitDiff = shit;
							PlayerHandler.players[opponent.playerId].hitUpdateRequired = true;
							PlayerHandler.players[opponent.playerId].updateRequired = true;
							doubleHit = false;
						}
					}
					if (combatTimer == 0) {
						if (isAttacking) {
							attemptHit(c, opponent);
							c.uniCombatTimer = 30;
							opponent.uniCombatTimer = 30;
							combatTimer = getCombatTimer(c);
						} else {
							if (!opponent.getCM().isAttacking) {
								resetPlayerCombat();
								opponent.getCM().resetPlayerCombat();
								stop();
							}
						}
					}
				}
			}
		});
	}
	
	private void resetPlayerCombat() {
		underAttackBy = 0;
		inCombat = false;
		isAttacking = false;
	}
	
	public void skulledTimer() {
		if (!skulled) {
			skulled = true;
			updateHead();
			Server.getTaskScheduler().schedule(new Task(1, false) {
				@Override
				protected void execute() {
					if (c.disconnected) {
						stop();
					} else {
						if (skullTimeLeft &gt; 0) {
							skullTimeLeft --;
						} else {
							skulled = false;
							updateHead();
							stop();
						}
					}
				}
			});
		}
	}
	
	public void updateHead() {
    	c.headIconPray = c.headIcon;
    	if (c.getPrayerAction().headPray == 1 &amp;&amp; !skulled)
    		c.headIcon = 4;
    	if (c.getPrayerAction().headPray == 2 &amp;&amp; !skulled)
    		c.headIcon = 2;
    	if (c.getPrayerAction().headPray == 3 &amp;&amp; !skulled)
    		c.headIcon = 1;
    	if (c.getPrayerAction().headPray == 4 &amp;&amp; !skulled)
    		c.headIcon = 8;
    	if (c.getPrayerAction().headPray == 5 &amp;&amp; !skulled)
    		c.headIcon = 32;
    	if (c.getPrayerAction().headPray == 6 &amp;&amp; !skulled)
    		c.headIcon = 16;
    	if (c.getPrayerAction().headPray == 1 &amp;&amp; skulled)
    		c.headIcon = 4;
    	if (c.getPrayerAction().headPray == 2 &amp;&amp; skulled)
    		c.headIcon = 2;
    	if (c.getPrayerAction().headPray == 3 &amp;&amp; skulled)
    		c.headIcon = 1;
    	if (c.getPrayerAction().headPray == 4 &amp;&amp; skulled)
    		c.headIcon = 8;
    	if (c.getPrayerAction().headPray == 5 &amp;&amp; skulled)
    		c.headIcon = 32;
    	if (c.getPrayerAction().headPray == 6 &amp;&amp; skulled)
    		c.headIcon = 16;
    	if (c.getPrayerAction().headPray == 0 &amp;&amp; skulled)
    		c.headIcon = 64;
    }
	
}</code></pre>
<p>NOT MINE</p>
      </div>

      <meta itemprop='headline' content='Combat Formulas'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/RandQm.html'><span itemprop='name'>RandQm</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-08-20T19:49:31Z'>
            <time itemprop='dateModified' datetime='2016-08-03T23:36:35Z' class='post-time'>
              August 3, 2016, 11:36pm
            </time>
        <span itemprop='position'>#30</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“arham 4, post:29, topic:453423”][code=java]<br>
public class CombatManager extends CombatData {</p>
<pre><code>Client c;

public CombatManager (Client c) {
	this.c = c;
}


/*
 * Player VS. player combat.
 */
public Client opponent;

public int opponentIndex;
public int skullTimeLeft;
public int combatTimer;
public int doubleHitTimer;
private int underAttackBy;

public boolean poisoned;
public boolean isAttacking;
public boolean doubleHit;
public boolean inCombat;
private boolean skulled;


public void startPlayerCombat() {
	c.faceNPC(32768 + opponentIndex);
	if (opponent == null || c == null || opponent.playerId &lt; 1 || c.playerId &lt; 1) {
		c.sM("Yours or your opponents character is corrupt. Try relogging.");
		return;
	}
	if (opponent.currentHealth &lt; 1) {
		c.sM("This player is already dead.");
		return;
	}
	if (underAttackBy &gt; 0 &amp;&amp; underAttackBy != opponent.playerId) {
		c.sM("You are already under attack.");
		return;
	}
	if (opponent.getCM().underAttackBy &gt; 0 &amp;&amp; opponent.getCM().underAttackBy != c.playerId) {
		c.sM("This player is already under attack.");
		return;
	} else {
		if (c.multiPK()){
			c.wildyLevel = 50;
		}
		if (c.getFightPits().inFightPitsGame()) {
			c.wildyLevel = 126;
		}
		if (opponent.combatLevel + opponent.wildyLevel &lt; c.combatLevel
				|| c.combatLevel + c.wildyLevel &lt; opponent.combatLevel) {
			c.sM("Your level difference is too great.");
			c.sM("You need to move deeper into the Wilderness.");
			return;
		} else {
			if (!isAttacking &amp;&amp; inCombat) {
				isAttacking = true;
			} else {
				c.KillerId = opponent.playerId;
				opponent.KillerId = c.playerId;
				skullTimeLeft = 2000;
				skulledTimer();
				opponent.getCM().opponent = c;
				opponent.getCM().underAttackBy = c.playerId;
				underAttackBy = opponent.playerId;
				inCombat = true;
				opponent.getCM().inCombat = true;
				isAttacking = true;
				playerCombatProcess();
				opponent.getCM().playerCombatProcess();
				if (opponent.autoRetaliate &gt; 0)
					opponent.getCM().isAttacking = true;
			}
		}
	}
}

private void playerCombatProcess() {
	Server.getTaskScheduler().schedule(new Task(1, false) {
		@Override
		protected void execute() {
			if (c.disconnected || !inCombat) {
				resetPlayerCombat();
				opponent.getCM().resetPlayerCombat();
				stop();
			} else {
				if (doubleHitTimer &gt; 0)
					doubleHitTimer --;
				if (combatTimer &gt; 0)
					combatTimer --;
				if (doubleHitTimer == 0) {
					if (doubleHit) {
						int shit = Misc.random(hitDamage);
						PlayerHandler.players[opponent.playerId].dealDamage(shit);
						PlayerHandler.players[opponent.playerId].hitDiff = shit;
						PlayerHandler.players[opponent.playerId].hitUpdateRequired = true;
						PlayerHandler.players[opponent.playerId].updateRequired = true;
						doubleHit = false;
					}
				}
				if (combatTimer == 0) {
					if (isAttacking) {
						attemptHit(c, opponent);
						c.uniCombatTimer = 30;
						opponent.uniCombatTimer = 30;
						combatTimer = getCombatTimer(c);
					} else {
						if (!opponent.getCM().isAttacking) {
							resetPlayerCombat();
							opponent.getCM().resetPlayerCombat();
							stop();
						}
					}
				}
			}
		}
	});
}

private void resetPlayerCombat() {
	underAttackBy = 0;
	inCombat = false;
	isAttacking = false;
}

public void skulledTimer() {
	if (!skulled) {
		skulled = true;
		updateHead();
		Server.getTaskScheduler().schedule(new Task(1, false) {
			@Override
			protected void execute() {
				if (c.disconnected) {
					stop();
				} else {
					if (skullTimeLeft &gt; 0) {
						skullTimeLeft --;
					} else {
						skulled = false;
						updateHead();
						stop();
					}
				}
			}
		});
	}
}

public void updateHead() {
	c.headIconPray = c.headIcon;
	if (c.getPrayerAction().headPray == 1 &amp;&amp; !skulled)
		c.headIcon = 4;
	if (c.getPrayerAction().headPray == 2 &amp;&amp; !skulled)
		c.headIcon = 2;
	if (c.getPrayerAction().headPray == 3 &amp;&amp; !skulled)
		c.headIcon = 1;
	if (c.getPrayerAction().headPray == 4 &amp;&amp; !skulled)
		c.headIcon = 8;
	if (c.getPrayerAction().headPray == 5 &amp;&amp; !skulled)
		c.headIcon = 32;
	if (c.getPrayerAction().headPray == 6 &amp;&amp; !skulled)
		c.headIcon = 16;
	if (c.getPrayerAction().headPray == 1 &amp;&amp; skulled)
		c.headIcon = 4;
	if (c.getPrayerAction().headPray == 2 &amp;&amp; skulled)
		c.headIcon = 2;
	if (c.getPrayerAction().headPray == 3 &amp;&amp; skulled)
		c.headIcon = 1;
	if (c.getPrayerAction().headPray == 4 &amp;&amp; skulled)
		c.headIcon = 8;
	if (c.getPrayerAction().headPray == 5 &amp;&amp; skulled)
		c.headIcon = 32;
	if (c.getPrayerAction().headPray == 6 &amp;&amp; skulled)
		c.headIcon = 16;
	if (c.getPrayerAction().headPray == 0 &amp;&amp; skulled)
		c.headIcon = 64;
}
</code></pre>
<p>}<br>
[/code]<br>
NOT MINE[/quote]</p>
<p>That’s mine, and this is about formula’s, no formula’s are included here lol</p>
      </div>

      <meta itemprop='headline' content='Combat Formulas'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/the_wanderer.html'><span itemprop='name'>the_wanderer</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-08-21T00:32:08Z'>
            <time itemprop='dateModified' datetime='2016-08-03T23:36:55Z' class='post-time'>
              August 3, 2016, 11:36pm
            </time>
        <span itemprop='position'>#31</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="28" data-topic="453423">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forum.moparisthebest.com/davidi2/40/2579_1.png" class="avatar"> Davidi2:</div>
<blockquote>
<p>Nope, taken from the widely accepted combat accuracy formulas on the RS forums with thousands of hours of testing <img src="../../images/emoji/twitter/stuck_out_tongueae52.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
</blockquote>
</aside>
<p>Welp. Looks like I’m going to be ripping some of that. :o Thanks for informing me haha. Had no idea people actually did that.</p>
      </div>

      <meta itemprop='headline' content='Combat Formulas'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>

  <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
      <span itemprop='name'><a rel="prev" itemprop="url" href="453423.html">← previous page</a></span>
  </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/combat-formulas/453423?page=2 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 22:37:52 GMT -->
</html>
