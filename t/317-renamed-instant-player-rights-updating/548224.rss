<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>317 Renamed - &quot;Instant&quot; player rights updating</title>
    <link>https://forum.moparisthebest.com/t/317-renamed-instant-player-rights-updating/548224</link>
    <description>Okay I&#39;ve had a couple requests on how to do this... I told one person so I might as well tell the world.

[spoiler=What you&#39;re adding][img]http://puu.sh/d5mTC[/img] (Before the crown would have just stayed Yellow for an admin)[/spoiler]

This is in the client section because this is mostly a client tutorial. There&#39;s only 1 line you change in the server.

Speaking of that, lets get it out of the way :3

Okay so I did this on a PI, it&#39;s generally the same for any 317 server.. just find the player updating block of it, and look for:
[code=java]playerProps.writeByte(combatLevel); // combat level[/code]
Or similar.. Whatever sends your combatLevel to your client.
Directly under that variable will be your total skill. Yours [u]probably[/u] will look like &quot;playerProps.writeWord(0);&quot;. That&#39;s because the skill level isn&#39;t actually used in the 317 client.
[b]UNDER[/b] the skill variable, lets add our player rights:
[code=java]		playerProps.writeByte(playerRights); // Player rights[/code]

And now we&#39;re done with the server.

Client time. Open up Player.java and Client.java.
Player.java - 
Find
[code=java]		combatLevel = stream.readUnsignedByte();[/code]
Again, you will see the skill variable under it.
Just like before, add this [u]under the skill variable[/u]
[code=java]		playerRights = stream.readUnsignedByte();[/code]

At the bottom of Player.java, add:
[code=java]	public int playerRights;[/code]

Client.java-
Search for:
[code=java	]			myPrivilege = socketStream.read();[/code]
This is where the client reads the data sent from the server on first login. As most of you will know, that was the only time the player rights for your player got sent to the client. Other player&#39;s rights could update as soon as they changed, but you wouldn&#39;t see yours update.
Change that to:
[code=java]				int rights = socketStream.read();[/code]
Just trust me..
Now find this: (It&#39;s like 30-50 lines down)
[code=java]				myPlayer = playerArray[myPlayerIndex] = new Player();[/code]
That&#39;s where your player is becoming a Player object.
Under it add:
[code=java]myPlayer.playerRights = rights;[/code]

Now all you have to do is update any instance of &quot;myPrivilege&quot; with &quot;myPlayer.playerRights&quot;.

And you can also remove the variable &quot;myPrivilege&quot; completely after you have..</description>
    
    <lastBuildDate>Thu, 04 Dec 2014 04:58:35 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/317-renamed-instant-player-rights-updating/548224.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>317 Renamed - &quot;Instant&quot; player rights updating</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <p>[quote=“Ashi, post:7, topic:548224”][quote author=sk8rdude461 link=topic=667129.msg4461313#msg4461313 date=1417663905]</p>
<aside class="quote">
<blockquote>
<p>This is a terrible way to do this…</p>
</blockquote>
</aside>
<p>Then release your own way to do it.<br>
[/quote]<br>
On my server it already has this. I didn’t need to touch the client at all! I’m not sure about 317 clients though.[/quote]<br>
In the 317 client the permissions for your player are only sent on login.<br>
<a href="https://rswiki.moparisthebest.com/index.php?title=317_Protocol#Player_Status" class="onebox" target="_blank" rel="nofollow noopener">https://rswiki.moparisthebest.com/index.php?title=317_Protocol#Player_Status</a><br>
That would be the “myPrivilege” variable I say to replace.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-renamed-instant-player-rights-updating/548224/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-renamed-instant-player-rights-updating/548224/8</link>
        <pubDate>Thu, 04 Dec 2014 04:58:35 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-548224-8</guid>
        <source url="https://forum.moparisthebest.com/t/317-renamed-instant-player-rights-updating/548224.rss">317 Renamed - &quot;Instant&quot; player rights updating</source>
      </item>
      <item>
        <title>317 Renamed - &quot;Instant&quot; player rights updating</title>
        <dc:creator><![CDATA[@Ashi Ashi]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ashi">@Ashi</a> wrote:</p>
          <blockquote>
              <p>[quote=“sk8rdude461, post:6, topic:548224”][quote author=AtomicInt_ link=topic=667129.msg4461309#msg4461309 date=1417662543]<br>
This is a terrible way to do this…<br>
[/quote]<br>
Then release your own way to do it.[/quote]<br>
On my server it already has this. I didn’t need to touch the client at all! I’m not sure about 317 clients though.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-renamed-instant-player-rights-updating/548224/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-renamed-instant-player-rights-updating/548224/7</link>
        <pubDate>Thu, 04 Dec 2014 04:38:21 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-548224-7</guid>
        <source url="https://forum.moparisthebest.com/t/317-renamed-instant-player-rights-updating/548224.rss">317 Renamed - &quot;Instant&quot; player rights updating</source>
      </item>
      <item>
        <title>317 Renamed - &quot;Instant&quot; player rights updating</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="5" data-topic="548224">
<div class="title">
<div class="quote-controls"></div>
 AtomicInt_:</div>
<blockquote>
<p>This is a terrible way to do this…</p>
</blockquote>
</aside>
<p>Then release your own way to do it.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-renamed-instant-player-rights-updating/548224/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-renamed-instant-player-rights-updating/548224/6</link>
        <pubDate>Thu, 04 Dec 2014 03:31:45 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-548224-6</guid>
        <source url="https://forum.moparisthebest.com/t/317-renamed-instant-player-rights-updating/548224.rss">317 Renamed - &quot;Instant&quot; player rights updating</source>
      </item>
      <item>
        <title>317 Renamed - &quot;Instant&quot; player rights updating</title>
        <dc:creator><![CDATA[@ExtremeX-Scape Ryley]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/extremex-scape">@ExtremeX-Scape</a> wrote:</p>
          <blockquote>
              <p>This is a terrible way to do this…</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-renamed-instant-player-rights-updating/548224/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-renamed-instant-player-rights-updating/548224/5</link>
        <pubDate>Thu, 04 Dec 2014 03:09:03 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-548224-5</guid>
        <source url="https://forum.moparisthebest.com/t/317-renamed-instant-player-rights-updating/548224.rss">317 Renamed - &quot;Instant&quot; player rights updating</source>
      </item>
      <item>
        <title>317 Renamed - &quot;Instant&quot; player rights updating</title>
        <dc:creator><![CDATA[@Ashi Ashi]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ashi">@Ashi</a> wrote:</p>
          <blockquote>
              <p>[quote=“Skarred Lands, post:1, topic:548232”][quote author=Scape-JAVA link=topic=667129.msg4461287#msg4461287 date=1417652853]<br>
nooooo why did you release it ;p.<br>
[/quote]<br>
Because more than just you wanted the feature, and I figured I’d release a client snippet since I haven’t in a while.[/quote]<br>
y u got 2 accounts</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-renamed-instant-player-rights-updating/548224/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-renamed-instant-player-rights-updating/548224/4</link>
        <pubDate>Thu, 04 Dec 2014 00:56:53 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-548224-4</guid>
        <source url="https://forum.moparisthebest.com/t/317-renamed-instant-player-rights-updating/548224.rss">317 Renamed - &quot;Instant&quot; player rights updating</source>
      </item>
      <item>
        <title>317 Renamed - &quot;Instant&quot; player rights updating</title>
        <dc:creator><![CDATA[@Scape-JAVA Scape-JAVA]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/scape-java">@Scape-JAVA</a> wrote:</p>
          <blockquote>
              <p>nooooo why did you release it ;p.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-renamed-instant-player-rights-updating/548224/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-renamed-instant-player-rights-updating/548224/3</link>
        <pubDate>Thu, 04 Dec 2014 00:27:33 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-548224-3</guid>
        <source url="https://forum.moparisthebest.com/t/317-renamed-instant-player-rights-updating/548224.rss">317 Renamed - &quot;Instant&quot; player rights updating</source>
      </item>
      <item>
        <title>317 Renamed - &quot;Instant&quot; player rights updating</title>
        <dc:creator><![CDATA[@T41 t4]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/t41">@T41</a> wrote:</p>
          <blockquote>
              <p>privileges checked</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-renamed-instant-player-rights-updating/548224/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-renamed-instant-player-rights-updating/548224/2</link>
        <pubDate>Wed, 03 Dec 2014 22:19:36 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-548224-2</guid>
        <source url="https://forum.moparisthebest.com/t/317-renamed-instant-player-rights-updating/548224.rss">317 Renamed - &quot;Instant&quot; player rights updating</source>
      </item>
      <item>
        <title>317 Renamed - &quot;Instant&quot; player rights updating</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <p>Okay I’ve had a couple requests on how to do this… I told one person so I might as well tell the world.</p>
<p>[spoiler=What you’re adding]<img src="http://puu.sh/d5mTC" alt width="" height=""> (Before the crown would have just stayed Yellow for an admin)[/spoiler]</p>
<p>This is in the client section because this is mostly a client tutorial. There’s only 1 line you change in the server.</p>
<p>Speaking of that, lets get it out of the way :3</p>
<p>Okay so I did this on a PI, it’s generally the same for any 317 server… just find the player updating block of it, and look for:</p>
<pre><code class="lang-auto"></code></pre>
<p>Or similar… Whatever sends your combatLevel to your client.<br>
Directly under that variable will be your total skill. Yours <span class="bbcode-u">probably</span> will look like “playerProps.writeWord(0);”. That’s because the skill level isn’t actually used in the 317 client.<br>
<span class="bbcode-b">UNDER</span> the skill variable, lets add our player rights:</p>
<pre><code class="lang-auto"></code></pre>
<p>And now we’re done with the server.</p>
<p>Client time. Open up Player.java and Client.java.<br>
Player.java -<br>
Find</p>
<pre><code class="lang-auto"></code></pre>
<p>Again, you will see the skill variable under it.<br>
Just like before, add this <span class="bbcode-u">under the skill variable</span></p>
<pre><code class="lang-auto"></code></pre>
<p>At the bottom of Player.java, add:</p>
<pre><code class="lang-auto"></code></pre>
<p>Client.java-<br>
Search for:</p>
<pre><code class="lang-auto"></code></pre>
<p>This is where the client reads the data sent from the server on first login. As most of you will know, that was the only time the player rights for your player got sent to the client. Other player’s rights could update as soon as they changed, but you wouldn’t see yours update.<br>
Change that to:</p>
<pre><code class="lang-auto"></code></pre>
<p>Just trust me…<br>
Now find this: (It’s like 30-50 lines down)</p>
<pre><code class="lang-auto"></code></pre>
<p>That’s where your player is becoming a Player object.<br>
Under it add:</p>
<pre><code class="lang-auto"></code></pre>
<p>Now all you have to do is update any instance of “myPrivilege” with “myPlayer.playerRights”.</p>
<p>And you can also remove the variable “myPrivilege” completely after you have…</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-renamed-instant-player-rights-updating/548224/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-renamed-instant-player-rights-updating/548224/1</link>
        <pubDate>Wed, 03 Dec 2014 21:48:34 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-548224-1</guid>
        <source url="https://forum.moparisthebest.com/t/317-renamed-instant-player-rights-updating/548224.rss">317 Renamed - &quot;Instant&quot; player rights updating</source>
      </item>
  </channel>
</rss>
