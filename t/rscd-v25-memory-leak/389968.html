<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/rscd-v25-memory-leak/389968 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Aug 2019 03:57:26 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Rscd v25 memory leak - Runescape - moparisthebest.com</title>
    <meta name="description" content="anyone willing to share what causes it and where its at?">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="389968.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Rscd v25 memory leak&#39;" href="389968.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/rscd-v25-memory-leak/389968" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/rscd-v25-memory-leak/389968" />
<meta property="og:title" content="Rscd v25 memory leak" />
<meta name="twitter:title" content="Rscd v25 memory leak" />
<meta property="og:description" content="anyone willing to share what causes it and where its at?" />
<meta name="twitter:description" content="anyone willing to share what causes it and where its at?" />
<meta property="article:published_time" content="2011-04-07T23:03:52+00:00" />
<meta property="og:ignore_canonical" content="true" />

      <link rel="next" href="3899684658.html?page=2">


    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="389968.html">Rscd v25 memory leak</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/JavaPlayground.html'><span itemprop='name'>JavaPlayground</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-07T23:03:52Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:02:57Z' class='post-time'>
              August 1, 2016, 11:02am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>anyone willing to share what causes it and where its at?</p>
      </div>

      <meta itemprop='headline' content='Rscd v25 memory leak'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Vrunk.html'><span itemprop='name'>Vrunk</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-07T23:08:34Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:02:57Z' class='post-time'>
              August 1, 2016, 11:02am
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Java does not have ‘memory leaks’ in the C/C++ sense.</p>
<p>If, however, you are referring to keeping object references around for longer than you’re supposed to…<br>
egrep -o ‘new.*?’ sourcecode.all</p>
      </div>

      <meta itemprop='headline' content='Rscd v25 memory leak'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Nothing1.html'><span itemprop='name'>Nothing1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-08T08:59:20Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:03:22Z' class='post-time'>
              August 1, 2016, 11:03am
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Yes there are memory leaks, I bet he means players in view fix though.</p>
      </div>

      <meta itemprop='headline' content='Rscd v25 memory leak'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/uberpk3r.html'><span itemprop='name'>uberpk3r</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-08T13:19:09Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:03:27Z' class='post-time'>
              August 1, 2016, 11:03am
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Do a search about it its not really leaks, its Java and if its bad coded it might use more memory then needed.</p>
      </div>

      <meta itemprop='headline' content='Rscd v25 memory leak'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Vrunk.html'><span itemprop='name'>Vrunk</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-08T22:05:43Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:04:02Z' class='post-time'>
              August 1, 2016, 11:04am
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote quote-modified" data-post="3" data-topic="389968">
<div class="title">
<div class="quote-controls"></div>
 -Nothing:</div>
<blockquote>
<p>Kryptix, yes there are memory leaks, I bet he means players in view fix though.</p>
</blockquote>
</aside>
<p>Where did you see Kryptix post?</p>
<p>The Java garbage collector only removes an object from the heap if there is no longer an object reference to that object. The most common place that this would probably happen in Java would be adding elements to a collection (Map, List, Set), and never removing them. Judging by the judicious use of ArrayList in the RSC sources floating around, your best bet would be to look for any arrayList.add(…) calls.</p>
      </div>

      <meta itemprop='headline' content='Rscd v25 memory leak'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Nothing1.html'><span itemprop='name'>Nothing1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-09T21:49:28Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:05:47Z' class='post-time'>
              August 1, 2016, 11:05am
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I meant you, I don’t know what the hell I was thinking when I wrote that post, I guess I’m just used to see his name everywhere on these forums.<br>
At the time I posted that I was damn sure it was Kryptix whos post I was replying to.</p>
      </div>

      <meta itemprop='headline' content='Rscd v25 memory leak'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Nothing1.html'><span itemprop='name'>Nothing1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-10T16:06:48Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:06:37Z' class='post-time'>
              August 1, 2016, 11:06am
            </time>
        <span itemprop='position'>#7</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Usually people have meant that when they’ve asked me for memory leak fix for RSCD.<br>
Don’t know why though.</p>
      </div>

      <meta itemprop='headline' content='Rscd v25 memory leak'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Mental_Piracy.html'><span itemprop='name'>Mental_Piracy</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-14T01:37:19Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:11:00Z' class='post-time'>
              August 1, 2016, 11:11am
            </time>
        <span itemprop='position'>#8</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote quote-modified" data-post="3" data-topic="390080">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/kryptix/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar">
</div>
<blockquote>
<p>Unlikely, since they wouldn’t even know it existed until they saw 60-100+ players in the same area (which not many servers have managed to do).</p>
</blockquote>
</aside>
<p>Bug was found on RSCA, and I believe either you or xent posted it(either way its not to difficult). But he is specifically asking for help with the memory usage due to programming errors, not memory links in java itself.</p>
<p>On topic, no one can really tell you how to fix it, as there are quite a few places where the code is either open-ended or broken. Best to just download a source with it already fixed if you cant find out what causes it on your own.</p>
      </div>

      <meta itemprop='headline' content='Rscd v25 memory leak'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Peter.html'><span itemprop='name'>Peter</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-19T08:56:46Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:18:06Z' class='post-time'>
              August 1, 2016, 11:18am
            </time>
        <span itemprop='position'>#9</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>One of the memory leaks I found on RSCAs source was xEnts XP distribution system where he added actual players to an arraylist each time they hit something. If the player hitted the NPC 7 times, and logged out without killing it there would be 7 references to that player for that NPC.</p>
      </div>

      <meta itemprop='headline' content='Rscd v25 memory leak'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Nothing1.html'><span itemprop='name'>Nothing1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-19T17:13:31Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:18:32Z' class='post-time'>
              August 1, 2016, 11:18am
            </time>
        <span itemprop='position'>#10</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="9" data-topic="389968">
<div class="title">
<div class="quote-controls"></div>
 Peeter:</div>
<blockquote>
<p>One of the memory leaks I found on RSCAs source was xEnts XP distribution system where he added actual players to an arraylist each time they hit something. If the player hitted the NPC 7 times, and logged out without killing it there would be 7 references to that player for that NPC.</p>
</blockquote>
</aside>
<p>and to fix that, don’t use arraylist</p>
      </div>

      <meta itemprop='headline' content='Rscd v25 memory leak'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Nothing1.html'><span itemprop='name'>Nothing1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-19T19:12:01Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:18:37Z' class='post-time'>
              August 1, 2016, 11:18am
            </time>
        <span itemprop='position'>#11</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote quote-modified" data-post="4" data-topic="390080">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/kryptix/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar">
</div>
<blockquote>
<p>[quote author=-Nothing link=topic=485877.msg3573414#msg3573414 date=1303233211]and to fix that, don’t use arraylist</p>
</blockquote>
</aside>
<p>What? Why?[/quote]<br>
Easier to use HashMap, in this case in Mob class I would do ‘HashMap&lt;Player, Integer&gt;’ and simply edit the integer when player hits again. Then upon death of NPC I would loop the HashMap and search for the Player who has hitted most and give him the drop, then clearing the HashMap.</p>
<p>Sounds easier to me, but then again, everybody has their own opinions.</p>
      </div>

      <meta itemprop='headline' content='Rscd v25 memory leak'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Peter.html'><span itemprop='name'>Peter</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-19T19:31:37Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:18:38Z' class='post-time'>
              August 1, 2016, 11:18am
            </time>
        <span itemprop='position'>#12</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote="-Nothing, post:11, topic:389968"][quote author=Kryptix link=topic=485877.msg3573502#msg3573502 date=1303239562]</p>
<aside class="quote">
<blockquote>
<p>and to fix that, don’t use arraylist</p>
</blockquote>
</aside>
<p>What? Why?<br>
[/quote]<br>
Easier to use HashMap, in this case in Mob class I would do ‘HashMap&lt;Player, Integer&gt;’ and simply edit the integer when player hits again. Then upon death of NPC I would loop the HashMap and search for the Player who has hitted most and give him the drop, then clearing the HashMap.</p>
<p>Sounds easier to me, but then again, everybody has their own opinions.[/quote]</p>
<p>Wrong, you just created a leak. If the player logs out he’s nolonger refrenced in the player list @ world class, but still refrenced in the hashmap. That means all the refrences the player holds are still there.</p>
<p>A better implementation can be seen at <a href="http://www.assembla.com/code/darkquest/subversion/nodes/DarkQuest/src/org/darkquest/gs/model/Npc.java?rev=80">http://www.assembla.com/code/darkquest/subversion/nodes/DarkQuest/src/org/darkquest/gs/model/Npc.java?rev=80</a> (scroll to the end of the class).</p>
      </div>

      <meta itemprop='headline' content='Rscd v25 memory leak'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="2" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/CodeForFame.html'><span itemprop='name'>CodeForFame</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-19T22:05:30Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:18:52Z' class='post-time'>
              August 1, 2016, 11:18am
            </time>
        <span itemprop='position'>#13</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Peeter, post:12, topic:389968”][quote author=-Nothing link=topic=485877.msg3573509#msg3573509 date=1303240321]</p>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<p>and to fix that, don’t use arraylist</p>
</blockquote>
</aside>
<p>What? Why?</p>
</blockquote>
</aside>
<p>Easier to use HashMap, in this case in Mob class I would do ‘HashMap&lt;Player, Integer&gt;’ and simply edit the integer when player hits again. Then upon death of NPC I would loop the HashMap and search for the Player who has hitted most and give him the drop, then clearing the HashMap.</p>
<p>Sounds easier to me, but then again, everybody has their own opinions.<br>
[/quote]</p>
<p>Wrong, you just created a leak. If the player logs out he’s nolonger refrenced in the player list @ world class, but still refrenced in the hashmap. That means all the refrences the player holds are still there.</p>
<p>A better implementation can be seen at <a href="http://www.assembla.com/code/darkquest/subversion/nodes/DarkQuest/src/org/darkquest/gs/model/Npc.java?rev=80" rel="nofollow noopener">http://www.assembla.com/code/darkquest/subversion/nodes/DarkQuest/src/org/darkquest/gs/model/Npc.java?rev=80</a> (scroll to the end of the class).[/quote]</p>
<p>It’s still shit…</p>
<p><code>public Integer getCombatDamageDoneBy(Player p) {
		if(p == null) {
			return 0;
		}
		if(!combatDamagers.containsKey(p.getUsernameHash())) {
			return 0;
		}
		int dmgDone = combatDamagers.get(p.getUsernameHash());
		return (dmgDone &gt; this.getDef().getHits() ? this.getDef().getHits() : dmgDone);
	}</code></p>
<p>Just did two lookups instead of one…  contains &amp; get</p>
<p>Same goes for range and mage damage…</p>
<p><code>public void addCombatDamage(Player p, int damage) {
		if(combatDamagers.containsKey(p.getUsernameHash())) {
			combatDamagers.put(p.getUsernameHash(), combatDamagers.get(p.getUsernameHash()) + damage);
		}
		else {
			combatDamagers.put(p.getUsernameHash(), damage);
		}
	}</code></p>
<p>Same principle…  You’re doing at least two lookups, and up to three.</p>
<p>Get the damage, check the value, then put it.</p>
<p>Both of these only do two lookups (the first one was just for fun, seeing it looks awkward):</p>
<pre><code class="lang-auto">	public void addCombatDamage(final Player P, final int DAMAGE) {
		final long HASH = P.getUsernameHash();
		final Integer PREV = combatDamagers.put(HASH, DAMAGE);
		if(PREV != null) {
			combatDamagers.put(HASH, PREV + DAMAGE);
		}
	}</code></pre>
<p><code>	public void addCombatDamage(final Player P, final int DAMAGE) {
		final long HASH = P.getUsernameHash();
		final Integer PREV = combatDamagers.get(HASH);
		if(PREV != null) {
			combatDamagers.put(HASH, PREV + DAMAGE);
		} else {
			combatDamagers.put(HASH, DAMAGE);
		}
	}</code></p>
<p>Same goes for range and mage…</p>
<p>Anyway, the entire class has a shitload of redundant code, and there are three hash maps…  What the fuck were you thinking?</p>
<p>How about something like this…</p>
<p><code>	public void addDamage(final long HASH, final int DAMAGE,
			final int DAMAGE_TYPE) {
		final Damage PREV = damage.get(HASH);
		if(PREV != null) {
			PREV.addDamage(DAMAGE, DAMAGE_TYPE);
		} else {
			damage.put(HASH, new Damage(DAMAGE, DAMAGE_TYPE));
		}
	}</code></p>
<p>[code]public class Damage {<br>
public static final int COMBAT_DAMAGE = 0;<br>
public static final int MAGIC_DAMAGE = 1;<br>
public static final int RANGE_DAMAGE = 2;</p>
<pre><code>private final int[] damage = new int[3];


public Damage(final int DAMAGE, final int DAMAGE_TYPE) {
	addDamage(DAMAGE, DAMAGE_TYPE);
}

public int getMagicDamage() {
	return damage[MAGIC_DAMAGE];
}

public void setMagicDamage(final int DAMAGE) {
	this.damage[MAGIC_DAMAGE] = DAMAGE;
}

public void addMagicDamage(final int DAMAGE) {
	this.damage[MAGIC_DAMAGE] += DAMAGE;
}

public int getRangeDamage() {
	return this.damage[RANGE_DAMAGE];
}

public void setRangeDamage(final int DAMAGE) {
	this.damage[RANGE_DAMAGE] = DAMAGE;
}

public void addRangeDamage(final int DAMAGE) {
	this.damage[RANGE_DAMAGE] += DAMAGE;
}

public int getCombatDamage() {
	return damage[COMBAT_DAMAGE];
}

public void setCombatDamage(final int DAMAGE) {
	this.damage[COMBAT_DAMAGE] = DAMAGE;
}

public void addCombatDamage(final int DAMAGE) {
	this.damage[COMBAT_DAMAGE] += DAMAGE;
}

public void addDamage(final int DAMAGE, final int DAMAGE_TYPE) {
	// CBF typing out legit bounds checking...
	this.damage[DAMAGE_TYPE % 3] += DAMAGE;
}

public int getDamage(final int DAMAGE_TYPE) {
	return this.damage[DAMAGE_TYPE % 3];
}
</code></pre>
<p>}[/code]  I added redundant methods in there so people who suck don’t get mind fucked.</p>
<p>There are tons of other issues with your whole design.  For example, you’re hashing the hashed username…  That’s just redundant.</p>
<p>You should follow DRY/DIE more.</p>
<p>Oh, and BTW using a WeakHashMap would remove the memory leak…</p>
<blockquote>More precisely, the presence of a mapping for a given key will not prevent the key from being discarded by the garbage collector...</blockquote>
      </div>

      <meta itemprop='headline' content='Rscd v25 memory leak'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Vrunk.html'><span itemprop='name'>Vrunk</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-20T00:17:56Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:19:06Z' class='post-time'>
              August 1, 2016, 11:19am
            </time>
        <span itemprop='position'>#14</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Sorry to nitpick, but why the CAPITAL_LETTERS for the parameter names? They are immutable (final), but they are not constants (static final). Typically, naming variables with all capital letters is reserved for ‘static final’ constants within a class definition.</p>
      </div>

      <meta itemprop='headline' content='Rscd v25 memory leak'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/CodeForFame.html'><span itemprop='name'>CodeForFame</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-20T00:19:12Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:19:06Z' class='post-time'>
              August 1, 2016, 11:19am
            </time>
        <span itemprop='position'>#15</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="14" data-topic="389968">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/vrunk/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> Vrunk:</div>
<blockquote>
<p>Sorry to nitpick, but why the CAPITAL_LETTERS for the parameter names? They are immutable (final), but they are not constants (static final). Typically, naming variables with all capital letters is reserved for ‘static final’ constants within a class definition.</p>
</blockquote>
</aside>
<p>I used replace all (I wrote the code on the ‘create post’ page the pasted it into gEdit, and back to renaming them), and they got renamed too.  I’m usually lazy with naming conventions like that, and ‘clean up’ when I’m about to ‘close’ it</p>
      </div>

      <meta itemprop='headline' content='Rscd v25 memory leak'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Vrunk.html'><span itemprop='name'>Vrunk</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-20T00:20:12Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:19:06Z' class='post-time'>
              August 1, 2016, 11:19am
            </time>
        <span itemprop='position'>#16</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Refactor it next time (assuming you are using some sort of IDE) <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
      </div>

      <meta itemprop='headline' content='Rscd v25 memory leak'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/CodeForFame.html'><span itemprop='name'>CodeForFame</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-20T00:23:46Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:19:06Z' class='post-time'>
              August 1, 2016, 11:19am
            </time>
        <span itemprop='position'>#17</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="16" data-topic="389968">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/vrunk/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> Vrunk:</div>
<blockquote>
<p>Refactor it next time (assuming you are using some sort of IDE) <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
</blockquote>
</aside>
<p>I wrote it on the page, and replace all’d in gEdit; I was just doing it as a quick example.</p>
      </div>

      <meta itemprop='headline' content='Rscd v25 memory leak'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Vrunk.html'><span itemprop='name'>Vrunk</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-20T00:32:21Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:19:07Z' class='post-time'>
              August 1, 2016, 11:19am
            </time>
        <span itemprop='position'>#18</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Fair enough</p>
      </div>

      <meta itemprop='headline' content='Rscd v25 memory leak'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Nothing1.html'><span itemprop='name'>Nothing1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-20T04:31:47Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:19:31Z' class='post-time'>
              August 1, 2016, 11:19am
            </time>
        <span itemprop='position'>#19</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Peeter, post:12, topic:389968”][quote author=-Nothing link=topic=485877.msg3573509#msg3573509 date=1303240321]</p>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<p>and to fix that, don’t use arraylist</p>
</blockquote>
</aside>
<p>What? Why?</p>
</blockquote>
</aside>
<p>Easier to use HashMap, in this case in Mob class I would do ‘HashMap&lt;Player, Integer&gt;’ and simply edit the integer when player hits again. Then upon death of NPC I would loop the HashMap and search for the Player who has hitted most and give him the drop, then clearing the HashMap.</p>
<p>Sounds easier to me, but then again, everybody has their own opinions.<br>
[/quote]</p>
<p>Wrong, you just created a leak. If the player logs out he’s nolonger refrenced in the player list @ world class, but still refrenced in the hashmap. That means all the refrences the player holds are still there.</p>
<p>A better implementation can be seen at <a href="http://www.assembla.com/code/darkquest/subversion/nodes/DarkQuest/src/org/darkquest/gs/model/Npc.java?rev=80" rel="nofollow noopener">http://www.assembla.com/code/darkquest/subversion/nodes/DarkQuest/src/org/darkquest/gs/model/Npc.java?rev=80</a> (scroll to the end of the class).[/quote]<br>
Of course you remove it on logout. Duhh.</p>
      </div>

      <meta itemprop='headline' content='Rscd v25 memory leak'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Peter.html'><span itemprop='name'>Peter</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-20T06:26:09Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:19:33Z' class='post-time'>
              August 1, 2016, 11:19am
            </time>
        <span itemprop='position'>#20</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote="-Nothing, post:19, topic:389968"][quote author=Peeter link=topic=485877.msg3573532#msg3573532 date=1303241497]</p>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<p>and to fix that, don’t use arraylist</p>
</blockquote>
</aside>
<p>What? Why?</p>
</blockquote>
</aside>
<p>Easier to use HashMap, in this case in Mob class I would do ‘HashMap&lt;Player, Integer&gt;’ and simply edit the integer when player hits again. Then upon death of NPC I would loop the HashMap and search for the Player who has hitted most and give him the drop, then clearing the HashMap.</p>
<p>Sounds easier to me, but then again, everybody has their own opinions.</p>
</blockquote>
</aside>
<p>Wrong, you just created a leak. If the player logs out he’s nolonger refrenced in the player list @ world class, but still refrenced in the hashmap. That means all the refrences the player holds are still there.</p>
<p>A better implementation can be seen at <a href="http://www.assembla.com/code/darkquest/subversion/nodes/DarkQuest/src/org/darkquest/gs/model/Npc.java?rev=80">http://www.assembla.com/code/darkquest/subversion/nodes/DarkQuest/src/org/darkquest/gs/model/Npc.java?rev=80</a> (scroll to the end of the class).<br>
[/quote]<br>
Of course you remove it on logout. Duhh.[/quote]</p>
<p>Are you going to iterate over every single NPC to remove the reference in the list each time a player logs out?</p>
      </div>

      <meta itemprop='headline' content='Rscd v25 memory leak'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>

  <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
      <span itemprop='name'><b><a rel="next" itemprop="url" href="3899684658.html?page=2">next page →</a></b></span>
  </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/rscd-v25-memory-leak/389968 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Aug 2019 03:57:29 GMT -->
</html>
