<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/rscd-v25-memory-leak/389968?page=2 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Aug 2019 03:59:09 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Rscd v25 memory leak - Runescape - moparisthebest.com</title>
    <meta name="description" content="anyone willing to share what causes it and where its at?">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="3899684658.html?page=2" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Rscd v25 memory leak&#39;" href="389968.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/rscd-v25-memory-leak/389968?page=2" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/rscd-v25-memory-leak/389968?page=2" />
<meta property="og:title" content="Rscd v25 memory leak" />
<meta name="twitter:title" content="Rscd v25 memory leak" />
<meta property="og:description" content="[quote=“Peeter, post:20, topic:389968”][quote author=-Nothing link=topic=485877.msg3574070#msg3574070 date=1303273907]   What? Why?    Easier to use HashMap, in this case in Mob class I would do ‘HashMap&lt;Player, Integer&gt;’ and simply edit the integer when player hits again. Then upon death of NPC I would loop the HashMap and search for the Player who has hitted most and give him the drop, then clearing the HashMap.  Sounds easier to me, but then again, everybody has their own opinions.    Wrong, ..." />
<meta name="twitter:description" content="[quote=“Peeter, post:20, topic:389968”][quote author=-Nothing link=topic=485877.msg3574070#msg3574070 date=1303273907]   What? Why?    Easier to use HashMap, in this case in Mob class I would do ‘HashMap&lt;Player, Integer&gt;’ and simply edit the integer when player hits again. Then upon death of NPC I would loop the HashMap and search for the Player who has hitted most and give him the drop, then clearing the HashMap.  Sounds easier to me, but then again, everybody has their own opinions.    Wrong, ..." />
<meta property="article:published_time" content="2011-04-20T08:34:09+00:00" />
<meta property="og:ignore_canonical" content="true" />

      <link rel="prev" href="389968.html">
      <link rel="next" href="3899689ba9.html?page=3">


    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="389968.html">Rscd v25 memory leak</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Nothing1.html'><span itemprop='name'>Nothing1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-20T08:34:09Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:19:50Z' class='post-time'>
              August 1, 2016, 11:19am
            </time>
        <span itemprop='position'>#21</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Peeter, post:20, topic:389968”][quote author=-Nothing link=topic=485877.msg3574070#msg3574070 date=1303273907]</p>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<p>and to fix that, don’t use arraylist</p>
</blockquote>
</aside>
<p>What? Why?</p>
</blockquote>
</aside>
<p>Easier to use HashMap, in this case in Mob class I would do ‘HashMap&lt;Player, Integer&gt;’ and simply edit the integer when player hits again. Then upon death of NPC I would loop the HashMap and search for the Player who has hitted most and give him the drop, then clearing the HashMap.</p>
<p>Sounds easier to me, but then again, everybody has their own opinions.</p>
</blockquote>
</aside>
<p>Wrong, you just created a leak. If the player logs out he’s nolonger refrenced in the player list @ world class, but still refrenced in the hashmap. That means all the refrences the player holds are still there.</p>
<p>A better implementation can be seen at <a href="http://www.assembla.com/code/darkquest/subversion/nodes/DarkQuest/src/org/darkquest/gs/model/Npc.java?rev=80" rel="nofollow noopener">http://www.assembla.com/code/darkquest/subversion/nodes/DarkQuest/src/org/darkquest/gs/model/Npc.java?rev=80</a> (scroll to the end of the class).</p>
</blockquote>
</aside>
<p>Of course you remove it on logout. Duhh.<br>
[/quote]</p>
<p>Are you going to iterate over every single NPC to remove the reference in the list each time a player logs out?[/quote]<br>
I could create a variable on <span class="bbcode-i">Player</span> class to know which position the <span class="bbcode-i">Player</span> is at on the <span class="bbcode-i">NPC</span>’s hit record <span class="bbcode-i">HashMap</span> and then keep track on NPCs player has hitted and remove it on logout.</p>
<pre><code class="lang-auto">for(NPC npc : hittedNPCs) {
	npc.get(this).remove();
}</code></pre>
<p>EDIT: Or just use <span class="bbcode-i">WeakHashMap</span> like CodeForFame said.</p>
<p>EDIT2: On your hit record system, why there’s <span class="bbcode-i">mageDamage</span> seperately, it should be put on <span class="bbcode-i">combatDamage</span>.</p>
      </div>

      <meta itemprop='headline' content='Rscd v25 memory leak'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Peter.html'><span itemprop='name'>Peter</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-20T10:44:15Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:19:56Z' class='post-time'>
              August 1, 2016, 11:19am
            </time>
        <span itemprop='position'>#22</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote="-Nothing, post:21, topic:389968"][quote author=Peeter link=topic=485877.msg3574109#msg3574109 date=1303280769]</p>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<p>and to fix that, don’t use arraylist</p>
</blockquote>
</aside>
<p>What? Why?</p>
</blockquote>
</aside>
<p>Easier to use HashMap, in this case in Mob class I would do ‘HashMap&lt;Player, Integer&gt;’ and simply edit the integer when player hits again. Then upon death of NPC I would loop the HashMap and search for the Player who has hitted most and give him the drop, then clearing the HashMap.</p>
<p>Sounds easier to me, but then again, everybody has their own opinions.</p>
</blockquote>
</aside>
<p>Wrong, you just created a leak. If the player logs out he’s nolonger refrenced in the player list @ world class, but still refrenced in the hashmap. That means all the refrences the player holds are still there.</p>
<p>A better implementation can be seen at <a href="http://www.assembla.com/code/darkquest/subversion/nodes/DarkQuest/src/org/darkquest/gs/model/Npc.java?rev=80">http://www.assembla.com/code/darkquest/subversion/nodes/DarkQuest/src/org/darkquest/gs/model/Npc.java?rev=80</a> (scroll to the end of the class).</p>
</blockquote>
</aside>
<p>Of course you remove it on logout. Duhh.</p>
</blockquote>
</aside>
<p>Are you going to iterate over every single NPC to remove the reference in the list each time a player logs out?<br>
[/quote]<br>
I could create a variable on <span class="bbcode-i">Player</span> class to know which position the <span class="bbcode-i">Player</span> is at on the <span class="bbcode-i">NPC</span>’s hit record <span class="bbcode-i">HashMap</span> and then keep track on NPCs player has hitted and remove it on logout.</p>
<pre><code class="lang-auto">for(NPC npc : hittedNPCs) {
	npc.get(this).remove();
}</code></pre>
<p>EDIT: Or just use <span class="bbcode-i">WeakHashMap</span> like CodeForFame said.</p>
<p>EDIT2: On your hit record system, why there’s <span class="bbcode-i">mageDamage</span> seperately, it should be put on <span class="bbcode-i">combatDamage</span>.[/quote]</p>
<p>Reversed problem, going to iterate over players when a NPC is killed?</p>
<p><a class="mention" href="../../u/edit1-2.html">@Edit1</a>: I wouldn’t use a weakhashmap as it’ll lead to some weird behavior. Person A has shot a NPC to 1 health, GC comes in and cleans your map, Person B shoots a single arrow shot to the NPC and gets the loot. Person A and B both report the bug, but you cannot reproduce it because whenever you test for it, the GC isn’t cleaning your map.</p>
<p>Edit2: You shouldn’t get combat XP from maging someone. Nor vica verca.</p>
      </div>

      <meta itemprop='headline' content='Rscd v25 memory leak'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="2" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Nothing1.html'><span itemprop='name'>Nothing1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-20T12:51:06Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:20:01Z' class='post-time'>
              August 1, 2016, 11:20am
            </time>
        <span itemprop='position'>#23</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Peeter, post:22, topic:389968”][quote author=-Nothing link=topic=485877.msg3574197#msg3574197 date=1303288449]</p>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<p>and to fix that, don’t use arraylist</p>
</blockquote>
</aside>
<p>What? Why?</p>
</blockquote>
</aside>
<p>Easier to use HashMap, in this case in Mob class I would do ‘HashMap&lt;Player, Integer&gt;’ and simply edit the integer when player hits again. Then upon death of NPC I would loop the HashMap and search for the Player who has hitted most and give him the drop, then clearing the HashMap.</p>
<p>Sounds easier to me, but then again, everybody has their own opinions.</p>
</blockquote>
</aside>
<p>Wrong, you just created a leak. If the player logs out he’s nolonger refrenced in the player list @ world class, but still refrenced in the hashmap. That means all the refrences the player holds are still there.</p>
<p>A better implementation can be seen at <a href="http://www.assembla.com/code/darkquest/subversion/nodes/DarkQuest/src/org/darkquest/gs/model/Npc.java?rev=80" rel="nofollow noopener">http://www.assembla.com/code/darkquest/subversion/nodes/DarkQuest/src/org/darkquest/gs/model/Npc.java?rev=80</a> (scroll to the end of the class).</p>
</blockquote>
</aside>
<p>Of course you remove it on logout. Duhh.</p>
</blockquote>
</aside>
<p>Are you going to iterate over every single NPC to remove the reference in the list each time a player logs out?</p>
</blockquote>
</aside>
<p>I could create a variable on <span class="bbcode-i">Player</span> class to know which position the <span class="bbcode-i">Player</span> is at on the <span class="bbcode-i">NPC</span>’s hit record <span class="bbcode-i">HashMap</span> and then keep track on NPCs player has hitted and remove it on logout.</p>
<pre><code class="lang-auto">for(NPC npc : hittedNPCs) {
	npc.get(this).remove();
}</code></pre>
<p>EDIT: Or just use <span class="bbcode-i">WeakHashMap</span> like CodeForFame said.</p>
<p>EDIT2: On your hit record system, why there’s <span class="bbcode-i">mageDamage</span> seperately, it should be put on <span class="bbcode-i">combatDamage</span>.</p>
<p>[/quote]</p>
<p>Reversed problem, going to iterate over players when a NPC is killed?</p>
<p><a class="mention" href="../../u/edit1-2.html">@Edit1</a>: I wouldn’t use a weakhashmap as it’ll lead to some weird behavior. Person A has shot a NPC to 1 health, GC comes in and cleans your map, Person B shoots a single arrow shot to the NPC and gets the loot. Person A and B both report the bug, but you cannot reproduce it because whenever you test for it, the GC isn’t cleaning your map.</p>
<p>Edit2: You shouldn’t get combat XP from maging someone. Nor vica verca. [/quote]<br>
I would iterate the players that are in the HashMap in the NPC class.<br>
Alternative way for removing: I also could remove the player from the HashMap when NPC is killed, if the player doesn’t exist in world, remove it and give the drop to next person who did highest damage.</p>
<p>@ Your Edit2: Oops, that’s right, my bad.</p>
      </div>

      <meta itemprop='headline' content='Rscd v25 memory leak'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/CodeForFame.html'><span itemprop='name'>CodeForFame</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-20T18:31:37Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:20:16Z' class='post-time'>
              August 1, 2016, 11:20am
            </time>
        <span itemprop='position'>#24</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Peeter, post:22, topic:389968”][quote author=-Nothing link=topic=485877.msg3574197#msg3574197 date=1303288449]</p>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<p>and to fix that, don’t use arraylist</p>
</blockquote>
</aside>
<p>What? Why?</p>
</blockquote>
</aside>
<p>Easier to use HashMap, in this case in Mob class I would do ‘HashMap&lt;Player, Integer&gt;’ and simply edit the integer when player hits again. Then upon death of NPC I would loop the HashMap and search for the Player who has hitted most and give him the drop, then clearing the HashMap.</p>
<p>Sounds easier to me, but then again, everybody has their own opinions.</p>
</blockquote>
</aside>
<p>Wrong, you just created a leak. If the player logs out he’s nolonger refrenced in the player list @ world class, but still refrenced in the hashmap. That means all the refrences the player holds are still there.</p>
<p>A better implementation can be seen at <a href="http://www.assembla.com/code/darkquest/subversion/nodes/DarkQuest/src/org/darkquest/gs/model/Npc.java?rev=80" rel="nofollow noopener">http://www.assembla.com/code/darkquest/subversion/nodes/DarkQuest/src/org/darkquest/gs/model/Npc.java?rev=80</a> (scroll to the end of the class).</p>
</blockquote>
</aside>
<p>Of course you remove it on logout. Duhh.</p>
</blockquote>
</aside>
<p>Are you going to iterate over every single NPC to remove the reference in the list each time a player logs out?</p>
</blockquote>
</aside>
<p>I could create a variable on <span class="bbcode-i">Player</span> class to know which position the <span class="bbcode-i">Player</span> is at on the <span class="bbcode-i">NPC</span>’s hit record <span class="bbcode-i">HashMap</span> and then keep track on NPCs player has hitted and remove it on logout.</p>
<pre><code class="lang-auto">for(NPC npc : hittedNPCs) {
	npc.get(this).remove();
}</code></pre>
<p>EDIT: Or just use <span class="bbcode-i">WeakHashMap</span> like CodeForFame said.</p>
<p>EDIT2: On your hit record system, why there’s <span class="bbcode-i">mageDamage</span> seperately, it should be put on <span class="bbcode-i">combatDamage</span>.</p>
<p>[/quote]</p>
<p>Reversed problem, going to iterate over players when a NPC is killed?</p>
<p><a class="mention" href="../../u/edit1-2.html">@Edit1</a>: I wouldn’t use a weakhashmap as it’ll lead to some weird behavior. Person A has shot a NPC to 1 health, GC comes in and cleans your map, Person B shoots a single arrow shot to the NPC and gets the loot. Person A and B both report the bug, but you cannot reproduce it because whenever you test for it, the GC isn’t cleaning your map.</p>
<p>Edit2: You shouldn’t get combat XP from maging someone. Nor vica verca. [/quote]</p>
<p>The GC isn’t going to come in and clear your map for no reason.  If a player logs out (and is able to be cleaned up), then it can clear that entry, but it’s not going to randomly clear the map for no reason, nor will it randomly clear entries from the map.</p>
<p>Seeing you won’t understand this, here is a poorly written example (it’s not like you know the difference between poorly written code and well written code anyway…):</p>
<p>[code]import java.util.Random;<br>
import java.util.WeakHashMap;</p>
<p>public class Npc {</p>
<pre><code>private final WeakHashMap&lt;Player, Damage&gt; damage = new WeakHashMap&lt;Player, Damage&gt;();
private static final Random RAND = new Random();

public void addDamage(final Player player, final int damage,
		final int damageType) {
	final Damage PREV = this.damage.get(player);
	if (PREV != null) {
		PREV.addDamage(damage, damageType);
	} else {
		this.damage.put(player, new Damage(damage, damageType));
	}
}

public int getTotalCombatDamage() {
	int total = 0;
	for (final Player p : damage.keySet()) {
		total += damage.get(p).getCombatDamage();
	}
	return total;
}

public void populateDamage() {
	for (final Player p : Player.players)
		addDamage(p, 1, Damage.COMBAT_DAMAGE);
}

public boolean stillWorks() {
	encourageGC();
	return working();

}

private final boolean working() {
	for (final Player p : Player.players) {
		try {
			damage.get(p).getCombatDamage();
		} catch (Exception e) {
			System.out
					.println("HOLY FUCKING HELL!!!  Magic just happened!");
			return false;
		}
	}
	return true;
}

private final void encourageGC() {
	int val = RAND.nextInt(10);
	while (true) {
		if (val == 4) {
			System.gc();
			break;
		} else {
			new OtherComputation().run(val);
			System.gc();
		}
		val = RAND.nextInt(10);
	}
}
</code></pre>
<p>}<br>
[/code]</p>
<p>[code]import java.util.ArrayList;</p>
<p>public class Player {</p>
<pre><code>public static ArrayList&lt;Player&gt; players = new ArrayList&lt;Player&gt;();
public final int id;

public Player(final int id) {
	this.id = id;
}
</code></pre>
<p>}<br>
[/code]</p>
<p>[code]public class Damage {<br>
public static final int COMBAT_DAMAGE = 0;<br>
public static final int MAGIC_DAMAGE = 1;<br>
public static final int RANGE_DAMAGE = 2;</p>
<pre><code>private final int[] damage = new int[3];


public Damage(final int damage, final int type) {
	this.addDamage(damage, type);
}

public int getMagicDamage() {
	return damage[MAGIC_DAMAGE];
}

public void setMagicDamage(final int damage) {
	this.damage[MAGIC_DAMAGE] = damage;
}

public void addMagicDamage(final int damage) {
	this.damage[MAGIC_DAMAGE] += damage;
}

public int getRangeDamage() {
	return this.damage[RANGE_DAMAGE];
}

public void setRangeDamage(final int damage) {
	this.damage[RANGE_DAMAGE] = damage;
}

public void addRangeDamage(final int damage) {
	this.damage[RANGE_DAMAGE] += damage;
}

public int getCombatDamage() {
	return damage[COMBAT_DAMAGE];
}

public void setCombatDamage(final int damage) {
	this.damage[COMBAT_DAMAGE] = damage;
}

public void addCombatDamage(final int damage) {
	this.damage[COMBAT_DAMAGE] += damage;
}

public void addDamage(final int damage, final int damageType) {
	// CBF typing out legit bounds checking...
	this.damage[damageType % 3] += damage;
}
</code></pre>
<p>}<br>
[/code]</p>
<p>[code]public class OtherComputation {<br>
public final void run(final int n) {<br>
// Anything over 12 is greater than the max value for an int…<br>
factorial(n % 12);<br>
}</p>
<pre><code>	private int factorial(final int n) {
		if (n &lt;= 1) {
			return 1;
		}
		return n * factorial(n - 1);
	}
}[/code]
</code></pre>
<p>[code]public class Test {</p>
<pre><code>private static final Npc[] ns = new Npc[10];
private static final int ITERATIONS = 10;

public static void main(String[] args) {

	for (int i = 0; i &lt; 10; i++) {
		Player.players.add(new Player(i));
	}

	for (int i = 0; i &lt; ns.length; i++) {
		ns[i] = new Npc();
		ns[i].populateDamage();
	}
	System.out.println("Initial damages");
	printDamages();

	System.out.println("Initial check");
	checkForRemovedEntries();

	encourageGC();

	System.out.println("Removing some players");
	Player.players.remove(7);
	Player.players.remove(0);
	Player.players.remove(4);

	printDamages();

	encourageGC();

	System.out.println("Final check");
	checkForRemovedEntries();
}

private static final void checkForRemovedEntries() {
	for (int i = 0; i &lt; ITERATIONS; i++) {
		for (final Npc n : ns) {
			if (!n.stillWorks()) {
				return;
			}
		}
	}
	printDamages();
}

private static final void encourageGC() {
	System.out.println("Encouraging GC");
	for (int i = 0; i &lt; ITERATIONS * 10; i++) {
		new OtherComputation().run(i);
		System.gc();
	}
	printDamages();
}

private static final void printDamages() {
	for (int i = 0; i &lt; 10; i++) {
		System.out.println(i + " - " + ns[i].getTotalCombatDamage());
	}
}
</code></pre>
<p>}<br>
[/code]</p>
<p>VM args (to show it did GC, when, and to essentially force it):<br>
-verbose:gc -Xloggc:log.log -XX:+PrintGCDetails -Xmx4097k -XX:NewSize=192k</p>
<p>Output (it GC’d a few thousand times, if you want run it yourself and check the logs):</p>
<p><code>
Initial damages
0 - 10
1 - 10
2 - 10
3 - 10
4 - 10
5 - 10
6 - 10
7 - 10
8 - 10
9 - 10
Initial check
0 - 10
1 - 10
2 - 10
3 - 10
4 - 10
5 - 10
6 - 10
7 - 10
8 - 10
9 - 10
Encouraging GC
0 - 10
1 - 10
2 - 10
3 - 10
4 - 10
5 - 10
6 - 10
7 - 10
8 - 10
9 - 10
Removing some players
0 - 10
1 - 10
2 - 10
3 - 10
4 - 10
5 - 10
6 - 10
7 - 10
8 - 10
9 - 10
Encouraging GC
0 - 7
1 - 7
2 - 7
3 - 7
4 - 7
5 - 7
6 - 7
7 - 7
8 - 7
9 - 7
Final check
0 - 7
1 - 7
2 - 7
3 - 7
4 - 7
5 - 7
6 - 7
7 - 7
8 - 7
9 - 7</code></p>
<p>Also, if you’re going to complain that the initial attack won’t get his shit because he logged, then who cares?  You didn’t always get it on classic, because it was given to the person who had your PID.</p>
<p>In addition, I’m not saying it’s correct to use the player as the key, but it doesn’t fuck up when you do.  At least not in the way you’re claiming…</p>
      </div>

      <meta itemprop='headline' content='Rscd v25 memory leak'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Peter.html'><span itemprop='name'>Peter</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-21T07:59:44Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:21:16Z' class='post-time'>
              August 1, 2016, 11:21am
            </time>
        <span itemprop='position'>#25</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>So now you have a system where after a player does 99% damage the a NPC, lags out and comes back in and sees a guy shooting the NPC once &amp; getting all the loot. After someone makes a bug report about it, do you call it a “feature”?</p>
      </div>

      <meta itemprop='headline' content='Rscd v25 memory leak'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="2" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Nothing1.html'><span itemprop='name'>Nothing1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-21T10:32:13Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:21:21Z' class='post-time'>
              August 1, 2016, 11:21am
            </time>
        <span itemprop='position'>#26</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote quote-modified" data-post="25" data-topic="389968">
<div class="title">
<div class="quote-controls"></div>
 Peeter:</div>
<blockquote>
<p>So now you have a system where after a player does 99% damage the a NPC, lags out and comes back in and sees a guy shooting the NPC once &amp; getting all the loot. After someone makes a bug report about it, do you call it a “feature”?</p>
</blockquote>
</aside>
<p>Like your little ArrayList system doesn’t do that…</p>
      </div>

      <meta itemprop='headline' content='Rscd v25 memory leak'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/CodeForFame.html'><span itemprop='name'>CodeForFame</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-21T13:51:30Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:21:29Z' class='post-time'>
              August 1, 2016, 11:21am
            </time>
        <span itemprop='position'>#27</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote quote-modified" data-post="25" data-topic="389968">
<div class="title">
<div class="quote-controls"></div>
 Peeter:</div>
<blockquote>
<p>So now you have a system where after a player does 99% damage the a NPC, lags out and comes back in and sees a guy shooting the NPC once &amp; getting all the loot. After someone makes a bug report about it, do you call it a “feature”?</p>
</blockquote>
</aside>
<p>Please learn how to read…</p>
<blockquote>Also, if you're going to complain that the initial attack[er] won't get his shit because he logged, then who cares?  You didn't always get it on classic, because it was given to the person who had your PID.</blockquote>
<p>At this point you’re just arguing over semantic now that I’ve made a fool out of you.</p>
<p>Let me remind you of what you said, seeing you obviously don’t remember:</p>
<blockquote>@Edit1: I wouldn't use a weakhashmap as it'll lead to some weird behavior. Person A has shot a NPC to 1 health, GC comes in and cleans your map, Person B shoots a single arrow shot to the NPC and gets the loot. Person A and B both report the bug, but you cannot reproduce it because whenever you test for it, the GC isn't cleaning your map.</blockquote>
<p>It doesn’t lead to ‘weird’ behavior.  It leads to nearly identical behavior of classic, minus random people getting unwanted XP.  Also, if you actually implement it correctly the people who don’t deserve the drop shouldn’t be getting it instantly.  In addition, you claimed that the GC would just come in and clear your map for no reason what-so-ever; that is not even remotely true.  Then, you had the audacity to imply that it would be difficult to debug, when according to you, that’s the expected behavior…</p>
<p>Anyway, I find it quite funny that I’m arguing for an obviously flawed system, and you can’t even point out the flaws…  Anyone who actually knows how to program would nearly instantly realize what I’ve done (just to prove you wrong) has a terrible design (like I’ve already stated), and be able to point out why it’s terrible.</p>
      </div>

      <meta itemprop='headline' content='Rscd v25 memory leak'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Peter.html'><span itemprop='name'>Peter</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-21T16:03:21Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:21:36Z' class='post-time'>
              August 1, 2016, 11:21am
            </time>
        <span itemprop='position'>#28</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“CodeForFame, post:27, topic:389968”][quote author=Peeter link=topic=485877.msg3575289#msg3575289 date=1303372784]<br>
So now you have a system where after a player does 99% damage the a NPC, lags out and comes back in and sees a guy shooting the NPC once &amp; getting all the loot. After someone makes a bug report about it, do you call it a “feature”?<br>
[/quote]</p>
<p>Please learn how to read…</p>
<aside class="quote">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forum.moparisthebest.com/codeforfame/40/3743_1.png" class="avatar"> CodeForFame:</div>
<blockquote>
<p>Also, if you’re going to complain that the initial attack[er] won’t get his shit because he logged, then who cares?  You didn’t always get it on classic, because it was given to the person who had your PID.[/quote]</p>
</blockquote>
</aside>
<p>I did read, however you still didn’t answer my question.</p>
<p>[quote=“CodeForFame, post:27, topic:389968”]At this point you’re just arguing over semantic now that I’ve made a fool out of you.</p>
<p>Let me remind you of what you said, seeing you obviously don’t remember:</p>
<aside class="quote">
<div class="title">
<div class="quote-controls"></div>
 Peeter:</div>
<blockquote>
<p><a class="mention" href="../../u/edit1-2.html">@Edit1</a>: I wouldn’t use a weakhashmap as it’ll lead to some weird behavior. Person A has shot a NPC to 1 health, GC comes in and cleans your map, Person B shoots a single arrow shot to the NPC and gets the loot. Person A and B both report the bug, but you cannot reproduce it because whenever you test for it, the GC isn’t cleaning your map.</p>
</blockquote>
</aside>
<p>It doesn’t lead to ‘weird’ behavior.  It leads to nearly identical behavior of classic, minus random people getting unwanted XP.  Also, if you actually implement it correctly the people who don’t deserve the drop shouldn’t be getting it instantly.  In addition, you claimed that the GC would just come in and clear your map for no reason what-so-ever; that is not even remotely true.  Then, you had the audacity to imply that it would be difficult to debug, when according to you, that’s the expected behavior…[/quote]</p>
<p>Actually I was talking about using longs as keys, not players. I assumed that longs would be automatically cleaned as primitives are passed by value and not by reference, but it turns out it’s actually the other way around - they’re never cleaned.</p>
<aside class="quote quote-modified" data-post="27" data-topic="389968">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forum.moparisthebest.com/codeforfame/40/3743_1.png" class="avatar"> CodeForFame:</div>
<blockquote>
<p>Anyway, I find it quite funny that I’m arguing for an obviously flawed system, and you can’t even point out the flaws…  Anyone who actually knows how to program would nearly instantly realize what I’ve done (just to prove you wrong) has a terrible design (like I’ve already stated), and be able to point out why it’s terrible.</p>
</blockquote>
</aside>
<p>Oeh you assume a bit too much.</p>
<p>@-Nothing: No.</p>
      </div>

      <meta itemprop='headline' content='Rscd v25 memory leak'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/IlikeArrays.html'><span itemprop='name'>IlikeArrays</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-21T16:08:17Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:21:36Z' class='post-time'>
              August 1, 2016, 11:21am
            </time>
        <span itemprop='position'>#29</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote quote-modified" data-post="6" data-topic="390080">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/kryptix/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar">
</div>
<blockquote>
<p>If we’re making RSC private servers then it’s best to do it as close to how we know it was done on RSC. It was done via PID (well, experience sharing was anyway). You could login with someone else’s PID and get their experience.</p>
</blockquote>
</aside>
<p>PID system will never be replicated, reason being nobody knows EXACTLY how it worked. Also there were a few negatives about it which Andrew talked about and why he removed it.</p>
      </div>

      <meta itemprop='headline' content='Rscd v25 memory leak'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Nothing1.html'><span itemprop='name'>Nothing1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-21T17:01:02Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:21:38Z' class='post-time'>
              August 1, 2016, 11:21am
            </time>
        <span itemprop='position'>#30</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>We could do our best to replicate it. And modify it whenever we see something that was or wasn’t there in RSC</p>
<p><a class="mention" href="../../u/kryptix-2.html">@Kryptix</a>:<br>
serverIndex in RSCD is just an index so clients can interact with eachother, when in RSC it was used for much more things, and serverIndex means the same as playerIndex.</p>
<p>Gonna look at how RSCD assigns the indexes…sec.</p>
<p>EDIT: RSCD just adds the player into top of the players array, and the serverindex will be their position in this array, so it’s pretty much random if you have loads of players online.</p>
<p>EDIT2: <a class="mention" href="../../u/kryptix-2.html">@Kryptix</a>: Why do you get ID like ‘2,957’ if you have about 100-300 players online, that doesn’t make sense at all. Are you sure that all the players are correctly removed from the ‘players’ array on logout?</p>
      </div>

      <meta itemprop='headline' content='Rscd v25 memory leak'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/IlikeArrays.html'><span itemprop='name'>IlikeArrays</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-21T18:30:23Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:21:41Z' class='post-time'>
              August 1, 2016, 11:21am
            </time>
        <span itemprop='position'>#31</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <blockquote>On RSCD it's first click, first serve which I think is the correct approach.</blockquote>
<p>Agreed.</p>
      </div>

      <meta itemprop='headline' content='Rscd v25 memory leak'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/CodeForFame.html'><span itemprop='name'>CodeForFame</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-21T19:09:53Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:21:43Z' class='post-time'>
              August 1, 2016, 11:21am
            </time>
        <span itemprop='position'>#32</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Peeter, post:28, topic:389968”][quote author=CodeForFame link=topic=485877.msg3575529#msg3575529 date=1303393890]</p>
<aside class="quote">
<blockquote>
<p>So now you have a system where after a player does 99% damage the a NPC, lags out and comes back in and sees a guy shooting the NPC once &amp; getting all the loot. After someone makes a bug report about it, do you call it a “feature”?</p>
</blockquote>
</aside>
<p>Please learn how to read…</p>
<aside class="quote">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forum.moparisthebest.com/codeforfame/40/3743_1.png" class="avatar"> CodeForFame:</div>
<blockquote>
<p>Also, if you’re going to complain that the initial attack[er] won’t get his shit because he logged, then who cares?  You didn’t always get it on classic, because it was given to the person who had your PID.</p>
</blockquote>
</aside>
<p>[/quote]</p>
<p>I did read, however you still didn’t answer my question.</p>
<aside class="quote">
<blockquote>
<p>At this point you’re just arguing over semantic now that I’ve made a fool out of you.</p>
<p>Let me remind you of what you said, seeing you obviously don’t remember:</p>
<aside class="quote">
<div class="title">
<div class="quote-controls"></div>
 Peeter:</div>
<blockquote>
<p><a class="mention" href="../../u/edit1-2.html">@Edit1</a>: I wouldn’t use a weakhashmap as it’ll lead to some weird behavior. Person A has shot a NPC to 1 health, GC comes in and cleans your map, Person B shoots a single arrow shot to the NPC and gets the loot. Person A and B both report the bug, but you cannot reproduce it because whenever you test for it, the GC isn’t cleaning your map.</p>
</blockquote>
</aside>
<p>It doesn’t lead to ‘weird’ behavior.  It leads to nearly identical behavior of classic, minus random people getting unwanted XP.  Also, if you actually implement it correctly the people who don’t deserve the drop shouldn’t be getting it instantly.  In addition, you claimed that the GC would just come in and clear your map for no reason what-so-ever; that is not even remotely true.  Then, you had the audacity to imply that it would be difficult to debug, when according to you, that’s the expected behavior…</p>
</blockquote>
</aside>
<p>Actually I was talking about using longs as keys, not players. I assumed that longs would be automatically cleaned as primitives are passed by value and not by reference, but it turns out it’s actually the other way around - they’re never cleaned.</p>
<aside class="quote">
<blockquote>
<p>Anyway, I find it quite funny that I’m arguing for an obviously flawed system, and you can’t even point out the flaws…  Anyone who actually knows how to program would nearly instantly realize what I’ve done (just to prove you wrong) has a terrible design (like I’ve already stated), and be able to point out why it’s terrible.</p>
</blockquote>
</aside>
<p>Oeh you assume a bit too much.</p>
<p>@-Nothing: No.[/quote]</p>
<p>It depends on what you’re personally classing as a feature…  I would say, “You didn’t always get it on classic, because it was given to the person who had your PID.  So, it’s like RSC without the annoyance of unwanted XP.”</p>
<p>If you had fully read, and understood both of those posts you would see the question was already answered.  The bit about not getting unwanted XP was obvious, if you actually understood what the code was doing…</p>
<p>For one, Longs are not primitives, longs are.  You can’t store primitives in a collection like that, because whatever is being stored in it must be an object.  If you knew how autoboxing worked, then you’d realize that when something is autoboxed it’s simply wrapped in a new object.  So, what you need to do is avoid that…  When the player name is set, you can hash it, and have boxed version that is used when you need a boxed version of it.</p>
<p>So, when you actually do it properly, it behaves the same way as it would with any other type of object, because you’re storing an object, not a primitive.  Either way, you were still wrong.</p>
<p>What am I assuming?  I know for a fact that what I wrote has major design flaws, and you’re pointing out things that are completely irrelevant and trivial.  If you really noticed the flaws you’d point them out straight away, because they’re so major; you would also realize that your design shares many of the same flaws mine does, but yours has some extras tossed in.  So, if I’m really making incorrect assumptions, feel free to point out all the design flaws.</p>
      </div>

      <meta itemprop='headline' content='Rscd v25 memory leak'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Nothing1.html'><span itemprop='name'>Nothing1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-21T21:13:27Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:21:48Z' class='post-time'>
              August 1, 2016, 11:21am
            </time>
        <span itemprop='position'>#33</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Finally I see a topic where people talk about programming instead of just trolling/spamming. Keep the converstation going <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
      </div>

      <meta itemprop='headline' content='Rscd v25 memory leak'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/imthenull.html'><span itemprop='name'>imthenull</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-22T03:01:27Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:22:09Z' class='post-time'>
              August 1, 2016, 11:22am
            </time>
        <span itemprop='position'>#34</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Kryptix, post:8, topic:390080”]On RSCE it’s constantly just increased every login (I just checked) so I presume 1,100+ logins have occurred:</p>
<p><img src="http://img821.imageshack.us/img821/4355/unleddq.png" alt width="" height=""></p>
<p>I’m not sure if Zilent changed anything in that aspect, I personally haven’t touched that side of things so no idea if it’s the same as RSCD or not to be honest.[/quote]<br>
I’m pretty sure it is…</p>
      </div>

      <meta itemprop='headline' content='Rscd v25 memory leak'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/nacional.html'><span itemprop='name'>nacional</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-22T03:51:50Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:22:12Z' class='post-time'>
              August 1, 2016, 11:22am
            </time>
        <span itemprop='position'>#35</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I remember in kingpk you would get a PID in the thousands. I really don’t think it has anything to do with how many are online at the time.</p>
      </div>

      <meta itemprop='headline' content='Rscd v25 memory leak'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/xEnt.html'><span itemprop='name'>xEnt</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-22T04:55:36Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:22:16Z' class='post-time'>
              August 1, 2016, 11:22am
            </time>
        <span itemprop='position'>#36</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“IlikeArrays, post:29, topic:389968”][quote author=Kryptix link=topic=485877.msg3575585#msg3575585 date=1303396910]<br>
If we’re making RSC private servers then it’s best to do it as close to how we know it was done on RSC. It was done via PID (well, experience sharing was anyway). You could login with someone else’s PID and get their experience.<br>
[/quote]</p>
<p>PID system will never be replicated, reason being nobody knows EXACTLY how it worked. Also there were a few negatives about it which Andrew talked about and why he removed it.[/quote]</p>
<p>making that system was easy. the RSC server had the same 600ms game loop that we have, therefore if pid2 talks to a banker before pid1 does, as long as they are in the same engine loop, the lower pid will be processed first.</p>
<p>the current system is much better, but getting that old system back takes 2 minutes.</p>
      </div>

      <meta itemprop='headline' content='Rscd v25 memory leak'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Nothing1.html'><span itemprop='name'>Nothing1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-22T10:57:51Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:22:25Z' class='post-time'>
              August 1, 2016, 11:22am
            </time>
        <span itemprop='position'>#37</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Kryptix, post:8, topic:390080”]On RSCE it’s constantly just increased every login (I just checked) so I presume 1,100+ logins have occurred:</p>
<p><img src="http://img821.imageshack.us/img821/4355/unleddq.png" alt width="" height=""></p>
<p>I’m not sure if Zilent changed anything in that aspect, I personally haven’t touched that side of things so no idea if it’s the same as RSCD or not to be honest.[/quote]<br>
ArrayLists are…very random it seems.</p>
      </div>

      <meta itemprop='headline' content='Rscd v25 memory leak'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/IlikeArrays.html'><span itemprop='name'>IlikeArrays</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-22T16:20:27Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:22:51Z' class='post-time'>
              August 1, 2016, 11:22am
            </time>
        <span itemprop='position'>#38</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“xEnt, post:36, topic:389968”][quote author=IlikeArrays link=topic=485877.msg3575639#msg3575639 date=1303402097]</p>
<aside class="quote">
<blockquote>
<p>If we’re making RSC private servers then it’s best to do it as close to how we know it was done on RSC. It was done via PID (well, experience sharing was anyway). You could login with someone else’s PID and get their experience.</p>
</blockquote>
</aside>
<p>PID system will never be replicated, reason being nobody knows EXACTLY how it worked. Also there were a few negatives about it which Andrew talked about and why he removed it.<br>
[/quote]</p>
<p>making that system was easy. the RSC server had the same 600ms game loop that we have, therefore if pid2 talks to a banker before pid1 does, as long as they are in the same engine loop, the lower pid will be processed first.</p>
<p>the current system is much better, but getting that old system back takes 2 minutes.[/quote]</p>
<p>Your forgetting the pking sides of things, if you had a lower pid you could catch further but only in certain directions (see we don’t know) gonna have to take some research for that information. It affected more than just clicking.</p>
      </div>

      <meta itemprop='headline' content='Rscd v25 memory leak'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="2" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/5_1.html'><span itemprop='name'>5_1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-22T17:09:28Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:22:53Z' class='post-time'>
              August 1, 2016, 11:22am
            </time>
        <span itemprop='position'>#39</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“IlikeArrays, post:38, topic:389968”][quote author=xEnt link=topic=485877.msg3576345#msg3576345 date=1303448136]</p>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<p>If we’re making RSC private servers then it’s best to do it as close to how we know it was done on RSC. It was done via PID (well, experience sharing was anyway). You could login with someone else’s PID and get their experience.</p>
</blockquote>
</aside>
<p>PID system will never be replicated, reason being nobody knows EXACTLY how it worked. Also there were a few negatives about it which Andrew talked about and why he removed it.</p>
</blockquote>
</aside>
<p>making that system was easy. the RSC server had the same 600ms game loop that we have, therefore if pid2 talks to a banker before pid1 does, as long as they are in the same engine loop, the lower pid will be processed first.</p>
<p>the current system is much better, but getting that old system back takes 2 minutes.<br>
[/quote]</p>
<p>Your forgetting the pking sides of things, if you had a lower pid you could catch further but only in certain directions (see we don’t know) gonna have to take some research for that information. It affected more than just clicking.[/quote]<br>
If you had lower pid you can catch people who had higher pid. If you have higher pid then the person you’re fighting, you can’t catch them 2sqing if they run(only 1sq you can).</p>
<p>You couldn’t 2sq catch south east even WITH lower pid. You had to 1sq it.</p>
      </div>

      <meta itemprop='headline' content='Rscd v25 memory leak'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/IlikeArrays.html'><span itemprop='name'>IlikeArrays</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-04-22T18:42:23Z'>
            <time itemprop='dateModified' datetime='2016-08-01T11:22:59Z' class='post-time'>
              August 1, 2016, 11:22am
            </time>
        <span itemprop='position'>#40</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>How did it affect ranging or maging?</p>
      </div>

      <meta itemprop='headline' content='Rscd v25 memory leak'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>

  <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
      <span itemprop='name'><a rel="prev" itemprop="url" href="389968.html">← previous page</a></span>
      <span itemprop='name'><b><a rel="next" itemprop="url" href="3899689ba9.html?page=3">next page →</a></b></span>
  </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/rscd-v25-memory-leak/389968?page=2 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Aug 2019 03:59:11 GMT -->
</html>
