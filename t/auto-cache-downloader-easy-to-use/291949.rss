<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Auto Cache Downloader - Easy to Use</title>
    <link>https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949</link>
    <description>[b]I&#39;m known as hardstyle on another site.[/b]

I made this auto cache downloader to be easy to use.
Basicly it downloads to findCacheDir in signlink.java.
Then it gets them name of the download link after the last &quot;/&quot; so if itd was mysite.com/cache.zip the name would be cache.zip.
After that it extracts the downloaded file in the findCacheDir from signlink.java using the name from link.
If cacheVersion#.dat is not in the folder it will automaticly redownload. The cacheVersion#.dat is automaticly made during the process.

Difficulty: 1/10
Client Type: Both
Credits: People from MITB for helping me with the unzip, rick + percentages cacheVersion#.dat, the java website

[IMG]http://i36.tinypic.com/2akjy9i.png[/img]

[b]Renamed:[/b]


[b]Tutorial[/b]
First off make a new class called CacheDownloader.java
Put this in it.

[code]import java.io.File;
import java.io.IOException;
import java.io.OutputStream;
import java.io.FileWriter;
import java.io.BufferedWriter;
import java.io.BufferedOutputStream;
import java.io.BufferedInputStream;
import java.io.FileOutputStream;
import java.io.FileInputStream;
import java.io.InputStream;
import java.net.URLConnection;
import java.net.URL;
import java.util.zip.ZipFile;
import java.util.zip.ZipEntry;
import java.util.zip.ZipInputStream;
import java.util.Enumeration;

import sign.signlink;

public class CacheDownloader {

	private client client;

	private final int BUFFER = 1024;

	/*
	 * Only things you need to change
	 *
	 */
	private final int VERSION = 1; // Version of cache
	private String cacheLink = &quot;LINK TO CACHE HERE&quot;; // Link to cache

	private String fileToExtract = getCacheDir() + getArchivedName();

	public CacheDownloader(client client) {
		this.client = client;
	}

	private void drawLoadingText(String text) {
		client.drawLoadingText(35, text);
		System.out.println(text);
	}


	private void drawLoadingText(int amount, String text) {
		client.drawLoadingText(amount, text);
		System.out.println(text);
	}

	private String getCacheDir() {
		return signlink.findcachedir();
	}

	private String getCacheLink() {
		return cacheLink;
	}

	private int getCacheVersion() {
		return VERSION;
	}

	public CacheDownloader downloadCache() {
		try {
		File location = new File(getCacheDir());
		File version = new File(getCacheDir() + &quot;/cacheVersion&quot; + getCacheVersion() + &quot;.dat&quot;);
		
		if(!location.exists()) {
			//drawLoadingText(&quot;Downloading Cache Please wait...&quot;);
			downloadFile(getCacheLink(), getArchivedName());

			unZip();
			System.out.println(&quot;UNZIP&quot;);

			BufferedWriter versionFile = new BufferedWriter(new FileWriter(getCacheDir() + &quot;/cacheVersion&quot; + getCacheVersion() + &quot;.dat&quot;));
			versionFile.close();
		} else {
			if(!version.exists()) {
				//drawLoadingText(&quot;Downloading Cache Please wait...&quot;);
				downloadFile(getCacheLink(), getArchivedName());

				unZip();
				System.out.println(&quot;UNZIP&quot;);

				BufferedWriter versionFile = new BufferedWriter(new FileWriter(getCacheDir() + &quot;/cacheVersion&quot; + getCacheVersion() + &quot;.dat&quot;));
				versionFile.close();

			} else {
				return null;
			}
		}
		} catch(Exception e) {

		}
		return null;
	}
	
	private void downloadFile(String adress, String localFileName) {
		OutputStream out = null;
		URLConnection conn;
		InputStream in = null;
		
		try {

			URL url = new URL(adress);
			out = new BufferedOutputStream(
				new FileOutputStream(getCacheDir() + &quot;/&quot; +localFileName)); 

			conn = url.openConnection();
			in = conn.getInputStream(); 
		
			byte[] data = new byte[BUFFER]; 
	
			int numRead;
			long numWritten = 0;
			int length = conn.getContentLength();

	
			while((numRead = in.read(data)) != -1) {
				out.write(data, 0, numRead);
				numWritten += numRead;

            			int percentage = (int)(((double)numWritten / (double)length) * 100D);
				drawLoadingText(percentage, &quot;Downloading Cache &quot; + percentage + &quot;%&quot;);

			}

			System.out.println(localFileName + &quot;\t&quot; + numWritten);
			drawLoadingText(&quot;Finished downloading &quot;+getArchivedName()+&quot;!&quot;);

		} catch (Exception exception) {
			exception.printStackTrace();
		} finally {
			try {
				if (in != null) {
					in.close();
				}
				if (out != null) {
					out.close();
				}
			} catch (IOException ioe) {
			}
		}

	}

	private String getArchivedName() {
		int lastSlashIndex = getCacheLink().lastIndexOf(&#39;/&#39;);
		if (lastSlashIndex &gt;= 0 
			&amp;&amp; lastSlashIndex &lt; getCacheLink().length() -1) { 
			return getCacheLink().substring(lastSlashIndex + 1);
		} else {
			System.err.println(&quot;error retreiving archivaed name.&quot;);
		}
		return &quot;&quot;;
	}



	private void unZip() {

		try {
    			InputStream in = 
				new BufferedInputStream(new FileInputStream(fileToExtract));
			ZipInputStream zin = new ZipInputStream(in);
			ZipEntry e;

			while((e=zin.getNextEntry()) != null) {


				if (e.getName().equals(fileToExtract)) {
					unzip(zin, fileToExtract);
					break;
				}
       				unzip(zin, getCacheDir() + e.getName());
				//unzip(zin, getCacheDir() + e.getName());
				System.out.println(&quot;unzipping2 &quot; + e.getName());
			}
			zin.close();

		} catch(Exception e) {
			e.printStackTrace();
		}
	}

	private void unzip(ZipInputStream zin, String s) 
		throws IOException {

		FileOutputStream out = new FileOutputStream(s);
		//System.out.println(&quot;unzipping &quot; + s);
		byte [] b = new byte[BUFFER];
		int len = 0;

		while ((len = zin.read(b)) != -1) {
			out.write(b,0,len);
		}
		out.close();
	}
}[/code]



Change the cache download link and the cache version to what you want on these two lines.
[code]	private final int VERSION = 1; // Version of cache
	private String cacheLink = &quot;Link&quot;; // Link to cache[/code]

Now find this method in client.java

[code]    void startUp()[/code]

And under

[code]        drawLoadingText(20, &quot;Starting up&quot;);[/code]

Simply add
[code]	new CacheDownloader(this).downloadCache();[/code]


K now your done. Your cache should automaticly download next time you start the client.
Your client can also easily be made into a webclient after this ;)



[b]UnRenamed:[/b]

[b]Tutorial[/b]
First off make a new class called CacheDownloader.java
Put this in it.

[code]
import java.io.File;
import java.io.IOException;
import java.io.OutputStream;
import java.io.FileWriter;
import java.io.BufferedWriter;
import java.io.BufferedOutputStream;
import java.io.BufferedInputStream;
import java.io.FileOutputStream;
import java.io.FileInputStream;
import java.io.InputStream;
import java.net.URLConnection;
import java.net.URL;
import java.util.zip.ZipFile;
import java.util.zip.ZipEntry;
import java.util.zip.ZipInputStream;
import java.util.Enumeration;

import sign.signlink;

public class CacheDownloader {

	private client client;

	private final int BUFFER = 1024;

	/*
	 * Only things you need to change
	 *
	 */
	private final int VERSION = 1; // Version of cache
	private String cacheLink = &quot;link&quot;; // Link to cache

	private String fileToExtract = getCacheDir() + getArchivedName();

	public CacheDownloader(client client) {
		this.client = client;
	}

	private void drawLoadingText(String text) {
		client.method13(35, (byte)4, text);
	}

	private void drawLoadingTextAmount(int amount, String text) {
		client.method13(amount, (byte)4, text);
	}

	private String getCacheDir() {
		return signlink.findcachedir();
	}

	private String getCacheLink() {
		return cacheLink;
	}

	private int getCacheVersion() {
		return VERSION;
	}

	public CacheDownloader downloadCache() {
		try {
		File location = new File(getCacheDir());
		File version = new File(getCacheDir() + &quot;/cacheVersion&quot; + getCacheVersion() + &quot;.dat&quot;);
		
		if(!location.exists()) {
			downloadFile(getCacheLink(), getArchivedName());

			BufferedWriter versionFile = new BufferedWriter(new FileWriter(getCacheDir() + &quot;/cacheVersion&quot; + getCacheVersion() + &quot;.dat&quot;));
			versionFile.close();

			unZip();
		} else {
			if(!version.exists()) {
				downloadFile(getCacheLink(), getArchivedName());

				BufferedWriter versionFile = new BufferedWriter(new FileWriter(getCacheDir() + &quot;/cacheVersion&quot; + getCacheVersion() + &quot;.dat&quot;));
				versionFile.close();

				unZip();
			} else {
				return null;
			}
		}
		} catch(Exception e) {

		}
		return null;
	}
	
	int length = 0;

	private int getLength() {
		return length;
	}

	private void downloadFile(String adress, String localFileName) {
		OutputStream out = null;
		URLConnection conn;
		InputStream in = null;
		
		try {

			URL url = new URL(adress);
			out = new BufferedOutputStream(
				new FileOutputStream(getCacheDir() + &quot;/&quot; +localFileName)); 

			conn = url.openConnection();
			in = conn.getInputStream(); 

            		length = conn.getContentLength();
		
			byte[] data = new byte[BUFFER]; 
	
			int numRead;
			long numWritten = 0;
			
			while((numRead = in.read(data)) != -1) {
				out.write(data, 0, numRead);
				numWritten += numRead;
                		int percentage = (int)(((double)numWritten / (double)getLength()) * 100D);
				drawLoadingTextAmount(percentage, &quot;Downloading Cache Please wait... &quot;+percentage+&quot;%&quot;);
			}

			System.out.println(localFileName + &quot;\t&quot; + numWritten);
			drawLoadingText(&quot;Finished downloading &quot;+getArchivedName()+&quot;!&quot;);

		} catch (Exception exception) {
			exception.printStackTrace();
		} finally {
			try {
				if (in != null) {
					in.close();
				}
				if (out != null) {
					out.close();
				}
			} catch (IOException ioe) {
			}
		}

	}

	private String getArchivedName() {
		int lastSlashIndex = getCacheLink().lastIndexOf(&#39;/&#39;);
		if (lastSlashIndex &gt;= 0 
			&amp;&amp; lastSlashIndex &lt; getCacheLink().length() -1) { 
			return getCacheLink().substring(lastSlashIndex + 1);
		} else {
			System.err.println(&quot;error retreiving archivaed name.&quot;);
		}
		return &quot;&quot;;
	}



	private void unZip() {

		try {
    			InputStream in = 
				new BufferedInputStream(new FileInputStream(fileToExtract));
			ZipInputStream zin = new ZipInputStream(in);
			ZipEntry e;

			while((e=zin.getNextEntry()) != null) {


				if (e.getName().equals(fileToExtract)) {
					unzip(zin, fileToExtract);
					break;
				}
       				unzip(zin, getCacheDir() + e.getName());
				//unzip(zin, getCacheDir() + e.getName());
				System.out.println(&quot;unzipping2 &quot; + e.getName());
			}
			zin.close();

		} catch(Exception e) {
			e.printStackTrace();
		}
	}

	private void unzip(ZipInputStream zin, String s) 
		throws IOException {

		System.out.println(&quot;unzipping &quot; + s);

		FileOutputStream out = new FileOutputStream(s);
		byte [] b = new byte[BUFFER];

		int len = 0;
		int numWritten = 0;

		File unzip = new File(fileToExtract);

		while ((len = zin.read(b)) != -1) {
			out.write(b,0,len);
		}
		out.close();
	}
}[/code]

Change the cache download link and the cache version to what you want on these two lines.
[code]	private final int VERSION = 1; // Version of cache
	private String cacheLink = &quot;Link&quot;; // Link to cache[/code]

Now find this method in client.java

[code]    void method6()[/code]

And under

[code]        method13(20, (byte)4, &quot;Starting up&quot;);[/code]

Simply add
[code]	new CacheDownloader(this).downloadCache();[/code]


K now your done. Your cache should automaticly download next time you start the client.
Your client can also easily be made into a webclient after this ;)</description>
    
    <lastBuildDate>Tue, 16 Aug 2011 14:59:07 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Auto Cache Downloader - Easy to Use</title>
        <dc:creator><![CDATA[@I_Roll_Deep I Roll Deep]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/i_roll_deep">@I_Roll_Deep</a> wrote:</p>
          <blockquote>
              <p>Great job, definitly going to use.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949/22">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949/22</link>
        <pubDate>Tue, 16 Aug 2011 14:59:07 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-291949-22</guid>
        <source url="https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949.rss">Auto Cache Downloader - Easy to Use</source>
      </item>
      <item>
        <title>Auto Cache Downloader - Easy to Use</title>
        <dc:creator><![CDATA[@Editt Editt]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/editt">@Editt</a> wrote:</p>
          <blockquote>
              <p>ALREADY FIXED! THX!</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949/21">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949/21</link>
        <pubDate>Fri, 12 Aug 2011 15:58:03 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-291949-21</guid>
        <source url="https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949.rss">Auto Cache Downloader - Easy to Use</source>
      </item>
      <item>
        <title>Auto Cache Downloader - Easy to Use</title>
        <dc:creator><![CDATA[@mkti1 mkti1]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/mkti1">@mkti1</a> wrote:</p>
          <blockquote>
              <p>i did exactly like what you showed us to do ,and i compiled after doin it , everything seemed gr8 but when i run client it run normaly like no download catch <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949/20">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949/20</link>
        <pubDate>Mon, 08 Aug 2011 18:41:03 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-291949-20</guid>
        <source url="https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949.rss">Auto Cache Downloader - Easy to Use</source>
      </item>
      <item>
        <title>Auto Cache Downloader - Easy to Use</title>
        <dc:creator><![CDATA[@xiiliix xiiliix]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/xiiliix">@xiiliix</a> wrote:</p>
          <blockquote>
              <p>same i have no public final void method6()<br>
:eek:</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949/19">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949/19</link>
        <pubDate>Thu, 04 Aug 2011 14:13:39 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-291949-19</guid>
        <source url="https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949.rss">Auto Cache Downloader - Easy to Use</source>
      </item>
      <item>
        <title>Auto Cache Downloader - Easy to Use</title>
        <dc:creator><![CDATA[@john1716 john1716]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/john1716">@john1716</a> wrote:</p>
          <blockquote>
              <p>there is no void startup :[</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949/18">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949/18</link>
        <pubDate>Wed, 03 Aug 2011 03:25:09 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-291949-18</guid>
        <source url="https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949.rss">Auto Cache Downloader - Easy to Use</source>
      </item>
      <item>
        <title>Auto Cache Downloader - Easy to Use</title>
        <dc:creator><![CDATA[@ATROCiTY ATROCiTY~]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/atrocity">@ATROCiTY</a> wrote:</p>
          <blockquote>
              <aside class="quote quote-modified" data-post="16" data-topic="291949">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/maikiew/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> maikiew:</div>
<blockquote>
<p>What do u mean with…put ur download link…what download link? please help</p>
</blockquote>
</aside>
<p>[quote=“Lollyback, post:12, topic:291949”]where you have said:-</p>
<p>Change the cache download link and the cache version to what you want on these two lines.<br>
Code: [Select]<br>
private final int VERSION = 1; // Version of cache<br>
private String cacheLink = “Link”; // Link to cache</p>
<p>What are we changing the link and cache version too?..[/quote]<br>
[b]<br>
Open CacheDownloader.java and find</p>
<pre><code class="lang-auto">private String cacheLink = "Link"; // Link to cache</code></pre>
<p>and change “Link” to your link (direct)</p>
<pre><code class="lang-auto">private String cacheLink = "http://example.com/path/to/cache.zip"; // Link to cache</code></pre>
<p>[quote=“siden, post:15, topic:291949”]Bump<br>
would this work for a 613/614?[/quote]<br>
<span class="bbcode-b"><br>
You won’t know until you try, eh?<br>
</span></p>
<p>i’ll try to edit this for a 647 client, however, everything is so different so it may take a while &gt;:L<br>
All of the methods need to be renamed, the classes are all wrong, etc.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949/17">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949/17</link>
        <pubDate>Mon, 25 Jul 2011 19:35:31 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-291949-17</guid>
        <source url="https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949.rss">Auto Cache Downloader - Easy to Use</source>
      </item>
      <item>
        <title>Auto Cache Downloader - Easy to Use</title>
        <dc:creator><![CDATA[@maikiew maikiew]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/maikiew">@maikiew</a> wrote:</p>
          <blockquote>
              <p>What do u mean with…put ur download link…what download link? please help</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949/16">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949/16</link>
        <pubDate>Mon, 25 Jul 2011 13:58:41 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-291949-16</guid>
        <source url="https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949.rss">Auto Cache Downloader - Easy to Use</source>
      </item>
      <item>
        <title>Auto Cache Downloader - Easy to Use</title>
        <dc:creator><![CDATA[@siden siden]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/siden">@siden</a> wrote:</p>
          <blockquote>
              <p>Bump<br>
would this work for a 613/614?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949/15">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949/15</link>
        <pubDate>Sun, 24 Jul 2011 20:51:06 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-291949-15</guid>
        <source url="https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949.rss">Auto Cache Downloader - Easy to Use</source>
      </item>
      <item>
        <title>Auto Cache Downloader - Easy to Use</title>
        <dc:creator><![CDATA[@Loveandpower Loveandpower]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/loveandpower">@Loveandpower</a> wrote:</p>
          <blockquote>
              <p>You did not add the cachedownloader class</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://forum.moparisthebest.com/uploads/default/original/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a.png" class="site-icon" width="32" height="32">
      <a href="https://forum.moparisthebest.com/" target="_blank">moparisthebest.com</a>
  </header>
  <article class="onebox-body">
    <img src="https://forum.moparisthebest.com/images/default-apple-touch-icon.png" class="thumbnail onebox-avatar" width="144" height="144">

<h3><a href="https://forum.moparisthebest.com/" target="_blank">moparisthebest.com</a></h3>

<p>programming, irc, cars</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949/14">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949/14</link>
        <pubDate>Tue, 31 May 2011 17:19:07 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-291949-14</guid>
        <source url="https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949.rss">Auto Cache Downloader - Easy to Use</source>
      </item>
      <item>
        <title>Auto Cache Downloader - Easy to Use</title>
        <dc:creator><![CDATA[@frenkerscape frenkerscape]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/frenkerscape">@frenkerscape</a> wrote:</p>
          <blockquote>
              <p>can someone help me with this error?</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="http://i53.tinypic.com/23wqxax.jpg" title="23wqxax.jpg" rel="nofollow noopener"><img src="http://i53.tinypic.com/23wqxax.jpg" alt width="623" height="500"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use xlink:href="#far-image"></use></svg><span class="filename">23wqxax.jpg</span><span class="informations">818×656</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949/13">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949/13</link>
        <pubDate>Tue, 31 May 2011 16:21:36 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-291949-13</guid>
        <source url="https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949.rss">Auto Cache Downloader - Easy to Use</source>
      </item>
      <item>
        <title>Auto Cache Downloader - Easy to Use</title>
        <dc:creator><![CDATA[@Lollyback Lollyback]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/lollyback">@Lollyback</a> wrote:</p>
          <blockquote>
              <p>where you have said:-</p>
<p>Change the cache download link and the cache version to what you want on these two lines.<br>
Code: [Select]<br>
private final int VERSION = 1; // Version of cache<br>
private String cacheLink = “Link”; // Link to cache</p>
<p>What are we changing the link and cache version too?..</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949/12">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949/12</link>
        <pubDate>Mon, 14 Mar 2011 02:00:43 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-291949-12</guid>
        <source url="https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949.rss">Auto Cache Downloader - Easy to Use</source>
      </item>
      <item>
        <title>Auto Cache Downloader - Easy to Use</title>
        <dc:creator><![CDATA[@openice123 openice123]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/openice123">@openice123</a> wrote:</p>
          <blockquote>
              <p>In public void unzip() add this to the catch statement.</p>
<pre><code>		e.printStackTrace();
</code></pre>
<p>It wasn’t unzipping either but that was because it was a bad compression method.</p>
<p>Compression level should be normal<br>
Method should be deflate<br>
Dictionary size 32kb<br>
Word Size 32</p>
<p>also only zip the files inside of the folder so your highlight all the needed files, not just zip my_cache_folder.</p>
<p>Heres an example link if anyone needs to test.</p>
<p><a href="http://www.fileden.com/files/2009/2/21/2332640/cache.zip" rel="nofollow noopener">http://www.fileden.com/files/2009/2/21/2332640/cache.zip</a> &lt;- 317ish (Mopars cache)<br>
<a href="http://www.fileden.com/files/2009/2/21/2332640/377cache.zip" rel="nofollow noopener">http://www.fileden.com/files/2009/2/21/2332640/377cache.zip</a> &lt;-377 cache</p>
<p>EDIT:<br>
If you want to add percentages to your downloading<br>
It wasn’t in renamed. I updated the post anyways.</p>
<p>Add this method to the CacheDownloader.java</p>
<p><code>	private void drawLoadingText(int amount, String text) {
		client.drawLoadingText(amount, text);
		System.out.println(text);
	}</code></p>
<p>Then find</p>
<p><code>
	private void downloadFile(String adress, String localFileName) {</code><br>
In there look for</p>
<p><code>
			while((numRead = in.read(data)) != -1) {</code></p>
<p>Under the</p>
<p><code>
				numWritten += numRead;</code></p>
<p>Add</p>
<p><code>
            			int percentage = (int)(((double)numWritten / (double)length) * 100D); // Credits to rick
				drawLoadingText(percentage, "Downloading Cache " + percentage + "%");</code></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949/11">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949/11</link>
        <pubDate>Mon, 28 Sep 2009 20:39:49 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-291949-11</guid>
        <source url="https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949.rss">Auto Cache Downloader - Easy to Use</source>
      </item>
      <item>
        <title>Auto Cache Downloader - Easy to Use</title>
        <dc:creator><![CDATA[@MladenJ MladenJ]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/mladenj">@MladenJ</a> wrote:</p>
          <blockquote>
              <p>Sooo you wanna make me a webclient <img src="https://forum.moparisthebest.com/images/emoji/twitter/blush.png?v=5" title=":blush:" class="emoji" alt=":blush:"><br>
jevtic@live.ca &lt;3333333</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949/10</link>
        <pubDate>Mon, 28 Sep 2009 20:19:15 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-291949-10</guid>
        <source url="https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949.rss">Auto Cache Downloader - Easy to Use</source>
      </item>
      <item>
        <title>Auto Cache Downloader - Easy to Use</title>
        <dc:creator><![CDATA[@Pvp-Evolution Pvp-Evolution]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/pvp-evolution">@Pvp-Evolution</a> wrote:</p>
          <blockquote>
              <p>Thx Bro Love yah!..&lt;3 ;D</p>
<p>Edit: It wont Extract The .Zip File…</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949/9</link>
        <pubDate>Mon, 28 Sep 2009 12:38:16 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-291949-9</guid>
        <source url="https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949.rss">Auto Cache Downloader - Easy to Use</source>
      </item>
      <item>
        <title>Auto Cache Downloader - Easy to Use</title>
        <dc:creator><![CDATA[@h4x0r88 h4x0r88]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/h4x0r88">@h4x0r88</a> wrote:</p>
          <blockquote>
              <p>this is great <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949/8</link>
        <pubDate>Mon, 24 Aug 2009 19:58:24 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-291949-8</guid>
        <source url="https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949.rss">Auto Cache Downloader - Easy to Use</source>
      </item>
      <item>
        <title>Auto Cache Downloader - Easy to Use</title>
        <dc:creator><![CDATA[@farrukhrockz farrukhrockz]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/farrukhrockz">@farrukhrockz</a> wrote:</p>
          <blockquote>
              <p>looks pretty decent.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949/7</link>
        <pubDate>Mon, 24 Aug 2009 18:34:11 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-291949-7</guid>
        <source url="https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949.rss">Auto Cache Downloader - Easy to Use</source>
      </item>
      <item>
        <title>Auto Cache Downloader - Easy to Use</title>
        <dc:creator><![CDATA[@_xero_123 `xero 123]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/_xero_123">@_xero_123</a> wrote:</p>
          <blockquote>
              <p>Looks good, but is this for 500+ because where will the sprites go? And I like Ric914’s better because its not really that hard to understand.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949/6</link>
        <pubDate>Fri, 21 Aug 2009 21:00:45 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-291949-6</guid>
        <source url="https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949.rss">Auto Cache Downloader - Easy to Use</source>
      </item>
      <item>
        <title>Auto Cache Downloader - Easy to Use</title>
        <dc:creator><![CDATA[@pk_hero pk hero]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/pk_hero">@pk_hero</a> wrote:</p>
          <blockquote>
              <p>Now find this method in client.java</p>
<pre><code class="lang-auto">    void startUp()</code></pre>
<p>And under</p>
<pre><code class="lang-auto">        drawLoadingText(20, "Starting up");</code></pre>
<p>Simply add</p>
<pre><code class="lang-auto">	new CacheDownloader(this).downloadCache();</code></pre>
<p>In my Client.java that bit looks like this</p>
<p><code>public final void method6()
    {
        method13(20, (byte)4, "Starting up");
        if(signlink.sunjava)
            super.anInt6 = 5;
        if(aBoolean993)
        {
</code></p>
<p>Do i make it look like this or different?</p>
<pre><code class="lang-auto">public final void method6()
    {
        method13(20, (byte)4, "Starting up");
        new CacheDownloader(this).downloadCache();
        if(signlink.sunjava)
            super.anInt6 = 5;
        if(aBoolean993)
        {</code></pre>
<p>Please help me. <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949/5</link>
        <pubDate>Fri, 21 Aug 2009 18:57:04 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-291949-5</guid>
        <source url="https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949.rss">Auto Cache Downloader - Easy to Use</source>
      </item>
      <item>
        <title>Auto Cache Downloader - Easy to Use</title>
        <dc:creator><![CDATA[@pieman22 pieman22]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/pieman22">@pieman22</a> wrote:</p>
          <blockquote>
              <p>are we makeing a class folder or a java folder at the start</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949/4</link>
        <pubDate>Tue, 18 Aug 2009 08:33:09 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-291949-4</guid>
        <source url="https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949.rss">Auto Cache Downloader - Easy to Use</source>
      </item>
      <item>
        <title>Auto Cache Downloader - Easy to Use</title>
        <dc:creator><![CDATA[@system system]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/system">@system</a> wrote:</p>
          <blockquote>
              <p>Looks pretty good. I’ll test it later.</p>
<p>Could just use the cache downloading part from Ric’s tut, though…</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949/3</link>
        <pubDate>Thu, 30 Jul 2009 18:39:00 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-291949-3</guid>
        <source url="https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949.rss">Auto Cache Downloader - Easy to Use</source>
      </item>
      <item>
        <title>Auto Cache Downloader - Easy to Use</title>
        <dc:creator><![CDATA[@_ikram _ikram]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/_ikram">@_ikram</a> wrote:</p>
          <blockquote>
              <p>Good job, added to the list.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949/2</link>
        <pubDate>Thu, 30 Jul 2009 18:38:41 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-291949-2</guid>
        <source url="https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949.rss">Auto Cache Downloader - Easy to Use</source>
      </item>
      <item>
        <title>Auto Cache Downloader - Easy to Use</title>
        <dc:creator><![CDATA[@openice123 openice123]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/openice123">@openice123</a> wrote:</p>
          <blockquote>
              <p><span class="bbcode-b">I’m known as hardstyle on another site.</span></p>
<p>I made this auto cache downloader to be easy to use.<br>
Basicly it downloads to findCacheDir in signlink.java.<br>
Then it gets them name of the download link after the last “/” so if itd was <a href="http://mysite.com/cache.zip" rel="nofollow noopener">mysite.com/cache.zip</a> the name would be cache.zip.<br>
After that it extracts the downloaded file in the findCacheDir from signlink.java using the name from link.<br>
If cacheVersion#.dat is not in the folder it will automaticly redownload. The cacheVersion#.dat is automaticly made during the process.</p>
<p>Difficulty: 1/10<br>
Client Type: Both<br>
Credits: People from MITB for helping me with the unzip, rick + percentages cacheVersion#.dat, the java website</p>
<p><img src="http://i36.tinypic.com/2akjy9i.png" alt width="" height=""></p>
<p><span class="bbcode-b">Renamed:</span></p>
<p><span class="bbcode-b">Tutorial</span><br>
First off make a new class called CacheDownloader.java<br>
Put this in it.</p>
<p>[code]import java.io.File;<br>
import java.io.IOException;<br>
import java.io.OutputStream;<br>
import java.io.FileWriter;<br>
import java.io.BufferedWriter;<br>
import java.io.BufferedOutputStream;<br>
import java.io.BufferedInputStream;<br>
import java.io.FileOutputStream;<br>
import java.io.FileInputStream;<br>
import java.io.InputStream;<br>
import java.net.URLConnection;<br>
import java.net.URL;<br>
import java.util.zip.ZipFile;<br>
import java.util.zip.ZipEntry;<br>
import java.util.zip.ZipInputStream;<br>
import java.util.Enumeration;</p>
<p>import sign.signlink;</p>
<p>public class CacheDownloader {</p>
<pre><code>private client client;

private final int BUFFER = 1024;

/*
 * Only things you need to change
 *
 */
private final int VERSION = 1; // Version of cache
private String cacheLink = "LINK TO CACHE HERE"; // Link to cache

private String fileToExtract = getCacheDir() + getArchivedName();

public CacheDownloader(client client) {
	this.client = client;
}

private void drawLoadingText(String text) {
	client.drawLoadingText(35, text);
	System.out.println(text);
}


private void drawLoadingText(int amount, String text) {
	client.drawLoadingText(amount, text);
	System.out.println(text);
}

private String getCacheDir() {
	return signlink.findcachedir();
}

private String getCacheLink() {
	return cacheLink;
}

private int getCacheVersion() {
	return VERSION;
}

public CacheDownloader downloadCache() {
	try {
	File location = new File(getCacheDir());
	File version = new File(getCacheDir() + "/cacheVersion" + getCacheVersion() + ".dat");
	
	if(!location.exists()) {
		//drawLoadingText("Downloading Cache Please wait...");
		downloadFile(getCacheLink(), getArchivedName());

		unZip();
		System.out.println("UNZIP");

		BufferedWriter versionFile = new BufferedWriter(new FileWriter(getCacheDir() + "/cacheVersion" + getCacheVersion() + ".dat"));
		versionFile.close();
	} else {
		if(!version.exists()) {
			//drawLoadingText("Downloading Cache Please wait...");
			downloadFile(getCacheLink(), getArchivedName());

			unZip();
			System.out.println("UNZIP");

			BufferedWriter versionFile = new BufferedWriter(new FileWriter(getCacheDir() + "/cacheVersion" + getCacheVersion() + ".dat"));
			versionFile.close();

		} else {
			return null;
		}
	}
	} catch(Exception e) {

	}
	return null;
}

private void downloadFile(String adress, String localFileName) {
	OutputStream out = null;
	URLConnection conn;
	InputStream in = null;
	
	try {

		URL url = new URL(adress);
		out = new BufferedOutputStream(
			new FileOutputStream(getCacheDir() + "/" +localFileName)); 

		conn = url.openConnection();
		in = conn.getInputStream(); 
	
		byte[] data = new byte[BUFFER]; 

		int numRead;
		long numWritten = 0;
		int length = conn.getContentLength();


		while((numRead = in.read(data)) != -1) {
			out.write(data, 0, numRead);
			numWritten += numRead;

        			int percentage = (int)(((double)numWritten / (double)length) * 100D);
			drawLoadingText(percentage, "Downloading Cache " + percentage + "%");

		}

		System.out.println(localFileName + "\t" + numWritten);
		drawLoadingText("Finished downloading "+getArchivedName()+"!");

	} catch (Exception exception) {
		exception.printStackTrace();
	} finally {
		try {
			if (in != null) {
				in.close();
			}
			if (out != null) {
				out.close();
			}
		} catch (IOException ioe) {
		}
	}

}

private String getArchivedName() {
	int lastSlashIndex = getCacheLink().lastIndexOf('/');
	if (lastSlashIndex &gt;= 0 
		&amp;&amp; lastSlashIndex &lt; getCacheLink().length() -1) { 
		return getCacheLink().substring(lastSlashIndex + 1);
	} else {
		System.err.println("error retreiving archivaed name.");
	}
	return "";
}



private void unZip() {

	try {
			InputStream in = 
			new BufferedInputStream(new FileInputStream(fileToExtract));
		ZipInputStream zin = new ZipInputStream(in);
		ZipEntry e;

		while((e=zin.getNextEntry()) != null) {


			if (e.getName().equals(fileToExtract)) {
				unzip(zin, fileToExtract);
				break;
			}
   				unzip(zin, getCacheDir() + e.getName());
			//unzip(zin, getCacheDir() + e.getName());
			System.out.println("unzipping2 " + e.getName());
		}
		zin.close();

	} catch(Exception e) {
		e.printStackTrace();
	}
}

private void unzip(ZipInputStream zin, String s) 
	throws IOException {

	FileOutputStream out = new FileOutputStream(s);
	//System.out.println("unzipping " + s);
	byte [] b = new byte[BUFFER];
	int len = 0;

	while ((len = zin.read(b)) != -1) {
		out.write(b,0,len);
	}
	out.close();
}
</code></pre>
<p>}[/code]</p>
<p>Change the cache download link and the cache version to what you want on these two lines.</p>
<p><code>	private final int VERSION = 1; // Version of cache
	private String cacheLink = "Link"; // Link to cache</code></p>
<p>Now find this method in client.java</p>
<pre><code class="lang-auto">    void startUp()</code></pre>
<p>And under</p>
<pre><code class="lang-auto">        drawLoadingText(20, "Starting up");</code></pre>
<p>Simply add</p>
<pre><code class="lang-auto">	new CacheDownloader(this).downloadCache();</code></pre>
<p>K now your done. Your cache should automaticly download next time you start the client.<br>
Your client can also easily be made into a webclient after this <img src="https://forum.moparisthebest.com/images/emoji/twitter/wink.png?v=5" title=":wink:" class="emoji" alt=":wink:"></p>
<p><span class="bbcode-b">UnRenamed:</span></p>
<p><span class="bbcode-b">Tutorial</span><br>
First off make a new class called CacheDownloader.java<br>
Put this in it.</p>
<p>[code]<br>
import java.io.File;<br>
import java.io.IOException;<br>
import java.io.OutputStream;<br>
import java.io.FileWriter;<br>
import java.io.BufferedWriter;<br>
import java.io.BufferedOutputStream;<br>
import java.io.BufferedInputStream;<br>
import java.io.FileOutputStream;<br>
import java.io.FileInputStream;<br>
import java.io.InputStream;<br>
import java.net.URLConnection;<br>
import java.net.URL;<br>
import java.util.zip.ZipFile;<br>
import java.util.zip.ZipEntry;<br>
import java.util.zip.ZipInputStream;<br>
import java.util.Enumeration;</p>
<p>import sign.signlink;</p>
<p>public class CacheDownloader {</p>
<pre><code>private client client;

private final int BUFFER = 1024;

/*
 * Only things you need to change
 *
 */
private final int VERSION = 1; // Version of cache
private String cacheLink = "link"; // Link to cache

private String fileToExtract = getCacheDir() + getArchivedName();

public CacheDownloader(client client) {
	this.client = client;
}

private void drawLoadingText(String text) {
	client.method13(35, (byte)4, text);
}

private void drawLoadingTextAmount(int amount, String text) {
	client.method13(amount, (byte)4, text);
}

private String getCacheDir() {
	return signlink.findcachedir();
}

private String getCacheLink() {
	return cacheLink;
}

private int getCacheVersion() {
	return VERSION;
}

public CacheDownloader downloadCache() {
	try {
	File location = new File(getCacheDir());
	File version = new File(getCacheDir() + "/cacheVersion" + getCacheVersion() + ".dat");
	
	if(!location.exists()) {
		downloadFile(getCacheLink(), getArchivedName());

		BufferedWriter versionFile = new BufferedWriter(new FileWriter(getCacheDir() + "/cacheVersion" + getCacheVersion() + ".dat"));
		versionFile.close();

		unZip();
	} else {
		if(!version.exists()) {
			downloadFile(getCacheLink(), getArchivedName());

			BufferedWriter versionFile = new BufferedWriter(new FileWriter(getCacheDir() + "/cacheVersion" + getCacheVersion() + ".dat"));
			versionFile.close();

			unZip();
		} else {
			return null;
		}
	}
	} catch(Exception e) {

	}
	return null;
}

int length = 0;

private int getLength() {
	return length;
}

private void downloadFile(String adress, String localFileName) {
	OutputStream out = null;
	URLConnection conn;
	InputStream in = null;
	
	try {

		URL url = new URL(adress);
		out = new BufferedOutputStream(
			new FileOutputStream(getCacheDir() + "/" +localFileName)); 

		conn = url.openConnection();
		in = conn.getInputStream(); 

        		length = conn.getContentLength();
	
		byte[] data = new byte[BUFFER]; 

		int numRead;
		long numWritten = 0;
		
		while((numRead = in.read(data)) != -1) {
			out.write(data, 0, numRead);
			numWritten += numRead;
            		int percentage = (int)(((double)numWritten / (double)getLength()) * 100D);
			drawLoadingTextAmount(percentage, "Downloading Cache Please wait... "+percentage+"%");
		}

		System.out.println(localFileName + "\t" + numWritten);
		drawLoadingText("Finished downloading "+getArchivedName()+"!");

	} catch (Exception exception) {
		exception.printStackTrace();
	} finally {
		try {
			if (in != null) {
				in.close();
			}
			if (out != null) {
				out.close();
			}
		} catch (IOException ioe) {
		}
	}

}

private String getArchivedName() {
	int lastSlashIndex = getCacheLink().lastIndexOf('/');
	if (lastSlashIndex &gt;= 0 
		&amp;&amp; lastSlashIndex &lt; getCacheLink().length() -1) { 
		return getCacheLink().substring(lastSlashIndex + 1);
	} else {
		System.err.println("error retreiving archivaed name.");
	}
	return "";
}



private void unZip() {

	try {
			InputStream in = 
			new BufferedInputStream(new FileInputStream(fileToExtract));
		ZipInputStream zin = new ZipInputStream(in);
		ZipEntry e;

		while((e=zin.getNextEntry()) != null) {


			if (e.getName().equals(fileToExtract)) {
				unzip(zin, fileToExtract);
				break;
			}
   				unzip(zin, getCacheDir() + e.getName());
			//unzip(zin, getCacheDir() + e.getName());
			System.out.println("unzipping2 " + e.getName());
		}
		zin.close();

	} catch(Exception e) {
		e.printStackTrace();
	}
}

private void unzip(ZipInputStream zin, String s) 
	throws IOException {

	System.out.println("unzipping " + s);

	FileOutputStream out = new FileOutputStream(s);
	byte [] b = new byte[BUFFER];

	int len = 0;
	int numWritten = 0;

	File unzip = new File(fileToExtract);

	while ((len = zin.read(b)) != -1) {
		out.write(b,0,len);
	}
	out.close();
}
</code></pre>
<p>}[/code]</p>
<p>Change the cache download link and the cache version to what you want on these two lines.</p>
<p><code>	private final int VERSION = 1; // Version of cache
	private String cacheLink = "Link"; // Link to cache</code></p>
<p>Now find this method in client.java</p>
<pre><code class="lang-auto">    void method6()</code></pre>
<p>And under</p>
<pre><code class="lang-auto">        method13(20, (byte)4, "Starting up");</code></pre>
<p>Simply add</p>
<pre><code class="lang-auto">	new CacheDownloader(this).downloadCache();</code></pre>
<p>K now your done. Your cache should automaticly download next time you start the client.<br>
Your client can also easily be made into a webclient after this <img src="https://forum.moparisthebest.com/images/emoji/twitter/wink.png?v=5" title=":wink:" class="emoji" alt=":wink:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949/1</link>
        <pubDate>Thu, 30 Jul 2009 18:37:08 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-291949-1</guid>
        <source url="https://forum.moparisthebest.com/t/auto-cache-downloader-easy-to-use/291949.rss">Auto Cache Downloader - Easy to Use</source>
      </item>
  </channel>
</rss>
