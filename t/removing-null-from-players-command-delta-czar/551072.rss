<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Removing &quot;null&quot; from ::players command [Delta/Czar]</title>
    <link>https://forum.moparisthebest.com/t/removing-null-from-players-command-delta-czar/551072</link>
    <description>Hello, I am having a little bit of difficulty to remove nulls from my ::players command to just make sure they don&#39;t appear on the list for anyone who is trying to access the server through a different client.

[img]http://s13.postimg.org/9afoa4rsn/Rare_Scape_0001.png[/img]

[code]if (command.equalsIgnoreCase(&quot;players&quot;)) {
		playerMenu();
			sendMessage(&quot;There are currently &quot;+PlayerHandler.getPlayerCount()+&quot; players!&quot;);
		 } 
		 [/code]
My ::players command

[code]public void playerMenu()
	{
		clearQuestInterface();
		for (int i = 0; i &lt; server.playerHandler.maxPlayers; i++)
		{
			if (server.playerHandler.players[i] != null)
			{
				{
					sendQuest(&quot;@dre@Players&quot;, 8144);  //Title
					sendQuest(&quot;@red@&quot;, 8146);
					sendQuest(&quot;@red@&quot; + server.playerHandler.players[i].playerName, 8147 + i);
				}
			}
		}
		sendQuestSomething(8143);
		showInterface(8134);
		flushOutStream();
	}[/code]
My playermenu method

Thankyou in advance</description>
    
    <lastBuildDate>Wed, 15 Apr 2015 15:48:15 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/removing-null-from-players-command-delta-czar/551072.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Removing &quot;null&quot; from ::players command [Delta/Czar]</title>
        <dc:creator><![CDATA[@matzie matzie]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/matzie">@matzie</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="3" data-topic="551072">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/welliton_inc/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> Welliton_inc:</div>
<blockquote>
<p>Alright thankyou Sk8r, you guided me in the right direction and I got it working. Tip top help from you as always.</p>
</blockquote>
</aside>
<p>Note you still have a memory leak though. Find what happens to the client instance when one of the players connects. Somewhere along the way, it is not removed properly from the array in your playerhandler. (Which is why it still wants to show “null” for you).</p>
<p>In the login portion - the beginning of the client constructor most likely - there will be something that sets playerName to null. That will happen, but there is nothing in the PlayerHandler that knows the client was created unsucessfully. Ergo, the client still exists as a null player.</p>
<p>Ex code:</p>
<pre><code class="lang-auto"></code></pre>
<p>somewhere in the client constructor, you return because it “failed” but the players array is still assigned the instance you created. (You returned early, and nulled the playerName - but it still was created and assigned to the array slot, blocking it from any future uses - also meaning that it is not null)<br>
The login portion of <span class="bbcode-s">most</span> all primitive 317s should be rewritten to fix this problem. (PI may have it fixed, it is not a primitive version.)</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/removing-null-from-players-command-delta-czar/551072/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/removing-null-from-players-command-delta-czar/551072/4</link>
        <pubDate>Wed, 15 Apr 2015 15:48:15 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-551072-4</guid>
        <source url="https://forum.moparisthebest.com/t/removing-null-from-players-command-delta-czar/551072.rss">Removing &quot;null&quot; from ::players command [Delta/Czar]</source>
      </item>
      <item>
        <title>Removing &quot;null&quot; from ::players command [Delta/Czar]</title>
        <dc:creator><![CDATA[@Welliton_inc Welliton_inc]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/welliton_inc">@Welliton_inc</a> wrote:</p>
          <blockquote>
              <p>Alright thankyou Sk8r, you guided me in the right direction and I got it working. Tip top help from you as always.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/removing-null-from-players-command-delta-czar/551072/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/removing-null-from-players-command-delta-czar/551072/3</link>
        <pubDate>Mon, 13 Apr 2015 21:14:15 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-551072-3</guid>
        <source url="https://forum.moparisthebest.com/t/removing-null-from-players-command-delta-czar/551072.rss">Removing &quot;null&quot; from ::players command [Delta/Czar]</source>
      </item>
      <item>
        <title>Removing &quot;null&quot; from ::players command [Delta/Czar]</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <p>Your player command could use some minor improvements.</p>
<p>First, don’t loop the “maxPlayers”. You’re going to loop 2000 (mostly null) players to display 2 names? That seems like a waste of resources, even though it’s minuscule. (Trust me, it doesn’t take much effort from the server to do it)</p>
<p>Loop the current list of online players like so:</p>
<p>[code=java]<br>
for (int i = 0; i &lt; server.playerHandler.players.length; i++) {<br>
if (server.playerHandler.players[i] != null) {</p>
<pre><code>		}
	}
</code></pre>
<p>//		Or like this. Note: I don’t know all delta’s naming.<br>
for(Player player : server.playerHandler.players) {<br>
if (player != null) {</p>
<pre><code>		}
	}[/code]
</code></pre>
<p>Second, I noticed you’re sending the tab title inside the loop… I don’t know about you, but I don’t expect the tab title to magically change while looping the online players, so that can be moved above the loop. Only put the part where you’re sending the new player names into the loop.</p>
<p>If it’s still sending nulls, then I’ve got 2 ideas as to why:</p>
<ol>
<li>
<p>The playerName variable is null for some reason. Therefore when sending it to the client, you’re sending “null”…</p>
</li>
<li>
<p>the clearQuestInterface method is what’s sending the null. (Doubtful)</p>
</li>
</ol>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/removing-null-from-players-command-delta-czar/551072/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/removing-null-from-players-command-delta-czar/551072/2</link>
        <pubDate>Mon, 13 Apr 2015 20:53:25 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-551072-2</guid>
        <source url="https://forum.moparisthebest.com/t/removing-null-from-players-command-delta-czar/551072.rss">Removing &quot;null&quot; from ::players command [Delta/Czar]</source>
      </item>
      <item>
        <title>Removing &quot;null&quot; from ::players command [Delta/Czar]</title>
        <dc:creator><![CDATA[@Welliton_inc Welliton_inc]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/welliton_inc">@Welliton_inc</a> wrote:</p>
          <blockquote>
              <p>Hello, I am having a little bit of difficulty to remove nulls from my ::players command to just make sure they don’t appear on the list for anyone who is trying to access the server through a different client.</p>
<p><img src="http://s13.postimg.org/9afoa4rsn/Rare_Scape_0001.png" alt width="" height=""></p>
<p><code>if (command.equalsIgnoreCase("players")) {
		playerMenu();
			sendMessage("There are currently "+PlayerHandler.getPlayerCount()+" players!");
		 } 
		 </code><br>
My ::players command</p>
<p><code>public void playerMenu()
	{
		clearQuestInterface();
		for (int i = 0; i &lt; server.playerHandler.maxPlayers; i++)
		{
			if (server.playerHandler.players[i] != null)
			{
				{
					sendQuest("@dre@Players", 8144);  //Title
					sendQuest("@red@", 8146);
					sendQuest("@red@" + server.playerHandler.players[i].playerName, 8147 + i);
				}
			}
		}
		sendQuestSomething(8143);
		showInterface(8134);
		flushOutStream();
	}</code><br>
My playermenu method</p>
<p>Thankyou in advance</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/removing-null-from-players-command-delta-czar/551072/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/removing-null-from-players-command-delta-czar/551072/1</link>
        <pubDate>Mon, 13 Apr 2015 20:01:08 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-551072-1</guid>
        <source url="https://forum.moparisthebest.com/t/removing-null-from-players-command-delta-czar/551072.rss">Removing &quot;null&quot; from ::players command [Delta/Czar]</source>
      </item>
  </channel>
</rss>
