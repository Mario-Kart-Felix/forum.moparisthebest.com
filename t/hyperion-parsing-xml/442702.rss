<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>[Hyperion] Parsing XML</title>
    <link>https://forum.moparisthebest.com/t/hyperion-parsing-xml/442702</link>
    <description>I&#39;m currently making the NPC spawns for this Hyperion, how would I go about doing this? What I need to know mostly is how to set up parsing for XML, so when the server starts it reads the xml file, and spawns the NPC&#39;s in game.</description>
    
    <lastBuildDate>Sun, 14 Oct 2012 05:42:36 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/hyperion-parsing-xml/442702.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>[Hyperion] Parsing XML</title>
        <dc:creator><![CDATA[@couttiiee couttiiee]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/couttiiee">@couttiiee</a> wrote:</p>
          <blockquote>
              <p>pst. someone put in the time to give you help. the least you can do is help me and i will be on my way</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/hyperion-parsing-xml/442702/14">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/hyperion-parsing-xml/442702/14</link>
        <pubDate>Sun, 14 Oct 2012 05:42:36 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-442702-14</guid>
        <source url="https://forum.moparisthebest.com/t/hyperion-parsing-xml/442702.rss">[Hyperion] Parsing XML</source>
      </item>
      <item>
        <title>[Hyperion] Parsing XML</title>
        <dc:creator><![CDATA[@tyb97 tyb97]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/tyb97">@tyb97</a> wrote:</p>
          <blockquote>
              <p>[quote=“couttiiee, post:12, topic:442702”]i know this topic is old but i added this. the first method into npcdefinition and the second into world.java as said and i created a xml file and named it NPC-SPAWNS and added this into it and ran the server though eclipse, no errors it started up and there isnt an npc there? if someone could help that would be good . im new to hyperion</p>

        
                1
                        
                                3222
                                3216
                                0
                        
        
[/quote]
Thanks for completely grave-digging this. Create your own thread to get help.
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/hyperion-parsing-xml/442702/13">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/hyperion-parsing-xml/442702/13</link>
        <pubDate>Sun, 14 Oct 2012 05:40:09 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-442702-13</guid>
        <source url="https://forum.moparisthebest.com/t/hyperion-parsing-xml/442702.rss">[Hyperion] Parsing XML</source>
      </item>
      <item>
        <title>[Hyperion] Parsing XML</title>
        <dc:creator><![CDATA[@couttiiee couttiiee]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/couttiiee">@couttiiee</a> wrote:</p>
          <blockquote>
              <p>i know this topic is old but i added this. the first method into npcdefinition and the second into world.java as said and i created a xml file and named it NPC-SPAWNS and added this into it and ran the server though eclipse, no errors it started up and there isnt an npc there? if someone could help that would be good . im new to hyperion</p>

        
                1
                        
                                3222
                                3216
                                0
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/hyperion-parsing-xml/442702/12">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/hyperion-parsing-xml/442702/12</link>
        <pubDate>Sun, 14 Oct 2012 05:30:47 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-442702-12</guid>
        <source url="https://forum.moparisthebest.com/t/hyperion-parsing-xml/442702.rss">[Hyperion] Parsing XML</source>
      </item>
      <item>
        <title>[Hyperion] Parsing XML</title>
        <dc:creator><![CDATA[@Sinned Sinned]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sinned">@Sinned</a> wrote:</p>
          <blockquote>
              <p>Lol. Thought it would of been that (even though I assumed it would of been unedited). Good job I said.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/hyperion-parsing-xml/442702/11">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/hyperion-parsing-xml/442702/11</link>
        <pubDate>Sun, 20 May 2012 17:27:12 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-442702-11</guid>
        <source url="https://forum.moparisthebest.com/t/hyperion-parsing-xml/442702.rss">[Hyperion] Parsing XML</source>
      </item>
      <item>
        <title>[Hyperion] Parsing XML</title>
        <dc:creator><![CDATA[@tyb97 tyb97]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/tyb97">@tyb97</a> wrote:</p>
          <blockquote>
              <p>Thanks a ton,</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="http://i1109.photobucket.com/albums/h430/tyb97/HyperionNPC.png" title="HyperionNPC.png" rel="nofollow noopener"><img src="http://i1109.photobucket.com/albums/h430/tyb97/HyperionNPC.png" alt width="545" height="500"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use xlink:href="#far-image"></use></svg><span class="filename">HyperionNPC.png</span><span class="informations">775×711</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div></p>
<p>I should a looked closer, but I had this line,</p>
<pre><code class="lang-auto">private static XStream xstream = null</code></pre>
<p>:o , it instanced it under the static modifier, so all the stuff down below was coming up as null.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/hyperion-parsing-xml/442702/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/hyperion-parsing-xml/442702/10</link>
        <pubDate>Sun, 20 May 2012 16:56:55 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-442702-10</guid>
        <source url="https://forum.moparisthebest.com/t/hyperion-parsing-xml/442702.rss">[Hyperion] Parsing XML</source>
      </item>
      <item>
        <title>[Hyperion] Parsing XML</title>
        <dc:creator><![CDATA[@Sinned Sinned]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sinned">@Sinned</a> wrote:</p>
          <blockquote>
              <p>The only thing within my knowledge to guess at, is to check your instances at the top of the XMLController class.</p>
<pre><code class="lang-auto">/**
	 * The XStream Instance We don't have to implement any drivers as we use the
	 * default set one, which is very fast
	 * 
	 * Before you cry, i'm not making the XStream instance constant as it looks
	 * ugly
	 */
	private static final XStream xstream = new XStream();

	/**
	 * @return the xstream
	 */
	public static XStream getXstream() {
		return xstream;
	}</code></pre>
<p>Although saying that, I’m not sure why they’d be any different as you copy and pasted from me. What does (T) reference to exactly, do you know?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/hyperion-parsing-xml/442702/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/hyperion-parsing-xml/442702/9</link>
        <pubDate>Sun, 20 May 2012 16:42:36 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-442702-9</guid>
        <source url="https://forum.moparisthebest.com/t/hyperion-parsing-xml/442702.rss">[Hyperion] Parsing XML</source>
      </item>
      <item>
        <title>[Hyperion] Parsing XML</title>
        <dc:creator><![CDATA[@tyb97 tyb97]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/tyb97">@tyb97</a> wrote:</p>
          <blockquote>
              <p>Alright, I get nullPointers…</p>
<pre><code class="lang-auto">                            		NPCManager.addWorldNPC2(def, spawn.getLocation());</code></pre>
<p>Is how I have that, since my base doesn’t have all that extra stuff yet, and here is my XML file.</p>
<p><code>&lt;list&gt;
	&lt;npcSpawn&gt;
		&lt;id&gt;1&lt;/id&gt;
			&lt;location&gt;
				&lt;x&gt;3222&lt;/x&gt;
				&lt;y&gt;3216&lt;/y&gt;
				&lt;z&gt;0&lt;/x&gt;
			&lt;/location&gt;
	&lt;/npcSpawn&gt;
&lt;/list&gt;</code><br>
Am I missing something?<br>
The null pointer comes from this line,</p>
<pre><code class="lang-auto">                    return (T) xstream.fromXML(in);</code></pre>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/hyperion-parsing-xml/442702/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/hyperion-parsing-xml/442702/8</link>
        <pubDate>Sun, 20 May 2012 16:26:29 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-442702-8</guid>
        <source url="https://forum.moparisthebest.com/t/hyperion-parsing-xml/442702.rss">[Hyperion] Parsing XML</source>
      </item>
      <item>
        <title>[Hyperion] Parsing XML</title>
        <dc:creator><![CDATA[@Sinned Sinned]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sinned">@Sinned</a> wrote:</p>
          <blockquote>
              <p>See edit again, lol. I can find, copy, paste and submit the message faster than my internet loads the next page. Was trying to edit it quick, lol.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/hyperion-parsing-xml/442702/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/hyperion-parsing-xml/442702/7</link>
        <pubDate>Sun, 20 May 2012 15:22:11 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-442702-7</guid>
        <source url="https://forum.moparisthebest.com/t/hyperion-parsing-xml/442702.rss">[Hyperion] Parsing XML</source>
      </item>
      <item>
        <title>[Hyperion] Parsing XML</title>
        <dc:creator><![CDATA[@tyb97 tyb97]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/tyb97">@tyb97</a> wrote:</p>
          <blockquote>
              <p>Lol love the edit <img src="https://forum.moparisthebest.com/images/emoji/twitter/wink.png?v=5" title=":wink:" class="emoji" alt=":wink:"> But, I don’t have that class, mind sharing it?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/hyperion-parsing-xml/442702/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/hyperion-parsing-xml/442702/6</link>
        <pubDate>Sun, 20 May 2012 15:21:26 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-442702-6</guid>
        <source url="https://forum.moparisthebest.com/t/hyperion-parsing-xml/442702.rss">[Hyperion] Parsing XML</source>
      </item>
      <item>
        <title>[Hyperion] Parsing XML</title>
        <dc:creator><![CDATA[@Sinned Sinned]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sinned">@Sinned</a> wrote:</p>
          <blockquote>
              <p>Try: import org.rs2server.util.XMLController;</p>
<pre><code class="lang-auto">package org.rs2server.util;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;

import org.rs2server.rs2.model.Animation;
import org.rs2server.rs2.model.CombatNPCDefinition;
import org.rs2server.rs2.model.Door;
import org.rs2server.rs2.model.GameObject;
import org.rs2server.rs2.model.ItemSpawn;
import org.rs2server.rs2.model.NPCDrop;
import org.rs2server.rs2.model.NPCSpawn;
import org.rs2server.rs2.model.Sound;
import org.rs2server.rs2.model.CombatNPCDefinition.Skill;
import org.rs2server.rs2.model.boundary.Boundary;
import org.rs2server.rs2.model.equipment.EquipmentDefinition;

import com.thoughtworks.xstream.XStream;

/**
 * Controls all the XML File types in the server
 * 
 * @author Sir Sean Warning! XML can be slow so don't bulk up with useless stuff
 *         :)
 * 
 */
public class XMLController {

	/**
	 * The XStream Instance We don't have to implement any drivers as we use the
	 * default set one, which is very fast
	 * 
	 * Before you cry, i'm not making the XStream instance constant as it looks
	 * ugly
	 */
	private static final XStream xstream = new XStream();

	/**
	 * @return the xstream
	 */
	public static XStream getXstream() {
		return xstream;
	}

	/**
	 * All the xstream alias in here I am not importing it into an another xml
	 * as if we need to refactor it will not edit it
	 */
	static {
		/**
		 * Sets the &lt;code&gt;org.hyperion.rs2.boundary.Boundary.class&lt;/code&gt; class
		 * to boundary
		 */
		xstream.alias("animation", Animation.class);
		xstream.alias("item", org.rs2server.rs2.model.Item.class);
		xstream.alias("npcSpawn", NPCSpawn.class);
		xstream.alias("equipmentDef", org.rs2server.rs2.model.equipment.EquipmentDefinition.class);
		xstream.alias("equipmentType", org.rs2server.rs2.model.container.Equipment.EquipmentType.class);
		xstream.alias("weaponStyle", org.rs2server.rs2.model.equipment.WeaponStyle.class);
		xstream.alias("shop", org.rs2server.rs2.model.Shop.class);
		xstream.alias("CombatDefinition", CombatNPCDefinition.class);
		xstream.alias("skill", Skill.class);
		xstream.alias("boundary", Boundary.class);
		xstream.alias("npcdrop", NPCDrop.class);
		xstream.alias("gameObject", GameObject.class);
		xstream.alias("door", Door.class);
		xstream.alias("skillRequirement", EquipmentDefinition.Skill.class);
		xstream.alias("itemSpawn", ItemSpawn.class);
		xstream.alias("soundEffect", Sound.class);
		/**
		 * Sets the &lt;code&gt;org.hyperion.rs2.model.Location.class&lt;/code&gt; class to
		 * location
		 */
		xstream.alias("location", org.rs2server.rs2.model.Location.class);
	}

	/**
	 * Writes the XML file, using try and finally will allow the file output to
	 * close if an exception is thrown (will stop memory leaks)
	 * 
	 * @param object
	 *            The object getting written
	 * @param file
	 *            The file area and name
	 * @throws IOException
	 */
	public static void writeXML(Object object, File file) throws IOException {
		FileOutputStream out = new FileOutputStream(file);
		try {
			xstream.toXML(object, out);
			out.flush();
		} finally {
			out.close();
		}
	}

	/**
	 * Writes the XML file, using try and finally will allow the file output to
	 * close if an exception is thrown (will stop memory leaks)
	 * 
	 * @param object
	 *            The object getting written
	 * @return The XML
	 */
	public static String writeXML(Object object) {
		return xstream.toXML(object);
	}

	/**
	 * Reads an object from an XML file.
	 * 
	 * @author Graham Edgecombe
	 * @param file
	 *            The file.
	 * @return The object.
	 * @throws IOException
	 *             if an I/O error occurs. Edit Sir Sean: Now uses generic's
	 */
	@SuppressWarnings("unchecked")
	public static &lt;T&gt; T readXML(File file) throws IOException {
		FileInputStream in = new FileInputStream(file);
		try {
			return (T) xstream.fromXML(in);
		} finally {
			in.close();
		}
	}

	/**
	 * Reads an object from an XML string.
	 * 
	 * @author Graham Edgecombe
	 * @param s
	 *            The XML.
	 * @return The object. Edit Sir Sean: Now uses generic's
	 */
	@SuppressWarnings("unchecked")
	public static &lt;T&gt; T readXML(String s) {
		return (T) xstream.fromXML(s);
	}
}</code></pre>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/hyperion-parsing-xml/442702/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/hyperion-parsing-xml/442702/5</link>
        <pubDate>Sun, 20 May 2012 15:18:53 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-442702-5</guid>
        <source url="https://forum.moparisthebest.com/t/hyperion-parsing-xml/442702.rss">[Hyperion] Parsing XML</source>
      </item>
      <item>
        <title>[Hyperion] Parsing XML</title>
        <dc:creator><![CDATA[@tyb97 tyb97]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/tyb97">@tyb97</a> wrote:</p>
          <blockquote>
              <p>It seems I’m only having one issue, what import is for the “XMLController” class?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/hyperion-parsing-xml/442702/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/hyperion-parsing-xml/442702/4</link>
        <pubDate>Sun, 20 May 2012 15:15:39 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-442702-4</guid>
        <source url="https://forum.moparisthebest.com/t/hyperion-parsing-xml/442702.rss">[Hyperion] Parsing XML</source>
      </item>
      <item>
        <title>[Hyperion] Parsing XML</title>
        <dc:creator><![CDATA[@Sinned Sinned]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sinned">@Sinned</a> wrote:</p>
          <blockquote>
              <p>This?</p>
<pre><code class="lang-auto">/**
	 * Loads the NPC spawn list from xml, and spawns all the NPC's.
	 * @throws IOException 
	 */
	public static void init() throws IOException {
		logger.info("Loading NPC spawns...");
		File file = new File(Constants.NPC_SPAWNS_FILE);
		if(file.exists()) {
			List&lt;NPCSpawn&gt; spawns = XMLController.readXML(file);
			for(NPCSpawn spawn : spawns) {
				NPCDefinition def = NPCDefinition.forId(spawn.getId());
				if(def != null) {
					NPC npc = new NPC(def, spawn.getLocation(), spawn.getMinimumLocation(), spawn.getMaximumLocation(), spawn.getDirection());
					World.getWorld().register(npc);
				} else {
//					logger.info("Missing NPC Definition " + spawn.getId() + ".");
				}
			}
			logger.info("Loaded " + spawns.size() + " NPC spawns.");
		} else {
			logger.info("NPC spawns not found.");
		}
	}</code></pre>
<p>Then in your model.World class you would simply have:</p>
<pre><code class="lang-auto">backgroundLoader.submit(new Callable&lt;Object&gt;() {
            @Override
            public Object call() throws Exception {
                NPCDefinition.init();
                CombatNPCDefinition.init(); //Load the combat spawns, or the npc defs wont use them
                NPCSpawn.init(); //define them before spawning or it won't spawn them.
                return null;
            }
        });</code></pre>
<p>I think that’s all that is involved.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/hyperion-parsing-xml/442702/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/hyperion-parsing-xml/442702/3</link>
        <pubDate>Sun, 20 May 2012 14:58:48 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-442702-3</guid>
        <source url="https://forum.moparisthebest.com/t/hyperion-parsing-xml/442702.rss">[Hyperion] Parsing XML</source>
      </item>
      <item>
        <title>[Hyperion] Parsing XML</title>
        <dc:creator><![CDATA[@tyb97 tyb97]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/tyb97">@tyb97</a> wrote:</p>
          <blockquote>
              <p>Can’t seem to get that link to work no matter what I change “<a href="http://google.com" rel="nofollow noopener">google.com</a>” to, but even still, if I wanted to learn how to load through a cfg file, I would just look at a PI, I want to learn how to parse XML.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/hyperion-parsing-xml/442702/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/hyperion-parsing-xml/442702/2</link>
        <pubDate>Sun, 20 May 2012 14:54:14 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-442702-2</guid>
        <source url="https://forum.moparisthebest.com/t/hyperion-parsing-xml/442702.rss">[Hyperion] Parsing XML</source>
      </item>
      <item>
        <title>[Hyperion] Parsing XML</title>
        <dc:creator><![CDATA[@tyb97 tyb97]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/tyb97">@tyb97</a> wrote:</p>
          <blockquote>
              <p>I’m currently making the NPC spawns for this Hyperion, how would I go about doing this? What I need to know mostly is how to set up parsing for XML, so when the server starts it reads the xml file, and spawns the NPC’s in game.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/hyperion-parsing-xml/442702/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/hyperion-parsing-xml/442702/1</link>
        <pubDate>Sun, 20 May 2012 06:58:30 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-442702-1</guid>
        <source url="https://forum.moparisthebest.com/t/hyperion-parsing-xml/442702.rss">[Hyperion] Parsing XML</source>
      </item>
  </channel>
</rss>
