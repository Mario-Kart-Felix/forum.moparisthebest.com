<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Simple file host server and download client I made</title>
    <link>https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089</link>
    <description>This is nothing really special, I have only been programing Java for about 2 months now but ah well I should of been able to do this on the second week. My conventions are off because i&#39;m a lazy fatfuck but I will start using conventions for all the other code I tend to write over my days.

Server:
[code]
/**
 * @(#)serverGui.java
 *
 *
 * @author ziplock
 * @version 1.00 2009/8/18
 */

import javax.swing.*;
import javax.swing.JFrame;
import java.io.*;
import java.net.*;
import java.awt.event.*;
import java.awt.*;

public class serverGui extends JFrame implements Runnable {
		public static serverGui ServerGui;
        private int width = 500;
        private int heigth = 170;
        private JTextArea textBox;
        private JTextArea portBox;
        private JButton button;
        private JButton button2;
        private JLabel label;
        private JLabel label2;
        private JLabel label3;
        private String fileLoc = &quot;C:\\&quot;;
        private JProgressBar bar;
        private String fileName = fileLoc.substring(fileLoc.lastIndexOf(&quot;\\&quot;)+1);
        private int port;
        
        
    public serverGui() {
    	setTitle(&quot;Server&quot;);
        setSize(width, heigth);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setVisible(true);
        setResizable(false);
        setLayout(null);
        Container pane = getContentPane();
        label2 = new JLabel();
        label2.setBounds(215,91,140,14);
        label2.setText(&quot;Offline&quot;);
        label3 = new JLabel();
        label3.setBounds(235,75,140,14);
        label = new JLabel();
        label.setBounds(200,2,140,14);
        label.setText(&quot;File directory&quot;);
        textBox = new JTextArea();
        textBox.setBounds(45,17,400,16);
        textBox.setText(&quot;C:\\&quot;);
        button2 = new JButton();
        button2.setText(&quot;Open..&quot;);
        button2.setBounds(165,35,150,15);
        portBox = new JTextArea();
        portBox.setBounds(165,55,150,15);
        portBox.setText(&quot;7777&quot;);
        button = new JButton();
        button.setText(&quot;Start&quot;);
        button.setBounds(160,105,160,30);
        bar = new JProgressBar();
        bar.setBounds(160,75,160,15);
        bar.setValue(0);
        bar.setMaximum(100);
        
        
        
        //Button&#39;s actions
        button.addActionListener(new ActionListener() {
        		public void actionPerformed(ActionEvent e) {
					clickButton();
        		}	
        });
        //Button2&#39;s actions
        button2.addActionListener(new ActionListener() {
        		public void actionPerformed(ActionEvent e) {
        			clickButton2();
        		}	
        });
        
        
      	pane.add(button);
      	pane.add(textBox);
      	pane.add(label);
      	pane.add(label2);
      	pane.add(label3);
      	pane.add(button2);
      	pane.add(bar);
      	pane.add(portBox);
    }
    

    public static void main(String[] args) {
    	serverGui mainClass = new serverGui();
        
    }
    
    public void run() {
    	try {
    		while (true) {
    			ServerSocket s = new ServerSocket(port);
    			try {
    				Socket c = s.accept();
    				int l = (int) (new File(fileLoc)).length();
    				label2.setText(&quot;Uploading.&quot;);
    				send(&quot;Connection established with : &quot; + c.getInetAddress().getHostName() + &quot; : &quot; + c.getPort());
    				DataOutputStream out = new DataOutputStream(c.getOutputStream());
    				FileInputStream in = new FileInputStream(new File(fileLoc));
    				out.writeBytes(fileName+&quot;\n&quot;);
    				out.writeInt(l);
    				
    				byte[] b = new byte[4096];
    				double q = 0, r = 0;
    				while ((q = in.read(b)) &gt;0) {
    					out.write(b, 0, b.length);
    					r +=q;
    					int progress = (int)((r / (double)l) * 100);
    					label3.setText(progress+&quot;%&quot;);
    					bar.setValue(progress);			
    				}
    				label2.setText(&quot;Online&quot;);
    				bar.setValue(0);
    				s.close();
    				c.close();
    				in.close();
    				out.close();
    			} catch (Exception e){
    				e.printStackTrace();
    			}
    		}
    	} catch (Exception e) {
    		e.printStackTrace();
    	}
    }
    
    public void send(String string) {
    	System.out.println(string);
    }
    
    public void clickButton() {
    	fileLoc = textBox.getText();
    	fileName = fileLoc.substring(fileLoc.lastIndexOf(&quot;\\&quot;)+1);
    	port = Integer.parseInt(portBox.getText());
    	if (fileLoc.length() &lt; 4) {
    		return;
    	}
    	Thread a = new Thread(this);
    	if (button.getText() == &quot;Start&quot;) {
    	label2.setText(&quot;Online&quot;);
		button2.setEnabled(false);
		a.start();
		button.setText(&quot;Stop&quot;);
    	} else if (button.getText() == &quot;Stop&quot;) {
			System.exit(3);
			
    	}
    }
    public void clickButton2() {
    	JFileChooser fC = new JFileChooser();
    	if (fC.showOpenDialog(this) == JFileChooser.APPROVE_OPTION) {
    		fileLoc = &quot;&quot;+fC.getSelectedFile();
    	}
    	textBox.setText(fileLoc);

    }
}
[/code]

Client:
[code]
/**
 * @(#)clientGui.java
 *
 *
 * @author ziplock
 * @version 1.00 2009/8/19
 */
import java.io.*;
import java.net.*;
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
public class clientGui extends JFrame implements Runnable {
	
	
		//Application declerations
		private clientGui mainClass;
		private int port;
		private String ip;
		private String fileDir;
		private String fileName;
		private int fileSize;
		private Socket s;
		//END
		
		
		
		// GUI declarations
        private JButton button;
        private JButton button2;
        private JProgressBar bar;
        private JTextArea textBox;
        private JTextArea ipBox;
        private JTextArea portBox;
        private JLabel label;
        private JLabel label2;
        private JLabel label3;
        private JLabel label4;
        private JLabel label5;
        //END
    public clientGui() {
    	setDefaultCloseOperation(EXIT_ON_CLOSE);
    	constructGui();
    }
    

    public static void main(String[] args) {
        clientGui mainClass = new clientGui();
    }
    
    
    
    
    
    
    public void run() {
    	try {
    	s = new Socket(ip, port);
    	if (s.isConnected()) {
    		button.setText(&quot;Connected&quot;);
    		DataInputStream in = new DataInputStream(s.getInputStream());
    		String fileName = in.readLine();
    		int fileSize = in.readInt();
    		FileOutputStream out = new FileOutputStream(fileDir+&quot;\\&quot;+fileName);
    		byte[] b = new byte[4096];
    		double q = 0, r =0;
    		while ((q = in.read(b)) &gt;0) {
    			out.write(b, 0, (int)q);
    			r += q;
    			int progress = (int)((r / (double)fileSize) * 100);
    			bar.setValue(progress);
    			label5.setText(progress + &quot;%&quot;);
    		}
    	}
    	bar.setValue(0);
    	button.setText(&quot;Connect&quot;);
    	label5.setText(&quot;0%&quot;);
    	s.close();
    	} catch (Exception e) {
    		e.printStackTrace();
    	}
    }
    
    
    
    
    
    
    public void clickButton() {
		if (fileDir == &quot;C:\\&quot;) {
			fileDir = &quot;C:&quot;;
		}
    	port = Integer.parseInt(portBox.getText());
    	ip = ipBox.getText();
    	(new Thread(this)).start();
    	
    }
    
    
    private void clickButton2() {
    	JFileChooser fC = new JFileChooser();
    	fC.setFileSelectionMode(fC.DIRECTORIES_ONLY);
    	if (fC.showOpenDialog(this) == JFileChooser.APPROVE_OPTION) {
    		fileDir = &quot;&quot;+fC.getSelectedFile();
    	}
    	textBox.setText(fileDir);
    }
    
    
    
    
    public void constructGui() {
    	setTitle(&quot;Client&quot;);
    	setSize(200,300);
    	setResizable(false);
    	setVisible(true);
    	setLayout(null);
    	Container pane = getContentPane();
    	
    	/* BAR */
    	bar = new JProgressBar();
    	bar.setValue(0);
    	bar.setMaximum(100);
    	bar.setBounds(1,209,192,15);
    	pane.add(bar);
    	
    	/* BUTTON */
    	button = new JButton();
    	button.setBounds(1,226,192,40);
    	button.setText(&quot;Connect&quot;);
    	pane.add(button);
    	button.addActionListener(new ActionListener() {
    		public void actionPerformed(ActionEvent e) {
    			clickButton();
    		}
    	});
    	
    	/* BUTTON2 */
    	button2 = new JButton();
    	button2.setText(&quot;Directory&quot;);
    	button2.setBounds(40,35,120,20);
    	pane.add(button2);
    	button2.addActionListener(new ActionListener() {
    		public void actionPerformed(ActionEvent e) {
    			clickButton2();
    		}
    	});
    	
    	/* TEXT BOX */
    	textBox = new JTextArea();
    	textBox.setBounds(1,15,192,20);
    	textBox.setEnabled(false);
    	pane.add(textBox);
    	
    	/* LABEL */
    	label = new JLabel();
    	label.setText(&quot;Directory:&quot;);
    	label.setBounds(1,1,100,13);
    	pane.add(label);
    	
    	/* IP BOX */
    	ipBox = new JTextArea();
    	ipBox.setBounds(1,75,192,20);
    	pane.add(ipBox);
    	
    	/* LABEL3 */
    	label3 = new JLabel();
    	label3.setBounds(1,60,100,13);
    	label3.setText(&quot;IP:&quot;);
    	pane.add(label3);
    	
  		/* LABEL4 */
  		label4 = new JLabel();
  		label4.setBounds(1,100,100,13);
  		label4.setText(&quot;Port:&quot;);
  		pane.add(label4);
  		
  		/* PORT BOX */
  		portBox = new JTextArea();
  		portBox.setBounds(1,114,192,20);
  		pane.add(portBox);
  		
  		/* LABEL 5 */
  		label5 = new JLabel();
  		label5.setBounds(90,195,40,13);
  		label5.setText(&quot;0%&quot;);
  		pane.add(label5);
    	
    }
    
}
[/code]
I worked harder on the client then the server as you can probably obviously tell, because it was second in my process of elimination, and I was kind of in a hurry to finish the server.

I would like people to suggest how to improve this with more efficiency or more user-friendly, or whatever.

I would like [b]constructive[/b] comments only please, and for anything else please keep it to yourself or PM it to me, because in most cases I don&#39;t care about your non-constructive opinions.</description>
    
    <lastBuildDate>Wed, 02 Sep 2009 01:29:07 +0000</lastBuildDate>
    <category>General Programming</category>
    <atom:link href="https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Simple file host server and download client I made</title>
        <dc:creator><![CDATA[@abraham2119 abraham2119]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/abraham2119">@abraham2119</a> wrote:</p>
          <blockquote>
              <p>you still havent finished this? <img src="https://forum.moparisthebest.com/images/emoji/twitter/open_mouth.png?v=5" title=":open_mouth:" class="emoji" alt=":open_mouth:"></p>
<p>an http server that only parses “get” headers is not difficult AT ALL.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089/18">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089/18</link>
        <pubDate>Wed, 02 Sep 2009 01:29:07 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-298089-18</guid>
        <source url="https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089.rss">Simple file host server and download client I made</source>
      </item>
      <item>
        <title>Simple file host server and download client I made</title>
        <dc:creator><![CDATA[@ziplock ziplock]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ziplock">@ziplock</a> wrote:</p>
          <blockquote>
              <aside class="quote no-group" data-post="15" data-topic="298089">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/user_avatar/forum.moparisthebest.com/moparisthebest/40/30_1.png" class="avatar"> Moparisthebest:</div>
<blockquote>
<p>What would be easiest, and really best, is to scrap the client completely and create an HTTP server so that any browser could get files from you.  It is much easier than it sounds and would be a great learning experience.</p>
</blockquote>
</aside>
<p>Sounds interesting… I will look into it.[quote=“oksuper_, post:13, topic:298089”]Thanks this will sure make FTP obsolete.[/quote]</p>
<p>This wasn’t created for usefulness… It’s more of a learning experience so all I need it to do for now is work. Effectiveness will hopefully come later. :\</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089/17">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089/17</link>
        <pubDate>Tue, 01 Sep 2009 03:24:29 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-298089-17</guid>
        <source url="https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089.rss">Simple file host server and download client I made</source>
      </item>
      <item>
        <title>Simple file host server and download client I made</title>
        <dc:creator><![CDATA[@abraham2119 abraham2119]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/abraham2119">@abraham2119</a> wrote:</p>
          <blockquote>
              <p>if you just want a simple server that hosts files through http, you can just expect get headers from the http client, so thats all you r application needs to be able to parse</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089/16">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089/16</link>
        <pubDate>Sun, 30 Aug 2009 01:32:42 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-298089-16</guid>
        <source url="https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089.rss">Simple file host server and download client I made</source>
      </item>
      <item>
        <title>Simple file host server and download client I made</title>
        <dc:creator><![CDATA[@moparisthebest Moparisthebest]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/moparisthebest">@moparisthebest</a> wrote:</p>
          <blockquote>
              <p>What would be easiest, and really best, is to scrap the client completely and create an HTTP server so that any browser could get files from you.  It is much easier than it sounds and would be a great learning experience.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089/15">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089/15</link>
        <pubDate>Sat, 29 Aug 2009 05:39:02 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-298089-15</guid>
        <source url="https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089.rss">Simple file host server and download client I made</source>
      </item>
      <item>
        <title>Simple file host server and download client I made</title>
        <dc:creator><![CDATA[@mod_taharok Taharok]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/mod_taharok">@mod_taharok</a> wrote:</p>
          <blockquote>
              <p>[quote=“abraham2119, post:12, topic:298089”]taharok, he is asking for suggestions on how to improve the functionality of the application and p2p isnt a good solution</p>
<p>but if he wants to learn how p2p works then by all means do it[/quote]</p>
<p>And many game developers realize that building your own graphics library isn’t a good solution either, yet you choose to do it because you want to. Maybe instead of advising him what you think is the best solution, just help him solve any issues he is currently having.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089/14">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089/14</link>
        <pubDate>Sat, 29 Aug 2009 00:15:41 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-298089-14</guid>
        <source url="https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089.rss">Simple file host server and download client I made</source>
      </item>
      <item>
        <title>Simple file host server and download client I made</title>
        <dc:creator><![CDATA[@Jython super_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/jython">@Jython</a> wrote:</p>
          <blockquote>
              <p>Thanks this will sure make FTP obsolete.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089/13">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089/13</link>
        <pubDate>Fri, 28 Aug 2009 23:12:40 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-298089-13</guid>
        <source url="https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089.rss">Simple file host server and download client I made</source>
      </item>
      <item>
        <title>Simple file host server and download client I made</title>
        <dc:creator><![CDATA[@abraham2119 abraham2119]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/abraham2119">@abraham2119</a> wrote:</p>
          <blockquote>
              <p>taharok, he is asking for suggestions on how to improve the functionality of the application and p2p isnt a good solution</p>
<p>but if he wants to learn how p2p works then by all means do it</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089/12">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089/12</link>
        <pubDate>Fri, 28 Aug 2009 19:32:17 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-298089-12</guid>
        <source url="https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089.rss">Simple file host server and download client I made</source>
      </item>
      <item>
        <title>Simple file host server and download client I made</title>
        <dc:creator><![CDATA[@mod_taharok Taharok]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/mod_taharok">@mod_taharok</a> wrote:</p>
          <blockquote>
              <aside class="quote no-group" data-post="6" data-topic="298089">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/abraham2119/40/5_513041d5f7104045db30895d3b90af16.png" class="avatar"> abraham2119:</div>
<blockquote>
<p>making it p2p would be pretty fucking pointless</p>
</blockquote>
</aside>
<p>What if he wants to learn how p2p works? You can’t argue with that, otherwise I’d say all of your endeavors on making new graphics libraries are <span class="bbcode-i">pretty fucking pointless</span>.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089/11">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089/11</link>
        <pubDate>Fri, 28 Aug 2009 19:21:57 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-298089-11</guid>
        <source url="https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089.rss">Simple file host server and download client I made</source>
      </item>
      <item>
        <title>Simple file host server and download client I made</title>
        <dc:creator><![CDATA[@ziplock ziplock]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ziplock">@ziplock</a> wrote:</p>
          <blockquote>
              <p>[quote=“abraham2119, post:8, topic:298089”][quote author=ziplock link=topic=394496.msg2932236#msg2932236 date=1251339843]</p>
<aside class="quote no-group">
<blockquote>
<p>making it p2p would be pretty fucking pointless</p>
</blockquote>
</aside>
<p>Thats what i’m getting at.<br>
[/quote]SO DONT MAKE IT P2P. MAKE IT AS I TOLD YOU[/quote]</p>
<p>Thats what I said I was going to do. I never said I was going to make it P2p, because again… That would be pointless.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089/10</link>
        <pubDate>Thu, 27 Aug 2009 02:29:35 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-298089-10</guid>
        <source url="https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089.rss">Simple file host server and download client I made</source>
      </item>
      <item>
        <title>Simple file host server and download client I made</title>
        <dc:creator><![CDATA[@Unhandled Unhandled]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/unhandled">@Unhandled</a> wrote:</p>
          <blockquote>
              <p>Comply with his demands or bad things will happen.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089/9</link>
        <pubDate>Thu, 27 Aug 2009 02:29:21 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-298089-9</guid>
        <source url="https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089.rss">Simple file host server and download client I made</source>
      </item>
      <item>
        <title>Simple file host server and download client I made</title>
        <dc:creator><![CDATA[@abraham2119 abraham2119]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/abraham2119">@abraham2119</a> wrote:</p>
          <blockquote>
              <p>[quote=“ziplock, post:7, topic:298089”][quote author=abraham2119 link=topic=394496.msg2932233#msg2932233 date=1251339769]<br>
making it p2p would be pretty fucking pointless<br>
[/quote]</p>
<p>Thats what i’m getting at.[/quote]SO DONT MAKE IT P2P. MAKE IT AS I TOLD YOU</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089/8</link>
        <pubDate>Thu, 27 Aug 2009 02:28:16 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-298089-8</guid>
        <source url="https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089.rss">Simple file host server and download client I made</source>
      </item>
      <item>
        <title>Simple file host server and download client I made</title>
        <dc:creator><![CDATA[@ziplock ziplock]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ziplock">@ziplock</a> wrote:</p>
          <blockquote>
              <aside class="quote no-group" data-post="6" data-topic="298089">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/abraham2119/40/5_513041d5f7104045db30895d3b90af16.png" class="avatar"> abraham2119:</div>
<blockquote>
<p>making it p2p would be pretty fucking pointless</p>
</blockquote>
</aside>
<p>Thats what i’m getting at.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089/7</link>
        <pubDate>Thu, 27 Aug 2009 02:24:03 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-298089-7</guid>
        <source url="https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089.rss">Simple file host server and download client I made</source>
      </item>
      <item>
        <title>Simple file host server and download client I made</title>
        <dc:creator><![CDATA[@abraham2119 abraham2119]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/abraham2119">@abraham2119</a> wrote:</p>
          <blockquote>
              <p>making it p2p would be pretty fucking pointless</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089/6</link>
        <pubDate>Thu, 27 Aug 2009 02:22:49 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-298089-6</guid>
        <source url="https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089.rss">Simple file host server and download client I made</source>
      </item>
      <item>
        <title>Simple file host server and download client I made</title>
        <dc:creator><![CDATA[@ziplock ziplock]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ziplock">@ziplock</a> wrote:</p>
          <blockquote>
              <p>[quote=“Miss Silabsoft, post:4, topic:298089”][quote author=ziplock link=topic=394496.msg2932134#msg2932134 date=1251336358]</p>
<aside class="quote no-group">
<blockquote>
<p>why choose the file to be sent from the server?</p>
<p>implement a simple protocol for the client to choose the file to download.</p>
<p>ps the server ALWAYS sends the “fileSize” value as: 0, 0, 0, 1 (an int is 4 bytes).</p>
</blockquote>
</aside>
<p>Huum… Interesting. This makes for my next project!</p>
<p>I designed the server as a sort of file host rather than a private peer to peer transfer network.</p>
<p>I will go on and make a more complex server that can host multiple files and make the client able to select which file it wants to transfer, also I should brush up on conventions and efficiency.<br>
[/quote]</p>
<p>he said nothing about peer to peer, hes saying have server receive a packet for the client requesting a particular file rather than the server being responsible to know what needs to be sent[/quote]</p>
<p>Yes, thats what i’m going for in my next project.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089/5</link>
        <pubDate>Thu, 27 Aug 2009 02:21:46 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-298089-5</guid>
        <source url="https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089.rss">Simple file host server and download client I made</source>
      </item>
      <item>
        <title>Simple file host server and download client I made</title>
        <dc:creator><![CDATA[@silabsoft RuneAgent]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/silabsoft">@silabsoft</a> wrote:</p>
          <blockquote>
              <p>[quote=“ziplock, post:3, topic:298089”][quote author=abraham2119 link=topic=394496.msg2932127#msg2932127 date=1251336174]<br>
why choose the file to be sent from the server?</p>
<p>implement a simple protocol for the client to choose the file to download.</p>
<p>ps the server ALWAYS sends the “fileSize” value as: 0, 0, 0, 1 (an int is 4 bytes).<br>
[/quote]</p>
<p>Huum… Interesting. This makes for my next project!</p>
<p>I designed the server as a sort of file host rather than a private peer to peer transfer network.</p>
<p>I will go on and make a more complex server that can host multiple files and make the client able to select which file it wants to transfer, also I should brush up on conventions and efficiency.[/quote]</p>
<p>he said nothing about peer to peer, hes saying have server receive a packet for the client requesting a particular file rather than the server being responsible to know what needs to be sent</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089/4</link>
        <pubDate>Thu, 27 Aug 2009 02:11:14 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-298089-4</guid>
        <source url="https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089.rss">Simple file host server and download client I made</source>
      </item>
      <item>
        <title>Simple file host server and download client I made</title>
        <dc:creator><![CDATA[@ziplock ziplock]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ziplock">@ziplock</a> wrote:</p>
          <blockquote>
              <p>[quote=“abraham2119, post:2, topic:298089”]why choose the file to be sent from the server?</p>
<p>implement a simple protocol for the client to choose the file to download.</p>
<p>ps the server ALWAYS sends the “fileSize” value as: 0, 0, 0, 1 (an int is 4 bytes).[/quote]</p>
<p>Huum… Interesting. This makes for my next project!</p>
<p>I designed the server as a sort of file host rather than a private peer to peer transfer network.</p>
<p>I will go on and make a more complex server that can host multiple files and make the client able to select which file it wants to transfer, also I should brush up on conventions and efficiency.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089/3</link>
        <pubDate>Thu, 27 Aug 2009 01:25:58 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-298089-3</guid>
        <source url="https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089.rss">Simple file host server and download client I made</source>
      </item>
      <item>
        <title>Simple file host server and download client I made</title>
        <dc:creator><![CDATA[@abraham2119 abraham2119]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/abraham2119">@abraham2119</a> wrote:</p>
          <blockquote>
              <p>why choose the file to be sent from the server?</p>
<p>implement a simple protocol for the client to choose the file to download.</p>
<p>ps the server ALWAYS sends the “fileSize” value as: 0, 0, 0, 1 (an int is 4 bytes).</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089/2</link>
        <pubDate>Thu, 27 Aug 2009 01:22:54 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-298089-2</guid>
        <source url="https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089.rss">Simple file host server and download client I made</source>
      </item>
      <item>
        <title>Simple file host server and download client I made</title>
        <dc:creator><![CDATA[@ziplock ziplock]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ziplock">@ziplock</a> wrote:</p>
          <blockquote>
              <p>This is nothing really special, I have only been programing Java for about 2 months now but ah well I should of been able to do this on the second week. My conventions are off because i’m a lazy fatfuck but I will start using conventions for all the other code I tend to write over my days.</p>
<p>Server:</p>
<pre><code class="lang-auto">/**
 * @(#)serverGui.java
 *
 *
 * @author ziplock
 * @version 1.00 2009/8/18
 */

import javax.swing.*;
import javax.swing.JFrame;
import java.io.*;
import java.net.*;
import java.awt.event.*;
import java.awt.*;

public class serverGui extends JFrame implements Runnable {
		public static serverGui ServerGui;
        private int width = 500;
        private int heigth = 170;
        private JTextArea textBox;
        private JTextArea portBox;
        private JButton button;
        private JButton button2;
        private JLabel label;
        private JLabel label2;
        private JLabel label3;
        private String fileLoc = "C:\\";
        private JProgressBar bar;
        private String fileName = fileLoc.substring(fileLoc.lastIndexOf("\\")+1);
        private int port;
        
        
    public serverGui() {
    	setTitle("Server");
        setSize(width, heigth);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setVisible(true);
        setResizable(false);
        setLayout(null);
        Container pane = getContentPane();
        label2 = new JLabel();
        label2.setBounds(215,91,140,14);
        label2.setText("Offline");
        label3 = new JLabel();
        label3.setBounds(235,75,140,14);
        label = new JLabel();
        label.setBounds(200,2,140,14);
        label.setText("File directory");
        textBox = new JTextArea();
        textBox.setBounds(45,17,400,16);
        textBox.setText("C:\\");
        button2 = new JButton();
        button2.setText("Open..");
        button2.setBounds(165,35,150,15);
        portBox = new JTextArea();
        portBox.setBounds(165,55,150,15);
        portBox.setText("7777");
        button = new JButton();
        button.setText("Start");
        button.setBounds(160,105,160,30);
        bar = new JProgressBar();
        bar.setBounds(160,75,160,15);
        bar.setValue(0);
        bar.setMaximum(100);
        
        
        
        //Button's actions
        button.addActionListener(new ActionListener() {
        		public void actionPerformed(ActionEvent e) {
					clickButton();
        		}	
        });
        //Button2's actions
        button2.addActionListener(new ActionListener() {
        		public void actionPerformed(ActionEvent e) {
        			clickButton2();
        		}	
        });
        
        
      	pane.add(button);
      	pane.add(textBox);
      	pane.add(label);
      	pane.add(label2);
      	pane.add(label3);
      	pane.add(button2);
      	pane.add(bar);
      	pane.add(portBox);
    }
    

    public static void main(String[] args) {
    	serverGui mainClass = new serverGui();
        
    }
    
    public void run() {
    	try {
    		while (true) {
    			ServerSocket s = new ServerSocket(port);
    			try {
    				Socket c = s.accept();
    				int l = (int) (new File(fileLoc)).length();
    				label2.setText("Uploading.");
    				send("Connection established with : " + c.getInetAddress().getHostName() + " : " + c.getPort());
    				DataOutputStream out = new DataOutputStream(c.getOutputStream());
    				FileInputStream in = new FileInputStream(new File(fileLoc));
    				out.writeBytes(fileName+"\n");
    				out.writeInt(l);
    				
    				byte[] b = new byte[4096];
    				double q = 0, r = 0;
    				while ((q = in.read(b)) &gt;0) {
    					out.write(b, 0, b.length);
    					r +=q;
    					int progress = (int)((r / (double)l) * 100);
    					label3.setText(progress+"%");
    					bar.setValue(progress);			
    				}
    				label2.setText("Online");
    				bar.setValue(0);
    				s.close();
    				c.close();
    				in.close();
    				out.close();
    			} catch (Exception e){
    				e.printStackTrace();
    			}
    		}
    	} catch (Exception e) {
    		e.printStackTrace();
    	}
    }
    
    public void send(String string) {
    	System.out.println(string);
    }
    
    public void clickButton() {
    	fileLoc = textBox.getText();
    	fileName = fileLoc.substring(fileLoc.lastIndexOf("\\")+1);
    	port = Integer.parseInt(portBox.getText());
    	if (fileLoc.length() &lt; 4) {
    		return;
    	}
    	Thread a = new Thread(this);
    	if (button.getText() == "Start") {
    	label2.setText("Online");
		button2.setEnabled(false);
		a.start();
		button.setText("Stop");
    	} else if (button.getText() == "Stop") {
			System.exit(3);
			
    	}
    }
    public void clickButton2() {
    	JFileChooser fC = new JFileChooser();
    	if (fC.showOpenDialog(this) == JFileChooser.APPROVE_OPTION) {
    		fileLoc = ""+fC.getSelectedFile();
    	}
    	textBox.setText(fileLoc);

    }
}</code></pre>
<p>Client:</p>
<pre><code class="lang-auto">/**
 * @(#)clientGui.java
 *
 *
 * @author ziplock
 * @version 1.00 2009/8/19
 */
import java.io.*;
import java.net.*;
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
public class clientGui extends JFrame implements Runnable {
	
	
		//Application declerations
		private clientGui mainClass;
		private int port;
		private String ip;
		private String fileDir;
		private String fileName;
		private int fileSize;
		private Socket s;
		//END
		
		
		
		// GUI declarations
        private JButton button;
        private JButton button2;
        private JProgressBar bar;
        private JTextArea textBox;
        private JTextArea ipBox;
        private JTextArea portBox;
        private JLabel label;
        private JLabel label2;
        private JLabel label3;
        private JLabel label4;
        private JLabel label5;
        //END
    public clientGui() {
    	setDefaultCloseOperation(EXIT_ON_CLOSE);
    	constructGui();
    }
    

    public static void main(String[] args) {
        clientGui mainClass = new clientGui();
    }
    
    
    
    
    
    
    public void run() {
    	try {
    	s = new Socket(ip, port);
    	if (s.isConnected()) {
    		button.setText("Connected");
    		DataInputStream in = new DataInputStream(s.getInputStream());
    		String fileName = in.readLine();
    		int fileSize = in.readInt();
    		FileOutputStream out = new FileOutputStream(fileDir+"\\"+fileName);
    		byte[] b = new byte[4096];
    		double q = 0, r =0;
    		while ((q = in.read(b)) &gt;0) {
    			out.write(b, 0, (int)q);
    			r += q;
    			int progress = (int)((r / (double)fileSize) * 100);
    			bar.setValue(progress);
    			label5.setText(progress + "%");
    		}
    	}
    	bar.setValue(0);
    	button.setText("Connect");
    	label5.setText("0%");
    	s.close();
    	} catch (Exception e) {
    		e.printStackTrace();
    	}
    }
    
    
    
    
    
    
    public void clickButton() {
		if (fileDir == "C:\\") {
			fileDir = "C:";
		}
    	port = Integer.parseInt(portBox.getText());
    	ip = ipBox.getText();
    	(new Thread(this)).start();
    	
    }
    
    
    private void clickButton2() {
    	JFileChooser fC = new JFileChooser();
    	fC.setFileSelectionMode(fC.DIRECTORIES_ONLY);
    	if (fC.showOpenDialog(this) == JFileChooser.APPROVE_OPTION) {
    		fileDir = ""+fC.getSelectedFile();
    	}
    	textBox.setText(fileDir);
    }
    
    
    
    
    public void constructGui() {
    	setTitle("Client");
    	setSize(200,300);
    	setResizable(false);
    	setVisible(true);
    	setLayout(null);
    	Container pane = getContentPane();
    	
    	/* BAR */
    	bar = new JProgressBar();
    	bar.setValue(0);
    	bar.setMaximum(100);
    	bar.setBounds(1,209,192,15);
    	pane.add(bar);
    	
    	/* BUTTON */
    	button = new JButton();
    	button.setBounds(1,226,192,40);
    	button.setText("Connect");
    	pane.add(button);
    	button.addActionListener(new ActionListener() {
    		public void actionPerformed(ActionEvent e) {
    			clickButton();
    		}
    	});
    	
    	/* BUTTON2 */
    	button2 = new JButton();
    	button2.setText("Directory");
    	button2.setBounds(40,35,120,20);
    	pane.add(button2);
    	button2.addActionListener(new ActionListener() {
    		public void actionPerformed(ActionEvent e) {
    			clickButton2();
    		}
    	});
    	
    	/* TEXT BOX */
    	textBox = new JTextArea();
    	textBox.setBounds(1,15,192,20);
    	textBox.setEnabled(false);
    	pane.add(textBox);
    	
    	/* LABEL */
    	label = new JLabel();
    	label.setText("Directory:");
    	label.setBounds(1,1,100,13);
    	pane.add(label);
    	
    	/* IP BOX */
    	ipBox = new JTextArea();
    	ipBox.setBounds(1,75,192,20);
    	pane.add(ipBox);
    	
    	/* LABEL3 */
    	label3 = new JLabel();
    	label3.setBounds(1,60,100,13);
    	label3.setText("IP:");
    	pane.add(label3);
    	
  		/* LABEL4 */
  		label4 = new JLabel();
  		label4.setBounds(1,100,100,13);
  		label4.setText("Port:");
  		pane.add(label4);
  		
  		/* PORT BOX */
  		portBox = new JTextArea();
  		portBox.setBounds(1,114,192,20);
  		pane.add(portBox);
  		
  		/* LABEL 5 */
  		label5 = new JLabel();
  		label5.setBounds(90,195,40,13);
  		label5.setText("0%");
  		pane.add(label5);
    	
    }
    
}</code></pre>
<p>I worked harder on the client then the server as you can probably obviously tell, because it was second in my process of elimination, and I was kind of in a hurry to finish the server.</p>
<p>I would like people to suggest how to improve this with more efficiency or more user-friendly, or whatever.</p>
<p>I would like <span class="bbcode-b">constructive</span> comments only please, and for anything else please keep it to yourself or PM it to me, because in most cases I don’t care about your non-constructive opinions.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089/1</link>
        <pubDate>Thu, 27 Aug 2009 01:04:47 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-298089-1</guid>
        <source url="https://forum.moparisthebest.com/t/simple-file-host-server-and-download-client-i-made/298089.rss">Simple file host server and download client I made</source>
      </item>
  </channel>
</rss>
