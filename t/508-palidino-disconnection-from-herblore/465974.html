<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/508-palidino-disconnection-from-herblore/465974 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 14:59:37 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>[508][Palidino]Disconnection from Herblore - Runescape - moparisthebest.com</title>
    <meta name="description" content="I made the herblore skill&amp;#39;s potion making, yet I disconnect when I do it... 

ItemOnItem packet: [code=java] package palidino76.rs2.io.packets; 

import palidino76.rs2.players.Player; import palidino76.rs2.players.items.&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="465974.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;[508][Palidino]Disconnection from Herblore&#39;" href="465974.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/508-palidino-disconnection-from-herblore/465974" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/508-palidino-disconnection-from-herblore/465974" />
<meta property="og:title" content="[508][Palidino]Disconnection from Herblore" />
<meta name="twitter:title" content="[508][Palidino]Disconnection from Herblore" />
<meta property="og:description" content="I made the herblore skill’s potion making, yet I disconnect when I do it…  ItemOnItem packet:  package palidino76.rs2.io.packets;  import palidino76.rs2.players.Player; import palidino76.rs2.players.items.PlayerItems; import palidino76.rs2.players.skills.herblore.Herblore; import palidino76.rs2.players.skills.herblore.HerbloreData.FINISHED_DATA; import palidino76.rs2.players.skills.herblore.HerbloreData.UNFINISHED_DATA;  /**  * Item On Item packet.   * Packet: 40  *   * @author Arham 4  *   */  ..." />
<meta name="twitter:description" content="I made the herblore skill’s potion making, yet I disconnect when I do it…  ItemOnItem packet:  package palidino76.rs2.io.packets;  import palidino76.rs2.players.Player; import palidino76.rs2.players.items.PlayerItems; import palidino76.rs2.players.skills.herblore.Herblore; import palidino76.rs2.players.skills.herblore.HerbloreData.FINISHED_DATA; import palidino76.rs2.players.skills.herblore.HerbloreData.UNFINISHED_DATA;  /**  * Item On Item packet.   * Packet: 40  *   * @author Arham 4  *   */  ..." />
<meta property="article:published_time" content="2012-11-04T15:46:24+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="465974.html">[508][Palidino]Disconnection from Herblore</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/arham_4.html'><span itemprop='name'>arham_4</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-11-04T15:46:24Z'>
            <time itemprop='dateModified' datetime='2016-08-04T00:57:19Z' class='post-time'>
              August 4, 2016, 12:57am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I made the herblore skill’s potion making, yet I disconnect when I do it…</p>
<p>ItemOnItem packet:</p>
<pre><code class="lang-auto">package palidino76.rs2.io.packets;

import palidino76.rs2.players.Player;
import palidino76.rs2.players.items.PlayerItems;
import palidino76.rs2.players.skills.herblore.Herblore;
import palidino76.rs2.players.skills.herblore.HerbloreData.FINISHED_DATA;
import palidino76.rs2.players.skills.herblore.HerbloreData.UNFINISHED_DATA;

/**
 * Item On Item packet. 
 * Packet: 40
 * 
 * @author Arham 4
 * 
 */

public class ItemOnItem implements Packet {

	@Override
	public void handlePacket(Player p, int packetId, int packetSize) {
		if (p == null)
			return;
		int usedWith = p.stream.readSignedWordBigEndian();
		int itemUsed = p.stream.readSignedWordA();
		Herblore.canHerblore(itemUsed, usedWith);
	}

}</code></pre>
<p>Herblore:</p>
<pre><code class="lang-auto">package palidino76.rs2.players.skills.herblore;

import palidino76.rs2.players.Player;
import palidino76.rs2.players.items.PlayerItems;
import palidino76.rs2.players.skills.SkillHandler;
import palidino76.rs2.players.skills.herblore.HerbloreData.FINISHED_DATA;
import palidino76.rs2.players.skills.herblore.HerbloreData.UNFINISHED_DATA;

/**
 * Handles skill Herblore
 * 
 * @author Arham 4
 */
public class Herblore extends SkillHandler {

	/**
	 * All the calling.
	 */
	public static Player c;
	public static PlayerItems pi;
	public static UNFINISHED_DATA unf;
	public static FINISHED_DATA fin;

	/**
	 * Allows us to call the important stuff.
	 * 
	 * @param c
	 *            Client abbreviation
	 * @param pi
	 *            PlayerItems abbreviation
	 */
	public Herblore(Player c, PlayerItems pi) {
		Herblore.c = c;
		Herblore.pi = pi;
	}

	/**
	 * Can the player herblore?
	 * 
	 * @param itemUsed
	 *            Detector for the item used
	 * @param usedWith
	 *            Detector for the item used with the item used
	 */
	public static void canHerblore(int itemUsed, int usedWith) {
		if (itemUsed == 227 &amp;&amp; usedWith == unf.getHerb()
				|| itemUsed == unf.getHerb() &amp;&amp; usedWith == 227) {
			if (c.skillLvl[15] &gt;= unf.getLevelNeeded())
				Herblore.startHerbloreUnf();
			else
				c.frames.sendMessage(c,
						"You need an herblore level of " + unf.getLevelNeeded()
								+ " to make this potion.");
		} else if (itemUsed == fin.getFirst() &amp;&amp; usedWith == fin.getSecond()
				|| itemUsed == fin.getSecond() &amp;&amp; usedWith == fin.getFirst()) {
			if (c.skillLvl[15] &gt;= fin.getLevelNeeded())
				Herblore.startHerbloreFin();
			else
				c.frames.sendMessage(c,
						"You need an herblore level of " + fin.getLevelNeeded()
								+ " to make this potion.");
		}
	}

	/**
	 * Starts the herblore for unf items.
	 */
	public static void startHerbloreUnf() {
		pi.deleteItem(c, unf.getHerb(), pi.getItemSlot(c, unf.getHerb()), 1);
		pi.deleteItem(c, 227, pi.getItemSlot(c, 227), 1);
		c.requestAnim(363, 0);
		c.frames.playSound(c, 2612, 1, 0);
		pi.addItem(c, unf.getOut(), 1);
		c.frames.sendMessage(c, "You make a " + unf.getHerbName());
	}

	/**
	 * Starts the herblore for finished potions.
	 */
	public static void startHerbloreFin() {
		pi.deleteItem(c, fin.getFirst(), pi.getItemSlot(c, fin.getFirst()), 1);
		pi.deleteItem(c, fin.getSecond(), pi.getItemSlot(c, fin.getSecond()), 1);
		c.requestAnim(363, 0);
		c.frames.playSound(c, 2612, 1, 0);
		pi.addItem(c, fin.getOut(), 1);
		c.frames.sendMessage(c, "You make a " + fin.getPotName());
	}
}</code></pre>
<p>HerbloreData</p>
<pre><code class="lang-auto">package palidino76.rs2.players.skills.herblore;

/**
 * Data for skill Herblore.
 * 
 * @author Arham 4
 */

public class HerbloreData {
	
	/**
	 * For all the unfinished potions.
	 * 
	 * @author Arham 4
	 */
	public enum UNFINISHED_DATA {
		/*
		 * Layout: 
		 * HERBNAME(HERBID, UNFPOTIONID, LEVELREQUIRED, "UNF'S POTION NAME"); 
		 * Remove the ';' from the above one and make it ','
		 * So, 
		 * HERBNAME(HERBID, UNFPOTIONID, LEVELREQUIRED, "UNF'S POTION NAME"); 
		 * HERBNAME(HERBID, UNFPOTIONID, LEVELREQUIRED, "UNF'S POTION NAME"); 
		 * Changes to 
		 * HERBNAME(HERBID, UNFPOTIONID, LEVELREQUIRED, "UNF'S POTION NAME"), 
		 * HERBNAME(HERBID, UNFPOTIONID, LEVELREQUIRED, "UNF'S POTION NAME");
		 */
		GUAM(249, 91, 1, "Guam potion(unf)"),
		MARRENTILL(251, 93, 5, "Marrentill potion(unf)"),
		TARROMIN(253, 95, 12, "Tarromin potion(unf)"),
		HARRALANDER(255, 97, 22, "Harralander potion(unf)"),
		RANARR(257, 99, 30, "Ranarr potion(unf)"),
		TOADFLAX(2998, 3002, 34, "Toadflax potion(unf)"),
		IRIT(259, 101, 45, "Irit potion(unf)"),
		AVANTOE(261, 103, 50, "Avantoe potion(unf)"),
		KWUARM(263, 105, 55, "Kwuarm potion(unf)"),
		SNAPDRAGON(3000, 3004, 63, "Snapdragon potion(unf)"),
		CADANTINE(265, 107, 66, "Cadantine potion(unf)"),
		LANTADYME(2481, 2483, 69, "Lantadyme potion(unf)"),
		DWARF_WEED(267, 109, 72, "Dwarf weed potion(unf)"),
		TORSTOL(269, 111, 78, "Torstol potion(unf)");
		
		private int first, done, levelRequired;
		private String herbName;
		
		UNFINISHED_DATA(int first, int done, int levelRequired, String herbName) {
			this.first = first;
			this.done = done;
			this.levelRequired = levelRequired;
			this.herbName = herbName;
		}
		
		public int getHerb() {
			return first;
		}
		
		public int getOut() {
			return done;
		}
		
		public int getLevelNeeded() {
			return levelRequired;
		}
		
		public String getHerbName() {
			return herbName;
		}
	}
	
	/**
	 * For all the finished potions.
	 * 
	 * @author Arham 4
	 */
	public enum FINISHED_DATA {
		/*
		 * Layout:
		 * POTNAME(UNFPOTID, SECONDITEMID, FINALPOTIONSID, EXPGIVEN, LEVELREQUIRED, "POTION'S NAME");
		 * Remove ';' from the above one and make it ','
		 * So,
		 * POTNAME(UNFPOTID, SECONDITEMID, FINALPOTIONSID, EXPGIVEN, LEVELREQUIRED, "POTION'S NAME");
		 * POTNAME(UNFPOTID, SECONDITEMID, FINALPOTIONSID, EXPGIVEN, LEVELREQUIRED, "POTION'S NAME");
		 * Will be changed to,
		 * POTNAME(UNFPOTID, SECONDITEMID, FINALPOTIONSID, EXPGIVEN, LEVELREQUIRED, "POTION'S NAME"),
		 * POTNAME(UNFPOTID, SECONDITEMID, FINALPOTIONSID, EXPGIVEN, LEVELREQUIRED, "POTION'S NAME");
		 */
		ATTACK(221, 91, 121, 25, 1, "Attack potion(3)"),
		ANTIPOISON(235, 93, 175, 37.5, 5, "Antipoison(3)"),
		STRENGTH(225, 95, 115, 50, 12, "Strength potion(3)"),
		RESTORE(223, 97, 127, 62.5, 22, "Restore potion(3)"),
		DEFENCE(239, 99, 133, 75, 30, "Defence potion(3)"),
		AGILITY(2152, 3002, 3034, 80, 34, "Agility potion(3)"),
		PRAYER(231, 99, 139, 87.5, 38, "Prayer potion(3)"),
		SATTACK(221, 101, 145, 100, 45, "Super attack(3)"),
		SANTIPOISON(235, 101, 181, 106.3, 48, "Super antipoison(3)"),
		FISHING(231, 103, 151, 112.5, 50, "Fishing potion(3)"),
		SENERGY(2970, 103, 3018, 117.5, 52, "Super energy(3)"),
		SSTRENGTH(225, 105, 157, 125, 55, "Super strength(3)"),
		WEAPON_POISON(241, 105, 1465, 137.5, 60, "Weapon poison"),
		SRESTORE(223, 3004, 3026, 142.5, 63, "Super restore(3)"),
		SDEFENCE(239, 107, 163, 150, 66, "Super defence(3)"),
		ANTIFIRE(241, 2483, 2454, 157.5, 69, "Antifire(3)"),
		RANGING(245, 109, 169, 162.5, 72, "Ranging potion(3)"),
		MAGIC(3138, 109, 3042, 172.5, 76, "Magic potion(3)"),
		/*Brews*/
		ZAMORAK(247, 111, 189, 175, 78, "Zamorak brew(3)"),
		SARADOMIN(6693, 3002, 6687, 180, 81, "Saradomin brew(3)");
		
		
		private int first, second, done, levelRequired;
		private double expGiven;
		private String potName;
		
		FINISHED_DATA(int first, int second, int done, double expGiven, int levelRequired, String potName) {
			this.first = first;
			this.second = second;
			this.done = done;
			this.expGiven = expGiven;
			this.levelRequired = levelRequired;
			this.potName = potName;
		}
		
		public int getFirst() {
			return first;
		}
		
		public int getSecond() {
			return second;
		}
		
		public int getOut() {
			return done;
		}
		
		public double getExpGiven() {
			return expGiven;
		}
		
		public int getLevelNeeded() {
			return levelRequired;
		}
		
		public String getPotName() {
			return potName;
		}
	}
}</code></pre>
      </div>

      <meta itemprop='headline' content='[508][Palidino]Disconnection from Herblore'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/tyb97.html'><span itemprop='name'>tyb97</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-11-04T17:13:40Z'>
            <time itemprop='dateModified' datetime='2016-08-04T00:57:26Z' class='post-time'>
              August 4, 2016, 12:57am
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Omg this is horrendous. Lets see, those enum’s are enormous, fix that. Disconnection is mostly caused by packets being mishandled.</p>
<p>After typing a big long explanation, I’ve found the real issue, fml. The problem is you’re accessing the Herblore class statically, yet you have instanced the Player class in the constructor. You must do one of two things. One, access it through a getter in the player class (p.getHerblore()…) or, the correct way, access it statically by including the Player instance in your methods.</p>
<pre><code class="lang-auto">public static void canHerblore(Player player, int itemUsed, int usedWith) {</code></pre>
<p>Side note: That method name should be used for boolean methods. Just according to conventions.</p>
      </div>

      <meta itemprop='headline' content='[508][Palidino]Disconnection from Herblore'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/RandQm.html'><span itemprop='name'>RandQm</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-11-04T20:10:01Z'>
            <time itemprop='dateModified' datetime='2016-08-04T00:57:37Z' class='post-time'>
              August 4, 2016, 12:57am
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[code] * Item On Item packet.</p>
<ul>
<li>Packet: 40<br>
[/code]<br>
What?<br>
That’s the dialogue packet</li>
</ul>
      </div>

      <meta itemprop='headline' content='[508][Palidino]Disconnection from Herblore'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/tyb97.html'><span itemprop='name'>tyb97</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-11-04T20:14:21Z'>
            <time itemprop='dateModified' datetime='2016-08-04T00:57:38Z' class='post-time'>
              August 4, 2016, 12:57am
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“RandQm, post:3, topic:465974”][code] * Item On Item packet.</p>
<ul>
<li>Packet: 40<br>
[/code]<br>
What?<br>
That’s the dialogue packet[/quote]<br>
Not in 508.</li>
</ul>
      </div>

      <meta itemprop='headline' content='[508][Palidino]Disconnection from Herblore'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/508-palidino-disconnection-from-herblore/465974 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 14:59:38 GMT -->
</html>
