<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/trouble-with-naming-clients-with-my-chatserver/3369 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 21:54:47 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Trouble with naming clients with my chatserver - General Programming - moparisthebest.com</title>
    <meta name="description" content="hey everyone i have this code and here and i want to know how to name the clients with a specified name from a string in the client. yeah heres my files 

ill love you forever if you can help me out 

 import java.net.*;&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="3369.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Trouble with naming clients with my chatserver&#39;" href="3369.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/trouble-with-naming-clients-with-my-chatserver/3369" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/trouble-with-naming-clients-with-my-chatserver/3369" />
<meta property="og:title" content="Trouble with naming clients with my chatserver" />
<meta name="twitter:title" content="Trouble with naming clients with my chatserver" />
<meta property="og:description" content="hey everyone i have this code and here and i want to know how to name the clients with a specified name from a string in the client. yeah heres my files  ill love you forever if you can help me out  import java.net.*; import java.io.*;  public class ChatServer implements Runnable {  private ChatServerThread clients[] = new ChatServerThread[50];    private ServerSocket server = null;    private Thread       thread = null;    private int clientCount = 0;    	    public static void main(String args..." />
<meta name="twitter:description" content="hey everyone i have this code and here and i want to know how to name the clients with a specified name from a string in the client. yeah heres my files  ill love you forever if you can help me out  import java.net.*; import java.io.*;  public class ChatServer implements Runnable {  private ChatServerThread clients[] = new ChatServerThread[50];    private ServerSocket server = null;    private Thread       thread = null;    private int clientCount = 0;    	    public static void main(String args..." />
<meta property="article:published_time" content="2006-05-28T02:56:15+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="3369.html">Trouble with naming clients with my chatserver</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/general-programming.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>General Programming</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/oldschool.html'><span itemprop='name'>oldschool</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2006-05-28T02:56:15Z'>
            <time itemprop='dateModified' datetime='2016-07-29T20:18:33Z' class='post-time'>
              July 29, 2016,  8:18pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>hey everyone i have this code and here and i want to know how to name the clients with a specified name from a string in the client. yeah heres my files</p>
<p>ill love you forever if you can help me out</p>
<pre><code class="lang-auto">import java.net.*;
import java.io.*;

public class ChatServer implements Runnable
{  private ChatServerThread clients[] = new ChatServerThread[50];
   private ServerSocket server = null;
   private Thread       thread = null;
   private int clientCount = 0;
   	
   public static void main(String args[])
   {  
   	  ChatServer server = null;
   	  server = new ChatServer(4444);
      if (args.length != 1)
         System.out.println("Usage: java ChatServer port");
      else
         server = new ChatServer(Integer.parseInt(args[0]));
   }
   
   public ChatServer(int port)
   {  try
      {  
      	 
      	 System.out.println("Binding to port " + port + ", please wait  ...");
         server = new ServerSocket(port);  
         System.out.println("Server started: " + server);
         start(); }
      catch(IOException ioe)
      {  System.out.println("Can not bind to port " + port + ": " + ioe.getMessage()); }
   }
   public void run()
   {  while (thread != null)
      {  try
         {  System.out.println("Waiting for a client ..."); 
            addThread(server.accept()); }
         catch(IOException ioe)
         {  System.out.println("Server accept error: " + ioe); stop(); }
      }
   }
   public void start()
   {  
   	  if (thread == null)
      {  thread = new Thread(this); 
         thread.start();
      }
   }
   public void stop()
   {  
      if (thread != null)
      {  thread.stop(); 
         thread = null;
      }
   }
   private int findClient(int ID)
   {  for (int i = 0; i &lt; clientCount; i++)
         if (clients[i].getID() == ID)
            return i;
      return -1;
   }
   public synchronized void handle(int ID, String input)
   {  if (input.equals(".bye"))
      {  clients[findClient(ID)].send(".bye");
         remove(ID); }
      else
         for (int i = 0; i &lt; clientCount; i++)
            clients[i].send(input);   
   }
   public synchronized void remove(int ID)
   {  int pos = findClient(ID);
      if (pos &gt;= 0)
      {  ChatServerThread toTerminate = clients[pos];
         System.out.println("Removing client thread " + ID + " at " + pos);
         if (pos &lt; clientCount-1)
            for (int i = pos+1; i &lt; clientCount; i++)
               clients[i-1] = clients[i];
         clientCount--;
         try
         {  toTerminate.close(); }
         catch(IOException ioe)
         {  System.out.println("Error closing thread: " + ioe); }
         toTerminate.stop(); }
   }
   private void addThread(Socket socket)
   {  if (clientCount &lt; clients.length)
      {  System.out.println("Client accepted: " + socket);
         clients[clientCount] = new ChatServerThread(this, socket);
         try
         {  clients[clientCount].open(); 
            clients[clientCount].start();  
            clientCount++; }
         catch(IOException ioe)
         {  System.out.println("Error opening thread: " + ioe); } }
      else
         System.out.println("Client refused: maximum " + clients.length + " reached.");
   }

}</code></pre>
<p>this is part 1 to the server</p>
<pre><code class="lang-auto">
import java.net.*;
import java.io.*;

public class ChatServerThread extends Thread
{  private ChatServer       server    = null;
   private Socket           socket    = null;
   private int              ID        = -1;
   private DataInputStream  streamIn  =  null;
   private DataOutputStream streamOut = null;

   public ChatServerThread(ChatServer _server, Socket _socket)
   {  super();
      server = _server;
      socket = _socket;
      ID     = socket.getPort();
   }
   public void send(String msg)
   {   try
       {  streamOut.writeUTF(msg);
          streamOut.flush();
       }
       catch(IOException ioe)
       {  System.out.println(ID + " ERROR sending: " + ioe.getMessage());
          server.remove(ID);
          stop();
       }
   }
   public int getID()
   {  return ID;
   }
   public void run()
   {  System.out.println("Server Thread " + ID + " running.");
      while (true)
      {  try
         {  server.handle(ID, streamIn.readUTF());
         }
         catch(IOException ioe)
         {  System.out.println(ID + " ERROR reading: " + ioe.getMessage());
            server.remove(ID);
            stop();
         }
      }
   }
   public void open() throws IOException
   {  streamIn = new DataInputStream(new 
                        BufferedInputStream(socket.getInputStream()));
      streamOut = new DataOutputStream(new
                        BufferedOutputStream(socket.getOutputStream()));
   }
   public void close() throws IOException
   {  if (socket != null)    socket.close();
      if (streamIn != null)  streamIn.close();
      if (streamOut != null) streamOut.close();
   }
}</code></pre>
<p>tahts the second part of the server</p>
<p>heres my client<br>
and the read and write file part its not encrypted or anything<br>
the password thing is there for upgrades down the road</p>
<p>all i want to know is how i could get the client.user to get sent to the server and used instead of the client id<br>
compile and run all of this</p>
<pre><code class="lang-auto">import java.net.*;
import java.io.*;
import java.util.*;

public class ChatClient implements Runnable
{  
	
    private Socket socket              = null;
    private Thread thread              = null;
    private DataInputStream  console   = null;
    private DataOutputStream streamOut = null;
    private ChatClientThread client    = null;
    public static int Ready 		   =    0;
    public static String user 		      	   = null;
    public static String pass 		           = null;
	public static int x 		       =    0;  
   
   public ChatClient(String serverName, int serverPort)
   {  
   	  System.out.println("Establishing connection. Please wait ...");
      try
      {  
      	 ReadUser.ReadUser();
      	 if(Ready == 1)
      	 {
      	 socket = new Socket(serverName, serverPort);
         System.out.println("Connected: " + socket);
         start();
         }
         else
         {
         	System.out.println("User Def Not Found");
         	console   = new DataInputStream(System.in);
         	String line = null;
         	String name = null;
         	String pass = null;
			System.out.println("do you want to write a new user def?[y/n]");
     		BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        	line = br.readLine(); 
         	System.out.println(line);
         	if(line.startsWith("y"))
         	{
         		System.out.println("name?");
     			BufferedReader nm = new BufferedReader(new InputStreamReader(System.in));
      			try 
      			{
         			name = nm.readLine();
      			}
 				catch (IOException ioe) 
 				{
         			System.out.println("IO error trying to read your name!");
         			System.exit(1);
      			} 	
	         	System.out.println("pass?");
	     		BufferedReader ps = new BufferedReader(new InputStreamReader(System.in));
      			try 
      			{
         			pass = ps.readLine();
      			} 
      			catch (IOException ioe) 
      			{
        			System.out.println("IO error trying to read your name!");
        			System.exit(1);
      			}         			    			        			
         			ReadUser.WriteUser(name, pass);
         			System.out.println("File Created!!");
         		}
         	else
         	{
         			System.out.println("Program closing");
         	}
         } 	
      }
      catch(UnknownHostException uhe)
      {  System.out.println("Host unknown: " + uhe.getMessage()); }
      catch(IOException ioe)
      {  System.out.println("Unexpected exception: " + ioe.getMessage()); }
   }
   public void run()
   {  while (thread != null)
      {  try
         {  streamOut.writeUTF(console.readLine());
            streamOut.flush();
         }
         catch(IOException ioe)
         {  System.out.println("Sending error: " + ioe.getMessage());
            stop();
         }
      }
   }
   public void handle(String msg)
   {  if (msg.equals("::bye"))
      {  System.out.println("Good bye. Press RETURN to exit ...");
         stop();
      }
      else
         System.out.println(user+": "+msg);
   }
   public void start() throws IOException
   {  console   = new DataInputStream(System.in);
      streamOut = new DataOutputStream(socket.getOutputStream());
      if (thread == null)
      {  client = new ChatClientThread(this, socket);
         thread = new Thread(this);                   
         thread.start();
      }
   }
   public void stop()
   {  if (thread != null)
      {  thread.stop();  
         thread = null;
      }
      try
      {  if (console   != null)  console.close();
         if (streamOut != null)  streamOut.close();
         if (socket    != null)  socket.close();
      }
      catch(IOException ioe)
      {  System.out.println("Error closing ..."); }
      client.close();  
      client.stop();
   }
   public static void main(String args[])
   {  ChatClient client = null;
      client = new ChatClient("127.0.0.1", 4444);
   }
}</code></pre>
<pre><code class="lang-auto">




import java.net.*;
import java.io.*;

public class ChatClientThread extends Thread
{  private Socket           socket   = null;
   private ChatClient       client   = null;
   private DataInputStream  streamIn = null;

   public ChatClientThread(ChatClient _client, Socket _socket)
   {  client   = _client;
      socket   = _socket;
      open();  
      start();
   }
   public void open()
   {  try
      {  streamIn  = new DataInputStream(socket.getInputStream());
      }
      catch(IOException ioe)
      {  System.out.println("Error getting input stream: " + ioe);
         client.stop();
      }
   }
   public void close()
   {  try
      {  if (streamIn != null) streamIn.close();
      }
      catch(IOException ioe)
      {  System.out.println("Error closing input stream: " + ioe);
      }
   }
   public void run()
   {  while (true)
      {  try
         {  client.handle(streamIn.readUTF());
         }
         catch(IOException ioe)
         {  System.out.println("Listening error: " + ioe.getMessage());
            client.stop();
         }
      }
   }
}

</code></pre>
<pre><code class="lang-auto">import java.io.*;

class ReadUser
{
   public static void ReadUser()
   {  
            try
			{
             	FileInputStream fstream = new 
	         	FileInputStream("user.dat");
			 	DataInputStream in = new DataInputStream(fstream);
             	while (in.available() !=0)
			 	{
			 		ChatClient.user = in.readLine();
			 		ChatClient.pass = in.readLine();
				}
			 	in.close();
			 	ChatClient.Ready = 1;
			 } 
             catch (Exception e)
			 {
			 	System.err.println("File input error");
			 	ChatClient.Ready = 0;
			 }	
      
      /*
      try
      {
         DataInputStream dataIn = new DataInputStream(new FileInputStream("user.dat"));
         String password = dataIn.readUTF();
         dataIn.readChar();
         String name = dataIn.readUTF();
         dataIn.close();
         ChatClient.Ready = 1;
      }
      
      catch(IOException e)
      {
         ChatClient.Ready = 0;
      }
      */
   }
     public static void WriteUser(String name, String password)
   {
        FileOutputStream out; // declare a file output object
        PrintStream p; // declare a print stream object
   		try
        {
			out = new FileOutputStream("user.dat");
			p = new PrintStream( out );
			p.println (name);
			p.println (password);
			p.close();
        }
        catch (Exception e)
        {
        	System.err.println ("Error writing to file");
        }      
   /*   
      try
      {
         DataOutputStream dataOut = new DataOutputStream(new FileOutputStream("user.dat"));
         dataOut.writeUTF(password);
         dataOut.writeChar('|');
         dataOut.writeUTF(name);
         dataOut.close();
         
      }
      catch(IOException e)
      {
         System.out.println("Problem creating file");
      }
     */
   }
}</code></pre>
<p>welll i think it works now<br>
ttyl leech all you want</p>
      </div>

      <meta itemprop='headline' content='Trouble with naming clients with my chatserver'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Pwnd.html'><span itemprop='name'>Pwnd</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2006-05-28T21:55:55Z'>
            <time itemprop='dateModified' datetime='2016-07-29T20:18:54Z' class='post-time'>
              July 29, 2016,  8:18pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>You code funny <img src="../../images/emoji/twitter/stuck_out_tonguec164.png?v=9" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
      </div>

      <meta itemprop='headline' content='Trouble with naming clients with my chatserver'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/oldschool.html'><span itemprop='name'>oldschool</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2006-05-28T22:09:27Z'>
            <time itemprop='dateModified' datetime='2016-07-29T20:18:55Z' class='post-time'>
              July 29, 2016,  8:18pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>lol im a weird person<br>
lol and well im a complete noob trying to write a chat server<br>
i think i did pretty good for a first time</p>
      </div>

      <meta itemprop='headline' content='Trouble with naming clients with my chatserver'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Pwnd.html'><span itemprop='name'>Pwnd</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2006-05-28T22:11:42Z'>
            <time itemprop='dateModified' datetime='2016-07-29T20:18:55Z' class='post-time'>
              July 29, 2016,  8:18pm
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>If it works, you did good for a noob <img src="../../images/emoji/twitter/winkc164.png?v=9" title=":wink:" class="emoji" alt=":wink:"></p>
      </div>

      <meta itemprop='headline' content='Trouble with naming clients with my chatserver'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/oldschool.html'><span itemprop='name'>oldschool</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2006-05-29T23:34:57Z'>
            <time itemprop='dateModified' datetime='2016-07-29T20:19:20Z' class='post-time'>
              July 29, 2016,  8:19pm
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>lol that code kinda works ive improved it to the point where its a fully functional chatroom<br>
im working on a nice gui and client to client chat</p>
      </div>

      <meta itemprop='headline' content='Trouble with naming clients with my chatserver'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/trouble-with-naming-clients-with-my-chatserver/3369 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 21:54:48 GMT -->
</html>
