<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/need-help-making-npc-walk-back-to-its-original-spot-after-a-player-runs-away/350361 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Aug 2019 18:04:55 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Need help making npc walk back to it&#39;s original spot after a player runs away - Runescape - moparisthebest.com</title>
    <meta name="description" content="Okay. This has rather pissed me off for the past 2 days. I am trying to make it so when a player attacks an npc and they run away from it, once the npcs has walked 5 spots from it&amp;#39;s original spot, it will walk back to it&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="350361.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Need help making npc walk back to it&#39;s original spot after a player runs away&#39;" href="350361.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/need-help-making-npc-walk-back-to-its-original-spot-after-a-player-runs-away/350361" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/need-help-making-npc-walk-back-to-its-original-spot-after-a-player-runs-away/350361" />
<meta property="og:title" content="Need help making npc walk back to it&#39;s original spot after a player runs away" />
<meta name="twitter:title" content="Need help making npc walk back to it&#39;s original spot after a player runs away" />
<meta property="og:description" content="Okay. This has rather pissed me off for the past 2 days. I am trying to make it so when a player attacks an npc and they run away from it, once the npcs has walked 5 spots from it’s original spot, it will walk back to its original spot. this is the code I made for it.  	public void goBack(int NPCID) { 	if (GoodDistance(npcs[NPCID].originalAbsX, npcs[NPCID].originalAbsY, npcs[NPCID].absX, npcs[NPCID].absY, 5) == false &amp;&amp; server.npcHandler.npcs[NPCID].npcType != 2627 &amp;&amp; server.npcHandler.npcs[NPCI..." />
<meta name="twitter:description" content="Okay. This has rather pissed me off for the past 2 days. I am trying to make it so when a player attacks an npc and they run away from it, once the npcs has walked 5 spots from it’s original spot, it will walk back to its original spot. this is the code I made for it.  	public void goBack(int NPCID) { 	if (GoodDistance(npcs[NPCID].originalAbsX, npcs[NPCID].originalAbsY, npcs[NPCID].absX, npcs[NPCID].absY, 5) == false &amp;&amp; server.npcHandler.npcs[NPCID].npcType != 2627 &amp;&amp; server.npcHandler.npcs[NPCI..." />
<meta property="article:published_time" content="2010-07-21T16:11:24+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="350361.html">Need help making npc walk back to it&#39;s original spot after a player runs away</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/runefreak10.html'><span itemprop='name'>runefreak10</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-07-21T16:11:24Z'>
            <time itemprop='dateModified' datetime='2016-07-31T17:59:32Z' class='post-time'>
              July 31, 2016,  5:59pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Okay. This has rather pissed me off for the past 2 days. I am trying to make it so when a player attacks an npc and they run away from it, once the npcs has walked 5 spots from it’s original spot, it will walk back to its original spot. this is the code I made for it.</p>
<p><code>	public void goBack(int NPCID) {
	if (GoodDistance(npcs[NPCID].originalAbsX, npcs[NPCID].originalAbsY, npcs[NPCID].absX, npcs[NPCID].absY, 5) == false &amp;&amp; server.npcHandler.npcs[NPCID].npcType != 2627 &amp;&amp; server.npcHandler.npcs[NPCID].npcType != 2630 &amp;&amp; server.npcHandler.npcs[NPCID].npcType != 2631 &amp;&amp; server.npcHandler.npcs[NPCID].npcType != 2741 &amp;&amp; server.npcHandler.npcs[NPCID].npcType != 2743 &amp;&amp; server.npcHandler.npcs[NPCID].npcType != 2745 &amp;&amp; server.npcHandler.npcs[NPCID].npcType != 2746 &amp;&amp; server.npcHandler.npcs[NPCID].npcType != 2738 &amp;&amp; server.npcHandler.npcs[NPCID].npcType != 50 &amp;&amp; server.npcHandler.npcs[NPCID].npcType != 72 &amp;&amp; server.npcHandler.npcs[NPCID].npcType != 3200 &amp;&amp; server.npcHandler.npcs[NPCID].npcType != 1115 &amp;&amp; server.npcHandler.npcs[NPCID].npcType != 1472 &amp;&amp; server.npcHandler.npcs[NPCID].npcType != 1153 &amp;&amp; server.npcHandler.npcs[NPCID].npcType != 1154 &amp;&amp; server.npcHandler.npcs[NPCID].npcType != 1155) {
		if(npcs[NPCID].RandomWalk == false) {
			if (npcs[NPCID].absY &lt; npcs[NPCID].originalAbsY) {
				npcs[NPCID].moveY = 1;
			} else if (npcs[NPCID].absY &gt; npcs[NPCID].originalAbsY) {
				npcs[NPCID].moveY = -1;
			} else if (npcs[NPCID].absX &lt; npcs[NPCID].originalAbsX) {
				npcs[NPCID].moveX = 1;
			} else if (npcs[NPCID].absX &gt; npcs[NPCID].originalAbsX) {
				npcs[NPCID].moveX = -1;
			}
				npcs[NPCID].getNextNPCMovement();
				npcs[NPCID].updateRequired = true;
			}
		}
	}</code></p>
<p>I put that code in the NPCHandler process method. originalAbsX and originalAbsY equal the npc’s original location, or spawn point. Like honestly, if this is the easiest thing ever and there is an easy fix to this, then call me a dumbass. I really don’t care, as long as I get this working and I can proceed with my life. This problem has consumed enough of my time, so now I turn for help. This is a delta source, and I hope somebody knows the NPCHandler like it’s the back of their hand. If you need any other further information about what any of the above code means, then ask me and I’ll tell you.</p>
      </div>

      <meta itemprop='headline' content='Need help making npc walk back to it&#39;s original spot after a player runs away'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/pkinnubpk.html'><span itemprop='name'>pkinnubpk</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-07-21T16:42:40Z'>
            <time itemprop='dateModified' datetime='2016-07-31T17:59:34Z' class='post-time'>
              July 31, 2016,  5:59pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Instead of originalAbsY and originalAbsX try the real coords?</p>
      </div>

      <meta itemprop='headline' content='Need help making npc walk back to it&#39;s original spot after a player runs away'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/runefreak10.html'><span itemprop='name'>runefreak10</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-07-21T16:48:33Z'>
            <time itemprop='dateModified' datetime='2016-07-31T17:59:35Z' class='post-time'>
              July 31, 2016,  5:59pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote no-group" data-post="2" data-topic="350361">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/pkinnubpk/40/5_513041d5f7104045db30895d3b90af16.png" class="avatar"> pkinnubpk:</div>
<blockquote>
<p>Instead of originalAbsY and originalAbsX try the real coords?</p>
</blockquote>
</aside>
<p>originalAbsX and originalAbsY are set to the npc’s absX and absY when it is spawned. I can’t switch whatever you want me to switch to the real coords, otherwise it wouldn’t be able to tell the 5 space difference between the npc’s current coords and the originalAbsX and originalAbsY, if you understand what I’m trying to say.</p>
      </div>

      <meta itemprop='headline' content='Need help making npc walk back to it&#39;s original spot after a player runs away'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/IfearI.html'><span itemprop='name'>IfearI</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-07-21T17:16:06Z'>
            <time itemprop='dateModified' datetime='2016-07-31T17:59:38Z' class='post-time'>
              July 31, 2016,  5:59pm
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I tried to use your code on my server and my code didn’t get passed</p>
<pre><code class="lang-auto">if(npcs[NPCID].RandomWalk == false) {</code></pre>
<p>so euhm…i’m not really familiar with npchandle stuff so…</p>
<p>What should that piece of code do?</p>
<p>(explain me please xd)</p>
      </div>

      <meta itemprop='headline' content='Need help making npc walk back to it&#39;s original spot after a player runs away'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/deathschaos9.html'><span itemprop='name'>deathschaos9</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-07-21T17:45:06Z'>
            <time itemprop='dateModified' datetime='2016-07-31T17:59:40Z' class='post-time'>
              July 31, 2016,  5:59pm
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Well both the resetAttackPlayer and resetAttackNPC methods set RandomWalk to true so maybe you should change<br>
<span class="bbcode-i">                if(npcs[NPCID].RandomWalk ==  false) {</span><br>
to<br>
<span class="bbcode-i">                if(npcs[NPCID].RandomWalk) {</span><br>
just as a start, I’m sure we can find some other small problems.</p>
      </div>

      <meta itemprop='headline' content='Need help making npc walk back to it&#39;s original spot after a player runs away'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/runefreak10.html'><span itemprop='name'>runefreak10</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-07-21T17:54:19Z'>
            <time itemprop='dateModified' datetime='2016-07-31T17:59:41Z' class='post-time'>
              July 31, 2016,  5:59pm
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“deathschaos9, post:5, topic:350361”]Well both the resetAttackPlayer and resetAttackNPC methods set RandomWalk to true so maybe you should change<br>
<span class="bbcode-i">                if(npcs[NPCID].RandomWalk ==  false) {</span><br>
to<br>
<span class="bbcode-i">                if(npcs[NPCID].RandomWalk) {</span><br>
just as a start, I’m sure we can find some other small problems.[/quote]</p>
<p>Walking away from the npc doesn’t set RandomWalk to true, so that wouldn’t do anything. What the code usually does is it makes the npc walk straight for like 10 tiles or it goes back and forth between 2 tiles for like 5 seconds.</p>
      </div>

      <meta itemprop='headline' content='Need help making npc walk back to it&#39;s original spot after a player runs away'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/IfearI.html'><span itemprop='name'>IfearI</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-07-21T18:09:18Z'>
            <time itemprop='dateModified' datetime='2016-07-31T17:59:42Z' class='post-time'>
              July 31, 2016,  5:59pm
            </time>
        <span itemprop='position'>#7</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I ran a test with your code and used like Deathchaos9 told :</p>
<pre><code class="lang-auto">if(npcs[NPCID].RandomWalk) {</code></pre>
<p>without that the code reached:</p>
<pre><code class="lang-auto">if (GoodDistance(npcs[NPCID].origin .....</code></pre>
<p>and the so RandomWalk thing was true so the code wouldn’t proceed</p>
<p>now with the code</p>
<pre><code class="lang-auto">if(npcs[NPCID].RandomWalk) {</code></pre>
<p>your code would get to this:</p>
<p><code>       if (GoodDistance(npcs[NPCID].originalAbsX, npcs[NPCID].originalAbsY, npcs[NPCID].absX, npcs[NPCID].absY, 5) == false) {
                if(npcs[NPCID].RandomWalk == true) {
                        if (npcs[NPCID].absY &lt; npcs[NPCID].originalAbsY) {
  npcs[NPCID].moveY = 1; //--------------------------------------------------For some reason it wouldn't move...
                        } else if (npcs[NPCID].absY &gt; npcs[NPCID].originalAbsY) {
</code><br>
But it doesn’t move back…</p>
<p>The code is ment to whenever your npc is out of his original coords (5 steps away) it should return?</p>
<p>But at my “test” the npc didn’t have to go out of his coords to call in the code…Do you get me xd? (he still didn’t walk back to his place when he was out of his coords)</p>
      </div>

      <meta itemprop='headline' content='Need help making npc walk back to it&#39;s original spot after a player runs away'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/runefreak10.html'><span itemprop='name'>runefreak10</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-07-21T18:16:24Z'>
            <time itemprop='dateModified' datetime='2016-07-31T17:59:43Z' class='post-time'>
              July 31, 2016,  5:59pm
            </time>
        <span itemprop='position'>#8</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“IfearI, post:7, topic:350361”]I ran a test with your code and used like Deathchaos9 told :</p>
<pre><code class="lang-auto">if(npcs[NPCID].RandomWalk) {</code></pre>
<p>without that the code reached:</p>
<pre><code class="lang-auto">if (GoodDistance(npcs[NPCID].origin .....</code></pre>
<p>and the so RandomWalk thing was true so the code wouldn’t proceed</p>
<p>now with the code</p>
<pre><code class="lang-auto">if(npcs[NPCID].RandomWalk) {</code></pre>
<p>your code would get to this:</p>
<p><code>       if (GoodDistance(npcs[NPCID].originalAbsX, npcs[NPCID].originalAbsY, npcs[NPCID].absX, npcs[NPCID].absY, 5) == false) {
                if(npcs[NPCID].RandomWalk == false) {
                        if (npcs[NPCID].absY &lt; npcs[NPCID].originalAbsY) {</code><br>
But it doesn’t move back…</p>
<p>The code is ment to whenever your npc is out of his original coords (5 steps away) it should return?</p>
<p>But at my “test” the npc didn’t have to go out of his coords to call in the code…Do you get me xd? (he still didn’t walk back to his place when he was out of his coords)[/quote]</p>
<p>Dude what are you getting at?</p>
      </div>

      <meta itemprop='headline' content='Need help making npc walk back to it&#39;s original spot after a player runs away'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/IfearI.html'><span itemprop='name'>IfearI</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-07-21T20:10:01Z'>
            <time itemprop='dateModified' datetime='2016-07-31T17:59:52Z' class='post-time'>
              July 31, 2016,  5:59pm
            </time>
        <span itemprop='position'>#9</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Oke…</p>
<p>I’ll try to make a new point.</p>
<p>this code actually works: (I hope so)<br>
(I putted my Following thing and stop following in it.)<br>
(oh and i also took out the RandomWalk thing cuz idk what that is xd)</p>
<p>[code]        if (GoodDistance(npcs[NPCID].originalAbsX, npcs[NPCID].originalAbsY, npcs[NPCID].absX, npcs[NPCID].absY, 7) == false &amp;&amp; server.npcHandler.npcs[NPCID].npcType != 2627) {<br>
if (npcs[NPCID].absY &lt; npcs[NPCID].originalAbsY) {<br>
npcs[NPCID].moveY = 1;</p>
<pre><code>                    } else if (npcs[NPCID].absY &gt; npcs[NPCID].originalAbsY) {
                            npcs[NPCID].moveY = -1;

                    } else if (npcs[NPCID].absX &lt; npcs[NPCID].originalAbsX) {
                            npcs[NPCID].moveX = 1;

                    } else if (npcs[NPCID].absX &gt; npcs[NPCID].originalAbsX) {
                            npcs[NPCID].moveX = -1;

                    }
                            npcs[NPCID].getNextNPCMovement();
                            npcs[NPCID].updateRequired = true;
            }

	if (GoodDistance(npcs[NPCID].absX, npcs[NPCID].absY, EnemyX, EnemyY, 7) == true &amp;&amp; GoodDistance(npcs[NPCID].originalAbsX, npcs[NPCID].originalAbsY, npcs[NPCID].absX, npcs[NPCID].absY, 7) == true) {
		FollowPlayerCB(NPCID, Player);
	}

	if (GoodDistance(npcs[NPCID].absX, npcs[NPCID].absY, EnemyX, EnemyY, 10) == false &amp;&amp; GoodDistance(npcs[NPCID].originalAbsX, npcs[NPCID].originalAbsY, npcs[NPCID].absX, npcs[NPCID].absY, 1) == true) {
		ResetAttackPlayer(NPCID);
		return false;
	}[/code]
</code></pre>
<p>This code works (almost xd)</p>
<p>As you may have noticed:</p>
<p><code>		if (GoodDistance(npcs[NPCID].absX, npcs[NPCID].absY, EnemyX, EnemyY, 7) == true &amp;&amp; GoodDistance(npcs[NPCID].originalAbsX, npcs[NPCID].originalAbsY, npcs[NPCID].absX, npcs[NPCID].absY, 7) == true) {
			FollowPlayerCB(NPCID, Player);
		}</code></p>
<p>This is why a npc follows a player in CB…<br>
So if the distance between the npc and you is lower then 7 AND the distance between the startingCoords and the npc is lower then 7    THEN it will follow you</p>
<p>so whenever he is 7 places away from his start coords he stops following me <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>now this:</p>
<p>[code]        if (GoodDistance(npcs[NPCID].originalAbsX, npcs[NPCID].originalAbsY, npcs[NPCID].absX, npcs[NPCID].absY, 7) == false &amp;&amp; server.npcHandler.npcs[NPCID].npcType != 2627) {<br>
if (npcs[NPCID].absY &lt; npcs[NPCID].originalAbsY) {<br>
npcs[NPCID].moveY = 1;</p>
<pre><code>                    } else if (npcs[NPCID].absY &gt; npcs[NPCID].originalAbsY) {
                            npcs[NPCID].moveY = -1;

                    } else if (npcs[NPCID].absX &lt; npcs[NPCID].originalAbsX) {
                            npcs[NPCID].moveX = 1;

                    } else if (npcs[NPCID].absX &gt; npcs[NPCID].originalAbsX) {
                            npcs[NPCID].moveX = -1;

                    }
                            npcs[NPCID].getNextNPCMovement();
                            npcs[NPCID].updateRequired = true;
            }
</code></pre>
<p>[/code]</p>
<p>your code (without the RandomWalker cuz i don’t get that one xd)</p>
<p>so when the npc is 7 spots away from his starting place it will TRY to go back…</p>
<p>Now this piece of code:</p>
<p><code>		if (GoodDistance(npcs[NPCID].absX, npcs[NPCID].absY, EnemyX, EnemyY, 10) == false &amp;&amp; GoodDistance(npcs[NPCID].originalAbsX, npcs[NPCID].originalAbsY, npcs[NPCID].absX, npcs[NPCID].absY, 1) == true) {
			ResetAttackPlayer(NPCID);
			return false;
}</code></p>
<p>Thats the code that says whenever the npc isn’t within a distance of 10 the attack is over (attack over =&gt; process in NPCHandler stops?)<br>
so i added the &amp;&amp; … so now only the attack is over after the user is further then 10 AND the NPC is 1 away from his starting coords</p>
<p>Euhm…Is this correct what I said?  <img src="../../images/emoji/twitter/expressionlessae52.png?v=5" title=":expressionless:" class="emoji" alt=":expressionless:"></p>
<p>Or am I talking wrong again  <img src="../../images/emoji/twitter/confusedae52.png?v=5" title=":confused:" class="emoji" alt=":confused:">  <img src="../../images/emoji/twitter/expressionlessae52.png?v=5" title=":expressionless:" class="emoji" alt=":expressionless:"></p>
<p>xd (if so tell me and I’ll delete)</p>
<p>Got One little ‘error’  if the npc is 7 distance away from the startingplace and still in the 15 distance it doesn’t go to the starting spot…<br>
(In my source it should have been walking - 1 X and 1 - Y but instead he walked + 1 X and + 1 Y.</p>
<p>…Got the feeling I forgot something…</p>
      </div>

      <meta itemprop='headline' content='Need help making npc walk back to it&#39;s original spot after a player runs away'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/need-help-making-npc-walk-back-to-its-original-spot-after-a-player-runs-away/350361 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Aug 2019 18:04:56 GMT -->
</html>
