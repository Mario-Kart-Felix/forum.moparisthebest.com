<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/very-good-aid-with-hooking-fields/117068 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 10 Aug 2019 13:22:57 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>VERY good aid with hooking fields - Runescape - moparisthebest.com</title>
    <meta name="description" content="I made this today, the sample main method in FieldHooker hooks a method that uses all three minimap ints. I&amp;#39;m quite proud of it. Please post your thoughts on it. By the way, the argument that you need to provide is the r&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="117068.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;VERY good aid with hooking fields&#39;" href="117068.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/very-good-aid-with-hooking-fields/117068" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/very-good-aid-with-hooking-fields/117068" />
<meta property="og:title" content="VERY good aid with hooking fields" />
<meta name="twitter:title" content="VERY good aid with hooking fields" />
<meta property="og:description" content="I made this today, the sample main method in FieldHooker hooks a method that uses all three minimap ints. I’m quite proud of it. Please post your thoughts on it. By the way, the argument that you need to provide is the rs version. This assumes that you have your rs classes stored i n /rs(versionnumber)/  [code=java]import org.apache.bcel.generic.ClassGen;  import org.apache.bcel.classfile.ClassParser;  import java.io.File;  import java.util.ArrayList;  public class FieldHooker {  public static v..." />
<meta name="twitter:description" content="I made this today, the sample main method in FieldHooker hooks a method that uses all three minimap ints. I’m quite proud of it. Please post your thoughts on it. By the way, the argument that you need to provide is the rs version. This assumes that you have your rs classes stored i n /rs(versionnumber)/  [code=java]import org.apache.bcel.generic.ClassGen;  import org.apache.bcel.classfile.ClassParser;  import java.io.File;  import java.util.ArrayList;  public class FieldHooker {  public static v..." />
<meta property="article:published_time" content="2007-06-27T06:44:42+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="117068.html">VERY good aid with hooking fields</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Silver_Lining.html'><span itemprop='name'>Silver_Lining</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2007-06-27T06:44:42Z'>
            <time itemprop='dateModified' datetime='2016-07-30T11:40:36Z' class='post-time'>
              July 30, 2016, 11:40am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I made this today, the sample main method in FieldHooker hooks a method that uses all three minimap ints. I’m quite proud of it. Please post your thoughts on it. By the way, the argument that you need to provide is the rs version. This assumes that you have your rs classes stored i n /rs(versionnumber)/</p>
<p>[code=java]import org.apache.bcel.generic.ClassGen;<br>
import org.apache.bcel.classfile.ClassParser;<br>
import java.io.File;<br>
import java.util.ArrayList;</p>
<p>public class FieldHooker {<br>
public static void main(String[] args) throws Exception{<br>
MethodSearcher m = new MethodSearcher(unpack(Integer.parseInt(args[0])));<br>
ArrayList hash1 = new ArrayList();<br>
ArrayList hash2 = new ArrayList();<br>
ArrayList hash3 = new ArrayList();<br>
for(InstructionSearcher s : m.searchForSIPUSH(“undefined”, 2047))<br>
hash1.add(s.toString());<br>
for(InstructionSearcher s : m.searchForSIPUSH(“undefined”, 151))<br>
hash2.add(s.toString());<br>
for(InstructionSearcher s : m.searchForSIPUSH(“undefined”, 464))<br>
hash3.add(s.toString());<br>
for(String s : getCommon(hash1, hash2, hash3))<br>
System.out.println(s);<br>
}<br>
private static ArrayList getCommon(ArrayList… maps){<br>
ArrayList a = new ArrayList();<br>
for(ArrayList map : maps){<br>
for(String s : map){<br>
boolean add = true;<br>
for(ArrayList hm : maps){<br>
if(!hm.contains(s))<br>
add = false;<br>
}<br>
if(add &amp;&amp; !a.contains(s))<br>
a.add(s);<br>
}<br>
}<br>
return a;<br>
}</p>
<pre><code>private static ClassGen[] unpack(int vernum) throws Exception{
    File f = new File(System.getProperty("user.dir")+"\\rs"+vernum);
    ClassGen[] c = new ClassGen[f.list().length];
    for(int i = 0; i &lt; c.length; i++)
        c[i] = new ClassGen(new ClassParser(f.getName()+"\\"+f.list()[i]).parse());
    System.out.println("Loaded "+c.length+" classes.");
    return c;
}
</code></pre>
<p>}<br>
[/code][code=java]import org.apache.bcel.classfile.Method;<br>
import org.apache.bcel.generic.ClassGen;<br>
import org.apache.bcel.generic.ConstantPoolGen;<br>
import java.util.ArrayList;</p>
<p>public class MethodSearcher {<br>
private ArrayList classes;<br>
public ArrayList searchForField(String cname, String name, String sig){<br>
ArrayList ret = new ArrayList();<br>
for(ClassGen cg : classes){<br>
ConstantPoolGen cpg = cg.getConstantPool();<br>
if(cpg.lookupFieldref(cname, name, sig) != -1){<br>
for(Method m : cg.getMethods()){<br>
InstructionSearcher s = new InstructionSearcher(cg, m);<br>
if(s.hasFieldInstruction(cname, name, sig))<br>
ret.add(s);<br>
}<br>
}<br>
}<br>
return ret;<br>
}<br>
public ArrayList searchForLDC(String methodname, int x){<br>
ArrayList ret = new ArrayList();<br>
for(ClassGen cg : classes){<br>
ConstantPoolGen cpg = cg.getConstantPool();<br>
if(cpg.lookupInteger(x) != -1){<br>
for(Method m : cg.getMethods()){<br>
if(m.getName().equals(methodname) || methodname.equals(“undefined”)){<br>
InstructionSearcher s = new InstructionSearcher(cg, m);<br>
if(s.hasLDC(x))<br>
ret.add(s);<br>
}<br>
}<br>
}<br>
}<br>
return ret;<br>
}<br>
public ArrayList searchForSIPUSH(String methodname, int x){<br>
ArrayList ret = new ArrayList();<br>
for(ClassGen cg : classes){<br>
for(Method m : cg.getMethods()){<br>
if(m.getName().equals(methodname) || methodname.equals(“undefined”)){<br>
try{<br>
InstructionSearcher s = new InstructionSearcher(cg, m);<br>
if(s.hasSIPUSH(x))<br>
ret.add(s);<br>
}<br>
catch(Exception e){}<br>
}<br>
}<br>
}<br>
return ret;<br>
}<br>
public ArrayList searchForSequence(String methodname, String sequence){<br>
ArrayList ret = new ArrayList();<br>
for(ClassGen cg : classes){<br>
for(Method m : cg.getMethods()){<br>
if(m.getName().equals(methodname) || methodname.equals(“undefined”)){<br>
try{<br>
InstructionSearcher s = new InstructionSearcher(cg, m);<br>
if(s.hasSequence(sequence))<br>
ret.add(s);<br>
}<br>
catch(Exception e){}<br>
}<br>
}<br>
}<br>
return ret;<br>
}<br>
public MethodSearcher(ClassGen[] cs){<br>
classes = new ArrayList();<br>
for(ClassGen cg : cs)<br>
classes.add(cg);<br>
}<br>
}[/code][code=java]import org.apache.bcel.generic.*;<br>
import org.apache.bcel.classfile.Method;<br>
import org.apache.bcel.util.InstructionFinder;</p>
<p>public class InstructionSearcher {<br>
private Instruction[] instructions;<br>
private ConstantPoolGen cpg;<br>
private String classname;<br>
private String methodname;<br>
private String sig;<br>
private boolean isstatic;<br>
public InstructionSearcher(ClassGen cg, Method m){<br>
this.instructions = new MethodGen(m, cg.getClassName(), cg.getConstantPool()).getInstructionList().getInstructions();<br>
this.cpg = cg.getConstantPool();<br>
this.methodname = m.getName();<br>
this.classname = cg.getClassName();<br>
this.sig = m.getSignature();<br>
this.isstatic = m.isStatic();<br>
}<br>
public boolean hasFieldInstruction(String cname, String name, String sig){<br>
for(Instruction i : instructions){<br>
if(i instanceof FieldInstruction){<br>
FieldInstruction fi = (FieldInstruction)i;<br>
String cn = fi.getReferenceType(cpg).toString();<br>
String fn = fi.getFieldName(cpg);<br>
String s = fi.getSignature(cpg);<br>
if(s.equals(sig) &amp;&amp; cn.equals(cname) &amp;&amp; fn.equals(name))<br>
return true;<br>
}<br>
}<br>
return false;<br>
}<br>
public boolean hasLDC(int x){<br>
for(Instruction i : instructions){<br>
if(i instanceof LDC){<br>
LDC l = (LDC)i;<br>
if(l.getValue(cpg) instanceof Integer &amp;&amp; (Integer)l.getValue(cpg) == x)<br>
return true;<br>
}<br>
}<br>
return false;<br>
}<br>
public boolean hasSIPUSH(int x){<br>
for(Instruction i : instructions){<br>
if(i instanceof SIPUSH){<br>
SIPUSH l = (SIPUSH)i;<br>
if(l.getValue().intValue() == x)<br>
return true;<br>
}<br>
}<br>
return false;<br>
}<br>
public boolean hasSequence(String sequence){<br>
InstructionList ilist = new InstructionList();<br>
for(Instruction i : instructions)<br>
ilist.append(i);<br>
return new InstructionFinder(ilist).search(sequence).hasNext();<br>
}<br>
public String toString(){<br>
return classname+"."+methodname+":"+sig+":"+instructions.length+":"+isstatic;<br>
}<br>
}[/code]</p>
      </div>

      <meta itemprop='headline' content='VERY good aid with hooking fields'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Ollie.html'><span itemprop='name'>Ollie</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2007-06-27T19:52:17Z'>
            <time itemprop='dateModified' datetime='2016-07-30T11:41:53Z' class='post-time'>
              July 30, 2016, 11:41am
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>good job</p>
      </div>

      <meta itemprop='headline' content='VERY good aid with hooking fields'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/system.html'><span itemprop='name'>system</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2007-06-28T07:48:32Z'>
            <time itemprop='dateModified' datetime='2016-07-30T11:43:38Z' class='post-time'>
              July 30, 2016, 11:43am
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Nice job <img src="../../images/emoji/twitter/slight_smile1bce.png?v=6" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>-Mh</p>
      </div>

      <meta itemprop='headline' content='VERY good aid with hooking fields'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/very-good-aid-with-hooking-fields/117068 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 10 Aug 2019 13:22:58 GMT -->
</html>
