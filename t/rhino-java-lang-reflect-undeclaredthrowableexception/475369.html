<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/rhino-java-lang-reflect-undeclaredthrowableexception/475369 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:43:43 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Rhino java.lang.reflect.UndeclaredThrowableException - General Programming - moparisthebest.com</title>
    <meta name="description" content="I have been using Rhino for scripting in a small game. I can create a listener object in the script but I can&amp;#39;t seem to remove it, every time I try I get this Exception: 

 JavaException: java.lang.reflect.UndeclaredThro&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="475369.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Rhino java.lang.reflect.UndeclaredThrowableException&#39;" href="475369.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/rhino-java-lang-reflect-undeclaredthrowableexception/475369" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/rhino-java-lang-reflect-undeclaredthrowableexception/475369" />
<meta property="og:title" content="Rhino java.lang.reflect.UndeclaredThrowableException" />
<meta name="twitter:title" content="Rhino java.lang.reflect.UndeclaredThrowableException" />
<meta property="og:description" content="I have been using Rhino for scripting in a small game. I can create a listener object in the script but I can’t seem to remove it, every time I try I get this Exception:  JavaException: java.lang.reflect.UndeclaredThrowableException: null var gim = game.getGameInterfaceMananger();  var listener =  new org.silabsoft.sands.ui.GameInterfaceListener(){     onInterfaceActivated: function(inter){                     },     onInterfaceDeactivated: function(inter){             },     onReturnInput: func..." />
<meta name="twitter:description" content="I have been using Rhino for scripting in a small game. I can create a listener object in the script but I can’t seem to remove it, every time I try I get this Exception:  JavaException: java.lang.reflect.UndeclaredThrowableException: null var gim = game.getGameInterfaceMananger();  var listener =  new org.silabsoft.sands.ui.GameInterfaceListener(){     onInterfaceActivated: function(inter){                     },     onInterfaceDeactivated: function(inter){             },     onReturnInput: func..." />
<meta property="article:published_time" content="2012-12-23T08:20:33+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="475369.html">Rhino java.lang.reflect.UndeclaredThrowableException</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/general-programming.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>General Programming</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/silabsoft.html'><span itemprop='name'>silabsoft</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-12-23T08:20:33Z'>
            <time itemprop='dateModified' datetime='2016-08-04T01:51:56Z' class='post-time'>
              August 4, 2016,  1:51am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I have been using Rhino for scripting in a small game. I can create a listener object in the script but I can’t seem to remove it, every time I try I get this Exception:</p>
<pre><code class="lang-auto">JavaException: java.lang.reflect.UndeclaredThrowableException: null</code></pre>
<pre><code class="lang-auto">var gim = game.getGameInterfaceMananger();

var listener =  new org.silabsoft.sands.ui.GameInterfaceListener(){
    onInterfaceActivated: function(inter){
        
      
    },
    onInterfaceDeactivated: function(inter){
       
    },
    onReturnInput: function(inter,obj){

        
        try{
            if(obj.length &gt; 0){
                game.getPlayer().setName(obj);
                gim.removeGameInterfaceListener(listener);
                gim.setActiveInterface(null);
            }
        }catch(e){
            println(e);   
        }
        
    }
};
gim.addGameInterfaceListener(listener);
try{
    gim.setActiveInterface( new org.silabsoft.sands.ui.NameInputInterface(gim,game.getPlayer().getName()));
}catch(e){
    println(e);   
}</code></pre>
<pre><code class="lang-auto">package org.silabsoft.sands.ui;

import java.util.ArrayList;
import java.util.HashMap;
import org.silabsoft.sands.Sands;

/**
 *
 * @author Silabsoft
 */
public class GameInterfaceManager {

    private final HashMap&lt;Integer, GameInterface&gt; cachedInterfaces;
    private GameInterface activeInterface;
    private final ArrayList&lt;GameInterfaceListener&gt; listeners;
    private final int height;
    private final int width;

    public GameInterfaceManager(int width, int height) {
        this.width = width;
        this.height = height;
        this.cachedInterfaces = new HashMap&lt;Integer, GameInterface&gt;();
        this.listeners = new ArrayList&lt;GameInterfaceListener&gt;();
    }

    public GameInterface getActiveInterface() {
        return activeInterface;
    }

    public void setActiveInterface(GameInterface activeInterface) {
        if (this.activeInterface != null) {

            fireGameInterfaceDeactivated();
        }


        this.activeInterface = activeInterface;
        if (this.activeInterface != null) {
            fireGameInterfaceActivated();
        }

    }

    public void addGameInterfaceListener(GameInterfaceListener l) {
        listeners.add(l);

    }

    public void removeGameInterfaceListener(GameInterfaceListener l) {
        listeners.remove(l);
    }

    public int getHeight() {
        return height;
    }

    public int getWidth() {
        return width;
    }

    public synchronized void fireGameInterfaceActivated() {
        for (GameInterfaceListener l : listeners) {

            l.onInterfaceActivated(activeInterface);
        }
    }

    private synchronized void fireGameInterfaceDeactivated() {
        for (GameInterfaceListener l : listeners) {

            l.onInterfaceDeactivated(activeInterface);
        }
    }

    public synchronized void fireGameInterfaceReturnInput(Object o) {
        for (GameInterfaceListener l : listeners) {

            l.onReturnInput(activeInterface, o);
        }
    }
}
</code></pre>
      </div>

      <meta itemprop='headline' content='Rhino java.lang.reflect.UndeclaredThrowableException'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/zyle1992.html'><span itemprop='name'>zyle1992</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-12-23T09:26:10Z'>
            <time itemprop='dateModified' datetime='2016-08-04T01:51:58Z' class='post-time'>
              August 4, 2016,  1:51am
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>What gets printed if you do</p>
<pre><code class="lang-auto">try {
   // ...
}
catch (e) {
    System.out.println(e.getUndeclaredThrowable());
}</code></pre>
      </div>

      <meta itemprop='headline' content='Rhino java.lang.reflect.UndeclaredThrowableException'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/silabsoft.html'><span itemprop='name'>silabsoft</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-12-23T09:46:46Z'>
            <time itemprop='dateModified' datetime='2016-08-04T01:51:58Z' class='post-time'>
              August 4, 2016,  1:51am
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <pre><code class="lang-auto">Exception in thread "AWT-EventQueue-0" java.lang.reflect.UndeclaredThrowableException
	at $Proxy0.onReturnInput(Unknown Source)
	at org.silabsoft.sands.ui.GameInterfaceManager.fireGameInterfaceReturnInput(GameInterfaceManager.java:82)
	at org.silabsoft.sands.ui.NameInputInterface.keyPressed(NameInputInterface.java:96)
	at java.awt.Component.processKeyEvent(Component.java:6463)
	at java.awt.Component.processEvent(Component.java:6282)
	at java.awt.Container.processEvent(Container.java:2229)
	at java.awt.Window.processEvent(Window.java:2016)
	at java.awt.Component.dispatchEventImpl(Component.java:4861)
	at java.awt.Container.dispatchEventImpl(Container.java:2287)
	at java.awt.Window.dispatchEventImpl(Window.java:2713)
	at java.awt.Component.dispatchEvent(Component.java:4687)
	at java.awt.KeyboardFocusManager.redispatchEvent(KeyboardFocusManager.java:1890)
	at java.awt.DefaultKeyboardFocusManager.dispatchKeyEvent(DefaultKeyboardFocusManager.java:752)
	at java.awt.DefaultKeyboardFocusManager.preDispatchKeyEvent(DefaultKeyboardFocusManager.java:1017)
	at java.awt.DefaultKeyboardFocusManager.typeAheadAssertions(DefaultKeyboardFocusManager.java:889)
	at java.awt.DefaultKeyboardFocusManager.dispatchEvent(DefaultKeyboardFocusManager.java:717)
	at java.awt.Component.dispatchEventImpl(Component.java:4731)
	at java.awt.Container.dispatchEventImpl(Container.java:2287)
	at java.awt.Window.dispatchEventImpl(Window.java:2713)
	at java.awt.Component.dispatchEvent(Component.java:4687)
	at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:707)
	at java.awt.EventQueue.access$000(EventQueue.java:101)
	at java.awt.EventQueue$3.run(EventQueue.java:666)
	at java.awt.EventQueue$3.run(EventQueue.java:664)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
	at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
	at java.awt.EventQueue$4.run(EventQueue.java:680)
	at java.awt.EventQueue$4.run(EventQueue.java:678)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
	at java.awt.EventQueue.dispatchEvent(EventQueue.java:677)
	at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
	at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
	at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
	at java.awt.EventDispatchThread.run(EventDispatchThread.java:90)
Caused by: java.security.PrivilegedActionException: javax.script.ScriptException: sun.org.mozilla.javascript.internal.EcmaError: TypeError: Cannot find function getUndeclaredThrowable in object JavaException: java.lang.reflect.UndeclaredThrowableException: null. (&lt;Unknown source&gt;#21) in &lt;Unknown source&gt; at line number 21
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.script.util.InterfaceImplementor$InterfaceImplementorInvocationHandler.invoke(InterfaceImplementor.java:66)
	... 38 more
Caused by: javax.script.ScriptException: sun.org.mozilla.javascript.internal.EcmaError: TypeError: Cannot find function getUndeclaredThrowable in object JavaException: java.lang.reflect.UndeclaredThrowableException: null. (&lt;Unknown source&gt;#21) in &lt;Unknown source&gt; at line number 21
	at com.sun.script.javascript.RhinoScriptEngine.invoke(RhinoScriptEngine.java:296)
	at com.sun.script.javascript.RhinoScriptEngine.invokeMethod(RhinoScriptEngine.java:262)
	at com.sun.script.util.InterfaceImplementor$InterfaceImplementorInvocationHandler$1.run(InterfaceImplementor.java:71)
	... 40 more
Caused by: sun.org.mozilla.javascript.internal.EcmaError: TypeError: Cannot find function getUndeclaredThrowable in object JavaException: java.lang.reflect.UndeclaredThrowableException: null. (&lt;Unknown source&gt;#21)
	at sun.org.mozilla.javascript.internal.ScriptRuntime.constructError(ScriptRuntime.java:3773)
	at sun.org.mozilla.javascript.internal.ScriptRuntime.constructError(ScriptRuntime.java:3751)
	at sun.org.mozilla.javascript.internal.ScriptRuntime.typeError(ScriptRuntime.java:3779)
	at sun.org.mozilla.javascript.internal.ScriptRuntime.typeError2(ScriptRuntime.java:3798)
	at sun.org.mozilla.javascript.internal.ScriptRuntime.notFunctionError(ScriptRuntime.java:3869)
	at sun.org.mozilla.javascript.internal.ScriptRuntime.getPropFunctionAndThisHelper(ScriptRuntime.java:2345)
	at sun.org.mozilla.javascript.internal.ScriptRuntime.getPropFunctionAndThis(ScriptRuntime.java:2312)
	at sun.org.mozilla.javascript.internal.Interpreter.interpretLoop(Interpreter.java:1524)
	at sun.org.mozilla.javascript.internal.Interpreter.interpret(Interpreter.java:854)
	at sun.org.mozilla.javascript.internal.InterpretedFunction.call(InterpretedFunction.java:164)
	at sun.org.mozilla.javascript.internal.ContextFactory.doTopCall(ContextFactory.java:429)
	at com.sun.script.javascript.RhinoScriptEngine$1.superDoTopCall(RhinoScriptEngine.java:116)
	at com.sun.script.javascript.RhinoScriptEngine$1.doTopCall(RhinoScriptEngine.java:109)
	at sun.org.mozilla.javascript.internal.ScriptRuntime.doTopCall(ScriptRuntime.java:3163)
	at sun.org.mozilla.javascript.internal.InterpretedFunction.call(InterpretedFunction.java:162)
	at com.sun.script.javascript.RhinoScriptEngine.invoke(RhinoScriptEngine.java:290)
	... 42 more</code></pre>
<p>I have a feeling its the way I initiated the listener thats the issue.</p>
      </div>

      <meta itemprop='headline' content='Rhino java.lang.reflect.UndeclaredThrowableException'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/mod_taharok.html'><span itemprop='name'>mod_taharok</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-12-25T05:42:26Z'>
            <time itemprop='dateModified' datetime='2016-08-04T01:52:58Z' class='post-time'>
              August 4, 2016,  1:52am
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Not sure why Rhino is freaking out, but I can see one illegal thing you’re doing. Assuming that onReturnInput is being invoked by fireGameInterfaceReturnInput and the condition obj.length &gt; 0 is true, then you’re invoking removeGameInterfaceListener, which removes an element from the list listeners. You’re currently in an iteration of listeners when removing an element from listeners. This is an immediate red flag and will cause the underlying ArrayList implementation to throw a ConcurrentModificationException.</p>
      </div>

      <meta itemprop='headline' content='Rhino java.lang.reflect.UndeclaredThrowableException'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/silabsoft.html'><span itemprop='name'>silabsoft</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-12-25T06:13:36Z'>
            <time itemprop='dateModified' datetime='2016-08-04T01:53:00Z' class='post-time'>
              August 4, 2016,  1:53am
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote quote-modified" data-post="4" data-topic="475369">
<div class="title">
<div class="quote-controls"></div>
 Taharok:</div>
<blockquote>
<p>Not sure why Rhino is freaking out, but I can see one illegal thing you’re doing. Assuming that onReturnInput is being invoked by fireGameInterfaceReturnInput and the condition obj.length &gt; 0 is true, then you’re invoking removeGameInterfaceListener, which removes an element from the list listeners. You’re currently in an iteration of listeners when removing an element from listeners. This is an immediate red flag and will cause the underlying ArrayList implementation to throw a ConcurrentModificationException.</p>
</blockquote>
</aside>
<p>I had though it might of been that and changed the remove method as a remove request which would then be preformed during the next following firedEvent but that didn’t stop the original error.</p>
      </div>

      <meta itemprop='headline' content='Rhino java.lang.reflect.UndeclaredThrowableException'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/rhino-java-lang-reflect-undeclaredthrowableexception/475369 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:43:44 GMT -->
</html>
