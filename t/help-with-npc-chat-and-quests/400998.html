<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/help-with-npc-chat-and-quests/400998 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 07:06:01 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Help with NPC chat and Quests - Runescape - moparisthebest.com</title>
    <meta name="description" content="Hello all, 

I would like to start adding quests but I&amp;#39;ve only been programming in Python and haven&amp;#39;t used Java in a few months now. 

Is it possible, and if so where, should I write a function so that all I have to writ&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="400998.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Help with NPC chat and Quests&#39;" href="400998.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/help-with-npc-chat-and-quests/400998" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/help-with-npc-chat-and-quests/400998" />
<meta property="og:title" content="Help with NPC chat and Quests" />
<meta name="twitter:title" content="Help with NPC chat and Quests" />
<meta property="og:description" content="Hello all,  I would like to start adding quests but I’ve only been programming in Python and haven’t used Java in a few months now.  Is it possible, and if so where, should I write a function so that all I have to write in the .class file something like:  NPCspeak(“Hello there, are you lost?”)  NPCspeak(“Or are you looking for something?”)  This would result in the normal conversation…the function would add the wait time between each speech line, etc.  Also what file should I assign players numb..." />
<meta name="twitter:description" content="Hello all,  I would like to start adding quests but I’ve only been programming in Python and haven’t used Java in a few months now.  Is it possible, and if so where, should I write a function so that all I have to write in the .class file something like:  NPCspeak(“Hello there, are you lost?”)  NPCspeak(“Or are you looking for something?”)  This would result in the normal conversation…the function would add the wait time between each speech line, etc.  Also what file should I assign players numb..." />
<meta property="article:published_time" content="2011-06-26T08:10:33+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="400998.html">Help with NPC chat and Quests</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Arsonist.html'><span itemprop='name'>Arsonist</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-06-26T08:10:33Z'>
            <time itemprop='dateModified' datetime='2016-08-01T12:42:04Z' class='post-time'>
              August 1, 2016, 12:42pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hello all,</p>
<p>I would like to start adding quests but I’ve only been programming in Python and haven’t used Java in a few months now.</p>
<p>Is it possible, and if so where, should I write a function so that all I have to write in the .class file something like:</p>
<p>NPCspeak(“Hello there, are you lost?”)<br>
NPCspeak(“Or are you looking for something?”)</p>
<p>This would result in the normal conversation…the function would add the wait time between each speech line, etc.</p>
<p>Also what file should I assign players numbers like DRUIDIC_RITUAL == 0 for each quest so when a player has completed a certain stage of the quest, I can write DRUIDIC_RITUAL++ (or however Java increments an integer by 1) to progress the player into the next stage, and once DRUIDIC_RITUAL++ has be executed, that number remains saved to the player, so when they log out their DRUIDIC_RITUAL is the same as when they logged out.</p>
      </div>

      <meta itemprop='headline' content='Help with NPC chat and Quests'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Nothing1.html'><span itemprop='name'>Nothing1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-06-26T16:15:19Z'>
            <time itemprop='dateModified' datetime='2016-08-01T12:42:14Z' class='post-time'>
              August 1, 2016, 12:42pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>BeyondRSC had something similar to what you want, but it shouldn’t be used for quests since it’s kind of buggy.<br>
Also RSCA has a nice quest system, also fits in your requirements, just rip it out.</p>
      </div>

      <meta itemprop='headline' content='Help with NPC chat and Quests'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Arsonist.html'><span itemprop='name'>Arsonist</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-06-27T02:21:26Z'>
            <time itemprop='dateModified' datetime='2016-08-01T12:42:44Z' class='post-time'>
              August 1, 2016, 12:42pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Thanks a lot <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
      </div>

      <meta itemprop='headline' content='Help with NPC chat and Quests'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/cleako.html'><span itemprop='name'>cleako</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-10-11T01:58:57Z'>
            <time itemprop='dateModified' datetime='2016-08-01T15:30:23Z' class='post-time'>
              August 1, 2016,  3:30pm
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>1.) Copy the bsh.jar file from BeyondRSC’s lib folder and put it in your server’s lib folder.<br>
2.) Create a folder in the root of your game server folder named “scripts”<br>
3.) Copy some of the BeyondRSC .bsh files from it’s scripts folder and learn how to write your own.<br>
4.) Create .bsh text files inside the scripts folder (or copy BeyondRSC’s) for your server and edit your server files to read them as explained below:</p>
<p>All you need to do is save them as the names, for example: 098 - Dr Harlow.BSH (the 098 prefix means NPC <span class="hashtag">#98</span>)</p>
<p>Once saved as a BSH extension, just throw them in your ‘scripts’ DIR and run the server. Once you talk to an NPC in game that contains the same ID within the BSH script, it will handle the talking…</p>
<p>From the TalkToNpcHandler class:</p>
<pre><code class="lang-auto">                if(world.npcScripts.containsKey(affectedNpc.getID())) {
                    owner.setBusy(true);
                    affectedNpc.blockedBy(owner);
                    if(owner.interpreterThread != null) {
                        try {
                            owner.interpreterThread.stop();
                        } catch(Exception e) {

                        }
                    }

                    owner.interpreterThread = new Thread(new Runnable() {
                        public void run() {        
                            try {
                                new org.rscdaemon.server.model.Script(owner, affectedNpc);    
                                owner.setBusy(false);

                                affectedNpc.unblock();
                            }
                            catch(Exception e) {
                                if(!(e instanceof InvocationTargetException)) {
                                    e.printStackTrace();
                                }
                                System.out.println(affectedNpc.getID());
                                affectedNpc.unblock();
                                owner.setBusy(false);
                            }
                        }
                    });
                    owner.interpreterThread.start();
                }
                else                
                      if(handler != null) {
                          try {
                              handler.handleNpc(affectedNpc, owner);
                          }
                          catch(Exception e) {
                        Logger.error("Exception with npc[" + affectedNpc.getIndex() + "] from " + owner.getUsername() + " [" + owner.getCurrentIP() + "]: " + e.getMessage());
                        owner.getActionSender().sendLogout();
                        owner.destroy(false);
                          }
                      }  else{owner.getActionSender().sendMessage("The " + affectedNpc.getDef().getName() + " does not appear interested in talking to you.");}
            }
          });
    }</code></pre>
      </div>

      <meta itemprop='headline' content='Help with NPC chat and Quests'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/xrune.html'><span itemprop='name'>xrune</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2013-02-22T20:03:53Z'>
            <time itemprop='dateModified' datetime='2016-08-04T03:52:42Z' class='post-time'>
              August 4, 2016,  3:52am
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>i tried the bsh method for easyrsc but i cant seem to get it to work, i saved a file with the bsh extension in the script folder and i was wondering what else you need to do to get it to work,</p>
      </div>

      <meta itemprop='headline' content='Help with NPC chat and Quests'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/imthenull.html'><span itemprop='name'>imthenull</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2013-02-22T20:07:35Z'>
            <time itemprop='dateModified' datetime='2016-08-04T03:52:45Z' class='post-time'>
              August 4, 2016,  3:52am
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>use the npc id in the filename too</p>
      </div>

      <meta itemprop='headline' content='Help with NPC chat and Quests'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/xrune.html'><span itemprop='name'>xrune</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2013-02-22T20:18:52Z'>
            <time itemprop='dateModified' datetime='2016-08-04T03:52:47Z' class='post-time'>
              August 4, 2016,  3:52am
            </time>
        <span itemprop='position'>#7</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="6" data-topic="400998">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forum.moparisthebest.com/imthenull/40/1273_1.png" class="avatar"> imthenull:</div>
<blockquote>
<p>use the npc id in the filename too</p>
</blockquote>
</aside>
<p>I did… do u need to add any code to any java files? to get it to work? whats that code he has written above ^^ for?</p>
      </div>

      <meta itemprop='headline' content='Help with NPC chat and Quests'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/yong_min.html'><span itemprop='name'>yong_min</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2013-02-22T22:16:00Z'>
            <time itemprop='dateModified' datetime='2016-08-04T03:53:08Z' class='post-time'>
              August 4, 2016,  3:53am
            </time>
        <span itemprop='position'>#8</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“xrune, post:7, topic:400998”][quote author=imthenull link=topic=498054.msg4236018#msg4236018 date=1361563655]<br>
use the npc id in the filename too<br>
[/quote]</p>
<p>I did… do u need to add any code to any java files? to get it to work? whats that code he has written above ^^ for?[/quote]</p>
<p>First of all, download the bsh.jar provided below and place it in your ‘lib’ folder, server side.</p>
<p>BSH.JAR : <a href="http://uppit.com/mihylkhldk4e/bsh.jar" rel="nofollow noopener">http://uppit.com/mihylkhldk4e/bsh.jar</a></p>
<p>In the location where your ‘lib’ folder is created, also create a folder called ‘scripts’. Place the ‘scripts’ folder in the same place as the ‘lib’ folder, <span class="bbcode-b">NOT</span> inside it!</p>
<p>Now open your TalkToNpcHandler class, and replace it all with:</p>
<pre><code class="lang-auto">package org.rscdaemon.server.packethandler.client;

import java.lang.reflect.InvocationTargetException;
import java.util.ConcurrentModificationException;

import org.rscdaemon.server.packethandler.PacketHandler;
import org.rscdaemon.server.model.Npc;
import org.rscdaemon.server.model.World;
import org.rscdaemon.server.model.Player;
import org.rscdaemon.server.net.Packet;
import org.rscdaemon.server.event.WalkToMobEvent;
import org.rscdaemon.server.npchandler.NpcHandler;
import org.rscdaemon.server.util.Logger;
import org.rscdaemon.server.states.Action;
import org.apache.mina.common.IoSession;

public class TalkToNpcHandler implements PacketHandler {
	/**
	 * World instance
	 */
	public static final World world = World.getWorld();

	public void handlePacket(Packet p, IoSession session) throws Exception {
		Player player = (Player)session.getAttachment();
		if(player.isBusy()) {
			player.resetPath();
			return;
		}
		player.resetAll();
		final Npc affectedNpc = world.getNpc(p.readShort());
  		if(affectedNpc == null) { // This shouldn't happen
  			return;
  		}
  		player.setFollowing(affectedNpc);
  		player.setStatus(Action.TALKING_MOB);
  		world.getDelayedEventHandler().add(new WalkToMobEvent(player, affectedNpc, 1) {
			public void arrived() {
				owner.resetPath();
				if(owner.isBusy() || owner.isRanging() || !owner.nextTo(affectedNpc) || owner.getStatus() != Action.TALKING_MOB) {
					return;
				}
				owner.resetAll();
				if(affectedNpc.isBusy()) {
					owner.getActionSender().sendMessage(affectedNpc.getDef().getName() + " is currently busy.");
					return;
				}
				affectedNpc.resetPath();
				NpcHandler handler = world.getNpcHandler(affectedNpc.getID());
				int sprite = 0;

				sprite = getSprite(owner.getLocation().getX(), owner.getLocation().getY(), affectedNpc.getLocation().getX(), affectedNpc.getLocation().getY());
				if(sprite != -1)
					owner.setSprite(sprite);
			//	owner.setNeedsUpdate(true);

				// NPC sprite
				sprite = getSprite(affectedNpc.getLocation().getX(), affectedNpc.getLocation().getY(), owner.getLocation().getX(), owner.getLocation().getY());
				if(sprite != -1)
					affectedNpc.setSprite(sprite);

				affectedNpc.resetPath();
				
				if(world.npcScripts.containsKey(affectedNpc.getID())) {
					owner.setBusy(true);
					affectedNpc.blockedBy(owner);
					if(owner.interpreterThread != null) {
						try {
							owner.interpreterThread.stop();
						} catch(Exception e) {

						}
					}

					owner.interpreterThread = new Thread(new Runnable() {
						public void run() {		
							try {
								new org.rscdaemon.server.model.Script(owner, affectedNpc);	
								owner.setBusy(false);

								affectedNpc.unblock();
							} 
							catch(Exception e) {
								if(!(e instanceof InvocationTargetException)) {
									e.printStackTrace();
								}
								System.out.println(affectedNpc.getID());
								affectedNpc.unblock();
								owner.setBusy(false);
							}
						}
					});
					owner.interpreterThread.start();
				} 
				else				
		      		if(handler != null) {
		      			try {
		      				handler.handleNpc(affectedNpc, owner);
		      			}
		      			catch(Exception e) {
						Logger.error("Exception with npc[" + affectedNpc.getIndex() + "] from " + owner.getUsername() + " [" + owner.getCurrentIP() + "]: " + e.getMessage());
						owner.getActionSender().sendLogout();
						owner.destroy(false);
		      			}
		      		}  else{owner.getActionSender().sendMessage("The " + affectedNpc.getDef().getName() + " does not appear interested in talking to you.");}
			}
      	});
	}
	public static int getSprite(int x1, int y1, int x2, int y2) {
	
		int newx = x1 - x2;
		int newy = y1 - y2;

		if(newx == -1 &amp;&amp; newy == -1)
		{
			//TURN SOUTHWEST
			return 3;
		} else
		if(newx == -1 &amp;&amp; newy == 0)
		{
			//TURN WEST
			return 2;
		} else
		if(newx == -1 &amp;&amp; newy == 1)
		{
			//TURN NORTHWEST
			return 1;
		} else
		if(newx == 0 &amp;&amp; newy == 1)
		{
			//TURN NORTH
			return 0;
		} else
		if(newx == 1 &amp;&amp; newy == 1)
		{
			//TURN NORTHEAST
			return 7;
		} else
		if(newx == 1 &amp;&amp; newy == 0)
		{
			//TURN EAST
			return 6;
		} else
		if(newx == 1 &amp;&amp; newy == -1)
		{
			//TURN SOUTHEAST
			return 5;
		} else
		if(newx == 0 &amp;&amp; newy == -1)
		{
			//TURN SOUTH
			return 4;
		}

		return -1;
	}
}</code></pre>
<p><span class="bbcode-b">NOTE:</span> That will also make NPCs turn and face you when you speak to them.</p>
<p>Now open up your Player class, and add the import:</p>
<pre><code class="lang-auto">import bsh.Interpreter;</code></pre>
<p>Still in your Player class, find:</p>
<pre><code class="lang-auto">	public void setSEvent(ShortEvent sEvent) {
		world.getDelayedEventHandler().add(sEvent);
	}</code></pre>
<p>Above that, add:</p>
<pre><code class="lang-auto">	public Thread interpreterThread = null;
	public int lastOption = -2;
	public String[] lastOptions = null;
	public Interpreter interpreter = new Interpreter();</code></pre>
<p>Now open up your World class, and find:</p>
<pre><code class="lang-auto">worldInstance.loadNpcHandlers();</code></pre>
<p>Under that, add:</p>
<pre><code class="lang-auto">worldInstance.loadScripts();</code></pre>
<p>This will make it so that the NPC scripts are loaded upon running the server.</p>
<p>Now still in World class, find:</p>
<pre><code class="lang-auto">	/**
	 * returns the associated npc handler
	 */
	public NpcHandler getNpcHandler(int npcID) {
		return npcHandlers.get(npcID);
	}</code></pre>
<p>Above that, add:</p>
<pre><code class="lang-auto">	public void loadScripts() {
		int npccount = 0;
		int error = 0;
		for(File files : new File("scripts/").listFiles()) {
			try {
				int id = Integer.parseInt(files.getName().substring(0, 3).trim());
				npcScripts.put(id, files.getAbsolutePath());
			} catch(Exception e) {
				error++;
				continue;
			} finally {
				npccount++;
			}
		}
		System.out.println(npccount + " NPC Scripts loaded! " + (error &gt; 1 ? ((error - 1) + " Error scripts") : ""));
	}</code></pre>
<p>You will also need the Script class, which should be added into your ‘model’ folder, server side.</p>
<p><span class="bbcode-b">Script class:</span></p>
<pre><code class="lang-auto">package org.rscdaemon.server.model;

import java.io.FileNotFoundException;
import java.io.IOException;
import java.util.ConcurrentModificationException;

import org.rscdaemon.server.entityhandling.EntityHandler;

import bsh.EvalError;

public class Script {

	public Player player;
	public Npc npc;

	/**
	 * DONT TOUCH THIS. Sets the Player and Npc instances for reach when
	 * scripting.
	 * 
	 * @param p
	 *            - the player
	 * @param n
	 *            - the affected npc
	 */
	public Script(Player p, Npc n) {
		player = p;
		npc = n;

		try {
			player.interpreter.getNameSpace().importObject(this);
			player.interpreter.source(World.getWorld().npcScripts.get(npc
					.getID()));
			player.interpreter.getNameSpace().clear();
		} catch (EvalError e) {
			error();
			// e.printStackTrace();
		} catch (FileNotFoundException e) {
			error();
			// e.printStackTrace();
		} catch (IOException e) {
			error();
			// e.printStackTrace();
		} catch (ConcurrentModificationException cme) {
			System.out.println("got cme");
		} catch (Exception e) {
			error();
			// e.printStackTrace();
		}

	}

	/**
	 * Unblock the NPC/Player if something unhandled happens.
	 */
	private void error() {
		npc.unblock();
		player.setBusy(false);
	}

	/**
	 * Sends a normal Message to the player
	 * 
	 * @param msg
	 *            - the message
	 */
	public void SendMessage(String msg) {
		player.getActionSender().sendMessage(msg);
	}

	/**
	 * Sends a large black box Message to the player
	 * 
	 * @param msg
	 *            - the message
	 */
	public void SendBoxMessage(String msg) {
		player.getActionSender().sendAlert(msg, true);
	}

	/**
	 * Sends a medium or large black box message
	 * 
	 * @param msg
	 *            - the message
	 * @param big
	 *            - true if large box, false if medium
	 */
	public void SendBoxMessage(String msg, boolean big) {
		player.getActionSender().sendAlert(msg, big);
	}

	/**
	 * Add item(s) to the players inventory (This is setup to handle the amount
	 * even when the item is non stackable)
	 * 
	 * @param id
	 *            - the item's ID
	 * @param amount
	 *            - the amount given
	 */
	public void AddItem(int id, int amount) {
		InvItem item = new InvItem(id, amount);
		if (item.getDef().stackable) {
			player.getInventory().add(new InvItem(id, amount));
		} else {
			for (int i = 0; i &lt; amount; i++) {
				player.getInventory().add(new InvItem(id));
			}
		}
		player.getActionSender().sendInventory();
	}

	/**
	 * Says something to the NPC your talking too
	 * 
	 * @param msg
	 *            - the message
	 */
	public void PlayerTalk(String msg) {
		player.informOfChatMessage(new ChatMessage(player, msg, npc));
		Wait(2000);

	}

	/**
	 * the Npc your interacting with says something to you
	 * 
	 * @param msg
	 *            - the message
	 */
	public void NpcTalk(String msg) {
		player.informOfNpcMessage(new ChatMessage(npc, msg, player));
		Wait(2000);
	}

	/**
	 * Sleeps for the default delay (2000)
	 */
	public void Wait() {
		Wait(2000);
	}

	/**
	 * Wait's the delay until the next line is executed
	 */
	public void Wait(int ms) {
		try {
			Thread.currentThread().sleep(ms);
		} catch (InterruptedException e) {
			SendMessage(e.getMessage());
		}
	}

	/**
	 * AUTO EXPANDING arrays (String...) with BeanShell do not yet work. I know
	 * this looks dodgey, but easy-scripting support comes first. Currently set
	 * for 7 options max.
	 */
	public int PickOption(String s1, String s2, String s3, String s4,
			String s5, String s6, String s7) {
		return PickOption(new String[] { s1, s2, s3, s4, s5, s6, s7 });
	}

	public int PickOption(String s1, String s2, String s3, String s4,
			String s5, String s6) {
		return PickOption(new String[] { s1, s2, s3, s4, s5, s6 });
	}

	public int PickOption(String s1, String s2, String s3, String s4, String s5) {
		return PickOption(new String[] { s1, s2, s3, s4, s5 });
	}

	public int PickOption(String s1, String s2, String s3, String s4) {
		return PickOption(new String[] { s1, s2, s3, s4 });
	}

	public int PickOption(String s1, String s2, String s3) {
		return PickOption(new String[] { s1, s2, s3 });
	}

	public int PickOption(String s1, String s2) {
		return PickOption(new String[] { s1, s2 });
	}

	public int PickOption(String s1) {
		return PickOption(new String[] { s1 });
	}

	/**
	 * Sends a question menu, waits for the response.
	 * 
	 * @param strs
	 *            - array of options
	 * @return the option number
	 */
	public int PickOption(String[] strs) {
		try {
			long time = System.currentTimeMillis();
			player.setBusy(false);
			player.lastOption = -2;
			player.setMenuHandler(new MenuHandler(strs) {
				public void handleReply(int option, String reply) {
					if (option &lt; 0 || option &gt;= getOptions().length) {
						npc.unblock();
						player.setBusy(false);
						owner.lastOption = -1;
						return;
					}
					owner.lastOption = option;
				}
			});
			player.getActionSender().sendMenu(strs);
			while (player.lastOption == -2
					&amp;&amp; System.currentTimeMillis() - time &lt; 20000) { // timeout
				Wait(25);
			}
			if (player.lastOption == -1 || player.lastOption == -2) {
				player.setBusy(false);
				npc.unblock();
				return -1;
			}
			player.setBusy(true);
			int newOpt = player.lastOption;
			player.lastOption = -2;
			PlayerTalk(strs[newOpt]);
			return newOpt + 1;
		} catch (Exception e) {

			e.printStackTrace();
			return -1;
		}
	}

	/**
	 * Teleports you from x to y (without a bubble)
	 * 
	 * @param x
	 *            - new x axis
	 * @param y
	 *            - new y axis
	 */
	public void Teleport(int x, int y) {
		player.teleport(x, y, false);
	}

	/**
	 * Removes all the items from inventory that you specify
	 * 
	 * @param id
	 *            - the item id to remove
	 */
	public void RemoveAllItem(int id) {
		RemoveItem(id, player.getInventory().countId(id));
	}

	/**
	 * Checks inventory for items/amounts.
	 * 
	 * @param id
	 *            - the items id
	 * @param amount
	 *            - the amount
	 * @return true if it has the items.
	 */
	public boolean HasItem(int id, int amount) {
		if (EntityHandler.getItemDef(id).stackable) {
			for (InvItem i : player.getInventory().getItems()) {
				if (i.getID() == id &amp;&amp; i.getAmount() &gt;= amount)
					return true;
			}
		} else {
			int count = 0;
			for (InvItem i : player.getInventory().getItems()) {
				if (i.getID() == id)
					count++;
			}
			if (count &gt;= amount)
				return true;
		}
		return false;
	}

	/**
	 * Removes item(s) from your inventory
	 * 
	 * @param id
	 *            - the item id
	 * @param amount
	 *            - the amount
	 */
	public void RemoveItem(int id, int amount) {
		if (EntityHandler.getItemDef(id).stackable) {
			player.getInventory().remove(id, amount);
		} else {
			for (int i = 0; i &lt; amount; i++)
				player.getInventory().remove(id, 1);
		}
		player.getActionSender().sendInventory();
	}

	/**
	 * Adds experience to the selected Stat.
	 * 
	 * @param stat
	 *            - the stat number
	 * @param amount
	 *            - the amount
	 * 
	 */
	public void AddExp(int stat, int amount) {
		player.incExp(stat, amount, false, false);
	}

	/**
	 * Gets the free space in your inventory
	 * 
	 * @return - the free slots
	 */
	public int GetInventoryFreeSpace() {
		return 30 - player.getInventory().size();
	}

	/**
	 * Gets the max level of a stat
	 * 
	 * @param stat
	 * @return
	 */
	public int GetStatMaxLevel(int stat) {
		return player.getMaxStat(stat);
	}

	/**
	 * Gets the current level of a stat
	 * 
	 * @param stat
	 * @return
	 */
	public int GetStatCurLevel(int stat) {
		return player.getCurStat(stat);
	}

	/**
	 * Adds an item to your bank
	 * 
	 * @param id
	 *            - the item id
	 * @param amount
	 *            - the amount
	 */
	public void AddBankItem(int id, int amount) {
		player.getBank().add(new InvItem(id, amount));
	}

	public int CountItem(int id) {
		return player.getInventory().countId(id);
	}

	public static final int ATTACK = 0;
	public static final int DEFENSE = 1;
	public static final int STRENGTH = 2;
	public static final int HITS = 3;
	public static final int RANGED = 4;
	public static final int PRAYER = 5;
	public static final int MAGIC = 6;
	public static final int COOKING = 7;
	public static final int WOODCUT = 8;
	public static final int FLETCHING = 9;
	public static final int FISHING = 10;
	public static final int FIREMAKING = 11;
	public static final int CRAFTING = 12;
	public static final int SMITHING = 13;
	public static final int MINING = 14;
	public static final int HERBLAW = 15;
	public static final int AGILITY = 16;
	public static final int THIEVING = 17;
}</code></pre>
<p>Now open the build.XML file, and find:</p>
<pre><code class="lang-auto">&lt;pathelement location="${lib}/hex-string.jar" /&gt;</code></pre>
<p>Under that, add:</p>
<pre><code class="lang-auto">&lt;pathelement location="${lib}/bsh.jar" /&gt;</code></pre>
<p>Now find:</p>
<pre><code class="lang-auto">&lt;pathelement location="${lib}/xstream.jar" /&gt;</code></pre>
<p>Under  that, add:</p>
<pre><code class="lang-auto">&lt;pathelement location="${lib}/bsh.jar" /&gt;</code></pre>
<p>Your scripts should be saved in the following format:</p>
<blockquote>485 - Bank assistant.BSH</blockquote>
<p>Take note that the name of the NPC has to be EXACT from the NpcDef. You can’t use Bank Assistant, etc.</p>
<p>Also, if you have an NPC ID that is lower than 3 digits, save it as:</p>
<blockquote>031 - Juliet.BSH</blockquote>
<p>If you still need help after following these steps, post again or catch me on Skype.</p>
      </div>

      <meta itemprop='headline' content='Help with NPC chat and Quests'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/xrune.html'><span itemprop='name'>xrune</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2013-02-22T23:33:07Z'>
            <time itemprop='dateModified' datetime='2016-08-04T03:53:36Z' class='post-time'>
              August 4, 2016,  3:53am
            </time>
        <span itemprop='position'>#9</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“yong min, post:8, topic:400998”]First of all, download the bsh.jar provided below and place it in your ‘lib’ folder, server side.</p>
<p>BSH.JAR : <a href="http://uppit.com/mihylkhldk4e/bsh.jar%5B/quote%5D" rel="nofollow noopener">http://uppit.com/mihylkhldk4e/bsh.jar[/quote]</a></p>
<p>Bad link? it says file not found</p>
      </div>

      <meta itemprop='headline' content='Help with NPC chat and Quests'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/yong_min.html'><span itemprop='name'>yong_min</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2013-02-22T23:54:13Z'>
            <time itemprop='dateModified' datetime='2016-08-04T03:53:40Z' class='post-time'>
              August 4, 2016,  3:53am
            </time>
        <span itemprop='position'>#10</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“xrune, post:9, topic:400998”][quote author=yong min link=topic=498054.msg4236106#msg4236106 date=1361571360]</p>
<p>First of all, download the bsh.jar provided below and place it in your ‘lib’ folder, server side.</p>
<p>BSH.JAR : <a href="http://uppit.com/mihylkhldk4e/bsh.jar%5B/quote%5D" rel="nofollow noopener">http://uppit.com/mihylkhldk4e/bsh.jar[/quote]</a></p>
<p>Bad link? it says file not found[/quote]</p>
<p>Grab the bsh.jar out of BeyondRSC or other. Check lib folder.</p>
      </div>

      <meta itemprop='headline' content='Help with NPC chat and Quests'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/CodeForFame.html'><span itemprop='name'>CodeForFame</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2013-02-23T00:44:14Z'>
            <time itemprop='dateModified' datetime='2016-08-04T03:54:02Z' class='post-time'>
              August 4, 2016,  3:54am
            </time>
        <span itemprop='position'>#11</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>The only system that reads like that, and allows you to use proper delays would be the new system in MoparClassic.</p>
<p>Here is one example:<br>
<a href="https://github.com/Lothy/MoparClassic/blob/pre-beta/GameServer/src/org/moparscape/msc/gs/npchandler/ToKaramja.scala" class="onebox" target="_blank" rel="nofollow noopener">https://github.com/Lothy/MoparClassic/blob/pre-beta/GameServer/src/org/moparscape/msc/gs/npchandler/ToKaramja.scala</a></p>
<p>You can see more here:<br>
<a href="https://github.com/Lothy/MoparClassic/tree/pre-beta/GameServer/src/org/moparscape/msc/gs/npchandler" class="onebox" target="_blank" rel="nofollow noopener">https://github.com/Lothy/MoparClassic/tree/pre-beta/GameServer/src/org/moparscape/msc/gs/npchandler</a></p>
<p>To actually bind it, you add a mapping here:<br>
<a href="https://github.com/Lothy/MoparClassic/blob/pre-beta/GameServer/src/org/moparscape/msc/gs/service/DialogService.scala" class="onebox" target="_blank" rel="nofollow noopener">https://github.com/Lothy/MoparClassic/blob/pre-beta/GameServer/src/org/moparscape/msc/gs/service/DialogService.scala</a></p>
<p>For quests, you’d end up creating a class for it, and using the player’s instance of the Quests class.</p>
<p>Quests class:<br>
<a href="https://github.com/Lothy/MoparClassic/blob/pre-beta/GameServer/src/org/moparscape/msc/gs/model/player/attribute/Quests.scala" class="onebox" target="_blank" rel="nofollow noopener">https://github.com/Lothy/MoparClassic/blob/pre-beta/GameServer/src/org/moparscape/msc/gs/model/player/attribute/Quests.scala</a></p>
<p>You could end up doing something like this to increment a quest stage:</p>
<p><code>
player.quests.set(DruidicRitual.id, 1)</code></p>
<p>To create a quest you could do something like this (not entirely sure this would compile as I’m typing this out in the quick reply box):</p>
<p>[code=Scala]<br>
package org.moparscape.msc.gs.quest</p>
<p>object DruidicRitual {<br>
val id = 0<br>
}</p>
<p>class DruidicRitual extends Quest(DruidicRitual.id, “Duidic Ritual”, 0,  4, 9)[/code]</p>
<p>In the Quests class you’d need to add the quest by changing line 7 to this:</p>
<p><code>
  val quests: java.util.List[Quest] = List(new DruidicRitual)</code></p>
      </div>

      <meta itemprop='headline' content='Help with NPC chat and Quests'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/yong_min.html'><span itemprop='name'>yong_min</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2013-02-23T05:11:22Z'>
            <time itemprop='dateModified' datetime='2016-08-04T03:54:59Z' class='post-time'>
              August 4, 2016,  3:54am
            </time>
        <span itemprop='position'>#12</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="11" data-topic="400998">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forum.moparisthebest.com/codeforfame/40/3743_1.png" class="avatar"> CodeForFame:</div>
<blockquote>
<p>The only system that reads like that, and allows you to use proper delays would be the new system in MoparClassic.</p>
</blockquote>
</aside>
<p>What delays are you insinuating, exactly? Chat dialogue delays? I am more than positive you’ve used this bsh system, therefore you’ll know the delays work more than ok.</p>
      </div>

      <meta itemprop='headline' content='Help with NPC chat and Quests'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Nothing1.html'><span itemprop='name'>Nothing1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2013-02-23T14:33:59Z'>
            <time itemprop='dateModified' datetime='2016-08-04T03:58:47Z' class='post-time'>
              August 4, 2016,  3:58am
            </time>
        <span itemprop='position'>#13</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Don’t use BSH scripting to make a quests…</p>
      </div>

      <meta itemprop='headline' content='Help with NPC chat and Quests'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/CodeForFame.html'><span itemprop='name'>CodeForFame</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2013-02-23T18:58:56Z'>
            <time itemprop='dateModified' datetime='2016-08-04T04:00:49Z' class='post-time'>
              August 4, 2016,  4:00am
            </time>
        <span itemprop='position'>#14</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“yong min, post:12, topic:400998”][quote author=CodeForFame link=topic=498054.msg4236349#msg4236349 date=1361580254]<br>
The only system that reads like that, and allows you to use proper delays would be the new system in MoparClassic.<br>
[/quote]</p>
<p>What delays are you insinuating, exactly? Chat dialogue delays? I am more than positive you’ve used this bsh system, therefore you’ll know the delays work more than ok.[/quote]</p><blockquote><code>public void NpcTalk(String msg) {
                player.informOfNpcMessage(new ChatMessage(npc, msg, player));
                Wait(2000);
        }</code></blockquote>
<p>2000ms is not the proper delay for all npc messages.</p>
      </div>

      <meta itemprop='headline' content='Help with NPC chat and Quests'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Wife_Beater.html'><span itemprop='name'>Wife_Beater</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2013-02-23T20:29:50Z'>
            <time itemprop='dateModified' datetime='2016-08-04T04:01:12Z' class='post-time'>
              August 4, 2016,  4:01am
            </time>
        <span itemprop='position'>#15</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Regarding BSH scripting, I got it all to work, however if I click off a set of options using the "PickOption(“blah, “blah, blah”);” method and try talking to another npc, the dialogue does not switch npcs. Example: If I talk to a man (ID 011) and click off the set of options, then talk to a guard, the man will be saying the guards lines. How do I fix this?</p>
      </div>

      <meta itemprop='headline' content='Help with NPC chat and Quests'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/yong_min.html'><span itemprop='name'>yong_min</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2013-02-23T21:37:42Z'>
            <time itemprop='dateModified' datetime='2016-08-04T04:01:23Z' class='post-time'>
              August 4, 2016,  4:01am
            </time>
        <span itemprop='position'>#16</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“CodeForFame, post:14, topic:400998”][quote author=yong min link=topic=498054.msg4236544#msg4236544 date=1361596282]</p>
<aside class="quote">
<blockquote>
<p>The only system that reads like that, and allows you to use proper delays would be the new system in MoparClassic.</p>
</blockquote>
</aside>
<p>What delays are you insinuating, exactly? Chat dialogue delays? I am more than positive you’ve used this bsh system, therefore you’ll know the delays work more than ok.<br>
[/quote][quote=yong min]<code>public void NpcTalk(String msg) {
                player.informOfNpcMessage(new ChatMessage(npc, msg, player));
                Wait(2000);
        }</code>[/quote]</p>
<p>2000ms is not the proper delay for all npc messages.[/quote]</p>
<p>What’s proper delay for NPC message?</p>
      </div>

      <meta itemprop='headline' content='Help with NPC chat and Quests'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/CodeForFame.html'><span itemprop='name'>CodeForFame</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2013-02-25T08:16:43Z'>
            <time itemprop='dateModified' datetime='2016-08-04T04:15:35Z' class='post-time'>
              August 4, 2016,  4:15am
            </time>
        <span itemprop='position'>#17</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“yong min, post:16, topic:400998”][quote author=CodeForFame link=topic=498054.msg4237475#msg4237475 date=1361645936]</p>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<p>The only system that reads like that, and allows you to use proper delays would be the new system in MoparClassic.</p>
</blockquote>
</aside>
<p>What delays are you insinuating, exactly? Chat dialogue delays? I am more than positive you’ve used this bsh system, therefore you’ll know the delays work more than ok.<br>
[/quote][quote=yong min]<code>public void NpcTalk(String msg) {
                player.informOfNpcMessage(new ChatMessage(npc, msg, player));
                Wait(2000);
        }</code>[/quote]</p>
<p>2000ms is not the proper delay for all npc messages.</p>
</blockquote>
</aside>
<p>What’s proper delay for NPC message?[/quote]They’re all multiples of 600ms. Though, I’m pretty sure there are a few different lengths.</p>
      </div>

      <meta itemprop='headline' content='Help with NPC chat and Quests'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/help-with-npc-chat-and-quests/400998 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 07:06:02 GMT -->
</html>
