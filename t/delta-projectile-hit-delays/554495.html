<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/delta-projectile-hit-delays/554495 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:05:50 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>[Delta] Projectile Hit Delays - Runescape - moparisthebest.com</title>
    <meta name="description" content="This is quite embarrassing due to the fact that I believe ripping this simple code from an old source is going way over my head, but it&amp;#39;s getting late and I might as well see if anyone has a quick pointer. Trying to dete&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="554495.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;[Delta] Projectile Hit Delays&#39;" href="554495.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/delta-projectile-hit-delays/554495" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/delta-projectile-hit-delays/554495" />
<meta property="og:title" content="[Delta] Projectile Hit Delays" />
<meta name="twitter:title" content="[Delta] Projectile Hit Delays" />
<meta property="og:description" content="This is quite embarrassing due to the fact that I believe ripping this simple code from an old source is going way over my head, but it’s getting late and I might as well see if anyone has a quick pointer. Trying to determine if it’s worth ripping this old method of doing things or attempting to write my own.  I’m working on an old project that doesn’t have a time between an arrow being fired and the hit splat appearing; the hitsplat appears when the NPC is attacked, then the arrow is fired. I o..." />
<meta name="twitter:description" content="This is quite embarrassing due to the fact that I believe ripping this simple code from an old source is going way over my head, but it’s getting late and I might as well see if anyone has a quick pointer. Trying to determine if it’s worth ripping this old method of doing things or attempting to write my own.  I’m working on an old project that doesn’t have a time between an arrow being fired and the hit splat appearing; the hitsplat appears when the NPC is attacked, then the arrow is fired. I o..." />
<meta property="article:published_time" content="2016-01-21T06:42:18+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="554495.html">[Delta] Projectile Hit Delays</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/chassy13.html'><span itemprop='name'>chassy13</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2016-01-21T06:42:18Z'>
            <time itemprop='dateModified' datetime='2016-08-04T17:14:59Z' class='post-time'>
              August 4, 2016,  5:14pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>This is quite embarrassing due to the fact that I believe ripping this simple code from an old source is going way over my head, but it’s getting late and I might as well see if anyone has a quick pointer. Trying to determine if it’s worth ripping this old method of doing things or attempting to write my own.</p>
<p>I’m working on an old project that doesn’t have a time between an arrow being fired and the hit splat appearing; the hitsplat appears when the NPC is attacked, then the arrow is fired. I obviously want this vice-versa, so that when the arrow hits the target, the hitsplat appears at the same time.</p>
<p>How is this ‘delay’ calculated in sources such as classic DeltaScape? I’ve skimmed through the AttackNPC() method of Delta’s client class and found the variable lastArrow, which appears to be tracked in process().</p>
<p><code>if (System.currentTimeMillis() - lastArrow &gt; 500 &amp;&amp; arrow) {
	int arrowgfx = getarrowgfxnow();
	if (AttackingOn &gt; 0)
	   rangeGFX(70, arrowgfx);
	if (attacknpc &gt; 0)
	   rangeGFXNPC(70, arrowgfx);
	arrow = false;
	arrow2 = true;
}</code></p>
<p>Edit: Below the above code is also this, which just appears to push the actual hit back more cycles. What the hell is this source doing.</p>
<p><code>if (System.currentTimeMillis() - lastArrow &gt; 1500 &amp;&amp; arrow2) {
	lastArrow = System.currentTimeMillis();
	arrow2 = false;
	if (attacknpc &gt; 0) {
	   server.npcHandler.npcs[attacknpc].hitDiff = npcRangeDamage();
	   server.npcHandler.npcs[attacknpc].updateRequired = true;
	   server.npcHandler.npcs[attacknpc].hitUpdateRequired = true;
	   server.npcHandler.npcs[attacknpc].hit = true;
	}
}</code></p>
<p>I’m assuming from this that the server just waits four cycles before appending the hit, but that doesn’t make sense as to why the hit delay is always perfect for different distances, unless the projectile is actually travelling faster for longer distances.</p>
<p>I had originally figured it was calculated using factors such as the distance between you and the target, the speed of the projectile, etc., but I wasn’t seeing anything specific on this unless it’s written in the CreateProjectile method.</p>
<p>I’m thinking that this is actually relatively straightforward and I’m just being a blind idiot in this mess of code, but thank you for any responses. Feel free to ask questions.</p>
      </div>

      <meta itemprop='headline' content='[Delta] Projectile Hit Delays'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/delta-projectile-hit-delays/554495 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:05:50 GMT -->
</html>
