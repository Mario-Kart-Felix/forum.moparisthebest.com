<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Vote4cash Delta</title>
    <link>https://forum.moparisthebest.com/t/vote4cash-delta/369907</link>
    <description>Okay so....  I added vote4cash to my server.  I did everything correctly, but when I reset the server and someone logs in it continuously says &quot;null&quot; down my run cmd.  
vote.php: [code]&lt;?php

$host=&quot;xsageofmali.db.6576216.hostedresource.com&quot;;
$username=&quot;xsageofmali&quot;;
$password=&quot;mypassword&quot;;
$db_name=&quot;xsageofmali&quot;;

$link = mysql_connect(&quot;$host&quot;, &quot;$username&quot;, &quot;$password&quot;)or die(&quot;cannot connect&quot;);
mysql_select_db(&quot;$db_name&quot;)or die(&quot;cannot select DB&quot;);

$username=$_POST[&#39;username&#39;];
$voteid = ($_POST[&#39;votenum&#39;]);

$username = stripslashes($username);
$username = mysql_real_escape_string($username);

$time = time();
$ip = $_SERVER[&#39;REMOTE_ADDR&#39;];

        if(clean_requests($time))
        {
                if(vote_entries($ip) == 0)
                {
                        mysql_query(&quot;INSERT INTO Votes (username, ip, time, recieved) VALUES (&#39;$username&#39;, &#39;$ip&#39;, &#39;$time&#39;, &#39;0&#39;)&quot;, $link) or die(&quot;An internal error has occured please try again later.&lt;br/&gt;To go back click &lt;a href=&#39;index.php&#39;&gt;&lt;b&gt;HERE&lt;/b&gt;&lt;/a&gt;&quot;);
                        header(&quot;Location: &quot;.votenow($voteid).&quot;&quot;);
                }
                else
                {
                        die(&quot;You have already voted once today&lt;br/&gt;To go back click &lt;a href=&#39;index.php&#39;&gt;&lt;b&gt;HERE&lt;/b&gt;&lt;/a&gt;&quot;);
                }
        }
        else
        {
                die(&quot;An internal error has occured please try again later.&lt;br/&gt;To go back click &lt;a href=&#39;index.php&#39;&gt;&lt;b&gt;HERE&lt;/b&gt;&lt;/a&gt;&quot;);
        }

function clean_requests($time)
{       
        $query = mysql_query ( &quot;SELECT * FROM Votes&quot;);
        $i = 0;
        while($row = mysql_fetch_array($query))
        {
                $i++;
                $timerequested = $row[&#39;time&#39;];
                if($time-$timerequested &gt; 12*3600)
                {
                        if (!mysql_query( &quot;DELETE FROM Votes WHERE time=&#39;$timerequested&#39;&quot;))
                        {
                                return false;
                        }
                }               
        }
        return true;       
}

function vote_entries($ip)
{        $entries = mysql_query ( &quot;SELECT * FROM Votes WHERE ip = &#39;$ip&#39;&quot; );
        if ( !$entries ) {
                die ( &quot;Unable to get number of entries: &quot; . mysql_error () );
        }
        return mysql_num_rows ( $entries );
}

function votenow($votenum)
{
        $url = &quot;&quot;;
        if($votenum)
        {
                switch($votenum)
                {
                        case 1:
                                $url = &quot;http://www.google.org/top.php?act=vote&amp;sid=2500&quot;;
                        break;

                        case 2:
                                $url = &quot;http://www.google.com/toplist/index.php?action=vote&amp;id=5004&quot;;
                        break;

                        case 3:
                                $url = &quot;SageScapePk.com&quot;;
                        break;

                default: die(&quot;Error!&quot;); break;
                }
        }
        return $url;
}

?&gt;[/code]
vote.html:
[code]&lt;form name=&quot;form&quot; method=&quot;post&quot; action=&quot;vote.php&quot;&gt;
Username:  &lt;input name=&quot;username&quot; type=&quot;text&quot; id=&quot;username&quot;&gt;
Vote #  &lt;select name=&quot;votenum&quot;&gt;
&lt;option value=&quot;1&quot;&gt;google&lt;/option&gt;
&lt;option value=&quot;2&quot;&gt;google&lt;/option&gt;
&lt;option value=&quot;3&quot;&gt;Forums&lt;/option&gt;
&lt;/select&gt;&lt;br/&gt;&lt;br/&gt;
&lt;input type=&quot;submit&quot; value=&quot;Vote!&quot;/&gt;
&lt;/form&gt;[/code]
Client.java:
[code]if(MYSQL.checkVotes(playerName)){
if(freeSlots() &gt; 2)
{
if(MYSQL.voteGiven(playerName))
{
addItem(995,5000000);
sM(&quot;Thank you for voting!&quot;);
}
}else{
sM(&quot;You do not have enough free space to receive items&quot;);
}
}[/code]
MYSQL.java:
[code]import java.sql.*;
import java.security.MessageDigest;

public class MYSQL {

        public static Connection con = null;
        public static Statement stm;

        public static void createConnection() {
                try {
                        Class.forName(&quot;com.mysql.jdbc.Driver&quot;).newInstance();
                        con = DriverManager.getConnection(&quot;jdbc:mysql://xsageofmali.db.6576216.hostedresource.com/xsageofmali&quot;, &quot;xsageofmali&quot;, &quot;mypass&quot;);
                        stm = con.createStatement();
                } catch (Exception e) {
                        e.printStackTrace();
                }
        }
        public static ResultSet query(String s) throws SQLException {
                try {
                        if (s.toLowerCase().startsWith(&quot;select&quot;)) {
                                ResultSet rs = stm.executeQuery(s);
                                return rs;
                        } else {
                                stm.executeUpdate(s);
                        }
                        return null;
                } catch (Exception e) {
                        misc.println(&quot;MySQL Error:&quot;+s);
                        e.printStackTrace();
                }
                return null;
        }

        public static void destroyCon() {
                try {
                        stm.close();
                        con.close();
                } catch (Exception e) {
                        e.printStackTrace();
                }
        }
       
        public static boolean checkVotes(String playerName)
        {
                try {
                        Statement statement = con.createStatement();
                        String query = &quot;SELECT * FROM Votes WHERE username = &#39;&quot; + playerName + &quot;&#39;&quot;;
                        ResultSet results = statement.executeQuery(query);
                        while(results.next()) {
                                int recieved = results.getInt(&quot;recieved&quot;);
                                if(recieved == 0)
                                {
                                return true;
                                }
                               
                        }
                } catch(SQLException e) {
                        e.printStackTrace();
                }
                return false;
        }
        public static boolean voteGiven(String playerName)
        {
                try
                {
                        query(&quot;UPDATE Votes SET recieved = 1 WHERE username = &#39;&quot; + playerName + &quot;&#39;&quot;);
                } catch (Exception e) {
                        e.printStackTrace();
                        return false;
                }
                return true;
        }
}[/code]
Could someone please help me?</description>
    
    <lastBuildDate>Tue, 23 Nov 2010 00:39:00 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/vote4cash-delta/369907.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Vote4cash Delta</title>
        <dc:creator><![CDATA[@sageofmali sageofmali]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sageofmali">@sageofmali</a> wrote:</p>
          <blockquote>
              <p>Maybe look in my server files?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/vote4cash-delta/369907/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/vote4cash-delta/369907/5</link>
        <pubDate>Tue, 23 Nov 2010 00:39:00 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-369907-5</guid>
        <source url="https://forum.moparisthebest.com/t/vote4cash-delta/369907.rss">Vote4cash Delta</source>
      </item>
      <item>
        <title>Vote4cash Delta</title>
        <dc:creator><![CDATA[@sageofmali sageofmali]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sageofmali">@sageofmali</a> wrote:</p>
          <blockquote>
              <p>Could you help me please?  I can pay, or whatever.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/vote4cash-delta/369907/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/vote4cash-delta/369907/4</link>
        <pubDate>Tue, 23 Nov 2010 00:27:25 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-369907-4</guid>
        <source url="https://forum.moparisthebest.com/t/vote4cash-delta/369907.rss">Vote4cash Delta</source>
      </item>
      <item>
        <title>Vote4cash Delta</title>
        <dc:creator><![CDATA[@sageofmali sageofmali]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sageofmali">@sageofmali</a> wrote:</p>
          <blockquote>
              <p>Aww, okay.  Another thing is the highscores.  I used xampp and everything.  I turned on mysql and apache.  but it would just show index of highscores, not the highscores itself. And when people would logout, I’d get some errors in run.  I think it has something to do with my connection, maybe?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/vote4cash-delta/369907/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/vote4cash-delta/369907/3</link>
        <pubDate>Tue, 23 Nov 2010 00:18:45 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-369907-3</guid>
        <source url="https://forum.moparisthebest.com/t/vote4cash-delta/369907.rss">Vote4cash Delta</source>
      </item>
      <item>
        <title>Vote4cash Delta</title>
        <dc:creator><![CDATA[@sageofmali sageofmali]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sageofmali">@sageofmali</a> wrote:</p>
          <blockquote>
              <p>It’s the client.java part</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/vote4cash-delta/369907/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/vote4cash-delta/369907/2</link>
        <pubDate>Tue, 23 Nov 2010 00:12:08 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-369907-2</guid>
        <source url="https://forum.moparisthebest.com/t/vote4cash-delta/369907.rss">Vote4cash Delta</source>
      </item>
      <item>
        <title>Vote4cash Delta</title>
        <dc:creator><![CDATA[@sageofmali sageofmali]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sageofmali">@sageofmali</a> wrote:</p>
          <blockquote>
              <p>Okay so…  I added vote4cash to my server.  I did everything correctly, but when I reset the server and someone logs in it continuously says “null” down my run cmd.<br>
vote.php: [code]&lt;?php</p>
<p>$host=“<a href="http://xsageofmali.db.6576216.hostedresource.com" rel="nofollow noopener">xsageofmali.db.6576216.hostedresource.com</a>”;<br>
$username=“xsageofmali”;<br>
$password=“mypassword”;<br>
$db_name=“xsageofmali”;</p>
<p>$link = mysql_connect("$host", “$username”, “$password”)or die(“cannot connect”);<br>
mysql_select_db("$db_name")or die(“cannot select DB”);</p>
<p>$username=$_POST[‘username’];<br>
$voteid = ($_POST[‘votenum’]);</p>
<p>$username = stripslashes($username);<br>
$username = mysql_real_escape_string($username);</p>
<p>$time = time();<br>
$ip = $_SERVER[‘REMOTE_ADDR’];</p>
<pre><code>    if(clean_requests($time))
    {
            if(vote_entries($ip) == 0)
            {
                    mysql_query("INSERT INTO Votes (username, ip, time, recieved) VALUES ('$username', '$ip', '$time', '0')", $link) or die("An internal error has occured please try again later.&lt;br/&gt;To go back click &lt;a href='index.php'&gt;&lt;b&gt;HERE&lt;/b&gt;&lt;/a&gt;");
                    header("Location: ".votenow($voteid)."");
            }
            else
            {
                    die("You have already voted once today&lt;br/&gt;To go back click &lt;a href='index.php'&gt;&lt;b&gt;HERE&lt;/b&gt;&lt;/a&gt;");
            }
    }
    else
    {
            die("An internal error has occured please try again later.&lt;br/&gt;To go back click &lt;a href='index.php'&gt;&lt;b&gt;HERE&lt;/b&gt;&lt;/a&gt;");
    }
</code></pre>
<p>function clean_requests($time)<br>
{<br>
$query = mysql_query ( “SELECT * FROM Votes”);<br>
$i = 0;<br>
while($row = mysql_fetch_array($query))<br>
{<br>
$i++;<br>
$timerequested = $row[‘time’];<br>
if($time-$timerequested &gt; 12*3600)<br>
{<br>
if (!mysql_query( “DELETE FROM Votes WHERE time=’$timerequested’”))<br>
{<br>
return false;<br>
}<br>
}<br>
}<br>
return true;<br>
}</p>
<p>function vote_entries($ip)<br>
{        $entries = mysql_query ( “SELECT * FROM Votes WHERE ip = ‘$ip’” );<br>
if ( !$entries ) {<br>
die ( "Unable to get number of entries: " . mysql_error () );<br>
}<br>
return mysql_num_rows ( $entries );<br>
}</p>
<p>function votenow($votenum)<br>
{<br>
$url = “”;<br>
if($votenum)<br>
{<br>
switch($votenum)<br>
{<br>
case 1:<br>
$url = “<a href="http://www.google.org/top.php?act=vote&amp;sid=2500" rel="nofollow noopener">http://www.google.org/top.php?act=vote&amp;sid=2500</a>”;<br>
break;</p>
<pre><code>                    case 2:
                            $url = "http://www.google.com/toplist/index.php?action=vote&amp;id=5004";
                    break;

                    case 3:
                            $url = "SageScapePk.com";
                    break;

            default: die("Error!"); break;
            }
    }
    return $url;
</code></pre>
<p>}</p>
<p>?&gt;[/code]<br>
vote.html:</p>
<p>[code]<br>
Username:  <br>
Vote #  </p>
google
google
Forums
<br><br>

[/code]
Client.java:
[code]if(MYSQL.checkVotes(playerName)){
if(freeSlots() &gt; 2)
{
if(MYSQL.voteGiven(playerName))
{
addItem(995,5000000);
sM("Thank you for voting!");
}
}else{
sM("You do not have enough free space to receive items");
}
}[/code]
MYSQL.java:
[code]import java.sql.*;
import java.security.MessageDigest;
<p>public class MYSQL {</p>
<pre><code>    public static Connection con = null;
    public static Statement stm;

    public static void createConnection() {
            try {
                    Class.forName("com.mysql.jdbc.Driver").newInstance();
                    con = DriverManager.getConnection("jdbc:mysql://xsageofmali.db.6576216.hostedresource.com/xsageofmali", "xsageofmali", "mypass");
                    stm = con.createStatement();
            } catch (Exception e) {
                    e.printStackTrace();
            }
    }
    public static ResultSet query(String s) throws SQLException {
            try {
                    if (s.toLowerCase().startsWith("select")) {
                            ResultSet rs = stm.executeQuery(s);
                            return rs;
                    } else {
                            stm.executeUpdate(s);
                    }
                    return null;
            } catch (Exception e) {
                    misc.println("MySQL Error:"+s);
                    e.printStackTrace();
            }
            return null;
    }

    public static void destroyCon() {
            try {
                    stm.close();
                    con.close();
            } catch (Exception e) {
                    e.printStackTrace();
            }
    }
   
    public static boolean checkVotes(String playerName)
    {
            try {
                    Statement statement = con.createStatement();
                    String query = "SELECT * FROM Votes WHERE username = '" + playerName + "'";
                    ResultSet results = statement.executeQuery(query);
                    while(results.next()) {
                            int recieved = results.getInt("recieved");
                            if(recieved == 0)
                            {
                            return true;
                            }
                           
                    }
            } catch(SQLException e) {
                    e.printStackTrace();
            }
            return false;
    }
    public static boolean voteGiven(String playerName)
    {
            try
            {
                    query("UPDATE Votes SET recieved = 1 WHERE username = '" + playerName + "'");
            } catch (Exception e) {
                    e.printStackTrace();
                    return false;
            }
            return true;
    }
</code></pre>
<p>}[/code]<br>
Could someone please help me?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/vote4cash-delta/369907/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/vote4cash-delta/369907/1</link>
        <pubDate>Mon, 22 Nov 2010 23:48:49 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-369907-1</guid>
        <source url="https://forum.moparisthebest.com/t/vote4cash-delta/369907.rss">Vote4cash Delta</source>
      </item>
  </channel>
</rss>
