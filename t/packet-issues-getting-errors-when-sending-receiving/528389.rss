<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Packet issues. Getting errors when sending/receiving</title>
    <link>https://forum.moparisthebest.com/t/packet-issues-getting-errors-when-sending-receiving/528389</link>
    <description>Client side:
&lt;blockquote&gt;Response: 38241 //why is it sending this? (different number every time)
Routine check, values NOT changed. Alerting server.
Error: T1 - 15,0 - 140,253
Error: T1 - 43,0 - 15,140
Error: T1 - 212,0 - 43,15
Error: T1 - 226,0 - 248,99
Error: T1 - 93,0 - 226,248
Error: T1 - 100,0 - 93,226
Exception in thread &quot;Thread-8&quot; java.lang.ArrayIndexOutOfBoundsException: 31077
	at client.method119(client.java:9522)
	at client.drawGameScreen(client.java:8386)
	at client.processDrawing(client.java:9149)
	at RSApplet.run(RSApplet.java:111)
	at client.run(client.java:4785)
	at java.lang.Thread.run(Unknown Source)&lt;/blockquote&gt;


Server side:
[img]http://oi42.tinypic.com/24fxulx.jpg[/img]

Those are the errors when the packet is first sent. Here&#39;s all the code I&#39;m using for the packet.

[code=java]
			getPA().sendData(this);
[/code]

[code=java]
	public void sendData(Client c) {
		c.outStream.createFrame(140);
		c.outStream.writeWord(0);
	}
[/code]

Where the client receives it:

[code=java]
					case 140:
					int response = inStream.readUnsignedWord();
					System.out.println(&quot;Response: &quot;+ response);
					method833(response);
					pktType = -1;
					return true;
[/code]

[code=java]
private void method833(int i) {
		
		Checking c1 = new Checking();
		
		try {
		c1.checkForValues();
		} catch (Exception e) { return; }
		
		if (!c1.correctValues()) {
			System.out.println(&quot;Routine check, values changed. Alerting server.&quot;);
			stream.createFrame(150);
			stream.writeWord(1);//write 1 back if values are changed
			
		} else {
			System.out.println(&quot;Routine check, values not changed. Alerting server.&quot;);
			stream.createFrame(150);
			stream.writeWord(i);//should write 0 back if values are OK
			
		}
		
		
	}
[/code]

Server side packet:

[code=java]
		packetId[150] = new ProcessChecking();
[/code]

[code=java]
	@Override
	public void processPacket(Client c, int packetType, int packetSize) {
		int response = c.getInStream().readUnsignedWord();
		
		switch (response) {
		case 0:
			//. . .
		break;
		case 1:
			//. . . 
		break;
		
		}
	}
[/code]

Can someone tell me where I&#39;m going wrong please?</description>
    
    <lastBuildDate>Sun, 18 Aug 2013 11:18:35 +0000</lastBuildDate>
    <category>Game Development</category>
    <atom:link href="https://forum.moparisthebest.com/t/packet-issues-getting-errors-when-sending-receiving/528389.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Packet issues. Getting errors when sending/receiving</title>
        <dc:creator><![CDATA[@ohokay ohokay]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ohokay">@ohokay</a> wrote:</p>
          <blockquote>
              <p>Client side:</p>
<blockquote>Response: 38241 //why is it sending this? (different number every time)
Routine check, values NOT changed. Alerting server.
Error: T1 - 15,0 - 140,253
Error: T1 - 43,0 - 15,140
Error: T1 - 212,0 - 43,15
Error: T1 - 226,0 - 248,99
Error: T1 - 93,0 - 226,248
Error: T1 - 100,0 - 93,226
Exception in thread "Thread-8" java.lang.ArrayIndexOutOfBoundsException: 31077
	at client.method119(client.java:9522)
	at client.drawGameScreen(client.java:8386)
	at client.processDrawing(client.java:9149)
	at RSApplet.run(RSApplet.java:111)
	at client.run(client.java:4785)
	at java.lang.Thread.run(Unknown Source)</blockquote>
<p>Server side:<br>
<img src="http://oi42.tinypic.com/24fxulx.jpg" alt width="643" height="123"></p>
<p>Those are the errors when the packet is first sent. Here’s all the code I’m using for the packet.</p>
<pre><code class="lang-auto">			getPA().sendData(this);</code></pre>
<pre><code class="lang-auto">	public void sendData(Client c) {
		c.outStream.createFrame(140);
		c.outStream.writeWord(0);
	}</code></pre>
<p>Where the client receives it:</p>
<pre><code class="lang-auto">					case 140:
					int response = inStream.readUnsignedWord();
					System.out.println("Response: "+ response);
					method833(response);
					pktType = -1;
					return true;</code></pre>
<pre><code class="lang-auto">private void method833(int i) {
		
		Checking c1 = new Checking();
		
		try {
		c1.checkForValues();
		} catch (Exception e) { return; }
		
		if (!c1.correctValues()) {
			System.out.println("Routine check, values changed. Alerting server.");
			stream.createFrame(150);
			stream.writeWord(1);//write 1 back if values are changed
			
		} else {
			System.out.println("Routine check, values not changed. Alerting server.");
			stream.createFrame(150);
			stream.writeWord(i);//should write 0 back if values are OK
			
		}
		
		
	}</code></pre>
<p>Server side packet:</p>
<pre><code class="lang-auto">		packetId[150] = new ProcessChecking();</code></pre>
<pre><code class="lang-auto">	@Override
	public void processPacket(Client c, int packetType, int packetSize) {
		int response = c.getInStream().readUnsignedWord();
		
		switch (response) {
		case 0:
			//. . .
		break;
		case 1:
			//. . . 
		break;
		
		}
	}</code></pre>
<p>Can someone tell me where I’m going wrong please?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/packet-issues-getting-errors-when-sending-receiving/528389/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/packet-issues-getting-errors-when-sending-receiving/528389/1</link>
        <pubDate>Sun, 18 Aug 2013 11:18:35 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-528389-1</guid>
        <source url="https://forum.moparisthebest.com/t/packet-issues-getting-errors-when-sending-receiving/528389.rss">Packet issues. Getting errors when sending/receiving</source>
      </item>
  </channel>
</rss>
