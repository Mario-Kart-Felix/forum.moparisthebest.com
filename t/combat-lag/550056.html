<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/combat-lag/550056 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:07:06 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Combat Lag - Runescape - moparisthebest.com</title>
    <meta name="description" content="I hate to ask for help but PI is so poorly written I can&amp;#39;t trace the origin of a nasty combat lag. 

Pic (gif), let it load

[image] 

As you can see, walking and attack animations are synchronized but the hit update and&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="550056.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Combat Lag&#39;" href="550056.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://azaruth.com/images/clip0010.gif" />
<meta property="og:image" content="http://azaruth.com/images/clip0010.gif" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/combat-lag/550056" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/combat-lag/550056" />
<meta property="og:title" content="Combat Lag" />
<meta name="twitter:title" content="Combat Lag" />
<meta property="og:description" content="I hate to ask for help but PI is so poorly written I can’t trace the origin of a nasty combat lag.  #Pic (gif), let it load#    As you can see, walking and attack animations are synchronized but the hit update and death animation both lag horribly for the attacker. The solution eludes me… I hope someone here has seen/dealt with this before.  –Requested Files/Methods–  Attack method in CombatAssistant class  [code=java]	public void attackPlayer(int i) {  if (Server.playerHandler.players[i] != nul..." />
<meta name="twitter:description" content="I hate to ask for help but PI is so poorly written I can’t trace the origin of a nasty combat lag.  #Pic (gif), let it load#    As you can see, walking and attack animations are synchronized but the hit update and death animation both lag horribly for the attacker. The solution eludes me… I hope someone here has seen/dealt with this before.  –Requested Files/Methods–  Attack method in CombatAssistant class  [code=java]	public void attackPlayer(int i) {  if (Server.playerHandler.players[i] != nul..." />
<meta property="article:published_time" content="2015-02-20T20:55:28+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="550056.html">Combat Lag</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/deathschaos9.html'><span itemprop='name'>deathschaos9</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-02-20T20:55:28Z'>
            <time itemprop='dateModified' datetime='2016-08-04T14:53:54Z' class='post-time'>
              August 4, 2016,  2:53pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I hate to ask for help but PI is so poorly written I can’t trace the origin of a nasty combat lag.</p>
<p><span class="hashtag">#Pic</span> (gif), let it load#<br>
<img src="http://azaruth.com/images/clip0010.gif" alt width="" height=""></p>
<p>As you can see, walking and attack animations are synchronized but the hit update and death animation both lag horribly for the attacker. The solution eludes me… I hope someone here has seen/dealt with this before.</p>
<p>–Requested Files/Methods–<br>
Attack method in CombatAssistant class</p>
<p>[code=java]	public void attackPlayer(int i) {<br>
if (Server.playerHandler.players[i] != null) {<br>
if (Server.playerHandler.players[i].isDead) {<br>
resetPlayerAttack();<br>
return;<br>
}<br>
if (c.curseActive[19]) { // Turmoil<br>
c.getStr = Server.playerHandler.players[i].playerLevel[2] * 10 / 100;<br>
c.getDef = Server.playerHandler.players[i].playerLevel[1] * 15 / 100;<br>
c.getAtt = Server.playerHandler.players[i].playerLevel[0] * 15 / 100;<br>
} else if (c.curseActive[10]) { // LeechAtt<br>
c.getAtt = c.playerLevel[0] * c.attInc / 100;<br>
} else if (c.curseActive[11]) { // Leech Ranged<br>
c.getRange = c.playerLevel[4] * c.rangeInc / 100;<br>
} else if (c.curseActive[12]) { // Leech Magic<br>
c.getMagic = c.playerLevel[6] * c.magicInc / 100;<br>
} else if (c.curseActive[13]) {// leechDef<br>
c.getDef = c.playerLevel[1] * c.defInc / 100;<br>
} else if (c.curseActive[14]) {// LeechStr<br>
c.getStr = c.playerLevel[2] * c.strInc / 100;<br>
}<br>
if (c.respawnTimer &gt; 0<br>
|| Server.playerHandler.players[i].respawnTimer &gt; 0) {<br>
resetPlayerAttack();<br>
return;<br>
}<br>
if (!c.getCombat().checkReqs()) {<br>
return;<br>
}<br>
if (c.getPA().getWearingAmount() &lt; 4 &amp;&amp; c.duelStatus &lt; 1) {<br>
c.sendMessage(“You must be wearing at least 4 items to attack someone.”);<br>
resetPlayerAttack();<br>
return;<br>
}<br>
boolean sameSpot = c.absX == Server.playerHandler.players[i].getX()<br>
&amp;&amp; c.absY == Server.playerHandler.players[i].getY();<br>
if (!c.goodDistance(Server.playerHandler.players[i].getX(),<br>
Server.playerHandler.players[i].getY(), c.getX(), c.getY(),<br>
25)<br>
&amp;&amp; !sameSpot) {<br>
resetPlayerAttack();<br>
return;<br>
}<br>
if (Server.playerHandler.players[i].respawnTimer &gt; 0) {<br>
Server.playerHandler.players[i].playerIndex = 0;<br>
resetPlayerAttack();<br>
return;<br>
}</p>
<pre><code>		if (Server.playerHandler.players[i].heightLevel != c.heightLevel) {
			resetPlayerAttack();
			return;
		}
		c.followId = i;
		c.followId2 = 0;
		if (c.attackTimer &lt;= 0) {
			c.usingBow = false;
			c.specEffect = 0;
			c.usingRangeWeapon = false;
			c.rangeItemUsed = 0;
			boolean usingBow = false;
			boolean usingArrows = false;
			boolean usingOtherRangeWeapons = false;
			boolean usingCross = c.playerEquipment[c.playerWeapon] == 9185;
			c.projectileStage = 0;
			if (c.absX == Server.playerHandler.players[i].absX
					&amp;&amp; c.absY == Server.playerHandler.players[i].absY) {
				if (c.freezeTimer &gt; 0) {
					resetPlayerAttack();
					return;
				}
				c.followId = i;
				c.attackTimer = 0;
				return;
			}
			if (!c.usingMagic) {
				for (int bowId : c.BOWS) {
					if (c.playerEquipment[c.playerWeapon] == bowId) {
						usingBow = true;
						for (int arrowId : c.ARROWS) {
							if (c.playerEquipment[c.playerArrows] == arrowId) {
								usingArrows = true;
							}
						}
					}
				}
				for (int otherRangeId : c.OTHER_RANGE_WEAPONS) {
					if (c.playerEquipment[c.playerWeapon] == otherRangeId) {
						usingOtherRangeWeapons = true;
					}
				}
			}
			if (c.autocasting) {
				c.spellId = c.autocastId;
				c.usingMagic = true;
			}
			if (c.spellId &gt; 0) {
				c.usingMagic = true;
			}
			c.attackTimer = getAttackDelay(c.getItems()
					.getItemName(c.playerEquipment[c.playerWeapon])
					.toLowerCase());

			if (c.duelRule[9]) {
				boolean canUseWeapon = false;
				for (int funWeapon : Config.FUN_WEAPONS) {
					if (c.playerEquipment[c.playerWeapon] == funWeapon) {
						canUseWeapon = true;
					}
				}
				if (!canUseWeapon) {
					c.sendMessage("You can only use fun weapons in this duel!");
					resetPlayerAttack();
					return;
				}
			}
			if (c.duelRule[2] &amp;&amp; (usingBow || usingOtherRangeWeapons)) {
				c.sendMessage("Range has been disabled in this duel!");
				return;
			}
			if (c.duelRule[3]
					&amp;&amp; (!usingBow &amp;&amp; !usingOtherRangeWeapons &amp;&amp; !c.usingMagic)) {
				c.sendMessage("Melee has been disabled in this duel!");
				return;
			}
			if (c.duelRule[4] &amp;&amp; c.usingMagic) {
				c.sendMessage("Magic has been disabled in this duel!");
				resetPlayerAttack();
				return;
			}
			if (!usingCross
					&amp;&amp; !usingArrows
					&amp;&amp; usingBow
					&amp;&amp; (c.playerEquipment[c.playerWeapon] &lt; 4212 || c.playerEquipment[c.playerWeapon] &gt; 4223)
					&amp;&amp; !c.usingMagic) {
				c.sendMessage("You have run out of arrows!");
				c.stopMovement();
				resetPlayerAttack();
				return;
			}
			if (properBolts() &amp;&amp; c.playerEquipment[c.playerWeapon] == 11235) {
				c.sendMessage("You cannot use bolts with a dark bow.");
				c.stopMovement();
				resetPlayerAttack();
				return;
			}
			if (correctBowAndArrows() &lt; c.playerEquipment[c.playerArrows]
					&amp;&amp; Config.CORRECT_ARROWS &amp;&amp; usingBow
					&amp;&amp; !usingCrystalBow()
					&amp;&amp; c.playerEquipment[c.playerWeapon] != 9185
					&amp;&amp; !c.usingMagic) {
				String itemA = c.getItems()
						.getItemName(c.playerEquipment[c.playerArrows])
						.toLowerCase();
				String itemB = c.getItems()
						.getItemName(c.playerEquipment[c.playerWeapon])
						.toLowerCase();
				c.sendMessage("You can't use " + itemA + "s with a "
						+ itemB + ".");
				c.stopMovement();
				resetPlayerAttack();
				return;
			}
			if (c.playerEquipment[c.playerWeapon] == 9185 &amp;&amp; !properBolts()
					&amp;&amp; !c.usingMagic) {
				c.sendMessage("You must use bolts with a crossbow.");
				c.stopMovement();
				resetPlayerAttack();
				return;
			}
			if (c.playerEquipment[c.playerWeapon] == 15241
					&amp;&amp; c.playerEquipment[c.playerArrows] != 15243) {
				c.sendMessage("You can't use Hand Cannon without cannon shots!");
				c.stopMovement();
				resetPlayerAttack();
				return;
			}
			if (c.playerEquipment[c.playerWeapon] == 15241) {
				c.gfx0(2138);
			}
			if (usingBow || c.usingMagic || usingOtherRangeWeapons
					|| usingHally()) {
				c.stopMovement();
			}
			if (!checkMagicReqs(c.spellId)) {
				c.stopMovement();
				resetPlayerAttack();
				return;
			}
			c.faceUpdate(i + 32768);
			if (c.duelStatus != 5) {
				if (!c.inBountyHunterCombat()
						&amp;&amp; !c.attackedPlayers.contains(c.playerIndex)
						&amp;&amp; !Server.playerHandler.players[c.playerIndex].attackedPlayers
								.contains(c.playerId)) {
					c.attackedPlayers.add(c.playerIndex);
					c.isSkulled = true;
					c.skullTimer = Config.SKULL_TIMER;
					c.headIconPk = 0;
					c.getPA().requestUpdates();
				}
			}
			c.specAccuracy = 1.0;
			c.specDamage = 1.0;
			c.delayedDamage = c.delayedDamage2 = 0;
			if (c.usingSpecial &amp;&amp; !c.usingMagic) {
				if (c.duelRule[10] &amp;&amp; c.duelStatus == 5) {
					c.sendMessage("Special attacks have been disabled during this duel!");
					c.usingSpecial = false;
					c.getItems().updateSpecialBar();
					resetPlayerAttack();
					return;
				}
				if (checkSpecAmount(c.playerEquipment[c.playerWeapon])) {
					c.lastArrowUsed = c.playerEquipment[c.playerArrows];
					activateSpecial(c.playerEquipment[c.playerWeapon], i);
					c.followId = c.playerIndex;
					return;
				} else {
					c.sendMessage("You don't have the required special energy to use this attack.");
					c.usingSpecial = false;
					c.getItems().updateSpecialBar();
					c.playerIndex = 0;
					return;
				}
			}
			if (!c.usingMagic) {
				c.startAnimation(getWepAnim(c.getItems()
						.getItemName(c.playerEquipment[c.playerWeapon])
						.toLowerCase()));
				c.mageFollow = false;
			} else {
				c.startAnimation(c.MAGIC_SPELLS[c.spellId][2]);
				c.mageFollow = true;
				c.followId = c.playerIndex;
			}
			if (c.coolDown == 0 &amp;&amp; c.inWild() == false) {
				resetPlayerAttack();
				return;
			}
			if (Server.playerHandler.players[i].coolDown == 0
					&amp;&amp; Server.playerHandler.players[i].world == 2)
				Server.playerHandler.players[i].coolDown = 10;
	[/code]
</code></pre>
<p>Death event in PlayerAssistant class</p>
<pre><code class="lang-auto">	/**
	 * Dieing
	 **/
	public void applyDead() {
		c.respawnTimer = 10;
		c.isDead = false;
		if (c.curseActive[17]) {
			applyWrath();
		}
		if (c.prayerActive[21])
			applyRetribution();
		if (!c.eaten)
			c.startAnimation(2304);
		else
			c.startAnimation(837);
		int weapon = c.playerEquipment[c.playerWeapon];
		if (c.duelStatus != 6) {
			// c.killerId = c.getCombat().getKillerId(c.playerId);
			c.killerId = findKiller();
			Client o = (Client) Server.playerHandler.players[c.killerId];
			for(int x = 0; x &lt; 8; x++){
				if(o.pkReqs[x] == o.pks){
					//o.sendMessage("Gratz! You've completed pk task! :)");
					c.refleshTasks();
				}
			}
			if (o != null) {
				if (!(c.npcIndex &gt; 0)) {
				}
				if (c.killerId != c.playerId) {
					o.sendMessage("You have defeated "
							+ Misc.optimizeText(c.playerName) + "!");
				}
				//if (c.killerId != c.playerId &amp;&amp; c.inWild() &amp;&amp; !c.inFunPk())
				//	c.logKill(o.playerName, c.playerName, o.pkPoints);
				if (c.killerId != c.playerId &amp;&amp; ((o.playerRights &gt; 0 &amp;&amp; o.playerRights &lt; 4) || (c.playerRights &gt; 0 &amp;&amp; c.playerRights &lt; 4))  &amp;&amp; c.inWild() &amp;&amp; !c.inFunPk()) {
					String data = Misc.optimizeText(o.playerName) + " killed " + Misc.optimizeText(c.playerName);
					c.log.writeLog("staffKills", data);
				}
				if ((c.inWild() &amp;&amp; !c.inFunPk()) || c.world == 2) {
					if (c == o)
						return;
					if (o.lastKilled.equalsIgnoreCase(c.playerName)) {
						o.sendMessage("You have killed " + Misc.optimizeText(c.playerName) + " twice in a row and recieve no Pk Points.");
					} else {
				//		if (Misc.random(500) &gt; 400) {
					o.pkPoints += 1;
					if (o.world == 2)
						o.pkPoints += 50;
					o.sendMessage("You have now have " + o.pkPoints + " PK Points.");
					o.lastKilled = c.playerName;
			//		}
					}
					o.getPA().sendFrame126("PkPts: " + o.pkPoints, 29169);
				}
				if (c.killerId != c.playerId &amp;&amp; c.inWild() &amp;&amp; !c.inFunPk())
					c.logKill(o.playerName, c.playerName, o.pkPoints, c.world);
				if (c.inClanWars()) {
					ClanWars.killedSomeone();
				}
				if (weapon == CastleWars.SARA_BANNER
						|| weapon == CastleWars.ZAMMY_BANNER) {
					c.getItems().removeItem(weapon, 3);
					c.getItems().deleteItem2(weapon, 1);
					CastleWars.dropFlag(c, weapon);
				}
				c.playerKilled = c.playerId;
				if (o.duelStatus == 5) {
					o.duelStatus++;
				}
			}
		}
		c.poisonDamage = 0;
		c.faceUpdate(0);
		EventManager.getSingleton().addEvent(new Event() {
			public void execute(EventContainer b) {
				c.npcIndex = 0;
				c.playerIndex = 0;
				b.stop();
			}
		}, 2500);
		c.stopMovement();
		if (c.duelStatus &lt;= 4) {
			Client o = (Client) Server.playerHandler.players[c.killerId];
			c.sendMessage("Oh dear you are dead!");
			PlayerSave.saveGame(o);
			PlayerSave.saveGame(c);
		} else if (c.duelStatus != 6) {
			Client o = (Client) Server.playerHandler.players[c.killerId];
			c.sendMessage("You have lost the duel!");
			PlayerSave.saveGame(o);
			PlayerSave.saveGame(c);
		}
		
		Client o = (Client) Server.playerHandler.players[c.killerId];
		if(o.leavePenalty &gt; 0) {
			BountyHunter.startLeavePenalty(o);
		} else {
			BountyHunter.startPickupPenalty(o);
		}
		
		resetDamageDone();
		c.specAmount = 10;
		c.getItems().addSpecialBar(c.playerEquipment[c.playerWeapon]);
		c.lastVeng = 0;
		c.vengOn = false;
		resetFollowers();
		c.attackTimer = 10;
		removeAllWindows();
		c.tradeResetNeeded = true;
	}</code></pre>
<p>Melee attack from loop in AttackPlayer class</p>
<p>[code=java]/**<br>
* Attack player<br>
**/<br>
case ATTACK_PLAYER:<br>
c.playerIndex = c.getInStream().readSignedWordBigEndian();<br>
Client other = (Client) Server.playerHandler.players[c.playerIndex];<br>
if(Server.playerHandler.players[c.playerIndex] == null ){<br>
break;<br>
}<br>
c.sendMessage(“AttackPlayer:33 find player to begin”);<br>
if(c.respawnTimer &gt; 0) {<br>
break;<br>
}</p>
<pre><code>		if (c.autocastId &gt; 0)
			c.autocasting = true;
		
		if (!c.autocasting &amp;&amp; c.spellId &gt; 0) {
			c.spellId = 0;
		}
		c.mageFollow = false;
		c.spellId = 0;
		c.usingMagic = false;
		boolean usingBow = false;
		boolean usingOtherRangeWeapons = false;
		boolean usingArrows = false;
		boolean usingCross = c.playerEquipment[c.playerWeapon] == 9185;
		for (int bowId : c.BOWS) {
			if(c.playerEquipment[c.playerWeapon] == bowId) {
				usingBow = true;
				for (int arrowId : c.ARROWS) {
					if(c.playerEquipment[c.playerArrows] == arrowId) {
						usingArrows = true;
					}
				}
			}
		}
		for (int otherRangeId : c.OTHER_RANGE_WEAPONS) {
			if(c.playerEquipment[c.playerWeapon] == otherRangeId) {
				usingOtherRangeWeapons = true;
			}
		}
		if(c.duelStatus == 5) {	
			if(c.duelCount &gt; 0) {
				c.sendMessage("The duel hasn't started yet!");
				c.playerIndex = 0;
				return;
			}
			if(c.duelRule[9]){
				boolean canUseWeapon = false;
				for(int funWeapon: Config.FUN_WEAPONS) {
					if(c.playerEquipment[c.playerWeapon] == funWeapon) {
						canUseWeapon = true;
					}
				}
				if(!canUseWeapon) {
					c.sendMessage("You can only use fun weapons in this duel!");
					return;
				}
			}
			
			if(c.duelRule[2] &amp;&amp; (usingBow || usingOtherRangeWeapons)) {
				c.sendMessage("Range has been disabled in this duel!");
				return;
			}
			if(c.duelRule[3] &amp;&amp; (!usingBow &amp;&amp; !usingOtherRangeWeapons)) {
				c.sendMessage("Melee has been disabled in this duel!");
				return;
			}
		}
		
		if((usingBow || c.autocasting) &amp;&amp; c.goodDistance(c.getX(), c.getY(), Server.playerHandler.players[c.playerIndex].getX(), Server.playerHandler.players[c.playerIndex].getY(), 6)) {
			c.usingBow = true;
			c.stopMovement();
		}
		
		if(usingOtherRangeWeapons &amp;&amp; c.goodDistance(c.getX(), c.getY(), Server.playerHandler.players[c.playerIndex].getX(), Server.playerHandler.players[c.playerIndex].getY(), 3)) {
			c.usingRangeWeapon = true;
			c.stopMovement();
		}
		if (!usingBow)
			c.usingBow = false;
		if (!usingOtherRangeWeapons)
			c.usingRangeWeapon = false;

		if(!usingCross &amp;&amp; !usingArrows &amp;&amp; usingBow &amp;&amp; c.playerEquipment[c.playerWeapon] &lt; 4212 &amp;&amp; c.playerEquipment[c.playerWeapon] &gt; 4223) {
			c.sendMessage("You have run out of arrows!");
			return;
		} 
		if(c.getCombat().correctBowAndArrows() &lt; c.playerEquipment[c.playerArrows] &amp;&amp; Config.CORRECT_ARROWS &amp;&amp; usingBow &amp;&amp; !c.getCombat().usingCrystalBow() &amp;&amp; c.playerEquipment[c.playerWeapon] != 9185) {
				c.sendMessage("You can't use "+c.getItems().getItemName(c.playerEquipment[c.playerArrows]).toLowerCase()+"s with a "+c.getItems().getItemName(c.playerEquipment[c.playerWeapon]).toLowerCase()+".");
				c.stopMovement();
				c.getCombat().resetPlayerAttack();
				return;
		}
		if (c.playerEquipment[c.playerWeapon] == 9185 &amp;&amp; !c.getCombat().properBolts()) {
				c.sendMessage("You must use bolts with a crossbow.");
				c.stopMovement();
				c.getCombat().resetPlayerAttack();
				return;				
		}
		if (c.getCombat().checkReqs()) {
			c.sendMessage("AttackPlayer:123 requirements:" + c.getCombat().checkReqs());
			c.followId = c.playerIndex;
			if (!c.usingMagic &amp;&amp; !usingBow &amp;&amp; !usingOtherRangeWeapons) {
				c.followDistance = 1;
				c.getPA().followPlayer();
			}	
			if (c.attackTimer &lt;= 0) {
				//c.sendMessage("Tried to attack...");
				//c.getCombat().attackPlayer(c.playerIndex);
				//c.attackTimer++;
			}	
		}
		break;[/code]</code></pre>
      </div>

      <meta itemprop='headline' content='Combat Lag'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/sk8rdude461.html'><span itemprop='name'>sk8rdude461</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-02-21T02:33:14Z'>
            <time itemprop='dateModified' datetime='2016-08-04T14:53:58Z' class='post-time'>
              August 4, 2016,  2:53pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>There’s a few methods named playerDelayedHit, or similar. Are you sure it’s not using those?</p>
      </div>

      <meta itemprop='headline' content='Combat Lag'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/deathschaos9.html'><span itemprop='name'>deathschaos9</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-02-22T02:20:45Z'>
            <time itemprop='dateModified' datetime='2016-08-04T14:54:08Z' class='post-time'>
              August 4, 2016,  2:54pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>It only lags for the attacker, that leads me to believe that the issue is with player and NPC updating. The attacker’s client isn’t getting updated when the rest are.</p>
      </div>

      <meta itemprop='headline' content='Combat Lag'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/zyle1992.html'><span itemprop='name'>zyle1992</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-02-22T02:23:38Z'>
            <time itemprop='dateModified' datetime='2016-08-04T14:54:08Z' class='post-time'>
              August 4, 2016,  2:54pm
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hmm, can you post your attack method? The one that the attacker would be using, as well as the death one?</p>
      </div>

      <meta itemprop='headline' content='Combat Lag'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/deathschaos9.html'><span itemprop='name'>deathschaos9</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-02-22T03:18:06Z'>
            <time itemprop='dateModified' datetime='2016-08-04T14:54:08Z' class='post-time'>
              August 4, 2016,  2:54pm
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Attack method in CombatAssistance class</p>
<p>[code=java]	public void attackPlayer(int i) {<br>
if (Server.playerHandler.players[i] != null) {<br>
if (Server.playerHandler.players[i].isDead) {<br>
resetPlayerAttack();<br>
return;<br>
}<br>
if (c.curseActive[19]) { // Turmoil<br>
c.getStr = Server.playerHandler.players[i].playerLevel[2] * 10 / 100;<br>
c.getDef = Server.playerHandler.players[i].playerLevel[1] * 15 / 100;<br>
c.getAtt = Server.playerHandler.players[i].playerLevel[0] * 15 / 100;<br>
} else if (c.curseActive[10]) { // LeechAtt<br>
c.getAtt = c.playerLevel[0] * c.attInc / 100;<br>
} else if (c.curseActive[11]) { // Leech Ranged<br>
c.getRange = c.playerLevel[4] * c.rangeInc / 100;<br>
} else if (c.curseActive[12]) { // Leech Magic<br>
c.getMagic = c.playerLevel[6] * c.magicInc / 100;<br>
} else if (c.curseActive[13]) {// leechDef<br>
c.getDef = c.playerLevel[1] * c.defInc / 100;<br>
} else if (c.curseActive[14]) {// LeechStr<br>
c.getStr = c.playerLevel[2] * c.strInc / 100;<br>
}<br>
if (c.respawnTimer &gt; 0<br>
|| Server.playerHandler.players[i].respawnTimer &gt; 0) {<br>
resetPlayerAttack();<br>
return;<br>
}<br>
if (!c.getCombat().checkReqs()) {<br>
return;<br>
}<br>
if (c.getPA().getWearingAmount() &lt; 4 &amp;&amp; c.duelStatus &lt; 1) {<br>
c.sendMessage(“You must be wearing at least 4 items to attack someone.”);<br>
resetPlayerAttack();<br>
return;<br>
}<br>
boolean sameSpot = c.absX == Server.playerHandler.players[i].getX()<br>
&amp;&amp; c.absY == Server.playerHandler.players[i].getY();<br>
if (!c.goodDistance(Server.playerHandler.players[i].getX(),<br>
Server.playerHandler.players[i].getY(), c.getX(), c.getY(),<br>
25)<br>
&amp;&amp; !sameSpot) {<br>
resetPlayerAttack();<br>
return;<br>
}<br>
if (Server.playerHandler.players[i].respawnTimer &gt; 0) {<br>
Server.playerHandler.players[i].playerIndex = 0;<br>
resetPlayerAttack();<br>
return;<br>
}</p>
<pre><code>		if (Server.playerHandler.players[i].heightLevel != c.heightLevel) {
			resetPlayerAttack();
			return;
		}
		c.followId = i;
		c.followId2 = 0;
		if (c.attackTimer &lt;= 0) {
			c.usingBow = false;
			c.specEffect = 0;
			c.usingRangeWeapon = false;
			c.rangeItemUsed = 0;
			boolean usingBow = false;
			boolean usingArrows = false;
			boolean usingOtherRangeWeapons = false;
			boolean usingCross = c.playerEquipment[c.playerWeapon] == 9185;
			c.projectileStage = 0;
			if (c.absX == Server.playerHandler.players[i].absX
					&amp;&amp; c.absY == Server.playerHandler.players[i].absY) {
				if (c.freezeTimer &gt; 0) {
					resetPlayerAttack();
					return;
				}
				c.followId = i;
				c.attackTimer = 0;
				return;
			}
			if (!c.usingMagic) {
				for (int bowId : c.BOWS) {
					if (c.playerEquipment[c.playerWeapon] == bowId) {
						usingBow = true;
						for (int arrowId : c.ARROWS) {
							if (c.playerEquipment[c.playerArrows] == arrowId) {
								usingArrows = true;
							}
						}
					}
				}
				for (int otherRangeId : c.OTHER_RANGE_WEAPONS) {
					if (c.playerEquipment[c.playerWeapon] == otherRangeId) {
						usingOtherRangeWeapons = true;
					}
				}
			}
			if (c.autocasting) {
				c.spellId = c.autocastId;
				c.usingMagic = true;
			}
			if (c.spellId &gt; 0) {
				c.usingMagic = true;
			}
			c.attackTimer = getAttackDelay(c.getItems()
					.getItemName(c.playerEquipment[c.playerWeapon])
					.toLowerCase());

			if (c.duelRule[9]) {
				boolean canUseWeapon = false;
				for (int funWeapon : Config.FUN_WEAPONS) {
					if (c.playerEquipment[c.playerWeapon] == funWeapon) {
						canUseWeapon = true;
					}
				}
				if (!canUseWeapon) {
					c.sendMessage("You can only use fun weapons in this duel!");
					resetPlayerAttack();
					return;
				}
			}
			if (c.duelRule[2] &amp;&amp; (usingBow || usingOtherRangeWeapons)) {
				c.sendMessage("Range has been disabled in this duel!");
				return;
			}
			if (c.duelRule[3]
					&amp;&amp; (!usingBow &amp;&amp; !usingOtherRangeWeapons &amp;&amp; !c.usingMagic)) {
				c.sendMessage("Melee has been disabled in this duel!");
				return;
			}
			if (c.duelRule[4] &amp;&amp; c.usingMagic) {
				c.sendMessage("Magic has been disabled in this duel!");
				resetPlayerAttack();
				return;
			}
			if (!usingCross
					&amp;&amp; !usingArrows
					&amp;&amp; usingBow
					&amp;&amp; (c.playerEquipment[c.playerWeapon] &lt; 4212 || c.playerEquipment[c.playerWeapon] &gt; 4223)
					&amp;&amp; !c.usingMagic) {
				c.sendMessage("You have run out of arrows!");
				c.stopMovement();
				resetPlayerAttack();
				return;
			}
			if (properBolts() &amp;&amp; c.playerEquipment[c.playerWeapon] == 11235) {
				c.sendMessage("You cannot use bolts with a dark bow.");
				c.stopMovement();
				resetPlayerAttack();
				return;
			}
			if (correctBowAndArrows() &lt; c.playerEquipment[c.playerArrows]
					&amp;&amp; Config.CORRECT_ARROWS &amp;&amp; usingBow
					&amp;&amp; !usingCrystalBow()
					&amp;&amp; c.playerEquipment[c.playerWeapon] != 9185
					&amp;&amp; !c.usingMagic) {
				String itemA = c.getItems()
						.getItemName(c.playerEquipment[c.playerArrows])
						.toLowerCase();
				String itemB = c.getItems()
						.getItemName(c.playerEquipment[c.playerWeapon])
						.toLowerCase();
				c.sendMessage("You can't use " + itemA + "s with a "
						+ itemB + ".");
				c.stopMovement();
				resetPlayerAttack();
				return;
			}
			if (c.playerEquipment[c.playerWeapon] == 9185 &amp;&amp; !properBolts()
					&amp;&amp; !c.usingMagic) {
				c.sendMessage("You must use bolts with a crossbow.");
				c.stopMovement();
				resetPlayerAttack();
				return;
			}
			if (c.playerEquipment[c.playerWeapon] == 15241
					&amp;&amp; c.playerEquipment[c.playerArrows] != 15243) {
				c.sendMessage("You can't use Hand Cannon without cannon shots!");
				c.stopMovement();
				resetPlayerAttack();
				return;
			}
			if (c.playerEquipment[c.playerWeapon] == 15241) {
				c.gfx0(2138);
			}
			if (usingBow || c.usingMagic || usingOtherRangeWeapons
					|| usingHally()) {
				c.stopMovement();
			}
			if (!checkMagicReqs(c.spellId)) {
				c.stopMovement();
				resetPlayerAttack();
				return;
			}
			c.faceUpdate(i + 32768);
			if (c.duelStatus != 5) {
				if (!c.inBountyHunterCombat()
						&amp;&amp; !c.attackedPlayers.contains(c.playerIndex)
						&amp;&amp; !Server.playerHandler.players[c.playerIndex].attackedPlayers
								.contains(c.playerId)) {
					c.attackedPlayers.add(c.playerIndex);
					c.isSkulled = true;
					c.skullTimer = Config.SKULL_TIMER;
					c.headIconPk = 0;
					c.getPA().requestUpdates();
				}
			}
			c.specAccuracy = 1.0;
			c.specDamage = 1.0;
			c.delayedDamage = c.delayedDamage2 = 0;
			if (c.usingSpecial &amp;&amp; !c.usingMagic) {
				if (c.duelRule[10] &amp;&amp; c.duelStatus == 5) {
					c.sendMessage("Special attacks have been disabled during this duel!");
					c.usingSpecial = false;
					c.getItems().updateSpecialBar();
					resetPlayerAttack();
					return;
				}
				if (checkSpecAmount(c.playerEquipment[c.playerWeapon])) {
					c.lastArrowUsed = c.playerEquipment[c.playerArrows];
					activateSpecial(c.playerEquipment[c.playerWeapon], i);
					c.followId = c.playerIndex;
					return;
				} else {
					c.sendMessage("You don't have the required special energy to use this attack.");
					c.usingSpecial = false;
					c.getItems().updateSpecialBar();
					c.playerIndex = 0;
					return;
				}
			}
			if (!c.usingMagic) {
				c.startAnimation(getWepAnim(c.getItems()
						.getItemName(c.playerEquipment[c.playerWeapon])
						.toLowerCase()));
				c.mageFollow = false;
			} else {
				c.startAnimation(c.MAGIC_SPELLS[c.spellId][2]);
				c.mageFollow = true;
				c.followId = c.playerIndex;
			}
			if (c.coolDown == 0 &amp;&amp; c.inWild() == false) {
				resetPlayerAttack();
				return;
			}
			if (Server.playerHandler.players[i].coolDown == 0
					&amp;&amp; Server.playerHandler.players[i].world == 2)
				Server.playerHandler.players[i].coolDown = 10;
	[/code]
</code></pre>
<p>Death event in PlayerAssistant class</p>
<pre><code class="lang-auto">	/**
	 * Dieing
	 **/
	public void applyDead() {
		c.respawnTimer = 10;
		c.isDead = false;
		if (c.curseActive[17]) {
			applyWrath();
		}
		if (c.prayerActive[21])
			applyRetribution();
		if (!c.eaten)
			c.startAnimation(2304);
		else
			c.startAnimation(837);
		int weapon = c.playerEquipment[c.playerWeapon];
		if (c.duelStatus != 6) {
			// c.killerId = c.getCombat().getKillerId(c.playerId);
			c.killerId = findKiller();
			Client o = (Client) Server.playerHandler.players[c.killerId];
			for(int x = 0; x &lt; 8; x++){
				if(o.pkReqs[x] == o.pks){
					//o.sendMessage("Gratz! You've completed pk task! :)");
					c.refleshTasks();
				}
			}
			if (o != null) {
				if (!(c.npcIndex &gt; 0)) {
				}
				if (c.killerId != c.playerId) {
					o.sendMessage("You have defeated "
							+ Misc.optimizeText(c.playerName) + "!");
				}
				//if (c.killerId != c.playerId &amp;&amp; c.inWild() &amp;&amp; !c.inFunPk())
				//	c.logKill(o.playerName, c.playerName, o.pkPoints);
				if (c.killerId != c.playerId &amp;&amp; ((o.playerRights &gt; 0 &amp;&amp; o.playerRights &lt; 4) || (c.playerRights &gt; 0 &amp;&amp; c.playerRights &lt; 4))  &amp;&amp; c.inWild() &amp;&amp; !c.inFunPk()) {
					String data = Misc.optimizeText(o.playerName) + " killed " + Misc.optimizeText(c.playerName);
					c.log.writeLog("staffKills", data);
				}
				if ((c.inWild() &amp;&amp; !c.inFunPk()) || c.world == 2) {
					if (c == o)
						return;
					if (o.lastKilled.equalsIgnoreCase(c.playerName)) {
						o.sendMessage("You have killed " + Misc.optimizeText(c.playerName) + " twice in a row and recieve no Pk Points.");
					} else {
				//		if (Misc.random(500) &gt; 400) {
					o.pkPoints += 1;
					if (o.world == 2)
						o.pkPoints += 50;
					o.sendMessage("You have now have " + o.pkPoints + " PK Points.");
					o.lastKilled = c.playerName;
			//		}
					}
					o.getPA().sendFrame126("PkPts: " + o.pkPoints, 29169);
				}
				if (c.killerId != c.playerId &amp;&amp; c.inWild() &amp;&amp; !c.inFunPk())
					c.logKill(o.playerName, c.playerName, o.pkPoints, c.world);
				if (c.inClanWars()) {
					ClanWars.killedSomeone();
				}
				if (weapon == CastleWars.SARA_BANNER
						|| weapon == CastleWars.ZAMMY_BANNER) {
					c.getItems().removeItem(weapon, 3);
					c.getItems().deleteItem2(weapon, 1);
					CastleWars.dropFlag(c, weapon);
				}
				c.playerKilled = c.playerId;
				if (o.duelStatus == 5) {
					o.duelStatus++;
				}
			}
		}
		c.poisonDamage = 0;
		c.faceUpdate(0);
		EventManager.getSingleton().addEvent(new Event() {
			public void execute(EventContainer b) {
				c.npcIndex = 0;
				c.playerIndex = 0;
				b.stop();
			}
		}, 2500);
		c.stopMovement();
		if (c.duelStatus &lt;= 4) {
			Client o = (Client) Server.playerHandler.players[c.killerId];
			c.sendMessage("Oh dear you are dead!");
			PlayerSave.saveGame(o);
			PlayerSave.saveGame(c);
		} else if (c.duelStatus != 6) {
			Client o = (Client) Server.playerHandler.players[c.killerId];
			c.sendMessage("You have lost the duel!");
			PlayerSave.saveGame(o);
			PlayerSave.saveGame(c);
		}
		
		Client o = (Client) Server.playerHandler.players[c.killerId];
		if(o.leavePenalty &gt; 0) {
			BountyHunter.startLeavePenalty(o);
		} else {
			BountyHunter.startPickupPenalty(o);
		}
		
		resetDamageDone();
		c.specAmount = 10;
		c.getItems().addSpecialBar(c.playerEquipment[c.playerWeapon]);
		c.lastVeng = 0;
		c.vengOn = false;
		resetFollowers();
		c.attackTimer = 10;
		removeAllWindows();
		c.tradeResetNeeded = true;
	}</code></pre>
<p>Melee attack from loop in AttackPlayer class</p>
<p>[code=java]/**<br>
* Attack player<br>
**/<br>
case ATTACK_PLAYER:<br>
c.playerIndex = c.getInStream().readSignedWordBigEndian();<br>
Client other = (Client) Server.playerHandler.players[c.playerIndex];<br>
if(Server.playerHandler.players[c.playerIndex] == null ){<br>
break;<br>
}<br>
c.sendMessage(“AttackPlayer:33 find player to begin”);<br>
if(c.respawnTimer &gt; 0) {<br>
break;<br>
}</p>
<pre><code>		if (c.autocastId &gt; 0)
			c.autocasting = true;
		
		if (!c.autocasting &amp;&amp; c.spellId &gt; 0) {
			c.spellId = 0;
		}
		c.mageFollow = false;
		c.spellId = 0;
		c.usingMagic = false;
		boolean usingBow = false;
		boolean usingOtherRangeWeapons = false;
		boolean usingArrows = false;
		boolean usingCross = c.playerEquipment[c.playerWeapon] == 9185;
		for (int bowId : c.BOWS) {
			if(c.playerEquipment[c.playerWeapon] == bowId) {
				usingBow = true;
				for (int arrowId : c.ARROWS) {
					if(c.playerEquipment[c.playerArrows] == arrowId) {
						usingArrows = true;
					}
				}
			}
		}
		for (int otherRangeId : c.OTHER_RANGE_WEAPONS) {
			if(c.playerEquipment[c.playerWeapon] == otherRangeId) {
				usingOtherRangeWeapons = true;
			}
		}
		if(c.duelStatus == 5) {	
			if(c.duelCount &gt; 0) {
				c.sendMessage("The duel hasn't started yet!");
				c.playerIndex = 0;
				return;
			}
			if(c.duelRule[9]){
				boolean canUseWeapon = false;
				for(int funWeapon: Config.FUN_WEAPONS) {
					if(c.playerEquipment[c.playerWeapon] == funWeapon) {
						canUseWeapon = true;
					}
				}
				if(!canUseWeapon) {
					c.sendMessage("You can only use fun weapons in this duel!");
					return;
				}
			}
			
			if(c.duelRule[2] &amp;&amp; (usingBow || usingOtherRangeWeapons)) {
				c.sendMessage("Range has been disabled in this duel!");
				return;
			}
			if(c.duelRule[3] &amp;&amp; (!usingBow &amp;&amp; !usingOtherRangeWeapons)) {
				c.sendMessage("Melee has been disabled in this duel!");
				return;
			}
		}
		
		if((usingBow || c.autocasting) &amp;&amp; c.goodDistance(c.getX(), c.getY(), Server.playerHandler.players[c.playerIndex].getX(), Server.playerHandler.players[c.playerIndex].getY(), 6)) {
			c.usingBow = true;
			c.stopMovement();
		}
		
		if(usingOtherRangeWeapons &amp;&amp; c.goodDistance(c.getX(), c.getY(), Server.playerHandler.players[c.playerIndex].getX(), Server.playerHandler.players[c.playerIndex].getY(), 3)) {
			c.usingRangeWeapon = true;
			c.stopMovement();
		}
		if (!usingBow)
			c.usingBow = false;
		if (!usingOtherRangeWeapons)
			c.usingRangeWeapon = false;

		if(!usingCross &amp;&amp; !usingArrows &amp;&amp; usingBow &amp;&amp; c.playerEquipment[c.playerWeapon] &lt; 4212 &amp;&amp; c.playerEquipment[c.playerWeapon] &gt; 4223) {
			c.sendMessage("You have run out of arrows!");
			return;
		} 
		if(c.getCombat().correctBowAndArrows() &lt; c.playerEquipment[c.playerArrows] &amp;&amp; Config.CORRECT_ARROWS &amp;&amp; usingBow &amp;&amp; !c.getCombat().usingCrystalBow() &amp;&amp; c.playerEquipment[c.playerWeapon] != 9185) {
				c.sendMessage("You can't use "+c.getItems().getItemName(c.playerEquipment[c.playerArrows]).toLowerCase()+"s with a "+c.getItems().getItemName(c.playerEquipment[c.playerWeapon]).toLowerCase()+".");
				c.stopMovement();
				c.getCombat().resetPlayerAttack();
				return;
		}
		if (c.playerEquipment[c.playerWeapon] == 9185 &amp;&amp; !c.getCombat().properBolts()) {
				c.sendMessage("You must use bolts with a crossbow.");
				c.stopMovement();
				c.getCombat().resetPlayerAttack();
				return;				
		}
		if (c.getCombat().checkReqs()) {
			c.sendMessage("AttackPlayer:123 requirements:" + c.getCombat().checkReqs());
			c.followId = c.playerIndex;
			if (!c.usingMagic &amp;&amp; !usingBow &amp;&amp; !usingOtherRangeWeapons) {
				c.followDistance = 1;
				c.getPA().followPlayer();
			}	
			if (c.attackTimer &lt;= 0) {
				//c.sendMessage("Tried to attack...");
				//c.getCombat().attackPlayer(c.playerIndex);
				//c.attackTimer++;
			}	
		}
		break;[/code]</code></pre>
      </div>

      <meta itemprop='headline' content='Combat Lag'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Clawz_fury.html'><span itemprop='name'>Clawz_fury</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-02-22T03:49:13Z'>
            <time itemprop='dateModified' datetime='2016-08-04T14:54:08Z' class='post-time'>
              August 4, 2016,  2:54pm
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>maybe it’s an issue with the update blocks and not the actual combat process?</p>
      </div>

      <meta itemprop='headline' content='Combat Lag'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/deathschaos9.html'><span itemprop='name'>deathschaos9</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-02-22T04:13:28Z'>
            <time itemprop='dateModified' datetime='2016-08-04T14:54:22Z' class='post-time'>
              August 4, 2016,  2:54pm
            </time>
        <span itemprop='position'>#7</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>That’s what I deduced but nothing I do fixes it. I see nothing that would indicate everyone except the attacker gets updated.</p>
<p>In the meantime I’ll start writing debugging statements during certain events to see whats happening when.</p>
      </div>

      <meta itemprop='headline' content='Combat Lag'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/deathschaos9.html'><span itemprop='name'>deathschaos9</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-03-06T05:37:29Z'>
            <time itemprop='dateModified' datetime='2016-08-04T14:56:21Z' class='post-time'>
              August 4, 2016,  2:56pm
            </time>
        <span itemprop='position'>#8</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I’ve come up empty handed. Anyone?</p>
      </div>

      <meta itemprop='headline' content='Combat Lag'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/sk8rdude461.html'><span itemprop='name'>sk8rdude461</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-03-06T09:04:57Z'>
            <time itemprop='dateModified' datetime='2016-08-04T14:56:22Z' class='post-time'>
              August 4, 2016,  2:56pm
            </time>
        <span itemprop='position'>#9</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I’m not seeing the code that actually processes the attack in the CombatAssistant code.<br>
Is there something missing from that code you provided? Because it seems to cut off.</p>
<p>Look in your entire project for the variable attackTimer, see if that is used in something like process() of client.java, if it is, trace it to see what the value is for each player while in combat.</p>
      </div>

      <meta itemprop='headline' content='Combat Lag'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/deathschaos9.html'><span itemprop='name'>deathschaos9</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-03-08T04:46:13Z'>
            <time itemprop='dateModified' datetime='2016-08-04T14:56:36Z' class='post-time'>
              August 4, 2016,  2:56pm
            </time>
        <span itemprop='position'>#10</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I’ve found nothing to explain the delay in updating. The “applyDead” method that’s generically used when someone is killed handles the death animation and also sends a message to the killer; “You have slain …”. The message sends with perfect timing, the animation is still delayed on the killers client.</p>
      </div>

      <meta itemprop='headline' content='Combat Lag'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/combat-lag/550056 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:07:06 GMT -->
</html>
