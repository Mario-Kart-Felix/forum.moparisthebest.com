<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/task-system-problem/544181 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:06:19 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Task system problem - General Programming - moparisthebest.com</title>
    <meta name="description" content="I&amp;#39;m attempting to create a task system for an RSPS but I&amp;#39;m running into a problem and I don&amp;#39;t find what causes it. 

Everything runs fine until my walkToTask finishes. Then all active tasks shut down. 

TaskManager [code&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="544181.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Task system problem&#39;" href="544181.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/task-system-problem/544181" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/task-system-problem/544181" />
<meta property="og:title" content="Task system problem" />
<meta name="twitter:title" content="Task system problem" />
<meta property="og:description" content="I’m attempting to create a task system for an RSPS but I’m running into a problem and I don’t find what causes it.  Everything runs fine until my walkToTask finishes. Then all active tasks shut down.  TaskManager  package elysia.tasks;  import java.util.concurrent.Executors; import java.util.concurrent.ScheduledExecutorService; import java.util.concurrent.TimeUnit;  import elysia.utilities.logging.LogTypes; import elysia.utilities.logging.Logger;  public class TaskManager { 	 	/** 	 * The task s..." />
<meta name="twitter:description" content="I’m attempting to create a task system for an RSPS but I’m running into a problem and I don’t find what causes it.  Everything runs fine until my walkToTask finishes. Then all active tasks shut down.  TaskManager  package elysia.tasks;  import java.util.concurrent.Executors; import java.util.concurrent.ScheduledExecutorService; import java.util.concurrent.TimeUnit;  import elysia.utilities.logging.LogTypes; import elysia.utilities.logging.Logger;  public class TaskManager { 	 	/** 	 * The task s..." />
<meta property="article:published_time" content="2014-06-21T19:14:57+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="544181.html">Task system problem</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/general-programming.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>General Programming</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/RandQm.html'><span itemprop='name'>RandQm</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-06-21T19:14:57Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:19:11Z' class='post-time'>
              August 4, 2016,  1:19pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I’m attempting to create a task system for an RSPS but I’m running into a problem and I don’t find what causes it.</p>
<p>Everything runs fine until my walkToTask finishes. Then all active tasks shut down.</p>
<p>TaskManager</p>
<pre><code class="lang-auto">package elysia.tasks;

import java.util.concurrent.Executors;
import java.util.concurrent.ScheduledExecutorService;
import java.util.concurrent.TimeUnit;

import elysia.utilities.logging.LogTypes;
import elysia.utilities.logging.Logger;

public class TaskManager {
	
	/**
	 * The task scheduler service.
	 */
	private static final ScheduledExecutorService SCHEDULER = Executors.newScheduledThreadPool(1);
	
	
	/**
	 * Submits a new task to the scheduler service.
	 * 
	 * @param task The new task.
	 */
	public static void submitTask(final Task task) {
		if (task.getCycleTime() &lt;= 0) {
			Logger.print(LogTypes.INFO, "Task delay must be positive.");
			return;
		}
		if (task.getProperties().contains(TaskProperties.EXECUTE_INSTANTLY)) {
			new Runnable() {
				@Override
				public void run() {
					task.execute();
				}
			};
			if (task.getProperties().contains(TaskProperties.EXECUTE_ONCE))
				return;
		}
		SCHEDULER.scheduleAtFixedRate(task, 0, task.getCycleTime(), TimeUnit.MILLISECONDS);
	}
	
}
</code></pre>
<p>Task</p>
<pre><code class="lang-auto">package elysia.tasks;

import java.util.LinkedList;
import java.util.List;

import elysia.Launcher;

public abstract class Task implements Runnable {
	
	/**
	 * The cycle time of the task.
	 */
	private final int cycleTime;
	
	/**
	 * The task properties.
	 */
	private final List&lt;TaskProperties&gt; properties = new LinkedList&lt;&gt;();
	
	
	/**
	 * The constructor setting up the task.
	 */
	public Task() {
		this(Launcher.getCycleTime());
	}
	
	/**
	 * The constructor setting up the task.
	 * 
	 * @param cycleTime The cycle time for the task.
	 */
	public Task(int cycleTime) {
		this(cycleTime, TaskProperties.DEFAULT);
	}
	
	/**
	 * The constructor setting up the task.
	 * 
	 * @param properties The properties for the task.
	 */
	public Task(TaskProperties... properties) {
		this(Launcher.getCycleTime(), properties);
	}
	
	/**
	 * The constructor setting up the task.
	 * 
	 * @param cycleTime The cycle time for the task.
	 * 
	 * @param properties The task properties.
	 */
	public Task(int cycleTime, TaskProperties... properties) {
		this.cycleTime = cycleTime;

		for (TaskProperties property : properties)
			this.properties.add(property);
	}
	
	/**
	 * Executes any task actions.
	 */
	protected abstract void execute();

	@Override
	public void run() {
		execute();
		
		if (properties.contains(TaskProperties.EXECUTE_ONCE)) {
			stop();
			return;
		}
	}
	
	/**
	 * Stops the task execution.
	 */
	public void stop() {
		this.stop();
	}
	
	
	/**
	 * Retrieves the cycle time of the task.
	 * 
	 * @return The cycle time.
	 */
	public int getCycleTime() {
		return cycleTime;
	}
	
	/**
	 * Retrieves the task's properties.
	 * 
	 * @return The properties.
	 */
	public List&lt;TaskProperties&gt; getProperties() {
		return properties;
	}

}
</code></pre>
<p>WalkToTask</p>
<pre><code class="lang-auto">package elysia.tasks;

import elysia.game.entities.Location;
import elysia.game.entities.mobiles.players.Player2;

public abstract class WalkToTask extends Task {

	/**
	 * The distance we can be away from the target location.
	 */
	private final int distance;
	
	/**
	 * The player assigned to the event.
	 */
	private final Player2 player;
	
	/**
	 * The target location to walk to.
	 */
	private final Location targetLocation;
	
	
	/**
	 * The constructor setting up the event.
	 * 
	 * @param player The player to follow.
	 * 
	 * @param targetLocation The location to walk to.
	 */
	public WalkToTask(Player2 player, Location targetLocation) {
		this(player, targetLocation, 1);
	}
	
	/**
	 * The constructor setting up the event.
	 * 
	 * @param player The player to follow.
	 * 
	 * @param targetLocation The location to walk to.
	 * 
	 * @param distance The distance we can be away from the target location.
	 */
	public WalkToTask(Player2 player, Location targetLocation, int distance) {
		super(300, TaskProperties.EXECUTE_INSTANTLY);
		this.player = player;
		this.targetLocation = targetLocation;
		this.distance = distance;
		player.setWalkToTask(this);
	}
	
	/**
	 * The acting we expect after reaching the target location.
	 */
	protected abstract void act();
	
	@Override
	protected void execute() {
		System.out.println("WalkToEvent: Execute");
		player.getLocation().setLocation(new Location(player.getClient().absX, player.getClient().absY, player.getClient().heightLevel));
		if (player.getLocation().withinDistance(targetLocation, distance)) {
			try {
			System.out.println("WalkToEvent: At Location");
			act();
			stop();
			} catch (Exception e) {
				e.printStackTrace();
			}
		}
	}
	
	/**
	 * Retrieves the distance we can be away from the target location.
	 * 
	 * @return The distance.
	 */
	public int getDistance() {
		return distance;
	}
	
	/**
	 * Retrieves the player to follow.
	 * 
	 * @return The player.
	 */
	public Player2 getPlayer() {
		return player;
	}
	
	/**
	 * Retrieves the target location.
	 * 
	 * @return The location.
	 */
	public Location getTargetLocation() {
		return targetLocation;
	}
	
}</code></pre>
<p>In WalkToTask under execute:</p>
<pre><code class="lang-auto"> System.out.println("WalkToEvent: At Location");

                        act();

                        stop();</code></pre>
<p>When that part is executed all my active tasks stop, whether they are related to this one or not.</p>
      </div>

      <meta itemprop='headline' content='Task system problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Ashi.html'><span itemprop='name'>Ashi</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-06-21T19:23:10Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:19:11Z' class='post-time'>
              August 4, 2016,  1:19pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>You should cache the task and not just use one task otherwise you’re just using a single instance to run everything and went that thread/task stops so will everything else.</p>
<p>You can also use a factory to handle the tasks.</p>
      </div>

      <meta itemprop='headline' content='Task system problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/RandQm.html'><span itemprop='name'>RandQm</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-06-21T20:15:55Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:19:20Z' class='post-time'>
              August 4, 2016,  1:19pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Ashi, post:2, topic:544181”]You need to cache the task otherwise you’re just using a single instance to run everything and went that thread/task stops so will everything else.</p>
<p>You can also use a factory to handle the tasks.[/quote]<br>
Could you maybe be more clear about how I would go about caching a task, I honestly have no clue what I’m supposed to do now.</p>
      </div>

      <meta itemprop='headline' content='Task system problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Protosstribe.html'><span itemprop='name'>Protosstribe</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-06-21T20:20:53Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:19:20Z' class='post-time'>
              August 4, 2016,  1:19pm
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>RandQm: Why are you calling this.stop() in the stop() method? It would just create an infinite loop via recursion.</p>
      </div>

      <meta itemprop='headline' content='Task system problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/davidi2.html'><span itemprop='name'>davidi2</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-06-21T20:23:26Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:19:20Z' class='post-time'>
              August 4, 2016,  1:19pm
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I <span class="bbcode-i">think</span> he meant to call super.stop</p>
      </div>

      <meta itemprop='headline' content='Task system problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Protosstribe.html'><span itemprop='name'>Protosstribe</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-06-21T20:42:25Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:19:21Z' class='post-time'>
              August 4, 2016,  1:19pm
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>But Runnable does not even have a stop() method. <img src="../../images/emoji/twitter/winkae52.png?v=5" title=":wink:" class="emoji" alt=":wink:"></p>
      </div>

      <meta itemprop='headline' content='Task system problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Ashi.html'><span itemprop='name'>Ashi</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-06-21T20:45:18Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:19:22Z' class='post-time'>
              August 4, 2016,  1:19pm
            </time>
        <span itemprop='position'>#7</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“RandQm, post:3, topic:544181”][quote author=Ashi link=topic=663063.msg4431355#msg4431355 date=1403378590]<br>
You need to cache the task otherwise you’re just using a single instance to run everything and went that thread/task stops so will everything else.</p>
<p>You can also use a factory to handle the tasks.<br>
[/quote]<br>
Could you maybe be more clear about how I would go about caching a task, I honestly have no clue what I’m supposed to do now.[/quote]<br>
Add the tasks to an arraylist or something to cache it. Make sure you actually create a new object for each task so it doesn’t close every other task.</p>
<p>You don’t have to actually cache the tasks but it’ll just make it easier for you to manage them all.</p>
<p>Edit: I was being a retard lmao, was commenting on my phone and didn’t see everything properly.</p>
      </div>

      <meta itemprop='headline' content='Task system problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/davidi2.html'><span itemprop='name'>davidi2</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-06-21T20:47:34Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:19:22Z' class='post-time'>
              August 4, 2016,  1:19pm
            </time>
        <span itemprop='position'>#8</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“object, post:6, topic:544181”]But Runnable does not even have a stop() method. ;)[/quote]So he probably wanted to stop the thread with that method, noticed super.stop had a red line under it, and then changed to this.stop thinking that would fix it ;D</p>
      </div>

      <meta itemprop='headline' content='Task system problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Protosstribe.html'><span itemprop='name'>Protosstribe</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-06-21T21:12:34Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:19:22Z' class='post-time'>
              August 4, 2016,  1:19pm
            </time>
        <span itemprop='position'>#9</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Yeah, it very well could be. But stopping the Thread wouldn’t really work out very well, considering the Executor API usually reuses the Threads that executes Runnables or Callables. He should have called cancel() on the ScheduledFuture that is returned by the scheduleAtFixedRate(Runnable, long, TimeUnit) method provided by ScheduledExecutorService.</p>
      </div>

      <meta itemprop='headline' content='Task system problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Clawz_fury.html'><span itemprop='name'>Clawz_fury</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-06-21T22:48:50Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:19:23Z' class='post-time'>
              August 4, 2016,  1:19pm
            </time>
        <span itemprop='position'>#10</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Get the ScheduledFuture object that’s returned by schedule and use cancel(true) on it</p>
      </div>

      <meta itemprop='headline' content='Task system problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/RandQm.html'><span itemprop='name'>RandQm</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-06-21T23:00:40Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:19:24Z' class='post-time'>
              August 4, 2016,  1:19pm
            </time>
        <span itemprop='position'>#11</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="10" data-topic="544181">
<div class="title">
<div class="quote-controls"></div>
 lare69:</div>
<blockquote>
<p>Get the ScheduledFuture object that’s returned by schedule and use cancel(true) on it</p>
</blockquote>
</aside>
<p>Yeah that was what I originally wanted to use (cancel(true))<br>
but I wanted to try stopping the runnable so I didn’t have to go holding all the objects into a list.<br>
Which I"ll have to do after all apparently.</p>
<p>edit:<br>
the this.stop call is kinda retarded lol, I never noticed that I was calling the method itself again</p>
<p>edit2:<br>
Would this be a good way of handling it? It works but I’m not sure if it’s a proper way of doing it or not.</p>
<pre><code class="lang-auto">package elysia.tasks;

import java.util.HashMap;
import java.util.Map;
import java.util.Map.Entry;
import java.util.concurrent.Executors;
import java.util.concurrent.ScheduledExecutorService;
import java.util.concurrent.ScheduledFuture;
import java.util.concurrent.TimeUnit;

import elysia.utilities.logging.LogTypes;
import elysia.utilities.logging.Logger;

public class TaskManager {
	
	/**
	 * The task scheduler service.
	 */
	private static final ScheduledExecutorService SCHEDULER = Executors.newScheduledThreadPool(1);
	
	/**
	 * The map holding the active tasks.
	 */
	private static Map&lt;Task, ScheduledFuture&lt;Task&gt;&gt; futureTasks = new HashMap&lt;&gt;();
	
	
	/**
	 * Submits a new task to the scheduler service.
	 * 
	 * @param task The new task.
	 */
	@SuppressWarnings("unchecked")
	public static void submitTask(final Task task) {
		if (task.getCycleTime() &lt;= 0) {
			Logger.print(LogTypes.INFO, "Task delay must be positive.");
			return;
		}
		if (task.getProperties().contains(TaskProperties.EXECUTE_INSTANTLY)) {
			new Runnable() {
				@Override
				public void run() {
					task.execute();
				}
			};
			if (task.getProperties().contains(TaskProperties.EXECUTE_ONCE))
				return;
		}
		futureTasks.put(task, (ScheduledFuture&lt;Task&gt;) SCHEDULER.scheduleAtFixedRate(task, 0, task.getCycleTime(), TimeUnit.MILLISECONDS));
	}
	
	/**
	 * Stops the running task.
	 * 
	 * @param task The task to stop.
	 */
	public static void stop(Task task) {
		for (Entry&lt;Task, ScheduledFuture&lt;Task&gt;&gt; entry : futureTasks.entrySet()) {
			if (entry.getKey() == task)
				entry.getValue().cancel(true);
		}
	}
	
}</code></pre>
      </div>

      <meta itemprop='headline' content='Task system problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/task-system-problem/544181 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:06:19 GMT -->
</html>
