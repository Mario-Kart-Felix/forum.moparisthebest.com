<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>[Delphi]FindColorTolerance - Can you make it faster? :P</title>
    <link>https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279</link>
    <description>[code]type
  PRGBQuadArray = ^TRGBQuadArray;
  TRGBQuadArray = array [0..0] of TRGBQuad;

function FindColorTolerance(Client : HDC; TargetColor : TRGBQuad; var dx, dy : Integer; x1, y1, x2, y2, Tolerance : Integer) : Boolean;

const
  Offset : array [0..0] of Integer = (1);

var
   bmpW, bmpH : Integer;
   bmi : TBitmapInfo;
   DIBHandle : HBitmap;
   CompDC : HDC;
   PrevObj : HGDIOBJ;
   Pixels : PRGBQuadArray;
   i, l , HW : Integer;
   j : Integer;

begin

  Result := False;

  bmpW := x2 - x1 + 1;
  bmpH := y2 - y1 + 1;

  FillMemory(@bmi, SizeOf(TBitmapInfo), 0);
  with bmi.bmiHeader do
  begin
    biSize        := SizeOf(TBitmapInfoHeader);
    biWidth       := bmpW;
    biHeight      := -bmpH;
    biPlanes      := 1;
    biBitCount    := 32;
    biCompression := BI_RGB;
  end;

  try
    DIBHandle := CreateDIBSection(0, bmi, DIB_RGB_COLORS, Pointer(Pixels), 0, 0);

    CompDC := CreateCompatibleDC(Client);
    PrevObj := SelectObject(CompDC, DIBHandle);

    BitBlt(CompDC, 0, 0, bmpW, bmpH, Client, x1, y1, SRCCOPY);

    l := High(Offset);

    HW := ( bmpH - 1 ) * ( bmpW - 1 );

    for j := 0 to l do
    begin
      if Result then
        Break;

      i := 0 - OffSet[j];
      while ( i &lt; ( HW ) - OffSet[j] ) and ( not Result ) do
      begin
        Inc(i, Length(OffSet));
        if Sqr(Tolerance) &gt;= (Sqr(TargetColor.rgbRed - Pixels^[i].rgbRed)
                            + Sqr(TargetColor.rgbGreen - Pixels^[i].rgbGreen)
                            + Sqr(TargetColor.rgbBlue - Pixels^[i].rgbBlue)) then
        begin
          dx := x1 + ( i mod bmpW );
          dy := y1 + ( i div bmpW );
          Result := True;
        end;
      end;
    end;

  finally
    PrevObj := SelectObject(CompDC, PrevObj);
    DeleteDC(CompDC);
    DeleteObject(DIBHandle);
  end;

end;[/code]

I&#39;m looking to improve speed :D

See what you can do please, maybe use a GetDIBits instead? Or?</description>
    
    <lastBuildDate>Sun, 12 Jul 2009 08:41:48 +0000</lastBuildDate>
    <category>General Programming</category>
    <atom:link href="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>[Delphi]FindColorTolerance - Can you make it faster? :P</title>
        <dc:creator><![CDATA[@frank frank_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/frank">@frank</a> wrote:</p>
          <blockquote>
              <p>personal preferences based on ignorance are da best</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/25">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/25</link>
        <pubDate>Sun, 12 Jul 2009 08:41:48 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-284279-25</guid>
        <source url="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279.rss">[Delphi]FindColorTolerance - Can you make it faster? :P</source>
      </item>
      <item>
        <title>[Delphi]FindColorTolerance - Can you make it faster? :P</title>
        <dc:creator><![CDATA[@charmz ChArMz]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/charmz">@charmz</a> wrote:</p>
          <blockquote>
              <p>[quote=“Unhandled, post:23, topic:284279”]Wait so you are saying you want to find the <span class="bbcode-b">first</span> pixel of a certain colour starting at the top left and travelling left to right, row by row?</p>
<p>May I ask what possible use you could have for this?[/quote]</p>
<p>Yes…If i am searching for a pixel, I want it to find the first from the top left -&gt; Bottom right.  This is how i like it done. If i need to i will later convert this function to a FindColorsTolerance, and then just sort through the matching pixels how ever i need to</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/24">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/24</link>
        <pubDate>Fri, 10 Jul 2009 21:43:09 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-284279-24</guid>
        <source url="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279.rss">[Delphi]FindColorTolerance - Can you make it faster? :P</source>
      </item>
      <item>
        <title>[Delphi]FindColorTolerance - Can you make it faster? :P</title>
        <dc:creator><![CDATA[@Unhandled Unhandled]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/unhandled">@Unhandled</a> wrote:</p>
          <blockquote>
              <p>Wait so you are saying you want to find the <span class="bbcode-b">first</span> pixel of a certain colour starting at the top left and travelling left to right, row by row?</p>
<p>May I ask what possible use you could have for this?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/23">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/23</link>
        <pubDate>Fri, 10 Jul 2009 20:47:04 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-284279-23</guid>
        <source url="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279.rss">[Delphi]FindColorTolerance - Can you make it faster? :P</source>
      </item>
      <item>
        <title>[Delphi]FindColorTolerance - Can you make it faster? :P</title>
        <dc:creator><![CDATA[@charmz ChArMz]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/charmz">@charmz</a> wrote:</p>
          <blockquote>
              <p>Well…</p>
<p>What if i am seaching an area that is 8x8. Pixels @ 1, 8, 2, 8, and 3, 8 are all the same pixel. My goal is to find the pixel @ 1, 8. But i am using a offset of 2. So it finds the 2, 8 which is the correct pixel, but not the one i wanted it to find.</p>
<p>I am no expert, and I guess i spoke too soon. If i was making a FindColors zstars’ solution would improve speed.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/22">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/22</link>
        <pubDate>Fri, 10 Jul 2009 20:37:51 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-284279-22</guid>
        <source url="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279.rss">[Delphi]FindColorTolerance - Can you make it faster? :P</source>
      </item>
      <item>
        <title>[Delphi]FindColorTolerance - Can you make it faster? :P</title>
        <dc:creator><![CDATA[@moparisthebest Moparisthebest]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/moparisthebest">@moparisthebest</a> wrote:</p>
          <blockquote>
              <aside class="quote no-group" data-post="19" data-topic="284279">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/charmz/40/5_513041d5f7104045db30895d3b90af16.png" class="avatar"> ChArMz:</div>
<blockquote>
<p>First off like zstars said if the color is not even found, this process will become very very slow. Also, say the color I wanted to find was in the first pixel, but my offset was set @ say 2, I would first have to check the offest @ 2, and then go back and check. Yes, it sounds like a good idea, but it isnt the most efficient.</p>
</blockquote>
</aside>
<p>The algorithm zstars presented would, in the worst case scenario (color not found), run at the same speed as your algorithm, and in any other case would be much faster than your algorithm, what else could you want?  (not to mention that it could be multi-threaded, as unhandled said.)</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/21">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/21</link>
        <pubDate>Fri, 10 Jul 2009 18:08:43 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-284279-21</guid>
        <source url="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279.rss">[Delphi]FindColorTolerance - Can you make it faster? :P</source>
      </item>
      <item>
        <title>[Delphi]FindColorTolerance - Can you make it faster? :P</title>
        <dc:creator><![CDATA[@Unhandled Unhandled]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/unhandled">@Unhandled</a> wrote:</p>
          <blockquote>
              <aside class="quote no-group" data-post="19" data-topic="284279">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/charmz/40/5_513041d5f7104045db30895d3b90af16.png" class="avatar"> ChArMz:</div>
<blockquote>
<p>First off like zstars said if the color is not even found, this process will become very very slow. Also, say the color I wanted to find was in the first pixel, but my offset was set @ say 2, I would first have to check the offest @ 2, and then go back and check. Yes, it sounds like a good idea, but it isnt the most efficient.</p>
</blockquote>
</aside>
<p>If the colour you wanted to find wasn’t in the image, the process would be just as slow as it would be without the optimization.<br>
As zstars said, <span class="bbcode-b">statistically</span> similar pixels are found in groups, and not around the edges of the image.<br>
If you want an optimization that is not based around any assumptions, use multi threading. Apply the first suggestion zstars gave you, but execute each loop in a separate thread. With a dual core processor and 4 loops, each running in it’s own thread, you could presumably cut the time down by 4.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/20">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/20</link>
        <pubDate>Fri, 10 Jul 2009 15:58:11 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-284279-20</guid>
        <source url="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279.rss">[Delphi]FindColorTolerance - Can you make it faster? :P</source>
      </item>
      <item>
        <title>[Delphi]FindColorTolerance - Can you make it faster? :P</title>
        <dc:creator><![CDATA[@charmz ChArMz]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/charmz">@charmz</a> wrote:</p>
          <blockquote>
              <p>First off like zstars said if the color is not even found, this process will become very very slow. Also, say the color I wanted to find was in the first pixel, but my offset was set @ say 2, I would first have to check the offest @ 2, and then go back and check. Yes, it sounds like a good idea, but it isnt the most efficient.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/19">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/19</link>
        <pubDate>Fri, 10 Jul 2009 15:35:41 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-284279-19</guid>
        <source url="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279.rss">[Delphi]FindColorTolerance - Can you make it faster? :P</source>
      </item>
      <item>
        <title>[Delphi]FindColorTolerance - Can you make it faster? :P</title>
        <dc:creator><![CDATA[@the_bank the bank]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/the_bank">@the_bank</a> wrote:</p>
          <blockquote>
              <p>[quote=“ChArMz, post:16, topic:284279”]thanks for the help zstars, but that is not a very good solution :([/quote]What’s wrong with it?  Do you just not know how to implement it?  It seems like a great and intuitive idea to me.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/18">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/18</link>
        <pubDate>Thu, 09 Jul 2009 23:41:45 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-284279-18</guid>
        <source url="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279.rss">[Delphi]FindColorTolerance - Can you make it faster? :P</source>
      </item>
      <item>
        <title>[Delphi]FindColorTolerance - Can you make it faster? :P</title>
        <dc:creator><![CDATA[@Unhandled Unhandled]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/unhandled">@Unhandled</a> wrote:</p>
          <blockquote>
              <aside class="quote no-group" data-post="16" data-topic="284279">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/charmz/40/5_513041d5f7104045db30895d3b90af16.png" class="avatar"> ChArMz:</div>
<blockquote>
<p>thanks for the help zstars, but that is not a very good solution <img src="https://forum.moparisthebest.com/images/emoji/twitter/frowning.png?v=5" title=":frowning:" class="emoji" alt=":frowning:"></p>
</blockquote>
</aside>
<p>What do you mean? They seem perfectly valid to me. Why don’t you implement them and do some benchmarking, see what sort of an improvement you get.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/17">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/17</link>
        <pubDate>Thu, 09 Jul 2009 21:24:50 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-284279-17</guid>
        <source url="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279.rss">[Delphi]FindColorTolerance - Can you make it faster? :P</source>
      </item>
      <item>
        <title>[Delphi]FindColorTolerance - Can you make it faster? :P</title>
        <dc:creator><![CDATA[@charmz ChArMz]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/charmz">@charmz</a> wrote:</p>
          <blockquote>
              <p>thanks for the help zstars, but that is not a very good solution <img src="https://forum.moparisthebest.com/images/emoji/twitter/frowning.png?v=5" title=":frowning:" class="emoji" alt=":frowning:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/16">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/16</link>
        <pubDate>Thu, 09 Jul 2009 19:28:54 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-284279-16</guid>
        <source url="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279.rss">[Delphi]FindColorTolerance - Can you make it faster? :P</source>
      </item>
      <item>
        <title>[Delphi]FindColorTolerance - Can you make it faster? :P</title>
        <dc:creator><![CDATA[@zstars zstars]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/zstars">@zstars</a> wrote:</p>
          <blockquote>
              <p>You wouldn’t miss pixels.</p>
<p>First optimization (using several loops with non-overlapping offsets) exploits the fact that statistically there tends to be an area of pixels that matches the criteria, rather than a single one. In the cases where that is true, which should be the majority, you would have to test about a 50% of the pixels you otherwise would, if you use two non-overlapping loops with an offset of 2.</p>
<p>Second optimization (starting the checks from the middle outwards) exploits the fact that statistically the pixels you want to find tend to be close to the middle of the specified area.</p>
<p>Of course, these optimizations will only work in those cases in which the color can be found in the image.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/15">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/15</link>
        <pubDate>Mon, 22 Jun 2009 20:24:26 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-284279-15</guid>
        <source url="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279.rss">[Delphi]FindColorTolerance - Can you make it faster? :P</source>
      </item>
      <item>
        <title>[Delphi]FindColorTolerance - Can you make it faster? :P</title>
        <dc:creator><![CDATA[@charmz ChArMz]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/charmz">@charmz</a> wrote:</p>
          <blockquote>
              <p>do something like this 8 pixel step search? :</p>
<p>Offset : array [0…7] of integer = (8, 4, 6, 2, 1, 3, 5, 7);</p>
<p>Ill try it out i guess, but i dunno i dont want to miss pixels <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"></p>
<p>well it seems everyone completely hates delphi, so if someone wanted to make a very fast findcolor in c++ show me how its done <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/14">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/14</link>
        <pubDate>Mon, 22 Jun 2009 16:44:46 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-284279-14</guid>
        <source url="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279.rss">[Delphi]FindColorTolerance - Can you make it faster? :P</source>
      </item>
      <item>
        <title>[Delphi]FindColorTolerance - Can you make it faster? :P</title>
        <dc:creator><![CDATA[@zstars zstars]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/zstars">@zstars</a> wrote:</p>
          <blockquote>
              <p>You could probably make it statistically more efficient if you didn’t do a single bidimensional linear iteration through the pixels, especially for those cases where offset = 1 and tolerance and area is high. Instead, do several non-overlapping iterations with a linearly increased offset.</p>
<p>Example: If you are currently checking pixels 1, 2, 3, 4, 5, 6, …, to make it more efficient you would check 1, 3, 5, 7, 9… and then if not found check as well 2, 4, 6, 8…</p>
<p>If you started checking from the middle of the area and then moved outwards, you would probably increase the statistical efficiency as well.</p>
<p>Might also want to check that the assembler the compiler generates is as optimized as it should. The “not result” check should not appear in the asm, neither should the sqr(Tolerance). Might be a good idea to convert the program to fully optimized VS C/C++ and see if Delphi lives up to its expectations.</p>
<p>Offtopic P.S.: Delphi sucks.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/13">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/13</link>
        <pubDate>Mon, 22 Jun 2009 15:54:33 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-284279-13</guid>
        <source url="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279.rss">[Delphi]FindColorTolerance - Can you make it faster? :P</source>
      </item>
      <item>
        <title>[Delphi]FindColorTolerance - Can you make it faster? :P</title>
        <dc:creator><![CDATA[@charmz ChArMz]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/charmz">@charmz</a> wrote:</p>
          <blockquote>
              <aside class="quote no-group" data-post="11" data-topic="284279">
<div class="title">
<div class="quote-controls"></div>
 la­wl:</div>
<blockquote>
<p>delphi similar to c?</p>
</blockquote>
</aside>
<p>all of you are buttholes, i just ment u can convert between the two fairly easy</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/12">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/12</link>
        <pubDate>Sun, 21 Jun 2009 01:41:12 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-284279-12</guid>
        <source url="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279.rss">[Delphi]FindColorTolerance - Can you make it faster? :P</source>
      </item>
      <item>
        <title>[Delphi]FindColorTolerance - Can you make it faster? :P</title>
        <dc:creator><![CDATA[@lawl lawl]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/lawl">@lawl</a> wrote:</p>
          <blockquote>
              <p>delphi similar to c?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/11">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/11</link>
        <pubDate>Fri, 19 Jun 2009 23:56:37 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-284279-11</guid>
        <source url="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279.rss">[Delphi]FindColorTolerance - Can you make it faster? :P</source>
      </item>
      <item>
        <title>[Delphi]FindColorTolerance - Can you make it faster? :P</title>
        <dc:creator><![CDATA[@Man_UTD_Freak Man UTD Freak]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/man_utd_freak">@Man_UTD_Freak</a> wrote:</p>
          <blockquote>
              <p>[quote=“ChArMz, post:3, topic:284279”]well no one over there is active, come on guys <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"></p>
<p>delphi is very similar to c++, so u could very easy convert to c++ and then help me out <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"></p>
<p>or point me in the direction of a good delphi forum?..cuz i cant find any[/quote]</p>
<p><a href="http://www.delphipages.com/forum/" class="onebox" target="_blank" rel="nofollow noopener">http://www.delphipages.com/forum/</a></p>
<p>I haven’t used this forum and I don’t know if it’s a decent one or not plus it doesn’t look too active either but who knows, It may help anyway.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/10</link>
        <pubDate>Fri, 19 Jun 2009 22:08:24 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-284279-10</guid>
        <source url="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279.rss">[Delphi]FindColorTolerance - Can you make it faster? :P</source>
      </item>
      <item>
        <title>[Delphi]FindColorTolerance - Can you make it faster? :P</title>
        <dc:creator><![CDATA[@the_bank the bank]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/the_bank">@the_bank</a> wrote:</p>
          <blockquote>
              <p>[quote=“ChArMz, post:8, topic:284279”][quote author=Moparisthebest link=topic=375728.msg2831973#msg2831973 date=1245428523]<br>
Why do you want to make it faster?  Is it too slow right now or are you just trying to make it a few milliseconds faster?</p>
<p>Offtopic, but why Delphi?  Why not just use C++ or something more standard?<br>
[/quote]</p>
<p>I am just trying to make it a few ms faster. I guess its fast now, but i would like it to be faster, and I would just like to learn how to make it faster.</p>
<p>Well I like delphi, and as far as i know i can do anything in delphi that can be done in c++.[/quote]orly.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/9</link>
        <pubDate>Fri, 19 Jun 2009 19:13:03 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-284279-9</guid>
        <source url="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279.rss">[Delphi]FindColorTolerance - Can you make it faster? :P</source>
      </item>
      <item>
        <title>[Delphi]FindColorTolerance - Can you make it faster? :P</title>
        <dc:creator><![CDATA[@charmz ChArMz]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/charmz">@charmz</a> wrote:</p>
          <blockquote>
              <p>[quote=“Moparisthebest, post:7, topic:284279”]Why do you want to make it faster?  Is it too slow right now or are you just trying to make it a few milliseconds faster?</p>
<p>Offtopic, but why Delphi?  Why not just use C++ or something more standard?[/quote]</p>
<p>I am just trying to make it a few ms faster. I guess its fast now, but i would like it to be faster, and I would just like to learn how to make it faster.</p>
<p>Well I like delphi, and as far as i know i can do anything in delphi that can be done in c++.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/8</link>
        <pubDate>Fri, 19 Jun 2009 16:30:10 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-284279-8</guid>
        <source url="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279.rss">[Delphi]FindColorTolerance - Can you make it faster? :P</source>
      </item>
      <item>
        <title>[Delphi]FindColorTolerance - Can you make it faster? :P</title>
        <dc:creator><![CDATA[@moparisthebest Moparisthebest]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/moparisthebest">@moparisthebest</a> wrote:</p>
          <blockquote>
              <p>Why do you want to make it faster?  Is it too slow right now or are you just trying to make it a few milliseconds faster?</p>
<p>Offtopic, but why Delphi?  Why not just use C++ or something more standard?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/7</link>
        <pubDate>Fri, 19 Jun 2009 16:22:03 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-284279-7</guid>
        <source url="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279.rss">[Delphi]FindColorTolerance - Can you make it faster? :P</source>
      </item>
      <item>
        <title>[Delphi]FindColorTolerance - Can you make it faster? :P</title>
        <dc:creator><![CDATA[@frank frank_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/frank">@frank</a> wrote:</p>
          <blockquote>
              <p>[quote=“ChArMz, post:3, topic:284279”]delphi is very similar to c++, so u could very easy convert to c++ and then help me out :D[/quote]was that meant to be a joke</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/6</link>
        <pubDate>Fri, 19 Jun 2009 06:36:29 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-284279-6</guid>
        <source url="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279.rss">[Delphi]FindColorTolerance - Can you make it faster? :P</source>
      </item>
      <item>
        <title>[Delphi]FindColorTolerance - Can you make it faster? :P</title>
        <dc:creator><![CDATA[@charmz ChArMz]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/charmz">@charmz</a> wrote:</p>
          <blockquote>
              <p>well im not really sure where i should post, you are talking about the moparscape section of this site right?</p>
<p>i would ask freddy1990 but hes a butthole and wont give out any secrets on scar</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/5</link>
        <pubDate>Fri, 19 Jun 2009 05:42:40 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-284279-5</guid>
        <source url="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279.rss">[Delphi]FindColorTolerance - Can you make it faster? :P</source>
      </item>
      <item>
        <title>[Delphi]FindColorTolerance - Can you make it faster? :P</title>
        <dc:creator><![CDATA[@silabsoft RuneAgent]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/silabsoft">@silabsoft</a> wrote:</p>
          <blockquote>
              <p>[quote=“ChArMz, post:3, topic:284279”]well no one over there is active, come on guys <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"></p>
<p>delphi is very similar to c++, so u could very easy convert to c++ and then help me out <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"></p>
<p>or point me in the direction of a good delphi forum?..cuz i cant find any[/quote]</p>
<p>oh you should ask moparscape they program c+</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/4</link>
        <pubDate>Fri, 19 Jun 2009 05:35:50 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-284279-4</guid>
        <source url="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279.rss">[Delphi]FindColorTolerance - Can you make it faster? :P</source>
      </item>
      <item>
        <title>[Delphi]FindColorTolerance - Can you make it faster? :P</title>
        <dc:creator><![CDATA[@charmz ChArMz]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/charmz">@charmz</a> wrote:</p>
          <blockquote>
              <p>well no one over there is active, come on guys <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"></p>
<p>delphi is very similar to c++, so u could very easy convert to c++ and then help me out <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"></p>
<p>or point me in the direction of a good delphi forum?..cuz i cant find any</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/3</link>
        <pubDate>Fri, 19 Jun 2009 05:34:32 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-284279-3</guid>
        <source url="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279.rss">[Delphi]FindColorTolerance - Can you make it faster? :P</source>
      </item>
      <item>
        <title>[Delphi]FindColorTolerance - Can you make it faster? :P</title>
        <dc:creator><![CDATA[@Uriko Uriko]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/uriko">@Uriko</a> wrote:</p>
          <blockquote>
              <p>imo post on <a href="http://www.freddy1990.com" rel="nofollow noopener">www.freddy1990.com</a> as no one here develops it.</p>
<p>edit: whoops thought you were mentioning scar <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/2</link>
        <pubDate>Fri, 19 Jun 2009 05:24:05 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-284279-2</guid>
        <source url="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279.rss">[Delphi]FindColorTolerance - Can you make it faster? :P</source>
      </item>
      <item>
        <title>[Delphi]FindColorTolerance - Can you make it faster? :P</title>
        <dc:creator><![CDATA[@charmz ChArMz]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/charmz">@charmz</a> wrote:</p>
          <blockquote>
              <p>[code]type<br>
PRGBQuadArray = ^TRGBQuadArray;<br>
TRGBQuadArray = array [0…0] of TRGBQuad;</p>
<p>function FindColorTolerance(Client : HDC; TargetColor : TRGBQuad; var dx, dy : Integer; x1, y1, x2, y2, Tolerance : Integer) : Boolean;</p>
<p>const<br>
Offset : array [0…0] of Integer = (1);</p>
<p>var<br>
bmpW, bmpH : Integer;<br>
bmi : TBitmapInfo;<br>
DIBHandle : HBitmap;<br>
CompDC : HDC;<br>
PrevObj : HGDIOBJ;<br>
Pixels : PRGBQuadArray;<br>
i, l , HW : Integer;<br>
j : Integer;</p>
<p>begin</p>
<p>Result := False;</p>
<p>bmpW := x2 - x1 + 1;<br>
bmpH := y2 - y1 + 1;</p>
<p>FillMemory(<span class="mention">@bmi</span>, SizeOf(TBitmapInfo), 0);<br>
with bmi.bmiHeader do<br>
begin<br>
biSize        := SizeOf(TBitmapInfoHeader);<br>
biWidth       := bmpW;<br>
biHeight      := -bmpH;<br>
biPlanes      := 1;<br>
biBitCount    := 32;<br>
biCompression := BI_RGB;<br>
end;</p>
<p>try<br>
DIBHandle := CreateDIBSection(0, bmi, DIB_RGB_COLORS, Pointer(Pixels), 0, 0);</p>
<pre><code>CompDC := CreateCompatibleDC(Client);
PrevObj := SelectObject(CompDC, DIBHandle);

BitBlt(CompDC, 0, 0, bmpW, bmpH, Client, x1, y1, SRCCOPY);

l := High(Offset);

HW := ( bmpH - 1 ) * ( bmpW - 1 );

for j := 0 to l do
begin
  if Result then
    Break;

  i := 0 - OffSet[j];
  while ( i &lt; ( HW ) - OffSet[j] ) and ( not Result ) do
  begin
    Inc(i, Length(OffSet));
    if Sqr(Tolerance) &gt;= (Sqr(TargetColor.rgbRed - Pixels^[i].rgbRed)
                        + Sqr(TargetColor.rgbGreen - Pixels^[i].rgbGreen)
                        + Sqr(TargetColor.rgbBlue - Pixels^[i].rgbBlue)) then
    begin
      dx := x1 + ( i mod bmpW );
      dy := y1 + ( i div bmpW );
      Result := True;
    end;
  end;
end;
</code></pre>
<p>finally<br>
PrevObj := SelectObject(CompDC, PrevObj);<br>
DeleteDC(CompDC);<br>
DeleteObject(DIBHandle);<br>
end;</p>
<p>end;[/code]</p>
<p>I’m looking to improve speed <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"></p>
<p>See what you can do please, maybe use a GetDIBits instead? Or?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279/1</link>
        <pubDate>Fri, 19 Jun 2009 00:44:05 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-284279-1</guid>
        <source url="https://forum.moparisthebest.com/t/delphi-findcolortolerance-can-you-make-it-faster-p/284279.rss">[Delphi]FindColorTolerance - Can you make it faster? :P</source>
      </item>
  </channel>
</rss>
