<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>[PI, Riot] Great Mining</title>
    <link>https://forum.moparisthebest.com/t/pi-riot-great-mining/434509</link>
    <description>I was writing a remake based of project insanity a few months ago and started in on mining pretty hard. If it&#39;s missing any data simply build on the arrays and add the objectID into your clickObject packet. I spent around a hour on this so it&#39;s not my best work. But it&#39;s decent and contains:


[ul][li]Empty Ore&#39;s[/li]
[li]100% Correct Empty Rock Id&#39;s[/li]
[li]Random Gems[/li]
[li]All Ores Handled[/li]
[li]Accurate Formula[/li]
[li]Pickaxe Animations[/li]
[li]Steaming Rock Data[/li]
[li]All Pickaxes And Rock Requirements[/li][/ul]


1. Replace Your Mining Class With Mine


[code=java]package server.model.players.skills;

import server.event.Event;
import server.event.EventContainer;
import server.event.EventManager;
import server.model.objects.Object;
import server.model.players.Client;
import server.model.players.PlayerHandler;
import server.util.Misc;

	/**
	 * 
	 * @author Dylan &lt;iz3 Legend, Reptile&gt;
	 * 
	 * Handles The Mining Skill
	 *
	 */

public class Mining {

	public static int[][] PICKAXE_DATA = {	
		{1265, 1},
		{1267, 1},
		{1269, 5},
		{1273, 20},
		{1271, 30},
		{1275, 40}
	};

	public static int[][] ROCK_DATA = {
		{2090, 1, 13, 450, 30, 436, 2119},
		{2091, 1, 13, 451, 30, 436, 2120},
		{2094, 1, 13, 450, 30, 438, 2123},
		{2095, 1, 13, 451, 30, 438, 2124},
		{2109, 1, 15, 451, 10, 434, 2138},
		{2108, 1, 15, 450, 10, 434, 2137},
		{2093, 15, 39, 451, 15, 440, 2122},
		{2092, 15, 39, 450, 15, 440, 2121},
		{2101, 20, 80, 451, 15, 442, 2124},
		{2100, 20, 80, 450, 15, 442, 2123},
		{2096, 30, 79, 450, 20, 453, 2121},
		{2097, 30, 70, 451, 20, 453, 2122},
		{2102, 55, 79, 450, 15, 447, 2131},
		{2103, 55, 79, 451, 15, 447, 2132},
		{2098, 65, 80, 450, 13, 444, 2127},
		{2099, 65, 80, 451, 13, 444, 2128},
		{2104, 70, 99, 450, 10, 449, 2133},
		{2105, 70, 99, 451, 10, 449, 2134},

	};
	
	public static int hasPick(Client client, int type) {
		for (int[] data : PICKAXE_DATA) {
			int pickaxe = data[0];
			int level = data[1];
			if ((client.playerEquipment[client.playerWeapon] == pickaxe || client.getItems().playerHasItem(pickaxe) &amp;&amp; client.playerLevel[14] &gt;= level)) {
				return data[type];
			}
		}
		return 0;
	}
	
	public static boolean hasRequiredLevel(Client client) {
		for (int[] element: ROCK_DATA) {
			int level = element[1];
				return client.playerLevel[14] &gt;= level;
		}
		return false;
	}	
	
	public static boolean doesntHaveRequiredSpace(Client client) {
		return client.getItems().freeSlots() &lt; 1;
	}
	
	public static int getChance(Client client) {
		for (int[] element: ROCK_DATA) {
			int power = element[4];
				return 3000 + Misc.random(2800) + Misc.random(4000) / client.playerLevel[14] / power;
		}
		return 0;
	}
	
	public static void checkRequirments(Client client, int objectId, int objectX, int objectY) {
		for (int[] element: ROCK_DATA) {
			int rock = element[0];
			int rockLevel = element[1];	
			if (objectId == rock) {
				if (client.playerLevel[14] &lt; rockLevel) {		
					client.getDH().sendStatement(&quot;You need a Mining level of @blu@&quot; + rockLevel + &quot; @bla@to mine this ore.&quot;);
					client.isMining = false;
					return;
				}
				if (doesntHaveRequiredSpace(client)) {
					client.getDH().sendStatement(&quot;You do not have the required inventory space.&quot;);
					client.isMining = false;
					return;
				}
				if (hasPick(client, 0) == 0) {
					client.getDH().sendStatement(&quot;You do not a pickaxe or the required level to use it.&quot;);
					client.isMining = false;
					return;
				}
					startMining(client, client.objectId);
					client.getMiningEmote();
			}
		}	
	}
	
	public static void startMining(final Client client, final int objectId) {
		for (int[] element: ROCK_DATA) {
			final int rock = element[0];
			final int exp = element[2];
			final int ore = element[5];	
			for (int[] data: PICKAXE_DATA) {
				int pickaxe = data[0];
				if (objectId == rock &amp;&amp; hasPick(client, 0) == pickaxe) {
					client.turnPlayerTo(client.objectX, client.objectY);
					client.sendMessage(&quot;You swing your pick at the rock.&quot;);
					client.isMining = true;
					client.getMiningEmote();
					EventManager.getSingleton().addEvent(new Event() {
						@Override	
						public void execute(EventContainer p) {
							if (doesntHaveRequiredSpace(client)) {
								client.getDH().sendStatement(&quot;You do not have the required inventory space.&quot;);
								client.isMining = false;
								p.stop();
								return;
							}
							if (client.isMining == false) {
								p.stop();
								client.startAnimation(65535);
								return;
							}
							if (Misc.random(30) == 1 &amp;&amp; client.objectId == rock) {
								addRandomGem(client);
							}
							if (client.isMining == true &amp;&amp; client.objectId == rock) {
								client.sendMessage(&quot;You manage to mine some &quot; +client.getItems().getItemName(ore) + &quot;.&quot;);
								client.getItems().addItem(ore, 1);
								client.getPA().addSkillXP(exp, 8);
								addEmptyRock(client);
								p.stop();
								client.isMining = false;
							}
							if (client.isMining == false) {
								p.stop();
								client.startAnimation(65535);
								return;
							}
						}	
					}, getChance(client));
				}	
			}
		}
	}
	
	public static void addEmptyRock(Client client) {
		for(int[] element: ROCK_DATA) {
			int rock = element[0];
			int emptyRock = element[3];
			if (rock == client.objectId) {
				for (int j = 0; j &lt; PlayerHandler.players.length; j++) {
                    if (PlayerHandler.players[j] != null) {
                    	new Object(emptyRock, client.objectX, client.objectY, 0, 0, 10, rock, 20 + Misc.random(40));
                    	client.isMining = false;
                    	appendAnimation(client);
                    }
				}
			}	
		}
	}
	
	public static void addExplosiveRock(Client client) {
		for(int[] element: ROCK_DATA) {
			int rock = element[0];
			int explosiveRock = element[6];
			if (rock == client.objectId ) {
				new Object(explosiveRock, client.objectX, client.objectY, 0, 0, 10, rock, 20 + Misc.random(40));
				client.sendMessage(&quot;The rock begins to steem.&quot;);
			}
		}
	}
	
	public static void addRandomGem(Client client) {
		int random = Misc.random(5);
		if (random == 1) {
			client.getItems().addItem(1623, 1);
			client.sendMessage(&quot;You find a sapphire whilst mining.&quot;);
		} else if (random == 2) {
			client.getItems().addItem(1621, 1);
			client.sendMessage(&quot;You find a emerald whilst mining.&quot;);
		}
	}
	
	public static void appendAnimation(Client client) {
		for (int[] element: ROCK_DATA) {
			int rock = element[0];	
			for (int j = 0; j &lt; PlayerHandler.players.length; j++) {
				if (PlayerHandler.players[j] != null) {
					Client c = (Client)PlayerHandler.players[j];
					if (c.distanceToPoint(client.objectX, client.objectY) &lt;= 1 &amp;&amp; c.isMining == true &amp;&amp; rock == client.objectId) {
						c.isMining = false;
					}
				}
			}
		}
	}
}[/code]

Basic Explanation: All integers are held within two different arrays, one handling pickaxes and another handling the rocks themselves. When you click a rock it runs the &quot;checkRequirments&quot; method to make sure you have the appropriate attributes. If not you receive the appropriate message. If you have all the required attributes you start mining which is handled with Graham&#39;s event manager.

2. Add This into your ClickObject packet or ActionHandler.

[code=java]case 2092:
		case 2091:
		case 2095:
		case 2093:
		case 2094:
		case 2090:
		case 2102:
		case 2103:
		case 2096:
		case 2097:
		case 2104:
		case 2105:
		case 2101:
		case 2100:
		case 2098:
		case 2099:
		case 2109:
		case 2108:
			Mining.checkRequirments(c, c.objectId, c.objectX, c.objectY);
		break;[/code]

3. Add this into your walking packet

[code=java]if(c.isMining == true) {
			c.isMining = false;
		}[/code]

4. Add this to your Player or Client class

[code=java]
public int timer = 0;
public void getMiningEmote() {
		timer++;
		if (timer &gt;= 13) {
			if (playerEquipment[playerWeapon] == 1265 || getItems().playerHasItem(1265)) {
				startAnimation(625);
			} else if (playerEquipment[playerWeapon] == 1267 || getItems().playerHasItem(1267)) {
				startAnimation(626);
			} else if (playerEquipment[playerWeapon] == 1269 || getItems().playerHasItem(1269)) {
				startAnimation(627);
			} else if (playerEquipment[playerWeapon] == 1273 || getItems().playerHasItem(1273)) {
				startAnimation(629);
			} else if (playerEquipment[playerWeapon] == 1271 || getItems().playerHasItem(1271)) {
				startAnimation(628);
			} else if (playerEquipment[playerWeapon] == 1275 || getItems().playerHasItem(1275)) {
				startAnimation(630);
			}	
		timer = 0;
		}
	}
[/code]

5. Drop this in your process method or use a CycleEventHandler if you have one.

[code=java]if (isMining == true) {
			getMiningEmote();
		}[/code]

6. Drop this boolean in your player class 
[code=java]public boolean isMining = false;[/code]

Credits:

Graham
Dyaln</description>
    
    <lastBuildDate>Fri, 02 Mar 2012 23:38:18 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/pi-riot-great-mining/434509.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>[PI, Riot] Great Mining</title>
        <dc:creator><![CDATA[@C_Imbued C++ Imbued]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/c_imbued">@C_Imbued</a> wrote:</p>
          <blockquote>
              <p>[quote=“immortalityftw, post:19, topic:434509”]<code>src\server\model\players\Player.java:50: isMining is already defined in server.m
odel.players.Player
        public boolean isMining;
                       ^
src\server\model\players\Client.java:74: cannot find symbol
symbol  : constructor Mining(server.model.players.Client)
location: class server.model.players.skills.Mining
        private Mining mine = new Mining(this);
                              ^
src\server\model\players\Client.java:1413: cannot find symbol
symbol  : method mineOre()
location: class server.model.players.skills.Mining
                        getMining().mineOre();
                                   ^
src\server\model\players\ActionHandler.java:955: startMining(server.model.player
s.Client,int) in server.model.players.skills.Mining cannot be applied to (int,in
t,int)
                        c.getMining().startMining(c.mining[0], c.mining[1], c.mi
ning[2]);
                                     ^
src\server\model\players\ActionHandler.java:965: startMining(server.model.player
s.Client,int) in server.model.players.skills.Mining cannot be applied to (int,in
t,int)
                        c.getMining().startMining(c.mining[0], c.mining[1], c.mi
ning[2]);
                                     ^
src\server\model\players\ActionHandler.java:987: cannot find symbol
symbol  : method checkRequirements(server.model.players.Client,int,int,int)
location: class server.model.players.skills.Mining
                        Mining.checkRequirements(c, c.objectId, c.objectX, c.obj
ectY);
                              ^
src\server\model\players\ActionHandler.java:995: startMining(server.model.player
s.Client,int) in server.model.players.skills.Mining cannot be applied to (int,in
t,int)
                        c.getMining().startMining(c.mining[0], c.mining[1], c.mi
ning[2]);
                                     ^
src\server\model\players\ActionHandler.java:1007: startMining(server.model.playe
rs.Client,int) in server.model.players.skills.Mining cannot be applied to (int,i
nt,int)
                        c.getMining().startMining(c.mining[0], c.mining[1], c.mi
ning[2]);
                                     ^
src\server\model\players\ActionHandler.java:1016: startMining(server.model.playe
rs.Client,int) in server.model.players.skills.Mining cannot be applied to (int,i
nt,int)
                        c.getMining().startMining(c.mining[0], c.mining[1], c.mi
ning[2]);
                                     ^
src\server\model\players\ActionHandler.java:1029: startMining(server.model.playe
rs.Client,int) in server.model.players.skills.Mining cannot be applied to (int,i
nt,int)
                        c.getMining().startMining(c.mining[0], c.mining[1], c.mi
ning[2]);
                                     ^
src\server\model\players\ActionHandler.java:1040: startMining(server.model.playe
rs.Client,int) in server.model.players.skills.Mining cannot be applied to (int,i
nt,int)
                        c.getMining().startMining(c.mining[0], c.mining[1], c.mi
ning[2]);
                                     ^
src\server\model\players\ActionHandler.java:1048: startMining(server.model.playe
rs.Client,int) in server.model.players.skills.Mining cannot be applied to (int,i
nt,int)
                        c.getMining().startMining(c.mining[0], c.mining[1], c.mi
ning[2]);
                                     ^
Note: Some input files use unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details.
12 errors
Press any key to continue . . .</code></p>
<p>Fixed quite a large amount of the errors, but still left with this. Nice code :)[/quote]Go to player.java find:</p>
<pre><code class="lang-auto"></code></pre>
<p>replace it with</p>
<pre><code class="lang-auto"></code></pre>
<p>Now go to client.java find</p>
<pre><code class="lang-auto"></code></pre>
<p>Replace it with:</p>
<pre><code class="lang-auto"></code></pre>
<p>Now still in client.java find:</p>
<pre><code class="lang-auto"></code></pre>
<p>replace it with:</p>
<pre><code class="lang-auto"></code></pre>
<p>Now in Actionhandler.java</p>
<p>Remove all the things to do with ‘c.getMining().startMining’</p>
<p>Stil in actionhandler.java find:</p>
<pre><code class="lang-auto"></code></pre>
<p>Replace it with:</p>
<pre><code class="lang-auto"></code></pre>
<p>Now if you follow that correctly you should have no errors. post if you still do.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-riot-great-mining/434509/20">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-riot-great-mining/434509/20</link>
        <pubDate>Fri, 02 Mar 2012 23:38:18 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-434509-20</guid>
        <source url="https://forum.moparisthebest.com/t/pi-riot-great-mining/434509.rss">[PI, Riot] Great Mining</source>
      </item>
      <item>
        <title>[PI, Riot] Great Mining</title>
        <dc:creator><![CDATA[@immortalityftw immortalityftw]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/immortalityftw">@immortalityftw</a> wrote:</p>
          <blockquote>
              <p><code>src\server\model\players\Player.java:50: isMining is already defined in server.m
odel.players.Player
        public boolean isMining;
                       ^
src\server\model\players\Client.java:74: cannot find symbol
symbol  : constructor Mining(server.model.players.Client)
location: class server.model.players.skills.Mining
        private Mining mine = new Mining(this);
                              ^
src\server\model\players\Client.java:1413: cannot find symbol
symbol  : method mineOre()
location: class server.model.players.skills.Mining
                        getMining().mineOre();
                                   ^
src\server\model\players\ActionHandler.java:955: startMining(server.model.player
s.Client,int) in server.model.players.skills.Mining cannot be applied to (int,in
t,int)
                        c.getMining().startMining(c.mining[0], c.mining[1], c.mi
ning[2]);
                                     ^
src\server\model\players\ActionHandler.java:965: startMining(server.model.player
s.Client,int) in server.model.players.skills.Mining cannot be applied to (int,in
t,int)
                        c.getMining().startMining(c.mining[0], c.mining[1], c.mi
ning[2]);
                                     ^
src\server\model\players\ActionHandler.java:987: cannot find symbol
symbol  : method checkRequirements(server.model.players.Client,int,int,int)
location: class server.model.players.skills.Mining
                        Mining.checkRequirements(c, c.objectId, c.objectX, c.obj
ectY);
                              ^
src\server\model\players\ActionHandler.java:995: startMining(server.model.player
s.Client,int) in server.model.players.skills.Mining cannot be applied to (int,in
t,int)
                        c.getMining().startMining(c.mining[0], c.mining[1], c.mi
ning[2]);
                                     ^
src\server\model\players\ActionHandler.java:1007: startMining(server.model.playe
rs.Client,int) in server.model.players.skills.Mining cannot be applied to (int,i
nt,int)
                        c.getMining().startMining(c.mining[0], c.mining[1], c.mi
ning[2]);
                                     ^
src\server\model\players\ActionHandler.java:1016: startMining(server.model.playe
rs.Client,int) in server.model.players.skills.Mining cannot be applied to (int,i
nt,int)
                        c.getMining().startMining(c.mining[0], c.mining[1], c.mi
ning[2]);
                                     ^
src\server\model\players\ActionHandler.java:1029: startMining(server.model.playe
rs.Client,int) in server.model.players.skills.Mining cannot be applied to (int,i
nt,int)
                        c.getMining().startMining(c.mining[0], c.mining[1], c.mi
ning[2]);
                                     ^
src\server\model\players\ActionHandler.java:1040: startMining(server.model.playe
rs.Client,int) in server.model.players.skills.Mining cannot be applied to (int,i
nt,int)
                        c.getMining().startMining(c.mining[0], c.mining[1], c.mi
ning[2]);
                                     ^
src\server\model\players\ActionHandler.java:1048: startMining(server.model.playe
rs.Client,int) in server.model.players.skills.Mining cannot be applied to (int,i
nt,int)
                        c.getMining().startMining(c.mining[0], c.mining[1], c.mi
ning[2]);
                                     ^
Note: Some input files use unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details.
12 errors
Press any key to continue . . .</code></p>
<p>Fixed quite a large amount of the errors, but still left with this. Nice code <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-riot-great-mining/434509/19">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-riot-great-mining/434509/19</link>
        <pubDate>Fri, 02 Mar 2012 22:48:43 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-434509-19</guid>
        <source url="https://forum.moparisthebest.com/t/pi-riot-great-mining/434509.rss">[PI, Riot] Great Mining</source>
      </item>
      <item>
        <title>[PI, Riot] Great Mining</title>
        <dc:creator><![CDATA[@Loveandpower Loveandpower]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/loveandpower">@Loveandpower</a> wrote:</p>
          <blockquote>
              <p>[quote=“iz3 legend, post:15, topic:434509”]Thanks for the comments, and ill release woodcutting if it’s really needed. Although the code is similar.[/quote]I suggest a slayer   one</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-riot-great-mining/434509/18">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-riot-great-mining/434509/18</link>
        <pubDate>Wed, 29 Feb 2012 22:52:49 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-434509-18</guid>
        <source url="https://forum.moparisthebest.com/t/pi-riot-great-mining/434509.rss">[PI, Riot] Great Mining</source>
      </item>
      <item>
        <title>[PI, Riot] Great Mining</title>
        <dc:creator><![CDATA[@iz3_legend iz3 legend]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/iz3_legend">@iz3_legend</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="16" data-topic="434509">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/asshole_rule/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> asshole_rule:</div>
<blockquote>
<p>Very nice.</p>
</blockquote>
</aside>
<p>Thank you.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-riot-great-mining/434509/17">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-riot-great-mining/434509/17</link>
        <pubDate>Wed, 29 Feb 2012 20:33:31 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-434509-17</guid>
        <source url="https://forum.moparisthebest.com/t/pi-riot-great-mining/434509.rss">[PI, Riot] Great Mining</source>
      </item>
      <item>
        <title>[PI, Riot] Great Mining</title>
        <dc:creator><![CDATA[@asshole_rule asshole_rule]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/asshole_rule">@asshole_rule</a> wrote:</p>
          <blockquote>
              <p>Very nice.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-riot-great-mining/434509/16">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-riot-great-mining/434509/16</link>
        <pubDate>Wed, 29 Feb 2012 00:04:54 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-434509-16</guid>
        <source url="https://forum.moparisthebest.com/t/pi-riot-great-mining/434509.rss">[PI, Riot] Great Mining</source>
      </item>
      <item>
        <title>[PI, Riot] Great Mining</title>
        <dc:creator><![CDATA[@iz3_legend iz3 legend]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/iz3_legend">@iz3_legend</a> wrote:</p>
          <blockquote>
              <p>Thanks for the comments, and ill release woodcutting if it’s really needed. Although the code is similar.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-riot-great-mining/434509/15">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-riot-great-mining/434509/15</link>
        <pubDate>Tue, 28 Feb 2012 23:47:52 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-434509-15</guid>
        <source url="https://forum.moparisthebest.com/t/pi-riot-great-mining/434509.rss">[PI, Riot] Great Mining</source>
      </item>
      <item>
        <title>[PI, Riot] Great Mining</title>
        <dc:creator><![CDATA[@C_Imbued C++ Imbued]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/c_imbued">@C_Imbued</a> wrote:</p>
          <blockquote>
              <p>[quote=“Loveandpower, post:13, topic:434509”][quote author=C++ Imbued link=topic=537221.msg3928120#msg3928120 date=1330408669]<br>
Why this??</p>
<p><code>public int timer = 0;
public void getMiningEmote() {
                timer++;
                if (timer &gt;= 13) {
                        if (playerEquipment[playerWeapon] == 1265 || getItems().playerHasItem(1265)) {
                                startAnimation(625);
                        } else if (playerEquipment[playerWeapon] == 1267 || getItems().playerHasItem(1267)) {
                                startAnimation(626);
                        } else if (playerEquipment[playerWeapon] == 1269 || getItems().playerHasItem(1269)) {
                                startAnimation(627);
                        } else if (playerEquipment[playerWeapon] == 1273 || getItems().playerHasItem(1273)) {
                                startAnimation(629);
                        } else if (playerEquipment[playerWeapon] == 1271 || getItems().playerHasItem(1271)) {
                                startAnimation(628);
                        } else if (playerEquipment[playerWeapon] == 1275 || getItems().playerHasItem(1275)) {
                                startAnimation(630);
                        }       
                timer = 0;
                }
        }</code></p>
<p>When you could do this not much different.</p>
<p><code>private static int[][] animation = {
		{1275, 630}, {1271, 628}, {1273, 629}, {1269, 627},
		{1267, 626}, {1265, 625},
	};</code></p>
<p>[CODE]private static int getAnimation(Client c) {<br>
for(int i = 0; i &lt; animation.length; i++) {<br>
if(c.getItems().playerHasItem(animation[i][0]) || c.playerEquipment[3] == animation[i][0]) {<br>
return animation[i][1];<br>
}<br>
}<br>
return -1;<br>
}</p>
<p>private static boolean hasPickaxe(Client c) {<br>
for(int i = 0; i &lt; animation.length; i++) {<br>
if(c.getItems().playerHasItem(animation[i][0]) || c.playerEquipment[3] == animation[i][0]) {<br>
return true;<br>
}<br>
}<br>
return false;<br>
}[/CODE]</p>
<p>Then simply</p>
<pre><code class="lang-auto"></code></pre>
<p>Good Job ;D<br>
[/quote]would had not made a difference stability wise so pointless.</p>
<p>just saying &lt;3[/quote]I know that but Idk that way just looks horrible in my eyes xD… yes it works yes they both do the same thing… but it just looks unprofessional. I don’t some people may think differently. But still a good job Probably the best mining released to date…</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-riot-great-mining/434509/14">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-riot-great-mining/434509/14</link>
        <pubDate>Tue, 28 Feb 2012 20:41:55 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-434509-14</guid>
        <source url="https://forum.moparisthebest.com/t/pi-riot-great-mining/434509.rss">[PI, Riot] Great Mining</source>
      </item>
      <item>
        <title>[PI, Riot] Great Mining</title>
        <dc:creator><![CDATA[@Loveandpower Loveandpower]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/loveandpower">@Loveandpower</a> wrote:</p>
          <blockquote>
              <p>[quote=“C++ Imbued, post:6, topic:434509”]Why this??</p>
<p><code>public int timer = 0;
public void getMiningEmote() {
                timer++;
                if (timer &gt;= 13) {
                        if (playerEquipment[playerWeapon] == 1265 || getItems().playerHasItem(1265)) {
                                startAnimation(625);
                        } else if (playerEquipment[playerWeapon] == 1267 || getItems().playerHasItem(1267)) {
                                startAnimation(626);
                        } else if (playerEquipment[playerWeapon] == 1269 || getItems().playerHasItem(1269)) {
                                startAnimation(627);
                        } else if (playerEquipment[playerWeapon] == 1273 || getItems().playerHasItem(1273)) {
                                startAnimation(629);
                        } else if (playerEquipment[playerWeapon] == 1271 || getItems().playerHasItem(1271)) {
                                startAnimation(628);
                        } else if (playerEquipment[playerWeapon] == 1275 || getItems().playerHasItem(1275)) {
                                startAnimation(630);
                        }       
                timer = 0;
                }
        }</code></p>
<p>When you could do this not much different.</p>
<p><code>private static int[][] animation = {
		{1275, 630}, {1271, 628}, {1273, 629}, {1269, 627},
		{1267, 626}, {1265, 625},
	};</code></p>
<p>[CODE]private static int getAnimation(Client c) {<br>
for(int i = 0; i &lt; animation.length; i++) {<br>
if(c.getItems().playerHasItem(animation[i][0]) || c.playerEquipment[3] == animation[i][0]) {<br>
return animation[i][1];<br>
}<br>
}<br>
return -1;<br>
}</p>
<p>private static boolean hasPickaxe(Client c) {<br>
for(int i = 0; i &lt; animation.length; i++) {<br>
if(c.getItems().playerHasItem(animation[i][0]) || c.playerEquipment[3] == animation[i][0]) {<br>
return true;<br>
}<br>
}<br>
return false;<br>
}[/CODE]</p>
<p>Then simply</p>
<pre><code class="lang-auto"></code></pre>
<p>Good Job ;D[/quote]would had not made a difference stability wise so pointless.</p>
<p>just saying &lt;3</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-riot-great-mining/434509/13">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-riot-great-mining/434509/13</link>
        <pubDate>Tue, 28 Feb 2012 14:54:33 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-434509-13</guid>
        <source url="https://forum.moparisthebest.com/t/pi-riot-great-mining/434509.rss">[PI, Riot] Great Mining</source>
      </item>
      <item>
        <title>[PI, Riot] Great Mining</title>
        <dc:creator><![CDATA[@artem543 artem543]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/artem543">@artem543</a> wrote:</p>
          <blockquote>
              <p>Nice job! I love you! (No,gay) <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-riot-great-mining/434509/12">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-riot-great-mining/434509/12</link>
        <pubDate>Tue, 28 Feb 2012 14:23:37 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-434509-12</guid>
        <source url="https://forum.moparisthebest.com/t/pi-riot-great-mining/434509.rss">[PI, Riot] Great Mining</source>
      </item>
      <item>
        <title>[PI, Riot] Great Mining</title>
        <dc:creator><![CDATA[@iz3_legend iz3 legend]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/iz3_legend">@iz3_legend</a> wrote:</p>
          <blockquote>
              <p>Both ways do the same thing. I didn’t think an array was needed.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-riot-great-mining/434509/11">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-riot-great-mining/434509/11</link>
        <pubDate>Tue, 28 Feb 2012 14:14:32 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-434509-11</guid>
        <source url="https://forum.moparisthebest.com/t/pi-riot-great-mining/434509.rss">[PI, Riot] Great Mining</source>
      </item>
      <item>
        <title>[PI, Riot] Great Mining</title>
        <dc:creator><![CDATA[@C_Imbued C++ Imbued]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/c_imbued">@C_Imbued</a> wrote:</p>
          <blockquote>
              <p>[quote=“liamp, post:9, topic:434509”][quote author=C++ Imbued link=topic=537221.msg3928141#msg3928141 date=1330412909]</p>
<aside class="quote">
<blockquote>
<p>Good job! <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"> You could added a tutorial on how to add a good woodcutting base with stumps etc… for newbeginners? <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"><br>
[/quote]Rip mine from my server ? <img src="https://forum.moparisthebest.com/images/emoji/twitter/wink.png?v=5" title=":wink:" class="emoji" alt=":wink:"></p>
</blockquote>
</aside>
<p>he said for new beginners how will a new beginner know what they are looking for to rip out if they have only just started programming?</p>
<p>anyway good job[/quote]Oh? I thought that was beginner my bad. <img src="https://forum.moparisthebest.com/images/emoji/twitter/confused.png?v=5" title=":confused:" class="emoji" alt=":confused:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-riot-great-mining/434509/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-riot-great-mining/434509/10</link>
        <pubDate>Tue, 28 Feb 2012 07:59:20 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-434509-10</guid>
        <source url="https://forum.moparisthebest.com/t/pi-riot-great-mining/434509.rss">[PI, Riot] Great Mining</source>
      </item>
      <item>
        <title>[PI, Riot] Great Mining</title>
        <dc:creator><![CDATA[@liamp liamp]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/liamp">@liamp</a> wrote:</p>
          <blockquote>
              <p>[quote=“C++ Imbued, post:8, topic:434509”][quote author=neroxx link=topic=537221.msg3928133#msg3928133 date=1330411029]<br>
Good job! <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"> You could added a tutorial on how to add a good woodcutting base with stumps etc… for newbeginners? <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"><br>
[/quote]Rip mine from my server ? ;)[/quote]</p>
<p>he said for new beginners how will a new beginner know what they are looking for to rip out if they have only just started programming?</p>
<p>anyway good job</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-riot-great-mining/434509/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-riot-great-mining/434509/9</link>
        <pubDate>Tue, 28 Feb 2012 07:34:13 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-434509-9</guid>
        <source url="https://forum.moparisthebest.com/t/pi-riot-great-mining/434509.rss">[PI, Riot] Great Mining</source>
      </item>
      <item>
        <title>[PI, Riot] Great Mining</title>
        <dc:creator><![CDATA[@C_Imbued C++ Imbued]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/c_imbued">@C_Imbued</a> wrote:</p>
          <blockquote>
              <p>[quote=“neroxx, post:7, topic:434509”]Good job! <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"> You could added a tutorial on how to add a good woodcutting base with stumps etc… for newbeginners? :)[/quote]Rip mine from my server ? <img src="https://forum.moparisthebest.com/images/emoji/twitter/wink.png?v=5" title=":wink:" class="emoji" alt=":wink:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-riot-great-mining/434509/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-riot-great-mining/434509/8</link>
        <pubDate>Tue, 28 Feb 2012 07:08:29 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-434509-8</guid>
        <source url="https://forum.moparisthebest.com/t/pi-riot-great-mining/434509.rss">[PI, Riot] Great Mining</source>
      </item>
      <item>
        <title>[PI, Riot] Great Mining</title>
        <dc:creator><![CDATA[@neroxx neroxx]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/neroxx">@neroxx</a> wrote:</p>
          <blockquote>
              <p>Good job! <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-riot-great-mining/434509/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-riot-great-mining/434509/7</link>
        <pubDate>Tue, 28 Feb 2012 06:37:09 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-434509-7</guid>
        <source url="https://forum.moparisthebest.com/t/pi-riot-great-mining/434509.rss">[PI, Riot] Great Mining</source>
      </item>
      <item>
        <title>[PI, Riot] Great Mining</title>
        <dc:creator><![CDATA[@C_Imbued C++ Imbued]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/c_imbued">@C_Imbued</a> wrote:</p>
          <blockquote>
              <p>Why this??</p>
<p><code>public int timer = 0;
public void getMiningEmote() {
                timer++;
                if (timer &gt;= 13) {
                        if (playerEquipment[playerWeapon] == 1265 || getItems().playerHasItem(1265)) {
                                startAnimation(625);
                        } else if (playerEquipment[playerWeapon] == 1267 || getItems().playerHasItem(1267)) {
                                startAnimation(626);
                        } else if (playerEquipment[playerWeapon] == 1269 || getItems().playerHasItem(1269)) {
                                startAnimation(627);
                        } else if (playerEquipment[playerWeapon] == 1273 || getItems().playerHasItem(1273)) {
                                startAnimation(629);
                        } else if (playerEquipment[playerWeapon] == 1271 || getItems().playerHasItem(1271)) {
                                startAnimation(628);
                        } else if (playerEquipment[playerWeapon] == 1275 || getItems().playerHasItem(1275)) {
                                startAnimation(630);
                        }       
                timer = 0;
                }
        }</code></p>
<p>When you could do this not much different.</p>
<p><code>private static int[][] animation = {
		{1275, 630}, {1271, 628}, {1273, 629}, {1269, 627},
		{1267, 626}, {1265, 625},
	};</code></p>
<p>[CODE]private static int getAnimation(Client c) {<br>
for(int i = 0; i &lt; animation.length; i++) {<br>
if(c.getItems().playerHasItem(animation[i][0]) || c.playerEquipment[3] == animation[i][0]) {<br>
return animation[i][1];<br>
}<br>
}<br>
return -1;<br>
}</p>
<p>private static boolean hasPickaxe(Client c) {<br>
for(int i = 0; i &lt; animation.length; i++) {<br>
if(c.getItems().playerHasItem(animation[i][0]) || c.playerEquipment[3] == animation[i][0]) {<br>
return true;<br>
}<br>
}<br>
return false;<br>
}[/CODE]</p>
<p>Then simply</p>
<pre><code class="lang-auto"></code></pre>
<p>Good Job ;D</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-riot-great-mining/434509/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-riot-great-mining/434509/6</link>
        <pubDate>Tue, 28 Feb 2012 05:57:49 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-434509-6</guid>
        <source url="https://forum.moparisthebest.com/t/pi-riot-great-mining/434509.rss">[PI, Riot] Great Mining</source>
      </item>
      <item>
        <title>[PI, Riot] Great Mining</title>
        <dc:creator><![CDATA[@runescape_sucks runescape sucks]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/runescape_sucks">@runescape_sucks</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="3" data-topic="434509">
<div class="title">
<div class="quote-controls"></div>
 iz3 legend:</div>
<blockquote>
<p>Emote canceling for multiple players needs a little work, and rocks need to be faced when emptied.</p>
</blockquote>
</aside>
<p>I see, Very nice project to have completed.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-riot-great-mining/434509/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-riot-great-mining/434509/5</link>
        <pubDate>Tue, 28 Feb 2012 05:20:59 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-434509-5</guid>
        <source url="https://forum.moparisthebest.com/t/pi-riot-great-mining/434509.rss">[PI, Riot] Great Mining</source>
      </item>
      <item>
        <title>[PI, Riot] Great Mining</title>
        <dc:creator><![CDATA[@Loveandpower Loveandpower]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/loveandpower">@Loveandpower</a> wrote:</p>
          <blockquote>
              <p>looks very nice</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-riot-great-mining/434509/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-riot-great-mining/434509/4</link>
        <pubDate>Tue, 28 Feb 2012 05:03:08 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-434509-4</guid>
        <source url="https://forum.moparisthebest.com/t/pi-riot-great-mining/434509.rss">[PI, Riot] Great Mining</source>
      </item>
      <item>
        <title>[PI, Riot] Great Mining</title>
        <dc:creator><![CDATA[@iz3_legend iz3 legend]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/iz3_legend">@iz3_legend</a> wrote:</p>
          <blockquote>
              <p>Emote canceling for multiple players needs a little work, and rocks need to be faced when emptied.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-riot-great-mining/434509/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-riot-great-mining/434509/3</link>
        <pubDate>Tue, 28 Feb 2012 02:25:57 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-434509-3</guid>
        <source url="https://forum.moparisthebest.com/t/pi-riot-great-mining/434509.rss">[PI, Riot] Great Mining</source>
      </item>
      <item>
        <title>[PI, Riot] Great Mining</title>
        <dc:creator><![CDATA[@runescape_sucks runescape sucks]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/runescape_sucks">@runescape_sucks</a> wrote:</p>
          <blockquote>
              <p>What’s missing from this? What removes 10%?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-riot-great-mining/434509/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-riot-great-mining/434509/2</link>
        <pubDate>Tue, 28 Feb 2012 02:24:16 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-434509-2</guid>
        <source url="https://forum.moparisthebest.com/t/pi-riot-great-mining/434509.rss">[PI, Riot] Great Mining</source>
      </item>
      <item>
        <title>[PI, Riot] Great Mining</title>
        <dc:creator><![CDATA[@iz3_legend iz3 legend]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/iz3_legend">@iz3_legend</a> wrote:</p>
          <blockquote>
              <p>I was writing a remake based of project insanity a few months ago and started in on mining pretty hard. If it’s missing any data simply build on the arrays and add the objectID into your clickObject packet. I spent around a hour on this so it’s not my best work. But it’s decent and contains:</p>
<p>[ul][li]Empty Ore’s[/li]<br>
[li]100% Correct Empty Rock Id’s[/li]<br>
[li]Random Gems[/li]<br>
[li]All Ores Handled[/li]<br>
[li]Accurate Formula[/li]<br>
[li]Pickaxe Animations[/li]<br>
[li]Steaming Rock Data[/li]<br>
[li]All Pickaxes And Rock Requirements[/li][/ul]</p>
<ol>
<li>Replace Your Mining Class With Mine</li>
</ol>
<p>[code=java]package server.model.players.skills;</p>
<p>import server.event.Event;<br>
import server.event.EventContainer;<br>
import server.event.EventManager;<br>
import server.model.objects.Object;<br>
import server.model.players.Client;<br>
import server.model.players.PlayerHandler;<br>
import server.util.Misc;</p>
<pre><code>/**
 * 
 * @author Dylan &lt;iz3 Legend, Reptile&gt;
 * 
 * Handles The Mining Skill
 *
 */
</code></pre>
<p>public class Mining {</p>
<pre><code>public static int[][] PICKAXE_DATA = {	
	{1265, 1},
	{1267, 1},
	{1269, 5},
	{1273, 20},
	{1271, 30},
	{1275, 40}
};

public static int[][] ROCK_DATA = {
	{2090, 1, 13, 450, 30, 436, 2119},
	{2091, 1, 13, 451, 30, 436, 2120},
	{2094, 1, 13, 450, 30, 438, 2123},
	{2095, 1, 13, 451, 30, 438, 2124},
	{2109, 1, 15, 451, 10, 434, 2138},
	{2108, 1, 15, 450, 10, 434, 2137},
	{2093, 15, 39, 451, 15, 440, 2122},
	{2092, 15, 39, 450, 15, 440, 2121},
	{2101, 20, 80, 451, 15, 442, 2124},
	{2100, 20, 80, 450, 15, 442, 2123},
	{2096, 30, 79, 450, 20, 453, 2121},
	{2097, 30, 70, 451, 20, 453, 2122},
	{2102, 55, 79, 450, 15, 447, 2131},
	{2103, 55, 79, 451, 15, 447, 2132},
	{2098, 65, 80, 450, 13, 444, 2127},
	{2099, 65, 80, 451, 13, 444, 2128},
	{2104, 70, 99, 450, 10, 449, 2133},
	{2105, 70, 99, 451, 10, 449, 2134},

};

public static int hasPick(Client client, int type) {
	for (int[] data : PICKAXE_DATA) {
		int pickaxe = data[0];
		int level = data[1];
		if ((client.playerEquipment[client.playerWeapon] == pickaxe || client.getItems().playerHasItem(pickaxe) &amp;&amp; client.playerLevel[14] &gt;= level)) {
			return data[type];
		}
	}
	return 0;
}

public static boolean hasRequiredLevel(Client client) {
	for (int[] element: ROCK_DATA) {
		int level = element[1];
			return client.playerLevel[14] &gt;= level;
	}
	return false;
}	

public static boolean doesntHaveRequiredSpace(Client client) {
	return client.getItems().freeSlots() &lt; 1;
}

public static int getChance(Client client) {
	for (int[] element: ROCK_DATA) {
		int power = element[4];
			return 3000 + Misc.random(2800) + Misc.random(4000) / client.playerLevel[14] / power;
	}
	return 0;
}

public static void checkRequirments(Client client, int objectId, int objectX, int objectY) {
	for (int[] element: ROCK_DATA) {
		int rock = element[0];
		int rockLevel = element[1];	
		if (objectId == rock) {
			if (client.playerLevel[14] &lt; rockLevel) {		
				client.getDH().sendStatement("You need a Mining level of @blu@" + rockLevel + " @bla@to mine this ore.");
				client.isMining = false;
				return;
			}
			if (doesntHaveRequiredSpace(client)) {
				client.getDH().sendStatement("You do not have the required inventory space.");
				client.isMining = false;
				return;
			}
			if (hasPick(client, 0) == 0) {
				client.getDH().sendStatement("You do not a pickaxe or the required level to use it.");
				client.isMining = false;
				return;
			}
				startMining(client, client.objectId);
				client.getMiningEmote();
		}
	}	
}

public static void startMining(final Client client, final int objectId) {
	for (int[] element: ROCK_DATA) {
		final int rock = element[0];
		final int exp = element[2];
		final int ore = element[5];	
		for (int[] data: PICKAXE_DATA) {
			int pickaxe = data[0];
			if (objectId == rock &amp;&amp; hasPick(client, 0) == pickaxe) {
				client.turnPlayerTo(client.objectX, client.objectY);
				client.sendMessage("You swing your pick at the rock.");
				client.isMining = true;
				client.getMiningEmote();
				EventManager.getSingleton().addEvent(new Event() {
					@Override	
					public void execute(EventContainer p) {
						if (doesntHaveRequiredSpace(client)) {
							client.getDH().sendStatement("You do not have the required inventory space.");
							client.isMining = false;
							p.stop();
							return;
						}
						if (client.isMining == false) {
							p.stop();
							client.startAnimation(65535);
							return;
						}
						if (Misc.random(30) == 1 &amp;&amp; client.objectId == rock) {
							addRandomGem(client);
						}
						if (client.isMining == true &amp;&amp; client.objectId == rock) {
							client.sendMessage("You manage to mine some " +client.getItems().getItemName(ore) + ".");
							client.getItems().addItem(ore, 1);
							client.getPA().addSkillXP(exp, 8);
							addEmptyRock(client);
							p.stop();
							client.isMining = false;
						}
						if (client.isMining == false) {
							p.stop();
							client.startAnimation(65535);
							return;
						}
					}	
				}, getChance(client));
			}	
		}
	}
}

public static void addEmptyRock(Client client) {
	for(int[] element: ROCK_DATA) {
		int rock = element[0];
		int emptyRock = element[3];
		if (rock == client.objectId) {
			for (int j = 0; j &lt; PlayerHandler.players.length; j++) {
                if (PlayerHandler.players[j] != null) {
                	new Object(emptyRock, client.objectX, client.objectY, 0, 0, 10, rock, 20 + Misc.random(40));
                	client.isMining = false;
                	appendAnimation(client);
                }
			}
		}	
	}
}

public static void addExplosiveRock(Client client) {
	for(int[] element: ROCK_DATA) {
		int rock = element[0];
		int explosiveRock = element[6];
		if (rock == client.objectId ) {
			new Object(explosiveRock, client.objectX, client.objectY, 0, 0, 10, rock, 20 + Misc.random(40));
			client.sendMessage("The rock begins to steem.");
		}
	}
}

public static void addRandomGem(Client client) {
	int random = Misc.random(5);
	if (random == 1) {
		client.getItems().addItem(1623, 1);
		client.sendMessage("You find a sapphire whilst mining.");
	} else if (random == 2) {
		client.getItems().addItem(1621, 1);
		client.sendMessage("You find a emerald whilst mining.");
	}
}

public static void appendAnimation(Client client) {
	for (int[] element: ROCK_DATA) {
		int rock = element[0];	
		for (int j = 0; j &lt; PlayerHandler.players.length; j++) {
			if (PlayerHandler.players[j] != null) {
				Client c = (Client)PlayerHandler.players[j];
				if (c.distanceToPoint(client.objectX, client.objectY) &lt;= 1 &amp;&amp; c.isMining == true &amp;&amp; rock == client.objectId) {
					c.isMining = false;
				}
			}
		}
	}
}
</code></pre>
<p>}[/code]</p>
<p>Basic Explanation: All integers are held within two different arrays, one handling pickaxes and another handling the rocks themselves. When you click a rock it runs the “checkRequirments” method to make sure you have the appropriate attributes. If not you receive the appropriate message. If you have all the required attributes you start mining which is handled with Graham’s event manager.</p>
<ol start="2">
<li>Add This into your ClickObject packet or ActionHandler.</li>
</ol>
<p><code>case 2092:
		case 2091:
		case 2095:
		case 2093:
		case 2094:
		case 2090:
		case 2102:
		case 2103:
		case 2096:
		case 2097:
		case 2104:
		case 2105:
		case 2101:
		case 2100:
		case 2098:
		case 2099:
		case 2109:
		case 2108:
			Mining.checkRequirments(c, c.objectId, c.objectX, c.objectY);
		break;</code></p>
<ol start="3">
<li>Add this into your walking packet</li>
</ol>
<p><code>if(c.isMining == true) {
			c.isMining = false;
		}</code></p>
<ol start="4">
<li>Add this to your Player or Client class</li>
</ol>
<pre><code class="lang-auto">public int timer = 0;
public void getMiningEmote() {
		timer++;
		if (timer &gt;= 13) {
			if (playerEquipment[playerWeapon] == 1265 || getItems().playerHasItem(1265)) {
				startAnimation(625);
			} else if (playerEquipment[playerWeapon] == 1267 || getItems().playerHasItem(1267)) {
				startAnimation(626);
			} else if (playerEquipment[playerWeapon] == 1269 || getItems().playerHasItem(1269)) {
				startAnimation(627);
			} else if (playerEquipment[playerWeapon] == 1273 || getItems().playerHasItem(1273)) {
				startAnimation(629);
			} else if (playerEquipment[playerWeapon] == 1271 || getItems().playerHasItem(1271)) {
				startAnimation(628);
			} else if (playerEquipment[playerWeapon] == 1275 || getItems().playerHasItem(1275)) {
				startAnimation(630);
			}	
		timer = 0;
		}
	}</code></pre>
<ol start="5">
<li>Drop this in your process method or use a CycleEventHandler if you have one.</li>
</ol>
<p><code>if (isMining == true) {
			getMiningEmote();
		}</code></p>
<ol start="6">
<li>Drop this boolean in your player class</li>
</ol>
<pre><code class="lang-auto"></code></pre>
<p>Credits:</p>
<p>Graham<br>
Dyaln</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-riot-great-mining/434509/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-riot-great-mining/434509/1</link>
        <pubDate>Tue, 28 Feb 2012 02:22:05 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-434509-1</guid>
        <source url="https://forum.moparisthebest.com/t/pi-riot-great-mining/434509.rss">[PI, Riot] Great Mining</source>
      </item>
  </channel>
</rss>
