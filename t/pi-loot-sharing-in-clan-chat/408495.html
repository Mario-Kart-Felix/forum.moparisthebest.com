<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/pi-loot-sharing-in-clan-chat/408495 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Aug 2019 22:33:02 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>[PI] Loot sharing in clan chat - Runescape - moparisthebest.com</title>
    <meta name="description" content="Ok so i was in-game and one of my mods reported that when you click on lootshare, it disconnects everyone in that clan, Im not sure what going on iv attempted to rip code from other sources etc but i cant seem to get it &amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="408495.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;[PI] Loot sharing in clan chat&#39;" href="408495.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/pi-loot-sharing-in-clan-chat/408495" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/pi-loot-sharing-in-clan-chat/408495" />
<meta property="og:title" content="[PI] Loot sharing in clan chat" />
<meta name="twitter:title" content="[PI] Loot sharing in clan chat" />
<meta property="og:description" content="Ok so i was in-game and one of my mods reported that when you click on lootshare, it disconnects everyone in that clan, Im not sure what going on iv attempted to rip code from other sources etc but i cant seem to get it to work 😦 here are my codes  Clicking buttons.java  			case 71074: 				if (c.clanId &gt;= 0 &amp;&amp; Server.clanChat.clans[c.clanId].owner.equalsIgnoreCase(c.playerName)) { 					if (c.CSLS == 0) { 		if(System.currentTimeMillis() - c.lastEmote &gt;= 1500) { 						Server.clanChat.clan..." />
<meta name="twitter:description" content="Ok so i was in-game and one of my mods reported that when you click on lootshare, it disconnects everyone in that clan, Im not sure what going on iv attempted to rip code from other sources etc but i cant seem to get it to work 😦 here are my codes  Clicking buttons.java  			case 71074: 				if (c.clanId &gt;= 0 &amp;&amp; Server.clanChat.clans[c.clanId].owner.equalsIgnoreCase(c.playerName)) { 					if (c.CSLS == 0) { 		if(System.currentTimeMillis() - c.lastEmote &gt;= 1500) { 						Server.clanChat.clan..." />
<meta property="article:published_time" content="2011-08-06T06:06:35+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="408495.html">[PI] Loot sharing in clan chat</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Dragonxile.html'><span itemprop='name'>Dragonxile</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-08-06T06:06:35Z'>
            <time itemprop='dateModified' datetime='2016-08-01T13:50:15Z' class='post-time'>
              August 1, 2016,  1:50pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Ok so i was in-game and one of my mods reported that when you click on lootshare, it disconnects everyone in that clan, Im not sure what going on iv attempted to rip code from other sources etc but i cant seem to get it to work <img src="../../images/emoji/twitter/frowningae52.png?v=5" title=":frowning:" class="emoji" alt=":frowning:"> here are my codes</p>
<p>Clicking buttons.java</p>
<p><code>			case 71074:
				if (c.clanId &gt;= 0 &amp;&amp; Server.clanChat.clans[c.clanId].owner.equalsIgnoreCase(c.playerName)) {
					if (c.CSLS == 0) {
		if(System.currentTimeMillis() - c.lastEmote &gt;= 1500) {
						Server.clanChat.clans[c.clanId].CS = 1;
						Server.clanChat.sendLootShareMessage(c.clanId, "LootShare has been toggled to " + (!Server.clanChat.clans[c.clanId].lootshare ? "ON" : "OFF") + " by the clan leader.");
						Server.clanChat.clans[c.clanId].lootshare = !Server.clanChat.clans[c.clanId].lootshare;
						c.CSLS = 1;
						Server.clanChat.updateClanChat(c.clanId);
			c.lastEmote = System.currentTimeMillis();
						return;
				}	
				}</code></p>
<p>clanchathandler.java (The hole java file)</p>
<p>[code]package server.world;</p>
<p>import server.model.players.Client;<br>
import server.util.Misc;<br>
import server.Server;</p>
<p>import java.util.ArrayList;</p>
<p>/**</p>
<ul>
<li>
<span class="mention">@author</span> Sanity<br>
*/</li>
</ul>
<p>public class ClanChatHandler {</p>
<pre><code>public ClanChatHandler() {

}

public Clan[] clans = new Clan[100];


public void handleClanChat(Client c, String name) {
	for (int j = 0; j &lt; clans.length; j++) {
		if (clans[j] != null) {
			if (clans[j].name.equalsIgnoreCase(name)) {
				addToClan(c.playerId, j);
				return;
			}			
		}
	}
	makeClan(c, name);
}


public void makeClan(Client c, String name) {
	if (openClan() &gt;= 0) {
		if (validName(name)) {
			c.clanId = openClan();
			clans[c.clanId] = new Clan (c,name);
			addToClan(c.playerId, c.clanId);
			c.inAclan = true;
			c.CSLS = 0;
			clans[c.clanId].CS = 0;
			clans[c.clanId].playerz = 1;
		
		} else {
			c.sendMessage("A clan with this name already exists.");
		}
	} else {
		c.sendMessage("Your clan chat request could not be completed.");
	}
}

public void updateClanChat(int clanId) {
	for (int j = 0; j &lt; clans[clanId].members.length; j++) {
		if (clans[clanId].members[j] &lt;= 0)
			continue;
		if (Server.playerHandler.players[clans[clanId].members[j]] != null) {
			Client c = (Client)Server.playerHandler.players[clans[clanId].members[j]];
			c.getPA().sendFrame126("Talking in: @whi@" + clans[clanId].name, 18139);
			c.getPA().sendFrame126("Owner: " + clans[clanId].owner, 18140);
			int slotToFill = 18144;
					/*if (clans[clanId].members[j] &gt;= 1) {
					c.CSLS = 0;
					Server.clanChat.clans[c.clanId].CS = 0;
					Server.clanChat.updateClanChat(c.clanId);
					return;
					}*/
				if(clans[clanId].CS == 3) {
				c.CSLS = 3;
				}
				if(clans[clanId].CS == 2) {
				c.CSLS = 2;
				}
				if(clans[clanId].CS == 1) {
				c.CSLS = 1;
				}
				if(clans[clanId].CS == 0) {
				c.CSLS = 0;
				}
			for (int i = 0; i &lt; clans[clanId].members.length; i++) {
				if (clans[clanId].members[i] &gt; 0){
					if (Server.playerHandler.players[clans[clanId].members[i]] != null) {
						c.getPA().sendFrame126(Server.playerHandler.players[clans[clanId].members[i]].playerName, slotToFill);
						slotToFill++;
					}	
				}
			}
			for (int k = slotToFill; k &lt; 18244; k++)
				c.getPA().sendFrame126("", k);
		}		
	}
}

public int openClan() {	
	for (int j = 0; j &lt; clans.length; j++) {
		if (clans[j] == null || clans[j].owner == "")
			return j;
	}
	return -1;
}

public boolean validName(String name) { 
	for (int j = 0; j &lt; clans.length; j++) {
		if (clans[j] != null) {
			if (clans[j].name.equalsIgnoreCase(name))
				return false;
		}		
	}
	return true;
}

public void addToClan(int playerId, int clanId) {
			Client c = (Client)Server.playerHandler.players[playerId];
			if(c.inAclan == true) {
			c.sendMessage("You are already in a clan chat!");
			return;
		}	
	if (clans[clanId] != null) {
		for (int j = 0; j &lt; clans[clanId].members.length; j++) {
			if (clans[clanId].members[j] &lt;= 0) {
				clans[clanId].members[j] = playerId;
				Server.playerHandler.players[playerId].clanId = clanId;
				//c.sendMessage("You have joined the clan chat: " + clans[clanId].name);
					/*if(Server.clanChat.clans[c.clanId].playerz &lt;= 1) {
					Server.clanChat.updateClanChat(c.clanId);
					return;
					}*/
				if(clans[clanId].CS == 3) {
				c.CSLS = 3;
				}
				if(clans[clanId].CS == 2) {
				c.CSLS = 2;
				}
				if(clans[clanId].CS == 1) {
				c.CSLS = 1;
				}
				if(clans[clanId].CS == 0) {
				c.CSLS = 0;
				}
				c.inAclan = true;
				clans[clanId].playerz += 1;
				messageToClan(Server.playerHandler.players[playerId].playerName + " has joined the channel.", clanId);
				updateClanChat(clanId);
				return;
			}
		}			
	}	
}

public void leaveClan(int playerId, int clanId) {
	if (clanId &lt; 0) {
		Client c = (Client)Server.playerHandler.players[playerId];
		c.sendMessage("You are not in a clan.");
		return;		
	}
	if (clans[clanId] != null) {
		if (Server.playerHandler.players[playerId].playerName.equalsIgnoreCase(clans[clanId].owner)) {
			messageToClan("The clan has been deleted by the owner.", clanId);
			destructClan(Server.playerHandler.players[playerId].clanId);
			return;
		}	
		for (int j = 0; j &lt; clans[clanId].members.length; j++) {
			if (clans[clanId].members[j] == playerId) {
				clans[clanId].members[j] = -1;
			}
		}
		if (Server.playerHandler.players[playerId] != null) {
			if(clans[clanId].playerz == 2) {
			Server.clanChat.clans[clanId].CS = 0;
			Server.clanChat.clans[clanId].coinshare = false;
			}
			Client c = (Client)Server.playerHandler.players[playerId];
			Server.playerHandler.players[playerId].clanId = -1;
			c.sendMessage("You have left the clan.");
			c.getPA().clearClanChat();
			c.inAclan = false;
			clans[clanId].playerz -= 1;
			c.CSLS = 0;
		}
		updateClanChat(clanId);
	} else {
		Client c = (Client)Server.playerHandler.players[playerId];
		Server.playerHandler.players[playerId].clanId = -1;
		c.sendMessage("You are not in a clan.");
	}
}

public void destructClan(int clanId) {
	if (clanId &lt; 0)
		return;
	for (int j = 0; j &lt; clans[clanId].members.length; j++) {
		if (clanId &lt; 0)
			continue;
		if (clans[clanId].members[j] &lt;= 0)
			continue;
		if (Server.playerHandler.players[clans[clanId].members[j]] != null) {
			clans[clanId].playerz = 0;
			Client c = (Client)Server.playerHandler.players[clans[clanId].members[j]];
			c.clanId = -1;
			c.inAclan = false;
			c.CSLS = 0;
			clans[clanId].CS = 0;
			c.getPA().clearClanChat();
		}	
	}
	clans[clanId].members = new int[50];
	clans[clanId].owner = "none";
	clans[clanId].name = "none";
}

public void messageToClan(String message, int clanId) {
	if (clanId &lt; 0)
		return;
	for (int j = 0; j &lt; clans[clanId].members.length; j++) {
		if (clans[clanId].members[j] &lt; 0)
			continue;
		if (Server.playerHandler.players[clans[clanId].members[j]] != null) {
			Client c = (Client)Server.playerHandler.players[clans[clanId].members[j]];
			c.sendMessage("&lt;img=2&gt;" + message);
		}
	}	
}

public void playerMessageToClan(int playerId, String message, int clanId) {
	if (clanId &lt; 0)
		return;
	for (int j = 0; j &lt; clans[clanId].members.length; j++) {
		if (clans[clanId].members[j] &lt;= 0)
			continue;
		if (Server.playerHandler.players[clans[clanId].members[j]] != null) {
			Client c = (Client)Server.playerHandler.players[clans[clanId].members[j]];
			//c.sendMessage("["+Server.playerHandler.players[playerId].playerName+"] - " + message");
			//sendClan(String name, String message, String clan, int rights)
			c.sendClan(Server.playerHandler.players[playerId].playerName, message, clans[clanId].name, Server.playerHandler.players[playerId].playerRights);
		}
	}	
}

	public void sendLootShareMessage(int clanId, String message) {
	if (clanId &gt;= 0) {
		for (int j = 0; j &lt; clans[clanId].members.length; j++) {
			if (clans[clanId].members[j] &lt;= 0)
				continue;
			if (Server.playerHandler.players[clans[clanId].members[j]] != null) {
				Client c = (Client)Server.playerHandler.players[clans[clanId].members[j]];
				c.sendClan("Lootshare", message, clans[clanId].name, 2);
			}
		}
	}
}
	public void sendCoinShareMessage(int clanId, String message) {
	if (clanId &gt;= 0) {
		for (int j = 0; j &lt; clans[clanId].members.length; j++) {
			if (clans[clanId].members[j] &lt;= 0)
				continue;
			if (Server.playerHandler.players[clans[clanId].members[j]] != null) {
				Client c = (Client)Server.playerHandler.players[clans[clanId].members[j]];
				c.sendClan("Coinshare", message, clans[clanId].name, 2);
			}
		}
	}
}
public void handleLootShare(Client c, int item, int amount) {
	sendLootShareMessage(c.clanId, c.playerName + " has received " + amount + "x " + server.model.items.Item.getItemName(item) + ".");	
}

public void handleCoinShare(Client c, int item, int amount) {
		try {
		if (c.clanId &gt;= 0) {
	for (int j = 0; j &lt; clans[c.clanId].members.length; j++) {
		if (clans[c.clanId].members[j] &lt;= 0)
			continue;
		if (Server.playerHandler.players[clans[c.clanId].members[j]] != null) {
	Client x = (Client)Server.playerHandler.players[clans[c.clanId].members[j]];
	int total = c.getShops().getItemShopValue(item) / clans[c.clanId].playerz;
				x.getItems().addItem(995, total);
				x.sendMessage("&lt;col=1532693&gt;You received "+total+" gold as your split of this drop: " + amount + " x " + server.model.items.Item.getItemName(item) + ".&lt;/col&gt;");

			}
}
	}
	} catch(Exception ex) {
	ex.printStackTrace();
	}

}
</code></pre>
<p>}[/code]</p>
<p>and clanchat.java</p>
<p>[code]package server.model.players.packets;</p>
<p>import server.util.Misc;<br>
import server.model.players.Client;<br>
import server.model.players.PacketType;<br>
import server.Server;<br>
/**</p>
<ul>
<li>
<p>Chat<br>
**/<br>
public class ClanChat implements PacketType {</p>
<p><a class="mention" href="../../u/override.html">@Override</a><br>
public void processPacket(Client c, int packetType, int packetSize) {<br>
String textSent = Misc.longToPlayerName2(c.getInStream().readQWord());<br>
textSent = textSent.replaceAll("_", " ");<br>
<a href="http://c.sendmessage/" rel="nofollow noopener">//c.sendMessage</a>(textSent);<br>
Server.clanChat.handleClanChat(c, textSent);<br>
}	<br>
}<br>
[/code]</p>
</li>
</ul>
      </div>

      <meta itemprop='headline' content='[PI] Loot sharing in clan chat'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Atreyu1993.html'><span itemprop='name'>Atreyu1993</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-08-06T06:16:12Z'>
            <time itemprop='dateModified' datetime='2016-08-01T13:50:15Z' class='post-time'>
              August 1, 2016,  1:50pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Try it yourself and see if you get an error, and if you are it would be a lot easier for anybody here to find the problem.</p>
      </div>

      <meta itemprop='headline' content='[PI] Loot sharing in clan chat'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="2" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Dragonxile.html'><span itemprop='name'>Dragonxile</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-08-06T06:19:22Z'>
            <time itemprop='dateModified' datetime='2016-08-01T13:50:15Z' class='post-time'>
              August 1, 2016,  1:50pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="2" data-topic="408495">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/atreyu1993/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> Atreyu1993:</div>
<blockquote>
<p>Try it yourself and see if you get an error, and if you are it would be a lot easier for anybody here to find the problem.</p>
</blockquote>
</aside>
<p>Well that the thing, i have no errors :\ it just dc’s me whenever i try using the lootshare, if its anyhelp im using formationx source and client, I found someone with the same problem and they seem to think its to do with the client, but i dont know how to work with clients :S</p>
      </div>

      <meta itemprop='headline' content='[PI] Loot sharing in clan chat'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/moh.html'><span itemprop='name'>moh</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-08-06T06:21:07Z'>
            <time itemprop='dateModified' datetime='2016-08-01T13:50:15Z' class='post-time'>
              August 1, 2016,  1:50pm
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="2" data-topic="408495">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/atreyu1993/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> Atreyu1993:</div>
<blockquote>
<p>Try it yourself and see if you get an error, and if you are it would be a lot easier for anybody here to find the problem.</p>
</blockquote>
</aside>
<p>Why u saying bullshit don’t post please.<br>
Well please post your whole case 71074, oh yeah when you use your compiler do you get any errors about this?</p>
      </div>

      <meta itemprop='headline' content='[PI] Loot sharing in clan chat'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Dragonxile.html'><span itemprop='name'>Dragonxile</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-08-06T06:26:02Z'>
            <time itemprop='dateModified' datetime='2016-08-01T13:50:16Z' class='post-time'>
              August 1, 2016,  1:50pm
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“moh, post:4, topic:408495”][quote author=Atreyu1993 link=topic=509778.msg3698893#msg3698893 date=1312611372]<br>
Try it yourself and see if you get an error, and if you are it would be a lot easier for anybody here to find the problem.<br>
[/quote]<br>
Why u saying bullshit don’t post please.<br>
Well please post your whole case 71074, oh yeah when you use your compiler do you get any errors about this?[/quote]</p>
<p>I posted my hole 71074 method :S</p>
<p>And this is what i get when compiled</p>
<p>This is the client compiler</p>
<p><code>Note: src\client.java uses or overrides a deprecated API.
Note: Recompile with -Xlint:deprecation for details.
Note: src\client.java uses unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details.
Press any key to continue . . .</code></p>
<p>Server compiler</p>
<p><code>Note: src\server\world\map\C.java uses unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details.
Press any key to continue . . .</code></p>
      </div>

      <meta itemprop='headline' content='[PI] Loot sharing in clan chat'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/moh.html'><span itemprop='name'>moh</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-08-06T06:27:40Z'>
            <time itemprop='dateModified' datetime='2016-08-01T13:50:16Z' class='post-time'>
              August 1, 2016,  1:50pm
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Well this is my whole case:</p>
<pre><code class="lang-auto">			case 71074:
				if (c.clanId &gt;= 0 &amp;&amp; Server.clanChat.clans[c.clanId].owner.equalsIgnoreCase(c.playerName)) {
					if (c.CSLS == 0) {
		if(System.currentTimeMillis() - c.lastEmote &gt;= 1500) {
						Server.clanChat.clans[c.clanId].CS = 1;
						Server.clanChat.sendLootShareMessage(c.clanId, "LootShare has been toggled to " + (!Server.clanChat.clans[c.clanId].lootshare ? "ON" : "OFF") + " by the clan leader.");
						Server.clanChat.clans[c.clanId].lootshare = !Server.clanChat.clans[c.clanId].lootshare;
						c.CSLS = 1;
						Server.clanChat.updateClanChat(c.clanId);
			c.lastEmote = System.currentTimeMillis();
						return;
				}	
				}	
					if (c.CSLS == 1) {
		if(System.currentTimeMillis() - c.lastEmote &gt;= 1500) {
						c.CSLS = 2;
						Server.clanChat.clans[c.clanId].CS = 2;
						Server.clanChat.updateClanChat(c.clanId);
						Server.clanChat.sendLootShareMessage(c.clanId, "LootShare has been toggled to " + (!Server.clanChat.clans[c.clanId].lootshare ? "ON" : "OFF") + " by the clan leader.");
						Server.clanChat.clans[c.clanId].lootshare = !Server.clanChat.clans[c.clanId].lootshare;
			c.lastEmote = System.currentTimeMillis();
						return;

				}	
				}	
					if (c.CSLS == 2) {
		if(System.currentTimeMillis() - c.lastEmote &gt;= 1500) {
						if(Server.clanChat.clans[c.clanId].playerz == 1) {
						c.sendMessage("There must be atleast 2 members in the clan chat to toggle Coinshare ON.");
						c.CSLS = 0;
						Server.clanChat.clans[c.clanId].CS = 0;
						Server.clanChat.updateClanChat(c.clanId);
			c.lastEmote = System.currentTimeMillis();
						return;
						}
						c.CSLS = 3;
						Server.clanChat.clans[c.clanId].CS = 3;
						Server.clanChat.updateClanChat(c.clanId);
						Server.clanChat.sendCoinShareMessage(c.clanId, "CoinShare has been toggled to " + (!Server.clanChat.clans[c.clanId].coinshare ? "ON" : "OFF") + " by the clan leader.");
						Server.clanChat.clans[c.clanId].coinshare = !Server.clanChat.clans[c.clanId].coinshare;
						return;

				}	
				}	
					if (c.CSLS == 3) {
		if(System.currentTimeMillis() - c.lastEmote &gt;= 1500) {
						c.CSLS = 0;
						Server.clanChat.clans[c.clanId].CS = 0;
						Server.clanChat.updateClanChat(c.clanId);
						Server.clanChat.sendCoinShareMessage(c.clanId, "CoinShare has been toggled to " + (!Server.clanChat.clans[c.clanId].coinshare ? "ON" : "OFF") + " by the clan leader.");
						Server.clanChat.clans[c.clanId].coinshare = !Server.clanChat.clans[c.clanId].coinshare;
			c.lastEmote = System.currentTimeMillis();
						return;
				}	
				}	
					} else {
						c.sendMessage("Only the owner of the clan has the power to do that.");
				}	
			break;</code></pre>
<p>Replace it with yours maybe it will work.</p>
      </div>

      <meta itemprop='headline' content='[PI] Loot sharing in clan chat'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Dragonxile.html'><span itemprop='name'>Dragonxile</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-08-06T06:30:41Z'>
            <time itemprop='dateModified' datetime='2016-08-01T13:50:16Z' class='post-time'>
              August 1, 2016,  1:50pm
            </time>
        <span itemprop='position'>#7</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Ohh yeah i forgot to add the CLS things lol, i feel dumb &gt;&lt;</p>
<p>here it all is</p>
<p>[code]			case 71074:<br>
if (c.clanId &gt;= 0 &amp;&amp; Server.clanChat.clans[c.clanId].owner.equalsIgnoreCase(c.playerName)) {<br>
if (c.CSLS == 0) {<br>
if(System.currentTimeMillis() - c.lastEmote &gt;= 1500) {<br>
Server.clanChat.clans[c.clanId].CS = 1;<br>
Server.clanChat.sendLootShareMessage(c.clanId, “LootShare has been toggled to " + (!Server.clanChat.clans[c.clanId].lootshare ? “ON” : “OFF”) + " by the clan leader.”);<br>
Server.clanChat.clans[c.clanId].lootshare = !Server.clanChat.clans[c.clanId].lootshare;<br>
c.CSLS = 1;<br>
Server.clanChat.updateClanChat(c.clanId);<br>
c.lastEmote = System.currentTimeMillis();<br>
return;<br>
}	<br>
}	<br>
if (c.CSLS == 1) {<br>
if(System.currentTimeMillis() - c.lastEmote &gt;= 1500) {<br>
c.CSLS = 2;<br>
Server.clanChat.clans[c.clanId].CS = 2;<br>
Server.clanChat.updateClanChat(c.clanId);<br>
Server.clanChat.sendLootShareMessage(c.clanId, “LootShare has been toggled to " + (!Server.clanChat.clans[c.clanId].lootshare ? “ON” : “OFF”) + " by the clan leader.”);<br>
Server.clanChat.clans[c.clanId].lootshare = !Server.clanChat.clans[c.clanId].lootshare;<br>
c.lastEmote = System.currentTimeMillis();<br>
return;</p>
<pre><code>			}	
			}	
				if (c.CSLS == 2) {
	if(System.currentTimeMillis() - c.lastEmote &gt;= 1500) {
					if(Server.clanChat.clans[c.clanId].playerz == 1) {
					c.sendMessage("There must be atleast 2 members in the clan chat to toggle Coinshare ON.");
					c.CSLS = 0;
					Server.clanChat.clans[c.clanId].CS = 0;
					Server.clanChat.updateClanChat(c.clanId);
		c.lastEmote = System.currentTimeMillis();
					return;
					}
					c.CSLS = 3;
					Server.clanChat.clans[c.clanId].CS = 3;
					Server.clanChat.updateClanChat(c.clanId);
					Server.clanChat.sendCoinShareMessage(c.clanId, "CoinShare has been toggled to " + (!Server.clanChat.clans[c.clanId].coinshare ? "ON" : "OFF") + " by the clan leader.");
					Server.clanChat.clans[c.clanId].coinshare = !Server.clanChat.clans[c.clanId].coinshare;
					return;

			}	
			}	
				if (c.CSLS == 3) {
	if(System.currentTimeMillis() - c.lastEmote &gt;= 1500) {
					c.CSLS = 0;
					Server.clanChat.clans[c.clanId].CS = 0;
					Server.clanChat.updateClanChat(c.clanId);
					Server.clanChat.sendCoinShareMessage(c.clanId, "CoinShare has been toggled to " + (!Server.clanChat.clans[c.clanId].coinshare ? "ON" : "OFF") + " by the clan leader.");
					Server.clanChat.clans[c.clanId].coinshare = !Server.clanChat.clans[c.clanId].coinshare;
		c.lastEmote = System.currentTimeMillis();
					return;
			}	
			}	
				} else {
					c.sendMessage("Only the owner of the clan has the power to do that.");
			}	
		break;[/code]
</code></pre>
<p>Not sure if urs is any different, im searching for some answers <img src="../../images/emoji/twitter/stuck_out_tongueae52.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
<p>Replaced mine with yours and still didnt work :S</p>
      </div>

      <meta itemprop='headline' content='[PI] Loot sharing in clan chat'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/moh.html'><span itemprop='name'>moh</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-08-06T06:39:44Z'>
            <time itemprop='dateModified' datetime='2016-08-01T13:50:17Z' class='post-time'>
              August 1, 2016,  1:50pm
            </time>
        <span itemprop='position'>#8</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Soz, I can’t help you as your compiler shows me it’s client sided I suck at that <img src="../../images/emoji/twitter/frowningae52.png?v=5" title=":frowning:" class="emoji" alt=":frowning:"></p>
      </div>

      <meta itemprop='headline' content='[PI] Loot sharing in clan chat'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Dragonxile.html'><span itemprop='name'>Dragonxile</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-08-06T06:44:23Z'>
            <time itemprop='dateModified' datetime='2016-08-01T13:50:17Z' class='post-time'>
              August 1, 2016,  1:50pm
            </time>
        <span itemprop='position'>#9</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Ahhh shit <img src="../../images/emoji/twitter/frowningae52.png?v=5" title=":frowning:" class="emoji" alt=":frowning:"> so it is the client, that sucks, I also suck at clients lol, Im only alright at server side (still learning :P)</p>
      </div>

      <meta itemprop='headline' content='[PI] Loot sharing in clan chat'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/imsuperman05.html'><span itemprop='name'>imsuperman05</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-08-06T06:47:13Z'>
            <time itemprop='dateModified' datetime='2016-08-01T13:50:17Z' class='post-time'>
              August 1, 2016,  1:50pm
            </time>
        <span itemprop='position'>#10</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>What does it say in the cmd when they DC?</p>
      </div>

      <meta itemprop='headline' content='[PI] Loot sharing in clan chat'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Dragonxile.html'><span itemprop='name'>Dragonxile</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-08-06T06:48:09Z'>
            <time itemprop='dateModified' datetime='2016-08-01T13:50:17Z' class='post-time'>
              August 1, 2016,  1:50pm
            </time>
        <span itemprop='position'>#11</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Nothing, just says the playername [deregistered]</p>
<p>ok the client says all this</p>
<p><code>Map Amount: 1226
!jjjj
148 aByte = [[B@7a354749]!
149 aByte = [[B@3fdb484d]!
150 aByte = [[B@5567d7fb]!
151 aByte = [[B@1494cb8b]!
480 aByte = [[B@34bf1d3b]!
481 aByte = [[B@6f18278a]!
1058 aByte = [[B@1acc0e01]!
1059 aByte = [[B@4aab7165]!
602 Animation Amount: 13798
602 NPC Amount: 11257
Width: 560
Height: 165
Error: T1 - 123,0 - 36,36
java.lang.ArrayIndexOutOfBoundsException: 5000
        at Stream.readString(Stream.java:195)
        at client.parsePacket(client.java:13848)
        at client.mainGameProcessor(client.java:4245)
        at client.processGameLoop(client.java:3561)
        at RSApplet.run(RSApplet.java:164)
        at client.run(client.java:6450)
        at java.lang.Thread.run(Unknown Source)
Error: T1 - 231,0 - 217,65
Error: T1 - 144,0 - 231,217
Error: T1 - 9,0 - 117,144
Error: T1 - 42,0 - 9,117
Error: T2 - 147,105,42 - 14,2837,10209 - 101,101,110,32,116,111,103,103,108,101,
100,32,116,111,
Error: T2 - 64,147,105 - 2,2837,10209 - 79,78,
Error: T1 - 137,0 - 64,147
Error: T1 - 16,0 - 137,64
Error: T1 - 211,0 - 16,137
Error: T1 - 167,0 - 211,16
Error: T2 - 142,167,211 - 2,2837,10209 - 104,101,
Error: T1 - 46,0 - 142,167
Error: T1 - 31,0 - 46,142
Error: T1 - 10,0 - 31,46
Error: T1 - 11,0 - 106,10
Error: T1 - 20,0 - 11,106
Exception in thread "Thread-6" java.lang.ArrayIndexOutOfBoundsException: 146
        at client.drawRedStones(client.java:2945)
        at client.drawTabArea(client.java:3049)
        at client.drawGameScreen(client.java:10666)
        at client.processDrawing(client.java:11653)
        at RSApplet.run(RSApplet.java:173)
        at client.run(client.java:6450)
        at java.lang.Thread.run(Unknown Source)
</code></p>
      </div>

      <meta itemprop='headline' content='[PI] Loot sharing in clan chat'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/imsuperman05.html'><span itemprop='name'>imsuperman05</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-08-06T07:05:28Z'>
            <time itemprop='dateModified' datetime='2016-08-01T13:50:18Z' class='post-time'>
              August 1, 2016,  1:50pm
            </time>
        <span itemprop='position'>#12</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>ZE ARRAY IS OUT OF THE FILE.</p>
      </div>

      <meta itemprop='headline' content='[PI] Loot sharing in clan chat'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Dragonxile.html'><span itemprop='name'>Dragonxile</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-08-06T07:15:51Z'>
            <time itemprop='dateModified' datetime='2016-08-01T13:50:19Z' class='post-time'>
              August 1, 2016,  1:50pm
            </time>
        <span itemprop='position'>#13</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I dont know how to add arrays :S could u help me over team viewer possibly?</p>
      </div>

      <meta itemprop='headline' content='[PI] Loot sharing in clan chat'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/pi-loot-sharing-in-clan-chat/408495 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Aug 2019 22:33:03 GMT -->
</html>
