<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/pi-making-npcs-talk-sell-items/376230 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Aug 2019 08:54:27 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>[PI] Making npc&#39;s talk &amp; sell Items - Runescape - moparisthebest.com</title>
    <meta name="description" content="Purpose: To teach. Difficulty: I Would rate it 2/5 as i spoon feed you. Assumed Knowledge: Reading and commonsense.  Classes Modified: DialogueHandler.java, ActionHandler.java, ClickingButtons.java Tested On: PI (ONLY). 
&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="376230.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;[PI] Making npc&#39;s talk &amp; sell Items&#39;" href="376230.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://i55.tinypic.com/1zp5cmf.png" />
<meta property="og:image" content="http://i55.tinypic.com/1zp5cmf.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/pi-making-npcs-talk-sell-items/376230" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/pi-making-npcs-talk-sell-items/376230" />
<meta property="og:title" content="[PI] Making npc&#39;s talk &amp; sell Items" />
<meta name="twitter:title" content="[PI] Making npc&#39;s talk &amp; sell Items" />
<meta property="og:description" content="Purpose: To teach.  Difficulty: I Would rate it 2/5 as i spoon feed you.  Assumed Knowledge: Reading and commonsense.  Classes Modified: DialogueHandler.java, ActionHandler.java, ClickingButtons.java  Tested On: PI (ONLY).  [CENTER]Wish to know what your adding?![/CENTER]        [CENTER]How to add the NPC with a shop.[/CENTER]  [SPOIL][CENTER]Click HERE for the official thread![/CENTER]  first search in ActionHandler.java  case 683: 				c.getShops().openShop(3);  and add under it:  case 553: 			..." />
<meta name="twitter:description" content="Purpose: To teach.  Difficulty: I Would rate it 2/5 as i spoon feed you.  Assumed Knowledge: Reading and commonsense.  Classes Modified: DialogueHandler.java, ActionHandler.java, ClickingButtons.java  Tested On: PI (ONLY).  [CENTER]Wish to know what your adding?![/CENTER]        [CENTER]How to add the NPC with a shop.[/CENTER]  [SPOIL][CENTER]Click HERE for the official thread![/CENTER]  first search in ActionHandler.java  case 683: 				c.getShops().openShop(3);  and add under it:  case 553: 			..." />
<meta property="article:published_time" content="2011-01-01T08:30:38+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="376230.html">[PI] Making npc&#39;s talk &amp; sell Items</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/hontiris1.html'><span itemprop='name'>hontiris1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-01-01T08:30:38Z'>
            <time itemprop='dateModified' datetime='2016-08-01T01:59:12Z' class='post-time'>
              August 1, 2016,  1:59am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p><span class="bbcode-b">Purpose:</span> To teach.<br>
<span class="bbcode-b">Difficulty:</span> I Would rate it 2/5 as i spoon feed you.<br>
<span class="bbcode-b">Assumed Knowledge:</span> Reading and commonsense.<br>
<span class="bbcode-b">Classes Modified:</span> DialogueHandler.java, ActionHandler.java, ClickingButtons.java<br>
<span class="bbcode-b">Tested On:</span> PI (ONLY).</p>
<p>[CENTER]<span class="bbcode-b">Wish to know what your adding?!</span>[/CENTER]</p>
<p><img src="http://i55.tinypic.com/1zp5cmf.png" alt width="516" height="137"><br>
<img src="http://i54.tinypic.com/2r6lbt0.png" alt width="140" height="120"><br>
<img src="http://i51.tinypic.com/2d9a4qe.png" alt width="520" height="138"></p>
<p>[CENTER]<span class="bbcode-b">How to add the NPC with a shop.</span>[/CENTER]</p>
<p>[SPOIL][CENTER]<a data-bbcode="true"><span class="bbcode-b">Click HERE for the official thread!</span></a>[/CENTER]</p>
<p>first search in ActionHandler.java</p>
<p><code>case 683:
				c.getShops().openShop(3);</code></p>
<p>and add under it:</p>
<p><code>case 553:
				c.getShops().openShop(11);</code></p>
<p>case 553:</p>
<p>the 553 number is the npc, wish will hold the shop.</p>
<p>openShop(11);</p>
<p>the 11 inside the parenthesis, is the shop id it will have, wish wil be used for shops.cfg! (NOTE: if the shop id that you put for the 11 is already made like 1, 2, 3 etc… you will get error’s so make sure to add a shop id that’s not already added.)</p>
<p>now you must go to shops.cfg and add:</p>
<pre><code class="lang-auto">shop = 11	runes		2	2	561	2000	554	2000	555	2000	556	2000	557	2000	558	2000	559	2000	562	2000	563	2000	565	2000	560	2000</code></pre>
<p>shop = 11</p>
<p>the 11 is the id that you used for openShop(11);</p>
<p>runes</p>
<p>is the name of the shop that you want.</p>
<pre><code class="lang-auto">2	2	561	2000	554	2000	555	2000	556	2000	557	2000	558	2000	559	2000	562	2000	563	2000	565	2000	560	2000</code></pre>
<p>Red # = the Item ID. &amp; Green # = The amount of the item that you want on the shop.</p>
<p>now you add the npc to the spawn-config.cfg.</p>
<hr>
<p><span class="bbcode-b"><span class="bbcode-i">How to Change prices!</span></span></p>
<p>First you will go to “prices.text” (prices is located where your cfg files are at like shops.cfgs, spawn-config.cfg etc…)</p>
<p>You will see items ID’s &amp; numbers next to it.</p>
<p>Example:</p>
<p><code>0 1
1 1
2 5
3 1
4 5
5 10
6 187500
7 187500
8 187500
9 187500
10 187500
11 187500
12 187500
13 187500
14 1
15 10
16 10
17 10
18 2
19 3
20 1</code></p>
<p>Red = Item ID. &amp; green = price for the item.[/SPOIL]</p>
<p><span class="bbcode-b">[CENTER]Making The Npc Talk &amp; sell Items[/CENTER]</span></p>
<p><span class="bbcode-u">Step 1</span> - Go to src/server/model/player DialogueHandler.java and search:</p>
<p><code>public void sendDialogues(int dialogue, int npcId) {
		c.talkingNpc = npcId;
		switch(dialogue) {</code></p>
<p><span class="bbcode-u">Step 2</span> - You want to add a text when you click the npc.</p>
<p>case 22 = The number of your dialog.<br>
Oziach = The name of the npc that will be displayed on the text.<br>
c.nextChat = 23; = This will tell the dialog that there is another page to it.</p>
<p><code>case 22:
			sendNpcChat4("Hello Human", "My name is Oziach, and i can sell you a great", "amount of food for a higher price and is faster",
			"then buying 10 by 10 on the general store.", c.talkingNpc, "Oziach");
			c.nextChat = 23;	
		break;
		case 23:
			sendNpcChat4("I do sell more items If you trade me", "This items are for pking, potions, and more", "but my best offert would be the noted food",
			"What kind of food would you like to buy?", c.talkingNpc, "Oziach");
			c.nextChat = 24;	
		break;
		case 24:
			sendOption2("1k Sharks (1.5m)",  "1k Mantas (2.1m)");
			c.dialogueAction = 23;
			c.nextChat = 0;	
		break;</code></p>
<p>Remove the following to make only the text appear:</p>
<p><code>case 24:
			sendOption2("1k Sharks (1.5m)",  "1k Mantas (2.1m)");
			c.dialogueAction = 23;
			c.nextChat = 0;	
		break;</code></p>
<p>On your on way:</p>
<p><code>case #:
			sendNpcChat4("(your text)", "(your text)", "(your text)",
			"(your text)", c.talkingNpc, "Oziach");
			c.nextChat = (0 if you have no more &amp; if you do enter the next case #);	
		break;</code></p>
<p>Now simply add it there under the others.</p>
<p><span class="bbcode-u">Step 3</span> - You will now need to add so the Dialog opens when you click the Npc.</p>
<p>head to ActionHandler.java</p>
<p>Now you will mainly have 3 options, but 2 are the most commonly used. You can pick where the user has to click if the npc has 2 clicking options for example like this one:</p>
<p><img src="http://i53.tinypic.com/n627bn.png" alt width="182" height="184"></p>
<p>If you wish for the text to appear on the first option thats Normally “talk” then search:</p>
<pre><code class="lang-auto">public void firstClickNpc(int npcType) {</code></pre>
<p>If you wish for the text to appear on the second option thats Normally “trade” then search:</p>
<pre><code class="lang-auto">public void secondClickNpc(int npcType) {</code></pre>
<p>For the npc’s that has a 3rd option then search for:</p>
<pre><code class="lang-auto">public void thirdClickNpc(int npcType) {</code></pre>
<p>Now you have to add this code in so that the dialog opens, add it on one of does options listened:</p>
<p>747 = the npc that the dialog (text) will open on.<br>
22 = the dialog number that the npc will open when you click on it.</p>
<p><code>case 747:
				c.getDH().sendDialogues(22, npcType);
			break;</code></p>
<p><span class="bbcode-u">Step 4</span> - If you chose not to remove the buying an Item dialog then you want to do this step.</p>
<p>Now you want to head to src/server/model/players/packets ClickingButtons search for:</p>
<pre><code class="lang-auto">case 9157:</code></pre>
<p>Under all the else if add:</p>
<p>23 = the Dialog case number of the buy option.</p>
<p><code>} else if(c.dialogueAction == 23) {
					c.getItems().addItem(386,1000);
					c.getItems().deleteItem(995, c.getItems().getItemSlot(995), 1500000);</code></p>
<p>Now search for:</p>
<pre><code class="lang-auto">case 9158:</code></pre>
<p>Under all the other else if add:</p>
<p><code>} else if(c.dialogueAction == 23) {
					c.getItems().addItem(392,1000);
					c.getItems().deleteItem(995, c.getItems().getItemSlot(995), 2100000);</code></p>
<pre><code>                        [CENTER]___________________________________[/CENTER]
</code></pre>
<aside class="quote no-group">
<div class="title">
<div class="quote-controls"></div>
 Kyle Iz Pro;2434847:</div>
<blockquote>
<p>Thanks for this but how would you do player talking back</p>
</blockquote>
</aside>
<p>You will need to change from:</p>
<p><code>case 23:
			sendNpcChat4("I do sell more items If you trade me", "This items are for pking, potions, and more", "but my best offert would be the noted food",
			"What kind of food would you like to buy?", c.talkingNpc, "Oziach");
			c.nextChat = 24;	
		break;</code></p>
<p>c.talkingNpc</p>
<p>To</p>
<pre><code class="lang-auto">c.playerId</code></pre>
<p>To make sure that they don’t get the item free, teleported, or what ever action you have added then add something like this:</p>
<p>[SPOIL]<code>} else if(c.dialogueAction == dialogue number) {
				if(!c.getItems().playerHasItem(item id, amount)) {
				c.sendMessage("you don't have enough money");
				c.getPA().removeAllWindows();
						break;
						}
					c.getItems().addItem(item id,item amount);
					c.getItems().deleteItem((item that will delete (like 995 = coins), c.getItems().getItemSlot(item id (995 = coins)), amount of the item);
                                        c.sendMessage("thanks for buying the Item, teleported, etc..");</code>[/SPOIL]</p>
<p>If you have any questions please reply to the thread.</p>
<p>[CENTER]<span class="bbcode-b">Please post your comments on my TUT &amp; thank the thread if it helped you!</span>[/CENTER]</p>
      </div>

      <meta itemprop='headline' content='[PI] Making npc&#39;s talk &amp; sell Items'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/hontiris1.html'><span itemprop='name'>hontiris1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-01-01T08:33:42Z'>
            <time itemprop='dateModified' datetime='2016-08-01T01:59:13Z' class='post-time'>
              August 1, 2016,  1:59am
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>What are you talking about, this is no snippet. Don’t start trolling on my threads.</p>
<p>Gtfo my thread.</p>
      </div>

      <meta itemprop='headline' content='[PI] Making npc&#39;s talk &amp; sell Items'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/hontiris1.html'><span itemprop='name'>hontiris1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-01-01T08:39:03Z'>
            <time itemprop='dateModified' datetime='2016-08-01T01:59:13Z' class='post-time'>
              August 1, 2016,  1:59am
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I’m not a beginner programmer this are some old TUT’s i had and decided to give this forums a chance by posting them.</p>
      </div>

      <meta itemprop='headline' content='[PI] Making npc&#39;s talk &amp; sell Items'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Clawz_fury.html'><span itemprop='name'>Clawz_fury</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-01-01T10:06:30Z'>
            <time itemprop='dateModified' datetime='2016-08-01T01:59:16Z' class='post-time'>
              August 1, 2016,  1:59am
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote no-group">
<div class="title">
<div class="quote-controls"></div>
 I Vain I:</div>
<blockquote>
<p>Stop posting snippets. <span class="bbcode-s">My</span> I Vain I’s tutorial convered most of these basics, so this serve’s no use.</p>
</blockquote>
</aside>
      </div>

      <meta itemprop='headline' content='[PI] Making npc&#39;s talk &amp; sell Items'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/SacredHeart.html'><span itemprop='name'>SacredHeart</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-01-01T11:51:46Z'>
            <time itemprop='dateModified' datetime='2016-08-01T01:59:22Z' class='post-time'>
              August 1, 2016,  1:59am
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Nice tutorial, Mind making one for delta. I really want to know how to do it. :S</p>
      </div>

      <meta itemprop='headline' content='[PI] Making npc&#39;s talk &amp; sell Items'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/deathschaos9.html'><span itemprop='name'>deathschaos9</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-01-01T19:06:05Z'>
            <time itemprop='dateModified' datetime='2016-08-01T02:00:09Z' class='post-time'>
              August 1, 2016,  2:00am
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I Vain I’s tutorial covers NPC Dialogue and shop making. Also, your BBC is messy and you haven’t explained anything.</p>
      </div>

      <meta itemprop='headline' content='[PI] Making npc&#39;s talk &amp; sell Items'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/pi-making-npcs-talk-sell-items/376230 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Aug 2019 08:54:28 GMT -->
</html>
