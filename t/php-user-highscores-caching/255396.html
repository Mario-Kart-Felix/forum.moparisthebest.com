<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/php-user-highscores-caching/255396 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 14:25:01 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>[PHP] User Highscores Caching - General Programming - moparisthebest.com</title>
    <meta name="description" content="Before you even consider using this script, I must warn you that I am giving no support whatsoever, so therefore this script requires experience in PHP to a certain degree. One cannot just download this and assume they w&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="255396.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;[PHP] User Highscores Caching&#39;" href="255396.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/php-user-highscores-caching/255396" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/php-user-highscores-caching/255396" />
<meta property="og:title" content="[PHP] User Highscores Caching" />
<meta name="twitter:title" content="[PHP] User Highscores Caching" />
<meta property="og:description" content="Before you even consider using this script, I must warn you that I am giving no support whatsoever, so therefore this script requires experience in PHP to a certain degree. One cannot just download this and assume they will be able to run it with ease, because I have yet to see this same concept released by someone besides myself.  Caching is a very important subject in the manner of loading pages frequently. Of all applications I have built, Highscores tops them all with the reoccurance of MySQ..." />
<meta name="twitter:description" content="Before you even consider using this script, I must warn you that I am giving no support whatsoever, so therefore this script requires experience in PHP to a certain degree. One cannot just download this and assume they will be able to run it with ease, because I have yet to see this same concept released by someone besides myself.  Caching is a very important subject in the manner of loading pages frequently. Of all applications I have built, Highscores tops them all with the reoccurance of MySQ..." />
<meta property="article:published_time" content="2009-01-07T15:28:51+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="255396.html">[PHP] User Highscores Caching</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/general-programming.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>General Programming</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/z.html'><span itemprop='name'>z</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-01-07T15:28:51Z'>
            <time itemprop='dateModified' datetime='2016-07-31T04:38:45Z' class='post-time'>
              July 31, 2016,  4:38am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Before you even consider using this script, I must warn you that I am giving no support whatsoever, so therefore this script requires experience in PHP to a certain degree. One cannot just download this and assume they will be able to run it with ease, because I have yet to see this same concept released by someone besides myself.</p>
<p>Caching is a very important subject in the manner of loading pages frequently. Of all applications I have built, Highscores tops them all with the reoccurance of MySQL querying, due strongly to the high volume of users connecting to a Highscores all at once. Caching helps to load pages faster and take stress off of the MySQL database, while it’s in use by the RuneScape server for updating skills.</p>
<p>The only distinct location in which I can assume a website uses caching for RuneScape servers is the RuneScape website itself, which is quite unfortunate. You see, everytime you load a user page on a Highscores with ranking abilities to check on how that specific user ranks in each skill, you are required to do at least 21 SQL queries to the database. For each skill, you must grab the whole table, order it by the experience, and loop through the result array until you spot the user ID you’re looking for, then returning the rank; but you don’t do this once, you do it <span class="bbcode-b">21 times</span>.</p>
<p>This will ease up on the MySQL querying; doing 21 queries every five minutes, compared to doing 21 everytime someone loads a user page, and the more users on the Highscores, the more queries per minute (Dodian could probably peak 2100 queries in a minute). This is easily configurable in the Config class too.</p>
<p>The script itself is extremely clean and minimalized. When you first run the script, it will do a simple var_dump of the cached file (if it doesn’t exist, it will create it). A cache contains four lines:<code>Timestamp (the last time the cache was updated)
Username
Rank of SkillID #1,Rank of SkillID #2,[...] (Each rank is separated by commas)
Exp of SkillID #1,Exp of SkillID #2,[...] (Again, separated by commas)</code></p>
<p>Source: <a href="http://projects.its-alive.org/runescape/highscores/caching/users/source.zip" data-bbcode="true" rel="nofollow noopener">http://projects.its-alive.org/runescape/highscores/caching/users/source.zip</a><br>
Example: <a href="http://projects.its-alive.org/runescape/highscores/caching/users/?user=zachera" data-bbcode="true" rel="nofollow noopener">http://projects.its-alive.org/runescape/highscores/caching/users/?user=zachera</a></p>
<p>Enjoy.</p>
      </div>

      <meta itemprop='headline' content='[PHP] User Highscores Caching'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/moparisthebest.html'><span itemprop='name'>moparisthebest</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-01-09T16:35:37Z'>
            <time itemprop='dateModified' datetime='2016-07-31T04:40:34Z' class='post-time'>
              July 31, 2016,  4:40am
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote no-group quote-modified" data-post="1" data-topic="255396">
<div class="title">
<div class="quote-controls"></div>
 zachera:</div>
<blockquote>
<p>For each skill, you must grab the whole table, order it by the experience, and loop through the result array until you spot the user ID you’re looking for, then returning the rank; but you don’t do this once, you do it <span class="bbcode-b">21 times</span>.</p>
</blockquote>
</aside>
<p>Now, I don’t know the schema of the tables you are working with, if you posted them I could help you out a lot more.  But regardless, there is a much better way to do this, using the MySQL function COUNT().  I imagine it would look something like this:</p>
<pre><code class="lang-auto">SELECT COUNT(*) AS rank FROM `some_skill` WHERE `experience` &gt;= (SELECT `experience` FROM `some_skill` WHERE `username` = 'the_name_of_the_user') GROUP BY `username`;</code></pre>
<p>In english, that will get you the number of users in that skill with more experience than the user who you are looking at, which is their rank is it not?</p>
<p>Always let MySQL do the most work possible, it’s faster.</p>
<p>Edit:<br>
Thinking about it more, if the database schema is set up correctly, you should be able to get the ranks and experience levels for all skills for a single user in 1 MySQL query.  Post the schema you are using.</p>
      </div>

      <meta itemprop='headline' content='[PHP] User Highscores Caching'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/php-user-highscores-caching/255396 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 14:25:02 GMT -->
</html>
