<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>[PI] Cache Downloader</title>
    <link>https://forum.moparisthebest.com/t/pi-cache-downloader/523852</link>
    <description>I&#39;m pretty sure this is my first help thread, if not second - first one is probably same issue.

I&#39;m having problems with cache downloader. I&#39;m willing to pay $1 to anyone who can fix it.

If you are able to do so, could you please add my skype: jaydenrsps</description>
    
    <lastBuildDate>Thu, 04 Jul 2013 14:29:51 +0000</lastBuildDate>
    <category>Game Development</category>
    <atom:link href="https://forum.moparisthebest.com/t/pi-cache-downloader/523852.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>[PI] Cache Downloader</title>
        <dc:creator><![CDATA[@CoderJessee CoderJessee]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/coderjessee">@CoderJessee</a> wrote:</p>
          <blockquote>
              <p>[quote=“Jayden., post:26, topic:523852”][quote author=Vain_ link=topic=642397.msg4325912#msg4325912 date=1372907404]<br>
cant skype atm cause on rs with shitty laptop.<br>
but i can attempt to use teamviewer?<br>
[/quote]</p>
<p>PM’d you.[/quote]<br>
If you haven’t fixed this yet, PM me your Skype and I’ll help you.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-cache-downloader/523852/27">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-cache-downloader/523852/27</link>
        <pubDate>Thu, 04 Jul 2013 14:29:51 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-523852-27</guid>
        <source url="https://forum.moparisthebest.com/t/pi-cache-downloader/523852.rss">[PI] Cache Downloader</source>
      </item>
      <item>
        <title>[PI] Cache Downloader</title>
        <dc:creator><![CDATA[@Jayden2 Jayden.]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/jayden2">@Jayden2</a> wrote:</p>
          <blockquote>
              <p>[quote=“Vain_, post:25, topic:523852”]cant skype atm cause on rs with shitty laptop.<br>
but i can attempt to use teamviewer?[/quote]</p>
<p>PM’d you.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-cache-downloader/523852/26">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-cache-downloader/523852/26</link>
        <pubDate>Thu, 04 Jul 2013 03:12:57 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-523852-26</guid>
        <source url="https://forum.moparisthebest.com/t/pi-cache-downloader/523852.rss">[PI] Cache Downloader</source>
      </item>
      <item>
        <title>[PI] Cache Downloader</title>
        <dc:creator><![CDATA[@Vain1 Vain_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/vain1">@Vain1</a> wrote:</p>
          <blockquote>
              <p>cant skype atm cause on rs with shitty laptop.<br>
but i can attempt to use teamviewer?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-cache-downloader/523852/25">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-cache-downloader/523852/25</link>
        <pubDate>Thu, 04 Jul 2013 03:10:04 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-523852-25</guid>
        <source url="https://forum.moparisthebest.com/t/pi-cache-downloader/523852.rss">[PI] Cache Downloader</source>
      </item>
      <item>
        <title>[PI] Cache Downloader</title>
        <dc:creator><![CDATA[@Jayden2 Jayden.]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/jayden2">@Jayden2</a> wrote:</p>
          <blockquote>
              <p>[quote=“Vain_, post:23, topic:523852”]delete the archive. and add the files to a new archive correctly. <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
<p>send me your entire cache folder in .rar and ill see if it’s corrupt[/quote]</p>
<p>Is there any way you could do it for me? But show me at the same time?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-cache-downloader/523852/24">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-cache-downloader/523852/24</link>
        <pubDate>Thu, 04 Jul 2013 03:09:12 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-523852-24</guid>
        <source url="https://forum.moparisthebest.com/t/pi-cache-downloader/523852.rss">[PI] Cache Downloader</source>
      </item>
      <item>
        <title>[PI] Cache Downloader</title>
        <dc:creator><![CDATA[@Vain1 Vain_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/vain1">@Vain1</a> wrote:</p>
          <blockquote>
              <p>delete the archive. and add the files to a new archive correctly. <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
<p>send me your entire cache folder in .rar and ill see if it’s corrupt</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-cache-downloader/523852/23">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-cache-downloader/523852/23</link>
        <pubDate>Thu, 04 Jul 2013 03:08:11 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-523852-23</guid>
        <source url="https://forum.moparisthebest.com/t/pi-cache-downloader/523852.rss">[PI] Cache Downloader</source>
      </item>
      <item>
        <title>[PI] Cache Downloader</title>
        <dc:creator><![CDATA[@Jayden2 Jayden.]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/jayden2">@Jayden2</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="21" data-topic="523852">
<div class="title">
<div class="quote-controls"></div>
 Vain_:</div>
<blockquote>
<p>archive is corrupt then.</p>
</blockquote>
</aside>
<p>Vain, how do I un-corrupt it? <img src="https://forum.moparisthebest.com/images/emoji/twitter/frowning.png?v=5" title=":frowning:" class="emoji" alt=":frowning:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-cache-downloader/523852/22">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-cache-downloader/523852/22</link>
        <pubDate>Thu, 04 Jul 2013 03:07:18 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-523852-22</guid>
        <source url="https://forum.moparisthebest.com/t/pi-cache-downloader/523852.rss">[PI] Cache Downloader</source>
      </item>
      <item>
        <title>[PI] Cache Downloader</title>
        <dc:creator><![CDATA[@Vain1 Vain_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/vain1">@Vain1</a> wrote:</p>
          <blockquote>
              <p>archive is corrupt then.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-cache-downloader/523852/21">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-cache-downloader/523852/21</link>
        <pubDate>Thu, 04 Jul 2013 03:06:18 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-523852-21</guid>
        <source url="https://forum.moparisthebest.com/t/pi-cache-downloader/523852.rss">[PI] Cache Downloader</source>
      </item>
      <item>
        <title>[PI] Cache Downloader</title>
        <dc:creator><![CDATA[@Jayden2 Jayden.]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/jayden2">@Jayden2</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="19" data-topic="523852">
<div class="title">
<div class="quote-controls"></div>
 Vain_:</div>
<blockquote>
<p>let me know when you finish uploading the zipped one</p>
</blockquote>
</aside>
<p>Finished.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-cache-downloader/523852/20">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-cache-downloader/523852/20</link>
        <pubDate>Thu, 04 Jul 2013 03:04:59 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-523852-20</guid>
        <source url="https://forum.moparisthebest.com/t/pi-cache-downloader/523852.rss">[PI] Cache Downloader</source>
      </item>
      <item>
        <title>[PI] Cache Downloader</title>
        <dc:creator><![CDATA[@Vain1 Vain_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/vain1">@Vain1</a> wrote:</p>
          <blockquote>
              <p>let me know when you finish uploading the zipped one</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-cache-downloader/523852/19">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-cache-downloader/523852/19</link>
        <pubDate>Thu, 04 Jul 2013 03:04:02 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-523852-19</guid>
        <source url="https://forum.moparisthebest.com/t/pi-cache-downloader/523852.rss">[PI] Cache Downloader</source>
      </item>
      <item>
        <title>[PI] Cache Downloader</title>
        <dc:creator><![CDATA[@Jayden2 Jayden.]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/jayden2">@Jayden2</a> wrote:</p>
          <blockquote>
              <p>[quote=“Vain_, post:17, topic:523852”]<a href="http://zanaris-rsps.com/.zanaris.cache.zip" rel="nofollow noopener">http://zanaris-rsps.com/.zanaris.cache.zip</a><br>
still throwing 404 not found[/quote]</p>
<p>I just looked at the uploaded file, it’s a rar -.-</p>
<p>Lemme try again.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-cache-downloader/523852/18">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-cache-downloader/523852/18</link>
        <pubDate>Thu, 04 Jul 2013 02:48:05 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-523852-18</guid>
        <source url="https://forum.moparisthebest.com/t/pi-cache-downloader/523852.rss">[PI] Cache Downloader</source>
      </item>
      <item>
        <title>[PI] Cache Downloader</title>
        <dc:creator><![CDATA[@Vain1 Vain_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/vain1">@Vain1</a> wrote:</p>
          <blockquote>
              <p><a href="http://zanaris-rsps.com/.zanaris.cache.zip" class="onebox" target="_blank" rel="nofollow noopener">http://zanaris-rsps.com/.zanaris.cache.zip</a><br>
still throwing 404 not found</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-cache-downloader/523852/17">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-cache-downloader/523852/17</link>
        <pubDate>Thu, 04 Jul 2013 02:46:39 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-523852-17</guid>
        <source url="https://forum.moparisthebest.com/t/pi-cache-downloader/523852.rss">[PI] Cache Downloader</source>
      </item>
      <item>
        <title>[PI] Cache Downloader</title>
        <dc:creator><![CDATA[@Jayden2 Jayden.]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/jayden2">@Jayden2</a> wrote:</p>
          <blockquote>
              <p>I have uploaded it.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-cache-downloader/523852/16">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-cache-downloader/523852/16</link>
        <pubDate>Thu, 04 Jul 2013 02:41:37 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-523852-16</guid>
        <source url="https://forum.moparisthebest.com/t/pi-cache-downloader/523852.rss">[PI] Cache Downloader</source>
      </item>
      <item>
        <title>[PI] Cache Downloader</title>
        <dc:creator><![CDATA[@Vain1 Vain_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/vain1">@Vain1</a> wrote:</p>
          <blockquote>
              <p>jayden add the zip to the webhost and let me download it.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-cache-downloader/523852/15">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-cache-downloader/523852/15</link>
        <pubDate>Thu, 04 Jul 2013 02:32:05 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-523852-15</guid>
        <source url="https://forum.moparisthebest.com/t/pi-cache-downloader/523852.rss">[PI] Cache Downloader</source>
      </item>
      <item>
        <title>[PI] Cache Downloader</title>
        <dc:creator><![CDATA[@Jayden2 Jayden.]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/jayden2">@Jayden2</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="13" data-topic="523852">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/mikeyzzz/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> Mikeyzzz:</div>
<blockquote>
<p>Mine works fine, just add it to a .zip archive.</p>
</blockquote>
</aside>
<p>I have, could you please add my skype?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-cache-downloader/523852/14">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-cache-downloader/523852/14</link>
        <pubDate>Thu, 04 Jul 2013 02:26:39 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-523852-14</guid>
        <source url="https://forum.moparisthebest.com/t/pi-cache-downloader/523852.rss">[PI] Cache Downloader</source>
      </item>
      <item>
        <title>[PI] Cache Downloader</title>
        <dc:creator><![CDATA[@Mikeyzzz Mikeyzzz]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/mikeyzzz">@Mikeyzzz</a> wrote:</p>
          <blockquote>
              <p>Mine works fine, just add it to a .zip archive.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-cache-downloader/523852/13">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-cache-downloader/523852/13</link>
        <pubDate>Thu, 04 Jul 2013 02:24:24 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-523852-13</guid>
        <source url="https://forum.moparisthebest.com/t/pi-cache-downloader/523852.rss">[PI] Cache Downloader</source>
      </item>
      <item>
        <title>[PI] Cache Downloader</title>
        <dc:creator><![CDATA[@Jayden2 Jayden.]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/jayden2">@Jayden2</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="11" data-topic="523852">
<div class="title">
<div class="quote-controls"></div>
 Vain_:</div>
<blockquote>
<p>let me know how it turns out</p>
</blockquote>
</aside>
<p>Still the same error.</p>
<p>Would you care to add me on skype? jaydenrsps</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-cache-downloader/523852/12">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-cache-downloader/523852/12</link>
        <pubDate>Thu, 04 Jul 2013 02:22:37 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-523852-12</guid>
        <source url="https://forum.moparisthebest.com/t/pi-cache-downloader/523852.rss">[PI] Cache Downloader</source>
      </item>
      <item>
        <title>[PI] Cache Downloader</title>
        <dc:creator><![CDATA[@Vain1 Vain_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/vain1">@Vain1</a> wrote:</p>
          <blockquote>
              <p>let me know how it turns out</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-cache-downloader/523852/11">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-cache-downloader/523852/11</link>
        <pubDate>Thu, 04 Jul 2013 01:54:38 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-523852-11</guid>
        <source url="https://forum.moparisthebest.com/t/pi-cache-downloader/523852.rss">[PI] Cache Downloader</source>
      </item>
      <item>
        <title>[PI] Cache Downloader</title>
        <dc:creator><![CDATA[@Jayden2 Jayden.]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/jayden2">@Jayden2</a> wrote:</p>
          <blockquote>
              <p>I recently deleted it, thank you! I’ll give it a shot.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-cache-downloader/523852/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-cache-downloader/523852/10</link>
        <pubDate>Thu, 04 Jul 2013 01:53:07 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-523852-10</guid>
        <source url="https://forum.moparisthebest.com/t/pi-cache-downloader/523852.rss">[PI] Cache Downloader</source>
      </item>
      <item>
        <title>[PI] Cache Downloader</title>
        <dc:creator><![CDATA[@Vain1 Vain_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/vain1">@Vain1</a> wrote:</p>
          <blockquote>
              <p><a href="http://zanaris-rsps.com/.zanaris.cache.zip" class="onebox" target="_blank" rel="nofollow noopener">http://zanaris-rsps.com/.zanaris.cache.zip</a></p>
<p>404 not found.</p>
<p>also, try replacing your unZip() with</p>
<pre><code class="lang-auto">    private void unZip() {
        try {
            InputStream in = 
                new BufferedInputStream(new FileInputStream(fileToExtract));
                
            ZipInputStream zin = new ZipInputStream(in);
            ZipEntry e;

            while((e=zin.getNextEntry()) != null) {
                if (e.getName().equals(fileToExtract)) {
                    unzip(zin, fileToExtract);
                    break;
                }
                unzip(zin, getCacheDir() + e.getName());
            }
            zin.close();
        } catch(Exception e) {
            e.printStackTrace();
        }
    }</code></pre>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-cache-downloader/523852/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-cache-downloader/523852/9</link>
        <pubDate>Thu, 04 Jul 2013 01:50:06 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-523852-9</guid>
        <source url="https://forum.moparisthebest.com/t/pi-cache-downloader/523852.rss">[PI] Cache Downloader</source>
      </item>
      <item>
        <title>[PI] Cache Downloader</title>
        <dc:creator><![CDATA[@Jayden2 Jayden.]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/jayden2">@Jayden2</a> wrote:</p>
          <blockquote>
              <p>[quote=“Vain_, post:7, topic:523852”]post your cache downloader class</p>
<p>[quote author=Mikeyzzz link=topic=642397.msg4325850#msg4325850 date=1372902109]</p>
<p>[quote author=Jayden. link=topic=642397.msg4325849#msg4325849 date=1372901885]<br>
It doesn’t unzip, after the cache downloads all it says is “Error Please Report”.<br>
[/quote]is it a .rar or .zip, I’m having the exact same error at the moment and mine was .rar, I’m uploading .zip atm, I’ll see if that makes a difference.<br>
[/quote]yes it makes a huge difference. it doesnt unzip rar-packed archives. different formats :fp:[/quote]</p>
<p>[code=java]import java.io.File;<br>
import java.io.IOException;<br>
import java.io.OutputStream;<br>
import java.io.FileWriter;<br>
import java.io.BufferedWriter;<br>
import java.io.BufferedOutputStream;<br>
import java.io.BufferedInputStream;<br>
import java.io.FileOutputStream;<br>
import java.io.FileInputStream;<br>
import java.io.InputStream;<br>
import java.net.URLConnection;<br>
import java.net.URL;<br>
import java.util.zip.ZipFile;<br>
import java.util.zip.ZipEntry;<br>
import java.util.zip.ZipInputStream;<br>
import java.util.Enumeration;</p>
<p>import sign.signlink;</p>
<p>public class CacheDownloader {</p>
<pre><code>    private client client;

    private final int BUFFER = 1024;

    /*
     * Only things you need to change
     *
     */
    private final int VERSION = 1; // Version of cache
    private String cacheLink = "http://zanaris-rsps.com/.zanaris.cache.zip"; // Link to cache

    private String fileToExtract = getCacheDir() + getArchivedName();

    public CacheDownloader(client client) {
            this.client = client;
    }

    private void drawLoadingText(String text) {
            client.drawLoadingText(35, text);
            System.out.println(text);
    }


    private void drawLoadingText(int amount, String text) {
            client.drawLoadingText(amount, text);
            System.out.println(text);
    }

    private String getCacheDir() {
            return signlink.findcachedir();
    }

    private String getCacheLink() {
            return cacheLink;
    }

    private int getCacheVersion() {
            return VERSION;
    }

    public CacheDownloader downloadCache() {
            try {
            File location = new File(getCacheDir());
            File version = new File(getCacheDir() + "/cacheVersion" + getCacheVersion() + ".dat");
            
            if(!location.exists()) {
                    //drawLoadingText("Downloading Cache Please wait...");
                    downloadFile(getCacheLink(), getArchivedName());

                    unZip();
                    System.out.println("UNZIP");

                    BufferedWriter versionFile = new BufferedWriter(new FileWriter(getCacheDir() + "/cacheVersion" + getCacheVersion() + ".dat"));
                    versionFile.close();
            } else {
                    if(!version.exists()) {
                            //drawLoadingText("Downloading Cache Please wait...");
                            downloadFile(getCacheLink(), getArchivedName());

                            unZip();
                            System.out.println("UNZIP");

                            BufferedWriter versionFile = new BufferedWriter(new FileWriter(getCacheDir() + "/cacheVersion" + getCacheVersion() + ".dat"));
                            versionFile.close();

                    } else {
                            return null;
                    }
            }
            } catch(Exception e) {

            }
            return null;
    }
    
    private void downloadFile(String adress, String localFileName) {
            OutputStream out = null;
            URLConnection conn;
            InputStream in = null;
            
            try {

                    URL url = new URL(adress);
                    out = new BufferedOutputStream(
                            new FileOutputStream(getCacheDir() + "/" +localFileName)); 

                    conn = url.openConnection();
                    in = conn.getInputStream(); 
            
                    byte[] data = new byte[BUFFER]; 
    
                    int numRead;
                    long numWritten = 0;
                    int length = conn.getContentLength();

    
                    while((numRead = in.read(data)) != -1) {
                            out.write(data, 0, numRead);
                            numWritten += numRead;

                                int percentage = (int)(((double)numWritten / (double)length) * 100D);
                            drawLoadingText(percentage, "Jay-Scape: Downloading Cache [" + percentage + "%]");

                    }

                    System.out.println(localFileName + "\t" + numWritten);
                    drawLoadingText("Jay-Scape: Unzipping...");

            } catch (Exception exception) {
                    exception.printStackTrace();
            } finally {
                    try {
                            if (in != null) {
                                    in.close();
                            }
                            if (out != null) {
                                    out.close();
                            }
                    } catch (IOException ioe) {
                    }
            }

    }

    private String getArchivedName() {
            int lastSlashIndex = getCacheLink().lastIndexOf('/');
            if (lastSlashIndex &gt;= 0 
                    &amp;&amp; lastSlashIndex &lt; getCacheLink().length() -1) { 
                    return getCacheLink().substring(lastSlashIndex + 1);
            } else {
                    System.err.println("error retreiving archivaed name.");
            }
            return "";
    }



    private void unZip() {

        try {
                InputStream in = 
                new BufferedInputStream(new FileInputStream(fileToExtract));
            ZipInputStream zin = new ZipInputStream(in);
            ZipEntry e;

            while((e=zin.getNextEntry()) != null) {

                           if(e.isDirectory()) {
                    (new File(getCacheDir() + e.getName())).mkdir();
                           } else {

                if (e.getName().equals(fileToExtract)) {
                    unzip(zin, fileToExtract);
                    break;
                }
                           unzip(zin, getCacheDir() + e.getName());
                }
                System.out.println("unzipping2 " + e.getName());
            }
            zin.close();

        } catch(Exception e) {
            e.printStackTrace();
        }
    }

    private void unzip(ZipInputStream zin, String s) 
            throws IOException {

            FileOutputStream out = new FileOutputStream(s);
            //System.out.println("unzipping " + s);
            byte [] b = new byte[BUFFER];
            int len = 0;

            while ((len = zin.read(b)) != -1) {
                    out.write(b,0,len);
            }
            out.close();
    }
</code></pre>
<p>}[/code]</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-cache-downloader/523852/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-cache-downloader/523852/8</link>
        <pubDate>Thu, 04 Jul 2013 01:46:40 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-523852-8</guid>
        <source url="https://forum.moparisthebest.com/t/pi-cache-downloader/523852.rss">[PI] Cache Downloader</source>
      </item>
      <item>
        <title>[PI] Cache Downloader</title>
        <dc:creator><![CDATA[@Vain1 Vain_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/vain1">@Vain1</a> wrote:</p>
          <blockquote>
              <p>post your cache downloader class</p>
<p>[quote=“Mikeyzzz, post:5, topic:523852”][quote author=Jayden. link=topic=642397.msg4325849#msg4325849 date=1372901885]<br>
It doesn’t unzip, after the cache downloads all it says is “Error Please Report”.<br>
[/quote]is it a .rar or .zip, I’m having the exact same error at the moment and mine was .rar, I’m uploading .zip atm, I’ll see if that makes a difference.[/quote]yes it makes a huge difference. it doesnt unzip rar-packed archives. different formats :fp:</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-cache-downloader/523852/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-cache-downloader/523852/7</link>
        <pubDate>Thu, 04 Jul 2013 01:45:15 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-523852-7</guid>
        <source url="https://forum.moparisthebest.com/t/pi-cache-downloader/523852.rss">[PI] Cache Downloader</source>
      </item>
      <item>
        <title>[PI] Cache Downloader</title>
        <dc:creator><![CDATA[@Jayden2 Jayden.]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/jayden2">@Jayden2</a> wrote:</p>
          <blockquote>
              <p>Mine was .zip</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-cache-downloader/523852/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-cache-downloader/523852/6</link>
        <pubDate>Thu, 04 Jul 2013 01:45:04 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-523852-6</guid>
        <source url="https://forum.moparisthebest.com/t/pi-cache-downloader/523852.rss">[PI] Cache Downloader</source>
      </item>
      <item>
        <title>[PI] Cache Downloader</title>
        <dc:creator><![CDATA[@Mikeyzzz Mikeyzzz]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/mikeyzzz">@Mikeyzzz</a> wrote:</p>
          <blockquote>
              <p>[quote=“Jayden., post:4, topic:523852”]It doesn’t unzip, after the cache downloads all it says is “Error Please Report”.[/quote]is it a .rar or .zip, I’m having the exact same error at the moment and mine was .rar, I’m uploading .zip atm, I’ll see if that makes a difference.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-cache-downloader/523852/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-cache-downloader/523852/5</link>
        <pubDate>Thu, 04 Jul 2013 01:41:49 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-523852-5</guid>
        <source url="https://forum.moparisthebest.com/t/pi-cache-downloader/523852.rss">[PI] Cache Downloader</source>
      </item>
      <item>
        <title>[PI] Cache Downloader</title>
        <dc:creator><![CDATA[@Jayden2 Jayden.]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/jayden2">@Jayden2</a> wrote:</p>
          <blockquote>
              <p>It doesn’t unzip, after the cache downloads all it says is “Error Please Report”.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-cache-downloader/523852/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-cache-downloader/523852/4</link>
        <pubDate>Thu, 04 Jul 2013 01:38:05 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-523852-4</guid>
        <source url="https://forum.moparisthebest.com/t/pi-cache-downloader/523852.rss">[PI] Cache Downloader</source>
      </item>
      <item>
        <title>[PI] Cache Downloader</title>
        <dc:creator><![CDATA[@Mikeyzzz Mikeyzzz]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/mikeyzzz">@Mikeyzzz</a> wrote:</p>
          <blockquote>
              <p>[quote=“Jayden., post:1, topic:523852”]I’m pretty sure this is my first help thread, if not second - first one is probably same issue.</p>
<p>I’m having problems with cache downloader. <span class="bbcode-u"><span class="bbcode-s"><span class="bbcode-s"><span class="bbcode-s"><span class="bbcode-s"><span class="bbcode-s">I’m willing to pay $1 to anyone who can fix it.</span></span></span></span></span></span></p>
<p>If you are able to do so, could you please add my skype: jaydenrsps[/quote]</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-cache-downloader/523852/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-cache-downloader/523852/3</link>
        <pubDate>Thu, 04 Jul 2013 01:29:04 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-523852-3</guid>
        <source url="https://forum.moparisthebest.com/t/pi-cache-downloader/523852.rss">[PI] Cache Downloader</source>
      </item>
  </channel>
</rss>
