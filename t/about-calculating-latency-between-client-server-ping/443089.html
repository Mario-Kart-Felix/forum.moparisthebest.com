<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/about-calculating-latency-between-client-server-ping/443089 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Aug 2019 08:02:26 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>About calculating latency between client &amp; server(ping) - Runescape - moparisthebest.com</title>
    <meta name="description" content="I&amp;#39;ve tried to make client display the latency between server and client several times, but they all showed it way wrong. 

What I tried was simply just sending the time when ping was sent to the client, and then calculat&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="443089.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;About calculating latency between client &amp; server(ping)&#39;" href="443089.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/about-calculating-latency-between-client-server-ping/443089" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/about-calculating-latency-between-client-server-ping/443089" />
<meta property="og:title" content="About calculating latency between client &amp; server(ping)" />
<meta name="twitter:title" content="About calculating latency between client &amp; server(ping)" />
<meta property="og:description" content="I’ve tried to make client display the latency between server and client several times, but they all showed it way wrong.  What I tried was simply just sending the time when ping was sent to the client, and then calculate the difference between the ping sent and ping received on client.  Any advice?" />
<meta name="twitter:description" content="I’ve tried to make client display the latency between server and client several times, but they all showed it way wrong.  What I tried was simply just sending the time when ping was sent to the client, and then calculate the difference between the ping sent and ping received on client.  Any advice?" />
<meta property="article:published_time" content="2012-05-25T13:23:46+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="443089.html">About calculating latency between client &amp; server(ping)</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Nothing1.html'><span itemprop='name'>Nothing1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-05-25T13:23:46Z'>
            <time itemprop='dateModified' datetime='2016-08-03T02:50:32Z' class='post-time'>
              August 3, 2016,  2:50am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I’ve tried to make client display the latency between server and client several times, but they all showed it way wrong.</p>
<p>What I tried was simply just sending the time when ping was sent to the client, and then calculate the difference between the ping sent and ping received on client.</p>
<p>Any advice?</p>
      </div>

      <meta itemprop='headline' content='About calculating latency between client &amp; server(ping)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/CodeForFame.html'><span itemprop='name'>CodeForFame</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-05-25T13:55:41Z'>
            <time itemprop='dateModified' datetime='2016-08-03T02:50:32Z' class='post-time'>
              August 3, 2016,  2:50am
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote="-Nothing, post:1, topic:443089"]I’ve tried to make client display the latency between server and client several times, but they all showed it way wrong.</p>
<p>What I tried was simply just sending the time when ping was sent to the client, and then calculate the difference between the ping sent and ping received on client.</p>
<p>Any advice?[/quote]Process it immediately.</p>
      </div>

      <meta itemprop='headline' content='About calculating latency between client &amp; server(ping)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Nothing1.html'><span itemprop='name'>Nothing1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-05-25T18:50:58Z'>
            <time itemprop='dateModified' datetime='2016-08-03T02:50:42Z' class='post-time'>
              August 3, 2016,  2:50am
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I’m currently sending it just like the other packets, oh and usually it’s a negative number that client shows.</p>
      </div>

      <meta itemprop='headline' content='About calculating latency between client &amp; server(ping)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/CodeForFame.html'><span itemprop='name'>CodeForFame</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-05-25T20:11:22Z'>
            <time itemprop='dateModified' datetime='2016-08-03T02:50:44Z' class='post-time'>
              August 3, 2016,  2:50am
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote="-Nothing, post:3, topic:443089"]I’m currently sending it just like the other packets, oh and usually it’s a negative number that client shows.[/quote]You must be doing initial - final…</p>
      </div>

      <meta itemprop='headline' content='About calculating latency between client &amp; server(ping)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Nothing1.html'><span itemprop='name'>Nothing1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-05-25T22:12:34Z'>
            <time itemprop='dateModified' datetime='2016-08-03T02:50:48Z' class='post-time'>
              August 3, 2016,  2:50am
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“CodeForFame, post:4, topic:443089”][quote author=-Nothing link=topic=545778.msg4000835#msg4000835 date=1337971858]<br>
I’m currently sending it just like the other packets, oh and usually it’s a negative number that client shows.<br>
[/quote]You must be doing initial - final…[/quote]<br>
No matter how I do it, it always end up wrong. Either negative or just thousands of milliseconds off.</p>
      </div>

      <meta itemprop='headline' content='About calculating latency between client &amp; server(ping)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/CodeForFame.html'><span itemprop='name'>CodeForFame</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-05-25T23:11:25Z'>
            <time itemprop='dateModified' datetime='2016-08-03T02:50:50Z' class='post-time'>
              August 3, 2016,  2:50am
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote="-Nothing, post:5, topic:443089"][quote author=CodeForFame link=topic=545778.msg4000869#msg4000869 date=1337976682]</p>
<aside class="quote">
<blockquote>
<p>I’m currently sending it just like the other packets, oh and usually it’s a negative number that client shows.<br>
[/quote]You must be doing initial - final…</p>
</blockquote>
</aside>
<p>No matter how I do it, it always end up wrong. Either negative or just thousands of milliseconds off.[/quote]Because you’re not processing it immediately on both ends…</p>
      </div>

      <meta itemprop='headline' content='About calculating latency between client &amp; server(ping)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Not_a_bot.html'><span itemprop='name'>Not_a_bot</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-05-26T00:32:02Z'>
            <time itemprop='dateModified' datetime='2016-08-03T02:50:53Z' class='post-time'>
              August 3, 2016,  2:50am
            </time>
        <span itemprop='position'>#7</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>If you’re using your typical RSCD source, it is more than likely queued to process as quickly as o(N). Regardless, unless your processing them asynchronously without delay, it won’t ever be accurate to calculate.</p>
      </div>

      <meta itemprop='headline' content='About calculating latency between client &amp; server(ping)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Kryptix.html'><span itemprop='name'>Kryptix</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-05-26T03:23:54Z'>
            <time itemprop='dateModified' datetime='2016-08-03T02:51:04Z' class='post-time'>
              August 3, 2016,  2:51am
            </time>
        <span itemprop='position'>#8</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote quote-modified" data-post="7" data-topic="443089">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/not_a_bot/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> Not_a_bot:</div>
<blockquote>
<p>If you’re using your typical RSCD source, it is more than likely queued to process as quickly as o(N). Regardless, unless your processing them asynchronously without delay, it won’t ever be accurate to calculate.</p>
</blockquote>
</aside>
      </div>

      <meta itemprop='headline' content='About calculating latency between client &amp; server(ping)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/silabsoft.html'><span itemprop='name'>silabsoft</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-05-26T03:45:14Z'>
            <time itemprop='dateModified' datetime='2016-08-03T02:51:05Z' class='post-time'>
              August 3, 2016,  2:51am
            </time>
        <span itemprop='position'>#9</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>why are you sending the time?</p>
<p>long sentOn - System.currentTimeMillis()<br>
//send custom packet id here</p>
<p>//server receives packet id and sends reply</p>
<p>//on reply</p>
<p>long received =System.currentTimeMillis() - sentOn</p>
      </div>

      <meta itemprop='headline' content='About calculating latency between client &amp; server(ping)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Kryptix.html'><span itemprop='name'>Kryptix</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-05-26T03:47:14Z'>
            <time itemprop='dateModified' datetime='2016-08-03T02:51:05Z' class='post-time'>
              August 3, 2016,  2:51am
            </time>
        <span itemprop='position'>#10</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“mopman_sucks, post:9, topic:443089”]why are you sending the time?</p>
<p>long sentOn - System.currentTimeMillis()<br>
//send custom packet id here</p>
<p>//server receives packet id and sends reply</p>
<p>//on reply</p>
<p>long received =System.currentTimeMillis() - sentOn[/quote]<br>
He understands that but on RSCD packets are queued.</p>
      </div>

      <meta itemprop='headline' content='About calculating latency between client &amp; server(ping)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Nothing1.html'><span itemprop='name'>Nothing1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-05-26T08:27:49Z'>
            <time itemprop='dateModified' datetime='2016-08-03T02:51:08Z' class='post-time'>
              August 3, 2016,  2:51am
            </time>
        <span itemprop='position'>#11</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Why are they even queued btw? Why not just send them right away?</p>
<p>I made client and server process the latency packet immediatly, however, the result that I got is 17426, if you take 2 numbers out from the end, it would be somewhat correct.</p>
<p>Here’s what I did:<br>
Server:</p>
<pre><code class="lang-auto">		long sent = System.currentTimeMillis();
		Player player = (Player) session.getAttachment();
		RSCPacketBuilder s = new RSCPacketBuilder();
		s.setID(224);
		s.addLong(sent);
		player.getSession().write(s.toPacket());</code></pre>
<p>Client:</p>
<pre><code class="lang-auto">        if(command == 224) {
        	long timeSent = DataOperations.getLong(packetData, 1);
        	latency = (int) (System.currentTimeMillis() - timeSent);
        	return;
        }</code></pre>
      </div>

      <meta itemprop='headline' content='About calculating latency between client &amp; server(ping)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/CodeForFame.html'><span itemprop='name'>CodeForFame</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-05-26T15:17:03Z'>
            <time itemprop='dateModified' datetime='2016-08-03T02:51:18Z' class='post-time'>
              August 3, 2016,  2:51am
            </time>
        <span itemprop='position'>#13</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote="-Nothing, post:11, topic:443089"]Why are they even queued btw? Why not just send them right away?</p>
<p>I made client and server process the latency packet immediatly, however, the result that I got is 17426, if you take 2 numbers out from the end, it would be somewhat correct.</p>
<p>Here’s what I did:<br>
Server:</p>
<pre><code class="lang-auto">		long sent = System.currentTimeMillis();
		Player player = (Player) session.getAttachment();
		RSCPacketBuilder s = new RSCPacketBuilder();
		s.setID(224);
		s.addLong(sent);
		player.getSession().write(s.toPacket());</code></pre>
<p>Client:</p>
<p><code>
        if(command == 224) {
        	long timeSent = DataOperations.getLong(packetData, 1);
        	latency = (int) (System.currentTimeMillis() - timeSent);
        	return;
        }
</code>[/quote]Why are you comparing times on two different machines?</p>
      </div>

      <meta itemprop='headline' content='About calculating latency between client &amp; server(ping)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Nothing1.html'><span itemprop='name'>Nothing1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-05-26T17:44:41Z'>
            <time itemprop='dateModified' datetime='2016-08-03T02:51:22Z' class='post-time'>
              August 3, 2016,  2:51am
            </time>
        <span itemprop='position'>#14</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Oh yeah right… Thanks hah. I kept wondering why it had to go ‘server-&gt;client-&gt;server’ but now I understand.</p>
<p>EDIT: I got it working; A ping of 500ms is normal on a RSC server I think…</p>
<p>Here’s what I did:</p>
<pre><code class="lang-auto">	public void pingSent() {
		ping = System.currentTimeMillis();
	}
	public void pongReceived() {
		pong = System.currentTimeMillis();
	}
	public int getLatency() {
		return (int) (pong - ping);
	}</code></pre>
<p>I sent a packet to client and save time as ‘ping’, then the client sends packet right away back and then record the time as ‘pong’.</p>
<p>Do games usually show the whole round trip latency, or just the client-&gt;server latency?</p>
      </div>

      <meta itemprop='headline' content='About calculating latency between client &amp; server(ping)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="2" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/imthenull.html'><span itemprop='name'>imthenull</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-05-26T21:36:28Z'>
            <time itemprop='dateModified' datetime='2016-08-03T02:51:30Z' class='post-time'>
              August 3, 2016,  2:51am
            </time>
        <span itemprop='position'>#16</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>why would you calculate latency server sided?</p>
<p>i did it client sided. when the ping packet was sent, i got the local time in the client, and when the server got the ping, i sent a packet to the client notifying them we got it. from there just subtracted the two times</p>
      </div>

      <meta itemprop='headline' content='About calculating latency between client &amp; server(ping)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/imthenull.html'><span itemprop='name'>imthenull</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-05-26T21:55:05Z'>
            <time itemprop='dateModified' datetime='2016-08-03T02:51:30Z' class='post-time'>
              August 3, 2016,  2:51am
            </time>
        <span itemprop='position'>#18</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“RLN, post:17, topic:443089”][quote author=imthenull link=topic=545778.msg4001472#msg4001472 date=1338068188]<br>
why would you calculate latency server sided?</p>
<p>i did it client sided. when the ping packet was sent, i got the local time in the client, and when the server got the ping, i sent a packet to the client notifying them we got it. from there just subtracted the two times<br>
[/quote]The problem with this being that it’s not as easy to get an accurate metric since you’re calculating it only once per ping. If you timestamp the packet and give it some identifier, you can potentially get a larger sample size.[/quote]<br>
Oh, i see.</p>
      </div>

      <meta itemprop='headline' content='About calculating latency between client &amp; server(ping)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Nothing1.html'><span itemprop='name'>Nothing1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-05-27T10:38:53Z'>
            <time itemprop='dateModified' datetime='2016-08-03T02:51:50Z' class='post-time'>
              August 3, 2016,  2:51am
            </time>
        <span itemprop='position'>#19</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“imthenull, post:16, topic:443089”]why would you calculate latency server sided?</p>
<p>i did it client sided. when the ping packet was sent, i got the local time in the client, and when the server got the ping, i sent a packet to the client notifying them we got it. from there just subtracted the two times[/quote]<br>
I wanted to do it serverside so I could monitor my players latencies, and if I make some major changes to gamecore/networking I know the effects of it.</p>
<p>I first thought of making it clientsided, but ended up writing it like this.</p>
<p>I still need answer to this question:</p>
<aside class="quote" data-post="14" data-topic="443089">
<div class="title">
<div class="quote-controls"></div>
 -Nothing:</div>
<blockquote>
<p>Do games usually show the whole round trip latency, or just the client-&gt;server latency?</p>
</blockquote>
</aside>
      </div>

      <meta itemprop='headline' content='About calculating latency between client &amp; server(ping)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Rodgerwilco.html'><span itemprop='name'>Rodgerwilco</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-05-27T16:12:32Z'>
            <time itemprop='dateModified' datetime='2016-08-03T02:51:56Z' class='post-time'>
              August 3, 2016,  2:51am
            </time>
        <span itemprop='position'>#20</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="14" data-topic="443089">
<div class="title">
<div class="quote-controls"></div>
 -Nothing:</div>
<blockquote>
<p>Do games usually show the whole round trip latency, or just the client-&gt;server latency?</p>
</blockquote>
</aside>
<p>Just the single trip.</p>
      </div>

      <meta itemprop='headline' content='About calculating latency between client &amp; server(ping)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Nothing1.html'><span itemprop='name'>Nothing1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-05-27T16:44:43Z'>
            <time itemprop='dateModified' datetime='2016-08-03T02:51:56Z' class='post-time'>
              August 3, 2016,  2:51am
            </time>
        <span itemprop='position'>#21</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Rodgerwilco, post:20, topic:443089”][quote author=-Nothing link=topic=545778.msg4001335#msg4001335 date=1338054281]<br>
Do games usually show the whole round trip latency, or just the client-&gt;server latency?<br>
[/quote]</p>
<p>Just the single trip.[/quote]<br>
So client-&gt;server. thx</p>
      </div>

      <meta itemprop='headline' content='About calculating latency between client &amp; server(ping)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Rodgerwilco.html'><span itemprop='name'>Rodgerwilco</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-05-28T07:00:41Z'>
            <time itemprop='dateModified' datetime='2016-08-03T02:52:37Z' class='post-time'>
              August 3, 2016,  2:52am
            </time>
        <span itemprop='position'>#23</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“RLN, post:22, topic:443089”][quote author=Rodgerwilco link=topic=545778.msg4001860#msg4001860 date=1338135152]</p>
<aside class="quote">
<blockquote>
<p>Do games usually show the whole round trip latency, or just the client-&gt;server latency?</p>
</blockquote>
</aside>
<p>Just the single trip.<br>
[/quote]Lol, what do you base that off?[/quote]</p>
<p>My research with blizzard and their rts games.</p>
      </div>

      <meta itemprop='headline' content='About calculating latency between client &amp; server(ping)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/about-calculating-latency-between-client-server-ping/443089 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Aug 2019 08:02:27 GMT -->
</html>
