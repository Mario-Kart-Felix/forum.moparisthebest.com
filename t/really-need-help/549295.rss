<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Really need help</title>
    <link>https://forum.moparisthebest.com/t/really-need-help/549295</link>
    <description>java.lang.NullPointerException
at com.visionary.Server.getProperty(Server.java:152)
at com.visionary.Server$2.execute(Server.java:306)
at com.visionary.task.Task.tick(Task.java:258)
at com.visionary.task.TaskScheduler.run(TaskScheduler .java:88)
at java.util.concurrent.Executors$RunnableAdapter.cal l(Unknown Source)
at java.util.concurrent.FutureTask.runAndReset(Unknow n Source)
at java.util.concurrent.ScheduledThreadPoolExecutor$S cheduledFutureTask.access$301(Unknown Source)
at java.util.concurrent.ScheduledThreadPoolExecutor$S cheduledFutureTask.run(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor.runWorker( Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run (Unknown Source)
at java.lang.Thread.run(Unknown Source)


WHY IS THIS HAPPENING? AND HOW CAN I FIX IT? :/ because it crashes the server :/</description>
    
    <lastBuildDate>Wed, 21 Jan 2015 00:17:14 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/really-need-help/549295.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Really need help</title>
        <dc:creator><![CDATA[@whattehp406 whattehp406]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/whattehp406">@whattehp406</a> wrote:</p>
          <blockquote>
              <p>[quote=“kobra828, post:15, topic:549295”][quote author=whattehp406 link=topic=668197.msg4468835#msg4468835 date=1421796489]<br>
if (value == null) {<br>
return;<br>
}<br>
[/quote]</p>
<p>where do i put this?[/quote]Oh ignore me, for some reason i only saw the “how to add null check” and not the rest of the thread. There seems to already be a nullcheck</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/really-need-help/549295/16">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/really-need-help/549295/16</link>
        <pubDate>Wed, 21 Jan 2015 00:17:14 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549295-16</guid>
        <source url="https://forum.moparisthebest.com/t/really-need-help/549295.rss">Really need help</source>
      </item>
      <item>
        <title>Really need help</title>
        <dc:creator><![CDATA[@kobra828 kobra828]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/kobra828">@kobra828</a> wrote:</p>
          <blockquote>
              <p>[quote=“whattehp406, post:14, topic:549295”]if (value == null) {<br>
return;<br>
}[/quote]</p>
<p>where do i put this?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/really-need-help/549295/15">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/really-need-help/549295/15</link>
        <pubDate>Wed, 21 Jan 2015 00:08:15 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549295-15</guid>
        <source url="https://forum.moparisthebest.com/t/really-need-help/549295.rss">Really need help</source>
      </item>
      <item>
        <title>Really need help</title>
        <dc:creator><![CDATA[@whattehp406 whattehp406]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/whattehp406">@whattehp406</a> wrote:</p>
          <blockquote>
              <p>if (value == null) {<br>
return;<br>
}</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/really-need-help/549295/14">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/really-need-help/549295/14</link>
        <pubDate>Tue, 20 Jan 2015 23:28:09 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549295-14</guid>
        <source url="https://forum.moparisthebest.com/t/really-need-help/549295.rss">Really need help</source>
      </item>
      <item>
        <title>Really need help</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <p>Expected begin array, essentially means it was expecting a list of items, but it didn’t get that…</p>
<p>You can go in the JSON file you edited and change the “[” to “{” and “]” to “}”.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/really-need-help/549295/13">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/really-need-help/549295/13</link>
        <pubDate>Tue, 20 Jan 2015 20:42:43 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549295-13</guid>
        <source url="https://forum.moparisthebest.com/t/really-need-help/549295.rss">Really need help</source>
      </item>
      <item>
        <title>Really need help</title>
        <dc:creator><![CDATA[@kobra828 kobra828]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/kobra828">@kobra828</a> wrote:</p>
          <blockquote>
              <p>[quote=“sk8rdude461, post:11, topic:549295”][quote author=kobra828 link=topic=668197.msg4468804#msg4468804 date=1421784818]</p>
<aside class="quote">
<blockquote>
<p>You need to find the file and change a value to a number. What is so hard to comprehend with that…</p>
<p>Look for the file "global-vars.json"<br>
And then, in the file, look for “sv_tcon_verbose”</p>
<p>It will probably look like this:</p>
<p><code>
"sv_tcon_verbose":0,</code><br>
Or close to it…<br>
You need to make sure the value after the semicolon is a number, or a number encapsulated in a string… So “0” would be valid…</p>
<p>The value <span class="bbcode-b">CANNOT</span> be empty.</p>
</blockquote>
</aside>
<p>i found the file, opened it and inside it was only 1 line which says ‘null’ and nothing else? so what should i type there?<br>
[/quote]<br>
If the file only had one line that said null, that would <em>probably</em> be why nothing is working correctly.</p>
<p>I can’t tell you <span class="bbcode-i">everything</span> that needs to be in the file (because some methods can be accessed outside of the class…), But I can tell you that you need <span class="bbcode-b">at least</span> the following:</p>
<p><code>[
"sv_tcon_verbose":"0"
]
</code></p>
<p><span class="bbcode-b">If you add another value into the file, you must add a comma at the end of the line.</span><br>
Example:</p>
<p><code>[
"sv_tcon_verbose":"0",
"another_variable":"0"
]
</code>[/quote]</p>
<p>Exception in thread “main” com.google.gson.JsonSyntaxException: java.lang.IllegalStateException: Expected BEGIN_ARRAY but was STRING at line 2 column 2 path $[0]<br>
at com.google.gson.Gson.fromJson(Gson.java:822)<br>
at com.google.gson.Gson.fromJson(Gson.java:775)<br>
at com.visionary.Server.fetchProperties(Server.java:121)<br>
at com.visionary.Server.main(Server.java:214)<br>
Caused by: java.lang.IllegalStateException: Expected BEGIN_ARRAY but was STRING at line 2 column 2 path $[0]<br>
at com.google.gson.stream.JsonReader.beginArray(JsonReader.java:350)<br>
at com.google.gson.internal.bind.MapTypeAdapterFactory$Adapter.read(MapTypeAdapterFactory.java:172)<br>
at com.google.gson.internal.bind.MapTypeAdapterFactory$Adapter.read(MapTypeAdapterFactory.java:145)<br>
at com.google.gson.Gson.fromJson(Gson.java:810)<br>
… 3 more</p>
<p>now i get this error? maybe you know why? because it dont even let me run the server now <img src="https://forum.moparisthebest.com/images/emoji/twitter/confused.png?v=5" title=":confused:" class="emoji" alt=":confused:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/really-need-help/549295/12">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/really-need-help/549295/12</link>
        <pubDate>Tue, 20 Jan 2015 20:35:05 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549295-12</guid>
        <source url="https://forum.moparisthebest.com/t/really-need-help/549295.rss">Really need help</source>
      </item>
      <item>
        <title>Really need help</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <p>[quote=“kobra828, post:10, topic:549295”][quote author=sk8rdude461 link=topic=668197.msg4468803#msg4468803 date=1421784618]<br>
You need to find the file and change a value to a number. What is so hard to comprehend with that…</p>
<p>Look for the file "global-vars.json"<br>
And then, in the file, look for “sv_tcon_verbose”</p>
<p>It will probably look like this:</p>
<pre><code class="lang-auto">"sv_tcon_verbose":0,[/code]
Or close to it...
You need to make sure the value after the semicolon is a number, or a number encapsulated in a string... So "0" would be valid...

The value [b]CANNOT[/b] be empty.
[/quote]

i found the file, opened it and inside it was only 1 line which says 'null' and nothing else? so what should i type there?[/quote]
If the file only had one line that said null, that would *probably* be why nothing is working correctly.

I can't tell you [i]everything[/i] that needs to be in the file (because some methods can be accessed outside of the class...), But I can tell you that you need [b]at least[/b] the following:

[code=JSON][
"sv_tcon_verbose":"0"
]</code></pre>
<p><span class="bbcode-b">If you add another value into the file, you must add a comma at the end of the line.</span><br>
Example:</p>
<p><code>[
"sv_tcon_verbose":"0",
"another_variable":"0"
]
</code></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/really-need-help/549295/11">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/really-need-help/549295/11</link>
        <pubDate>Tue, 20 Jan 2015 20:26:55 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549295-11</guid>
        <source url="https://forum.moparisthebest.com/t/really-need-help/549295.rss">Really need help</source>
      </item>
      <item>
        <title>Really need help</title>
        <dc:creator><![CDATA[@kobra828 kobra828]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/kobra828">@kobra828</a> wrote:</p>
          <blockquote>
              <p>[quote=“sk8rdude461, post:9, topic:549295”]You need to find the file and change a value to a number. What is so hard to comprehend with that…</p>
<p>Look for the file "global-vars.json"<br>
And then, in the file, look for “sv_tcon_verbose”</p>
<p>It will probably look like this:</p>
<p><code>
"sv_tcon_verbose":0,</code><br>
Or close to it…<br>
You need to make sure the value after the semicolon is a number, or a number encapsulated in a string… So “0” would be valid…</p>
<p>The value <span class="bbcode-b">CANNOT</span> be empty.[/quote]</p>
<p>i found the file, opened it and inside it was only 1 line which says ‘null’ and nothing else? so what should i type there?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/really-need-help/549295/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/really-need-help/549295/10</link>
        <pubDate>Tue, 20 Jan 2015 20:13:38 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549295-10</guid>
        <source url="https://forum.moparisthebest.com/t/really-need-help/549295.rss">Really need help</source>
      </item>
      <item>
        <title>Really need help</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <p>You need to find the file and change a value to a number. What is so hard to comprehend with that…</p>
<p>Look for the file "global-vars.json"<br>
And then, in the file, look for “sv_tcon_verbose”</p>
<p>It will probably look like this:</p>
<p><code>
"sv_tcon_verbose":0,</code><br>
Or close to it…<br>
You need to make sure the value after the semicolon is a number, or a number encapsulated in a string… So “0” would be valid…</p>
<p>The value <span class="bbcode-b">CANNOT</span> be empty.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/really-need-help/549295/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/really-need-help/549295/9</link>
        <pubDate>Tue, 20 Jan 2015 20:10:18 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549295-9</guid>
        <source url="https://forum.moparisthebest.com/t/really-need-help/549295.rss">Really need help</source>
      </item>
      <item>
        <title>Really need help</title>
        <dc:creator><![CDATA[@kobra828 kobra828]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/kobra828">@kobra828</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="7" data-topic="549295">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/coldmedicine/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> Coldmedicine:</div>
<blockquote>
<p>If you want to play with friends, why not play a server thats actually up?</p>
</blockquote>
</aside>
<p>well because i found this server i like and just wanna play and later on maybe code this server when i start learning java. And this error is annoying because i log in and after like 2 minutes server crashes…</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/really-need-help/549295/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/really-need-help/549295/8</link>
        <pubDate>Tue, 20 Jan 2015 19:38:00 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549295-8</guid>
        <source url="https://forum.moparisthebest.com/t/really-need-help/549295.rss">Really need help</source>
      </item>
      <item>
        <title>Really need help</title>
        <dc:creator><![CDATA[@Coldmedicine Coldmedicine]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/coldmedicine">@Coldmedicine</a> wrote:</p>
          <blockquote>
              <p>If you want to play with friends, why not play a server thats actually up?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/really-need-help/549295/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/really-need-help/549295/7</link>
        <pubDate>Tue, 20 Jan 2015 19:36:02 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549295-7</guid>
        <source url="https://forum.moparisthebest.com/t/really-need-help/549295.rss">Really need help</source>
      </item>
      <item>
        <title>Really need help</title>
        <dc:creator><![CDATA[@kobra828 kobra828]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/kobra828">@kobra828</a> wrote:</p>
          <blockquote>
              <p>[quote=“sk8rdude461, post:5, topic:549295”]Okay. Well looking at the code, it looks like the <span class="bbcode-b">String</span> “sv_tcon_verbose” is null in your properties file…<br>
“global-vars.json” is the file, I don’t know where exactly it’s saved, you can find out by looking in StoreUtils.getDirectory(“global”)</p>
<p>Wherever that global directory is, will be where global-vars.json is. And you need to make sure the value for “sv_tcon_verbose” is a number.[/quote]</p>
<p>would you help me on teamviever please? im new to this i dont understand nothing <img src="https://forum.moparisthebest.com/images/emoji/twitter/confused.png?v=5" title=":confused:" class="emoji" alt=":confused:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/really-need-help/549295/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/really-need-help/549295/6</link>
        <pubDate>Tue, 20 Jan 2015 19:28:28 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549295-6</guid>
        <source url="https://forum.moparisthebest.com/t/really-need-help/549295.rss">Really need help</source>
      </item>
      <item>
        <title>Really need help</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <p>Okay. Well looking at the code, it looks like the <span class="bbcode-b">String</span> “sv_tcon_verbose” is null in your properties file…<br>
“global-vars.json” is the file, I don’t know where exactly it’s saved, you can find out by looking in StoreUtils.getDirectory(“global”)</p>
<p>Wherever that global directory is, will be where global-vars.json is. And you need to make sure the value for “sv_tcon_verbose” is a number.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/really-need-help/549295/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/really-need-help/549295/5</link>
        <pubDate>Tue, 20 Jan 2015 19:19:12 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549295-5</guid>
        <source url="https://forum.moparisthebest.com/t/really-need-help/549295.rss">Really need help</source>
      </item>
      <item>
        <title>Really need help</title>
        <dc:creator><![CDATA[@kobra828 kobra828]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/kobra828">@kobra828</a> wrote:</p>
          <blockquote>
              <p>[quote=“sk8rdude461, post:3, topic:549295”]First off, calm the hell down.</p>
<p>Second off, we need to see some code to help you with your error.</p>
<p>What does the Server.java file look like?[/quote]</p>
<p>i am calm just annoyed wanna play with friends but it crashes <img src="https://forum.moparisthebest.com/images/emoji/twitter/confused.png?v=5" title=":confused:" class="emoji" alt=":confused:"></p>
<p>package com.visionary;</p>
<p>import java.io.File;<br>
import java.io.FileNotFoundException;<br>
import java.io.FileReader;<br>
import java.io.FileWriter;<br>
import java.io.IOException;<br>
import java.net.BindException;<br>
import java.net.InetSocketAddress;<br>
import java.util.ArrayList;<br>
import java.util.HashMap;<br>
import java.util.List;<br>
import java.util.Map;<br>
import java.util.Random;</p>
<p>import org.apache.mina.transport.socket.nio.SocketAcceptor;<br>
import org.apache.mina.transport.socket.nio.SocketAcceptorConfig;</p>
<p>import com.google.gson.Gson;<br>
import com.google.gson.GsonBuilder;<br>
import com.google.gson.reflect.TypeToken;<br>
import com.visionary.definition.ItemDefinition;<br>
import com.visionary.definition.LevelRequirement;<br>
import com.visionary.definition.MobDefinition;<br>
import com.visionary.entity.item.GlobalDropsHandler;<br>
import com.visionary.entity.item.GroundItemManager;<br>
import com.visionary.entity.mob.MobManager;<br>
import com.visionary.entity.player.Player;<br>
import com.visionary.entity.player.PlayerManager;<br>
import com.visionary.entity.player.activity.PestControl;<br>
import com.visionary.entity.player.activity.fightpits.FightPits;<br>
import com.visionary.entity.player.activity.zombies.Zombies;<br>
import com.visionary.entity.player.friendschat.FriendschatProvider;<br>
import com.visionary.entity.player.friendschat.MySQLFriendschatProvider;<br>
import com.visionary.entity.player.save.PlayerSaver;<br>
import com.visionary.entity.player.save.StoreUtils;<br>
import com.visionary.net.ConnectionHandler;<br>
import com.visionary.net.ConnectionThrottleFilter;<br>
import com.visionary.net.HostAddressInformation;<br>
import com.visionary.task.FilterExecutable;<br>
import com.visionary.task.Task;<br>
import com.visionary.task.TaskScheduler;<br>
import com.visionary.util.CharacterFileBackup;<br>
import com.visionary.util.Utils;<br>
import com.visionary.util.XStreamLibrary;<br>
import com.visionary.util.logging.SystemLogger;<br>
import com.visionary.util.mysql.ExternalDatabase;<br>
import com.visionary.world.ObjectHandler;<br>
import com.visionary.world.ObjectManager;<br>
import com.visionary.world.content.bountyhunter.BountyHunterTick;<br>
import com.visionary.world.content.lottery.LotteryManager;<br>
import com.visionary.world.content.minigames.prophunt.PropHuntLobby;<br>
import com.visionary.world.content.skill.hunter.Hunter;<br>
import com.visionary.world.content.skill.hunter.TrapProcessor;<br>
import com.visionary.world.content.skill.hunter.impl.ImplingGenerator;<br>
import com.visionary.world.map.MapLoading;<br>
import com.visionary.world.map.MapRegion;<br>
import com.visionary.world.map.ObjectAlternates;<br>
import com.visionary.world.map.ObjectDef;<br>
import com.visionary.world.shop.ShopHandler;<br>
import com.visionary.world.shop.StockHandlingTask;</p>
<p>/**</p>
<ul>
<li>
<p>Represents the game server and provide singleton objects.</p>
</li>
<li>
</li>
<li>
<p><span class="mention">@author</span> Tringan<br>
*/<br>
public final class Server<br>
{</p>
<p>public static ExternalDatabase database;<br>
private static FriendschatProvider friendschatProvider = new MySQLFriendschatProvider();<br>
public static GroundItemManager itemManager;<br>
public static MobManager mobManager;<br>
public static final ObjectHandler objectHandler = new ObjectHandler();<br>
public static final ObjectManager objectManager = new ObjectManager();<br>
private static final PestControl pestControl = new PestControl();<br>
public static final PlayerManager playerManager = new PlayerManager();<br>
public static boolean serverUpdate = false;<br>
private static final TaskScheduler taskScheduler = new TaskScheduler();<br>
private static Map&lt;String, Integer&gt; properties;</p>
<p>private static void bind(int port)<br>
{<br>
try<br>
{<br>
SocketAcceptor acceptor = new SocketAcceptor();<br>
ConnectionHandler connectionHandler = new ConnectionHandler();</p>
<pre><code> 	SocketAcceptorConfig config = new SocketAcceptorConfig();
 	config.getSessionConfig().setTcpNoDelay(false);
 	config.setReuseAddress(true);
 	config.setBacklog(100);

 	ConnectionThrottleFilter throttleFilter = new ConnectionThrottleFilter(Constants.CONNECTION_DELAY);
 	config.getFilterChain().addFirst("throttleFilter", throttleFilter);
 	acceptor.bind(new InetSocketAddress(port), connectionHandler, config);

 	System.out.println(String.format("Success! Listening at port %d...", port));
 }
 catch (BindException ex)
 {
 	System.out.println(String.format("Failed to bind to port %d: %s", port, ex.getMessage()));
 	System.exit(0);
 }
 catch (Throwable t)
 {
 	t.printStackTrace();
 	System.exit(0);
 }
</code></pre>
<p>}</p>
<p>public static void fetchProperties()<br>
{<br>
File file = new File(StoreUtils.getDirectory(“global”), “global-vars.json”);</p>
<pre><code> try (FileReader reader = new FileReader(file))
 {
 	Gson gson = new Gson();

 	properties = gson.fromJson(reader, new TypeToken&lt;Map&lt;String, Integer&gt;&gt;()
 	{
 	}.getType());
 }
 catch (FileNotFoundException ex)
 {
 	properties = new HashMap&lt;&gt;();
 }
 catch (IOException ex)
 {
 	ex.printStackTrace();
 }
</code></pre>
<p>}</p>
<p>public static void storeProperties()<br>
{<br>
File file = new File(StoreUtils.getDirectory(“global”), “global-vars.json”);</p>
<pre><code> try (FileWriter writer = new FileWriter(file, false))
 {
 	Gson gson = new GsonBuilder().setPrettyPrinting().create();
 	gson.toJson(properties, writer);
 }
 catch (IOException ex)
 {
 	ex.printStackTrace();
 }
</code></pre>
<p>}</p>
<p>public static int getProperty(String varname)<br>
{<br>
Integer asInteger = properties.get(varname);<br>
return asInteger == null ? 0 : asInteger;</p>
<p>}</p>
<p>public static int setProperty(String varname, int value)<br>
{<br>
Integer asInteger;</p>
<pre><code> if (value == 0)
 {
 	asInteger = properties.remove(varname);
 }
 else
 {
 	asInteger = properties.put(varname, value);
 }

 return asInteger == null ? 0 : asInteger;
</code></pre>
<p>}</p>
<p>public static int addProperty(String varname, int amount)<br>
{<br>
int oldValue = getProperty(varname);<br>
int newValue = Math.addExact(oldValue, amount);<br>
setProperty(varname, newValue);<br>
return newValue;<br>
}</p>
<p>public static int subProperty(String varname, int amount)<br>
{<br>
int oldValue = getProperty(varname);<br>
int newValue = Math.subtractExact(oldValue, amount);<br>
setProperty(varname, newValue);<br>
return newValue;<br>
}</p>
<p>public static void executeAll(FilterExecutable executable)<br>
{<br>
PlayerManager.execute(executable::accept, executable::execute);<br>
}</p>
<p>public static FriendschatProvider getFriendschatProvider()<br>
{<br>
return friendschatProvider;<br>
}</p>
<p>public static TaskScheduler getTaskScheduler()<br>
{<br>
return taskScheduler;<br>
}</p>
<p>public static void main(String[] args) throws Exception<br>
{<br>
if (args.length &lt; 2)<br>
{<br>
System.err.println(“Insufficient arguments: <a>port:0-65535</a> <a>debug:true|false</a>”);<br>
System.exit(0);<br>
return;<br>
}</p>
<pre><code> int port = Integer.parseInt(args[0]);
 Constants.LIVE_MODE = Boolean.parseBoolean(args[1]);
 fetchProperties();

 if (Constants.LIVE_MODE)
 {
 	System.setErr(new SystemLogger(System.err, new File("data/logs/stderr")));
 	System.setOut(new SystemLogger(System.out, new File("data/logs/stdout")));
 }

 if (Constants.DOUBLE_EXP)
 {
 	Constants.SERVER_EXP_BONUS = 2;
 }

 System.out.println("Initialising game service...");

 Runtime.getRuntime().addShutdownHook(new Thread(() -&gt;
 {
 	PlayerManager.execute(p -&gt; true, PlayerSaver::save);
 	Server.getFriendschatProvider().saveAll();

 	if (database != null)
 	{
 		database.shutdown();
 	}

 	storeProperties();
 }));

 ItemDefinition.load();
 LevelRequirement.init();
 MobDefinition.load();
 ObjectDef.loadConfig();
 MapLoading.load();
 MapRegion.sort();
 ObjectAlternates.loadAlternateIds();
 MapLoading.processDoors();
 ObjectAlternates.clearAlternates();
 ShopHandler.init();
 XStreamLibrary.init();
 GlobalDropsHandler.initialize();
 new ObjectHandler();
 HostAddressInformation.initialize();
 mobManager = new MobManager();
 itemManager = new GroundItemManager();
 ImplingGenerator.init();
 Hunter.loadSpawns();
 LotteryManager.init();
 taskScheduler.schedule(new StockHandlingTask());
 getTaskScheduler().addEvent(PropHuntLobby.getInstance());
 getTaskScheduler().addEvent(new BountyHunterTick());
 ObjectManager.load();

 taskScheduler.schedule(new Task(1)
 {

 	private List&lt;Long&gt; recent = new ArrayList&lt;&gt;();

 	@Override
 	public void execute()
 	{
 		long start = System.nanoTime();

 		try
 		{
 			Zombies.update();
 			GroundItemManager.update();
 			playerManager.update();
 			mobManager.update();
 			objectManager.update();
 			pestControl.update();
 			TrapProcessor.process();
 			FightPits.getInstance().update();
 			ImplingGenerator.process();
 		}
 		catch (Exception ex)
 		{
 			ex.printStackTrace();
 		}

 		long finish = System.nanoTime();
 		long ns = finish - start;
 		long ms = ns / 1_000_000;

 		// informative output regarding recent time consumption
 		recent.add(ns);

 		if (recent.size() &gt;= 500)
 		{
 			long sum = recent.stream().mapToLong(n -&gt; n).sum();
 			long average = sum / recent.size();
 			recent.clear();

 			if (getProperty("sv_tcon_verbose") == 1)
 			{
 				System.out.println("Average update time consumption (last 500 updates; in ns): "
 						+ Utils.format(average));
 			}
 		}

 		// if the frame update exceeds 600 ms we should log a warning
 		if (ns &gt;= 600_000_000L)
 		{
 			System.err.println("Warning:");
 			System.err.println("The game service is unable to keep up!");
 			System.err.println("[max=600ms, accomplished=[" + Utils.format(ns) + "ns, " + ms + "ms]]");
 		}
 	}

 });

 taskScheduler.schedule(new Task(20, true)
 {

 	@Override
 	protected void execute()
 	{
 		PlayerManager.execute(PlayerSaver::save);
 		storeProperties();
 	}

 });

 if (Constants.LIVE_MODE)
 {
 	taskScheduler.schedule(new CharacterFileBackup(14400));

 	taskScheduler.schedule(new Task(275, true)
 	{

 		private final Random random = new Random();

 		@Override
 		protected void execute()
 		{
 			int index = random.nextInt(Constants.ANNOUNCEMENTS.length);
 			String message = Constants.ANNOUNCEMENTS[index];
 			PlayerManager.broadcast(message, p -&gt; !p.isDonator());
 		}

 	});

 	try
 	{
 		database = new ExternalDatabase("game_server", "q18Uz7fr4JA8l1", "151.227.21.94/live", 2);
 		database.initialise();
 	}
 	catch (Exception ex)
 	{
 		ex.printStackTrace();
 	}
 }

 /**
  * Preparing connections
  */
 bind(port);
</code></pre>
<p>}</p>
</li>
</ul>
<p>}</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/really-need-help/549295/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/really-need-help/549295/4</link>
        <pubDate>Tue, 20 Jan 2015 18:45:57 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549295-4</guid>
        <source url="https://forum.moparisthebest.com/t/really-need-help/549295.rss">Really need help</source>
      </item>
      <item>
        <title>Really need help</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <p>First off, calm the hell down.</p>
<p>Second off, we need to see some code to help you with your error.</p>
<p>What does the Server.java file look like?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/really-need-help/549295/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/really-need-help/549295/3</link>
        <pubDate>Tue, 20 Jan 2015 18:42:35 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549295-3</guid>
        <source url="https://forum.moparisthebest.com/t/really-need-help/549295.rss">Really need help</source>
      </item>
      <item>
        <title>Really need help</title>
        <dc:creator><![CDATA[@kobra828 kobra828]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/kobra828">@kobra828</a> wrote:</p>
          <blockquote>
              <p>“Add a null check in the “getProperty” integer.”</p>
<p>HOW DO I ADD THE NULL CHECK?  :mad:</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/really-need-help/549295/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/really-need-help/549295/2</link>
        <pubDate>Tue, 20 Jan 2015 18:19:05 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549295-2</guid>
        <source url="https://forum.moparisthebest.com/t/really-need-help/549295.rss">Really need help</source>
      </item>
      <item>
        <title>Really need help</title>
        <dc:creator><![CDATA[@kobra828 kobra828]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/kobra828">@kobra828</a> wrote:</p>
          <blockquote>
              <p>java.lang.NullPointerException<br>
at com.visionary.Server.getProperty(Server.java:152)<br>
at com.visionary.Server$2.execute(Server.java:306)<br>
at com.visionary.task.Task.tick(Task.java:258)<br>
at com.visionary.task.TaskScheduler.run(TaskScheduler .java:88)<br>
at java.util.concurrent.Executors$RunnableAdapter.cal l(Unknown Source)<br>
at java.util.concurrent.FutureTask.runAndReset(Unknow n Source)<br>
at java.util.concurrent.ScheduledThreadPoolExecutor$S cheduledFutureTask.access$301(Unknown Source)<br>
at java.util.concurrent.ScheduledThreadPoolExecutor$S cheduledFutureTask.run(Unknown Source)<br>
at java.util.concurrent.ThreadPoolExecutor.runWorker( Unknown Source)<br>
at java.util.concurrent.ThreadPoolExecutor$Worker.run (Unknown Source)<br>
at java.lang.Thread.run(Unknown Source)</p>
<p>WHY IS THIS HAPPENING? AND HOW CAN I FIX IT? <img src="https://forum.moparisthebest.com/images/emoji/twitter/confused.png?v=5" title=":confused:" class="emoji" alt=":confused:"> because it crashes the server <img src="https://forum.moparisthebest.com/images/emoji/twitter/confused.png?v=5" title=":confused:" class="emoji" alt=":confused:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/really-need-help/549295/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/really-need-help/549295/1</link>
        <pubDate>Tue, 20 Jan 2015 17:58:07 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549295-1</guid>
        <source url="https://forum.moparisthebest.com/t/really-need-help/549295.rss">Really need help</source>
      </item>
  </channel>
</rss>
