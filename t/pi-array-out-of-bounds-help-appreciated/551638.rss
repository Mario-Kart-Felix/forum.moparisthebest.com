<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>[PI] Array out of bounds, help appreciated</title>
    <link>https://forum.moparisthebest.com/t/pi-array-out-of-bounds-help-appreciated/551638</link>
    <description>[b]Hello fellow MoparScape members,

I have downloaded the new &quot;tyreatta-scape&quot; source and client to start to learn coding java and possibly open up my own RSPS in the future. I have started learning a lot, and it&#39;s been really fun for me. I tried adding this custom model to my game, but then when I spawn the item it freezes my client and gives me this error:[/b]
[CODE]Error: T1 - 123,0 - 36,36
Exception in thread &quot;Thread-3&quot; java.lang.ArrayIndexOutOfBoundsException: -79
        at Model.method479(Model.java:1045)
        at ItemDef.method201(ItemDef.java:1859)
        at ItemDef.getSprite(ItemDef.java:1748)
        at client.drawInterface(client.java:8613)
        at client.drawTabArea(client.java:2055)
        at client.drawGameScreen(client.java:8407)
        at client.processDrawing(client.java:9155)
        at RSApplet.run(RSApplet.java:108)
        at client.run(client.java:4846)
        at java.lang.Thread.run(Unknown Source)[/CODE]

My full ItemDef
[SPOILER][url=http://www.mediafire.com/view/s7jy5oghz2ls5fb/itemdef.txt]http://www.mediafire.com/view/s7jy5oghz2ls5fb/itemdef.txt[/url][/SPOILER]

ItemDef.method201
[SPOILER]
public Model method201(int i) {
		if(stackIDs != null &amp;&amp; i &gt; 1) {
			int j = -1;
			for(int k = 0; k &lt; 10; k++)
				if(i &gt;= stackAmounts[k] &amp;&amp; stackAmounts[k] != 0)
					j = stackIDs[k];
			if(j != -1)
				return forID(j).method201(1);
		}
		Model model = (Model) mruNodes2.insertFromCache(id);
		if(model != null)
			return model;
		model = Model.method462(modelID);
		if(model == null)
			return null;
		if(anInt167 != 128 || anInt192 != 128 || anInt191 != 128)
			model.method478(anInt167, anInt191, anInt192);
		if (originalModelColors != null) {
			for (int l = 0; l &lt; originalModelColors.length; l++)
				model.method476(originalModelColors[l], modifiedModelColors[l]);

		}
		model.method479(64 + anInt196, 768 + anInt184, -50, -10, -50, true);
		model.aBoolean1659 = true;
		mruNodes2.removeFromCache(model, id);
		return model;
	}
[/SPOILER]

Model.method479
[SPOILER]
public void method479(int i, int j, int k, int l, int i1, boolean flag) {
		int j1 = (int)Math.sqrt(k * k + l * l + i1 * i1);
		int k1 = j * j1 &gt;&gt; 8;
		if(anIntArray1634 == null) {
			anIntArray1634 = new int[anInt1630];
			anIntArray1635 = new int[anInt1630];
			anIntArray1636 = new int[anInt1630];
		}
		if(super.aClass33Array1425 == null) {
			super.aClass33Array1425 = new Class33[anInt1626];
			for(int l1 = 0; l1 &lt; anInt1626; l1++)
				super.aClass33Array1425[l1] = new Class33();
		}
		for(int i2 = 0; i2 &lt; anInt1630; i2++) {
			int j2 = anIntArray1631[i2];
			int l2 = anIntArray1632[i2];
			int i3 = anIntArray1633[i2];
			int j3 = anIntArray1627[l2] - anIntArray1627[j2];
			int k3 = anIntArray1628[l2] - anIntArray1628[j2];
			int l3 = anIntArray1629[l2] - anIntArray1629[j2];
			int i4 = anIntArray1627[i3] - anIntArray1627[j2];
			int j4 = anIntArray1628[i3] - anIntArray1628[j2];
			int k4 = anIntArray1629[i3] - anIntArray1629[j2];
			int l4 = k3 * k4 - j4 * l3;
			int i5 = l3 * i4 - k4 * j3;
			int j5;
			for(j5 = j3 * j4 - i4 * k3; l4 &gt; 8192 || i5 &gt; 8192 || j5 &gt; 8192 || l4 &lt; -8192 || i5 &lt; -8192 || j5 &lt; -8192; j5 &gt;&gt;= 1) {
				l4 &gt;&gt;= 1;
				i5 &gt;&gt;= 1;
			}
			int k5 = (int)Math.sqrt(l4 * l4 + i5 * i5 + j5 * j5);
			if(k5 &lt;= 0)
				k5 = 1;
			l4 = (l4 * 256) / k5;
			i5 = (i5 * 256) / k5;
			j5 = (j5 * 256) / k5;
			if(anIntArray1637 == null || (anIntArray1637[i2] &amp; 1) == 0) {
				Class33 class33_2 = super.aClass33Array1425[j2];
				class33_2.anInt602 += l4;
				class33_2.anInt603 += i5;
				class33_2.anInt604 += j5;
				class33_2.anInt605++;
				class33_2 = super.aClass33Array1425[l2];
				class33_2.anInt602 += l4;
				class33_2.anInt603 += i5;
				class33_2.anInt604 += j5;
				class33_2.anInt605++;
				class33_2 = super.aClass33Array1425[i3];
				class33_2.anInt602 += l4;
				class33_2.anInt603 += i5;
				class33_2.anInt604 += j5;
				class33_2.anInt605++;
			} else {
				int l5 = i + (k * l4 + l * i5 + i1 * j5) / (k1 + k1 / 2);
				anIntArray1634[i2] = method481(anIntArray1640[i2], l5, anIntArray1637[i2]);
			}
		}
		if(flag) {
			method480(i, k1, k, l, i1);
		} else {
			aClass33Array1660 = new Class33[anInt1626];
			for(int k2 = 0; k2 &lt; anInt1626; k2++) {
				Class33 class33 = super.aClass33Array1425[k2];
				Class33 class33_1 = aClass33Array1660[k2] = new Class33();
				class33_1.anInt602 = class33.anInt602;
				class33_1.anInt603 = class33.anInt603;
				class33_1.anInt604 = class33.anInt604;
				class33_1.anInt605 = class33.anInt605;
			}
		}
		if(flag) {
			method466();
		} else {
			method468();
		}
	}
[/SPOILER]

When I add this custom item to my game, it works fine:
[SPOILER]case 5000:
    itemDef.actions = new String[5];
	itemDef.actions[1] = &quot;Wear&quot;;
	itemDef.modifiedModelColors = new int[1];
	itemDef.modifiedModelColors[0] = 127;
	itemDef.originalModelColors = new int[1];
	itemDef.originalModelColors[0] = 944;
	itemDef.modelID = 19586;
	itemDef.modelZoom = 1800;
	itemDef.modelRotation1 = 1161;
	itemDef.modelRotation2 = 192;
	itemDef.anInt204 = 0;
	itemDef.modelOffset1 = -18;
	itemDef.modelOffset2 = 75;
	itemDef.maleEquip1 = 22;
	itemDef.femaleEquip1 = 22;
	itemDef.anInt188 = -1;
	itemDef.anInt164 = -1;
	itemDef.anInt175 = -1;
	itemDef.anInt197 = -1;
	itemDef.name = &quot;@bla@Dragon Tooth Sword&quot;;
	itemDef.description = &quot;Made from the teeth of a dragon.&quot;.getBytes();
	itemDef.stackable = false;
    break;
[/SPOILER]

When I add this custom item to my game, it gives me the error:
[SPOILER]
case 11527:
				  itemDef.modelID = 70729;
                  itemDef.name = &quot;@red@Dragonbone Full Helm&quot;;
                  itemDef.modelZoom = 780;
                  itemDef.modelRotation2 = 229;
                  itemDef.modelRotation1 = 177;
                  itemDef.modelOffset1 = -34;
                  itemDef.modelOffset2 = 1;
                  itemDef.maleEquip1 = 70662;
                  itemDef.femaleEquip1 = 70691;
                  itemDef.actions = new String[5];
                  itemDef.actions[1] = &quot;Wield&quot;;
    break;
[/SPOILER]

[b]Thanks for any help or information that can possibly help me along my way, I am always willing to learn and give back to the community.
- Skata[/b]</description>
    
    <lastBuildDate>Sun, 31 May 2015 23:20:55 +0000</lastBuildDate>
    <category>Game Development</category>
    <atom:link href="https://forum.moparisthebest.com/t/pi-array-out-of-bounds-help-appreciated/551638.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>[PI] Array out of bounds, help appreciated</title>
        <dc:creator><![CDATA[@boi_jx boi_jx]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/boi_jx">@boi_jx</a> wrote:</p>
          <blockquote>
              <p>the case u used for it probably needs to be changed it could be too hight of a case number</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-array-out-of-bounds-help-appreciated/551638/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-array-out-of-bounds-help-appreciated/551638/5</link>
        <pubDate>Sun, 31 May 2015 23:20:55 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-551638-5</guid>
        <source url="https://forum.moparisthebest.com/t/pi-array-out-of-bounds-help-appreciated/551638.rss">[PI] Array out of bounds, help appreciated</source>
      </item>
      <item>
        <title>[PI] Array out of bounds, help appreciated</title>
        <dc:creator><![CDATA[@gnarlnuts gnarlnuts]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/gnarlnuts">@gnarlnuts</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="2" data-topic="551638">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/heroicempire/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> HeroicEmpire:</div>
<blockquote>
<p>Post your itemdef ints, as it may be that you are actually setting your model to “-79” and its throwing that error because there is no model “-79”, just an idea.</p>
</blockquote>
</aside>
<p>[quote=“xXSh0ckXx, post:3, topic:551638”][quote author=HeroicEmpire link=topic=670552.msg4483806#msg4483806 date=1432488441]<br>
Post your itemdef ints, as it may be that you are actually setting your model to “-79” and its throwing that error because there is no model “-79”, just an idea.<br>
[/quote]<br>
You mean that there is no value stored under the index -79.</p>
<p>OT:<br>
Show some code, for instance the method which is causing the exception.[/quote]<br>
Thanks for the feedback, I put up more information</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-array-out-of-bounds-help-appreciated/551638/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-array-out-of-bounds-help-appreciated/551638/4</link>
        <pubDate>Sun, 24 May 2015 19:31:55 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-551638-4</guid>
        <source url="https://forum.moparisthebest.com/t/pi-array-out-of-bounds-help-appreciated/551638.rss">[PI] Array out of bounds, help appreciated</source>
      </item>
      <item>
        <title>[PI] Array out of bounds, help appreciated</title>
        <dc:creator><![CDATA[@xXSh0ckXx xXSh0ckXx]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/xxsh0ckxx">@xXSh0ckXx</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="2" data-topic="551638">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/heroicempire/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> HeroicEmpire:</div>
<blockquote>
<p>Post your itemdef ints, as it may be that you are actually setting your model to “-79” and its throwing that error because there is no model “-79”, just an idea.</p>
</blockquote>
</aside>
<p>You mean that there is no value stored under the index -79.</p>
<p>OT:<br>
Show some code, for instance the method which is causing the exception.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-array-out-of-bounds-help-appreciated/551638/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-array-out-of-bounds-help-appreciated/551638/3</link>
        <pubDate>Sun, 24 May 2015 18:23:46 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-551638-3</guid>
        <source url="https://forum.moparisthebest.com/t/pi-array-out-of-bounds-help-appreciated/551638.rss">[PI] Array out of bounds, help appreciated</source>
      </item>
      <item>
        <title>[PI] Array out of bounds, help appreciated</title>
        <dc:creator><![CDATA[@HeroicEmpire HeroicEmpire]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/heroicempire">@HeroicEmpire</a> wrote:</p>
          <blockquote>
              <p>Post your itemdef ints, as it may be that you are actually setting your model to “-79” and its throwing that error because there is no model “-79”, just an idea.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-array-out-of-bounds-help-appreciated/551638/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-array-out-of-bounds-help-appreciated/551638/2</link>
        <pubDate>Sun, 24 May 2015 17:27:21 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-551638-2</guid>
        <source url="https://forum.moparisthebest.com/t/pi-array-out-of-bounds-help-appreciated/551638.rss">[PI] Array out of bounds, help appreciated</source>
      </item>
      <item>
        <title>[PI] Array out of bounds, help appreciated</title>
        <dc:creator><![CDATA[@gnarlnuts gnarlnuts]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/gnarlnuts">@gnarlnuts</a> wrote:</p>
          <blockquote>
              <p>[b]Hello fellow MoparScape members,</p>
<p>I have downloaded the new “tyreatta-scape” source and client to start to learn coding java and possibly open up my own RSPS in the future. I have started learning a lot, and it’s been really fun for me. I tried adding this custom model to my game, but then when I spawn the item it freezes my client and gives me this error:[/b]</p>
<p><code>Error: T1 - 123,0 - 36,36
Exception in thread "Thread-3" java.lang.ArrayIndexOutOfBoundsException: -79
        at Model.method479(Model.java:1045)
        at ItemDef.method201(ItemDef.java:1859)
        at ItemDef.getSprite(ItemDef.java:1748)
        at client.drawInterface(client.java:8613)
        at client.drawTabArea(client.java:2055)
        at client.drawGameScreen(client.java:8407)
        at client.processDrawing(client.java:9155)
        at RSApplet.run(RSApplet.java:108)
        at client.run(client.java:4846)
        at java.lang.Thread.run(Unknown Source)</code></p>
<p>My full ItemDef<br>
[SPOILER]<a href="http://www.mediafire.com/view/s7jy5oghz2ls5fb/itemdef.txt" data-bbcode="true" rel="nofollow noopener">http://www.mediafire.com/view/s7jy5oghz2ls5fb/itemdef.txt</a>[/SPOILER]</p>
<p>ItemDef.method201<br>
[SPOILER]<br>
public Model method201(int i) {<br>
if(stackIDs != null &amp;&amp; i &gt; 1) {<br>
int j = -1;<br>
for(int k = 0; k &lt; 10; k++)<br>
if(i &gt;= stackAmounts[k] &amp;&amp; stackAmounts[k] != 0)<br>
j = stackIDs[k];<br>
if(j != -1)<br>
return forID(j).method201(1);<br>
}<br>
Model model = (Model) mruNodes2.insertFromCache(id);<br>
if(model != null)<br>
return model;<br>
model = Model.method462(modelID);<br>
if(model == null)<br>
return null;<br>
if(anInt167 != 128 || anInt192 != 128 || anInt191 != 128)<br>
model.method478(anInt167, anInt191, anInt192);<br>
if (originalModelColors != null) {<br>
for (int l = 0; l &lt; originalModelColors.length; l++)<br>
model.method476(originalModelColors[l], modifiedModelColors[l]);</p>
<pre><code>	}
	model.method479(64 + anInt196, 768 + anInt184, -50, -10, -50, true);
	model.aBoolean1659 = true;
	mruNodes2.removeFromCache(model, id);
	return model;
}
</code></pre>
<p>[/SPOILER]</p>
<p>Model.method479<br>
[SPOILER]<br>
public void method479(int i, int j, int k, int l, int i1, boolean flag) {<br>
int j1 = (int)Math.sqrt(k * k + l * l + i1 * i1);<br>
int k1 = j * j1 &gt;&gt; 8;<br>
if(anIntArray1634 == null) {<br>
anIntArray1634 = new int[anInt1630];<br>
anIntArray1635 = new int[anInt1630];<br>
anIntArray1636 = new int[anInt1630];<br>
}<br>
if(super.aClass33Array1425 == null) {<br>
super.aClass33Array1425 = new Class33[anInt1626];<br>
for(int l1 = 0; l1 &lt; anInt1626; l1++)<br>
super.aClass33Array1425[l1] = new Class33();<br>
}<br>
for(int i2 = 0; i2 &lt; anInt1630; i2++) {<br>
int j2 = anIntArray1631[i2];<br>
int l2 = anIntArray1632[i2];<br>
int i3 = anIntArray1633[i2];<br>
int j3 = anIntArray1627[l2] - anIntArray1627[j2];<br>
int k3 = anIntArray1628[l2] - anIntArray1628[j2];<br>
int l3 = anIntArray1629[l2] - anIntArray1629[j2];<br>
int i4 = anIntArray1627[i3] - anIntArray1627[j2];<br>
int j4 = anIntArray1628[i3] - anIntArray1628[j2];<br>
int k4 = anIntArray1629[i3] - anIntArray1629[j2];<br>
int l4 = k3 * k4 - j4 * l3;<br>
int i5 = l3 * i4 - k4 * j3;<br>
int j5;<br>
for(j5 = j3 * j4 - i4 * k3; l4 &gt; 8192 || i5 &gt; 8192 || j5 &gt; 8192 || l4 &lt; -8192 || i5 &lt; -8192 || j5 &lt; -8192; j5 &gt;&gt;= 1) {<br>
l4 &gt;&gt;= 1;<br>
i5 &gt;&gt;= 1;<br>
}<br>
int k5 = (int)Math.sqrt(l4 * l4 + i5 * i5 + j5 * j5);<br>
if(k5 &lt;= 0)<br>
k5 = 1;<br>
l4 = (l4 * 256) / k5;<br>
i5 = (i5 * 256) / k5;<br>
j5 = (j5 * 256) / k5;<br>
if(anIntArray1637 == null || (anIntArray1637[i2] &amp; 1) == 0) {<br>
Class33 class33_2 = super.aClass33Array1425[j2];<br>
class33_2.anInt602 += l4;<br>
class33_2.anInt603 += i5;<br>
class33_2.anInt604 += j5;<br>
class33_2.anInt605++;<br>
class33_2 = super.aClass33Array1425[l2];<br>
class33_2.anInt602 += l4;<br>
class33_2.anInt603 += i5;<br>
class33_2.anInt604 += j5;<br>
class33_2.anInt605++;<br>
class33_2 = super.aClass33Array1425[i3];<br>
class33_2.anInt602 += l4;<br>
class33_2.anInt603 += i5;<br>
class33_2.anInt604 += j5;<br>
class33_2.anInt605++;<br>
} else {<br>
int l5 = i + (k * l4 + l * i5 + i1 * j5) / (k1 + k1 / 2);<br>
anIntArray1634[i2] = method481(anIntArray1640[i2], l5, anIntArray1637[i2]);<br>
}<br>
}<br>
if(flag) {<br>
method480(i, k1, k, l, i1);<br>
} else {<br>
aClass33Array1660 = new Class33[anInt1626];<br>
for(int k2 = 0; k2 &lt; anInt1626; k2++) {<br>
Class33 class33 = super.aClass33Array1425[k2];<br>
Class33 class33_1 = aClass33Array1660[k2] = new Class33();<br>
class33_1.anInt602 = class33.anInt602;<br>
class33_1.anInt603 = class33.anInt603;<br>
class33_1.anInt604 = class33.anInt604;<br>
class33_1.anInt605 = class33.anInt605;<br>
}<br>
}<br>
if(flag) {<br>
method466();<br>
} else {<br>
method468();<br>
}<br>
}<br>
[/SPOILER]</p>
<p>When I add this custom item to my game, it works fine:<br>
[SPOILER]case 5000:<br>
itemDef.actions = new String[5];<br>
itemDef.actions[1] = “Wear”;<br>
itemDef.modifiedModelColors = new int[1];<br>
itemDef.modifiedModelColors[0] = 127;<br>
itemDef.originalModelColors = new int[1];<br>
itemDef.originalModelColors[0] = 944;<br>
itemDef.modelID = 19586;<br>
itemDef.modelZoom = 1800;<br>
itemDef.modelRotation1 = 1161;<br>
itemDef.modelRotation2 = 192;<br>
itemDef.anInt204 = 0;<br>
itemDef.modelOffset1 = -18;<br>
itemDef.modelOffset2 = 75;<br>
itemDef.maleEquip1 = 22;<br>
itemDef.femaleEquip1 = 22;<br>
itemDef.anInt188 = -1;<br>
itemDef.anInt164 = -1;<br>
itemDef.anInt175 = -1;<br>
itemDef.anInt197 = -1;<br>
itemDef.name = “<span class="mention">@bla</span>@Dragon Tooth Sword”;<br>
itemDef.description = “Made from the teeth of a dragon.”.getBytes();<br>
itemDef.stackable = false;<br>
break;<br>
[/SPOILER]</p>
<p>When I add this custom item to my game, it gives me the error:<br>
[SPOILER]<br>
case 11527:<br>
itemDef.modelID = 70729;<br>
itemDef.name = “<a class="mention" href="/u/red">@red</a>@Dragonbone Full Helm”;<br>
itemDef.modelZoom = 780;<br>
itemDef.modelRotation2 = 229;<br>
itemDef.modelRotation1 = 177;<br>
itemDef.modelOffset1 = -34;<br>
itemDef.modelOffset2 = 1;<br>
itemDef.maleEquip1 = 70662;<br>
itemDef.femaleEquip1 = 70691;<br>
itemDef.actions = new String[5];<br>
itemDef.actions[1] = “Wield”;<br>
break;<br>
[/SPOILER]</p>
<p>[b]Thanks for any help or information that can possibly help me along my way, I am always willing to learn and give back to the community.</p>
<ul>
<li>Skata[/b]</li>
</ul>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-array-out-of-bounds-help-appreciated/551638/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-array-out-of-bounds-help-appreciated/551638/1</link>
        <pubDate>Sun, 24 May 2015 16:30:39 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-551638-1</guid>
        <source url="https://forum.moparisthebest.com/t/pi-array-out-of-bounds-help-appreciated/551638.rss">[PI] Array out of bounds, help appreciated</source>
      </item>
  </channel>
</rss>
