<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/heap-vs-stack-in-c/312724 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 08:59:05 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Heap Vs Stack in C++ - General Programming - moparisthebest.com</title>
    <meta name="description" content="Stack Vs Heap 

Stack: When you write simple programs in C and C++, you don&amp;#39;t care where the memory for your variables are allocated, as by default they all ended up on Stack. 

The stack is where memory is allocated for&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="312724.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Heap Vs Stack in C++&#39;" href="312724.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://www.moparisthebest.com/smf/Themes/default/images/warnwarn.gif" />
<meta property="og:image" content="http://www.moparisthebest.com/smf/Themes/default/images/warnwarn.gif" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/heap-vs-stack-in-c/312724" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/heap-vs-stack-in-c/312724" />
<meta property="og:title" content="Heap Vs Stack in C++" />
<meta name="twitter:title" content="Heap Vs Stack in C++" />
<meta property="og:description" content="Stack Vs Heap  Stack:  When you write simple programs in C and C++, you don’t care where the memory for your variables are allocated, as by default they all ended up on Stack.  The stack is where memory is allocated for automatic variables within functions. A stack is a Last In First Out (LIFO) storage device where new storage is allocated and deallocated at only one ``end’’, called the Top of the stack.  Example program;  [code]  #include &lt;iostream.h&gt;  using namespace std;  void myFunction()  { ..." />
<meta name="twitter:description" content="Stack Vs Heap  Stack:  When you write simple programs in C and C++, you don’t care where the memory for your variables are allocated, as by default they all ended up on Stack.  The stack is where memory is allocated for automatic variables within functions. A stack is a Last In First Out (LIFO) storage device where new storage is allocated and deallocated at only one ``end’’, called the Top of the stack.  Example program;  [code]  #include &lt;iostream.h&gt;  using namespace std;  void myFunction()  { ..." />
<meta property="article:published_time" content="2009-11-06T15:08:57+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="312724.html">Heap Vs Stack in C++</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/general-programming.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>General Programming</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/javedman0208.html'><span itemprop='name'>javedman0208</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-11-06T15:08:57Z'>
            <time itemprop='dateModified' datetime='2016-07-31T12:19:52Z' class='post-time'>
              July 31, 2016, 12:19pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Stack Vs Heap</p>
<p>Stack:<br>
When you write simple programs in C and C++, you don’t care where the memory for your variables are allocated, as by default they all ended up on Stack.</p>
<p>The stack is where memory is allocated for automatic variables within functions. A stack is a Last In First Out (LIFO) storage device where new storage is allocated and deallocated at only one ``end’’, called the Top of the stack.</p>
<p>Example program;</p>
<p>[code]<br>
<span class="hashtag">#include</span> &lt;iostream.h&gt;<br>
using namespace std;<br>
void myFunction()<br>
{<br>
int myArray[10] = {1,2,3,4,5,6,7,8,9,10};<br>
for(int i = 0; i &lt; 10; i++)<br>
cout&lt;&lt;&lt;&lt;myArray[i]&lt;&lt;endl;</p>
<p>}<br>
int main()<br>
{<br>
myFunction();<br>
return 0;<br>
}[/code]</p>
<p>In the program, shown above the scope of array myArray is limited to enclosing braces {}, once we return from myFunction, the scope of myArray ends, which will cleaned up and in the main function there is no way to access myArray anymore.</p>
<p>There are couple of problems in the program which used allocations on Stack.<br>
First you can’t access the memory once we reached the scope brace.<br>
Second you have to know in advance how much memory will be needed, which is sometimes hard to predict.<br>
Third there is a certain limit on how much can be allocated on Stack, memory allocations on Heap also suffer from this problem, but in the case of Stack the limit is too low.</p>
<p>The memory allocated on Stack is also called Static Memory Allocation.</p>
<p>Heap:<br>
When a variable is defined in the source program, the type of the variable determines how much memory the compiler allocates. When the program executes, the variable consumes this amount of memory regardless of whether the program actually uses the memory allocated. This is particularly true for arrays. However, in many problems, it is not clear at the outset how much memory the program will actually need. Up to now, we have declared arrays to be ``large enough’’ to hold the maximum number of elements we expect our application to handle. If too much memory is allocated and then not used, there is a waste of memory. If not enough memory is allocated, the program is not able to handle the input data.</p>
<p>We can make our program more flexible if, during execution, it could allocate additional memory when needed and free memory when not needed. Allocation of memory during execution is called dynamic memory allocation. C provides library functions to allocate and free memory dynamically during program execution. Dynamic memory is allocated on the heap by the system.<br>
It is important to realize that dynamic memory allocation also has limits. If memory is repeatedly allocated, eventually the system will run out of memory.</p>
<p>Look at another example which uses memory allocated on heap.</p>
<p>[code]<span class="hashtag">#include</span> &lt;iostream.h&gt;<br>
using namespace std;<br>
int* myFunction()<br>
{<br>
int *myArray = malloc(10 * sizeof(int));<br>
for(int i = 0; i &lt; 10; i++)<br>
cout&lt;&lt;&lt;&lt;myArray[i]&lt;&lt;endl;<br>
return myArray;</p>
<p>}<br>
int main()<br>
{<br>
int *array = myFunction();<br>
//in this case the array allocated in myFunction is available here.<br>
return 0;<br>
}[/code]</p>
<p>There is one big problem using Heap, which is once you have allocated memory on Heap, now its your responsibility to free that memory once you are done with it.</p>
<p>In the program above we definitely leaked 4 bytes of memory. This is not a problem for small programs but once you started to write complicated programs then it can become a big problem.</p>
<p>The following program frees the memory once the user is done with the allocated memory.</p>
<p>[code]<br>
<span class="hashtag">#include</span> &lt;iostream.h&gt;<br>
using namespace std;<br>
int* myFunction()<br>
{<br>
int *myArray = malloc(10 * sizeof(int));<br>
for(int i = 0; i &lt; 10; i++)<br>
cout&lt;&lt;&lt;&lt;myArray[i]&lt;&lt;endl;<br>
return myArray;</p>
<p>}<br>
int main()<br>
{<br>
int *array = myFunction();<br>
//in this case the array allocated in myFunction is available here.<br>
free(array);<br>
return 0;<br>
}[/code]</p>
<p>C programmers use malloc to allocate memory and free to deallocate memory<br>
C++ programmers use new to allocated memory and delete to deallocate memory.</p>
<p>Be careful malloc is incompatible with delete, same is true for new which is incompatible with free. Always use free to deallocate memory allocated using malloc.<br>
Always use delete to deallocate memory allocated using new.<br>
<span class="bbcode-b">Javedman0208</span><br>
[center]<img src="http://www.moparisthebest.com/smf/Themes/default/images/warnwarn.gif" alt width="" height=""> Do not rip tutorials from other sources unless giving proper credit[/center]</p>
      </div>

      <meta itemprop='headline' content='Heap Vs Stack in C++'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/zstars.html'><span itemprop='name'>zstars</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-11-06T15:21:17Z'>
            <time itemprop='dateModified' datetime='2016-07-31T12:19:53Z' class='post-time'>
              July 31, 2016, 12:19pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Leeched off <a href="http://www.tenouk.com/ModuleZ.html" rel="nofollow noopener">http://www.tenouk.com/ModuleZ.html</a> ?</p>
<p>Next time leech off a good book at least please. The tutorial is crap. The examples wouldn’t even compile on a current conforming compiler, either due to the bunch of syntax errors present, or to the usage of pre-standard constructs such as <span class="hashtag">#include</span> &lt;iostream.h&gt;. And you don’t even explain or provide any meaningful example about new, which is actually the one that C++ programmers should use. Guess at least it did explain that malloc / delete cannot be mixed etc. But new [], which would be the logical counterpart for malloc(10 * sizeof(int)) wasn’t even mentioned.</p>
      </div>

      <meta itemprop='headline' content='Heap Vs Stack in C++'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/ownagesbot.html'><span itemprop='name'>ownagesbot</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-11-06T18:49:49Z'>
            <time itemprop='dateModified' datetime='2016-07-31T12:20:07Z' class='post-time'>
              July 31, 2016, 12:20pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <blockquote>When you write simple programs in C and C++, you don't care where the memory for your variables are allocated</blockquote>
<p>I stopped reading there… if I didn’t care then why would methods like malloc exist?</p>
<p>Also, I read zstars post, seems kinda lame to rip a tutorial, nevermind a fuckin shit one.</p>
      </div>

      <meta itemprop='headline' content='Heap Vs Stack in C++'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/heap-vs-stack-in-c/312724 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 08:59:06 GMT -->
</html>
