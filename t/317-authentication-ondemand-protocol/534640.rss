<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>317 Authentication/Ondemand Protocol</title>
    <link>https://forum.moparisthebest.com/t/317-authentication-ondemand-protocol/534640</link>
    <description>Here&#39;s an authentication/ondemand protocol document, could be useful to some.

[code]
- All of the clients traffic to the server it connects to is done via TCP.
- Noted that all other traffic is done through UDP, I cannot find this source.

- Whenever a client connects to the server the server writes 8 discarded bytes back.

ONDEMAND
==============

Client -&gt; Server [ Opcode: 15, Payload: [] ]

Client -&gt; Server [ Opcode: NONE, Payload: [ uint_8: index_id, uint_16: archive_id, uint_8: priority ]]

+ 0x2 -&gt; LOAD_TIME
+ 0x1 -&gt; ONLINE
+ 0x0 -&gt; OFFLINE

Server -&gt; Client [ Opcode: NONE, Payload: [ uint_8: index_id, uint_16: archive_id, uint_16: size, uint_8: block, uint_8[500]: data]]

+ When block is zero, the buffer for the archive is initialized. The first block read must be read as zero, otherwise the data can be sent out of order
  from that point forward.
+ The last chunk of data sent must be the last (k*500,end) bytes, at this point the client will recognize the request as finished and stop.

AUTHENTICATION
==============

Client -&gt; Server [ Opcode: 14, Payload: [ uint_8: name_hash ]]

+ Selects the login server to use for the session, probably assuming that it will be forward data to the server from that point forward.
+ login_servers[name_hash &amp; to_bits(AMOUNT_SERVERS)] 

Server -&gt; Client [ Opcode: ..., Payload: [ ... ]]

+ 0x00 -&gt; EXCHANGE_DATA_RESPONSE
+ 0x01 -&gt; WAIT_TWO_SECONDS_RESPONSE
+ 0x07 -&gt; WORLD_FULL_RESPONSE
+ 0x08 -&gt; LOGIN_SERVER_OFFLINE_RESPONSE
+ 0x09 -&gt; LOGIN_LIMIT_EXCEEDED_RESPONSE
+ 0x0B -&gt; SESSION_REJECTED_RESPONSE
+ 0x0E -&gt; SERVER_BEING_UPDATED_RESPONSE
+ 0x14 -&gt; INVALID_LOGIN_SERVER_RESPONSE

Client -&gt; Server [ Opcode: 16 | 18, Payload: [ ... ]]

+ Sends the data that will be used to verify and download the profile of the player that the client is wishing to authenticate.
 
Server -&gt; Client [ Opcode: ..., Payload: [ ... ]]

+ 0x02 -&gt; SUCCESSFUL_RESPONSE
+ 0x03 -&gt; INVALID_USER_OR_PASS_RESPONSE 
+ 0x04 -&gt; ACCOUNT_DISABLED_RESPONSE
+ 0x05 -&gt; ALREADY_ONLINE_RESPONSE
+ 0x06 -&gt; RUNESCAPE_UPDATED_RESPONSE
+ 0x0A -&gt; BAD_SESSION_ID_RESPONSE
+ 0x0C -&gt; COULD_NOT_COMPLETE_RESPONSE
+ 0x0F -&gt; RECONNECT_RESPONSE
+ 0x10 -&gt; LOGIN_ATTEMPTS_EXCEEDED
+ 0x11 -&gt; MEMBERS_ONLY_AREA_RESPONSE
+ 0x15 -&gt; PROFILE_TRANSFER_RESPONSE
[/code]</description>
    
    <lastBuildDate>Sat, 26 Oct 2013 16:05:54 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/317-authentication-ondemand-protocol/534640.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>317 Authentication/Ondemand Protocol</title>
        <dc:creator><![CDATA[@sinisoul sini]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sinisoul">@sinisoul</a> wrote:</p>
          <blockquote>
              <p>Timestamp? Never knew that Silab. No Yesteryear Im talking communication between a hub and other servers.</p>
<p>Released before? Sure. But this is more thoughtful of all the data presented and not ignoring the fact that I think that between the hub you connect to (TCP) the login/file stream/game server used UDP.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-authentication-ondemand-protocol/534640/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-authentication-ondemand-protocol/534640/5</link>
        <pubDate>Sat, 26 Oct 2013 16:05:54 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-534640-5</guid>
        <source url="https://forum.moparisthebest.com/t/317-authentication-ondemand-protocol/534640.rss">317 Authentication/Ondemand Protocol</source>
      </item>
      <item>
        <title>317 Authentication/Ondemand Protocol</title>
        <dc:creator><![CDATA[@silabsoft RuneAgent]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/silabsoft">@silabsoft</a> wrote:</p>
          <blockquote>
              <p>although discarded the first 8 bytes was a timestamp</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-authentication-ondemand-protocol/534640/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-authentication-ondemand-protocol/534640/4</link>
        <pubDate>Sat, 26 Oct 2013 15:57:03 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-534640-4</guid>
        <source url="https://forum.moparisthebest.com/t/317-authentication-ondemand-protocol/534640.rss">317 Authentication/Ondemand Protocol</source>
      </item>
      <item>
        <title>317 Authentication/Ondemand Protocol</title>
        <dc:creator><![CDATA[@Ashi Ashi]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ashi">@Ashi</a> wrote:</p>
          <blockquote>
              <p>All of this was released by Graham and other people before?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-authentication-ondemand-protocol/534640/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-authentication-ondemand-protocol/534640/3</link>
        <pubDate>Sat, 26 Oct 2013 08:52:45 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-534640-3</guid>
        <source url="https://forum.moparisthebest.com/t/317-authentication-ondemand-protocol/534640.rss">317 Authentication/Ondemand Protocol</source>
      </item>
      <item>
        <title>317 Authentication/Ondemand Protocol</title>
        <dc:creator><![CDATA[@Yesteryear Yesteryear]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/yesteryear">@Yesteryear</a> wrote:</p>
          <blockquote>
              <p>Good job. I can imagine some people will find this useful.</p>
<p>[code]</p>
<ul>
<li>0x2 -&gt; LOAD_TIME</li>
<li>0x1 -&gt; ONLINE</li>
<li>0x0 -&gt; OFFLINE[/code]<br>
Are these ondemand packet priorities?</li>
</ul>
<p>Also, how do you know that the client uses UDP? I know you stated you can’t find the source, but I don’t see any UDP connections in the <span class="hashtag">#317</span> client.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-authentication-ondemand-protocol/534640/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-authentication-ondemand-protocol/534640/2</link>
        <pubDate>Sat, 26 Oct 2013 04:22:50 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-534640-2</guid>
        <source url="https://forum.moparisthebest.com/t/317-authentication-ondemand-protocol/534640.rss">317 Authentication/Ondemand Protocol</source>
      </item>
      <item>
        <title>317 Authentication/Ondemand Protocol</title>
        <dc:creator><![CDATA[@sinisoul sini]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sinisoul">@sinisoul</a> wrote:</p>
          <blockquote>
              <p>Here’s an authentication/ondemand protocol document, could be useful to some.</p>
<pre><code class="lang-auto">- All of the clients traffic to the server it connects to is done via TCP.
- Noted that all other traffic is done through UDP, I cannot find this source.

- Whenever a client connects to the server the server writes 8 discarded bytes back.

ONDEMAND
==============

Client -&gt; Server [ Opcode: 15, Payload: [] ]

Client -&gt; Server [ Opcode: NONE, Payload: [ uint_8: index_id, uint_16: archive_id, uint_8: priority ]]

+ 0x2 -&gt; LOAD_TIME
+ 0x1 -&gt; ONLINE
+ 0x0 -&gt; OFFLINE

Server -&gt; Client [ Opcode: NONE, Payload: [ uint_8: index_id, uint_16: archive_id, uint_16: size, uint_8: block, uint_8[500]: data]]

+ When block is zero, the buffer for the archive is initialized. The first block read must be read as zero, otherwise the data can be sent out of order
  from that point forward.
+ The last chunk of data sent must be the last (k*500,end) bytes, at this point the client will recognize the request as finished and stop.

AUTHENTICATION
==============

Client -&gt; Server [ Opcode: 14, Payload: [ uint_8: name_hash ]]

+ Selects the login server to use for the session, probably assuming that it will be forward data to the server from that point forward.
+ login_servers[name_hash &amp; to_bits(AMOUNT_SERVERS)] 

Server -&gt; Client [ Opcode: ..., Payload: [ ... ]]

+ 0x00 -&gt; EXCHANGE_DATA_RESPONSE
+ 0x01 -&gt; WAIT_TWO_SECONDS_RESPONSE
+ 0x07 -&gt; WORLD_FULL_RESPONSE
+ 0x08 -&gt; LOGIN_SERVER_OFFLINE_RESPONSE
+ 0x09 -&gt; LOGIN_LIMIT_EXCEEDED_RESPONSE
+ 0x0B -&gt; SESSION_REJECTED_RESPONSE
+ 0x0E -&gt; SERVER_BEING_UPDATED_RESPONSE
+ 0x14 -&gt; INVALID_LOGIN_SERVER_RESPONSE

Client -&gt; Server [ Opcode: 16 | 18, Payload: [ ... ]]

+ Sends the data that will be used to verify and download the profile of the player that the client is wishing to authenticate.
 
Server -&gt; Client [ Opcode: ..., Payload: [ ... ]]

+ 0x02 -&gt; SUCCESSFUL_RESPONSE
+ 0x03 -&gt; INVALID_USER_OR_PASS_RESPONSE 
+ 0x04 -&gt; ACCOUNT_DISABLED_RESPONSE
+ 0x05 -&gt; ALREADY_ONLINE_RESPONSE
+ 0x06 -&gt; RUNESCAPE_UPDATED_RESPONSE
+ 0x0A -&gt; BAD_SESSION_ID_RESPONSE
+ 0x0C -&gt; COULD_NOT_COMPLETE_RESPONSE
+ 0x0F -&gt; RECONNECT_RESPONSE
+ 0x10 -&gt; LOGIN_ATTEMPTS_EXCEEDED
+ 0x11 -&gt; MEMBERS_ONLY_AREA_RESPONSE
+ 0x15 -&gt; PROFILE_TRANSFER_RESPONSE</code></pre>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-authentication-ondemand-protocol/534640/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-authentication-ondemand-protocol/534640/1</link>
        <pubDate>Fri, 25 Oct 2013 11:47:52 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-534640-1</guid>
        <source url="https://forum.moparisthebest.com/t/317-authentication-ondemand-protocol/534640.rss">317 Authentication/Ondemand Protocol</source>
      </item>
  </channel>
</rss>
