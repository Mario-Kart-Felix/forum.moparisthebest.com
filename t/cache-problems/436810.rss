<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Cache Problems</title>
    <link>https://forum.moparisthebest.com/t/cache-problems/436810</link>
    <description>okay so you load the client and it says its downloading the cache but sticks at 0%:

[IMG]http://i.imgur.com/cNm66.png[/img]

it creates what the signlink tells it to create inside of the folder what the signlink also creates.

i don&#39;t see why it won&#39;t download the cache and unzip it into the folder, i&#39;ve tried it with changing the run.bat to just 1 path to see if the problem was the unspecified paths but that hasn&#39;t worked either

Cachedownloader.java:

[code]
    import java.io.File;
    import java.io.IOException;
    import java.io.OutputStream;
    import java.io.FileWriter;
    import java.io.BufferedWriter;
    import java.io.BufferedOutputStream;
    import java.io.BufferedInputStream;
    import java.io.FileOutputStream;
    import java.io.FileInputStream;
    import java.io.InputStream;
    import java.net.URLConnection;
    import java.net.URL;
    import java.util.zip.ZipFile;
    import java.util.zip.ZipEntry;
    import java.util.zip.ZipInputStream;
    import java.util.Enumeration;
     
    import sign.signlink;
     
    public class CacheDownloader {
     
            private client client;
     
            private final int BUFFER = 1024;
     
            /*
             * Only things you need to change
             *
             */
            private final int VERSION = 1; // Version of cache
            private String cacheLink = &quot;http://dl.dropbox.com/u/65113766/MythScape.zip&quot;; // Link to cache
     
            private String fileToExtract = getCacheDir() + getArchivedName();
     
            public CacheDownloader(client client) {
                    this.client = client;
            }
     
            private void drawLoadingText(String text) {
                    client.drawLoadingText(35, text);
                    System.out.println(text);
            }
     
     
            private void drawLoadingText(int amount, String text) {
                    client.drawLoadingText(amount, text);
                    System.out.println(text);
            }
     
            private String getCacheDir() {
                    return signlink.findcachedir();
            }
     
            private String getCacheLink() {
                    return cacheLink;
            }
     
            private int getCacheVersion() {
                    return VERSION;
            }
     
            public CacheDownloader downloadCache() {
                    try {
                    File location = new File(getCacheDir());
                    File version = new File(getCacheDir() + &quot;/cacheVersion&quot; + getCacheVersion() + &quot;.dat&quot;);
                   
                    if(!location.exists()) {
                            //drawLoadingText(&quot;Downloading Cache Please wait...&quot;);
                            downloadFile(getCacheLink(), getArchivedName());
     
                            unZip();
                            System.out.println(&quot;UNZIP&quot;);
     
                            BufferedWriter versionFile = new BufferedWriter(new FileWriter(getCacheDir() + &quot;/cacheVersion&quot; + getCacheVersion() + &quot;.dat&quot;));
                            versionFile.close();
                    } else {
                            if(!version.exists()) {
                                    //drawLoadingText(&quot;Downloading Cache Please wait...&quot;);
                                    downloadFile(getCacheLink(), getArchivedName());
     
                                    unZip();
                                    System.out.println(&quot;UNZIP&quot;);
     
                                    BufferedWriter versionFile = new BufferedWriter(new FileWriter(getCacheDir() + &quot;/cacheVersion&quot; + getCacheVersion() + &quot;.dat&quot;));
                                    versionFile.close();
     
                            } else {
                                    return null;
                            }
                    }
                    } catch(Exception e) {
     
                    }
                    return null;
            }
           
            private void downloadFile(String adress, String localFileName) {
                    OutputStream out = null;
                    URLConnection conn;
                    InputStream in = null;
                   
                    try {
     
                            URL url = new URL(adress);
                            out = new BufferedOutputStream(
                                    new FileOutputStream(getCacheDir() + &quot;/&quot; +localFileName));
     
                            conn = url.openConnection();
                            in = conn.getInputStream();
                   
                            byte[] data = new byte[BUFFER];
           
                            int numRead;
                            long numWritten = 0;
                            int length = conn.getContentLength();
     
           
                            while((numRead = in.read(data)) != -1) {
                                    out.write(data, 0, numRead);
                                    numWritten += numRead;
     
                                        int percentage = (int)(((double)numWritten / (double)length) * 100D);
                                    drawLoadingText(percentage, &quot;Downloading Cache &quot; + percentage + &quot;%&quot;);
     
                            }
     
                            System.out.println(localFileName + &quot;\t&quot; + numWritten);
                            drawLoadingText(&quot;Finished downloading &quot;+getArchivedName()+&quot;!&quot;);
     
                    } catch (Exception exception) {
                            exception.printStackTrace();
                    } finally {
                            try {
                                    if (in != null) {
                                            in.close();
                                    }
                                    if (out != null) {
                                            out.close();
                                    }
                            } catch (IOException ioe) {
                            }
                    }
     
            }
     
            private String getArchivedName() {
                    int lastSlashIndex = getCacheLink().lastIndexOf(&#39;/&#39;);
                    if (lastSlashIndex &gt;= 0
                            &amp;&amp; lastSlashIndex &lt; getCacheLink().length() -1) {
                            return getCacheLink().substring(lastSlashIndex + 1);
                    } else {
                            System.err.println(&quot;error retreiving archivaed name.&quot;);
                    }
                    return &quot;&quot;;
            }
     
     
     
            private void unZip() {
     
                try {
                        InputStream in =
                        new BufferedInputStream(new FileInputStream(fileToExtract));
                    ZipInputStream zin = new ZipInputStream(in);
                    ZipEntry e;
     
                    while((e=zin.getNextEntry()) != null) {
     
                                   if(e.isDirectory()) {
                            (new File(getCacheDir() + e.getName())).mkdir();
                                   } else {
     
                        if (e.getName().equals(fileToExtract)) {
                            unzip(zin, fileToExtract);
                            break;
                        }
                                   unzip(zin, getCacheDir() + e.getName());
                        }
                        System.out.println(&quot;unzipping2 &quot; + e.getName());
                    }
                    zin.close();
     
                } catch(Exception e) {
                    e.printStackTrace();
                }
            }
     
            private void unzip(ZipInputStream zin, String s)
                    throws IOException {
     
                    FileOutputStream out = new FileOutputStream(s);
                    //System.out.println(&quot;unzipping &quot; + s);
                    byte [] b = new byte[BUFFER];
                    int len = 0;
     
                    while ((len = zin.read(b)) != -1) {
                            out.write(b,0,len);
                    }
                    out.close();
            }
    } 
[/code]

Signlink.java
[code]
 package sign;

import java.applet.Applet;
import java.io.*;
import java.net.*;

/**
 * signlink.java
 *
 * @author RiiPiiNFtW &lt;Stuart Perera&gt;
 * MSN: satuartperera@hotmail.com
 *
 * This class was rewritten from the original because people with macs and linux computers could not play with the signlink
 * based off windows alone. This rewritten signlink finds the user.home to determine which place to download the cache to
 * depending on the OS. This signlink is universal however and works on any OS.
 *
 */

 public final class signlink
    implements Runnable
{
  public static final String SEPARATOR = System.getProperty(&quot;file.separator&quot;);
    public static void startpriv(InetAddress inetaddress)
    {
        threadliveid = (int)(Math.random() * 99999999D);
        if(active)
        {
            try
            {
                Thread.sleep(500L);
            }
            catch(Exception _ex) { }
            active = false;
        }
        socketreq = 0;
        threadreq = null;
        dnsreq = null;
        savereq = null;
        urlreq = null;
        socketip = inetaddress;
        Thread thread = new Thread(new signlink());
        thread.setDaemon(true);
        thread.start();
        while(!active)
            try
            {
                Thread.sleep(50L);
            }
            catch(Exception _ex) { }
    }

    public void run()
    {
        active = true;
        String s = findcachedir();
        uid = getuid(s);
        try
        {
            cache_dat = new RandomAccessFile(s + &quot;main_file_cache.dat&quot;, &quot;rw&quot;);
            for(int j = 0; j &lt; 5; j++)
                cache_idx[j] = new RandomAccessFile(s + &quot;main_file_cache.idx&quot; + j, &quot;rw&quot;);

        }
        catch(Exception exception)
        {
            exception.printStackTrace();
        }
        for(int i = threadliveid; threadliveid == i;)
        {
            if(socketreq != 0)
            {
                try
                {
                    socket = new Socket(socketip, socketreq);
                }
                catch(Exception _ex)
                {
                    socket = null;
                }
                socketreq = 0;
            } else
            if(threadreq != null)
            {
                Thread thread = new Thread(threadreq);
                thread.setDaemon(true);
                thread.start();
                thread.setPriority(threadreqpri);
                threadreq = null;
            } else
            if(dnsreq != null)
            {
                try
                {
                    dns = InetAddress.getByName(dnsreq).getHostName();
                }
                catch(Exception _ex)
                {
                    dns = &quot;unknown&quot;;
                }
                dnsreq = null;
            } else
            if(savereq != null)
            {
                if(savebuf != null)
                    try
                    {
                        FileOutputStream fileoutputstream = new FileOutputStream(s + savereq);
                        fileoutputstream.write(savebuf, 0, savelen);
                        fileoutputstream.close();
                    }
                    catch(Exception _ex) { }
                if(waveplay)
                {
                    waveplay = false;
                }
                if(midiplay)
                {
                    midi = s + savereq;
                    midiplay = false;
                }
                savereq = null;
            } else
            if(urlreq != null)
            {
                try
                {
                    System.out.println(&quot;urlstream&quot;);
                    urlstream = new DataInputStream((new URL(mainapp.getCodeBase(), urlreq)).openStream());
                }
                catch(Exception _ex)
                {
                    urlstream = null;
                }
                urlreq = null;
            }
            try
            {
                Thread.sleep(50L);
            }
            catch(Exception _ex) { }
        }

    }


    public static final String homeDir()
    {
        return System.getProperty(&quot;user.home&quot;);
    }

    public static final String appendSlash()
    {
        return &quot;/&quot;;
    }

    public static String cacheName()
    {
        return &quot;MythScape&quot;;
    }

    public static String universalCacheDir()
    {
        return (new StringBuilder()).append(homeDir()).append(appendSlash()).append(cacheName()).toString();
    }

public static String findcachedir()
	{
		boolean exists = (new File(System.getProperty(&quot;user.home&quot;) + &quot;/MythScape/&quot;)).exists();
		if (exists) {
			System.out.println(&quot;Directory exists&quot;);
			return System.getProperty(&quot;user.home&quot;) + &quot;/MythScape/&quot;;
		} else {
			File f = new File(System.getProperty(&quot;user.home&quot;) + &quot;/MythScape/&quot;);
			f.mkdir();
			System.out.println(&quot;Directory doesnt exist, making directory&quot;);
			return System.getProperty(&quot;user.home&quot;) + &quot;/MythScape/&quot;;
		}
	}
    private static int getuid(String s) {
        return 234523;
    }

    public static synchronized Socket opensocket(int i)
        throws IOException
    {
        for(socketreq = i; socketreq != 0;)
            try
            {
                Thread.sleep(50L);
            }
            catch(Exception _ex) { }

        if(socket == null)
            throw new IOException(&quot;could not open socket&quot;);
        else
            return socket;
    }

    public static synchronized DataInputStream openurl(String s)
        throws IOException
    {
        for(urlreq = s; urlreq != null;)
            try
            {
                Thread.sleep(50L);
            }
            catch(Exception _ex) { }

        if(urlstream == null)
            throw new IOException(&quot;could not open: &quot; + s);
        else
            return urlstream;
    }

    public static synchronized void dnslookup(String s)
    {
        dns = s;
        dnsreq = s;
    }

    public static synchronized void startthread(Runnable runnable, int i)
    {
        threadreqpri = i;
        threadreq = runnable;
    }

    public static synchronized boolean wavesave(byte abyte0[], int i)
    {
        if(i &gt; 0x1e8480)
            return false;
        if(savereq != null)
        {
            return false;
        } else
        {
            wavepos = (wavepos + 1) % 5;
            savelen = i;
            savebuf = abyte0;
            waveplay = true;
            savereq = &quot;sound&quot; + wavepos + &quot;.wav&quot;;
            return true;
        }
    }

    public static synchronized boolean wavereplay()
    {
        if(savereq != null)
        {
            return false;
        } else
        {
            savebuf = null;
            waveplay = true;
            savereq = &quot;sound&quot; + wavepos + &quot;.wav&quot;;
            return true;
        }
    }

    public static synchronized void midisave(byte abyte0[], int i)
    {
        if(i &gt; 0x1e8480)
            return;
        if(savereq != null)
        {
        } else
        {
            midipos = (midipos + 1) % 5;
            savelen = i;
            savebuf = abyte0;
            midiplay = true;
            savereq = &quot;jingle&quot; + midipos + &quot;.mid&quot;;
        }
    }

    public static void reporterror(String s)
    {
        System.out.println(&quot;Error: &quot; + s);
    }

    private signlink()
    {
    }

    public static final int clientversion = 317;
    public static int uid;
    public static int storeid = 32;
    public static RandomAccessFile cache_dat = null;
    public static final RandomAccessFile[] cache_idx = new RandomAccessFile[5];
    public static boolean sunjava;
    public static Applet mainapp = null;
    private static boolean active;
    private static int threadliveid;
    private static InetAddress socketip;
    private static int socketreq;
    private static Socket socket = null;
    private static int threadreqpri = 1;
    private static Runnable threadreq = null;
    private static String dnsreq = null;
    public static String dns = null;
    private static String urlreq = null;
    private static DataInputStream urlstream = null;
    private static int savelen;
    private static String savereq = null;
    private static byte[] savebuf = null;
    private static boolean midiplay;
    private static int midipos;
    public static String midi = null;
    public static int midivol;
    public static int midifade;
    private static boolean waveplay;
    private static int wavepos;
    public static int wavevol;
    public static boolean reporterror = true;
    public static String errorname = &quot;&quot;;

}
[/code]</description>
    
    <lastBuildDate>Tue, 20 Mar 2012 02:08:18 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/cache-problems/436810.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Cache Problems</title>
        <dc:creator><![CDATA[@Kidpaparoach Kidpaparoach]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/kidpaparoach">@Kidpaparoach</a> wrote:</p>
          <blockquote>
              <p>Seems bizarre, I’m honestly not sure… Possibly it may due to the fact this client seems to be attempting to be user friendly however it may be interfering with what your doing. Thats my only thoughts on it…:. Sorry, not sure. You can use another dspk client which loads the same revision most probably.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cache-problems/436810/23">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cache-problems/436810/23</link>
        <pubDate>Tue, 20 Mar 2012 02:08:18 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-436810-23</guid>
        <source url="https://forum.moparisthebest.com/t/cache-problems/436810.rss">Cache Problems</source>
      </item>
      <item>
        <title>Cache Problems</title>
        <dc:creator><![CDATA[@mage_pwns mage pwns]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/mage_pwns">@mage_pwns</a> wrote:</p>
          <blockquote>
              <p>well the cmd has always given the error “cannot find the specified path” but thats because it looks for 6 different types of java and runs from one that it can find but there is no error, just spams saying its downloading cache 0% like 20 times</p>
<pre><code class="lang-auto">IGNORE ALL 'CANNOT FUND PATH SPECIFIED' ERRORS.
Auto Detection has found a compatable system.
Initiating Client. Please Standby.
Auto Detection has retrieved a 64 bit system.
Initiating Client (x64). Please Standby.

The system cannot find the path specified.
Exception in thread "main" java.lang.UnsupportedClassVersionError: client : Unsu
pported major.minor version 51.0
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClassCond(Unknown Source)
        at java.lang.ClassLoader.defineClass(Unknown Source)
        at java.security.SecureClassLoader.defineClass(Unknown Source)
        at java.net.URLClassLoader.defineClass(Unknown Source)
        at java.net.URLClassLoader.access$000(Unknown Source)
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
Could not find the main class: client.  Program will exit.
The system cannot find the path specified.
Auto Detection completed. 32 Bit system retrieved.
Initiating Client (x86). Please Standby.

The system cannot find the path specified.
The system cannot find the path specified.
Directory exists
Directory exists
Directory exists
Directory exists
Directory exists
Downloading Cache 0%
Downloading Cache 0%
Downloading Cache 0%
Downloading Cache 0%
Downloading Cache 0%
Downloading Cache 0%
Downloading Cache 0%
Downloading Cache 0%
Downloading Cache 0%
Downloading Cache 0%
Downloading Cache 0%
Downloading Cache 0%
Downloading Cache 0%
Downloading Cache 0%
Downloading Cache 0%
Downloading Cache 0%
Downloading Cache 0%
Downloading Cache 0%
Downloading Cache 0%
Downloading Cache 0%
Downloading Cache 0%
Downloading Cache 0%
Downloading Cache 0%
Downloading Cache 0%
Downloading Cache 0%
Downloading Cache 0%
Downloading Cache 0%
Downloading Cache 0%
Downloading Cache 0%</code></pre>
<p>the unsupported majoy.minor is because i also have JRE6 and it loads that 1 first, before moving to the JRE 7 file, thats all it says :S</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cache-problems/436810/22">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cache-problems/436810/22</link>
        <pubDate>Tue, 20 Mar 2012 01:53:45 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-436810-22</guid>
        <source url="https://forum.moparisthebest.com/t/cache-problems/436810.rss">Cache Problems</source>
      </item>
      <item>
        <title>Cache Problems</title>
        <dc:creator><![CDATA[@Kidpaparoach Kidpaparoach]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/kidpaparoach">@Kidpaparoach</a> wrote:</p>
          <blockquote>
              <aside class="quote quote-modified" data-post="20" data-topic="436810">
<div class="title">
<div class="quote-controls"></div>
 mage pwns:</div>
<blockquote>
<p>im using mythscape v2, the dspk or something like that i think i saw in the client.java somewhere, and the client doesnt download the cache, if i go to the link personally it allows me to download the cache fine, i’m only a beginner and so followed a tutorial on making the webclient, its confusing me now :S</p>
</blockquote>
</aside>
<p>Ah, well all I can really reccomend is with your backup of the client retry it and if that doesn’t work try to make a webclient with a differently tutorial. Also, post the cmd when this issue happens with the client.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cache-problems/436810/21">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cache-problems/436810/21</link>
        <pubDate>Tue, 20 Mar 2012 01:49:55 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-436810-21</guid>
        <source url="https://forum.moparisthebest.com/t/cache-problems/436810.rss">Cache Problems</source>
      </item>
      <item>
        <title>Cache Problems</title>
        <dc:creator><![CDATA[@mage_pwns mage pwns]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/mage_pwns">@mage_pwns</a> wrote:</p>
          <blockquote>
              <p>im using mythscape v2, the dspk or something like that i think i saw in the client.java somewhere, and the client doesnt download the cache, if i go to the link personally it allows me to download the cache fine, i’m only a beginner and so followed a tutorial on making the webclient, its confusing me now :S</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cache-problems/436810/20">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cache-problems/436810/20</link>
        <pubDate>Tue, 20 Mar 2012 01:45:39 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-436810-20</guid>
        <source url="https://forum.moparisthebest.com/t/cache-problems/436810.rss">Cache Problems</source>
      </item>
      <item>
        <title>Cache Problems</title>
        <dc:creator><![CDATA[@Kidpaparoach Kidpaparoach]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/kidpaparoach">@Kidpaparoach</a> wrote:</p>
          <blockquote>
              <aside class="quote quote-modified" data-post="17" data-topic="436810">
<div class="title">
<div class="quote-controls"></div>
 mage pwns:</div>
<blockquote>
<p>Im using a PI client, and nope it hasn’t allowed me to make it download the cache, i changed the signlink to a different one that  actually downloads the cache instead of crashing the client completely, i don’t see why it can start downloading the cache then just stop :S</p>
</blockquote>
</aside>
<p>I know you are but what version, there are a lot of different branches of the client. Whatchya mean, what doesn’t download the cache… Please rephrase that, I don’t understand. To your last bit which I understand &gt;.&lt;, it’ll be defunct code/an application is blocking it best solution is to find out what then solve it(:</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cache-problems/436810/19">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cache-problems/436810/19</link>
        <pubDate>Tue, 20 Mar 2012 01:41:38 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-436810-19</guid>
        <source url="https://forum.moparisthebest.com/t/cache-problems/436810.rss">Cache Problems</source>
      </item>
      <item>
        <title>Cache Problems</title>
        <dc:creator><![CDATA[@Ruby_Forums_Coder Ruby]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ruby_forums_coder">@Ruby_Forums_Coder</a> wrote:</p>
          <blockquote>
              <p>Try re-uploading the <span class="bbcode-b">whole</span> cache if you haven’t already.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cache-problems/436810/18">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cache-problems/436810/18</link>
        <pubDate>Tue, 20 Mar 2012 01:39:31 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-436810-18</guid>
        <source url="https://forum.moparisthebest.com/t/cache-problems/436810.rss">Cache Problems</source>
      </item>
      <item>
        <title>Cache Problems</title>
        <dc:creator><![CDATA[@mage_pwns mage pwns]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/mage_pwns">@mage_pwns</a> wrote:</p>
          <blockquote>
              <p>Im using a PI client, and nope it hasn’t allowed me to make it download the cache, i changed the signlink to a different one that  actually downloads the cache instead of crashing the client completely, i don’t see why it can start downloading the cache then just stop :S</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cache-problems/436810/17">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cache-problems/436810/17</link>
        <pubDate>Tue, 20 Mar 2012 01:38:25 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-436810-17</guid>
        <source url="https://forum.moparisthebest.com/t/cache-problems/436810.rss">Cache Problems</source>
      </item>
      <item>
        <title>Cache Problems</title>
        <dc:creator><![CDATA[@Kidpaparoach Kidpaparoach]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/kidpaparoach">@Kidpaparoach</a> wrote:</p>
          <blockquote>
              <aside class="quote quote-modified" data-post="15" data-topic="436810">
<div class="title">
<div class="quote-controls"></div>
 mage pwns:</div>
<blockquote>
<p>yeh the whole cache is in the drop box, i’ve double checked that, it downloads different amounts sometimes though, but never above 104KB i think is the most i’ve seen, it cant be a slow connection because i’ve tried downloading things after and its been fine :S</p>
</blockquote>
</aside>
<p>Hmmm, intresting. Have you tried uploading it to fileden or something and see how well it works? It could be dropbox itself possibly. My take on whats happening is it finds the download and starts but something stops it/acts as if its fully done so it unzips what its got and obviously that isn’t enough which leads you to the problem you have at the moment. What client are you using, did you make any modifications to it recently?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cache-problems/436810/16">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cache-problems/436810/16</link>
        <pubDate>Tue, 20 Mar 2012 01:35:27 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-436810-16</guid>
        <source url="https://forum.moparisthebest.com/t/cache-problems/436810.rss">Cache Problems</source>
      </item>
      <item>
        <title>Cache Problems</title>
        <dc:creator><![CDATA[@mage_pwns mage pwns]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/mage_pwns">@mage_pwns</a> wrote:</p>
          <blockquote>
              <p>yeh the whole cache is in the drop box, i’ve double checked that, it downloads different amounts sometimes though, but never above 104KB i think is the most i’ve seen, it cant be a slow connection because i’ve tried downloading things after and its been fine :S</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cache-problems/436810/15">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cache-problems/436810/15</link>
        <pubDate>Tue, 20 Mar 2012 01:33:24 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-436810-15</guid>
        <source url="https://forum.moparisthebest.com/t/cache-problems/436810.rss">Cache Problems</source>
      </item>
      <item>
        <title>Cache Problems</title>
        <dc:creator><![CDATA[@Kidpaparoach Kidpaparoach]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/kidpaparoach">@Kidpaparoach</a> wrote:</p>
          <blockquote>
              <p>Its not downloading the cache. It knows where it is and it starts but it only downloads 70kb and extracts it. Are you sure you uploaded the whole cache?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cache-problems/436810/14">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cache-problems/436810/14</link>
        <pubDate>Mon, 19 Mar 2012 23:25:46 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-436810-14</guid>
        <source url="https://forum.moparisthebest.com/t/cache-problems/436810.rss">Cache Problems</source>
      </item>
      <item>
        <title>Cache Problems</title>
        <dc:creator><![CDATA[@Tutorial Tutorial]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/tutorial">@Tutorial</a> wrote:</p>
          <blockquote>
              <p>There is no other answer… unless your signlink class is corrupt…?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cache-problems/436810/13">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cache-problems/436810/13</link>
        <pubDate>Mon, 19 Mar 2012 23:24:42 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-436810-13</guid>
        <source url="https://forum.moparisthebest.com/t/cache-problems/436810.rss">Cache Problems</source>
      </item>
      <item>
        <title>Cache Problems</title>
        <dc:creator><![CDATA[@Ruby_Forums_Coder Ruby]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ruby_forums_coder">@Ruby_Forums_Coder</a> wrote:</p>
          <blockquote>
              <p>Maybe you’ve fucked the link up somewhere?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cache-problems/436810/12">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cache-problems/436810/12</link>
        <pubDate>Mon, 19 Mar 2012 23:21:55 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-436810-12</guid>
        <source url="https://forum.moparisthebest.com/t/cache-problems/436810.rss">Cache Problems</source>
      </item>
      <item>
        <title>Cache Problems</title>
        <dc:creator><![CDATA[@mage_pwns mage pwns]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/mage_pwns">@mage_pwns</a> wrote:</p>
          <blockquote>
              <p>i used fileden before i just get the same problems, i duno why it won’t download :s</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cache-problems/436810/11">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cache-problems/436810/11</link>
        <pubDate>Mon, 19 Mar 2012 23:20:06 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-436810-11</guid>
        <source url="https://forum.moparisthebest.com/t/cache-problems/436810.rss">Cache Problems</source>
      </item>
      <item>
        <title>Cache Problems</title>
        <dc:creator><![CDATA[@Ruby_Forums_Coder Ruby]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ruby_forums_coder">@Ruby_Forums_Coder</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="9" data-topic="436810">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/tutorial/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> Tutorial:</div>
<blockquote>
<p>Dropbox is the worst file host to use. Try uploading it to FileDen.</p>
</blockquote>
</aside>
<p>I just use my webhost…</p>
<p>upload it to public_html and then go to the link <a href="http://site.com/cache.zip" rel="nofollow noopener">http://site.com/cache.zip</a></p>
<p>it downloads the very same as any other file host.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cache-problems/436810/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cache-problems/436810/10</link>
        <pubDate>Mon, 19 Mar 2012 12:45:36 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-436810-10</guid>
        <source url="https://forum.moparisthebest.com/t/cache-problems/436810.rss">Cache Problems</source>
      </item>
      <item>
        <title>Cache Problems</title>
        <dc:creator><![CDATA[@Tutorial Tutorial]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/tutorial">@Tutorial</a> wrote:</p>
          <blockquote>
              <p>Dropbox is the worst file host to use. Try uploading it to FileDen.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cache-problems/436810/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cache-problems/436810/9</link>
        <pubDate>Mon, 19 Mar 2012 01:27:55 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-436810-9</guid>
        <source url="https://forum.moparisthebest.com/t/cache-problems/436810.rss">Cache Problems</source>
      </item>
      <item>
        <title>Cache Problems</title>
        <dc:creator><![CDATA[@mage_pwns mage pwns]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/mage_pwns">@mage_pwns</a> wrote:</p>
          <blockquote>
              <p>anybody else have an idea whats wrong with this? :S</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cache-problems/436810/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cache-problems/436810/8</link>
        <pubDate>Sun, 18 Mar 2012 21:52:06 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-436810-8</guid>
        <source url="https://forum.moparisthebest.com/t/cache-problems/436810.rss">Cache Problems</source>
      </item>
      <item>
        <title>Cache Problems</title>
        <dc:creator><![CDATA[@Ruby_Forums_Coder Ruby]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ruby_forums_coder">@Ruby_Forums_Coder</a> wrote:</p>
          <blockquote>
              <p>I’m really not sure haha.</p>
<p>If anything, it’ll be cachedownloader.java, try another one.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cache-problems/436810/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cache-problems/436810/7</link>
        <pubDate>Sun, 18 Mar 2012 21:35:24 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-436810-7</guid>
        <source url="https://forum.moparisthebest.com/t/cache-problems/436810.rss">Cache Problems</source>
      </item>
      <item>
        <title>Cache Problems</title>
        <dc:creator><![CDATA[@mage_pwns mage pwns]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/mage_pwns">@mage_pwns</a> wrote:</p>
          <blockquote>
              <p>yeah it’s PI, i’ve tried a few different PI cachedownloader.java and none of them have worked, this is what is in the folder where the cache needs to be downloaded to:</p>
<p><img src="http://i.imgur.com/ysn58.png" alt width="585" height="172"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cache-problems/436810/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cache-problems/436810/6</link>
        <pubDate>Sun, 18 Mar 2012 21:33:15 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-436810-6</guid>
        <source url="https://forum.moparisthebest.com/t/cache-problems/436810.rss">Cache Problems</source>
      </item>
      <item>
        <title>Cache Problems</title>
        <dc:creator><![CDATA[@Ruby_Forums_Coder Ruby]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ruby_forums_coder">@Ruby_Forums_Coder</a> wrote:</p>
          <blockquote>
              <p>If you’re using PI it’ll be problems with your CacheDownloader.java</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cache-problems/436810/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cache-problems/436810/5</link>
        <pubDate>Sun, 18 Mar 2012 21:31:36 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-436810-5</guid>
        <source url="https://forum.moparisthebest.com/t/cache-problems/436810.rss">Cache Problems</source>
      </item>
      <item>
        <title>Cache Problems</title>
        <dc:creator><![CDATA[@mage_pwns mage pwns]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/mage_pwns">@mage_pwns</a> wrote:</p>
          <blockquote>
              <p>the cache link is from drop box, i’ve been told its the best one to use, and i’ve made sure that it is called the same thing as the cache folder, it downloads about 70kb of the cache and puts that into the folder created by signlink, but never goes above it, and doesnt unzip anything, any ideas? :S</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cache-problems/436810/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cache-problems/436810/4</link>
        <pubDate>Sun, 18 Mar 2012 21:30:25 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-436810-4</guid>
        <source url="https://forum.moparisthebest.com/t/cache-problems/436810.rss">Cache Problems</source>
      </item>
      <item>
        <title>Cache Problems</title>
        <dc:creator><![CDATA[@Ruby_Forums_Coder Ruby]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ruby_forums_coder">@Ruby_Forums_Coder</a> wrote:</p>
          <blockquote>
              <p>I think it does this because it can’t find the cache file in the c: drive, take a look at the name of your cache folder, the name of the cache folder that the source/client is looking for and the cache download link.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cache-problems/436810/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cache-problems/436810/3</link>
        <pubDate>Sun, 18 Mar 2012 21:28:37 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-436810-3</guid>
        <source url="https://forum.moparisthebest.com/t/cache-problems/436810.rss">Cache Problems</source>
      </item>
      <item>
        <title>Cache Problems</title>
        <dc:creator><![CDATA[@Tutorial Tutorial]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/tutorial">@Tutorial</a> wrote:</p>
          <blockquote>
              <p>Does it ever freeze up/turn white or does it always stay at 0%. Maybe the webhost isn’t allowing the cache to be downloaded.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cache-problems/436810/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cache-problems/436810/2</link>
        <pubDate>Sun, 18 Mar 2012 21:27:51 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-436810-2</guid>
        <source url="https://forum.moparisthebest.com/t/cache-problems/436810.rss">Cache Problems</source>
      </item>
      <item>
        <title>Cache Problems</title>
        <dc:creator><![CDATA[@mage_pwns mage pwns]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/mage_pwns">@mage_pwns</a> wrote:</p>
          <blockquote>
              <p>okay so you load the client and it says its downloading the cache but sticks at 0%:</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="http://i.imgur.com/cNm66.png" title="cNm66.png" rel="nofollow noopener"><img src="http://i.imgur.com/cNm66.png" alt width="690" height="481"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use xlink:href="#far-image"></use></svg><span class="filename">cNm66.png</span><span class="informations">785×548</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div></p>
<p>it creates what the signlink tells it to create inside of the folder what the signlink also creates.</p>
<p>i don’t see why it won’t download the cache and unzip it into the folder, i’ve tried it with changing the run.bat to just 1 path to see if the problem was the unspecified paths but that hasn’t worked either</p>
<p>Cachedownloader.java:</p>
<pre><code class="lang-auto">    import java.io.File;
    import java.io.IOException;
    import java.io.OutputStream;
    import java.io.FileWriter;
    import java.io.BufferedWriter;
    import java.io.BufferedOutputStream;
    import java.io.BufferedInputStream;
    import java.io.FileOutputStream;
    import java.io.FileInputStream;
    import java.io.InputStream;
    import java.net.URLConnection;
    import java.net.URL;
    import java.util.zip.ZipFile;
    import java.util.zip.ZipEntry;
    import java.util.zip.ZipInputStream;
    import java.util.Enumeration;
     
    import sign.signlink;
     
    public class CacheDownloader {
     
            private client client;
     
            private final int BUFFER = 1024;
     
            /*
             * Only things you need to change
             *
             */
            private final int VERSION = 1; // Version of cache
            private String cacheLink = "http://dl.dropbox.com/u/65113766/MythScape.zip"; // Link to cache
     
            private String fileToExtract = getCacheDir() + getArchivedName();
     
            public CacheDownloader(client client) {
                    this.client = client;
            }
     
            private void drawLoadingText(String text) {
                    client.drawLoadingText(35, text);
                    System.out.println(text);
            }
     
     
            private void drawLoadingText(int amount, String text) {
                    client.drawLoadingText(amount, text);
                    System.out.println(text);
            }
     
            private String getCacheDir() {
                    return signlink.findcachedir();
            }
     
            private String getCacheLink() {
                    return cacheLink;
            }
     
            private int getCacheVersion() {
                    return VERSION;
            }
     
            public CacheDownloader downloadCache() {
                    try {
                    File location = new File(getCacheDir());
                    File version = new File(getCacheDir() + "/cacheVersion" + getCacheVersion() + ".dat");
                   
                    if(!location.exists()) {
                            //drawLoadingText("Downloading Cache Please wait...");
                            downloadFile(getCacheLink(), getArchivedName());
     
                            unZip();
                            System.out.println("UNZIP");
     
                            BufferedWriter versionFile = new BufferedWriter(new FileWriter(getCacheDir() + "/cacheVersion" + getCacheVersion() + ".dat"));
                            versionFile.close();
                    } else {
                            if(!version.exists()) {
                                    //drawLoadingText("Downloading Cache Please wait...");
                                    downloadFile(getCacheLink(), getArchivedName());
     
                                    unZip();
                                    System.out.println("UNZIP");
     
                                    BufferedWriter versionFile = new BufferedWriter(new FileWriter(getCacheDir() + "/cacheVersion" + getCacheVersion() + ".dat"));
                                    versionFile.close();
     
                            } else {
                                    return null;
                            }
                    }
                    } catch(Exception e) {
     
                    }
                    return null;
            }
           
            private void downloadFile(String adress, String localFileName) {
                    OutputStream out = null;
                    URLConnection conn;
                    InputStream in = null;
                   
                    try {
     
                            URL url = new URL(adress);
                            out = new BufferedOutputStream(
                                    new FileOutputStream(getCacheDir() + "/" +localFileName));
     
                            conn = url.openConnection();
                            in = conn.getInputStream();
                   
                            byte[] data = new byte[BUFFER];
           
                            int numRead;
                            long numWritten = 0;
                            int length = conn.getContentLength();
     
           
                            while((numRead = in.read(data)) != -1) {
                                    out.write(data, 0, numRead);
                                    numWritten += numRead;
     
                                        int percentage = (int)(((double)numWritten / (double)length) * 100D);
                                    drawLoadingText(percentage, "Downloading Cache " + percentage + "%");
     
                            }
     
                            System.out.println(localFileName + "\t" + numWritten);
                            drawLoadingText("Finished downloading "+getArchivedName()+"!");
     
                    } catch (Exception exception) {
                            exception.printStackTrace();
                    } finally {
                            try {
                                    if (in != null) {
                                            in.close();
                                    }
                                    if (out != null) {
                                            out.close();
                                    }
                            } catch (IOException ioe) {
                            }
                    }
     
            }
     
            private String getArchivedName() {
                    int lastSlashIndex = getCacheLink().lastIndexOf('/');
                    if (lastSlashIndex &gt;= 0
                            &amp;&amp; lastSlashIndex &lt; getCacheLink().length() -1) {
                            return getCacheLink().substring(lastSlashIndex + 1);
                    } else {
                            System.err.println("error retreiving archivaed name.");
                    }
                    return "";
            }
     
     
     
            private void unZip() {
     
                try {
                        InputStream in =
                        new BufferedInputStream(new FileInputStream(fileToExtract));
                    ZipInputStream zin = new ZipInputStream(in);
                    ZipEntry e;
     
                    while((e=zin.getNextEntry()) != null) {
     
                                   if(e.isDirectory()) {
                            (new File(getCacheDir() + e.getName())).mkdir();
                                   } else {
     
                        if (e.getName().equals(fileToExtract)) {
                            unzip(zin, fileToExtract);
                            break;
                        }
                                   unzip(zin, getCacheDir() + e.getName());
                        }
                        System.out.println("unzipping2 " + e.getName());
                    }
                    zin.close();
     
                } catch(Exception e) {
                    e.printStackTrace();
                }
            }
     
            private void unzip(ZipInputStream zin, String s)
                    throws IOException {
     
                    FileOutputStream out = new FileOutputStream(s);
                    //System.out.println("unzipping " + s);
                    byte [] b = new byte[BUFFER];
                    int len = 0;
     
                    while ((len = zin.read(b)) != -1) {
                            out.write(b,0,len);
                    }
                    out.close();
            }
    } </code></pre>
<p>Signlink.java</p>
<pre><code class="lang-auto"> package sign;

import java.applet.Applet;
import java.io.*;
import java.net.*;

/**
 * signlink.java
 *
 * @author RiiPiiNFtW &lt;Stuart Perera&gt;
 * MSN: satuartperera@hotmail.com
 *
 * This class was rewritten from the original because people with macs and linux computers could not play with the signlink
 * based off windows alone. This rewritten signlink finds the user.home to determine which place to download the cache to
 * depending on the OS. This signlink is universal however and works on any OS.
 *
 */

 public final class signlink
    implements Runnable
{
  public static final String SEPARATOR = System.getProperty("file.separator");
    public static void startpriv(InetAddress inetaddress)
    {
        threadliveid = (int)(Math.random() * 99999999D);
        if(active)
        {
            try
            {
                Thread.sleep(500L);
            }
            catch(Exception _ex) { }
            active = false;
        }
        socketreq = 0;
        threadreq = null;
        dnsreq = null;
        savereq = null;
        urlreq = null;
        socketip = inetaddress;
        Thread thread = new Thread(new signlink());
        thread.setDaemon(true);
        thread.start();
        while(!active)
            try
            {
                Thread.sleep(50L);
            }
            catch(Exception _ex) { }
    }

    public void run()
    {
        active = true;
        String s = findcachedir();
        uid = getuid(s);
        try
        {
            cache_dat = new RandomAccessFile(s + "main_file_cache.dat", "rw");
            for(int j = 0; j &lt; 5; j++)
                cache_idx[j] = new RandomAccessFile(s + "main_file_cache.idx" + j, "rw");

        }
        catch(Exception exception)
        {
            exception.printStackTrace();
        }
        for(int i = threadliveid; threadliveid == i;)
        {
            if(socketreq != 0)
            {
                try
                {
                    socket = new Socket(socketip, socketreq);
                }
                catch(Exception _ex)
                {
                    socket = null;
                }
                socketreq = 0;
            } else
            if(threadreq != null)
            {
                Thread thread = new Thread(threadreq);
                thread.setDaemon(true);
                thread.start();
                thread.setPriority(threadreqpri);
                threadreq = null;
            } else
            if(dnsreq != null)
            {
                try
                {
                    dns = InetAddress.getByName(dnsreq).getHostName();
                }
                catch(Exception _ex)
                {
                    dns = "unknown";
                }
                dnsreq = null;
            } else
            if(savereq != null)
            {
                if(savebuf != null)
                    try
                    {
                        FileOutputStream fileoutputstream = new FileOutputStream(s + savereq);
                        fileoutputstream.write(savebuf, 0, savelen);
                        fileoutputstream.close();
                    }
                    catch(Exception _ex) { }
                if(waveplay)
                {
                    waveplay = false;
                }
                if(midiplay)
                {
                    midi = s + savereq;
                    midiplay = false;
                }
                savereq = null;
            } else
            if(urlreq != null)
            {
                try
                {
                    System.out.println("urlstream");
                    urlstream = new DataInputStream((new URL(mainapp.getCodeBase(), urlreq)).openStream());
                }
                catch(Exception _ex)
                {
                    urlstream = null;
                }
                urlreq = null;
            }
            try
            {
                Thread.sleep(50L);
            }
            catch(Exception _ex) { }
        }

    }


    public static final String homeDir()
    {
        return System.getProperty("user.home");
    }

    public static final String appendSlash()
    {
        return "/";
    }

    public static String cacheName()
    {
        return "MythScape";
    }

    public static String universalCacheDir()
    {
        return (new StringBuilder()).append(homeDir()).append(appendSlash()).append(cacheName()).toString();
    }

public static String findcachedir()
	{
		boolean exists = (new File(System.getProperty("user.home") + "/MythScape/")).exists();
		if (exists) {
			System.out.println("Directory exists");
			return System.getProperty("user.home") + "/MythScape/";
		} else {
			File f = new File(System.getProperty("user.home") + "/MythScape/");
			f.mkdir();
			System.out.println("Directory doesnt exist, making directory");
			return System.getProperty("user.home") + "/MythScape/";
		}
	}
    private static int getuid(String s) {
        return 234523;
    }

    public static synchronized Socket opensocket(int i)
        throws IOException
    {
        for(socketreq = i; socketreq != 0;)
            try
            {
                Thread.sleep(50L);
            }
            catch(Exception _ex) { }

        if(socket == null)
            throw new IOException("could not open socket");
        else
            return socket;
    }

    public static synchronized DataInputStream openurl(String s)
        throws IOException
    {
        for(urlreq = s; urlreq != null;)
            try
            {
                Thread.sleep(50L);
            }
            catch(Exception _ex) { }

        if(urlstream == null)
            throw new IOException("could not open: " + s);
        else
            return urlstream;
    }

    public static synchronized void dnslookup(String s)
    {
        dns = s;
        dnsreq = s;
    }

    public static synchronized void startthread(Runnable runnable, int i)
    {
        threadreqpri = i;
        threadreq = runnable;
    }

    public static synchronized boolean wavesave(byte abyte0[], int i)
    {
        if(i &gt; 0x1e8480)
            return false;
        if(savereq != null)
        {
            return false;
        } else
        {
            wavepos = (wavepos + 1) % 5;
            savelen = i;
            savebuf = abyte0;
            waveplay = true;
            savereq = "sound" + wavepos + ".wav";
            return true;
        }
    }

    public static synchronized boolean wavereplay()
    {
        if(savereq != null)
        {
            return false;
        } else
        {
            savebuf = null;
            waveplay = true;
            savereq = "sound" + wavepos + ".wav";
            return true;
        }
    }

    public static synchronized void midisave(byte abyte0[], int i)
    {
        if(i &gt; 0x1e8480)
            return;
        if(savereq != null)
        {
        } else
        {
            midipos = (midipos + 1) % 5;
            savelen = i;
            savebuf = abyte0;
            midiplay = true;
            savereq = "jingle" + midipos + ".mid";
        }
    }

    public static void reporterror(String s)
    {
        System.out.println("Error: " + s);
    }

    private signlink()
    {
    }

    public static final int clientversion = 317;
    public static int uid;
    public static int storeid = 32;
    public static RandomAccessFile cache_dat = null;
    public static final RandomAccessFile[] cache_idx = new RandomAccessFile[5];
    public static boolean sunjava;
    public static Applet mainapp = null;
    private static boolean active;
    private static int threadliveid;
    private static InetAddress socketip;
    private static int socketreq;
    private static Socket socket = null;
    private static int threadreqpri = 1;
    private static Runnable threadreq = null;
    private static String dnsreq = null;
    public static String dns = null;
    private static String urlreq = null;
    private static DataInputStream urlstream = null;
    private static int savelen;
    private static String savereq = null;
    private static byte[] savebuf = null;
    private static boolean midiplay;
    private static int midipos;
    public static String midi = null;
    public static int midivol;
    public static int midifade;
    private static boolean waveplay;
    private static int wavepos;
    public static int wavevol;
    public static boolean reporterror = true;
    public static String errorname = "";

}</code></pre>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cache-problems/436810/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cache-problems/436810/1</link>
        <pubDate>Sun, 18 Mar 2012 21:25:44 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-436810-1</guid>
        <source url="https://forum.moparisthebest.com/t/cache-problems/436810.rss">Cache Problems</source>
      </item>
  </channel>
</rss>
