<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>[474] Firemaking; BASE</title>
    <link>https://forum.moparisthebest.com/t/474-firemaking-base/348463</link>
    <description>This is my second tutorial, and this is for firemaking. Before i get started, let me clear you up on the base this will work with.

Anyone of Vigans&#39; 474 client+server&#39;s shall work fine, but Arthion will be the best. Anyways, let&#39;s get started.
(Also, so there is no confusion.. I am Press X For Sex, from Rune-Serba.)

NOTE: This is set up, for those who already have the &quot;skills&quot; packet already into the source. If ya have it, than this will work out perfectly (:.

First up, in:

[code]package com.Arthion.model.players.content.skills.impl;[/code]

Make a file called Firemaking.java, and put this inside:

[code]package com.Arthion.model.players.content.skills.impl;

import com.Arthion.Constants;
import com.Arthion.model.players.Player;
import com.Arthion.util.Misc;

/**
 * Handles the Firemaking skill
 * @author d.ducky911
 * lights fire+moves the player in the correct direction.
 * Handled currently, by commands..
 */

public class Firemaking {
	
	/**
	 * Log data
	 */
	private static int[][] LOG_DATA = {
		//id, level, xp
		{1511, 1, 40},
		{1513, 75, 303},
		{1515, 60, 202},
		{1517, 45, 135},
		{1519, 30, 90},
		{1521, 15, 60},
		{2862, 1, 40},
		{6332, 50, 157},
		{6333, 35, 105},
		{10810, 42, 125}
	};
	
	private int r() {
		return Misc.random(15);
	}
	
	/**
	 * Firemaking data, anims+object..
	 */
	private static int FM_ANIM = 733;
	private int tinderbox = 590;
	private static int fireobj = 2732;
	public int l = 0;
	public String ln = null;

	public void reset(Player p) {
		int oldFaceX = p.absX;
		int oldFaceY = p.absY;
		p.playerWalk(p.absX - 1, p.absY);
		p.faceCoords(oldFaceX, oldFaceY);
		p.faceCoordsUpdateReq = true;
		p.updateReq = true;
		p.getActionSender().addGlobalObject(p.absX, p.absY, fireobj, 0, 10, p.heightLevel);
		p.getActionSender().sendMessage(&quot;You lighted the &quot; + ln+ &quot;.&quot;);
		int oldLVL = p.getLevelForXP(11);
		p.skillXP[11] += (getData(l, 2) * Constants.XP_RATE);
		p.skillLvl[11] = p.getLevelForXP(11);
		p.updateReq = true;
		p.frames.setSkillLvl(11);
		int newLVL = p.getLevelForXP(11);
		if(newLVL &gt; oldLVL) {
			p.frames.sendMessage(&quot;Congratulations! You have increased a level in Firemaking!&quot;);
			p.requestGFX(199, 0);
		}
		p.lightingFire = false;
	}
	
	private static int getData(int id, int toReturn) {
		for (int[] logData : LOG_DATA) {
			if((Integer) logData[0] == id) {
				return logData[toReturn];
			}
		}
		System.out.println(&quot;..error&quot;);
		return toReturn;
	}
	
	/**
	 * Lights a fire, identifies player+gets tinderbox item ID.
	 * @param p The player who is lighting the fire.
	 * @param tinderbox The tinderbox item id.
	 * @param log The log item id.
	 * @param requiredLevel What level the player needs to light the fire.
	 */
	public void lightFire(final Player p, int tinderbox, int log, String logname) {
		if(p == null) {//tinderbox used on tinderbox
			return;
		}
		if(p.disconnected[0] || p.disconnected[1]) {
			return;
		}
		if(p.lightingFire) {
			return;
		}
		p.lightingFire = true;
		String fmName = p.getSkills().getSkillName(11);
		int requiredLevel = getData(log, 1);
		if(p.skillLvl[11] &lt; requiredLevel) {
			p.getActionSender().sendMessage(&quot;You need a &quot; + fmName + &quot; level of &quot; + requiredLevel + &quot; to set &quot; + logname + &quot; to flames.&quot;);
			return;
		}
		p.requestAnim(FM_ANIM, 0);//firemaking animation
		l = log;
		ln = logname;
		p.fmWait = 2;//timer1
		p.fmWait += r();//timer2
		System.out.println(p.fmWait);//timer
	}

}[/code]

Next, in &#39;skills.java&#39; add this:

[code]	public Firemaking getFiremaking() {
		return new Firemaking();
	}[/code]

Next, declare this in player.java (if you have bone burying, than put this under it)

[code]if(fmWait &gt; 0) {
			fmWait--;
		}
		if(fmWait == 1) {
			getSkills().getFiremaking().reset(this);
		}[/code]

FINALLY: you will need to edit your &quot;ItemOnItem&quot;. I STRONGLY encourage you, to review my tutorial on it, (http://www.moparisthebest.com/smf/index.php/topic,444827.0.html), so you can understand how it works. 

In ItemOnItem.java, add this:

[code]if(itemUsed == 590) {
        	System.out.println(&quot;WORKED!&quot;);
        	p.getSkills().getFiremaking().lightFire(p, 590, usedWith, Engine.items.getItemName(usedWith).toLowerCase());
        }
        if(usedWith == 590) {
        	System.out.println(&quot;UM OK?&quot;);
        }[/code]

This, is firemaking. will handel every log, that is edited with &quot;LOG_DATA&quot;, and will add the anim+object to the player.



Ok, you now have firemaking handled, and ready too go (:. To test, open up &quot;commands.java&quot; and add this:

[code]if(cmd[0].equals(&quot;lightfire&quot;)) {
					p.getSkills().getFiremaking().lightFire(p, 590, 1511, Engine.items.getItemName(1511).toLowerCase());[/code] 

this will test  the emote+anim, basically will tell you if it worked..

Enjoy kiddies {:</description>
    
    <lastBuildDate>Tue, 16 Oct 2012 20:31:10 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/474-firemaking-base/348463.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>[474] Firemaking; BASE</title>
        <dc:creator><![CDATA[@TehDevTeam TehDevTeam]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/tehdevteam">@TehDevTeam</a> wrote:</p>
          <blockquote>
              <p>usually there is already that,</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/474-firemaking-base/348463/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/474-firemaking-base/348463/3</link>
        <pubDate>Tue, 16 Oct 2012 20:31:10 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-348463-3</guid>
        <source url="https://forum.moparisthebest.com/t/474-firemaking-base/348463.rss">[474] Firemaking; BASE</source>
      </item>
      <item>
        <title>[474] Firemaking; BASE</title>
        <dc:creator><![CDATA[@dutchxxje dutchxxje]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/dutchxxje">@dutchxxje</a> wrote:</p>
          <blockquote>
              <p>thx mate i was looking for this ages!</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/474-firemaking-base/348463/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/474-firemaking-base/348463/2</link>
        <pubDate>Tue, 16 Oct 2012 07:57:25 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-348463-2</guid>
        <source url="https://forum.moparisthebest.com/t/474-firemaking-base/348463.rss">[474] Firemaking; BASE</source>
      </item>
      <item>
        <title>[474] Firemaking; BASE</title>
        <dc:creator><![CDATA[@D.Ducky911 D.Ducky911]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/d.ducky911">@D.Ducky911</a> wrote:</p>
          <blockquote>
              <p>This is my second tutorial, and this is for firemaking. Before i get started, let me clear you up on the base this will work with.</p>
<p>Anyone of Vigans’ 474 client+server’s shall work fine, but Arthion will be the best. Anyways, let’s get started.<br>
(Also, so there is no confusion… I am Press X For Sex, from Rune-Serba.)</p>
<p>NOTE: This is set up, for those who already have the “skills” packet already into the source. If ya have it, than this will work out perfectly (:.</p>
<p>First up, in:</p>
<pre><code class="lang-auto">package com.Arthion.model.players.content.skills.impl;</code></pre>
<p>Make a file called Firemaking.java, and put this inside:</p>
<p>[code]package com.Arthion.model.players.content.skills.impl;</p>
<p>import com.Arthion.Constants;<br>
import com.Arthion.model.players.Player;<br>
import com.Arthion.util.Misc;</p>
<p>/**</p>
<ul>
<li>Handles the Firemaking skill</li>
<li>
<span class="mention">@author</span> d.ducky911</li>
<li>lights fire+moves the player in the correct direction.</li>
<li>Handled currently, by commands…<br>
*/</li>
</ul>
<p>public class Firemaking {</p>
<pre><code>/**
 * Log data
 */
private static int[][] LOG_DATA = {
	//id, level, xp
	{1511, 1, 40},
	{1513, 75, 303},
	{1515, 60, 202},
	{1517, 45, 135},
	{1519, 30, 90},
	{1521, 15, 60},
	{2862, 1, 40},
	{6332, 50, 157},
	{6333, 35, 105},
	{10810, 42, 125}
};

private int r() {
	return Misc.random(15);
}

/**
 * Firemaking data, anims+object..
 */
private static int FM_ANIM = 733;
private int tinderbox = 590;
private static int fireobj = 2732;
public int l = 0;
public String ln = null;

public void reset(Player p) {
	int oldFaceX = p.absX;
	int oldFaceY = p.absY;
	p.playerWalk(p.absX - 1, p.absY);
	p.faceCoords(oldFaceX, oldFaceY);
	p.faceCoordsUpdateReq = true;
	p.updateReq = true;
	p.getActionSender().addGlobalObject(p.absX, p.absY, fireobj, 0, 10, p.heightLevel);
	p.getActionSender().sendMessage("You lighted the " + ln+ ".");
	int oldLVL = p.getLevelForXP(11);
	p.skillXP[11] += (getData(l, 2) * Constants.XP_RATE);
	p.skillLvl[11] = p.getLevelForXP(11);
	p.updateReq = true;
	p.frames.setSkillLvl(11);
	int newLVL = p.getLevelForXP(11);
	if(newLVL &gt; oldLVL) {
		p.frames.sendMessage("Congratulations! You have increased a level in Firemaking!");
		p.requestGFX(199, 0);
	}
	p.lightingFire = false;
}

private static int getData(int id, int toReturn) {
	for (int[] logData : LOG_DATA) {
		if((Integer) logData[0] == id) {
			return logData[toReturn];
		}
	}
	System.out.println("..error");
	return toReturn;
}

/**
 * Lights a fire, identifies player+gets tinderbox item ID.
 * @param p The player who is lighting the fire.
 * @param tinderbox The tinderbox item id.
 * @param log The log item id.
 * @param requiredLevel What level the player needs to light the fire.
 */
public void lightFire(final Player p, int tinderbox, int log, String logname) {
	if(p == null) {//tinderbox used on tinderbox
		return;
	}
	if(p.disconnected[0] || p.disconnected[1]) {
		return;
	}
	if(p.lightingFire) {
		return;
	}
	p.lightingFire = true;
	String fmName = p.getSkills().getSkillName(11);
	int requiredLevel = getData(log, 1);
	if(p.skillLvl[11] &lt; requiredLevel) {
		p.getActionSender().sendMessage("You need a " + fmName + " level of " + requiredLevel + " to set " + logname + " to flames.");
		return;
	}
	p.requestAnim(FM_ANIM, 0);//firemaking animation
	l = log;
	ln = logname;
	p.fmWait = 2;//timer1
	p.fmWait += r();//timer2
	System.out.println(p.fmWait);//timer
}
</code></pre>
<p>}[/code]</p>
<p>Next, in ‘skills.java’ add this:</p>
<p><code>	public Firemaking getFiremaking() {
		return new Firemaking();
	}</code></p>
<p>Next, declare this in player.java (if you have bone burying, than put this under it)</p>
<p><code>if(fmWait &gt; 0) {
			fmWait--;
		}
		if(fmWait == 1) {
			getSkills().getFiremaking().reset(this);
		}</code></p>
<p>FINALLY: you will need to edit your “ItemOnItem”. I STRONGLY encourage you, to review my tutorial on it, (<a href="http://www.moparisthebest.com/smf/index.php/topic,444827.0.html" rel="nofollow noopener">http://www.moparisthebest.com/smf/index.php/topic,444827.0.html</a>), so you can understand how it works.</p>
<p>In ItemOnItem.java, add this:</p>
<p><code>if(itemUsed == 590) {
        	System.out.println("WORKED!");
        	p.getSkills().getFiremaking().lightFire(p, 590, usedWith, Engine.items.getItemName(usedWith).toLowerCase());
        }
        if(usedWith == 590) {
        	System.out.println("UM OK?");
        }</code></p>
<p>This, is firemaking. will handel every log, that is edited with “LOG_DATA”, and will add the anim+object to the player.</p>
<p>Ok, you now have firemaking handled, and ready too go (:. To test, open up “commands.java” and add this:</p>
<p><code>if(cmd[0].equals("lightfire")) {
					p.getSkills().getFiremaking().lightFire(p, 590, 1511, Engine.items.getItemName(1511).toLowerCase());</code></p>
<p>this will test  the emote+anim, basically will tell you if it worked…</p>
<p>Enjoy kiddies {:</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/474-firemaking-base/348463/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/474-firemaking-base/348463/1</link>
        <pubDate>Sun, 11 Jul 2010 21:07:30 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-348463-1</guid>
        <source url="https://forum.moparisthebest.com/t/474-firemaking-base/348463.rss">[474] Firemaking; BASE</source>
      </item>
  </channel>
</rss>
