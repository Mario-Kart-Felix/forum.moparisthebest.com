<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Need help please - items on death</title>
    <link>https://forum.moparisthebest.com/t/need-help-please-items-on-death/547120</link>
    <description>Alright so my problems is when people die in wild or anything that where you will lose items on death when they die say their unskulled or have protect item on they will still drop the items with highest value and keep random toolkits even if they didnt have them and drop all items on them. Please help me fix

I believe its in this code in player.java

[code]public void sendItemsOnDeath(Player killer) {
		if (rights == 2)
			return;
		if (rights == 7)
			return;
		charges.die();
		auraManager.removeAura();
		CopyOnWriteArrayList&lt;Item&gt; containedItems = new CopyOnWriteArrayList&lt;Item&gt;();
		for (int i = 0; i &lt; 14; i++) {
			if (equipment.getItem(i) != null
					&amp;&amp; equipment.getItem(i).getId() != -1
					&amp;&amp; equipment.getItem(i).getAmount() != -1)
				containedItems.add(new Item(equipment.getItem(i).getId(),
						equipment.getItem(i).getAmount()));
		}
		for (int i = 0; i &lt; 28; i++) {
			if (inventory.getItem(i) != null
					&amp;&amp; inventory.getItem(i).getId() != -1
					&amp;&amp; inventory.getItem(i).getAmount() != -1)
				containedItems.add(new Item(getInventory().getItem(i).getId(),
						getInventory().getItem(i).getAmount()));
		}
		if (containedItems.isEmpty())
			return;
		int keptAmount = 0;
		if (!(controlerManager.getControler() instanceof CorpBeastControler)
				&amp;&amp; !(controlerManager.getControler() instanceof CrucibleControler)) {
			keptAmount = hasSkull() ? 0 : 3;
			if (prayer.usingPrayer(0, 10) || prayer.usingPrayer(1, 0))
				keptAmount++;
		}
		if (donator &amp;&amp; Utils.random(2) == 0)
			keptAmount += 1;
		CopyOnWriteArrayList&lt;Item&gt; keptItems = new CopyOnWriteArrayList&lt;Item&gt;();
		Item lastItem = new Item(1, 1);
		for (int i = 0; i &lt; keptAmount; i++) {
			for (@SuppressWarnings(&quot;unused&quot;) Item item : containedItems) {
			}
			keptItems.add(lastItem);
			containedItems.remove(lastItem);
			lastItem = new Item(1, 1);
		}
		inventory.reset();
		equipment.reset();
		for (Item item : keptItems) {
			getInventory().addItem(item);
		}
		for (Item item : containedItems) {
			World.addGroundItem(item, getLastWorldTile(), killer == null ? this
					: killer, false, 180, true, true);
		}
	}[/code]</description>
    
    <lastBuildDate>Mon, 13 Oct 2014 04:58:18 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/need-help-please-items-on-death/547120.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Need help please - items on death</title>
        <dc:creator><![CDATA[@Tim5698 Tim5698]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/tim5698">@Tim5698</a> wrote:</p>
          <blockquote>
              <p>Msg me</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/need-help-please-items-on-death/547120/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/need-help-please-items-on-death/547120/2</link>
        <pubDate>Mon, 13 Oct 2014 04:58:18 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-547120-2</guid>
        <source url="https://forum.moparisthebest.com/t/need-help-please-items-on-death/547120.rss">Need help please - items on death</source>
      </item>
      <item>
        <title>Need help please - items on death</title>
        <dc:creator><![CDATA[@space_cadets space cadets]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/space_cadets">@space_cadets</a> wrote:</p>
          <blockquote>
              <p>Alright so my problems is when people die in wild or anything that where you will lose items on death when they die say their unskulled or have protect item on they will still drop the items with highest value and keep random toolkits even if they didnt have them and drop all items on them. Please help me fix</p>
<p>I believe its in this code in player.java</p>
<p><code>public void sendItemsOnDeath(Player killer) {
		if (rights == 2)
			return;
		if (rights == 7)
			return;
		charges.die();
		auraManager.removeAura();
		CopyOnWriteArrayList&lt;Item&gt; containedItems = new CopyOnWriteArrayList&lt;Item&gt;();
		for (int i = 0; i &lt; 14; i++) {
			if (equipment.getItem(i) != null
					&amp;&amp; equipment.getItem(i).getId() != -1
					&amp;&amp; equipment.getItem(i).getAmount() != -1)
				containedItems.add(new Item(equipment.getItem(i).getId(),
						equipment.getItem(i).getAmount()));
		}
		for (int i = 0; i &lt; 28; i++) {
			if (inventory.getItem(i) != null
					&amp;&amp; inventory.getItem(i).getId() != -1
					&amp;&amp; inventory.getItem(i).getAmount() != -1)
				containedItems.add(new Item(getInventory().getItem(i).getId(),
						getInventory().getItem(i).getAmount()));
		}
		if (containedItems.isEmpty())
			return;
		int keptAmount = 0;
		if (!(controlerManager.getControler() instanceof CorpBeastControler)
				&amp;&amp; !(controlerManager.getControler() instanceof CrucibleControler)) {
			keptAmount = hasSkull() ? 0 : 3;
			if (prayer.usingPrayer(0, 10) || prayer.usingPrayer(1, 0))
				keptAmount++;
		}
		if (donator &amp;&amp; Utils.random(2) == 0)
			keptAmount += 1;
		CopyOnWriteArrayList&lt;Item&gt; keptItems = new CopyOnWriteArrayList&lt;Item&gt;();
		Item lastItem = new Item(1, 1);
		for (int i = 0; i &lt; keptAmount; i++) {
			for (@SuppressWarnings("unused") Item item : containedItems) {
			}
			keptItems.add(lastItem);
			containedItems.remove(lastItem);
			lastItem = new Item(1, 1);
		}
		inventory.reset();
		equipment.reset();
		for (Item item : keptItems) {
			getInventory().addItem(item);
		}
		for (Item item : containedItems) {
			World.addGroundItem(item, getLastWorldTile(), killer == null ? this
					: killer, false, 180, true, true);
		}
	}</code></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/need-help-please-items-on-death/547120/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/need-help-please-items-on-death/547120/1</link>
        <pubDate>Mon, 06 Oct 2014 07:52:48 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-547120-1</guid>
        <source url="https://forum.moparisthebest.com/t/need-help-please-items-on-death/547120.rss">Need help please - items on death</source>
      </item>
  </channel>
</rss>
