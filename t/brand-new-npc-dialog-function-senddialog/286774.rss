<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Brand New NPC Dialog Function - sendDialog()</title>
    <link>https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774</link>
    <description>[CENTER][IMG]http://i39.tinypic.com/4i1uoo.png[/img]
by Jeremy Yak @ R00N S3RV3R

Alright, I noticed lots of people are using multiple functions for 1 to 4 lines, and then more functions for NPC and Player speech, 
and all kinds of happy horrah that can be simplified. I felt like making a big deal out of this, I was pretty bored.
[/CENTER]

[size=10pt][b]Universal Chat Dialog Function[/b][/size]
A full explanation of the function can be found further down the page.
I&#39;ve update this because a few idiots kept bitching about conventions.
[code]public static void sendDialog(client c, int npcid, int emotion, String[] text) {
	int lines = text.length;
	int chatFace = 4882;
	
	if(c == null || text == null|| text.length &gt; 4) {
		return;
	}
	
	if(emotion &lt;= 0) {
		emotion = 591;
	}
	
	lines = text.length;
	
	if(npcid == -1) {
		chatFace = 968;
	}
	
	for(int i = 1; i &lt; lines; i ++) {
		chatFace += 4 + i;
	}
	
	if(npcid &gt;= 0) {
		c.sendFrame126(NpcName(npcid), chatFace + 2);
	} else {
		c.sendFrame126(c.playerName, chatFace + 2);
	}
	
	for (int i = 0; i &lt; lines; i++) {
		c.sendFrame126(text[i], chatFace + 3 + i);
	}
	
	c.sendFrame200(chatFace + 1, emotion);
	
	if(npcid &gt;= 0) {
		c.sendFrame75(npcid, chatFace + 1);
	} else {
		c.sendFrame75(c.pCHead, chatFace + 1);
	}
	
	c.sendFrame164(chatFace);
	c.NpcDialogueSend = true;
}[/code]

[size=10pt][b]sendDialog() Usage[/b][/size]
The function is very simple to use, and the code isn&#39;t messy at all. 

Here is an example with 3 lines of chat from the Wise Old Man NPC (2566):
[code]npcDialog.sendDialog(this, 2566, 0, new String[] {
	&quot;Wow this is a really great function!&quot;,
	&quot;We should all say thanks and give Jeremy&quot;,
	&quot;some kind words for this!&quot;
});[/code]

And here is an example of a single line of chat from the player (-1):
[code]npcDialog.sendDialog(this, -1, 0, new String[] {
	&quot;Wow this is a really great function!&quot;
});[/code]

sendDialog() also supports emotions. Both of the examples above didn&#39;t have an emotion set, they just said 0. If you enter 0, the default emotion is sent, 591. Here is an example of an evil laughing vampire:
[code]npcDialog.sendDialog(this, 1220, 609, new String[] {
	&quot;Muhahahahaha!&quot;
});[/code]

See the extra features below for a list of emotes that can be used.

If you do not have an NPC Chat handle like me, you can find the function below for use in client.java. The only difference is you will not need to do &quot;this ,&quot; while calling the function; example:
[code]sendDialog(1220, 609, new String[] {
	&quot;Muhahahahaha!&quot;
});[/code]

[size=10pt][b]sendDialog() For Client.java[/b][/size]
[code]public void sendDialog(int npcid, int emotion, String[] text) {
	if(text == null|| text.length &gt; 4) return;
	if(emotion &lt;= 0) emotion = 591;
	int lines = text.length;
	int chatFace = 4882;
	if(npcid == -1) chatFace = 968;
	for(int i = 1; i &lt; lines; i ++) chatFace += 4 + i;
	if(npcid &gt;= 0) sendFrame126(NpcName(npcid), chatFace + 2);
	else sendFrame126(playerName, chatFace + 2);
	for (int i = 0; i &lt; lines; i++) sendFrame126(text[i], chatFace + 3 + i);
	sendFrame200(chatFace + 1, emotion);
	if(npcid &gt;= 0) sendFrame75(npcid, chatFace + 1);
	else sendFrame75(pCHead, chatFace + 1);
	sendFrame164(chatFace);
	NpcDialogueSend = true;
}[/code]

[size=10pt][b]sendDialog() Explanation[/b][/size]
[code]public static void sendDialog(client c, int npcid, int emotion, String[] text) {
	// Make sure we don&#39;t have any nulls, if we do just quit
	if(c == null || text == null|| text.length &gt; 4) 
		return;

	// If no emote is specified, set it to the default
	if(emotion &lt;= 0) 
		emotion = 591;
	
	// Count our chat lines and set the default chat interface
	int lines = text.length;
	int chatFace = 4882;
	
	// If we are doing player chat, change the default interfaces
	if(npcid == -1) 
		chatFace = 968;

	// Calculate which interfaces to used based on the number of lines
	for(int i = 1; i &lt; lines; i ++) 
		chatFace += 4 + i;
	
	// Send the name of the npc or player
	if(npcid &gt;= 0) 
		c.sendFrame126(NpcName(npcid), chatFace + 2);
	else
		c.sendFrame126(c.playerName, chatFace + 2);
	
	// Send all of the text lines provided
	for (int i = 0; i &lt; lines; i++) 
		c.sendFrame126(text[i], chatFace + 3 + i);
	
	// Send the head emote
	c.sendFrame200(chatFace + 1, emotion);
	
	// Send the npc or players head
	if(npcid &gt;= 0) 
		c.sendFrame75(npcid, chatFace + 1);
	else 
		c.sendFrame75(c.pCHead, chatFace + 1);
	
	// Display the frame and finish up
	c.sendFrame164(chatFace);
	c.NpcDialogueSend = true;
}
[/code]

[size=10pt][b]NpcName() Function[/b][/size]
[code]public static String NpcName(int NpcID) {
	for (int i = 0; i &lt; server.npcHandler.maxListedNPCs; i++) 
		if (server.npcHandler.NpcList[i] != null) 
		if (server.npcHandler.NpcList[i].npcId == NpcID) 
			return server.npcHandler.NpcList[i].npcName;

	return &quot;NPC ID &quot;+NpcID;
}
[/code]
[color=purple][size=10pt]
[size=10pt][b]Chat Dialog Emotes[/b][/size]
[code]Credits to dust r i p @ R00N S3RV3R for Emotes

588 - Joyful/happy
589 - Speakingly calmly
590 - Calm talk
591 - Default speech
592 - Evil
593 - Evil continued
594 - Delighted evil
595 - Annoyed
596 - Distressed
597 - Distressed continued
598 - Almost crying
599 - Bows head while sad
600 - Talks and looks sleepy/drunk to left
601 - Talks and looks sleepy/drunk to right
602 - Sleepy or disinterested
603 - Tipping head as if sleepy.
604 - Plain evil (Grits teeth and moves eyebrows)
605 - Laughing or yawning
606 - Laughing or yawning for longer
607 - Laughing or yawning for longer
608 - Laughing or yawning
609 - Evil laugh then plain evil
610 - Slightly sad
611 - Quite sad
612 - On one hand...
613 - Close to crying
614 - Angry
615 - Angry
616 - Angry
617 - Angry
[/code]</description>
    
    <lastBuildDate>Sun, 20 Dec 2009 15:36:07 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Brand New NPC Dialog Function - sendDialog()</title>
        <dc:creator><![CDATA[@Berky-Scape Berky-Scape]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/berky-scape">@Berky-Scape</a> wrote:</p>
          <blockquote>
              <p>How can I make it use 2 times, like<br>
line 1<br>
line 2<br>
line 3<br>
line 4<br>
Continue</p>
<p>then another again<br>
line 1<br>
line 2<br>
line 3<br>
line 4?<br>
Cuz can’t figure how</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/25">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/25</link>
        <pubDate>Sun, 20 Dec 2009 15:36:07 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-286774-25</guid>
        <source url="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774.rss">Brand New NPC Dialog Function - sendDialog()</source>
      </item>
      <item>
        <title>Brand New NPC Dialog Function - sendDialog()</title>
        <dc:creator><![CDATA[@pk3r_john pk3r john]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/pk3r_john">@pk3r_john</a> wrote:</p>
          <blockquote>
              <p>Nice tut.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/24">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/24</link>
        <pubDate>Tue, 08 Sep 2009 00:51:47 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-286774-24</guid>
        <source url="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774.rss">Brand New NPC Dialog Function - sendDialog()</source>
      </item>
      <item>
        <title>Brand New NPC Dialog Function - sendDialog()</title>
        <dc:creator><![CDATA[@XMikEIX XMikEIX]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/xmikeix">@XMikEIX</a> wrote:</p>
          <blockquote>
              <p>Nah, I get errors from the client.java file when i added the public void, im new to java and learned everything from just looking trough and stuff, Help me why i get this error Jeremy?</p>
<p>[CODE]if(npcid )= 0) sendFrame126(NpcName(npcid), chatFace + 2);<br>
^<br>
1 error<br>
Finished!</p>
<p>[/code]</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/23">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/23</link>
        <pubDate>Thu, 06 Aug 2009 20:56:09 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-286774-23</guid>
        <source url="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774.rss">Brand New NPC Dialog Function - sendDialog()</source>
      </item>
      <item>
        <title>Brand New NPC Dialog Function - sendDialog()</title>
        <dc:creator><![CDATA[@dJ7 dJ7]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/dj7">@dJ7</a> wrote:</p>
          <blockquote>
              <p>Looks good.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/22">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/22</link>
        <pubDate>Thu, 09 Jul 2009 04:22:08 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-286774-22</guid>
        <source url="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774.rss">Brand New NPC Dialog Function - sendDialog()</source>
      </item>
      <item>
        <title>Brand New NPC Dialog Function - sendDialog()</title>
        <dc:creator><![CDATA[@bhpkyeah satesql]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/bhpkyeah">@bhpkyeah</a> wrote:</p>
          <blockquote>
              <p>You can put a whole code on 1 line if you so desire, as long as there is a space or a tab.  Java can be messy, and run perfect.<br>
Conventions just make it easier to tell other programers whats going on with the script…</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/21">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/21</link>
        <pubDate>Wed, 08 Jul 2009 18:41:45 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-286774-21</guid>
        <source url="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774.rss">Brand New NPC Dialog Function - sendDialog()</source>
      </item>
      <item>
        <title>Brand New NPC Dialog Function - sendDialog()</title>
        <dc:creator><![CDATA[@SonGoku SonGoku]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/songoku">@SonGoku</a> wrote:</p>
          <blockquote>
              <p>If statements with only one line do not need to use brackets, but it’s all personal choice.</p>
<p>Example:</p>
<pre><code class="lang-auto">
/* Good */
public void hello() {
    boolean hello = true;
    if(hello) 
        System.out.println("Hello!");
    else
        System.out.println("Not Hello");
}

/* Not as good */
public void hello() {
    boolean hello = true;
    if(hello) {
        System.out.println("Hello");
    } else {
        System.out.pritnln("Not Hello");
    }
}</code></pre>
<p>Ignore what these people are saying Jeremy, the majority of them are kids who heard someone talk about conventions, and now want everyone to do exactly as the conventions say.</p>
<p>To you ignorant new faggots.</p>
<p>The conventions are just a guideline. You can follow them any way you please. If you work for a software company, they may have their own set of conventions that they will want you to follow.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/20">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/20</link>
        <pubDate>Tue, 07 Jul 2009 16:16:21 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-286774-20</guid>
        <source url="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774.rss">Brand New NPC Dialog Function - sendDialog()</source>
      </item>
      <item>
        <title>Brand New NPC Dialog Function - sendDialog()</title>
        <dc:creator><![CDATA[@_Rich Rich]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/_rich">@_Rich</a> wrote:</p>
          <blockquote>
              <p>No need to reply to him, he’s banned now, anyway.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/19">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/19</link>
        <pubDate>Mon, 06 Jul 2009 02:41:25 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-286774-19</guid>
        <source url="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774.rss">Brand New NPC Dialog Function - sendDialog()</source>
      </item>
      <item>
        <title>Brand New NPC Dialog Function - sendDialog()</title>
        <dc:creator><![CDATA[@Jeremy_Yak Jeremy Yak]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/jeremy_yak">@Jeremy_Yak</a> wrote:</p>
          <blockquote>
              <p>[quote=“Anthony`, post:15, topic:286774”]What? You dont make absolutely ANY sense? Trying to post code conventions show I dont know Java? Are you out of your mind.</p>
<p>This tutorial just seems to show you cant follow the simplest of conventions, thus showing your lack of skill.[/quote]</p>
<p>Lack of skill? After reviewing all your posts all I can say is lol…<br>
The only lack of skill I see is everyone making 8 different functions to do this same thing.</p>
<p>Here you go, have fun with your conventions:</p>
<p>[code]public static void sendDialog(client c, int npcid, int emotion, String[] text) {<br>
// Make sure we don’t have any nulls, if we do just quit<br>
if(c == null || text == null|| text.length &gt; 4) {<br>
return;<br>
}</p>
<pre><code>// If no emote is specified, set it to the default
if(emotion &lt;= 0) {
	emotion = 591;
}

// Count our chat lines and set the default chat interface
int lines = text.length;
int chatFace = 4882;

// If we are doing player chat, change the default interfaces
if(npcid == -1) {
	chatFace = 968;
}

// Calculate which interfaces to used based on the number of lines
for(int i = 1; i &lt; lines; i ++) {
	chatFace += 4 + i;
}

// Send the name of the npc or player
if(npcid &gt;= 0) {
	c.sendFrame126(NpcName(npcid), chatFace + 2);
} else {
	c.sendFrame126(c.playerName, chatFace + 2);
}

// Send all of the text lines provided
for (int i = 0; i &lt; lines; i++) {
	c.sendFrame126(text[i], chatFace + 3 + i);
}

// Send the head emote
c.sendFrame200(chatFace + 1, emotion);

// Send the npc or players head
if(npcid &gt;= 0) {
	c.sendFrame75(npcid, chatFace + 1);
} else { 
	c.sendFrame75(c.pCHead, chatFace + 1);
}

// Display the frame and finish up
c.sendFrame164(chatFace);
c.NpcDialogueSend = true;
</code></pre>
<p>}[/code]</p>
<p>Can you read it now that I’ve added the brackets? Doubtful…</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/18">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/18</link>
        <pubDate>Mon, 06 Jul 2009 02:17:05 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-286774-18</guid>
        <source url="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774.rss">Brand New NPC Dialog Function - sendDialog()</source>
      </item>
      <item>
        <title>Brand New NPC Dialog Function - sendDialog()</title>
        <dc:creator><![CDATA[@burnt_w_pwnt burnt w pwnt]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/burnt_w_pwnt">@burnt_w_pwnt</a> wrote:</p>
          <blockquote>
              <p>erm pics?<br>
i dunno if it actually works</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/17">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/17</link>
        <pubDate>Sun, 05 Jul 2009 17:38:48 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-286774-17</guid>
        <source url="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774.rss">Brand New NPC Dialog Function - sendDialog()</source>
      </item>
      <item>
        <title>Brand New NPC Dialog Function - sendDialog()</title>
        <dc:creator><![CDATA[@Lin Lin]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/lin">@Lin</a> wrote:</p>
          <blockquote>
              <p>Wow. Thank God Newty is moderator, else this would’ve been denied. Nice job. I’ve always failed at dialogs <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"></p>
<p>You know on second thought, I’ve never actually tried them except once in Back to Basics… Oh and, fuck the conventions. If people really have a big deal about them, they can deal with it themself. I always make it easy on the eyes for myself, but that’s because I have an O.C.D…</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/16">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/16</link>
        <pubDate>Sun, 05 Jul 2009 16:24:10 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-286774-16</guid>
        <source url="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774.rss">Brand New NPC Dialog Function - sendDialog()</source>
      </item>
      <item>
        <title>Brand New NPC Dialog Function - sendDialog()</title>
        <dc:creator><![CDATA[@Anthony4 Anthony`]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/anthony4">@Anthony4</a> wrote:</p>
          <blockquote>
              <p>What? You dont make absolutely ANY sense? Trying to post code conventions show I dont know Java? Are you out of your mind.</p>
<p>This tutorial just seems to show you cant follow the simplest of conventions, thus showing your lack of skill.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/15">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/15</link>
        <pubDate>Sun, 05 Jul 2009 15:31:35 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-286774-15</guid>
        <source url="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774.rss">Brand New NPC Dialog Function - sendDialog()</source>
      </item>
      <item>
        <title>Brand New NPC Dialog Function - sendDialog()</title>
        <dc:creator><![CDATA[@Jeremy_Yak Jeremy Yak]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/jeremy_yak">@Jeremy_Yak</a> wrote:</p>
          <blockquote>
              <aside class="quote no-group" data-post="12" data-topic="286774">
<div class="title">
<div class="quote-controls"></div>
 Anthony`:</div>
<blockquote>
<p><a href="http://java.sun.com/docs/codeconv/" rel="nofollow noopener">http://java.sun.com/docs/codeconv/</a></p>
</blockquote>
</aside>
<p>If you can’t understand basic Java, this isn’t my problem. If you can’t follow some very simple code, see the sendDialog explanation.<br>
So much of RSPS servers have pretty much 0 code conventions anyway. Code convention is more than just brackets by the way.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/14">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/14</link>
        <pubDate>Sun, 05 Jul 2009 05:39:00 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-286774-14</guid>
        <source url="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774.rss">Brand New NPC Dialog Function - sendDialog()</source>
      </item>
      <item>
        <title>Brand New NPC Dialog Function - sendDialog()</title>
        <dc:creator><![CDATA[@RSPServer RSPServer]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/rspserver">@RSPServer</a> wrote:</p>
          <blockquote>
              <p>Wow cool great i will try</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/13">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/13</link>
        <pubDate>Sun, 05 Jul 2009 03:12:25 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-286774-13</guid>
        <source url="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774.rss">Brand New NPC Dialog Function - sendDialog()</source>
      </item>
      <item>
        <title>Brand New NPC Dialog Function - sendDialog()</title>
        <dc:creator><![CDATA[@Anthony4 Anthony`]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/anthony4">@Anthony4</a> wrote:</p>
          <blockquote>
              <p><a href="http://java.sun.com/docs/codeconv/" class="onebox" target="_blank" rel="nofollow noopener">http://java.sun.com/docs/codeconv/</a></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/12">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/12</link>
        <pubDate>Sun, 05 Jul 2009 03:11:36 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-286774-12</guid>
        <source url="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774.rss">Brand New NPC Dialog Function - sendDialog()</source>
      </item>
      <item>
        <title>Brand New NPC Dialog Function - sendDialog()</title>
        <dc:creator><![CDATA[@r34p4g3pk r34p4g3pk]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/r34p4g3pk">@r34p4g3pk</a> wrote:</p>
          <blockquote>
              <p>Wow good job, might use this.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/11">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/11</link>
        <pubDate>Sat, 04 Jul 2009 02:12:09 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-286774-11</guid>
        <source url="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774.rss">Brand New NPC Dialog Function - sendDialog()</source>
      </item>
      <item>
        <title>Brand New NPC Dialog Function - sendDialog()</title>
        <dc:creator><![CDATA[@jc22493 Jc22493]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/jc22493">@jc22493</a> wrote:</p>
          <blockquote>
              <p>Nice job, nonetheless.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/10</link>
        <pubDate>Fri, 03 Jul 2009 17:57:45 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-286774-10</guid>
        <source url="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774.rss">Brand New NPC Dialog Function - sendDialog()</source>
      </item>
      <item>
        <title>Brand New NPC Dialog Function - sendDialog()</title>
        <dc:creator><![CDATA[@Jeremy_Yak Jeremy Yak]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/jeremy_yak">@Jeremy_Yak</a> wrote:</p>
          <blockquote>
              <p>Just becuase I didn’t use brackets doesn’t mean it doesn’t follow conventions.<br>
I could write it like this and make it four time larger:</p>
<p>[code]public static void sendDialog(client c, int npcid, int emotion, String[] text) {</p>
<pre><code>if(c == null || text == null|| text.length &gt; 4) {
	return;
}

if(emotion &lt;= 0) {
	emotion = 591;
}

int lines = text.length;
int chatFace = 4882;

if(npcid == -1) {
	chatFace = 968;
}

for(int i = 1; i &lt; lines; i ++) {
	chatFace += 4 + i;
}

if(npcid &gt;= 0) {
	c.sendFrame126(NpcName(npcid), chatFace + 2);
} else {
	c.sendFrame126(c.playerName, chatFace + 2);
}

for (int i = 0; i &lt; lines; i++) {
	c.sendFrame126(text[i], chatFace + 3 + i);
}

c.sendFrame200(chatFace + 1, emotion);

if(npcid &gt;= 0) {
	c.sendFrame75(npcid, chatFace + 1);
} else {
	c.sendFrame75(c.pCHead, chatFace + 1);
}

c.sendFrame164(chatFace);
c.NpcDialogueSend = true;
</code></pre>
<p>}[/code]</p>
<p>Or I could skip brackets and just tab it more nicely:</p>
<p>[code]public static void sendDialog(client c, int npcid, int emotion, String[] text) {</p>
<pre><code>if(c == null || text == null|| text.length &gt; 4)
	return;

if(emotion &lt;= 0)
	emotion = 591;

int lines = text.length;
int chatFace = 4882;

if(npcid == -1)
	chatFace = 968;

for(int i = 1; i &lt; lines; i ++)
	chatFace += 4 + i;

if(npcid &gt;= 0)
	c.sendFrame126(NpcName(npcid), chatFace + 2);
else
	c.sendFrame126(c.playerName, chatFace + 2);

for (int i = 0; i &lt; lines; i++)
	c.sendFrame126(text[i], chatFace + 3 + i);

c.sendFrame200(chatFace + 1, emotion);

if(npcid &gt;= 0)
	c.sendFrame75(npcid, chatFace + 1);
else
	c.sendFrame75(c.pCHead, chatFace + 1);

c.sendFrame164(chatFace);
c.NpcDialogueSend = true;
</code></pre>
<p>}[/code]</p>
<p>Or I could press it down small like I have it above. It does the same thing, it doesn’t make the code any more or less operable.<br>
Where I’m only handling one line per if/else there is no need for brackets.</p>
<p>It’s just personal preference <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"><br>
~Jeremy~</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/9</link>
        <pubDate>Fri, 03 Jul 2009 17:53:27 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-286774-9</guid>
        <source url="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774.rss">Brand New NPC Dialog Function - sendDialog()</source>
      </item>
      <item>
        <title>Brand New NPC Dialog Function - sendDialog()</title>
        <dc:creator><![CDATA[@jc22493 Jc22493]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/jc22493">@jc22493</a> wrote:</p>
          <blockquote>
              <p>Nice job, except for conventions. <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/8</link>
        <pubDate>Fri, 03 Jul 2009 16:48:31 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-286774-8</guid>
        <source url="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774.rss">Brand New NPC Dialog Function - sendDialog()</source>
      </item>
      <item>
        <title>Brand New NPC Dialog Function - sendDialog()</title>
        <dc:creator><![CDATA[@Jeremy_Yak Jeremy Yak]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/jeremy_yak">@Jeremy_Yak</a> wrote:</p>
          <blockquote>
              <p>It’s only ugly cus I crammed it together, look at the explanation and its some what prettier. It does the job in far less lines than any other method though.</p>
<p>Thanks for the good feedback, the other communities I’ve posted this on were rather hostile about it.<br>
Got accused of leeching already on one community <img src="https://forum.moparisthebest.com/images/emoji/twitter/confused.png?v=5" title=":confused:" class="emoji" alt=":confused:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/7</link>
        <pubDate>Fri, 03 Jul 2009 16:26:05 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-286774-7</guid>
        <source url="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774.rss">Brand New NPC Dialog Function - sendDialog()</source>
      </item>
      <item>
        <title>Brand New NPC Dialog Function - sendDialog()</title>
        <dc:creator><![CDATA[@_Rich Rich]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/_rich">@_Rich</a> wrote:</p>
          <blockquote>
              <p>The code looks ugly, but none the less, good job.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/6</link>
        <pubDate>Fri, 03 Jul 2009 16:08:58 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-286774-6</guid>
        <source url="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774.rss">Brand New NPC Dialog Function - sendDialog()</source>
      </item>
      <item>
        <title>Brand New NPC Dialog Function - sendDialog()</title>
        <dc:creator><![CDATA[@kickingjamie kickingjamie]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/kickingjamie">@kickingjamie</a> wrote:</p>
          <blockquote>
              <p>does this have choices like yes, no?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/5</link>
        <pubDate>Fri, 03 Jul 2009 15:46:38 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-286774-5</guid>
        <source url="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774.rss">Brand New NPC Dialog Function - sendDialog()</source>
      </item>
      <item>
        <title>Brand New NPC Dialog Function - sendDialog()</title>
        <dc:creator><![CDATA[@mod_lol1 mod_lol1]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/mod_lol1">@mod_lol1</a> wrote:</p>
          <blockquote>
              <p>how does this go with quests?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/4</link>
        <pubDate>Fri, 03 Jul 2009 14:45:04 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-286774-4</guid>
        <source url="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774.rss">Brand New NPC Dialog Function - sendDialog()</source>
      </item>
      <item>
        <title>Brand New NPC Dialog Function - sendDialog()</title>
        <dc:creator><![CDATA[@wolfs_goal wolfs goal]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/wolfs_goal">@wolfs_goal</a> wrote:</p>
          <blockquote>
              <p>Nice, I’m not gonna use, but I will surely tell all my friends about this.</p>
<p>repity ++</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/3</link>
        <pubDate>Fri, 03 Jul 2009 13:36:29 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-286774-3</guid>
        <source url="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774.rss">Brand New NPC Dialog Function - sendDialog()</source>
      </item>
      <item>
        <title>Brand New NPC Dialog Function - sendDialog()</title>
        <dc:creator><![CDATA[@NewbieNewty Newty]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/newbienewty">@NewbieNewty</a> wrote:</p>
          <blockquote>
              <p>Looks good to me.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/2</link>
        <pubDate>Fri, 03 Jul 2009 13:06:46 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-286774-2</guid>
        <source url="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774.rss">Brand New NPC Dialog Function - sendDialog()</source>
      </item>
      <item>
        <title>Brand New NPC Dialog Function - sendDialog()</title>
        <dc:creator><![CDATA[@Jeremy_Yak Jeremy Yak]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/jeremy_yak">@Jeremy_Yak</a> wrote:</p>
          <blockquote>
              <p>[CENTER]<img src="http://i39.tinypic.com/4i1uoo.png" alt width="" height=""><br>
by Jeremy Yak @ R00N S3RV3R</p>
<p>Alright, I noticed lots of people are using multiple functions for 1 to 4 lines, and then more functions for NPC and Player speech,<br>
and all kinds of happy horrah that can be simplified. I felt like making a big deal out of this, I was pretty bored.<br>
[/CENTER]</p>
<p>[size=10pt]<span class="bbcode-b">Universal Chat Dialog Function</span>[/size]<br>
A full explanation of the function can be found further down the page.<br>
I’ve update this because a few idiots kept bitching about conventions.</p>
<p>[code]public static void sendDialog(client c, int npcid, int emotion, String[] text) {<br>
int lines = text.length;<br>
int chatFace = 4882;</p>
<pre><code>if(c == null || text == null|| text.length &gt; 4) {
	return;
}

if(emotion &lt;= 0) {
	emotion = 591;
}

lines = text.length;

if(npcid == -1) {
	chatFace = 968;
}

for(int i = 1; i &lt; lines; i ++) {
	chatFace += 4 + i;
}

if(npcid &gt;= 0) {
	c.sendFrame126(NpcName(npcid), chatFace + 2);
} else {
	c.sendFrame126(c.playerName, chatFace + 2);
}

for (int i = 0; i &lt; lines; i++) {
	c.sendFrame126(text[i], chatFace + 3 + i);
}

c.sendFrame200(chatFace + 1, emotion);

if(npcid &gt;= 0) {
	c.sendFrame75(npcid, chatFace + 1);
} else {
	c.sendFrame75(c.pCHead, chatFace + 1);
}

c.sendFrame164(chatFace);
c.NpcDialogueSend = true;
</code></pre>
<p>}[/code]</p>
<p>[size=10pt]<span class="bbcode-b">sendDialog() Usage</span>[/size]<br>
The function is very simple to use, and the code isn’t messy at all.</p>
<p>Here is an example with 3 lines of chat from the Wise Old Man NPC (2566):</p>
<p><code>npcDialog.sendDialog(this, 2566, 0, new String[] {
	"Wow this is a really great function!",
	"We should all say thanks and give Jeremy",
	"some kind words for this!"
});</code></p>
<p>And here is an example of a single line of chat from the player (-1):</p>
<p><code>npcDialog.sendDialog(this, -1, 0, new String[] {
	"Wow this is a really great function!"
});</code></p>
<p>sendDialog() also supports emotions. Both of the examples above didn’t have an emotion set, they just said 0. If you enter 0, the default emotion is sent, 591. Here is an example of an evil laughing vampire:</p>
<p><code>npcDialog.sendDialog(this, 1220, 609, new String[] {
	"Muhahahahaha!"
});</code></p>
<p>See the extra features below for a list of emotes that can be used.</p>
<p>If you do not have an NPC Chat handle like me, you can find the function below for use in client.java. The only difference is you will not need to do “this ,” while calling the function; example:</p>
<p><code>sendDialog(1220, 609, new String[] {
	"Muhahahahaha!"
});</code></p>
<p>[size=10pt]<span class="bbcode-b">sendDialog() For Client.java</span>[/size]</p>
<p><code>public void sendDialog(int npcid, int emotion, String[] text) {
	if(text == null|| text.length &gt; 4) return;
	if(emotion &lt;= 0) emotion = 591;
	int lines = text.length;
	int chatFace = 4882;
	if(npcid == -1) chatFace = 968;
	for(int i = 1; i &lt; lines; i ++) chatFace += 4 + i;
	if(npcid &gt;= 0) sendFrame126(NpcName(npcid), chatFace + 2);
	else sendFrame126(playerName, chatFace + 2);
	for (int i = 0; i &lt; lines; i++) sendFrame126(text[i], chatFace + 3 + i);
	sendFrame200(chatFace + 1, emotion);
	if(npcid &gt;= 0) sendFrame75(npcid, chatFace + 1);
	else sendFrame75(pCHead, chatFace + 1);
	sendFrame164(chatFace);
	NpcDialogueSend = true;
}</code></p>
<p>[size=10pt]<span class="bbcode-b">sendDialog() Explanation</span>[/size]</p>
<p>[code]public static void sendDialog(client c, int npcid, int emotion, String[] text) {<br>
// Make sure we don’t have any nulls, if we do just quit<br>
if(c == null || text == null|| text.length &gt; 4)<br>
return;</p>
<pre><code>// If no emote is specified, set it to the default
if(emotion &lt;= 0) 
	emotion = 591;

// Count our chat lines and set the default chat interface
int lines = text.length;
int chatFace = 4882;

// If we are doing player chat, change the default interfaces
if(npcid == -1) 
	chatFace = 968;

// Calculate which interfaces to used based on the number of lines
for(int i = 1; i &lt; lines; i ++) 
	chatFace += 4 + i;

// Send the name of the npc or player
if(npcid &gt;= 0) 
	c.sendFrame126(NpcName(npcid), chatFace + 2);
else
	c.sendFrame126(c.playerName, chatFace + 2);

// Send all of the text lines provided
for (int i = 0; i &lt; lines; i++) 
	c.sendFrame126(text[i], chatFace + 3 + i);

// Send the head emote
c.sendFrame200(chatFace + 1, emotion);

// Send the npc or players head
if(npcid &gt;= 0) 
	c.sendFrame75(npcid, chatFace + 1);
else 
	c.sendFrame75(c.pCHead, chatFace + 1);

// Display the frame and finish up
c.sendFrame164(chatFace);
c.NpcDialogueSend = true;
</code></pre>
<p>}<br>
[/code]</p>
<p>[size=10pt]<span class="bbcode-b">NpcName() Function</span>[/size]</p>
<p>[code]public static String NpcName(int NpcID) {<br>
for (int i = 0; i &lt; server.npcHandler.maxListedNPCs; i++)<br>
if (server.npcHandler.NpcList[i] != null)<br>
if (server.npcHandler.NpcList[i].npcId == NpcID)<br>
return server.npcHandler.NpcList[i].npcName;</p>
<pre><code>return "NPC ID "+NpcID;
</code></pre>
<p>}<br>
[/code]<br>
[color=purple][size=10pt]<br>
[size=10pt]<span class="bbcode-b">Chat Dialog Emotes</span>[/size]</p>
<p>[code]Credits to dust r i p @ R00N S3RV3R for Emotes</p>
<p>588 - Joyful/happy<br>
589 - Speakingly calmly<br>
590 - Calm talk<br>
591 - Default speech<br>
592 - Evil<br>
593 - Evil continued<br>
594 - Delighted evil<br>
595 - Annoyed<br>
596 - Distressed<br>
597 - Distressed continued<br>
598 - Almost crying<br>
599 - Bows head while sad<br>
600 - Talks and looks sleepy/drunk to left<br>
601 - Talks and looks sleepy/drunk to right<br>
602 - Sleepy or disinterested<br>
603 - Tipping head as if sleepy.<br>
604 - Plain evil (Grits teeth and moves eyebrows)<br>
605 - Laughing or yawning<br>
606 - Laughing or yawning for longer<br>
607 - Laughing or yawning for longer<br>
608 - Laughing or yawning<br>
609 - Evil laugh then plain evil<br>
610 - Slightly sad<br>
611 - Quite sad<br>
612 - On one hand…<br>
613 - Close to crying<br>
614 - Angry<br>
615 - Angry<br>
616 - Angry<br>
617 - Angry<br>
[/code]</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774/1</link>
        <pubDate>Fri, 03 Jul 2009 05:09:34 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-286774-1</guid>
        <source url="https://forum.moparisthebest.com/t/brand-new-npc-dialog-function-senddialog/286774.rss">Brand New NPC Dialog Function - sendDialog()</source>
      </item>
  </channel>
</rss>
