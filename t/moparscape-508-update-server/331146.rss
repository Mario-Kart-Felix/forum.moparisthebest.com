<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>MoparScape 508 Update Server</title>
    <link>https://forum.moparisthebest.com/t/moparscape-508-update-server/331146</link>
    <description>Here are all of the sources I am releasing for MoparScape 4, so far:
http://cache.hybridscape.com/MoparScapeSources.jar

As you can see, there is a 508 Update server that serves up the cache, which works well, except about half way through it starts disconnecting the client every 4 or 5 requests, causing it to keep reconnecting.  You can see this behavior by running the client in debug mode:

http://www.moparisthebest.com/moparscape4.php?version=508&amp;debug=true

Can anyone suggest a fix for (preferably) the server or even in the client?  I&#39;ve tried about everything so far and can&#39;t come up with one.  I&#39;d appreciate any help at all.</description>
    
    <lastBuildDate>Thu, 18 Mar 2010 17:53:34 +0000</lastBuildDate>
    <category>Community Inside Talk</category>
    <atom:link href="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>MoparScape 508 Update Server</title>
        <dc:creator><![CDATA[@silabsoft RuneAgent]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/silabsoft">@silabsoft</a> wrote:</p>
          <blockquote>
              <p>no it does not.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/35">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/35</link>
        <pubDate>Thu, 18 Mar 2010 17:53:34 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-331146-35</guid>
        <source url="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146.rss">MoparScape 508 Update Server</source>
      </item>
      <item>
        <title>MoparScape 508 Update Server</title>
        <dc:creator><![CDATA[@moparisthebest Moparisthebest]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/moparisthebest">@moparisthebest</a> wrote:</p>
          <blockquote>
              <p>[quote=“blakeman8192, post:32, topic:331146”][quote author=Moparisthebest link=topic=427511.msg3154698#msg3154698 date=1268929872]<br>
So this problem is still happening handling a single request at a time, and if I try to handle more than one requests at a time, something gets messed up and the client starts requesting pieces that don’t exist.  Any ideas?  Because I’m out of them… <img src="https://forum.moparisthebest.com/images/emoji/twitter/frowning.png?v=5" title=":frowning:" class="emoji" alt=":frowning:"><br>
[/quote]If the requests are being handled concurrently, maybe it’s not letting you open the second file input stream because there’s already another one open on it. Also, are you sure that you’re closing the input streams when you’re done? I’ve had some problems with stuff like that before.</p>
<p>EDIT: try handling requests concurrently via java.util.concurrent.ExecutorService or java.util.concurrent.ThreadPoolExecutor. There are great factory methods in java.util.concurrent.Executors. I think you’re overcomplicating things by having one thread handle multiple requests at the same time. Just have multiple threads handling one request each, or go with a cached thread pool (Executors.newCachedThreadPool()) which scales and reuses, creates, and destroys threads for best performance.[/quote]</p>
<p>I tried making multiple threads to handle each request at the same time (look further up in the thread).  But that is the wrong way to do it, (as Silabsoft said), they send multiple requests at the same time, and then you can send the responses back in the same order before reading more requests.  (look at the current 317 update server, I use this exact same method and it works perfectly)</p>
<aside class="quote no-group" data-post="33" data-topic="331146">
<div class="title">
<div class="quote-controls"></div>
 Miss Silabsoft:</div>
<blockquote>
<p>I have to assume that a peice is messed up as you are serving the files correctly. How to fix this I have no idea.</p>
</blockquote>
</aside>
<p>You were looking at / rewriting how I dump the cache.  Does it look wrong in any way?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/34">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/34</link>
        <pubDate>Thu, 18 Mar 2010 16:48:42 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-331146-34</guid>
        <source url="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146.rss">MoparScape 508 Update Server</source>
      </item>
      <item>
        <title>MoparScape 508 Update Server</title>
        <dc:creator><![CDATA[@silabsoft RuneAgent]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/silabsoft">@silabsoft</a> wrote:</p>
          <blockquote>
              <p>I have to assume that a peice is messed up as you are serving the files correctly. How to fix this I have no idea.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/33">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/33</link>
        <pubDate>Thu, 18 Mar 2010 16:36:07 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-331146-33</guid>
        <source url="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146.rss">MoparScape 508 Update Server</source>
      </item>
      <item>
        <title>MoparScape 508 Update Server</title>
        <dc:creator><![CDATA[@system system]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/system">@system</a> wrote:</p>
          <blockquote>
              <p>[quote=“Moparisthebest, post:31, topic:331146”]So this problem is still happening handling a single request at a time, and if I try to handle more than one requests at a time, something gets messed up and the client starts requesting pieces that don’t exist.  Any ideas?  Because I’m out of them… :([/quote]If the requests are being handled concurrently, maybe it’s not letting you open the second file input stream because there’s already another one open on it. Also, are you sure that you’re closing the input streams when you’re done? I’ve had some problems with stuff like that before.</p>
<p>EDIT: try handling requests concurrently via java.util.concurrent.ExecutorService or java.util.concurrent.ThreadPoolExecutor. There are great factory methods in java.util.concurrent.Executors. I think you’re overcomplicating things by having one thread handle multiple requests at the same time. Just have multiple threads handling one request each, or go with a cached thread pool (Executors.newCachedThreadPool()) which scales and reuses, creates, and destroys threads for best performance.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/32">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/32</link>
        <pubDate>Thu, 18 Mar 2010 16:35:10 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-331146-32</guid>
        <source url="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146.rss">MoparScape 508 Update Server</source>
      </item>
      <item>
        <title>MoparScape 508 Update Server</title>
        <dc:creator><![CDATA[@moparisthebest Moparisthebest]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/moparisthebest">@moparisthebest</a> wrote:</p>
          <blockquote>
              <p>So this problem is still happening handling a single request at a time, and if I try to handle more than one requests at a time, something gets messed up and the client starts requesting pieces that don’t exist.  Any ideas?  Because I’m out of them… <img src="https://forum.moparisthebest.com/images/emoji/twitter/frowning.png?v=5" title=":frowning:" class="emoji" alt=":frowning:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/31">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/31</link>
        <pubDate>Thu, 18 Mar 2010 16:31:12 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-331146-31</guid>
        <source url="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146.rss">MoparScape 508 Update Server</source>
      </item>
      <item>
        <title>MoparScape 508 Update Server</title>
        <dc:creator><![CDATA[@Jython super_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/jython">@Jython</a> wrote:</p>
          <blockquote>
              <p>technically a hash is usually a unique id but uid is just a shitty name that passed over from pd’s naming schema (not that it was bad back then… it just grew inadequate :-p trying not to sound ungrateful).</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/30">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/30</link>
        <pubDate>Tue, 02 Mar 2010 22:44:45 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-331146-30</guid>
        <source url="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146.rss">MoparScape 508 Update Server</source>
      </item>
      <item>
        <title>MoparScape 508 Update Server</title>
        <dc:creator><![CDATA[@moparisthebest Moparisthebest]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/moparisthebest">@moparisthebest</a> wrote:</p>
          <blockquote>
              <p>I didn’t want this to be derailed into a ‘hash vs uid’ topic.  But in this implementation, the hash/uid is distinct, there are no collisions.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/29">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/29</link>
        <pubDate>Tue, 02 Mar 2010 10:14:54 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-331146-29</guid>
        <source url="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146.rss">MoparScape 508 Update Server</source>
      </item>
      <item>
        <title>MoparScape 508 Update Server</title>
        <dc:creator><![CDATA[@Protosstribe object]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/protosstribe">@Protosstribe</a> wrote:</p>
          <blockquote>
              <p><a class="mention" href="/u/moparisthebest">@Moparisthebest</a>: I don’t think a hash value is considered to be a unique id, as you cannot guarantee that two distinct representations (of something) would create two distinct hash values. But I guess that would be the ultimate option. Hash values would normally be used to speed up the process of obtaining an object from some table, and sometimes the table could store many objects at the same index (not referring to anything within Java here - just in general).</p>
<p>If you take a look at the java.lang.Object class, it states the following in the Javadocs: “It is not required that if two objects are unequal according to the equals(java.lang.Object) method, then calling the hashCode method on each of the two objects must produce distinct integer results. However, the programmer should be aware that producing distinct integer results for unequal objects may improve the performance of hashtables.”.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/28">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/28</link>
        <pubDate>Tue, 02 Mar 2010 07:52:26 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-331146-28</guid>
        <source url="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146.rss">MoparScape 508 Update Server</source>
      </item>
      <item>
        <title>MoparScape 508 Update Server</title>
        <dc:creator><![CDATA[@moparisthebest Moparisthebest]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/moparisthebest">@moparisthebest</a> wrote:</p>
          <blockquote>
              <p>[quote=“blakeman8192, post:25, topic:331146”]i wish i could help you, but i don’t know anything about the update protocol/etc.</p>
<p>however, imo you should be using asynchronous io (following the reactor design pattern) with the java.nio.channels package for a better performing server with less manual thread logic. if you need help implementing that, let me know and i can make you an example and/or tell you how it works.</p>
<p>(edit)<br>
as for the invalid requests, are you sure that you’re parsing them properly? maybe it is making valid requests, you just aren’t reading the information correctly. i have no idea whether this is the case, but it certainly is a possibility.[/quote]</p>
<p>asynchronous io is overkill for a server handling 1 connection isn’t it?  That is the purpose of this server and why I didn’t want to do it that way.</p>
<p>I am parsing them correctly (notice MethoD revised this a few posts ago) since when I serve the files it accepts them, the problem is it requesting files that don’t exist.  After I revised the 508 server to serve multiple requests at the same time is the only time it started requesting files that don’t exist, silabsoft suspects it is because something was served slightly wrong so she is looking into it.  I’m completely out of ideas.</p>
<p>[quote=“oksuper_, post:26, topic:331146”][quote author=Moparisthebest link=topic=427511.msg3140032#msg3140032 date=1267406040]</p>
<aside class="quote no-group">
<blockquote>
<p>it looks like the client is sending a byte for the priority/‘type’ (one or zero, which you read correctly), and then three bytes, which you read as a short. perhaps that’s causing the problem.</p>
</blockquote>
</aside>
<p>Do you know how those 3 bytes are supposed to be read/interpreted?</p>
<p>Also, does anyone know if there is a way to find out for which index/id that data exists for without bruteforcing it or logging what the client requests?  I apparently haven’t dumped the ENTIRE cache because I thought that the id could only go up to MAX_SHORT, when apparently it can go up to MAX_INT.  (which is taking hours upon hours)<br>
[/quote]</p>
<p>how about you just load from cache on the fly??</p>
<p>btw</p>
<p><code>
int uid = (in.readUnsignedByte() &lt;&lt; 16) + (in.readUnsignedByte() &lt;&lt; 8) + in.readUnsignedByte();
int index = uid &gt;&gt; 16;
int id = uid &amp; 0xFFFF;</code><br>
i reallllllllly don’t like the name uid seeing as it’s just a hash.[/quote]</p>
<p>This update server is running on the client computer, which doesn’t have a cache.  It pulls the cache from a web server, so that’s not an option.</p>
<p>As to the name, a hash is a universal id is it not?  In other words something unique that doesn’t collide with anything else.  Both names seem valid.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/27">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/27</link>
        <pubDate>Mon, 01 Mar 2010 23:11:22 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-331146-27</guid>
        <source url="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146.rss">MoparScape 508 Update Server</source>
      </item>
      <item>
        <title>MoparScape 508 Update Server</title>
        <dc:creator><![CDATA[@Jython super_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/jython">@Jython</a> wrote:</p>
          <blockquote>
              <p>[quote=“Moparisthebest, post:6, topic:331146”][quote author=Metho D link=topic=427511.msg3139998#msg3139998 date=1267403524]<br>
it looks like the client is sending a byte for the priority/‘type’ (one or zero, which you read correctly), and then three bytes, which you read as a short. perhaps that’s causing the problem.<br>
[/quote]<br>
Do you know how those 3 bytes are supposed to be read/interpreted?</p>
<p>Also, does anyone know if there is a way to find out for which index/id that data exists for without bruteforcing it or logging what the client requests?  I apparently haven’t dumped the ENTIRE cache because I thought that the id could only go up to MAX_SHORT, when apparently it can go up to MAX_INT.  (which is taking hours upon hours)[/quote]</p>
<p>how about you just load from cache on the fly??</p>
<p>btw</p>
<p><code>
int uid = (in.readUnsignedByte() &lt;&lt; 16) + (in.readUnsignedByte() &lt;&lt; 8) + in.readUnsignedByte();
int index = uid &gt;&gt; 16;
int id = uid &amp; 0xFFFF;</code><br>
i reallllllllly don’t like the name uid seeing as it’s just a hash.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/26">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/26</link>
        <pubDate>Mon, 01 Mar 2010 22:36:21 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-331146-26</guid>
        <source url="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146.rss">MoparScape 508 Update Server</source>
      </item>
      <item>
        <title>MoparScape 508 Update Server</title>
        <dc:creator><![CDATA[@system system]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/system">@system</a> wrote:</p>
          <blockquote>
              <p>i wish i could help you, but i don’t know anything about the update protocol/etc.</p>
<p>however, imo you should be using asynchronous io (following the reactor design pattern) with the java.nio.channels package for a better performing server with less manual thread logic. if you need help implementing that, let me know and i can make you an example and/or tell you how it works.</p>
<p>(edit)<br>
as for the invalid requests, are you sure that you’re parsing them properly? maybe it is making valid requests, you just aren’t reading the information correctly. i have no idea whether this is the case, but it certainly is a possibility.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/25">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/25</link>
        <pubDate>Mon, 01 Mar 2010 19:11:00 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-331146-25</guid>
        <source url="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146.rss">MoparScape 508 Update Server</source>
      </item>
      <item>
        <title>MoparScape 508 Update Server</title>
        <dc:creator><![CDATA[@moparisthebest Moparisthebest]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/moparisthebest">@moparisthebest</a> wrote:</p>
          <blockquote>
              <p>Alright, rewrote v508.OndemandServer to handle multiple requests at once:</p>
<pre><code class="lang-auto">package org.moparscape.userver.v508;

import org.moparscape.userver.Server;

import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.Socket;
import java.net.URLConnection;

/**
 * Class:OndemandServer
 * User: Silabsoft
 * Date: Jul 6, 2009
 * Time: 2:22:11 PM
 */
public class OndemandServer extends Server {

    public static final String odsPath = "508/%d/%d";
    public static final int clientVersion = 508;
    public static final int concurrentRequests = 10;

    public String[] requests = new String[concurrentRequests];
    public byte[] buffer = new byte[1024];
    public int len;

    public OndemandServer(String defaultLocation) {
        this(defaultLocation, 0);
    }

    public OndemandServer(String defaultLocation, int port) {
        super(defaultLocation, port);
    }

    public OndemandServer(String defaultLocation, String customLocation) {
        this(defaultLocation, 0, customLocation);
    }

    public OndemandServer(String defaultLocation, int port, String customLocation) {
        super(defaultLocation, port, customLocation);
    }

    public void handleConnection(Socket s) throws IOException {
        //System.out.println("ods: new connection to update server");

        boolean identify = false;
        DataOutputStream out = new DataOutputStream(s.getOutputStream());
        DataInputStream in = new DataInputStream(s.getInputStream());
        //s.setSoTimeout(0);
        if (in == null)
            return;
        while (!s.isClosed()) {
            //System.out.println("in loop");
            byte dataType = 0;
            int version = 0;
            if (!identify) {
                //s.setSoTimeout(100);
                //System.out.println("HERE!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!");
                dataType = in.readByte();
                //System.out.println("ANDNOW!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!");
                //s.setSoTimeout(0);
                version = in.readInt();
                //System.out.println("dataType:" + dataType + " version:" + version);
            }
            if (dataType == 15 &amp;&amp; version == clientVersion) {
                //System.out.println("new client connected to update server");
                out.writeByte(0);
                identify = true;
                in.skip(4);
            } else {
                int type = in.read();
                //System.out.println("type:" + type);
                //               if (type != 0 &amp;&amp; type != 1 &amp;&amp; type != 3)
                //                   System.exit(-433);
                //int hash = ((in.get()&amp; 0xff) &lt;&lt; 16) + ((in.get()&amp; 0xff) &lt;&lt; 8) + (in.get()&amp; 0xff);
                if (type == 0 || type == 1) {
                    //int index = in.read() &amp; 0xff;
                    //int id = in.readShort();
                    int uid = (in.readUnsignedByte() &lt;&lt; 16) + (in.readUnsignedByte() &lt;&lt; 8) + in.readUnsignedByte();
                    int index = uid &gt;&gt; 16;
                    int id = uid &amp; 0xFFFF;

                    if (index == 255 &amp;&amp; id == 255) {
                        // serve update keys
                        URLConnection url = getHttpURLConnection(String.format(odsPath, index, id));

                        // if url is null, custom and default cannot be reached, continue
                        if (url == null) {
                            // unless we want the update keys and may not be connected to the internet
                            // so we server them up if it is that which we are requesting
                            System.out.println("UpdateServer: Update Keys do not exist on server, serving generic ones.");
                            int[] UPDATE_KEYS = {
                                    0xff, 0x00, 0xff, 0x00, 0x00, 0x00, 0x00, 0xd8,
                                    0x84, 0xa1, 0xa1, 0x2b, 0x00, 0x00, 0x00, 0xba,
                                    0x58, 0x64, 0xe8, 0x14, 0x00, 0x00, 0x00, 0x7b,
                                    0xcc, 0xa0, 0x7e, 0x23, 0x00, 0x00, 0x00, 0x48,
                                    0x20, 0x0e, 0xe3, 0x6e, 0x00, 0x00, 0x01, 0x88,
                                    0xec, 0x0d, 0x58, 0xed, 0x00, 0x00, 0x00, 0x71,
                                    0xb9, 0x4c, 0xc0, 0x50, 0x00, 0x00, 0x01, 0x8b,
                                    0x5b, 0x61, 0x79, 0x20, 0x00, 0x00, 0x00, 0x0c,
                                    0x0c, 0x69, 0xb1, 0xc8, 0x00, 0x00, 0x02, 0x31,
                                    0xc8, 0x56, 0x67, 0x52, 0x00, 0x00, 0x00, 0x69,
                                    0x78, 0x17, 0x7b, 0xe2, 0x00, 0x00, 0x00, 0xc3,
                                    0x29, 0x76, 0x27, 0x6a, 0x00, 0x00, 0x00, 0x05,
                                    0x44, 0xe7, 0x75, 0xcb, 0x00, 0x00, 0x00, 0x08,
                                    0x7d, 0x21, 0x80, 0xd5, 0x00, 0x00, 0x01, 0x58,
                                    0xeb, 0x7d, 0x49, 0x8e, 0x00, 0x00, 0x00, 0x0c,
                                    0xf4, 0xdf, 0xd6, 0x4d, 0x00, 0x00, 0x00, 0x18,
                                    0xec, 0x33, 0x31, 0x7e, 0x00, 0x00, 0x00, 0x01,
                                    0xf7, 0x7a, 0x09, 0xe3, 0x00, 0x00, 0x00, 0xd7,
                                    0xe6, 0xa7, 0xa5, 0x18, 0x00, 0x00, 0x00, 0x45,
                                    0xb5, 0x0a, 0xe0, 0x64, 0x00, 0x00, 0x00, 0x75,
                                    0xba, 0xf2, 0xa2, 0xb9, 0x00, 0x00, 0x00, 0x5f,
                                    0x31, 0xff, 0xfd, 0x16, 0x00, 0x00, 0x01, 0x48,
                                    0x03, 0xf5, 0x55, 0xab, 0x00, 0x00, 0x00, 0x1e,
                                    0x85, 0x03, 0x5e, 0xa7, 0x00, 0x00, 0x00, 0x23,
                                    0x4e, 0x81, 0xae, 0x7d, 0x00, 0x00, 0x00, 0x18,
                                    0x67, 0x07, 0x33, 0xe3, 0x00, 0x00, 0x00, 0x14,
                                    0xab, 0x81, 0x05, 0xac, 0x00, 0x00, 0x00, 0x03,
                                    0x24, 0x75, 0x85, 0x14, 0x00, 0x00, 0x00, 0x36
                            };
                            for (int i : UPDATE_KEYS)
                                out.writeByte(i);
                            out.flush();
                            continue;
                        }
                        InputStream data1 = url.getInputStream();

                        // buffer and len are static
                        while ((len = data1.read(buffer)) &gt;= 0)
                            out.write(buffer, 0, len);
                        out.flush();
                        data1.close();

                        // served update keys, so get next request
                        continue;
                    }

                    this.requests[0] = String.format(odsPath, index, id);
                    //System.out.println("request0: " + this.requests[0]);
                    // queue the requests
                    for (int x = 1; x &lt; concurrentRequests; ++x) {
                        //index = in.read() &amp; 0xff;
                        //id = in.readShort();
                        uid = (in.readUnsignedByte() &lt;&lt; 16) + (in.readUnsignedByte() &lt;&lt; 8) + in.readUnsignedByte();
                        index = uid &gt;&gt; 16;
                        id = uid &amp; 0xFFFF;
                        this.requests[x] = String.format(odsPath, index, id);
                        //System.out.println("request" + x + ": " + this.requests[x]);
                    }

                    // serve the requests
                    for (String request : requests) {
                        //System.out.println("request: " + request);
                        URLConnection url = getHttpURLConnection(request);
                        // if url is null, custom and default cannot be reached, continue
                        if (url == null)
                            continue;

                        //int size = url.getContentLength();
                        // if size == -1 it doesn't exist
                        // however this cannot be counted on as a 404 will still send html
                        //System.out.println("size: " + size);
                        InputStream data1 = url.getInputStream();

                        // buffer and len are static
                        while ((len = data1.read(buffer)) &gt;= 0)
                            out.write(buffer, 0, len);
                        data1.close();
                    }
                    out.flush();
                }

            }
        }
    }
}
</code></pre>
<p>Which works well, but now the problem seems to have changed.  The client is now requesting files that aren’t available, and can’t be dumped from the cache that I have (which I believed to be a complete cache).  This is causing the same server exception because the client disconnects when the server tries to skip a file (because it doesn’t have access to it).  This slows everything down quite a bit.  Any ideas for dumping the cache?  Did I do it correctly or is there a better way to do it?  (look in the org.cachedump package)</p>
<p>edit: here are some examples of what it is requesting: <a href="http://pastebin.com/m5VDr7vL">http://pastebin.com/m5VDr7vL</a></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/24">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/24</link>
        <pubDate>Mon, 01 Mar 2010 05:19:35 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-331146-24</guid>
        <source url="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146.rss">MoparScape 508 Update Server</source>
      </item>
      <item>
        <title>MoparScape 508 Update Server</title>
        <dc:creator><![CDATA[@silabsoft RuneAgent]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/silabsoft">@silabsoft</a> wrote:</p>
          <blockquote>
              <p>yes it is. the byte is discarded.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/23">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/23</link>
        <pubDate>Mon, 01 Mar 2010 04:08:38 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-331146-23</guid>
        <source url="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146.rss">MoparScape 508 Update Server</source>
      </item>
      <item>
        <title>MoparScape 508 Update Server</title>
        <dc:creator><![CDATA[@moparisthebest Moparisthebest]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/moparisthebest">@moparisthebest</a> wrote:</p>
          <blockquote>
              <p>I’ll just set up a queue and I can set the max amount for the queue later.  It is supposed to be sent a byte value of 255 every 512 bytes I send, correct?  This is already handled in the dumping of the files.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/22">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/22</link>
        <pubDate>Mon, 01 Mar 2010 04:07:26 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-331146-22</guid>
        <source url="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146.rss">MoparScape 508 Update Server</source>
      </item>
      <item>
        <title>MoparScape 508 Update Server</title>
        <dc:creator><![CDATA[@silabsoft RuneAgent]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/silabsoft">@silabsoft</a> wrote:</p>
          <blockquote>
              <p>ok i just took a look at a 508 client it appears to request as many as the list has. but will only download up to 100 files at a time So slightly different from fun orb chess. Now this is not 100 seperate files remember it only accepts something like 512 bytes with one pass.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/21">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/21</link>
        <pubDate>Mon, 01 Mar 2010 03:54:04 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-331146-21</guid>
        <source url="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146.rss">MoparScape 508 Update Server</source>
      </item>
      <item>
        <title>MoparScape 508 Update Server</title>
        <dc:creator><![CDATA[@moparisthebest Moparisthebest]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/moparisthebest">@moparisthebest</a> wrote:</p>
          <blockquote>
              <p>Well I’ll be a son of a bitch, it actually does make multiple requests at once (more than 10 though, wonder how many…)</p>
<pre><code class="lang-auto">                    int uid = (in.readUnsignedByte() &lt;&lt; 16) + (in.readUnsignedByte() &lt;&lt; 8) + in.readUnsignedByte();
                    int index = uid &gt;&gt; 16;
                    int id = uid &amp; 0xFFFF;
                    System.out.println("request0: " + String.format(odsPath, index, id));
                    // if we aren't requesting update keys
                    if (index != 255) {
                        for (int x = 1; x &lt; 15; ++x) {
                            uid = (in.readUnsignedByte() &lt;&lt; 16) + (in.readUnsignedByte() &lt;&lt; 8) + in.readUnsignedByte();
                            index = uid &gt;&gt; 16;
                            id = uid &amp; 0xFFFF;
                            System.out.println("request" + x + ": " + String.format(odsPath, index, id));
                        }
                    }</code></pre>
<p>Result:</p>
<pre><code class="lang-auto">request0: 508/0/17
request1: 508/0/0
request2: 508/18/0
request3: 508/0/4864
request4: 508/0/21
request5: 508/0/0
request6: 508/22/0
request7: 508/0/5888
request8: 508/0/24
request9: 508/0/0
request10: 508/25/0
request11: 508/0/6656
request12: 508/0/27
request13: 508/0/0
request14: 508/28/0
UpdateServer: Error, http://cache.hybridscape.com/508/28/0 does not exist.
UpdateServer: No alternatives, continuing.
request0: 508/29/0
request1: 508/0/7680
request2: 508/0/31
request3: 508/0/0
request4: 508/34/0
request5: 508/0/9472
request6: 508/0/40
request7: 508/0/0
request8: 508/43/0
request9: 508/0/11264
request10: 508/0/46
request11: 508/3/0
request12: 508/0/259
request13: 508/2/29185
request14: 508/3/627</code></pre>
<p>Now I just need to rewrite this to queue the requests then serve them up.  Damn it…</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/20">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/20</link>
        <pubDate>Mon, 01 Mar 2010 03:50:10 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-331146-20</guid>
        <source url="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146.rss">MoparScape 508 Update Server</source>
      </item>
      <item>
        <title>MoparScape 508 Update Server</title>
        <dc:creator><![CDATA[@silabsoft RuneAgent]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/silabsoft">@silabsoft</a> wrote:</p>
          <blockquote>
              <p>what the hell not 10 connections, 10 file requests. get on irc…</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/19">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/19</link>
        <pubDate>Mon, 01 Mar 2010 03:39:05 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-331146-19</guid>
        <source url="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146.rss">MoparScape 508 Update Server</source>
      </item>
      <item>
        <title>MoparScape 508 Update Server</title>
        <dc:creator><![CDATA[@moparisthebest Moparisthebest]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/moparisthebest">@moparisthebest</a> wrote:</p>
          <blockquote>
              <p>So I hacked up some code to handle 10 requests at a time, changed the previous run method to this:</p>
<pre><code class="lang-auto">    private synchronized int modThreadCount(int mod) {
        threadCount += mod;
        return threadCount;
    }

    private int threadCount = 0;

    public void run() {
        thisThread = this;
        while (isRunning)
            try {
                //handleConnection(sSock.accept());
                if (modThreadCount(0) &lt; 10) {
                    (new Thread() {
                        public void run() {
                            System.out.println("threadCount: " + modThreadCount(1));
                            try {
                                handleConnection(sSock.accept());
                            } catch (IOException e) {
                                handleException(e);
                            }
                            modThreadCount(-1);
                        }
                    }).start();
                } else {
                    Thread.sleep(500);
                }


            } catch (Exception e) {
                handleException(e);
            }
    }</code></pre>
<p>I’ve changed the value of Thread.sleep() to 1000, 500, and 50.  But all seem to have the same results, it still disconnects.  Any ideas?  (or anything obvious I did wrong?)</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/18">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/18</link>
        <pubDate>Mon, 01 Mar 2010 03:15:07 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-331146-18</guid>
        <source url="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146.rss">MoparScape 508 Update Server</source>
      </item>
      <item>
        <title>MoparScape 508 Update Server</title>
        <dc:creator><![CDATA[@silabsoft RuneAgent]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/silabsoft">@silabsoft</a> wrote:</p>
          <blockquote>
              <p>317 can receive up to 100 files at one time. and then sends more requests.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/17">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/17</link>
        <pubDate>Mon, 01 Mar 2010 03:01:36 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-331146-17</guid>
        <source url="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146.rss">MoparScape 508 Update Server</source>
      </item>
      <item>
        <title>MoparScape 508 Update Server</title>
        <dc:creator><![CDATA[@moparisthebest Moparisthebest]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/moparisthebest">@moparisthebest</a> wrote:</p>
          <blockquote>
              <aside class="quote no-group" data-post="15" data-topic="331146">
<div class="title">
<div class="quote-controls"></div>
 Miss Silabsoft:</div>
<blockquote>
<p>sends up to 10 file requests and then listens to receive.</p>
</blockquote>
</aside>
<p>That’s going to take a decent amount of code change, I’ll start working on it.  While we are on the topic though, does 317 do the same thing?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/16">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/16</link>
        <pubDate>Mon, 01 Mar 2010 02:58:35 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-331146-16</guid>
        <source url="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146.rss">MoparScape 508 Update Server</source>
      </item>
      <item>
        <title>MoparScape 508 Update Server</title>
        <dc:creator><![CDATA[@silabsoft RuneAgent]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/silabsoft">@silabsoft</a> wrote:</p>
          <blockquote>
              <p>sends up to 10 file requests and then listens to receive.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/15">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/15</link>
        <pubDate>Mon, 01 Mar 2010 02:56:57 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-331146-15</guid>
        <source url="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146.rss">MoparScape 508 Update Server</source>
      </item>
      <item>
        <title>MoparScape 508 Update Server</title>
        <dc:creator><![CDATA[@moparisthebest Moparisthebest]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/moparisthebest">@moparisthebest</a> wrote:</p>
          <blockquote>
              <aside class="quote no-group" data-post="13" data-topic="331146">
<div class="title">
<div class="quote-controls"></div>
 Miss Silabsoft:</div>
<blockquote>
<p>How many requests are you serving at one time? you should send no more than 10 requests at one time.</p>
</blockquote>
</aside>
<pre><code class="lang-auto">    public void run() {
        thisThread = this;
        while (isRunning)
            try {
                handleConnection(sSock.accept());
            } catch (IOException e) {
                handleException(e);
            }
    }</code></pre>
<p>I just handle them one at a time, as they come in.  Do they send multiple requests at once?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/14">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/14</link>
        <pubDate>Mon, 01 Mar 2010 02:48:30 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-331146-14</guid>
        <source url="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146.rss">MoparScape 508 Update Server</source>
      </item>
      <item>
        <title>MoparScape 508 Update Server</title>
        <dc:creator><![CDATA[@silabsoft RuneAgent]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/silabsoft">@silabsoft</a> wrote:</p>
          <blockquote>
              <p>How many requests are you serving at one time? you should send no more than 10 requests at one time.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/13">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/13</link>
        <pubDate>Mon, 01 Mar 2010 02:45:28 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-331146-13</guid>
        <source url="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146.rss">MoparScape 508 Update Server</source>
      </item>
      <item>
        <title>MoparScape 508 Update Server</title>
        <dc:creator><![CDATA[@moparisthebest Moparisthebest]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/moparisthebest">@moparisthebest</a> wrote:</p>
          <blockquote>
              <aside class="quote no-group" data-post="11" data-topic="331146">
<div class="title">
<div class="quote-controls"></div>
 Metho D:</div>
<blockquote>
<p>do any errors pop up in the client when this happens or does it just disconnect? the only thing that comes to mind right away would be sending some invalid header data for the files or something like that.</p>
</blockquote>
</aside>
<p>No errors on the client, other than a noticeable slowdown, but if you run in debug mode you can see these errors, but I printed out the requests here (508/index/id format)</p>
<p><code>508/255/255
508/0/2
508/0/3
508/0/4
508/0/5
Server error: java.net.SocketException: Connection reset
	at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:96)
	at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
	at java.io.DataOutputStream.write(DataOutputStream.java:90)
	at org.moparscape.userver.v508.OndemandServer.handleConnection(OndemandServer.java:171)
	at org.moparscape.userver.Server.run(Server.java:64)
508/20/3
508/21/3
508/22/3
Server error: java.net.SocketException: Connection reset
	at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:96)
	at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
	at java.io.DataOutputStream.write(DataOutputStream.java:90)
	at org.moparscape.userver.v508.OndemandServer.handleConnection(OndemandServer.java:171)
	at org.moparscape.userver.Server.run(Server.java:64)
508/21/3
508/22/3
508/2/4
Server error: java.net.SocketException: Connection reset
	at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:96)
	at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
	at java.io.DataOutputStream.write(DataOutputStream.java:90)
	at org.moparscape.userver.v508.OndemandServer.handleConnection(OndemandServer.java:171)
	at org.moparscape.userver.Server.run(Server.java:64)
508/22/3
508/2/4
508/16/4
Server error: java.net.SocketException: Connection reset
	at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:96)
	at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
	at java.io.DataOutputStream.write(DataOutputStream.java:90)
	at org.moparscape.userver.v508.OndemandServer.handleConnection(OndemandServer.java:171)
	at org.moparscape.userver.Server.run(Server.java:64)
508/2/4
508/16/4
508/17/4
Server error: java.net.SocketException: Connection reset
	at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:96)
	at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
	at java.io.DataOutputStream.write(DataOutputStream.java:90)
	at org.moparscape.userver.v508.OndemandServer.handleConnection(OndemandServer.java:171)
	at org.moparscape.userver.Server.run(Server.java:64)
508/16/4
508/17/4
Server error: java.net.SocketException: Connection reset
	at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:96)
	at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
	at java.io.DataOutputStream.write(DataOutputStream.java:90)
	at org.moparscape.userver.v508.OndemandServer.handleConnection(OndemandServer.java:171)
	at org.moparscape.userver.Server.run(Server.java:64)
508/17/4
508/18/4
508/19/4
Server error: java.net.SocketException: Connection reset
	at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:96)
	at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
	at java.io.DataOutputStream.write(DataOutputStream.java:90)
	at org.moparscape.userver.v508.OndemandServer.handleConnection(OndemandServer.java:171)
	at org.moparscape.userver.Server.run(Server.java:64)
508/18/4
508/19/4
508/20/4
Server error: java.net.SocketException: Connection reset
	at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:96)
	at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
	at java.io.DataOutputStream.write(DataOutputStream.java:90)
	at org.moparscape.userver.v508.OndemandServer.handleConnection(OndemandServer.java:171)
	at org.moparscape.userver.Server.run(Server.java:64)
508/19/4
508/20/4
Server error: java.net.SocketException: Connection reset
	at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:96)
	at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
	at java.io.DataOutputStream.write(DataOutputStream.java:90)
	at org.moparscape.userver.v508.OndemandServer.handleConnection(OndemandServer.java:171)
	at org.moparscape.userver.Server.run(Server.java:64)
508/20/4
508/21/4
508/22/4
Server error: java.net.SocketException: Connection reset
	at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:96)
	at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
	at java.io.DataOutputStream.write(DataOutputStream.java:90)
	at org.moparscape.userver.v508.OndemandServer.handleConnection(OndemandServer.java:171)
	at org.moparscape.userver.Server.run(Server.java:64)
508/21/4
508/22/4
508/2/5
Server error: java.net.SocketException: Connection reset
	at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:96)
	at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
	at java.io.DataOutputStream.write(DataOutputStream.java:90)
	at org.moparscape.userver.v508.OndemandServer.handleConnection(OndemandServer.java:171)
	at org.moparscape.userver.Server.run(Server.java:64)
508/22/4
508/2/5
508/16/5
Server error: java.net.SocketException: Connection reset
	at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:96)
	at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
	at java.io.DataOutputStream.write(DataOutputStream.java:90)
	at org.moparscape.userver.v508.OndemandServer.handleConnection(OndemandServer.java:171)
	at org.moparscape.userver.Server.run(Server.java:64)
508/2/5
508/16/5
508/17/5
Server error: java.net.SocketException: Connection reset
	at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:96)
	at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
	at java.io.DataOutputStream.write(DataOutputStream.java:90)
	at org.moparscape.userver.v508.OndemandServer.handleConnection(OndemandServer.java:171)
	at org.moparscape.userver.Server.run(Server.java:64)
508/16/5
508/17/5
Server error: java.net.SocketException: Connection reset
	at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:96)
	at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
	at java.io.DataOutputStream.write(DataOutputStream.java:90)
	at org.moparscape.userver.v508.OndemandServer.handleConnection(OndemandServer.java:171)
	at org.moparscape.userver.Server.run(Server.java:64)
508/17/5
508/18/5
Server error: java.net.SocketException: Connection reset
	at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:96)
	at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
	at java.io.DataOutputStream.write(DataOutputStream.java:90)
	at org.moparscape.userver.v508.OndemandServer.handleConnection(OndemandServer.java:171)
	at org.moparscape.userver.Server.run(Server.java:64)
508/18/5
508/19/5
508/20/5
Server error: java.net.SocketException: Connection reset
	at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:96)
	at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
	at java.io.DataOutputStream.write(DataOutputStream.java:90)
	at org.moparscape.userver.v508.OndemandServer.handleConnection(OndemandServer.java:171)
	at org.moparscape.userver.Server.run(Server.java:64)
508/19/5
508/20/5
508/21/5
Server error: java.net.SocketException: Connection reset
	at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:96)
	at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
	at java.io.DataOutputStream.write(DataOutputStream.java:90)
	at org.moparscape.userver.v508.OndemandServer.handleConnection(OndemandServer.java:171)
	at org.moparscape.userver.Server.run(Server.java:64)
508/20/5</code></p>
<p>So I don’t believe the header information is wrong, since I dump it the same for every file, and the fact that the files end up getting served and accepted by the client, it justs requests them multiple times before it gets accepted.</p>
<p>I know 508 tries to connect to port 443 as well, so I tried running a server there as well, but it seemed to use a different protocol of some type and always disconnected.  I don’t know if this has anything to do with anything, but I’m out of ideas.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/12">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/12</link>
        <pubDate>Mon, 01 Mar 2010 02:39:11 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-331146-12</guid>
        <source url="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146.rss">MoparScape 508 Update Server</source>
      </item>
      <item>
        <title>MoparScape 508 Update Server</title>
        <dc:creator><![CDATA[@Metho_D Method]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/metho_d">@Metho_D</a> wrote:</p>
          <blockquote>
              <p>do any errors pop up in the client when this happens or does it just disconnect? the only thing that comes to mind right away would be sending some invalid header data for the files or something like that.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/11">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/moparscape-508-update-server/331146/11</link>
        <pubDate>Mon, 01 Mar 2010 02:32:41 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-331146-11</guid>
        <source url="https://forum.moparisthebest.com/t/moparscape-508-update-server/331146.rss">MoparScape 508 Update Server</source>
      </item>
  </channel>
</rss>
