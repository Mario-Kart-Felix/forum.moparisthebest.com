<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/667-pvp-killing-error/467686 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 14:23:34 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>667 PvP Killing Error - Runescape - moparisthebest.com</title>
    <meta name="description" content="On my 667, a big error has come accross. 

In PvP, when someone attacks, you, and you stay in the spot you were attacked on, whoever gets killed will not register being killed by another player, therefore the player who &amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="467686.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;667 PvP Killing Error&#39;" href="467686.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/667-pvp-killing-error/467686" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/667-pvp-killing-error/467686" />
<meta property="og:title" content="667 PvP Killing Error" />
<meta name="twitter:title" content="667 PvP Killing Error" />
<meta property="og:description" content="On my 667, a big error has come accross.  In PvP, when someone attacks, you, and you stay in the spot you were attacked on, whoever gets killed will not register being killed by another player, therefore the player who killed does not get items or a pvp token.  Here is my senddeath:  [code]	@Override  public void sendDeath(final Entity source) {  if (prayer.hasPrayersOn()  &amp;&amp; getTemporaryAttributtes().get(“startedDuel”) != Boolean.TRUE) {  if (prayer.usingPrayer(0, 22)) {  setNextGraphics(new Gr..." />
<meta name="twitter:description" content="On my 667, a big error has come accross.  In PvP, when someone attacks, you, and you stay in the spot you were attacked on, whoever gets killed will not register being killed by another player, therefore the player who killed does not get items or a pvp token.  Here is my senddeath:  [code]	@Override  public void sendDeath(final Entity source) {  if (prayer.hasPrayersOn()  &amp;&amp; getTemporaryAttributtes().get(“startedDuel”) != Boolean.TRUE) {  if (prayer.usingPrayer(0, 22)) {  setNextGraphics(new Gr..." />
<meta property="article:published_time" content="2012-11-13T00:47:10+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="467686.html">667 PvP Killing Error</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/13lack_drag.html'><span itemprop='name'>13lack_drag</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-11-13T00:47:10Z'>
            <time itemprop='dateModified' datetime='2016-08-04T01:08:00Z' class='post-time'>
              August 4, 2016,  1:08am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>On my 667, a big error has come accross.</p>
<p>In PvP, when someone attacks, you, and you<span class="bbcode-b"> stay</span> in the spot you were attacked on, whoever gets killed will not register being killed by another player, therefore the player who killed does not get items or a pvp token.</p>
<p>Here is my senddeath:</p>
<p>[code]	<a class="mention" href="../../u/override.html">@Override</a><br>
public void sendDeath(final Entity source) {<br>
if (prayer.hasPrayersOn()<br>
&amp;&amp; getTemporaryAttributtes().get(“startedDuel”) != Boolean.TRUE) {<br>
if (prayer.usingPrayer(0, 22)) {<br>
setNextGraphics(new Graphics(437));<br>
final Player target = this;<br>
if (isAtMultiArea()) {<br>
for (int regionId : getMapRegionsIds()) {<br>
List playersIndexes = World<br>
.getRegion(regionId).getPlayerIndexes();<br>
if (playersIndexes != null) {<br>
for (int playerIndex : playersIndexes) {<br>
Player player = World.getPlayers().get(<br>
playerIndex);<br>
if (player == null<br>
|| !player.hasStarted()<br>
|| player.isDead()<br>
|| player.hasFinished()<br>
|| !player.withinDistance(this, 1)<br>
|| !target.getControlerManager()<br>
.canHit(player))<br>
continue;<br>
player.applyHit(new Hit(<br>
target,<br>
Utils.getRandom((int) (skills<br>
.getLevelForXp(Skills.PRAYER) * 2.5)),<br>
HitLook.REGULAR_DAMAGE));<br>
}<br>
}<br>
List npcsIndexes = World.getRegion(regionId)<br>
.getNPCsIndexes();<br>
if (npcsIndexes != null) {<br>
for (int npcIndex : npcsIndexes) {<br>
NPC npc = World.getNPCs().get(npcIndex);<br>
if (npc == null<br>
|| npc.isDead()<br>
|| npc.hasFinished()<br>
|| !npc.withinDistance(this, 1)<br>
|| !npc.getDefinitions()<br>
.hasAttackOption()<br>
|| !target.getControlerManager()<br>
.canHit(npc))<br>
continue;<br>
npc.applyHit(new Hit(<br>
target,<br>
Utils.getRandom((int) (skills<br>
.getLevelForXp(Skills.PRAYER) * 2.5)),<br>
HitLook.REGULAR_DAMAGE));<br>
}<br>
}<br>
}<br>
} else {<br>
if (source != null &amp;&amp; source != this &amp;&amp; !source.isDead()<br>
&amp;&amp; !source.hasFinished()<br>
&amp;&amp; source.withinDistance(this, 1))<br>
source.applyHit(new Hit(target, Utils<br>
.getRandom((int) (skills<br>
.getLevelForXp(Skills.PRAYER) * 2.5)),<br>
HitLook.REGULAR_DAMAGE));<br>
}<br>
WorldTasksManager.schedule(new WorldTask() {<br>
<a class="mention" href="../../u/override.html">@Override</a><br>
public void run() {<br>
World.sendGraphics(target, new Graphics(438),<br>
new WorldTile(target.getX() - 1, target.getY(),<br>
target.getPlane()));<br>
World.sendGraphics(target, new Graphics(438),<br>
new WorldTile(target.getX() + 1, target.getY(),<br>
target.getPlane()));<br>
World.sendGraphics(target, new Graphics(438),<br>
new WorldTile(target.getX(), target.getY() - 1,<br>
target.getPlane()));<br>
World.sendGraphics(target, new Graphics(438),<br>
new WorldTile(target.getX(), target.getY() + 1,<br>
target.getPlane()));<br>
World.sendGraphics(target, new Graphics(438),<br>
new WorldTile(target.getX() - 1,<br>
target.getY() - 1, target.getPlane()));<br>
World.sendGraphics(target, new Graphics(438),<br>
new WorldTile(target.getX() - 1,<br>
target.getY() + 1, target.getPlane()));<br>
World.sendGraphics(target, new Graphics(438),<br>
new WorldTile(target.getX() + 1,<br>
target.getY() - 1, target.getPlane()));<br>
World.sendGraphics(target, new Graphics(438),<br>
new WorldTile(target.getX() + 1,<br>
target.getY() + 1, target.getPlane()));<br>
}<br>
});<br>
} else if (prayer.usingPrayer(1, 17)) {<br>
World.sendProjectile(this, new WorldTile(getX() + 2,<br>
getY() + 2, getPlane()), 2260, 24, 0, 41, 35, 30, 0);<br>
World.sendProjectile(this, new WorldTile(getX() + 2, getY(),<br>
getPlane()), 2260, 41, 0, 41, 35, 30, 0);<br>
World.sendProjectile(this, new WorldTile(getX() + 2,<br>
getY() - 2, getPlane()), 2260, 41, 0, 41, 35, 30, 0);</p>
<pre><code>			World.sendProjectile(this, new WorldTile(getX() - 2,
					getY() + 2, getPlane()), 2260, 41, 0, 41, 35, 30, 0);
			World.sendProjectile(this, new WorldTile(getX() - 2, getY(),
					getPlane()), 2260, 41, 0, 41, 35, 30, 0);
			World.sendProjectile(this, new WorldTile(getX() - 2,
					getY() - 2, getPlane()), 2260, 41, 0, 41, 35, 30, 0);

			World.sendProjectile(this, new WorldTile(getX(), getY() + 2,
					getPlane()), 2260, 41, 0, 41, 35, 30, 0);
			World.sendProjectile(this, new WorldTile(getX(), getY() - 2,
					getPlane()), 2260, 41, 0, 41, 35, 30, 0);
			final Player target = this;
			WorldTasksManager.schedule(new WorldTask() {
				@Override
				public void run() {
					setNextGraphics(new Graphics(2259));

					if (isAtMultiArea()) {
						for (int regionId : getMapRegionsIds()) {
							List&lt;Integer&gt; playersIndexes = World.getRegion(
									regionId).getPlayerIndexes();
							if (playersIndexes != null) {
								for (int playerIndex : playersIndexes) {
									Player player = World.getPlayers().get(
											playerIndex);
									if (player == null
											|| !player.hasStarted()
											|| player.isDead()
											|| player.hasFinished()
											|| !player.withinDistance(
													target, 2)
											|| !target
													.getControlerManager()
													.canHit(player))
										continue;
									player.applyHit(new Hit(
											target,
											Utils.getRandom((int) (skills
													.getLevelForXp(Skills.PRAYER) * 3)),
											HitLook.REGULAR_DAMAGE));
								}
							}
							List&lt;Integer&gt; npcsIndexes = World.getRegion(
									regionId).getNPCsIndexes();
							if (npcsIndexes != null) {
								for (int npcIndex : npcsIndexes) {
									NPC npc = World.getNPCs().get(npcIndex);
									if (npc == null
											|| npc.isDead()
											|| npc.hasFinished()
											|| !npc.withinDistance(target,
													2)
											|| !npc.getDefinitions()
													.hasAttackOption()
											|| !target
													.getControlerManager()
													.canHit(npc))
										continue;
									npc.applyHit(new Hit(
											target,
											Utils.getRandom((int) (skills
													.getLevelForXp(Skills.PRAYER) * 3)),
											HitLook.REGULAR_DAMAGE));
								}
							}
						}
					} else {
						if (source != null &amp;&amp; source != target
								&amp;&amp; !source.isDead()
								&amp;&amp; !source.hasFinished()
								&amp;&amp; source.withinDistance(target, 2))
							source.applyHit(new Hit(
									target,
									Utils.getRandom((int) (skills
											.getLevelForXp(Skills.PRAYER) * 3)),
									HitLook.REGULAR_DAMAGE));
					}

					World.sendGraphics(target, new Graphics(2260),
							new WorldTile(getX() + 2, getY() + 2,
									getPlane()));
					World.sendGraphics(target, new Graphics(2260),
							new WorldTile(getX() + 2, getY(), getPlane()));
					World.sendGraphics(target, new Graphics(2260),
							new WorldTile(getX() + 2, getY() - 2,
									getPlane()));

					World.sendGraphics(target, new Graphics(2260),
							new WorldTile(getX() - 2, getY() + 2,
									getPlane()));
					World.sendGraphics(target, new Graphics(2260),
							new WorldTile(getX() - 2, getY(), getPlane()));
					World.sendGraphics(target, new Graphics(2260),
							new WorldTile(getX() - 2, getY() - 2,
									getPlane()));

					World.sendGraphics(target, new Graphics(2260),
							new WorldTile(getX(), getY() + 2, getPlane()));
					World.sendGraphics(target, new Graphics(2260),
							new WorldTile(getX(), getY() - 2, getPlane()));

					World.sendGraphics(target, new Graphics(2260),
							new WorldTile(getX() + 1, getY() + 1,
									getPlane()));
					World.sendGraphics(target, new Graphics(2260),
							new WorldTile(getX() + 1, getY() - 1,
									getPlane()));
					World.sendGraphics(target, new Graphics(2260),
							new WorldTile(getX() - 1, getY() + 1,
									getPlane()));
					World.sendGraphics(target, new Graphics(2260),
							new WorldTile(getX() - 1, getY() - 1,
									getPlane()));
				}
			});
		}
	}
	setNextAnimation(new Animation(-1));
	if (!controlerManager.sendDeath())
		return;
	addStopDelay(7);
	stopAll();
	if (familiar != null)
		familiar.sendDeath(this);
	final Player thisPlayer = this;
	WorldTasksManager.schedule(new WorldTask() {
		int loop;

		@Override
		public void run() {
			if (loop == 0) {
				setNextAnimation(new Animation(836));
			} else if (loop == 1) {
				getPackets().sendGameMessage("Oh dear, you have died.");
			} else if (loop == 3) {
				Player killer = getMostDamageReceivedSourcePlayer();
					//killer.inventory.addItem(13650, 1);
				if (killer != null) {
					killer.removeDamage(thisPlayer);
					killer.getInventory().addItem(13650, 1);
					killer.increaseKillCount(thisPlayer);
					sendItemsOnDeath(killer);
				}
				equipment.init();
				inventory.init();
				reset();
				
				setNextWorldTile(new WorldTile(
						Settings.RESPAWN_PLAYER_LOCATION));
				setNextAnimation(new Animation(-1));
			} else if (loop == 4) {
				getPackets().sendMusicEffect(90);
				stop();
			}
			loop++;
		}
	}, 0, 1);
}
</code></pre>
<p>[/code]</p>
<p>I cant seem to find anything wrong, if so, would it be in a controler? comment if you need more methods/files please.</p>
      </div>

      <meta itemprop='headline' content='667 PvP Killing Error'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/667-pvp-killing-error/467686 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 14:23:35 GMT -->
</html>
