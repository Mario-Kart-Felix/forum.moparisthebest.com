<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/nio-buffers/444024?page=2 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Aug 2019 02:52:25 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>NIO Buffers - General Programming - moparisthebest.com</title>
    <meta name="description" content="I was just wondering on the correct usage of buffers with java.nio. I have a PacketFactory object that creates an object to be written to the client socket. The problem is, I can&amp;#39;t recall if this is the best way, or if u&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="4440244658.html?page=2" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;NIO Buffers&#39;" href="444024.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/nio-buffers/444024?page=2" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/nio-buffers/444024?page=2" />
<meta property="og:title" content="NIO Buffers" />
<meta name="twitter:title" content="NIO Buffers" />
<meta property="og:description" content="RT3-1 the delta time for the game engine is 20 ms, so 5 packets approximately 20 ms ~= 150 packets a tick." />
<meta name="twitter:description" content="RT3-1 the delta time for the game engine is 20 ms, so 5 packets approximately 20 ms ~= 150 packets a tick." />
<meta property="article:published_time" content="2012-06-06T01:45:57+00:00" />
<meta property="og:ignore_canonical" content="true" />

      <link rel="prev" href="444024.html">


    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="444024.html">NIO Buffers</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/general-programming.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>General Programming</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/_js5.html'><span itemprop='name'>_js5</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-06-06T01:45:57Z'>
            <time itemprop='dateModified' datetime='2016-08-03T03:01:53Z' class='post-time'>
              August 3, 2016,  3:01am
            </time>
        <span itemprop='position'>#21</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>RT3-1 the delta time for the game engine is 20 ms, so 5 packets approximately 20 ms ~= 150 packets a tick.</p>
      </div>

      <meta itemprop='headline' content='NIO Buffers'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="2" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/zyle1992.html'><span itemprop='name'>zyle1992</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-06-06T02:17:43Z'>
            <time itemprop='dateModified' datetime='2016-08-03T03:01:55Z' class='post-time'>
              August 3, 2016,  3:01am
            </time>
        <span itemprop='position'>#22</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="21" data-topic="444024">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forum.moparisthebest.com/_js5/40/4297_1.png" class="avatar"> _js5:</div>
<blockquote>
<p>RT3-1 the delta time for the game engine is 20 ms, so 5 packets approximately 20 ms ~= 150 packets a tick.</p>
</blockquote>
</aside>
<p>If all it was doing was parsing packets. Because it has to parse them, process them, and produce the result, it would take significantly longer.</p>
      </div>

      <meta itemprop='headline' content='NIO Buffers'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="2" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/sinisoul.html'><span itemprop='name'>sinisoul</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-06-06T02:36:08Z'>
            <time itemprop='dateModified' datetime='2016-08-03T03:01:57Z' class='post-time'>
              August 3, 2016,  3:01am
            </time>
        <span itemprop='position'>#23</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“zyle1992, post:22, topic:444024”][quote author=_js5 link=topic=546710.msg4008973#msg4008973 date=1338947157]<br>
RT3-1 the delta time for the game engine is 20 ms, so 5 packets approximately 20 ms ~= 150 packets a tick.</p>
<p>[/quote]</p>
<p>If all it was doing was parsing packets. Because it has to parse them, process them, and produce the result, it would take significantly longer.[/quote]</p>
<p>I’m sure with the older clients it doesn’t take that long.</p>
      </div>

      <meta itemprop='headline' content='NIO Buffers'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/mod_taharok.html'><span itemprop='name'>mod_taharok</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-06-06T04:36:54Z'>
            <time itemprop='dateModified' datetime='2016-08-03T03:02:01Z' class='post-time'>
              August 3, 2016,  3:02am
            </time>
        <span itemprop='position'>#24</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Dunno where js5 came up with 150 packets/tick. It should be 150-250, depending on what rate the client is running at. At a 20ms delta, that’s 50 frames per second, with a maximum of 5 packet consumptions per tick, leading to a maximum of 250 packets per second. If it’s running at 30 frames per second, that’s 150 packets per second.</p>
<p>Please be sure to separate the idea of a “frame” and a “tick.”</p>
      </div>

      <meta itemprop='headline' content='NIO Buffers'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/iKilem.html'><span itemprop='name'>iKilem</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-06-06T11:01:00Z'>
            <time itemprop='dateModified' datetime='2016-08-03T03:02:07Z' class='post-time'>
              August 3, 2016,  3:02am
            </time>
        <span itemprop='position'>#25</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="21" data-topic="444024">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forum.moparisthebest.com/_js5/40/4297_1.png" class="avatar"> _js5:</div>
<blockquote>
<p>RT3-1 the delta time for the game engine is 20 ms, so 5 packets approximately 20 ms ~= 150 packets a tick.</p>
</blockquote>
</aside>
<p>My bad. I was wrong about outgoing packets as well, unless there’s something else I’m forgetting :o.</p>
<aside class="quote" data-post="22" data-topic="444024">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/zyle1992/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> zyle1992:</div>
<blockquote>
<p>If all it was doing was parsing packets. Because it has to parse them, process them, and produce the result, it would take significantly longer.</p>
</blockquote>
</aside>
<p>The client tries to make up for delays if that’s what you mean.</p>
<p><span class="mention">@Taharok</span>: When he said “tick”, he meant 600ms (server-side). (600/20)*5=150</p>
      </div>

      <meta itemprop='headline' content='NIO Buffers'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/slavemaster.html'><span itemprop='name'>slavemaster</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-06-06T17:57:49Z'>
            <time itemprop='dateModified' datetime='2016-08-03T03:02:33Z' class='post-time'>
              August 3, 2016,  3:02am
            </time>
        <span itemprop='position'>#26</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Buffering your output should only happen in the rare circumstance that a write operation on the socket would block. In the case that write() returns a value less than the total data you attempted to send, register interest in write-readiness (in NIO you’d use SelectionKey.interestOps(OP_WRITE)) and react until your message is fully sent. Avoid registering write-readiness interest preemptively as socket’s are nearly always write-ready and thus your event loop will spin needlessly.</p>
<p>For reading data, on the other hand, you ought to avoid copying data from buffer to buffer any more than you need to… ideally, the only memory copy should be from the socket’s underlying input buffer to a user-level buffer which you can utilize to decode incoming game events. While some may suggest you use a pool of buffers and do all decoding independently of the net code, you might have to worry about excessive overhead.</p>
      </div>

      <meta itemprop='headline' content='NIO Buffers'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>

  <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
      <span itemprop='name'><a rel="prev" itemprop="url" href="444024.html">← previous page</a></span>
  </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/nio-buffers/444024?page=2 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Aug 2019 02:52:26 GMT -->
</html>
