<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/apollo-submitting-the-packet/520812 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Aug 2019 22:44:01 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>[Apollo]Submitting the packet - Runescape - moparisthebest.com</title>
    <meta name="description" content="How would I go about submitting the packet? Like, in Hyperion you&amp;#39;d do:  [code=java] player.write(/*packet stuff*/); [/code] But in Apollo, do you simply just do: [code=java] .toGamePacket(); [/code] NOTE: This is not fo&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="520812.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;[Apollo]Submitting the packet&#39;" href="520812.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/apollo-submitting-the-packet/520812" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/apollo-submitting-the-packet/520812" />
<meta property="og:title" content="[Apollo]Submitting the packet" />
<meta name="twitter:title" content="[Apollo]Submitting the packet" />
<meta property="og:description" content="How would I go about submitting the packet? Like, in Hyperion you’d do:  player.write(/*packet stuff*/); But in Apollo, do you simply just do:  .toGamePacket(); NOTE: This is not for an encoder file. This is in a method:  package org.apollo.game.model.obj;  import org.apollo.game.model.Player; import org.apollo.game.model.Position; import org.apollo.net.codec.game.DataOrder; import org.apollo.net.codec.game.DataTransformation; import org.apollo.net.codec.game.DataType; import org.apollo.net.code..." />
<meta name="twitter:description" content="How would I go about submitting the packet? Like, in Hyperion you’d do:  player.write(/*packet stuff*/); But in Apollo, do you simply just do:  .toGamePacket(); NOTE: This is not for an encoder file. This is in a method:  package org.apollo.game.model.obj;  import org.apollo.game.model.Player; import org.apollo.game.model.Position; import org.apollo.net.codec.game.DataOrder; import org.apollo.net.codec.game.DataTransformation; import org.apollo.net.codec.game.DataType; import org.apollo.net.code..." />
<meta property="article:published_time" content="2013-06-05T19:35:16+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="520812.html">[Apollo]Submitting the packet</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/arham_4.html'><span itemprop='name'>arham_4</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2013-06-05T19:35:16Z'>
            <time itemprop='dateModified' datetime='2016-08-04T08:10:20Z' class='post-time'>
              August 4, 2016,  8:10am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>How would I go about submitting the packet? Like, in Hyperion you’d do:</p>
<pre><code class="lang-auto">player.write(/*packet stuff*/);</code></pre>
<p>But in Apollo, do you simply just do:</p>
<pre><code class="lang-auto">.toGamePacket();</code></pre>
<p>NOTE: This is not for an encoder file. This is in a method:</p>
<pre><code class="lang-auto">package org.apollo.game.model.obj;

import org.apollo.game.model.Player;
import org.apollo.game.model.Position;
import org.apollo.net.codec.game.DataOrder;
import org.apollo.net.codec.game.DataTransformation;
import org.apollo.net.codec.game.DataType;
import org.apollo.net.codec.game.GamePacketBuilder;

public class AnimateObject {

	public void animateObject(Player player, int X, int Y, int animId,
			int tileObjectType, int orientation) {
		Position position = new Position(X, Y);
		GamePacketBuilder builder1 = new GamePacketBuilder(85);
		builder1.put(DataType.BYTE, DataTransformation.NEGATE,
				Y - (position.getTopLeftRegionY() * 8));
		builder1.put(DataType.BYTE, DataTransformation.NEGATE,
				X - (position.getTopLeftRegionX() * 8));
		builder1.toGamePacket();
		GamePacketBuilder builder2 = new GamePacketBuilder(209);
		builder2.put(DataType.SHORT, DataOrder.LITTLE, animId);
		builder2.put(DataType.BYTE, DataOrder.LITTLE, 0);
		builder2.put(DataType.BYTE, DataTransformation.SUBTRACT,
				(byte) ((tileObjectType &lt;&lt; 2) + orientation &amp; 3));
		builder2.toGamePacket();
	}

}</code></pre>
<p>Thanks,<br>
Arham</p>
<p>P.S: I am on a question outbreak O.o</p>
      </div>

      <meta itemprop='headline' content='[Apollo]Submitting the packet'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/davidi2.html'><span itemprop='name'>davidi2</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2013-06-05T20:23:55Z'>
            <time itemprop='dateModified' datetime='2016-08-04T08:10:22Z' class='post-time'>
              August 4, 2016,  8:10am
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>You aren’t quite grasping the object oriented approach that Apollo uses. You should be using an [tt]AnimateObjectEvent[/tt] argument sent to an [tt]AnimateObjectEventEncoder[/tt] (check [tt]org.apollo.net.release.r3#7[/tt] and [tt]org.apollo.game.event.impl[/tt]). You will need to create those classes yourself most likely, and they will look something like this:</p>
<p>[code=java]<br>
public final class AnimateObjectEventEncoder extends EventEncoder {</p>
<pre><code>@Override
public GamePacket encode(AnimateObjectEvent event) {
	GamePacketBuilder builder = new GamePacketBuilder(209);
	builder.put(DataType.SHORT, DataOrder.LITTLE, event.getAnimationId();
	//rest of builder stuff
	return builder.toGamePacket();
}
</code></pre>
<p>}[/code]</p>
<p>[code=java]public final class AnimateObjectEvent extends Event {</p>
<pre><code>private final int animId;
private final int tileObjectType;
private final int orientation;

public AnimateObjectEvent(int animId, int tileObjectType, int orientation) {
	this.animId = animId;
	this.tileObjectType = tileObjectType;
	//you get the idea..
}
</code></pre>
<p>//Make sure you have getters and setters for the variables as well</p>
<p>}[/code]</p>
<p>Now, you’ll need to do something similar with a [tt]SendCoordinateEvent[/tt] and [tt]SendCoordinateEventEncoder[/tt] – however I was surprised that this was not already included in Apollo as it is quite often used, and I <span class="bbcode-i">could</span> have missed it somewhere, or it’s handled differently.</p>
<p>So basically you’d create the events with the correct arguments and then send them to the player, as simply as:</p>
<p><code>player.send(new SendCoordinateEvent(x - (position.getTopLeftRegionX() * 8), y - (position.getTopLeftRegionY() * 8));
player.send(new AnimateObjectEvent(11 /*animid*/, 1616 /*objectType*/, 1 /*orientation*/);</code></p>
<p>All of this said, you really need to understand Apollo’s design to get the benefit of using it. If you start slapping together code that just looks like it ‘might work’ into the Apollo backbone, you could break it or completely defeat the purpose of using it.</p>
<p>And then of course, I need to include a disclaimer than I have never used Apollo and this is all based of perusing the core for a few minutes just to answer your question, and any of this could be completely wrong!</p>
      </div>

      <meta itemprop='headline' content='[Apollo]Submitting the packet'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/arham_4.html'><span itemprop='name'>arham_4</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2013-06-05T20:58:13Z'>
            <time itemprop='dateModified' datetime='2016-08-04T08:10:24Z' class='post-time'>
              August 4, 2016,  8:10am
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Davidi2, post:2, topic:520812”]You aren’t quite grasping the object oriented approach that Apollo uses. You should be using an [tt]AnimateObjectEvent[/tt] argument sent to an [tt]AnimateObjectEventEncoder[/tt] (check [tt]org.apollo.net.release.r3#7[/tt] and [tt]org.apollo.game.event.impl[/tt]). You will need to create those classes yourself most likely, and they will look something like this:</p>
<p>[code=java]<br>
public final class AnimateObjectEventEncoder extends EventEncoder {</p>
<pre><code>@Override
public GamePacket encode(AnimateObjectEvent event) {
	GamePacketBuilder builder = new GamePacketBuilder(209);
	builder.put(DataType.SHORT, DataOrder.LITTLE, event.getAnimationId();
	//rest of builder stuff
	return builder.toGamePacket();
}
</code></pre>
<p>}[/code]</p>
<p>[code=java]public final class AnimateObjectEvent extends Event {</p>
<pre><code>private final int animId;
private final int tileObjectType;
private final int orientation;

public AnimateObjectEvent(int animId, int tileObjectType, int orientation) {
	this.animId = animId;
	this.tileObjectType = tileObjectType;
	//you get the idea..
}
</code></pre>
<p>//Make sure you have getters and setters for the variables as well</p>
<p>}[/code]</p>
<p>Now, you’ll need to do something similar with a [tt]SendCoordinateEvent[/tt] and [tt]SendCoordinateEventEncoder[/tt] – however I was surprised that this was not already included in Apollo as it is quite often used, and I <span class="bbcode-i">could</span> have missed it somewhere, or it’s handled differently.</p>
<p>So basically you’d create the events with the correct arguments and then send them to the player, as simply as:</p>
<p><code>player.send(new SendCoordinateEvent(x - (position.getTopLeftRegionX() * 8), y - (position.getTopLeftRegionY() * 8));
player.send(new AnimateObjectEvent(11 /*animid*/, 1616 /*objectType*/, 1 /*orientation*/);</code></p>
<p>All of this said, you really need to understand Apollo’s design to get the benefit of using it. If you start slapping together code that just looks like it ‘might work’ into the Apollo backbone, you could break it or completely defeat the purpose of using it.[/quote]<br>
But animating objects uses two packets.</p>
<p>EDIT: oops, didn’t read it all. Thank you David. I was doing this previously, just a bit different (I did it all in one class and that didn’t go well :P)</p>
<p>This is really my first time using it, so I am trying to get use to the design.</p>
      </div>

      <meta itemprop='headline' content='[Apollo]Submitting the packet'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/davidi2.html'><span itemprop='name'>davidi2</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2013-06-05T21:02:29Z'>
            <time itemprop='dateModified' datetime='2016-08-04T08:10:24Z' class='post-time'>
              August 4, 2016,  8:10am
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>It’s no problem, I really didn’t intend to sound as mean as it came out. It was more of a challenge to learn the design.</p>
      </div>

      <meta itemprop='headline' content='[Apollo]Submitting the packet'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/arham_4.html'><span itemprop='name'>arham_4</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2013-06-05T23:41:03Z'>
            <time itemprop='dateModified' datetime='2016-08-04T08:10:35Z' class='post-time'>
              August 4, 2016,  8:10am
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote quote-modified" data-post="4" data-topic="520812">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forum.moparisthebest.com/davidi2/40/2579_1.png" class="avatar"> Davidi2:</div>
<blockquote>
<p>It’s no problem, I really didn’t intend to sound as mean as it came out. It was more of a challenge to learn the design.</p>
</blockquote>
</aside>
<p>I didn’t take it mean you meanie &lt;3</p>
      </div>

      <meta itemprop='headline' content='[Apollo]Submitting the packet'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/apollo-submitting-the-packet/520812 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Aug 2019 22:44:02 GMT -->
</html>
