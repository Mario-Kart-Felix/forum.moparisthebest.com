<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Summoning [PI]</title>
    <link>https://forum.moparisthebest.com/t/summoning-pi/435203</link>
    <description>[B][I][COLOR=&quot;Red&quot;][SIZE=&quot;4&quot;]I AM NOT GOING TO SPOON-FEED THIS. IF YOU DON&#39;T KNOW HOW TO ADD, DON&#39;T DO THIS SNIPPET.[/SIZE][/COLOR][/I][/B]

Well since most of you know, Jef and I quit our project, so I have no use for this really, some things I didn&#39;t get to finish

- Pouch/Scroll creation (can&#39;t release interfaces, not mine (they&#39;re released already though))
- Renew familiar
- All familiars in enum
- Special abilities
- All familiar dialogues (interaction)

If I missed something (which I most likely will, this is a lot), just post here I&#39;ll get it

[B]Client-Sided:[/B]

if you have&#39;t already, do this snippet:

[URL=http://&quot;http://google.com/runescape-development/rs2-client/snippets/387918-summoning-pets-tab.html&quot;]http://google.com/runescape-development/rs2-client/snippets/387918-summoning-pets-tab.html[/URL]

client:

[CODE]
private String familiarSpecial;
private Sprite summonOrbSpawn;
[/CODE]

find loadOrbs() and add this under it:

[CODE]drawSummoningOrb();[/CODE]

[CODE]
public boolean hasFollower = false;
	private Sprite[] summon = new Sprite[3];
	public void drawSummoningOrb() {
		String OrbDirectory = signlink.findcachedir()+&quot;/Sprites/Frame/&quot;;
		//System.out.println(&quot;current summon points - String: &quot; + RSInterface.interfaceCache[18167].message + &quot;, parseInt: &quot; + Integer.parseInt(RSInterface.interfaceCache[18167].message));
		//System.out.println(&quot;max summon points - String: &quot; + RSInterface.interfaceCache[18171].message + &quot;, parseInt: &quot; + Integer.parseInt(RSInterface.interfaceCache[18171].message));
		int currentSummoningPoints = Integer.parseInt(RSInterface.interfaceCache[18167].message);
		int maxSummoningPoints = Integer.parseInt(RSInterface.interfaceCache[18171].message);
		int summoningPoints = (int) (((double) currentSummoningPoints / (double) maxSummoningPoints) * 100D);
		Sprite emptyOrb = new Sprite(OrbDirectory + &quot;ORBS 0.png&quot;, 27, getOrbFill(summoningPoints));
		Sprite summonOrbToDraw = hasFollower ? summon[2] : summon[1];
		if (hasFollower &amp;&amp; super.mouseX &gt;= 687 &amp;&amp; super.mouseX &lt;= 744 &amp;&amp; super.mouseY &gt;= 130 &amp;&amp; super.mouseY &lt; 157)
			ORBS[7].drawSprite(174, 127); //Back frame
		else
			ORBS[1].drawSprite(174, 127); //Back frame
		summonOrbToDraw.drawSprite(177, 130); //Background color
		emptyOrb.drawSprite(177, 130); //Empty color for draining
		summon[0].drawSprite(183, 136); //Wolf Head
		smallText.method382(getOrbTextColor(summoningPoints), 215, Integer.toString(currentSummoningPoints), 153, true);
	}
[/CODE]

[code]
case 1516: //Summoning - cast
				//make an int to check if player has a familiar like pack yak, to use on item
				stream.createFrame(185);
				stream.writeWord(5003);
			break;
			
			case 1520: //Summoning - Attack
				//make packet to handle attacking
			break;
			
			case 1524: //Summoning - Interact
				stream.createFrame(185);
				stream.writeWord(5004);
			break;
			
			case 1528: //Summoning - Renew Familiar
				stream.createFrame(185);
				stream.writeWord(5005);
			break;
			
			case 1532: //Summoning - Take BoB
				stream.createFrame(185);
				stream.writeWord(5006);
			break;
			
			case 1536: //Summoning - Dimiss
				stream.createFrame(185);
				stream.writeWord(5007);
			break;
			
			case 1540: //Summoning - Call Follower
				stream.createFrame(185);
				stream.writeWord(5008);
			break;
			
			case 1544: //Summoning - Follower Details
				stream.createFrame(185);
				stream.writeWord(5009);
			break;
[/code]

[code]
summonOrbSpawn = new Sprite(&quot;Interfaces/Summoning/ORB 2&quot;);
			summon[0] = new Sprite(&quot;Gameframe/Orbs/WOLF HEAD&quot;);
			summon[1] = new Sprite(&quot;Gameframe/Orbs/SUMMON BACKGROUND 1&quot;);
			summon[2] = new Sprite(&quot;Gameframe/Orbs/SUMMON BACKGROUND 2&quot;);
[/code]

[code]
} else if (super.mouseX &gt;= 687 &amp;&amp; super.mouseX &lt;= 744 &amp;&amp; super.mouseY &gt;= 130 &amp;&amp; super.mouseY &lt; 157) {
			if (hasFollower) {
				menuActionName[8] = &quot;Cast @gre@&quot; + familiarSpecial;
				menuActionID[8] = 1516;
				menuActionName[7] = &quot;Attack&quot;;
				menuActionID[7] = 1520;
				menuActionName[6] = &quot;Interact&quot;;
				menuActionID[6] = 1524;
				menuActionName[5] = &quot;Renew Familiar&quot;;
				menuActionID[5] = 1528;
				menuActionName[4] = &quot;Take BoB&quot;;
				menuActionID[4] = 1532;
				menuActionName[3] = &quot;Dismiss&quot;; //This is the one I forgot :X
				menuActionID[3] = 1536;
				menuActionName[2] = &quot;Call Follower&quot;;
				menuActionID[2] = 1540;
				menuActionName[1] = &quot;Follower Details&quot;;
				menuActionID[1] = 1544;
				menuActionRow = 9;
			}
[/code]

in packet 126 add this somewhere (yes this was just a cheap hax)

[CODE]
if (text.startsWith(&quot;:follower:&quot;))
						hasFollower = text.substring(10).equalsIgnoreCase(&quot;on&quot;);
					if (text.startsWith(&quot;:familiarSpecial:&quot;))
						familiarSpecial = text.substring(17);
[/CODE]

in resetLogout() add this

[code]
hasFollower = false;
[/code]

Think that&#39;s it for client.

[B][I]Server-sided:[/I][/B]

in your skills folder extract this:

[url=http://up.ht/z1tWHu]Download summoning.rar @ UppIT[/url]

also add the path in your compiler if needed.

Note: add imports to all of them

import server.model.players.skills.summoning.*;

Client:

in destruct and logout methods

[code]
			if (familiarID &gt; 0) {
				/*if (hasPet) {
					
				} else {*/
					Summoning.dismissFamiliar(this, false, true);
				//}
			}
[/code]

in initialize method

[code]
		if (familiarID &gt; 0) {
			/*if (hasPet) {
			
			} else if (hasFamiliar) {*/
				Summoning.spawnFamiliar(this, familiarID);
			//}
		}
[/code]

in Player:

[code]
/* Summoning */
	public int familiarIndex, familiarID, familiarMinutes, familiarSeconds;
	public boolean hasFamiliar, makingFamiliarAttack, isBankingWithPackYak, familiarTransformed, familiarEvent;
	public byte hasFollower, summoningSpecial = 10;
	public String familiarSpecial = &quot;&quot;;
	public long callFamiliarDelay, specialAttackDelay;
[/code]

in PlayerAssistant:

find applyDead and add these somwhere:

[code]
		c.getPA().sendFrame126(&quot;:follower:off&quot;, -1);
		if (c.familiarID &gt; 0 &amp;&amp; c.hasFamiliar)
			Summoning.dismissFamiliar(c, true, true);
[/code]

in PlayerSave:

[code]
					} else if (token.equals(&quot;Familiar-ID&quot;)) {
						p.familiarID = Integer.parseInt(token2);
					} else if (token.equals(&quot;Familiar-Minutes&quot;)) {
						p.familiarMinutes = Integer.parseInt(token2);
					} else if (token.equals(&quot;Familiar-Seconds&quot;)) {
						p.familiarSeconds = Integer.parseInt(token2);
[/code]

[code]
			characterfile.newLine();
			characterfile.write(&quot;Familiar-ID = &quot;, 0, 14);
			characterfile.write(Integer.toString(p.familiarID), 0, Integer.toString(p.familiarID).length());
			characterfile.newLine();
			characterfile.write(&quot;Familiar-Minutes = &quot;, 0, 19);
			characterfile.write(Integer.toString(p.familiarMinutes), 0, Integer.toString(p.familiarMinutes).length());
			characterfile.newLine();
			characterfile.write(&quot;Familiar-Seconds = &quot;, 0, 19);
			characterfile.write(Integer.toString(p.familiarSeconds), 0, Integer.toString(p.familiarSeconds).length());
			characterfile.newLine();
[/code]

find case 9: (the one that says if (token.equals(&quot;character-name&quot;)) {)

under it add

[code]
case 10: //Summoning - Stored items
					if (token.equals(&quot;Item-Stored&quot;))
						p.getStorage().itemInBoB[Integer.parseInt(token3[0])] = Integer.parseInt(token3[1]);
				break;
[/code]

and put this one with the others:

[code]
				} else if (line.equals(&quot;[STORED]&quot;)) {
					ReadMode = 10;
[/code]

now find /* IGNORES */ below that add:

[code]
			characterfile.write(&quot;[STORED]&quot;, 0, 8);
			characterfile.newLine();
			for (int i = 0; i &lt; p.getStorage().itemInBoB.length; i++) {
				characterfile.write(&quot;Item-Stored = &quot;, 0, 14);
				characterfile.write(Integer.toString(i), 0, Integer.toString(i).length());
				characterfile.write(&quot;	&quot;, 0, 1);
				characterfile.write(Integer.toString(p.getStorage().itemInBoB[i]), 0, Integer.toString(p.getStorage().itemInBoB[i]).length());
				characterfile.newLine();
			}
			characterfile.newLine();
[/code]

Now ActionHandler:

FirstClickNpc method:

[code]
		if (Summoning.npcIsFamiliar(c, NPCHandler.npcs[c.npcClickIndex])
			FamiliarInteraction.interactWithFamiliar(c);
[/code]

SecondClickNpc method:

[code]
		if (c.getStorage().isBoBFamiliar(NPCHandler.npcs[c.npcClickIndex]))
			c.getStorage().openBoBInterface(NPCHandler.npcs[c.npcClickIndex]);
[/code]

In ClickingButtons:

[code]
case 70115: //Summoning - Call follower
			case 19144:
				Summoning.callFamiliar(c, NPCHandler.npcs[c.familiarIndex]);
			break;
		
			case 70109: //Summoning - Withdraw BoB
			case 19142: //Summoning - Take BoB
			case 10146: //Summoning - Take BoB
				c.getStorage().withdrawBoB();
			break;
		
			case 19145: //Summoning - Follower details
				c.getPA().sendFrame106(10);
			break;
		
			case 70118: //Summoning - Dismiss familiar
			case 19143:
				Summoning.dismissFamiliar(c, true, true);
			break;
		
			case 70112: //Summoning - Renew familiar
			case 19141:
				Summoning.renewFamiliar(c);
			break;
[/code]

Now for BoB:

add this in Bank5

[code]
		case 2700: //Storage - Take 5 from BoB
				if (c.getStorage().isStoringItems)
					c.getStorage().withdrawItem(removeId, removeSlot, 5);
		break;
[/code]

find case 5064: and under the if (c.isBanking) statement add

[code]
				else if (c.getStorage().isStoringItems)
					c.getStorage().storeItem(removeId, removeSlot, 5);
[/code]


do the same for bank10 except replace 5 with 10...


in BankAll:

[code]
case 2700: //Storage - Take All from BoB
				if (c.getStorage().isStoringItems)
					c.getStorage().withdrawItem(removeId, removeSlot, c.getStorage().getItemAmount(removeId));
			break;
[/code]

under case 5064: same as before under the if (c.isBanking) statement add this

[code]
} else if (c.getStorage().isStoringItems)
					c.getStorage().storeItem(removeId, removeSlot, c.getItems().getItemAmount(removeId));
[/code]

Now in BankX2 add:

[code]
case 2700: //Storage - Take X From BoB
				if (c.getStorage().isStoringItems)
					c.getStorage().withdrawItem(c.xRemoveId, c.xRemoveSlot, Xamount);
			break;
[/code]

under case 5064: add this under if (c.isBanking) statement:

[code]
else if (c.getStorage().isStoringItems)
					c.getStorage().storeItem(c.xRemoveId, c.xRemoveSlot, Xamount);
[/code]

in RemoveItem add:

[code]
case 2700:
				if (c.getStorage().isStoringItems)
					c.getStorage().withdrawItem(removeId, removeSlot, 1);
			break;
[/code]

under case 5064: below if (c.isBanking) statement add:

[code]
else if (c.getStorage().isStoringItems)
					c.getStorage().storeItem(removeId, removeSlot, 1);
[/code]

Think that&#39;s it...

[SPOILER=&quot;Some method you might need&quot;]
Will add requested methods here:

[SPOILER=&quot;followPlayer (NPC)&quot;]
[code]
	public void followPlayer(Client p) {
		if (p == null || p.isDead) {
			facePlayer(-1);
			randomWalk = true; 
	      	underAttack = false;	
			return;
		}
		int walkToX = p.absX;
		int walkToY = p.absY;
		randomWalk = false;
		if(walkToY &lt; absY) {
			moveX = Server.npcHandler.GetMove(absX, walkToX);
			moveY = Server.npcHandler.GetMove(absY, walkToY - NPCHandler.getFollowDistance(npcType));
		} else if(walkToY &gt; absY) {
			moveX = Server.npcHandler.GetMove(absX, walkToX);
			moveY = Server.npcHandler.GetMove(absY, walkToY - NPCHandler.getFollowDistance(npcType));
		} else if(walkToX &lt; absX) {
			moveX = Server.npcHandler.GetMove(absX, walkToX);
			moveY = Server.npcHandler.GetMove(absY, walkToY - NPCHandler.getFollowDistance(npcType));
		} else if(walkToX &gt; absX)  {
			moveX = Server.npcHandler.GetMove(absX, walkToX);
			moveY = Server.npcHandler.GetMove(absY, walkToY - NPCHandler.getFollowDistance(npcType));
		} else if(walkToX == absX || walkToY == absY) {
			switch (Misc.random(3)) {
				case 0:
					moveX = Server.npcHandler.GetMove(absX, walkToX);
					moveY = Server.npcHandler.GetMove(absY, walkToY + NPCHandler.getFollowDistance(npcType));
				break;
							
				case 1:
					moveX = Server.npcHandler.GetMove(absX, walkToX);
					moveY = Server.npcHandler.GetMove(absY, walkToY - NPCHandler.getFollowDistance(npcType));
				break;
							
				case 2:
					moveX = Server.npcHandler.GetMove(absX, walkToX + NPCHandler.getFollowDistance(npcType));
					moveY = Server.npcHandler.GetMove(absY, walkToY);
				break;
						
				case 3:
					moveX = Server.npcHandler.GetMove(absX, walkToX - NPCHandler.getFollowDistance(npcType));
					moveY = Server.npcHandler.GetMove(absY, walkToY);
				break;
			}	
		}
		facePlayer(p.playerId);
		getNextNPCMovement();
		updateRequired = true;
	}
[/code]
[/SPOILER]
[/SPOILER]</description>
    
    <lastBuildDate>Sun, 18 Mar 2012 19:39:27 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/summoning-pi/435203.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Summoning [PI]</title>
        <dc:creator><![CDATA[@TormentedSoul TormentedSoul]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/tormentedsoul">@TormentedSoul</a> wrote:</p>
          <blockquote>
              <p>[quote=“Ruby Forums Coder, post:8, topic:435203”][quote author=Kidpaparoach link=topic=537918.msg3948162#msg3948162 date=1332066622]</p>
<aside class="quote">
<blockquote>
<p>This is not a tutorial now fix this shit! This is a snippet you idiot.</p>
</blockquote>
</aside>
<p>lol…<br>
[/quote][/quote]<br>
Lol at me lol</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/summoning-pi/435203/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/summoning-pi/435203/9</link>
        <pubDate>Sun, 18 Mar 2012 19:39:27 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-435203-9</guid>
        <source url="https://forum.moparisthebest.com/t/summoning-pi/435203.rss">Summoning [PI]</source>
      </item>
      <item>
        <title>Summoning [PI]</title>
        <dc:creator><![CDATA[@Ruby_Forums_Coder Ruby]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ruby_forums_coder">@Ruby_Forums_Coder</a> wrote:</p>
          <blockquote>
              <p>[quote=“Kidpaparoach, post:7, topic:435203”][quote author=TormentedSoul link=topic=537918.msg3948161#msg3948161 date=1332066215]<br>
This is not a tutorial now fix this shit! This is a snippet you idiot.<br>
[/quote]<br>
lol…[/quote]</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/summoning-pi/435203/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/summoning-pi/435203/8</link>
        <pubDate>Sun, 18 Mar 2012 19:24:22 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-435203-8</guid>
        <source url="https://forum.moparisthebest.com/t/summoning-pi/435203.rss">Summoning [PI]</source>
      </item>
      <item>
        <title>Summoning [PI]</title>
        <dc:creator><![CDATA[@Kidpaparoach Kidpaparoach]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/kidpaparoach">@Kidpaparoach</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="6" data-topic="435203">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/tormentedsoul/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> TormentedSoul:</div>
<blockquote>
<p>This is not a tutorial now fix this shit! This is a snippet you idiot.</p>
</blockquote>
</aside>
<p>lol…</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/summoning-pi/435203/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/summoning-pi/435203/7</link>
        <pubDate>Sun, 18 Mar 2012 10:30:22 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-435203-7</guid>
        <source url="https://forum.moparisthebest.com/t/summoning-pi/435203.rss">Summoning [PI]</source>
      </item>
      <item>
        <title>Summoning [PI]</title>
        <dc:creator><![CDATA[@TormentedSoul TormentedSoul]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/tormentedsoul">@TormentedSoul</a> wrote:</p>
          <blockquote>
              <p>This is not a tutorial now fix this shit! This is a snippet you idiot.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/summoning-pi/435203/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/summoning-pi/435203/6</link>
        <pubDate>Sun, 18 Mar 2012 10:23:35 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-435203-6</guid>
        <source url="https://forum.moparisthebest.com/t/summoning-pi/435203.rss">Summoning [PI]</source>
      </item>
      <item>
        <title>Summoning [PI]</title>
        <dc:creator><![CDATA[@Ruby_Forums_Coder Ruby]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ruby_forums_coder">@Ruby_Forums_Coder</a> wrote:</p>
          <blockquote>
              <p>Just a compilation of snippets.</p>
<p>Explain your code.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/summoning-pi/435203/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/summoning-pi/435203/5</link>
        <pubDate>Sun, 18 Mar 2012 01:10:40 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-435203-5</guid>
        <source url="https://forum.moparisthebest.com/t/summoning-pi/435203.rss">Summoning [PI]</source>
      </item>
      <item>
        <title>Summoning [PI]</title>
        <dc:creator><![CDATA[@vV_Fant0m_Vv vV Fant0m Vv]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/vv_fant0m_vv">@vV_Fant0m_Vv</a> wrote:</p>
          <blockquote>
              <p>If this works, you’re the maan. &lt;3</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/summoning-pi/435203/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/summoning-pi/435203/4</link>
        <pubDate>Sat, 17 Mar 2012 23:55:02 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-435203-4</guid>
        <source url="https://forum.moparisthebest.com/t/summoning-pi/435203.rss">Summoning [PI]</source>
      </item>
      <item>
        <title>Summoning [PI]</title>
        <dc:creator><![CDATA[@artem543 artem543]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/artem543">@artem543</a> wrote:</p>
          <blockquote>
              <p>Wow, nice. Combat? Clipping?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/summoning-pi/435203/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/summoning-pi/435203/3</link>
        <pubDate>Tue, 06 Mar 2012 04:32:42 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-435203-3</guid>
        <source url="https://forum.moparisthebest.com/t/summoning-pi/435203.rss">Summoning [PI]</source>
      </item>
      <item>
        <title>Summoning [PI]</title>
        <dc:creator><![CDATA[@V113 V1]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/v113">@V113</a> wrote:</p>
          <blockquote>
              <p>Doesn’t really fall under the category of ‘tutorial’ (Haven’t explained your actions) but anyhow. From the looks of it you seem to of put a lot of time into making it. Good Job  <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/summoning-pi/435203/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/summoning-pi/435203/2</link>
        <pubDate>Mon, 05 Mar 2012 16:49:58 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-435203-2</guid>
        <source url="https://forum.moparisthebest.com/t/summoning-pi/435203.rss">Summoning [PI]</source>
      </item>
      <item>
        <title>Summoning [PI]</title>
        <dc:creator><![CDATA[@relexlawl relexlawl]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/relexlawl">@relexlawl</a> wrote:</p>
          <blockquote>
              <p><span class="bbcode-b"><span class="bbcode-i">[COLOR=“Red”][SIZE=“4”]I AM NOT GOING TO SPOON-FEED THIS. IF YOU DON’T KNOW HOW TO ADD, DON’T DO THIS SNIPPET.[/SIZE][/COLOR]</span></span></p>
<p>Well since most of you know, Jef and I quit our project, so I have no use for this really, some things I didn’t get to finish</p>
<ul>
<li>Pouch/Scroll creation (can’t release interfaces, not mine (they’re released already though))</li>
<li>Renew familiar</li>
<li>All familiars in enum</li>
<li>Special abilities</li>
<li>All familiar dialogues (interaction)</li>
</ul>
<p>If I missed something (which I most likely will, this is a lot), just post here I’ll get it</p>
<p><span class="bbcode-b">Client-Sided:</span></p>
<p>if you have’t already, do this snippet:</p>
<p><a data-bbcode="true">http://google.com/runescape-development/rs2-client/snippets/387918-summoning-pets-tab.html</a></p>
<p>client:</p>
<pre><code class="lang-auto">private String familiarSpecial;
private Sprite summonOrbSpawn;</code></pre>
<p>find loadOrbs() and add this under it:</p>
<pre><code class="lang-auto"></code></pre>
<pre><code class="lang-auto">public boolean hasFollower = false;
	private Sprite[] summon = new Sprite[3];
	public void drawSummoningOrb() {
		String OrbDirectory = signlink.findcachedir()+"/Sprites/Frame/";
		//System.out.println("current summon points - String: " + RSInterface.interfaceCache[18167].message + ", parseInt: " + Integer.parseInt(RSInterface.interfaceCache[18167].message));
		//System.out.println("max summon points - String: " + RSInterface.interfaceCache[18171].message + ", parseInt: " + Integer.parseInt(RSInterface.interfaceCache[18171].message));
		int currentSummoningPoints = Integer.parseInt(RSInterface.interfaceCache[18167].message);
		int maxSummoningPoints = Integer.parseInt(RSInterface.interfaceCache[18171].message);
		int summoningPoints = (int) (((double) currentSummoningPoints / (double) maxSummoningPoints) * 100D);
		Sprite emptyOrb = new Sprite(OrbDirectory + "ORBS 0.png", 27, getOrbFill(summoningPoints));
		Sprite summonOrbToDraw = hasFollower ? summon[2] : summon[1];
		if (hasFollower &amp;&amp; super.mouseX &gt;= 687 &amp;&amp; super.mouseX &lt;= 744 &amp;&amp; super.mouseY &gt;= 130 &amp;&amp; super.mouseY &lt; 157)
			ORBS[7].drawSprite(174, 127); //Back frame
		else
			ORBS[1].drawSprite(174, 127); //Back frame
		summonOrbToDraw.drawSprite(177, 130); //Background color
		emptyOrb.drawSprite(177, 130); //Empty color for draining
		summon[0].drawSprite(183, 136); //Wolf Head
		smallText.method382(getOrbTextColor(summoningPoints), 215, Integer.toString(currentSummoningPoints), 153, true);
	}</code></pre>
<pre><code class="lang-auto">case 1516: //Summoning - cast
				//make an int to check if player has a familiar like pack yak, to use on item
				stream.createFrame(185);
				stream.writeWord(5003);
			break;
			
			case 1520: //Summoning - Attack
				//make packet to handle attacking
			break;
			
			case 1524: //Summoning - Interact
				stream.createFrame(185);
				stream.writeWord(5004);
			break;
			
			case 1528: //Summoning - Renew Familiar
				stream.createFrame(185);
				stream.writeWord(5005);
			break;
			
			case 1532: //Summoning - Take BoB
				stream.createFrame(185);
				stream.writeWord(5006);
			break;
			
			case 1536: //Summoning - Dimiss
				stream.createFrame(185);
				stream.writeWord(5007);
			break;
			
			case 1540: //Summoning - Call Follower
				stream.createFrame(185);
				stream.writeWord(5008);
			break;
			
			case 1544: //Summoning - Follower Details
				stream.createFrame(185);
				stream.writeWord(5009);
			break;</code></pre>
<pre><code class="lang-auto">summonOrbSpawn = new Sprite("Interfaces/Summoning/ORB 2");
			summon[0] = new Sprite("Gameframe/Orbs/WOLF HEAD");
			summon[1] = new Sprite("Gameframe/Orbs/SUMMON BACKGROUND 1");
			summon[2] = new Sprite("Gameframe/Orbs/SUMMON BACKGROUND 2");</code></pre>
<pre><code class="lang-auto">} else if (super.mouseX &gt;= 687 &amp;&amp; super.mouseX &lt;= 744 &amp;&amp; super.mouseY &gt;= 130 &amp;&amp; super.mouseY &lt; 157) {
			if (hasFollower) {
				menuActionName[8] = "Cast @gre@" + familiarSpecial;
				menuActionID[8] = 1516;
				menuActionName[7] = "Attack";
				menuActionID[7] = 1520;
				menuActionName[6] = "Interact";
				menuActionID[6] = 1524;
				menuActionName[5] = "Renew Familiar";
				menuActionID[5] = 1528;
				menuActionName[4] = "Take BoB";
				menuActionID[4] = 1532;
				menuActionName[3] = "Dismiss"; //This is the one I forgot :X
				menuActionID[3] = 1536;
				menuActionName[2] = "Call Follower";
				menuActionID[2] = 1540;
				menuActionName[1] = "Follower Details";
				menuActionID[1] = 1544;
				menuActionRow = 9;
			}</code></pre>
<p>in packet 126 add this somewhere (yes this was just a cheap hax)</p>
<pre><code class="lang-auto">if (text.startsWith(":follower:"))
						hasFollower = text.substring(10).equalsIgnoreCase("on");
					if (text.startsWith(":familiarSpecial:"))
						familiarSpecial = text.substring(17);</code></pre>
<p>in resetLogout() add this</p>
<pre><code class="lang-auto">hasFollower = false;</code></pre>
<p>Think that’s it for client.</p>
<p><span class="bbcode-b"><span class="bbcode-i">Server-sided:</span></span></p>
<p>in your skills folder extract this:</p>
<p><a href="http://up.ht/z1tWHu" data-bbcode="true" rel="nofollow noopener">Download summoning.rar @ UppIT</a></p>
<p>also add the path in your compiler if needed.</p>
<p>Note: add imports to all of them</p>
<p>import server.model.players.skills.summoning.*;</p>
<p>Client:</p>
<p>in destruct and logout methods</p>
<pre><code class="lang-auto">			if (familiarID &gt; 0) {
				/*if (hasPet) {
					
				} else {*/
					Summoning.dismissFamiliar(this, false, true);
				//}
			}</code></pre>
<p>in initialize method</p>
<pre><code class="lang-auto">		if (familiarID &gt; 0) {
			/*if (hasPet) {
			
			} else if (hasFamiliar) {*/
				Summoning.spawnFamiliar(this, familiarID);
			//}
		}</code></pre>
<p>in Player:</p>
<pre><code class="lang-auto">/* Summoning */
	public int familiarIndex, familiarID, familiarMinutes, familiarSeconds;
	public boolean hasFamiliar, makingFamiliarAttack, isBankingWithPackYak, familiarTransformed, familiarEvent;
	public byte hasFollower, summoningSpecial = 10;
	public String familiarSpecial = "";
	public long callFamiliarDelay, specialAttackDelay;</code></pre>
<p>in PlayerAssistant:</p>
<p>find applyDead and add these somwhere:</p>
<pre><code class="lang-auto">		c.getPA().sendFrame126(":follower:off", -1);
		if (c.familiarID &gt; 0 &amp;&amp; c.hasFamiliar)
			Summoning.dismissFamiliar(c, true, true);</code></pre>
<p>in PlayerSave:</p>
<pre><code class="lang-auto">					} else if (token.equals("Familiar-ID")) {
						p.familiarID = Integer.parseInt(token2);
					} else if (token.equals("Familiar-Minutes")) {
						p.familiarMinutes = Integer.parseInt(token2);
					} else if (token.equals("Familiar-Seconds")) {
						p.familiarSeconds = Integer.parseInt(token2);</code></pre>
<pre><code class="lang-auto">			characterfile.newLine();
			characterfile.write("Familiar-ID = ", 0, 14);
			characterfile.write(Integer.toString(p.familiarID), 0, Integer.toString(p.familiarID).length());
			characterfile.newLine();
			characterfile.write("Familiar-Minutes = ", 0, 19);
			characterfile.write(Integer.toString(p.familiarMinutes), 0, Integer.toString(p.familiarMinutes).length());
			characterfile.newLine();
			characterfile.write("Familiar-Seconds = ", 0, 19);
			characterfile.write(Integer.toString(p.familiarSeconds), 0, Integer.toString(p.familiarSeconds).length());
			characterfile.newLine();</code></pre>
<p>find case 9: (the one that says if (token.equals(“character-name”)) {)</p>
<p>under it add</p>
<pre><code class="lang-auto">case 10: //Summoning - Stored items
					if (token.equals("Item-Stored"))
						p.getStorage().itemInBoB[Integer.parseInt(token3[0])] = Integer.parseInt(token3[1]);
				break;</code></pre>
<p>and put this one with the others:</p>
<pre><code class="lang-auto">				} else if (line.equals("[STORED]")) {
					ReadMode = 10;</code></pre>
<p>now find /* IGNORES */ below that add:</p>
<pre><code class="lang-auto">			characterfile.write("[STORED]", 0, 8);
			characterfile.newLine();
			for (int i = 0; i &lt; p.getStorage().itemInBoB.length; i++) {
				characterfile.write("Item-Stored = ", 0, 14);
				characterfile.write(Integer.toString(i), 0, Integer.toString(i).length());
				characterfile.write("	", 0, 1);
				characterfile.write(Integer.toString(p.getStorage().itemInBoB[i]), 0, Integer.toString(p.getStorage().itemInBoB[i]).length());
				characterfile.newLine();
			}
			characterfile.newLine();</code></pre>
<p>Now ActionHandler:</p>
<p>FirstClickNpc method:</p>
<pre><code class="lang-auto">		if (Summoning.npcIsFamiliar(c, NPCHandler.npcs[c.npcClickIndex])
			FamiliarInteraction.interactWithFamiliar(c);</code></pre>
<p>SecondClickNpc method:</p>
<pre><code class="lang-auto">		if (c.getStorage().isBoBFamiliar(NPCHandler.npcs[c.npcClickIndex]))
			c.getStorage().openBoBInterface(NPCHandler.npcs[c.npcClickIndex]);</code></pre>
<p>In ClickingButtons:</p>
<pre><code class="lang-auto">case 70115: //Summoning - Call follower
			case 19144:
				Summoning.callFamiliar(c, NPCHandler.npcs[c.familiarIndex]);
			break;
		
			case 70109: //Summoning - Withdraw BoB
			case 19142: //Summoning - Take BoB
			case 10146: //Summoning - Take BoB
				c.getStorage().withdrawBoB();
			break;
		
			case 19145: //Summoning - Follower details
				c.getPA().sendFrame106(10);
			break;
		
			case 70118: //Summoning - Dismiss familiar
			case 19143:
				Summoning.dismissFamiliar(c, true, true);
			break;
		
			case 70112: //Summoning - Renew familiar
			case 19141:
				Summoning.renewFamiliar(c);
			break;</code></pre>
<p>Now for BoB:</p>
<p>add this in Bank5</p>
<pre><code class="lang-auto">		case 2700: //Storage - Take 5 from BoB
				if (c.getStorage().isStoringItems)
					c.getStorage().withdrawItem(removeId, removeSlot, 5);
		break;</code></pre>
<p>find case 5064: and under the if (c.isBanking) statement add</p>
<pre><code class="lang-auto">				else if (c.getStorage().isStoringItems)
					c.getStorage().storeItem(removeId, removeSlot, 5);</code></pre>
<p>do the same for bank10 except replace 5 with 10…</p>
<p>in BankAll:</p>
<pre><code class="lang-auto">case 2700: //Storage - Take All from BoB
				if (c.getStorage().isStoringItems)
					c.getStorage().withdrawItem(removeId, removeSlot, c.getStorage().getItemAmount(removeId));
			break;</code></pre>
<p>under case 5064: same as before under the if (c.isBanking) statement add this</p>
<pre><code class="lang-auto">} else if (c.getStorage().isStoringItems)
					c.getStorage().storeItem(removeId, removeSlot, c.getItems().getItemAmount(removeId));</code></pre>
<p>Now in BankX2 add:</p>
<pre><code class="lang-auto">case 2700: //Storage - Take X From BoB
				if (c.getStorage().isStoringItems)
					c.getStorage().withdrawItem(c.xRemoveId, c.xRemoveSlot, Xamount);
			break;</code></pre>
<p>under case 5064: add this under if (c.isBanking) statement:</p>
<pre><code class="lang-auto">else if (c.getStorage().isStoringItems)
					c.getStorage().storeItem(c.xRemoveId, c.xRemoveSlot, Xamount);</code></pre>
<p>in RemoveItem add:</p>
<pre><code class="lang-auto">case 2700:
				if (c.getStorage().isStoringItems)
					c.getStorage().withdrawItem(removeId, removeSlot, 1);
			break;</code></pre>
<p>under case 5064: below if (c.isBanking) statement add:</p>
<pre><code class="lang-auto">else if (c.getStorage().isStoringItems)
					c.getStorage().storeItem(removeId, removeSlot, 1);</code></pre>
<p>Think that’s it…</p>
<p>[SPOILER=“Some method you might need”]<br>
Will add requested methods here:</p>
<p>[SPOILER=“followPlayer (NPC)”]</p>
<pre><code class="lang-auto">	public void followPlayer(Client p) {
		if (p == null || p.isDead) {
			facePlayer(-1);
			randomWalk = true; 
	      	underAttack = false;	
			return;
		}
		int walkToX = p.absX;
		int walkToY = p.absY;
		randomWalk = false;
		if(walkToY &lt; absY) {
			moveX = Server.npcHandler.GetMove(absX, walkToX);
			moveY = Server.npcHandler.GetMove(absY, walkToY - NPCHandler.getFollowDistance(npcType));
		} else if(walkToY &gt; absY) {
			moveX = Server.npcHandler.GetMove(absX, walkToX);
			moveY = Server.npcHandler.GetMove(absY, walkToY - NPCHandler.getFollowDistance(npcType));
		} else if(walkToX &lt; absX) {
			moveX = Server.npcHandler.GetMove(absX, walkToX);
			moveY = Server.npcHandler.GetMove(absY, walkToY - NPCHandler.getFollowDistance(npcType));
		} else if(walkToX &gt; absX)  {
			moveX = Server.npcHandler.GetMove(absX, walkToX);
			moveY = Server.npcHandler.GetMove(absY, walkToY - NPCHandler.getFollowDistance(npcType));
		} else if(walkToX == absX || walkToY == absY) {
			switch (Misc.random(3)) {
				case 0:
					moveX = Server.npcHandler.GetMove(absX, walkToX);
					moveY = Server.npcHandler.GetMove(absY, walkToY + NPCHandler.getFollowDistance(npcType));
				break;
							
				case 1:
					moveX = Server.npcHandler.GetMove(absX, walkToX);
					moveY = Server.npcHandler.GetMove(absY, walkToY - NPCHandler.getFollowDistance(npcType));
				break;
							
				case 2:
					moveX = Server.npcHandler.GetMove(absX, walkToX + NPCHandler.getFollowDistance(npcType));
					moveY = Server.npcHandler.GetMove(absY, walkToY);
				break;
						
				case 3:
					moveX = Server.npcHandler.GetMove(absX, walkToX - NPCHandler.getFollowDistance(npcType));
					moveY = Server.npcHandler.GetMove(absY, walkToY);
				break;
			}	
		}
		facePlayer(p.playerId);
		getNextNPCMovement();
		updateRequired = true;
	}</code></pre>
<p>[/SPOILER]<br>
[/SPOILER]</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/summoning-pi/435203/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/summoning-pi/435203/1</link>
        <pubDate>Mon, 05 Mar 2012 05:43:19 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-435203-1</guid>
        <source url="https://forum.moparisthebest.com/t/summoning-pi/435203.rss">Summoning [PI]</source>
      </item>
  </channel>
</rss>
