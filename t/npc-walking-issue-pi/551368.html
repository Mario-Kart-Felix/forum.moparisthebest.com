<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/npc-walking-issue-pi/551368 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:06:54 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>NPC Walking Issue [PI] - Runescape - moparisthebest.com</title>
    <meta name="description" content="Well, this is very odd, but when i set my npcs to walk in spawn-config.java, they don&amp;#39;t move, they just stand in one place. I have looked in npcHandler for a possible reason for the issue, but found nothing, as my code w&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="551368.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;NPC Walking Issue [PI]&#39;" href="551368.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/npc-walking-issue-pi/551368" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/npc-walking-issue-pi/551368" />
<meta property="og:title" content="NPC Walking Issue [PI]" />
<meta name="twitter:title" content="NPC Walking Issue [PI]" />
<meta property="og:description" content="Well, this is very odd, but when i set my npcs to walk in spawn-config.java, they don’t move, they just stand in one place. I have looked in npcHandler for a possible reason for the issue, but found nothing, as my code was exactly the same as friends of mine, ect. Someone help me out please? Here is the codes for walking/NPC facing  [code]/**  * Random walking and walking home  **/  if (npcs[i] == null) continue;  if((!npcs[i].underAttack || npcs[i].walkingHome) &amp;&amp; npcs[i].randomWalk &amp;&amp; !npcs[i]..." />
<meta name="twitter:description" content="Well, this is very odd, but when i set my npcs to walk in spawn-config.java, they don’t move, they just stand in one place. I have looked in npcHandler for a possible reason for the issue, but found nothing, as my code was exactly the same as friends of mine, ect. Someone help me out please? Here is the codes for walking/NPC facing  [code]/**  * Random walking and walking home  **/  if (npcs[i] == null) continue;  if((!npcs[i].underAttack || npcs[i].walkingHome) &amp;&amp; npcs[i].randomWalk &amp;&amp; !npcs[i]..." />
<meta property="article:published_time" content="2015-05-06T03:19:35+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="551368.html">NPC Walking Issue [PI]</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/beale.html'><span itemprop='name'>beale</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-05-06T03:19:35Z'>
            <time itemprop='dateModified' datetime='2016-08-04T15:06:27Z' class='post-time'>
              August 4, 2016,  3:06pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Well, this is very odd, but when i set my npcs to walk in spawn-config.java, they don’t move, they just stand in one place. I have looked in npcHandler for a possible reason for the issue, but found nothing, as my code was exactly the same as friends of mine, ect. Someone help me out please? Here is the codes for walking/NPC facing</p>
<p>[code]/**<br>
* Random walking and walking home<br>
**/<br>
if (npcs[i] == null) continue;<br>
if((!npcs[i].underAttack || npcs[i].walkingHome) &amp;&amp; npcs[i].randomWalk &amp;&amp; !npcs[i].isDead) {<br>
npcs[i].facePlayer(0);<br>
npcs[i].killerId = 0;	<br>
if(npcs[i].spawnedBy == 0) {<br>
if((npcs[i].absX &gt; npcs[i].makeX + Config.NPC_RANDOM_WALK_DISTANCE) || (npcs[i].absX &lt; npcs[i].makeX - Config.NPC_RANDOM_WALK_DISTANCE) || (npcs[i].absY &gt; npcs[i].makeY + Config.NPC_RANDOM_WALK_DISTANCE) || (npcs[i].absY &lt; npcs[i].makeY - Config.NPC_RANDOM_WALK_DISTANCE)) {<br>
npcs[i].walkingHome = true;<br>
}<br>
}</p>
<pre><code>				if (npcs[i].walkingHome &amp;&amp; npcs[i].absX == npcs[i].makeX &amp;&amp; npcs[i].absY == npcs[i].makeY) {
					npcs[i].walkingHome = false;
				} else if(npcs[i].walkingHome) {
					npcs[i].moveX = GetMove(npcs[i].absX, npcs[i].makeX);
		      		npcs[i].moveY = GetMove(npcs[i].absY, npcs[i].makeY);
					npcs[i].getNextNPCMovement(i); 
					npcs[i].updateRequired = true;
				}
				if (npcs[i].walkingType &gt;= 0) {
					switch(npcs[i].walkingType) {

					case 5:
						npcs[i].turnNpc(npcs[i].absX-1, npcs[i].absY);
						break;

					case 4:
						npcs[i].turnNpc(npcs[i].absX+1, npcs[i].absY);
						break;

					case 3:
						npcs[i].turnNpc(npcs[i].absX, npcs[i].absY-1);
						break;
					case 2:
						npcs[i].turnNpc(npcs[i].absX, npcs[i].absY+1);
						break;

					default:
						if (npcs[i].walkingType &gt;= 0) {
							npcs[i].turnNpc(npcs[i].absX, npcs[i].absY); //makes it when npcs move they dont turn back to one direction
						}
						break;
					}
				}
			if(npcs[i].walkingType == 1) {
					if(Misc.random(3)== 1 &amp;&amp; !npcs[i].walkingHome) {
						int MoveX = 0;
						int MoveY = 0;			
						int Rnd = Misc.random(9);
						if (Rnd == 1) {
							MoveX = 1;
							MoveY = 1;
						} else if (Rnd == 2) {
							MoveX = -1;
						} else if (Rnd == 3) {
							MoveY = -1;
						} else if (Rnd == 4) {
							MoveX = 1;
						} else if (Rnd == 5) {
							MoveY = 1;
						} else if (Rnd == 6) {
							MoveX = -1;
							MoveY = -1;
						} else if (Rnd == 7) {
							MoveX = -1;
							MoveY = 1;
						} else if (Rnd == 8) {
							MoveX = 1;
							MoveY = -1;
						}
									
						if (MoveX == 1) {
							if (npcs[i].absX + MoveX &lt; npcs[i].makeX + 1) {
								npcs[i].moveX = MoveX;
							} else {
								npcs[i].moveX = 0;
							}
						}
						
						if (MoveX == -1) {
							if (npcs[i].absX - MoveX &gt; npcs[i].makeX - 1)  {
								npcs[i].moveX = MoveX;
							} else {
								npcs[i].moveX = 0;
							}
						}
						
						if(MoveY == 1) {
							if(npcs[i].absY + MoveY &lt; npcs[i].makeY + 1) {
								npcs[i].moveY = MoveY;
							} else {
								npcs[i].moveY = 0;
							}
						}
						
						if(MoveY == -1) {
							if(npcs[i].absY - MoveY &gt; npcs[i].makeY - 1)  {
								npcs[i].moveY = MoveY;
							} else {
								npcs[i].moveY = 0;
							}
						}
							

						int x = (npcs[i].absX + npcs[i].moveX);
						int y = (npcs[i].absY + npcs[i].moveY);
						if (VirtualWorld.I(npcs[i].heightLevel, npcs[i].absX, npcs[i].absY, x, y, 0))
							npcs[i].getNextNPCMovement(i);
						else
						{
							npcs[i].moveX = 0;
							npcs[i].moveY = 0;
						} 
						npcs[i].updateRequired = true;
					}
				}
			}
</code></pre>
<p>[/code]<br>
If anyone could help it would be greatly appreciated  ;D</p>
      </div>

      <meta itemprop='headline' content='NPC Walking Issue [PI]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/sk8rdude461.html'><span itemprop='name'>sk8rdude461</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-05-06T08:36:50Z'>
            <time itemprop='dateModified' datetime='2016-08-04T15:06:29Z' class='post-time'>
              August 4, 2016,  3:06pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>So I’m going to assume you set the walking type to 1, correct? Because that’s the only way it would walk in your code.<br>
The code that handles walking is right here:</p>
<p>[code=java]<br>
if(npcs[i].walkingType == 1) {<br>
if(Misc.random(3)== 1 &amp;&amp; !npcs[i].walkingHome) {<br>
int MoveX = 0;<br>
int MoveY = 0;			<br>
int Rnd = Misc.random(9);<br>
if (Rnd == 1) {<br>
MoveX = 1;<br>
MoveY = 1;<br>
} else if (Rnd == 2) {<br>
MoveX = -1;<br>
} else if (Rnd == 3) {<br>
MoveY = -1;<br>
} else if (Rnd == 4) {<br>
MoveX = 1;<br>
} else if (Rnd == 5) {<br>
MoveY = 1;<br>
} else if (Rnd == 6) {<br>
MoveX = -1;<br>
MoveY = -1;<br>
} else if (Rnd == 7) {<br>
MoveX = -1;<br>
MoveY = 1;<br>
} else if (Rnd == 8) {<br>
MoveX = 1;<br>
MoveY = -1;<br>
}</p>
<pre><code>						if (MoveX == 1) {
							if (npcs[i].absX + MoveX &lt; npcs[i].makeX + 1) {
								npcs[i].moveX = MoveX;
							} else {
								npcs[i].moveX = 0;
							}
						}
						
						if (MoveX == -1) {
							if (npcs[i].absX - MoveX &gt; npcs[i].makeX - 1)  {
								npcs[i].moveX = MoveX;
							} else {
								npcs[i].moveX = 0;
							}
						}
						
						if(MoveY == 1) {
							if(npcs[i].absY + MoveY &lt; npcs[i].makeY + 1) {
								npcs[i].moveY = MoveY;
							} else {
								npcs[i].moveY = 0;
							}
						}
						
						if(MoveY == -1) {
							if(npcs[i].absY - MoveY &gt; npcs[i].makeY - 1)  {
								npcs[i].moveY = MoveY;
							} else {
								npcs[i].moveY = 0;
							}
						}
							

						int x = (npcs[i].absX + npcs[i].moveX);
						int y = (npcs[i].absY + npcs[i].moveY);
						if (VirtualWorld.I(npcs[i].heightLevel, npcs[i].absX, npcs[i].absY, x, y, 0))
							npcs[i].getNextNPCMovement(i);
						else
						{
							npcs[i].moveX = 0;
							npcs[i].moveY = 0;
						} 
						npcs[i].updateRequired = true;
					}[/code]
</code></pre>
<p>I feel like your particular issue is related to the VirtualWorld class.</p>
<p><code>
							if (VirtualWorld.I(npcs[i].heightLevel, npcs[i].absX, npcs[i].absY, x, y, 0))
								npcs[i].getNextNPCMovement(i);
							else
							{
								npcs[i].moveX = 0;
								npcs[i].moveY = 0;
							} </code><br>
This code here checks the I method in virtualworld to see if it returns true, if it’s not true then no movement happens…</p>
<p>You can “diagnose” this as the issue by using some simple debugging techniques:</p>
<p><code>
							if (VirtualWorld.I(npcs[i].heightLevel, npcs[i].absX, npcs[i].absY, x, y, 0)) {
								npcs[i].getNextNPCMovement(i);
								System.out.println("NPC " + i + " moved!");
							} else {
								npcs[i].moveX = 0;
								npcs[i].moveY = 0;
							} </code></p>
<p>Now if you run the server with that code, any time <span class="bbcode-u">any</span> npc should move, it will print “NPC 1 moved!” (1 being the npc index) into the console.<br>
If it doesn’t send, then the I method is returning false.</p>
<p>If it does send and the npc still doesn’t move, then you have underlying problems in the getNextNPCMovement method.</p>
      </div>

      <meta itemprop='headline' content='NPC Walking Issue [PI]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/beale.html'><span itemprop='name'>beale</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-05-07T00:34:37Z'>
            <time itemprop='dateModified' datetime='2016-08-04T15:06:46Z' class='post-time'>
              August 4, 2016,  3:06pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>So what would I do if the method is returning false? <img src="../../images/emoji/twitter/expressionlessae52.png?v=5" title=":expressionless:" class="emoji" alt=":expressionless:"></p>
      </div>

      <meta itemprop='headline' content='NPC Walking Issue [PI]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/sk8rdude461.html'><span itemprop='name'>sk8rdude461</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-05-07T02:45:34Z'>
            <time itemprop='dateModified' datetime='2016-08-04T15:06:47Z' class='post-time'>
              August 4, 2016,  3:06pm
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Figure out why it is?<br>
VirtualWorld is an old way to handle clipping if I remember… You could change it to a newer clipping system, or remove it, or fix it.</p>
      </div>

      <meta itemprop='headline' content='NPC Walking Issue [PI]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/beale.html'><span itemprop='name'>beale</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-05-07T20:03:33Z'>
            <time itemprop='dateModified' datetime='2016-08-04T15:06:51Z' class='post-time'>
              August 4, 2016,  3:06pm
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Okay I think i will just delete it and add new npc clipping, because the npcs aren’t even clipped right.</p>
      </div>

      <meta itemprop='headline' content='NPC Walking Issue [PI]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/npc-walking-issue-pi/551368 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:06:54 GMT -->
</html>
