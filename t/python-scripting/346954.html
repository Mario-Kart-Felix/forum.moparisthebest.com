<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/python-scripting/346954 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Aug 2019 19:19:00 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Python scripting - Runescape - moparisthebest.com</title>
    <meta name="description" content="[center][b]Python scripting[/b][/center] 

Well, programming in Java can become quite drab at times, and it would seem to be much more appropriate to do something in scripting rather than wasting time and effort to doing&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="346954.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Python scripting&#39;" href="346954.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/python-scripting/346954" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/python-scripting/346954" />
<meta property="og:title" content="Python scripting" />
<meta name="twitter:title" content="Python scripting" />
<meta property="og:description" content="[center]Python scripting[/center]  Well, programming in Java can become quite drab at times, and it would seem to be much more appropriate to do something in scripting rather than wasting time and effort to doing something over and over. Not to mention that Python is just so much fun to try! Now, the Jython project gives us the perfect opportunity to add scripting content to our servers. You can get the latest installer from http://jython.org/downloads.html  After install, locate your install di..." />
<meta name="twitter:description" content="[center]Python scripting[/center]  Well, programming in Java can become quite drab at times, and it would seem to be much more appropriate to do something in scripting rather than wasting time and effort to doing something over and over. Not to mention that Python is just so much fun to try! Now, the Jython project gives us the perfect opportunity to add scripting content to our servers. You can get the latest installer from http://jython.org/downloads.html  After install, locate your install di..." />
<meta property="article:published_time" content="2010-07-02T10:59:35+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="346954.html">Python scripting</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Hayley1.html'><span itemprop='name'>Hayley1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-07-02T10:59:35Z'>
            <time itemprop='dateModified' datetime='2016-07-31T17:29:58Z' class='post-time'>
              July 31, 2016,  5:29pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[center]<span class="bbcode-b">Python scripting</span>[/center]</p>
<p>Well, programming in Java can become quite drab at times, and it would seem to be much more appropriate to do something in scripting rather than wasting time and effort to doing something over and over. Not to mention that Python is just so much fun to try! Now, the Jython project gives us the perfect opportunity to add scripting content to our servers. You can get the latest installer from <a href="http://jython.org/downloads.html" rel="nofollow noopener">http://jython.org/downloads.html</a></p>
<p>After install, locate your install directory (in my case C:\jython-2.5.1) and copy the entire Lib folder to your server’s root directory and rename it to python. This may help out later but if you do not find a use for it you may remove it (it adds about 17MB!), or simply copy only the modules you will be using. Now, create a new directory called scripts.</p>
<p>Then simply add this class to your server’s classpath:</p>
<pre><code class="lang-auto">import java.io.File;
import java.io.FileInputStream;

import org.python.core.Py;
import org.python.core.PyFunction;
import org.python.core.PyObject;
import org.python.core.PyString;
import org.python.util.PythonInterpreter;

/**
 * A management class for Jython scripting.
 * 
 * @author Hayley Smith
 * 
 */
public class ScriptManager {

	/**
	 * The interpreter. This could be considered the core of the ScriptManager.
	 */
	private final PythonInterpreter interp = new PythonInterpreter();

	/**
	 * The singleton.
	 */
	private static final ScriptManager singleton = new ScriptManager();

	/**
	 * Cannot be instantiated.
	 */
	private ScriptManager() {
		Py.getSystemState().path.append(new PyString("./python/"));
		try {
			loadScripts(new File("./scripts/"));
		} catch (Exception e) {
			e.printStackTrace();
		}
	}

	/**
	 * Loads all of the scripts in the specified directory.
	 * 
	 * @param dir
	 *            The file object representing the directory to load the scripts
	 *            from.
	 * @throws Exception
	 */
	public void loadScripts(File dir) throws Exception {
		if (!dir.exists() || !dir.isDirectory()) {
			System.out
					.println("The specified file does not exist or is not a directory!");
		}
		for (File file : dir.listFiles()) {
			if (file.isDirectory()) {
				loadScripts(file);
			} else {
				if (!file.getName().toLowerCase().endsWith(".py")) {
					continue;
				}
				interp.execfile(new FileInputStream(file));
				System.out.println("	Loaded script: " + file.getName() + ".");
			}
		}
	}

	/**
	 * Calls a function from the interpreter.
	 * 
	 * @param functionName
	 *            The name of the function.
	 * @param parameters
	 *            The parameters to pass to the function.
	 */
	public void call(String functionName, Object... parameters) {
		try {
			PyObject object = interp.get(functionName);
			if (object == null || !(object instanceof PyFunction)) {
				return;
			}
			PyFunction function = (PyFunction) object;
			function.__call__(Py.javas2pys(parameters));
		} catch (Exception e) {
			e.printStackTrace();
		}
	}

	/**
	 * Gets the interpreter instance.
	 * 
	 * @return The interpreter instance.
	 */
	public PythonInterpreter getInterp() {
		return interp;
	}

	/**
	 * Gets the singleton.
	 * 
	 * @return The singleton.
	 */
	public static ScriptManager getSingleton() {
		return singleton;
	}

}</code></pre>
<p>Starting up the ScriptManager (in your main method or wherever the hell your server initialization is), add this:</p>
<pre><code class="lang-auto">ScriptManager.getSingleton();</code></pre>
<p>To load more scripts:</p>
<pre><code class="lang-auto">ScriptManager.getSingleton().loadScripts(new File("YOUR_SCRIPTS_DIRECTORY"));</code></pre>
<p>To invoke a function:</p>
<pre><code class="lang-auto">ScriptManager.getSingleton().call("FUNCTION_NAME", FUNCTION_ARGUMENTS);</code></pre>
<p>Another advantage is that this allows us to reload scripts without restarting the server, like so:</p>
<pre><code class="lang-auto">try {	
	ScriptManager.getSingleton().getInterp().cleanup();
	ScriptManager.getSingleton().loadScripts(new File("./scripts/"));
} catch(Exception e) {
	e.printStackTrace();
}</code></pre>
<p>Now, I could go on and on for hours about how much easier this makes my life and how to use it, however, there’s Python’s tutorial for that.</p>
<p>So here’s a little “hello world” to get you started (for delta servers, could really be used on any now I haven’t really taken a look into Delta so I could be wrong):</p>
<pre><code class="lang-auto">def helloworld(client):
	client.sM("Testing shits.")</code></pre>
<p>And perhaps on client init you could:</p>
<pre><code class="lang-auto">ScriptManager.getSingleton().call("helloworld", this);</code></pre>
<p>Python forces you to use indentations so your code WILL look a lot nicer.</p>
<p>Well, I hope that this at least helps somebody and they actually get into making scripted content. As far as I know this will not have a large impact on performance, but no testing on my behalf has been done.</p>
      </div>

      <meta itemprop='headline' content='Python scripting'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/badger41.html'><span itemprop='name'>badger41</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-07-02T11:18:36Z'>
            <time itemprop='dateModified' datetime='2016-07-31T17:29:58Z' class='post-time'>
              July 31, 2016,  5:29pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>isnt that how gta:sa servers work? filterscripts and plugins and such?</p>
<p>good job though, im sure cool scripts could be made to accompany this system.</p>
      </div>

      <meta itemprop='headline' content='Python scripting'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/doom_j.html'><span itemprop='name'>doom_j</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-07-02T11:23:31Z'>
            <time itemprop='dateModified' datetime='2016-07-31T17:29:59Z' class='post-time'>
              July 31, 2016,  5:29pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“badger41, post:2, topic:346954”]isnt that how gta:sa servers work? filterscripts and plugins and such?</p>
<p>good job though, im sure cool scripts could be made to accompany this system.[/quote]</p>
<p>A few servers here use Pythom as a script for doing events or actions like PI(Riotscape). Its a good scripting language to learn and use.</p>
      </div>

      <meta itemprop='headline' content='Python scripting'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Hayley1.html'><span itemprop='name'>Hayley1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-07-02T11:26:41Z'>
            <time itemprop='dateModified' datetime='2016-07-31T17:29:59Z' class='post-time'>
              July 31, 2016,  5:29pm
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“jmood128, post:3, topic:346954”][quote author=badger41 link=topic=443332.msg3255448#msg3255448 date=1278069516]<br>
isnt that how gta:sa servers work? filterscripts and plugins and such?</p>
<p>good job though, im sure cool scripts could be made to accompany this system.<br>
[/quote]</p>
<p>A few servers here use Pythom as a script for doing events or actions like PI(Riotscape). Its a good scripting language to learn and use.[/quote]<br>
I’m pretty sure Jython also supports classes and such however I haven’t looked deeply into the API.</p>
      </div>

      <meta itemprop='headline' content='Python scripting'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/python-scripting/346954 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Aug 2019 19:19:01 GMT -->
</html>
