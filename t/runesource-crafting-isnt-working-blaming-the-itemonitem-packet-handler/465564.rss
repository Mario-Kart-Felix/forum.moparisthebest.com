<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>[RuneSource]Crafting isn&#39;t working - Blaming the itemonitem packet handler</title>
    <link>https://forum.moparisthebest.com/t/runesource-crafting-isnt-working-blaming-the-itemonitem-packet-handler/465564</link>
    <description>The crafting isn&#39;t working, and I&#39;m pretty sure I added it right.

Itemonitem packet:

[code=java]
	private void ItemonItem(Player player, Packet packet) {
		int usedItem = buffer.readShort();
		int selectedItem = buffer.readShortA() &amp; 0xFFFF;
		final int selectedItemId = player.getInventory().getItemContainer()
				.get(selectedItem).getId();
		final int usedItemId = player.getInventory().getItemContainer()
				.get(usedItem).getId();
		buffer.readShort();
		buffer.readShort();
		Crafting.canCutGem(usedItem, selectedItem);
	}
[/code]

I also tried

[code=java]
Crafting.canCutGem(selectedItemId, usedItemId);
[/code]

and

[code=java]
Crafting.canCutGem(selectedItem, usedItem);
[/code]

Crafting class

[code=java]
package com.rs2.model.content.skills.crafting;

import com.rs2.model.content.skills.Skills;
import com.rs2.model.content.skills.crafting.CraftingData.*;
import com.rs2.model.players.Player;
import com.rs2.model.players.Item;

public class Crafting {

	public static GEM_CUTTING GC;
	public static Player c;
	public static Item item;
	public static Skills skills;

	/**
	 * Does the player have the items required to cut a gem?
	 * 
	 * @param firstItem
	 *            Checks first item used
	 * @param secondItem
	 *            Checks second item used
	 */

	public static void canCutGem(final int firstItem, final int secondItem) {
		if (firstItem == 1755 &amp;&amp; secondItem == GC.getUncutGemID())
			startCutting();
		else
			c.getActionSender().sendMessage(
					&quot;You need a crafting level of &quot; + GC.getLevelRequired()
							+ &quot; to craft this.&quot;);
	}

	/**
	 * Start the cutting if the player has the required items
	 */

	private static void startCutting() {
		c.getInventory().deleteItem(item, GC.getUncutGemID());
		c.getUpdateFlags().sendAnimation(885, 0);
		c.getInventory().addItem1(item, GC.getCutGemID());
		skills.addExp(Skills.CRAFTING, GC.getEXPGiven());
	}

}
[/code]</description>
    
    <lastBuildDate>Tue, 30 Oct 2012 16:03:56 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/runesource-crafting-isnt-working-blaming-the-itemonitem-packet-handler/465564.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>[RuneSource]Crafting isn&#39;t working - Blaming the itemonitem packet handler</title>
        <dc:creator><![CDATA[@arham_4 arham 4]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/arham_4">@arham_4</a> wrote:</p>
          <blockquote>
              <p>The crafting isn’t working, and I’m pretty sure I added it right.</p>
<p>Itemonitem packet:</p>
<pre><code class="lang-auto">	private void ItemonItem(Player player, Packet packet) {
		int usedItem = buffer.readShort();
		int selectedItem = buffer.readShortA() &amp; 0xFFFF;
		final int selectedItemId = player.getInventory().getItemContainer()
				.get(selectedItem).getId();
		final int usedItemId = player.getInventory().getItemContainer()
				.get(usedItem).getId();
		buffer.readShort();
		buffer.readShort();
		Crafting.canCutGem(usedItem, selectedItem);
	}</code></pre>
<p>I also tried</p>
<pre><code class="lang-auto">Crafting.canCutGem(selectedItemId, usedItemId);</code></pre>
<p>and</p>
<pre><code class="lang-auto">Crafting.canCutGem(selectedItem, usedItem);</code></pre>
<p>Crafting class</p>
<pre><code class="lang-auto">package com.rs2.model.content.skills.crafting;

import com.rs2.model.content.skills.Skills;
import com.rs2.model.content.skills.crafting.CraftingData.*;
import com.rs2.model.players.Player;
import com.rs2.model.players.Item;

public class Crafting {

	public static GEM_CUTTING GC;
	public static Player c;
	public static Item item;
	public static Skills skills;

	/**
	 * Does the player have the items required to cut a gem?
	 * 
	 * @param firstItem
	 *            Checks first item used
	 * @param secondItem
	 *            Checks second item used
	 */

	public static void canCutGem(final int firstItem, final int secondItem) {
		if (firstItem == 1755 &amp;&amp; secondItem == GC.getUncutGemID())
			startCutting();
		else
			c.getActionSender().sendMessage(
					"You need a crafting level of " + GC.getLevelRequired()
							+ " to craft this.");
	}

	/**
	 * Start the cutting if the player has the required items
	 */

	private static void startCutting() {
		c.getInventory().deleteItem(item, GC.getUncutGemID());
		c.getUpdateFlags().sendAnimation(885, 0);
		c.getInventory().addItem1(item, GC.getCutGemID());
		skills.addExp(Skills.CRAFTING, GC.getEXPGiven());
	}

}</code></pre>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/runesource-crafting-isnt-working-blaming-the-itemonitem-packet-handler/465564/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/runesource-crafting-isnt-working-blaming-the-itemonitem-packet-handler/465564/1</link>
        <pubDate>Tue, 30 Oct 2012 16:03:56 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-465564-1</guid>
        <source url="https://forum.moparisthebest.com/t/runesource-crafting-isnt-working-blaming-the-itemonitem-packet-handler/465564.rss">[RuneSource]Crafting isn&#39;t working - Blaming the itemonitem packet handler</source>
      </item>
  </channel>
</rss>
