<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Amazing Restore points for your character files - [Delta] + zipping files</title>
    <link>https://forum.moparisthebest.com/t/amazing-restore-points-for-your-character-files-delta-zipping-files/391595</link>
    <description>[size=18pt]Last Updated June 21 2011[/size]
A good use for this Code is because Delta Sources, some of them have a pesky bugg that deletes users for no apparent reason.

[size=12pt]Basicly your copy pasting your code for your savegame void


At the end of this tutorial you will be able to
☺have your server create new directories
☺Have a fully functional Back up system for your character files
☺have a void that determines year/month/day you are at
☺have a void that determines hour of the day you are on

[IMG]http://i245.photobucket.com/albums/gg72/Ddragonimp/Backupfiles.png[/img]




[b]Difficulty 1.2/10[/b] - Hardest part about this guide is understanding it.

[b]Files you will be Editing[/b]
client.java
server.java
CreateDirectory.java [b][New File][/b]

[b]Log Files[/b]
will be placed in files like this
[b]\Logs\20110112\16\Ddragonimp[/b]
[b]\NameOfFile\YearMonthDay\HourOfDay\PlayerName[/b]


You will need to create a new File Called
CreateDirectory.java
Case sensitive[/size]

[code]
import java.io.*;
class CreateDirectory 
{
   public static void main(String args[])
  {
		for (Player p : server.playerHandler.players) {//loop so it effects all players
	        client person = (client)p;
      try{
    String strDirectoy =&quot;&quot;;
    String strManyDirectories=&quot;Logs/&quot;+Integer.toString(p.GetLastLogin(0))+&quot;/&quot;+Integer.toString(p.GetLastLogin2(0));
    //String strManyDirectories=&quot;&quot;;

    // Create one directory
    boolean success = (new File(strDirectoy)).mkdir();
    if (success) {
      System.out.println(&quot;Directory: &quot; + strDirectoy + &quot; created&quot;);
    }    
  

    // Create multiple directories
    success = (new File(strManyDirectories)).mkdirs();
    if (success) {
      System.out.println(&quot;Directories: &quot; + strManyDirectories + &quot; created&quot;);
    }

    }catch (Exception e){//Catch exception if any
    }
  }
}
}
[/code] 
This line in the file is the one you will be editing to the following information
Each Directory will be created with in the directory with each &quot;/&quot; symbol

[code]
    String strManyDirectories=&quot;Logs/&quot;+Integer.toString(p.GetLastLogin(0))+&quot;/&quot;+Integer.toString(p.GetLastLogin2(0))+&quot;/&quot;+p.playerName;
[/code]
This file is creating &quot;Logs&quot; and inside of Logs it is creating a file called &quot;20110419&quot;
which will be gotten from GetLastLogin(0); from the client.java

Now in your Server.java File

You will need to look for any of these lines
[code]
	public static int EnergyRegian = 60;
	public static boolean enforceClient = false;
	public static GraphicsHandler GraphicsHandler = null;
	public static ItemHandler itemHandler = null;
	//public static checkPlayerCapes checkPlayerCapes = null;
	/*handlers made by Delta*/
        public static Wearing Wearing = null;
	public static special special = null;
	public static setConfig setConfig = null;
	public static textHandler textHandler = null;
        public static potions potions = null;
[/code]
then add this line
[code]
        public static CreateDirectory CreateDirectory = null;
[/code]
CreateDirectory is a file make it known.

Now look for any of these files
[code]
		npcHandler = new NPCHandler();
		itemHandler = new ItemHandler();
		EnchantHandler = new EnchantHandler();//Made by ddragonimp
		doorHandler = new DoorHandler();
		GraphicsHandler = new GraphicsHandler();
		//checkPlayerCapes = new checkPlayerCapes();
		/*handlers made by Delta*/
                Wearing = new Wearing();
[/code]

and then add this line
[code]
                CreateDirectory = new CreateDirectory();
[/code]
CreateDirectory is now the CreateDirectory.java file
[size=14pt]--------------------------------------------------------------------------
First Part Complete[/size]













[size=14pt]Part2                  Adding Void&#39;s and Integers
----------------------------------------------------[/size]

You will need to create these void and integers

This First Void is basicly saying Create Files determined from the CreateDirectory.java
[code]
	public void createFiles() {
		String[] LogFiles = {&quot;&quot;};
		server.CreateDirectory.main(LogFiles);
	}
[/code] 

These Intergers will determine what the file names are
This first Integer will be Determine the Second File Name, The hour of the day
[code]
   public static int GetLastLogin2(int Date)
   {
      Calendar cal = new GregorianCalendar();
      int hour = cal.get(Calendar.HOUR_OF_DAY);
      int day = cal.get(Calendar.DAY_OF_MONTH);
      int month = cal.get(Calendar.MONTH);
      int year = cal.get(Calendar.YEAR);
      int calc = (hour);
      return (calc);
   }
[/code]
This Integer Determines Year/Month/Day
[code]
   public static int GetLastLogin(int Date)
   {
      Calendar cal = new GregorianCalendar();
      int day = cal.get(Calendar.DAY_OF_MONTH);
      int month = cal.get(Calendar.MONTH);
      int year = cal.get(Calendar.YEAR);
      int calc = ((year * 10000) + (month * 100) + (day*1));
      return (calc - 0);
   }
[/code]

[size=14pt]-------------------------------------------------------------------------------------[/size]

















[size=14pt]Part 3                                        Where to put createFiles() Void
---------------------------------------------------------------------------------------[/size]
The following Code
[code]
createFiles();
[/code]
Should be placed in the
[code]
	public void savegame(boolean logout){
	createFiles();
[/code]
like so.





[size=14pt]--------------------------------Part4------------------------------------
Character backup files--------------
--------------------------------------------------------------------------------------[/size]

add a line in your
[code]
	public void savegame(boolean logout){
[/code]
That looks like this
[code]
           savegame2(false);
[/code]

Will end up looking like this
[code]
	public void savegame(boolean logout){
	createFiles();
	savegame2(false);
	//All of your save Information Here
BufferedWriter characterfile = null;
		try {
			characterfile = new BufferedWriter(new FileWriter(&quot;./characters/&quot;
					+ playerName + &quot;.txt&quot;));
			/* ACCOUNT */
			characterfile.write(&quot;[ACCOUNT]&quot;, 0, 9);
			characterfile.newLine();
			characterfile.write(&quot;character-username = &quot;, 0, 21);
			characterfile.write(playerName, 0, playerName.length());
			characterfile.newLine();
			characterfile.write(&quot;character-password = &quot;, 0, 21);
			characterfile.write((playerPass), 0, (playerPass)
					.length());
			characterfile.newLine();
			characterfile.newLine();
			/* CHARACTER */
			characterfile.write(&quot;[CHARACTER]&quot;, 0, 11);
			characterfile.newLine();
			characterfile.write(&quot;character-height = &quot;, 0, 19);
			characterfile.write(Integer.toString(heightLevel), 0, Integer
					.toString(heightLevel).length());
			characterfile.newLine();
			characterfile.write(&quot;character-posx = &quot;, 0, 17);
			characterfile.write(Integer.toString(absX == -1 ? 3210 : absX), 0,
					Integer.toString(absX == -1 ? 3210 : absX).length());
			characterfile.newLine();

	}
[/code]
the Majority of what you are changing is 
[code]
			characterfile = new BufferedWriter(NEWINFORMATION LOCATION);
[/code]











Copy Paste your savegame void
and paste it
rename it to savegame2

Your first part in savegame2
will not include createFiles();
☺Savegame2 will beactly the same as savegame(boolean) {
☺except it is named savegame2 and the location of its save is different.
☺also going to need a savegame3 and the location of its save is different. 
☺I go in to better detail with this later on in the guide.
[code]
	public void savegame2(boolean logout){
		savegame3(false);
[/code]





Change this (Changing this Location will be the the biggest part of the change over to the new directory files)
This is adding the Hourly Character file
[code]
			characterfile = new BufferedWriter(new FileWriter(&quot;./characters/&quot;
					+ playerName + &quot;.txt&quot;));
[/code]
to the following
[code]
			characterfile = new BufferedWriter(new FileWriter( &quot;Logs/&quot;+GetLastLogin(0)+&quot;/&quot;+GetLastLogin2(0)+&quot;/&quot;
					+ playerName + &quot;.txt&quot;));
[/code]


It will now save Characters for Every Hour of the day
[size=14pt]---------------------------------------------------------------------------------------[/size]







[size=14pt]---------------------------------------------------------------------------------------[/size]
Now creating savegame3
[code]
	public void savegame3(boolean logout){
        //No createFiles();
        //No savegame4();
        //Perfect.
        //Now Exactly what savegame is except it is savegame3
[/code]

characterfile will now be saving to this new location :P
Change this (Changing this Location will be the the biggest part of the change over to the new directory files)
This is adding the Daily Character file
[code]
			characterfile = new BufferedWriter(new FileWriter( &quot;Logs/&quot;+GetLastLogin(0)+&quot;/&quot;
					+ playerName + &quot;.txt&quot;));
[/code]

This will save 1 character for each day in the Logs Directory and Under the YearMonthDay Directory





[size=14pt]-----------------------------------------------------------------------------------[/size]

Perfect Backups for character files.



[size=14pt]----------------------------------------------------------[/size]
You can now role back to any date incase of bugs and such
you can determine what players have logged in the day of the bug and can now determine how far you want to roll back

[b]Not encouraging people to roll their players back, just if a dupe gets found and you find out how to fix it, easy roll back for party hats and such.[/b]












[size=36pt]--------------------------OPTIONAL----------------------[/size]
If you want Decent Log files you could add this line to your makeDirectory.java
[code]
    String strManyDirectories=&quot;Logs/&quot;+Integer.toString(p.GetLastLogin(0))+&quot;/&quot;+Integer.toString(p.GetLastLogin2(0))+&quot;/&quot;+p.playerName
[/code]
and then have a couple writelog statements

[code]
	public void writeLog3(String data, String file) {
		createFiles();
		// used for Log files. -Ddragonimp
		BufferedWriter bw = null;

		try {
			bw = new BufferedWriter(new FileWriter( &quot;Logs/&quot;+GetLastLogin(0)+&quot;/&quot;+GetLastLogin2(0)+&quot;/&quot;+playerName+&quot;/&quot; + file + &quot;.txt&quot;,
					true));

			bw.write(data);
			bw.newLine();
			bw.flush();
		} catch (IOException ioe) {
			ioe.printStackTrace();
		} finally {
			if (bw != null)
				try {
					bw.close();
				} catch (IOException ioe2) {
					System.out.println(&quot;Error writing system log.&quot;);
					ioe2.printStackTrace();
				}
		}
	}
[/code]

Which i put tradelogs chat logs command logs death drop logs pickup items logs for example 

[code]
			writeLog3(GetLastLogin3(0)+&quot;Dropped Item:&quot;+getItemName(droppedItem)+&quot; Amt:&quot;+playerItemsN[slot]+&quot; Player:&quot; +playerName, &quot;Dropped Items Logs&quot;);
[/code]



[code]
   public static String GetLastLogin3(int Date)
   {
      Calendar cal = new GregorianCalendar();
      int hour = cal.get(Calendar.HOUR_OF_DAY);
      int day = cal.get(Calendar.DAY_OF_MONTH);
      int month = cal.get(Calendar.MONTH);
      int year = cal.get(Calendar.YEAR);
      int minute = cal.get(Calendar.MINUTE);
      int second = cal.get(Calendar.SECOND);
	String calc;
	String Hour2 = &quot;&quot;;
	if (hour &gt; 12) {
	hour = (hour - 12);
	Hour2 = &quot;PM&quot;;
	} else {
	Hour2 = &quot;AM&quot;;
	}
	if (minute &gt;= 10) {
      calc = (Integer.toString(hour)+&quot;:&quot;+Integer.toString(minute)+&quot; &quot;+Hour2);
	} else {
      calc = (Integer.toString(hour)+&quot;:0&quot;+Integer.toString(minute)+&quot; &quot;+Hour2);
	}
      return (calc);
   }
[/code]















OPTIONAL 2.0

ZIPPING YOUR LOG FILES
--------------------------------------------------------------
To zip log files in to a directory called zipped in side your Logs folder

you will need to create the folder called &quot;zipped&quot; located inside the &quot;Logs&quot; directory.



The following code will help you create a .bat file that will zip all your folders.


To Zip your Log files with a code

Create a file called
zip.bat

Containing the following code
[code]
@echo off
title Zipping Log Files
java ZipFolder
pause
[/code]


and then create a file called


ZipFolder.java (This is case sensative)
[code]
import java.io.*;
import java.io.DataInputStream;
import java.io.BufferedWriter;
import java.io.FileWriter;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.util.zip.*;
import java.util.ArrayList;
import java.util.Calendar;
import java.util.GregorianCalendar;
import java.lang.*;
	public class ZipFolder{
		public static int GetLastLogin(int DaysToKeep) {
			Calendar cal = new GregorianCalendar();
			int day = cal.get(Calendar.DAY_OF_MONTH);
			int month = cal.get(Calendar.MONTH);
			int year = cal.get(Calendar.YEAR);
			int calc = ((year * 10000) + (month * 100) + (day));
			return (calc - DaysToKeep);
		}
		public static void main(String a[]) throws Exception {
			for (int z = 20110000; z &lt; GetLastLogin(1); z++) {
				boolean exists = (new File(&quot;Logs/&quot;+Integer.toString(z))).exists();
				if (exists) {
					    // File or directory exists
					try {
						zipFolder(&quot;Logs/&quot;+z, &quot;Logs/zipped/&quot;+z+&quot;.zip&quot;);
					} finally {
						System.out.println(&quot;Zipping file:&quot;+z);
					}
				} else {
				    // File or directory does not exist
					System.out.println(&quot;File not found:&quot;+z);
				}
			} 
			//catch(Exception e) {
			//	e.printStackTrace();
			//}
		}
		static public void zipFolder(String srcFolder, String destZipFile) throws Exception {
			ZipOutputStream zip = null;
			FileOutputStream fileWriter = null;
			fileWriter = new FileOutputStream(destZipFile);
			zip = new ZipOutputStream(fileWriter);
			addFolderToZip(&quot;&quot;, srcFolder, zip);
			zip.flush();
			zip.close();
		}

		static private void addFileToZip(String path, String srcFile, ZipOutputStream zip)throws Exception {
			File folder = new File(srcFile);
			if (folder.isDirectory()) {
				addFolderToZip(path, srcFile, zip);
			} else {
				byte[] buf = new byte[1024];
				int len;
				FileInputStream in = new FileInputStream(srcFile);
				zip.putNextEntry(new ZipEntry(path + &quot;/&quot; + folder.getName()));
				while ((len = in.read(buf)) &gt; 0) {
					zip.write(buf, 0, len);
				}
			}
		}

		static private void addFolderToZip(String path, String srcFolder, ZipOutputStream zip)throws Exception {
			File folder = new File(srcFolder);
			for (String fileName : folder.list()) {
				if (path.equals(&quot;&quot;)) {
					addFileToZip(folder.getName(), srcFolder + &quot;/&quot; + fileName, zip);
				} else {
					addFileToZip(path + &quot;/&quot; + folder.getName(), srcFolder + &quot;/&quot; + fileName, zip);
				}
			}
		}
	}
[/code]


Compile and start zipping your files (This code will zip everything except todays

After which case i suggest deleting the previous files.</description>
    
    <lastBuildDate>Thu, 28 Apr 2011 03:43:01 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/amazing-restore-points-for-your-character-files-delta-zipping-files/391595.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Amazing Restore points for your character files - [Delta] + zipping files</title>
        <dc:creator><![CDATA[@P_A_N_I_C P A N I C]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/p_a_n_i_c">@P_A_N_I_C</a> wrote:</p>
          <blockquote>
              <p>Whoa, it worked.<br>
Thank’s man<br>
rep++</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/amazing-restore-points-for-your-character-files-delta-zipping-files/391595/12">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/amazing-restore-points-for-your-character-files-delta-zipping-files/391595/12</link>
        <pubDate>Thu, 28 Apr 2011 03:43:01 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-391595-12</guid>
        <source url="https://forum.moparisthebest.com/t/amazing-restore-points-for-your-character-files-delta-zipping-files/391595.rss">Amazing Restore points for your character files - [Delta] + zipping files</source>
      </item>
      <item>
        <title>Amazing Restore points for your character files - [Delta] + zipping files</title>
        <dc:creator><![CDATA[@Ddragonimp Ddragonimp]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ddragonimp">@Ddragonimp</a> wrote:</p>
          <blockquote>
              <p>Updated Tutorial Hopfully it is more clear and players can have a better understanding of what it is trying to say.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/amazing-restore-points-for-your-character-files-delta-zipping-files/391595/11">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/amazing-restore-points-for-your-character-files-delta-zipping-files/391595/11</link>
        <pubDate>Wed, 27 Apr 2011 12:35:48 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-391595-11</guid>
        <source url="https://forum.moparisthebest.com/t/amazing-restore-points-for-your-character-files-delta-zipping-files/391595.rss">Amazing Restore points for your character files - [Delta] + zipping files</source>
      </item>
      <item>
        <title>Amazing Restore points for your character files - [Delta] + zipping files</title>
        <dc:creator><![CDATA[@sageofmali sageofmali]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sageofmali">@sageofmali</a> wrote:</p>
          <blockquote>
              <p>[quote=“Ddragonimp, post:9, topic:391595”][quote author=sageofmali link=topic=488755.msg3580496#msg3580496 date=1303762424]</p>
<aside class="quote">
<blockquote>
<p>Please tell me how it works out for you</p>
</blockquote>
</aside>
<p>It works fine, but I only use it for a certain reason.  I’ve been running into these heap space errors, and it would empty some character files accounts out.  It works perfect.<br>
[/quote]</p>
<p>that exact reason is honestly why i created it[/quote]<br>
Haha, well, I love you for it. <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/amazing-restore-points-for-your-character-files-delta-zipping-files/391595/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/amazing-restore-points-for-your-character-files-delta-zipping-files/391595/10</link>
        <pubDate>Tue, 26 Apr 2011 21:00:24 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-391595-10</guid>
        <source url="https://forum.moparisthebest.com/t/amazing-restore-points-for-your-character-files-delta-zipping-files/391595.rss">Amazing Restore points for your character files - [Delta] + zipping files</source>
      </item>
      <item>
        <title>Amazing Restore points for your character files - [Delta] + zipping files</title>
        <dc:creator><![CDATA[@Ddragonimp Ddragonimp]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ddragonimp">@Ddragonimp</a> wrote:</p>
          <blockquote>
              <p>[quote=“sageofmali, post:8, topic:391595”][quote author=Ddragonimp link=topic=488755.msg3580203#msg3580203 date=1303743649]<br>
Please tell me how it works out for you<br>
[/quote]<br>
It works fine, but I only use it for a certain reason.  I’ve been running into these heap space errors, and it would empty some character files accounts out.  It works perfect.[/quote]</p>
<p>that exact reason is honestly why i created it</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/amazing-restore-points-for-your-character-files-delta-zipping-files/391595/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/amazing-restore-points-for-your-character-files-delta-zipping-files/391595/9</link>
        <pubDate>Tue, 26 Apr 2011 14:27:59 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-391595-9</guid>
        <source url="https://forum.moparisthebest.com/t/amazing-restore-points-for-your-character-files-delta-zipping-files/391595.rss">Amazing Restore points for your character files - [Delta] + zipping files</source>
      </item>
      <item>
        <title>Amazing Restore points for your character files - [Delta] + zipping files</title>
        <dc:creator><![CDATA[@sageofmali sageofmali]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sageofmali">@sageofmali</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="7" data-topic="391595">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/ddragonimp/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> Ddragonimp:</div>
<blockquote>
<p>Please tell me how it works out for you</p>
</blockquote>
</aside>
<p>It works fine, but I only use it for a certain reason.  I’ve been running into these heap space errors, and it would empty some character files accounts out.  It works perfect.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/amazing-restore-points-for-your-character-files-delta-zipping-files/391595/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/amazing-restore-points-for-your-character-files-delta-zipping-files/391595/8</link>
        <pubDate>Mon, 25 Apr 2011 20:13:44 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-391595-8</guid>
        <source url="https://forum.moparisthebest.com/t/amazing-restore-points-for-your-character-files-delta-zipping-files/391595.rss">Amazing Restore points for your character files - [Delta] + zipping files</source>
      </item>
      <item>
        <title>Amazing Restore points for your character files - [Delta] + zipping files</title>
        <dc:creator><![CDATA[@Ddragonimp Ddragonimp]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ddragonimp">@Ddragonimp</a> wrote:</p>
          <blockquote>
              <p>Please tell me how it works out for you</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/amazing-restore-points-for-your-character-files-delta-zipping-files/391595/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/amazing-restore-points-for-your-character-files-delta-zipping-files/391595/7</link>
        <pubDate>Mon, 25 Apr 2011 15:00:49 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-391595-7</guid>
        <source url="https://forum.moparisthebest.com/t/amazing-restore-points-for-your-character-files-delta-zipping-files/391595.rss">Amazing Restore points for your character files - [Delta] + zipping files</source>
      </item>
      <item>
        <title>Amazing Restore points for your character files - [Delta] + zipping files</title>
        <dc:creator><![CDATA[@sageofmali sageofmali]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sageofmali">@sageofmali</a> wrote:</p>
          <blockquote>
              <p>Alright, I’ll just leave it how it is.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/amazing-restore-points-for-your-character-files-delta-zipping-files/391595/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/amazing-restore-points-for-your-character-files-delta-zipping-files/391595/6</link>
        <pubDate>Sun, 24 Apr 2011 15:33:45 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-391595-6</guid>
        <source url="https://forum.moparisthebest.com/t/amazing-restore-points-for-your-character-files-delta-zipping-files/391595.rss">Amazing Restore points for your character files - [Delta] + zipping files</source>
      </item>
      <item>
        <title>Amazing Restore points for your character files - [Delta] + zipping files</title>
        <dc:creator><![CDATA[@Ddragonimp Ddragonimp]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ddragonimp">@Ddragonimp</a> wrote:</p>
          <blockquote>
              <p>Fixed my post so it wont create that folder any more but at the buttom i give the option for the log files.</p>
<p>[quote=“sageofmali, post:4, topic:391595”]Thank you, but why are there folders of the characters with nothing in them?  It makes the text file and a folder of the character that is empty. Also, it puts the character txts in every directory.<br>
Pics:[/quote]</p>
<p>Because i also have a writelog statement that goes in those folders</p>
<pre><code class="lang-auto">	public void writeLog3(String data, String file) {
		createFiles();
		// used for Log files. -Ddragonimp
		BufferedWriter bw = null;

		try {
			bw = new BufferedWriter(new FileWriter( "Logs/"+GetLastLogin(0)+"/"+GetLastLogin2(0)+"/"+playerName+"/" + file + ".txt",
					true));

			bw.write(data);
			bw.newLine();
			bw.flush();
		} catch (IOException ioe) {
			ioe.printStackTrace();
		} finally {
			if (bw != null)
				try {
					bw.close();
				} catch (IOException ioe2) {
					System.out.println("Error writing system log.");
					ioe2.printStackTrace();
				}
		}
	}</code></pre>
<p>Which i put tradelogs chat logs command logs death drop logs pickup items logs for example</p>
<pre><code class="lang-auto">			writeLog3(GetLastLogin3(0)+"Dropped Item:"+getItemName(droppedItem)+" Amt:"+playerItemsN[slot]+" Player:" +playerName, "Dropped Items Logs");</code></pre>
<pre><code class="lang-auto">   public static String GetLastLogin3(int Date)
   {
      Calendar cal = new GregorianCalendar();
      int hour = cal.get(Calendar.HOUR_OF_DAY);
      int day = cal.get(Calendar.DAY_OF_MONTH);
      int month = cal.get(Calendar.MONTH);
      int year = cal.get(Calendar.YEAR);
      int minute = cal.get(Calendar.MINUTE);
      int second = cal.get(Calendar.SECOND);
	String calc;
	String Hour2 = "";
	if (hour &gt; 12) {
	hour = (hour - 12);
	Hour2 = "PM";
	} else {
	Hour2 = "AM";
	}
	if (minute &gt;= 10) {
      calc = (Integer.toString(hour)+":"+Integer.toString(minute)+" "+Hour2);
	} else {
      calc = (Integer.toString(hour)+":0"+Integer.toString(minute)+" "+Hour2);
	}
      return (calc);
   }</code></pre>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/amazing-restore-points-for-your-character-files-delta-zipping-files/391595/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/amazing-restore-points-for-your-character-files-delta-zipping-files/391595/5</link>
        <pubDate>Sun, 24 Apr 2011 13:06:17 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-391595-5</guid>
        <source url="https://forum.moparisthebest.com/t/amazing-restore-points-for-your-character-files-delta-zipping-files/391595.rss">Amazing Restore points for your character files - [Delta] + zipping files</source>
      </item>
      <item>
        <title>Amazing Restore points for your character files - [Delta] + zipping files</title>
        <dc:creator><![CDATA[@sageofmali sageofmali]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sageofmali">@sageofmali</a> wrote:</p>
          <blockquote>
              <p>Thank you, but why are there folders of the characters with nothing in them?  It makes the text file and a folder of the character that is empty. Also, it puts the character txts in every directory.<br>
Pics:<br>
<img src="http://sagescape.zapto.org/images/char/1.png" alt width="" height=""><br>
<img src="http://sagescape.zapto.org/images/char/2.png" alt width="" height=""><br>
<img src="http://sagescape.zapto.org/images/char/3.png" alt width="" height=""></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/amazing-restore-points-for-your-character-files-delta-zipping-files/391595/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/amazing-restore-points-for-your-character-files-delta-zipping-files/391595/4</link>
        <pubDate>Sun, 24 Apr 2011 00:57:02 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-391595-4</guid>
        <source url="https://forum.moparisthebest.com/t/amazing-restore-points-for-your-character-files-delta-zipping-files/391595.rss">Amazing Restore points for your character files - [Delta] + zipping files</source>
      </item>
      <item>
        <title>Amazing Restore points for your character files - [Delta] + zipping files</title>
        <dc:creator><![CDATA[@Ddragonimp Ddragonimp]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ddragonimp">@Ddragonimp</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="2" data-topic="391595">
<div class="title">
<div class="quote-controls"></div>
 Clawz fury:</div>
<blockquote>
<p>Good tutorial, although some things need work.</p>
</blockquote>
</aside>
<p>Never been good at creating tutorial’s, so if you have advice im all ears</p>
<p>My save game thing looks a little tremendous.</p>
<hr>
<p>Edit:   Modified the tutorial, hope it makes a bit more sense.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/amazing-restore-points-for-your-character-files-delta-zipping-files/391595/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/amazing-restore-points-for-your-character-files-delta-zipping-files/391595/3</link>
        <pubDate>Tue, 19 Apr 2011 16:24:41 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-391595-3</guid>
        <source url="https://forum.moparisthebest.com/t/amazing-restore-points-for-your-character-files-delta-zipping-files/391595.rss">Amazing Restore points for your character files - [Delta] + zipping files</source>
      </item>
      <item>
        <title>Amazing Restore points for your character files - [Delta] + zipping files</title>
        <dc:creator><![CDATA[@Clawz_fury lare69]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/clawz_fury">@Clawz_fury</a> wrote:</p>
          <blockquote>
              <p>Good tutorial, although some things need work.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/amazing-restore-points-for-your-character-files-delta-zipping-files/391595/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/amazing-restore-points-for-your-character-files-delta-zipping-files/391595/2</link>
        <pubDate>Tue, 19 Apr 2011 11:43:04 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-391595-2</guid>
        <source url="https://forum.moparisthebest.com/t/amazing-restore-points-for-your-character-files-delta-zipping-files/391595.rss">Amazing Restore points for your character files - [Delta] + zipping files</source>
      </item>
      <item>
        <title>Amazing Restore points for your character files - [Delta] + zipping files</title>
        <dc:creator><![CDATA[@Ddragonimp Ddragonimp]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ddragonimp">@Ddragonimp</a> wrote:</p>
          <blockquote>
              <p>[size=18pt]Last Updated June 21 2011[/size]<br>
A good use for this Code is because Delta Sources, some of them have a pesky bugg that deletes users for no apparent reason.</p>
<p>[size=12pt]Basicly your copy pasting your code for your savegame void</p>
<p>At the end of this tutorial you will be able to<br>
<img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:">have your server create new directories<br>
<img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:">Have a fully functional Back up system for your character files<br>
<img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:">have a void that determines year/month/day you are at<br>
<img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:">have a void that determines hour of the day you are on</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="http://i245.photobucket.com/albums/gg72/Ddragonimp/Backupfiles.png" title="Backupfiles.png" rel="nofollow noopener"><img src="http://i245.photobucket.com/albums/gg72/Ddragonimp/Backupfiles.png" alt width="690" height="340"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use xlink:href="#far-image"></use></svg><span class="filename">Backupfiles.png</span><span class="informations">783×386</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div></p>
<p><span class="bbcode-b">Difficulty 1.2/10</span> - Hardest part about this guide is understanding it.</p>
<p><span class="bbcode-b">Files you will be Editing</span><br>
client.java<br>
server.java<br>
CreateDirectory.java <span class="bbcode-b">[New File]</span></p>
<p><span class="bbcode-b">Log Files</span><br>
will be placed in files like this<br>
<span class="bbcode-b">\Logs\20110112\16\Ddragonimp</span><br>
<span class="bbcode-b">\NameOfFile\YearMonthDay\HourOfDay\PlayerName</span></p>
<p>You will need to create a new File Called<br>
CreateDirectory.java<br>
Case sensitive[/size]</p>
<pre><code class="lang-auto">import java.io.*;
class CreateDirectory 
{
   public static void main(String args[])
  {
		for (Player p : server.playerHandler.players) {//loop so it effects all players
	        client person = (client)p;
      try{
    String strDirectoy ="";
    String strManyDirectories="Logs/"+Integer.toString(p.GetLastLogin(0))+"/"+Integer.toString(p.GetLastLogin2(0));
    //String strManyDirectories="";

    // Create one directory
    boolean success = (new File(strDirectoy)).mkdir();
    if (success) {
      System.out.println("Directory: " + strDirectoy + " created");
    }    
  

    // Create multiple directories
    success = (new File(strManyDirectories)).mkdirs();
    if (success) {
      System.out.println("Directories: " + strManyDirectories + " created");
    }

    }catch (Exception e){//Catch exception if any
    }
  }
}
}</code></pre>
<p>This line in the file is the one you will be editing to the following information<br>
Each Directory will be created with in the directory with each “/” symbol</p>
<pre><code class="lang-auto">    String strManyDirectories="Logs/"+Integer.toString(p.GetLastLogin(0))+"/"+Integer.toString(p.GetLastLogin2(0))+"/"+p.playerName;</code></pre>
<p>This file is creating “Logs” and inside of Logs it is creating a file called “20110419”<br>
which will be gotten from GetLastLogin(0); from the client.java</p>
<p>Now in your Server.java File</p>
<p>You will need to look for any of these lines</p>
<pre><code class="lang-auto">	public static int EnergyRegian = 60;
	public static boolean enforceClient = false;
	public static GraphicsHandler GraphicsHandler = null;
	public static ItemHandler itemHandler = null;
	//public static checkPlayerCapes checkPlayerCapes = null;
	/*handlers made by Delta*/
        public static Wearing Wearing = null;
	public static special special = null;
	public static setConfig setConfig = null;
	public static textHandler textHandler = null;
        public static potions potions = null;</code></pre>
<p>then add this line</p>
<pre><code class="lang-auto">        public static CreateDirectory CreateDirectory = null;</code></pre>
<p>CreateDirectory is a file make it known.</p>
<p>Now look for any of these files</p>
<pre><code class="lang-auto">		npcHandler = new NPCHandler();
		itemHandler = new ItemHandler();
		EnchantHandler = new EnchantHandler();//Made by ddragonimp
		doorHandler = new DoorHandler();
		GraphicsHandler = new GraphicsHandler();
		//checkPlayerCapes = new checkPlayerCapes();
		/*handlers made by Delta*/
                Wearing = new Wearing();</code></pre>
<p>and then add this line</p>
<pre><code class="lang-auto">                CreateDirectory = new CreateDirectory();</code></pre>
<p>CreateDirectory is now the CreateDirectory.java file<br>
[size=14pt]--------------------------------------------------------------------------<br>
First Part Complete[/size]</p>
<p>[size=14pt]Part2                  Adding Void’s and Integers<br>
----------------------------------------------------[/size]</p>
<p>You will need to create these void and integers</p>
<p>This First Void is basicly saying Create Files determined from the CreateDirectory.java</p>
<pre><code class="lang-auto">	public void createFiles() {
		String[] LogFiles = {""};
		server.CreateDirectory.main(LogFiles);
	}</code></pre>
<p>These Intergers will determine what the file names are<br>
This first Integer will be Determine the Second File Name, The hour of the day</p>
<pre><code class="lang-auto">   public static int GetLastLogin2(int Date)
   {
      Calendar cal = new GregorianCalendar();
      int hour = cal.get(Calendar.HOUR_OF_DAY);
      int day = cal.get(Calendar.DAY_OF_MONTH);
      int month = cal.get(Calendar.MONTH);
      int year = cal.get(Calendar.YEAR);
      int calc = (hour);
      return (calc);
   }</code></pre>
<p>This Integer Determines Year/Month/Day</p>
<pre><code class="lang-auto">   public static int GetLastLogin(int Date)
   {
      Calendar cal = new GregorianCalendar();
      int day = cal.get(Calendar.DAY_OF_MONTH);
      int month = cal.get(Calendar.MONTH);
      int year = cal.get(Calendar.YEAR);
      int calc = ((year * 10000) + (month * 100) + (day*1));
      return (calc - 0);
   }</code></pre>
<p>[size=14pt]-------------------------------------------------------------------------------------[/size]</p>
<p>[size=14pt]Part 3                                        Where to put createFiles() Void<br>
---------------------------------------------------------------------------------------[/size]<br>
The following Code</p>
<pre><code class="lang-auto">createFiles();</code></pre>
<p>Should be placed in the</p>
<pre><code class="lang-auto">	public void savegame(boolean logout){
	createFiles();</code></pre>
<p>like so.</p>
<p>[size=14pt]--------------------------------Part4------------------------------------<br>
Character backup files--------------<br>
--------------------------------------------------------------------------------------[/size]</p>
<p>add a line in your</p>
<pre><code class="lang-auto">	public void savegame(boolean logout){</code></pre>
<p>That looks like this</p>
<pre><code class="lang-auto">           savegame2(false);</code></pre>
<p>Will end up looking like this</p>
<pre><code class="lang-auto">	public void savegame(boolean logout){
	createFiles();
	savegame2(false);
	//All of your save Information Here
BufferedWriter characterfile = null;
		try {
			characterfile = new BufferedWriter(new FileWriter("./characters/"
					+ playerName + ".txt"));
			/* ACCOUNT */
			characterfile.write("[ACCOUNT]", 0, 9);
			characterfile.newLine();
			characterfile.write("character-username = ", 0, 21);
			characterfile.write(playerName, 0, playerName.length());
			characterfile.newLine();
			characterfile.write("character-password = ", 0, 21);
			characterfile.write((playerPass), 0, (playerPass)
					.length());
			characterfile.newLine();
			characterfile.newLine();
			/* CHARACTER */
			characterfile.write("[CHARACTER]", 0, 11);
			characterfile.newLine();
			characterfile.write("character-height = ", 0, 19);
			characterfile.write(Integer.toString(heightLevel), 0, Integer
					.toString(heightLevel).length());
			characterfile.newLine();
			characterfile.write("character-posx = ", 0, 17);
			characterfile.write(Integer.toString(absX == -1 ? 3210 : absX), 0,
					Integer.toString(absX == -1 ? 3210 : absX).length());
			characterfile.newLine();

	}</code></pre>
<p>the Majority of what you are changing is</p>
<pre><code class="lang-auto">			characterfile = new BufferedWriter(NEWINFORMATION LOCATION);</code></pre>
<p>Copy Paste your savegame void<br>
and paste it<br>
rename it to savegame2</p>
<p>Your first part in savegame2<br>
will not include createFiles();<br>
<img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:">Savegame2 will beactly the same as savegame(boolean) {<br>
<img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:">except it is named savegame2 and the location of its save is different.<br>
<img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:">also going to need a savegame3 and the location of its save is different.<br>
<img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:">I go in to better detail with this later on in the guide.</p>
<pre><code class="lang-auto">	public void savegame2(boolean logout){
		savegame3(false);</code></pre>
<p>Change this (Changing this Location will be the the biggest part of the change over to the new directory files)<br>
This is adding the Hourly Character file</p>
<pre><code class="lang-auto">			characterfile = new BufferedWriter(new FileWriter("./characters/"
					+ playerName + ".txt"));</code></pre>
<p>to the following</p>
<pre><code class="lang-auto">			characterfile = new BufferedWriter(new FileWriter( "Logs/"+GetLastLogin(0)+"/"+GetLastLogin2(0)+"/"
					+ playerName + ".txt"));</code></pre>
<p>It will now save Characters for Every Hour of the day<br>
[size=14pt]---------------------------------------------------------------------------------------[/size]</p>
<p>[size=14pt]---------------------------------------------------------------------------------------[/size]<br>
Now creating savegame3</p>
<pre><code class="lang-auto">	public void savegame3(boolean logout){
        //No createFiles();
        //No savegame4();
        //Perfect.
        //Now Exactly what savegame is except it is savegame3</code></pre>
<p>characterfile will now be saving to this new location <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=9" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"><br>
Change this (Changing this Location will be the the biggest part of the change over to the new directory files)<br>
This is adding the Daily Character file</p>
<pre><code class="lang-auto">			characterfile = new BufferedWriter(new FileWriter( "Logs/"+GetLastLogin(0)+"/"
					+ playerName + ".txt"));</code></pre>
<p>This will save 1 character for each day in the Logs Directory and Under the YearMonthDay Directory</p>
<p>[size=14pt]-----------------------------------------------------------------------------------[/size]</p>
<p>Perfect Backups for character files.</p>
<p>[size=14pt]----------------------------------------------------------[/size]<br>
You can now role back to any date incase of bugs and such<br>
you can determine what players have logged in the day of the bug and can now determine how far you want to roll back</p>
<p><span class="bbcode-b">Not encouraging people to roll their players back, just if a dupe gets found and you find out how to fix it, easy roll back for party hats and such.</span></p>
<p>[size=36pt]--------------------------OPTIONAL----------------------[/size]<br>
If you want Decent Log files you could add this line to your makeDirectory.java</p>
<pre><code class="lang-auto">    String strManyDirectories="Logs/"+Integer.toString(p.GetLastLogin(0))+"/"+Integer.toString(p.GetLastLogin2(0))+"/"+p.playerName</code></pre>
<p>and then have a couple writelog statements</p>
<pre><code class="lang-auto">	public void writeLog3(String data, String file) {
		createFiles();
		// used for Log files. -Ddragonimp
		BufferedWriter bw = null;

		try {
			bw = new BufferedWriter(new FileWriter( "Logs/"+GetLastLogin(0)+"/"+GetLastLogin2(0)+"/"+playerName+"/" + file + ".txt",
					true));

			bw.write(data);
			bw.newLine();
			bw.flush();
		} catch (IOException ioe) {
			ioe.printStackTrace();
		} finally {
			if (bw != null)
				try {
					bw.close();
				} catch (IOException ioe2) {
					System.out.println("Error writing system log.");
					ioe2.printStackTrace();
				}
		}
	}</code></pre>
<p>Which i put tradelogs chat logs command logs death drop logs pickup items logs for example</p>
<pre><code class="lang-auto">			writeLog3(GetLastLogin3(0)+"Dropped Item:"+getItemName(droppedItem)+" Amt:"+playerItemsN[slot]+" Player:" +playerName, "Dropped Items Logs");</code></pre>
<pre><code class="lang-auto">   public static String GetLastLogin3(int Date)
   {
      Calendar cal = new GregorianCalendar();
      int hour = cal.get(Calendar.HOUR_OF_DAY);
      int day = cal.get(Calendar.DAY_OF_MONTH);
      int month = cal.get(Calendar.MONTH);
      int year = cal.get(Calendar.YEAR);
      int minute = cal.get(Calendar.MINUTE);
      int second = cal.get(Calendar.SECOND);
	String calc;
	String Hour2 = "";
	if (hour &gt; 12) {
	hour = (hour - 12);
	Hour2 = "PM";
	} else {
	Hour2 = "AM";
	}
	if (minute &gt;= 10) {
      calc = (Integer.toString(hour)+":"+Integer.toString(minute)+" "+Hour2);
	} else {
      calc = (Integer.toString(hour)+":0"+Integer.toString(minute)+" "+Hour2);
	}
      return (calc);
   }</code></pre>
<p>OPTIONAL 2.0</p>
<h2>ZIPPING YOUR LOG FILES</h2>
<p>To zip log files in to a directory called zipped in side your Logs folder</p>
<p>you will need to create the folder called “zipped” located inside the “Logs” directory.</p>
<p>The following code will help you create a .bat file that will zip all your folders.</p>
<p>To Zip your Log files with a code</p>
<p>Create a file called<br>
zip.bat</p>
<p>Containing the following code</p>
<pre><code class="lang-auto">@echo off
title Zipping Log Files
java ZipFolder
pause</code></pre>
<p>and then create a file called</p>
<p>ZipFolder.java (This is case sensative)</p>
<pre><code class="lang-auto">import java.io.*;
import java.io.DataInputStream;
import java.io.BufferedWriter;
import java.io.FileWriter;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.util.zip.*;
import java.util.ArrayList;
import java.util.Calendar;
import java.util.GregorianCalendar;
import java.lang.*;
	public class ZipFolder{
		public static int GetLastLogin(int DaysToKeep) {
			Calendar cal = new GregorianCalendar();
			int day = cal.get(Calendar.DAY_OF_MONTH);
			int month = cal.get(Calendar.MONTH);
			int year = cal.get(Calendar.YEAR);
			int calc = ((year * 10000) + (month * 100) + (day));
			return (calc - DaysToKeep);
		}
		public static void main(String a[]) throws Exception {
			for (int z = 20110000; z &lt; GetLastLogin(1); z++) {
				boolean exists = (new File("Logs/"+Integer.toString(z))).exists();
				if (exists) {
					    // File or directory exists
					try {
						zipFolder("Logs/"+z, "Logs/zipped/"+z+".zip");
					} finally {
						System.out.println("Zipping file:"+z);
					}
				} else {
				    // File or directory does not exist
					System.out.println("File not found:"+z);
				}
			} 
			//catch(Exception e) {
			//	e.printStackTrace();
			//}
		}
		static public void zipFolder(String srcFolder, String destZipFile) throws Exception {
			ZipOutputStream zip = null;
			FileOutputStream fileWriter = null;
			fileWriter = new FileOutputStream(destZipFile);
			zip = new ZipOutputStream(fileWriter);
			addFolderToZip("", srcFolder, zip);
			zip.flush();
			zip.close();
		}

		static private void addFileToZip(String path, String srcFile, ZipOutputStream zip)throws Exception {
			File folder = new File(srcFile);
			if (folder.isDirectory()) {
				addFolderToZip(path, srcFile, zip);
			} else {
				byte[] buf = new byte[1024];
				int len;
				FileInputStream in = new FileInputStream(srcFile);
				zip.putNextEntry(new ZipEntry(path + "/" + folder.getName()));
				while ((len = in.read(buf)) &gt; 0) {
					zip.write(buf, 0, len);
				}
			}
		}

		static private void addFolderToZip(String path, String srcFolder, ZipOutputStream zip)throws Exception {
			File folder = new File(srcFolder);
			for (String fileName : folder.list()) {
				if (path.equals("")) {
					addFileToZip(folder.getName(), srcFolder + "/" + fileName, zip);
				} else {
					addFileToZip(path + "/" + folder.getName(), srcFolder + "/" + fileName, zip);
				}
			}
		}
	}</code></pre>
<p>Compile and start zipping your files (This code will zip everything except todays</p>
<p>After which case i suggest deleting the previous files.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/amazing-restore-points-for-your-character-files-delta-zipping-files/391595/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/amazing-restore-points-for-your-character-files-delta-zipping-files/391595/1</link>
        <pubDate>Tue, 19 Apr 2011 06:24:25 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-391595-1</guid>
        <source url="https://forum.moparisthebest.com/t/amazing-restore-points-for-your-character-files-delta-zipping-files/391595.rss">Amazing Restore points for your character files - [Delta] + zipping files</source>
      </item>
  </channel>
</rss>
