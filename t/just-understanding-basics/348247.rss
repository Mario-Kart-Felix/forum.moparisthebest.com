<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Just Understanding Basics</title>
    <link>https://forum.moparisthebest.com/t/just-understanding-basics/348247</link>
    <description>So will someone give me research/documents on extracting clients from caches, find the login block, ect.

Because I&#39;m trying to get my 454 cache I have into a client.

It would be great if you could just explain the basics.</description>
    
    <lastBuildDate>Mon, 19 Jul 2010 19:05:10 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/just-understanding-basics/348247.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Just Understanding Basics</title>
        <dc:creator><![CDATA[@Jython super_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/jython">@Jython</a> wrote:</p>
          <blockquote>
              <p>resources are indexed as well as split in the cache as a linked sequence of 512-byte chunks. each chunk is prefixed by a 8-byte header describing what resource it belongs to blah blah (for sanity checks); i call this union a sector. the .dat file is comprised of all of these sectors, while the .idx files are an <em>shock</em> index for figuring out how large a resource is (and from that the sequence size – resource-size / 512) as well as the head sector index (the offset into the .dat file is <span class="bbcode-i">head-sector-idx * 520</span>). (different classes (models, CS VM bytecode files, items manifest data) of resources in the cache use different idx files). this data is stored in a 6-byte block, positioned in the idx file at the offset <span class="bbcode-i">resource-id * 6</span>. this might be a little incoherent but bear with me. some files in the cache are also stored in a distinct container format which supports compression. the container format starts with a header which consists of (at least) the compression type and trailing data length. if the type is 0, the resource file is not compressed, and the resource data is extracted normally. in the case the type is not 0, the resource file is compressed, and an additional piece of data is read signifying the decompressed size of the resource file. the compression type 1 signifies a modified version of BZIP2 (the magic signature BZh1 is stripped) was used to compress the resource file, else the compression used was GZIP. after the resource file is extracted completely, it is parsed by any code that needs it; it could hold data on the map terrain, on the object locations, the animation sequence list, hell even a direct raster image – <span class="bbcode-i">anything</span>. as whitecastle said, the data is in a proprietary format<br>
which must be derived from a deob. happy hunting.</p>
<p>added structs after consideration and frank claiming i didnt consider them!!</p>
<pre><code class="lang-auto">struct dat_file {
    struct sector {
        struct header {
            /* owner resource index/id */
            u16 rsrc_idx;
            /* sequence number in resource sector sequence */
            u16 seq_num;
            /* next-in-sequence sector index (into sector array) */
            u24 next;
            /* resource class/type (idx file #) */
            u1 class;
        } header;
        /* chunk/payload */
        u1 payload[512];
    } sectors[sector_cnt];
};

struct idx_file {
    struct entry {
        /* size of resource file */
        u24 size;
        /* sequence head sector index (into sector array) */
        u24 head;
    } entries[rsrc_cnt];
};

struct container {
    /* compression type */
    u1 cmp_type;
    /* resource data length (compressed iff cmp_type != 0) */
    u4 len;
    /* decompressed resource length (iff cmp_type != 0) */
    u4 decmp_len;
    /* resource data */
    u1 data[len];
};</code></pre>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/just-understanding-basics/348247/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/just-understanding-basics/348247/8</link>
        <pubDate>Mon, 19 Jul 2010 19:05:10 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-348247-8</guid>
        <source url="https://forum.moparisthebest.com/t/just-understanding-basics/348247.rss">Just Understanding Basics</source>
      </item>
      <item>
        <title>Just Understanding Basics</title>
        <dc:creator><![CDATA[@the_elve_age the elve age]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/the_elve_age">@the_elve_age</a> wrote:</p>
          <blockquote>
              <p>Thanks guys! I appreciate the help! &lt;3 White Castle</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/just-understanding-basics/348247/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/just-understanding-basics/348247/7</link>
        <pubDate>Mon, 19 Jul 2010 03:58:32 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-348247-7</guid>
        <source url="https://forum.moparisthebest.com/t/just-understanding-basics/348247.rss">Just Understanding Basics</source>
      </item>
      <item>
        <title>Just Understanding Basics</title>
        <dc:creator><![CDATA[@White_Castle White Castle]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/white_castle">@White_Castle</a> wrote:</p>
          <blockquote>
              <p>Ah, thanks anyways.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/just-understanding-basics/348247/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/just-understanding-basics/348247/6</link>
        <pubDate>Sun, 18 Jul 2010 23:38:09 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-348247-6</guid>
        <source url="https://forum.moparisthebest.com/t/just-understanding-basics/348247.rss">Just Understanding Basics</source>
      </item>
      <item>
        <title>Just Understanding Basics</title>
        <dc:creator><![CDATA[@peterbjornx peterbjornx]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/peterbjornx">@peterbjornx</a> wrote:</p>
          <blockquote>
              <p>I had your files, but i lost them in a HD crash too</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/just-understanding-basics/348247/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/just-understanding-basics/348247/5</link>
        <pubDate>Sun, 18 Jul 2010 22:08:09 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-348247-5</guid>
        <source url="https://forum.moparisthebest.com/t/just-understanding-basics/348247.rss">Just Understanding Basics</source>
      </item>
      <item>
        <title>Just Understanding Basics</title>
        <dc:creator><![CDATA[@White_Castle White Castle]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/white_castle">@White_Castle</a> wrote:</p>
          <blockquote>
              <p>The <span class="bbcode-i">basics</span>?</p>
<p>Like frank_ said, if this community had any semblance of organization, your post would be flamed and you’d be directed elsewhere. This would also be a more successful community.</p>
<p>Anyways, what do the basics include? You’re asking about cache reading/utilization. Honestly, I’m pretty much in the dark. However, I did till up enough knowledge to make a <a href="http://www.moparisthebest.com/smf/index.php/topic,227055.0.html" data-bbcode="true" rel="nofollow noopener">shitty little #481 server including the update routine</a>. I lost the files in a HHD crash and I don’t own the site the files were hosted on anymore. HEY, IF YOU HAVE THE FILES, LEMME KNOW.</p>
<p>Going completely off memory from 2+ years ago, the cache process went like this:</p>
<p>[ul][li]Client connects to server and indicates that it wants to update (i.e. no cache files on disk)[/li]<br>
[li]Server begins sending cache files. <span class="bbcode-b">Compressed, probably in full-file form</span>[/li]<br>
[li]Client stores cache files.[/li]<br>
[li]Client begins loading interfaces, sprites, etc.[/li]<br>
[li]Data is read from the cache. <span class="bbcode-b">I’m not sure of the method. If you wanted an answer now, I’d say that the main_file_cache.idx<span class="bbcode-i">n</span> files were just a map of “cache index” -&gt; “dat file offset/length”… the latter describing the actual compressed cache data in one of the main_file_cache.dat<span class="bbcode-i">n</span> files. Someone must know more, but seriously, do some digging. Refactored clients are great.</span>[/li]<br>
[li]Data is decompressed.[/li]<br>
[li]Data is parsed using a <span class="bbcode-i">proprietary format</span>. It depends on the type of data you’re reading: NPC attributes, object model, what have you. <span class="bbcode-b">I haven’t got shit on this one, but I know you’ll find if you look.</span>[/li]<br>
[li]yadda yadda play runescape etc.[/li][/ul]</p>
<p>Correct me if I’m wrong.</p>
<p>As for the login routine, RSA was used with 512 bit moduli. I don’t remember how RSA works, so eh. Only the password and maybe username were encrypted this way; subsequent communication is encrypted with ISAAC.</p>
<p>Also, holy shit pplsuqbawlz. I had no idea that was the purpose of pack200. I was seriously thinking just the other day about how great it would be if someone came up with a format for consolidating constant pools. <span class="bbcode-i">fuck</span></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/just-understanding-basics/348247/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/just-understanding-basics/348247/4</link>
        <pubDate>Tue, 13 Jul 2010 14:15:06 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-348247-4</guid>
        <source url="https://forum.moparisthebest.com/t/just-understanding-basics/348247.rss">Just Understanding Basics</source>
      </item>
      <item>
        <title>Just Understanding Basics</title>
        <dc:creator><![CDATA[@pplsuqbawlz pplsuqbawlz]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/pplsuqbawlz">@pplsuqbawlz</a> wrote:</p>
          <blockquote>
              <p>[quote=“the elve age, post:1, topic:348247”]So will someone give me research/documents on extracting clients from caches, find the login block, ect.</p>
<p>Because I’m trying to get my 454 cache I have into a client.</p>
<p>It would be great if you could just explain the basics.[/quote]<br>
A pack200 is similar to a jar file in that they’re packages and compress data, however pack200 is intended specifically for java, and targets it by combining each of the archive’s constant pools into one, big, pool with no duplicates, thus removing LOTS of duplicate entries and considerably decreasing size.</p>
<p>The other stuff, I can’t help you with. Though from a theoretical aspect, encryption should be the most intensive on a username/password sequence sent on logon; the same is true on any other application! But, I do not touch or go near RS and will not; so you’ll have to wait until someone else here helps you.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/just-understanding-basics/348247/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/just-understanding-basics/348247/3</link>
        <pubDate>Sat, 10 Jul 2010 10:49:43 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-348247-3</guid>
        <source url="https://forum.moparisthebest.com/t/just-understanding-basics/348247.rss">Just Understanding Basics</source>
      </item>
      <item>
        <title>Just Understanding Basics</title>
        <dc:creator><![CDATA[@frank frank_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/frank">@frank</a> wrote:</p>
          <blockquote>
              <p>you overestimate how organised we are</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/just-understanding-basics/348247/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/just-understanding-basics/348247/2</link>
        <pubDate>Sat, 10 Jul 2010 08:31:30 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-348247-2</guid>
        <source url="https://forum.moparisthebest.com/t/just-understanding-basics/348247.rss">Just Understanding Basics</source>
      </item>
      <item>
        <title>Just Understanding Basics</title>
        <dc:creator><![CDATA[@the_elve_age the elve age]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/the_elve_age">@the_elve_age</a> wrote:</p>
          <blockquote>
              <p>So will someone give me research/documents on extracting clients from caches, find the login block, ect.</p>
<p>Because I’m trying to get my 454 cache I have into a client.</p>
<p>It would be great if you could just explain the basics.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/just-understanding-basics/348247/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/just-understanding-basics/348247/1</link>
        <pubDate>Sat, 10 Jul 2010 07:21:12 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-348247-1</guid>
        <source url="https://forum.moparisthebest.com/t/just-understanding-basics/348247.rss">Just Understanding Basics</source>
      </item>
  </channel>
</rss>
