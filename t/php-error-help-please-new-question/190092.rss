<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>PHP Error- Help Please - NEW QUESTION</title>
    <link>https://forum.moparisthebest.com/t/php-error-help-please-new-question/190092</link>
    <description>Great, i got that to work, but now i&#39;ve got another error...
[code]&lt;?PHP
header(&#39;Content-Type: image/png&#39;);
function conditionalget ($lastmod)
{
	$lastmod = gmdate(&#39;D, d M Y H:i:s&#39;, intval($lastmod)) . &#39; GMT&#39;;
	$etag = &#39;&quot;&#39; . md5($lastmod) . &#39;&quot;&#39;;

	// ETag is sent even with 304 header
	header(&quot;ETag: $etag&quot;);

	// Last-Modified doesn&#39;t need to be sent with 304 response
	header(&quot;Last-Modified: $lastmod&quot;);
}

function show_image ($cachefile)
{
	global $cachefile;

	// Output means errors, in which case we output them and that&#39;s it
	$output = trim(ob_get_contents());
	if ($output != &#39;&#39;)
	{
		echo $output;
		exit;
	}

	// Clean cut, make sure no output can corrupt the image
	ob_end_clean();

	$date = filemtime($cachefile);
	header(&quot;Expires: &quot; . gmdate(&quot;D, d M Y H:i:s&quot;, $date + 60 * 60 * 24) . &quot; GMT&quot;);

	conditionalget($date);

	// Send the header information required (more or less)
	header(&#39;Content-Type: image/png&#39;);

	readfile($cachefile);

	exit;
}
require(&quot;statsget.php&quot;);
$user = ucwords($user);

define(&quot;BACKDIR&quot;,&quot;backs&quot;);
define(&quot;FILEDIR&quot;,&quot;files&quot;);
define(&quot;POSEDIR&quot;,&quot;pose&quot;);
define(&quot;BORDER&quot;,&quot;files/border.png&quot;);
$pose = POSEDIR . &quot;/&quot; . $_GET[&#39;pose&#39;] . &quot;.png&quot;;
$back = BACKDIR . &quot;/&quot; . $_GET[&#39;back&#39;] . &quot;.png&quot;;
$font = &quot;files/ v.ttf&quot;;
$namefont = FILEDIR . &#39;/namefont.ttf&#39;;
$src = array ($back,$pose,&quot;files/backStats.png&quot;,BORDER);   
$cachefile = &#39;cache/&#39; . $user . &#39;.png&#39;;

if (file_exists($cachefile) &amp;&amp; filemtime($cachefile) &gt; time() - 60 * 60 * 24)
{
	show_image($cachefile);
}

$imgBuf = array ();
foreach ($src as $link)
{
   switch(substr ($link,strrpos ($link,&quot;.&quot;)+1))
   {
       case &#39;png&#39;:
           $iTmp = imagecreatefrompng($link);
           break;
       case &#39;gif&#39;:
           $iTmp = imagecreatefromgif($link);
           break;               
       case &#39;jpeg&#39;:           
       case &#39;jpg&#39;:
           $iTmp = imagecreatefromjpeg($link);
           break;               
   }
   array_push ($imgBuf,$iTmp);
}
$iOut = imagecreatetruecolor (&quot;320&quot;,&quot;125&quot;) ;
$black = imagecolorallocate($iOut, 0, 0, 0);
$textcolor = imagecolorallocate($im, 0, 0, 255);
imagettftext($iOut, 70, 6, 10, 20, $black, $font, &quot;I am fat&quot;);
imagecopy ($iOut,$imgBuf[0],0,0,0,0,imagesx($imgBuf[0]),imagesy($imgBuf[0]));
imagecopy ($iOut,$imgBuf[1],230,3,0,0,imagesx($imgBuf[1]),imagesy($imgBuf[1]));
imagecopy ($iOut,$imgBuf[2],0,0,0,0,imagesx($imgBuf[2]),imagesy($imgBuf[2]));
imagecopy ($iOut, $imgBuf[3],0,0,0,0,imagesx($imgBuf[3]),imagesy($imgBuf[3]));

//For some reason, this won&#39;t work...
//imagestring($iOut, 5, 0, 0, &quot;Hello world!&quot;, $textcolor);

imagepng($iOut,$cachefile);
show_image($cachefile);

?&gt;[/code]
My new code
But the text writing won&#39;t work.
can anyone tell why?</description>
    
    <lastBuildDate>Fri, 21 Mar 2008 01:03:58 +0000</lastBuildDate>
    <category>General Programming</category>
    <atom:link href="https://forum.moparisthebest.com/t/php-error-help-please-new-question/190092.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>PHP Error- Help Please - NEW QUESTION</title>
        <dc:creator><![CDATA[@bryanc Bryanc]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/bryanc">@bryanc</a> wrote:</p>
          <blockquote>
              <p>Woah that’s some messy stuff…  :eek:</p>
<p>EDIT: Ok, maybe not… but it looks messy  ;D</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/php-error-help-please-new-question/190092/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/php-error-help-please-new-question/190092/7</link>
        <pubDate>Fri, 21 Mar 2008 01:03:58 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-190092-7</guid>
        <source url="https://forum.moparisthebest.com/t/php-error-help-please-new-question/190092.rss">PHP Error- Help Please - NEW QUESTION</source>
      </item>
      <item>
        <title>PHP Error- Help Please - NEW QUESTION</title>
        <dc:creator><![CDATA[@sppt sppt]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sppt">@sppt</a> wrote:</p>
          <blockquote>
              <p>change the 5 in:</p>
<pre><code class="lang-auto">imagestring($iOut, 5, 0, 0, "Hello world!", $textcolor);</code></pre>
<p>to<br>
$font</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/php-error-help-please-new-question/190092/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/php-error-help-please-new-question/190092/6</link>
        <pubDate>Wed, 19 Mar 2008 04:06:39 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-190092-6</guid>
        <source url="https://forum.moparisthebest.com/t/php-error-help-please-new-question/190092.rss">PHP Error- Help Please - NEW QUESTION</source>
      </item>
      <item>
        <title>PHP Error- Help Please - NEW QUESTION</title>
        <dc:creator><![CDATA[@d_sign d_sign]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/d_sign">@d_sign</a> wrote:</p>
          <blockquote>
              <p>been there, done that</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/php-error-help-please-new-question/190092/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/php-error-help-please-new-question/190092/5</link>
        <pubDate>Wed, 19 Mar 2008 00:30:16 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-190092-5</guid>
        <source url="https://forum.moparisthebest.com/t/php-error-help-please-new-question/190092.rss">PHP Error- Help Please - NEW QUESTION</source>
      </item>
      <item>
        <title>PHP Error- Help Please - NEW QUESTION</title>
        <dc:creator><![CDATA[@DemonOfDoom2 DemonOfDoom2]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/demonofdoom2">@DemonOfDoom2</a> wrote:</p>
          <blockquote>
              <p><a href="http://us.php.net/manual/en/function.imagestring.php" class="onebox" target="_blank" rel="nofollow noopener">http://us.php.net/manual/en/function.imagestring.php</a></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/php-error-help-please-new-question/190092/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/php-error-help-please-new-question/190092/4</link>
        <pubDate>Wed, 19 Mar 2008 00:29:33 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-190092-4</guid>
        <source url="https://forum.moparisthebest.com/t/php-error-help-please-new-question/190092.rss">PHP Error- Help Please - NEW QUESTION</source>
      </item>
      <item>
        <title>PHP Error- Help Please - NEW QUESTION</title>
        <dc:creator><![CDATA[@d_sign d_sign]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/d_sign">@d_sign</a> wrote:</p>
          <blockquote>
              <p>all right, stupid mistake[br][br][size=1]Posted on: March 18, 2008, 01:20:07 PM[/size][hr]Great, i got that to work, but now i’ve got another error…</p>
<p>[code]&lt;?PHP<br>
header(‘Content-Type: image/png’);<br>
function conditionalget ($lastmod)<br>
{<br>
$lastmod = gmdate(‘D, d M Y H:i:s’, intval($lastmod)) . ’ GMT’;<br>
$etag = ‘"’ . md5($lastmod) . ‘"’;</p>
<pre><code>// ETag is sent even with 304 header
header("ETag: $etag");

// Last-Modified doesn't need to be sent with 304 response
header("Last-Modified: $lastmod");
</code></pre>
<p>}</p>
<p>function show_image ($cachefile)<br>
{<br>
global $cachefile;</p>
<pre><code>// Output means errors, in which case we output them and that's it
$output = trim(ob_get_contents());
if ($output != '')
{
	echo $output;
	exit;
}

// Clean cut, make sure no output can corrupt the image
ob_end_clean();

$date = filemtime($cachefile);
header("Expires: " . gmdate("D, d M Y H:i:s", $date + 60 * 60 * 24) . " GMT");

conditionalget($date);

// Send the header information required (more or less)
header('Content-Type: image/png');

readfile($cachefile);

exit;
</code></pre>
<p>}<br>
require(“statsget.php”);<br>
$user = ucwords($user);</p>
<p>define(“BACKDIR”,“backs”);<br>
define(“FILEDIR”,“files”);<br>
define(“POSEDIR”,“pose”);<br>
define(“BORDER”,“files/border.png”);<br>
$pose = POSEDIR . “/” . $_GET[‘pose’] . “.png”;<br>
$back = BACKDIR . “/” . $_GET[‘back’] . “.png”;<br>
$font = “files/ v.ttf”;<br>
$namefont = FILEDIR . ‘/namefont.ttf’;<br>
$src = array ($back,$pose,“files/backStats.png”,BORDER);<br>
$cachefile = ‘cache/’ . $user . ‘.png’;</p>
<p>if (file_exists($cachefile) &amp;&amp; filemtime($cachefile) &gt; time() - 60 * 60 * 24)<br>
{<br>
show_image($cachefile);<br>
}</p>
<p>$imgBuf = array ();<br>
foreach ($src as $link)<br>
{<br>
switch(substr ($link,strrpos ($link,".")+1))<br>
{<br>
case ‘png’:<br>
$iTmp = imagecreatefrompng($link);<br>
break;<br>
case ‘gif’:<br>
$iTmp = imagecreatefromgif($link);<br>
break;<br>
case ‘jpeg’:<br>
case ‘jpg’:<br>
$iTmp = imagecreatefromjpeg($link);<br>
break;<br>
}<br>
array_push ($imgBuf,$iTmp);<br>
}<br>
$iOut = imagecreatetruecolor (“320”,“125”) ;<br>
$black = imagecolorallocate($iOut, 0, 0, 0);<br>
$textcolor = imagecolorallocate($im, 0, 0, 255);<br>
imagettftext($iOut, 70, 6, 10, 20, $black, $font, “I am fat”);<br>
imagecopy ($iOut,$imgBuf[0],0,0,0,0,imagesx($imgBuf[0]),imagesy($imgBuf[0]));<br>
imagecopy ($iOut,$imgBuf[1],230,3,0,0,imagesx($imgBuf[1]),imagesy($imgBuf[1]));<br>
imagecopy ($iOut,$imgBuf[2],0,0,0,0,imagesx($imgBuf[2]),imagesy($imgBuf[2]));<br>
imagecopy ($iOut, $imgBuf[3],0,0,0,0,imagesx($imgBuf[3]),imagesy($imgBuf[3]));</p>
<p>//For some reason, this won’t work…<br>
//imagestring($iOut, 5, 0, 0, “Hello world!”, $textcolor);</p>
<p>imagepng($iOut,$cachefile);<br>
show_image($cachefile);</p>
<p>?&gt;[/code]<br>
My new code<br>
But the text writing won’t work.<br>
can anyone tell why?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/php-error-help-please-new-question/190092/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/php-error-help-please-new-question/190092/3</link>
        <pubDate>Mon, 17 Mar 2008 05:25:12 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-190092-3</guid>
        <source url="https://forum.moparisthebest.com/t/php-error-help-please-new-question/190092.rss">PHP Error- Help Please - NEW QUESTION</source>
      </item>
      <item>
        <title>PHP Error- Help Please - NEW QUESTION</title>
        <dc:creator><![CDATA[@sppt sppt]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sppt">@sppt</a> wrote:</p>
          <blockquote>
              <p>how about sticking a $ in front of the var names?<br>
also, if you’re using php5, use public, private or protected rather than var</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/php-error-help-please-new-question/190092/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/php-error-help-please-new-question/190092/2</link>
        <pubDate>Mon, 17 Mar 2008 04:23:10 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-190092-2</guid>
        <source url="https://forum.moparisthebest.com/t/php-error-help-please-new-question/190092.rss">PHP Error- Help Please - NEW QUESTION</source>
      </item>
      <item>
        <title>PHP Error- Help Please - NEW QUESTION</title>
        <dc:creator><![CDATA[@d_sign d_sign]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/d_sign">@d_sign</a> wrote:</p>
          <blockquote>
              <p>Great, i got that to work, but now i’ve got another error…</p>
<p>[code]&lt;?PHP<br>
header(‘Content-Type: image/png’);<br>
function conditionalget ($lastmod)<br>
{<br>
$lastmod = gmdate(‘D, d M Y H:i:s’, intval($lastmod)) . ’ GMT’;<br>
$etag = ‘"’ . md5($lastmod) . ‘"’;</p>
<pre><code>// ETag is sent even with 304 header
header("ETag: $etag");

// Last-Modified doesn't need to be sent with 304 response
header("Last-Modified: $lastmod");
</code></pre>
<p>}</p>
<p>function show_image ($cachefile)<br>
{<br>
global $cachefile;</p>
<pre><code>// Output means errors, in which case we output them and that's it
$output = trim(ob_get_contents());
if ($output != '')
{
	echo $output;
	exit;
}

// Clean cut, make sure no output can corrupt the image
ob_end_clean();

$date = filemtime($cachefile);
header("Expires: " . gmdate("D, d M Y H:i:s", $date + 60 * 60 * 24) . " GMT");

conditionalget($date);

// Send the header information required (more or less)
header('Content-Type: image/png');

readfile($cachefile);

exit;
</code></pre>
<p>}<br>
require(“statsget.php”);<br>
$user = ucwords($user);</p>
<p>define(“BACKDIR”,“backs”);<br>
define(“FILEDIR”,“files”);<br>
define(“POSEDIR”,“pose”);<br>
define(“BORDER”,“files/border.png”);<br>
$pose = POSEDIR . “/” . $_GET[‘pose’] . “.png”;<br>
$back = BACKDIR . “/” . $_GET[‘back’] . “.png”;<br>
$font = “files/ v.ttf”;<br>
$namefont = FILEDIR . ‘/namefont.ttf’;<br>
$src = array ($back,$pose,“files/backStats.png”,BORDER);<br>
$cachefile = ‘cache/’ . $user . ‘.png’;</p>
<p>if (file_exists($cachefile) &amp;&amp; filemtime($cachefile) &gt; time() - 60 * 60 * 24)<br>
{<br>
show_image($cachefile);<br>
}</p>
<p>$imgBuf = array ();<br>
foreach ($src as $link)<br>
{<br>
switch(substr ($link,strrpos ($link,".")+1))<br>
{<br>
case ‘png’:<br>
$iTmp = imagecreatefrompng($link);<br>
break;<br>
case ‘gif’:<br>
$iTmp = imagecreatefromgif($link);<br>
break;<br>
case ‘jpeg’:<br>
case ‘jpg’:<br>
$iTmp = imagecreatefromjpeg($link);<br>
break;<br>
}<br>
array_push ($imgBuf,$iTmp);<br>
}<br>
$iOut = imagecreatetruecolor (“320”,“125”) ;<br>
$black = imagecolorallocate($iOut, 0, 0, 0);<br>
$textcolor = imagecolorallocate($im, 0, 0, 255);<br>
imagettftext($iOut, 70, 6, 10, 20, $black, $font, “I am fat”);<br>
imagecopy ($iOut,$imgBuf[0],0,0,0,0,imagesx($imgBuf[0]),imagesy($imgBuf[0]));<br>
imagecopy ($iOut,$imgBuf[1],230,3,0,0,imagesx($imgBuf[1]),imagesy($imgBuf[1]));<br>
imagecopy ($iOut,$imgBuf[2],0,0,0,0,imagesx($imgBuf[2]),imagesy($imgBuf[2]));<br>
imagecopy ($iOut, $imgBuf[3],0,0,0,0,imagesx($imgBuf[3]),imagesy($imgBuf[3]));</p>
<p>//For some reason, this won’t work…<br>
//imagestring($iOut, 5, 0, 0, “Hello world!”, $textcolor);</p>
<p>imagepng($iOut,$cachefile);<br>
show_image($cachefile);</p>
<p>?&gt;[/code]<br>
My new code<br>
But the text writing won’t work.<br>
can anyone tell why?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/php-error-help-please-new-question/190092/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/php-error-help-please-new-question/190092/1</link>
        <pubDate>Mon, 17 Mar 2008 02:45:56 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-190092-1</guid>
        <source url="https://forum.moparisthebest.com/t/php-error-help-please-new-question/190092.rss">PHP Error- Help Please - NEW QUESTION</source>
      </item>
  </channel>
</rss>
