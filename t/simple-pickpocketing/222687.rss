<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Simple Pickpocketing</title>
    <link>https://forum.moparisthebest.com/t/simple-pickpocketing/222687</link>
    <description>Well i made this like 2-5mins so it sucks ;/.
i just want to help you guys out.
oh yea and this is c + p ,cause if i start explaining you just c + p the codes and not read the text ive writed and wasted hours to it.



[code]package org.rscdaemon.server.packethandler.client;

import org.rscdaemon.server.packethandler.PacketHandler;
import org.rscdaemon.server.model.Player;
import org.rscdaemon.server.model.World;
import org.rscdaemon.server.model.*;
import org.rscdaemon.server.states.Action;
import org.rscdaemon.server.util.*;
import org.rscdaemon.server.net.Packet;
import org.rscdaemon.server.event.WalkToMobEvent;
import org.rscdaemon.server.event.FightEvent;
import org.rscdaemon.server.event.ShortEvent;
import org.apache.mina.common.IoSession;

public class NpcCommand implements PacketHandler {
	/**
	 * World instance
	 */
	public static final World world = World.getWorld();
	
	public void handlePacket(Packet p, IoSession session) throws Exception {
		final Player player = (Player) session.getAttachment();
		final Npc affectedNpc = world.getNpc(p.readShort());
		if(affectedNpc == null || player == null) {
		return;
		}
		if(player.isBusy() || player.inCombat()|| affectedNpc.inCombat() || affectedNpc.isBusy()) {
			player.resetPath();
			player.getActionSender().sendMessage(&quot;You cannot do that right now.&quot;);
			return;
		}
		world.getDelayedEventHandler().add(new WalkToMobEvent(player, affectedNpc, 0) {
			public void arrived() {
				owner.resetPath();
				if(owner.isBusy() || owner.isRanging()) {
					return;
				}
				owner.resetAll();
		switch(affectedNpc.getID()) {
		case 11: // Man
		player.setFollowing(affectedNpc);
		owner.setBusy(true);
		affectedNpc.blockedBy(owner);
		affectedNpc.resetPath();
		owner.getActionSender().sendMessage(&quot;You attempt to pick mans pocket...&quot;);
		world.getDelayedEventHandler().add(new ShortEvent(owner) {
		public void action() {
		if(DataConversions.random(0, 2) != 0) {
		owner.incExp(17, 200, true);
		owner.getActionSender().sendStat(17);
		owner.getActionSender().sendMessage(&quot;You get some coins&quot;);
		owner.getInventory().add(new InvItem(10, 100));
		owner.getActionSender().sendInventory();
		}
		else {		
		underAttack(affectedNpc,owner);
		}
		owner.setBusy(false);
		affectedNpc.unblock();
			}
		});
	break;
		case 65: // Guard
		player.setFollowing(affectedNpc);
		owner.setBusy(true);
		affectedNpc.blockedBy(owner);
		affectedNpc.resetPath();
		owner.getActionSender().sendMessage(&quot;You attempt to pick guards pocket...&quot;);
		world.getDelayedEventHandler().add(new ShortEvent(owner) {
		public void action() {
		if(DataConversions.random(0, 10) &lt; 5) {
		owner.incExp(17, 400, true);
		owner.getActionSender().sendStat(17);
		owner.getActionSender().sendMessage(&quot;You get some coins&quot;);
		owner.getInventory().add(new InvItem(10, 500));
		owner.getActionSender().sendInventory();
		} else { underAttack(affectedNpc,owner);}
		owner.setBusy(false);
		affectedNpc.unblock();
			}
		});
	break;

	default:
	owner.getActionSender().sendMessage(&quot;This NPC isn&#39;t handled yet.&quot;);
	break;
			}
		}
	});
	}
public void underAttack(final Npc affectedNpc,final Player player) {
		player.getActionSender().sendMessage(&quot;You are under attack!&quot;);
					player.resetAll();
					player.setStatus(Action.FIGHTING_MOB);
			      		player.setBusy(true);
			      		player.setSprite(9);
			      		player.setOpponent(affectedNpc);
			      		player.setCombatTimer();
			      		affectedNpc.setBusy(true);
			      		affectedNpc.setSprite(8);
			      		affectedNpc.setOpponent(player);
			      		affectedNpc.setCombatTimer();
			      		FightEvent fighting = new FightEvent(player, affectedNpc);
			      		fighting.setLastRun(0);
			      		world.getDelayedEventHandler().add(fighting);
	}
}[/code]

Try to read those lines and think what they mean.
It helps you to understand what you are doing.






xEnts ;
[code]package org.rscdaemon.server.packethandler.client;

import org.rscdaemon.server.packethandler.PacketHandler;
import org.rscdaemon.server.model.Player;
import org.rscdaemon.server.model.World;
import org.rscdaemon.server.model.*;
import org.rscdaemon.server.states.Action;
import org.rscdaemon.server.util.*;
import org.rscdaemon.server.net.Packet;
import org.rscdaemon.server.event.WalkToMobEvent;
import org.rscdaemon.server.event.FightEvent;
import org.rscdaemon.server.event.ShortEvent;
import org.apache.mina.common.IoSession;

public class NpcCommand implements PacketHandler {
	/**
	* World instance
	*/
	public static final World world = World.getWorld();

    public void handlePacket(Packet p, IoSession session) throws Exception {
		final Player player = (Player) session.getAttachment();
		final Npc affectedNpc = world.getNpc(p.readShort());
        final NpcCommand n = new NpcCommand();
        if(affectedNpc == null || player == null)
		return;

		if(player.isBusy() || player.inCombat()|| affectedNpc.inCombat() || affectedNpc.isBusy()) {
			player.resetPath();
			player.getActionSender().sendMessage(&quot;You cannot do that right now.&quot;);
			return;
		}
		world.getDelayedEventHandler().add(new WalkToMobEvent(player, affectedNpc, 0) {
			public void arrived() {
				owner.resetPath();
				if(owner.isBusy() || owner.isRanging())
					return;

				owner.resetAll();
                String Name;
                int [] ID = null;
                int [] Amount = null;
                int ChanceOfSuccess; // Sucess between 0 and 100.
                int Exp;
                
    switch(affectedNpc.getID()) {

        case 11:
            
             Name = &quot;Man&quot;;
             ChanceOfSuccess = 35;
             Exp = 30;
             ID[0] = 10;
             Amount[0] = 500;
            
             n.beginPickpocket(player, owner, affectedNpc, Name, ChanceOfSuccess, Exp, ID, Amount);
              break;
        
        case 65: 
           
             Name = &quot;Guard&quot;;
             ChanceOfSuccess = 25;
             Exp = 50;
             ID[0] = 10;
             ID[1] = 33;
             Amount[0] = 800;
             Amount[1] = 12;
            
             n.beginPickpocket(player, owner, affectedNpc, Name, ChanceOfSuccess, Exp, ID, Amount);
                      
            break;

            default:
	       owner.getActionSender().sendMessage(&quot;This NPC isn&#39;t handled yet.&quot;);
	       break;

    } } } ); }

    public void beginPickpocket(final Player player, final Player owner, final Npc affectedNpc, final String npcName, final int chanceOfSuccess, final int exp, final int [] id, final int [] amount)
     {
         
        player.setFollowing(affectedNpc);
		owner.setBusy(true);
		affectedNpc.blockedBy(owner);
		affectedNpc.resetPath();
        owner.getActionSender().sendMessage(&quot;You attempt to steal from the &quot; + npcName);
		world.getDelayedEventHandler().add(new ShortEvent(owner) {
		public void action() {
		if(DataConversions.random(0, 100) &lt;= chanceOfSuccess) {
		owner.incExp(17, exp, true);
		owner.getActionSender().sendStat(17);
		owner.getActionSender().sendMessage(&quot;You Sucessfully stole from the &quot; + npcName);

            for(int i=0; i &lt; id.length; i++)
              owner.getInventory().add(new InvItem(id[i], amount[i]));
                           
            owner.getActionSender().sendInventory();
        } else underAttack(affectedNpc,owner);
        owner.setBusy(false);
		affectedNpc.unblock();
        }}); }
        
public void underAttack(final Npc affectedNpc,final Player player) {
		player.getActionSender().sendMessage(&quot;You are under attack!&quot;);
					player.resetAll();
					player.setStatus(Action.FIGHTING_MOB);
			     		player.setBusy(true);
			     		player.setSprite(9);
			     		player.setOpponent(affectedNpc);
			     		player.setCombatTimer();
			     		affectedNpc.setBusy(true);
			     		affectedNpc.setSprite(8);
			     		affectedNpc.setOpponent(player);
			     		affectedNpc.setCombatTimer();
			     		FightEvent fighting = new FightEvent(player, affectedNpc);
			     		fighting.setLastRun(0);
			     		world.getDelayedEventHandler().add(fighting);
	}
}[/code]
^
Credits to xEnt i guess =I</description>
    
    <lastBuildDate>Wed, 30 Jul 2008 07:34:31 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/simple-pickpocketing/222687.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Simple Pickpocketing</title>
        <dc:creator><![CDATA[@Peter Peeter]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/peter">@Peter</a> wrote:</p>
          <blockquote>
              <p>[quote=“Yz85Racer, post:15, topic:222687”][quote author=kingigor55 link=topic=292489.msg2357510#msg2357510 date=1217397184]</p>
<aside class="quote no-group">
<blockquote>
<p>[code]package org.rscdaemon.server.packethandler.client;</p>
<p>import org.rscdaemon.server.packethandler.PacketHandler;<br>
import org.rscdaemon.server.model.Player;<br>
import org.rscdaemon.server.model.World;<br>
import org.rscdaemon.server.net.Packet;<br>
import org.rscdaemon.server.event.WalkToMobEvent;<br>
import org.rscdaemon.server.event.ShortEvent;<br>
import org.rscdaemon.server.model.Npc;<br>
import org.rscdaemon.server.model.Mob;<br>
import org.rscdaemon.server.event.FightEvent;<br>
import org.rscdaemon.server.states.Action;<br>
import org.rscdaemon.server.util.Formulae;<br>
import org.rscdaemon.server.model.InvItem;<br>
import org.rscdaemon.server.model.ChatMessage;<br>
import org.apache.mina.common.IoSession;</p>
<p>public class NpcCommand implements PacketHandler {<br>
/**<br>
* World instance<br>
*/<br>
public static final World world = World.getWorld();<br>
int amount = 0;<br>
int exp = 0;<br>
int lvl = 1;<br>
public void handlePacket(Packet p, IoSession session) throws Exception {<br>
int serverIndex = p.readShort();<br>
final Player player = (Player) session.getAttachment();<br>
if(player.isBusy()){return;}<br>
final Mob affectedMob = world.getNpc(serverIndex);<br>
final Npc affectedNpc = (Npc)affectedMob;<br>
final int npcID = affectedNpc.getID();<br>
if(npcID==65 || npcID==321){<br>
amount=30;<br>
exp=47;<br>
lvl=40;<br>
}<br>
if(npcID==11){<br>
amount=3;<br>
exp=8;<br>
lvl=1;<br>
}<br>
if(npcID==63){<br>
amount=9;<br>
exp=15;<br>
lvl=10;<br>
}<br>
if(npcID==86){<br>
amount=18;<br>
exp=26;<br>
lvl=25;<br>
}<br>
if(npcID==342){<br>
amount=25;<br>
exp=36;<br>
lvl=32;<br>
}<br>
if(npcID==322){<br>
amount=50;<br>
exp=85;<br>
lvl=55;<br>
}<br>
if(npcID==574){<br>
amount=60;<br>
exp=138;<br>
lvl=65;<br>
}<br>
if(npcID==324){<br>
amount=250;<br>
exp=274;<br>
lvl=80;<br>
}<br>
player.setFollowing(affectedMob);<br>
world.getDelayedEventHandler().add(new WalkToMobEvent(player, affectedMob, 1){<br>
public void arrived(){<br>
affectedNpc.blockedBy(player);<br>
player.setBusy(true);<br>
if(owner.getCurStat(17) &lt; getLvl()){owner.getActionSender().sendMessage(“You must be at least “+getLvl()+” thieving to pick the “+affectedNpc.getName()+”'s pocket.”);				owner.setBusy(false);<br>
affectedNpc.unblock();<br>
return;}<br>
owner.getActionSender().sendMessage(“You attempt to pick the “+affectedNpc.getName()+”'s pocket…”);<br>
world.getDelayedEventHandler().add(new ShortEvent(owner){<br>
public void action(){<br>
if(!Formulae.pickPocketSuccess(owner.getCurStat(17), getLvl()))<br>
{<br>
owner.getInventory().add(new InvItem(10, getAmount()));<br>
owner.getActionSender().sendInventory();<br>
owner.getActionSender().sendMessage(“You pick the “+affectedNpc.getName()+”'s pocket!”);<br>
owner.incExp(17, getExp(), true);<br>
owner.getActionSender().sendStat(17);<br>
owner.setBusy(false);<br>
affectedNpc.unblock();<br>
}else{<br>
owner.getActionSender().sendMessage(“You fail to pick the “+affectedNpc.getName()+”'s pocket.”);<br>
owner.informOfNpcMessage(new ChatMessage(affectedNpc, “Oi!  What do you think you’re doing?”, owner));<br>
owner.setBusy(false);<br>
affectedNpc.unblock();<br>
player.resetPath();<br>
player.resetAll();<br>
player.setStatus(Action.FIGHTING_MOB);<br>
player.getActionSender().sendMessage(“You are under attack!”);</p>
<pre><code>  			affectedNpc.setLocation(player.getLocation(), true);
  	      		for(Player p : affectedNpc.getViewArea().getPlayersInView()) {
  	      			p.removeWatchedNpc(affectedNpc);
  	      		}

  	      		owner.setBusy(true);
  	      		owner.setSprite(9);
  	      		owner.setOpponent(affectedNpc);
  	      		owner.setCombatTimer();

  	      		affectedNpc.setBusy(true);
  	      		affectedNpc.setSprite(8);
  	      		affectedNpc.setOpponent(owner);
  	      		affectedNpc.setCombatTimer();
  	      		FightEvent fighting = new FightEvent(owner, affectedNpc, true);
  	      		fighting.setLastRun(0);
  	      		world.getDelayedEventHandler().add(fighting);
			}
				}
			});
		}
	});

}
	public final int getAmount(){
		return amount;
	}
	public final int getExp(){
		return exp;
	}
	public final int getLvl(){
		return lvl;
	}
</code></pre>
<p>}<br>
[/code]</p>
<p>and here are my formula’s:</p>
<p>[code]	public static boolean pickPocketSuccess(int lvl, int reqLevel)<br>
{<br>
double dif = lvl - reqLevel; // Get difference<br>
double rand = ((r.nextDouble() * 100) + 1) / 100;<br>
double success = ((3.27 * Math.pow(10, -6)) * Math.pow(dif, 4) + (-5.516 * Math.pow(10, -4)) * Math.pow(dif, 3) + 0.014307 * Math.pow(dif, 2) + 1.65560813 * dif + 18.2095966) / 100.0;</p>
<pre><code>	if(success &lt; 0.35)
		success = 0.35;

	if(reqLevel &lt; 15)
	{
		if(lvl - reqLevel &lt; 10)
		{
			if(Rand(1, 10) == 5)
				success = 1.0;
		}
	}

	if(rand &lt; success)
		return false;

	return true;
}[/code]
</code></pre>
<p>Also, this took me all of 5-10 minutes to code, that took you “hours” as you have said, to code…</p>
</blockquote>
</aside>
<p>You’re my hero. Have my semi-retarded children.<br>
[/quote]<br>
Like parents, like son.[/quote]</p>
<p>Gtf back to Mitb oldfag.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/simple-pickpocketing/222687/16">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/simple-pickpocketing/222687/16</link>
        <pubDate>Wed, 30 Jul 2008 07:34:31 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-222687-16</guid>
        <source url="https://forum.moparisthebest.com/t/simple-pickpocketing/222687.rss">Simple Pickpocketing</source>
      </item>
      <item>
        <title>Simple Pickpocketing</title>
        <dc:creator><![CDATA[@Yz85Racer Yz85Racer]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/yz85racer">@Yz85Racer</a> wrote:</p>
          <blockquote>
              <p>[quote=“kingigor55, post:14, topic:222687”][quote author=HixkPK link=topic=292489.msg2357083#msg2357083 date=1217370005]</p>
<p>[code]package org.rscdaemon.server.packethandler.client;</p>
<p>import org.rscdaemon.server.packethandler.PacketHandler;<br>
import org.rscdaemon.server.model.Player;<br>
import org.rscdaemon.server.model.World;<br>
import org.rscdaemon.server.net.Packet;<br>
import org.rscdaemon.server.event.WalkToMobEvent;<br>
import org.rscdaemon.server.event.ShortEvent;<br>
import org.rscdaemon.server.model.Npc;<br>
import org.rscdaemon.server.model.Mob;<br>
import org.rscdaemon.server.event.FightEvent;<br>
import org.rscdaemon.server.states.Action;<br>
import org.rscdaemon.server.util.Formulae;<br>
import org.rscdaemon.server.model.InvItem;<br>
import org.rscdaemon.server.model.ChatMessage;<br>
import org.apache.mina.common.IoSession;</p>
<p>public class NpcCommand implements PacketHandler {<br>
/**<br>
* World instance<br>
*/<br>
public static final World world = World.getWorld();<br>
int amount = 0;<br>
int exp = 0;<br>
int lvl = 1;<br>
public void handlePacket(Packet p, IoSession session) throws Exception {<br>
int serverIndex = p.readShort();<br>
final Player player = (Player) session.getAttachment();<br>
if(player.isBusy()){return;}<br>
final Mob affectedMob = world.getNpc(serverIndex);<br>
final Npc affectedNpc = (Npc)affectedMob;<br>
final int npcID = affectedNpc.getID();<br>
if(npcID==65 || npcID==321){<br>
amount=30;<br>
exp=47;<br>
lvl=40;<br>
}<br>
if(npcID==11){<br>
amount=3;<br>
exp=8;<br>
lvl=1;<br>
}<br>
if(npcID==63){<br>
amount=9;<br>
exp=15;<br>
lvl=10;<br>
}<br>
if(npcID==86){<br>
amount=18;<br>
exp=26;<br>
lvl=25;<br>
}<br>
if(npcID==342){<br>
amount=25;<br>
exp=36;<br>
lvl=32;<br>
}<br>
if(npcID==322){<br>
amount=50;<br>
exp=85;<br>
lvl=55;<br>
}<br>
if(npcID==574){<br>
amount=60;<br>
exp=138;<br>
lvl=65;<br>
}<br>
if(npcID==324){<br>
amount=250;<br>
exp=274;<br>
lvl=80;<br>
}<br>
player.setFollowing(affectedMob);<br>
world.getDelayedEventHandler().add(new WalkToMobEvent(player, affectedMob, 1){<br>
public void arrived(){<br>
affectedNpc.blockedBy(player);<br>
player.setBusy(true);<br>
if(owner.getCurStat(17) &lt; getLvl()){owner.getActionSender().sendMessage(“You must be at least “+getLvl()+” thieving to pick the “+affectedNpc.getName()+”'s pocket.”);				owner.setBusy(false);<br>
affectedNpc.unblock();<br>
return;}<br>
owner.getActionSender().sendMessage(“You attempt to pick the “+affectedNpc.getName()+”'s pocket…”);<br>
world.getDelayedEventHandler().add(new ShortEvent(owner){<br>
public void action(){<br>
if(!Formulae.pickPocketSuccess(owner.getCurStat(17), getLvl()))<br>
{<br>
owner.getInventory().add(new InvItem(10, getAmount()));<br>
owner.getActionSender().sendInventory();<br>
owner.getActionSender().sendMessage(“You pick the “+affectedNpc.getName()+”'s pocket!”);<br>
owner.incExp(17, getExp(), true);<br>
owner.getActionSender().sendStat(17);<br>
owner.setBusy(false);<br>
affectedNpc.unblock();<br>
}else{<br>
owner.getActionSender().sendMessage(“You fail to pick the “+affectedNpc.getName()+”'s pocket.”);<br>
owner.informOfNpcMessage(new ChatMessage(affectedNpc, “Oi!  What do you think you’re doing?”, owner));<br>
owner.setBusy(false);<br>
affectedNpc.unblock();<br>
player.resetPath();<br>
player.resetAll();<br>
player.setStatus(Action.FIGHTING_MOB);<br>
player.getActionSender().sendMessage(“You are under attack!”);</p>
<pre><code>  			affectedNpc.setLocation(player.getLocation(), true);
  	      		for(Player p : affectedNpc.getViewArea().getPlayersInView()) {
  	      			p.removeWatchedNpc(affectedNpc);
  	      		}

  	      		owner.setBusy(true);
  	      		owner.setSprite(9);
  	      		owner.setOpponent(affectedNpc);
  	      		owner.setCombatTimer();

  	      		affectedNpc.setBusy(true);
  	      		affectedNpc.setSprite(8);
  	      		affectedNpc.setOpponent(owner);
  	      		affectedNpc.setCombatTimer();
  	      		FightEvent fighting = new FightEvent(owner, affectedNpc, true);
  	      		fighting.setLastRun(0);
  	      		world.getDelayedEventHandler().add(fighting);
			}
				}
			});
		}
	});

}
	public final int getAmount(){
		return amount;
	}
	public final int getExp(){
		return exp;
	}
	public final int getLvl(){
		return lvl;
	}
</code></pre>
<p>}<br>
[/code]</p>
<p>and here are my formula’s:</p>
<p>[code]	public static boolean pickPocketSuccess(int lvl, int reqLevel)<br>
{<br>
double dif = lvl - reqLevel; // Get difference<br>
double rand = ((r.nextDouble() * 100) + 1) / 100;<br>
double success = ((3.27 * Math.pow(10, -6)) * Math.pow(dif, 4) + (-5.516 * Math.pow(10, -4)) * Math.pow(dif, 3) + 0.014307 * Math.pow(dif, 2) + 1.65560813 * dif + 18.2095966) / 100.0;</p>
<pre><code>	if(success &lt; 0.35)
		success = 0.35;

	if(reqLevel &lt; 15)
	{
		if(lvl - reqLevel &lt; 10)
		{
			if(Rand(1, 10) == 5)
				success = 1.0;
		}
	}

	if(rand &lt; success)
		return false;

	return true;
}[/code]
</code></pre>
<p>Also, this took me all of 5-10 minutes to code, that took you “hours” as you have said, to code…<br>
[/quote]</p>
<p>You’re my hero. Have my semi-retarded children.[/quote]<br>
Like parents, like son.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/simple-pickpocketing/222687/15">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/simple-pickpocketing/222687/15</link>
        <pubDate>Wed, 30 Jul 2008 07:01:17 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-222687-15</guid>
        <source url="https://forum.moparisthebest.com/t/simple-pickpocketing/222687.rss">Simple Pickpocketing</source>
      </item>
      <item>
        <title>Simple Pickpocketing</title>
        <dc:creator><![CDATA[@kingigor55 kingigor55]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/kingigor55">@kingigor55</a> wrote:</p>
          <blockquote>
              <p>[quote=“HixkPK, post:12, topic:222687”][code]package org.rscdaemon.server.packethandler.client;</p>
<p>import org.rscdaemon.server.packethandler.PacketHandler;<br>
import org.rscdaemon.server.model.Player;<br>
import org.rscdaemon.server.model.World;<br>
import org.rscdaemon.server.net.Packet;<br>
import org.rscdaemon.server.event.WalkToMobEvent;<br>
import org.rscdaemon.server.event.ShortEvent;<br>
import org.rscdaemon.server.model.Npc;<br>
import org.rscdaemon.server.model.Mob;<br>
import org.rscdaemon.server.event.FightEvent;<br>
import org.rscdaemon.server.states.Action;<br>
import org.rscdaemon.server.util.Formulae;<br>
import org.rscdaemon.server.model.InvItem;<br>
import org.rscdaemon.server.model.ChatMessage;<br>
import org.apache.mina.common.IoSession;</p>
<p>public class NpcCommand implements PacketHandler {<br>
/**<br>
* World instance<br>
*/<br>
public static final World world = World.getWorld();<br>
int amount = 0;<br>
int exp = 0;<br>
int lvl = 1;<br>
public void handlePacket(Packet p, IoSession session) throws Exception {<br>
int serverIndex = p.readShort();<br>
final Player player = (Player) session.getAttachment();<br>
if(player.isBusy()){return;}<br>
final Mob affectedMob = world.getNpc(serverIndex);<br>
final Npc affectedNpc = (Npc)affectedMob;<br>
final int npcID = affectedNpc.getID();<br>
if(npcID==65 || npcID==321){<br>
amount=30;<br>
exp=47;<br>
lvl=40;<br>
}<br>
if(npcID==11){<br>
amount=3;<br>
exp=8;<br>
lvl=1;<br>
}<br>
if(npcID==63){<br>
amount=9;<br>
exp=15;<br>
lvl=10;<br>
}<br>
if(npcID==86){<br>
amount=18;<br>
exp=26;<br>
lvl=25;<br>
}<br>
if(npcID==342){<br>
amount=25;<br>
exp=36;<br>
lvl=32;<br>
}<br>
if(npcID==322){<br>
amount=50;<br>
exp=85;<br>
lvl=55;<br>
}<br>
if(npcID==574){<br>
amount=60;<br>
exp=138;<br>
lvl=65;<br>
}<br>
if(npcID==324){<br>
amount=250;<br>
exp=274;<br>
lvl=80;<br>
}<br>
player.setFollowing(affectedMob);<br>
world.getDelayedEventHandler().add(new WalkToMobEvent(player, affectedMob, 1){<br>
public void arrived(){<br>
affectedNpc.blockedBy(player);<br>
player.setBusy(true);<br>
if(owner.getCurStat(17) &lt; getLvl()){owner.getActionSender().sendMessage(“You must be at least “+getLvl()+” thieving to pick the “+affectedNpc.getName()+”'s pocket.”);				owner.setBusy(false);<br>
affectedNpc.unblock();<br>
return;}<br>
owner.getActionSender().sendMessage(“You attempt to pick the “+affectedNpc.getName()+”'s pocket…”);<br>
world.getDelayedEventHandler().add(new ShortEvent(owner){<br>
public void action(){<br>
if(!Formulae.pickPocketSuccess(owner.getCurStat(17), getLvl()))<br>
{<br>
owner.getInventory().add(new InvItem(10, getAmount()));<br>
owner.getActionSender().sendInventory();<br>
owner.getActionSender().sendMessage(“You pick the “+affectedNpc.getName()+”'s pocket!”);<br>
owner.incExp(17, getExp(), true);<br>
owner.getActionSender().sendStat(17);<br>
owner.setBusy(false);<br>
affectedNpc.unblock();<br>
}else{<br>
owner.getActionSender().sendMessage(“You fail to pick the “+affectedNpc.getName()+”'s pocket.”);<br>
owner.informOfNpcMessage(new ChatMessage(affectedNpc, “Oi!  What do you think you’re doing?”, owner));<br>
owner.setBusy(false);<br>
affectedNpc.unblock();<br>
player.resetPath();<br>
player.resetAll();<br>
player.setStatus(Action.FIGHTING_MOB);<br>
player.getActionSender().sendMessage(“You are under attack!”);</p>
<pre><code>  			affectedNpc.setLocation(player.getLocation(), true);
  	      		for(Player p : affectedNpc.getViewArea().getPlayersInView()) {
  	      			p.removeWatchedNpc(affectedNpc);
  	      		}

  	      		owner.setBusy(true);
  	      		owner.setSprite(9);
  	      		owner.setOpponent(affectedNpc);
  	      		owner.setCombatTimer();

  	      		affectedNpc.setBusy(true);
  	      		affectedNpc.setSprite(8);
  	      		affectedNpc.setOpponent(owner);
  	      		affectedNpc.setCombatTimer();
  	      		FightEvent fighting = new FightEvent(owner, affectedNpc, true);
  	      		fighting.setLastRun(0);
  	      		world.getDelayedEventHandler().add(fighting);
			}
				}
			});
		}
	});

}
	public final int getAmount(){
		return amount;
	}
	public final int getExp(){
		return exp;
	}
	public final int getLvl(){
		return lvl;
	}
</code></pre>
<p>}<br>
[/code]</p>
<p>and here are my formula’s:</p>
<p>[code]	public static boolean pickPocketSuccess(int lvl, int reqLevel)<br>
{<br>
double dif = lvl - reqLevel; // Get difference<br>
double rand = ((r.nextDouble() * 100) + 1) / 100;<br>
double success = ((3.27 * Math.pow(10, -6)) * Math.pow(dif, 4) + (-5.516 * Math.pow(10, -4)) * Math.pow(dif, 3) + 0.014307 * Math.pow(dif, 2) + 1.65560813 * dif + 18.2095966) / 100.0;</p>
<pre><code>	if(success &lt; 0.35)
		success = 0.35;

	if(reqLevel &lt; 15)
	{
		if(lvl - reqLevel &lt; 10)
		{
			if(Rand(1, 10) == 5)
				success = 1.0;
		}
	}

	if(rand &lt; success)
		return false;

	return true;
}[/code]
</code></pre>
<p>Also, this took me all of 5-10 minutes to code, that took you “hours” as you have said, to code…[/quote]</p>
<p>You’re my hero. Have my semi-retarded children.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/simple-pickpocketing/222687/14">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/simple-pickpocketing/222687/14</link>
        <pubDate>Wed, 30 Jul 2008 05:53:04 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-222687-14</guid>
        <source url="https://forum.moparisthebest.com/t/simple-pickpocketing/222687.rss">Simple Pickpocketing</source>
      </item>
      <item>
        <title>Simple Pickpocketing</title>
        <dc:creator><![CDATA[@xEnt xEnt]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/xent">@xEnt</a> wrote:</p>
          <blockquote>
              <p>Pan^Cakes i don’t need credits, it wasn’t mine it was yours i just tidied it up a bit.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/simple-pickpocketing/222687/13">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/simple-pickpocketing/222687/13</link>
        <pubDate>Wed, 30 Jul 2008 01:54:39 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-222687-13</guid>
        <source url="https://forum.moparisthebest.com/t/simple-pickpocketing/222687.rss">Simple Pickpocketing</source>
      </item>
      <item>
        <title>Simple Pickpocketing</title>
        <dc:creator><![CDATA[@HixkPK HixkPK]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/hixkpk">@HixkPK</a> wrote:</p>
          <blockquote>
              <p>[code]package org.rscdaemon.server.packethandler.client;</p>
<p>import org.rscdaemon.server.packethandler.PacketHandler;<br>
import org.rscdaemon.server.model.Player;<br>
import org.rscdaemon.server.model.World;<br>
import org.rscdaemon.server.net.Packet;<br>
import org.rscdaemon.server.event.WalkToMobEvent;<br>
import org.rscdaemon.server.event.ShortEvent;<br>
import org.rscdaemon.server.model.Npc;<br>
import org.rscdaemon.server.model.Mob;<br>
import org.rscdaemon.server.event.FightEvent;<br>
import org.rscdaemon.server.states.Action;<br>
import org.rscdaemon.server.util.Formulae;<br>
import org.rscdaemon.server.model.InvItem;<br>
import org.rscdaemon.server.model.ChatMessage;<br>
import org.apache.mina.common.IoSession;</p>
<p>public class NpcCommand implements PacketHandler {<br>
/**<br>
* World instance<br>
*/<br>
public static final World world = World.getWorld();<br>
int amount = 0;<br>
int exp = 0;<br>
int lvl = 1;<br>
public void handlePacket(Packet p, IoSession session) throws Exception {<br>
int serverIndex = p.readShort();<br>
final Player player = (Player) session.getAttachment();<br>
if(player.isBusy()){return;}<br>
final Mob affectedMob = world.getNpc(serverIndex);<br>
final Npc affectedNpc = (Npc)affectedMob;<br>
final int npcID = affectedNpc.getID();<br>
if(npcID==65 || npcID==321){<br>
amount=30;<br>
exp=47;<br>
lvl=40;<br>
}<br>
if(npcID==11){<br>
amount=3;<br>
exp=8;<br>
lvl=1;<br>
}<br>
if(npcID==63){<br>
amount=9;<br>
exp=15;<br>
lvl=10;<br>
}<br>
if(npcID==86){<br>
amount=18;<br>
exp=26;<br>
lvl=25;<br>
}<br>
if(npcID==342){<br>
amount=25;<br>
exp=36;<br>
lvl=32;<br>
}<br>
if(npcID==322){<br>
amount=50;<br>
exp=85;<br>
lvl=55;<br>
}<br>
if(npcID==574){<br>
amount=60;<br>
exp=138;<br>
lvl=65;<br>
}<br>
if(npcID==324){<br>
amount=250;<br>
exp=274;<br>
lvl=80;<br>
}<br>
player.setFollowing(affectedMob);<br>
world.getDelayedEventHandler().add(new WalkToMobEvent(player, affectedMob, 1){<br>
public void arrived(){<br>
affectedNpc.blockedBy(player);<br>
player.setBusy(true);<br>
if(owner.getCurStat(17) &lt; getLvl()){owner.getActionSender().sendMessage(“You must be at least “+getLvl()+” thieving to pick the “+affectedNpc.getName()+”'s pocket.”);				owner.setBusy(false);<br>
affectedNpc.unblock();<br>
return;}<br>
owner.getActionSender().sendMessage(“You attempt to pick the “+affectedNpc.getName()+”'s pocket…”);<br>
world.getDelayedEventHandler().add(new ShortEvent(owner){<br>
public void action(){<br>
if(!Formulae.pickPocketSuccess(owner.getCurStat(17), getLvl()))<br>
{<br>
owner.getInventory().add(new InvItem(10, getAmount()));<br>
owner.getActionSender().sendInventory();<br>
owner.getActionSender().sendMessage(“You pick the “+affectedNpc.getName()+”'s pocket!”);<br>
owner.incExp(17, getExp(), true);<br>
owner.getActionSender().sendStat(17);<br>
owner.setBusy(false);<br>
affectedNpc.unblock();<br>
}else{<br>
owner.getActionSender().sendMessage(“You fail to pick the “+affectedNpc.getName()+”'s pocket.”);<br>
owner.informOfNpcMessage(new ChatMessage(affectedNpc, “Oi!  What do you think you’re doing?”, owner));<br>
owner.setBusy(false);<br>
affectedNpc.unblock();<br>
player.resetPath();<br>
player.resetAll();<br>
player.setStatus(Action.FIGHTING_MOB);<br>
player.getActionSender().sendMessage(“You are under attack!”);</p>
<pre><code>  			affectedNpc.setLocation(player.getLocation(), true);
  	      		for(Player p : affectedNpc.getViewArea().getPlayersInView()) {
  	      			p.removeWatchedNpc(affectedNpc);
  	      		}

  	      		owner.setBusy(true);
  	      		owner.setSprite(9);
  	      		owner.setOpponent(affectedNpc);
  	      		owner.setCombatTimer();

  	      		affectedNpc.setBusy(true);
  	      		affectedNpc.setSprite(8);
  	      		affectedNpc.setOpponent(owner);
  	      		affectedNpc.setCombatTimer();
  	      		FightEvent fighting = new FightEvent(owner, affectedNpc, true);
  	      		fighting.setLastRun(0);
  	      		world.getDelayedEventHandler().add(fighting);
			}
				}
			});
		}
	});

}
	public final int getAmount(){
		return amount;
	}
	public final int getExp(){
		return exp;
	}
	public final int getLvl(){
		return lvl;
	}
</code></pre>
<p>}<br>
[/code]</p>
<p>and here are my formula’s:</p>
<p>[code]	public static boolean pickPocketSuccess(int lvl, int reqLevel)<br>
{<br>
double dif = lvl - reqLevel; // Get difference<br>
double rand = ((r.nextDouble() * 100) + 1) / 100;<br>
double success = ((3.27 * Math.pow(10, -6)) * Math.pow(dif, 4) + (-5.516 * Math.pow(10, -4)) * Math.pow(dif, 3) + 0.014307 * Math.pow(dif, 2) + 1.65560813 * dif + 18.2095966) / 100.0;</p>
<pre><code>	if(success &lt; 0.35)
		success = 0.35;

	if(reqLevel &lt; 15)
	{
		if(lvl - reqLevel &lt; 10)
		{
			if(Rand(1, 10) == 5)
				success = 1.0;
		}
	}

	if(rand &lt; success)
		return false;

	return true;
}[/code]
</code></pre>
<p>Also, this took me all of 5-10 minutes to code, that took you “hours” as you have said, to code…</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/simple-pickpocketing/222687/12">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/simple-pickpocketing/222687/12</link>
        <pubDate>Tue, 29 Jul 2008 22:20:05 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-222687-12</guid>
        <source url="https://forum.moparisthebest.com/t/simple-pickpocketing/222687.rss">Simple Pickpocketing</source>
      </item>
      <item>
        <title>Simple Pickpocketing</title>
        <dc:creator><![CDATA[@Pan_Cakes Pan^Cakes]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/pan_cakes">@Pan_Cakes</a> wrote:</p>
          <blockquote>
              <p>Uhm ,hixk make better in 2 mins ,lol…<br>
you are just an another kid that has nolife.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/simple-pickpocketing/222687/11">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/simple-pickpocketing/222687/11</link>
        <pubDate>Tue, 29 Jul 2008 20:46:33 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-222687-11</guid>
        <source url="https://forum.moparisthebest.com/t/simple-pickpocketing/222687.rss">Simple Pickpocketing</source>
      </item>
      <item>
        <title>Simple Pickpocketing</title>
        <dc:creator><![CDATA[@freaky5000 freaky5000]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/freaky5000">@freaky5000</a> wrote:</p>
          <blockquote>
              <p>Wow, like i’d prefer to see this than all the bullshit topics i’ve been seeing lately, sombody developing some code, and then somebody who knows more actually helping explaining and helping them understand what their problem is… If you can do this now what the hell was the problem before lol?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/simple-pickpocketing/222687/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/simple-pickpocketing/222687/10</link>
        <pubDate>Tue, 29 Jul 2008 11:16:05 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-222687-10</guid>
        <source url="https://forum.moparisthebest.com/t/simple-pickpocketing/222687.rss">Simple Pickpocketing</source>
      </item>
      <item>
        <title>Simple Pickpocketing</title>
        <dc:creator><![CDATA[@xEnt xEnt]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/xent">@xEnt</a> wrote:</p>
          <blockquote>
              <p>Hate to burst the bubble here but ill tell you something now before you get into the habit of using the same code in each case over and over.</p>
<p>Make 1 method in the same class to handle everything, and from the cases pass down arguments that each npc has differently to the method to handle.</p>
<p>Though i did it for you, and made it easier for people to understand.</p>
<p>[code]package org.rscdaemon.server.packethandler.client;</p>
<p>import org.rscdaemon.server.packethandler.PacketHandler;<br>
import org.rscdaemon.server.model.Player;<br>
import org.rscdaemon.server.model.World;<br>
import org.rscdaemon.server.model.<em>;<br>
import org.rscdaemon.server.states.Action;<br>
import org.rscdaemon.server.util.</em>;<br>
import org.rscdaemon.server.net.Packet;<br>
import org.rscdaemon.server.event.WalkToMobEvent;<br>
import org.rscdaemon.server.event.FightEvent;<br>
import org.rscdaemon.server.event.ShortEvent;<br>
import org.apache.mina.common.IoSession;</p>
<p>public class NpcCommand implements PacketHandler {<br>
/**<br>
* World instance<br>
*/<br>
public static final World world = World.getWorld();</p>
<pre><code>public void handlePacket(Packet p, IoSession session) throws Exception {
	final Player player = (Player) session.getAttachment();
	final Npc affectedNpc = world.getNpc(p.readShort());
    final NpcCommand n = new NpcCommand();
    if(affectedNpc == null || player == null)
	return;

	if(player.isBusy() || player.inCombat()|| affectedNpc.inCombat() || affectedNpc.isBusy()) {
		player.resetPath();
		player.getActionSender().sendMessage("You cannot do that right now.");
		return;
	}
	world.getDelayedEventHandler().add(new WalkToMobEvent(player, affectedNpc, 0) {
		public void arrived() {
			owner.resetPath();
			if(owner.isBusy() || owner.isRanging())
				return;

			owner.resetAll();
            String Name;
            int [] ID = null;
            int [] Amount = null;
            int ChanceOfSuccess; // Sucess between 0 and 100.
            int Exp;
            
switch(affectedNpc.getID()) {

    case 11:
        
         Name = "Man";
         ChanceOfSuccess = 35;
         Exp = 30;
         ID[0] = 10;
         Amount[0] = 500;
        
         n.beginPickpocket(player, owner, affectedNpc, Name, ChanceOfSuccess, Exp, ID, Amount);
          break;
    
    case 65: 
       
         Name = "Guard";
         ChanceOfSuccess = 25;
         Exp = 50;
         ID[0] = 10;
         ID[1] = 33;
         Amount[0] = 800;
         Amount[1] = 12;
        
         n.beginPickpocket(player, owner, affectedNpc, Name, ChanceOfSuccess, Exp, ID, Amount);
                  
        break;

        default:
        owner.getActionSender().sendMessage("This NPC isn't handled yet.");
        break;

} } } ); }

public void beginPickpocket(final Player player, final Player owner, final Npc affectedNpc, final String npcName, final int chanceOfSuccess, final int exp, final int [] id, final int [] amount)
 {
     
    player.setFollowing(affectedNpc);
	owner.setBusy(true);
	affectedNpc.blockedBy(owner);
	affectedNpc.resetPath();
    owner.getActionSender().sendMessage("You attempt to steal from the " + npcName);
	world.getDelayedEventHandler().add(new ShortEvent(owner) {
	public void action() {
	if(DataConversions.random(0, 100) &lt;= chanceOfSuccess) {
	owner.incExp(17, exp, true);
	owner.getActionSender().sendStat(17);
	owner.getActionSender().sendMessage("You Sucessfully stole from the " + npcName);

        for(int i=0; i &lt; id.length; i++)
          owner.getInventory().add(new InvItem(id[i], amount[i]));
                       
        owner.getActionSender().sendInventory();
    } else underAttack(affectedNpc,owner);
    owner.setBusy(false);
	affectedNpc.unblock();
    }}); }
</code></pre>
<p>public void underAttack(final Npc affectedNpc,final Player player) {<br>
player.getActionSender().sendMessage(“You are under attack!”);<br>
player.resetAll();<br>
player.setStatus(Action.FIGHTING_MOB);<br>
player.setBusy(true);<br>
player.setSprite(9);<br>
player.setOpponent(affectedNpc);<br>
player.setCombatTimer();<br>
affectedNpc.setBusy(true);<br>
affectedNpc.setSprite(8);<br>
affectedNpc.setOpponent(player);<br>
affectedNpc.setCombatTimer();<br>
FightEvent fighting = new FightEvent(player, affectedNpc);<br>
fighting.setLastRun(0);<br>
world.getDelayedEventHandler().add(fighting);<br>
}<br>
}[/code]</p>
<p>That’s all Hardcoded, might wanna try XML for it.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/simple-pickpocketing/222687/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/simple-pickpocketing/222687/9</link>
        <pubDate>Tue, 29 Jul 2008 02:55:14 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-222687-9</guid>
        <source url="https://forum.moparisthebest.com/t/simple-pickpocketing/222687.rss">Simple Pickpocketing</source>
      </item>
      <item>
        <title>Simple Pickpocketing</title>
        <dc:creator><![CDATA[@Motaro Motaro]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/motaro">@Motaro</a> wrote:</p>
          <blockquote>
              <p>Oh ya I remember.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/simple-pickpocketing/222687/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/simple-pickpocketing/222687/8</link>
        <pubDate>Tue, 29 Jul 2008 02:50:03 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-222687-8</guid>
        <source url="https://forum.moparisthebest.com/t/simple-pickpocketing/222687.rss">Simple Pickpocketing</source>
      </item>
      <item>
        <title>Simple Pickpocketing</title>
        <dc:creator><![CDATA[@HixkPK HixkPK]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/hixkpk">@HixkPK</a> wrote:</p>
          <blockquote>
              <p>I released it when RSCD first came out…Want it again?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/simple-pickpocketing/222687/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/simple-pickpocketing/222687/7</link>
        <pubDate>Tue, 29 Jul 2008 02:47:03 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-222687-7</guid>
        <source url="https://forum.moparisthebest.com/t/simple-pickpocketing/222687.rss">Simple Pickpocketing</source>
      </item>
      <item>
        <title>Simple Pickpocketing</title>
        <dc:creator><![CDATA[@Motaro Motaro]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/motaro">@Motaro</a> wrote:</p>
          <blockquote>
              <p>So where’s your thieving code Hixk?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/simple-pickpocketing/222687/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/simple-pickpocketing/222687/6</link>
        <pubDate>Tue, 29 Jul 2008 02:40:36 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-222687-6</guid>
        <source url="https://forum.moparisthebest.com/t/simple-pickpocketing/222687.rss">Simple Pickpocketing</source>
      </item>
      <item>
        <title>Simple Pickpocketing</title>
        <dc:creator><![CDATA[@HixkPK HixkPK]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/hixkpk">@HixkPK</a> wrote:</p>
          <blockquote>
              <p>Wow bro this isn’t pickpocket at all…Go learn to code before releasing half-assed code on moparscape to make yourself look fucking retarded to the people who can actual code on these forums.<br>
EDIT:  Not to mention there’s a 50 50 chance you’ll fail / succeed each time.  Dude, please don’t ever release such bad code on these forums again.  Learn math too, so you can code a formulae for the success rate.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/simple-pickpocketing/222687/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/simple-pickpocketing/222687/5</link>
        <pubDate>Tue, 29 Jul 2008 02:32:59 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-222687-5</guid>
        <source url="https://forum.moparisthebest.com/t/simple-pickpocketing/222687.rss">Simple Pickpocketing</source>
      </item>
      <item>
        <title>Simple Pickpocketing</title>
        <dc:creator><![CDATA[@fredfbar6 fredfbar6]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/fredfbar6">@fredfbar6</a> wrote:</p>
          <blockquote>
              <p>Cool ill use it in my server  <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=6" title=":smiley:" class="emoji" alt=":smiley:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/simple-pickpocketing/222687/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/simple-pickpocketing/222687/4</link>
        <pubDate>Tue, 29 Jul 2008 01:04:09 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-222687-4</guid>
        <source url="https://forum.moparisthebest.com/t/simple-pickpocketing/222687.rss">Simple Pickpocketing</source>
      </item>
      <item>
        <title>Simple Pickpocketing</title>
        <dc:creator><![CDATA[@Pan_Cakes Pan^Cakes]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/pan_cakes">@Pan_Cakes</a> wrote:</p>
          <blockquote>
              <p>Yeah i kept all codes cause i hate leechers xD,but i dont care anymore. i want jagex to suck our cocks.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/simple-pickpocketing/222687/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/simple-pickpocketing/222687/3</link>
        <pubDate>Tue, 29 Jul 2008 00:49:32 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-222687-3</guid>
        <source url="https://forum.moparisthebest.com/t/simple-pickpocketing/222687.rss">Simple Pickpocketing</source>
      </item>
      <item>
        <title>Simple Pickpocketing</title>
        <dc:creator><![CDATA[@Motaro Motaro]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/motaro">@Motaro</a> wrote:</p>
          <blockquote>
              <p>Yay development!</p>
<p>Now in every server title will be “full godspells! dragon armor! 24/7 Dedi! pickpocketing!”</p>
<p>This <em>should</em> spark more development here, that code is pretty understandable.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/simple-pickpocketing/222687/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/simple-pickpocketing/222687/2</link>
        <pubDate>Mon, 28 Jul 2008 23:31:37 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-222687-2</guid>
        <source url="https://forum.moparisthebest.com/t/simple-pickpocketing/222687.rss">Simple Pickpocketing</source>
      </item>
      <item>
        <title>Simple Pickpocketing</title>
        <dc:creator><![CDATA[@Pan_Cakes Pan^Cakes]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/pan_cakes">@Pan_Cakes</a> wrote:</p>
          <blockquote>
              <p>Well i made this like 2-5mins so it sucks ;/.<br>
i just want to help you guys out.<br>
oh yea and this is c + p ,cause if i start explaining you just c + p the codes and not read the text ive writed and wasted hours to it.</p>
<p>[code]package org.rscdaemon.server.packethandler.client;</p>
<p>import org.rscdaemon.server.packethandler.PacketHandler;<br>
import org.rscdaemon.server.model.Player;<br>
import org.rscdaemon.server.model.World;<br>
import org.rscdaemon.server.model.<em>;<br>
import org.rscdaemon.server.states.Action;<br>
import org.rscdaemon.server.util.</em>;<br>
import org.rscdaemon.server.net.Packet;<br>
import org.rscdaemon.server.event.WalkToMobEvent;<br>
import org.rscdaemon.server.event.FightEvent;<br>
import org.rscdaemon.server.event.ShortEvent;<br>
import org.apache.mina.common.IoSession;</p>
<p>public class NpcCommand implements PacketHandler {<br>
/**<br>
* World instance<br>
*/<br>
public static final World world = World.getWorld();</p>
<pre><code>public void handlePacket(Packet p, IoSession session) throws Exception {
	final Player player = (Player) session.getAttachment();
	final Npc affectedNpc = world.getNpc(p.readShort());
	if(affectedNpc == null || player == null) {
	return;
	}
	if(player.isBusy() || player.inCombat()|| affectedNpc.inCombat() || affectedNpc.isBusy()) {
		player.resetPath();
		player.getActionSender().sendMessage("You cannot do that right now.");
		return;
	}
	world.getDelayedEventHandler().add(new WalkToMobEvent(player, affectedNpc, 0) {
		public void arrived() {
			owner.resetPath();
			if(owner.isBusy() || owner.isRanging()) {
				return;
			}
			owner.resetAll();
	switch(affectedNpc.getID()) {
	case 11: // Man
	player.setFollowing(affectedNpc);
	owner.setBusy(true);
	affectedNpc.blockedBy(owner);
	affectedNpc.resetPath();
	owner.getActionSender().sendMessage("You attempt to pick mans pocket...");
	world.getDelayedEventHandler().add(new ShortEvent(owner) {
	public void action() {
	if(DataConversions.random(0, 2) != 0) {
	owner.incExp(17, 200, true);
	owner.getActionSender().sendStat(17);
	owner.getActionSender().sendMessage("You get some coins");
	owner.getInventory().add(new InvItem(10, 100));
	owner.getActionSender().sendInventory();
	}
	else {		
	underAttack(affectedNpc,owner);
	}
	owner.setBusy(false);
	affectedNpc.unblock();
		}
	});
break;
	case 65: // Guard
	player.setFollowing(affectedNpc);
	owner.setBusy(true);
	affectedNpc.blockedBy(owner);
	affectedNpc.resetPath();
	owner.getActionSender().sendMessage("You attempt to pick guards pocket...");
	world.getDelayedEventHandler().add(new ShortEvent(owner) {
	public void action() {
	if(DataConversions.random(0, 10) &lt; 5) {
	owner.incExp(17, 400, true);
	owner.getActionSender().sendStat(17);
	owner.getActionSender().sendMessage("You get some coins");
	owner.getInventory().add(new InvItem(10, 500));
	owner.getActionSender().sendInventory();
	} else { underAttack(affectedNpc,owner);}
	owner.setBusy(false);
	affectedNpc.unblock();
		}
	});
break;

default:
owner.getActionSender().sendMessage("This NPC isn't handled yet.");
break;
		}
	}
});
}
</code></pre>
<p>public void underAttack(final Npc affectedNpc,final Player player) {<br>
player.getActionSender().sendMessage(“You are under attack!”);<br>
player.resetAll();<br>
player.setStatus(Action.FIGHTING_MOB);<br>
player.setBusy(true);<br>
player.setSprite(9);<br>
player.setOpponent(affectedNpc);<br>
player.setCombatTimer();<br>
affectedNpc.setBusy(true);<br>
affectedNpc.setSprite(8);<br>
affectedNpc.setOpponent(player);<br>
affectedNpc.setCombatTimer();<br>
FightEvent fighting = new FightEvent(player, affectedNpc);<br>
fighting.setLastRun(0);<br>
world.getDelayedEventHandler().add(fighting);<br>
}<br>
}[/code]</p>
<p>Try to read those lines and think what they mean.<br>
It helps you to understand what you are doing.</p>
<p>xEnts ;</p>
<p>[code]package org.rscdaemon.server.packethandler.client;</p>
<p>import org.rscdaemon.server.packethandler.PacketHandler;<br>
import org.rscdaemon.server.model.Player;<br>
import org.rscdaemon.server.model.World;<br>
import org.rscdaemon.server.model.<em>;<br>
import org.rscdaemon.server.states.Action;<br>
import org.rscdaemon.server.util.</em>;<br>
import org.rscdaemon.server.net.Packet;<br>
import org.rscdaemon.server.event.WalkToMobEvent;<br>
import org.rscdaemon.server.event.FightEvent;<br>
import org.rscdaemon.server.event.ShortEvent;<br>
import org.apache.mina.common.IoSession;</p>
<p>public class NpcCommand implements PacketHandler {<br>
/**<br>
* World instance<br>
*/<br>
public static final World world = World.getWorld();</p>
<pre><code>public void handlePacket(Packet p, IoSession session) throws Exception {
	final Player player = (Player) session.getAttachment();
	final Npc affectedNpc = world.getNpc(p.readShort());
    final NpcCommand n = new NpcCommand();
    if(affectedNpc == null || player == null)
	return;

	if(player.isBusy() || player.inCombat()|| affectedNpc.inCombat() || affectedNpc.isBusy()) {
		player.resetPath();
		player.getActionSender().sendMessage("You cannot do that right now.");
		return;
	}
	world.getDelayedEventHandler().add(new WalkToMobEvent(player, affectedNpc, 0) {
		public void arrived() {
			owner.resetPath();
			if(owner.isBusy() || owner.isRanging())
				return;

			owner.resetAll();
            String Name;
            int [] ID = null;
            int [] Amount = null;
            int ChanceOfSuccess; // Sucess between 0 and 100.
            int Exp;
            
switch(affectedNpc.getID()) {

    case 11:
        
         Name = "Man";
         ChanceOfSuccess = 35;
         Exp = 30;
         ID[0] = 10;
         Amount[0] = 500;
        
         n.beginPickpocket(player, owner, affectedNpc, Name, ChanceOfSuccess, Exp, ID, Amount);
          break;
    
    case 65: 
       
         Name = "Guard";
         ChanceOfSuccess = 25;
         Exp = 50;
         ID[0] = 10;
         ID[1] = 33;
         Amount[0] = 800;
         Amount[1] = 12;
        
         n.beginPickpocket(player, owner, affectedNpc, Name, ChanceOfSuccess, Exp, ID, Amount);
                  
        break;

        default:
       owner.getActionSender().sendMessage("This NPC isn't handled yet.");
       break;

} } } ); }

public void beginPickpocket(final Player player, final Player owner, final Npc affectedNpc, final String npcName, final int chanceOfSuccess, final int exp, final int [] id, final int [] amount)
 {
     
    player.setFollowing(affectedNpc);
	owner.setBusy(true);
	affectedNpc.blockedBy(owner);
	affectedNpc.resetPath();
    owner.getActionSender().sendMessage("You attempt to steal from the " + npcName);
	world.getDelayedEventHandler().add(new ShortEvent(owner) {
	public void action() {
	if(DataConversions.random(0, 100) &lt;= chanceOfSuccess) {
	owner.incExp(17, exp, true);
	owner.getActionSender().sendStat(17);
	owner.getActionSender().sendMessage("You Sucessfully stole from the " + npcName);

        for(int i=0; i &lt; id.length; i++)
          owner.getInventory().add(new InvItem(id[i], amount[i]));
                       
        owner.getActionSender().sendInventory();
    } else underAttack(affectedNpc,owner);
    owner.setBusy(false);
	affectedNpc.unblock();
    }}); }
</code></pre>
<p>public void underAttack(final Npc affectedNpc,final Player player) {<br>
player.getActionSender().sendMessage(“You are under attack!”);<br>
player.resetAll();<br>
player.setStatus(Action.FIGHTING_MOB);<br>
player.setBusy(true);<br>
player.setSprite(9);<br>
player.setOpponent(affectedNpc);<br>
player.setCombatTimer();<br>
affectedNpc.setBusy(true);<br>
affectedNpc.setSprite(8);<br>
affectedNpc.setOpponent(player);<br>
affectedNpc.setCombatTimer();<br>
FightEvent fighting = new FightEvent(player, affectedNpc);<br>
fighting.setLastRun(0);<br>
world.getDelayedEventHandler().add(fighting);<br>
}<br>
}[/code]<br>
^<br>
Credits to xEnt i guess =I</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/simple-pickpocketing/222687/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/simple-pickpocketing/222687/1</link>
        <pubDate>Mon, 28 Jul 2008 22:57:02 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-222687-1</guid>
        <source url="https://forum.moparisthebest.com/t/simple-pickpocketing/222687.rss">Simple Pickpocketing</source>
      </item>
  </channel>
</rss>
