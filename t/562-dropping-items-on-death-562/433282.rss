<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>[562] Dropping Items on Death [562]</title>
    <link>https://forum.moparisthebest.com/t/562-dropping-items-on-death-562/433282</link>
    <description>This is just a easy tut on how when people die, they drop stuff. But they might drop 1item they might drop 12 items. its all random. Please make a backup of all files incase i mess up your files. I kept trying to find how to make it so when people die they drop items. I finally just spent a few minutes thinking and came up with this for you guys, I as of a now do not use this, but hopefully this helps you :).

This is my second tut!

difficulty is 1, 10;

Ok, go to player.java and add this:

[code]public int totaldropped = 1;
public int totaldropped2 = 3;[/code]

then search for:

[code]droploot[/code]

until you see something like this:
[code]public void dropLoot() {[/code]

Then Replace that entire void with this.
[code]public void dropLoot() { 
		final Player p2 = World.getInstance().getPlayerList().get(this.giveDrop);
		this.sm(&quot;Hurry and get your loot!&quot;);
				int itemid;
				int price2 = Misc.random(125000000);
		if(this.realsafezone()) {
			return;
		}
		List&lt;Item&gt; itemsInHand = new ArrayList&lt;Item&gt;();
		for(int i = 0; i &lt; Inventory.SIZE; i++) {
			Item item = this.getInventory().getContainer().get(i);
			if(item != null) {
				if (totaldropped2 == 3) {
					itemsInHand.remove(item);
				World.getInstance().getItemManager().createDropGroundItem(p2, this.getLocation(), item);
				this.getActionSender().sendCreateObject(400, 0, this.getLocation().getX(), this.getLocation().getY(), 0, 10);
				totaldropped2--;
				} else
				if (Misc.random(5) &gt;= 3) {
				if (totaldropped2 != 0) {
				itemsInHand.remove(item);
				World.getInstance().getItemManager().createDropGroundItem(p2, this.getLocation(), item);
				this.getActionSender().sendCreateObject(400, 0, this.getLocation().getX(), this.getLocation().getY(), 0, 10);
				totaldropped2--;
				} else {
					itemsInHand.add(item);
				}
				} else {
					itemsInHand.add(item);
				}
			}
		}
		for(int i = 0; i &lt; Equipment.SIZE; i++) {
			Item item = this.getEquipment().getContainer().get(i);
			if(item != null) {
				if (Misc.random(5) &gt;= 3) {
				if (totaldropped != 0) {
				itemsInHand.remove(item);
				World.getInstance().getItemManager().createDropGroundItem(p2, this.getLocation(), item);
				totaldropped--;
				} else {
					itemsInHand.add(item);
				}
					
				} else {
					itemsInHand.add(item);
				}
			}
		}
		this.getInventory().reset();
		this.getEquipment().reset();
		int keep = 10;
		if(this.PROTECTITEM == true) {
			keep = 13; 
		}
		if(this.getHeadIcons().isSkulled()) {
			keep = 38;
		}
		if(keep &gt; 0) {
			Collections.sort(itemsInHand, new Comparator&lt;Item&gt;() {
				@Override
				public int compare(Item arg0, Item arg1) {
                    int a0 = arg0.getDefinition().getPrice().getNormalPrice();
                    int a1 = arg1.getDefinition().getPrice().getNormalPrice();
					return a1 - a0;
				}
			});
			List&lt;Item&gt; toRemove = new ArrayList&lt;Item&gt;();
			for(int i = 0; i &lt; itemsInHand.size(); i++) {
				Item item = itemsInHand.get(i);
				if(item.getDefinition().isStackable() || item.getDefinition().isNoted()) {
					continue;
				}
				if(keep &gt; 0) {
					toRemove.add(item);
					keep--;
				} else {
					break;
				}
			}
			for(Item i : toRemove) {
				itemsInHand.remove(i);
				this.getInventory().addItem(i.getId(), 1);
			}
		}
		for(Item i : itemsInHand) {
			//World.getInstance().getItemManager().createDropGroundItem(this.getKiller(), this.getLocation(), i);
		}
		 totaldropped = 1;
		 totaldropped2 = 3;
	}[/code]
Now you might have to do this.
Go into DeathEvent.java
look for:
[code]else if(entity instanceof Player) {[/code]
it should look like this:
[code]if (entity.isDead() == false) {
				entity.teleport(Entity.DEFAULT_LOCATION);
				return;
			}[/code]
Under that add:
[code]		entity.dropLoot();[/code]

Save Compile and run.</description>
    
    <lastBuildDate>Fri, 17 Feb 2012 22:34:54 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/562-dropping-items-on-death-562/433282.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>[562] Dropping Items on Death [562]</title>
        <dc:creator><![CDATA[@RandQm RandQm]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/randqm">@RandQm</a> wrote:</p>
          <blockquote>
              <p>[quote=“masan05, post:3, topic:433282”][quote author=RandQm link=topic=536000.msg3918992#msg3918992 date=1329513902]<br>
snippet<br>
[/quote]<br>
Sorry i didn’t know where to put it.[/quote]<br>
sticky snippets topic</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/562-dropping-items-on-death-562/433282/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/562-dropping-items-on-death-562/433282/4</link>
        <pubDate>Fri, 17 Feb 2012 22:34:54 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-433282-4</guid>
        <source url="https://forum.moparisthebest.com/t/562-dropping-items-on-death-562/433282.rss">[562] Dropping Items on Death [562]</source>
      </item>
      <item>
        <title>[562] Dropping Items on Death [562]</title>
        <dc:creator><![CDATA[@masan05 masan05]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/masan05">@masan05</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="2" data-topic="433282">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/randqm/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> RandQm:</div>
<blockquote>
<p>snippet</p>
</blockquote>
</aside>
<p>Sorry i didn’t know where to put it.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/562-dropping-items-on-death-562/433282/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/562-dropping-items-on-death-562/433282/3</link>
        <pubDate>Fri, 17 Feb 2012 22:15:22 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-433282-3</guid>
        <source url="https://forum.moparisthebest.com/t/562-dropping-items-on-death-562/433282.rss">[562] Dropping Items on Death [562]</source>
      </item>
      <item>
        <title>[562] Dropping Items on Death [562]</title>
        <dc:creator><![CDATA[@RandQm RandQm]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/randqm">@RandQm</a> wrote:</p>
          <blockquote>
              <p>snippet</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/562-dropping-items-on-death-562/433282/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/562-dropping-items-on-death-562/433282/2</link>
        <pubDate>Fri, 17 Feb 2012 21:25:02 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-433282-2</guid>
        <source url="https://forum.moparisthebest.com/t/562-dropping-items-on-death-562/433282.rss">[562] Dropping Items on Death [562]</source>
      </item>
      <item>
        <title>[562] Dropping Items on Death [562]</title>
        <dc:creator><![CDATA[@masan05 masan05]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/masan05">@masan05</a> wrote:</p>
          <blockquote>
              <p>This is just a easy tut on how when people die, they drop stuff. But they might drop 1item they might drop 12 items. its all random. Please make a backup of all files incase i mess up your files. I kept trying to find how to make it so when people die they drop items. I finally just spent a few minutes thinking and came up with this for you guys, I as of a now do not use this, but hopefully this helps you :).</p>
<p>This is my second tut!</p>
<p>difficulty is 1, 10;</p>
<p>Ok, go to player.java and add this:</p>
<p><code>public int totaldropped = 1;
public int totaldropped2 = 3;</code></p>
<p>then search for:</p>
<pre><code class="lang-auto"></code></pre>
<p>until you see something like this:</p>
<pre><code class="lang-auto"></code></pre>
<p>Then Replace that entire void with this.</p>
<p>[code]public void dropLoot() {<br>
final Player p2 = World.getInstance().getPlayerList().get(this.giveDrop);<br>
this.sm(“Hurry and get your loot!”);<br>
int itemid;<br>
int price2 = Misc.random(125000000);<br>
if(this.realsafezone()) {<br>
return;<br>
}<br>
List itemsInHand = new ArrayList();<br>
for(int i = 0; i &lt; Inventory.SIZE; i++) {<br>
Item item = this.getInventory().getContainer().get(i);<br>
if(item != null) {<br>
if (totaldropped2 == 3) {<br>
itemsInHand.remove(item);<br>
World.getInstance().getItemManager().createDropGroundItem(p2, this.getLocation(), item);<br>
this.getActionSender().sendCreateObject(400, 0, this.getLocation().getX(), this.getLocation().getY(), 0, 10);<br>
totaldropped2–;<br>
} else<br>
if (Misc.random(5) &gt;= 3) {<br>
if (totaldropped2 != 0) {<br>
itemsInHand.remove(item);<br>
World.getInstance().getItemManager().createDropGroundItem(p2, this.getLocation(), item);<br>
this.getActionSender().sendCreateObject(400, 0, this.getLocation().getX(), this.getLocation().getY(), 0, 10);<br>
totaldropped2–;<br>
} else {<br>
itemsInHand.add(item);<br>
}<br>
} else {<br>
itemsInHand.add(item);<br>
}<br>
}<br>
}<br>
for(int i = 0; i &lt; Equipment.SIZE; i++) {<br>
Item item = this.getEquipment().getContainer().get(i);<br>
if(item != null) {<br>
if (Misc.random(5) &gt;= 3) {<br>
if (totaldropped != 0) {<br>
itemsInHand.remove(item);<br>
World.getInstance().getItemManager().createDropGroundItem(p2, this.getLocation(), item);<br>
totaldropped–;<br>
} else {<br>
itemsInHand.add(item);<br>
}</p>
<pre><code>			} else {
				itemsInHand.add(item);
			}
		}
	}
	this.getInventory().reset();
	this.getEquipment().reset();
	int keep = 10;
	if(this.PROTECTITEM == true) {
		keep = 13; 
	}
	if(this.getHeadIcons().isSkulled()) {
		keep = 38;
	}
	if(keep &gt; 0) {
		Collections.sort(itemsInHand, new Comparator&lt;Item&gt;() {
			@Override
			public int compare(Item arg0, Item arg1) {
                int a0 = arg0.getDefinition().getPrice().getNormalPrice();
                int a1 = arg1.getDefinition().getPrice().getNormalPrice();
				return a1 - a0;
			}
		});
		List&lt;Item&gt; toRemove = new ArrayList&lt;Item&gt;();
		for(int i = 0; i &lt; itemsInHand.size(); i++) {
			Item item = itemsInHand.get(i);
			if(item.getDefinition().isStackable() || item.getDefinition().isNoted()) {
				continue;
			}
			if(keep &gt; 0) {
				toRemove.add(item);
				keep--;
			} else {
				break;
			}
		}
		for(Item i : toRemove) {
			itemsInHand.remove(i);
			this.getInventory().addItem(i.getId(), 1);
		}
	}
	for(Item i : itemsInHand) {
		//World.getInstance().getItemManager().createDropGroundItem(this.getKiller(), this.getLocation(), i);
	}
	 totaldropped = 1;
	 totaldropped2 = 3;
}[/code]
</code></pre>
<p>Now you might have to do this.<br>
Go into DeathEvent.java<br>
look for:</p>
<pre><code class="lang-auto"></code></pre>
<p>it should look like this:</p>
<p><code>if (entity.isDead() == false) {
				entity.teleport(Entity.DEFAULT_LOCATION);
				return;
			}</code><br>
Under that add:</p>
<pre><code class="lang-auto"></code></pre>
<p>Save Compile and run.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/562-dropping-items-on-death-562/433282/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/562-dropping-items-on-death-562/433282/1</link>
        <pubDate>Fri, 17 Feb 2012 20:01:57 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-433282-1</guid>
        <source url="https://forum.moparisthebest.com/t/562-dropping-items-on-death-562/433282.rss">[562] Dropping Items on Death [562]</source>
      </item>
  </channel>
</rss>
