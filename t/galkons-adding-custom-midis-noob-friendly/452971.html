<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/galkons-adding-custom-midis-noob-friendly/452971 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 22:11:47 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>[Galkons] Adding Custom Midis (Noob-Friendly) - Runescape - moparisthebest.com</title>
    <meta name="description" content="Difficulty: Not too difficult if you have experience with cache packing Required: Galkon&amp;#39;s snippet on adding sounds and music , C&amp;amp;P Skills, and some common sense. Gzip.exe: http://www.mediafire.com/?cu809kzpz6y6qke 

Fir&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="452971.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;[Galkons] Adding Custom Midis (Noob-Friendly)&#39;" href="452971.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/galkons-adding-custom-midis-noob-friendly/452971" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/galkons-adding-custom-midis-noob-friendly/452971" />
<meta property="og:title" content="[Galkons] Adding Custom Midis (Noob-Friendly)" />
<meta name="twitter:title" content="[Galkons] Adding Custom Midis (Noob-Friendly)" />
<meta property="og:description" content="Difficulty: Not too difficult if you have experience with cache packing  Required: Galkon’s snippet on adding sounds and music , C&amp;P Skills, and some common sense.  Gzip.exe: http://www.mediafire.com/?cu809kzpz6y6qke  First off, lets learn a little about what we’re doing. Midis used to be the type of file used to play music in Runescape. Somewhere along the line Jagex changed this, but in the 317 revision, we can still pack any type of midi file into a cache and play it via the client.  First ad..." />
<meta name="twitter:description" content="Difficulty: Not too difficult if you have experience with cache packing  Required: Galkon’s snippet on adding sounds and music , C&amp;P Skills, and some common sense.  Gzip.exe: http://www.mediafire.com/?cu809kzpz6y6qke  First off, lets learn a little about what we’re doing. Midis used to be the type of file used to play music in Runescape. Somewhere along the line Jagex changed this, but in the 317 revision, we can still pack any type of midi file into a cache and play it via the client.  First ad..." />
<meta property="article:published_time" content="2012-08-05T20:20:06+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="452971.html">[Galkons] Adding Custom Midis (Noob-Friendly)</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/gara494.html'><span itemprop='name'>gara494</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-08-05T20:20:06Z'>
            <time itemprop='dateModified' datetime='2016-08-03T22:37:06Z' class='post-time'>
              August 3, 2016, 10:37pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p><span class="bbcode-b">Difficulty</span>: Not too difficult if you have experience with cache packing<br>
<span class="bbcode-b">Required</span>: Galkon’s snippet on adding sounds and music , C&amp;P Skills, and some common sense.<br>
<span class="bbcode-b">Gzip.exe</span>: <a href="http://www.mediafire.com/?cu809kzpz6y6qke" data-bbcode="true" rel="nofollow noopener">http://www.mediafire.com/?cu809kzpz6y6qke</a></p>
<p>First off, lets learn a little about what we’re doing. Midis used to be the type of file used to play music in Runescape. Somewhere along the line Jagex changed this, but in the 317 revision, we can still pack any type of midi file into a cache and play it via the client.</p>
<p>First add these two methods in client.java</p>
<p><code>public void musics() {
for(int MusicIndex = 0; MusicIndex &lt; 3536; MusicIndex++) {
byte[] abyte0 = GetMusic(MusicIndex);
if(abyte0 != null &amp;&amp; abyte0.length &gt; 0) {
decompressors[3].method234(abyte0.length, abyte0, MusicIndex);
}
}
}
</code></p>
<p><code>public byte[] GetMusic(int Index) {
try {
File Music = new File("./Music/"+Index+".gz");
byte[] aByte = new byte[(int)Music.length()];
FileInputStream Fis = new FileInputStream(Music);
Fis.read(aByte);
System.out.println(""+Index+" aByte = ["+aByte+"]!");
Fis.close();
return aByte;
} catch(Exception e) {
return null;
}
}</code></p>
<p>create a folder in your cache named “Music”</p>
<p>Now search for <code>onDemandFetcher.start(streamLoader_6, this);</code></p>
<p>and under it add <code>musics();</code></p>
<p>So what has Gara done to my client? Whats gonna happen? Well, nothing yet, because we have to perform one more step, but in short, We’ve set up the client to pack our midi files into the third cache index every time it starts up. It is NOT necessary to call this method if you arent packing everything new, and you can delete all your music files once theyre packed.</p>
<p>Now, open OnDemandFetcher and look for</p>
<pre><code class="lang-auto"></code></pre>
<p>replace that whole method with this one:</p>
<p>[CODE]	private boolean crcMatches(int i, int j, byte abyte0[])<br>
{<br>
//if(abyte0 == null || abyte0.length &lt; 2)<br>
//return false;<br>
int k = abyte0.length - 2;<br>
int l = ((abyte0[k] &amp; 0xff) &lt;&lt; 8) + (abyte0[k + 1] &amp; 0xff);<br>
crc32.reset();<br>
crc32.update(abyte0, 0, k);<br>
int i1 = (int) crc32.getValue();<br>
//return l == i &amp;&amp; i1 == j;<br>
return true;</p>
<pre><code>}[/CODE]
</code></pre>
<p>This will disable CRC checking and allow you to make more types of edits to your cache.</p>
<p>Now, lets pack something in.</p>
<p>To avoid overwriting previous files, search for a null slot. Now that you’ve disabled the CRC checking, you should get a message in your client <code>Error: od_ex null</code><br>
and you shouldnt be able to play valid music unless you restart your client.</p>
<p>Remember that number, because now we’re going to pack our midi into that slot.</p>
<p>Here: <a href="http://www.mfiles.co.uk/downloads/battleHymn.mid" data-bbcode="true" rel="nofollow noopener">http://www.mfiles.co.uk/downloads/battleHymn.mid</a> is a midi you can use (Right click Save-As). once you download it delete the file extension so your “battleHymn.mid” is now just “battleHymn”. Now, drag your “battleHymn” file onto the G-Zip exe and it should create a new file called battleHymn.gz</p>
<p>Rename your file to the number of the null slot, (ex: 22.gz) and move it to the “Music” folder in your cache.</p>
<p>Run the client and…</p>
<p>Congratulations, you can now blast Eminem in Lummy.</p>
<p>You should receive a message similar to:</p>
<pre><code class="lang-auto"></code></pre>
<p>Credits: animeking1120 and especially natsu for helping me clear up some issues I had, and for the music packing methods</p>
<p>[size=18pt]<span class="bbcode-u">Some more things:</span>[/size]</p>
<p>Remember, 0 is the slot for startup music, so by overwriting it, you’ll have new startup music. Here is the Scape Main midi, if you wanna pack it to another null slot just to have it.<br>
<a href="http://www.mediafire.com/?sss13hb1d330p8w" data-bbcode="true" rel="nofollow noopener">http://www.mediafire.com/?sss13hb1d330p8w</a></p>
<p><span class="bbcode-b">Increasing the size the midi’s can be</span>:</p>
<p>in OnDemandFetcher, search for</p>
<pre><code class="lang-auto"></code></pre>
<p>You should see something like <code>gzipInputBuffer = new byte[65000];</code></p>
<p>just tack on another zero to that byte making it 650000</p>
      </div>

      <meta itemprop='headline' content='[Galkons] Adding Custom Midis (Noob-Friendly)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Lin.html'><span itemprop='name'>Lin</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-08-06T12:12:51Z'>
            <time itemprop='dateModified' datetime='2016-08-03T22:39:05Z' class='post-time'>
              August 3, 2016, 10:39pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Awesome job! I like how you explained it, but I like it even more that you’re doing this the right way. Keep it up <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
      </div>

      <meta itemprop='headline' content='[Galkons] Adding Custom Midis (Noob-Friendly)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/gara494.html'><span itemprop='name'>gara494</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-08-25T22:18:41Z'>
            <time itemprop='dateModified' datetime='2016-08-03T23:42:40Z' class='post-time'>
              August 3, 2016, 11:42pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote quote-modified" data-post="2" data-topic="452971">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/lin/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> Lin:</div>
<blockquote>
<p>Awesome job! I like how you explained it, but I like it even more that you’re doing this the right way. Keep it up <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
</blockquote>
</aside>
<p>thanks! glad to get good feedback <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
      </div>

      <meta itemprop='headline' content='[Galkons] Adding Custom Midis (Noob-Friendly)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/galkons-adding-custom-midis-noob-friendly/452971 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 22:11:48 GMT -->
</html>
