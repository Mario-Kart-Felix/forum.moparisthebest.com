<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/a-project-dark-star-api-based-server/258397 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Aug 2019 06:30:47 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>A Project Dark Star API based server - Runescape - moparisthebest.com</title>
    <meta name="description" content="I&amp;#39;ve made a start to a RSC server that uses Sun&amp;#39;s Project Dark Star server framework and API. If you&amp;#39;d like to contribute anything then by all means do so. ^_^ I&amp;#39;ll be working on this as I feel like it, and loosely basin&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="258397.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;A Project Dark Star API based server&#39;" href="258397.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/a-project-dark-star-api-based-server/258397" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/a-project-dark-star-api-based-server/258397" />
<meta property="og:title" content="A Project Dark Star API based server" />
<meta name="twitter:title" content="A Project Dark Star API based server" />
<meta property="og:description" content="I’ve made a start to a RSC server that uses Sun’s Project Dark Star server framework and API.  If you’d like to contribute anything then by all means do so. 🙂 I’ll be working on this as I feel like it, and loosely basing my code on RSCD V25 code (not the bits and pieces that I see as quite shit).  Project file and source is attached.  Project Dark Star is essentially aimed at people looking to create highly scalable and concurrent server software using the Java programming language...." />
<meta name="twitter:description" content="I’ve made a start to a RSC server that uses Sun’s Project Dark Star server framework and API.  If you’d like to contribute anything then by all means do so. 🙂 I’ll be working on this as I feel like it, and loosely basing my code on RSCD V25 code (not the bits and pieces that I see as quite shit).  Project file and source is attached.  Project Dark Star is essentially aimed at people looking to create highly scalable and concurrent server software using the Java programming language...." />
<meta property="article:published_time" content="2009-01-25T12:11:15+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="258397.html">A Project Dark Star API based server</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/lothy.html'><span itemprop='name'>lothy</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-01-25T12:11:15Z'>
            <time itemprop='dateModified' datetime='2016-07-31T05:01:20Z' class='post-time'>
              July 31, 2016,  5:01am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I’ve made a start to a RSC server that uses <a href="http://www.projectdarkstar.com/" data-bbcode="true" rel="nofollow noopener">Sun’s Project Dark Star</a> server framework and API.<br>
If you’d like to contribute anything then by all means do so. <img src="../../images/emoji/twitter/slight_smile1bce.png?v=6" title=":slight_smile:" class="emoji" alt=":slight_smile:"> I’ll be working on this as I feel like it, and loosely basing my code on RSCD V25 code (not the bits and pieces that I see as quite shit).</p>
<p>Project file and source is attached.</p>
<p>Project Dark Star is essentially aimed at people looking to create highly scalable and concurrent server software using the Java programming language. It is highly scalable, ensures serial access to any object that will require an update, and quite easy to use after reading the documentation. I believe a well-written server that depends on Dark Star would be superior to the RSCD framework.<br>
The only downside is its means of persistence - all ManagedObject instances are persisted using synchronization, which allows objects to be passed from one server to another (thus scalability is possible).</p>
      </div>

      <meta itemprop='headline' content='A Project Dark Star API based server'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/xEnt.html'><span itemprop='name'>xEnt</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-01-25T12:25:50Z'>
            <time itemprop='dateModified' datetime='2016-07-31T05:01:20Z' class='post-time'>
              July 31, 2016,  5:01am
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>i approve of this project</p>
      </div>

      <meta itemprop='headline' content='A Project Dark Star API based server'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Vrunk.html'><span itemprop='name'>Vrunk</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-01-25T21:46:36Z'>
            <time itemprop='dateModified' datetime='2016-07-31T05:01:52Z' class='post-time'>
              July 31, 2016,  5:01am
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Always considered this, I’ve been following darkstar’s progress for approximately a year now, and have also been using it for the MMO that I’m working on. In terms of performance, darkstar would win hands down, no question about it.</p>
<p>I have a few qualms about darkstar, but most of them are trade-offs for performance. One big difference is that Berkeley Database would be used instead of SQL for persistence. It is a very solid system otherwise. If anyone is unfamiliar with darkstar, its goal is to provide the illusion of a single-threaded environment while actually being multithreaded under the hood. It’s basically an abstraction layer for building a multithreaded server.</p>
      </div>

      <meta itemprop='headline' content='A Project Dark Star API based server'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/lothy.html'><span itemprop='name'>lothy</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-01-26T00:01:09Z'>
            <time itemprop='dateModified' datetime='2016-07-31T05:01:59Z' class='post-time'>
              July 31, 2016,  5:01am
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I guess I should probably post some design goals. There’s a class called Area in the environment package. I’d like to remove the use of ActiveTile objects to store Player objects.<br>
We could break the map up based on how we believe the game would be used. For example, Tree Gnome Stronghold may not be a popular location in private servers - we have an Area that covers 200<em>200 tiles there. On the other hand Varrock might be highly popular, so we break the areas up into 50</em>50 tiles. ActiveTile objects would only exist to store items on the ground, and would be removed when the items are picked up.</p>
      </div>

      <meta itemprop='headline' content='A Project Dark Star API based server'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/KO9.html'><span itemprop='name'>KO9</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-01-26T00:32:53Z'>
            <time itemprop='dateModified' datetime='2016-07-31T05:02:01Z' class='post-time'>
              July 31, 2016,  5:02am
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Doesn’t it have a MySQL driver?</p>
<p>I’ve never used Berkeley Database. But seeing as BSD was made at Berkeley amongst other programs I’d guess that it wasn’t too bad a DB</p>
      </div>

      <meta itemprop='headline' content='A Project Dark Star API based server'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Vrunk.html'><span itemprop='name'>Vrunk</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-01-26T01:06:53Z'>
            <time itemprop='dateModified' datetime='2016-07-31T05:02:01Z' class='post-time'>
              July 31, 2016,  5:02am
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Lothy, post:4, topic:258397”]I guess I should probably post some design goals. There’s a class called Area in the environment package. I’d like to remove the use of ActiveTile objects to store Player objects.<br>
We could break the map up based on how we believe the game would be used. For example, Tree Gnome Stronghold may not be a popular location in private servers - we have an Area that covers 200<em>200 tiles there. On the other hand Varrock might be highly popular, so we break the areas up into 50</em>50 tiles. ActiveTile objects would only exist to store items on the ground, and would be removed when the items are picked up.[/quote]</p>
<p>As much as I like using prediction to optimize the network traffic, optimization as fine-grained as that is something that should be saved until last.<br>
Not to beat a dead horse, but what I’d planned on doing for the old RSCDv_25 source is what I had in mind for the network traffic</p>
<p><img src="http://img72.imageshack.us/img72/3430/ss20081217184301cx4.png" alt width="" height=""></p>
<p>Blue box represents the viewport of Player A:</p>
<p>[ul][li]Located in Zone 3[/li]<br>
[li]Sends messages to Zone 3[/li]<br>
[li]Receives messages from Zones 2,3,5,6[/li][/ul]</p>
<p>Green box represents the viewport of Player B:</p>
<p>[ul][li]Located in Zone 2[/li]<br>
[li]Sends messages to Zone 2[/li]<br>
[li]Receives messages from Zones 1,2,4,5[/li][/ul]</p>
<p>[hr]</p>
<p>BDB is used in favor of MySQL simply for the speed that darkstar requires. There is an extension for the darkstar project that allows you to write somewhat of a mirror image of what is happening in BDB to a MySQL database lazily, simply so you can view it more easily. Perhaps that could be used eventually.</p>
      </div>

      <meta itemprop='headline' content='A Project Dark Star API based server'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/lothy.html'><span itemprop='name'>lothy</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-01-28T13:00:38Z'>
            <time itemprop='dateModified' datetime='2016-07-31T05:04:51Z' class='post-time'>
              July 31, 2016,  5:04am
            </time>
        <span itemprop='position'>#7</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>It’s not an optimization. It’s simply a different design approach.</p>
<p>This is based on an unmodified RSCD v25 server.<br>
Let’s say Player A is in an empty area. The method getViewedArea(x1, y1, x2, y2) is called several times (for items, game objects, players and npcs.<br>
When getViewedArea is called by getNpcsInView() and getPlayersInView() the getViewedArea method performs 240 iterations in almost all cases. For each tile in the 2d array returned by the method, the “getEntity()” method is invoked, and the list returned is passed as an arg to tempList.addAll(List).<br>
For items and objects, 441 iterations occur, followed by the same adding of items and objects to a temp list.<br>
So what happens when a player is in an absolutely empty area? All of that.<br>
These methods are also heavily used; game updates depend on them, and the game updates occur each cycle. That’s a lot of work that can be completely avoided.</p>
<p>Let’s take a look at the alternative now.</p>
<p>The world is broken up into sections/areas. We choose area sizes based on expected activity. High-traffic map locations such as varrock are fragmented into small areas, whereas rarely used sections will have bigger areas (100<em>100, 200</em>200 etc).<br>
Each area has a backing Channel object, which contains a collection of all ClientSession objects currently in the same area.<br>
When a player gets close enough to a section, we join them to the area and its backing channel that they’re approaching.<br>
They could be in as many as 4 Area objects at any given time, but more often than not they’d be in 2 Area objects.<br>
When player updates occur we have them iterate over the collection of ClientSession objects - they grab the associated Player object and see if it’s within range. If it is then it updates the player’s client as required.<br>
So say there are 150 players in an area in Varrrock. That’s a maximum of 150 iterations per player, and a maximum of 150 invocations of a withinDistance(Object) method.<br>
As for items and game objects, I believe we could still use the ActiveTile object. The ActiveTile objects could be stored in a List, and iterated over. Even the most populated areas wouldn’t have too many tiles to iterate over. The tiles would be removed when the items on them are removed.</p>
<p>Performance wise I believe the solution I’m using is far more satisfying than RSCD’s approach. I think it will scale far better too - little, if any, processing power is used on players unless they are in the most populated areas - afterall, a player on their own in an area who could view another area with maybe one player would iterate over 2 Collections - the players from the area it’s in (ie, a single iteration), and the players from the area it can see a portion of (ie, another iteration).</p>
      </div>

      <meta itemprop='headline' content='A Project Dark Star API based server'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Vrunk.html'><span itemprop='name'>Vrunk</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-01-29T05:54:48Z'>
            <time itemprop='dateModified' datetime='2016-07-31T05:05:57Z' class='post-time'>
              July 31, 2016,  5:05am
            </time>
        <span itemprop='position'>#8</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote no-group quote-modified" data-post="7" data-topic="258397">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forum.moparisthebest.com/lothy/40/51_1.png" class="avatar"> Lothy:</div>
<blockquote>
<p>…These methods are also heavily used; game updates depend on them, and the game updates occur each cycle. That’s a lot of work that can be completely avoided.</p>
</blockquote>
</aside>
<p>So basically the reason why RSCD sucks is because the server ticks at an artificial frame to keep everyone synchronized, instead of being event-driven. Big design mistake there, I agree.</p>
<aside class="quote no-group" data-post="7" data-topic="258397">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forum.moparisthebest.com/lothy/40/51_1.png" class="avatar"> Lothy:</div>
<blockquote>
<p>We choose area sizes based on expected activity.</p>
</blockquote>
</aside>
<p>The reason why I don’t want to do that is because you can’t predict where people will be all the time. There will not always be a huge crowd in a particular area, nor will there always be a perfectly even distribution of people throughout all areas. Thus, the system that is designed to handle network traffic must be flexible enough for both cases.</p>
<p>[quote=“Lothy, post:7, topic:258397”]They could be in as many as 4 Area objects at any given time, but more often than not they’d be in 2 Area objects.<br>
When player updates occur we have them iterate over the collection of ClientSession objects - they grab the associated Player object and see if it’s within range. If it is then it updates the player’s client as required.[/quote]</p>
<p>I don’t see a reason for a person to be sending messages to more than one area at a time. If you’re talking about receiving messages from multiple areas, then sure. Also, there shouldn’t really be a need to iterate over the collection of ClientSessions. Not only is that inefficient, but it can be solved another way.</p>
<p>What I’m suggesting is that if a player is always a member of an area (based on the his location), then he should send messages to that area alone. Then, whoever is listening to that area’s channel will receive the update (which should only be the players in the surrounding areas).</p>
<p>1 sender : N listeners</p>
<p>What cuts down on the network traffic is the fact that <span class="hashtag">#listeners</span> != <span class="hashtag">#players</span> online (if that wasn’t already obvious).</p>
<p>[hr]</p>
<p>Also, “Events” in RSCD are basically the same as “Tasks” in Darkstar, so there’s another easy parallel that can be followed.<br>
[center]<img src="http://www.moparisthebest.org/smf/Themes/default/images/warnpmod.gif" alt width="" height=""> Kirby avatar is illegal.[/center]</p>
      </div>

      <meta itemprop='headline' content='A Project Dark Star API based server'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Stork.html'><span itemprop='name'>Stork</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-10-14T10:14:31Z'>
            <time itemprop='dateModified' datetime='2016-07-31T11:47:24Z' class='post-time'>
              July 31, 2016, 11:47am
            </time>
        <span itemprop='position'>#9</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>What’s the logic behind putting</p>
<pre><code class="lang-auto">AppContext.getDataManager().markForUpdate(this);</code></pre>
<p>in every ‘set’ method of every RscObject? Shit works, but it seems ungraceful. Really that should just be called as you modify an existing object, shirley.[br][br][size=1]Posted on: October 14, 2009, 04:45:58 am[/size][hr]OH and, regarding splitting the server up into sections, I like Vrunk’s suggestion. Each section should equal the size of the player’s viewpoint, and the player should be subscribed to all the areas around it.</p>
<p>By that I mean the DataManager is aware of areas (some ManagedObject), say 16x16 chunks of game. Each Area holds a Channel (which in turn holds a list of ClientSessions - Players), a list of game objects, ground items, npcs. Each Area also holds (or has access to) ManagedReferences for the Areas immediately around it. When your player moves, he joins the area he’s currently in, and all the adjacent areas.</p>
<p>When data is recieved from any of these areas, a quick proximity check is done to see if they’re close enough. When data needs to be sent, it’s sent to the player’s current area’s channel.</p>
<p>When player updates are done every tick of the server’s operation, all players, items, objects, npcs from all adjacent areas are examined for distance.</p>
<p>Can’t think of a reason not to do this?[br][br][size=1]Posted on: October 14, 2009, 04:49:37 am[/size][hr]On second thoughts, it’d be much more sensible to, instead of subscribing to all adjacent areas (which would be wasteful if a player was on the edge of an area) but instead figure out exactly which areas the viewport of the player encompasses, like Vrunk suggested.</p>
<p>If the Area is viewport-sized, an easy way to do this would just be to add the area the player is on, and (if not already added), the areas the four corners of the viewport are sitting on. Sound alright?</p>
      </div>

      <meta itemprop='headline' content='A Project Dark Star API based server'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/lothy.html'><span itemprop='name'>lothy</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-10-24T11:18:07Z'>
            <time itemprop='dateModified' datetime='2016-07-31T12:02:26Z' class='post-time'>
              July 31, 2016, 12:02pm
            </time>
        <span itemprop='position'>#10</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I think that’s already done in the RS2 server that Graham is working on. This is a pretty old discussion. <img src="../../images/emoji/twitter/stuck_out_tongueae52.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
      </div>

      <meta itemprop='headline' content='A Project Dark Star API based server'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/a-project-dark-star-api-based-server/258397 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Aug 2019 06:30:49 GMT -->
</html>
