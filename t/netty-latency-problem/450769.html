<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/netty-latency-problem/450769 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Aug 2019 00:49:06 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Netty latency problem - General Programming - moparisthebest.com</title>
    <meta name="description" content="I thought that there&amp;#39;s some Java experts around that don&amp;#39;t check RSC boards so, I would appreciate if someone helped me out on this problem, as I&amp;#39;ve tried many different things and nothing seems to help. 

For example, w&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="450769.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Netty latency problem&#39;" href="450769.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/netty-latency-problem/450769" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/netty-latency-problem/450769" />
<meta property="og:title" content="Netty latency problem" />
<meta name="twitter:title" content="Netty latency problem" />
<meta property="og:description" content="I thought that there’s some Java experts around that don’t check RSC boards so, I would appreciate if someone helped me out on this problem, as I’ve tried many different things and nothing seems to help.  For example, when you walk first time, it’s instant, but when you walk right after that it has about 300ms delay, it’s same with all the actions, it’s like the pipeline was busy and waits for the old packet to get executed, but it doesn’t make any sense to me since I’m using cachedThreadPool as..." />
<meta name="twitter:description" content="I thought that there’s some Java experts around that don’t check RSC boards so, I would appreciate if someone helped me out on this problem, as I’ve tried many different things and nothing seems to help.  For example, when you walk first time, it’s instant, but when you walk right after that it has about 300ms delay, it’s same with all the actions, it’s like the pipeline was busy and waits for the old packet to get executed, but it doesn’t make any sense to me since I’m using cachedThreadPool as..." />
<meta property="article:published_time" content="2012-07-22T19:15:38+00:00" />
<meta property="og:ignore_canonical" content="true" />

      <link rel="next" href="4507694658.html?page=2">


    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="450769.html">Netty latency problem</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/general-programming.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>General Programming</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Nothing1.html'><span itemprop='name'>Nothing1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-07-22T19:15:38Z'>
            <time itemprop='dateModified' datetime='2016-08-03T17:20:32Z' class='post-time'>
              August 3, 2016,  5:20pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I thought that there’s some Java experts around that don’t check RSC boards so, I would appreciate if someone helped me out on this problem, as I’ve tried many different things and nothing seems to help.</p>
<p>For example, when you walk first time, it’s instant, but when you walk right after that it has about 300ms delay, it’s same with all the actions, it’s like the pipeline was busy and waits for the old packet to get executed, but it doesn’t make any sense to me since I’m using <span class="bbcode-i">cachedThreadPool</span> as boss and workers, and using <span class="bbcode-i">NioServerSocketChannelFactory</span>, it shouldn’t be blocking it.</p>
<p>My configuration:</p>
<pre><code class="lang-auto">		bootstrap = new ServerBootstrap(new NioServerSocketChannelFactory(Executors.newCachedThreadPool(), Executors.newCachedThreadPool()));
		
		bootstrap.setOption("child.tcpNoDelay", true);
		bootstrap.setOption("child.keepAlive", true);
		bootstrap.setOption("child.reuseAddress", true);
		
		bootstrap.setPipelineFactory(new StaminaPipelineFactory());</code></pre>
<p>My pipeline:</p>
<p>[code]public class ServerPipelineFactory implements ChannelPipelineFactory {</p>
<pre><code>public ChannelPipeline getPipeline() throws Exception {
	ChannelPipeline pipeline = Channels.pipeline();
	pipeline.addLast("decoder", new RSCProtocolDecoder());
	pipeline.addLast("encoder", new RSCProtocolEncoder());
	pipeline.addLast("handler", new ConnectionHandler());
	return pipeline;
}
</code></pre>
<p>}<br>
[/code]</p>
<p>Encoder:</p>
<p><code>	protected Object encode(ChannelHandlerContext ctx, Channel channel, Object object) throws Exception {
		Packet p = (Packet) object;
		int packetLength = p.getLength();
		if (!p.isRaw()) {
			ChannelBuffer buffer = ChannelBuffers.buffer(packetLength + 3);
			byte[] outlen = {(byte)(packetLength &gt;&gt; 8), (byte)(packetLength)};
			buffer.writeBytes(outlen);
			buffer.writeByte((byte) p.getID());
			buffer.writeBytes(p.getBuffer());
			return buffer;
		}
		return p.getBuffer();
	}
</code><br>
Decoder:</p>
<pre><code class="lang-auto">	protected Object decode(ChannelHandlerContext ctx, Channel channel,
			ChannelBuffer buffer) {
		buffer.markReaderIndex();
		if (buffer.readableBytes() &lt; 2) {
			return null;
		}
		Logger.log("Received at: " + System.currentTimeMillis());
		byte[] buf = { buffer.readByte(), buffer.readByte() };
		int length = (short) ((buf[0] &amp; 0xff) &lt;&lt; 8) | (short) (buf[1] &amp; 0xff);
		if (length &gt; buffer.readableBytes()) {
			buffer.resetReaderIndex();
			return null;
		}
		if (length - 1 &lt; 0) {
			Logger.err("Negative array length!");
			channel.close();
			return null;
		}
		ChannelBuffer payloadBuffer;
		byte[] data = new byte[length - 1];
		int id = buffer.readByte() &amp; 0xff;
		buffer.readBytes(data);
		payloadBuffer = ChannelBuffers.wrappedBuffer(data);

		return new Packet(id, payloadBuffer);
	}</code></pre>
<p>ConnectionHandler:</p>
<pre><code class="lang-auto">package org.stamina.net;

import org.jboss.netty.channel.Channel;
import org.jboss.netty.channel.ChannelHandlerContext;
import org.jboss.netty.channel.ChannelStateEvent;
import org.jboss.netty.channel.ExceptionEvent;
import org.jboss.netty.channel.MessageEvent;
import org.jboss.netty.channel.SimpleChannelUpstreamHandler;
import org.stamina.Server;
import org.stamina.model.Player;
import org.stamina.net.packet.Packet;

public final class ConnectionHandler extends SimpleChannelUpstreamHandler  {

	@Override
	public void channelClosed(ChannelHandlerContext ctx, ChannelStateEvent e) {
		final Session session = (Session) ctx.getAttachment();
		final Player player = session.getPlayer();
		if (player != null &amp;&amp; !player.destroyed() &amp;&amp; player.initialized()) {
			player.destroy(false);
		}
	}

	@Override
	public void channelConnected(ChannelHandlerContext ctx, ChannelStateEvent e) {
		final Channel chan = e.getChannel();
		final Session session = new Session(chan);
		session.setPlayer(new Player(session));
		ctx.setAttachment(session);
		Server.getServer().registerSession(session);
	}

	@Override
	public void channelDisconnected(ChannelHandlerContext ctx,
			ChannelStateEvent e) {
	}

	@Override
	public void exceptionCaught(ChannelHandlerContext ctx, ExceptionEvent e) {

	}

	@Override
	public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) {
		if(ctx.getAttachment() instanceof Session) {
			final Session session = (Session) ctx.getAttachment();
			final Channel channel = e.getChannel();
			if (!channel.isConnected()) {
				return;
			}
			session.handlePacket((Packet) e.getMessage());
		}
	}
}</code></pre>
<p>while spam clicking wield item.</p>
<p><code>     [java] [2012-07-21 18:39:28] [New I/O  worker #1] [Decoder]Packet client-&gt;server delay: 99ms
     [java] [2012-07-21 18:39:29] [New I/O  worker #1] [Decoder]Packet client-&gt;server delay: 317ms
     [java] [2012-07-21 18:39:29] [New I/O  worker #1] [Decoder]Packet client-&gt;server delay: 119ms
     [java] [2012-07-21 18:39:29] [New I/O  worker #1] [Decoder]Packet client-&gt;server delay: 20ms
     [java] [2012-07-21 18:39:29] [New I/O  worker #1] [Decoder]Packet client-&gt;server delay: 18ms
     [java] [2012-07-21 18:39:29] [New I/O  worker #1] [Decoder]Packet client-&gt;server delay: 331ms
     [java] [2012-07-21 18:39:29] [New I/O  worker #1] [Decoder]Packet client-&gt;server delay: 247ms
     [java] [2012-07-21 18:39:29] [New I/O  worker #1] [Decoder]Packet client-&gt;server delay: 146ms
     [java] [2012-07-21 18:39:30] [New I/O  worker #1] [Decoder]Packet client-&gt;server delay: 368ms
     [java] [2012-07-21 18:39:30] [New I/O  worker #1] [Decoder]Packet client-&gt;server delay: 269ms
     [java] [2012-07-21 18:39:30] [New I/O  worker #1] [Decoder]Packet client-&gt;server delay: 188ms
     [java] [2012-07-21 18:39:30] [New I/O  worker #1] [Decoder]Packet client-&gt;server delay: 17ms
</code><br>
Idle, my ping pong packet only being sent:</p>
<pre><code class="lang-auto">     [java] [2012-07-21 18:40:58] [New I/O  worker #1] [Decoder]Packet client-&gt;server delay: 21ms
     [java] [2012-07-21 18:41:00] [New I/O  worker #1] [Decoder]Packet client-&gt;server delay: 21ms
     [java] [2012-07-21 18:41:03] [New I/O  worker #1] [Decoder]Packet client-&gt;server delay: 20ms
     [java] [2012-07-21 18:41:05] [New I/O  worker #1] [Decoder]Packet client-&gt;server delay: 21ms
     [java] [2012-07-21 18:41:08] [New I/O  worker #1] [Decoder]Packet client-&gt;server delay: 21ms
     [java] [2012-07-21 18:41:10] [New I/O  worker #1] [Decoder]Packet client-&gt;server delay: 22ms
     [java] [2012-07-21 18:41:12] [New I/O  worker #1] [Decoder]Packet client-&gt;server delay: 20ms
     [java] [2012-07-21 18:41:15] [New I/O  worker #1] [Decoder]Packet client-&gt;server delay: 21ms
     [java] [2012-07-21 18:41:17] [New I/O  worker #1] [Decoder]Packet client-&gt;server delay: 21ms
     [java] [2012-07-21 18:41:20] [New I/O  worker #1] [Decoder]Packet client-&gt;server delay: 21ms
     [java] [2012-07-21 18:41:22] [New I/O  worker #1] [Decoder]Packet client-&gt;server delay: 20ms
     [java] [2012-07-21 18:41:24] [New I/O  worker #1] [Decoder]Packet client-&gt;server delay: 21ms
     [java] [2012-07-21 18:41:27] [New I/O  worker #1] [Decoder]Packet client-&gt;server delay: 20ms
     [java] [2012-07-21 18:41:29] [New I/O  worker #1] [Decoder]Packet client-&gt;server delay: 19ms
     [java] [2012-07-21 18:41:32] [New I/O  worker #1] [Decoder]Packet client-&gt;server delay: 20ms</code></pre>
<p>Both, server and client were ran on same machine.<br>
I can see that there’s definetly something blocking the pipeline from receiving new packets while old is still being handled. I’ve tried almost everything and the delay is still the same.</p>
<p>Any hints towards fixing it is appreciated. If you want more information feel free to ask, or even see the source of the server via TeamView.</p>
      </div>

      <meta itemprop='headline' content='Netty latency problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/T41.html'><span itemprop='name'>T41</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-07-22T19:40:04Z'>
            <time itemprop='dateModified' datetime='2016-08-03T17:20:33Z' class='post-time'>
              August 3, 2016,  5:20pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>post the problem and source here</p>
      </div>

      <meta itemprop='headline' content='Netty latency problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Nothing1.html'><span itemprop='name'>Nothing1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-07-22T19:49:57Z'>
            <time itemprop='dateModified' datetime='2016-08-03T17:20:34Z' class='post-time'>
              August 3, 2016,  5:20pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Done.</p>
      </div>

      <meta itemprop='headline' content='Netty latency problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/T41.html'><span itemprop='name'>T41</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-07-22T21:19:02Z'>
            <time itemprop='dateModified' datetime='2016-08-03T17:20:37Z' class='post-time'>
              August 3, 2016,  5:20pm
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>for the thread pool: what is the keepalive and size of the pool?</p>
      </div>

      <meta itemprop='headline' content='Netty latency problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Nothing1.html'><span itemprop='name'>Nothing1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-07-23T06:10:42Z'>
            <time itemprop='dateModified' datetime='2016-08-03T17:21:07Z' class='post-time'>
              August 3, 2016,  5:21pm
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="4" data-topic="450769">
<div class="title">
<div class="quote-controls"></div>
 t4:</div>
<blockquote>
<p>for the thread pool: what is the keepalive and size of the pool?</p>
</blockquote>
</aside>
<p>It’s a cachedThreadPool, which means it creates new threads when ever it needs more, and re-uses old threads when they are available. That keepAlive is mainly used for HTTP servers iirc, I just played around with the options and forgot it there.</p>
      </div>

      <meta itemprop='headline' content='Netty latency problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/T41.html'><span itemprop='name'>T41</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-07-23T12:25:29Z'>
            <time itemprop='dateModified' datetime='2016-08-03T17:21:16Z' class='post-time'>
              August 3, 2016,  5:21pm
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>uh, keepalive tells how long the thread should remain marked as active after finishing…</p>
      </div>

      <meta itemprop='headline' content='Netty latency problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Nothing1.html'><span itemprop='name'>Nothing1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-07-23T12:30:35Z'>
            <time itemprop='dateModified' datetime='2016-08-03T17:21:16Z' class='post-time'>
              August 3, 2016,  5:21pm
            </time>
        <span itemprop='position'>#7</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote quote-modified" data-post="6" data-topic="450769">
<div class="title">
<div class="quote-controls"></div>
 t4:</div>
<blockquote>
<p>uh, keepalive tells how long the thread should remain marked as active after finishing…</p>
</blockquote>
</aside>
<p>Ah, thanks for clarification.</p>
<p>This problem still occurs, any help is appreciated.</p>
      </div>

      <meta itemprop='headline' content='Netty latency problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Rodgerwilco.html'><span itemprop='name'>Rodgerwilco</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-07-23T23:50:14Z'>
            <time itemprop='dateModified' datetime='2016-08-03T17:21:56Z' class='post-time'>
              August 3, 2016,  5:21pm
            </time>
        <span itemprop='position'>#8</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>This is the only thing you changed in your server? Lets look at how events are handled?</p>
      </div>

      <meta itemprop='headline' content='Netty latency problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Nothing1.html'><span itemprop='name'>Nothing1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-07-24T07:44:23Z'>
            <time itemprop='dateModified' datetime='2016-08-03T17:22:18Z' class='post-time'>
              August 3, 2016,  5:22pm
            </time>
        <span itemprop='position'>#9</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="8" data-topic="450769">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/rodgerwilco/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> Rodgerwilco:</div>
<blockquote>
<p>This is the only thing you changed in your server? Lets look at how events are handled?</p>
</blockquote>
</aside>
<p>No, it’s not the only thing I’ve changed. The server is multithreaded, you can check it out via teamviewer, I talked to super_ already and he saw nothing what could be wrong with the server. As the packets get seem to get stuck in the pipeline and not in packethandling.</p>
      </div>

      <meta itemprop='headline' content='Netty latency problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/slavemaster.html'><span itemprop='name'>slavemaster</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-07-24T13:05:28Z'>
            <time itemprop='dateModified' datetime='2016-08-03T17:22:25Z' class='post-time'>
              August 3, 2016,  5:22pm
            </time>
        <span itemprop='position'>#10</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote="-Nothing, post:9, topic:450769"][quote author=Rodgerwilco link=topic=553649.msg4057238#msg4057238 date=1343087414]<br>
This is the only thing you changed in your server? Lets look at how events are handled?<br>
[/quote]<br>
No, it’s not the only thing I’ve changed. The server is multithreaded, you can check it out via teamviewer, I talked to super_ already and he saw nothing what could be wrong with the server. As the packets get seem to get stuck in the pipeline and not in packethandling.[/quote]<br>
Don’t put words in my mouth <img src="../../images/emoji/twitter/winkae52.png?v=5" title=":wink:" class="emoji" alt=":wink:"><br>
I said there is nothing immediately obvious I could tell was wrong, but that’s vastly different from nothing possibly being wrong.</p>
      </div>

      <meta itemprop='headline' content='Netty latency problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Nothing1.html'><span itemprop='name'>Nothing1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-07-24T13:46:50Z'>
            <time itemprop='dateModified' datetime='2016-08-03T17:22:26Z' class='post-time'>
              August 3, 2016,  5:22pm
            </time>
        <span itemprop='position'>#11</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“veer, post:10, topic:450769”][quote author=-Nothing link=topic=553649.msg4057545#msg4057545 date=1343115863]</p>
<aside class="quote">
<blockquote>
<p>This is the only thing you changed in your server? Lets look at how events are handled?</p>
</blockquote>
</aside>
<p>No, it’s not the only thing I’ve changed. The server is multithreaded, you can check it out via teamviewer, I talked to super_ already and he saw nothing what could be wrong with the server. As the packets get seem to get stuck in the pipeline and not in packethandling.<br>
[/quote]<br>
Don’t put words in my mouth <img src="../../images/emoji/twitter/winkae52.png?v=5" title=":wink:" class="emoji" alt=":wink:"><br>
I said there is nothing immediately obvious I could tell was wrong, but that’s vastly different from nothing possibly being wrong.[/quote]<br>
Maybe I worded it bit wrong.</p>
      </div>

      <meta itemprop='headline' content='Netty latency problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/CodeForFame.html'><span itemprop='name'>CodeForFame</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-07-24T19:39:54Z'>
            <time itemprop='dateModified' datetime='2016-08-03T17:24:45Z' class='post-time'>
              August 3, 2016,  5:24pm
            </time>
        <span itemprop='position'>#12</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Are you using the latest version of Netty?</p>
      </div>

      <meta itemprop='headline' content='Netty latency problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/sinisoul.html'><span itemprop='name'>sinisoul</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-07-24T21:19:26Z'>
            <time itemprop='dateModified' datetime='2016-08-03T17:24:49Z' class='post-time'>
              August 3, 2016,  5:24pm
            </time>
        <span itemprop='position'>#13</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I don’t see this being a netty problem. Broaden you’re idea of what could be wrong.</p>
      </div>

      <meta itemprop='headline' content='Netty latency problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/T41.html'><span itemprop='name'>T41</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-07-25T03:23:13Z'>
            <time itemprop='dateModified' datetime='2016-08-03T17:25:02Z' class='post-time'>
              August 3, 2016,  5:25pm
            </time>
        <span itemprop='position'>#14</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>i don’t see anything obvious…</p>
      </div>

      <meta itemprop='headline' content='Netty latency problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Nothing1.html'><span itemprop='name'>Nothing1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-07-25T11:26:19Z'>
            <time itemprop='dateModified' datetime='2016-08-03T17:25:23Z' class='post-time'>
              August 3, 2016,  5:25pm
            </time>
        <span itemprop='position'>#15</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="12" data-topic="450769">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forum.moparisthebest.com/codeforfame/40/3743_1.png" class="avatar"> CodeForFame:</div>
<blockquote>
<p>Are you using the latest version of Netty?</p>
</blockquote>
</aside>
<p>Yes, I’ve tried multiple versions, including the latest version.</p>
<p>So I guess it could be the packethandling blocking the thread… I have no idea what to look for though.<br>
I took a thread dump with VisualVM while walking around, I’m not so good at analyzing it though.</p>
<pre><code class="lang-auto">2012-07-25 16:24:20
Full thread dump Java HotSpot(TM) Client VM (20.7-b02 mixed mode, sharing):

"RMI TCP Connection(idle)" daemon prio=6 tid=0x04d3b400 nid=0x96c waiting on condition [0x081ff000]
   java.lang.Thread.State: TIMED_WAITING (parking)
	at sun.misc.Unsafe.park(Native Method)
	- parking to wait for  &lt;0x243d3578&gt; (a java.util.concurrent.SynchronousQueue$TransferStack)
	at java.util.concurrent.locks.LockSupport.parkNanos(Unknown Source)
	at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(Unknown Source)
	at java.util.concurrent.SynchronousQueue$TransferStack.transfer(Unknown Source)
	at java.util.concurrent.SynchronousQueue.poll(Unknown Source)
	at java.util.concurrent.ThreadPoolExecutor.getTask(Unknown Source)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
	at java.lang.Thread.run(Unknown Source)

   Locked ownable synchronizers:
	- None

"RMI TCP Connection(19)-91.157.199.113" daemon prio=6 tid=0x04d39000 nid=0x1270 runnable [0x081af000]
   java.lang.Thread.State: RUNNABLE
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.read(Unknown Source)
	at java.io.BufferedInputStream.fill(Unknown Source)
	at java.io.BufferedInputStream.read(Unknown Source)
	- locked &lt;0x1a3e2038&gt; (a java.io.BufferedInputStream)
	at java.io.FilterInputStream.read(Unknown Source)
	at sun.rmi.transport.tcp.TCPTransport.handleMessages(Unknown Source)
	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(Unknown Source)
	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(Unknown Source)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
	at java.lang.Thread.run(Unknown Source)

   Locked ownable synchronizers:
	- &lt;0x249469e0&gt; (a java.util.concurrent.locks.ReentrantLock$NonfairSync)

"*** Profiler Agent Special Execution Thread 6" daemon prio=6 tid=0x04d3a800 nid=0x1260 in Object.wait() [0x083df000]
   java.lang.Thread.State: WAITING (on object monitor)
	at java.lang.Object.wait(Native Method)
	- waiting on &lt;0x247fae28&gt; (a java.lang.Object)
	at java.lang.Object.wait(Object.java:485)
	at org.netbeans.lib.profiler.server.ProfilerServer$SeparateCmdExecutionThread.run(ProfilerServer.java:289)
	- locked &lt;0x247fae28&gt; (a java.lang.Object)

   Locked ownable synchronizers:
	- None

"*** JFluid Monitor thread ***" daemon prio=10 tid=0x04d39400 nid=0x1474 waiting on condition [0x0838f000]
   java.lang.Thread.State: TIMED_WAITING (sleeping)
	at java.lang.Thread.sleep(Native Method)
	at org.netbeans.lib.profiler.server.Monitors$SurvGenAndThreadsMonitor.run(Monitors.java:186)

   Locked ownable synchronizers:
	- None

"*** Profiler Agent Communication Thread" daemon prio=10 tid=0x04d3bc00 nid=0x13c4 runnable [0x0833f000]
   java.lang.Thread.State: RUNNABLE
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.read(Unknown Source)
	at java.net.SocketInputStream.read(Unknown Source)
	at java.io.ObjectInputStream$PeekInputStream.peek(Unknown Source)
	at java.io.ObjectInputStream$BlockDataInputStream.readBlockHeader(Unknown Source)
	at java.io.ObjectInputStream$BlockDataInputStream.refill(Unknown Source)
	at java.io.ObjectInputStream$BlockDataInputStream.read(Unknown Source)
	at java.io.ObjectInputStream.read(Unknown Source)
	at org.netbeans.lib.profiler.wireprotocol.WireIO.receiveCommandOrResponse(WireIO.java:88)
	at org.netbeans.lib.profiler.server.ProfilerServer.listenToClient(ProfilerServer.java:1704)
	at org.netbeans.lib.profiler.server.ProfilerServer.run(ProfilerServer.java:685)

   Locked ownable synchronizers:
	- None

"New I/O  worker #1" prio=6 tid=0x04d38400 nid=0x140c runnable [0x0829f000]
   java.lang.Thread.State: RUNNABLE
	at sun.nio.ch.WindowsSelectorImpl$SubSelector.poll0(Native Method)
	at sun.nio.ch.WindowsSelectorImpl$SubSelector.poll(Unknown Source)
	at sun.nio.ch.WindowsSelectorImpl$SubSelector.access$400(Unknown Source)
	at sun.nio.ch.WindowsSelectorImpl.doSelect(Unknown Source)
	at sun.nio.ch.SelectorImpl.lockAndDoSelect(Unknown Source)
	- locked &lt;0x24728e00&gt; (a sun.nio.ch.Util$2)
	- locked &lt;0x24728e10&gt; (a java.util.Collections$UnmodifiableSet)
	- locked &lt;0x24728d88&gt; (a sun.nio.ch.WindowsSelectorImpl)
	at sun.nio.ch.SelectorImpl.select(Unknown Source)
	at org.jboss.netty.channel.socket.nio.SelectorUtil.select(SelectorUtil.java:52)
	at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:209)
	at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:35)
	at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:102)
	at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
	at java.lang.Thread.run(Unknown Source)

   Locked ownable synchronizers:
	- &lt;0x24746d08&gt; (a java.util.concurrent.locks.ReentrantLock$NonfairSync)

"DestroyJavaVM" prio=6 tid=0x04d39c00 nid=0x728 waiting on condition [0x00000000]
   java.lang.Thread.State: RUNNABLE

   Locked ownable synchronizers:
	- None

"New I/O server boss #1 ([id: 0x00baa466, /0.0.0.0:42227])" prio=6 tid=0x03f4e400 nid=0x1230 runnable [0x0815f000]
   java.lang.Thread.State: RUNNABLE
	at sun.nio.ch.WindowsSelectorImpl$SubSelector.poll0(Native Method)
	at sun.nio.ch.WindowsSelectorImpl$SubSelector.poll(Unknown Source)
	at sun.nio.ch.WindowsSelectorImpl$SubSelector.access$400(Unknown Source)
	at sun.nio.ch.WindowsSelectorImpl.doSelect(Unknown Source)
	at sun.nio.ch.SelectorImpl.lockAndDoSelect(Unknown Source)
	- locked &lt;0x2472c088&gt; (a sun.nio.ch.Util$2)
	- locked &lt;0x2472c098&gt; (a java.util.Collections$UnmodifiableSet)
	- locked &lt;0x2472c010&gt; (a sun.nio.ch.WindowsSelectorImpl)
	at sun.nio.ch.SelectorImpl.select(Unknown Source)
	at org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink$Boss.run(NioServerSocketPipelineSink.java:227)
	at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:102)
	at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
	at java.lang.Thread.run(Unknown Source)

   Locked ownable synchronizers:
	- &lt;0x24746fe8&gt; (a java.util.concurrent.locks.ReentrantLock$NonfairSync)
	- &lt;0x24762620&gt; (a java.util.concurrent.locks.ReentrantLock$NonfairSync)

"SessionProcessor-0" prio=6 tid=0x05d05400 nid=0xfec runnable [0x0810f000]
   java.lang.Thread.State: TIMED_WAITING (parking)
	at sun.misc.Unsafe.park(Native Method)
	- parking to wait for  &lt;0x2472c1b0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
	at java.util.concurrent.locks.LockSupport.parkNanos(Unknown Source)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(Unknown Source)
	at java.util.concurrent.DelayQueue.take(Unknown Source)
	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(Unknown Source)
	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(Unknown Source)
	at java.util.concurrent.ThreadPoolExecutor.getTask(Unknown Source)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
	at java.lang.Thread.run(Unknown Source)

   Locked ownable synchronizers:
	- None

"LoginProcessor-0" prio=6 tid=0x04e62400 nid=0x1318 runnable [0x080bf000]
   java.lang.Thread.State: TIMED_WAITING (parking)
	at sun.misc.Unsafe.park(Native Method)
	- parking to wait for  &lt;0x2472c2d0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
	at java.util.concurrent.locks.LockSupport.parkNanos(Unknown Source)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(Unknown Source)
	at java.util.concurrent.DelayQueue.take(Unknown Source)
	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(Unknown Source)
	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(Unknown Source)
	at java.util.concurrent.ThreadPoolExecutor.getTask(Unknown Source)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
	at java.lang.Thread.run(Unknown Source)

   Locked ownable synchronizers:
	- None

"GameProcessor-0" prio=6 tid=0x05d06400 nid=0xeec runnable [0x0806f000]
   java.lang.Thread.State: TIMED_WAITING (parking)
	at sun.misc.Unsafe.park(Native Method)
	- parking to wait for  &lt;0x2472c3f0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
	at java.util.concurrent.locks.LockSupport.parkNanos(Unknown Source)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(Unknown Source)
	at java.util.concurrent.DelayQueue.take(Unknown Source)
	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(Unknown Source)
	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(Unknown Source)
	at java.util.concurrent.ThreadPoolExecutor.getTask(Unknown Source)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
	at java.lang.Thread.run(Unknown Source)

   Locked ownable synchronizers:
	- None

"JMX server connection timeout 14" daemon prio=6 tid=0x03b3ac00 nid=0x420 in Object.wait() [0x0801f000]
   java.lang.Thread.State: TIMED_WAITING (on object monitor)
	at java.lang.Object.wait(Native Method)
	- waiting on &lt;0x24429370&gt; (a [I)
	at com.sun.jmx.remote.internal.ServerCommunicatorAdmin$Timeout.run(Unknown Source)
	- locked &lt;0x24429370&gt; (a [I)
	at java.lang.Thread.run(Unknown Source)

   Locked ownable synchronizers:
	- None

"RMI Scheduler(0)" daemon prio=6 tid=0x03b3a400 nid=0x1048 waiting on condition [0x07fcf000]
   java.lang.Thread.State: TIMED_WAITING (parking)
	at sun.misc.Unsafe.park(Native Method)
	- parking to wait for  &lt;0x243d59e0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
	at java.util.concurrent.locks.LockSupport.parkNanos(Unknown Source)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(Unknown Source)
	at java.util.concurrent.DelayQueue.take(Unknown Source)
	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(Unknown Source)
	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(Unknown Source)
	at java.util.concurrent.ThreadPoolExecutor.getTask(Unknown Source)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
	at java.lang.Thread.run(Unknown Source)

   Locked ownable synchronizers:
	- None

"RMI TCP Accept-0" daemon prio=6 tid=0x069d9800 nid=0x330 runnable [0x07f2f000]
   java.lang.Thread.State: RUNNABLE
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.PlainSocketImpl.accept(Unknown Source)
	- locked &lt;0x23fe4758&gt; (a java.net.SocksSocketImpl)
	at java.net.ServerSocket.implAccept(Unknown Source)
	at java.net.ServerSocket.accept(Unknown Source)
	at sun.management.jmxremote.LocalRMIServerSocketFactory$1.accept(Unknown Source)
	at sun.rmi.transport.tcp.TCPTransport$AcceptLoop.executeAcceptLoop(Unknown Source)
	at sun.rmi.transport.tcp.TCPTransport$AcceptLoop.run(Unknown Source)
	at java.lang.Thread.run(Unknown Source)

   Locked ownable synchronizers:
	- None

"Thread-2" prio=6 tid=0x03f25400 nid=0x928 in Object.wait() [0x0413f000]
   java.lang.Thread.State: WAITING (on object monitor)
	at java.lang.Object.wait(Native Method)
	- waiting on &lt;0x1ed99038&gt; (a snaq.util.EventDispatcher)
	at java.lang.Object.wait(Object.java:485)
	at snaq.util.EventDispatcher.run(EventDispatcher.java:82)
	- locked &lt;0x1ed99038&gt; (a snaq.util.EventDispatcher)

   Locked ownable synchronizers:
	- None

"Thread-1" prio=6 tid=0x03f2dc00 nid=0x139c in Object.wait() [0x040ef000]
   java.lang.Thread.State: WAITING (on object monitor)
	at java.lang.Object.wait(Native Method)
	- waiting on &lt;0x1ed990b8&gt; (a snaq.util.EventDispatcher)
	at java.lang.Object.wait(Object.java:485)
	at snaq.util.EventDispatcher.run(EventDispatcher.java:82)
	- locked &lt;0x1ed990b8&gt; (a snaq.util.EventDispatcher)

   Locked ownable synchronizers:
	- None

"Low Memory Detector" daemon prio=6 tid=0x03adb800 nid=0xaa8 runnable [0x00000000]
   java.lang.Thread.State: RUNNABLE

   Locked ownable synchronizers:
	- None

"C1 CompilerThread0" daemon prio=10 tid=0x03ad7800 nid=0x368 waiting on condition [0x00000000]
   java.lang.Thread.State: RUNNABLE

   Locked ownable synchronizers:
	- None

"Attach Listener" daemon prio=10 tid=0x03ad6400 nid=0x67c waiting on condition [0x00000000]
   java.lang.Thread.State: RUNNABLE

   Locked ownable synchronizers:
	- None

"Signal Dispatcher" daemon prio=10 tid=0x03ad5400 nid=0x1614 runnable [0x00000000]
   java.lang.Thread.State: RUNNABLE

   Locked ownable synchronizers:
	- None

"Finalizer" daemon prio=8 tid=0x03acc000 nid=0x1434 in Object.wait() [0x03d0f000]
   java.lang.Thread.State: WAITING (on object monitor)
	at java.lang.Object.wait(Native Method)
	- waiting on &lt;0x1ed99368&gt; (a java.lang.ref.ReferenceQueue$Lock)
	at java.lang.ref.ReferenceQueue.remove(Unknown Source)
	- locked &lt;0x1ed99368&gt; (a java.lang.ref.ReferenceQueue$Lock)
	at java.lang.ref.ReferenceQueue.remove(Unknown Source)
	at java.lang.ref.Finalizer$FinalizerThread.run(Unknown Source)

   Locked ownable synchronizers:
	- None

"Reference Handler" daemon prio=10 tid=0x03aca800 nid=0xa7c in Object.wait() [0x03cbf000]
   java.lang.Thread.State: WAITING (on object monitor)
	at java.lang.Object.wait(Native Method)
	- waiting on &lt;0x1ed993f8&gt; (a java.lang.ref.Reference$Lock)
	at java.lang.Object.wait(Object.java:485)
	at java.lang.ref.Reference$ReferenceHandler.run(Unknown Source)
	- locked &lt;0x1ed993f8&gt; (a java.lang.ref.Reference$Lock)

   Locked ownable synchronizers:
	- None

"VM Thread" prio=10 tid=0x03a8e400 nid=0x978 runnable 

"VM Periodic Task Thread" prio=10 tid=0x03afc800 nid=0x890 waiting on condition 

JNI global references: 12844
</code></pre>
      </div>

      <meta itemprop='headline' content='Netty latency problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/The_Enforcer.html'><span itemprop='name'>The_Enforcer</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-07-25T14:46:32Z'>
            <time itemprop='dateModified' datetime='2016-08-03T17:25:31Z' class='post-time'>
              August 3, 2016,  5:25pm
            </time>
        <span itemprop='position'>#16</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>PM me, I’ll help.</p>
      </div>

      <meta itemprop='headline' content='Netty latency problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Not_a_bot.html'><span itemprop='name'>Not_a_bot</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-07-25T19:54:30Z'>
            <time itemprop='dateModified' datetime='2016-08-03T17:26:03Z' class='post-time'>
              August 3, 2016,  5:26pm
            </time>
        <span itemprop='position'>#17</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>The topic is misleading, you don’t know the actual problem and assume it’s a latency problem caused by Netty.</p>
<p>After quickly skimming your VisualVM logs (if it’s not obvious), it’s mainly showing the status of the threads that are currently allocated and their states (some from Netty’s internal threadpool, another from Snaq (which is used for pooling SQL connections AFAIK)). It again seems too vague to gather much information from, you would need to post up your transport layer (packet handling), if I went on assumptions I personally think you’ve intentionally queued or delayed processing for some sort of defense mechanism to handle flooding (like old RSCD did).</p>
      </div>

      <meta itemprop='headline' content='Netty latency problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Nothing1.html'><span itemprop='name'>Nothing1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-07-25T22:11:55Z'>
            <time itemprop='dateModified' datetime='2016-08-03T17:26:16Z' class='post-time'>
              August 3, 2016,  5:26pm
            </time>
        <span itemprop='position'>#18</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Not_a_bot, post:17, topic:450769”]The topic is misleading, you don’t know the actual problem and assume it’s a latency problem caused by Netty.</p>
<p>After quickly skimming your VisualVM logs (if it’s not obvious), it’s mainly showing the status of the threads that are currently allocated and their states (some from Netty’s internal threadpool, another from Snaq (which is used for pooling SQL connections AFAIK)). It again seems too vague to gather much information from, you would need to post up your transport layer (packet handling), if I went on assumptions I personally think you’ve intentionally queued or delayed processing for some sort of defense mechanism to handle flooding (like old RSCD did).[/quote]<br>
There’s nothing intentionally added in which slows down the execution of packets. There’s a limit of 60 packets that can be received per pulse though and the pulse is every 10ms so I doubt it’s that.</p>
<p>There’s a reason why I think it’s netty, I’ve tried to fix it several times, I’ve rewritten networking and the way packets get handled entirely about 3 times now, each attempt has been totally different.</p>
      </div>

      <meta itemprop='headline' content='Netty latency problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/imthenull.html'><span itemprop='name'>imthenull</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-07-25T22:19:03Z'>
            <time itemprop='dateModified' datetime='2016-08-03T17:26:17Z' class='post-time'>
              August 3, 2016,  5:26pm
            </time>
        <span itemprop='position'>#19</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>sounds (and looks) like you ripped Elysium’s source. lol</p>
      </div>

      <meta itemprop='headline' content='Netty latency problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/ExtremeX-Scape.html'><span itemprop='name'>ExtremeX-Scape</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-07-25T22:21:07Z'>
            <time itemprop='dateModified' datetime='2016-08-03T17:26:17Z' class='post-time'>
              August 3, 2016,  5:26pm
            </time>
        <span itemprop='position'>#20</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote quote-modified" data-post="19" data-topic="450769">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forum.moparisthebest.com/imthenull/40/1273_1.png" class="avatar"> imthenull:</div>
<blockquote>
<p>sounds (and looks) like you ripped Elysium’s source. lol</p>
</blockquote>
</aside>
<p>you’re retarded. no.</p>
      </div>

      <meta itemprop='headline' content='Netty latency problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="2" />
        </div>


  </div>

  <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
      <span itemprop='name'><b><a rel="next" itemprop="url" href="4507694658.html?page=2">next page →</a></b></span>
  </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/netty-latency-problem/450769 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Aug 2019 00:49:08 GMT -->
</html>
