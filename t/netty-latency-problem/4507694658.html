<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/netty-latency-problem/450769?page=2 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Aug 2019 00:55:03 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Netty latency problem - General Programming - moparisthebest.com</title>
    <meta name="description" content="I thought that there&amp;#39;s some Java experts around that don&amp;#39;t check RSC boards so, I would appreciate if someone helped me out on this problem, as I&amp;#39;ve tried many different things and nothing seems to help. 

For example, w&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="4507694658.html?page=2" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Netty latency problem&#39;" href="450769.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/netty-latency-problem/450769?page=2" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/netty-latency-problem/450769?page=2" />
<meta property="og:title" content="Netty latency problem" />
<meta name="twitter:title" content="Netty latency problem" />
<meta property="og:description" content="[quote=“AtomicInt_, post:20, topic:450769”][quote author=imthenull link=topic=553649.msg4058900#msg4058900 date=1343254743]  sounds (and looks) like you ripped Elysium’s source. lol  [/quote]  you’re retarded. no.[/quote]  How am i retarded, would you like me to supply evidence towards my theory?" />
<meta name="twitter:description" content="[quote=“AtomicInt_, post:20, topic:450769”][quote author=imthenull link=topic=553649.msg4058900#msg4058900 date=1343254743]  sounds (and looks) like you ripped Elysium’s source. lol  [/quote]  you’re retarded. no.[/quote]  How am i retarded, would you like me to supply evidence towards my theory?" />
<meta property="article:published_time" content="2012-07-25T22:25:14+00:00" />
<meta property="og:ignore_canonical" content="true" />

      <link rel="prev" href="450769.html">


    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="450769.html">Netty latency problem</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/general-programming.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>General Programming</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/imthenull.html'><span itemprop='name'>imthenull</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-07-25T22:25:14Z'>
            <time itemprop='dateModified' datetime='2016-08-03T17:26:18Z' class='post-time'>
              August 3, 2016,  5:26pm
            </time>
        <span itemprop='position'>#21</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“AtomicInt_, post:20, topic:450769”][quote author=imthenull link=topic=553649.msg4058900#msg4058900 date=1343254743]<br>
sounds (and looks) like you ripped Elysium’s source. lol<br>
[/quote]</p>
<p>you’re retarded. no.[/quote]<br>
How am i retarded, would you like me to supply evidence towards my theory?</p>
      </div>

      <meta itemprop='headline' content='Netty latency problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Rodgerwilco.html'><span itemprop='name'>Rodgerwilco</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-07-25T22:33:04Z'>
            <time itemprop='dateModified' datetime='2016-08-03T17:26:18Z' class='post-time'>
              August 3, 2016,  5:26pm
            </time>
        <span itemprop='position'>#22</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“AtomicInt_, post:20, topic:450769”][quote author=imthenull link=topic=553649.msg4058900#msg4058900 date=1343254743]<br>
sounds (and looks) like you ripped Elysium’s source. lol<br>
[/quote]</p>
<p>you’re retarded. no.[/quote]</p>
<p>gtfo you pos. imthenull knows more than you. Nothing, provide your event handling when you find me on msn.</p>
      </div>

      <meta itemprop='headline' content='Netty latency problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/imthenull.html'><span itemprop='name'>imthenull</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-07-25T22:38:34Z'>
            <time itemprop='dateModified' datetime='2016-08-03T17:26:19Z' class='post-time'>
              August 3, 2016,  5:26pm
            </time>
        <span itemprop='position'>#23</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>just for reference…</p>
<p>[quote="-Nothing, post:1, topic:450769"][code=java]package <a href="http://org.stamina.net/" rel="nofollow noopener">org.stamina.net</a>;</p>
<p>import org.jboss.netty.channel.Channel;<br>
import org.jboss.netty.channel.ChannelHandlerContext;<br>
import org.jboss.netty.channel.ChannelStateEvent;<br>
import org.jboss.netty.channel.ExceptionEvent;<br>
import org.jboss.netty.channel.MessageEvent;<br>
import org.jboss.netty.channel.SimpleChannelUpstreamHandler;<br>
import org.stamina.Server;<br>
import org.stamina.model.Player;<br>
import org.stamina.net.packet.Packet;</p>
<p>public final class ConnectionHandler extends SimpleChannelUpstreamHandler  {</p>
<pre><code>    @Override
    public void channelClosed(ChannelHandlerContext ctx, ChannelStateEvent e) {
            final Session session = (Session) ctx.getAttachment();
            final Player player = session.getPlayer();
            if (player != null &amp;&amp; !player.destroyed() &amp;&amp; player.initialized()) {
                    player.destroy(false);
            }
    }

    @Override
    public void channelConnected(ChannelHandlerContext ctx, ChannelStateEvent e) {
            final Channel chan = e.getChannel();
            final Session session = new Session(chan);
            session.setPlayer(new Player(session));
            ctx.setAttachment(session);
            Server.getServer().registerSession(session);
    }

    @Override
    public void channelDisconnected(ChannelHandlerContext ctx,
                    ChannelStateEvent e) {
    }

    @Override
    public void exceptionCaught(ChannelHandlerContext ctx, ExceptionEvent e) {

    }

    @Override
    public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) {
            if(ctx.getAttachment() instanceof Session) {
                    final Session session = (Session) ctx.getAttachment();
                    final Channel channel = e.getChannel();
                    if (!channel.isConnected()) {
                            return;
                    }
                    session.handlePacket((Packet) e.getMessage());
            }
    }
</code></pre>
<p>}<br>
[/code][/quote]</p>
<p>[quote=“Github”][code=java]package org.moparscape.elysium.net.codec;</p>
<p>import org.jboss.netty.channel.*;<br>
import org.moparscape.elysium.Server;<br>
import org.moparscape.elysium.net.Session;</p>
<p>/**</p>
<ul>
<li>
<p>Created by IntelliJ IDEA.</p>
</li>
<li>
</li>
<li>
<p><span class="mention">@author</span> lothy<br>
*/<br>
public final class ElysiumConnectionHandler extends SimpleChannelUpstreamHandler {</p>
<p>private static final Server server = Server.getInstance();</p>
<p><a class="mention" href="../../u/override.html">@Override</a><br>
public void channelConnected(ChannelHandlerContext ctx, ChannelStateEvent e) {<br>
Channel chan = e.getChannel();<br>
Session session = new Session(chan);<br>
ctx.setAttachment(session);<br>
server.registerSession(session);<br>
System.out.println(“Channel connected”);<br>
}</p>
<p><a class="mention" href="../../u/override.html">@Override</a><br>
public void channelDisconnected(ChannelHandlerContext ctx, ChannelStateEvent e) {<br>
Session session = (Session) ctx.getAttachment();<br>
System.out.println(“Channel disconnected”);<br>
}</p>
<p><a class="mention" href="../../u/override.html">@Override</a><br>
public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) {<br>
Session session = (Session) ctx.getAttachment();<br>
session.messageReceived((Message) e.getMessage());<br>
}</p>
<p><a class="mention" href="../../u/override.html">@Override</a><br>
public void exceptionCaught(ChannelHandlerContext ctx, ExceptionEvent e) {<br>
Session session = (Session) ctx.getAttachment();<br>
}<br>
}<br>
[/code][/quote]</p>
</li>
</ul>
<aside class="quote quote-modified" data-post="18" data-topic="450769">
<div class="title">
<div class="quote-controls"></div>
 -Nothing:</div>
<blockquote>
<p>There’s a limit of 60 packets that can be received per pulse though and the pulse is every 10ms so I doubt it’s that.</p>
</blockquote>
</aside>
<p>[quote=“Github”][code=java]</p>
<pre><code>@SuppressWarnings("unchecked")
public boolean pulse() {
    if (isRemoving()) {
        return false;
    }

    Message message;
    int processed = 0;

    // Process all of the messages that have been received from this player.
    // Process the entire queue up to a maximum of 60 messages.
    while ((message = messageQueue.poll()) != null &amp;&amp; processed++ &lt; 60) {
        MessageHandler&lt;Message&gt; handler = (MessageHandler&lt;Message&gt;) HandlerLookupService.getHandler(message.getClass());
        if (handler != null) {
            try {
                handler.handle(this, getPlayer(), message);
            } catch (Exception e) {
                System.out.printf("Player Index: %d - Failure during handling of %s\n",
                        getPlayer() == null ? -1 : getPlayer().getIndex(),
                        message.getClass().toString());
                e.printStackTrace();
            }
        }
    }
    return true;
}
</code></pre>
<p>[/code][/quote]</p>
<p>The github project can be found <a href="https://github.com/Lothy/Elysium" data-bbcode="true" rel="nofollow noopener">here</a></p>
      </div>

      <meta itemprop='headline' content='Netty latency problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/CodeForFame.html'><span itemprop='name'>CodeForFame</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-07-26T00:49:19Z'>
            <time itemprop='dateModified' datetime='2016-08-03T17:26:29Z' class='post-time'>
              August 3, 2016,  5:26pm
            </time>
        <span itemprop='position'>#24</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“imthenull, post:23, topic:450769”]just for reference…</p>
<aside class="quote">
<blockquote>
<p>[code=java]package <a href="http://org.stamina.net/" rel="nofollow noopener">org.stamina.net</a>;</p>
<p>import org.jboss.netty.channel.Channel;<br>
import org.jboss.netty.channel.ChannelHandlerContext;<br>
import org.jboss.netty.channel.ChannelStateEvent;<br>
import org.jboss.netty.channel.ExceptionEvent;<br>
import org.jboss.netty.channel.MessageEvent;<br>
import org.jboss.netty.channel.SimpleChannelUpstreamHandler;<br>
import org.stamina.Server;<br>
import org.stamina.model.Player;<br>
import org.stamina.net.packet.Packet;</p>
<p>public final class ConnectionHandler extends SimpleChannelUpstreamHandler  {</p>
<pre><code>    @Override
    public void channelClosed(ChannelHandlerContext ctx, ChannelStateEvent e) {
            final Session session = (Session) ctx.getAttachment();
            final Player player = session.getPlayer();
            if (player != null &amp;&amp; !player.destroyed() &amp;&amp; player.initialized()) {
                    player.destroy(false);
            }
    }

    @Override
    public void channelConnected(ChannelHandlerContext ctx, ChannelStateEvent e) {
            final Channel chan = e.getChannel();
            final Session session = new Session(chan);
            session.setPlayer(new Player(session));
            ctx.setAttachment(session);
            Server.getServer().registerSession(session);
    }

    @Override
    public void channelDisconnected(ChannelHandlerContext ctx,
                    ChannelStateEvent e) {
    }

    @Override
    public void exceptionCaught(ChannelHandlerContext ctx, ExceptionEvent e) {

    }

    @Override
    public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) {
            if(ctx.getAttachment() instanceof Session) {
                    final Session session = (Session) ctx.getAttachment();
                    final Channel channel = e.getChannel();
                    if (!channel.isConnected()) {
                            return;
                    }
                    session.handlePacket((Packet) e.getMessage());
            }
    }
</code></pre>
<p>}<br>
[/code]</p>
</blockquote>
</aside>
<aside class="quote">
<blockquote>
<p>[code=java]package org.moparscape.elysium.net.codec;</p>
<p>import org.jboss.netty.channel.*;<br>
import org.moparscape.elysium.Server;<br>
import org.moparscape.elysium.net.Session;</p>
<p>/**</p>
<ul>
<li>
<p>Created by IntelliJ IDEA.</p>
</li>
<li>
</li>
<li>
<p><span class="mention">@author</span> lothy<br>
*/<br>
public final class ElysiumConnectionHandler extends SimpleChannelUpstreamHandler {</p>
<p>private static final Server server = Server.getInstance();</p>
<p><a class="mention" href="../../u/override.html">@Override</a><br>
public void channelConnected(ChannelHandlerContext ctx, ChannelStateEvent e) {<br>
Channel chan = e.getChannel();<br>
Session session = new Session(chan);<br>
ctx.setAttachment(session);<br>
server.registerSession(session);<br>
System.out.println(“Channel connected”);<br>
}</p>
<p><a class="mention" href="../../u/override.html">@Override</a><br>
public void channelDisconnected(ChannelHandlerContext ctx, ChannelStateEvent e) {<br>
Session session = (Session) ctx.getAttachment();<br>
System.out.println(“Channel disconnected”);<br>
}</p>
<p><a class="mention" href="../../u/override.html">@Override</a><br>
public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) {<br>
Session session = (Session) ctx.getAttachment();<br>
session.messageReceived((Message) e.getMessage());<br>
}</p>
<p><a class="mention" href="../../u/override.html">@Override</a><br>
public void exceptionCaught(ChannelHandlerContext ctx, ExceptionEvent e) {<br>
Session session = (Session) ctx.getAttachment();<br>
}<br>
}<br>
[/code]</p>
</li>
</ul>
</blockquote>
</aside>
<aside class="quote">
<blockquote>
<p>There’s a limit of 60 packets that can be received per pulse though and the pulse is every 10ms so I doubt it’s that.</p>
</blockquote>
</aside>
<aside class="quote">
<blockquote>
<pre><code class="lang-auto">
    @SuppressWarnings("unchecked")
    public boolean pulse() {
        if (isRemoving()) {
            return false;
        }

        Message message;
        int processed = 0;

        // Process all of the messages that have been received from this player.
        // Process the entire queue up to a maximum of 60 messages.
        while ((message = messageQueue.poll()) != null &amp;&amp; processed++ &lt; 60) {
            MessageHandler&lt;Message&gt; handler = (MessageHandler&lt;Message&gt;) HandlerLookupService.getHandler(message.getClass());
            if (handler != null) {
                try {
                    handler.handle(this, getPlayer(), message);
                } catch (Exception e) {
                    System.out.printf("Player Index: %d - Failure during handling of %s\n",
                            getPlayer() == null ? -1 : getPlayer().getIndex(),
                            message.getClass().toString());
                    e.printStackTrace();
                }
            }
        }
        return true;
    }</code></pre>
</blockquote>
</aside>
<p>The github project can be found <a href="https://github.com/Lothy/Elysium" data-bbcode="true" rel="nofollow noopener">here</a>[/quote]Ya, and that code was ‘borrowed’ from here:<br>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://assets-cdn.github.com/favicon.ico" class="site-icon" width="32" height="32">
      <a href="https://github.com/grahamedgecombe/lightstone" target="_blank" rel="nofollow noopener">GitHub</a>
  </header>
  <article class="onebox-body">
    <img src="https://avatars1.githubusercontent.com/u/231932?s=400&amp;v=4" class="thumbnail onebox-avatar" width="230" height="230">

<h3><a href="https://github.com/grahamedgecombe/lightstone" target="_blank" rel="nofollow noopener">grahamedgecombe/lightstone</a></h3>

<p>lightstone - An open-source implementation of the Minecraft server software.</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
</p>
<p>Either way, what difference does it make?</p>
      </div>

      <meta itemprop='headline' content='Netty latency problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Nothing1.html'><span itemprop='name'>Nothing1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-07-26T11:57:46Z'>
            <time itemprop='dateModified' datetime='2016-08-03T17:27:08Z' class='post-time'>
              August 3, 2016,  5:27pm
            </time>
        <span itemprop='position'>#25</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I did use the idea from Elysium, using the ‘Session’, I just recently found it out and thought that it would be good thing to have each session have their own packetqueue. That’s pretty much only thing I used from Elysium.</p>
<p>Imthenull, I wouldn’t talk as you ripped almost the entire core from Apollo for ProjectRSC.</p>
      </div>

      <meta itemprop='headline' content='Netty latency problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/lothy.html'><span itemprop='name'>lothy</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-07-26T12:15:59Z'>
            <time itemprop='dateModified' datetime='2016-08-03T17:27:08Z' class='post-time'>
              August 3, 2016,  5:27pm
            </time>
        <span itemprop='position'>#26</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>You guys realise that both Graham and myself have released our code under extremely liberal, non-copy-left, licences right?<br>
There is no ‘ripping’, there is no ‘stealing’. The code is completely and unequivocally free to use as you see fit. The only difference AFAIK is that Graham’s is under the MIT licence and mine is under the BSD licence. Their names notwithstanding, both of these licences are the same for all intents and purposes.</p>
<p>If you are in fact queueing the inbound packets as I do then you will find that each session is only pulsed once each game tick. This means that netty’s worker threads will decode packets and queue them inside the session.<br>
Each tick, the main game loop (the game pulse) will pulse each session, which causes execution of the queued inbound packets.<br>
After that game state is updated and update packets are issued (which would result in some form of delay, but I’ve never quantified it).</p>
<p>Just a heads up: If you have deviated from this approach and are handling packets immediately upon arrival (or at least trying to) then you have almost certainly introduced synchronisation issues. There’s a reason that my code makes rather heavy use of the CountdownLatch class.</p>
<p>Anyway, it’s nice to know that some of my code has seen some use. <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"> I didn’t know that. I’m actually in the process of overhauling, but I’m not going to get the new project code up on github for another couple of weeks – full time work is rough on personal time.</p>
<p>EDIT: So I’m pretty slack and haven’t stated it in the README on github, but it was (and still is) my intent that Elysium be licenced under the BSD licence.</p>
      </div>

      <meta itemprop='headline' content='Netty latency problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="2" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Nothing1.html'><span itemprop='name'>Nothing1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-07-26T13:13:45Z'>
            <time itemprop='dateModified' datetime='2016-08-03T17:27:10Z' class='post-time'>
              August 3, 2016,  5:27pm
            </time>
        <span itemprop='position'>#27</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Lothy, post:26, topic:450769”]If you are in fact queueing the inbound packets as I do then you will find that each session is only pulsed once each game tick. This means that netty’s worker threads will decode packets and queue them inside the session.<br>
Each tick, the main game loop (the game pulse) will pulse each session, which causes execution of the queued inbound packets.<br>
After that game state is updated and update packets are issued (which would result in some form of delay, but I’ve never quantified it).</p>
<p>Just a heads up: If you have deviated from this approach and are handling packets immediately upon arrival (or at least trying to) then you have almost certainly introduced synchronisation issues. There’s a reason that my code makes rather heavy use of the CountdownLatch class.[/quote]<br>
I have a different thread running to pulse all the sessions on the server every 10 milliseconds, can you tell me more about these synchronization issues and possibly how to fix them?</p>
      </div>

      <meta itemprop='headline' content='Netty latency problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/lothy.html'><span itemprop='name'>lothy</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-07-26T22:21:25Z'>
            <time itemprop='dateModified' datetime='2016-08-03T19:42:40Z' class='post-time'>
              August 3, 2016,  7:42pm
            </time>
        <span itemprop='position'>#28</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Well, as long as the ordering of your updates is done correctly (updates to world state, and sending of packet updates) you should be fine. It’s very important that you update ALL of the game state before then building and sending ALL of the update packets.<br>
And if you’ve modelled your updating off mine, which was written with reference to RSCD, you then clear each player’s collections.</p>
      </div>

      <meta itemprop='headline' content='Netty latency problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Nothing1.html'><span itemprop='name'>Nothing1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-07-26T22:45:36Z'>
            <time itemprop='dateModified' datetime='2016-08-03T19:42:42Z' class='post-time'>
              August 3, 2016,  7:42pm
            </time>
        <span itemprop='position'>#29</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Lothy, post:28, topic:450769”]Well, as long as the ordering of your updates is done correctly (updates to world state, and sending of packet updates) you should be fine. It’s very important that you update ALL of the game state before then building and sending ALL of the update packets.<br>
And if you’ve modelled your updating off mine, which was written with reference to RSCD, you then clear each player’s collections.[/quote]<br>
I’m not using your client updating system, I’m still using RSCDs, I was talking about the session pulsing synchronization issues you were talking about earlier:</p>
<aside class="quote" data-post="26" data-topic="450769">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forum.moparisthebest.com/lothy/40/51_1.png" class="avatar"> Lothy:</div>
<blockquote>
<p>Just a heads up: If you have deviated from this approach and are handling packets immediately upon arrival (or at least trying to) then you have almost certainly introduced synchronisation issues.</p>
</blockquote>
</aside>
      </div>

      <meta itemprop='headline' content='Netty latency problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/lothy.html'><span itemprop='name'>lothy</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-07-27T09:57:58Z'>
            <time itemprop='dateModified' datetime='2016-08-03T19:43:26Z' class='post-time'>
              August 3, 2016,  7:43pm
            </time>
        <span itemprop='position'>#30</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Yeah, that’s what I’m talking about. Consistency would have been a better choice of word.</p>
      </div>

      <meta itemprop='headline' content='Netty latency problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>

  <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
      <span itemprop='name'><a rel="prev" itemprop="url" href="450769.html">← previous page</a></span>
  </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/netty-latency-problem/450769?page=2 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Aug 2019 00:55:03 GMT -->
</html>
