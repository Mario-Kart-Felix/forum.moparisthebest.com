<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/718-vote4cash/529480 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Aug 2019 13:17:38 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>718 vote4cash - Runescape - moparisthebest.com</title>
    <meta name="description" content="Okay before I start, this is king fox&amp;#39;s vote4cash but with working server side and my own page. So credits king fox and me. 

Your webhost must have remote mysql, 000webhost doesn&amp;#39;t have this. 

Let&amp;#39;s start website sided&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="529480.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;718 vote4cash&#39;" href="529480.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://imageshack.us/a/img11/6356/8tu1.png" />
<meta property="og:image" content="http://imageshack.us/a/img11/6356/8tu1.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/718-vote4cash/529480" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/718-vote4cash/529480" />
<meta property="og:title" content="718 vote4cash" />
<meta name="twitter:title" content="718 vote4cash" />
<meta property="og:description" content="Okay before I start, this is king fox’s vote4cash but with working server side and my own page. So credits king fox and me.  Your webhost must have remote mysql, 000webhost doesn’t have this.  Let’s start website sided.  Go to your control panel and click remote mysql      then go to phpmyadmin    we need to create a new database with a table so click SQL and run this query  DROP TABLE IF EXISTS `voters`; CREATE TABLE `voters` (   `id` int(11) NOT NULL AUTO_INCREMENT,   `username` varchar(255) N..." />
<meta name="twitter:description" content="Okay before I start, this is king fox’s vote4cash but with working server side and my own page. So credits king fox and me.  Your webhost must have remote mysql, 000webhost doesn’t have this.  Let’s start website sided.  Go to your control panel and click remote mysql      then go to phpmyadmin    we need to create a new database with a table so click SQL and run this query  DROP TABLE IF EXISTS `voters`; CREATE TABLE `voters` (   `id` int(11) NOT NULL AUTO_INCREMENT,   `username` varchar(255) N..." />
<meta property="article:published_time" content="2013-09-08T00:09:28+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="529480.html">718 vote4cash</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/owns_reece.html'><span itemprop='name'>owns_reece</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2013-09-08T00:09:28Z'>
            <time itemprop='dateModified' datetime='2016-08-04T10:25:46Z' class='post-time'>
              August 4, 2016, 10:25am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Okay before I start, this is king fox’s vote4cash but with working server side and my own page. So credits king fox and me.</p>
<p>Your webhost must have remote mysql, 000webhost doesn’t have this.</p>
<p>Let’s start website sided.<br>
Go to your control panel and click remote mysql<br>
<img src="http://imageshack.us/a/img11/6356/8tu1.png" alt width="" height=""><br>
<img src="http://imageshack.us/a/img835/3807/qp1f.png" alt width="" height=""></p>
<p>then go to phpmyadmin<br>
<img src="http://imageshack.us/a/img109/1120/rmyu.png" alt width="" height=""></p>
<p>we need to create a new database with a table so click SQL and run this query</p>
<p><code>DROP TABLE IF EXISTS `voters`;
CREATE TABLE `voters` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `username` varchar(255) NOT NULL,
  `vote` int(1) DEFAULT '0',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=28 DEFAULT CHARSET=latin1;</code></p>
<p><img src="http://imageshack.us/a/img692/4851/0ia6.png" alt width="" height=""></p>
<p>Alright now go to your file manager Create a new folder called vote and make a file called “index.html” and “callback.php”</p>
<p>In index.html add this code</p>
<p>[CODE]</p>



SyclonePK voting

body {
	background: #1b1b1b;
	color: #999999;
	font-family:Tahoma, Geneva, sans-serif;
	font-size: 12px;
}
h3 {
	color: #33ff33;
	text-align: center;
}
#wrapper {
	width: 500px;
	margin: 0 auto;
}
#content {
	padding:10px;
	margin-top: 50px;
	border: #33ff33 1px solid;
	background: #2c2c2c;
}



<div>
	<div>
<pre><code>	&lt;h3&gt;Voting for us&lt;/h3&gt;
	To receive your reward, you must enter your username and click the button below, once you have finished voting type ::claim in-game. The system does detect if you do not actually vote on the site. You will not receive the reward by just opening the site.&lt;br/&gt;&lt;br/&gt;
	Rules:
	&lt;small&gt;
    &lt;ul&gt;
        &lt;li&gt;You may vote every 12 hours.&lt;/li&gt;
        &lt;li&gt;You may not "sell" votes in game. You can sell tickets.&lt;/li&gt;
        &lt;li&gt;You may not use any kind of proxy server.&lt;/li&gt;
    &lt;/ul&gt;
	&lt;/small&gt;&lt;br /&gt;
	&lt;form align="center" action="http://www.runelocus.com/toplist/index.php" method="get"&gt;
&lt;input type="hidden" name="action" value="vote" /&gt;
&lt;input type="hidden" name="id" value="34892" /&gt; &lt;!-- CHANGE 34892 TO YOUR OWN SERVER ID--&gt;
&lt;input type="text" name="id2" placeholder="username" required/&gt;
&lt;button type="submit"&gt;Click here to vote for us&lt;/button&gt;
</code></pre>


[/CODE]
<p>Alright now near the bottom change 34892 to your server id on runelocus. If you don’t know what this is then look here: <a href="http://prntscr.com/1pyvdg" data-bbcode="true" rel="nofollow noopener">Screenshot by Lightshot</a> the numbers are the server id.</p>
<p>Alright now add this code to callback.php</p>
<p>[CODE]&lt;?php<br>
$con = new mysqli(“localhost”, “DATABASE USERNAME”, “DATABASE PASS”, “DATABASE NAME”) or die($con-&gt;error);<br>
$username = strtolower($con-&gt;real_escape_string(@$_GET[‘usr’]));<br>
$res = $con-&gt;query(“SELECT username FROM voters where username=’$username’”);</p>
<pre><code>if($res-&gt;num_rows &gt; 0) {
	$con-&gt;query("UPDATE voters SET vote=1 WHERE username = '$username'");
} else {
	$con-&gt;query("INSERT INTO voters (username,vote) VALUES ('$username','1')");
}
</code></pre>
<p>?&gt;[/CODE]</p>
<p>and change to your information…</p>
<p>Thats server side done, it will add username to database ready for the server to collect it.</p>
<p>Sever side now.</p>
<p>Create a new class called VoteManager in com.rs and add this code to it</p>
<p>[CODE]package com.rs;</p>
<p>import java.sql.*;</p>
<p>import com.rs.game.player.Player;<br>
import com.rs.game.World;<br>
import com.rs.utils.Logger;<br>
import com.rs.utils.Utils;<br>
/** By proethium edited by pker reece @ rune-server/owns reece on mopar **/<br>
public class VoteManager {</p>
<pre><code>public static Connection con = null;
public static Statement stmt;
public static boolean connectionMade;

public static void createConnection() {
    try {
        Class.forName("com.mysql.jdbc.Driver").newInstance();
        String IP="DATABASE IP";
        String DB="DATABASE NAME";
        String User="DATABASE USERNAME";
        String Pass="DATABASEPASS"; 
        con = DriverManager.getConnection("jdbc:mysql://"+IP+"/"+DB, User, Pass);
        stmt = con.createStatement();
    } catch (Exception e) {
        Logger.log("VoteManager", "Connection to SQL database failed!");
        e.printStackTrace();
    }
}

public static boolean checkVote(Player p) {
    try {
    		createConnection();
            Statement stmt = con.createStatement();
    		String playerName = p.getUsername();
            ResultSet rs = query("SELECT * FROM voters WHERE username='"+playerName+"' LIMIT 1");
            if(p.getInventory().getItems().freeSlots() &gt; 1) {
            if(rs.next()) {
                query("UPDATE voters SET vote='0' WHERE username='"+playerName+"'");
        		p.timesVoted ++;
        		p.getInventory().addItem(1464, 10);
        		p.getInventory().addItem(995, 10000000);
        		p.setLastVote(Utils.currentTimeMillis() + 43200000); // 12 hours
        		p.getPackets().sendGameMessage("You have recieved 10m and 10 vote tickets!");
				for (Player players : World.getPlayers()) {
					if (players == null)
						continue;
				players.getPackets().sendGameMessage("&lt;img=7&gt; &lt;col=FF6600&gt;News: "+p.getDisplayName()+" has voted for "+Settings.SERVER_NAME+"!");
				}
            } else {
                p.getPackets().sendGameMessage("You havn't voted yet. Please do ::vote");
            }
        } else {
            p.getPackets().sendGameMessage("Please make space for your items.");
        }
    } catch (SQLException ex) {
        System.out.println(ex);
    }
	return false;
}

public static ResultSet query(String s) throws SQLException {
    try {
        if (s.toLowerCase().startsWith("select")) {
            ResultSet rs = stmt.executeQuery(s);
            return rs;
        } else {
            stmt.executeUpdate(s);
        }
        return null;
    } catch (Exception e) {
        //destroyConnection();
		con = null;
        stmt = null;
    }
    return null;
}
</code></pre>
<p>}[/CODE]</p>
<p>Change to your liking ofc.</p>
<p>Now in player.java add these</p>
<p>[CODE]	public boolean hasVoted() {<br>
long timeLeft = (lastVoted - Utils.currentTimeMillis());<br>
long hours = TimeUnit.MILLISECONDS.toHours(timeLeft);<br>
long min = TimeUnit.MILLISECONDS.toMinutes(timeLeft) - TimeUnit.HOURS.toMinutes(TimeUnit.MILLISECONDS.toHours(timeLeft));<br>
long sec = TimeUnit.MILLISECONDS.toSeconds(timeLeft) - TimeUnit.MINUTES.toSeconds(TimeUnit.MILLISECONDS.toMinutes(timeLeft));<br>
String time = “”+hours+"h "+min+“m “+sec+“s”;<br>
if (timeLeft &gt; 0) {<br>
getPackets().sendGameMessage(“You must wait &lt;col=FF0000&gt;”+time+” before you may claim another reward.”);<br>
return true;<br>
}<br>
return false;<br>
}</p>
<pre><code>public long getLastVote() {
	return lastVoted;
}
public void setLastVote(long time) {
	this.lastVoted = time;
}
private long lastVoted;[/CODE]
</code></pre>
<p>Now add this command in commands.java</p>
<p><code>case "claim":
  case "checkvote":
	if (!player.hasVoted()) {
		VoteManager.checkVote(player);
}
	return true;
</code><br>
and if you want an npc to do it for you or anything just do</p>
<pre><code class="lang-auto">	if (!player.hasVoted()) {
		VoteManager.checkPlayerVote(player);
	}</code></pre>
<p>Don’t forget imports.</p>
<p>Here’s what it looks like:<br>
<img src="http://imageshack.us/a/img818/9661/w7vm.png" alt width="" height=""></p>
<p>I think thats all please tell me if i forgot something. Enjoy <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
</div>
</div>
      </div>

      <meta itemprop='headline' content='718 vote4cash'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/penguinimp.html'><span itemprop='name'>penguinimp</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2013-09-08T05:32:50Z'>
            <time itemprop='dateModified' datetime='2016-08-04T10:25:52Z' class='post-time'>
              August 4, 2016, 10:25am
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Looks good, easy to follow. pretty clear.<br>
includes html, php, mysql and java coding.</p>
<p>Conventions in a couple spots could use a bit more effort, but otherwise overall good job.</p>
      </div>

      <meta itemprop='headline' content='718 vote4cash'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/owns_reece.html'><span itemprop='name'>owns_reece</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2013-09-21T22:06:22Z'>
            <time itemprop='dateModified' datetime='2016-08-04T10:36:20Z' class='post-time'>
              August 4, 2016, 10:36am
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Meh, this is bad and rushed got a better one now with 5 sites &amp; reward choices</p>
      </div>

      <meta itemprop='headline' content='718 vote4cash'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/718-vote4cash/529480 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Aug 2019 13:17:39 GMT -->
</html>
