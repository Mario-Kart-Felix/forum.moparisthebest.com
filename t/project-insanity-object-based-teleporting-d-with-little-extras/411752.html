<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/project-insanity-object-based-teleporting-d-with-little-extras/411752 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Aug 2019 21:21:17 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Project Insanity : Object based teleporting :D (with little extras) - Runescape - moparisthebest.com</title>
    <meta name="description" content="NOTE : This was done out of pure boredom , I just like using Objects better so I thought I might try it :smiley: 

UPDATED : I&amp;#39;ve made some changes , including the gwd kc resetting (to give you guys an example) and also &amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="411752.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Project Insanity : Object based teleporting :D (with little extras)&#39;" href="411752.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/project-insanity-object-based-teleporting-d-with-little-extras/411752" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/project-insanity-object-based-teleporting-d-with-little-extras/411752" />
<meta property="og:title" content="Project Insanity : Object based teleporting :D (with little extras)" />
<meta name="twitter:title" content="Project Insanity : Object based teleporting :D (with little extras)" />
<meta property="og:description" content="NOTE : This was done out of pure boredom , I just like using Objects better so I thought I might try it 😃  UPDATED : I’ve made some changes , including the gwd kc resetting (to give you guys an example) and also the Lunar spellbook (I don’t have it personally , but I’ve made it so that the code will recognize it).  This is for as long as the Lunar spell book int for the c.playerMagicBook variable is set to 2.  I will try to explain this as best as I can…  What this does is add a new way o..." />
<meta name="twitter:description" content="NOTE : This was done out of pure boredom , I just like using Objects better so I thought I might try it 😃  UPDATED : I’ve made some changes , including the gwd kc resetting (to give you guys an example) and also the Lunar spellbook (I don’t have it personally , but I’ve made it so that the code will recognize it).  This is for as long as the Lunar spell book int for the c.playerMagicBook variable is set to 2.  I will try to explain this as best as I can…  What this does is add a new way o..." />
<meta property="article:published_time" content="2011-08-23T19:55:34+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="411752.html">Project Insanity : Object based teleporting :D (with little extras)</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Cres.html'><span itemprop='name'>Cres</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-08-23T19:55:34Z'>
            <time itemprop='dateModified' datetime='2016-08-01T14:21:18Z' class='post-time'>
              August 1, 2016,  2:21pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p><span class="bbcode-b">NOTE</span> : This was done out of pure boredom , I just like using Objects better so I thought I might try it <img src="../../images/emoji/twitter/smileyae52.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"></p>
<p><span class="bbcode-b">UPDATED</span> : I’ve made some changes , including the gwd kc resetting (to give you guys an example) and also the Lunar spellbook (I don’t have it personally , but I’ve made it so that the code will recognize it).<br>
This is for as long as the Lunar spell book int for the <span class="bbcode-b">c.playerMagicBook</span> variable is set to <span class="bbcode-b">2</span>.</p>
<p>I will try to explain this as best as I can…<br>
What this does is add a new way of teleporting.<br>
The mechanics are completely the same , but it’s now being handled as an object , like so :</p>
<pre><code class="lang-auto"></code></pre>
<p>(That’s how you call the code once you’ve added it)<br>
The c stands for the Client , so it changes to whatever you named it.<br>
The 3 integers stand for the X , Y and Z coordinates of the location you want to teleport to.</p>
<p><span class="bbcode-b">SO LET’S START</span></p>
<p>First of all , you’re going to have to create a new class called <span class="bbcode-b">Teleport.java</span> in the <span class="bbcode-i">server.model.players</span> package.</p>
<p>Now , you have to add this code in that class :</p>
<p>[code=java]package server.model.players;</p>
<p>import server.model.players.Client;<br>
import server.Config;<br>
import server.util.Misc;</p>
<pre><code>/**
	@author Cres.
	@note This was done out of pure boredom...
	@note I just like Objects so much better then methods :D
*/
</code></pre>
<p>public class Teleport {</p>
<pre><code>private int playX;
private int playY;
private int playZ;
private int futX;
private int futY;
private int futZ;

public Teleport(Client c, int newX, int newY, int newZ) { //1
	getPlayerCoords(c); //2
	futX = newX;
	futY = newY;
	futZ = newZ;
	if (canTeleport(c)) { //3
		handleLeaveEffects(c, playX, playY, playZ); //4
		if (c.playerMagicBook == 0 || c.playerMagicBook == 2) { //5
			performRegularTeleport(c, newX, newY, newZ);
		}
		if (c.playerMagicBook == 1) { //6
			performAncientTeleport(c, newX, newY, newZ);
		}
		if (c.playerMagicBook != 0 &amp;&amp; c.playerMagicBook != 1 &amp;&amp; c.playerMagicBook != 2) { //7
			c.sendMessage("Somthing went wrong ; you're not on any specified spellbook...");
			c.sendMessage("For safety reasons , we have put you on the original spellbook.");
			c.playerMagicBook = 0;
		}
	}
}

public void performRegularTeleport(Client c, int X, int Y, int Z) {
	c.getCombat().resetPlayerAttack();
	c.stopMovement();
	c.getPA().removeAllWindows();			
	c.teleX = X;
	c.teleY = Y;
	c.teleHeight = Z;
	c.npcIndex = 0;
	c.playerIndex = 0;
	c.faceUpdate(0);
	c.startAnimation(714);
	c.teleTimer = 11;
	c.teleGfx = 308;
	c.teleEndAnimation = 715;
}


public void performAncientTeleport(Client c, int X, int Y, int Z) {	
	c.getCombat().resetPlayerAttack();
	c.stopMovement();
	c.getPA().removeAllWindows();			
	c.teleX = X;
	c.teleY = Y;
	c.teleHeight = Z;
	c.npcIndex = 0;
	c.playerIndex = 0;
	c.faceUpdate(0);
	c.startAnimation(1979);
	c.teleGfx = 0;
	c.teleTimer = 9;
	c.teleEndAnimation = 0;
	c.gfx0(392);
}

/*Let's say you were in godwars when you teleported...
The X , Y and Z values represent your coords when you were in godwars.
So in here , we will reset your killcount because you left gwd.

(The X , Y and Z parameters of this method are your coordinates BEFORE you teleported.)

You can do this for other things too offcourse.*/
public void handleLeaveEffects(Client c, int X, int Y, int Z) {
	if (X &gt; 2890 &amp;&amp; X &lt; 2925 &amp;&amp; Y &lt; 3628 &amp;&amp; Y &gt; 3595) { // Godwars area
		if (c.killCount &gt; 0) {
			c.sendMessage("The power of all those you slew in the dungeon drains from your body");
		}
		c.killCount = 0;
	}
	if (c.playerRights == 3) {
		Misc.println(c.playerName+" teleported from ["+X+","+Y+","+Z+"] to ["+futX+","+futY+","+futZ+"].");
	}
}

/*Grabs the player's coords from the moment he clicked a teleport and stores it incase they change*/
public void getPlayerCoords(Client c) {
	playX = c.absX;
	playY = c.absY;
	playZ = c.heightLevel;
}

/*Performs checks to see if the player is allowed to teleport , add custom changes here if you want*/
public boolean canTeleport(Client c) {
	if (c.duelStatus == 5) {
		c.sendMessage("You can't teleport during a duel!");
		return false;
	}
	if (c.inWild() &amp;&amp; c.wildLevel &gt; Config.NO_TELEPORT_WILD_LEVEL) {
		c.sendMessage("You can't teleport above level "+Config.NO_TELEPORT_WILD_LEVEL+" in the wilderness.");
		return false;
	}
	if (System.currentTimeMillis() - c.teleBlockDelay &lt; c.teleBlockLength) {
		c.sendMessage("You are teleblocked and can't teleport.");
		return false;
	}
	return true;
}
</code></pre>
<p>}[/code]</p>
<p>Now to explain how this works…<br>
<em>takes a deep breath</em></p>
<ol>
<li>
<p>The class gets initiated , the specified coordinates of the target location and the Client representing the player are given as an input.</p>
</li>
<li>
<p>The <span class="bbcode-b">getPlayerCoords©</span> method memorizes the player’s coordinates BEFORE the teleport , these coordinates will be used in the <span class="bbcode-b">handleLeaveEffects(c, playX, playY, playZ)</span> method.</p>
</li>
<li>
<p>Checks if the player is capable of teleporting.<br>
This checks for things like dueling , wether the player is dead or not , wildy levels , etc.</p>
</li>
<li>
<p>Now , the <span class="bbcode-b">handleLeaveEffects(c, playX, playY, playZ)</span> method will see if you were in an area where teleporting is allowed , but comes with an event afterwards.<br>
Much like Godwars ; if you are in godwars for example and you teleport out your killcount will reset.<br>
You can use the <span class="bbcode-b">inArea(int x, int y, int x1, int y1)</span> in the Player class for this.</p>
</li>
<li>
<p>Checks if the player has the regular spellbook</p>
</li>
<li>
<p>checks if the player has the ancients spellbook</p>
</li>
</ol>
<p>Note : the reason why these 2 are different is because of the animations and graphics used.<br>
Those are still being handled in the Client and PlayerAssistant class like they were with the original teleporting.</p>
<ol start="7">
<li>I don’t know why I did this ; It’s just a security check I think.<br>
If the player is somehow on neither the Ancients or Regular spellbook , it will reset to the original spellbook.</li>
</ol>
<p><span class="bbcode-b">NOTE</span> : I do understand that the Lunar spellbook probably has another value for the <span class="bbcode-b">c.playerMagicBook</span> variable , I don’t know if the animations and Graphics for the lunar teleports are the same as those of the original spellbook.<br>
If so , just make the part where the code checks for the original spellbook like this :</p>
<p><code>			if (c.playerMagicBook == 0 || c.playerMagicBook == 2) {
				performRegularTeleport(c, newX, newY, newZ);
			}</code><br>
That way the lunar spellbook will be handled the same way as the regular teleports.</p>
<p><span class="bbcode-b">EDIT</span><br>
I almost forgot , to use this new way of teleporting , you must import the Teleport class like so :</p>
<pre><code class="lang-auto"></code></pre>
<p>Cheers guys ,</p>
<p>~ Cres.</p>
      </div>

      <meta itemprop='headline' content='Project Insanity : Object based teleporting :D (with little extras)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Native1.html'><span itemprop='name'>Native1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-08-23T19:59:53Z'>
            <time itemprop='dateModified' datetime='2016-08-01T14:21:18Z' class='post-time'>
              August 1, 2016,  2:21pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I like object better too, but it is just useless memory in this case. But good job I guess. ;D</p>
      </div>

      <meta itemprop='headline' content='Project Insanity : Object based teleporting :D (with little extras)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Cres.html'><span itemprop='name'>Cres</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-08-23T20:01:26Z'>
            <time itemprop='dateModified' datetime='2016-08-01T14:21:18Z' class='post-time'>
              August 1, 2016,  2:21pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="2" data-topic="411752">
<div class="title">
<div class="quote-controls"></div>
 Native^:</div>
<blockquote>
<p>I like object better too, but it is just useless memory in this case. But good job I guess. ;D</p>
</blockquote>
</aside>
<p>I don’t see how this is memory to waste…<br>
The class is only active when it gets called ; it’s not like the server keeps running through it <img src="../../images/emoji/twitter/smileyae52.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"></p>
      </div>

      <meta itemprop='headline' content='Project Insanity : Object based teleporting :D (with little extras)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Native1.html'><span itemprop='name'>Native1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-08-23T20:03:39Z'>
            <time itemprop='dateModified' datetime='2016-08-01T14:21:19Z' class='post-time'>
              August 1, 2016,  2:21pm
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Cres, post:3, topic:411752”][quote author=Native^ link=topic=513006.msg3723719#msg3723719 date=1314129593]<br>
I like object better too, but it is just useless memory in this case. But good job I guess. ;D<br>
[/quote]</p>
<p>I don’t see how this is memory to waste…<br>
The class is only active when it gets called ; it’s not like the server keeps running through it :D[/quote]<br>
That’s true.</p>
<p>But I just don’t see why you should make an object of it.</p>
      </div>

      <meta itemprop='headline' content='Project Insanity : Object based teleporting :D (with little extras)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Cres.html'><span itemprop='name'>Cres</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-08-23T20:14:22Z'>
            <time itemprop='dateModified' datetime='2016-08-01T14:21:20Z' class='post-time'>
              August 1, 2016,  2:21pm
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Native^, post:4, topic:411752”][quote author=Cres link=topic=513006.msg3723722#msg3723722 date=1314129686]</p>
<aside class="quote">
<blockquote>
<p>I like object better too, but it is just useless memory in this case. But good job I guess. ;D</p>
</blockquote>
</aside>
<p>I don’t see how this is memory to waste…<br>
The class is only active when it gets called ; it’s not like the server keeps running through it <img src="../../images/emoji/twitter/smileyae52.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"><br>
[/quote]<br>
That’s true.</p>
<p>But I just don’t see why you should make an object of it.[/quote]</p>
<p>Boredom , and it was in my mind for quite a while now.<br>
I’m thinking of making every action in the PI source as an object btw <img src="../../images/emoji/twitter/smileyae52.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"></p>
<p>Or at least most of 'em rofl</p>
      </div>

      <meta itemprop='headline' content='Project Insanity : Object based teleporting :D (with little extras)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/project-insanity-object-based-teleporting-d-with-little-extras/411752 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Aug 2019 21:21:18 GMT -->
</html>
