<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/c-dynamically-allocated-multi-dimensional-vs-single-dimensional-arrays/549831 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:05:38 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>[C++] Dynamically Allocated Multi-dimensional vs Single-dimensional Arrays - General Programming - moparisthebest.com</title>
    <meta name="description" content="I&amp;#39;ve been working on a project that requires heavy usage of 3D arrays and were creating them on-the-fly. After profiling the code, I found almost all of the slowdowns were caused when allocating the third dimension of th&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="549831.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;[C++] Dynamically Allocated Multi-dimensional vs Single-dimensional Arrays&#39;" href="549831.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/c-dynamically-allocated-multi-dimensional-vs-single-dimensional-arrays/549831" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/c-dynamically-allocated-multi-dimensional-vs-single-dimensional-arrays/549831" />
<meta property="og:title" content="[C++] Dynamically Allocated Multi-dimensional vs Single-dimensional Arrays" />
<meta name="twitter:title" content="[C++] Dynamically Allocated Multi-dimensional vs Single-dimensional Arrays" />
<meta property="og:description" content="I’ve been working on a project that requires heavy usage of 3D arrays and were creating them on-the-fly. After profiling the code, I found almost all of the slowdowns were caused when allocating the third dimension of the array, and after switching to single-dimensional arrays the performance massively increased and the allocations were no longer an issue.  Does anyone know specifically why this is? Since the issue was creating the arrays and not accessing them, the problem isn’t related to cach..." />
<meta name="twitter:description" content="I’ve been working on a project that requires heavy usage of 3D arrays and were creating them on-the-fly. After profiling the code, I found almost all of the slowdowns were caused when allocating the third dimension of the array, and after switching to single-dimensional arrays the performance massively increased and the allocations were no longer an issue.  Does anyone know specifically why this is? Since the issue was creating the arrays and not accessing them, the problem isn’t related to cach..." />
<meta property="article:published_time" content="2015-02-11T04:39:38+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="549831.html">[C++] Dynamically Allocated Multi-dimensional vs Single-dimensional Arrays</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/general-programming.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>General Programming</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Lin.html'><span itemprop='name'>Lin</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-02-11T04:39:38Z'>
            <time itemprop='dateModified' datetime='2016-08-04T14:20:55Z' class='post-time'>
              August 4, 2016,  2:20pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I’ve been working on a project that requires heavy usage of 3D arrays and were creating them on-the-fly. After profiling the code, I found almost all of the slowdowns were caused when allocating the third dimension of the array, and after switching to single-dimensional arrays the performance massively increased and the allocations were no longer an issue.</p>
<p>Does anyone know specifically why this is? Since the issue was <span class="bbcode-i">creating</span> the arrays and not accessing them, the problem isn’t related to cache misses. Here’s the code used in both contexts:</p>
<p><code>	template &lt;typename T&gt;
	inline T*** Create3DArray(int x, int y, int z)
	{
		T*** a = new T**[x];
		for (int i = 0; i &lt; x; i++)
		{
			a[i] = new T*[y];
			for (int k = 0; k &lt; y; k++)
			{
				a[i][k] = new T[z];
				for (int j = 0; j &lt; z; j++)
					a[i][k][j] = 0;
			}
		}
		return a;
	}</code></p>
<pre><code class="lang-auto"></code></pre>
<p>Are allocations themselves just generally really slow? I can’t think of a list of reasons as to why the performance increases would be so big. We’re talking over 50% of the profiling samples coming from allocations and the program stalling to a small percentage and smooth sailing.</p>
<p>Thanks,</p>
<p>~Lin</p>
      </div>

      <meta itemprop='headline' content='[C++] Dynamically Allocated Multi-dimensional vs Single-dimensional Arrays'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/marcbob.html'><span itemprop='name'>marcbob</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-02-11T16:32:22Z'>
            <time itemprop='dateModified' datetime='2016-08-04T14:20:56Z' class='post-time'>
              August 4, 2016,  2:20pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>EDIT: nvm what I originally said wouldn’t be the problem</p>
<p>I haven’t worked with multi dimensional arrays in c++, but perhaps when you make a 2D the 1D is still there and you need to delete it to save memory. Then when 3D delete the 2D. No idea though, what I originally thought was your problem it wouldn’t be.</p>
      </div>

      <meta itemprop='headline' content='[C++] Dynamically Allocated Multi-dimensional vs Single-dimensional Arrays'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/HcoJustin.html'><span itemprop='name'>HcoJustin</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-02-11T17:45:15Z'>
            <time itemprop='dateModified' datetime='2016-08-04T14:20:56Z' class='post-time'>
              August 4, 2016,  2:20pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>How big is the chunk size? 1 allocation versus chunk_size[sup]3[/sup] makes a huge difference</p>
      </div>

      <meta itemprop='headline' content='[C++] Dynamically Allocated Multi-dimensional vs Single-dimensional Arrays'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Fat_Cookies.html'><span itemprop='name'>Fat_Cookies</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-02-12T23:15:08Z'>
            <time itemprop='dateModified' datetime='2016-08-04T14:21:54Z' class='post-time'>
              August 4, 2016,  2:21pm
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>To hazard a guess:<br>
A 3d array requires x*y + x arrays to be created. I presume malloc is used to dynamically get the memory for EACH array. malloc is a pretty expensive function call. To make matters worse if all those allocations do not fit in contiguous memory when the array is freed you’ll have some nasty memory fragmentation. I would have assumed the compiler would try and optimise this though.</p>
<p>That probably makes no sense because I’m pretty tired.</p>
      </div>

      <meta itemprop='headline' content='[C++] Dynamically Allocated Multi-dimensional vs Single-dimensional Arrays'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/imthenull.html'><span itemprop='name'>imthenull</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-02-12T23:39:12Z'>
            <time itemprop='dateModified' datetime='2016-08-04T14:21:55Z' class='post-time'>
              August 4, 2016,  2:21pm
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Fat Cookies, post:4, topic:549831”]To hazard a guess:<br>
A 3d array requires x*y + x arrays to be created. I presume malloc is used to dynamically get the memory for EACH array. malloc is a pretty expensive function call. To make matters worse if all those allocations do not fit in contiguous memory when the array is freed you’ll have some nasty memory fragmentation. I would have assumed the compiler would try and optimise this though.</p>
<p>That probably makes no sense because I’m pretty tired.[/quote]</p>
<aside class="quote" data-post="1" data-topic="549831">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/lin/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> Lin:</div>
<blockquote>
<p>and after switching to single-dimensional arrays the performance massively increased and the allocations were no longer an issue.</p>
</blockquote>
</aside>
<p>As Fat Cookies said, allocating memory is expensive. The mass amounts of allocation calls is probably the culprit behind this issue.</p>
<p>Edit: after some quick googling, it appears you can allocate a chunk of memory without initializing it using a similar method to malloc. This could potentially resolve your issue to some extent.</p>
<pre><code class="lang-auto"></code></pre>
      </div>

      <meta itemprop='headline' content='[C++] Dynamically Allocated Multi-dimensional vs Single-dimensional Arrays'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/justaguy.html'><span itemprop='name'>justaguy</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-02-13T05:32:26Z'>
            <time itemprop='dateModified' datetime='2016-08-04T14:21:59Z' class='post-time'>
              August 4, 2016,  2:21pm
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>After benchmarking your code it seems zeroing out your memory manually slows your code down about 5 times (averaged about 50-60ms) compared to just allocating memory (which is a relatively expensive operation). Just out of curiosity, I decided to initialize the array each time using the following code:</p>
<pre><code class="lang-auto"></code></pre>
<p>and removed the last for-loop altogether. Now I was getting an average of about 15-20ms.</p>
<p>[quote=“imthenull, post:5, topic:549831”]Edit: after some quick googling, it appears you can allocate a chunk of memory without initializing it using a similar method to malloc. This could potentially resolve your issue to some extent.</p>
<pre><code class="lang-auto"></code></pre>
<p>In C++ (atleast in C++03) allocations using ‘new’ are uninitialized also. However, I’m sure he wants his memory zero’d/initialized since he is doing so explicitly in the code.</p>
<p>Otherwise, what Fat Cookies said makes sense since a lot of jumping around is going to be done in memory with several blocks in different places as opposed to one giant block as a single dimensional array. As a consequence of that, I’d be willing to bet you’re still missing out on cache. Since a single dimension is one contiguous block and since cache these days are somewhat large (relatively speaking of course) in size, I would imagine a large chunk of that contiguous block can be cached. But if blocks are spread apart throughout memory, this isn’t cache-friendly.</p>
<p>My code:<br>
[spoiler][code=c++]<br>
<span class="hashtag">#include</span> <br>
<span class="hashtag">#include</span> <br>
<span class="hashtag">#include</span> </p>
<p><span class="hashtag">#define</span> NUM_TIMES 1000<br>
<span class="hashtag">#define</span> BLOCK_SIZE  256</p>
<p>template inline T*** Create3DArray(int x, int y, int z) {<br>
T*** a = new T**[x];<br>
for (int i = 0; i &lt; x; i++) {<br>
a[i] = new T*[y];<br>
for (int k = 0; k &lt; y; k++) {<br>
a[i][k] = new T<a>z</a>;<br>
}<br>
}</p>
<p>return a;<br>
}</p>
<p>template void Free3DArray(T*** a) {<br>
for (int i = 0; i &lt; BLOCK_SIZE; i++) {<br>
for (int k = 0; k &lt; BLOCK_SIZE; k++) {<br>
delete[] a[i][k];<br>
}</p>
<pre><code>delete[] a[i];
</code></pre>
<p>}</p>
<p>delete[] a;<br>
}</p>
<p>int main() {<br>
srand(time(NULL));<br>
clock_t t;<br>
double timeSpent = 0, avgTime = 0;<br>
int count = 0;<br>
while (count &lt; NUM_TIMES) {<br>
int ***arr;<br>
t = clock();<br>
arr = Create3DArray(BLOCK_SIZE, BLOCK_SIZE, BLOCK_SIZE);<br>
t = clock() - t;</p>
<pre><code>Free3DArray(arr);

timeSpent = (((double) t) / CLOCKS_PER_SEC) * 1000;
avgTime += timeSpent;
count++;
</code></pre>
<p>}</p>
<p>std::cout &lt;&lt; "The average time spent on " &lt;&lt; NUM_TIMES &lt;&lt; " allocations is “<br>
&lt;&lt; (avgTime / NUM_TIMES) &lt;&lt; " milliseconds.” &lt;&lt; std::endl;<br>
return EXIT_SUCCESS;<br>
}<br>
[/code][/spoiler]</p>
      </div>

      <meta itemprop='headline' content='[C++] Dynamically Allocated Multi-dimensional vs Single-dimensional Arrays'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Lin.html'><span itemprop='name'>Lin</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-02-14T03:55:20Z'>
            <time itemprop='dateModified' datetime='2016-08-04T14:22:11Z' class='post-time'>
              August 4, 2016,  2:22pm
            </time>
        <span itemprop='position'>#7</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“justaguy, post:6, topic:549831”]After benchmarking your code it seems zeroing out your memory manually slows your code down about 5 times (averaged about 50-60ms) compared to just allocating memory (which is a relatively expensive operation).[/quote]Oh wow, that’s very interesting. So even though most of the samples were on the allocation line, manually setting the pointers to 0 had a major impact? That’s not something I would’ve expected. Anyways I guess the conclusion to draw is allocating any sort of memory is very expensive, as Fat Cookies and imthenull pointed out, as it’s not related to the size but the amount of times you allocate it. Still, I find it odd the improvements would be as major as they were, but that’s memory for you I guess. Thanks all for the help and insights <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>[quote=“justaguy, post:6, topic:549831”]Otherwise, what Fat Cookies said makes sense since a lot of jumping around is going to be done in memory with several blocks in different places as opposed to one giant block as a single dimensional array. As a consequence of that, I’d be willing to bet you’re still missing out on cache. Since a single dimension is one contiguous block and since cache these days are somewhat large (relatively speaking of course) in size, I would imagine a large chunk of that contiguous block can be cached. But if blocks are spread apart throughout memory, this isn’t cache-friendly.[/quote]Yeah, I was thinking about all of the cache misses using a 3D array, but I had (probably falsely) assumed that since the arrays were created sequentially, they would also mostly be laid out sequentially. Clearly that wasn’t the case.</p>
      </div>

      <meta itemprop='headline' content='[C++] Dynamically Allocated Multi-dimensional vs Single-dimensional Arrays'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/justaguy.html'><span itemprop='name'>justaguy</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-02-14T04:30:03Z'>
            <time itemprop='dateModified' datetime='2016-08-04T14:22:12Z' class='post-time'>
              August 4, 2016,  2:22pm
            </time>
        <span itemprop='position'>#8</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Lin, post:7, topic:549831”][quote author=justaguy link=topic=668716.msg4472306#msg4472306 date=1423805546]<br>
After benchmarking your code it seems zeroing out your memory manually slows your code down about 5 times (averaged about 50-60ms) compared to just allocating memory (which is a relatively expensive operation).<br>
[/quote]Oh wow, that’s very interesting. So even though most of the samples were on the allocation line, manually setting the pointers to 0 had a major impact? That’s not something I would’ve expected. Anyways I guess the conclusion to draw is allocating any sort of memory is very expensive, as Fat Cookies and imthenull pointed out, as it’s not related to the size but the amount of times you allocate it. Still, I find it odd the improvements would be as major as they were, but that’s memory for you I guess. Thanks all for the help and insights <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>[quote author=justaguy link=topic=668716.msg4472306#msg4472306 date=1423805546]<br>
Otherwise, what Fat Cookies said makes sense since a lot of jumping around is going to be done in memory with several blocks in different places as opposed to one giant block as a single dimensional array. As a consequence of that, I’d be willing to bet you’re still missing out on cache. Since a single dimension is one contiguous block and since cache these days are somewhat large (relatively speaking of course) in size, I would imagine a large chunk of that contiguous block can be cached. But if blocks are spread apart throughout memory, this isn’t cache-friendly.<br>
[/quote]Yeah, I was thinking about all of the cache misses using a 3D array, but I had (probably falsely) assumed that since the arrays were created sequentially, they would also mostly be laid out sequentially. Clearly that wasn’t the case.[/quote]</p>
<p>No problem. <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"> You’ll probably squeeze out as much speed as possible using memset() when it comes to zeroing your memory.</p>
      </div>

      <meta itemprop='headline' content='[C++] Dynamically Allocated Multi-dimensional vs Single-dimensional Arrays'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/T41.html'><span itemprop='name'>T41</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-05-01T03:12:56Z'>
            <time itemprop='dateModified' datetime='2016-08-04T15:05:46Z' class='post-time'>
              August 4, 2016,  3:05pm
            </time>
        <span itemprop='position'>#9</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <pre><code class="lang-auto">char ***threedee = malloc(x * y * z);</code></pre>
      </div>

      <meta itemprop='headline' content='[C++] Dynamically Allocated Multi-dimensional vs Single-dimensional Arrays'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/c-dynamically-allocated-multi-dimensional-vs-single-dimensional-arrays/549831 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:05:38 GMT -->
</html>
