<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Core Server Changes - New content development</title>
    <link>https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190</link>
    <description>After the alpha of the server, and through my content development, we have discovered a few problems with the core of the server. These problems could be overcome with changes to the current source, but the end result would be jumbled and messy. 

We&#39;ve come to a set of solutions that I think should work really well.

Quick overview: Lua scripting design, metadata definitions, core rewrite (kinda)

[size=18pt][u][b]Lua scripting[/b][/u][/size]

The ruby plugin system just wasn&#39;t cutting it. It&#39;s not a ruby fault, it&#39;s simply that the way it was designed didn&#39;t make development faster and didn&#39;t appeal to the community to get people to develop with us. The new scripting system is [i]DavidApproved[/i]™, meaning that I believe anyone in the community will be able to pick it up pretty easily and start developing content for us. I have never used lua before but I still found the sample scripts sinisoul gave me to be easy to understand and looked easy to create.

[u]Key changes in design:[/u]

The current Java content system uses an inconsistent dispatcher pattern. This means, for some things you allow one bind per &#39;action&#39;. For example, item on object handlers have a hash (item &lt;&lt; 16 | object or something), and it uses a map to bind that hash to a handler. The problem with this is that if you are binding handlers automatically en-masse, you have no easy and clean way to create conditional changes in the handler. A key example for this is quests, when an item may have more options or a NPC has different dialogue with certain quest progress. Other handlers use a context that iterates over all of the handlers and then stops the loop when a handler says &quot;I can handle this one!&quot;.  This is going to be completely replaced with a one-bind system like the first one, but done with scripting. That way everything is easy to find and conditionals can easily be added in code and then found later to change.

[u]Example[/u]
[code=lua]
-- bankers.lua

banker_ids { 44, 45 }

bind (npc.action, option.two, banker_ids, bankers_opt_one)
bind (npc.action, option.two, banker_ids, bankers_opt_two)

bankers_option_one function() {
 -- dialogue code
}

bankers_option_two function() {
  -- open bank code
}
[/code]

Now let&#39;s say I wanted to add a conditional for a quest to change something, it&#39;d be as simple as this:

[code=lua]
-- bankers.lua

banker_ids { 44, 45 }

bind (npc.action, option.two, banker_ids, bankers_opt_one)
bind (npc.action, option.two, banker_ids, bankers_opt_two)

bankers_option_one function() {
 -- dialogue code
}

bankers_option_two function() {
  if quest_progress(quest.rat_catcher) &lt; 3 then
    -- do something else
  else 
    -- open bank code
  end
}
[/code]

Now [i]everything[/i] related to bankers will go in this plugin. If someone tries to bind npc option 1 or 2 to those ids somewhere else, it will throw an exception and tell them to add their code into this plugin. You could also put the bank booths in here if you desired, how grouped exactly everything is going to be has to be discussed. 


[size=18pt][u][b]Metadata[/b][/u][/size]
(waiting on sinisoul for explanation)</description>
    
    <lastBuildDate>Fri, 16 Jan 2015 22:01:46 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Core Server Changes - New content development</title>
        <dc:creator><![CDATA[@sinisoul sini]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sinisoul">@sinisoul</a> wrote:</p>
          <blockquote>
              <p>[spoiler=k]<br>
I don’t think this guy knows who I am</p>
<p>I’m [size=36pt]MOTHA FOUKIN SINISOUL[/size]</p>
<p>jk ur inclined to have ur opinions<br>
[/spoiler]</p>
<p>Repository is unofficially @ <a href="http://github.com/hadyn/mopar" rel="nofollow noopener">github.com/hadyn/mopar</a></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/24">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/24</link>
        <pubDate>Fri, 16 Jan 2015 22:01:46 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549190-24</guid>
        <source url="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190.rss">Core Server Changes - New content development</source>
      </item>
      <item>
        <title>Core Server Changes - New content development</title>
        <dc:creator><![CDATA[@davidi2 Davidi2]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/davidi2">@davidi2</a> wrote:</p>
          <blockquote>
              <p>[quote=“sinisoul, post:22, topic:549190”][quote author=Qu link=topic=668095.msg4468317#msg4468317 date=1421444733]<br>
Hello Winterlove. How I have missed you so much.  :palm:<br>
[/quote]</p>
<p>???[/quote]Dont feed the troll</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/23">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/23</link>
        <pubDate>Fri, 16 Jan 2015 21:55:51 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549190-23</guid>
        <source url="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190.rss">Core Server Changes - New content development</source>
      </item>
      <item>
        <title>Core Server Changes - New content development</title>
        <dc:creator><![CDATA[@sinisoul sini]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sinisoul">@sinisoul</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="21" data-topic="549190">
<div class="title">
<div class="quote-controls"></div>
 Qu:</div>
<blockquote>
<p>Hello Winterlove. How I have missed you so much.  :palm:</p>
</blockquote>
</aside>
<p>???</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/22">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/22</link>
        <pubDate>Fri, 16 Jan 2015 21:48:04 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549190-22</guid>
        <source url="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190.rss">Core Server Changes - New content development</source>
      </item>
      <item>
        <title>Core Server Changes - New content development</title>
        <dc:creator><![CDATA[@Qu11 Qu]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/qu11">@Qu11</a> wrote:</p>
          <blockquote>
              <p>Hello Winterlove. How I have missed you so much.  :palm:</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/21">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/21</link>
        <pubDate>Fri, 16 Jan 2015 21:45:33 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549190-21</guid>
        <source url="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190.rss">Core Server Changes - New content development</source>
      </item>
      <item>
        <title>Core Server Changes - New content development</title>
        <dc:creator><![CDATA[@davidi2 Davidi2]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/davidi2">@davidi2</a> wrote:</p>
          <blockquote>
              <p>I mean it’s not like we don’t recognize the issue that was brought up, we had talked about it in length before making our decision. As the primary content developer I have recognized the pros and cons of both options (again, we do recognize the cons of what we decided on) but after considering both options I think the central design will work best.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/20">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/20</link>
        <pubDate>Fri, 16 Jan 2015 19:44:12 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549190-20</guid>
        <source url="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190.rss">Core Server Changes - New content development</source>
      </item>
      <item>
        <title>Core Server Changes - New content development</title>
        <dc:creator><![CDATA[@sinisoul sini]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sinisoul">@sinisoul</a> wrote:</p>
          <blockquote>
              <p>Because determining priority means you have to first sort by priority which either goes one a few ways; you have to assign a numeric value to the priority or you utilize first come first serve. The first isn’t possible, since logically that isn’t how the system works. First come first serve would suffice for conditions but then it would be hard to keep track of all those conditions scattered through files where people may or may not know they exist. My philosophy, so far, with this project is centralization. Keeping conditions such as this centralized in a single file will help keep clarity when expanding the code base. It’s not something I’m going to debate anymore since I’ve spent a lot of time doing so with multiple parties, and with personal experience I am confident this is the correct way forward.</p>
<p>Anyway. I will have David update the main post with better examples. Carry on.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/19">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/19</link>
        <pubDate>Fri, 16 Jan 2015 19:26:03 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549190-19</guid>
        <source url="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190.rss">Core Server Changes - New content development</source>
      </item>
      <item>
        <title>Core Server Changes - New content development</title>
        <dc:creator><![CDATA[@bowserjr2 Bowser jr]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/bowserjr2">@bowserjr2</a> wrote:</p>
          <blockquote>
              <p>What kind of problems with the “priority system” do you see that won’t happen with this system? In other words, what kind of conflicts would you have to take into consideration?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/18">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/18</link>
        <pubDate>Fri, 16 Jan 2015 16:10:46 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549190-18</guid>
        <source url="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190.rss">Core Server Changes - New content development</source>
      </item>
      <item>
        <title>Core Server Changes - New content development</title>
        <dc:creator><![CDATA[@sinisoul sini]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sinisoul">@sinisoul</a> wrote:</p>
          <blockquote>
              <p>Lua is pretty barebones. There aren’t many special types and although theres metaprogramming none of the API delves into that. As long as you understand the basics of table you’ll be fine.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/17">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/17</link>
        <pubDate>Fri, 16 Jan 2015 00:27:59 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549190-17</guid>
        <source url="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190.rss">Core Server Changes - New content development</source>
      </item>
      <item>
        <title>Core Server Changes - New content development</title>
        <dc:creator><![CDATA[@davidi2 Davidi2]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/davidi2">@davidi2</a> wrote:</p>
          <blockquote>
              <p>[quote=“arham 4, post:14, topic:549190”]Ugh, LUA. I never contributed to the server (except for like 2 commits I think?), but if someone were to contribute, pretty sure that’d shoo them away just as easily Ruby does…[/quote]As someone that didn’t want to learn ruby, I completely disagree. Lua looks about 10x simpler than ruby, but maybe that’s just because I haven’t looked into it too much yet. We’ll see.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/16">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/16</link>
        <pubDate>Fri, 16 Jan 2015 00:11:31 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549190-16</guid>
        <source url="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190.rss">Core Server Changes - New content development</source>
      </item>
      <item>
        <title>Core Server Changes - New content development</title>
        <dc:creator><![CDATA[@stCky stCky]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/stcky">@stCky</a> wrote:</p>
          <blockquote>
              <p>Oooh, LUA. Awesome.</p>
<p>Super easy to pick up and fun too. A bit weary of keeping track of code across multiple files, git commit history will help but git seems daunting to some members still.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/15">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/15</link>
        <pubDate>Thu, 15 Jan 2015 23:34:00 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549190-15</guid>
        <source url="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190.rss">Core Server Changes - New content development</source>
      </item>
      <item>
        <title>Core Server Changes - New content development</title>
        <dc:creator><![CDATA[@arham_4 arham 4]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/arham_4">@arham_4</a> wrote:</p>
          <blockquote>
              <p>Ugh, LUA. I never contributed to the server (except for like 2 commits I think?), but if someone were to contribute, pretty sure that’d shoo them away just as easily Ruby does…</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/14">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/14</link>
        <pubDate>Thu, 15 Jan 2015 23:22:27 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549190-14</guid>
        <source url="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190.rss">Core Server Changes - New content development</source>
      </item>
      <item>
        <title>Core Server Changes - New content development</title>
        <dc:creator><![CDATA[@sinisoul sini]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sinisoul">@sinisoul</a> wrote:</p>
          <blockquote>
              <p>I’ve worked with chains, it turns out messier than the one I had decided on to do. eg: Apollo</p>
<p>I have some designs and diagrams I’m willing to post but I rather everything be set in stone first. Please don’t take these too seriously it’s all tentative.</p>
<p>I don’t mean to sound like the opinions listed above as not seriously. I want to negotiate a way for this to work out however I will propose my argument ASAP. Dealing with landowner.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/13">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/13</link>
        <pubDate>Thu, 15 Jan 2015 22:45:20 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549190-13</guid>
        <source url="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190.rss">Core Server Changes - New content development</source>
      </item>
      <item>
        <title>Core Server Changes - New content development</title>
        <dc:creator><![CDATA[@davidi2 Davidi2]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/davidi2">@davidi2</a> wrote:</p>
          <blockquote>
              <p>[quote=“Miss Silabsoft, post:11, topic:549190”]it still stands that design is crap for collaboration and for the ability for others to actually use the source. you better make some plugin installation / removal thing for easy insert destroy[/quote]git commit history should help a bit, ill talk to sinisoul about what the possibilities are</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/12">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/12</link>
        <pubDate>Thu, 15 Jan 2015 22:37:08 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549190-12</guid>
        <source url="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190.rss">Core Server Changes - New content development</source>
      </item>
      <item>
        <title>Core Server Changes - New content development</title>
        <dc:creator><![CDATA[@silabsoft RuneAgent]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/silabsoft">@silabsoft</a> wrote:</p>
          <blockquote>
              <p>it still stands that design is crap for collaboration and for the ability for others to actually use the source. you better make some plugin installation / removal thing for easy insert destroy</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/11">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/11</link>
        <pubDate>Thu, 15 Jan 2015 22:25:41 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549190-11</guid>
        <source url="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190.rss">Core Server Changes - New content development</source>
      </item>
      <item>
        <title>Core Server Changes - New content development</title>
        <dc:creator><![CDATA[@davidi2 Davidi2]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/davidi2">@davidi2</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="9" data-topic="549190">
<div class="title">
<div class="quote-controls"></div>
 Miss Silabsoft:</div>
<blockquote>
<p>[quote](and is how RS does it)</p>
</blockquote>
</aside>
<p>prove that nigga you are a full of shit because its a stupid design.[/quote]ask sinisoul, he’s the one that told me</p>
<p>iirc he was just looking at the osrs runescript screenshots that jagex posted a few months ago</p>
<p>EDIT - Yup here it is:<br>
<img src="http://i.imgur.com/heXbHMP.png" alt width="" height=""></p>
<p>As you can see, there is one function for the npc option 1 for the artist, conditionals, and those call the other functions (labels).</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/10</link>
        <pubDate>Thu, 15 Jan 2015 22:03:01 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549190-10</guid>
        <source url="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190.rss">Core Server Changes - New content development</source>
      </item>
      <item>
        <title>Core Server Changes - New content development</title>
        <dc:creator><![CDATA[@silabsoft RuneAgent]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/silabsoft">@silabsoft</a> wrote:</p>
          <blockquote>
              <blockquote>(and is how RS does it)</blockquote>
<p>prove that nigga you are a full of shit because its a stupid design.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/9</link>
        <pubDate>Thu, 15 Jan 2015 21:44:24 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549190-9</guid>
        <source url="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190.rss">Core Server Changes - New content development</source>
      </item>
      <item>
        <title>Core Server Changes - New content development</title>
        <dc:creator><![CDATA[@davidi2 Davidi2]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/davidi2">@davidi2</a> wrote:</p>
          <blockquote>
              <p>[quote=“imthenull, post:6, topic:549190”]i dont like how you’re declaring function in lua[/quote]like I said I have never used lua and actually the code i was giving to sini was just psuedo, its to get the general idea <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
<p>[quote=“Miss Silabsoft, post:7, topic:549190”]1) thats shit</p>
<ol start="2">
<li>i’m not getting what would be terrible about a chained system you would cycle through each if the requirements are satisfied you would break the chain and if not you would continue to the next. That way it would not matter about priority the default action would always be at the end of the chain and satisfy the request.[/quote]idk, thats what I wanted to at first but sinisoul convinced me this way was fine. overall it comes town to a tradeoff either way. The way posted first makes it really easy to find and maintain individual things (and is how RS does it), but the other way makes it easier to maintain larger things that would have to be in individual plugins</li>
</ol>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/8</link>
        <pubDate>Thu, 15 Jan 2015 21:07:32 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549190-8</guid>
        <source url="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190.rss">Core Server Changes - New content development</source>
      </item>
      <item>
        <title>Core Server Changes - New content development</title>
        <dc:creator><![CDATA[@silabsoft RuneAgent]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/silabsoft">@silabsoft</a> wrote:</p>
          <blockquote>
              <ol>
<li>
<p>thats shit</p>
</li>
<li>
<p>i’m not getting what would be terrible about a chained system you would cycle through each if the requirements are satisfied you would break the chain and if not you would continue to the next. That way it would not matter about priority the default action would always be at the end of the chain and satisfy the request.</p>
</li>
</ol>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/7</link>
        <pubDate>Thu, 15 Jan 2015 21:02:38 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549190-7</guid>
        <source url="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190.rss">Core Server Changes - New content development</source>
      </item>
      <item>
        <title>Core Server Changes - New content development</title>
        <dc:creator><![CDATA[@imthenull imthenull]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/imthenull">@imthenull</a> wrote:</p>
          <blockquote>
              <p>i dont like how you’re declaring function in lua… you know you can use…</p>
<p><code>function something_awesome()
    kiss_david()
end</code></p>
<p>???</p>
<p>wow idk where that function came from, i think it’s new in the latest version of lua o.O</p>
<p>edit: oh ya, it’s pretty awesome that yall are finally using lua… it could make switching the core over to another language, such as c, a lot easier if one wanted to.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/6</link>
        <pubDate>Thu, 15 Jan 2015 20:58:18 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549190-6</guid>
        <source url="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190.rss">Core Server Changes - New content development</source>
      </item>
      <item>
        <title>Core Server Changes - New content development</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <p>[quote=“Miss Silabsoft, post:2, topic:549190”]to be honest I’m not a fan. lets say you want to remove a quest you would have to go through multiple files to find all parts relating to that quest.</p>
<p>and I know someone will bring up the argument that quests don’t get removed. To that I say Romeo and Juliet.[/quote]<br>
There’s been more than Romeo and Juliet:<br>
Prince Ali Rescue<br>
Sheep Shearer<br>
Doric’s Quest<br>
Black Knights’ Fortress<br>
Witch’s Potion<br>
Rune Mysteries<br>
Learning the Ropes<br>
Unstable Foundations</p>
<p>Source: <a href="http://runescape.wikia.com/wiki/List_of_quest_release_dates" rel="nofollow noopener">http://runescape.wikia.com/wiki/List_of_quest_release_dates</a></p>
<p>[quote=“Davidi2, post:3, topic:549190”]I said the EXACT same thing to sinisoul (about needing to go through multiple files), and he made the argument that they don’t get removed. He said ‘give me an example of a quest you remove’, and I said holiday events. It’s the most common example.  However he then gave two counterarguments:</p>
<ol>
<li>
<p>You can develop the content to be easy to turn off, thus making it easy to add back in should you desire.<br>
Example</p>
<p><code>
guard_option_two function() {
if quest_progress(quest.winter_event_three) &gt; 1 then
   -- add quest dialogue option
else 
  -- normal dialogue
end</code><br>
If you disable winter_event_three or remove it, the quest progress will return 0 or -1 or whatever you chose, effectively disabling that block of code in all cases where you check for progress.</p>
</li>
<li>
<p>The other system that is possible to achieve the result of allowing multiple plugins/functions to bind to the same action is something like a priority system. You bind the ‘default’ response to the lowest priority, and then if you added a quest you’d add it as a higher priority, etc. Problem with this is that it will get disorganized, having to figure out what all the priorities are for different binds and then finding the plugins themselves when you are looking to change something.[/quote]</p>
</li>
</ol>
<p>But why leave all the extra code in the server? If it’s removed (And will not be “turned on” again) why have it? I understand having it in like a backup and etc, but it would have no use being in the server…</p>
<p>Would it not be possible to write some form of a quest system that uses LUA or what? because that could solve some issues here…</p>
<p>Other then that… I’m still fuzzy on LUA. I mean so far it looks rather straight forward, but what would things like skills look like in LUA?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/5</link>
        <pubDate>Thu, 15 Jan 2015 20:42:36 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549190-5</guid>
        <source url="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190.rss">Core Server Changes - New content development</source>
      </item>
      <item>
        <title>Core Server Changes - New content development</title>
        <dc:creator><![CDATA[@davidi2 Davidi2]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/davidi2">@davidi2</a> wrote:</p>
          <blockquote>
              <p>Here’s the exact conversation about the subject<br>
[1/8/2015 5:00:11 PM] David Insley: if I was writing a quest script<br>
[1/8/2015 5:00:18 PM] Hadyn: okay give me a scenario<br>
[1/8/2015 5:00:22 PM] Hadyn: ill show you a solutio<br>
[1/8/2015 5:00:24 PM] David Insley: and I wanted to bind a special action for bones<br>
[1/8/2015 5:00:34 PM] David Insley: would I have to go into the bones script<br>
[1/8/2015 5:00:36 PM] David Insley: and add it there<br>
[1/8/2015 5:00:37 PM] Hadyn: yes.<br>
[1/8/2015 5:00:41 PM] David Insley: thats what I dont like<br>
[1/8/2015 5:00:44 PM] Hadyn: why<br>
[1/8/2015 5:00:56 PM] Hadyn: it makes sense doesnt it<br>
[1/8/2015 5:01:07 PM] David Insley: not when you could be dealing with 50 items for a quest<br>
[1/8/2015 5:01:19 PM] Hadyn: thats how RS does it o___O<br>
[1/8/2015 5:01:34 PM] Hadyn: I mean I dont think there is another solution really<br>
[1/8/2015 5:01:54 PM] David Insley: priority bind system<br>
[1/8/2015 5:02:16 PM] Hadyn: thats pretty complex, apollo did it, runs into a lot of issues<br>
[1/8/2015 5:02:30 PM] David Insley: i dont see how its that hard<br>
[1/8/2015 5:03:46 PM] David Insley: it just seems weird that you have to edit each items file for the quest<br>
[1/8/2015 5:03:47 PM] Hadyn: bind.item(‘bones’, function()<br>
if at_quest_point(‘davids-problem’, 5) then<br>
– Do special quest function here<br>
end<br>
– Do normal operations here<br>
end)<br>
[1/8/2015 5:03:59 PM] David Insley: and you’d have to keep track of where you made changes<br>
[1/8/2015 5:04:01 PM] David Insley: to remove the quest<br>
[1/8/2015 5:04:02 PM] Hadyn: So thats the scripting solution<br>
[1/8/2015 5:04:16 PM] Hadyn: Well yeah. But when do you remove quests?<br>
[1/8/2015 5:04:22 PM] David Insley: quests is just one example<br>
[1/8/2015 5:04:35 PM] David Insley: its any conditional<br>
[1/8/2015 5:04:39 PM] Hadyn: I mean obviously you’d have to remove the bindings<br>
[1/8/2015 5:04:55 PM] Hadyn: Yeah but thats a rare occurance<br>
[1/8/2015 5:05:02 PM] Hadyn: Name 5+ times that will happen<br>
[1/8/2015 5:05:18 PM] David Insley: a level conditional and they get reset<br>
[1/8/2015 5:05:19 PM] Hadyn: When will a quest be removed? When will conditionals be removed?<br>
[1/8/2015 5:05:20 PM] David Insley: holiday events<br>
[1/8/2015 5:05:28 PM] Hadyn: okay one case<br>
[1/8/2015 5:05:32 PM] Hadyn: I thought of that too<br>
[1/8/2015 5:05:52 PM] Hadyn: but I mean technically instead of removing it<br>
[1/8/2015 5:05:57 PM] Hadyn: you can just deactive the quest<br>
[1/8/2015 5:05:58 PM] David Insley: or if you want to change a detail for a quest<br>
[1/8/2015 5:06:06 PM] David Insley: lets say you have to add a quest<br>
[1/8/2015 5:06:08 PM] Hadyn: or you just keep it in there<br>
[1/8/2015 5:06:08 PM] David Insley: err<br>
[1/8/2015 5:06:18 PM] David Insley: deactivate<br>
[1/8/2015 5:06:19 PM] David Insley: how would you do that<br>
[1/8/2015 5:06:20 PM] Hadyn: ye<br>
[1/8/2015 5:06:41 PM] Hadyn: at_quest_point(‘davids-problem’, 5) &lt;-<br>
[1/8/2015 5:06:54 PM] David Insley: lets brainstorm<br>
[1/8/2015 5:06:54 PM] David Insley: uhhh<br>
[1/8/2015 5:07:01 PM] Hadyn: obviously you cant be a quest point if a quest point doesnt exist<br>
[1/8/2015 5:07:19 PM] Hadyn: and itd be nice if you wanted to reactivate the quest :}D<br>
[1/8/2015 5:07:27 PM] Hadyn: for like nostalgia<br>
[1/8/2015 5:07:29 PM] Hadyn: or future reasons<br>
[1/8/2015 5:07:38 PM] Hadyn: like runescape reactivated some of their content!!!<br>
[1/8/2015 5:08:17 PM] David Insley: like dont get me wrong<br>
[1/8/2015 5:08:30 PM] David Insley: I like the idea of each item and npc and object having its own script<br>
[1/8/2015 5:08:33 PM] Hadyn: + with putting all of your behavior into single bindings its easier to follow than a priority system<br>
[1/8/2015 5:08:41 PM] Hadyn: *each item grouping<br>
[1/8/2015 5:08:45 PM] Hadyn: obv<br>
[1/8/2015 5:08:49 PM] Hadyn: dragon_bone.lua<br>
[1/8/2015 5:08:51 PM] Hadyn: doesnt exist<br>
[1/8/2015 5:08:52 PM] David Insley: well yeah you’re not gunna have 10k<br>
[1/8/2015 5:08:54 PM] David Insley: scripts<br>
[1/8/2015 5:08:56 PM] David Insley: for items<br>
[1/8/2015 5:09:07 PM] Hadyn: just specifically item groupings<br>
[1/8/2015 5:09:08 PM] Hadyn: like bones, etc<br>
[1/8/2015 5:09:31 PM] Hadyn: if you need to have logic for a specific type of item<br>
[1/8/2015 5:09:39 PM] Hadyn: you can override the binding and call the main logic<br>
[1/8/2015 5:09:41 PM] Hadyn: ie<br>
[1/8/2015 5:09:44 PM] Hadyn: let me write an example<br>
[1/8/2015 5:10:50 PM] Hadyn: main_logic = function()<br>
– I do main logic for all bones<br>
end</p>
<p>bind.item(‘bones’, main_logic)</p>
<p>dragon_bone_logic = fuction()<br>
– I do logic for dragon bones!<br>
exec(main_logic)<br>
end<br>
[1/8/2015 5:11:06 PM] Hadyn: then you bind obviously the dragon bone logic to dragon bones<br>
[1/8/2015 5:11:14 PM] Hadyn: and if the logic falls through you continue on to the main logic<br>
[1/8/2015 5:11:25 PM] Hadyn: and its organized in such a way it makes sense for people trying to update/edit logic<br>
[1/8/2015 5:11:34 PM] David Insley: you’d pass<br>
[1/8/2015 5:11:34 PM] Hadyn: and you can always control features by turning them on/off<br>
[1/8/2015 5:11:37 PM] David Insley: the bone as an argument right<br>
[1/8/2015 5:11:43 PM] Hadyn: yeah the item id<br>
[1/8/2015 5:11:48 PM] David Insley: so you could use it<br>
[1/8/2015 5:11:51 PM] David Insley: to get xp, etc<br>
[1/8/2015 5:11:59 PM] Hadyn: yep!<br>
[1/8/2015 5:11:59 PM] David Insley: in whatever map you meta you are using<br>
[1/8/2015 5:12:01 PM] David Insley: ok<br>
[1/8/2015 5:12:01 PM] Hadyn: remembber<br>
[1/8/2015 5:12:03 PM] Hadyn: the meta data<br>
[1/8/2015 5:12:10 PM] Hadyn: get(‘burying.exp’)<br>
[1/8/2015 5:12:11 PM] Hadyn: :}D<br>
[1/8/2015 5:12:16 PM] David Insley: the fuck is that emogi you are using<br>
[1/8/2015 5:12:19 PM] David Insley: I dont get it<br>
[1/8/2015 5:12:20 PM] Hadyn: idk<br>
[1/8/2015 5:12:27 PM] Hadyn: its a mustache man<br>
[1/8/2015 5:12:27 PM] Hadyn: okay<br>
[1/8/2015 5:12:29 PM] Hadyn: im happy<br>
[1/8/2015 5:12:34 PM] Hadyn: cause rsps is fun<br>
[1/8/2015 5:12:41 PM] David Insley: then use <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"> twat<br>
[1/8/2015 5:12:45 PM] Hadyn: im really trying to work with you on making this efficient<br>
[1/8/2015 5:12:52 PM] Hadyn: and comprimise<br>
[1/8/2015 5:12:59 PM] Hadyn: however u spell that<br>
[1/8/2015 5:13:01 PM] Hadyn: anyway<br>
[1/8/2015 5:13:01 PM] David Insley: well that idea seems fine<br>
[1/8/2015 5:13:05 PM] Hadyn: yaaay<br>
[1/8/2015 5:13:15 PM] David Insley: its just sad<br>
[1/8/2015 5:13:20 PM] David Insley: that people cant give us one script file<br>
[1/8/2015 5:13:22 PM] David Insley: to look through<br>
[1/8/2015 5:13:27 PM] David Insley: for when they want to add content<br>
[1/8/2015 5:13:45 PM] Hadyn: EH.<br>
[1/8/2015 5:13:55 PM] David Insley: guess thats the compromise<br>
[1/8/2015 5:13:57 PM] Hadyn: I mean technically they could<br>
[1/8/2015 5:14:03 PM] Hadyn: they COULD override the binding<br>
[1/8/2015 5:14:05 PM] David Insley: less centralized for easier flow</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/4</link>
        <pubDate>Thu, 15 Jan 2015 20:30:36 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549190-4</guid>
        <source url="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190.rss">Core Server Changes - New content development</source>
      </item>
      <item>
        <title>Core Server Changes - New content development</title>
        <dc:creator><![CDATA[@davidi2 Davidi2]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/davidi2">@davidi2</a> wrote:</p>
          <blockquote>
              <p>[quote=“Miss Silabsoft, post:2, topic:549190”]to be honest I’m not a fan. lets say you want to remove a quest you would have to go through multiple files to find all parts relating to that quest.</p>
<p>and I know someone will bring up the argument that quests don’t get removed. To that I say Romeo and Juliet.[/quote]I said the EXACT same thing to sinisoul (about needing to go through multiple files), and he made the argument that they don’t get removed. He said ‘give me an example of a quest you remove’, and I said holiday events. It’s the most common example.  However he then gave two counterarguments:</p>
<ol>
<li>
<p>You can develop the content to be easy to turn off, thus making it easy to add back in should you desire.<br>
Example</p>
<p><code>
guard_option_two function() {
if quest_progress(quest.winter_event_three) &gt; 1 then
   -- add quest dialogue option
else 
  -- normal dialogue
end</code><br>
If you disable winter_event_three or remove it, the quest progress will return 0 or -1 or whatever you chose, effectively disabling that block of code in all cases where you check for progress.</p>
</li>
<li>
<p>The other system that is possible to achieve the result of allowing multiple plugins/functions to bind to the same action is something like a priority system. You bind the ‘default’ response to the lowest priority, and then if you added a quest you’d add it as a higher priority, etc. Problem with this is that it will get disorganized, having to figure out what all the priorities are for different binds and then finding the plugins themselves when you are looking to change something.</p>
</li>
</ol>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/3</link>
        <pubDate>Thu, 15 Jan 2015 20:23:01 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549190-3</guid>
        <source url="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190.rss">Core Server Changes - New content development</source>
      </item>
      <item>
        <title>Core Server Changes - New content development</title>
        <dc:creator><![CDATA[@silabsoft RuneAgent]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/silabsoft">@silabsoft</a> wrote:</p>
          <blockquote>
              <p>to be honest I’m not a fan. lets say you want to remove a quest you would have to go through multiple files to find all parts relating to that quest.</p>
<p>and I know someone will bring up the argument that quests don’t get removed. To that I say Romeo and Juliet.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/2</link>
        <pubDate>Thu, 15 Jan 2015 20:03:20 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549190-2</guid>
        <source url="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190.rss">Core Server Changes - New content development</source>
      </item>
      <item>
        <title>Core Server Changes - New content development</title>
        <dc:creator><![CDATA[@davidi2 Davidi2]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/davidi2">@davidi2</a> wrote:</p>
          <blockquote>
              <p>After the alpha of the server, and through my content development, we have discovered a few problems with the core of the server. These problems could be overcome with changes to the current source, but the end result would be jumbled and messy.</p>
<p>We’ve come to a set of solutions that I think should work really well.</p>
<p>Quick overview: Lua scripting design, metadata definitions, core rewrite (kinda)</p>
<p>[size=18pt]<span class="bbcode-u"><span class="bbcode-b">Lua scripting</span></span>[/size]</p>
<p>The ruby plugin system just wasn’t cutting it. It’s not a ruby fault, it’s simply that the way it was designed didn’t make development faster and didn’t appeal to the community to get people to develop with us. The new scripting system is <span class="bbcode-i">DavidApproved</span>™, meaning that I believe anyone in the community will be able to pick it up pretty easily and start developing content for us. I have never used lua before but I still found the sample scripts sinisoul gave me to be easy to understand and looked easy to create.</p>
<p><span class="bbcode-u">Key changes in design:</span></p>
<p>The current Java content system uses an inconsistent dispatcher pattern. This means, for some things you allow one bind per ‘action’. For example, item on object handlers have a hash (item &lt;&lt; 16 | object or something), and it uses a map to bind that hash to a handler. The problem with this is that if you are binding handlers automatically en-masse, you have no easy and clean way to create conditional changes in the handler. A key example for this is quests, when an item may have more options or a NPC has different dialogue with certain quest progress. Other handlers use a context that iterates over all of the handlers and then stops the loop when a handler says “I can handle this one!”.  This is going to be completely replaced with a one-bind system like the first one, but done with scripting. That way everything is easy to find and conditionals can easily be added in code and then found later to change.</p>
<p><span class="bbcode-u">Example</span></p>
<pre><code class="lang-auto">-- bankers.lua

banker_ids { 44, 45 }

bind (npc.action, option.two, banker_ids, bankers_opt_one)
bind (npc.action, option.two, banker_ids, bankers_opt_two)

bankers_option_one function() {
 -- dialogue code
}

bankers_option_two function() {
  -- open bank code
}</code></pre>
<p>Now let’s say I wanted to add a conditional for a quest to change something, it’d be as simple as this:</p>
<pre><code class="lang-auto">-- bankers.lua

banker_ids { 44, 45 }

bind (npc.action, option.two, banker_ids, bankers_opt_one)
bind (npc.action, option.two, banker_ids, bankers_opt_two)

bankers_option_one function() {
 -- dialogue code
}

bankers_option_two function() {
  if quest_progress(quest.rat_catcher) &lt; 3 then
    -- do something else
  else 
    -- open bank code
  end
}</code></pre>
<p>Now <span class="bbcode-i">everything</span> related to bankers will go in this plugin. If someone tries to bind npc option 1 or 2 to those ids somewhere else, it will throw an exception and tell them to add their code into this plugin. You could also put the bank booths in here if you desired, how grouped exactly everything is going to be has to be discussed.</p>
<p>[size=18pt]<span class="bbcode-u"><span class="bbcode-b">Metadata</span></span>[/size]<br>
(waiting on sinisoul for explanation)</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190/1</link>
        <pubDate>Thu, 15 Jan 2015 19:47:22 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549190-1</guid>
        <source url="https://forum.moparisthebest.com/t/core-server-changes-new-content-development/549190.rss">Core Server Changes - New content development</source>
      </item>
  </channel>
</rss>
