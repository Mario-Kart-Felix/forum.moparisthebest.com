<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/my-c-graphics-library/437058 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Aug 2019 12:17:37 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>My C++ graphics library - Runescape - moparisthebest.com</title>
    <meta name="description" content="Well, when i saw that RSCD is using the Java Native Interface, or JNI for short, I thought it would be fun (nonetheless freaking awesome) to make a graphics library in C++. Why would I? Well, it&amp;#39;s plain and simple. I wan&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="437058.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;My C++ graphics library&#39;" href="437058.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://i.imgur.com/BBgzz.png" />
<meta property="og:image" content="http://i.imgur.com/BBgzz.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/my-c-graphics-library/437058" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/my-c-graphics-library/437058" />
<meta property="og:title" content="My C++ graphics library" />
<meta name="twitter:title" content="My C++ graphics library" />
<meta property="og:description" content="Well, when i saw that RSCD is using the Java Native Interface, or JNI for short, I thought it would be fun (nonetheless freaking awesome) to make a graphics library in C++. Why would I? Well, it‚Äôs plain and simple. I wanted to get more familiar with C++ and, JNI. Plus, this is a good opportunity to refactor as i work üôÇ  What I pretty much did was port over the GameImage class, however it‚Äôs not completely done. What i have managed to complete is:  [ul][li]drawing quadrilaterals, tran..." />
<meta name="twitter:description" content="Well, when i saw that RSCD is using the Java Native Interface, or JNI for short, I thought it would be fun (nonetheless freaking awesome) to make a graphics library in C++. Why would I? Well, it‚Äôs plain and simple. I wanted to get more familiar with C++ and, JNI. Plus, this is a good opportunity to refactor as i work üôÇ  What I pretty much did was port over the GameImage class, however it‚Äôs not completely done. What i have managed to complete is:  [ul][li]drawing quadrilaterals, tran..." />
<meta property="article:published_time" content="2012-03-21T07:32:10+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="437058.html">My C++ graphics library</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/imthenull.html'><span itemprop='name'>imthenull</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-03-21T07:32:10Z'>
            <time itemprop='dateModified' datetime='2016-08-02T16:42:50Z' class='post-time'>
              August 2, 2016,  4:42pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Well, when i saw that RSCD is using the Java Native Interface, or JNI for short, I thought it would be fun (nonetheless freaking awesome) to make a graphics library in C++. Why would I? Well, it‚Äôs plain and simple. I wanted to get more familiar with C++ and, JNI. Plus, this is a good opportunity to refactor as i work <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>What I pretty much did was port over the GameImage class, however it‚Äôs not completely done. What i have managed to complete is:</p>
<p>[ul][li]drawing quadrilaterals, transparent and opaque[/li]<br>
[li]drawing an outline of quadrilaterals[/li]<br>
[li]drawing quadrilaterals with a gradient[/li]<br>
[li]drawing menu buttons (ie the login buttons ‚Äòclick here to log in‚Äô)[/li]<br>
[li]drawing lines, vertically and horizontally[/li]<br>
[li]‚Äòfading‚Äô the current pixels (i can‚Äôt think of a proper name for this‚Ä¶)[/li]<br>
[li]loading external fonts from cache[/li]<br>
[li]drawing text with said fonts[/li][/ul]</p>
<p>Here is picture of ‚Äònative rendering‚Äô<br>
<img src="http://i.imgur.com/BBgzz.png" alt width="546" height="434"></p>
<p>and the code</p>
<p>[code=cpp]<span class="hashtag">#include</span> <br>
<span class="hashtag">#include</span> &lt;string.h&gt;<br>
<span class="hashtag">#include</span> ‚ÄúImageCalculations.h‚Äù</p>
<p>RuneScape::ImageCalculations::ImageCalculations()<br>
{<br>
std::string str(‚ÄúABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!‚Äù\243$%^&amp;*()-_=+[{]};:‚Äô@#~,&lt;.&gt;/?\| ");<br>
for (int i = 0; i &lt; 256; i++)<br>
{<br>
std::string::size_type loc = str.find((char)i, 0);<br>
if (loc == std::string::npos)<br>
{<br>
loc = 74;<br>
}<br>
indexes[i] = loc * 9;<br>
}<br>
}</p>
<p>RuneScape::ImageCalculations::~ImageCalculations()<br>
{<br>
delete[] pixels;<br>
}</p>
<p>int RuneScape::ImageCalculations::getWidth()<br>
{<br>
return this-&gt;defaultWidth;<br>
}</p>
<p>int RuneScape::ImageCalculations::getHeight()<br>
{<br>
return this-&gt;defaultHeight;<br>
}</p>
<p>void RuneScape::ImageCalculations::init(int width, int height)<br>
{<br>
this-&gt;pixels[width * height];<br>
this-&gt;defaultWidth = width;<br>
this-&gt;defaultHeight = height;<br>
setDimensions(0, 0, width, height);</p>
<pre><code> for (unsigned int i = 0; i &lt; (width * height); i++)
 {
     this-&gt;pixels[i] = 0;
 }
</code></pre>
<p>}</p>
<p>void RuneScape::ImageCalculations::setDimensions(int x, int y, int width, int height)<br>
{<br>
if (width &gt; this-&gt;defaultWidth)<br>
{<br>
width = this-&gt;defaultWidth;<br>
}<br>
if (height &gt; this-&gt;defaultHeight)<br>
{<br>
height = this-&gt;defaultHeight;<br>
}<br>
this-&gt;imageX = x;<br>
this-&gt;imageY = y;<br>
this-&gt;width = width;<br>
this-&gt;height = height;<br>
}</p>
<p>void RuneScape::ImageCalculations::resetDimensions(void)<br>
{<br>
this-&gt;imageX = 0;<br>
this-&gt;imageY = 0;<br>
this-&gt;width = this-&gt;defaultWidth;<br>
this-&gt;height = this-&gt;defaultHeight;<br>
}</p>
<p>void RuneScape::ImageCalculations::clearPixels(void)<br>
{<br>
for (unsigned int i = 0; i &lt; (this-&gt;defaultWidth * this-&gt;defaultHeight); i++)<br>
{<br>
this-&gt;pixels[i] = 0;<br>
}<br>
}</p>
<p>void RuneScape::ImageCalculations::setPixelColor(int x, int y, int color)<br>
{<br>
if (x &gt; this-&gt;width || x &lt; 0 || y &gt; this-&gt;height || y &lt; 0)<br>
{<br>
return;<br>
}<br>
this-&gt;pixels[x + (y * this-&gt;defaultWidth)] = color;<br>
}</p>
<p>void RuneScape::ImageCalculations::drawQuad(int x, int y, int width, int height, int color)<br>
{<br>
if (x + width &gt; this-&gt;width)<br>
{<br>
width = this-&gt;width - x;<br>
}<br>
if (y + height &gt; this-&gt;height)<br>
{<br>
height = this-&gt;height - y;<br>
}</p>
<pre><code> int wid = this-&gt;defaultWidth - width;
 int index = x + (y * this-&gt;defaultWidth);

 for (int y = 0; y &lt; height; y++)
 {
     for (int x = 0; x &lt; width; x++)
     {
         this-&gt;pixels[index++] = color;
     }
     index += wid;
 }
</code></pre>
<p>}</p>
<p>void RuneScape::ImageCalculations::drawQuadOutline(int x, int y, int width, int height, int color)<br>
{<br>
drawXAxisLine(x, y, width, color);<br>
drawXAxisLine(x, (y + height) - 1, width, color);<br>
drawYAxisLine(x, y, height, color);<br>
drawYAxisLine((x + width) - 1, y, height, color);<br>
}</p>
<p>void RuneScape::ImageCalculations::drawTransparentQuad(int x, int y, int width, int height, int color, int opacity)<br>
{<br>
if (x + width &gt; this-&gt;width)<br>
{<br>
width = this-&gt;width - x;<br>
}<br>
if (y + height &gt; this-&gt;height)<br>
{<br>
height = this-&gt;height - y;<br>
}<br>
int opaqueness = 256 - opacity;<br>
int rModifier = (color &gt;&gt; 16 &amp; 0xff) * opacity;<br>
int gModifier = (color &gt;&gt; 8 &amp; 0xff) * opacity;<br>
int bModifier = (color &amp; 0xff) * opacity;</p>
<pre><code> int wid = this-&gt;defaultWidth - width;
 int index = x + (y * this-&gt;defaultWidth);
 
 for (int y = -height; y &lt; 0; y++)
 {
     for (int x = -width; x &lt; 0; x++)
     {
         int finR = (this-&gt;pixels[index] &gt;&gt; 16 &amp; 0xff) * opaqueness;
         int finG = (this-&gt;pixels[index] &gt;&gt; 8 &amp; 0xff) * opaqueness;
         int finB = (this-&gt;pixels[index] &amp; 0xff) * opaqueness;
         this-&gt;pixels[index++] = ((rModifier + finR &gt;&gt; 8) &lt;&lt; 16) + ((gModifier + finG &gt;&gt; 8) &lt;&lt; 8) + (bModifier + finB &gt;&gt; 8);
     }
     index += wid;
 }
</code></pre>
<p>}</p>
<p>void RuneScape::ImageCalculations::drawGradientQuad(int x, int y, int width, int heigth, int startCol, int endCol)<br>
{<br>
if (x &lt; imageX)<br>
{<br>
width -= imageX - x;<br>
x = imageX;<br>
}<br>
if (x + width &gt; this-&gt;width)<br>
width = this-&gt;width - x;</p>
<pre><code>int k1 = endCol &gt;&gt; 16 &amp; 0xff, l1 = endCol &gt;&gt; 8 &amp; 0xff, i2 = endCol &amp; 0xff;
int j2 = startCol &gt;&gt; 16 &amp; 0xff, k2 = startCol &gt;&gt; 8 &amp; 0xff, l2 = startCol &amp; 0xff;

int i3 = this-&gt;defaultWidth - width;

int j3 = x + y * this-&gt;defaultWidth;

for (int k3 = 0; k3 &lt; height; k3++)
{
	if (k3 + y &gt;= imageY &amp;&amp; k3 + y &lt; this-&gt;height)
	{
		int l3 = ((k1 * k3 + j2 * (height - k3)) / height &lt;&lt; 16) + ((l1 * k3 + k2 * (height - k3)) / height &lt;&lt; 8) + (i2 * k3 + l2 * (height - k3)) / height;
		for (int i4 = -width; i4 &lt; 0; i4++)
			pixels[j3++] = l3;
		j3 += i3;
	}
	else
	{
		j3 += this-&gt;defaultWidth;
	}
}
</code></pre>
<p>}</p>
<p>void RuneScape::ImageCalculations::drawXAxisLine(int x, int y, int width, int color)<br>
{<br>
if (y &lt; imageY || y &gt;= this-&gt;height)<br>
return;<br>
if (x &lt; imageX) {<br>
width -= imageX - x;<br>
x = imageX;<br>
}<br>
if (x + width &gt; this-&gt;width)<br>
width = this-&gt;width - x;</p>
<pre><code>int xPixel = x + y * this-&gt;defaultWidth;

for (int yPixel = 0; yPixel &lt; width; yPixel++)
	pixels[xPixel + yPixel] = color;
</code></pre>
<p>}</p>
<p>void RuneScape::ImageCalculations::drawYAxisLine(int x, int y, int height, int color)<br>
{<br>
if (x &lt; imageX || x &gt;= this-&gt;width)<br>
return;<br>
if (y &lt; imageY) {<br>
height -= imageY - y;<br>
y = imageY;<br>
}<br>
if (y + height &gt; this-&gt;width)<br>
height = this-&gt;height - y;<br>
int xPixel = x + y * this-&gt;defaultWidth;<br>
for (int yPixel = 0; yPixel &lt; height; yPixel++)<br>
pixels[xPixel + yPixel * this-&gt;defaultWidth] = color;<br>
}</p>
<p>void RuneScape::ImageCalculations::fadeoutPixels(void)<br>
{<br>
int max = this-&gt;defaultWidth * this-&gt;defaultHeight;<br>
for (int i = 0; i &lt; max; i++)<br>
{<br>
int color = this-&gt;pixels[i] &amp; 0xffffff;<br>
this-&gt;pixels[i] = (color &gt;&gt; 1 &amp; 0x7f7f7f) + (color &gt;&gt; 2 &amp; 0x3f3f3f) + (color &gt;&gt; 3 &amp; 0x1f1f1f) + (color &gt;&gt; 4 &amp; 0xf0f0f);<br>
}<br>
}</p>
<p>void RuneScape::ImageCalculations::loadFont(char* data)<br>
{<br>
fonts.push_back(data);<br>
}</p>
<p>void RuneScape::ImageCalculations::drawString(char* data, int x, int y, int font, int color, bool useShadow)<br>
{<br>
const char* fontData = this-&gt;fonts.at(font);<br>
for (int i = 0; i &lt; strlen(data); i++)<br>
{<br>
int charIndex = indexes[data[i]];<br>
if (useShadow &amp;&amp; color != 0)<br>
{<br>
formatAndPlotLetter(charIndex, x + 1, y, font, 0);<br>
formatAndPlotLetter(charIndex, x, y + 1, font, 0);<br>
}<br>
formatAndPlotLetter(charIndex, x, y, font, color);<br>
x += fontData[charIndex + 7];<br>
}<br>
}</p>
<p>void RuneScape::ImageCalculations::drawCenteredString(char* data, int x, int y, int font, int color, bool useShadow)<br>
{<br>
drawString(data, x - getTextWidth(data, font) / 2, y, font, color, useShadow);<br>
}</p>
<p>void RuneScape::ImageCalculations::formatAndPlotLetter(int charIndex, int x, int y, int font, int color)<br>
{<br>
const char* fontData = this-&gt;fonts.at(font);<br>
int x_ = x + fontData[charIndex + 5];<br>
int y_ = y - fontData[charIndex + 6];<br>
int char_width = fontData[charIndex + 3];<br>
int char_height = fontData[charIndex + 4];<br>
int fontIndex = fontData[charIndex] * 16384 + fontData[charIndex + 1] * 128 + fontData[charIndex + 2];<br>
int index = x_ + (y_ * this-&gt;defaultWidth);<br>
int max_width = this-&gt;defaultWidth - char_width;<br>
int max_height = 0;<br>
if (y_ &lt; imageY)<br>
{<br>
int i3 = imageY - y_;<br>
char_height -= i3;<br>
y_ = imageY;<br>
fontIndex += i3 * char_width;<br>
index += i3 * this-&gt;defaultWidth;<br>
}<br>
if (y_ + char_height &gt;= this-&gt;height)<br>
char_height -= ((y_ + char_height) - this-&gt;height) + 1;<br>
if (x_ &lt; imageX)<br>
{<br>
int j3 = imageX - x_;<br>
char_width -= j3;<br>
x_ = imageX;<br>
fontIndex += j3;<br>
index += j3;<br>
max_height += j3;<br>
max_width += j3;<br>
}<br>
if (x_ + char_width &gt;= this-&gt;width)<br>
{<br>
int k3 = ((x_ + char_width) - this-&gt;width) + 1;<br>
char_width -= k3;<br>
max_height += k3;<br>
max_width += k3;<br>
}<br>
if (char_width &gt; 0 &amp;&amp; char_height &gt; 0)<br>
{<br>
plotLetter(font, color, fontIndex, index, char_width, char_height, max_width, max_height);<br>
}<br>
}</p>
<p>void RuneScape::ImageCalculations::plotLetter(int font, int color, int fontIndex, int pixelIndex, int width, int height, int pixelMod, int fontMod)<br>
{<br>
const char* fontData = fonts.at(font);<br>
int l1 = -(width &gt;&gt; 2);<br>
width = -(width &amp; 3);<br>
for (int i2 = -height; i2 &lt; 0; i2++) {<br>
for (int j2 = l1; j2 &lt; 0; j2++) {<br>
if (fontData[fontIndex++] != 0)<br>
pixels[pixelIndex++] = color;<br>
else<br>
pixelIndex++;</p>
<pre><code>		if (fontData[fontIndex++] != 0)
			pixels[pixelIndex++] = color;
		else
			pixelIndex++;

		if (fontData[fontIndex++] != 0)
			pixels[pixelIndex++] = color;
		else
			pixelIndex++;

		if (fontData[fontIndex++] != 0)
			pixels[pixelIndex++] = color;
		else
			pixelIndex++;
	}
	for (int k2 = width; k2 &lt; 0; k2++)
		if (fontData[fontIndex++] != 0)
			pixels[pixelIndex++] = color;
		else
			pixelIndex++;

            pixelIndex += pixelMod;
            fontIndex += fontMod;
	}
</code></pre>
<p>}</p>
<p>void RuneScape::ImageCalculations::drawButton(int x, int y, int width, int height)<br>
{<br>
setDimensions(x, y, x + width, y + height);<br>
drawGradientQuad(x, y, width, height, 5793416, 8884915);</p>
<pre><code>drawXAxisLine(x, y, width, 8884915);
drawXAxisLine(x + 1, y + 1, width - 2, 8884915);
drawXAxisLine(x + 2, y + 2, width - 4, 6385815);

drawYAxisLine(x, y, height, 8884915);
drawYAxisLine(x + 1, y + 1, height - 2, 8884915);
drawYAxisLine(x + 2, y + 2, height - 4, 6385815);

drawXAxisLine(x, (y + height) - 1, width, 5793416);
drawXAxisLine(x + 1, (y + height) - 2, width - 2, 5793416);
drawXAxisLine(x + 2, (y + height) - 3, width - 4, 5528952);

drawYAxisLine((x + width) - 1, y, height, 5793416);
drawYAxisLine((x + width) - 2, y + 1, height - 2, 5793416);
drawYAxisLine((x + width) - 3, y + 2, height - 4, 5528952);

resetDimensions();
</code></pre>
<p>}</p>
<p>int RuneScape::ImageCalculations::getTextWidth(char* text, int font)<br>
{<br>
int val = 0, length = strlen(text);<br>
char* fontData = fonts.at(font);<br>
for (int i = 0; i &lt; length; i++) {<br>
if (text[i] == ‚Äò@‚Äô &amp;&amp; i + 4 &lt; length &amp;&amp; text[i + 4] == ‚Äò@‚Äô)<br>
{<br>
i += 4;<br>
}<br>
else if (text[i] == ‚Äò~‚Äô &amp;&amp; i + 4 &lt;length &amp;&amp; text[i + 4] == ‚Äò~‚Äô)<br>
{<br>
i += 4;<br>
}<br>
else<br>
{<br>
val += fontData[indexes[text[i]] + 7];<br>
}<br>
}<br>
return val;<br>
}</p>
<p>int RuneScape::ImageCalculations::getTextHeight(int font)<br>
{<br>
switch (font)<br>
{<br>
case 0:<br>
return 12;<br>
case 1:<br>
case 2:<br>
return 14;<br>
case 3:<br>
case 4:<br>
return 15;<br>
case 5:<br>
return 19;<br>
case 6:<br>
return 24;<br>
case 7:<br>
return 29;<br>
default:<br>
return 0;<br>
}<br>
}[/code]</p>
      </div>

      <meta itemprop='headline' content='My C++ graphics library'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/RSC_xD123.html'><span itemprop='name'>RSC_xD123</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-03-21T11:23:50Z'>
            <time itemprop='dateModified' datetime='2016-08-02T16:42:55Z' class='post-time'>
              August 2, 2016,  4:42pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>You may find JNA more awesome than JNI</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://assets-cdn.github.com/favicon.ico" class="site-icon" width="32" height="32">
      <a href="https://github.com/java-native-access/jna" target="_blank" rel="nofollow noopener">GitHub</a>
  </header>
  <article class="onebox-body">
    <img src="https://avatars3.githubusercontent.com/u/13812895?s=400&amp;v=4" class="thumbnail onebox-avatar" width="150" height="150">

<h3><a href="https://github.com/java-native-access/jna" target="_blank" rel="nofollow noopener">java-native-access/jna</a></h3>

<p>jna - Java Native Access</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>No need to write stupid headers and etc up just use JNA to load the native libs like GDI32 use the <a href="http://msdn.microsoft.com/en-us/library/dd145203(v=vs.85).aspx" rel="nofollow noopener">http://msdn.microsoft.com/en-us/library/dd145203(v=vs.85).aspx</a> as method reference‚Äôs worth looking into, Makes life so much easier</p>
<p>[code]import com.sun.jna.Native;<br>
import com.sun.jna.NativeLong;<br>
import com.sun.jna.Pointer;<br>
import com.sun.jna.Structure;<br>
import com.sun.jna.ptr.IntByReference;<br>
import com.sun.jna.win32.StdCallLibrary;</p>
<p>public interface Kernel32 extends StdCallLibrary {<br>
Kernel32 INSTANCE = (Kernel32) Native.loadLibrary(‚Äúkernel32‚Äù, Kernel32.class);<br>
static int MAX_PATH=256;</p>
<pre><code>/*
 * http://msdn.microsoft.com/en-us/library/ms683180(VS.85).aspx
 */
int GetCurrentProcessId();

/*
 * http://msdn.microsoft.com/en-us/library/ms683179(VS.85).aspx
 * NOT tested
 */
Pointer GetCurrentProcess();

/*
 * http://msdn.microsoft.com/en-us/library/ms679360(VS.85).aspx
 * NOT tested
 */
int GetLastError();

/*
 * http://msdn.microsoft.com/en-us/library/ms684320(VS.85).aspx
 */
Pointer OpenProcess(int dwDesiredAccess, boolean bInheritHandle, int dwProcessId);
int OpenProcess(int dwDesiredAccess, int bInheritHandle, int dwProcessId);

/*
 * http://msdn.microsoft.com/en-us/library/ms680553(VS.85).aspx
 */
boolean ReadProcessMemory(Pointer hProcess, int i, int[] buffer, int nSize, IntByReference outNumberOfBytesRead);
boolean ReadProcessMemory(Pointer hProcess, int i, Pointer buffer, int nSize, IntByReference outNumberOfBytesRead);


/*
 * http://msdn.microsoft.com/en-us/library/ms681674(v=VS.85).aspx
 */
boolean WriteProcessMemory(Pointer hProcess, int lpBaseAddress, int[] lpBuffer, int nSize, int[] lpNumberOfBytesWritten);
boolean WriteProcessMemory(Pointer hProcess, int lpBaseAddress, float[] lpBuffer, int nSize, int[] lpNumberOfBytesWritten);

/*
 * http://msdn.microsoft.com/en-us/library/ms724211(VS.85).aspx
 */
boolean CloseHandle(Pointer hObject);


/*
 * http://msdn.microsoft.com/en-us/library/ms682489(VS.85).aspx
 * http://msdn.microsoft.com/en-us/library/ms686701(VS.85).aspx
 */
Pointer CreateToolhelp32Snapshot(int dwFlags,int th32ProcessID);
    
/*
 * http://msdn.microsoft.com/en-us/library/ms684839(VS.85).aspx
 */
public static class LPPROCESSENTRY32 extends Structure {
	//public static class ByValue     extends LPPROCESSENTRY32 implements Structure.ByValue {}
	//public static class ByReference extends LPPROCESSENTRY32 implements Structure.ByReference {}
	public int				dwSize;							//The size of the structure, in bytes. If you do not initialize dwSize, Process32First fails.
	public int				cntUsage;							//This member is no longer used and is always set to zero.
	public int				th32ProcessID;					//The process identifier.
	public IntByReference	th32DefaultHeapID;					//This member is no longer used and is always set to zero.
	public int				th32ModuleID;						//This member is no longer used and is always set to zero.
	public int				cntThreads;						//The number of execution threads started by the process.
	public int				th32ParentProcessID;			//The identifier of the process that created this process (its parent process).
	public NativeLong      pcPriClassBase;					//The base priority of any threads created by this process.
	public int				dwFlags;							//This member is no longer used and is always set to zero.
	public char[]			szExeFile = new char[MAX_PATH];//The name of the executable file for the process.
	
	public LPPROCESSENTRY32(){
		dwSize=size();
	}
	
	/*
	 * LPPROCESSENTRY32 seems to need the char array. However its not the correct structure.
	 * So this needs to be transformed.
	 */
	public String getSzExeFile(){
		StringBuilder sb = new StringBuilder();
		char a, b;
		for (int i = 0; i &lt; szExeFile.length; i++) {
			a=(char)(szExeFile[i]   &amp;0xFF);
			if (a==0) break;
			sb.append(a);
			
			b=(char)(szExeFile[i]&gt;&gt;8&amp;0xFF);
			if (b==0) break;
			sb.append(b);
		}
		return sb.toString();
	}
}

/*
 * http://msdn.microsoft.com/en-us/library/ms684834(VS.85).aspx
 */
boolean Process32First(Pointer hSnapshot, LPPROCESSENTRY32 lppe);

/*
 * http://msdn.microsoft.com/en-us/library/ms684836(VS.85).aspx
 */
boolean Process32Next(Pointer hSnapshot, LPPROCESSENTRY32 lppe);



/*
 * http://msdn.microsoft.com/en-us/library/ms648042(VS.85).aspx
 */    
Pointer FindResourceA(Pointer hModule, String lpName, String lpType);

/*
 * http://msdn.microsoft.com/en-us/library/ms648047(VS.85).aspx
 */
Pointer LockResource(Pointer hResData);

/*
 * http://msdn.microsoft.com/en-us/library/ms648048(VS.85).aspx
 */    
int SizeofResource(Pointer hModule,Pointer hResInfo);


/*
 * http://msdn.microsoft.com/en-us/library/ms648037(VS.85).aspx
 */
public static interface ENUMRESNAMEPROC extends StdCallCallback {
	public abstract boolean callback(Pointer hModule, String lpszType, String lpszName, IntByReference lParam);
}
boolean EnumResourceNamesA(Pointer hModule,String lpszType, ENUMRESNAMEPROC lpEnumFunc, IntByReference lParam);




/*
 * http://msdn.microsoft.com/en-us/library/ms724958(VS.85).aspx
 * http://www.pinvoke.net/default.aspx/Structures.SYSTEM_INFO
 */
public static class LPSYSTEM_INFO extends Structure {
	public short	wProcessorArchitecture;
	public short	wReserved;		
	public int		dwPageSize;
	public Pointer	lpMinimumApplicationAddress;
	public Pointer	lpMaximumApplicationAddress;
	public Pointer	dwActiveProcessorMask;
	public int		dwNumberOfProcessors;
	public int		dwProcessorType;
	public int		dwAllocationGranularity;
	public short	wProcessorLevel;
	public short	wProcessorRevision;
}    	
	
/*
 * http://msdn.microsoft.com/en-us/library/ms724381(VS.85).aspx
 */
void GetSystemInfo(LPSYSTEM_INFO lpSystemInfo);


/*
 * http://msdn.microsoft.com/en-us/library/aa366775(VS.85).aspx
 */
public static class MEMORY_BASIC_INFORMATION extends Structure {
	public Pointer	BaseAddress;
	public Pointer	AllocationBase;
	public int		AllocationProtect;
	public int		RegionSize;
	public int		State;
	public int		Protect;
	public int		Type;
}

/*
 * http://msdn.microsoft.com/en-us/library/aa366907(VS.85).aspx
 */
public int VirtualQueryEx(Pointer hProcess,Pointer lpAddress, MEMORY_BASIC_INFORMATION lpBuffer, int dwLength);
</code></pre>
<p>}[/code]</p>
      </div>

      <meta itemprop='headline' content='My C++ graphics library'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/imthenull.html'><span itemprop='name'>imthenull</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-03-21T18:40:08Z'>
            <time itemprop='dateModified' datetime='2016-08-02T16:43:13Z' class='post-time'>
              August 2, 2016,  4:43pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>i am aware of jna, as i said in the OP i wanted to get to know jni more.</p>
      </div>

      <meta itemprop='headline' content='My C++ graphics library'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Not_a_bot.html'><span itemprop='name'>Not_a_bot</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-03-21T20:10:36Z'>
            <time itemprop='dateModified' datetime='2016-08-02T16:43:16Z' class='post-time'>
              August 2, 2016,  4:43pm
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Someone should attempt a HTML5 port using OpenGL</p>
      </div>

      <meta itemprop='headline' content='My C++ graphics library'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/my-c-graphics-library/437058 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Aug 2019 12:17:38 GMT -->
</html>
