<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Loading new applet?</title>
    <link>https://forum.moparisthebest.com/t/loading-new-applet/425178</link>
    <description>I wrote up some quick code to try and load the new applet just like a browser would, but I am having some issues with it (an error).

Here is the code (archive attached):
[code=java]
import org.moparscape.Debug;

import javax.swing.*;
import java.applet.Applet;
import java.applet.AppletContext;
import java.applet.AppletStub;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.WindowEvent;
import java.awt.event.WindowListener;
import java.io.FileInputStream;
import java.net.URL;
import java.security.Permissions;
import java.util.Properties;

public class RunApplet implements AppletStub, ActionListener, WindowListener {

    private Properties props = new Properties();
    private Applet appletInstance;
    private Dimension appletSize;

    private boolean appletActive;

    private JFrame frame;
    private String frameTitle = &quot;RunApplet&quot;;

    public static void main(String[] args) {
        new RunApplet(args);
    }

    public RunApplet(String[] args) {

        if (args.length &lt; 1) {
            System.out.println(&quot;usage: RunApplet jarFile propertiesFile mainClass width height codeBase documentBase [debug]&quot;);
            return;
        }
        if (args.length &gt; 7)
            Debug.setDebug();

        String jarFile, propertiesFile, mainClass;
        int width, height;

        propertiesFile = getPropertySetDefault(&quot;propertiesFile&quot;, args, 1);

        try {
            props.load(new FileInputStream(propertiesFile));
            jarFile = getPropertySetDefault(&quot;jarFile&quot;, args, 0);
            mainClass = getPropertySetDefault(&quot;mainClass&quot;, args, 2);
            width = getPropertyIntSetDefault(&quot;width&quot;, args, 3);
            height = getPropertyIntSetDefault(&quot;height&quot;, args, 4);
            getPropertySetDefault(&quot;getCodeBase&quot;, args, 5);
            getPropertySetDefault(&quot;getDocumentBase&quot;, args, 6);
        } catch (Exception e) {
            System.out.println(&quot;Properties file does not exist, exiting...&quot;);
            return;
        }

        JFrame.setDefaultLookAndFeelDecorated(true);
        JDialog.setDefaultLookAndFeelDecorated(true);
        JPopupMenu.setDefaultLightWeightPopupEnabled(false);
        frame = new JFrame(frameTitle);
        initJMenuBar();

        try {
            ClassLoader loader = new org.moparscape.classloader.CRCClassLoader(jarFile);

            //System.setSecurityManager(new org.moparscape.security.SecurityManager());
            // set client permissions
            //if (System.getSecurityManager() instanceof org.moparscape.security.SecurityManager)
            //    ((org.moparscape.security.SecurityManager) System.getSecurityManager()).addPermissions(loader, getPermissions(jarFile));

            appletInstance = (Applet) loader.loadClass(mainClass).newInstance();
            appletSize = new Dimension(width, height);
        } catch (Exception e) {
            System.out.println(&quot;Error loading main class, exiting...&quot;);
            e.printStackTrace();
            return;
        }

        appletInstance.setStub(this);
        initUI();
        try {
            appletInstance.init();
        } catch (Exception e) {
            System.out.println(&quot;Fatal error on applet.init() call: &quot; + e.getMessage());
            e.printStackTrace();
            System.exit(0);
        }
        appletActive = true;
        appletInstance.start();
    }
/*
    public static Permissions getPermissions(String allowedDir) {
        Permissions permissions = org.moparscape.security.SecurityManager.getClientPermissions(allowedDir);
        return permissions;
    }
*/
    /**
     * Starts up the GUI
     */
    public void initUI() {

        frame.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);
        frame.setResizable(false);
        frame.addWindowListener(this);
        JPanel game = new JPanel(new BorderLayout());
        game.setPreferredSize(appletSize);
        game.add(appletInstance);

        frame.getContentPane().add(game, BorderLayout.CENTER);
        frame.pack();
        frame.setVisible(true);
    }

    private void initJMenuBar() {

        String[] titles = {&quot;File&quot;};
        String[][] content = {
                {&quot;Quit&quot;}
        };

        JMenuBar menuBar = makeMenuBar(titles, content);
        frame.setJMenuBar(menuBar);
    }

    /**
     * Creates a new JMenuBar from the given input. All menu contents are
     * added to this actionlistener.
     *
     * @param menuTitles  A String[] of the menu titles.
     * @param menuContent A String[][] of the menu contents, &quot;-&quot; adds a seperator
     * @param aL          An ActionListener to add to the menu items.
     * @return new JMenuBar already set up.
     */
    private JMenuBar makeMenuBar(String[] menuTitles, String[][] menuContent) {
        JMenuBar menuBar = new JMenuBar();
        for (int x = 0; x &lt; menuTitles.length; ++x) {
            JMenu fileMenu = new JMenu(menuTitles[x]);
            for (String name : menuContent[x]) {
                JMenuItem menuItem = new JMenuItem(name);
                if (name.equalsIgnoreCase(&quot;-&quot;))
                    fileMenu.addSeparator();
                else {
                    menuItem.addActionListener(this);
                    fileMenu.add(menuItem);
                }
            }
            menuBar.add(fileMenu);
        }
        return menuBar;
    }

    /**
     * Overrides actionPerformed() in ActionListener.
     *
     * @param evt An ActionEvent.
     */
    public void actionPerformed(ActionEvent evt) {
        String cmd = evt.getActionCommand();

        if (cmd != null) {
            if (cmd.equals(&quot;Quit&quot;)) {
                windowClosing(null); //dont bother giving it an event
            }
        }
    }

    public void windowActivated(WindowEvent evt) {
    }

    public void windowDeactivated(WindowEvent evt) {
    }

    public void windowIconified(WindowEvent evt) {
    }

    public void windowDeiconified(WindowEvent evt) {
    }

    public void windowOpened(WindowEvent evt) {
    }

    public void windowClosed(WindowEvent evt) {
    }

    public void windowClosing(WindowEvent evt) {
        System.out.println(&quot;Exiting...&quot;);
        appletInstance.stop();
        appletActive = false;
        appletInstance.destroy();
        frame.dispose();
    }

    public String getPropertySetDefault(String key, String[] args, int index) {
        // if its in properties already, return it
        String ret = null;
        if (props != null)
            ret = props.getProperty(key);
        if (ret != null)
            return ret;
        // if that index exists in args, set the property and return it
        if (index &lt; args.length) {
            ret = args[index];
            if (props != null)
                props.setProperty(key, ret);
            return ret;
        }
        // otherwise we need something that we don&#39;t have, so print message and cease execution
        System.out.println(String.format(&quot;Can&#39;t find value for key &#39;%s&#39;, either supply it via command line or properties file.&quot;, key));
        System.exit(0);
        return null;
    }

    public int getPropertyIntSetDefault(String key, String[] args, int index) {
        String sret = getPropertySetDefault(key, args, index);
        int ret = 0;
        try {
            ret = Integer.parseInt(sret);
        } catch (NumberFormatException e) {
            System.out.println(String.format(&quot;Value for key &#39;%s&#39; must be an integer, either supply it via command line or properties file.&quot;, key));
            System.exit(0);
        }
        return ret;
    }

    /**
     * ***************************************************************
     * Methods below override those in AppletStub.
     * ****************************************************************
     */

    /**
     * Gives the applet the codebase.
     *
     * @return The value of the getCodeBase key in the properties.
     */
    public URL getCodeBase() {
        Debug.debug(&quot;Applet is calling getCodeBase()&quot;);
        try {
            return new URL(props.getProperty(&quot;getCodeBase&quot;));
        } catch (Exception e) {
            return null;
        }
    }

    /**
     * Gives the applet the documentbase.
     *
     * @return The value of the getDocumentBase key in the properties.
     */
    public URL getDocumentBase() {
        Debug.debug(&quot;Applet is calling getDocumentBase()&quot;);
        try {
            return new URL(props.getProperty(&quot;getDocumentBase&quot;));
        } catch (Exception e) {
            return null;
        }
    }

    /**
     * Gives the applet the parameters it asks for.
     *
     * @param name Name of the parameter.
     * @return The value of the name key in the properties.
     */
    public String getParameter(String name) {
        Debug.debug(&quot;Param- &quot; + name + &quot;:&quot; + props.getProperty(name));
        return props.getProperty(name);
    }

    /**
     * Gets the Applet Context
     *
     * @return A PseudoAppletContext that the applet can use.
     */
    public AppletContext getAppletContext() {
        Debug.debug(&quot;Applet is calling getAppletContext()&quot;);
        return null;
    }

    /**
     * Not used in this implementation yet.
     *
     * @param width  width
     * @param height height
     */
    public void appletResize(int width, int height) {
        Debug.debug(&quot;Applet is calling appletResize(&quot; + width + &quot;, &quot; + height + &quot;)&quot;);
    }

    /**
     * Tells the applet whether it is active or not.
     *
     * @return True
     */
    public boolean isActive() {
        Debug.debug(&quot;Applet is calling isActive()&quot;);
        return appletActive;
    }
}
[/code]

And when it is ran with these files downloaded in the working directory:
http://www.moparisthebest.com/rs/gamepack.jar
http://www.moparisthebest.com/rs/gamepack.jar.properties

This happens:
[code]
mopar@killer-linux:/tmp/runapplet$ unzip RunApplet.java.zip 
Archive:  RunApplet.java.zip
  inflating: RunApplet.java          
   creating: org/
   creating: org/moparscape/
  inflating: org/moparscape/Debug.java  
   creating: org/moparscape/classloader/
  inflating: org/moparscape/classloader/CRCClassLoader.java  
   creating: org/moparscape/security/
  inflating: org/moparscape/security/SecurityManager.java  
mopar@killer-linux:/tmp/runapplet$ javac RunApplet.java 
mopar@killer-linux:/tmp/runapplet$ wget -q http://www.moparisthebest.com/rs/gamepack.jar
mopar@killer-linux:/tmp/runapplet$ wget -q http://www.moparisthebest.com/rs/gamepack.jar.properties
mopar@killer-linux:/tmp/runapplet$ java RunApplet ./gamepack.jar ./gamepack.jar.properties Rs2Applet 768 502 &quot;http://world7.runescape.com&quot; &quot;http://world7.runescape.com/g=runescape/,j0,f209935550465376260&quot; 1
Debug has been enabled.
Param- 0:XPJO8Gv*eKQ3AUOJhwyIfg
Param- -1:LDtaUS5fvakwJ6UyCbWlBQ
Error: Rs2Applet.init:332 RunApplet.&lt;init&gt;:84 RunApplet.main:29 | java.lang.RuntimeException
Fatal error on applet.init() call: null
d
        at c.a(c.java:30)
        at Rs2Applet.a(Rs2Applet.java:130)
        at Rs2Applet.init(Rs2Applet.java:332)
        at RunApplet.&lt;init&gt;(RunApplet.java:84)
        at RunApplet.main(RunApplet.java:29)
Caused by: java.lang.RuntimeException: java.lang.RuntimeException
        at Rs2Applet.a(Rs2Applet.java:128)
        ... 3 more
Caused by: java.lang.RuntimeException
        ... 3 more
mopar@killer-linux:/tmp/runapplet$
[/code]

Any ideas on what to do there?

I did notice, when applying my SecurityManager, that I think they make a call to setSecurityManager themselves, can anyone confirm that?  If so, there is probably no good clean way to get around it.

Has anyone got the new client to load?</description>
    
    <lastBuildDate>Thu, 15 Dec 2011 03:03:41 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/loading-new-applet/425178.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Loading new applet?</title>
        <dc:creator><![CDATA[@moparisthebest Moparisthebest]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/moparisthebest">@moparisthebest</a> wrote:</p>
          <blockquote>
              <p>Did you over-ride the classloader instead?  I thought about doing that, but JarInputStream was much easier.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/loading-new-applet/425178/16">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/loading-new-applet/425178/16</link>
        <pubDate>Thu, 15 Dec 2011 03:03:41 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-425178-16</guid>
        <source url="https://forum.moparisthebest.com/t/loading-new-applet/425178.rss">Loading new applet?</source>
      </item>
      <item>
        <title>Loading new applet?</title>
        <dc:creator><![CDATA[@_Discardedx21 `Discardedx2`]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/_discardedx21">@_Discardedx21</a> wrote:</p>
          <blockquote>
              <p>[quote=“Moparisthebest, post:14, topic:425178”]Here is the tool I talked about, it dumps gamepack.jar without using any proprietary code at all:</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://forum.moparisthebest.com/uploads/default/original/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a.png" class="site-icon" width="32" height="32">
      <a href="https://forum.moparisthebest.com/" target="_blank">moparisthebest.com</a>
  </header>
  <article class="onebox-body">
    <img src="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" class="thumbnail onebox-avatar" width="500" height="500">

<h3><a href="https://forum.moparisthebest.com/" target="_blank">moparisthebest.com</a></h3>

<p>programming, irc, cars</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>(it actually just let’s jagex dump their own code :))[/quote]</p>
<p>my loader made the RS2Applet decrypt the inner.pack.gz as well… <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=6" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"> used it’s own class loader</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/loading-new-applet/425178/15">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/loading-new-applet/425178/15</link>
        <pubDate>Thu, 15 Dec 2011 02:42:55 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-425178-15</guid>
        <source url="https://forum.moparisthebest.com/t/loading-new-applet/425178.rss">Loading new applet?</source>
      </item>
      <item>
        <title>Loading new applet?</title>
        <dc:creator><![CDATA[@moparisthebest Moparisthebest]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/moparisthebest">@moparisthebest</a> wrote:</p>
          <blockquote>
              <p>Here is the tool I talked about, it dumps gamepack.jar without using any proprietary code at all:</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://forum.moparisthebest.com/uploads/default/original/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a.png" class="site-icon" width="32" height="32">
      <a href="https://forum.moparisthebest.com/" target="_blank">moparisthebest.com</a>
  </header>
  <article class="onebox-body">
    <img src="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" class="thumbnail onebox-avatar" width="500" height="500">

<h3><a href="https://forum.moparisthebest.com/" target="_blank">moparisthebest.com</a></h3>

<p>programming, irc, cars</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>(it actually just let’s jagex dump their own code :))</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/loading-new-applet/425178/14">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/loading-new-applet/425178/14</link>
        <pubDate>Thu, 15 Dec 2011 01:50:00 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-425178-14</guid>
        <source url="https://forum.moparisthebest.com/t/loading-new-applet/425178.rss">Loading new applet?</source>
      </item>
      <item>
        <title>Loading new applet?</title>
        <dc:creator><![CDATA[@Ollie Ollie]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ollie">@Ollie</a> wrote:</p>
          <blockquote>
              <p>I remember now,</p>
<p>I used the URLClassLoader before but when you reach login screen you get this runtime error, you are still able to play the game.</p>
<p>to solve this I believe you need to load the openGL or directX libraries</p>
<blockquote>java.lang.RuntimeException: 
	at ta.a(ta.java:152)
	at ota.a(ota.java:35)
	at paa.a(paa.java:68)
	at fpa.a(fpa.java:556)
	at k.a(k.java:141)
	at gta.a(gta.java:188)
	at mla.a(mla.java:216)
	at oia.a(oia.java:2179)
	at bda.a(bda.java:287)
	at wl.a(wl.java:1935)
	at qua.a(qua.java:62)
	at client.l(client.java:2165)
	at client.g(client.java:5868)
	at client.b(client.java:2310)
	at ke.d(ke.java:368)
	at ke.e(ke.java:449)
	at ke.run(ke.java:1357)
	at java.lang.Thread.run(Thread.java:662)</blockquote>
<blockquote>ClientCanvas - dja[canvas0,0,0,765x503]
Client - class client
ClientClassLoader - d@44e06940</blockquote>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/loading-new-applet/425178/13">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/loading-new-applet/425178/13</link>
        <pubDate>Thu, 15 Dec 2011 00:44:07 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-425178-13</guid>
        <source url="https://forum.moparisthebest.com/t/loading-new-applet/425178.rss">Loading new applet?</source>
      </item>
      <item>
        <title>Loading new applet?</title>
        <dc:creator><![CDATA[@_Discardedx21 `Discardedx2`]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/_discardedx21">@_Discardedx21</a> wrote:</p>
          <blockquote>
              <p>[quote=“Moparisthebest, post:11, topic:425178”]I changed it to URLClassLoader as well and it still didn’t work for me.</p>
<p>Regardless, got everything working just like I wanted to, I’ll be releasing a neat little tool later after updating getRS.sh to use the new tool. <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>Thanks for the help![/quote]</p>
<p>nice <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"> fixing getRS.sh should be quite simple, the update server changed a bit. i haven’t looked into it yet but from what i’ve heard idx255 isn’t cached anymore</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/loading-new-applet/425178/12">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/loading-new-applet/425178/12</link>
        <pubDate>Thu, 15 Dec 2011 00:01:11 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-425178-12</guid>
        <source url="https://forum.moparisthebest.com/t/loading-new-applet/425178.rss">Loading new applet?</source>
      </item>
      <item>
        <title>Loading new applet?</title>
        <dc:creator><![CDATA[@moparisthebest Moparisthebest]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/moparisthebest">@moparisthebest</a> wrote:</p>
          <blockquote>
              <p>I changed it to URLClassLoader as well and it still didn’t work for me.</p>
<p>Regardless, got everything working just like I wanted to, I’ll be releasing a neat little tool later after updating getRS.sh to use the new tool. <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>Thanks for the help!</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/loading-new-applet/425178/11">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/loading-new-applet/425178/11</link>
        <pubDate>Wed, 14 Dec 2011 22:39:26 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-425178-11</guid>
        <source url="https://forum.moparisthebest.com/t/loading-new-applet/425178.rss">Loading new applet?</source>
      </item>
      <item>
        <title>Loading new applet?</title>
        <dc:creator><![CDATA[@_Discardedx21 `Discardedx2`]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/_discardedx21">@_Discardedx21</a> wrote:</p>
          <blockquote>
              <aside class="quote quote-modified" data-post="9" data-topic="425178">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/user_avatar/forum.moparisthebest.com/moparisthebest/40/30_1.png" class="avatar"> Moparisthebest:</div>
<blockquote>
<p>That works, which is great, but it’s odd because I can’t see any significant differences between my method and yours… <img src="https://forum.moparisthebest.com/images/emoji/twitter/confused.png?v=5" title=":confused:" class="emoji" alt=":confused:"></p>
</blockquote>
</aside>
<p>your’s uses a “CRCClassLoader”, mine uses the class loader in the gamepack.jar. There are a few ways you can go about using a custom loader.</p>
<p>One way is to bootstrap the loader (change the findClass method in the loader to _findClass and make your own subclass of ClassLoader).<br>
Another way is to make the classloader in the gamepack return super.findClass and handle (where super is your class loader).<br>
Yet another way is to decrypt the inner.pack.gz and load the class in your class loader during runtime.</p>
<p>There really is no need to use a custom class loader if you are doing a reflection bot, or if you are just loading the client like runescape does. I will have a go at getting your loader to work for you, it shouldn’t be difficult.</p>
<p>edit: I got it working lol, your problem was with your class loader like i said. but you get error_js5_connect i think thats because the jar you are using wasn’t downloaded straight off the rs site.</p>
<p><code>URLClassLoader loader = new URLClassLoader(new URL[] { new File(jarFile).toURI().toURL() });
            appletInstance = (Applet) loader.loadClass(mainClass).newInstance();
            appletSize = new Dimension(width, height);</code></p>
<p>if you want help using a custom class loader let me know lol, but for your purpose you don’t need one.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/loading-new-applet/425178/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/loading-new-applet/425178/10</link>
        <pubDate>Wed, 14 Dec 2011 17:56:07 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-425178-10</guid>
        <source url="https://forum.moparisthebest.com/t/loading-new-applet/425178.rss">Loading new applet?</source>
      </item>
      <item>
        <title>Loading new applet?</title>
        <dc:creator><![CDATA[@moparisthebest Moparisthebest]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/moparisthebest">@moparisthebest</a> wrote:</p>
          <blockquote>
              <p>That works, which is great, but it’s odd because I can’t see any significant differences between my method and yours… <img src="https://forum.moparisthebest.com/images/emoji/twitter/confused.png?v=5" title=":confused:" class="emoji" alt=":confused:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/loading-new-applet/425178/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/loading-new-applet/425178/9</link>
        <pubDate>Wed, 14 Dec 2011 17:44:30 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-425178-9</guid>
        <source url="https://forum.moparisthebest.com/t/loading-new-applet/425178.rss">Loading new applet?</source>
      </item>
      <item>
        <title>Loading new applet?</title>
        <dc:creator><![CDATA[@_Discardedx21 `Discardedx2`]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/_discardedx21">@_Discardedx21</a> wrote:</p>
          <blockquote>
              <p>one second. ill post an edited version of my bot’s loader to do what you want.</p>
<p>edit:</p>
<pre><code class="lang-auto">
import java.applet.Applet;
import java.awt.Dimension;
import java.io.DataInputStream;
import java.io.IOException;
import java.net.URL;
import java.net.URLClassLoader;
import java.net.URLConnection;
import java.util.logging.Logger;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

import javax.swing.JFrame;

/**
 * A class used to load the RuneScape client in an applet.
 * @author `Discardedx2
 */
public class GameLoader {

	
	/**
	 * The possible languages to load.
	 * @author `Discardedx2
	 */
	public static enum Language {
        ENGLISH(0),
        GERMAN(1),
        FRENCH(2),
	    PORTUGUESE(3);
        
        /**
         * The language id.
         */
        final int id;
        
        Language(int id) {
        	this.id = id;
        }
        
        /**
         * Gets the language id.
         * @return the id.
         */
        public int getId() {
        	return id;
        }

        @Override
        public String toString() {
            return (id &gt;= 1 ? "l=" + id + "/" : "");
        }
	}
	
	/**
	 * This class' logger.
	 */
	private final static Logger logger = Logger.getLogger(GameLoader.class.getSimpleName());
	/**
	 * The source (world id) pattern.
	 */
	public static final Pattern SOURCE_PATTERN = Pattern.compile("src=\"(.*)\" ");
	/**
	 * The parameter pattern.
	 */
	public static final Pattern PARAMETER_PATTERN = Pattern.compile("&lt;param name=\"([^\\s]+)\"\\s+value=\"([^&gt;]*)\"&gt;");
	/**
	 * The applet.
	 */
	private Applet applet;

	/**
	 * Generates the runescape applet and adds it to a frame.
	 * @throws Exception
	 */
	public GameLoader(Language language) throws Exception {
		logger.info("Generating applet information...");
		String source = getPageSource(new URL("http://www.runescape.com/" + language.toString() + "game.ws?j=1"));
		Matcher matcher = SOURCE_PATTERN.matcher(source);
		if (matcher.find()) {
			String first = matcher.group(1);
			String frameSource = getPageSource(new URL(first));
			GameStub stub = new GameStub(PARAMETER_PATTERN, frameSource);
			URL world = new URL(first.substring(0, first.indexOf("/,")));
			stub.setCodeBase(world);
			stub.setDocumentBase(world);
			URLClassLoader classLoader = new URLClassLoader(new URL[]{ new URL(stub.getCodeBase() + "/"+stub.getParameter("archive")) });
			
			final Applet applet = (Applet) classLoader.loadClass("Rs2Applet").newInstance();
			applet.setStub(stub);
			applet.init();
			applet.start();
			applet.setPreferredSize(new Dimension(840, 680));
			this.applet = applet;
		}
	}

	/**
	 * Gets the page source code for the specified URL.
	 * @param url The specified url.
	 * @throws IOException
	 * @throws InterruptedException
	 */
	private static String getPageSource(URL url) throws IOException, InterruptedException {
		URLConnection uc = url.openConnection();
		uc.addRequestProperty("Accept",	"text/xml,application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5");
		uc.addRequestProperty("Accept-Charset",	"ISO-8859-1,utf-8;q=0.7,*;q=0.7");
		uc.addRequestProperty("Accept-Encoding", "gzip,deflate");
		uc.addRequestProperty("Accept-Language", "en-gb,en;q=0.5");
		uc.addRequestProperty("Connection", "keep-alive");
		uc.addRequestProperty("Host", "www.runescape.com");
		uc.addRequestProperty("Keep-Alive", "300");
		uc.addRequestProperty("User-Agent", "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.8.0.6) Gecko/20060728 Firefox/1.5.0.6");
		DataInputStream di = new DataInputStream(uc.getInputStream());
		byte[] tmp = new byte[uc.getContentLength()];
		di.readFully(tmp);
		di.close();
		return new String(tmp);
	}

	/**
	 * Gets the applet.
	 * @return the applet.
	 */
	public Applet getApplet() {
		return applet;
	}

	/**
	 * The main method.
	 * @param args The program arguments.
	 * @throws Exception
	 */
	public static void main(String[] args) throws Exception {
		GameLoader loader = new GameLoader(Language.ENGLISH);
		JFrame frame = new JFrame("Game Loader");
		frame.add(loader.getApplet());
		frame.pack();
		frame.setVisible(true);
	}

}</code></pre>
<pre><code class="lang-auto">import java.applet.AppletContext;
import java.applet.AppletStub;
import java.net.URL;
import java.util.HashMap;
import java.util.Map;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

/**
 * A representation of the RuneScape client's stub.
 * @author `Discardedx2
 */
public class GameStub implements AppletStub {

	/**
	 * This applet's parameters.
	 */
	private Map&lt;String, String&gt; parameters = new HashMap&lt;String, String&gt;();
	/**
	 * The document base of this applet.
	 */
	private URL documentBase;
	/**
	 * The code base of this applet.
	 */
	private URL codeBase;
	
	/**
	 * Constructs a new GameStub.
	 * @param parameterPattern The pattern used to identify the applet parameters.
	 * @param frameSource
	 */
	public GameStub(Pattern parameterPattern, String frameSource) {
		Matcher param = parameterPattern.matcher(frameSource);
		while(param.find()) {
			String key = param.group(1);
			String value = param.group(2);
			parameters.put(key, value);
			System.err.println("Parameter loaded.  key="+key+", value="+value);
		}
		if(frameSource.contains("archive")) {
			parameters.put("archive", frameSource.substring(frameSource.indexOf("archive=") + 8, frameSource.indexOf(".jar") + 4));
        }
	}
	
	/**
	 * Sets the document base.
	 * @param documentBase the documentBase to set.
	 */
    public void setDocumentBase(URL documentBase) {
        this.documentBase = documentBase;
    }
    
	/**
	 * Sets the code base.
	 * @param codeBase the codeBase to set.
	 */
    public void setCodeBase(URL codeBase) {
        this.codeBase = codeBase;
    }

	@Override
	public boolean isActive() {
		return true;
	}

	@Override
	public URL getDocumentBase() {
		return documentBase;
	}

	@Override
	public URL getCodeBase() {
		return codeBase;
	}

	@Override
	public String getParameter(String name) {
		return parameters.get(name);
	}

	@Override
	public AppletContext getAppletContext() {
		return null;
	}

	@Override
	public void appletResize(int width, int height) {

	}

}</code></pre>
<p>mopar’s code tags suck</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/loading-new-applet/425178/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/loading-new-applet/425178/8</link>
        <pubDate>Wed, 14 Dec 2011 16:25:51 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-425178-8</guid>
        <source url="https://forum.moparisthebest.com/t/loading-new-applet/425178.rss">Loading new applet?</source>
      </item>
      <item>
        <title>Loading new applet?</title>
        <dc:creator><![CDATA[@moparisthebest Moparisthebest]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/moparisthebest">@moparisthebest</a> wrote:</p>
          <blockquote>
              <p>That’s odd, has anyone else got ideas for implementing a solution to this?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/loading-new-applet/425178/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/loading-new-applet/425178/7</link>
        <pubDate>Wed, 14 Dec 2011 15:20:24 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-425178-7</guid>
        <source url="https://forum.moparisthebest.com/t/loading-new-applet/425178.rss">Loading new applet?</source>
      </item>
      <item>
        <title>Loading new applet?</title>
        <dc:creator><![CDATA[@Ollie Ollie]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ollie">@Ollie</a> wrote:</p>
          <blockquote>
              <p>I kept getting the same error, still haven’t figured out why, might just inject some print out into the init method to find out where exactly the error lies</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/loading-new-applet/425178/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/loading-new-applet/425178/6</link>
        <pubDate>Wed, 14 Dec 2011 00:17:02 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-425178-6</guid>
        <source url="https://forum.moparisthebest.com/t/loading-new-applet/425178.rss">Loading new applet?</source>
      </item>
      <item>
        <title>Loading new applet?</title>
        <dc:creator><![CDATA[@moparisthebest Moparisthebest]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/moparisthebest">@moparisthebest</a> wrote:</p>
          <blockquote>
              <p>But you are decrypting the inner.pack.gz and running it that way, I want to run the un-modified applet just like a browser plugin would but am getting that error.  Any ideas about that?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/loading-new-applet/425178/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/loading-new-applet/425178/5</link>
        <pubDate>Tue, 13 Dec 2011 22:27:12 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-425178-5</guid>
        <source url="https://forum.moparisthebest.com/t/loading-new-applet/425178.rss">Loading new applet?</source>
      </item>
      <item>
        <title>Loading new applet?</title>
        <dc:creator><![CDATA[@Ollie Ollie]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ollie">@Ollie</a> wrote:</p>
          <blockquote>
              <p>[code]package com.atkoli;</p>
<p>import com.atkoli.loader.ClientClassLoader;</p>
<p>import java.applet.Applet;<br>
import java.awt.Graphics;<br>
import java.lang.reflect.Constructor;<br>
import java.lang.reflect.InvocationTargetException;<br>
import java.lang.reflect.Method;<br>
import java.util.HashMap;</p>
<p>public final class RS2Applet extends Applet {</p>
<pre><code>private Object mainClazz = null;
private Class mainClass = null;
private HashMap&lt;String, byte[]&gt; clientfiles;

public RS2Applet(HashMap&lt;String, byte[]&gt; clientfiles){
    this.clientfiles = clientfiles;
}
public final void destroy() {
    if (this.mainClazz != null)
        this.invokeMethod(null, null, "destroy");
}

private void invokeMethod(Object[] arg0, Class[] arg2, String arg3) {
    try {
        Method var14 = this.mainClass.getMethod(arg3, arg2);
        var14.invoke(this.mainClazz, arg0);
    } catch (NoSuchMethodException var6) {
        var6.printStackTrace();
    } catch (IllegalAccessException var7) {
        var7.printStackTrace();
    } catch (InvocationTargetException var8) {
        var8.printStackTrace();
    }
}

public final void update(Graphics arg0) {
    if (this.mainClazz != null)
        this.invokeMethod(new Object[]{arg0}, new Class[]{Graphics.class}, "update");
}

private void throwException(Throwable arg1) {
    arg1.printStackTrace();
}

public final void stop() {
    if (this.mainClazz != null)
        this.invokeMethod(null, null, "stop");
}

public final void start() {
    if (this.mainClazz != null)
        this.invokeMethod(null, null, "start");
}

public final void paint(Graphics arg0) {
    if (this.mainClazz != null)
        this.invokeMethod(new Object[]{arg0}, new Class[]{Graphics.class}, "paint");
}

public final void init() {

    ClientClassLoader loader = new ClientClassLoader(clientfiles);
    this.mainClass = loader.loadClass("client");

    if (this.mainClass == null) {
        throwException(new RuntimeException());
        System.exit(1);
    }

    try {
        Constructor constructor = this.mainClass.getConstructor((Class[]) null);
        this.mainClazz = constructor.newInstance((Object[]) null);
    } catch (NoSuchMethodException e) {
        this.throwException(e);
    } catch (InvocationTargetException e) {
        this.throwException(e);
    } catch (IllegalAccessException e) {
        this.throwException(e);
    } catch (InstantiationException e) {
        this.throwException(e);
    }


    this.invokeMethod(new Object[]{this}, new Class[]{Applet.class}, "supplyApplet");
    this.invokeMethod(null, null, "init");
}
</code></pre>
<p>}[/code]</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/loading-new-applet/425178/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/loading-new-applet/425178/4</link>
        <pubDate>Tue, 13 Dec 2011 21:34:09 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-425178-4</guid>
        <source url="https://forum.moparisthebest.com/t/loading-new-applet/425178.rss">Loading new applet?</source>
      </item>
      <item>
        <title>Loading new applet?</title>
        <dc:creator><![CDATA[@moparisthebest Moparisthebest]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/moparisthebest">@moparisthebest</a> wrote:</p>
          <blockquote>
              <p>Post it if you don’t mind, I don’t really understand why I should have to do any of that stuff?  I’m trying to cleanly load it without using any of their code (or, hopefully, making it RS-specific), it should be doable since browsers do it.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/loading-new-applet/425178/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/loading-new-applet/425178/3</link>
        <pubDate>Tue, 13 Dec 2011 20:54:46 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-425178-3</guid>
        <source url="https://forum.moparisthebest.com/t/loading-new-applet/425178.rss">Loading new applet?</source>
      </item>
      <item>
        <title>Loading new applet?</title>
        <dc:creator><![CDATA[@Ollie Ollie]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ollie">@Ollie</a> wrote:</p>
          <blockquote>
              <p>The only successful way I have loaded the applet so far is to spoof the Rs2Applet class,</p>
<p>their is a Class variable within the Rs2Applet class, you need to copy the method in the loader that invokes methods on this class and make the Rs2Applet class extend applet and within those methods call the method on that class.</p>
<p>something like this:</p>
<p><code>public final void destroy() {
    try{
        invokeMethod("destroy", null, null, true);
    } catch (Exception e) { }
}</code></p>
<p>I think the error may come from the init method on the line where it tries to invoke the supplyApplet method which uses the same method as the destroy method above.</p>
<p>I can post you the source if you want?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/loading-new-applet/425178/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/loading-new-applet/425178/2</link>
        <pubDate>Tue, 13 Dec 2011 20:37:19 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-425178-2</guid>
        <source url="https://forum.moparisthebest.com/t/loading-new-applet/425178.rss">Loading new applet?</source>
      </item>
      <item>
        <title>Loading new applet?</title>
        <dc:creator><![CDATA[@moparisthebest Moparisthebest]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/moparisthebest">@moparisthebest</a> wrote:</p>
          <blockquote>
              <p>I wrote up some quick code to try and load the new applet just like a browser would, but I am having some issues with it (an error).</p>
<p>Here is the code (archive attached):</p>
<pre><code class="lang-auto">import org.moparscape.Debug;

import javax.swing.*;
import java.applet.Applet;
import java.applet.AppletContext;
import java.applet.AppletStub;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.WindowEvent;
import java.awt.event.WindowListener;
import java.io.FileInputStream;
import java.net.URL;
import java.security.Permissions;
import java.util.Properties;

public class RunApplet implements AppletStub, ActionListener, WindowListener {

    private Properties props = new Properties();
    private Applet appletInstance;
    private Dimension appletSize;

    private boolean appletActive;

    private JFrame frame;
    private String frameTitle = "RunApplet";

    public static void main(String[] args) {
        new RunApplet(args);
    }

    public RunApplet(String[] args) {

        if (args.length &lt; 1) {
            System.out.println("usage: RunApplet jarFile propertiesFile mainClass width height codeBase documentBase [debug]");
            return;
        }
        if (args.length &gt; 7)
            Debug.setDebug();

        String jarFile, propertiesFile, mainClass;
        int width, height;

        propertiesFile = getPropertySetDefault("propertiesFile", args, 1);

        try {
            props.load(new FileInputStream(propertiesFile));
            jarFile = getPropertySetDefault("jarFile", args, 0);
            mainClass = getPropertySetDefault("mainClass", args, 2);
            width = getPropertyIntSetDefault("width", args, 3);
            height = getPropertyIntSetDefault("height", args, 4);
            getPropertySetDefault("getCodeBase", args, 5);
            getPropertySetDefault("getDocumentBase", args, 6);
        } catch (Exception e) {
            System.out.println("Properties file does not exist, exiting...");
            return;
        }

        JFrame.setDefaultLookAndFeelDecorated(true);
        JDialog.setDefaultLookAndFeelDecorated(true);
        JPopupMenu.setDefaultLightWeightPopupEnabled(false);
        frame = new JFrame(frameTitle);
        initJMenuBar();

        try {
            ClassLoader loader = new org.moparscape.classloader.CRCClassLoader(jarFile);

            //System.setSecurityManager(new org.moparscape.security.SecurityManager());
            // set client permissions
            //if (System.getSecurityManager() instanceof org.moparscape.security.SecurityManager)
            //    ((org.moparscape.security.SecurityManager) System.getSecurityManager()).addPermissions(loader, getPermissions(jarFile));

            appletInstance = (Applet) loader.loadClass(mainClass).newInstance();
            appletSize = new Dimension(width, height);
        } catch (Exception e) {
            System.out.println("Error loading main class, exiting...");
            e.printStackTrace();
            return;
        }

        appletInstance.setStub(this);
        initUI();
        try {
            appletInstance.init();
        } catch (Exception e) {
            System.out.println("Fatal error on applet.init() call: " + e.getMessage());
            e.printStackTrace();
            System.exit(0);
        }
        appletActive = true;
        appletInstance.start();
    }
/*
    public static Permissions getPermissions(String allowedDir) {
        Permissions permissions = org.moparscape.security.SecurityManager.getClientPermissions(allowedDir);
        return permissions;
    }
*/
    /**
     * Starts up the GUI
     */
    public void initUI() {

        frame.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);
        frame.setResizable(false);
        frame.addWindowListener(this);
        JPanel game = new JPanel(new BorderLayout());
        game.setPreferredSize(appletSize);
        game.add(appletInstance);

        frame.getContentPane().add(game, BorderLayout.CENTER);
        frame.pack();
        frame.setVisible(true);
    }

    private void initJMenuBar() {

        String[] titles = {"File"};
        String[][] content = {
                {"Quit"}
        };

        JMenuBar menuBar = makeMenuBar(titles, content);
        frame.setJMenuBar(menuBar);
    }

    /**
     * Creates a new JMenuBar from the given input. All menu contents are
     * added to this actionlistener.
     *
     * @param menuTitles  A String[] of the menu titles.
     * @param menuContent A String[][] of the menu contents, "-" adds a seperator
     * @param aL          An ActionListener to add to the menu items.
     * @return new JMenuBar already set up.
     */
    private JMenuBar makeMenuBar(String[] menuTitles, String[][] menuContent) {
        JMenuBar menuBar = new JMenuBar();
        for (int x = 0; x &lt; menuTitles.length; ++x) {
            JMenu fileMenu = new JMenu(menuTitles[x]);
            for (String name : menuContent[x]) {
                JMenuItem menuItem = new JMenuItem(name);
                if (name.equalsIgnoreCase("-"))
                    fileMenu.addSeparator();
                else {
                    menuItem.addActionListener(this);
                    fileMenu.add(menuItem);
                }
            }
            menuBar.add(fileMenu);
        }
        return menuBar;
    }

    /**
     * Overrides actionPerformed() in ActionListener.
     *
     * @param evt An ActionEvent.
     */
    public void actionPerformed(ActionEvent evt) {
        String cmd = evt.getActionCommand();

        if (cmd != null) {
            if (cmd.equals("Quit")) {
                windowClosing(null); //dont bother giving it an event
            }
        }
    }

    public void windowActivated(WindowEvent evt) {
    }

    public void windowDeactivated(WindowEvent evt) {
    }

    public void windowIconified(WindowEvent evt) {
    }

    public void windowDeiconified(WindowEvent evt) {
    }

    public void windowOpened(WindowEvent evt) {
    }

    public void windowClosed(WindowEvent evt) {
    }

    public void windowClosing(WindowEvent evt) {
        System.out.println("Exiting...");
        appletInstance.stop();
        appletActive = false;
        appletInstance.destroy();
        frame.dispose();
    }

    public String getPropertySetDefault(String key, String[] args, int index) {
        // if its in properties already, return it
        String ret = null;
        if (props != null)
            ret = props.getProperty(key);
        if (ret != null)
            return ret;
        // if that index exists in args, set the property and return it
        if (index &lt; args.length) {
            ret = args[index];
            if (props != null)
                props.setProperty(key, ret);
            return ret;
        }
        // otherwise we need something that we don't have, so print message and cease execution
        System.out.println(String.format("Can't find value for key '%s', either supply it via command line or properties file.", key));
        System.exit(0);
        return null;
    }

    public int getPropertyIntSetDefault(String key, String[] args, int index) {
        String sret = getPropertySetDefault(key, args, index);
        int ret = 0;
        try {
            ret = Integer.parseInt(sret);
        } catch (NumberFormatException e) {
            System.out.println(String.format("Value for key '%s' must be an integer, either supply it via command line or properties file.", key));
            System.exit(0);
        }
        return ret;
    }

    /**
     * ***************************************************************
     * Methods below override those in AppletStub.
     * ****************************************************************
     */

    /**
     * Gives the applet the codebase.
     *
     * @return The value of the getCodeBase key in the properties.
     */
    public URL getCodeBase() {
        Debug.debug("Applet is calling getCodeBase()");
        try {
            return new URL(props.getProperty("getCodeBase"));
        } catch (Exception e) {
            return null;
        }
    }

    /**
     * Gives the applet the documentbase.
     *
     * @return The value of the getDocumentBase key in the properties.
     */
    public URL getDocumentBase() {
        Debug.debug("Applet is calling getDocumentBase()");
        try {
            return new URL(props.getProperty("getDocumentBase"));
        } catch (Exception e) {
            return null;
        }
    }

    /**
     * Gives the applet the parameters it asks for.
     *
     * @param name Name of the parameter.
     * @return The value of the name key in the properties.
     */
    public String getParameter(String name) {
        Debug.debug("Param- " + name + ":" + props.getProperty(name));
        return props.getProperty(name);
    }

    /**
     * Gets the Applet Context
     *
     * @return A PseudoAppletContext that the applet can use.
     */
    public AppletContext getAppletContext() {
        Debug.debug("Applet is calling getAppletContext()");
        return null;
    }

    /**
     * Not used in this implementation yet.
     *
     * @param width  width
     * @param height height
     */
    public void appletResize(int width, int height) {
        Debug.debug("Applet is calling appletResize(" + width + ", " + height + ")");
    }

    /**
     * Tells the applet whether it is active or not.
     *
     * @return True
     */
    public boolean isActive() {
        Debug.debug("Applet is calling isActive()");
        return appletActive;
    }
}</code></pre>
<p>And when it is ran with these files downloaded in the working directory:<br>
<a href="http://www.moparisthebest.com/rs/gamepack.jar" class="onebox" target="_blank">http://www.moparisthebest.com/rs/gamepack.jar</a><br>
<a href="http://www.moparisthebest.com/rs/gamepack.jar.properties" class="onebox" target="_blank">http://www.moparisthebest.com/rs/gamepack.jar.properties</a></p>
<p>This happens:</p>
<pre><code class="lang-auto">mopar@killer-linux:/tmp/runapplet$ unzip RunApplet.java.zip 
Archive:  RunApplet.java.zip
  inflating: RunApplet.java          
   creating: org/
   creating: org/moparscape/
  inflating: org/moparscape/Debug.java  
   creating: org/moparscape/classloader/
  inflating: org/moparscape/classloader/CRCClassLoader.java  
   creating: org/moparscape/security/
  inflating: org/moparscape/security/SecurityManager.java  
mopar@killer-linux:/tmp/runapplet$ javac RunApplet.java 
mopar@killer-linux:/tmp/runapplet$ wget -q http://www.moparisthebest.com/rs/gamepack.jar
mopar@killer-linux:/tmp/runapplet$ wget -q http://www.moparisthebest.com/rs/gamepack.jar.properties
mopar@killer-linux:/tmp/runapplet$ java RunApplet ./gamepack.jar ./gamepack.jar.properties Rs2Applet 768 502 "http://world7.runescape.com" "http://world7.runescape.com/g=runescape/,j0,f209935550465376260" 1
Debug has been enabled.
Param- 0:XPJO8Gv*eKQ3AUOJhwyIfg
Param- -1:LDtaUS5fvakwJ6UyCbWlBQ
Error: Rs2Applet.init:332 RunApplet.&lt;init&gt;:84 RunApplet.main:29 | java.lang.RuntimeException
Fatal error on applet.init() call: null
d
        at c.a(c.java:30)
        at Rs2Applet.a(Rs2Applet.java:130)
        at Rs2Applet.init(Rs2Applet.java:332)
        at RunApplet.&lt;init&gt;(RunApplet.java:84)
        at RunApplet.main(RunApplet.java:29)
Caused by: java.lang.RuntimeException: java.lang.RuntimeException
        at Rs2Applet.a(Rs2Applet.java:128)
        ... 3 more
Caused by: java.lang.RuntimeException
        ... 3 more
mopar@killer-linux:/tmp/runapplet$</code></pre>
<p>Any ideas on what to do there?</p>
<p>I did notice, when applying my SecurityManager, that I think they make a call to setSecurityManager themselves, can anyone confirm that?  If so, there is probably no good clean way to get around it.</p>
<p>Has anyone got the new client to load?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/loading-new-applet/425178/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/loading-new-applet/425178/1</link>
        <pubDate>Tue, 13 Dec 2011 20:26:29 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-425178-1</guid>
        <source url="https://forum.moparisthebest.com/t/loading-new-applet/425178.rss">Loading new applet?</source>
      </item>
  </channel>
</rss>
