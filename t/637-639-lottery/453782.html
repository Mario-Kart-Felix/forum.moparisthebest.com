<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/637-639-lottery/453782 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 23:42:12 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>637/639 Lottery - Runescape - moparisthebest.com</title>
    <meta name="description" content="What your adding: A Lottery for Dementhium&amp;#39;s 637/639 

Please excuse my lack of grammar and explanations. 

The whole Lottery class: [code=java] package org.dementhium.content.minigames; 

import java.util.ArrayList; 

i&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="453782.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;637/639 Lottery&#39;" href="453782.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/637-639-lottery/453782" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/637-639-lottery/453782" />
<meta property="og:title" content="637/639 Lottery" />
<meta name="twitter:title" content="637/639 Lottery" />
<meta property="og:description" content="What your adding:  A Lottery for Dementhium’s 637/639  Please excuse my lack of grammar and explanations.  The whole Lottery class:  package org.dementhium.content.minigames;  import java.util.ArrayList;  import org.dementhium.tickable.Tick; import org.dementhium.model.player.Player; import org.dementhium.model.World; import org.dementhium.util.Misc; import org.dementhium.model.Item;  /**  * @author Wildking72  */ public class Lottery extends Tick { 	 	/** 	 * The players attending the lottery. ..." />
<meta name="twitter:description" content="What your adding:  A Lottery for Dementhium’s 637/639  Please excuse my lack of grammar and explanations.  The whole Lottery class:  package org.dementhium.content.minigames;  import java.util.ArrayList;  import org.dementhium.tickable.Tick; import org.dementhium.model.player.Player; import org.dementhium.model.World; import org.dementhium.util.Misc; import org.dementhium.model.Item;  /**  * @author Wildking72  */ public class Lottery extends Tick { 	 	/** 	 * The players attending the lottery. ..." />
<meta property="article:published_time" content="2012-08-11T01:30:17+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="453782.html">637/639 Lottery</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/wildskiller.html'><span itemprop='name'>wildskiller</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-08-11T01:30:17Z'>
            <time itemprop='dateModified' datetime='2016-08-03T23:24:06Z' class='post-time'>
              August 3, 2016, 11:24pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p><span class="bbcode-b">What your adding:</span><br>
A Lottery for Dementhium’s 637/639</p>
<p>Please excuse my lack of grammar and explanations.</p>
<p><span class="bbcode-b">The whole Lottery class:</span></p>
<pre><code class="lang-auto">package org.dementhium.content.minigames;

import java.util.ArrayList;

import org.dementhium.tickable.Tick;
import org.dementhium.model.player.Player;
import org.dementhium.model.World;
import org.dementhium.util.Misc;
import org.dementhium.model.Item;

/**
 * @author Wildking72
 */
public class Lottery extends Tick {
	
	/**
	 * The players attending the lottery.
	 */
	public static ArrayList&lt;Player&gt; attendents = new ArrayList&lt;Player&gt;();
	
	/**
	 * Lottery pot total.
	 */
	public static int LOTTERY_TOTAL = 0;
	
	/**
	 * Required amount of money to enter the lottery.
	 */
	private static final int REQUIRED_MONEY = 5000000;
	
	/**
	 * Checks if the player has registered.
	 */
	private boolean registered;
	
	/**
	 * Time until the lottery ends.
	 */
	private int hosting = 10;
	
	public Lottery() {
		super(200);
	}

	@Override
	public void execute() {
		int winner = Misc.random(attendents.size());
		if (World.getWorld().getPlayers().size() &lt; 1) {
			return;
		}
		if (attendents.size() &lt; 1) {
			sendWorldMessage("[Lottery] No one has entered the lottery!");
			return;
		}
		if (hosting &lt;= 0) {
			sendWorldMessage("[Lottery] The lottery has ended!");
			sendWorldMessage("[Lottery] The winning lottery player is..."+attendents.get(winner).getUsername()+"!");
			resetLottery();
		}
		hosting--;
	}
	
	public void addToLottery(Player player) {
		int cashAmount = player.getInventory().numberOf(995);
		if (!player.getInventory().contains(995)) {
			player.sendMessage("You don't have any money.");
			return;
		}
		if (cashAmount &lt; REQUIRED_MONEY) {
			player.sendMessage("You don't have that much.");
			return;
		}
		player.getInventory().deleteItem(995, REQUIRED_MONEY);
		LOTTERY_TOTAL += REQUIRED_MONEY;
		if (!player.getLottery().isRegistered()) {
			player.getLottery().setIsRegistered(true);
			registerAttendent(player);
		}
		sendWorldMessage("[Lottery] The current lottery pot is now " + LOTTERY_TOTAL + ".");
	}
	
	private void resetLottery() {
		for (Player p : attendents) {
			p.getLottery().setIsRegistered(false);
		}
		attendents.clear();
		hosting = 10;
		LOTTERY_TOTAL = 0;
		stop();
	}
	
	public void registerAttendent(Player player) {
		if (isRunning()) {
			attendents.add(player);
		} else {
			attendents.add(player);
			start();
		}
	}
	
	private void sendWorldMessage(String message) {
		for (Player players : World.getWorld().getPlayers()) {
			if (!players.isOnline() || players == null)
				continue;

			players.sendMessage(message);
		}
	}
	
	public boolean isRegistered() {
		return registered;
	}
	
	public void setIsRegistered(boolean bool) {
		this.registered = bool;
	}
	
}</code></pre>
<p><span class="bbcode-b">The explanation:</span></p>
<p>First, I want to start out with this part.</p>
<h2><code>
	/**
	 * The players attending the lottery.
	 */
	public static ArrayList&lt;Player&gt; attendents = new ArrayList&lt;Player&gt;();</code></h2>
<h2>The <a href="http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html" data-bbcode="true" rel="nofollow noopener">ArrayList</a> is basically a collection of data put into a list.<br>
The object inside the arrow parameters ‘&lt;&gt;’ is the element you want the list to be full of, and in this case ‘Player’.</h2>
<p>Next, we have a couple of <a href="http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html" data-bbcode="true" rel="nofollow noopener">Data Types</a>.</p>
<p>[code=java]<br>
/**<br>
* Lottery pot total.<br>
*/<br>
public static int LOTTERY_TOTAL = 0;</p>
<pre><code>/**
 * Required amount of money to enter the lottery.
 */
private static final int REQUIRED_MONEY = 5000000;

/**
 * Checks if the player has registered.
 */
private boolean registered;

/**
 * Time until the lottery ends.
 */
private int hosting = 10;[/code]
</code></pre>
<hr>
<h2>The ‘LOTTERY_TOTAL’ data type (Integer) is <a href="http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html" data-bbcode="true" rel="nofollow noopener">Static</a>, which means it doesn’t have to be <a href="http://docs.oracle.com/javase/tutorial/java/javaOO/objectcreation.html" data-bbcode="true" rel="nofollow noopener">Instantiated</a>. The ‘LOTTERY_TOTAL’ is set to 0 because you don’t want the Lottery Pot to have the same amount of cash even when it starts/ends.<br>
The ‘registered’ data type (Boolean) will be used to check if the player has already been added (registered) to the ArrayList ‘attendents’.<br>
The ‘REQUIRED_MONEY’ data type (Integer) is <a href="http://docs.oracle.com/javase/tutorial/java/IandI/final.html" data-bbcode="true" rel="nofollow noopener">final</a> because you don’t want it being/to be changed.<br>
The ‘hosting’ data type (Integer) is the amount of attempts the ticks will do before it stops the Lottery.</h2>
<p>Now, the <a href="http://docs.oracle.com/javase/tutorial/java/javaOO/methods.html" data-bbcode="true" rel="nofollow noopener">Methods</a>.</p>
<pre><code class="lang-auto">	@Override
	public void execute() {
		int winner = Misc.random(attendents.size());
		if (World.getWorld().getPlayers().size() &lt; 1) {
			return;
		}
		if (attendents.size() &lt; 1) {
			sendWorldMessage("[Lottery] No one has entered the lottery!");
			return;
		}
		if (hosting &lt;= 0) {
			sendWorldMessage("[Lottery] The lottery has ended!");
			sendWorldMessage("[Lottery] The winning lottery player is..."+attendents.get(winner).getUsername()+"!");
			resetLottery();
		}
		hosting--;
	}
	
	public void addToLottery(Player player) {
		int cashAmount = player.getInventory().numberOf(995);
		if (!player.getInventory().contains(995)) {
			player.sendMessage("You don't have any money.");
			return;
		}
		if (cashAmount &lt; REQUIRED_MONEY) {
			player.sendMessage("You don't have that much.");
			return;
		}
		player.getInventory().deleteItem(995, REQUIRED_MONEY);
		LOTTERY_TOTAL += REQUIRED_MONEY;
		if (!player.getLottery().isRegistered()) {
			player.getLottery().setIsRegistered(true);
			registerAttendent(player);
		}
		sendWorldMessage("[Lottery] The current lottery pot is now " + LOTTERY_TOTAL + ".");
	}
	
	private void resetLottery() {
		for (Player p : attendents) {
			p.getLottery().setIsRegistered(false);
		}
		attendents.clear();
		hosting = 10;
		LOTTERY_TOTAL = 0;
		stop();
	}
	
	public void registerAttendent(Player player) {
		if (isRunning()) {
			attendents.add(player);
		} else {
			attendents.add(player);
			start();
		}
	}
	
	private void sendWorldMessage(String message) {
		for (Player players : World.getWorld().getPlayers()) {
			if (!players.isOnline() || players == null)
				continue;

			players.sendMessage(message);
		}
	}
	
	public boolean isRegistered() {
		return registered;
	}
	
	public void setIsRegistered(boolean bool) {
		this.registered = bool;
	}[/code]
------------------
The 'execute' method is an [url=http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html]Abstract Method[/url] in Tick.java, which is needed to be overridden if the class is inheriting from a Super Class (Abstract class).
The 'registerAttendent' method is used to add an element (Player) onto the ArrayList 'attendents', but will also check if the Lottery is running, and if it isn't, it will start it.
You will not see the start() or stop() methods because they are inherited from the Tick class, and since we are using 'extends' (which means inherit from) for the current class (Lottery), we can inherit any public or abstract methods Tick.java has inside of it.
The 'resetLottery' will reset the lottery by stopping the ticks (stop()), resetting the 'hosting' ticks and 'LOTTERY_TOTAL', and clearing the ArrayList 'attendents' using the clear() method, which clears all collections inside the ArrayList.
The 'isRegistered' method returns the 'registered' data type (Boolean).
The 'setIsRegistered' method is using 'this', which means this current class/object, and sets it equal to the 'bool' data type (Boolean).
------------------


[b]What you have to do:[/b]
There aren't any errors, but you will have to fix certain things to get it to work properly.

[b]What you can help me do:[/b]
Post what could enhance this, or make the design more professional.
Correct my explanations on the Java.



Eh...
[code=java]package org.dementhium.content.minigames;

import java.util.ArrayList;
import java.io.BufferedWriter;
import java.io.FileWriter;
import java.io.IOException;
import java.text.DateFormat;
import java.util.Calendar;
import java.util.Date;

import org.dementhium.tickable.Tick;
import org.dementhium.content.DialogueManager;
import org.dementhium.model.player.Player;
import org.dementhium.model.World;
import org.dementhium.util.Misc;

/**
 * @author Wildking72
 */
public class Lottery extends Tick {
	
	/**
	 * The players attending the lottery.
	 */
	public static ArrayList&lt;Player&gt; attendents = new ArrayList&lt;Player&gt;();
	
	public static int LOTTERY_TOTAL = 0;
	
	private int HOSTING_TICKS = 10;
	
	private int amountDeposited = 0;
	
	public static boolean winner = false;
	
	public Lottery() {
		super(200);
	}

	@Override
	public void execute() {
		if (World.getWorld().getPlayers().size() &lt; 1) {
			return;
		}
		if (attendents.size() &lt; 1) {
			World.sendMessage("[Lottery] No one has entered the lottery!");
			return;
		}
		HOSTING_TICKS = getHostingTicks() - 1;
		if (getHostingTicks() &lt;= 0) {
			World.sendMessage("[Lottery] The lottery has ended!");
			if (!winner.isOnline() || winner == null) {
				World.sendMessage("[Lottery] The winning lottery player is offline.");
				return;
			}
			winner = true;
			World.sendMessage("[Lottery] The winning lottery player is... "+getWinner().getUsername()+"!");
			World.sendMessage("[Lottery] "+getWinner().getUsername()+" has won "+Misc.formatNumber(LOTTERY_TOTAL)+" Gold!");
			return;
		}
		World.sendMessage("[Lottery] The lottery will end in "+(getHostingTicks() * 2)+" minutes!");
	}
	
	public void addToLottery(Player player, int amount) {
		int cashAmount = player.getInventory().numberOf(995);
		if (!player.getInventory().contains(995)) {
			player.sendMessage("You don't have any money.");
			return;
		}
		if (cashAmount &lt; amount) {
			player.sendMessage("You don't have that much.");
			return;
		}
		if (amount &gt; 1000000) {
			player.sendMessage("You can't add more than 1M.");
			return;
		}
		if (amount &lt; 100000) {
			player.sendMessage("You can't add less than 100K.");
			return;
		}
		player.getInventory().deleteItem(995, amount);
		LOTTERY_TOTAL += amount;
		this.amountDeposited += amount;
		if (!player.isRegistered()) {
			player.setIsRegistered(true);
			registerAttendent(player);
		}
		World.sendMessage("[Lottery] The current lottery pot is now " + Misc.formatNumber(LOTTERY_TOTAL) + " Gold.");
		DialogueManager.proceedDialogue(player, 9354);
		saveFile(player, amount);
	}
	
	public void withdrawDeposited(Player player) {
		if (player.getLottery().getAmountDeposited() &lt; 1) {
			player.sendMessage("You don't have any money deposited.");
			return;
		}
		if (player.getInventory().getFreeSlots() &lt; 1) {
			player.sendMessage("You need a free inventory space to withdraw your money.");
			return;
		}
		player.getInventory().addItem(995, getAmountDeposited());
	}
	
	public void resetLottery() {
		for (Player p : attendents) {
			p.setIsRegistered(false);
		}
		attendents.clear();
		this.HOSTING_TICKS = 10;
		this.amountDeposited = 0;
		LOTTERY_TOTAL = 0;
	}
	
	public Player getWinner() {
		int winner = 0;
		if (attendents.size() == 1)
			winner = 0;
		else {
			winner = Misc.random(0, attendents.size());
		}
		if (winner == 0 &amp;&amp; attendents.get(0) == null) {
			World.sendMessage("No one has won the lottery! Talk to the gambler to get your gold back!");
			return null;
		}
		return attendents.get(winner);
	}
	
	public void registerAttendent(Player player) {
		if (attendents.size() &lt; 1) {
			World.sendMessage("[Lottery] The lottery has started!");
			this.start();
		}
		attendents.add(player);
	}

	public int getHostingTicks() {
		return HOSTING_TICKS;
	}

	public void setHostingTicks(int ticks) {
		this.HOSTING_TICKS = ticks;
	}

	public int getAmountDeposited() {
		return amountDeposited;
	}

	public void setAmountDeposited(int amount) {
		this.amountDeposited = amount;
	}
	
	private void saveFile(Player player, int amount) {
		try {
			BufferedWriter bf = new BufferedWriter(new FileWriter("./data/lotterylog.txt", true));
				bf.write("[" + DateFormat.getDateTimeInstance().format(new Date())
					+ " " + Calendar.getInstance().getTimeZone().getDisplayName() + "] " 
					+ player.getUsername() + " - Amount Deposited : " + amount);
			bf.newLine();
			bf.flush();
			bf.close();
		} catch (IOException ignored) {
			System.out.println("Error occured whilst trying to save to lotterylog.txt");
		}
	}
	
}
</code></pre>
      </div>

      <meta itemprop='headline' content='637/639 Lottery'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/637-639-lottery/453782 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 23:42:14 GMT -->
</html>
