<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>[PI] Event Container Issue</title>
    <link>https://forum.moparisthebest.com/t/pi-event-container-issue/457284</link>
    <description>Hey everyone, normally I like to code as an individual, but this problem has been bugging me for days on end after trying a myriad of methods to rectify the issue; to no avail.. :(
I&#39;ve been attempting to use event cycles and containers more often lately as to try and take some of the load off the process in the client class...

Basically, I need help with stopping an event I wrote in the ActionHandler upon the player moving. The event is for Fishing and it makes the skill look poorly coded and tacky when you&#39;re fishing, then walk away, and it&#39;ll still keep catching fish until the inventory is full. 
Any help is much appreciated guys!
p.s. if it helps, this is one of the simplistic events I wrote for each fishing method:
[code]case 236: //Rocktails
			if (c.playerLevel[c.playerFishing] &lt; 90) {
				c.sendMessage(&quot;You need a fishing level of 90 to fish here.&quot;);
				return;
			}
			if (!c.getItems().playerHasItem(307, 1)) {
				c.sendMessage(&quot;You need a Fishing Rod to fish here.&quot;);
				return;
			}
			if (!c.getItems().playerHasItem(15263, 1)) {
				c.sendMessage(&quot;Living Minerals are required for bait.&quot;);
				return;
			}
			c.startAnimation(622); //Rod Fishing Animation
			c.sendMessage(&quot;You cast out your Rod and attempt to catch a Rocktail..&quot;);
			final Client c4 = this.c;
			EventManager.getSingleton().addEvent(new Event() {
				public void execute(EventContainer e) {
					c4.getItems().deleteItem2(15263, 1);
					c4.getItems().addItem(15270, 1);
					c4.sendMessage(&quot;You catch a Rocktail.&quot;);
					c4.getPA().addSkillXP(10000, c.playerFishing);
					c4.getPA().refreshSkill(c.playerFishing);
					if(c.getItems().freeSlots() &lt; 1) {
					e.stop();
				c.startAnimation(1);
				c.appearanceUpdateRequired = true;
                			c.updateRequired = true;
				c.sendMessage(&quot;Your inventory is full.&quot;);
				c.getDH().sendDialogues(800, 946);
				return;
			}
				}
			}, 8000);
			break;[/code]
Thank you! :)</description>
    
    <lastBuildDate>Thu, 30 Aug 2012 10:18:52 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/pi-event-container-issue/457284.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>[PI] Event Container Issue</title>
        <dc:creator><![CDATA[@K0y K0y]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/k0y">@K0y</a> wrote:</p>
          <blockquote>
              <p>Hey everyone, normally I like to code as an individual, but this problem has been bugging me for days on end after trying a myriad of methods to rectify the issue; to no avail… <img src="https://forum.moparisthebest.com/images/emoji/twitter/frowning.png?v=5" title=":frowning:" class="emoji" alt=":frowning:"><br>
I’ve been attempting to use event cycles and containers more often lately as to try and take some of the load off the process in the client class…</p>
<p>Basically, I need help with stopping an event I wrote in the ActionHandler upon the player moving. The event is for Fishing and it makes the skill look poorly coded and tacky when you’re fishing, then walk away, and it’ll still keep catching fish until the inventory is full.<br>
Any help is much appreciated guys!<br>
p.s. if it helps, this is one of the simplistic events I wrote for each fishing method:</p>
<p><code>case 236: //Rocktails
			if (c.playerLevel[c.playerFishing] &lt; 90) {
				c.sendMessage("You need a fishing level of 90 to fish here.");
				return;
			}
			if (!c.getItems().playerHasItem(307, 1)) {
				c.sendMessage("You need a Fishing Rod to fish here.");
				return;
			}
			if (!c.getItems().playerHasItem(15263, 1)) {
				c.sendMessage("Living Minerals are required for bait.");
				return;
			}
			c.startAnimation(622); //Rod Fishing Animation
			c.sendMessage("You cast out your Rod and attempt to catch a Rocktail..");
			final Client c4 = this.c;
			EventManager.getSingleton().addEvent(new Event() {
				public void execute(EventContainer e) {
					c4.getItems().deleteItem2(15263, 1);
					c4.getItems().addItem(15270, 1);
					c4.sendMessage("You catch a Rocktail.");
					c4.getPA().addSkillXP(10000, c.playerFishing);
					c4.getPA().refreshSkill(c.playerFishing);
					if(c.getItems().freeSlots() &lt; 1) {
					e.stop();
				c.startAnimation(1);
				c.appearanceUpdateRequired = true;
                			c.updateRequired = true;
				c.sendMessage("Your inventory is full.");
				c.getDH().sendDialogues(800, 946);
				return;
			}
				}
			}, 8000);
			break;</code><br>
Thank you! <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-event-container-issue/457284/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-event-container-issue/457284/1</link>
        <pubDate>Thu, 30 Aug 2012 10:18:52 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-457284-1</guid>
        <source url="https://forum.moparisthebest.com/t/pi-event-container-issue/457284.rss">[PI] Event Container Issue</source>
      </item>
  </channel>
</rss>
