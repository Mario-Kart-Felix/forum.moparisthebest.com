<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/a-few-php-tutorials/460790 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 23:00:31 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>A few PHP tutorials - General Programming - moparisthebest.com</title>
    <meta name="description" content="I posted something like 14 tutorials in total over MoparScape Web Dev now, so I thought I&amp;#39;d put the best aspects of them into one big tutorial for here. 

There was more than 20000 characters so I had to split it into tw&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="460790.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;A few PHP tutorials&#39;" href="460790.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/a-few-php-tutorials/460790" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/a-few-php-tutorials/460790" />
<meta property="og:title" content="A few PHP tutorials" />
<meta name="twitter:title" content="A few PHP tutorials" />
<meta property="og:description" content="I posted something like 14 tutorials in total over MoparScape Web Dev now, so I thought I’d put the best aspects of them into one big tutorial for here.  There was more than 20000 characters so I had to split it into two posts, oh well.  [hr]  Contents:  Part 1 - Arrays  1.1 - Simple Arrays  1.2 - Associative Arrays  1.3 - Multi Dimensional Arrays  1.4 - Unsetting Arrays  Part 2 - Loops  2.1 - For &amp; For Each Loops  2.2 - While Loops  2.3 - Do While  2.4 - Associative Arrays Within For Each Loops ..." />
<meta name="twitter:description" content="I posted something like 14 tutorials in total over MoparScape Web Dev now, so I thought I’d put the best aspects of them into one big tutorial for here.  There was more than 20000 characters so I had to split it into two posts, oh well.  [hr]  Contents:  Part 1 - Arrays  1.1 - Simple Arrays  1.2 - Associative Arrays  1.3 - Multi Dimensional Arrays  1.4 - Unsetting Arrays  Part 2 - Loops  2.1 - For &amp; For Each Loops  2.2 - While Loops  2.3 - Do While  2.4 - Associative Arrays Within For Each Loops ..." />
<meta property="article:published_time" content="2012-09-20T11:38:37+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="460790.html">A few PHP tutorials</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/general-programming.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>General Programming</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Ruby_Forums_Coder.html'><span itemprop='name'>Ruby_Forums_Coder</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-09-20T11:38:37Z'>
            <time itemprop='dateModified' datetime='2016-08-04T00:13:57Z' class='post-time'>
              August 4, 2016, 12:13am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I posted something like 14 tutorials in total over MoparScape Web Dev now, so I thought I’d put the best aspects of them into one big tutorial for here.</p>
<p>There was more than 20000 characters so I had to split it into two posts, oh well.</p>
<p>[hr]</p>
<p>Contents:<br>
Part 1 - Arrays<br>
1.1 - Simple Arrays<br>
1.2 - Associative Arrays<br>
1.3 - Multi Dimensional Arrays<br>
1.4 - Unsetting Arrays</p>
<p>Part 2 - Loops<br>
2.1 - For &amp; For Each Loops<br>
2.2 - While Loops<br>
2.3 - Do While<br>
2.4 - Associative Arrays Within For Each Loops</p>
<p>Part 3 - MySQL - PHP Connections (Not mysqli or PDO, mysql. inb4 mysqli/pdo)<br>
3.1 - Populating your table<br>
3.2 - Connecting, Opening and Closing connections through PHP.<br>
3.3 - Selecting data from the database.</p>
<p>Part 4 - Securing your scripts against SQLi and XSS attacks.<br>
4.1 - Populating you database.<br>
4.2 - MySQL Injection.<br>
4.3 - Preventing XSS.<br>
[hr]</p>
<p><span class="bbcode-b">Part 1.1 - Creating a simple array.</span><br>
Arrays are very, very useful in any programming language, not just PHP. However, I only specialise in PHP so it’s being done in PHP. There are other ways to store data other than arrays, however using arrays is quick and easy. Arrays can most easily be described as an ordered list of elements. You can access the individual elements by referring to their index position within the array. The position is either ordered numerically or by name. An array with a numeric index is commonly called an indexed array while one that has named positions is called an associative array. As usual, I’ll give you the code then talk you through it.</p>
<pre><code class="lang-auto">&lt;?php 
$i = 1; 
$moparArrayTut = array( $i, "Mopar", 5 ); 

echo $moparArrayTut[0];
echo $moparArrayTut[1];
echo $moparArrayTut[2];
?&gt;</code></pre>
<p>Okay, so as usual your &lt;?php ?&gt; tags are opening and closing tags, as they always will be. We then declare the variable of $i with a value of 1 we’re then declaring the variable $moparArrayTut which is holding an array with the values $i (the variable being called from earlier), we then declare MoparScape as an element inside the array and then just include an integer as 3 examples of datatypes you can call inside an array. We are then echoing the data from the variable $moparArrayTut which is holding our array and it’s datatypes. We echo [0] which is our first data input, we then echo [1] which is our second data input and finally [2] which is our third data input.</p>
<p>As you can see, it’s more or less a variable which is holding several different types of data. Not too hard, huh? Let’s move on.</p>
<p><span class="bbcode-b">Part 1.2 - Creating an associative array.</span><br>
Associative arrays are arrays that use named keys that you assign to them. Have a look at the following example and as usual, I’ll explain it after I show the code.</p>
<pre><code class="lang-auto">&lt;?php 
$firstMoparArray = array("key1" =&gt; "Mopar", "key2" =&gt; "Moparis"); 
$secondMoparArray = array("key3" =&gt; "Scape", "key4" =&gt; "thebest", );
 
echo $firstMoparArray['key1'];
echo $secondMoparArray['key3'];
echo $firstMoparArray['key2'];
echo $secondMoparArray['key4'];
?&gt;</code></pre>
<p>Okay, so as per the normal on here, &lt;?php ?&gt; is our opening and closing tags, we then define the variable $firstMoparArray which holds the data of an array with key1 being Mopar and key2 being Moparis. We then define the variable $secondMoparArray which also holds the data of an array being key3 holding Scape and key4 holding thebest. We then echo the keys from $firstMoparArray and $secondMoparArray. So now you should understand the difference between normal arrays and associative arrays. It’s not a huge difference, but it is noticable.</p>
<p>So that wasn’t too hard, was it? No :P. Lets move on to multi-dimensional arrays.</p>
<p><span class="bbcode-b">Part 1.3 - Creating a multi-dimensional array.</span><br>
So now you know basic, simple arrays. A slightly more advanced array known as an associative array and now we’re moving on to multi-dimensional arrays. These are used for if you want to store more information about a certain aspect of the array data you’re holding. Or in another words a multi-dimensional array is an array that contains at least one other array as the value of one of the indexes. As usual, here’s the code, I’ll explain it after.</p>
<pre><code class="lang-auto">&lt;?php 
$moparSites = array( 
"Moparisthebest" =&gt; array( "10", "10"), 
"MoparScape" =&gt; array( "8", "10"), 
"MoparCraft" =&gt; array( "6", "10"), 
); 

echo "Moparisthebest rates ".$moparSites['Moparisthebest'][0]." out of ".$moparSites['MoparScape'][1].". &lt;br /&gt;"; 
echo "MoparScape rates ".$moparSites['MoparScape'][0]." out of ".$moparSites['Moparisthebest'][1].". &lt;br /&gt;"; 
echo "MoparCraft rates " . $moparSites['MoparCraft'][0] . " out of " . $moparSites['MoparCraft'][1]."."; 
?&gt;</code></pre>
<p>This above code is in no way demeaning to any of the mopar series of websites and forums boards, I am in no way more biased towards this, it was merely for tutorial purposes:P. So anyway, as per the usual &lt;?php and ?&gt; are our opening/closing tags. We’re then defining $moparSites as an array. We then insert data into our array, MoparScape holds the values of 10 and 10. Moparisthebest holds the values of 8 and 10, and MoparCraft holds the values 6 and 10. We then simply echo out the data and show everyone what our conclusion is. Simple enough right?</p>
<p><span class="bbcode-b">Part 1.4 - Unsetting Arrays.</span><br>
There are several ways to unset arrays, however, just use the unset() function.</p>
<pre><code class="lang-auto">unset($moparSites);</code></pre>
<p>[hr]</p>
<p>We’ll now move on to <span class="bbcode-b">loops.</span></p>
<p><span class="bbcode-b">Part 2.1 - For and For Each loops:</span><br>
We can loop through a set of code by keeping them inside a for each loop. We can tell what increment we want and set it, this is useful for executing larger amounts of recurring code. We will also start with some simple loops and work through to some more difficult versions. As usual, I’ll give you the code then explain it.</p>
<pre><code class="lang-auto">&lt;?php
for($i=1; $i&lt;=10; $i++) {
echo $i."&lt;br /&gt;";
}
?&gt;</code></pre>
<p>This is the simplest form of this type of loop, as usual, your &lt;?php ?&gt; tags are opening and closing tags, your next line is initiating the for loop, declaring the $i variable as 1, then saying that if the variable of $i is lesser than or equal to 10, add the value of $i to it until it reaches that number. The next line is then echoing the data with a line break.</p>
<p>This next loop is advancing a little more, this is adding a parameter to the loop and telling it to stop looping at a certain condition.</p>
<pre><code class="lang-auto">&lt;?php
for($i=1; $i&lt;=10; $i++){
if($i &gt; 5){
break;
}
echo $i."&lt;br&gt;";
}
?&gt;</code></pre>
<p>This loop is the exact same as the before loop, with an extra line or so of code. This code is explained by the above statement, except the parameter we added in. This parameter states that if the variable of $i is greater than 5, stop looping and move on. Which can be handy if they want parameters, which people often do.</p>
<p>This next loop is advancing further, we will make it so that it increases the step value.</p>
<pre><code class="lang-auto">&lt;?php
for($i=0;$i&lt;=100;$i +=10){
echo $i."&lt;br&gt;";
}
?&gt;</code></pre>
<p>Until now, we’ve merely just increased the step value by 1, this time, we’re going to increase it by 10. It can be described as our before loops. Except we’ve increased our values by 10 and reduced the original value of the variable $i to 0.</p>
<p>This next loop I’m going to show you will be advancing more than you’ve seen so far, this will be a foreach loop including an array, if it’s too advanced, don’t worry.</p>
<pre><code class="lang-auto">&lt;?php
$forEach = array (10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20);
foreach ($forEach as $forEach2) {
echo "Current value of \$forEach: $forEach2 &lt;br /&gt; ";
}
?&gt;</code></pre>
<p>So once again, if you don’t understand it, read over the following explanation again and again, if you still don’t get it, just come back later with fresh eyes. Obviously our &lt;?php ?&gt; are our opening and closing tags, we’re then declaring that the variable $forEach is an array with the following values. We’re then declaring the foreach loop itself using the $forEach variable as the aforementioned array, then the $forEach2 variable as our results, we then echo the current value of $forEach as the latest value in $forEach2.</p>
<p>Not too complex, but not too simple to grasp either.</p>
<p><span class="bbcode-b">Part 2.3 - While Loops</span><br>
The while loop in PHP is the condition is checked at the beginning of the loop and the statement inside is executed till the end of the loop, then again the condition is checked and loop executed. As usual, I’ll give you the code then I’ll talk through it:</p>
<pre><code class="lang-auto">&lt;?php
$i=50;
while($i &lt; 162 ) {
echo " value of \$i= $i &lt;br&gt;";
$i=$i+3;
}
?&gt;</code></pre>
<p>So what this does is our &lt;?php ?&gt; tag is obviously our opening and closing tags as usual. We’re then declaring the variable of $i, giving it a value of 50. We’re then doing a while loop with the condition of $i being less than the value of 162. We then echo the value of $i in it’s current state. Then follow up by adding 3 to our current value, therefore meeting our condition of it being below 162. I’ve just used some random numbers in there, they’re not really that simple, sorry, lol.</p>
<p>So that was a short part of the tutorial, but necessary, we’ll now move on to the final part. This being Do While loops.</p>
<p><span class="bbcode-b">Part 2.4 - Do While Loops</span><br>
So a lot of you will be asking what the difference is between a while and a do while loop. Well, in a while loop, the condition is set at the beginning and if it’s true the loop will begin and execute the below code, however, in do while loops the checking of the condition is done at the end of the loop, not at the start. Here’s a do while loop:</p>
<pre><code class="lang-auto">&lt;?php
$i=50;
do {
echo $i;
echo "&lt;br /&gt;";
}
while ($i &gt; 1);
?&gt;</code></pre>
<p>So as usual, our &lt;?php ?&gt; tags are opening and closing tags, we’re then setting the variable of $i as 50, the same as our previous loop. I’m then telling the code to echo the variable $i and echoing a line break, we’re then closing our do statement and opening up a while loop, which works on while the variable $i is greater than 1.</p>
<p>This is rather simple, and may seem pointless but it does come in handy and is useful in certain circumstances. Here is a more advanced do while loop, with an if loop and a break in it.</p>
<pre><code class="lang-auto">&lt;?php
$i=5;
do{
echo $i;
echo "&lt;br /&gt;";
$i=$i+1;
if($i&gt;162) {
break;
   }
} 
while ($i &lt; 15);
?&gt;</code></pre>
<p>This is once again, a do while loop.  Which is more or less the same as the last but since it’s the last loop in this tutorial, I’ll describe it further. As usual &lt;?php ?&gt; is our opening and closing tags, we’re then setting the variable of $i as 5. We’re then starting a do statement which echos the $i variable along with a line break. We’re then saying that the variable $i should have 1 added to it every recurrence of the loop. We’re then adding a parameter of $i being greater than 162 then we should break the loop. We then have the condition of the variable of $i being less than 15 for the while loop to initiate.</p>
<p><span class="bbcode-b">Part 2.5 - Associative Arrays within Foreach Loops</span><br>
Associative arrays will be explained further in my Arrays tutorial which will come sometime in the very near future, maybe even tonight. If you don’t understand it, don’t worry about it. As per usual, I’ll give you the code then I’ll talk you through it.</p>
<pre><code class="lang-auto">$moparActivity["March"] = "436";
$moparActivity["April"] = "396";
$moparActivity["May"] = "379";
$moparActivity["June"] = "586";
$moparActivity["July"] = "458";
$moparActivity["August"] = "387";

foreach( $moparActivity as $month =&gt; $activity){
	echo "Month: $month &lt;br /&gt; Users Online: $activity &lt;br /&gt;&lt;br /&gt;";
}</code></pre>
<p>The above code is telling us the activity for MoparScape in users in the past 6 months, hence the array $moparActivity. This is what’s known as an associative array and we’re iterating it through a ForEach loop. We use this type of loop because it will execute the code for each piece of data. So lets talk through it, we’re initiating the array with $moparActivity[“month”] = “usersonline”; Then we do this for the previous months. After doing this, we then initiate a foreach loop that is changing the data from the $moparActivity array, to holding the month in $month and the users online in $activity. This is then echoed in the next line and there we have it.</p>
<p>[hr]</p>
<p>We’ll now start on <span class="bbcode-b">connecting to MySQL.</span></p>
<p><span class="bbcode-b">Part 3.1 - Populating the table</span><br>
First of all, you want to add a table and add fields to your table, this is done through the use of an SQL script. I realise this can seem a little daunting, but it’s not hard. As usual, I’ll give you the code and then I’ll talk through it after:</p>
<pre><code class="lang-auto">CREATE TABLE IF NOT EXISTS `mopartut` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `title` varchar(50) NOT NULL,
  `text` text NOT NULL,
  `date` varchar(25) NOT NULL,
  PRIMARY KEY (`id`)
)</code></pre>
<p>So, your first line of your script is more or less telling MySQL to create the table  "mopartut if it doesn’t already exist. Your next line is then defining the row “id” this is an integer, which can be up to 11 characters long. It is a blank value, so it isn’t null, because there’s a difference between empty and a blank value and nothing. A blank value is <span class="bbcode-i">something</span>, where if there is no value, it is<span class="bbcode-i"> nothing</span>. This is also auto incrementing which means when every new record is added, it gives it a new id, 1 higher than the previous id. You then create the row of “title” this is declared as a varchar holding up to 50 characters, a varchar is a variable-length string. Again, a blank value. You then create the row “text” this is declared as text, which is self explanatory and is again, a blank value therefore not null. Your final row is the date, this is a varchar (variable-length string) holding up to 25 characters, again a not null value since it is blank and not nothing. We’re then declaring our primary key as the row of “id”. This is more used for your most vital tables, as somewhat of a search process.</p>
<p>Now that you’ve done that, you want to click “insert” and then insert the values you wish each of these to hold. For example;</p>
<p>Title - Mopar Tutorial!<br>
Text - Welcome to Ruby’s tutorial!<br>
Date - 3/9/12</p>
<p>The ID isn’t needed since it’s auto incrementing.</p>
<p>If you didn’t understand that, have a run back through it a few times until you do.</p>
<p>Moving swiftly on to our next port of call; connecting, opening and closing through PHP.</p>
<p><span class="bbcode-b">Part 3.2 - Connecting, Opening and Closing connections through PHP.</span></p>
<p>So, after creating and understanding our table, here is the PHP part. We’ll use three very simple functions here; mysql_connect(), mysql_select_db(), mysql_close(). These aren’t hard to remember, but if you aren’t good at remembering functions such as this, write them down somewhere or bookmark this tutorial for easy access. As usual I’ll give you the coding then I’ll talk you through it.</p>
<pre><code class="lang-auto">$username = "yourmysqlusername";
$password = "yourmysqlpassword";
$database = "yourprefix_mopartut";
$server = "localhost"; //99% of the time this is localhost, if it isn't, you'll know what it is.

$connect = mysql_connect($server, $username, $password);

$found = mysql_select_db($database, $connect);

if ($found) {
echo 'database located!';
mysql_close($connect);
} else {
echo 'database could not be located, rewrite your code';
}</code></pre>
<p>This above code is really simple to understand so I won’t go into too much detail. All you’re doing is declaring 4 variables holding information on your database. $username, $password are your username and password. $database is the database you wish to select and $server is the server on which your database is hosted; usually localhost. We now declare the variable $connect this holds the function mysql_connect();, which now has $server, $username and $password in it, all the information you need to connect. We then declare $found for the database being found, this is where we make use of the mysql_select_db(); function, inside this function we have $database which is the database we want to connect to and we include $connect for good measures. We then start an if statement saying that if $found works and we find the database and manage to connect, it echoes some code saying we managed it. If we didn’t manage to connect it tells us to re-write our code. However, it should work 100% since I just tested it two minutes ago.<br>
<span class="bbcode-b"><br>
Part 3.3 - Selecting data from the database.<br>
</span><br>
Now that you’ve connected, we can now start to retrieve information from the database that you populated with the record from the first part.</p>
<p>Now, for this we will be using our script we created two minutes ago with some new code added in. I’ll post the new script and then I’ll talk you through it again, as usual.</p>
<pre><code class="lang-auto">$username = "yourmysqlusername";
$password = "yourmysqlpassword";
$database = "yourprefix_mopartut";
$server = "localhost"; //99% of the time this is localhost, if it isn't, you'll know what it is.

$connect = mysql_connect($server, $username, $password);

$found = mysql_select_db($database, $connect);

if ($found) {

$SQL = "SELECT * FROM yourprefix_mopartut";
$result = mysql_query($SQL);

while ($dbrow = mysql_fetch_assoc($result)) {
echo $dbrow['ID'] . "&lt;br /&gt;";
echo $dbrow['title'] . "&lt;br /&gt;";
echo $dbrow['text'] . "&lt;br /&gt;";
echo $dbrow['date'] . "&lt;br /&gt;";
}
mysql_close($connect);
} else {
echo 'database could not be located, rewrite your code';
}</code></pre>
<p>Okay, so here’s the break down. Everything has been explained above apart from this code:</p>
<pre><code class="lang-auto">$SQL = "SELECT * FROM yourprefix_mopartut";
$result = mysql_query($SQL);

while ($dbrow = mysql_fetch_assoc($result)) {
echo $dbrow['ID'] . "&lt;br /&gt;";
echo $dbrow['title'] . "&lt;br /&gt;";
echo $dbrow['text'] . "&lt;br /&gt;";
echo $dbrow['date'] . "&lt;br /&gt;";
}</code></pre>
<p>So this is all I’ll explain. First off, we’re declaring $SQL which contains an sql query using the SELECT function in SQL. This also has a “*” in it, this just means all, the FROM is then asking from which database you wanted it loaded. We’re then doing $result as our sql query, using a new function “mysql_query();” which now contains the $SQL variable which has all the information the query needs to run. We then start a while loop, if you haven’t read my previous tutorials there’s one about loops in there. We’re declaring the new variable $dbrow which equals the data returned by $result from the SQL query. We’re then echoing $dbrow and it’s actual rows, e.g <code>text</code> and <code>title</code> as [‘text’] and [‘title’]. If you have read my arrays tutorial, you’ll realise this information has been returned in an array! After these is just simple line breaks, remember your " . " or it won’t work, see previous tutorials as to why.</p>
      </div>

      <meta itemprop='headline' content='A few PHP tutorials'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/classic.html'><span itemprop='name'>classic</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-09-20T11:39:43Z'>
            <time itemprop='dateModified' datetime='2016-08-04T00:13:57Z' class='post-time'>
              August 4, 2016, 12:13am
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Post in between so he can post again</p>
      </div>

      <meta itemprop='headline' content='A few PHP tutorials'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Ruby_Forums_Coder.html'><span itemprop='name'>Ruby_Forums_Coder</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-09-20T11:40:14Z'>
            <time itemprop='dateModified' datetime='2016-08-04T00:13:57Z' class='post-time'>
              August 4, 2016, 12:13am
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p><span class="bbcode-b">Part 4 - Protecting your scripts against SQLi and XSS.</span></p>
<p><span class="bbcode-b">Part 4.1 - Populating your database.</span><br>
Okay, so as always we need to populate a database to use with this. Run the following query through your database to populate it correctly.</p>
<pre><code class="lang-auto">CREATE TABLE IF NOT EXISTS `tutorial` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `name` varchar(30) NOT NULL,
 `occupation` varchar(50) NOT NULL,
PRIMARY KEY (`id`)
)</code></pre>
<p>Time to explain the code to the people who are just reading this without reading my previous tutorials. Okay, so the first line is you telling the database to create the table “tutorial” if it doesn’t already exist. We then move on to adding the “id” column, which is an integer that can be as big as 11 characters long, it’s a blank value therefore it isnt null, and it’s auto incrementing so we don’t need to assign a value to it. We then add the “name” column which is a variable character of 30 characters long and is a blank value  therefore not nulled. We then move on to our final column, the occupation column. This is a variable character of 50 characters long and is also a blank value which therefore isn’t nulled. We then add the Primary Key of the column “id” which means we will just use “id” for our search methods.</p>
<p>Okay, so you’ve now populated a database with a table and 3 columns, congratulations! Lets move on to our demonstration of MySQL Injection:</p>
<p><span class="bbcode-b">Part 4.2 - MySQL Injection</span><br>
Okay, so I’m sure you’ve all heard of this before. It’s a must that you protect your scripts from MySQL Injection because if you don’t, your entire database is at risk to manipulation that isn’t authorized by you. This won’t be following my conventional tutorial technique in the sense that I’ll give you the code and then explain it, I’m going to give you some vulnerable code, then give you the methods to solve it, then give you the repaired and secure code.</p>
<p>HTML Form:</p>
<pre><code class="lang-auto">&lt;form action="form.php" method="POST"&gt;
    &lt;label for="name" id="name_label"&gt;Your Name&lt;br /&gt;&lt;/label&gt;  
    &lt;input type="text" name="name" id="name" size="30" value=""/&gt;  
	&lt;br /&gt;
    &lt;label for="occupation" id="occupation"&gt;Occupation&lt;br /&gt;&lt;/label&gt;  
    &lt;input type="text" name="occupation" id="occupation" size="30" value=""/&gt; 
	&lt;input type="submit" name="submit" value="Submit"&gt; 
&lt;/form&gt;</code></pre>
<p>Vulnerable Code:</p>
<pre><code class="lang-auto">$database = "tutorial";
$user = "yourusername";
$pass = "yourpassword";
$server = "localhost";

$con = mysql_connect($server, $user, $pass);

mysql_select_db($database, $con);

$query = mysql_query("INSERT INTO `tutorial` (`name`, `occupation`) VALUES ('$_POST[name], $_POST[occupation])");

mysql_close($con);</code></pre>
<p>Okay, so now you have the code of the vulnerable class. Basically what MySQL Injection is is that people can insert queries into your box on the form and can manipulate the database and it’s values, even drop the entire database. Okay, so first of all, global variables shouldn’t be directly inserted into any query at all, they should always be changed to regular variables. PHP also comes with a function already in it to stop sql injection - mysql_real_escape_string(), which comes in very handy. To sum up the above, never directly insert global variables into a query and always run your variables through mysql_real_escape_string() before inserting them into a database. Here is the fixed and secure code:</p>
<pre><code class="lang-auto">
$database = "db";
$user = "user";
$pass = "pass";
$server = "localhost";

$con = mysql_connect($server, $user, $pass);

mysql_select_db($database, $con);

$name = mysql_real_escape_string($_POST['name']);
$occupation = mysql_real_escape_string($_POST['occupation']);

$query = mysql_query("INSERT INTO `tutorial` (`name`, `occupation`) VALUES ('$name', '$occupation')");

mysql_close($con);
</code></pre>
<p>Okay, so now it’s time to talk through it. You start by declaring your 4 variables relating to the connection of the database. $database, $user, $pass, $server remember that  the server will almost always be localhost. We then connect to the database using mysql_connect(), including the variables $server, $user and $pass and assigning all of this to the $con variable. We then move on to using mysql_select_db() and picking the database we’re going to use, including the variables $database and $con variables. We then get to sanitizing our variables and changing them from global variables to static variables by declaring them as $name and $occupation also, include the global variables inside mysql_real_escape_string() to make sure there’s no sql injection happening. We then host a mysql query by inserting the $name and $occupation variables into our database using mysql_query() and then we finally close our database connection using mysql_close();.</p>
<p>Simple enough to protect your database right?</p>
<p>Lets move on to preventing XSS attacks.</p>
<p><span class="bbcode-b">Part 4.3 - Preventing XSS.</span><br>
XSS or Cross Server Scripting is also a very common attack launched on on databases. This is primarily used when someone displays content from a database after it’s been inserted through a form. Such as displaying your latest voters, if they input their username into the box and then once they click submit it shows a table of the last 5 voters, if instead of inputting their name they wrote <code>&lt;script&gt;alert("moparscape")&lt;/script&gt;</code> This would send a popup box to whoever visited the page saying “MoparScape”, but can of course be used for more serious issues.</p>
<p>As I done the last time, I’ll give you the vulnerable code, then the methods to fix it and then the fixed and secured code.</p>
<p>Vulnerable:</p>
<pre><code class="lang-auto">&lt;form action="form_votes.php" method="POST"&gt;
    &lt;label for="name" id="name_label"&gt;Your Name&lt;br /&gt;&lt;/label&gt;  
    &lt;input type="text" name="name" id="name" size="30" value=""/&gt;  
	&lt;input type="submit" name="submit" value="Submit"&gt; 
&lt;/form&gt;</code></pre>
<p><span class="bbcode-b">N.B. The HTML isn’t actually vulnerable, it’s just the form for inputting data.</span></p>
<pre><code class="lang-auto">
$database = "db";
$user = "user";
$pass = "pass";
$server = "localhost";

$con = mysql_connect($server, $user, $pass);

mysql_select_db($database, $con);

$firstQuery = mysql_query("INSERT INTO `tutorial` (`name`) VALUES ('$_POST[name]')");

$secondQuery = mysql_query("SELECT `name` FROM `tutorial` ORDER BY `id` DESC");
while($row = mysql_fetch_assoc($secondQuery)) {
?&gt;

      &lt;table width="880px" align="center"&gt;
        &lt;tr&gt;
          &lt;td width="100%"&gt;&lt;b&gt;&lt;?php echo ($row['name']); ?&gt;&lt;b&gt;&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/table&gt;

&lt;?php

}

mysql_close($con);</code></pre>
<p>Okay, so there’s several ways to stop XSS, but the easiest is to stop the HTML tags that were inserted from working by using htmlspecialchars(). Also, we will be preventing this script from SQL Injection attacks. So if you remember from the last time, we need to stop the global $_POST variables from being global, we also need to make sure there wasn’t an SQL query hidden in the input box. With code like this where it displays something using global variables to begin with, if you visit the actual script itself it will insert a blank value, since the variable has nothing assigned to it so first we have to check if the variable is empty to stop the blank value being posted. So here is the secured code:</p>
<pre><code class="lang-auto">
$database = "db";
$user = "user";
$pass = "pass";
$server = "localhost";

$con = mysql_connect($server, $user, $pass);

mysql_select_db($database, $con);

$name = mysql_real_escape_string($_POST['name']);

if(empty($_POST['name'])) {

die();

} else {

$firstQuery = mysql_query("INSERT INTO `tutorial` (`name`) VALUES ('$name')");

$secondQuery = mysql_query("SELECT `name` FROM `tutorial` ORDER BY `id` DESC LIMIT 5");
while($row = mysql_fetch_assoc($secondQuery)) {
?&gt;

      &lt;table width="880px" align="center"&gt;
        &lt;tr&gt;
          &lt;td width="100%"&gt;&lt;b&gt;&lt;?php echo htmlspecialchars($row['name']); ?&gt;&lt;b&gt;&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/table&gt;

&lt;?php

  }
}

mysql_close($con);
</code></pre>
<p>Okay, so as usual we start  with our 4 connection variables. $database, $user, $pass, $server. We then connect with mysql_connect() and the variables $server, $user, $pass and assign the connection to $con, then we select the database with mysql_select_db() and the variables $db and $con. Now here’s our first part of securing the script, we stop sql attacks by using mysql_real_escape_string() and in this process we assign $_POST[‘name’] to $name. We now check if $name is empty using the empty() function supplied by PHP. If $name is empty, the script stops working there but if $name contains a value we proceed onto running our insert query by inserting $name into the name column of the tutorial table. We’re then going on to our second query, $secondQuery. This is where we retrieve the latest voters, well, last 5 voters. We’re selecting the name column from the tutorial table descending by the id and limiting it to 5 values returned. We’re then initiating a while loop retrieving the values using mysql_fetch_assoc() and the $secondQuery variable. And we’re now on to the part where we display the information through a simple table. You’ll notice that inside this table, we have a small PHP statement, using echo and htmlspecialchars() the htmlspecialchars() is what protects us from the XSS attacks as this strips the html tags of their html properties and just echoes them as plain characters. We then end the two open braces we had open and close the connection through mysql_close().</p>
<p>[hr]</p>
<p>I’ll probably add some more into this soon, keep checking back.</p>
<p>Regards,<br>
Ruby.</p>
      </div>

      <meta itemprop='headline' content='A few PHP tutorials'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/a-few-php-tutorials/460790 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 23:00:32 GMT -->
</html>
