<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>#317 Packet 246 - Send model</title>
    <link>https://forum.moparisthebest.com/t/317-packet-246-send-model/539591</link>
    <description>Found another unidentified packet during my adventures to fix my skill level up interface! I used another source as reference for this packet structure and found out it was incorrect.

[hr]

Description: Sends model (like how you can send text to an interface)

STRUCTURE
OPCODE 246
LENGTH 6
SIZE FIXED

Short Little Endian - frame id
Short - zoom (default 200?)
Short - item id

[hr]

How you would go about implementing this (I use RuneSource):

[code=java]    /**
     * Sends a model to the given frame?
     * @param frame frame id
     * @param zoom zoom
     * @param itemId item id
     */
    public void sendInterfaceModel(int frame, int zoom, int itemId) {
        StreamBuffer.OutBuffer out = StreamBuffer.newOutBuffer(8);
        out.writeHeader(getEncryptor(), 246);
        out.writeShort(frame, StreamBuffer.ByteOrder.LITTLE);
        out.writeShort(zoom);
        out.writeShort(itemId);
        send(out.getBuffer());
    }[/code]

[hr]

Here is how the 317 refactored client processes it:
[code=java]if (pktType == 246) { // PACKET 246
  int i6 = inStream.method434(); // SHORT LITTLE_ENDIAN (frame id)
  int i13 = inStream.readUnsignedWord(); // SHORT (zoom)
  int k18 = inStream.readUnsignedWord(); // SHORT (item id)

  // DEBUG - used this to trial and error it
  System.out.println(&quot;[PACKET 246] Frame ID: &quot; + i6 + &quot;, Zoom: &quot; + i13 + &quot;, Item ID: &quot; + k18);

  if(k18 == 65535) {
    RSInterface.interfaceCache[i6].anInt233 = 0;
    pktType = -1;
    return true;
  } else {
    ItemDef itemDef = ItemDef.forID(k18); // gets the item definition based upon val of k18 (item id)
    RSInterface.interfaceCache[i6].anInt233 = 4;
    RSInterface.interfaceCache[i6].mediaID = k18;
    RSInterface.interfaceCache[i6].anInt270 = itemDef.modelRotation1;
    RSInterface.interfaceCache[i6].anInt271 = itemDef.modelRotation2;
    RSInterface.interfaceCache[i6].anInt269 = (itemDef.modelZoom * 100) / i13; // zoom skewed according to val of i13
    pktType = -1;
    return true;
    }
  }
}[/code]

[hr]

Putting it to use (ie for the herblore level up interface, by default the farming sprinker isn&#39;t there).

[img]http://puu.sh/6HQvL.png[/img]</description>
    
    <lastBuildDate>Sat, 15 Feb 2014 16:19:35 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/317-packet-246-send-model/539591.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>#317 Packet 246 - Send model</title>
        <dc:creator><![CDATA[@doom_j doom_j]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/doom_j">@doom_j</a> wrote:</p>
          <blockquote>
              <p>If by files you mean pages?</p>
<p>To create a page is a little cumbersome since we don’t have it on a drop down menu like a more update wikia would.</p>
<p><a href="http://rswiki.moparisthebest.com/index.php?title=317:Object_action_2" class="onebox" target="_blank" rel="nofollow noopener">http://rswiki.moparisthebest.com/index.php?title=317:Object_action_2</a></p>
<p>Just change the Object_action_2 to the name of packet 246 so say something like SendInterfaceModel, or another good name.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-packet-246-send-model/539591/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-packet-246-send-model/539591/9</link>
        <pubDate>Sat, 15 Feb 2014 16:19:35 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-539591-9</guid>
        <source url="https://forum.moparisthebest.com/t/317-packet-246-send-model/539591.rss">#317 Packet 246 - Send model</source>
      </item>
      <item>
        <title>#317 Packet 246 - Send model</title>
        <dc:creator><![CDATA[@arham_4 arham 4]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/arham_4">@arham_4</a> wrote:</p>
          <blockquote>
              <p>[quote=“Pure_, post:7, topic:539591”][quote author=AtomicInt_ link=topic=658432.msg4404379#msg4404379 date=1391459526]</p>
<aside class="quote">
<blockquote>
<p>I don’t have file creation access yet unfortunately.</p>
</blockquote>
</aside>
<p>Anyone can edit the RSWiki, you just need an account.<br>
[/quote]You can edit it, not create files - I’m sure (I even asked t4).[/quote]<br>
I’m pretty sure I did it for 474.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-packet-246-send-model/539591/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-packet-246-send-model/539591/8</link>
        <pubDate>Sat, 15 Feb 2014 14:11:02 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-539591-8</guid>
        <source url="https://forum.moparisthebest.com/t/317-packet-246-send-model/539591.rss">#317 Packet 246 - Send model</source>
      </item>
      <item>
        <title>#317 Packet 246 - Send model</title>
        <dc:creator><![CDATA[@pure2ownage Pure_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/pure2ownage">@pure2ownage</a> wrote:</p>
          <blockquote>
              <p>[quote=“AtomicInt_, post:6, topic:539591”][quote author=Pure_ link=topic=658432.msg4404355#msg4404355 date=1391455597]<br>
I don’t have file creation access yet unfortunately.<br>
[/quote]</p>
<p>Anyone can edit the RSWiki, you just need an account.[/quote]You can edit it, not create files - I’m sure (I even asked t4).</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-packet-246-send-model/539591/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-packet-246-send-model/539591/7</link>
        <pubDate>Mon, 03 Feb 2014 20:40:46 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-539591-7</guid>
        <source url="https://forum.moparisthebest.com/t/317-packet-246-send-model/539591.rss">#317 Packet 246 - Send model</source>
      </item>
      <item>
        <title>#317 Packet 246 - Send model</title>
        <dc:creator><![CDATA[@ExtremeX-Scape Ryley]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/extremex-scape">@ExtremeX-Scape</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="5" data-topic="539591">
<div class="title">
<div class="quote-controls"></div>
 Pure_:</div>
<blockquote>
<p>I don’t have file creation access yet unfortunately.</p>
</blockquote>
</aside>
<p>Anyone can edit the RSWiki, you just need an account.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-packet-246-send-model/539591/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-packet-246-send-model/539591/6</link>
        <pubDate>Mon, 03 Feb 2014 20:32:06 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-539591-6</guid>
        <source url="https://forum.moparisthebest.com/t/317-packet-246-send-model/539591.rss">#317 Packet 246 - Send model</source>
      </item>
      <item>
        <title>#317 Packet 246 - Send model</title>
        <dc:creator><![CDATA[@pure2ownage Pure_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/pure2ownage">@pure2ownage</a> wrote:</p>
          <blockquote>
              <p>I don’t have file creation access yet unfortunately.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-packet-246-send-model/539591/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-packet-246-send-model/539591/5</link>
        <pubDate>Mon, 03 Feb 2014 19:26:37 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-539591-5</guid>
        <source url="https://forum.moparisthebest.com/t/317-packet-246-send-model/539591.rss">#317 Packet 246 - Send model</source>
      </item>
      <item>
        <title>#317 Packet 246 - Send model</title>
        <dc:creator><![CDATA[@ExtremeX-Scape Ryley]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/extremex-scape">@ExtremeX-Scape</a> wrote:</p>
          <blockquote>
              <p>document it on rswiki if it isnt already</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-packet-246-send-model/539591/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-packet-246-send-model/539591/4</link>
        <pubDate>Mon, 03 Feb 2014 19:04:14 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-539591-4</guid>
        <source url="https://forum.moparisthebest.com/t/317-packet-246-send-model/539591.rss">#317 Packet 246 - Send model</source>
      </item>
      <item>
        <title>#317 Packet 246 - Send model</title>
        <dc:creator><![CDATA[@kronixz kronikz]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/kronixz">@kronixz</a> wrote:</p>
          <blockquote>
              <p>Nice pure2ownage</p>
<p>coolio</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-packet-246-send-model/539591/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-packet-246-send-model/539591/3</link>
        <pubDate>Mon, 03 Feb 2014 18:50:45 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-539591-3</guid>
        <source url="https://forum.moparisthebest.com/t/317-packet-246-send-model/539591.rss">#317 Packet 246 - Send model</source>
      </item>
      <item>
        <title>#317 Packet 246 - Send model</title>
        <dc:creator><![CDATA[@Clawz_fury lare69]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/clawz_fury">@Clawz_fury</a> wrote:</p>
          <blockquote>
              <p>&lt;3</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-packet-246-send-model/539591/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-packet-246-send-model/539591/2</link>
        <pubDate>Mon, 03 Feb 2014 10:34:26 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-539591-2</guid>
        <source url="https://forum.moparisthebest.com/t/317-packet-246-send-model/539591.rss">#317 Packet 246 - Send model</source>
      </item>
      <item>
        <title>#317 Packet 246 - Send model</title>
        <dc:creator><![CDATA[@pure2ownage Pure_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/pure2ownage">@pure2ownage</a> wrote:</p>
          <blockquote>
              <p>Found another unidentified packet during my adventures to fix my skill level up interface! I used another source as reference for this packet structure and found out it was incorrect.</p>
<p>[hr]</p>
<p>Description: Sends model (like how you can send text to an interface)</p>
<p>STRUCTURE<br>
OPCODE 246<br>
LENGTH 6<br>
SIZE FIXED</p>
<p>Short Little Endian - frame id<br>
Short - zoom (default 200?)<br>
Short - item id</p>
<p>[hr]</p>
<p>How you would go about implementing this (I use RuneSource):</p>
<p><code>    /**
     * Sends a model to the given frame?
     * @param frame frame id
     * @param zoom zoom
     * @param itemId item id
     */
    public void sendInterfaceModel(int frame, int zoom, int itemId) {
        StreamBuffer.OutBuffer out = StreamBuffer.newOutBuffer(8);
        out.writeHeader(getEncryptor(), 246);
        out.writeShort(frame, StreamBuffer.ByteOrder.LITTLE);
        out.writeShort(zoom);
        out.writeShort(itemId);
        send(out.getBuffer());
    }</code></p>
<p>[hr]</p>
<p>Here is how the 317 refactored client processes it:</p>
<p>[code=java]if (pktType == 246) { // PACKET 246<br>
int i6 = inStream.method434(); // SHORT LITTLE_ENDIAN (frame id)<br>
int i13 = inStream.readUnsignedWord(); // SHORT (zoom)<br>
int k18 = inStream.readUnsignedWord(); // SHORT (item id)</p>
<p>// DEBUG - used this to trial and error it<br>
System.out.println("[PACKET 246] Frame ID: " + i6 + ", Zoom: " + i13 + ", Item ID: " + k18);</p>
<p>if(k18 == 65535) {<br>
RSInterface.interfaceCache[i6].anInt233 = 0;<br>
pktType = -1;<br>
return true;<br>
} else {<br>
ItemDef itemDef = ItemDef.forID(k18); // gets the item definition based upon val of k18 (item id)<br>
RSInterface.interfaceCache[i6].anInt233 = 4;<br>
RSInterface.interfaceCache[i6].mediaID = k18;<br>
RSInterface.interfaceCache[i6].anInt270 = itemDef.modelRotation1;<br>
RSInterface.interfaceCache[i6].anInt271 = itemDef.modelRotation2;<br>
RSInterface.interfaceCache[i6].anInt269 = (itemDef.modelZoom * 100) / i13; // zoom skewed according to val of i13<br>
pktType = -1;<br>
return true;<br>
}<br>
}<br>
}[/code]</p>
<p>[hr]</p>
<p>Putting it to use (ie for the herblore level up interface, by default the farming sprinker isn’t there).</p>
<p><img src="http://puu.sh/6HQvL.png" alt width="" height=""></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/317-packet-246-send-model/539591/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/317-packet-246-send-model/539591/1</link>
        <pubDate>Sun, 02 Feb 2014 22:41:03 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-539591-1</guid>
        <source url="https://forum.moparisthebest.com/t/317-packet-246-send-model/539591.rss">#317 Packet 246 - Send model</source>
      </item>
  </channel>
</rss>
