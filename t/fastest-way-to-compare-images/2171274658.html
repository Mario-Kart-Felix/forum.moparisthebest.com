<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/fastest-way-to-compare-images/217127?page=2 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 15:17:50 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Fastest way to compare images - General Programming - moparisthebest.com</title>
    <meta name="description" content="hello, i am making a database of images, but i wanna check if none are double. i got like 15.000 images in database now and takes like 30+ seconds per image to check if already in database 

this is my comparing code:  
&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="2171274658.html?page=2" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Fastest way to compare images&#39;" href="217127.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/fastest-way-to-compare-images/217127?page=2" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/fastest-way-to-compare-images/217127?page=2" />
<meta property="og:title" content="Fastest way to compare images" />
<meta name="twitter:title" content="Fastest way to compare images" />
<meta property="og:description" content="only 100mb? that’s not much." />
<meta name="twitter:description" content="only 100mb? that’s not much." />
<meta property="article:published_time" content="2008-07-06T12:47:09+00:00" />
<meta property="og:ignore_canonical" content="true" />

      <link rel="prev" href="217127.html">


    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="217127.html">Fastest way to compare images</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/general-programming.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>General Programming</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/supamagier.html'><span itemprop='name'>supamagier</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-07-06T12:47:09Z'>
            <time itemprop='dateModified' datetime='2016-07-31T00:01:56Z' class='post-time'>
              July 31, 2016, 12:01am
            </time>
        <span itemprop='position'>#21</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>only 100mb? that’s not much.</p>
      </div>

      <meta itemprop='headline' content='Fastest way to compare images'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/frank.html'><span itemprop='name'>frank</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-07-06T13:14:49Z'>
            <time itemprop='dateModified' datetime='2016-07-31T00:01:57Z' class='post-time'>
              July 31, 2016, 12:01am
            </time>
        <span itemprop='position'>#22</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“supamagier, post:21, topic:217127”]only 100mb? that’s not much.[/quote]welllllllllll i was wrong <img src="../../images/emoji/twitter/wink1bce.png?v=6" title=":wink:" class="emoji" alt=":wink:"> myb 1gb</p>
<p>either way, if you have 1500mb of heap space, it should be enough</p>
      </div>

      <meta itemprop='headline' content='Fastest way to compare images'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/k00dr.html'><span itemprop='name'>k00dr</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-07-07T01:50:26Z'>
            <time itemprop='dateModified' datetime='2016-07-31T00:02:41Z' class='post-time'>
              July 31, 2016, 12:02am
            </time>
        <span itemprop='position'>#23</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Here’s something I wrote to get rid of few duplicate songs.<br>
You might learn something… <img src="../../images/emoji/twitter/slight_smile1bce.png?v=6" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>[code]import java.io.File;<br>
import java.io.FileInputStream;<br>
import java.io.IOException;<br>
import java.security.MessageDigest;<br>
import java.security.NoSuchAlgorithmException;<br>
import java.util.LinkedList;<br>
import java.util.List;</p>
<p>public final class DupeFinder {</p>
<p>final Tree database;</p>
<p>final LinkedList duplicates;</p>
<p>final byte[] buffer;</p>
<p>final MessageDigest digest;</p>
<p>public DupeFinder() {<br>
database = new Tree();<br>
duplicates = new LinkedList();<br>
buffer = new byte[16384 * 64]; //SHA-1 operates on 512 bit blocks, anyways, a megabyte buffer<br>
try {<br>
digest = MessageDigest.getInstance(“SHA-1”);<br>
} catch(NoSuchAlgorithmException exception) {<br>
throw new UnsupportedOperationException(exception);<br>
}<br>
}</p>
<p>public final void reset() {<br>
database.clear();<br>
duplicates.clear();<br>
}</p>
<p>public final List find(File root, boolean recursion) {<br>
if(recursion) {<br>
findRecursively(root);<br>
}<br>
else {<br>
find(root);<br>
}<br>
return duplicates;<br>
}</p>
<p>private final void findRecursively(File root) {<br>
File[] sub = root.listFiles();<br>
if(sub == null) {<br>
return;<br>
}<br>
for(File file : sub) {<br>
if(file.isDirectory()) {<br>
findRecursively(file);<br>
}<br>
else if(isDuplicate(file)) {<br>
duplicates.add(file);<br>
}<br>
}<br>
}</p>
<p>private final void find(File root) {<br>
File[] sub = root.listFiles();<br>
if(sub == null) {<br>
return;<br>
}<br>
for(File file : sub) {<br>
if(!file.isDirectory() &amp;&amp; isDuplicate(file)) {<br>
duplicates.add(file);<br>
}<br>
}<br>
}</p>
<p>private final boolean isDuplicate(File file) {<br>
digest.reset();<br>
try {<br>
FileInputStream stream = new FileInputStream(file);<br>
for(int block; (block = stream.read(buffer)) != -1; ) {<br>
digest.update(buffer, 0, block);<br>
}<br>
stream.close();<br>
return !database.add(digest.digest());<br>
} catch(IOException exception) {<br>
exception.printStackTrace();<br>
return false;<br>
}<br>
}</p>
<p>//a light binary hash tree implementation<br>
final static class Tree {</p>
<pre><code>Node root;

Tree() {
  root = null;
}

final void clear() {
  root = null;
}

//returns true if the hash was successfully added to the tree and false if hash was found in the tree
final boolean add(byte[] hash) {
  if(root != null) {
    return root.addTraverse(hash);
  }
  else {
    root = new Node(hash);
    return true;
  }
}

final static class Node {

  final byte[] hash;

  Node left;

  Node right;

  Node(byte[] hash) {
    this.hash = hash;
    left = null;
    right = null;
  }

  final boolean addTraverse(byte[] newHash) {
    int k = compare(hash, newHash);
    if(k &lt; 0) {
      if(left != null) {
        return left.addTraverse(newHash);
      }
      else {
        left = new Node(newHash);
        return true;
      }
    }
    else if(k &gt; 0) {
      if(right != null) {
        return right.addTraverse(newHash);
      }
      else {
        right = new Node(newHash);
        return true;
      }
    }
    else {
      return false;
    }
  }
}
</code></pre>
<p>}</p>
<p>final static int compare(byte[] a, byte[] b) {<br>
int i = a.length;<br>
int j = b.length;<br>
int k = i - j;<br>
if(k != 0) {<br>
return k;<br>
}<br>
for(i = 0; i &lt; j; i++) {<br>
k = a[i] - b[i];<br>
if(k != 0) {<br>
return k;<br>
}<br>
}<br>
return 0;<br>
}</p>
<p>}[/code]</p>
      </div>

      <meta itemprop='headline' content='Fastest way to compare images'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Pwnd.html'><span itemprop='name'>Pwnd</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-07-07T01:57:02Z'>
            <time itemprop='dateModified' datetime='2016-07-31T00:02:42Z' class='post-time'>
              July 31, 2016, 12:02am
            </time>
        <span itemprop='position'>#24</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>( i have 98MB/3072MB in use)</p>
<p>Liar indeed.<br>
Windows uses more than that to just run.</p>
      </div>

      <meta itemprop='headline' content='Fastest way to compare images'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/ownagesbot.html'><span itemprop='name'>ownagesbot</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-07-07T17:02:08Z'>
            <time itemprop='dateModified' datetime='2016-07-31T00:03:25Z' class='post-time'>
              July 31, 2016, 12:03am
            </time>
        <span itemprop='position'>#25</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Each time you add an image to the database, write its hash code along side it too, (so you’ll have to add another field).<br>
When adding a new image, loop through the database hashes and compare them with the hash of the current image.</p>
<p>If you have a fairly efficient way of looping through the database you should be able to very quickly check for duplicates.[br][br][size=1]Posted on: July 07, 2008, 06:04:34 AM[/size][hr][quote=“Pwnd, post:24, topic:217127”]( i have 98MB/3072MB in use)</p>
<p>Liar indeed.<br>
Windows uses more than that to just run.[/quote]<br>
Don’t forget, whilst checking his disk space, one would assume hes running in windows… hence using that additional space up, so he might well have 298MB left, but whilst windows is running, the space it uses would be used up, therefore he has 98MB.<br>
Man this is like a tongue twister.</p>
      </div>

      <meta itemprop='headline' content='Fastest way to compare images'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Yz85Racer.html'><span itemprop='name'>Yz85Racer</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-07-08T07:08:50Z'>
            <time itemprop='dateModified' datetime='2016-07-31T00:04:36Z' class='post-time'>
              July 31, 2016, 12:04am
            </time>
        <span itemprop='position'>#26</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Bloodcompany, post:19, topic:217127”]thanks for your help guys <img src="../../images/emoji/twitter/wink1bce.png?v=6" title=":wink:" class="emoji" alt=":wink:"></p>
<p>but i got another issue, i can’t get above 1,5 gb RAM for my jvm<br>
even on my windows XP ( i have 98MB/3072MB in use)<br>
i can only get a max heap space of 1500 MB anyone knows why?[/quote]<br>
Why would you want so much?</p>
      </div>

      <meta itemprop='headline' content='Fastest way to compare images'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>

  <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
      <span itemprop='name'><a rel="prev" itemprop="url" href="217127.html">← previous page</a></span>
  </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/fastest-way-to-compare-images/217127?page=2 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 15:17:50 GMT -->
</html>
