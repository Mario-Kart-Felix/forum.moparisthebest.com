<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Info on npcs being imported</title>
    <link>https://forum.moparisthebest.com/t/info-on-npcs-being-imported/2831</link>
    <description>Well in class5 of deob 317 I found this (class5 is the npc class):

[code]

    public static final void method162(Class44 class44)
    {
        aClass30_Sub2_Sub2_60 = new Class30_Sub2_Sub2(class44.method571(&quot;npc.dat&quot;, null), 891);
        Class30_Sub2_Sub2 class30_sub2_sub2 = new Class30_Sub2_Sub2(class44.method571(&quot;npc.idx&quot;, null), 891);
        anInt62 = class30_sub2_sub2.method410();
        anIntArray72 = new int[anInt62];
        int i = 2;
        for(int j = 0; j &lt; anInt62; j++)
        {
            anIntArray72[j] = i;
            i += class30_sub2_sub2.method410();
        }

        aClass5Array80 = new Class5[20];
        for(int k = 0; k &lt; 20; k++)
            aClass5Array80[k] = new Class5();

    }

[/code]

Now the method410 striked my attention as with servers those methods read what the servers call them, for example outStream.writeWord(int); would be method 410, so in this case we did outStream.writeWord(10); the combat level of the npc would be 10, because anInt61 is the npcs combat level ;) 

I&#39;ll also find out what that anIntArray72 thing is, as j loops through every number from 0 to the npcs combat level into the array  :eek: then adds that interge i lol? =S

Also I found this which loads the npc list:
[code]
    private final void method31(Class30_Sub2_Sub2 class30_sub2_sub2, int i, int j)
    {
        anInt839 = 0;
        anInt893 = 0;
        if(j &lt;= 0)
            anInt877 = aClass17_1000.method246();
        method139(class30_sub2_sub2, -45, i);
        method46(i, class30_sub2_sub2, (byte)2);
        method86(i, class30_sub2_sub2, true);
        for(int k = 0; k &lt; anInt839; k++)
        {
            int l = anIntArray840[k];
            if(((Class30_Sub2_Sub4_Sub1) (aClass30_Sub2_Sub4_Sub1_Sub1Array835[l])).anInt1537 != anInt1161)
            {
                aClass30_Sub2_Sub4_Sub1_Sub1Array835[l].aClass5_1696 = null;
                aClass30_Sub2_Sub4_Sub1_Sub1Array835[l] = null;
            }
        }

        if(class30_sub2_sub2.anInt1406 != i)
        {
            signlink.reporterror(aString1173 + &quot; size mismatch in getnpcpos - pos:&quot; + class30_sub2_sub2.anInt1406 + &quot; psize:&quot; + i);
            throw new RuntimeException(&quot;eek&quot;);
        }
        for(int i1 = 0; i1 &lt; anInt836; i1++)
            if(aClass30_Sub2_Sub4_Sub1_Sub1Array835[anIntArray837[i1]] == null)
            {
                signlink.reporterror(aString1173 + &quot; null entry in npc list - pos:&quot; + i1 + &quot; size:&quot; + anInt836);
                throw new RuntimeException(&quot;eek&quot;);
            }

    }
[/code]

I found it while looking for creates a new class5() , through method46, that&#39;s the only place where it was called ;)
What caught my attention was the anInt1161, which I&#39;ve seen before and I&#39;m guessing it&#39;s the loop-cycle (not a clue what that is but it is), by looking at this:

[code]
    public void method72(byte byte0)
    {
        System.out.println(&quot;============&quot;);
        System.out.println(&quot;flame-cycle:&quot; + anInt1208);
        if(aClass42_Sub1_1068 != null)
            System.out.println(&quot;Od-cycle:&quot; + aClass42_Sub1_1068.anInt1341);
        System.out.println(&quot;loop-cycle:&quot; + anInt1161);
        System.out.println(&quot;draw-cycle:&quot; + anInt1061);
        System.out.println(&quot;ptype:&quot; + anInt1008);
        if(byte0 == 1)
            byte0 = 0;
        else
            anInt961 = 281;
        System.out.println(&quot;psize:&quot; + anInt1007);
        if(aClass24_1168 != null)
            aClass24_1168.method272((byte)1);
        super.aBoolean9 = true;
    }
[/code]

Also notice anInt1008, that&#39;s used when using outStream.createFrame(int) on servers ;) so yeah  :o

However this stuff is loaded before the client connects to the server, so I&#39;m not sure. Post any ideas/comments on this or anything else to do with intercepting npc data being imported so maybe one day we can figure out how to import our own models etc. properly :D</description>
    
    <lastBuildDate>Tue, 16 May 2006 02:12:51 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/info-on-npcs-being-imported/2831.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Info on npcs being imported</title>
        <dc:creator><![CDATA[@PaulT PaulT]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/pault">@PaulT</a> wrote:</p>
          <blockquote>
              <p>[quote=“xerozcheez, post:5, topic:2831”][quote author=White Castle link=topic=3132.msg29996#msg29996 date=1147623961]<br>
O rlyyyyyyyy? I’ve managed to change npc colors and walk type via the data files, but not the client.<br>
[/quote]</p>
<p>I lol’d[/quote]</p>
<p>I don’t get it.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/info-on-npcs-being-imported/2831/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/info-on-npcs-being-imported/2831/6</link>
        <pubDate>Tue, 16 May 2006 02:12:51 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-2831-6</guid>
        <source url="https://forum.moparisthebest.com/t/info-on-npcs-being-imported/2831.rss">Info on npcs being imported</source>
      </item>
      <item>
        <title>Info on npcs being imported</title>
        <dc:creator><![CDATA[@xerozcheez xerozcheez]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/xerozcheez">@xerozcheez</a> wrote:</p>
          <blockquote>
              <aside class="quote no-group quote-modified" data-post="4" data-topic="2831">
<div class="title">
<div class="quote-controls"></div>
 White Castle:</div>
<blockquote>
<p>O rlyyyyyyyy? I’ve managed to change npc colors and walk type via the data files, but not the client.</p>
</blockquote>
</aside>
<p>I lol’d</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/info-on-npcs-being-imported/2831/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/info-on-npcs-being-imported/2831/5</link>
        <pubDate>Sun, 14 May 2006 16:33:24 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-2831-5</guid>
        <source url="https://forum.moparisthebest.com/t/info-on-npcs-being-imported/2831.rss">Info on npcs being imported</source>
      </item>
      <item>
        <title>Info on npcs being imported</title>
        <dc:creator><![CDATA[@White_Castle White Castle]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/white_castle">@White_Castle</a> wrote:</p>
          <blockquote>
              <p>O rlyyyyyyyy? I’ve managed to change npc colors and walk type via the data files, but not the client.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/info-on-npcs-being-imported/2831/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/info-on-npcs-being-imported/2831/4</link>
        <pubDate>Sun, 14 May 2006 16:26:01 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-2831-4</guid>
        <source url="https://forum.moparisthebest.com/t/info-on-npcs-being-imported/2831.rss">Info on npcs being imported</source>
      </item>
      <item>
        <title>Info on npcs being imported</title>
        <dc:creator><![CDATA[@xerozcheez xerozcheez]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/xerozcheez">@xerozcheez</a> wrote:</p>
          <blockquote>
              <aside class="quote no-group quote-modified" data-post="2" data-topic="2831">
<div class="title">
<div class="quote-controls"></div>
 White Castle:</div>
<blockquote>
<p>This is how they import the data files, but we don’t even know the properties of the models, object files ect. yet, so that would be kind of pointless.</p>
</blockquote>
</aside>
<p>Not really, swift has already managed to edit the colour of npcs using it…lol</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/info-on-npcs-being-imported/2831/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/info-on-npcs-being-imported/2831/3</link>
        <pubDate>Sun, 14 May 2006 15:56:48 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-2831-3</guid>
        <source url="https://forum.moparisthebest.com/t/info-on-npcs-being-imported/2831.rss">Info on npcs being imported</source>
      </item>
      <item>
        <title>Info on npcs being imported</title>
        <dc:creator><![CDATA[@White_Castle White Castle]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/white_castle">@White_Castle</a> wrote:</p>
          <blockquote>
              <p>This is how they import the data files, but we don’t even know the properties of the models, object files ect. yet, so that would be kind of pointless.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/info-on-npcs-being-imported/2831/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/info-on-npcs-being-imported/2831/2</link>
        <pubDate>Sun, 14 May 2006 15:49:42 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-2831-2</guid>
        <source url="https://forum.moparisthebest.com/t/info-on-npcs-being-imported/2831.rss">Info on npcs being imported</source>
      </item>
      <item>
        <title>Info on npcs being imported</title>
        <dc:creator><![CDATA[@xerozcheez xerozcheez]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/xerozcheez">@xerozcheez</a> wrote:</p>
          <blockquote>
              <p>Well in class5 of deob 317 I found this (class5 is the npc class):</p>
<pre><code class="lang-auto">
    public static final void method162(Class44 class44)
    {
        aClass30_Sub2_Sub2_60 = new Class30_Sub2_Sub2(class44.method571("npc.dat", null), 891);
        Class30_Sub2_Sub2 class30_sub2_sub2 = new Class30_Sub2_Sub2(class44.method571("npc.idx", null), 891);
        anInt62 = class30_sub2_sub2.method410();
        anIntArray72 = new int[anInt62];
        int i = 2;
        for(int j = 0; j &lt; anInt62; j++)
        {
            anIntArray72[j] = i;
            i += class30_sub2_sub2.method410();
        }

        aClass5Array80 = new Class5[20];
        for(int k = 0; k &lt; 20; k++)
            aClass5Array80[k] = new Class5();

    }
</code></pre>
<p>Now the method410 striked my attention as with servers those methods read what the servers call them, for example outStream.writeWord(int); would be method 410, so in this case we did outStream.writeWord(10); the combat level of the npc would be 10, because anInt61 is the npcs combat level <img src="https://forum.moparisthebest.com/images/emoji/twitter/wink.png?v=9" title=":wink:" class="emoji" alt=":wink:"></p>
<p>I’ll also find out what that anIntArray72 thing is, as j loops through every number from 0 to the npcs combat level into the array  :eek: then adds that interge i lol? =S</p>
<p>Also I found this which loads the npc list:</p>
<pre><code class="lang-auto">    private final void method31(Class30_Sub2_Sub2 class30_sub2_sub2, int i, int j)
    {
        anInt839 = 0;
        anInt893 = 0;
        if(j &lt;= 0)
            anInt877 = aClass17_1000.method246();
        method139(class30_sub2_sub2, -45, i);
        method46(i, class30_sub2_sub2, (byte)2);
        method86(i, class30_sub2_sub2, true);
        for(int k = 0; k &lt; anInt839; k++)
        {
            int l = anIntArray840[k];
            if(((Class30_Sub2_Sub4_Sub1) (aClass30_Sub2_Sub4_Sub1_Sub1Array835[l])).anInt1537 != anInt1161)
            {
                aClass30_Sub2_Sub4_Sub1_Sub1Array835[l].aClass5_1696 = null;
                aClass30_Sub2_Sub4_Sub1_Sub1Array835[l] = null;
            }
        }

        if(class30_sub2_sub2.anInt1406 != i)
        {
            signlink.reporterror(aString1173 + " size mismatch in getnpcpos - pos:" + class30_sub2_sub2.anInt1406 + " psize:" + i);
            throw new RuntimeException("eek");
        }
        for(int i1 = 0; i1 &lt; anInt836; i1++)
            if(aClass30_Sub2_Sub4_Sub1_Sub1Array835[anIntArray837[i1]] == null)
            {
                signlink.reporterror(aString1173 + " null entry in npc list - pos:" + i1 + " size:" + anInt836);
                throw new RuntimeException("eek");
            }

    }</code></pre>
<p>I found it while looking for creates a new class5() , through method46, that’s the only place where it was called <img src="https://forum.moparisthebest.com/images/emoji/twitter/wink.png?v=9" title=":wink:" class="emoji" alt=":wink:"><br>
What caught my attention was the anInt1161, which I’ve seen before and I’m guessing it’s the loop-cycle (not a clue what that is but it is), by looking at this:</p>
<pre><code class="lang-auto">    public void method72(byte byte0)
    {
        System.out.println("============");
        System.out.println("flame-cycle:" + anInt1208);
        if(aClass42_Sub1_1068 != null)
            System.out.println("Od-cycle:" + aClass42_Sub1_1068.anInt1341);
        System.out.println("loop-cycle:" + anInt1161);
        System.out.println("draw-cycle:" + anInt1061);
        System.out.println("ptype:" + anInt1008);
        if(byte0 == 1)
            byte0 = 0;
        else
            anInt961 = 281;
        System.out.println("psize:" + anInt1007);
        if(aClass24_1168 != null)
            aClass24_1168.method272((byte)1);
        super.aBoolean9 = true;
    }</code></pre>
<p>Also notice anInt1008, that’s used when using outStream.createFrame(int) on servers <img src="https://forum.moparisthebest.com/images/emoji/twitter/wink.png?v=9" title=":wink:" class="emoji" alt=":wink:"> so yeah  :o</p>
<p>However this stuff is loaded before the client connects to the server, so I’m not sure. Post any ideas/comments on this or anything else to do with intercepting npc data being imported so maybe one day we can figure out how to import our own models etc. properly <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=9" title=":smiley:" class="emoji" alt=":smiley:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/info-on-npcs-being-imported/2831/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/info-on-npcs-being-imported/2831/1</link>
        <pubDate>Sun, 14 May 2006 14:43:20 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-2831-1</guid>
        <source url="https://forum.moparisthebest.com/t/info-on-npcs-being-imported/2831.rss">Info on npcs being imported</source>
      </item>
  </channel>
</rss>
