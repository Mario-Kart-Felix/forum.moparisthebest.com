<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/java-casting-to-primitives/428206 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Aug 2019 08:07:30 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>[Java]Casting to primitives - General Programming - moparisthebest.com</title>
    <meta name="description" content="Is casting to primitives expensive in Java? 

I&amp;#39;m writing a utitlity class for ByteBuffer and I got some methods which puts unsigned datatypes to the buffer.  So I could rather do this and call it with a cast to short in&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="428206.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;[Java]Casting to primitives&#39;" href="428206.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/java-casting-to-primitives/428206" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/java-casting-to-primitives/428206" />
<meta property="og:title" content="[Java]Casting to primitives" />
<meta name="twitter:title" content="[Java]Casting to primitives" />
<meta property="og:description" content="Is casting to primitives expensive in Java?  I’m writing a utitlity class for ByteBuffer and I got some methods which puts unsigned datatypes to the buffer.  So I could rather do this and call it with a cast to short in it’s arguments.  public ByteBuffer putUnsignedByte(short s) {                 if(s &gt; 255 || s &lt; 0) 			throw new IllegalArgumentException(); 		return buffer.put((byte) (s &amp; 0xff)); }   or I could do this, with an integer as argument and call it without a cast.   public ByteBuffer ..." />
<meta name="twitter:description" content="Is casting to primitives expensive in Java?  I’m writing a utitlity class for ByteBuffer and I got some methods which puts unsigned datatypes to the buffer.  So I could rather do this and call it with a cast to short in it’s arguments.  public ByteBuffer putUnsignedByte(short s) {                 if(s &gt; 255 || s &lt; 0) 			throw new IllegalArgumentException(); 		return buffer.put((byte) (s &amp; 0xff)); }   or I could do this, with an integer as argument and call it without a cast.   public ByteBuffer ..." />
<meta property="article:published_time" content="2012-01-05T17:33:19+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="428206.html">[Java]Casting to primitives</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/general-programming.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>General Programming</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Native1.html'><span itemprop='name'>Native1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-01-05T17:33:19Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:05:15Z' class='post-time'>
              August 2, 2016,  3:05pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Is casting to primitives expensive in Java?</p>
<p>I’m writing a utitlity class for ByteBuffer and I got some methods which puts unsigned datatypes to the buffer.<br>
So I could rather do this and call it with a cast to short in it’s arguments.</p>
<p><code>public ByteBuffer putUnsignedByte(short s) {
                if(s &gt; 255 || s &lt; 0)
			throw new IllegalArgumentException();
		return buffer.put((byte) (s &amp; 0xff));
}
</code><br>
or I could do this, with an integer as argument and call it without a cast.</p>
<p><code>
public ByteBuffer putUnsignedByte(int s) {
		if(s &gt; 255 || s &lt; 0)
			throw new IllegalArgumentException();
		return buffer.put((byte) (s &amp; 0xff));
	}
}</code></p>
<p>Thanks.</p>
      </div>

      <meta itemprop='headline' content='[Java]Casting to primitives'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/T41.html'><span itemprop='name'>T41</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-01-05T17:41:30Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:05:16Z' class='post-time'>
              August 2, 2016,  3:05pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>dynamic casts are expensive, all casts in java are dynamic casts. using a matrix to represent class relationships takes up a lot of memory; instead, a map will is used to walk the inheritance hierarchy, which is slow. this is talking about objects - as far as primitives i am not sure. since most (if not all) primitives are numbers, it’s probably a matter of just copying the bits.</p>
      </div>

      <meta itemprop='headline' content='[Java]Casting to primitives'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Native1.html'><span itemprop='name'>Native1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-01-05T18:32:22Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:05:20Z' class='post-time'>
              August 2, 2016,  3:05pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote quote-modified" data-post="2" data-topic="428206">
<div class="title">
<div class="quote-controls"></div>
 t4:</div>
<blockquote>
<p>dynamic casts are expensive, all casts in java are dynamic casts. using a matrix to represent class relationships takes up a lot of memory; instead, a map will is used to walk the inheritance hierarchy, which is slow. this is talking about objects - as far as primitives i am not sure. since most (if not all) primitives are numbers, it’s probably a matter of just copying the bits.</p>
</blockquote>
</aside>
<p>Hmm, thanks. :). So it doesn’t really matter. Okay, but what do you think about this piece of code for putting a little-endian short to the buffer.<br>
Or this</p>
<p><code>
public ByteBuffer putLEShort(int s) {
		if (s &gt; Short.MAX_VALUE || s &lt; Short.MIN_VALUE)
			throw new IllegalArgumentException("Invalid argument.");
		return buffer.put((byte) (s &amp; 0xff)).put((byte) ((s &gt;&gt; 8) &amp; 0xff));
	}</code><br>
or this.</p>
<pre><code class="lang-auto">public ByteBuffer putLEShort(short s) {
		return buffer.put((byte) (s &amp; 0xff)).put((byte) ((s &gt;&gt; 8) &amp; 0xff));
	}</code></pre>
<p>The one with the short as argument right? Because in that case there isn’t an if clause. And I think a cast is less expensive than an if clause.</p>
      </div>

      <meta itemprop='headline' content='[Java]Casting to primitives'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/T41.html'><span itemprop='name'>T41</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-01-05T19:03:09Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:05:24Z' class='post-time'>
              August 2, 2016,  3:05pm
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>why not have both?</p>
      </div>

      <meta itemprop='headline' content='[Java]Casting to primitives'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Native1.html'><span itemprop='name'>Native1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-01-05T19:14:52Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:05:25Z' class='post-time'>
              August 2, 2016,  3:05pm
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="4" data-topic="428206">
<div class="title">
<div class="quote-controls"></div>
 t4:</div>
<blockquote>
<p>why not have both?</p>
</blockquote>
</aside>
<p>Why would I. I will only use one of them.</p>
<p>Edit: ah whatever, I’m just going to use the one with the short.</p>
      </div>

      <meta itemprop='headline' content='[Java]Casting to primitives'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/T41.html'><span itemprop='name'>T41</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-01-05T22:46:26Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:06:03Z' class='post-time'>
              August 2, 2016,  3:06pm
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Native^, post:5, topic:428206”][quote author=t4 link=topic=530898.msg3877667#msg3877667 date=1325790189]<br>
why not have both?<br>
[/quote]<br>
Why would I. I will only use one of them.</p>
<p>Edit: ah whatever, I’m just going to use the one with the short.[/quote]<br>
well they both take different arguments and you could benchmark them.</p>
      </div>

      <meta itemprop='headline' content='[Java]Casting to primitives'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Metho_D.html'><span itemprop='name'>Metho_D</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-01-06T16:06:49Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:06:57Z' class='post-time'>
              August 2, 2016,  3:06pm
            </time>
        <span itemprop='position'>#7</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Storing a signed or unsigned data type in a buffer is the same operation. Determining whether or not the data is signed or unsigned is left to the person reading the data. You don’t need separate methods for writing signed and unsigned data, then, since they’re doing the same thing.</p>
<p>You also don’t need to extract the low-order bits using the bitwise AND operator. Simply casting the value to a byte will do that for you. The last example in your latest post becomes:</p>
<p><code>public ByteBuffer putLEShort(short s) {
    return buffer.put((byte) s).put((byte) (s &gt;&gt; 8));
}</code></p>
      </div>

      <meta itemprop='headline' content='[Java]Casting to primitives'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/java-casting-to-primitives/428206 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Aug 2019 08:07:32 GMT -->
</html>
