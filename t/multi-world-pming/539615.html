<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/multi-world-pming/539615 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Aug 2019 06:45:21 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Multi-world pming - Runescape - moparisthebest.com</title>
    <meta name="description" content="Having a bit of trouble making my pm system multi-world. I&amp;#39;ve got both worlds running, and I can see what players are on both worlds, so the multi-world is working but I am coming into trouble applying this to pming. 

I&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="539615.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Multi-world pming&#39;" href="539615.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/multi-world-pming/539615" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/multi-world-pming/539615" />
<meta property="og:title" content="Multi-world pming" />
<meta name="twitter:title" content="Multi-world pming" />
<meta property="og:description" content="Having a bit of trouble making my pm system multi-world. I’ve got both worlds running, and I can see what players are on both worlds, so the multi-world is working but I am coming into trouble applying this to pming.  I thought now that I have a global list of players, I can apply this to the pm system, instead of using it for one server.  	public void setupPrivateMessaging() { 	setPrivateMessaging(2);  	boolean loaded = false; 	long playerName = Text.nameToLong(c.username); 	for (int i = 0; i &lt; ..." />
<meta name="twitter:description" content="Having a bit of trouble making my pm system multi-world. I’ve got both worlds running, and I can see what players are on both worlds, so the multi-world is working but I am coming into trouble applying this to pming.  I thought now that I have a global list of players, I can apply this to the pm system, instead of using it for one server.  	public void setupPrivateMessaging() { 	setPrivateMessaging(2);  	boolean loaded = false; 	long playerName = Text.nameToLong(c.username); 	for (int i = 0; i &lt; ..." />
<meta property="article:published_time" content="2014-02-03T14:15:24+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="539615.html">Multi-world pming</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/ohokay.html'><span itemprop='name'>ohokay</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-02-03T14:15:24Z'>
            <time itemprop='dateModified' datetime='2016-08-04T11:39:15Z' class='post-time'>
              August 4, 2016, 11:39am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Having a bit of trouble making my pm system multi-world. I’ve got both worlds running, and I can see what players are on both worlds, so the multi-world is working but I am coming into trouble applying this to pming.</p>
<p>I thought now that I have a global list of players, I can apply this to the pm system, instead of using it for one server.</p>
<pre><code class="lang-auto">	public void setupPrivateMessaging() {
	setPrivateMessaging(2);

	boolean loaded = false;
	long playerName = Text.nameToLong(c.username);
	for (int i = 0; i &lt; c.friends.length; i++) {
		if (c.friends[i] == 0) {
			continue;
		}
		loaded = false;
		for (OnlinePlayer op : ServerStatus.getServerStatus().getOnlinePlayers()) { //loops the global server list
			Client p = (Client) op.getPlayer(); //gets the player object from the online player
			if (p == null || Text.nameToLong(p.username) != c.friends[i]) {
				continue;
			}
			if (p.privateChatMode == 0 || (p.privateChatMode == 1 &amp;&amp; p.getPA().playerIsFriend(playerName))) {
				sendFriend(c.friends[i], op.getWorld().getAbbreviation().equals("W1") ? 1 : 2); //world 1 or world 2
				loaded = true;
				break;
			}
		}

		if (!loaded) {
			sendFriend(c.friends[i], 0); //offline
		}
	}

	sendIgnores();

	for (OnlinePlayer op2 : ServerStatus.getServerStatus().getOnlinePlayers()) {
		Client p = (Client) op2.getPlayer();
		if (p != null &amp;&amp; p.getPA().playerIsFriend(Text.nameToLong(c.username))) {
			p.getPA().updatePM(c.playerId);
		}
	}
}</code></pre>
<pre><code class="lang-auto">	public void updatePM(int playerId) {
		System.out.println(ServerStatus.getServerStatus().getOnlinePlayers().size());
		for (OnlinePlayer op : ServerStatus.getServerStatus().getOnlinePlayers()) {
			long name = Text.nameToLong(op.getUsername());
			Client p = (Client)op.getPlayer();
			
			/**
			 * continue if not on fl
			 */
			for (int i = 0; i &lt; c.friends.length; i++) {
				if (c.friends[i] != name) {
					continue;
				}
			}	
			if (p.privateChatMode == 0) {
				for (int i = 0; i &lt; c.friends.length; i++) {
						if (name != c.friends[i]) continue;
							sendFriend(name, op.getWorld().getAbbreviation().equals("W1") ? 1 : 2);
					}
			} else if (p.privateChatMode == 1) {
				for (int i = 0; i &lt; c.friends.length; i++) {
					if (c.friends[i] != 0) {
						if (name == c.friends[i]) {
							if (p.getPA().playerIsFriend(Text.nameToLong(c.username))) {
								sendFriend(name, op.getWorld().getAbbreviation().equals("W1") ? 1 : 2);
								return;
							} else {
								sendFriend(name, 2);
								return;
							}
						}
					}
				}
			} else if (p.privateChatMode == 2) {
				for (int i = 0; i &lt; c.friends.length; i++) {
					if (c.friends[i] != 0) {
						if (name == c.friends[i]) {
							sendFriend(name, 0);
							return;
						}
					}
				}
			}
		}
	}</code></pre>
<pre><code class="lang-auto">[03/02/2014 02:05 PM]: java.lang.NullPointerException
[03/02/2014 02:05 PM]: 	at server.model.players.PlayerAssistant.updatePM(PlayerAssistant.java:2351)
[03/02/2014 02:05 PM]: 	at server.model.players.PlayerAssistant.setupPrivateMessaging(PlayerAssistant.java:2250)
[03/02/2014 02:05 PM]: 	at server.model.players.Client.initialize(Client.java:422)
[03/02/2014 02:05 PM]: 	at server.model.players.PlayerHandler.process(PlayerHandler.java:133)</code></pre>
<pre><code class="lang-auto">2351 = if (p.privateChatMode == 0) {
2250 = p.getPA().updatePM(c.playerId);
422 = getPA().setupPrivateMessaging();</code></pre>
<p>When my second char logs into the the second world, there is a null pointer thrown and I’m pretty sure it’s the player object. Maybe the logic here is totally wrong so if someone could guide me in the right direction it would be appreciated.</p>
<p>The player object is given a value when the player logs in:</p>
<pre><code class="lang-auto">OnlinePlayer op = new OnlinePlayer((Player)this, Server.getWorld());</code></pre>
      </div>

      <meta itemprop='headline' content='Multi-world pming'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/xx_matty_xx.html'><span itemprop='name'>xx_matty_xx</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-02-03T14:52:26Z'>
            <time itemprop='dateModified' datetime='2016-08-04T11:39:15Z' class='post-time'>
              August 4, 2016, 11:39am
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <pre><code class="lang-auto">Client p = (Client)op.getPlayer();</code></pre>
<p>The getPlayer method called inside updatePM must be returning null. Does that shed any light? If not, post the OnlinePlayer.getPlayer() method.</p>
      </div>

      <meta itemprop='headline' content='Multi-world pming'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/ohokay.html'><span itemprop='name'>ohokay</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-02-03T15:40:08Z'>
            <time itemprop='dateModified' datetime='2016-08-04T11:39:16Z' class='post-time'>
              August 4, 2016, 11:39am
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“xx matty xx, post:2, topic:539615”]<code>
Client p = (Client)op.getPlayer();
</code></p>
<p>The getPlayer method called inside updatePM must be returning null. Does that shed any light? If not, post the OnlinePlayer.getPlayer() method.[/quote]</p>
<p>Yeah that’s what I was thinking but not sure why.</p>
<pre><code class="lang-auto">	public Player getPlayer() {
		return p;
	}</code></pre>
<p>It just returns the player object, and it’s set when a player logs in</p>
<pre><code class="lang-auto">OnlinePlayer op = new OnlinePlayer( (Player)this, Server.getWorld() );</code></pre>
<pre><code class="lang-auto">	public OnlinePlayer(Player p, World world) {
		this.world = world;
		this.p = p;
	}</code></pre>
      </div>

      <meta itemprop='headline' content='Multi-world pming'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/xx_matty_xx.html'><span itemprop='name'>xx_matty_xx</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-02-03T16:35:48Z'>
            <time itemprop='dateModified' datetime='2016-08-04T11:39:16Z' class='post-time'>
              August 4, 2016, 11:39am
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>This hierarchy doesn’t make sense to me… so you have an instance of OnlinePlayer, and you call getPlayer() on it to get an instance of Player. Then you cast Player to Client?! None of these names make any sense!</p>
      </div>

      <meta itemprop='headline' content='Multi-world pming'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/ExtremeX-Scape.html'><span itemprop='name'>ExtremeX-Scape</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-02-03T16:39:55Z'>
            <time itemprop='dateModified' datetime='2016-08-04T11:39:16Z' class='post-time'>
              August 4, 2016, 11:39am
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“ohokay, post:3, topic:539615”][quote author=xx matty xx link=topic=658456.msg4404315#msg4404315 date=1391439146]</p>
<pre><code class="lang-auto">Client p = (Client)op.getPlayer();</code></pre>
<p>The getPlayer method called inside updatePM must be returning null. Does that shed any light? If not, post the OnlinePlayer.getPlayer() method.<br>
[/quote]</p>
<p>Yeah that’s what I was thinking but not sure why.</p>
<pre><code class="lang-auto">	public Player getPlayer() {
		return p;
	}</code></pre>
<p>It just returns the player object, and it’s set when a player logs in</p>
<pre><code class="lang-auto">OnlinePlayer op = new OnlinePlayer( (Player)this, Server.getWorld() );</code></pre>
<p><code>
	public OnlinePlayer(Player p, World world) {
		this.world = world;
		this.p = p;
	}
</code>[/quote]</p>
<p>change the player object to a client object</p>
      </div>

      <meta itemprop='headline' content='Multi-world pming'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="2" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Ashi.html'><span itemprop='name'>Ashi</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-02-03T17:47:19Z'>
            <time itemprop='dateModified' datetime='2016-08-04T11:39:16Z' class='post-time'>
              August 4, 2016, 11:39am
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Make sure you’re actually initializing the messaging system like you did with Player</p>
      </div>

      <meta itemprop='headline' content='Multi-world pming'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/xx_matty_xx.html'><span itemprop='name'>xx_matty_xx</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-02-03T20:01:32Z'>
            <time itemprop='dateModified' datetime='2016-08-04T11:39:18Z' class='post-time'>
              August 4, 2016, 11:39am
            </time>
        <span itemprop='position'>#7</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Looking at this again I’m now absolutely certain op.getPlayer() is returning null. Make sure that really is the only place OnlinePlayer is getting instantiated and make sure there’s no way it can be passed null. Also make sure Player isn’t getting instantiated through the constructor of another inheriting class… It has to be returning null somehow!!</p>
<p>[quote=“AtomicInt_, post:5, topic:539615”][quote author=ohokay link=topic=658456.msg4404318#msg4404318 date=1391442008]</p>
<aside class="quote">
<blockquote>
<pre><code class="lang-auto">Client p = (Client)op.getPlayer();</code></pre>
<p>The getPlayer method called inside updatePM must be returning null. Does that shed any light? If not, post the OnlinePlayer.getPlayer() method.</p>
</blockquote>
</aside>
<p>Yeah that’s what I was thinking but not sure why.</p>
<pre><code class="lang-auto">	public Player getPlayer() {
		return p;
	}</code></pre>
<p>It just returns the player object, and it’s set when a player logs in</p>
<pre><code class="lang-auto">OnlinePlayer op = new OnlinePlayer( (Player)this, Server.getWorld() );</code></pre>
<pre><code class="lang-auto">	public OnlinePlayer(Player p, World world) {
		this.world = world;
		this.p = p;
	}</code></pre>
<p>[/quote]</p>
<p>change the player object to a client object[/quote]<br>
This isn’t really very clear. Are you telling him to rename the class? Change the cast? Change the constructor parameters/fields?</p>
      </div>

      <meta itemprop='headline' content='Multi-world pming'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/ExtremeX-Scape.html'><span itemprop='name'>ExtremeX-Scape</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-02-03T20:32:51Z'>
            <time itemprop='dateModified' datetime='2016-08-04T11:39:19Z' class='post-time'>
              August 4, 2016, 11:39am
            </time>
        <span itemprop='position'>#8</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“xx matty xx, post:7, topic:539615”]Looking at this again I’m now absolutely certain op.getPlayer() is returning null. Make sure that really is the only place OnlinePlayer is getting instantiated and make sure there’s no way it can be passed null. Also make sure Player isn’t getting instantiated through the constructor of another inheriting class… It has to be returning null somehow!!</p>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<pre><code class="lang-auto">Client p = (Client)op.getPlayer();</code></pre>
<p>The getPlayer method called inside updatePM must be returning null. Does that shed any light? If not, post the OnlinePlayer.getPlayer() method.</p>
</blockquote>
</aside>
<p>Yeah that’s what I was thinking but not sure why.</p>
<pre><code class="lang-auto">	public Player getPlayer() {
		return p;
	}</code></pre>
<p>It just returns the player object, and it’s set when a player logs in</p>
<pre><code class="lang-auto">OnlinePlayer op = new OnlinePlayer( (Player)this, Server.getWorld() );</code></pre>
<pre><code class="lang-auto">	public OnlinePlayer(Player p, World world) {
		this.world = world;
		this.p = p;
	}</code></pre>
</blockquote>
</aside>
<p>change the player object to a client object</p>
</blockquote>
</aside>
<p>This isn’t really very clear. Are you telling him to rename the class? Change the cast? <span class="bbcode-b">Change the constructor parameters/fields?</span>[/quote]</p>
      </div>

      <meta itemprop='headline' content='Multi-world pming'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/xx_matty_xx.html'><span itemprop='name'>xx_matty_xx</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-02-03T20:44:46Z'>
            <time itemprop='dateModified' datetime='2016-08-04T11:39:19Z' class='post-time'>
              August 4, 2016, 11:39am
            </time>
        <span itemprop='position'>#9</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>If the class was wrong he’d get a class cast exception. The instance wouldn’t just turn into null.</p>
      </div>

      <meta itemprop='headline' content='Multi-world pming'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/ohokay.html'><span itemprop='name'>ohokay</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-02-03T22:09:33Z'>
            <time itemprop='dateModified' datetime='2016-08-04T11:39:21Z' class='post-time'>
              August 4, 2016, 11:39am
            </time>
        <span itemprop='position'>#10</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I’ve figured out the problem<br>
<img src="https://dl.dropbox.com/s/83d4bnlo4yuq5lx/Screenshot 2014-02-03 22.02.42.png" alt width="" height=""></p>
<p>I think it’s searching the one world, for the player on the second world. This is where the nullpointer is coming in. Would I have to modify how it searches for the players? I’m not sure about how to go on this.</p>
<p>This is when both players are on the same world:<br>
<img src="https://dl.dropbox.com/s/635s6bq7574kbcx/Screenshot 2014-02-03 22.04.50.png" alt width="" height=""></p>
<p>The OnlinePlayer objects are being created correctly, with their player objects, but I’m not able to get them if they’re on separate worlds.</p>
<p>I don’t see why it’s returning null, as a new OnlinePlayer object is created each time a player logs in, and it passes their player object.</p>
<p>Thanks for all the feedback so far.</p>
<p>[quote=“AtomicInt_, post:5, topic:539615”][quote author=ohokay link=topic=658456.msg4404318#msg4404318 date=1391442008]</p>
<aside class="quote">
<blockquote>
<pre><code class="lang-auto">Client p = (Client)op.getPlayer();</code></pre>
<p>The getPlayer method called inside updatePM must be returning null. Does that shed any light? If not, post the OnlinePlayer.getPlayer() method.</p>
</blockquote>
</aside>
<p>Yeah that’s what I was thinking but not sure why.</p>
<pre><code class="lang-auto">	public Player getPlayer() {
		return p;
	}</code></pre>
<p>It just returns the player object, and it’s set when a player logs in</p>
<pre><code class="lang-auto">OnlinePlayer op = new OnlinePlayer( (Player)this, Server.getWorld() );</code></pre>
<pre><code class="lang-auto">	public OnlinePlayer(Player p, World world) {
		this.world = world;
		this.p = p;
	}</code></pre>
<p>[/quote]</p>
<p>change the player object to a client object[/quote]</p>
<p>I did now thanks. But I think the main problem is because of the above ^</p>
      </div>

      <meta itemprop='headline' content='Multi-world pming'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/ExtremeX-Scape.html'><span itemprop='name'>ExtremeX-Scape</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-02-03T22:40:55Z'>
            <time itemprop='dateModified' datetime='2016-08-04T11:39:21Z' class='post-time'>
              August 4, 2016, 11:39am
            </time>
        <span itemprop='position'>#11</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="9" data-topic="539615">
<div class="title">
<div class="quote-controls"></div>
 xx matty xx:</div>
<blockquote>
<p>If the class was wrong he’d get a class cast exception. The instance wouldn’t just turn into null.</p>
</blockquote>
</aside>
<p>that’s not what I’m trying to say</p>
      </div>

      <meta itemprop='headline' content='Multi-world pming'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/xx_matty_xx.html'><span itemprop='name'>xx_matty_xx</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-02-04T09:09:51Z'>
            <time itemprop='dateModified' datetime='2016-08-04T11:39:40Z' class='post-time'>
              August 4, 2016, 11:39am
            </time>
        <span itemprop='position'>#12</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>yeah you should really explain your suggestions then. or are you avoiding that so that people never know when your advice is wrong?</p>
      </div>

      <meta itemprop='headline' content='Multi-world pming'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/pure2ownage.html'><span itemprop='name'>pure2ownage</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-02-04T12:47:31Z'>
            <time itemprop='dateModified' datetime='2016-08-04T11:39:55Z' class='post-time'>
              August 4, 2016, 11:39am
            </time>
        <span itemprop='position'>#13</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Create a separate server to handle server-wide interactions, ie GE, PMing etc. It should be easier to synchronise these events and thus avoid any nullpointers etc, update the player list each time somebody logs in or out.</p>
      </div>

      <meta itemprop='headline' content='Multi-world pming'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/ohokay.html'><span itemprop='name'>ohokay</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-02-04T16:14:48Z'>
            <time itemprop='dateModified' datetime='2016-08-04T11:40:04Z' class='post-time'>
              August 4, 2016, 11:40am
            </time>
        <span itemprop='position'>#14</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="13" data-topic="539615">
<div class="title">
<div class="quote-controls"></div>
 Pure_:</div>
<blockquote>
<p>Create a separate server to handle server-wide interactions, ie GE, PMing etc. It should be easier to synchronise these events and thus avoid any nullpointers etc, update the player list each time somebody logs in or out.</p>
</blockquote>
</aside>
<p>I already have one but wouldn’t it still causes errors because I still need to pass the player object. I’m not able to get them if the players are on separate worlds</p>
      </div>

      <meta itemprop='headline' content='Multi-world pming'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/pure2ownage.html'><span itemprop='name'>pure2ownage</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-02-04T16:24:14Z'>
            <time itemprop='dateModified' datetime='2016-08-04T11:40:05Z' class='post-time'>
              August 4, 2016, 11:40am
            </time>
        <span itemprop='position'>#15</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“ohokay, post:14, topic:539615”][quote author=Pure_ link=topic=658456.msg4404576#msg4404576 date=1391518051]<br>
Create a separate server to handle server-wide interactions, ie GE, PMing etc. It should be easier to synchronise these events and thus avoid any nullpointers etc, update the player list each time somebody logs in or out.<br>
[/quote]</p>
<p>I already have one but wouldn’t it still causes errors because I still need to pass the player object. I’m not able to get them if the players are on separate worlds[/quote]When connecting and sending a message to the server, you will send a packet, ie packet 01 for logged in: 01, PLAYER_NAME. This will be handled in the player’s login method so it should not throw a null pointer exception. Same concept for logging out, ie packet 02: 02, PLAYER_NAME. Have the server register these player names in perhaps a list of sorts? You can even store their privacy settings in there and their world.</p>
<p>Then when a message is sent you send the player’s name as long (afaik that’s all you need to send private message packet, minus some other stuff of course) and their message. ie, packet 03: 03, PLAYER_NAME_LONG, MSG. There are no player objects on the server so again that cannot throw a null pointer exception.</p>
<p>With this in place I think you can just get rid of your online player object.</p>
      </div>

      <meta itemprop='headline' content='Multi-world pming'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/multi-world-pming/539615 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Aug 2019 06:45:22 GMT -->
</html>
