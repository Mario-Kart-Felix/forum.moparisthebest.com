<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Update whole GUI</title>
    <link>https://forum.moparisthebest.com/t/update-whole-gui/6312</link>
    <description>I&#39;m really sorry for not using proper terms or whatever when I say this but oh well...

Ok, when I use GUI&#39;s and I press a button, therefore causing an event (like pressing a button or whatever...) it seems to take ages to update the gui and it will only update when the whole event has finnished... 

Anyway, I have been trying to get the runescape jar to be downloaded and I was trying to get a posh gui for  it (although technically is it crappy really...). I have a JProgressBar to show the progress of the download and I think it is all setup although the whole GUI itself wont update until the whole of the download is complete. Anyway, here it is:

[code]import java.awt.BorderLayout;
import java.awt.Cursor;
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.DataInputStream;
import java.io.File;
import java.io.IOException;
import java.io.PrintStream;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLConnection;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JProgressBar;

public class Updater implements ActionListener 
{
	public JFrame updateFrame;
	public JPanel updatePanel;
	public JButton updateButton;
	public JProgressBar updateProgress;
	
	public Updater()
	{
		updateFrame = new JFrame(&quot;Updater&quot;);
		updatePanel = new JPanel(new BorderLayout());
		
		updateButton = new JButton(&quot;Update&quot;);
		updateButton.setActionCommand(&quot;Update&quot;);
		updateButton.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));
		updateButton.addActionListener(this);
		updateButton.setPreferredSize(new Dimension(150, 50));
		
		updateProgress = new JProgressBar();
		updateProgress.setStringPainted(true);
		updateProgress.setString(&quot;Click update to update&quot;);
		updateProgress.setPreferredSize(new Dimension(150, 50));
		updateProgress.setMaximum(100);
		updateProgress.setValue(0);
		
		updatePanel.add(updateButton, BorderLayout.CENTER);
		updatePanel.add(updateProgress, BorderLayout.SOUTH);
		
		updateFrame.add(updatePanel);
		updateFrame.pack();
		updateFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
		updateFrame.setVisible(true);
	}
	
	public static void main(String[] arg)
	{
		new Updater();
	}

	public void deleteFile(File aFile)
	{
		if(aFile.exists())
		{
			updateProgress.setString(&quot;Deleting jar&quot;);
			aFile.delete();
		}
	}
	
	public void actionPerformed(ActionEvent evt) 
	{
		String c = evt.getActionCommand();
		if(c.equals(&quot;Update&quot;))
		{
			File jar = new File(&quot;runescape.jar&quot;);
			deleteFile(jar);
			try 
			{
				updateProgress.setString(&quot;Connecting&quot;);
				URLConnection jarUC;
				jarUC = new URL(&quot;http://sl5.runescape.com/runescape.jar&quot;).openConnection();
				DataInputStream down = new DataInputStream(jarUC.getInputStream());
				updateProgress.setString(&quot;Creating data stream&quot;);
				PrintStream out = new PrintStream(jar);
				int length = jarUC.getContentLength();
				updateProgress.setString(&quot;Downloading jar&quot;);
				while(jar.length() &lt; length)
				{
					out.write(down.read());
					updateProgress.setValue((int)(jar.length()/length*100));
				}
				updateProgress.setString(&quot;Runescpe jar downloaded&quot;);
				updateButton.setEnabled(false);
			} 
			catch (MalformedURLException e) 
			{
				e.printStackTrace();
			} 
			catch (IOException e) 
			{
				e.printStackTrace();
			}
		}
	}
	
}
[/code]</description>
    
    <lastBuildDate>Wed, 26 Jul 2006 22:12:42 +0000</lastBuildDate>
    <category>General Programming</category>
    <atom:link href="https://forum.moparisthebest.com/t/update-whole-gui/6312.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Update whole GUI</title>
        <dc:creator><![CDATA[@imafatmess imafatmess]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/imafatmess">@imafatmess</a> wrote:</p>
          <blockquote>
              <p>KK, thanks. I thought it may be something like that but I hate threads so I decided to to try and do that. I’m surprised it is that easy!</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/update-whole-gui/6312/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/update-whole-gui/6312/3</link>
        <pubDate>Wed, 26 Jul 2006 22:12:42 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-6312-3</guid>
        <source url="https://forum.moparisthebest.com/t/update-whole-gui/6312.rss">Update whole GUI</source>
      </item>
      <item>
        <title>Update whole GUI</title>
        <dc:creator><![CDATA[@BobDole81 BobDole81]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/bobdole81">@BobDole81</a> wrote:</p>
          <blockquote>
              <p>Its because guis are event-driven on only one thread.  Therefore, when you generate a new event (click the button), the entire gui “freezes” until the specified action is performed…what you can do to fix this is start a new thread for the downloader.  I’ve added it here in your actionPerformed method:</p>
<pre><code class="lang-auto">    public void actionPerformed(ActionEvent evt) 
    {
        String c = evt.getActionCommand();
        if(c.equals("Update"))
        {
            new Thread(new Runnable() {
                public void run() {
                    File jar = new File("runescape.jar");
                    deleteFile(jar);
                    try 
                    {
                        updateProgress.setString("Connecting");
                        URLConnection jarUC;
                        jarUC = new URL("http://sl5.runescape.com/runescape.jar").openConnection();
                        DataInputStream down = new DataInputStream(jarUC.getInputStream());
                        updateProgress.setString("Creating data stream");
                        PrintStream out = new PrintStream(jar);
                        int length = jarUC.getContentLength();
                        updateProgress.setString("Downloading jar");
                        while(jar.length() &lt; length)
                        {
                            out.write(down.read());
                            updateProgress.setValue((int)((double)jar.length()/length*100));
                            System.out.println(jar.length() +"::"+ length);
                        }
                        updateProgress.setString("Runescpe jar downloaded");
                        updateButton.setEnabled(false);
                    } 
                    catch (MalformedURLException e) 
                    {
                        e.printStackTrace();
                    } 
                    catch (IOException e) 
                    {
                        e.printStackTrace();
                    }
                }
            }).start();
        }
    }</code></pre>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/update-whole-gui/6312/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/update-whole-gui/6312/2</link>
        <pubDate>Wed, 26 Jul 2006 21:57:47 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-6312-2</guid>
        <source url="https://forum.moparisthebest.com/t/update-whole-gui/6312.rss">Update whole GUI</source>
      </item>
      <item>
        <title>Update whole GUI</title>
        <dc:creator><![CDATA[@imafatmess imafatmess]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/imafatmess">@imafatmess</a> wrote:</p>
          <blockquote>
              <p>I’m really sorry for not using proper terms or whatever when I say this but oh well…</p>
<p>Ok, when I use GUI’s and I press a button, therefore causing an event (like pressing a button or whatever…) it seems to take ages to update the gui and it will only update when the whole event has finnished…</p>
<p>Anyway, I have been trying to get the runescape jar to be downloaded and I was trying to get a posh gui for  it (although technically is it crappy really…). I have a JProgressBar to show the progress of the download and I think it is all setup although the whole GUI itself wont update until the whole of the download is complete. Anyway, here it is:</p>
<p>[code]import java.awt.BorderLayout;<br>
import java.awt.Cursor;<br>
import java.awt.Dimension;<br>
import java.awt.event.ActionEvent;<br>
import java.awt.event.ActionListener;<br>
import java.io.DataInputStream;<br>
import java.io.File;<br>
import java.io.IOException;<br>
import java.io.PrintStream;<br>
import java.net.MalformedURLException;<br>
import java.net.URL;<br>
import java.net.URLConnection;</p>
<p>import javax.swing.JButton;<br>
import javax.swing.JFrame;<br>
import javax.swing.JPanel;<br>
import javax.swing.JProgressBar;</p>
<p>public class Updater implements ActionListener<br>
{<br>
public JFrame updateFrame;<br>
public JPanel updatePanel;<br>
public JButton updateButton;<br>
public JProgressBar updateProgress;</p>
<pre><code>public Updater()
{
	updateFrame = new JFrame("Updater");
	updatePanel = new JPanel(new BorderLayout());
	
	updateButton = new JButton("Update");
	updateButton.setActionCommand("Update");
	updateButton.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));
	updateButton.addActionListener(this);
	updateButton.setPreferredSize(new Dimension(150, 50));
	
	updateProgress = new JProgressBar();
	updateProgress.setStringPainted(true);
	updateProgress.setString("Click update to update");
	updateProgress.setPreferredSize(new Dimension(150, 50));
	updateProgress.setMaximum(100);
	updateProgress.setValue(0);
	
	updatePanel.add(updateButton, BorderLayout.CENTER);
	updatePanel.add(updateProgress, BorderLayout.SOUTH);
	
	updateFrame.add(updatePanel);
	updateFrame.pack();
	updateFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
	updateFrame.setVisible(true);
}

public static void main(String[] arg)
{
	new Updater();
}

public void deleteFile(File aFile)
{
	if(aFile.exists())
	{
		updateProgress.setString("Deleting jar");
		aFile.delete();
	}
}

public void actionPerformed(ActionEvent evt) 
{
	String c = evt.getActionCommand();
	if(c.equals("Update"))
	{
		File jar = new File("runescape.jar");
		deleteFile(jar);
		try 
		{
			updateProgress.setString("Connecting");
			URLConnection jarUC;
			jarUC = new URL("http://sl5.runescape.com/runescape.jar").openConnection();
			DataInputStream down = new DataInputStream(jarUC.getInputStream());
			updateProgress.setString("Creating data stream");
			PrintStream out = new PrintStream(jar);
			int length = jarUC.getContentLength();
			updateProgress.setString("Downloading jar");
			while(jar.length() &lt; length)
			{
				out.write(down.read());
				updateProgress.setValue((int)(jar.length()/length*100));
			}
			updateProgress.setString("Runescpe jar downloaded");
			updateButton.setEnabled(false);
		} 
		catch (MalformedURLException e) 
		{
			e.printStackTrace();
		} 
		catch (IOException e) 
		{
			e.printStackTrace();
		}
	}
}
</code></pre>
<p>}<br>
[/code]</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/update-whole-gui/6312/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/update-whole-gui/6312/1</link>
        <pubDate>Wed, 26 Jul 2006 21:15:49 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-6312-1</guid>
        <source url="https://forum.moparisthebest.com/t/update-whole-gui/6312.rss">Update whole GUI</source>
      </item>
  </channel>
</rss>
