<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Taking damage from a 0?</title>
    <link>https://forum.moparisthebest.com/t/taking-damage-from-a-0/554418</link>
    <description>I can&#39;t understand why i&#39;m taking damage when an npc hits a 0 on me even with prayer on.. i&#39;m pretty sure this coding is correct.
&quot;if npc is using melee, take damage 0 if melee prayer active still take 0 damage but if damage is over 0 take damage to hitpoints&quot;

[code]if (npcs[i].attackType == 0) {
					damage = Misc.random(npcs[i].maxHit);
					if (10 + Misc.random(c.getCombat().calculateMeleeDefence()) &gt; Misc
							.random(NPCHandler.npcs[i].attack)) {
						damage = 0;
					}
					if (c.prayerActive[18]) { // protect from melee
						damage = 0;
					}
					if (c.playerLevel[3] - damage &lt; 0) {
						damage = c.playerLevel[3];
					}
				}[/code]</description>
    
    <lastBuildDate>Sun, 17 Jan 2016 06:50:35 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/taking-damage-from-a-0/554418.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Taking damage from a 0?</title>
        <dc:creator><![CDATA[@matzie matzie]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/matzie">@matzie</a> wrote:</p>
          <blockquote>
              <p>The problem is the part handling prayer is called later in the sequence than the part that handles dealing damage. But the part that handles the packets is later, it relies on the value you sent.</p>
<p>so it goes:</p>
<p>hitPlayer();<br>
setDamageFromProtMelee();<br>
sendPlayerUpdateUsingTheDamageValue();</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/taking-damage-from-a-0/554418/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/taking-damage-from-a-0/554418/5</link>
        <pubDate>Sun, 17 Jan 2016 06:50:35 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-554418-5</guid>
        <source url="https://forum.moparisthebest.com/t/taking-damage-from-a-0/554418.rss">Taking damage from a 0?</source>
      </item>
      <item>
        <title>Taking damage from a 0?</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <p>Odd way of handing combat…</p>
<p>Arbe, your code is wrong.<br>
This is why:</p>
<p><code>
                                        if (c.prayerActive[18]) { // protect from melee
                                                damage = 0;// Lets set the value of damage to 0
                                        }
                                         damage = Misc.random(npcs[i].maxHit);// Oh now we're setting it to the max hit for the npc.. oops</code><br>
“Better” code:</p>
<p><code>if (npcs[i].attackType == 0) {
	damage = Misc.random(npcs[i].maxHit);
	if ((Misc.random(c.getCombat().calculateMeleeDefence()) + 10) &gt; Misc.random(NPCHandler.npcs[i].attack)
			|| c.prayerActive[18]) {
		damage = 0;
	}
	if (damage &gt; c.playerLevel[3]) {
		damage = c.playerLevel[3];
	}
}</code><br>
^Same logic.</p>
<p>If you want to figure out what’s causing the damage to hit… I suggest you actually print out the value of “damage” every time it’s modified or used. See where it gets set to the value that you get hit.</p>
<p>Ex:</p>
<p><code>if (npcs[i].attackType == 0) {
	damage = Misc.random(npcs[i].maxHit);
	System.out.println("Dmg1: " + damage);
	if ((Misc.random(c.getCombat().calculateMeleeDefence()) + 10) &gt; Misc.random(NPCHandler.npcs[i].attack)
			|| c.prayerActive[18]) {
		damage = 0;
	}
	System.out.println("Dmg2: " + damage);
	if (damage &gt; c.playerLevel[3]) {
		damage = c.playerLevel[3];
	}
	System.out.println("Dmg3: " + damage);
}</code><br>
Now if Dmg1 is set to 45, and then it’s still that at Dmg3, then the value never changed by any of the if statements. If it’s no longer 45, it was changed.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/taking-damage-from-a-0/554418/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/taking-damage-from-a-0/554418/4</link>
        <pubDate>Sat, 16 Jan 2016 09:34:49 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-554418-4</guid>
        <source url="https://forum.moparisthebest.com/t/taking-damage-from-a-0/554418.rss">Taking damage from a 0?</source>
      </item>
      <item>
        <title>Taking damage from a 0?</title>
        <dc:creator><![CDATA[@tank_nation tank nation]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/tank_nation">@tank_nation</a> wrote:</p>
          <blockquote>
              <p>[quote=“Arbe, post:2, topic:554418”]Check to see if the prayer is on first before dealing the damage. I can see in this code you’re not doing that.</p>
<pre><code class="lang-auto">if (c.prayerActive[18]) { // protect from melee
						damage = 0;
					}</code></pre>
<p>Put that under</p>
<pre><code class="lang-auto">if (npcs[i].attackType == 0) {</code></pre>
<p>So the full code should be;</p>
<pre><code class="lang-auto">if (npcs[i].attackType == 0) {
					if (c.prayerActive[18]) { // protect from melee
						damage = 0;
					}
                                         damage = Misc.random(npcs[i].maxHit);
					if (10 + Misc.random(c.getCombat().calculateMeleeDefence()) &gt; Misc
							.random(NPCHandler.npcs[i].attack)) {
						damage = 0;
					}
					if (c.playerLevel[3] - damage &lt; 0) {
						damage = c.playerLevel[3];
					}
				}</code></pre>
<p>I’m not sure if it will work, but it seems only logical.[/quote]</p>
<p>Still having same problem… This ain’t making any sense.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/taking-damage-from-a-0/554418/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/taking-damage-from-a-0/554418/3</link>
        <pubDate>Sat, 16 Jan 2016 08:07:46 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-554418-3</guid>
        <source url="https://forum.moparisthebest.com/t/taking-damage-from-a-0/554418.rss">Taking damage from a 0?</source>
      </item>
      <item>
        <title>Taking damage from a 0?</title>
        <dc:creator><![CDATA[@Skyro Arbe]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/skyro">@Skyro</a> wrote:</p>
          <blockquote>
              <p>Check to see if the prayer is on first before dealing the damage. I can see in this code you’re not doing that.</p>
<pre><code class="lang-auto">if (c.prayerActive[18]) { // protect from melee
						damage = 0;
					}</code></pre>
<p>Put that under</p>
<pre><code class="lang-auto">if (npcs[i].attackType == 0) {</code></pre>
<p>So the full code should be;</p>
<pre><code class="lang-auto">if (npcs[i].attackType == 0) {
					if (c.prayerActive[18]) { // protect from melee
						damage = 0;
					}
                                         damage = Misc.random(npcs[i].maxHit);
					if (10 + Misc.random(c.getCombat().calculateMeleeDefence()) &gt; Misc
							.random(NPCHandler.npcs[i].attack)) {
						damage = 0;
					}
					if (c.playerLevel[3] - damage &lt; 0) {
						damage = c.playerLevel[3];
					}
				}</code></pre>
<p>I’m not sure if it will work, but it seems only logical.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/taking-damage-from-a-0/554418/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/taking-damage-from-a-0/554418/2</link>
        <pubDate>Sat, 16 Jan 2016 06:34:54 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-554418-2</guid>
        <source url="https://forum.moparisthebest.com/t/taking-damage-from-a-0/554418.rss">Taking damage from a 0?</source>
      </item>
      <item>
        <title>Taking damage from a 0?</title>
        <dc:creator><![CDATA[@tank_nation tank nation]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/tank_nation">@tank_nation</a> wrote:</p>
          <blockquote>
              <p>I can’t understand why i’m taking damage when an npc hits a 0 on me even with prayer on… i’m pretty sure this coding is correct.<br>
“if npc is using melee, take damage 0 if melee prayer active still take 0 damage but if damage is over 0 take damage to hitpoints”</p>
<p><code>if (npcs[i].attackType == 0) {
					damage = Misc.random(npcs[i].maxHit);
					if (10 + Misc.random(c.getCombat().calculateMeleeDefence()) &gt; Misc
							.random(NPCHandler.npcs[i].attack)) {
						damage = 0;
					}
					if (c.prayerActive[18]) { // protect from melee
						damage = 0;
					}
					if (c.playerLevel[3] - damage &lt; 0) {
						damage = c.playerLevel[3];
					}
				}</code></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/taking-damage-from-a-0/554418/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/taking-damage-from-a-0/554418/1</link>
        <pubDate>Sat, 16 Jan 2016 04:59:39 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-554418-1</guid>
        <source url="https://forum.moparisthebest.com/t/taking-damage-from-a-0/554418.rss">Taking damage from a 0?</source>
      </item>
  </channel>
</rss>
