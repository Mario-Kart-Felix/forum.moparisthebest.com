<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/taking-damage-from-a-0/554418 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:05:51 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Taking damage from a 0? - Runescape - moparisthebest.com</title>
    <meta name="description" content="I can&amp;#39;t understand why i&amp;#39;m taking damage when an npc hits a 0 on me even with prayer on.. i&amp;#39;m pretty sure this coding is correct. &amp;quot;if npc is using melee, take damage 0 if melee prayer active still take 0 damage but if da&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="554418.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Taking damage from a 0?&#39;" href="554418.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/taking-damage-from-a-0/554418" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/taking-damage-from-a-0/554418" />
<meta property="og:title" content="Taking damage from a 0?" />
<meta name="twitter:title" content="Taking damage from a 0?" />
<meta property="og:description" content="I can’t understand why i’m taking damage when an npc hits a 0 on me even with prayer on… i’m pretty sure this coding is correct.  “if npc is using melee, take damage 0 if melee prayer active still take 0 damage but if damage is over 0 take damage to hitpoints”  if (npcs[i].attackType == 0) { 					damage = Misc.random(npcs[i].maxHit); 					if (10 + Misc.random(c.getCombat().calculateMeleeDefence()) &gt; Misc 							.random(NPCHandler.npcs[i].attack)) { 						damage = 0; 					} 					if (c.prayerActiv..." />
<meta name="twitter:description" content="I can’t understand why i’m taking damage when an npc hits a 0 on me even with prayer on… i’m pretty sure this coding is correct.  “if npc is using melee, take damage 0 if melee prayer active still take 0 damage but if damage is over 0 take damage to hitpoints”  if (npcs[i].attackType == 0) { 					damage = Misc.random(npcs[i].maxHit); 					if (10 + Misc.random(c.getCombat().calculateMeleeDefence()) &gt; Misc 							.random(NPCHandler.npcs[i].attack)) { 						damage = 0; 					} 					if (c.prayerActiv..." />
<meta property="article:published_time" content="2016-01-16T04:59:39+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="554418.html">Taking damage from a 0?</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/tank_nation.html'><span itemprop='name'>tank_nation</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2016-01-16T04:59:39Z'>
            <time itemprop='dateModified' datetime='2016-08-04T17:14:16Z' class='post-time'>
              August 4, 2016,  5:14pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I can’t understand why i’m taking damage when an npc hits a 0 on me even with prayer on… i’m pretty sure this coding is correct.<br>
“if npc is using melee, take damage 0 if melee prayer active still take 0 damage but if damage is over 0 take damage to hitpoints”</p>
<p><code>if (npcs[i].attackType == 0) {
					damage = Misc.random(npcs[i].maxHit);
					if (10 + Misc.random(c.getCombat().calculateMeleeDefence()) &gt; Misc
							.random(NPCHandler.npcs[i].attack)) {
						damage = 0;
					}
					if (c.prayerActive[18]) { // protect from melee
						damage = 0;
					}
					if (c.playerLevel[3] - damage &lt; 0) {
						damage = c.playerLevel[3];
					}
				}</code></p>
      </div>

      <meta itemprop='headline' content='Taking damage from a 0?'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Skyro.html'><span itemprop='name'>Skyro</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2016-01-16T06:34:54Z'>
            <time itemprop='dateModified' datetime='2016-08-04T17:14:16Z' class='post-time'>
              August 4, 2016,  5:14pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Check to see if the prayer is on first before dealing the damage. I can see in this code you’re not doing that.</p>
<pre><code class="lang-auto">if (c.prayerActive[18]) { // protect from melee
						damage = 0;
					}</code></pre>
<p>Put that under</p>
<pre><code class="lang-auto">if (npcs[i].attackType == 0) {</code></pre>
<p>So the full code should be;</p>
<pre><code class="lang-auto">if (npcs[i].attackType == 0) {
					if (c.prayerActive[18]) { // protect from melee
						damage = 0;
					}
                                         damage = Misc.random(npcs[i].maxHit);
					if (10 + Misc.random(c.getCombat().calculateMeleeDefence()) &gt; Misc
							.random(NPCHandler.npcs[i].attack)) {
						damage = 0;
					}
					if (c.playerLevel[3] - damage &lt; 0) {
						damage = c.playerLevel[3];
					}
				}</code></pre>
<p>I’m not sure if it will work, but it seems only logical.</p>
      </div>

      <meta itemprop='headline' content='Taking damage from a 0?'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/tank_nation.html'><span itemprop='name'>tank_nation</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2016-01-16T08:07:46Z'>
            <time itemprop='dateModified' datetime='2016-08-04T17:14:16Z' class='post-time'>
              August 4, 2016,  5:14pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Arbe, post:2, topic:554418”]Check to see if the prayer is on first before dealing the damage. I can see in this code you’re not doing that.</p>
<pre><code class="lang-auto">if (c.prayerActive[18]) { // protect from melee
						damage = 0;
					}</code></pre>
<p>Put that under</p>
<pre><code class="lang-auto">if (npcs[i].attackType == 0) {</code></pre>
<p>So the full code should be;</p>
<pre><code class="lang-auto">if (npcs[i].attackType == 0) {
					if (c.prayerActive[18]) { // protect from melee
						damage = 0;
					}
                                         damage = Misc.random(npcs[i].maxHit);
					if (10 + Misc.random(c.getCombat().calculateMeleeDefence()) &gt; Misc
							.random(NPCHandler.npcs[i].attack)) {
						damage = 0;
					}
					if (c.playerLevel[3] - damage &lt; 0) {
						damage = c.playerLevel[3];
					}
				}</code></pre>
<p>I’m not sure if it will work, but it seems only logical.[/quote]</p>
<p>Still having same problem… This ain’t making any sense.</p>
      </div>

      <meta itemprop='headline' content='Taking damage from a 0?'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/sk8rdude461.html'><span itemprop='name'>sk8rdude461</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2016-01-16T09:34:49Z'>
            <time itemprop='dateModified' datetime='2016-08-04T17:14:16Z' class='post-time'>
              August 4, 2016,  5:14pm
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Odd way of handing combat…</p>
<p>Arbe, your code is wrong.<br>
This is why:</p>
<p><code>
                                        if (c.prayerActive[18]) { // protect from melee
                                                damage = 0;// Lets set the value of damage to 0
                                        }
                                         damage = Misc.random(npcs[i].maxHit);// Oh now we're setting it to the max hit for the npc.. oops</code><br>
“Better” code:</p>
<p><code>if (npcs[i].attackType == 0) {
	damage = Misc.random(npcs[i].maxHit);
	if ((Misc.random(c.getCombat().calculateMeleeDefence()) + 10) &gt; Misc.random(NPCHandler.npcs[i].attack)
			|| c.prayerActive[18]) {
		damage = 0;
	}
	if (damage &gt; c.playerLevel[3]) {
		damage = c.playerLevel[3];
	}
}</code><br>
^Same logic.</p>
<p>If you want to figure out what’s causing the damage to hit… I suggest you actually print out the value of “damage” every time it’s modified or used. See where it gets set to the value that you get hit.</p>
<p>Ex:</p>
<p><code>if (npcs[i].attackType == 0) {
	damage = Misc.random(npcs[i].maxHit);
	System.out.println("Dmg1: " + damage);
	if ((Misc.random(c.getCombat().calculateMeleeDefence()) + 10) &gt; Misc.random(NPCHandler.npcs[i].attack)
			|| c.prayerActive[18]) {
		damage = 0;
	}
	System.out.println("Dmg2: " + damage);
	if (damage &gt; c.playerLevel[3]) {
		damage = c.playerLevel[3];
	}
	System.out.println("Dmg3: " + damage);
}</code><br>
Now if Dmg1 is set to 45, and then it’s still that at Dmg3, then the value never changed by any of the if statements. If it’s no longer 45, it was changed.</p>
      </div>

      <meta itemprop='headline' content='Taking damage from a 0?'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/matzie.html'><span itemprop='name'>matzie</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2016-01-17T06:50:35Z'>
            <time itemprop='dateModified' datetime='2016-08-04T17:14:19Z' class='post-time'>
              August 4, 2016,  5:14pm
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>The problem is the part handling prayer is called later in the sequence than the part that handles dealing damage. But the part that handles the packets is later, it relies on the value you sent.</p>
<p>so it goes:</p>
<p>hitPlayer();<br>
setDamageFromProtMelee();<br>
sendPlayerUpdateUsingTheDamageValue();</p>
      </div>

      <meta itemprop='headline' content='Taking damage from a 0?'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/taking-damage-from-a-0/554418 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:05:51 GMT -->
</html>
