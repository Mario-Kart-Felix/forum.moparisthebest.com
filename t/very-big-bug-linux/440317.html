<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/very-big-bug-linux/440317 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 22:08:02 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Very big bug.[LINUX] - Game Development - moparisthebest.com</title>
    <meta name="description" content="Hey i got linux os,and i want to play moparscape on one server.When i go to the webclient,i see this screen: [image] 

Could anyone help?">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="440317.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Very big bug.[LINUX]&#39;" href="440317.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://78.lt/di-ZQ1F.png" />
<meta property="og:image" content="http://78.lt/di-ZQ1F.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/very-big-bug-linux/440317" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/very-big-bug-linux/440317" />
<meta property="og:title" content="Very big bug.[LINUX]" />
<meta name="twitter:title" content="Very big bug.[LINUX]" />
<meta property="og:description" content="Hey i got linux os,and i want to play moparscape on one server.When i go to the webclient,i see this screen:    Could anyone help?" />
<meta name="twitter:description" content="Hey i got linux os,and i want to play moparscape on one server.When i go to the webclient,i see this screen:    Could anyone help?" />
<meta property="article:published_time" content="2012-04-22T09:58:56+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="440317.html">Very big bug.[LINUX]</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/general-programming.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>General Programming</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/general-programming/game-development.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Game Development</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Generolas.html'><span itemprop='name'>Generolas</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-04-22T09:58:56Z'>
            <time itemprop='dateModified' datetime='2016-08-03T02:20:26Z' class='post-time'>
              August 3, 2016,  2:20am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hey i got linux os,and i want to play moparscape on one server.When i go to the webclient,i see this screen:<br>
<img src="http://78.lt/di-ZQ1F.png" alt width="" height=""></p>
<p>Could anyone help?</p>
      </div>

      <meta itemprop='headline' content='Very big bug.[LINUX]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Native1.html'><span itemprop='name'>Native1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-04-22T10:01:25Z'>
            <time itemprop='dateModified' datetime='2016-08-03T02:20:26Z' class='post-time'>
              August 3, 2016,  2:20am
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>that’s because all the pi clients have their clusterfuck of custom gay shit loaded from the c directory. which does not exist on linux.</p>
      </div>

      <meta itemprop='headline' content='Very big bug.[LINUX]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Jacob5.html'><span itemprop='name'>Jacob5</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-04-22T10:02:23Z'>
            <time itemprop='dateModified' datetime='2016-08-03T02:20:26Z' class='post-time'>
              August 3, 2016,  2:20am
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>The client is not multiplatform, the sprites aren’t loaded from the cache correctly.</p>
      </div>

      <meta itemprop='headline' content='Very big bug.[LINUX]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Generolas.html'><span itemprop='name'>Generolas</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-04-22T10:07:41Z'>
            <time itemprop='dateModified' datetime='2016-08-03T02:20:26Z' class='post-time'>
              August 3, 2016,  2:20am
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>So i cant play there i guess? Or is there a way to fix this thing?</p>
      </div>

      <meta itemprop='headline' content='Very big bug.[LINUX]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/HcoJustin.html'><span itemprop='name'>HcoJustin</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-04-22T10:36:45Z'>
            <time itemprop='dateModified' datetime='2016-08-03T02:20:26Z' class='post-time'>
              August 3, 2016,  2:20am
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>There’s a rather crude way to fix it, but it isn’t worth the effort most of the time. If you can get it to load, and actually get in game the issue comes down to case-sensitivity.</p>
<p>The most recent way I’ve gotten around this is create a FileWrapper that will check for a match regardless of case. This of course requires bytecode modification, so is the server really worth playing?</p>
<p>Very crude and I’m sure it could be made much better, but at least it attempts to rename the file to the proper case so it doesn’t have to search for a match every time.</p>
<p>[code]public class FileWrapper extends File {<br>
private static final long serialVersionUID = 1936890081046227962L;</p>
<pre><code>public FileWrapper(File arg0, String arg1) {
	super(arg0, arg1);
	checkAndValidate();
}

public FileWrapper(String arg0, String arg1) {
	super(arg0, arg1);
	checkAndValidate();
}

public FileWrapper(String arg0) {
	super(arg0);
	checkAndValidate();
}

public FileWrapper(URI arg0) {
	super(arg0);
	checkAndValidate();
}

private void checkAndValidate() {
	try {
		String[] dirs = getPath().split("/");
		File cur = new File(dirs[0]);
		for(int i = 1; i &lt; dirs.length; i++) {
			File f = new File(cur, dirs[i]);
			if(!f.exists()) {
				for(File f1 : cur.listFiles()) {
					if(f1.getName().equalsIgnoreCase(f.getName())) {
						System.err.println("Renaming " + f1.getName() + " to " + f.getName());
						f1.renameTo(f);
						break;
					}
				}
			}
			cur = f;
		}
	}catch(Exception e) {
		System.err.println("Error loading file: " + getName() + " (" + getPath() + ")");
		e.printStackTrace();
	}
}

public FileWrapper[] listFiles() {
	File[] f = super.listFiles();
	ArrayList&lt;FileWrapper&gt; list = new ArrayList&lt;FileWrapper&gt;();
	for(File _f : f) {
		list.add(new FileWrapper(_f.getAbsolutePath()));
	}
	return list.toArray(new FileWrapper[f.length]);
}
</code></pre>
<p>}[/code]</p>
      </div>

      <meta itemprop='headline' content='Very big bug.[LINUX]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Generolas.html'><span itemprop='name'>Generolas</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-04-22T11:17:28Z'>
            <time itemprop='dateModified' datetime='2016-08-03T02:20:27Z' class='post-time'>
              August 3, 2016,  2:20am
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“HcoJustin, post:5, topic:440317”]There’s a rather crude way to fix it, but it isn’t worth the effort most of the time. If you can get it to load, and actually get in game the issue comes down to case-sensitivity.</p>
<p>The most recent way I’ve gotten around this is create a FileWrapper that will check for a match regardless of case. This of course requires bytecode modification, so is the server really worth playing?</p>
<p>Very crude and I’m sure it could be made much better, but at least it attempts to rename the file to the proper case so it doesn’t have to search for a match every time.</p>
<p>[code]public class FileWrapper extends File {<br>
private static final long serialVersionUID = 1936890081046227962L;</p>
<pre><code>public FileWrapper(File arg0, String arg1) {
	super(arg0, arg1);
	checkAndValidate();
}

public FileWrapper(String arg0, String arg1) {
	super(arg0, arg1);
	checkAndValidate();
}

public FileWrapper(String arg0) {
	super(arg0);
	checkAndValidate();
}

public FileWrapper(URI arg0) {
	super(arg0);
	checkAndValidate();
}

private void checkAndValidate() {
	try {
		String[] dirs = getPath().split("/");
		File cur = new File(dirs[0]);
		for(int i = 1; i &lt; dirs.length; i++) {
			File f = new File(cur, dirs[i]);
			if(!f.exists()) {
				for(File f1 : cur.listFiles()) {
					if(f1.getName().equalsIgnoreCase(f.getName())) {
						System.err.println("Renaming " + f1.getName() + " to " + f.getName());
						f1.renameTo(f);
						break;
					}
				}
			}
			cur = f;
		}
	}catch(Exception e) {
		System.err.println("Error loading file: " + getName() + " (" + getPath() + ")");
		e.printStackTrace();
	}
}

public FileWrapper[] listFiles() {
	File[] f = super.listFiles();
	ArrayList&lt;FileWrapper&gt; list = new ArrayList&lt;FileWrapper&gt;();
	for(File _f : f) {
		list.add(new FileWrapper(_f.getAbsolutePath()));
	}
	return list.toArray(new FileWrapper[f.length]);
}
</code></pre>
<p>}[/code][/quote]<br>
Umm,so I need to create a new file,or how?</p>
      </div>

      <meta itemprop='headline' content='Very big bug.[LINUX]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/HcoJustin.html'><span itemprop='name'>HcoJustin</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-04-22T11:28:31Z'>
            <time itemprop='dateModified' datetime='2016-08-03T02:20:27Z' class='post-time'>
              August 3, 2016,  2:20am
            </time>
        <span itemprop='position'>#7</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>It’s a lot more than just creating a file… You’ll essentially be writing a very crude ‘updater’ and then loading the modified client.</p>
<p>You’ll want to loop through every class in the client, and replace every instance of java.io.File with FileWrapper… Is the server really worth playing? You’ll go through a lot of work just to get something working…</p>
<p>[code]		ConstantPoolGen cpg = classGen.getConstantPool();<br>
for(int i = 0; i &lt; cpg.getSize(); i++) {<br>
if(cpg.getConstant(i) instanceof ConstantUtf8) {<br>
ConstantUtf8 _utf8 = (ConstantUtf8)cpg.getConstant(i);<br>
if(_utf8.getBytes().contains(“java/io/File”)) {<br>
cpg.setConstant(i, new ConstantUtf8(_utf8.getBytes().replaceAll(“java/io/File”, “path/to/FileWrapper”)));<br>
}<br>
}<br>
}</p>
<pre><code>	classGen.setConstantPool(cpg);
</code></pre>
<p>[/code]</p>
<p>It also replaces any instance that contains java.io.File, including File(In | Out)putStream, FileWriter, etc. so change it to your needs</p>
      </div>

      <meta itemprop='headline' content='Very big bug.[LINUX]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Generolas.html'><span itemprop='name'>Generolas</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-04-22T11:30:21Z'>
            <time itemprop='dateModified' datetime='2016-08-03T02:20:27Z' class='post-time'>
              August 3, 2016,  2:20am
            </time>
        <span itemprop='position'>#8</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“HcoJustin, post:7, topic:440317”]It’s a lot more than just creating a file… You’ll essentially be writing a very crude ‘updater’ and then loading the modified client.</p>
<p>You’ll want to loop through every class in the client, and replace every instance of java.io.File with FileWrapper… Is the server really worth playing? You’ll go through a lot of work just to get something working…</p>
<p>[code]		ConstantPoolGen cpg = classGen.getConstantPool();<br>
for(int i = 0; i &lt; cpg.getSize(); i++) {<br>
if(cpg.getConstant(i) instanceof ConstantUtf8) {<br>
ConstantUtf8 _utf8 = (ConstantUtf8)cpg.getConstant(i);<br>
if(_utf8.getBytes().contains(“java/io/File”)) {<br>
cpg.setConstant(i, new ConstantUtf8(_utf8.getBytes().replaceAll(“java/io/File”, “path/to/FileWrapper”)));<br>
}<br>
}<br>
}</p>
<pre><code>	classGen.setConstantPool(cpg);[/code]
</code></pre>
<p>It also replaces any instance that contains java.io.File, including File(In | Out)putStream, FileWriter, etc. so change it to your needs[/quote]</p>
<p>AAaaahhh,fuck that server. ;DDD</p>
      </div>

      <meta itemprop='headline' content='Very big bug.[LINUX]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/very-big-bug-linux/440317 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 22:08:03 GMT -->
</html>
