<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/first-experience-with-shell-scripting/426052 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Aug 2019 08:50:06 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>First experience with shell scripting - General Programming - moparisthebest.com</title>
    <meta name="description" content="I whipped up a tool to take advantage of Google&amp;#39;s TTS service. By itself it limits you to 100 characters, but this script splits your input based on various punctuation marks and &amp;#39;segment&amp;#39; length to allow virtually infin&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="426052.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;First experience with shell scripting&#39;" href="426052.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/first-experience-with-shell-scripting/426052" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/first-experience-with-shell-scripting/426052" />
<meta property="og:title" content="First experience with shell scripting" />
<meta name="twitter:title" content="First experience with shell scripting" />
<meta property="og:description" content="I whipped up a tool to take advantage of Google’s TTS service. By itself it limits you to 100 characters, but this script splits your input based on various punctuation marks and ‘segment’ length to allow virtually infinite input. C&amp;C!  [code=bash]mkdir -p mp3temp  rm mp3temp/*.mp3  IFS=$’\n’  dong=(echo $* | tr &#39;.,;:!?&#39; &#39;\n&#39;)  mp3idx=0;  for y in “${dong[@]}”  do  IFS=$’\n’  y=(echo $y | sed &#39;s/^[ ]*//&#39;)  if (( ${#y} &gt;= 100 )); then  IFS=’ ‘;  song=(echo $y | cut -d &quot; &quot; -f 1-);  y=’’;  for m in..." />
<meta name="twitter:description" content="I whipped up a tool to take advantage of Google’s TTS service. By itself it limits you to 100 characters, but this script splits your input based on various punctuation marks and ‘segment’ length to allow virtually infinite input. C&amp;C!  [code=bash]mkdir -p mp3temp  rm mp3temp/*.mp3  IFS=$’\n’  dong=(echo $* | tr &#39;.,;:!?&#39; &#39;\n&#39;)  mp3idx=0;  for y in “${dong[@]}”  do  IFS=$’\n’  y=(echo $y | sed &#39;s/^[ ]*//&#39;)  if (( ${#y} &gt;= 100 )); then  IFS=’ ‘;  song=(echo $y | cut -d &quot; &quot; -f 1-);  y=’’;  for m in..." />
<meta property="article:published_time" content="2011-12-20T13:37:20+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="426052.html">First experience with shell scripting</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/general-programming.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>General Programming</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Rictoo.html'><span itemprop='name'>Rictoo</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-12-20T13:37:20Z'>
            <time itemprop='dateModified' datetime='2016-08-02T14:37:56Z' class='post-time'>
              August 2, 2016,  2:37pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I whipped up a tool to take advantage of Google’s TTS service. By itself it limits you to 100 characters, but this script splits your input based on various punctuation marks and ‘segment’ length to allow virtually infinite input. C&amp;C!</p>
<p>[code=bash]mkdir -p mp3temp<br>
rm mp3temp/*.mp3<br>
IFS=$’\n’</p>
<p>dong=(<code>echo $* | tr '.,;:!?' '\n'</code>)<br>
mp3idx=0;</p>
<p>for y in “${dong[@]}”<br>
do<br>
IFS=$’\n’<br>
y=(<code>echo $y | sed 's/^[ ]*//'</code>)<br>
if (( ${<span class="hashtag">#y</span>} &gt;= 100 )); then<br>
IFS=’ ‘;<br>
song=(<code>echo $y | cut -d " " -f 1-</code>);<br>
y=’’;<br>
for m in “${song[@]}”<br>
do<br>
if (( (${<span class="hashtag">#y</span>} + ${<span class="hashtag">#m</span>}) &gt;= 100 )); then<br>
wget -q --user-agent=Firefox -O mp3temp/<code>printf "%09d" $mp3idx</code>.mp3 “<a href="http://translate.google.com/translate_tts?ie=UTF-8&amp;q=" rel="nofollow noopener">http://translate.google.com/translate_tts?ie=UTF-8&amp;q=</a><code>echo $y</code>”;<br>
let “mp3idx=$mp3idx+1”<br>
y=’’;<br>
fi<br>
y=<code>echo "$y $m"</code><br>
let “idx=$idx+1”<br>
done<br>
fi<br>
wget -q --user-agent=Firefox -O mp3temp/<code>printf "%09d" $mp3idx</code>.mp3 “<a href="http://translate.google.com/translate_tts?ie=UTF-8&amp;q=" rel="nofollow noopener">http://translate.google.com/translate_tts?ie=UTF-8&amp;q=</a><code>echo $y</code>”;<br>
let “mp3idx=$mp3idx+1”<br>
done</p>
<p>cat mp3temp/*.mp3 &gt; mp3temp/out.mp3<br>
mplayer mp3temp/out.mp3[/code]</p>
      </div>

      <meta itemprop='headline' content='First experience with shell scripting'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/moparisthebest.html'><span itemprop='name'>moparisthebest</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-12-21T03:58:21Z'>
            <time itemprop='dateModified' datetime='2016-08-02T14:38:59Z' class='post-time'>
              August 2, 2016,  2:38pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Good job! I wasn’t aware google had an API for that available, that is really neat though, I did a little bit of hacking to your script to avoid temporary files and such, and also enable it to read from stdin, so you could read a book like this:</p>
<p>Moby Dick:</p>
<p><code>wget -q -O- "http://www.gutenberg.org/ebooks/2701.txt.utf8" | google_tts
</code></p>
<p>[code=bash]#!/bin/bash<br>
url_encode(){<br>
# ingenious: <a href="http://stackoverflow.com/a/7506695">http://stackoverflow.com/a/7506695</a><br>
cat | xxd -plain | tr -d ‘\n’ | sed ‘s/(…)/%\1/g’<br>
}</p>
<p>say_it(){<br>
IFS=$’\n’</p>
<p>for y in $(cat | tr ‘.,;:!?’ ‘\n’)<br>
do<br>
IFS=$’\n’<br>
#y=(<code>echo $y | sed 's/^[ ]*//' | url_encode</code>)<br>
y=(<code>echo $y | sed 's/^[ ]*//'</code>)<br>
if (( ${<span class="hashtag">#y</span>} &gt;= 100 )); then<br>
IFS=’ ‘;<br>
song=(<code>echo $y | cut -d " " -f 1-</code>);<br>
y=’’;<br>
for m in “${song[@]}”<br>
do<br>
if (( (${<span class="hashtag">#y</span>} + ${<span class="hashtag">#m</span>}) &gt;= 100 )); then<br>
mplayer -user-agent Firefox “<a href="http://translate.google.com/translate_tts?ie=UTF-8&amp;q=%24y">http://translate.google.com/translate_tts?ie=UTF-8&amp;q=$y</a>”;<br>
y=’’;<br>
fi<br>
#y=<code>echo "$y $m" | url_encode</code><br>
y=<code>echo "$y $m"</code><br>
done<br>
fi<br>
mplayer -user-agent Firefox “<a href="http://translate.google.com/translate_tts?ie=UTF-8&amp;q=%24y">http://translate.google.com/translate_tts?ie=UTF-8&amp;q=$y</a>”;<br>
done<br>
}</p>
<h1>if there is an argument, send it to say_it, otherwise we assume input is from stdin</h1>
<p>[ “$1” != “” ] &amp;&amp; (echo “$1” | say_it) || say_it[/code]</p>
<p>I also put it some code to encode the URLs, which was needed with wget, but I guess not anymore with mplayer.</p>
<p>Anyway, have it read moby dick like above, I think you really need to try to get as close to the max number of characters possible each time or it sounds really broken up, see what you can do about that. <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
      </div>

      <meta itemprop='headline' content='First experience with shell scripting'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Rictoo.html'><span itemprop='name'>Rictoo</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-12-21T12:21:30Z'>
            <time itemprop='dateModified' datetime='2016-08-02T14:39:28Z' class='post-time'>
              August 2, 2016,  2:39pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Awesome! When I first made this, I also used mplayer directly. The problem with this, like you said, is that unless you have super fast internet, the voice sounds broken up.<br>
About the sound being broken up, I try to minimize this by translating the maximum number of words collectively under 100 chars. I don’t think anything else can be done, besides language comprehension of course (to sequence it based on natural pauses in speech).</p>
<p>Thanks for the input <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
      </div>

      <meta itemprop='headline' content='First experience with shell scripting'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/SETO.html'><span itemprop='name'>SETO</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-12-21T15:37:26Z'>
            <time itemprop='dateModified' datetime='2016-08-02T14:39:36Z' class='post-time'>
              August 2, 2016,  2:39pm
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>whats the diffrence between editing someones code and hacing it, when the source code is given "???</p>
      </div>

      <meta itemprop='headline' content='First experience with shell scripting'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Cheese_Police.html'><span itemprop='name'>Cheese_Police</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-12-21T17:12:19Z'>
            <time itemprop='dateModified' datetime='2016-08-02T14:39:39Z' class='post-time'>
              August 2, 2016,  2:39pm
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>see <a href="http://www.catb.org/jargon/html/H/hack.html" rel="nofollow noopener">http://www.catb.org/jargon/html/H/hack.html</a> and <a href="http://www.catb.org/jargon/html/H/hacker.html" rel="nofollow noopener">http://www.catb.org/jargon/html/H/hacker.html</a><br>
also <a href="http://www.catb.org/jargon/html/H/hack-on.html" rel="nofollow noopener">http://www.catb.org/jargon/html/H/hack-on.html</a></p>
      </div>

      <meta itemprop='headline' content='First experience with shell scripting'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/first-experience-with-shell-scripting/426052 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Aug 2019 08:50:07 GMT -->
</html>
