<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>First experience with shell scripting</title>
    <link>https://forum.moparisthebest.com/t/first-experience-with-shell-scripting/426052</link>
    <description>I whipped up a tool to take advantage of Google&#39;s TTS service. By itself it limits you to 100 characters, but this script splits your input based on various punctuation marks and &#39;segment&#39; length to allow virtually infinite input. C&amp;C!

[code=bash]mkdir -p mp3temp
rm mp3temp/*.mp3
IFS=$&#39;\n&#39;

dong=(`echo $* | tr &#39;.,;:!?&#39; &#39;\n&#39;`)
mp3idx=0;

for y in &quot;${dong[@]}&quot;
do
  IFS=$&#39;\n&#39;
  y=(`echo $y | sed &#39;s/^[ ]*//&#39;`)
  if (( ${#y} &gt;= 100 )); then
    IFS=&#39; &#39;;
    song=(`echo $y | cut -d &quot; &quot; -f 1-`);
    y=&#39;&#39;;
    for m in &quot;${song[@]}&quot;
    do
      if (( (${#y} + ${#m}) &gt;= 100 )); then
        wget -q --user-agent=Firefox -O mp3temp/`printf &quot;%09d&quot; $mp3idx`.mp3 &quot;http://translate.google.com/translate_tts?ie=UTF-8&amp;q=`echo $y`&quot;;
        let &quot;mp3idx=$mp3idx+1&quot;
        y=&#39;&#39;;
      fi
      y=`echo &quot;$y $m&quot;`
      let &quot;idx=$idx+1&quot;
    done
  fi
  wget -q --user-agent=Firefox -O mp3temp/`printf &quot;%09d&quot; $mp3idx`.mp3 &quot;http://translate.google.com/translate_tts?ie=UTF-8&amp;q=`echo $y`&quot;;
  let &quot;mp3idx=$mp3idx+1&quot;
done

cat mp3temp/*.mp3 &gt; mp3temp/out.mp3
mplayer mp3temp/out.mp3[/code]</description>
    
    <lastBuildDate>Wed, 21 Dec 2011 17:12:19 +0000</lastBuildDate>
    <category>General Programming</category>
    <atom:link href="https://forum.moparisthebest.com/t/first-experience-with-shell-scripting/426052.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>First experience with shell scripting</title>
        <dc:creator><![CDATA[@Cheese_Police c|p]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/cheese_police">@Cheese_Police</a> wrote:</p>
          <blockquote>
              <p>see <a href="http://www.catb.org/jargon/html/H/hack.html" rel="nofollow noopener">http://www.catb.org/jargon/html/H/hack.html</a> and <a href="http://www.catb.org/jargon/html/H/hacker.html" rel="nofollow noopener">http://www.catb.org/jargon/html/H/hacker.html</a><br>
also <a href="http://www.catb.org/jargon/html/H/hack-on.html" rel="nofollow noopener">http://www.catb.org/jargon/html/H/hack-on.html</a></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/first-experience-with-shell-scripting/426052/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/first-experience-with-shell-scripting/426052/5</link>
        <pubDate>Wed, 21 Dec 2011 17:12:19 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-426052-5</guid>
        <source url="https://forum.moparisthebest.com/t/first-experience-with-shell-scripting/426052.rss">First experience with shell scripting</source>
      </item>
      <item>
        <title>First experience with shell scripting</title>
        <dc:creator><![CDATA[@SETO SETO]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/seto">@SETO</a> wrote:</p>
          <blockquote>
              <p>whats the diffrence between editing someones code and hacing it, when the source code is given "???</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/first-experience-with-shell-scripting/426052/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/first-experience-with-shell-scripting/426052/4</link>
        <pubDate>Wed, 21 Dec 2011 15:37:26 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-426052-4</guid>
        <source url="https://forum.moparisthebest.com/t/first-experience-with-shell-scripting/426052.rss">First experience with shell scripting</source>
      </item>
      <item>
        <title>First experience with shell scripting</title>
        <dc:creator><![CDATA[@Rictoo Rictoo]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/rictoo">@Rictoo</a> wrote:</p>
          <blockquote>
              <p>Awesome! When I first made this, I also used mplayer directly. The problem with this, like you said, is that unless you have super fast internet, the voice sounds broken up.<br>
About the sound being broken up, I try to minimize this by translating the maximum number of words collectively under 100 chars. I don’t think anything else can be done, besides language comprehension of course (to sequence it based on natural pauses in speech).</p>
<p>Thanks for the input <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/first-experience-with-shell-scripting/426052/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/first-experience-with-shell-scripting/426052/3</link>
        <pubDate>Wed, 21 Dec 2011 12:21:30 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-426052-3</guid>
        <source url="https://forum.moparisthebest.com/t/first-experience-with-shell-scripting/426052.rss">First experience with shell scripting</source>
      </item>
      <item>
        <title>First experience with shell scripting</title>
        <dc:creator><![CDATA[@moparisthebest Moparisthebest]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/moparisthebest">@moparisthebest</a> wrote:</p>
          <blockquote>
              <p>Good job! I wasn’t aware google had an API for that available, that is really neat though, I did a little bit of hacking to your script to avoid temporary files and such, and also enable it to read from stdin, so you could read a book like this:</p>
<p>Moby Dick:</p>
<p><code>wget -q -O- "http://www.gutenberg.org/ebooks/2701.txt.utf8" | google_tts
</code></p>
<p>[code=bash]#!/bin/bash<br>
url_encode(){<br>
# ingenious: <a href="http://stackoverflow.com/a/7506695">http://stackoverflow.com/a/7506695</a><br>
cat | xxd -plain | tr -d ‘\n’ | sed ‘s/(…)/%\1/g’<br>
}</p>
<p>say_it(){<br>
IFS=$’\n’</p>
<p>for y in $(cat | tr ‘.,;:!?’ ‘\n’)<br>
do<br>
IFS=$’\n’<br>
#y=(<code>echo $y | sed 's/^[ ]*//' | url_encode</code>)<br>
y=(<code>echo $y | sed 's/^[ ]*//'</code>)<br>
if (( ${<span class="hashtag">#y</span>} &gt;= 100 )); then<br>
IFS=’ ‘;<br>
song=(<code>echo $y | cut -d " " -f 1-</code>);<br>
y=’’;<br>
for m in “${song[@]}”<br>
do<br>
if (( (${<span class="hashtag">#y</span>} + ${<span class="hashtag">#m</span>}) &gt;= 100 )); then<br>
mplayer -user-agent Firefox “<a href="http://translate.google.com/translate_tts?ie=UTF-8&amp;q=%24y">http://translate.google.com/translate_tts?ie=UTF-8&amp;q=$y</a>”;<br>
y=’’;<br>
fi<br>
#y=<code>echo "$y $m" | url_encode</code><br>
y=<code>echo "$y $m"</code><br>
done<br>
fi<br>
mplayer -user-agent Firefox “<a href="http://translate.google.com/translate_tts?ie=UTF-8&amp;q=%24y">http://translate.google.com/translate_tts?ie=UTF-8&amp;q=$y</a>”;<br>
done<br>
}</p>
<h1>if there is an argument, send it to say_it, otherwise we assume input is from stdin</h1>
<p>[ “$1” != “” ] &amp;&amp; (echo “$1” | say_it) || say_it[/code]</p>
<p>I also put it some code to encode the URLs, which was needed with wget, but I guess not anymore with mplayer.</p>
<p>Anyway, have it read moby dick like above, I think you really need to try to get as close to the max number of characters possible each time or it sounds really broken up, see what you can do about that. <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/first-experience-with-shell-scripting/426052/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/first-experience-with-shell-scripting/426052/2</link>
        <pubDate>Wed, 21 Dec 2011 03:58:21 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-426052-2</guid>
        <source url="https://forum.moparisthebest.com/t/first-experience-with-shell-scripting/426052.rss">First experience with shell scripting</source>
      </item>
      <item>
        <title>First experience with shell scripting</title>
        <dc:creator><![CDATA[@Rictoo Rictoo]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/rictoo">@Rictoo</a> wrote:</p>
          <blockquote>
              <p>I whipped up a tool to take advantage of Google’s TTS service. By itself it limits you to 100 characters, but this script splits your input based on various punctuation marks and ‘segment’ length to allow virtually infinite input. C&amp;C!</p>
<p>[code=bash]mkdir -p mp3temp<br>
rm mp3temp/*.mp3<br>
IFS=$’\n’</p>
<p>dong=(<code>echo $* | tr '.,;:!?' '\n'</code>)<br>
mp3idx=0;</p>
<p>for y in “${dong[@]}”<br>
do<br>
IFS=$’\n’<br>
y=(<code>echo $y | sed 's/^[ ]*//'</code>)<br>
if (( ${<span class="hashtag">#y</span>} &gt;= 100 )); then<br>
IFS=’ ‘;<br>
song=(<code>echo $y | cut -d " " -f 1-</code>);<br>
y=’’;<br>
for m in “${song[@]}”<br>
do<br>
if (( (${<span class="hashtag">#y</span>} + ${<span class="hashtag">#m</span>}) &gt;= 100 )); then<br>
wget -q --user-agent=Firefox -O mp3temp/<code>printf "%09d" $mp3idx</code>.mp3 “<a href="http://translate.google.com/translate_tts?ie=UTF-8&amp;q=" rel="nofollow noopener">http://translate.google.com/translate_tts?ie=UTF-8&amp;q=</a><code>echo $y</code>”;<br>
let “mp3idx=$mp3idx+1”<br>
y=’’;<br>
fi<br>
y=<code>echo "$y $m"</code><br>
let “idx=$idx+1”<br>
done<br>
fi<br>
wget -q --user-agent=Firefox -O mp3temp/<code>printf "%09d" $mp3idx</code>.mp3 “<a href="http://translate.google.com/translate_tts?ie=UTF-8&amp;q=" rel="nofollow noopener">http://translate.google.com/translate_tts?ie=UTF-8&amp;q=</a><code>echo $y</code>”;<br>
let “mp3idx=$mp3idx+1”<br>
done</p>
<p>cat mp3temp/*.mp3 &gt; mp3temp/out.mp3<br>
mplayer mp3temp/out.mp3[/code]</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/first-experience-with-shell-scripting/426052/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/first-experience-with-shell-scripting/426052/1</link>
        <pubDate>Tue, 20 Dec 2011 13:37:20 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-426052-1</guid>
        <source url="https://forum.moparisthebest.com/t/first-experience-with-shell-scripting/426052.rss">First experience with shell scripting</source>
      </item>
  </channel>
</rss>
