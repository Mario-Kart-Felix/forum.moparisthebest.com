<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/executeonlan/421205 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:05:12 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>ExecuteOnLan - Technology - moparisthebest.com</title>
    <meta name="description" content="As an extension of, even a replacement of my previous script, DieOnLan, I give you ExecuteOnLan! 

This enables you to execute commands on your computer with any software that supports WakeOnLan, you simply put the list &amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="421205.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;ExecuteOnLan&#39;" href="421205.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/executeonlan/421205" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/executeonlan/421205" />
<meta property="og:title" content="ExecuteOnLan" />
<meta name="twitter:title" content="ExecuteOnLan" />
<meta property="og:description" content="As an extension of, even a replacement of my previous script, DieOnLan, I give you ExecuteOnLan!  This enables you to execute commands on your computer with any software that supports WakeOnLan, you simply put the list of commands you wish to execute, the program tells you what MAC to send the WOL packet too, then it listens for that packet and executes the accompanying command.  I use this for my mediacenter running XBMC, I have it hooked up to my 1080p TV, as well as all of the standard defini..." />
<meta name="twitter:description" content="As an extension of, even a replacement of my previous script, DieOnLan, I give you ExecuteOnLan!  This enables you to execute commands on your computer with any software that supports WakeOnLan, you simply put the list of commands you wish to execute, the program tells you what MAC to send the WOL packet too, then it listens for that packet and executes the accompanying command.  I use this for my mediacenter running XBMC, I have it hooked up to my 1080p TV, as well as all of the standard defini..." />
<meta property="article:published_time" content="2011-11-10T21:20:13+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="421205.html">ExecuteOnLan</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/technology.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Technology</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/moparisthebest.html'><span itemprop='name'>moparisthebest</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-11-10T21:20:13Z'>
            <time itemprop='dateModified' datetime='2016-08-02T04:14:20Z' class='post-time'>
              August 2, 2016,  4:14am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>As an extension of, even a replacement of my previous script, <a href="https://www.moparisthebest.com/smf/index.php/topic,494630.0.html" data-bbcode="true">DieOnLan</a>, I give you ExecuteOnLan!</p>
<p>This enables you to execute commands on your computer with any software that supports WakeOnLan, you simply put the list of commands you wish to execute, the program tells you what MAC to send the WOL packet too, then it listens for that packet and executes the accompanying command.</p>
<p>I use this for my mediacenter running XBMC, I have it hooked up to my 1080p TV, as well as all of the standard definition TVâ€™s in my house by means of an RF-convertor and multiple RG-6 coax splitters, which of course only supports 1024x768.  So now I can change the resolution by clicking a button on the WOL program on my phone, which also doubles as my XBMC remote, handy!</p>
<pre><code class="lang-auto">#!/bin/bash
hostname=$(cat /etc/hostname)
wol_port="2009"
export DISPLAY=:0

commands=("xrandr -s 1024x768" "xrandr -s 1920x1080" "sudo poweroff")

# ensure needed programs are installed
for prog in socat xxd tr md5sum
do
     command -v "$prog" &gt;/dev/null 2&gt;&amp;1 || { echo "This program requires $prog but it's not installed." &gt;&amp;2; exit 1; }
done

function mac_from_string(){
	# this seems as good of a way to generate a basically unique mac address as any
	mac=$(echo $1 | md5sum)
	#echo 000000${mac:0:6}
	echo ${mac:0:12}
}

function format_mac(){
	bare_mac=$1
	mac=""
	for i in 0 2 4 6 8 10
	do
		mac=$mac${bare_mac:$i:2}":"
	done
	mac=${mac:0:17}
	echo $mac
}

#format_mac "030464b3cdb7"; exit 0;

function wolmac(){
	mac=$1
	expected_string="ffffffffffff"
	for i in {1..16}
	do
	  expected_string="$expected_string$mac"
	done
	echo $expected_string
}

function run_command(){
	wol_recieved=$1
	for cmd in "${commands[@]}"
	do
		mac=$(mac_from_string "$hostname$cmd")
		[ "$wol_recieved" == "" ] &amp;&amp; echo "cmd: '$cmd' wol_mac: '$(format_mac $mac)'" &amp;&amp; continue
		wol_expected=$(wolmac "$mac")
		#echo "wol_expected: '$wol_expected'"
		if [ "$wol_expected" == "$wol_recieved" ]
		then
		  echo "WOL packet recieved, executing '$cmd'"
		  $cmd
		fi
	done
}

# prints out command:mac mapping
run_command

while true; do
        recieved_packet=$(socat -T1 UDP-LISTEN:$wol_port - | xxd -p | tr -d '\n')
        echo "recieved_packet: $recieved_packet"
        run_command "$recieved_packet"
done</code></pre>
<p>example run:</p>
<pre><code class="lang-auto">mopar@mediacenter:~$ ./dol.sh 
cmd: 'xrandr -s 1024x768' wol_mac: '03:04:64:b3:cd:b7'
cmd: 'xrandr -s 1920x1080' wol_mac: '40:c9:df:67:9f:2e'
cmd: 'sudo poweroff' wol_mac: '39:4a:1f:c6:d4:48'
recieved_packet: ffffffffffff030464b3cdb7030464b3cdb7030464b3cdb7030464b3cdb7030464b3cdb7030464b3cdb7030464b3cdb7030464b3cdb7030464b3cdb7030464b3cdb7030464b3cdb7030464b3cdb7030464b3cdb7030464b3cdb7030464b3cdb7030464b3cdb7
WOL packet recieved, executing 'xrandr -s 1024x768'
recieved_packet: ffffffffffff40c9df679f2e40c9df679f2e40c9df679f2e40c9df679f2e40c9df679f2e40c9df679f2e40c9df679f2e40c9df679f2e40c9df679f2e40c9df679f2e40c9df679f2e40c9df679f2e40c9df679f2e40c9df679f2e40c9df679f2e40c9df679f2e
WOL packet recieved, executing 'xrandr -s 1920x1080'</code></pre>
<p>Does anyone have a better way to generate the MAC addresses?  I try to keep them unique-per-machine by appending the host name, though I suppose it might be better to just have each computer listen on a different port.  Any ideas?</p>
      </div>

      <meta itemprop='headline' content='ExecuteOnLan'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/executeonlan/421205 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:05:12 GMT -->
</html>
