<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Hi im klump i got a npc problem 508</title>
    <link>https://forum.moparisthebest.com/t/hi-im-klump-i-got-a-npc-problem-508/421673</link>
    <description>hi guys ;) i have a davidscape source.. but my npc&#39;s is a bit messy... or kbd is  when i put on melee pray and start hitting it without anti d shield it wont hit me with the fire... i was wondering if anyone of you guys could help me please :)


the code is in the :npcplayercombat



package DavidScape.npcs.combat;


import DavidScape.Engine;
import DavidScape.players.Player;
import DavidScape.util.Misc;
import DavidScape.npcs.NPC;


public class NPCPlayerCombat {
   

public int DragAttack = Misc.random(1);
    public void attackPlayer(NPC n) {
        Player p = Engine.players[n.attackPlayer];
        int hitType = Misc.random(5);
        int maxHit = Misc.random(n.maxHit);
     int offsetX = (n.absX - p.absX) * -1;
        int offsetY = (n.absY - p.absY) * -1;

        if (n.attackPlayer &lt;= 0 || n.isDead || p.isDead
                || n.attackPlayer &gt;= Engine.players.length || p == null
                || p.disconnected[1]) {
            resetAttack(n);
        }
        if (n.combatDelay &gt; 0) {
            return;
        }

        if (Misc.getDistance(p.absX, p.absY, n.absX, n.absY) &lt;= 1) {
            n.requestFaceTo(p.playerId + 32768);
 
if(n.npcType == 9 || n.npcType == 21 || n.npcType == 20)
{
 n.requestAnim(451, 0);
}
else
if(n.npcType == 2 || n.npcType == 1)
{
 n.requestAnim(422, 0);
}
else
if(n.npcType == 742 &amp;&amp; DragAttack == 1 || n.npcType == 5363 &amp;&amp; DragAttack == 1 || n.npcType == 50 &amp;&amp; DragAttack == 1 || n.npcType == 53 &amp;&amp; DragAttack == 1 || n.npcType == 941 &amp;&amp; DragAttack == 1)
{
n.requestGFX(1, 0);
n.requestAnim(81, 0);
DragAttack = Misc.random(1);
if(p.equipment[5] == 1540 || p.equipment[5] == 11283) 
{
p.frames.sendMessage(p, &quot;Your shield obsorbs some of the dragon fire.&quot;);
maxHit = Misc.random(5);
}
else
{
p.frames.sendMessage(p, &quot;Your get hit by the dragon fire.&quot;);
maxHit = 10+Misc.random(40);
}
}
else
if(n.npcType == 742 &amp;&amp; DragAttack == 0 || n.npcType == 5363 &amp;&amp; DragAttack == 0 || n.npcType == 50 &amp;&amp; DragAttack == 0 || n.npcType == 53 &amp;&amp; DragAttack == 0 || n.npcType == 941 &amp;&amp; DragAttack == 0)
{
n.requestAnim(91, 0);
DragAttack = Misc.random(1);
}
else
{
n.requestAnim(n.attackEmote, 0);
}

if(p.prayerIcon == 0) 
{
if(p.Hitter &gt; 1)
{
p.Hitter -= 1;
maxHit = 0;   
}
else
{
p.Hitter = 2+Misc.random(4);
}
}

            p.appendHit(maxHit, 0);
            p.requestAnim(424, 0);
            n.combatDelay = n.attackDelay;
            if (p.autoRetaliate == 0 &amp;&amp; !p.attackingNPC) {
                p.combatDelay += 3;
                p.requestFaceTo(n.npcId);
                p.attackNPC = n.npcId;
                p.attackingNPC = true;
            }
        }
    }

    public void resetAttack(NPC n) {
        Player p = Engine.players[n.attackPlayer];
        if (n == null) {
            return;
        }
        n.attackingPlayer = false;
        // need to cancle the npc facing here, somehow.
    }
}



i hope you guys can help me! ;)</description>
    
    <lastBuildDate>Tue, 15 Nov 2011 20:39:39 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/hi-im-klump-i-got-a-npc-problem-508/421673.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Hi im klump i got a npc problem 508</title>
        <dc:creator><![CDATA[@davidi2 Davidi2]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/davidi2">@davidi2</a> wrote:</p>
          <blockquote>
              <p>Basically it’s appending the dragonfire as a melle attack instead of a special attack.</p>
<p>See this?</p>
<p><code>p.frames.sendMessage(p, "Your get hit by the dragon fire.");
maxHit = 10+Misc.random(40);</code><br>
Replace it with:</p>
<p><code>
            p.frames.sendMessage(p, "Your get hit by the dragon fire.");
            maxHit = 10+Misc.random(40);
            p.appendHit(maxHit, 0);
            p.requestAnim(424, 0);
            n.combatDelay = n.attackDelay;
            if (p.autoRetaliate == 0 &amp;&amp; !p.attackingNPC) {
                p.combatDelay += 3;
                p.requestFaceTo(n.npcId);
                p.attackNPC = n.npcId;
                p.attackingNPC = true;
            }
            return;</code></p>
<p>Because the code is so messy and the source is so old, I’m not 100% sure if that will work, I didn’t have time to test it. But try it and tell me what happens. <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>If I had the time I’d just rewrite the method for you, but that should work for you.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/hi-im-klump-i-got-a-npc-problem-508/421673/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/hi-im-klump-i-got-a-npc-problem-508/421673/3</link>
        <pubDate>Tue, 15 Nov 2011 20:39:39 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-421673-3</guid>
        <source url="https://forum.moparisthebest.com/t/hi-im-klump-i-got-a-npc-problem-508/421673.rss">Hi im klump i got a npc problem 508</source>
      </item>
      <item>
        <title>Hi im klump i got a npc problem 508</title>
        <dc:creator><![CDATA[@tyb97 tyb97]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/tyb97">@tyb97</a> wrote:</p>
          <blockquote>
              <p>Use code tags pl0x. And ask davidi2 <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"> its his source.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/hi-im-klump-i-got-a-npc-problem-508/421673/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/hi-im-klump-i-got-a-npc-problem-508/421673/2</link>
        <pubDate>Tue, 15 Nov 2011 01:35:53 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-421673-2</guid>
        <source url="https://forum.moparisthebest.com/t/hi-im-klump-i-got-a-npc-problem-508/421673.rss">Hi im klump i got a npc problem 508</source>
      </item>
      <item>
        <title>Hi im klump i got a npc problem 508</title>
        <dc:creator><![CDATA[@klump klump]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/klump">@klump</a> wrote:</p>
          <blockquote>
              <p>hi guys <img src="https://forum.moparisthebest.com/images/emoji/twitter/wink.png?v=5" title=":wink:" class="emoji" alt=":wink:"> i have a davidscape source… but my npc’s is a bit messy… or kbd is  when i put on melee pray and start hitting it without anti d shield it wont hit me with the fire… i was wondering if anyone of you guys could help me please <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>the code is in the :npcplayercombat</p>
<p>package DavidScape.npcs.combat;</p>
<p>import DavidScape.Engine;<br>
import DavidScape.players.Player;<br>
import DavidScape.util.Misc;<br>
import DavidScape.npcs.NPC;</p>
<p>public class NPCPlayerCombat {</p>
<p>public int DragAttack = Misc.random(1);<br>
public void attackPlayer(NPC n) {<br>
Player p = Engine.players[n.attackPlayer];<br>
int hitType = Misc.random(5);<br>
int maxHit = Misc.random(n.maxHit);<br>
int offsetX = (n.absX - p.absX) * -1;<br>
int offsetY = (n.absY - p.absY) * -1;</p>
<pre><code>    if (n.attackPlayer &lt;= 0 || n.isDead || p.isDead
            || n.attackPlayer &gt;= Engine.players.length || p == null
            || p.disconnected[1]) {
        resetAttack(n);
    }
    if (n.combatDelay &gt; 0) {
        return;
    }

    if (Misc.getDistance(p.absX, p.absY, n.absX, n.absY) &lt;= 1) {
        n.requestFaceTo(p.playerId + 32768);
</code></pre>
<p>if(n.npcType == 9 || n.npcType == 21 || n.npcType == 20)<br>
{<br>
n.requestAnim(451, 0);<br>
}<br>
else<br>
if(n.npcType == 2 || n.npcType == 1)<br>
{<br>
n.requestAnim(422, 0);<br>
}<br>
else<br>
if(n.npcType == 742 &amp;&amp; DragAttack == 1 || n.npcType == 5363 &amp;&amp; DragAttack == 1 || n.npcType == 50 &amp;&amp; DragAttack == 1 || n.npcType == 53 &amp;&amp; DragAttack == 1 || n.npcType == 941 &amp;&amp; DragAttack == 1)<br>
{<br>
n.requestGFX(1, 0);<br>
n.requestAnim(81, 0);<br>
DragAttack = Misc.random(1);<br>
if(p.equipment[5] == 1540 || p.equipment[5] == 11283)<br>
{<br>
p.frames.sendMessage(p, “Your shield obsorbs some of the dragon fire.”);<br>
maxHit = Misc.random(5);<br>
}<br>
else<br>
{<br>
p.frames.sendMessage(p, “Your get hit by the dragon fire.”);<br>
maxHit = 10+Misc.random(40);<br>
}<br>
}<br>
else<br>
if(n.npcType == 742 &amp;&amp; DragAttack == 0 || n.npcType == 5363 &amp;&amp; DragAttack == 0 || n.npcType == 50 &amp;&amp; DragAttack == 0 || n.npcType == 53 &amp;&amp; DragAttack == 0 || n.npcType == 941 &amp;&amp; DragAttack == 0)<br>
{<br>
n.requestAnim(91, 0);<br>
DragAttack = Misc.random(1);<br>
}<br>
else<br>
{<br>
n.requestAnim(n.attackEmote, 0);<br>
}</p>
<p>if(p.prayerIcon == 0)<br>
{<br>
if(p.Hitter &gt; 1)<br>
{<br>
p.Hitter -= 1;<br>
maxHit = 0;<br>
}<br>
else<br>
{<br>
p.Hitter = 2+Misc.random(4);<br>
}<br>
}</p>
<pre><code>        p.appendHit(maxHit, 0);
        p.requestAnim(424, 0);
        n.combatDelay = n.attackDelay;
        if (p.autoRetaliate == 0 &amp;&amp; !p.attackingNPC) {
            p.combatDelay += 3;
            p.requestFaceTo(n.npcId);
            p.attackNPC = n.npcId;
            p.attackingNPC = true;
        }
    }
}

public void resetAttack(NPC n) {
    Player p = Engine.players[n.attackPlayer];
    if (n == null) {
        return;
    }
    n.attackingPlayer = false;
    // need to cancle the npc facing here, somehow.
}
</code></pre>
<p>}</p>
<p>i hope you guys can help me! <img src="https://forum.moparisthebest.com/images/emoji/twitter/wink.png?v=5" title=":wink:" class="emoji" alt=":wink:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/hi-im-klump-i-got-a-npc-problem-508/421673/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/hi-im-klump-i-got-a-npc-problem-508/421673/1</link>
        <pubDate>Tue, 15 Nov 2011 01:16:13 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-421673-1</guid>
        <source url="https://forum.moparisthebest.com/t/hi-im-klump-i-got-a-npc-problem-508/421673.rss">Hi im klump i got a npc problem 508</source>
      </item>
  </channel>
</rss>
