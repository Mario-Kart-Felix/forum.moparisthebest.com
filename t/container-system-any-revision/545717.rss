<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Container System Any Revision</title>
    <link>https://forum.moparisthebest.com/t/container-system-any-revision/545717</link>
    <description>I wrote myself an item container that seems pretty glitch-free and easily understandable. I&#39;m not much for commenting at all, so if you can&#39;t understand this, then good luck ;)

The container implements Collection and Iterable because I like to take shortcuts. It will much more useful any way.

Container.java
[code=java]
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collection;
import java.util.Collections;
import java.util.Iterator;

/**
 * @author Albert Beaupre
 *
 * @param &lt;E&gt; The item element.
 */
public abstract class Container&lt;E extends Item&gt; implements Collection&lt;E&gt;, Iterable&lt;E&gt; {

	public enum Type { AVAILABLE_STACK, ALWAYS_STACK, NEVER_STACK }

	private int capacity;
	private int maxStack, minStack;
	private Item[] data;
	private Type type;

	public Container(int capacity, Type type) {
		this.capacity = capacity;
		this.data = new Item[capacity];
		this.setMaxStack(Integer.MAX_VALUE);
		this.setMinStack(1);
		this.setType(type);
	}

	public Container(int capacity, Type type, int maxStack) {
		this(capacity, type);
		this.setMaxStack(maxStack);
	}

	public Container(int capacity, Type type, int maxStack, int minStack) {
		this(capacity, type, maxStack);
		this.setMinStack(minStack);
	}

	public static Container&lt;Item&gt; copy(Container&lt;Item&gt; c) {
		Container&lt;Item&gt; container = new Container&lt;Item&gt;(
				c.getCapacity(), c.getType(), c.getMaxStack(), c.getMinStack()) {
			protected void refresh() { c.refresh(); }
		};
		container.addAll(c);
		return container;
	}

	protected abstract void refresh();

	public void swap(int fromIndex, int toIndex) {
		Item old = get(toIndex);
		set(toIndex, get(fromIndex));
		set(fromIndex, old);
	}

	public void transfer(Container&lt;? extends Item&gt; to) {
		for (Item item : this) {
			to.add(item);
			this.remove(item);
		}
	}

	public void add(Item...items) {
		for (Item item : items)
			if (item != null)
				add(item);
	}

	@Override
	public boolean add(Item e) {
		if (e == null)
			return false;
		ItemDefinition def = e.getDefinition();
		int id = e.getId();
		int amount = e.getAmount();
		int freeIndex = this.getFreeIndex();
		if (freeIndex == -1)
			return false;
		switch (type) {
		case ALWAYS_STACK:
			if (contains(id)) {
				int there = get(indexOf(id)).getAmount();
				int total = there + amount &gt; maxStack ? maxStack : there + amount;
				set(indexOf(id), new Item(id, total));
			} else {
				if (getFreeSlots() == 0)
					return false;
				data[freeIndex] = new Item(id, amount &gt; maxStack ? maxStack : amount);
			}
			refresh();
			return true;
		case AVAILABLE_STACK:
			if (def.isStackable()) {
				if (contains(id)) {
					int there = get(indexOf(id)).getAmount();
					int total = there + amount &gt; maxStack ? maxStack : there + amount;
					set(indexOf(id), new Item(id, total));
				} else {
					if (getFreeSlots() == 0)
						return false;
					data[freeIndex] = new Item(id, amount &gt; maxStack ? maxStack : amount);
				}
				refresh();
			} else {
				if (getFreeSlots() == 0)
					return false;
				for (int i = 0; i &lt; amount; i++) {
					freeIndex = this.getFreeIndex();
					if (freeIndex != -1) {
						data[freeIndex] = new Item(id, 1);
					} else return false;
				}
				refresh();
			}
			return true;
		case NEVER_STACK:
			if (getFreeSlots() == 0)
				return false;
			for (int i = 0; i &lt; amount; i++) {
				freeIndex = this.getFreeIndex();
				if (freeIndex != -1) {
					data[freeIndex] = new Item(id, 1);
				} else return false;
			}
			refresh();
			return true;
		}
		return false;
	}

	public boolean insert(int index, Item element) {
		if (getFreeSlots() == 0)
			return false;
		Item[] items = Arrays.copyOf(data, data.length);
		for (int i = index + 1; i &lt; capacity; i++)
			set(i, items[i - 1]);
		data[index] = element;
		refresh();
		return true;
	}

	@Override
	public boolean addAll(Collection&lt;? extends E&gt; c) {
		for (Item item : c)
			if (item != null &amp;&amp; !add(item))
				return false;
		return true;
	}

	public boolean addAll(int index, Collection&lt;? extends E&gt; c) {
		if (getFreeSlots() &gt; 0) {
			c.stream().forEach(n -&gt; add(n));
			return true;
		}
		return false;
	}

	@Override
	public void clear() {
		for (int i = 0; i &lt; capacity; i++)
			data[i] = null;
	}

	public boolean contains(Object...objects) {
		for (Object o : objects)
			if (!contains(o))
				return false;
		return true;
	}

	@Override
	public boolean contains(Object o) {
		if (o instanceof Integer &amp;&amp; ((Integer) o) == -1)
			return true;
		return indexOf(o) != -1;
	}

	@Override
	public boolean containsAll(Collection&lt;?&gt; c) {
		for (Object object : c)
			if (!contains(object)) return false;
		return true;
	}

	@SuppressWarnings(&quot;unchecked&quot;)
	public E get(int index) {
		return (E) data[index];
	}

	public int indexOf(Object o) {
		if (o instanceof Item) {
			for (int i = 0; i &lt; capacity; i++)
				if (data[i] != null &amp;&amp; data[i].equals(o))
					return i;
		} else if (o instanceof Integer) {
			Integer itemId = (Integer) o;
			for (int i = 0; i &lt; capacity; i++)
				if (data[i] != null &amp;&amp; data[i].getId() == itemId)
					return i;
		}
		return -1;
	}

	@Override
	public boolean isEmpty() {
		return size() == 0;
	}

	@Override
	public Iterator&lt;E&gt; iterator() {
		return new Iterator&lt;E&gt;() {
			int index;
			@Override
			public boolean hasNext() {
				return index &lt; capacity;
			}

			@Override @SuppressWarnings(&quot;unchecked&quot;)
			public E next() {
				return (E) data[index++];
			}
		};
	}

	public int lastIndexOf(Object o) {
		for (int i = capacity - 1; i &gt;= 0; i--)
			if (data[i] != null &amp;&amp; data[i].equals(o))
				return i;
		return -1;
	}

	@Override
	public boolean remove(Object o) {
		if (contains(o)) {
			int index = indexOf(o);
			Item item = data[index];
			boolean is_item = o instanceof Item;
			ItemDefinition def = item.getDefinition();
			switch (type) {
			case ALWAYS_STACK:
				if (is_item) {
					Item it = (Item) o;
					item.setAmount(item.getAmount() - it.getAmount());
					if (item.getAmount() &lt; minStack)
						data[index] = null;
				} else data[index] = null;
				refresh();
				return true;
			case AVAILABLE_STACK:
				if (def.isStackable()) {
					if (is_item) {
						Item it = (Item) o;
						item.setAmount(item.getAmount() - it.getAmount());
						if (item.getAmount() &lt; minStack)
							data[index] = null;
					} else data[index] = null;
				} else {
					if (is_item) {
						Item it = (Item) o;
						for (int i = 0; i &lt; it.getAmount(); i++) {
							int index_2 = indexOf(it.getId());
							if (index_2 != -1)
								data[index_2] = null;
							else return false;
						}
					} else {
						data[index] = null;
					}
				}
				refresh();
				return true;
			case NEVER_STACK:
				if (is_item) {
					Item it = (Item) o;
					for (int i = 0; i &lt; it.getAmount(); i++) {
						int index_2 = indexOf(it.getId());
						if (index_2 != -1)
							data[index_2] = null;
						else return false;
					}
				} else {
					data[index] = null;
				}
				refresh();
				return true;
			}
			return false;
		}
		return false;
	}

	@SuppressWarnings(&quot;unchecked&quot;)
	public E remove(int index) {
		if (index == -1)
			throw new IllegalArgumentException(&quot;Value less than 0: &quot;+index);
		return (E) data[index];
	}

	@Override
	public boolean removeAll(Collection&lt;?&gt; c) {
		for (Object item : c)
			if (!remove(item))
				return false;
		return true;
	}

	@Override
	public boolean retainAll(Collection&lt;?&gt; c) {
		c.stream().filter(n -&gt; !contains(n)).forEach(n -&gt; remove(n));
		return this.containsAll(c);
	}

	@SuppressWarnings(&quot;unchecked&quot;)
	public E set(int index, Item element) {
		return (E) (data[index] = element);
	}

	public int getFreeIndex() {
		for (int i = 0; i &lt; capacity; i++)
			if (data[i] == null)
				return i;
		return -1;
	}

	public int getFreeSlots() {
		return capacity - size();
	}

	public void shift() {
		ArrayList&lt;Item&gt; shifted = new ArrayList&lt;Item&gt;();
		Arrays.asList(data).stream().filter(n -&gt; n != null).forEach(n -&gt; shifted.add(n));
		this.data = shifted.toArray(new Item[capacity]);
	}

	public void shuffle() {
		Collections.shuffle(Arrays.asList(data));
	}

	public int amountOf(int itemId) {
		int amount = 0;
		for (int i = 0; i &lt; capacity; i++)
			if (data[i] != null &amp;&amp; data[i].getId() == itemId)
				amount += data[i].getAmount();
		return amount;
	}

	@Override
	public int size() {
		int size = 0;
		for (int i = 0; i &lt; capacity; i++)
			if (data[i] != null) size++;
		return size;
	}

	@Override
	public Object[] toArray() {
		return data;
	}

	@Override @SuppressWarnings(&quot;unchecked&quot;)
	public &lt;T&gt; T[] toArray(T[] a) {
		return (T[]) Arrays.copyOf(data, size(), a.getClass());
	}

	public int getMaxStack() {
		return maxStack;
	}

	public void setMaxStack(int maxStack) {
		this.maxStack = maxStack;
	}

	public int getMinStack() {
		return minStack;
	}

	public void setMinStack(int minStack) {
		this.minStack = minStack;
	}

	public Type getType() {
		return type;
	}

	public void setType(Type type) {
		this.type = type;
	}

	public int getCapacity() {
		return capacity;
	} 
}[/code]

Item.java
[code=java]
/**
 * @author Albert Beaupre
 */
public class Item implements Comparable&lt;Item&gt; {

	private int id;
	private int amount;

	public Item(int id) {
		this.id = id;
		this.amount = 1;
	}

	public Item(int id, int amount) {
		this.id = id;
		this.amount = amount;
	}

	public Item(Item item) {
		this.id = item.getId();
		this.amount = item.getAmount();
	}

	public ItemDefinition getDefinition() {
		return ItemDefinition.forId(id);
	}

	public int getAmount() {
		return amount;
	}

	public void setItemId(int itemId) {
		this.id = itemId;
	}

	public int getId() {
		return id;
	}

	public void setAmount(int amount) {
		this.amount = amount;
	}

	@Override
	public String toString() {
		return &quot;id=&quot;+id+&quot;, amount=&quot;+amount;
	}

	@Override
	public boolean equals(Object o) {
		if (o instanceof Item) {
			Item item = (Item) o;
			return item.getId() == id;
		} else if (o instanceof Integer)
			return ((Integer) o) == id;
		return false;
	}

	@Override
	public int compareTo(Item item) {
		return this.getAmount() - item.getAmount();
	}
}
[/code]</description>
    
    <lastBuildDate>Tue, 12 Aug 2014 21:39:20 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/container-system-any-revision/545717.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Container System Any Revision</title>
        <dc:creator><![CDATA[@Clawz_fury lare69]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/clawz_fury">@Clawz_fury</a> wrote:</p>
          <blockquote>
              <p>never really thought of making the container itself a collection, that’s a pretty good idea actually</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/container-system-any-revision/545717/20">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/container-system-any-revision/545717/20</link>
        <pubDate>Tue, 12 Aug 2014 21:39:20 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-545717-20</guid>
        <source url="https://forum.moparisthebest.com/t/container-system-any-revision/545717.rss">Container System Any Revision</source>
      </item>
      <item>
        <title>Container System Any Revision</title>
        <dc:creator><![CDATA[@sinisoul sini]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sinisoul">@sinisoul</a> wrote:</p>
          <blockquote>
              <p>Tests make the world go round</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/container-system-any-revision/545717/19">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/container-system-any-revision/545717/19</link>
        <pubDate>Mon, 11 Aug 2014 03:37:31 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-545717-19</guid>
        <source url="https://forum.moparisthebest.com/t/container-system-any-revision/545717.rss">Container System Any Revision</source>
      </item>
      <item>
        <title>Container System Any Revision</title>
        <dc:creator><![CDATA[@wildskiller wildskiller]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/wildskiller">@wildskiller</a> wrote:</p>
          <blockquote>
              <p>[quote=“Davidi2, post:17, topic:545717”]First of all your add mechanic is wrong, you shouldn’t be checking for freeSlots before checking the stack type. You should only return false if:<br>
a) The stack type is never stack &amp;&amp; freeSlots &lt; 1<br>
b) The stack type is stack sometimes:<br>
b1) the item isnt stackable &amp;&amp; freeSlots &lt; 1<br>
b2) the item is stacakble &amp;&amp; !contains &amp;&amp; freeSlots &lt; 1<br>
c) The stack type is stack always &amp;&amp; !contains &amp;&amp; freeSlots &lt; 1</p>
<p>Secondly, as I said its about using the correct interface. You have specifically created methods that do not function like they are supposed to because you are trying to adhere to the List javadocs. Switching to Collection, you would not need to write any ‘stupid formulas’ or even rewrite most of your methods at all, it just gives you more freedom to create the methods that work like they should in RS. In this case it would mean you could just create your own documentation for add that specifies it matches the RS mechanics (it doesnt shift the list afterwards), and the same for remove etc.[/quote]<br>
I’ll make you a programmer yet!</p>
<p>Lmfao I’m just messing, but thank you for this. I write a lot of things carelessly which is extremely terrible for any programmer. You know a lot more than me, so I guess doubting you was a mistake <img src="https://forum.moparisthebest.com/images/emoji/twitter/wink.png?v=5" title=":wink:" class="emoji" alt=":wink:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/container-system-any-revision/545717/18">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/container-system-any-revision/545717/18</link>
        <pubDate>Sat, 09 Aug 2014 20:32:04 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-545717-18</guid>
        <source url="https://forum.moparisthebest.com/t/container-system-any-revision/545717.rss">Container System Any Revision</source>
      </item>
      <item>
        <title>Container System Any Revision</title>
        <dc:creator><![CDATA[@davidi2 Davidi2]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/davidi2">@davidi2</a> wrote:</p>
          <blockquote>
              <p>First of all your add mechanic is wrong, you shouldn’t be checking for freeSlots before checking the stack type. You should only return false if:<br>
a) The stack type is never stack &amp;&amp; freeSlots &lt; 1<br>
b) The stack type is stack sometimes:<br>
b1) the item isnt stackable &amp;&amp; freeSlots &lt; 1<br>
b2) the item is stacakble &amp;&amp; !contains &amp;&amp; freeSlots &lt; 1<br>
c) The stack type is stack always &amp;&amp; !contains &amp;&amp; freeSlots &lt; 1</p>
<p>Secondly, as I said its about using the correct interface. You have specifically created methods that do not function like they are supposed to because you are trying to adhere to the List javadocs. Switching to Collection, you would not need to write any ‘stupid formulas’ or even rewrite most of your methods at all, it just gives you more freedom to create the methods that work like they should in RS. In this case it would mean you could just create your own documentation for add that specifies it matches the RS mechanics (it doesnt shift the list afterwards), and the same for remove etc.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/container-system-any-revision/545717/17">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/container-system-any-revision/545717/17</link>
        <pubDate>Sat, 09 Aug 2014 19:35:09 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-545717-17</guid>
        <source url="https://forum.moparisthebest.com/t/container-system-any-revision/545717.rss">Container System Any Revision</source>
      </item>
      <item>
        <title>Container System Any Revision</title>
        <dc:creator><![CDATA[@wildskiller wildskiller]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/wildskiller">@wildskiller</a> wrote:</p>
          <blockquote>
              <p>[quote=“imthenull, post:15, topic:545717”]<code>class Container&lt;E extends Item&gt; implements List&lt;Item&gt;, Iterable&lt;Item&gt;</code><br>
???</p>
<p>Why does the list and iterator have the type of Item instead of E?</p>
<pre><code class="lang-auto"></code></pre>
<p>You will be able to access available attributes of the Item class from E since you have specified that it is a derivative of Item[/quote]<br>
I guess I wrote this not caring about flaws. I have changed it though, so thanks for the info</p>
<aside class="quote" data-post="14" data-topic="545717">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/user_avatar/forum.moparisthebest.com/davidi2/40/2579_1.png" class="avatar"> Davidi2:</div>
<blockquote>
<p>Take a look at Collection, it also contains most of those methods and the ones that are mechanic specific (ie set, add/remove(item, preferred index)) are where they are supposed to be — in the specific implementation. Using List is flat out wrong for RSPS if you are trying to replicate the proper RS inventory mechanics.</p>
</blockquote>
</aside>
<p>You’re very right, about the collection interface, but everything in this class suits private servers well enough. My equipment, inventory, and other skills are doing fine with this class and I don’t need to write some stupid formulas to allow the container to function as RuneScape’s inventory would. If you think I’m wrong, then correct me with an example…</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/container-system-any-revision/545717/16">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/container-system-any-revision/545717/16</link>
        <pubDate>Sat, 09 Aug 2014 19:08:06 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-545717-16</guid>
        <source url="https://forum.moparisthebest.com/t/container-system-any-revision/545717.rss">Container System Any Revision</source>
      </item>
      <item>
        <title>Container System Any Revision</title>
        <dc:creator><![CDATA[@imthenull imthenull]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/imthenull">@imthenull</a> wrote:</p>
          <blockquote>
              <pre><code class="lang-auto">???

Why does the list and iterator have the type of Item instead of E?

[code=java]class Container&lt;E extends Item&gt; implements List&lt;E&gt;, Iterable&lt;E&gt;[/code]

You will be able to access available attributes of the Item class from E since you have specified that it is a derivative of Item</code></pre>
<p>???</p>
<p>Why does the list and iterator have the type of Item instead of E?</p>
<pre><code class="lang-auto"></code></pre>
<p>You will be able to access available attributes of the Item class from E since you have specified that it is a derivative of Item</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/container-system-any-revision/545717/15">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/container-system-any-revision/545717/15</link>
        <pubDate>Sat, 09 Aug 2014 03:33:37 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-545717-15</guid>
        <source url="https://forum.moparisthebest.com/t/container-system-any-revision/545717.rss">Container System Any Revision</source>
      </item>
      <item>
        <title>Container System Any Revision</title>
        <dc:creator><![CDATA[@davidi2 Davidi2]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/davidi2">@davidi2</a> wrote:</p>
          <blockquote>
              <p>Take a look at Collection, it also contains most of those methods and the ones that are mechanic specific (ie set, add/remove(item, preferred index)) are where they are supposed to be — in the specific implementation. Using List is flat out wrong for RSPS if you are trying to replicate the proper RS inventory mechanics.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/container-system-any-revision/545717/14">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/container-system-any-revision/545717/14</link>
        <pubDate>Sat, 09 Aug 2014 00:27:07 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-545717-14</guid>
        <source url="https://forum.moparisthebest.com/t/container-system-any-revision/545717.rss">Container System Any Revision</source>
      </item>
      <item>
        <title>Container System Any Revision</title>
        <dc:creator><![CDATA[@wildskiller wildskiller]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/wildskiller">@wildskiller</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="12" data-topic="545717">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/user_avatar/forum.moparisthebest.com/davidi2/40/2579_1.png" class="avatar"> Davidi2:</div>
<blockquote>
<p>Oh what the fudge, that’s an awful idea. You can implement iterable but don’t implement List – an Item container is not a List. That might explain the design that doesn’t match up to the RS mechanics. Lists are meant to automatically shift indexes when you remove and add, but that doesn’t happen with the RS inventory. If you want to implement something like that just implement Collection.</p>
</blockquote>
</aside>
<p>It seems quite suitable for me. Anything that is needed for the rsps can be added of course, but each method in this class has been proven useful. retainAll, addAll, removeAll, contains, containsAll, add, remove, set, get, size, clear, and so on will be used for at least one things on an rsps. I wouldn’t have chosen list if they didn’t.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/container-system-any-revision/545717/13">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/container-system-any-revision/545717/13</link>
        <pubDate>Sat, 09 Aug 2014 00:21:02 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-545717-13</guid>
        <source url="https://forum.moparisthebest.com/t/container-system-any-revision/545717.rss">Container System Any Revision</source>
      </item>
      <item>
        <title>Container System Any Revision</title>
        <dc:creator><![CDATA[@davidi2 Davidi2]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/davidi2">@davidi2</a> wrote:</p>
          <blockquote>
              <p>Oh what the fudge, that’s an awful idea. You can implement iterable but don’t implement List – an Item container is not a List. That might explain the design that doesn’t match up to the RS mechanics. Lists are meant to automatically shift indexes when you remove and add, but that doesn’t happen with the RS inventory. If you want to implement something like that just implement Collection.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/container-system-any-revision/545717/12">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/container-system-any-revision/545717/12</link>
        <pubDate>Sat, 09 Aug 2014 00:12:23 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-545717-12</guid>
        <source url="https://forum.moparisthebest.com/t/container-system-any-revision/545717.rss">Container System Any Revision</source>
      </item>
      <item>
        <title>Container System Any Revision</title>
        <dc:creator><![CDATA[@wildskiller wildskiller]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/wildskiller">@wildskiller</a> wrote:</p>
          <blockquote>
              <p>[quote=“Davidi2, post:10, topic:545717”]Can’t you just rename it in the superclass to insert?</p>
<p>Also, doesn’t your shift at the end of the add(i, item) erase the last item in the inventory if it exists?[/quote]<br>
Yes, it does. Also, the superclasses are the java api’s List and Iterable, I can’t change that…</p>
<p>Also, is this what you’re talking about?</p>
<pre><code class="lang-auto">public void add(int index, Item element) {
	if (data[index] != null) {
		if (getFreeSlots() &gt; 0)
			data[getFreeIndex()] = element;
	} else 
	    data[index] = element;
}

public boolean insert(int index, Item element) {
	if (getFreeSlots() &lt; 1)
		return false;
    Item[] items = Arrays.copyOf(data, data.length);
    for (int i = index + 1; i &lt; capacity; i++)
        set(i, items[i - 1]);
    data[index] = element;
	refresh();
	return true;
}</code></pre>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/container-system-any-revision/545717/11">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/container-system-any-revision/545717/11</link>
        <pubDate>Fri, 08 Aug 2014 23:57:28 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-545717-11</guid>
        <source url="https://forum.moparisthebest.com/t/container-system-any-revision/545717.rss">Container System Any Revision</source>
      </item>
      <item>
        <title>Container System Any Revision</title>
        <dc:creator><![CDATA[@davidi2 Davidi2]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/davidi2">@davidi2</a> wrote:</p>
          <blockquote>
              <p>Can’t you just rename it in the superclass to insert?</p>
<p>Also, doesn’t your shift at the end of the add(i, item) erase the last item in the inventory if it exists?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/container-system-any-revision/545717/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/container-system-any-revision/545717/10</link>
        <pubDate>Fri, 08 Aug 2014 23:54:20 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-545717-10</guid>
        <source url="https://forum.moparisthebest.com/t/container-system-any-revision/545717.rss">Container System Any Revision</source>
      </item>
      <item>
        <title>Container System Any Revision</title>
        <dc:creator><![CDATA[@wildskiller wildskiller]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/wildskiller">@wildskiller</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="7" data-topic="545717">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/dan0194/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> Dan0194:</div>
<blockquote>
<p>David your just nitpicking at the smallest things good job bro looks nice.</p>
</blockquote>
</aside>
<p>He is right, but I would just duplicate my method if I added insert(index, element) into the class.</p>
<p>[quote=“Davidi2, post:8, topic:545717”]I edited my post, I forgot you had an add method without the index param. However you still need one that accepts an index without forcing it there (called a preferred slot in the source I use), for things like when you combine potions and dont want them to automatically move to the first empty slot.</p>
<p>[quote author=Dan0194 link=topic=664600.msg4443122#msg4443122 date=1407541846]<br>
David your just nitpicking at the smallest things good job bro looks nice.<br>
[/quote]No I’m not, mechanically this does not have some features needed to create a RSPS.[/quote]<br>
I will do something about that then.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/container-system-any-revision/545717/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/container-system-any-revision/545717/9</link>
        <pubDate>Fri, 08 Aug 2014 23:52:14 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-545717-9</guid>
        <source url="https://forum.moparisthebest.com/t/container-system-any-revision/545717.rss">Container System Any Revision</source>
      </item>
      <item>
        <title>Container System Any Revision</title>
        <dc:creator><![CDATA[@davidi2 Davidi2]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/davidi2">@davidi2</a> wrote:</p>
          <blockquote>
              <p>[quote=“wildskiller, post:6, topic:545717”][quote author=Davidi2 link=topic=664600.msg4443118#msg4443118 date=1407541399]<br>
No, the method you currently call add should be called insert, not the shift() one. The add method should NOT shift any indexes, your documentation is wrong. You need two methods, one called insert and one called add. Rename your current add() to insert(), and then create an add method that adds an item to the inventory without shifting anything. If the preferred index is occupied, just add the item to the end. Your current add method is useless except for banking, if people care about the RS mechanics.<br>
[/quote]<br>
It guess it would be called insert if the super class had named it insert. I just did what I could understand of the documentation, which seemed pretty clear to me.</p>
<p>That is the method add(index, element) comments<br>
"Inserts the specified element at the specified position in this list (optional operation). Shifts the element currently at that position (if any) and any subsequent elements to the right (adds one to their indices)."[/quote]I edited my post, I forgot you had an add method without the index param. However you still need one that accepts an index without forcing it there (called a preferred slot in the source I use), for things like when you combine potions and dont want them to automatically move to the first empty slot. Also doesn’t your shift at the end of the add erase the last item in the inventory if it exists?</p>
<p>[quote=“Dan0194, post:7, topic:545717”]David your just nitpicking at the smallest things good job bro looks nice.[/quote]No I’m not, mechanically this does not have some features needed to create a RSPS.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/container-system-any-revision/545717/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/container-system-any-revision/545717/8</link>
        <pubDate>Fri, 08 Aug 2014 23:51:59 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-545717-8</guid>
        <source url="https://forum.moparisthebest.com/t/container-system-any-revision/545717.rss">Container System Any Revision</source>
      </item>
      <item>
        <title>Container System Any Revision</title>
        <dc:creator><![CDATA[@Dan0194 Dan0194]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/dan0194">@Dan0194</a> wrote:</p>
          <blockquote>
              <p>David your just nitpicking at the smallest things good job bro looks nice.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/container-system-any-revision/545717/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/container-system-any-revision/545717/7</link>
        <pubDate>Fri, 08 Aug 2014 23:50:46 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-545717-7</guid>
        <source url="https://forum.moparisthebest.com/t/container-system-any-revision/545717.rss">Container System Any Revision</source>
      </item>
      <item>
        <title>Container System Any Revision</title>
        <dc:creator><![CDATA[@wildskiller wildskiller]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/wildskiller">@wildskiller</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="5" data-topic="545717">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/user_avatar/forum.moparisthebest.com/davidi2/40/2579_1.png" class="avatar"> Davidi2:</div>
<blockquote>
<p>No, the method you currently call add should be called insert, not the shift() one. The add method should NOT shift any indexes, your documentation is wrong. You need two methods, one called insert and one called add. Rename your current add() to insert(), and then create an add method that adds an item to the inventory without shifting anything. If the preferred index is occupied, just add the item to the end. Your current add method is useless except for banking, if people care about the RS mechanics.</p>
</blockquote>
</aside>
<p>It guess it would be called insert if the super class had named it insert. I just did what I could understand of the documentation, which seemed pretty clear to me.</p>
<p>That is the method add(index, element) comments<br>
"Inserts the specified element at the specified position in this list (optional operation). Shifts the element currently at that position (if any) and any subsequent elements to the right (adds one to their indices)."</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/container-system-any-revision/545717/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/container-system-any-revision/545717/6</link>
        <pubDate>Fri, 08 Aug 2014 23:47:08 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-545717-6</guid>
        <source url="https://forum.moparisthebest.com/t/container-system-any-revision/545717.rss">Container System Any Revision</source>
      </item>
      <item>
        <title>Container System Any Revision</title>
        <dc:creator><![CDATA[@davidi2 Davidi2]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/davidi2">@davidi2</a> wrote:</p>
          <blockquote>
              <p>No, the method you currently call add should be called insert, not the shift() one. And you need to have an add method that accepts and index but doesn’t FORCE the item there if the slot is taken.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/container-system-any-revision/545717/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/container-system-any-revision/545717/5</link>
        <pubDate>Fri, 08 Aug 2014 23:43:19 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-545717-5</guid>
        <source url="https://forum.moparisthebest.com/t/container-system-any-revision/545717.rss">Container System Any Revision</source>
      </item>
      <item>
        <title>Container System Any Revision</title>
        <dc:creator><![CDATA[@wildskiller wildskiller]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/wildskiller">@wildskiller</a> wrote:</p>
          <blockquote>
              <p>[quote=“Davidi2, post:3, topic:545717”]the add method is wrong, you shouldn’t automatically shift the rest of the indexes when doing that</p>
<p>if the index is occupied, just add it to the end of the container instead</p>
<p>the method that does shift everything would be called ‘insert’[/quote]<br>
If I wanted to add an item to a specific index, it would do just that. The list documentation says add(index, element) will insert the element into the array at the index and shift the other elements to the right.</p>
<p>Also, why would the shift() method be called insert? You aren’t inserting anything, you are shifting all elements together.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/container-system-any-revision/545717/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/container-system-any-revision/545717/4</link>
        <pubDate>Fri, 08 Aug 2014 23:40:01 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-545717-4</guid>
        <source url="https://forum.moparisthebest.com/t/container-system-any-revision/545717.rss">Container System Any Revision</source>
      </item>
      <item>
        <title>Container System Any Revision</title>
        <dc:creator><![CDATA[@davidi2 Davidi2]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/davidi2">@davidi2</a> wrote:</p>
          <blockquote>
              <p>the add method is wrong, you shouldn’t automatically shift the rest of the indexes when doing that</p>
<p>if the index is occupied, just add it to the end of the container instead</p>
<p>the method that does shift everything would be called ‘insert’</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/container-system-any-revision/545717/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/container-system-any-revision/545717/3</link>
        <pubDate>Fri, 08 Aug 2014 23:24:04 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-545717-3</guid>
        <source url="https://forum.moparisthebest.com/t/container-system-any-revision/545717.rss">Container System Any Revision</source>
      </item>
      <item>
        <title>Container System Any Revision</title>
        <dc:creator><![CDATA[@Clawz_fury lare69]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/clawz_fury">@Clawz_fury</a> wrote:</p>
          <blockquote>
              <p>cool, gj</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/container-system-any-revision/545717/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/container-system-any-revision/545717/2</link>
        <pubDate>Fri, 08 Aug 2014 22:52:14 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-545717-2</guid>
        <source url="https://forum.moparisthebest.com/t/container-system-any-revision/545717.rss">Container System Any Revision</source>
      </item>
      <item>
        <title>Container System Any Revision</title>
        <dc:creator><![CDATA[@wildskiller wildskiller]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/wildskiller">@wildskiller</a> wrote:</p>
          <blockquote>
              <p>I wrote myself an item container that seems pretty glitch-free and easily understandable. I’m not much for commenting at all, so if you can’t understand this, then good luck <img src="https://forum.moparisthebest.com/images/emoji/twitter/wink.png?v=5" title=":wink:" class="emoji" alt=":wink:"></p>
<p>The container implements Collection and Iterable because I like to take shortcuts. It will much more useful any way.</p>
<p>Container.java</p>
<p>[code=java]<br>
import java.util.ArrayList;<br>
import java.util.Arrays;<br>
import java.util.Collection;<br>
import java.util.Collections;<br>
import java.util.Iterator;</p>
<p>/**</p>
<ul>
<li>
<p><span class="mention">@author</span> Albert Beaupre</p>
</li>
<li>
</li>
<li>
<p><a class="mention" href="/u/param">@param</a>  The item element.<br>
*/<br>
public abstract class Container implements Collection, Iterable {</p>
<p>public enum Type { AVAILABLE_STACK, ALWAYS_STACK, NEVER_STACK }</p>
<p>private int capacity;<br>
private int maxStack, minStack;<br>
private Item[] data;<br>
private Type type;</p>
<p>public Container(int capacity, Type type) {<br>
this.capacity = capacity;<br>
this.data = new Item[capacity];<br>
this.setMaxStack(Integer.MAX_VALUE);<br>
this.setMinStack(1);<br>
this.setType(type);<br>
}</p>
<p>public Container(int capacity, Type type, int maxStack) {<br>
this(capacity, type);<br>
this.setMaxStack(maxStack);<br>
}</p>
<p>public Container(int capacity, Type type, int maxStack, int minStack) {<br>
this(capacity, type, maxStack);<br>
this.setMinStack(minStack);<br>
}</p>
<p>public static Container copy(Container c) {<br>
Container container = new Container(<br>
c.getCapacity(), c.getType(), c.getMaxStack(), c.getMinStack()) {<br>
protected void refresh() { c.refresh(); }<br>
};<br>
container.addAll©;<br>
return container;<br>
}</p>
<p>protected abstract void refresh();</p>
<p>public void swap(int fromIndex, int toIndex) {<br>
Item old = get(toIndex);<br>
set(toIndex, get(fromIndex));<br>
set(fromIndex, old);<br>
}</p>
<p>public void transfer(Container&lt;? extends Item&gt; to) {<br>
for (Item item : this) {<br>
to.add(item);<br>
this.remove(item);<br>
}<br>
}</p>
<p>public void add(Item…items) {<br>
for (Item item : items)<br>
if (item != null)<br>
add(item);<br>
}</p>
<p><a class="mention" href="/u/override">@Override</a><br>
public boolean add(Item e) {<br>
if (e == null)<br>
return false;<br>
ItemDefinition def = e.getDefinition();<br>
int id = e.getId();<br>
int amount = e.getAmount();<br>
int freeIndex = this.getFreeIndex();<br>
if (freeIndex == -1)<br>
return false;<br>
switch (type) {<br>
case ALWAYS_STACK:<br>
if (contains(id)) {<br>
int there = get(indexOf(id)).getAmount();<br>
int total = there + amount &gt; maxStack ? maxStack : there + amount;<br>
set(indexOf(id), new Item(id, total));<br>
} else {<br>
if (getFreeSlots() == 0)<br>
return false;<br>
data[freeIndex] = new Item(id, amount &gt; maxStack ? maxStack : amount);<br>
}<br>
refresh();<br>
return true;<br>
case AVAILABLE_STACK:<br>
if (def.isStackable()) {<br>
if (contains(id)) {<br>
int there = get(indexOf(id)).getAmount();<br>
int total = there + amount &gt; maxStack ? maxStack : there + amount;<br>
set(indexOf(id), new Item(id, total));<br>
} else {<br>
if (getFreeSlots() == 0)<br>
return false;<br>
data[freeIndex] = new Item(id, amount &gt; maxStack ? maxStack : amount);<br>
}<br>
refresh();<br>
} else {<br>
if (getFreeSlots() == 0)<br>
return false;<br>
for (int i = 0; i &lt; amount; i++) {<br>
freeIndex = this.getFreeIndex();<br>
if (freeIndex != -1) {<br>
data[freeIndex] = new Item(id, 1);<br>
} else return false;<br>
}<br>
refresh();<br>
}<br>
return true;<br>
case NEVER_STACK:<br>
if (getFreeSlots() == 0)<br>
return false;<br>
for (int i = 0; i &lt; amount; i++) {<br>
freeIndex = this.getFreeIndex();<br>
if (freeIndex != -1) {<br>
data[freeIndex] = new Item(id, 1);<br>
} else return false;<br>
}<br>
refresh();<br>
return true;<br>
}<br>
return false;<br>
}</p>
<p>public boolean insert(int index, Item element) {<br>
if (getFreeSlots() == 0)<br>
return false;<br>
Item[] items = Arrays.copyOf(data, data.length);<br>
for (int i = index + 1; i &lt; capacity; i++)<br>
set(i, items[i - 1]);<br>
data[index] = element;<br>
refresh();<br>
return true;<br>
}</p>
<p><a class="mention" href="/u/override">@Override</a><br>
public boolean addAll(Collection&lt;? extends E&gt; c) {<br>
for (Item item : c)<br>
if (item != null &amp;&amp; !add(item))<br>
return false;<br>
return true;<br>
}</p>
<p>public boolean addAll(int index, Collection&lt;? extends E&gt; c) {<br>
if (getFreeSlots() &gt; 0) {<br>
c.stream().forEach(n -&gt; add(n));<br>
return true;<br>
}<br>
return false;<br>
}</p>
<p><a class="mention" href="/u/override">@Override</a><br>
public void clear() {<br>
for (int i = 0; i &lt; capacity; i++)<br>
data[i] = null;<br>
}</p>
<p>public boolean contains(Object…objects) {<br>
for (Object o : objects)<br>
if (!contains(o))<br>
return false;<br>
return true;<br>
}</p>
<p><a class="mention" href="/u/override">@Override</a><br>
public boolean contains(Object o) {<br>
if (o instanceof Integer &amp;&amp; ((Integer) o) == -1)<br>
return true;<br>
return indexOf(o) != -1;<br>
}</p>
<p><a class="mention" href="/u/override">@Override</a><br>
public boolean containsAll(Collection&lt;?&gt; c) {<br>
for (Object object : c)<br>
if (!contains(object)) return false;<br>
return true;<br>
}</p>
<p><span class="mention">@SuppressWarnings</span>(“unchecked”)<br>
public E get(int index) {<br>
return (E) data[index];<br>
}</p>
<p>public int indexOf(Object o) {<br>
if (o instanceof Item) {<br>
for (int i = 0; i &lt; capacity; i++)<br>
if (data[i] != null &amp;&amp; data[i].equals(o))<br>
return i;<br>
} else if (o instanceof Integer) {<br>
Integer itemId = (Integer) o;<br>
for (int i = 0; i &lt; capacity; i++)<br>
if (data[i] != null &amp;&amp; data[i].getId() == itemId)<br>
return i;<br>
}<br>
return -1;<br>
}</p>
<p><a class="mention" href="/u/override">@Override</a><br>
public boolean isEmpty() {<br>
return size() == 0;<br>
}</p>
<p><a class="mention" href="/u/override">@Override</a><br>
public Iterator iterator() {<br>
return new Iterator() {<br>
int index;<br>
<a class="mention" href="/u/override">@Override</a><br>
public boolean hasNext() {<br>
return index &lt; capacity;<br>
}</p>
<pre><code> 	@Override @SuppressWarnings("unchecked")
 	public E next() {
 		return (E) data[index++];
 	}
 };
</code></pre>
<p>}</p>
<p>public int lastIndexOf(Object o) {<br>
for (int i = capacity - 1; i &gt;= 0; i–)<br>
if (data[i] != null &amp;&amp; data[i].equals(o))<br>
return i;<br>
return -1;<br>
}</p>
<p><a class="mention" href="/u/override">@Override</a><br>
public boolean remove(Object o) {<br>
if (contains(o)) {<br>
int index = indexOf(o);<br>
Item item = data[index];<br>
boolean is_item = o instanceof Item;<br>
ItemDefinition def = item.getDefinition();<br>
switch (type) {<br>
case ALWAYS_STACK:<br>
if (is_item) {<br>
Item it = (Item) o;<br>
item.setAmount(item.getAmount() - it.getAmount());<br>
if (item.getAmount() &lt; minStack)<br>
data[index] = null;<br>
} else data[index] = null;<br>
refresh();<br>
return true;<br>
case AVAILABLE_STACK:<br>
if (def.isStackable()) {<br>
if (is_item) {<br>
Item it = (Item) o;<br>
item.setAmount(item.getAmount() - it.getAmount());<br>
if (item.getAmount() &lt; minStack)<br>
data[index] = null;<br>
} else data[index] = null;<br>
} else {<br>
if (is_item) {<br>
Item it = (Item) o;<br>
for (int i = 0; i &lt; it.getAmount(); i++) {<br>
int index_2 = indexOf(it.getId());<br>
if (index_2 != -1)<br>
data[index_2] = null;<br>
else return false;<br>
}<br>
} else {<br>
data[index] = null;<br>
}<br>
}<br>
refresh();<br>
return true;<br>
case NEVER_STACK:<br>
if (is_item) {<br>
Item it = (Item) o;<br>
for (int i = 0; i &lt; it.getAmount(); i++) {<br>
int index_2 = indexOf(it.getId());<br>
if (index_2 != -1)<br>
data[index_2] = null;<br>
else return false;<br>
}<br>
} else {<br>
data[index] = null;<br>
}<br>
refresh();<br>
return true;<br>
}<br>
return false;<br>
}<br>
return false;<br>
}</p>
<p><span class="mention">@SuppressWarnings</span>(“unchecked”)<br>
public E remove(int index) {<br>
if (index == -1)<br>
throw new IllegalArgumentException("Value less than 0: "+index);<br>
return (E) data[index];<br>
}</p>
<p><a class="mention" href="/u/override">@Override</a><br>
public boolean removeAll(Collection&lt;?&gt; c) {<br>
for (Object item : c)<br>
if (!remove(item))<br>
return false;<br>
return true;<br>
}</p>
<p><a class="mention" href="/u/override">@Override</a><br>
public boolean retainAll(Collection&lt;?&gt; c) {<br>
c.stream().filter(n -&gt; !contains(n)).forEach(n -&gt; remove(n));<br>
return this.containsAll©;<br>
}</p>
<p><span class="mention">@SuppressWarnings</span>(“unchecked”)<br>
public E set(int index, Item element) {<br>
return (E) (data[index] = element);<br>
}</p>
<p>public int getFreeIndex() {<br>
for (int i = 0; i &lt; capacity; i++)<br>
if (data[i] == null)<br>
return i;<br>
return -1;<br>
}</p>
<p>public int getFreeSlots() {<br>
return capacity - size();<br>
}</p>
<p>public void shift() {<br>
ArrayList shifted = new ArrayList();<br>
Arrays.asList(data).stream().filter(n -&gt; n != null).forEach(n -&gt; shifted.add(n));<br>
this.data = shifted.toArray(new Item[capacity]);<br>
}</p>
<p>public void shuffle() {<br>
Collections.shuffle(Arrays.asList(data));<br>
}</p>
<p>public int amountOf(int itemId) {<br>
int amount = 0;<br>
for (int i = 0; i &lt; capacity; i++)<br>
if (data[i] != null &amp;&amp; data[i].getId() == itemId)<br>
amount += data[i].getAmount();<br>
return amount;<br>
}</p>
<p><a class="mention" href="/u/override">@Override</a><br>
public int size() {<br>
int size = 0;<br>
for (int i = 0; i &lt; capacity; i++)<br>
if (data[i] != null) size++;<br>
return size;<br>
}</p>
<p><a class="mention" href="/u/override">@Override</a><br>
public Object[] toArray() {<br>
return data;<br>
}</p>
<p><a class="mention" href="/u/override">@Override</a> <span class="mention">@SuppressWarnings</span>(“unchecked”)<br>
public  T[] toArray(T[] a) {<br>
return (T[]) Arrays.copyOf(data, size(), a.getClass());<br>
}</p>
<p>public int getMaxStack() {<br>
return maxStack;<br>
}</p>
<p>public void setMaxStack(int maxStack) {<br>
this.maxStack = maxStack;<br>
}</p>
<p>public int getMinStack() {<br>
return minStack;<br>
}</p>
<p>public void setMinStack(int minStack) {<br>
this.minStack = minStack;<br>
}</p>
<p>public Type getType() {<br>
return type;<br>
}</p>
<p>public void setType(Type type) {<br>
this.type = type;<br>
}</p>
<p>public int getCapacity() {<br>
return capacity;<br>
}<br>
}[/code]</p>
</li>
</ul>
<p>Item.java</p>
<pre><code class="lang-auto">/**
 * @author Albert Beaupre
 */
public class Item implements Comparable&lt;Item&gt; {

	private int id;
	private int amount;

	public Item(int id) {
		this.id = id;
		this.amount = 1;
	}

	public Item(int id, int amount) {
		this.id = id;
		this.amount = amount;
	}

	public Item(Item item) {
		this.id = item.getId();
		this.amount = item.getAmount();
	}

	public ItemDefinition getDefinition() {
		return ItemDefinition.forId(id);
	}

	public int getAmount() {
		return amount;
	}

	public void setItemId(int itemId) {
		this.id = itemId;
	}

	public int getId() {
		return id;
	}

	public void setAmount(int amount) {
		this.amount = amount;
	}

	@Override
	public String toString() {
		return "id="+id+", amount="+amount;
	}

	@Override
	public boolean equals(Object o) {
		if (o instanceof Item) {
			Item item = (Item) o;
			return item.getId() == id;
		} else if (o instanceof Integer)
			return ((Integer) o) == id;
		return false;
	}

	@Override
	public int compareTo(Item item) {
		return this.getAmount() - item.getAmount();
	}
}</code></pre>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/container-system-any-revision/545717/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/container-system-any-revision/545717/1</link>
        <pubDate>Thu, 07 Aug 2014 02:59:17 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-545717-1</guid>
        <source url="https://forum.moparisthebest.com/t/container-system-any-revision/545717.rss">Container System Any Revision</source>
      </item>
  </channel>
</rss>
