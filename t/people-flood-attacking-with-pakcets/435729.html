<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/people-flood-attacking-with-pakcets/435729 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Aug 2019 12:45:02 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>People flood attacking with pakcets - Runescape - moparisthebest.com</title>
    <meta name="description" content="hey everyone i was wondering if you could help me out basically.  ok so i was wondering how to i guess it would be mirror packets away from the server that are marked as suspicious. many people use this to DOS a server a&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="435729.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;People flood attacking with pakcets&#39;" href="435729.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/people-flood-attacking-with-pakcets/435729" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/people-flood-attacking-with-pakcets/435729" />
<meta property="og:title" content="People flood attacking with pakcets" />
<meta name="twitter:title" content="People flood attacking with pakcets" />
<meta property="og:description" content="hey everyone i was wondering if you could help me out basically.  ok so i was wondering how to i guess it would be mirror packets away from the server that are marked as suspicious. many people use this to DOS a server and time it out so basically there cannot be any connections made.  So if you could guide how to (mark)know when someone is sending these packets to mirror them away or to completly disconnect the ip they are coming from. thanks alot for looking guys üòÉ" />
<meta name="twitter:description" content="hey everyone i was wondering if you could help me out basically.  ok so i was wondering how to i guess it would be mirror packets away from the server that are marked as suspicious. many people use this to DOS a server and time it out so basically there cannot be any connections made.  So if you could guide how to (mark)know when someone is sending these packets to mirror them away or to completly disconnect the ip they are coming from. thanks alot for looking guys üòÉ" />
<meta property="article:published_time" content="2012-03-09T15:01:16+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="435729.html">People flood attacking with pakcets</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Vibes.html'><span itemprop='name'>Vibes</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-03-09T15:01:16Z'>
            <time itemprop='dateModified' datetime='2016-08-02T16:27:52Z' class='post-time'>
              August 2, 2016,  4:27pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>hey everyone i was wondering if you could help me out basically.  ok so i was wondering how to i guess it would be mirror packets away from the server that are marked as suspicious. many people use this to DOS a server and time it out so basically there cannot be any connections made.  So if you could guide how to (mark)know when someone is sending these packets to mirror them away or to completly disconnect the ip they are coming from. thanks alot for looking guys <img src="../../images/emoji/twitter/smileyae52.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"></p>
      </div>

      <meta itemprop='headline' content='People flood attacking with pakcets'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/CodeForFame.html'><span itemprop='name'>CodeForFame</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-03-09T16:03:02Z'>
            <time itemprop='dateModified' datetime='2016-08-02T16:27:54Z' class='post-time'>
              August 2, 2016,  4:27pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Look at the Mopar Classic source for a somewhat reasonable method to filter packets.</p>
<p>Here is the main class:<br>
<a href="https://github.com/Lothy/MoparClassic/blob/pre-beta/GameServer/src/org/moparscape/msc/gs/connection/filter/PacketThrottler.java" class="onebox" target="_blank" rel="nofollow noopener">https://github.com/Lothy/MoparClassic/blob/pre-beta/GameServer/src/org/moparscape/msc/gs/connection/filter/PacketThrottler.java</a></p>
<p>[quote=‚ÄúRLN, post:1, topic:435731‚Äù]Flag them however you please, then use MINA‚Äôs <a href="http://mina.apache.org/report/trunk/apidocs/org/apache/mina/filter/firewall/ConnectionThrottleFilter.html" data-bbcode="true" rel="nofollow noopener">ConnectionThrottleFilter</a>[/quote]Using the ConnectionThrottleFilter just helps with people spamming connections, not actual packets once they‚Äôre connected.  Granted, you could override the proper method, but I don‚Äôt see why you would when you can decouple the two distinct filters.</p>
<p>Also, I believe that the version of MINA that is being used doesn‚Äôt have that class (or even package).</p>
      </div>

      <meta itemprop='headline' content='People flood attacking with pakcets'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/CodeForFame.html'><span itemprop='name'>CodeForFame</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-03-09T17:27:21Z'>
            <time itemprop='dateModified' datetime='2016-08-02T16:27:58Z' class='post-time'>
              August 2, 2016,  4:27pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=‚ÄúRLN, post:2, topic:435731‚Äù][quote author=CodeForFame link=topic=538449.msg3939538#msg3939538 date=1331308982]</p>
<p>[quote author=RLN link=topic=538449.msg3939537#msg3939537 date=1331308931]<br>
Flag them however you please, then use MINA‚Äôs <a href="http://mina.apache.org/report/trunk/apidocs/org/apache/mina/filter/firewall/ConnectionThrottleFilter.html" data-bbcode="true" rel="nofollow noopener">ConnectionThrottleFilter</a><br>
[/quote]Using the ConnectionThrottleFilter just helps with people spamming connections, not actual packets once they‚Äôre connected.  Granted, you could override the proper method, but I don‚Äôt see why you would when you can decouple the two distinct filters.</p>
<p>Also, I believe that the version of MINA that is being used doesn‚Äôt have that class (or even package).<br>
[/quote]Given that you disconnect the player once they‚Äôre flagged, the throttle filter will take care of the rest‚Ä¶And yeah, I recall now I had to update MINA in order to implement it[/quote]That doesn‚Äôt address the issue of two different things being tightly coupled for no good reason.</p>
<p>The issue arises when someone breaks the threshold, and they‚Äôre IP banned even though they‚Äôve done nothing.  But just disconnecting them can be abused to their advantage.  Also, IP banning someone for exceeding the threshold for some small interval isn‚Äôt really a sufficient deterrent to stop them from using it as a way to ‚Äòx log‚Äô.</p>
      </div>

      <meta itemprop='headline' content='People flood attacking with pakcets'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/CodeForFame.html'><span itemprop='name'>CodeForFame</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-03-09T20:55:38Z'>
            <time itemprop='dateModified' datetime='2016-08-02T16:28:05Z' class='post-time'>
              August 2, 2016,  4:28pm
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=‚ÄúRLN, post:3, topic:435731‚Äù][quote author=CodeForFame link=topic=538449.msg3939602#msg3939602 date=1331314041]</p>
<p>[quote author=RLN link=topic=538449.msg3939584#msg3939584 date=1331312553]</p>
<p>[quote author=CodeForFame link=topic=538449.msg3939538#msg3939538 date=1331308982]</p>
<p>[quote author=RLN link=topic=538449.msg3939537#msg3939537 date=1331308931]<br>
Flag them however you please, then use MINA‚Äôs <a href="http://mina.apache.org/report/trunk/apidocs/org/apache/mina/filter/firewall/ConnectionThrottleFilter.html" data-bbcode="true" rel="nofollow noopener">ConnectionThrottleFilter</a><br>
[/quote]Using the ConnectionThrottleFilter just helps with people spamming connections, not actual packets once they‚Äôre connected.  Granted, you could override the proper method, but I don‚Äôt see why you would when you can decouple the two distinct filters.</p>
<p>Also, I believe that the version of MINA that is being used doesn‚Äôt have that class (or even package).<br>
[/quote]Given that you disconnect the player once they‚Äôre flagged, the throttle filter will take care of the rest‚Ä¶And yeah, I recall now I had to update MINA in order to implement it<br>
[/quote]That doesn‚Äôt address the issue of two different things being tightly coupled for no good reason.</p>
<p>The issue arises when someone breaks the threshold, and they‚Äôre IP banned even though they‚Äôve done nothing.  But just disconnecting them can be abused to their advantage.  Also, IP banning someone for exceeding the threshold for some small interval isn‚Äôt really a sufficient deterrent to stop them from using it as a way to ‚Äòx log‚Äô.<br>
[/quote]That all depends on how you decide to flag the person‚Ä¶ and whether you have graduated levels of severity, ie. this person has already been disconnected 3 times, if you have a base time of 10 minutes, the player would be throttled for 30 min. Of course you want to write it in such a way that they‚Äôre only getting flagged for purposely packet spamming.</p>
<p>For the x-logging‚Ä¶ when they get flagged the connection should end and the player should still remain logged in but given a standard time-out. And of course you‚Äôd restrict getting logged out while in combat.</p>
<p>And I don‚Äôt see your point about having ‚Äúno good reason‚Äù for the two modules to be tightly coupled. It‚Äôs an important part of the server, given the culture‚Ä¶ And personally I‚Äôd want to have a nice degree of interoperability between the throttle (or any other security related shit on the filter chain) and game engine‚Ä¶[/quote]<br>
Which is why there should be a service that deals with bans, so you can persist bans, ban for other reasons, and use it throughout the rest of the application.</p>
<p>Coupling the ‚Äòpacket spam detection‚Äô, and the ‚Äòconnection spam detection‚Äô is silly.  Especially when you couple both of them directly with the  code that is actually doing the banning.</p>
<p>In short, it‚Äôs just not as flexible as it should be.</p>
      </div>

      <meta itemprop='headline' content='People flood attacking with pakcets'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/CodeForFame.html'><span itemprop='name'>CodeForFame</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-03-09T23:49:25Z'>
            <time itemprop='dateModified' datetime='2016-08-02T16:28:18Z' class='post-time'>
              August 2, 2016,  4:28pm
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=‚ÄúRLN, post:4, topic:435731‚Äù][quote author=CodeForFame link=topic=538449.msg3939751#msg3939751 date=1331326538]</p>
<p>[quote author=RLN link=topic=538449.msg3939647#msg3939647 date=1331317288]</p>
<p>[quote author=CodeForFame link=topic=538449.msg3939602#msg3939602 date=1331314041]</p>
<p>[quote author=RLN link=topic=538449.msg3939584#msg3939584 date=1331312553]</p>
<p>[quote author=CodeForFame link=topic=538449.msg3939538#msg3939538 date=1331308982]</p>
<aside class="quote">
<blockquote>
<p>Flag them however you please, then use MINA‚Äôs <a href="http://mina.apache.org/report/trunk/apidocs/org/apache/mina/filter/firewall/ConnectionThrottleFilter.html" data-bbcode="true" rel="nofollow noopener">ConnectionThrottleFilter</a><br>
[/quote]Using the ConnectionThrottleFilter just helps with people spamming connections, not actual packets once they‚Äôre connected.  Granted, you could override the proper method, but I don‚Äôt see why you would when you can decouple the two distinct filters.</p>
<p>Also, I believe that the version of MINA that is being used doesn‚Äôt have that class (or even package).<br>
[/quote]Given that you disconnect the player once they‚Äôre flagged, the throttle filter will take care of the rest‚Ä¶And yeah, I recall now I had to update MINA in order to implement it<br>
[/quote]That doesn‚Äôt address the issue of two different things being tightly coupled for no good reason.</p>
<p>The issue arises when someone breaks the threshold, and they‚Äôre IP banned even though they‚Äôve done nothing.  But just disconnecting them can be abused to their advantage.  Also, IP banning someone for exceeding the threshold for some small interval isn‚Äôt really a sufficient deterrent to stop them from using it as a way to ‚Äòx log‚Äô.<br>
[/quote]That all depends on how you decide to flag the person‚Ä¶ and whether you have graduated levels of severity, ie. this person has already been disconnected 3 times, if you have a base time of 10 minutes, the player would be throttled for 30 min. Of course you want to write it in such a way that they‚Äôre only getting flagged for purposely packet spamming.</p>
<p>For the x-logging‚Ä¶ when they get flagged the connection should end and the player should still remain logged in but given a standard time-out. And of course you‚Äôd restrict getting logged out while in combat.</p>
<p>And I don‚Äôt see your point about having ‚Äúno good reason‚Äù for the two modules to be tightly coupled. It‚Äôs an important part of the server, given the culture‚Ä¶ And personally I‚Äôd want to have a nice degree of interoperability between the throttle (or any other security related shit on the filter chain) and game engine‚Ä¶</p>
</blockquote>
</aside>
<p>Which is why there should be a service that deals with bans, so you can persist bans, ban for other reasons, and use it throughout the rest of the application.</p>
<p>Coupling the ‚Äòpacket spam detection‚Äô, and the ‚Äòconnection spam detection‚Äô is silly.  Especially when you couple both of them directly with the  code that is actually doing the banning.</p>
<p>In short, it‚Äôs just not as flexible as it should be.<br>
[/quote]The system I proposed only requires it to be loosely coupled in the first place, since you can just keep some metrics (how many times they‚Äôve packet spammed previously, packets per minute, packets per some given time frame, number of packets malformed in a given time frame, etc.) and the filter will only be dependent on that data - which the game engine will be keeping track of and using for its own purposes anyway. The point being, accurate detection of packet spammers instead of just a ‚Äúblind‚Äù approach. Once they‚Äôve been identified, disconnected, and throttled- the attack is not a threat anymore.</p>
<p>I don‚Äôt see a need for another service when the throttle filter really doesn‚Äôt have to be complex at all to to be very powerful. It‚Äôs going to use a map anyway, which saves the added complexity of querying another service.[/quote]This doesn‚Äôt deal with persisting bans for constant offenders, or bans for any reason.  With your system, it will require multiple ‚Äòsystems‚Äô for banning, this is just silly.</p>
<p>I didn‚Äôt mean service as a separate application or anything like that, I meant it as something that just performs a certain task; like when you pay someone to provide a service to you.  Here is an example:<br>
<a href="https://github.com/Lothy/MoparClassic/blob/pre-beta/GameServer/src/org/moparscape/msc/gs/connection/filter/IPBanManager.scala" class="onebox" target="_blank" rel="nofollow noopener">https://github.com/Lothy/MoparClassic/blob/pre-beta/GameServer/src/org/moparscape/msc/gs/connection/filter/IPBanManager.scala</a></p>
<p>Sorry that it‚Äôs not in Java, but you should be able to understand what‚Äôs going on.</p>
<p>It‚Äôs simple, decoupled, and flexible.  Note: In Scala you can define multiple classes (public/private/etc.) within the same file, so it‚Äôs not as tightly coupled as it would be considered if it were in Java.  Also, it has some things that weren‚Äôt cleanly re-factored (mainly the idea of having a Blocker trait).</p>
      </div>

      <meta itemprop='headline' content='People flood attacking with pakcets'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/CodeForFame.html'><span itemprop='name'>CodeForFame</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-03-10T18:11:16Z'>
            <time itemprop='dateModified' datetime='2016-08-02T16:29:08Z' class='post-time'>
              August 2, 2016,  4:29pm
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=‚ÄúRLN, post:5, topic:435731‚Äù][quote author=CodeForFame link=topic=538449.msg3939944#msg3939944 date=1331336965]</p>
<p>[quote author=RLN link=topic=538449.msg3939837#msg3939837 date=1331329959]</p>
<p>[quote author=CodeForFame link=topic=538449.msg3939751#msg3939751 date=1331326538]</p>
<p>[quote author=RLN link=topic=538449.msg3939647#msg3939647 date=1331317288]</p>
<p>[quote author=CodeForFame link=topic=538449.msg3939602#msg3939602 date=1331314041]</p>
<p>[quote author=RLN link=topic=538449.msg3939584#msg3939584 date=1331312553]</p>
<p>[quote author=CodeForFame link=topic=538449.msg3939538#msg3939538 date=1331308982]</p>
<aside class="quote">
<blockquote>
<p>Flag them however you please, then use MINA‚Äôs <a href="http://mina.apache.org/report/trunk/apidocs/org/apache/mina/filter/firewall/ConnectionThrottleFilter.html" data-bbcode="true" rel="nofollow noopener">ConnectionThrottleFilter</a><br>
[/quote]Using the ConnectionThrottleFilter just helps with people spamming connections, not actual packets once they‚Äôre connected.  Granted, you could override the proper method, but I don‚Äôt see why you would when you can decouple the two distinct filters.</p>
<p>Also, I believe that the version of MINA that is being used doesn‚Äôt have that class (or even package).<br>
[/quote]Given that you disconnect the player once they‚Äôre flagged, the throttle filter will take care of the rest‚Ä¶And yeah, I recall now I had to update MINA in order to implement it<br>
[/quote]That doesn‚Äôt address the issue of two different things being tightly coupled for no good reason.</p>
<p>The issue arises when someone breaks the threshold, and they‚Äôre IP banned even though they‚Äôve done nothing.  But just disconnecting them can be abused to their advantage.  Also, IP banning someone for exceeding the threshold for some small interval isn‚Äôt really a sufficient deterrent to stop them from using it as a way to ‚Äòx log‚Äô.<br>
[/quote]That all depends on how you decide to flag the person‚Ä¶ and whether you have graduated levels of severity, ie. this person has already been disconnected 3 times, if you have a base time of 10 minutes, the player would be throttled for 30 min. Of course you want to write it in such a way that they‚Äôre only getting flagged for purposely packet spamming.</p>
<p>For the x-logging‚Ä¶ when they get flagged the connection should end and the player should still remain logged in but given a standard time-out. And of course you‚Äôd restrict getting logged out while in combat.</p>
<p>And I don‚Äôt see your point about having ‚Äúno good reason‚Äù for the two modules to be tightly coupled. It‚Äôs an important part of the server, given the culture‚Ä¶ And personally I‚Äôd want to have a nice degree of interoperability between the throttle (or any other security related shit on the filter chain) and game engine‚Ä¶</p>
</blockquote>
</aside>
<p>Which is why there should be a service that deals with bans, so you can persist bans, ban for other reasons, and use it throughout the rest of the application.</p>
<p>Coupling the ‚Äòpacket spam detection‚Äô, and the ‚Äòconnection spam detection‚Äô is silly.  Especially when you couple both of them directly with the  code that is actually doing the banning.</p>
<p>In short, it‚Äôs just not as flexible as it should be.<br>
[/quote]The system I proposed only requires it to be loosely coupled in the first place, since you can just keep some metrics (how many times they‚Äôve packet spammed previously, packets per minute, packets per some given time frame, number of packets malformed in a given time frame, etc.) and the filter will only be dependent on that data - which the game engine will be keeping track of and using for its own purposes anyway. The point being, accurate detection of packet spammers instead of just a ‚Äúblind‚Äù approach. Once they‚Äôve been identified, disconnected, and throttled- the attack is not a threat anymore.</p>
<p>I don‚Äôt see a need for another service when the throttle filter really doesn‚Äôt have to be complex at all to to be very powerful. It‚Äôs going to use a map anyway, which saves the added complexity of querying another service.<br>
[/quote]This doesn‚Äôt deal with persisting bans for constant offenders, or bans for any reason.  With your system, it will require multiple ‚Äòsystems‚Äô for banning, this is just silly.</p>
<p>I didn‚Äôt mean service as a separate application or anything like that, I meant it as something that just performs a certain task; like when you pay someone to provide a service to you.  Here is an example:<br>
<a href="https://github.com/Lothy/MoparClassic/blob/pre-beta/GameServer/src/org/moparscape/msc/gs/connection/filter/IPBanManager.scala" class="onebox" target="_blank" rel="nofollow noopener">https://github.com/Lothy/MoparClassic/blob/pre-beta/GameServer/src/org/moparscape/msc/gs/connection/filter/IPBanManager.scala</a></p>
<p>Sorry that it‚Äôs not in Java, but you should be able to understand what‚Äôs going on.</p>
<p>It‚Äôs simple, decoupled, and flexible.  Note: In Scala you can define multiple classes (public/private/etc.) within the same file, so it‚Äôs not as tightly coupled as it would be considered if it were in Java.  Also, it has some things that weren‚Äôt cleanly re-factored (mainly the idea of having a Blocker trait).<br>
[/quote]It doesn‚Äôt need to persist bans for other reasons - the db has this information. A user being throttled is not equivalent to being banned.[/quote]Yes it is‚Ä¶  It‚Äôs a temporary ban.</p>
      </div>

      <meta itemprop='headline' content='People flood attacking with pakcets'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Vibes.html'><span itemprop='name'>Vibes</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-03-10T20:32:36Z'>
            <time itemprop='dateModified' datetime='2016-08-02T16:29:18Z' class='post-time'>
              August 2, 2016,  4:29pm
            </time>
        <span itemprop='position'>#7</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>im lost lol im not even gonna read what you guys wrote back and forth lol. is there anything that works and is helpful?</p>
      </div>

      <meta itemprop='headline' content='People flood attacking with pakcets'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/CodeForFame.html'><span itemprop='name'>CodeForFame</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-03-10T21:21:52Z'>
            <time itemprop='dateModified' datetime='2016-08-02T16:29:22Z' class='post-time'>
              August 2, 2016,  4:29pm
            </time>
        <span itemprop='position'>#8</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="7" data-topic="435729">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/vibes/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> Vibes:</div>
<blockquote>
<p>im lost lol im not even gonna read what you guys wrote back and forth lol. is there anything that works and is helpful?</p>
</blockquote>
</aside>
<p>Yes‚Ä¶<br>
<a href="https://github.com/Lothy/MoparClassic/blob/pre-beta/GameServer/src/org/moparscape/msc/gs/connection/filter/PacketThrottler.java" class="onebox" target="_blank" rel="nofollow noopener">https://github.com/Lothy/MoparClassic/blob/pre-beta/GameServer/src/org/moparscape/msc/gs/connection/filter/PacketThrottler.java</a></p>
      </div>

      <meta itemprop='headline' content='People flood attacking with pakcets'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/verse905.html'><span itemprop='name'>verse905</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-03-11T00:59:15Z'>
            <time itemprop='dateModified' datetime='2016-08-02T16:29:40Z' class='post-time'>
              August 2, 2016,  4:29pm
            </time>
        <span itemprop='position'>#9</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>sounds like RLN N CODE are having a nerd war</p>
      </div>

      <meta itemprop='headline' content='People flood attacking with pakcets'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Rodgerwilco.html'><span itemprop='name'>Rodgerwilco</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-03-11T01:25:13Z'>
            <time itemprop='dateModified' datetime='2016-08-02T16:29:49Z' class='post-time'>
              August 2, 2016,  4:29pm
            </time>
        <span itemprop='position'>#10</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="9" data-topic="435729">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/verse905/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> verse905:</div>
<blockquote>
<p>sounds like RLN N CODE are having a <span class="bbcode-b">nerd</span> war</p>
</blockquote>
</aside>
<p>Using the nerd word is childish  :rolleyes:</p>
      </div>

      <meta itemprop='headline' content='People flood attacking with pakcets'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/CodeForFame.html'><span itemprop='name'>CodeForFame</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-03-11T01:43:34Z'>
            <time itemprop='dateModified' datetime='2016-08-02T16:29:53Z' class='post-time'>
              August 2, 2016,  4:29pm
            </time>
        <span itemprop='position'>#11</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=‚ÄúRLN, post:6, topic:435731‚Äù][quote author=CodeForFame link=topic=538449.msg3940692#msg3940692 date=1331403076]</p>
<p>[quote author=RLN link=topic=538449.msg3940263#msg3940263 date=1331363886]</p>
<p>[quote author=CodeForFame link=topic=538449.msg3939944#msg3939944 date=1331336965]</p>
<p>[quote author=RLN link=topic=538449.msg3939837#msg3939837 date=1331329959]</p>
<p>[quote author=CodeForFame link=topic=538449.msg3939751#msg3939751 date=1331326538]</p>
<p>[quote author=RLN link=topic=538449.msg3939647#msg3939647 date=1331317288]</p>
<p>[quote author=CodeForFame link=topic=538449.msg3939602#msg3939602 date=1331314041]</p>
<p>[quote author=RLN link=topic=538449.msg3939584#msg3939584 date=1331312553]</p>
<p>[quote author=CodeForFame link=topic=538449.msg3939538#msg3939538 date=1331308982]</p>
<aside class="quote">
<blockquote>
<p>Flag them however you please, then use MINA‚Äôs <a href="http://mina.apache.org/report/trunk/apidocs/org/apache/mina/filter/firewall/ConnectionThrottleFilter.html" data-bbcode="true" rel="nofollow noopener">ConnectionThrottleFilter</a><br>
[/quote]Using the ConnectionThrottleFilter just helps with people spamming connections, not actual packets once they‚Äôre connected.  Granted, you could override the proper method, but I don‚Äôt see why you would when you can decouple the two distinct filters.</p>
<p>Also, I believe that the version of MINA that is being used doesn‚Äôt have that class (or even package).<br>
[/quote]Given that you disconnect the player once they‚Äôre flagged, the throttle filter will take care of the rest‚Ä¶And yeah, I recall now I had to update MINA in order to implement it<br>
[/quote]That doesn‚Äôt address the issue of two different things being tightly coupled for no good reason.</p>
<p>The issue arises when someone breaks the threshold, and they‚Äôre IP banned even though they‚Äôve done nothing.  But just disconnecting them can be abused to their advantage.  Also, IP banning someone for exceeding the threshold for some small interval isn‚Äôt really a sufficient deterrent to stop them from using it as a way to ‚Äòx log‚Äô.<br>
[/quote]That all depends on how you decide to flag the person‚Ä¶ and whether you have graduated levels of severity, ie. this person has already been disconnected 3 times, if you have a base time of 10 minutes, the player would be throttled for 30 min. Of course you want to write it in such a way that they‚Äôre only getting flagged for purposely packet spamming.</p>
<p>For the x-logging‚Ä¶ when they get flagged the connection should end and the player should still remain logged in but given a standard time-out. And of course you‚Äôd restrict getting logged out while in combat.</p>
<p>And I don‚Äôt see your point about having ‚Äúno good reason‚Äù for the two modules to be tightly coupled. It‚Äôs an important part of the server, given the culture‚Ä¶ And personally I‚Äôd want to have a nice degree of interoperability between the throttle (or any other security related shit on the filter chain) and game engine‚Ä¶</p>
</blockquote>
</aside>
<p>Which is why there should be a service that deals with bans, so you can persist bans, ban for other reasons, and use it throughout the rest of the application.</p>
<p>Coupling the ‚Äòpacket spam detection‚Äô, and the ‚Äòconnection spam detection‚Äô is silly.  Especially when you couple both of them directly with the  code that is actually doing the banning.</p>
<p>In short, it‚Äôs just not as flexible as it should be.<br>
[/quote]The system I proposed only requires it to be loosely coupled in the first place, since you can just keep some metrics (how many times they‚Äôve packet spammed previously, packets per minute, packets per some given time frame, number of packets malformed in a given time frame, etc.) and the filter will only be dependent on that data - which the game engine will be keeping track of and using for its own purposes anyway. The point being, accurate detection of packet spammers instead of just a ‚Äúblind‚Äù approach. Once they‚Äôve been identified, disconnected, and throttled- the attack is not a threat anymore.</p>
<p>I don‚Äôt see a need for another service when the throttle filter really doesn‚Äôt have to be complex at all to to be very powerful. It‚Äôs going to use a map anyway, which saves the added complexity of querying another service.<br>
[/quote]This doesn‚Äôt deal with persisting bans for constant offenders, or bans for any reason.  With your system, it will require multiple ‚Äòsystems‚Äô for banning, this is just silly.</p>
<p>I didn‚Äôt mean service as a separate application or anything like that, I meant it as something that just performs a certain task; like when you pay someone to provide a service to you.  Here is an example:<br>
<a href="https://github.com/Lothy/MoparClassic/blob/pre-beta/GameServer/src/org/moparscape/msc/gs/connection/filter/IPBanManager.scala" class="onebox" target="_blank" rel="nofollow noopener">https://github.com/Lothy/MoparClassic/blob/pre-beta/GameServer/src/org/moparscape/msc/gs/connection/filter/IPBanManager.scala</a></p>
<p>Sorry that it‚Äôs not in Java, but you should be able to understand what‚Äôs going on.</p>
<p>It‚Äôs simple, decoupled, and flexible.  Note: In Scala you can define multiple classes (public/private/etc.) within the same file, so it‚Äôs not as tightly coupled as it would be considered if it were in Java.  Also, it has some things that weren‚Äôt cleanly re-factored (mainly the idea of having a Blocker trait).<br>
[/quote]It doesn‚Äôt need to persist bans for other reasons - the db has this information. A user being throttled is not equivalent to being banned.<br>
[/quote]Yes it is‚Ä¶  It‚Äôs a temporary ban.<br>
[/quote]Which is accomplished by throttling the user, no?<br>
I do see your point though, your approach is definitely better design wise. But I think functionally if you have your throttle filter implementation as the second (or first if you‚Äôre not using the <a href="http://mina.apache.org/report/trunk/apidocs/org/apache/mina/filter/firewall/BlacklistFilter.html" data-bbcode="true" rel="nofollow noopener">BlackListFilter</a>) filter in your filter chain it‚Äôs better than having to process anything other than a check for the address/subnet in the map.[/quote]<br>
All types of banning/throttling should be represented the same way to the BlackListFilter.  This makes the logic a lot easier, and makes sense, because a ban is a ban.  No matter if it‚Äôs very short (throttled), temp (a few hours/days), or perm.</p>
<p>This is all that is needed to be done to check if someone is throttled/temp banned/banned is this:<br>
if (IPBanManager.isBlocked(host))</p>
<p>That is a lot simpler (in terms of LOC and speed) than keeping three collections, checking them, and dealing with the logic inside the BlackListFilter.</p>
<p>The connection filter (ConnectionFilter) is a BlackListFilter, and it is first.  After that is the PacketThrottler.</p>
<p><code>acceptor.getFilterChain().addFirst("packetthrottler", PacketThrottler.getInstance()); // Added as first.
acceptor.getFilterChain().addFirst("connectionfilter", new ConnectionFilter()); // Now it's added as first, which makes packetthrottler second.
</code></p>
      </div>

      <meta itemprop='headline' content='People flood attacking with pakcets'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/people-flood-attacking-with-pakcets/435729 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Aug 2019 12:45:03 GMT -->
</html>
