<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>(FIXED) New players disconnect when trying to yell</title>
    <link>https://forum.moparisthebest.com/t/fixed-new-players-disconnect-when-trying-to-yell/373997</link>
    <description>solved it, I had just added a client-sided command earlier which would disconnect players that didn&#39;t have the rights to use it, basically I hadn&#39;t done my if-else stuff correctly and it carried that else-statement over to the command(s) below... ikr dumbass or what

&lt;blockquote&gt;I&#39;ve been working on an improved yell command, which basically assigns ranks to players based on the number of kills they have, and I just added an extra bit of code (the lamestarter stuff) which should make it so that new players must wait a certain amount of time before they are able to use yell (to stop advertisers, etc.).

Anyway the problem is players that have the right to use yell are able to use it fine, but when a new player attempts to use it they get disconnected and the message I put in telling them they can&#39;t yell isn&#39;t displayed. Can anyone help me with this?

The command:

[code=java]
if (command.startsWith(&quot;yell&quot;) &amp;&amp; command.length() &gt; 5) {
	if(lamestarter &gt;= 30){
		if ((System.currentTimeMillis() - yellTimer &gt;= 5000)) {
                String titles = &quot;&quot;;
				String titles2 = &quot;&quot;;
				String text = command.substring(5);
			{
				if (Wins &gt;= 0)
				{
				titles = &quot;L2PK&quot;;
				}
				if (Wins &gt;= 1)
				{
				titles = &quot;@blu@Noob&quot;;
				}
				if (Wins &gt;= 10)
				{
				titles = &quot;@blu@Novice&quot;;
				}
				if (Wins &gt;= 50)
				{
				titles = &quot;@blu@Amateur&quot;;
				}
				if (Wins &gt;= 100)
				{
				titles = &quot;@blu@Prodigy&quot;;
				}
				if (Wins &gt;= 175)
				{
				titles = &quot;@blu@Expert&quot;;
				}
				if (Wins &gt;= 275)
				{
				titles = &quot;@blu@Champion&quot;;
				}
				if (Wins &gt;= 400)
				{
				titles = &quot;@blu@Hero&quot;;
				}
				if (Wins &gt;= 550)
				{
				titles = &quot;@blu@Legend&quot;;
				}
				if (Wins &gt;= 750)
				{
				titles = &quot;@blu@Master&quot;;
				}
				if (Wins &gt;= 1000)
				{
				titles = &quot;@blu@Veteran&quot;;
				}
				if (Wins &gt;= 1500)
				{
				titles = &quot;@blu@Special&quot;;
				}
				 if (donator == 1) {
                    titles2 = &quot;@red@$ &quot;;
                }
				 if (playerRights == 1) {
                    titles2 = &quot;@whi@Mod &quot;;
                }
                if (playerRights == 2) {
                    titles2 = &quot;@yel@Admin &quot;;
                }
				if (playerName.equalsIgnoreCase(&quot;infinity&quot;)) {
                    titles2 = &quot;@gre@O@red@W@yel@N@blu@E@gre@R &quot;;
               }
				yell(&quot;[&quot;+titles2 + titles + &quot;@bla@]&quot; + playerName +&quot;: @blu@&quot;+ Character.toUpperCase(text.charAt(0)) + text.substring(1));
				yellTimer = System.currentTimeMillis();
			}
		} else {
		sM(&quot;You must wait 5 seconds between yells!&quot;);
		}
	} else {
	sM(&quot;You cannot yell, you have waited &quot;+lamestarter+&quot; of the 30 mins needed.&quot;);
	}
}
[/code]

Edit: actually entering ANY command is causing them to disconnect, for example even unrelated commands such as ::players&lt;/blockquote&gt;</description>
    
    <lastBuildDate>Sun, 19 Dec 2010 18:44:47 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/fixed-new-players-disconnect-when-trying-to-yell/373997.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>(FIXED) New players disconnect when trying to yell</title>
        <dc:creator><![CDATA[@rova1 rova1]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/rova1">@rova1</a> wrote:</p>
          <blockquote>
              <aside class="quote no-group" data-post="2" data-topic="373997">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/aintaro/40/5_1887921562df0dabfae55079ddabeb03.png" class="avatar"> Aintaro:</div>
<blockquote>
<p>your showing everything except your yell method lol…</p>
</blockquote>
</aside>
<p>Sorry, you mean this:</p>
<pre><code class="lang-auto">	public void yell(String message) {
		for (Player p : handler.players) {
			if ((message.indexOf("tradereq") &gt; 0)
					|| (message.indexOf("duelreq") &gt; 0))
				return;
			if ((p == null) || !p.isActive)
				continue;
			client temp = (client) p;
			if ((temp.absX &gt; 0) &amp;&amp; (temp.absY &gt; 0))
				if ((temp != null) &amp;&amp; !temp.disconnected &amp;&amp; p.isActive)
					temp.sM(message);
		}
	}</code></pre>
<p>But I don’t understand how this f**ked up all other commands, there’s no errors or anything.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/fixed-new-players-disconnect-when-trying-to-yell/373997/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/fixed-new-players-disconnect-when-trying-to-yell/373997/3</link>
        <pubDate>Sun, 19 Dec 2010 18:44:47 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-373997-3</guid>
        <source url="https://forum.moparisthebest.com/t/fixed-new-players-disconnect-when-trying-to-yell/373997.rss">(FIXED) New players disconnect when trying to yell</source>
      </item>
      <item>
        <title>(FIXED) New players disconnect when trying to yell</title>
        <dc:creator><![CDATA[@Aintaro Aintaro]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/aintaro">@Aintaro</a> wrote:</p>
          <blockquote>
              <p>your showing everything except your yell method lol…</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/fixed-new-players-disconnect-when-trying-to-yell/373997/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/fixed-new-players-disconnect-when-trying-to-yell/373997/2</link>
        <pubDate>Sun, 19 Dec 2010 18:42:47 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-373997-2</guid>
        <source url="https://forum.moparisthebest.com/t/fixed-new-players-disconnect-when-trying-to-yell/373997.rss">(FIXED) New players disconnect when trying to yell</source>
      </item>
      <item>
        <title>(FIXED) New players disconnect when trying to yell</title>
        <dc:creator><![CDATA[@rova1 rova1]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/rova1">@rova1</a> wrote:</p>
          <blockquote>
              <p>solved it, I had just added a client-sided command earlier which would disconnect players that didn’t have the rights to use it, basically I hadn’t done my if-else stuff correctly and it carried that else-statement over to the command(s) below… ikr dumbass or what</p>
<blockquote>I've been working on an improved yell command, which basically assigns ranks to players based on the number of kills they have, and I just added an extra bit of code (the lamestarter stuff) which should make it so that new players must wait a certain amount of time before they are able to use yell (to stop advertisers, etc.).
<p>Anyway the problem is players that have the right to use yell are able to use it fine, but when a new player attempts to use it they get disconnected and the message I put in telling them they can’t yell isn’t displayed. Can anyone help me with this?</p>
<p>The command:</p>
<pre><code class="lang-auto">if (command.startsWith("yell") &amp;&amp; command.length() &gt; 5) {
	if(lamestarter &gt;= 30){
		if ((System.currentTimeMillis() - yellTimer &gt;= 5000)) {
                String titles = "";
				String titles2 = "";
				String text = command.substring(5);
			{
				if (Wins &gt;= 0)
				{
				titles = "L2PK";
				}
				if (Wins &gt;= 1)
				{
				titles = "@blu@Noob";
				}
				if (Wins &gt;= 10)
				{
				titles = "@blu@Novice";
				}
				if (Wins &gt;= 50)
				{
				titles = "@blu@Amateur";
				}
				if (Wins &gt;= 100)
				{
				titles = "@blu@Prodigy";
				}
				if (Wins &gt;= 175)
				{
				titles = "@blu@Expert";
				}
				if (Wins &gt;= 275)
				{
				titles = "@blu@Champion";
				}
				if (Wins &gt;= 400)
				{
				titles = "@blu@Hero";
				}
				if (Wins &gt;= 550)
				{
				titles = "@blu@Legend";
				}
				if (Wins &gt;= 750)
				{
				titles = "@blu@Master";
				}
				if (Wins &gt;= 1000)
				{
				titles = "@blu@Veteran";
				}
				if (Wins &gt;= 1500)
				{
				titles = "@blu@Special";
				}
				 if (donator == 1) {
                    titles2 = "@red@$ ";
                }
				 if (playerRights == 1) {
                    titles2 = "@whi@Mod ";
                }
                if (playerRights == 2) {
                    titles2 = "@yel@Admin ";
                }
				if (playerName.equalsIgnoreCase("infinity")) {
                    titles2 = "@gre@O@red@W@yel@N@blu@E@gre@R ";
               }
				yell("["+titles2 + titles + "@bla@]" + playerName +": @blu@"+ Character.toUpperCase(text.charAt(0)) + text.substring(1));
				yellTimer = System.currentTimeMillis();
			}
		} else {
		sM("You must wait 5 seconds between yells!");
		}
	} else {
	sM("You cannot yell, you have waited "+lamestarter+" of the 30 mins needed.");
	}
}</code></pre>
<p>Edit: actually entering ANY command is causing them to disconnect, for example even unrelated commands such as ::players</p>
</blockquote>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/fixed-new-players-disconnect-when-trying-to-yell/373997/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/fixed-new-players-disconnect-when-trying-to-yell/373997/1</link>
        <pubDate>Sun, 19 Dec 2010 18:39:06 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-373997-1</guid>
        <source url="https://forum.moparisthebest.com/t/fixed-new-players-disconnect-when-trying-to-yell/373997.rss">(FIXED) New players disconnect when trying to yell</source>
      </item>
  </channel>
</rss>
