<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>[EUTHYMIA] Adding fishing!</title>
    <link>https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119</link>
    <description>Well i ripped somone&#39;s enum and made a fishing base for euthymia, I will explain how to add it, and if anything is still not clear, it can be asked below.
It has the experience, and required level from runescape, it&#39;s also done to take the bait and check for it, you just gotta file in the enum the bait that it uses ;) if it uses none, just change it to the rod, or -1, MESS WITH IT :).
It uses a cycle based task manager.
Okay first of all frewbies, you&#39;re gonna add this method in the Player class (Player.java) wich is located: server.euthymia.entity.player;
[code=java]public boolean isFishing = false;[/code]

Now go to the skills directory: server.euthymia.entity.player.skill;
and save this as Fishing.java, i documented it alot, so it clears the doubts that can be made, hence you shouldn&#39;t have problem understanding it.
[code=java]package server.euthymia.entity.player.skill;

import server.Server;
import server.euthymia.entity.player.Player;
import server.task.Task;

/**
 * 
 * @author Strucker/Mr Boogie/StalkerStrucker thanks to
 * 
 */
public class Fishing {

	/*
	 * The skill id for fishing
	 */
	public static final int FISHING_SKILL_ID = 10;

	/*
	 * Inspired of you! (imthenull) This is just a joke not needed.
	 */
	public static final int IM_THE_NULL = (Integer) null;

	/*
	 * An enum containing all the data required to fish happy :) The Experience
	 * and the level required are like Runscap
	 */
	private enum Spot {
		SHRIMP(321, 1, 303, 317, 10, 3, 621, 0, 0),
		ANCHOVIES(322, 15, 303, 321, 40, 3, 621, 0, 0),
		TROUT(323, 20, 309, 335, 50, 4, 622, 0, 0),
		TUNA(324, 35, 311, 359, 80, 5, 618, 0, 0),
		LOBSTER(325, 40, 301, 377, 90, 7, 619, 0, 0),
		SWORDFISH(326, 50, 311, 371, 100, 8, 618, 0, 0),
		SHARK(327, 75, 311, 383, 110, 10, 618, 0, 0);

		private int spot, lvl, requiredItem, fish, xp, speed, emote, bait, requiredBait;

		private Spot(int spot, int lvl, int requiredItem, int fish, int xp, int speed, int emote, int bait, int requiredBait) {
			this.spot = spot;
			this.lvl = lvl;
			this.requiredItem = requiredItem;
			this.fish = fish;
			this.xp = xp;
			this.speed = speed;
			this.emote = emote;
			this.bait = bait;
			this.requiredBait = requiredBait;
		}

		private int getSpot() {
			return spot;
		}

		private int getRequiredLevel() {
			return lvl;
		}

		private int getRod() {
			return requiredItem;
		}

		private int getRawFish() {
			return fish;
		}

		private int getExperience() {
			return xp;
		}

		private int getFishingSpeed() {
			return speed;
		}

		private int getEmote() {
			return emote;
		}

		private int getBait() {
			return bait;
		}

		private int getRequiredBait() {
			return requiredBait;
		}
	}

	/*
	 * The fishing speed is gotten depending of the playerlevel, with a rule of
	 * 3!
	 * 
	 * @param speed 
	 * 		The normal speed from the enum
	 * 
	 * @param requiredLevel 
	 * 		The required level from the enum
	 */
	private static int getSpeed(Player player, int speed, int requiredLevel) {
		if (player.playerLevel[FISHING_SKILL_ID] &lt; requiredLevel)
			return IM_THE_NULL;
		if (player.playerLevel[FISHING_SKILL_ID] == requiredLevel) {
			return speed;
		}
		if (player.playerLevel[FISHING_SKILL_ID] &gt; requiredLevel) {
			return player.playerLevel[FISHING_SKILL_ID] * speed / requiredLevel;
		}
		return 0;
	}

	/*
	 * @param player 
	 * 		The player that will be fishing
	 * 
	 * @param entity 
	 * 		The spot that we will be fishing from.
	 */
	public static void startFishing(Player player, int entity) {
		for (Spot e : Spot.values()) {
			if (entity == e.getSpot()) {
				if (player.playerLevel[FISHING_SKILL_ID] &gt;= e.getRequiredLevel()
						&amp;&amp; player.HasItemAmount(e.getRod(), 1) &amp;&amp; !player.isFishing
						&amp;&amp; player.HasItemAmount(e.getBait(), e.getRequiredBait())) {
					loopEmote(player, e.getEmote());
					catchFish(player, e.getExperience(), e.getFishingSpeed(), e.getRawFish(), e.getBait(), e.getRequiredBait(), e.getRequiredLevel());
					player.isFishing = true;
				}
			}
		}
	}
	
	/*
	 * Catches the fish :)
	 * 
	 * @param player
	 * 		the player that will catch the fish
	 * 
	 * @param experience 
	 * 		the experience that the player will receive
	 * 
	 * @param fishingSpeed
	 * 		the ticks before the player will catch the fish(1 tick equals to one server cycle wish is 600ms)
	 * 
	 * @param rawFish
	 * 		The fish that the player will catch
	 * 
	 * @param bait
	 * 		the specific bait required for the player to catch the fish ;)
	 * 
	 * @param requiredBait
	 * 		the quantity of specific bait required to catch the fish
	 * 
	 * @param requiredLevel
	 * 		the req level to catch the fish :)
	 */
	private static void catchFish(final Player player, final int experience, final int fishingSpeed, final int rawFish, final int bait, final int requiredBait, final int requiredLevel) {
		Server.getTaskScheduler().schedule(new Task(2, true) {
			private int count = getSpeed(player, fishingSpeed, requiredLevel);
			@Override
			protected void execute() {
				if (count &gt; 0) {
					count--;
				} else {
					if(player.isFishing) {
						player.addSkillXP(experience, FISHING_SKILL_ID);
						player.addItem(rawFish, 1);
						player.deleteItem(bait, requiredBait);
						catchFish(player, experience, fishingSpeed, rawFish, bait, requiredBait, requiredLevel);
					}
					stop();
				}
			}
		});
	}

	/*
	 *Loops the emote, until the player stops fishing
	 *
	 *@param player
	 *		The player who will loop the emote
	 *
	 *@param emote
	 *		The emote that will be done
	 */
	private static void loopEmote(Player player, int emote) {
		while(player.isFishing) {
			player.startAnimation(emote);
		}
	}
}[/code]

After that open Packets.java and search for case 155:
something really similar to this should pop-up
[code=java]case 155:
			// first Click npc
			if(c.inCutScene)
				break;
			c.NPCSlot = c.inStream.readSignedWordBigEndian();
			if ((c.NPCSlot &lt; 0) || (c.NPCSlot &gt;= Server.npcHandler.npcs.length)
					|| (Server.npcHandler.npcs[c.NPCSlot] == null))
				break;
			c.NPCID = Server.npcHandler.npcs[c.NPCSlot].type;
			boolean FishingGo = false;
			boolean PutNPCCoords = false;
			c.cookAssistant.firstClickNpc(c.NPCID);
			c.doricsQuest.firstClickNpc(c.NPCID);
			c.lumbridge1.firstClickNpc(c.NPCID);
			c.randomNpcDialogues.firstClickNpc(c.NPCID);
			/*
			 * S if (Misc.random(100) == 1) { triggerRandom(); break; }
			 */
			if (c.NPCID == 521) {
				c.Dialogue.talk(&quot;Are you gonna trade me or what&quot;, 521);
			}
			break;[/code]
Just before the break; add this.
[code=java]Fishing.startFishing(c, c.NPCID);[/code]

And also search for case 98:
and stick this in here.
[code=java]	if(c.isFishing) 
				c.isFishing = false;[/code]
[size=18pt]Positive feedback and constructive criticism is welcome![/size]</description>
    
    <lastBuildDate>Tue, 15 Oct 2013 20:15:56 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>[EUTHYMIA] Adding fishing!</title>
        <dc:creator><![CDATA[@strucker Strucker]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/strucker">@strucker</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="14" data-topic="534119">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/loveandpower/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> Loveandpower:</div>
<blockquote>
<p>[quote]Well i ripped somone’s enum and made a fishing base for euthymia,</p>
</blockquote>
</aside>
<p>Where is your credits for that person &lt;3</p>
<p>anyway good job with this[/quote]thanks here credits <a href="https://www.moparisthebest.com/smf/index.php/topic,652879.0.html" rel="nofollow noopener">https://www.moparisthebest.com/smf/index.php/topic,652879.0.html</a><br>
and thanks <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119/15">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119/15</link>
        <pubDate>Tue, 15 Oct 2013 20:15:56 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-534119-15</guid>
        <source url="https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119.rss">[EUTHYMIA] Adding fishing!</source>
      </item>
      <item>
        <title>[EUTHYMIA] Adding fishing!</title>
        <dc:creator><![CDATA[@Loveandpower Loveandpower]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/loveandpower">@Loveandpower</a> wrote:</p>
          <blockquote>
              <blockquote>Well i ripped somone's enum and made a fishing base for euthymia,</blockquote>
<p>Where is your credits for that person &lt;3</p>
<p>anyway good job with this</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119/14">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119/14</link>
        <pubDate>Tue, 15 Oct 2013 20:12:30 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-534119-14</guid>
        <source url="https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119.rss">[EUTHYMIA] Adding fishing!</source>
      </item>
      <item>
        <title>[EUTHYMIA] Adding fishing!</title>
        <dc:creator><![CDATA[@strucker Strucker]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/strucker">@strucker</a> wrote:</p>
          <blockquote>
              <p>[quote=“AtomicInt_, post:11, topic:534119”][quote author=DAn0194 link=topic=652917.msg4374883#msg4374883 date=1381797136]<br>
I like the way you made the method catchFish with all those final ints.</p>
<p>The only thing is do you really need a constant for a null?</p>
<p>But overall Good Job and thanks for contributing <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"><br>
[/quote]</p>
<p>They need to be final.[/quote]shutup and let him thank me llololol</p>
<p>[quote=“arham 4, post:12, topic:534119”]Code-wise, I like it. You started to follow conventions again, proud of you.</p>
<p>Design-wise, not really a fan of it. Personally, I’d do something like this:</p>
<p>[ul][li]Action[/li]<br>
[list]<br>
[li]Fishing[/li]<br>
[list]<br>
[li]<span class="bbcode-b">enum</span> Fish[/li]<br>
[list]<br>
[li]Fish constructor[/li]<br>
[list]<br>
[li]Item class[/li]<br>
[list]<br>
[li]item[/li]<br>
[li]amount[/li]<br>
[/list]<br>
[li]exp[/li]<br>
[li]levelRequired[/li]<br>
[/list]<br>
[/list]<br>
[li]<span class="bbcode-b">enum</span> FishingType[/li]<br>
[list]<br>
[li]FishingType constructor[/li]<br>
[list]<br>
[li]<span class="bbcode-i">npcs</span> array[/li]<br>
[li]<span class="bbcode-i">possibleFishOptionOne</span> array (of <span class="bbcode-b">enum</span> Fish)[/li]<br>
[li]<span class="bbcode-i">possibleFishOptionTwo</span> array (of <span class="bbcode-b">enum</span> Fish)[/li]<br>
[li]<span class="bbcode-i">requiredItems</span> array of (of <span class="bbcode-b">class</span> Item)[/li]<br>
[/list]<br>
[/list]<br>
[li]Fishing constructor[/li]<br>
[list]<br>
[li]Mob class (player or NPC? Used for the superclass Action)[/li]<br>
[li]ticks Integer[/li]<br>
[li]fishingType (of <span class="bbcode-b">enum</span> FishingType)[/li]<br>
[li]option Integer[/li]<br>
[list]<br>
[li]Used to determine the type fish for each option (as you can see, in <span class="bbcode-b">enum</span> FishingType, it has ‘possibleFishOptionOne’ and ‘possibleFishOptionTwo’). This Integer determines which ‘possibleFishOption’ to use.[/li]<br>
[/list]<br>
[li]npc Integer[/li]<br>
[/list]<br>
[li]execute Method[/li]<br>
[list]<br>
[li]Does the Action.[/li]<br>
[/list]<br>
[li]fish Method[/li]<br>
[list]<br>
[li]Handles fishing the fish.[/li]<br>
[li]Parameters[/li]<br>
[list]<br>
[li]fish (a List of <span class="bbcode-b">enum</span> Fish)[/li]<br>
[/list]<br>
[/list]<br>
[/list]<br>
[/list][/ul][/quote]thanks arham for the feedback… it’s true i gotta work on my design…</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119/13">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119/13</link>
        <pubDate>Tue, 15 Oct 2013 20:06:16 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-534119-13</guid>
        <source url="https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119.rss">[EUTHYMIA] Adding fishing!</source>
      </item>
      <item>
        <title>[EUTHYMIA] Adding fishing!</title>
        <dc:creator><![CDATA[@arham_4 arham 4]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/arham_4">@arham_4</a> wrote:</p>
          <blockquote>
              <p>Code-wise, I like it. You started to follow conventions again, proud of you.</p>
<p>Design-wise, not really a fan of it. Personally, I’d do something like this:</p>
<p>[ul][li]Action[/li]<br>
[list]<br>
[li]Fishing[/li]<br>
[list]<br>
[li]<span class="bbcode-b">enum</span> Fish[/li]<br>
[list]<br>
[li]Fish constructor[/li]<br>
[list]<br>
[li]Item class[/li]<br>
[list]<br>
[li]item[/li]<br>
[li]amount[/li]<br>
[/list]<br>
[li]exp[/li]<br>
[li]levelRequired[/li]<br>
[/list]<br>
[/list]<br>
[li]<span class="bbcode-b">enum</span> FishingType[/li]<br>
[list]<br>
[li]FishingType constructor[/li]<br>
[list]<br>
[li]<span class="bbcode-i">npcs</span> array[/li]<br>
[li]<span class="bbcode-i">possibleFishOptionOne</span> array (of <span class="bbcode-b">enum</span> Fish)[/li]<br>
[li]<span class="bbcode-i">possibleFishOptionTwo</span> array (of <span class="bbcode-b">enum</span> Fish)[/li]<br>
[li]<span class="bbcode-i">requiredItems</span> array of (of <span class="bbcode-b">class</span> Item)[/li]<br>
[/list]<br>
[/list]<br>
[li]Fishing constructor[/li]<br>
[list]<br>
[li]Mob class (player or NPC? Used for the superclass Action)[/li]<br>
[li]ticks Integer[/li]<br>
[li]fishingType (of <span class="bbcode-b">enum</span> FishingType)[/li]<br>
[li]option Integer[/li]<br>
[list]<br>
[li]Used to determine the type fish for each option (as you can see, in <span class="bbcode-b">enum</span> FishingType, it has ‘possibleFishOptionOne’ and ‘possibleFishOptionTwo’). This Integer determines which ‘possibleFishOption’ to use.[/li]<br>
[/list]<br>
[li]npc Integer[/li]<br>
[/list]<br>
[li]execute Method[/li]<br>
[list]<br>
[li]Does the Action.[/li]<br>
[/list]<br>
[li]fish Method[/li]<br>
[list]<br>
[li]Handles fishing the fish.[/li]<br>
[li]Parameters[/li]<br>
[list]<br>
[li]fish (a List of <span class="bbcode-b">enum</span> Fish)[/li]<br>
[/list]<br>
[/list]<br>
[/list]<br>
[/list][/ul]</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119/12">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119/12</link>
        <pubDate>Tue, 15 Oct 2013 19:48:50 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-534119-12</guid>
        <source url="https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119.rss">[EUTHYMIA] Adding fishing!</source>
      </item>
      <item>
        <title>[EUTHYMIA] Adding fishing!</title>
        <dc:creator><![CDATA[@ExtremeX-Scape Ryley]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/extremex-scape">@ExtremeX-Scape</a> wrote:</p>
          <blockquote>
              <p>[quote=“DAn0194, post:4, topic:534119”]I like the way you made the method catchFish with all those final ints.</p>
<p>The only thing is do you really need a constant for a null?</p>
<p>But overall Good Job and thanks for contributing :D[/quote]</p>
<p>They need to be final.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119/11">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119/11</link>
        <pubDate>Tue, 15 Oct 2013 19:04:59 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-534119-11</guid>
        <source url="https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119.rss">[EUTHYMIA] Adding fishing!</source>
      </item>
      <item>
        <title>[EUTHYMIA] Adding fishing!</title>
        <dc:creator><![CDATA[@strucker Strucker]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/strucker">@strucker</a> wrote:</p>
          <blockquote>
              <p>And half the posts in tut section arent explained and from what i know im teaching how to add it… also t, just forget it i love this community.</p>
<p>And thanks, i did put effort.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119/10</link>
        <pubDate>Tue, 15 Oct 2013 19:03:10 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-534119-10</guid>
        <source url="https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119.rss">[EUTHYMIA] Adding fishing!</source>
      </item>
      <item>
        <title>[EUTHYMIA] Adding fishing!</title>
        <dc:creator><![CDATA[@ohokay ohokay]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ohokay">@ohokay</a> wrote:</p>
          <blockquote>
              <p>The code isn’t explained, you’re just telling them where to add it.</p>
<p>It’s not a tutorial.</p>
<p>Pretty good though</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119/9</link>
        <pubDate>Tue, 15 Oct 2013 16:51:02 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-534119-9</guid>
        <source url="https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119.rss">[EUTHYMIA] Adding fishing!</source>
      </item>
      <item>
        <title>[EUTHYMIA] Adding fishing!</title>
        <dc:creator><![CDATA[@strucker Strucker]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/strucker">@strucker</a> wrote:</p>
          <blockquote>
              <p>why’d you move it to snippets? i didnt just paste the fishing stuff, i explained how to add it, really?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119/8</link>
        <pubDate>Tue, 15 Oct 2013 14:49:46 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-534119-8</guid>
        <source url="https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119.rss">[EUTHYMIA] Adding fishing!</source>
      </item>
      <item>
        <title>[EUTHYMIA] Adding fishing!</title>
        <dc:creator><![CDATA[@Clawz_fury lare69]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/clawz_fury">@Clawz_fury</a> wrote:</p>
          <blockquote>
              <p>object orientation?</p>
<p><span class="bbcode-i">new Fish(blah blah);</span> like that</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119/7</link>
        <pubDate>Tue, 15 Oct 2013 01:22:29 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-534119-7</guid>
        <source url="https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119.rss">[EUTHYMIA] Adding fishing!</source>
      </item>
      <item>
        <title>[EUTHYMIA] Adding fishing!</title>
        <dc:creator><![CDATA[@strucker Strucker]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/strucker">@strucker</a> wrote:</p>
          <blockquote>
              <p>[quote=“DAn0194, post:4, topic:534119”]I like the way you made the method catchFish with all those final ints.</p>
<p>The only thing is do you really need a constant for a null?</p>
<p>But overall Good Job and thanks for contributing :D[/quote]If you didn’t read the comment it was a joke for the user called imthenull hehehe.<br>
You’re welcome i’m glad to help:)</p>
<p>[quote=“Clawz fury, post:5, topic:534119”]<code>final int experience, final int fishingSpeed, final int rawFish, final int bait, final int requiredBait, final int requiredLevel</code></p>
<p>should be represented by some sort of object</p>
<p>good job on the other parts though[/quote]Thanks, any idea on how i could represent it??<br>
Ily</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119/6</link>
        <pubDate>Tue, 15 Oct 2013 01:07:16 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-534119-6</guid>
        <source url="https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119.rss">[EUTHYMIA] Adding fishing!</source>
      </item>
      <item>
        <title>[EUTHYMIA] Adding fishing!</title>
        <dc:creator><![CDATA[@Clawz_fury lare69]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/clawz_fury">@Clawz_fury</a> wrote:</p>
          <blockquote>
              <pre><code class="lang-auto">
should be represented by some sort of object

good job on the other parts though</code></pre>
<p>should be represented by some sort of object</p>
<p>good job on the other parts though</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119/5</link>
        <pubDate>Tue, 15 Oct 2013 00:53:47 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-534119-5</guid>
        <source url="https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119.rss">[EUTHYMIA] Adding fishing!</source>
      </item>
      <item>
        <title>[EUTHYMIA] Adding fishing!</title>
        <dc:creator><![CDATA[@Dan0194 Dan0194]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/dan0194">@Dan0194</a> wrote:</p>
          <blockquote>
              <p>I like the way you made the method catchFish with all those final ints.</p>
<p>The only thing is do you really need a constant for a null?</p>
<p>But overall Good Job and thanks for contributing <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119/4</link>
        <pubDate>Tue, 15 Oct 2013 00:32:16 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-534119-4</guid>
        <source url="https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119.rss">[EUTHYMIA] Adding fishing!</source>
      </item>
      <item>
        <title>[EUTHYMIA] Adding fishing!</title>
        <dc:creator><![CDATA[@strucker Strucker]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/strucker">@strucker</a> wrote:</p>
          <blockquote>
              <p>[quote=“I Roll Deep, post:2, topic:534119”]Good tutorial, thanks for contributing :)[/quote]Thanks mate, I love doing it <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119/3</link>
        <pubDate>Mon, 14 Oct 2013 21:28:25 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-534119-3</guid>
        <source url="https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119.rss">[EUTHYMIA] Adding fishing!</source>
      </item>
      <item>
        <title>[EUTHYMIA] Adding fishing!</title>
        <dc:creator><![CDATA[@I_Roll_Deep I Roll Deep]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/i_roll_deep">@I_Roll_Deep</a> wrote:</p>
          <blockquote>
              <p>Good tutorial, thanks for contributing <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119/2</link>
        <pubDate>Mon, 14 Oct 2013 21:26:29 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-534119-2</guid>
        <source url="https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119.rss">[EUTHYMIA] Adding fishing!</source>
      </item>
      <item>
        <title>[EUTHYMIA] Adding fishing!</title>
        <dc:creator><![CDATA[@strucker Strucker]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/strucker">@strucker</a> wrote:</p>
          <blockquote>
              <p>Well i ripped somone’s enum and made a fishing base for euthymia, I will explain how to add it, and if anything is still not clear, it can be asked below.<br>
It has the experience, and required level from runescape, it’s also done to take the bait and check for it, you just gotta file in the enum the bait that it uses <img src="https://forum.moparisthebest.com/images/emoji/twitter/wink.png?v=5" title=":wink:" class="emoji" alt=":wink:"> if it uses none, just change it to the rod, or -1, MESS WITH IT :).<br>
It uses a cycle based task manager.<br>
Okay first of all frewbies, you’re gonna add this method in the Player class (Player.java) wich is located: server.euthymia.entity.player;</p>
<pre><code class="lang-auto"></code></pre>
<p>Now go to the skills directory: server.euthymia.entity.player.skill;<br>
and save this as Fishing.java, i documented it alot, so it clears the doubts that can be made, hence you shouldn’t have problem understanding it.</p>
<p>[code=java]package server.euthymia.entity.player.skill;</p>
<p>import server.Server;<br>
import server.euthymia.entity.player.Player;<br>
import server.task.Task;</p>
<p>/**<br>
*</p>
<ul>
<li>
<span class="mention">@author</span> Strucker/Mr Boogie/StalkerStrucker thanks to</li>
<li>
</li>
</ul>
<p>*/<br>
public class Fishing {</p>
<pre><code>/*
 * The skill id for fishing
 */
public static final int FISHING_SKILL_ID = 10;

/*
 * Inspired of you! (imthenull) This is just a joke not needed.
 */
public static final int IM_THE_NULL = (Integer) null;

/*
 * An enum containing all the data required to fish happy :) The Experience
 * and the level required are like Runscap
 */
private enum Spot {
	SHRIMP(321, 1, 303, 317, 10, 3, 621, 0, 0),
	ANCHOVIES(322, 15, 303, 321, 40, 3, 621, 0, 0),
	TROUT(323, 20, 309, 335, 50, 4, 622, 0, 0),
	TUNA(324, 35, 311, 359, 80, 5, 618, 0, 0),
	LOBSTER(325, 40, 301, 377, 90, 7, 619, 0, 0),
	SWORDFISH(326, 50, 311, 371, 100, 8, 618, 0, 0),
	SHARK(327, 75, 311, 383, 110, 10, 618, 0, 0);

	private int spot, lvl, requiredItem, fish, xp, speed, emote, bait, requiredBait;

	private Spot(int spot, int lvl, int requiredItem, int fish, int xp, int speed, int emote, int bait, int requiredBait) {
		this.spot = spot;
		this.lvl = lvl;
		this.requiredItem = requiredItem;
		this.fish = fish;
		this.xp = xp;
		this.speed = speed;
		this.emote = emote;
		this.bait = bait;
		this.requiredBait = requiredBait;
	}

	private int getSpot() {
		return spot;
	}

	private int getRequiredLevel() {
		return lvl;
	}

	private int getRod() {
		return requiredItem;
	}

	private int getRawFish() {
		return fish;
	}

	private int getExperience() {
		return xp;
	}

	private int getFishingSpeed() {
		return speed;
	}

	private int getEmote() {
		return emote;
	}

	private int getBait() {
		return bait;
	}

	private int getRequiredBait() {
		return requiredBait;
	}
}

/*
 * The fishing speed is gotten depending of the playerlevel, with a rule of
 * 3!
 * 
 * @param speed 
 * 		The normal speed from the enum
 * 
 * @param requiredLevel 
 * 		The required level from the enum
 */
private static int getSpeed(Player player, int speed, int requiredLevel) {
	if (player.playerLevel[FISHING_SKILL_ID] &lt; requiredLevel)
		return IM_THE_NULL;
	if (player.playerLevel[FISHING_SKILL_ID] == requiredLevel) {
		return speed;
	}
	if (player.playerLevel[FISHING_SKILL_ID] &gt; requiredLevel) {
		return player.playerLevel[FISHING_SKILL_ID] * speed / requiredLevel;
	}
	return 0;
}

/*
 * @param player 
 * 		The player that will be fishing
 * 
 * @param entity 
 * 		The spot that we will be fishing from.
 */
public static void startFishing(Player player, int entity) {
	for (Spot e : Spot.values()) {
		if (entity == e.getSpot()) {
			if (player.playerLevel[FISHING_SKILL_ID] &gt;= e.getRequiredLevel()
					&amp;&amp; player.HasItemAmount(e.getRod(), 1) &amp;&amp; !player.isFishing
					&amp;&amp; player.HasItemAmount(e.getBait(), e.getRequiredBait())) {
				loopEmote(player, e.getEmote());
				catchFish(player, e.getExperience(), e.getFishingSpeed(), e.getRawFish(), e.getBait(), e.getRequiredBait(), e.getRequiredLevel());
				player.isFishing = true;
			}
		}
	}
}

/*
 * Catches the fish :)
 * 
 * @param player
 * 		the player that will catch the fish
 * 
 * @param experience 
 * 		the experience that the player will receive
 * 
 * @param fishingSpeed
 * 		the ticks before the player will catch the fish(1 tick equals to one server cycle wish is 600ms)
 * 
 * @param rawFish
 * 		The fish that the player will catch
 * 
 * @param bait
 * 		the specific bait required for the player to catch the fish ;)
 * 
 * @param requiredBait
 * 		the quantity of specific bait required to catch the fish
 * 
 * @param requiredLevel
 * 		the req level to catch the fish :)
 */
private static void catchFish(final Player player, final int experience, final int fishingSpeed, final int rawFish, final int bait, final int requiredBait, final int requiredLevel) {
	Server.getTaskScheduler().schedule(new Task(2, true) {
		private int count = getSpeed(player, fishingSpeed, requiredLevel);
		@Override
		protected void execute() {
			if (count &gt; 0) {
				count--;
			} else {
				if(player.isFishing) {
					player.addSkillXP(experience, FISHING_SKILL_ID);
					player.addItem(rawFish, 1);
					player.deleteItem(bait, requiredBait);
					catchFish(player, experience, fishingSpeed, rawFish, bait, requiredBait, requiredLevel);
				}
				stop();
			}
		}
	});
}

/*
 *Loops the emote, until the player stops fishing
 *
 *@param player
 *		The player who will loop the emote
 *
 *@param emote
 *		The emote that will be done
 */
private static void loopEmote(Player player, int emote) {
	while(player.isFishing) {
		player.startAnimation(emote);
	}
}
</code></pre>
<p>}[/code]</p>
<p>After that open Packets.java and search for case 155:<br>
something really similar to this should pop-up</p>
<p><code>case 155:
			// first Click npc
			if(c.inCutScene)
				break;
			c.NPCSlot = c.inStream.readSignedWordBigEndian();
			if ((c.NPCSlot &lt; 0) || (c.NPCSlot &gt;= Server.npcHandler.npcs.length)
					|| (Server.npcHandler.npcs[c.NPCSlot] == null))
				break;
			c.NPCID = Server.npcHandler.npcs[c.NPCSlot].type;
			boolean FishingGo = false;
			boolean PutNPCCoords = false;
			c.cookAssistant.firstClickNpc(c.NPCID);
			c.doricsQuest.firstClickNpc(c.NPCID);
			c.lumbridge1.firstClickNpc(c.NPCID);
			c.randomNpcDialogues.firstClickNpc(c.NPCID);
			/*
			 * S if (Misc.random(100) == 1) { triggerRandom(); break; }
			 */
			if (c.NPCID == 521) {
				c.Dialogue.talk("Are you gonna trade me or what", 521);
			}
			break;</code><br>
Just before the break; add this.</p>
<pre><code class="lang-auto"></code></pre>
<p>And also search for case 98:<br>
and stick this in here.</p>
<p><code>	if(c.isFishing) 
				c.isFishing = false;</code><br>
[size=18pt]Positive feedback and constructive criticism is welcome![/size]</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119/1</link>
        <pubDate>Mon, 14 Oct 2013 21:21:23 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-534119-1</guid>
        <source url="https://forum.moparisthebest.com/t/euthymia-adding-fishing/534119.rss">[EUTHYMIA] Adding fishing!</source>
      </item>
  </channel>
</rss>
