<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/bitshifts-and-bytes/260681 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 14:17:06 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Bitshifts and Bytes - General Programming - moparisthebest.com</title>
    <meta name="description" content="I&amp;#39;m quite new to JAVA programming, so I&amp;#39;m still need help understanding this piece of code: 

[code]    final void a()     {         int i = 256;         if(df.E)             i &amp;lt;&amp;lt;= 1;         for(int j = 0; j &amp;lt; i; j++)  &amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="260681.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Bitshifts and Bytes&#39;" href="260681.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/bitshifts-and-bytes/260681" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/bitshifts-and-bytes/260681" />
<meta property="og:title" content="Bitshifts and Bytes" />
<meta name="twitter:title" content="Bitshifts and Bytes" />
<meta property="og:description" content="I’m quite new to JAVA programming, so I’m still need help understanding this piece of code:  [code]    final void a()  {  int i = 256;  if(df.E)  i &lt;&lt;= 1;  for(int j = 0; j &lt; i; j++)  {  int k = H[j];  if((k + 0x800000 &amp; 0xff000000) != 0)  k = 0x7fffff ^ k &gt;&gt; 31;  cb[j * 2] = (byte)(k &gt;&gt; 8);  cb[j * 2 + 1] = (byte)(k &gt;&gt; 16);  }      ab.write(cb, 0, i &lt;&lt; 1); }  private byte cb[];[/code]  ab is a SourceDataLine, and df.E is a boolean. I think I understand the concept, but don’t really get the whol..." />
<meta name="twitter:description" content="I’m quite new to JAVA programming, so I’m still need help understanding this piece of code:  [code]    final void a()  {  int i = 256;  if(df.E)  i &lt;&lt;= 1;  for(int j = 0; j &lt; i; j++)  {  int k = H[j];  if((k + 0x800000 &amp; 0xff000000) != 0)  k = 0x7fffff ^ k &gt;&gt; 31;  cb[j * 2] = (byte)(k &gt;&gt; 8);  cb[j * 2 + 1] = (byte)(k &gt;&gt; 16);  }      ab.write(cb, 0, i &lt;&lt; 1); }  private byte cb[];[/code]  ab is a SourceDataLine, and df.E is a boolean. I think I understand the concept, but don’t really get the whol..." />
<meta property="article:published_time" content="2009-02-06T18:57:33+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="260681.html">Bitshifts and Bytes</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/general-programming.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>General Programming</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/azliq7.html'><span itemprop='name'>azliq7</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-02-06T18:57:33Z'>
            <time itemprop='dateModified' datetime='2016-07-31T05:17:39Z' class='post-time'>
              July 31, 2016,  5:17am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I’m quite new to JAVA programming, so I’m still need help understanding this piece of code:</p>
<p>[code]    final void a()<br>
{<br>
int i = 256;<br>
if(df.E)<br>
i &lt;&lt;= 1;<br>
for(int j = 0; j &lt; i; j++)<br>
{<br>
int k = H[j];<br>
if((k + 0x800000 &amp; 0xff000000) != 0)<br>
k = 0x7fffff ^ k &gt;&gt; 31;<br>
cb[j * 2] = (byte)(k &gt;&gt; 8);<br>
cb[j * 2 + 1] = (byte)(k &gt;&gt; 16);<br>
}</p>
<pre><code>    ab.write(cb, 0, i &lt;&lt; 1);
}

private byte cb[];[/code]
</code></pre>
<p>ab is a SourceDataLine, and df.E is a boolean. I think I understand the concept, but don’t really get the whole picture of what’s happening…</p>
      </div>

      <meta itemprop='headline' content='Bitshifts and Bytes'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/unlimitedorb.html'><span itemprop='name'>unlimitedorb</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-02-06T20:31:36Z'>
            <time itemprop='dateModified' datetime='2016-07-31T05:17:44Z' class='post-time'>
              July 31, 2016,  5:17am
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>If the only context you’re giving out is the fact that df.E is a boolean, then I can only assume you want it explained in literal terms:</p>
<p>[code]    final void a()<br>
{<br>
int i = 256; //Initialize the variable i to 256<br>
/* If the boolean E in class df evaluates to “true” then shift i to the left once. So if this predicate were true, the value i would be assigned 512 because 256 left shifted once is 1000000000 base 2. (as a side note, by the time this arrives to the virtual machine’s execution engine, df.E will actually be an int. 0 for false, a non zero value for true, since the virtual machine interprets booleans as ints and boolean arrays as bytes.) <em>/<br>
if(df.E)<br>
i &lt;&lt;= 1;<br>
/</em> We’ll have the previous predicate evaluate to true, so this construct will loop 512 times. <em>/<br>
for(int j = 0; j &lt; i; j++)<br>
{<br>
int k = H[j]; //Grab the value of array H at it’s j’th index and store it into k.<br>
/</em> add 8 to the value of k (the value at H position j) and then mask out all bits until we have a byte i.e., bitwise exclusive and it with 0xff, then test to see if it’s not equal to 0 <em>/<br>
if((k + 0x800000 &amp; 0xff000000) != 0)<br>
k = 0x7fffff ^ k &gt;&gt; 31; //Ok man, I’m wasting my time here, but do you see what’s going on? All you have to do is follow it line by line, and apply a little logic sometimes.<br>
cb[j * 2] = (byte)(k &gt;&gt; 8);<br>
cb[j * 2 + 1] = (byte)(k &gt;&gt; 16);<br>
}<br>
/</em> ab is presumably a ByteArrayOutputStream, so we write the contents of cb to ab setting the offset to 0, and the length to 1kb (512 left shifted once) */<br>
ab.write(cb, 0, i &lt;&lt; 1);<br>
}</p>
<pre><code>private byte cb[];[/code]
</code></pre>
<p>That’s really all there is to analyzing bitwise shitfts, etc. Sometimes the client will stick its hand in its ass and pull out some weird shit to throw at you. In that case, you’ll just need to roll with the punches and see if you can induce any simplifications. A reference book I’d recommend for knowing how to “deobfuscate” some of the stranger expressions is “Hacker’s Delight” by Hank Warren. Detecting algorithms in bitwise arithmetic is somewhat of an experience thing if you ask me, but with practice (something I don’t have with this type of stuff), you should be able to identify quite a few cases in the context of the runescape client.</p>
      </div>

      <meta itemprop='headline' content='Bitshifts and Bytes'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/abrahm2119.html'><span itemprop='name'>abrahm2119</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-02-06T20:49:47Z'>
            <time itemprop='dateModified' datetime='2016-07-31T05:17:46Z' class='post-time'>
              July 31, 2016,  5:17am
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“azliq7, post:1, topic:260681”]I’m quite new to JAVA programming, so I’m still need help understanding this piece of code:</p>
<p>[code]    final void a()<br>
{<br>
int i = 256;<br>
if(df.E)<br>
i &lt;&lt;= 1;<br>
for(int j = 0; j &lt; i; j++)<br>
{<br>
int k = H[j];<br>
if((k + 0x800000 &amp; 0xff000000) != 0)<br>
k = 0x7fffff ^ k &gt;&gt; 31;<br>
cb[j * 2] = (byte)(k &gt;&gt; 8);<br>
cb[j * 2 + 1] = (byte)(k &gt;&gt; 16);<br>
}</p>
<pre><code>    ab.write(cb, 0, i &lt;&lt; 1);
}

private byte cb[];[/code]
</code></pre>
<p>ab is a SourceDataLine, and df.E is a boolean. I think I understand the concept, but don’t really get the whole picture of what’s happening…[/quote]<br>
<a class="mention" href="../../u/unlimitedorb.html">@unlimitedorb</a>: According to the title, I believe the OP has difficulty understanding the use of bit-shifts, and is in the need for more of an explanation than commenting on that piece of code.</p>
<p><span class="mention">@OP</span>: Here is a brief explanation:</p>
<p>The bitshift operator is used to ‘scoot’ each bit left or right (depending if you used &lt;&lt; or &gt;&gt;) ‘x’ amount of positions.<br>
For example:</p>
<p>'2(decimal form) &lt;&lt; 3(times to be ‘scooted’),<br>
since the value of ‘2’ in binary form would be ‘10’, the operation would go as follows:</p>
<p>First shift: 10-&gt;01<br>
Second shift: 01-&gt;10<br>
Third shift: 10-&gt;01</p>
<p>So the operation ‘2 &lt;&lt; 3’ would end up with the value of ‘1’, as seen above.</p>
      </div>

      <meta itemprop='headline' content='Bitshifts and Bytes'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/mod_taharok.html'><span itemprop='name'>mod_taharok</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-02-06T23:09:13Z'>
            <time itemprop='dateModified' datetime='2016-07-31T05:18:01Z' class='post-time'>
              July 31, 2016,  5:18am
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Scooting, eh abrahm2119? That’s definitely a new one…</p>
<p>Here is my explanation to bitshifts, as abrahm’s could have been cleared up a bit more:</p>
<p>There are three types of bitshifts: left bit shift ( &lt;&lt; ), right bitshift ( &gt;&gt; ), and unsigned right bitshift ( &gt;&gt;&gt; ). The shifts will truncate or pad a datatype’s binary value depending on which is used. The left shift will pad the binary value and the right shift will truncate it. Also bear in mind that all bitwise and bitshift operators can only be used with and on integral datatypes.</p>
<p>Now to show you are to use the shifts. Here is the format:</p>
<pre><code class="lang-auto">int dataType1;
byte dataType2;
short dataType3;

dataType1 = (int) (dataType2 &gt;&gt; dataType3);
dataType2 = (byte) (dataType1 &lt;&lt; dataType3);
dataType3 = (short) (dataType1 &gt;&gt;&gt; dataType2);</code></pre>
<p>Now, let’s use some values.</p>
<p>[tt]<span class="bbcode-i">value1 = 10;<br>
value2 = 2;</span>[/tt]</p>
<p>[tt]value1[/tt] has a binary value of [tt]<span class="bbcode-i">1010</span>[/tt]. [tt]value2[/tt] has a binary value of [tt]<span class="bbcode-i">10</span>[/tt].</p>
<p>Let’s incorporate some shifting.</p>
<pre><code class="lang-auto">value1 = value1 &gt;&gt; 2; // is the same as value1 &gt;&gt;= 2;</code></pre>
<p>We are going to rightshift [tt]value1[/tt] by 2. This will take it’s binary value of [tt]<span class="bbcode-i">1010</span>[/tt] and make it [tt]<span class="bbcode-i">10</span>[/tt], making it the decimal value of 2.</p>
<pre><code class="lang-auto">value1 &gt;&gt;= 7;</code></pre>
<p>Now what happens? Our binary value length is 4, but we are shifting outside the length. We actually, the binary value is [tt]<span class="bbcode-i">0000 1010</span>[/tt], assuming the datatype is a byte. This means we the first 7 values counting right to left from the binary value, giving us a single zero. The decimal form of this is simple 0.</p>
<pre><code class="lang-auto">value2 &lt;&lt;&lt;= 3;</code></pre>
<p>Now we need to pad our binary value with 3 zeros going right to left. Since our binary value is [tt]<span class="bbcode-i">10</span>[/tt], our new value will be [tt]<span class="bbcode-i">0001 0000</span>[/tt], which can simply be understood as [tt]<span class="bbcode-i">10000</span>[/tt]. The decimal form of this value is 16.</p>
<p>Now I will explain the normal right bitshift, as it complicates things. It acts similar to the unsigned right bitshift, but it will not fill in the new left slots of the binary value with 0s if the number is signed. Hopefully, you know what the difference between a signed and unsigned datatype is. In case you don’t, I will quickly explain it to you. Java will store a datatype, say a byte, with the range of -128 to -127. Though it can actually store 0-255, Java uses the first bit to the farthest left as the signed bit. If the signed bit is 0, then the number is positive. If the signed bit is 1, then the number is negative. In cases of a negative value, the right bitshift modifier will pad the left hand slots (which open up due to the bitshift) withs 1s. In cases of a positive value, it will instead pad the binary left hand slots with 0s. The unsigned right shift simply ignores all this and pads it with 0s.</p>
<p>And, based on mathematical patterns, you can simply think of left bitshifts as the number of times you wish the double the values, and the right bitshift as the number of times you wish to divide that number in half. This idea won’t work in cases when the shift amount exceeds the number of bits inside of the datatype being shifted.</p>
<p>I hope I gave you a stronger insight into how bitshifts work and what they mean.</p>
      </div>

      <meta itemprop='headline' content='Bitshifts and Bytes'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/azliq7.html'><span itemprop='name'>azliq7</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-02-07T09:07:21Z'>
            <time itemprop='dateModified' datetime='2016-07-31T05:18:41Z' class='post-time'>
              July 31, 2016,  5:18am
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Thanks for all your explanations. I kinda understand it now. Deeply appreciated…  <img src="../../images/emoji/twitter/smiley1bce.png?v=6" title=":smiley:" class="emoji" alt=":smiley:"></p>
      </div>

      <meta itemprop='headline' content='Bitshifts and Bytes'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Taios.html'><span itemprop='name'>Taios</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-02-07T14:34:03Z'>
            <time itemprop='dateModified' datetime='2016-07-31T05:18:59Z' class='post-time'>
              July 31, 2016,  5:18am
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p><a href="http://java.sun.com/docs/books/tutorial/java/nutsandbolts/op3.html" class="onebox" target="_blank" rel="nofollow noopener">http://java.sun.com/docs/books/tutorial/java/nutsandbolts/op3.html</a></p>
      </div>

      <meta itemprop='headline' content='Bitshifts and Bytes'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/bitshifts-and-bytes/260681 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 14:17:07 GMT -->
</html>
