<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>I dont understand why the runserver is getting this exception</title>
    <link>https://forum.moparisthebest.com/t/i-dont-understand-why-the-runserver-is-getting-this-exception/141142</link>
    <description>[code]BlakeScape Server: Exception!
java.net.SocketException: Software caused connection abort: recv failed
        at java.net.SocketInputStream.socketRead0(Native Method)
        at java.net.SocketInputStream.read(Unknown Source)
        at java.net.SocketInputStream.read(Unknown Source)
        at client.process(client.java:2006)
        at PlayerHandler.process(PlayerHandler.java:144)
        at server.main(server.java:45)
[/code]

I thought it was silabs client causing this, But then I only allowed access to play on my webclient. And I still get it. When I go to the lines it goes to something like playerhandler.something or something with packet.

And when people login as no username or pass, they log in as player25 or whatever, Is that whats causing it?


Also im using winterloves, Just in case you fixed something like this before.</description>
    
    <lastBuildDate>Sat, 08 Sep 2007 04:18:06 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/i-dont-understand-why-the-runserver-is-getting-this-exception/141142.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>I dont understand why the runserver is getting this exception</title>
        <dc:creator><![CDATA[@bjc22 bjc22]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/bjc22">@bjc22</a> wrote:</p>
          <blockquote>
              <p>Alright thanks guys, The server never crashed in 4 days :o, So I guess its all right.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/i-dont-understand-why-the-runserver-is-getting-this-exception/141142/11">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/i-dont-understand-why-the-runserver-is-getting-this-exception/141142/11</link>
        <pubDate>Sat, 08 Sep 2007 04:18:06 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-141142-11</guid>
        <source url="https://forum.moparisthebest.com/t/i-dont-understand-why-the-runserver-is-getting-this-exception/141142.rss">I dont understand why the runserver is getting this exception</source>
      </item>
      <item>
        <title>I dont understand why the runserver is getting this exception</title>
        <dc:creator><![CDATA[@zonus_warrior zonus warrior]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/zonus_warrior">@zonus_warrior</a> wrote:</p>
          <blockquote>
              <p>sorry dont think so</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/i-dont-understand-why-the-runserver-is-getting-this-exception/141142/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/i-dont-understand-why-the-runserver-is-getting-this-exception/141142/10</link>
        <pubDate>Sat, 08 Sep 2007 04:17:09 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-141142-10</guid>
        <source url="https://forum.moparisthebest.com/t/i-dont-understand-why-the-runserver-is-getting-this-exception/141142.rss">I dont understand why the runserver is getting this exception</source>
      </item>
      <item>
        <title>I dont understand why the runserver is getting this exception</title>
        <dc:creator><![CDATA[@bjc22 bjc22]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/bjc22">@bjc22</a> wrote:</p>
          <blockquote>
              <p>Okay, So it doesn’t effect the server, Is there a way to hide that in the runserver?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/i-dont-understand-why-the-runserver-is-getting-this-exception/141142/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/i-dont-understand-why-the-runserver-is-getting-this-exception/141142/9</link>
        <pubDate>Sat, 08 Sep 2007 04:13:52 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-141142-9</guid>
        <source url="https://forum.moparisthebest.com/t/i-dont-understand-why-the-runserver-is-getting-this-exception/141142.rss">I dont understand why the runserver is getting this exception</source>
      </item>
      <item>
        <title>I dont understand why the runserver is getting this exception</title>
        <dc:creator><![CDATA[@zonus_warrior zonus warrior]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/zonus_warrior">@zonus_warrior</a> wrote:</p>
          <blockquote>
              <p><code>	} catch(java.lang.Exception __ex) {
			misc.println("BlakeScape Server: Exception!");
			__ex.printStackTrace(); 
			disconnected = true;
		}
		return true;
	}</code></p>
<p>see thats the part that dc’ed them when a player trys to view a item that isnt on the cleint</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/i-dont-understand-why-the-runserver-is-getting-this-exception/141142/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/i-dont-understand-why-the-runserver-is-getting-this-exception/141142/8</link>
        <pubDate>Sat, 08 Sep 2007 04:11:55 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-141142-8</guid>
        <source url="https://forum.moparisthebest.com/t/i-dont-understand-why-the-runserver-is-getting-this-exception/141142.rss">I dont understand why the runserver is getting this exception</source>
      </item>
      <item>
        <title>I dont understand why the runserver is getting this exception</title>
        <dc:creator><![CDATA[@bjc22 bjc22]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/bjc22">@bjc22</a> wrote:</p>
          <blockquote>
              <p>Its in this mess:</p>
<p>[code]	public boolean process()		// is being called regularily every 500ms<br>
{<br>
if (actionAmount &lt; 0)<br>
{<br>
actionAmount = 0;<br>
}<br>
if (actionTimer &gt; 0)<br>
{<br>
actionTimer-=1;<br>
}<br>
if (actionAmount &gt; 4)<br>
{<br>
actionTimer-=20;<br>
}<br>
if (isKicked) { outStream.createFrame(109); };<br>
if (globalMessage.length() &gt; 0)<br>
{<br>
sendMessage(globalMessage);<br>
globalMessage = “”;<br>
}<br>
if(disconnected) return false;<br>
try {<br>
if(timeOutCounter++ &gt; 20) {<br>
<a href="//misc.println" rel="nofollow noopener">//misc.println</a>(“Client lost connection: timeout”);<br>
disconnected = true;<br>
return false;<br>
}<br>
if(in == null) return false;</p>
<pre><code>		int avail = in.available();
		if(avail == 0) return false;

		if(packetType == -1) {
			packetType = in.read() &amp; 0xff;
			if(inStreamDecryption != null)
				packetType = packetType - inStreamDecryption.getNextKey() &amp; 0xff;
			packetSize = packetSizes[packetType];
			avail--;
        }
		if(packetSize == -1) {
			if(avail &gt; 0) {
				// this is a variable size packet, the next byte containing the length of said
				packetSize = in.read() &amp; 0xff;
				avail--;
			}
			else return false;
		}
		if(avail &lt; packetSize) return false;	// packet not completely arrived here yet

		fillInStream(packetSize);
        timeOutCounter = 0;			// reset

		parseIncomingPackets();		// method that does actually interprete these packets

		packetType = -1;
	} catch(java.lang.Exception __ex) {
		misc.println("BlakeScape Server: Exception!");
		__ex.printStackTrace(); 
		disconnected = true;
	}
	return true;
}[/code]
</code></pre>
<p>Exact line is : <code>				packetType = in.read() &amp; 0xff;</code></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/i-dont-understand-why-the-runserver-is-getting-this-exception/141142/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/i-dont-understand-why-the-runserver-is-getting-this-exception/141142/7</link>
        <pubDate>Sat, 08 Sep 2007 04:08:38 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-141142-7</guid>
        <source url="https://forum.moparisthebest.com/t/i-dont-understand-why-the-runserver-is-getting-this-exception/141142.rss">I dont understand why the runserver is getting this exception</source>
      </item>
      <item>
        <title>I dont understand why the runserver is getting this exception</title>
        <dc:creator><![CDATA[@zonus_warrior zonus warrior]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/zonus_warrior">@zonus_warrior</a> wrote:</p>
          <blockquote>
              <p>it ISNT silabs cleint it’s her items that Software caused connection abort: recv failed thing only comes when a server has a item the client cant handle so it disconnects them</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/i-dont-understand-why-the-runserver-is-getting-this-exception/141142/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/i-dont-understand-why-the-runserver-is-getting-this-exception/141142/6</link>
        <pubDate>Sat, 08 Sep 2007 04:08:13 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-141142-6</guid>
        <source url="https://forum.moparisthebest.com/t/i-dont-understand-why-the-runserver-is-getting-this-exception/141142.rss">I dont understand why the runserver is getting this exception</source>
      </item>
      <item>
        <title>I dont understand why the runserver is getting this exception</title>
        <dc:creator><![CDATA[@zoltanman zoltanman]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/zoltanman">@zoltanman</a> wrote:</p>
          <blockquote>
              <p>Go to client.java and go to line 2006, and show me whats around it.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/i-dont-understand-why-the-runserver-is-getting-this-exception/141142/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/i-dont-understand-why-the-runserver-is-getting-this-exception/141142/5</link>
        <pubDate>Sat, 08 Sep 2007 04:06:58 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-141142-5</guid>
        <source url="https://forum.moparisthebest.com/t/i-dont-understand-why-the-runserver-is-getting-this-exception/141142.rss">I dont understand why the runserver is getting this exception</source>
      </item>
      <item>
        <title>I dont understand why the runserver is getting this exception</title>
        <dc:creator><![CDATA[@bjc22 bjc22]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/bjc22">@bjc22</a> wrote:</p>
          <blockquote>
              <p>can you take a look at my server.java?</p>
<p>[code]//  This file is free software; you can redistribute it and/or modify it under<br>
//  the terms of the GNU General Public License version 2, 1991 as published by<br>
//  the Free Software Foundation.</p>
<p>//  This program is distributed in the hope that it will be useful, but WITHOUT<br>
//  ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS<br>
//  FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more<br>
//  details.</p>
<p>//  A copy of the GNU General Public License can be found at:<br>
//    <a href="http://www.gnu.org/licenses/gpl.html" rel="nofollow noopener">http://www.gnu.org/licenses/gpl.html</a></p>
<p>public class server implements Runnable {</p>
<pre><code>public server()
{
	// the current way of controlling the server at runtime and a great debugging/testing tool
	//jserv js = new jserv(this);
	//js.start();

}

// TODO: yet to figure out proper value for timing, but 500 seems good
public static final int cycleTime = 500;

public static void main(java.lang.String args[])
{
	playerson = new playersOn();
	clientHandler = new server();
	(new Thread(clientHandler)).start();			// launch server listener
	(new Thread(playerson)).start();

	playerHandler = new PlayerHandler();

	int waitFails = 0;
	long lastTicks = System.currentTimeMillis();
	long totalTimeSpentProcessing = 0;
	int cycle = 0;
	BanManager.Initialize();
	while(!shutdownServer) {
		// could do game updating stuff in here...
		// maybe do all the major stuff here in a big loop and just do the packet
		// sending/receiving in the client subthreads. The actual packet forming code
		// will reside within here and all created packets are then relayed by the subthreads.
		// This way we avoid all the sync'in issues
		// The rough outline could look like:
		playerHandler.process();			// updates all player related stuff
		// doNpcs()		// all npc related stuff
		// doObjects()
		// doWhatever()

		// taking into account the time spend in the processing code for more accurate timing
		long timeSpent = System.currentTimeMillis()-lastTicks;
		totalTimeSpentProcessing += timeSpent;
		if(timeSpent &gt;= cycleTime) {
			timeSpent = cycleTime;
			if(++waitFails &gt; 100) {
				shutdownServer = true;
				misc.println("[KERNEL]: machine is too slow to run this server!");
			}
		}

		try { Thread.sleep(cycleTime-timeSpent); } catch(java.lang.Exception _ex) { }
		lastTicks = System.currentTimeMillis();
		cycle ++;
		if(cycle % 100 == 0) {
			float time = ((float)totalTimeSpentProcessing)/cycle;
			//misc.println_debug("[KERNEL]: "+(time*100/cycleTime)+"% processing time");
		}
	}

	// shut down the server
	playerHandler.destruct();
	clientHandler.killServer();
	clientHandler = null;
}

public static server clientHandler = null;			// handles all the clients
public static java.net.ServerSocket clientListener = null;
public static boolean shutdownServer = false;		// set this to true in order to shut down and kill the server
public static boolean shutdownClientHandler;			// signals ClientHandler to shut down
public static int serverlistenerPort = 43594; //43594=default

public static PlayerHandler playerHandler = null;
public static playersOn playerson = null;

public void run()
{
 try
 {
	shutdownClientHandler = false;
	 clientListener = new java.net.ServerSocket(serverlistenerPort, 1, null);
		misc.println("NAME OF SERVER HERE");
		
		while(true)
		{
		 java.net.Socket s = clientListener.accept();
			s.setTcpNoDelay(true);
			
		 String connectingAddress = s.getInetAddress().getHostAddress(); // Hostnames are too long, lets use ips :) - Kevin - Rune-Server.org
		 
			if(clientListener != null)
			{
			 if(!BanManager.BannedAddress(connectingAddress)) // Is ip banned? - Kevin - Rune-Server.org
			 {
			  //misc.println("ClientHandler: Accepted from "+connectingAddress+":"+s.getPort());
				 playerHandler.newPlayerClient(s, connectingAddress);
			 }
			 else
			 {
				//misc.println("ClientHandler: Rejected from "+connectingAddress+":"+s.getPort());
			   s.close(); // Ip is banned, lets simply refuse the connection - Kevin - Rune-Server.org
			 }
			}
		}
	} catch(java.io.IOException ioe) {
		if(!shutdownClientHandler) {
			misc.println("Error: Unable to startup listener on "+serverlistenerPort+" - port already in use?");
		} else {
			misc.println("ClientHandler was shut down.");
		}
	}
}

public void killServer()
{
	try {
		shutdownClientHandler = true;
		if(clientListener != null) clientListener.close();
		clientListener = null;
	} catch(java.lang.Exception __ex) {
		__ex.printStackTrace();
	}
}
</code></pre>
<p>}<br>
[/code][br][size=1]Posted on: September 07, 2007, 04:47:18 PM[/size][hr]Can anyone take a quick look at it so see if it’s “sloppy” I don’t see anything wrong with it myself.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/i-dont-understand-why-the-runserver-is-getting-this-exception/141142/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/i-dont-understand-why-the-runserver-is-getting-this-exception/141142/4</link>
        <pubDate>Sat, 08 Sep 2007 04:05:00 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-141142-4</guid>
        <source url="https://forum.moparisthebest.com/t/i-dont-understand-why-the-runserver-is-getting-this-exception/141142.rss">I dont understand why the runserver is getting this exception</source>
      </item>
      <item>
        <title>I dont understand why the runserver is getting this exception</title>
        <dc:creator><![CDATA[@digzey digzey]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/digzey">@digzey</a> wrote:</p>
          <blockquote>
              <p>from what i see your server.java is messed up or your connection like  he said ^^</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/i-dont-understand-why-the-runserver-is-getting-this-exception/141142/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/i-dont-understand-why-the-runserver-is-getting-this-exception/141142/3</link>
        <pubDate>Sat, 08 Sep 2007 03:43:20 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-141142-3</guid>
        <source url="https://forum.moparisthebest.com/t/i-dont-understand-why-the-runserver-is-getting-this-exception/141142.rss">I dont understand why the runserver is getting this exception</source>
      </item>
      <item>
        <title>I dont understand why the runserver is getting this exception</title>
        <dc:creator><![CDATA[@VB7_Rocks VB7 Rocks]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/vb7_rocks">@VB7_Rocks</a> wrote:</p>
          <blockquote>
              <p>[quote=“bjc22, post:1, topic:141142”]<code>BlakeScape Server: Exception!
java.net.SocketException: Software caused connection abort: recv failed
        at java.net.SocketInputStream.socketRead0(Native Method)
        at java.net.SocketInputStream.read(Unknown Source)
        at java.net.SocketInputStream.read(Unknown Source)
        at client.process(client.java:2006)
        at PlayerHandler.process(PlayerHandler.java:144)
        at server.main(server.java:45)
</code></p>
<p>I thought it was silabs client causing this, But then I only allowed access to play on my webclient. And I still get it. When I go to the lines it goes to something like playerhandler.something or something with packet.</p>
<p>And when people login as no username or pass, they log in as player25 or whatever, Is that whats causing it?</p>
<p>Also im using winterloves, Just in case you fixed something like this before.[/quote]</p>
<p>It looks like the network connection is going away when/before the client tries to read from the socket. I’m pretty sure it’s server side sloppy code, but I can’t give you any more information from the error, sorry.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/i-dont-understand-why-the-runserver-is-getting-this-exception/141142/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/i-dont-understand-why-the-runserver-is-getting-this-exception/141142/2</link>
        <pubDate>Sat, 08 Sep 2007 03:33:43 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-141142-2</guid>
        <source url="https://forum.moparisthebest.com/t/i-dont-understand-why-the-runserver-is-getting-this-exception/141142.rss">I dont understand why the runserver is getting this exception</source>
      </item>
      <item>
        <title>I dont understand why the runserver is getting this exception</title>
        <dc:creator><![CDATA[@bjc22 bjc22]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/bjc22">@bjc22</a> wrote:</p>
          <blockquote>
              <p><code>BlakeScape Server: Exception!
java.net.SocketException: Software caused connection abort: recv failed
        at java.net.SocketInputStream.socketRead0(Native Method)
        at java.net.SocketInputStream.read(Unknown Source)
        at java.net.SocketInputStream.read(Unknown Source)
        at client.process(client.java:2006)
        at PlayerHandler.process(PlayerHandler.java:144)
        at server.main(server.java:45)
</code></p>
<p>I thought it was silabs client causing this, But then I only allowed access to play on my webclient. And I still get it. When I go to the lines it goes to something like playerhandler.something or something with packet.</p>
<p>And when people login as no username or pass, they log in as player25 or whatever, Is that whats causing it?</p>
<p>Also im using winterloves, Just in case you fixed something like this before.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/i-dont-understand-why-the-runserver-is-getting-this-exception/141142/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/i-dont-understand-why-the-runserver-is-getting-this-exception/141142/1</link>
        <pubDate>Sat, 08 Sep 2007 03:31:08 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-141142-1</guid>
        <source url="https://forum.moparisthebest.com/t/i-dont-understand-why-the-runserver-is-getting-this-exception/141142.rss">I dont understand why the runserver is getting this exception</source>
      </item>
  </channel>
</rss>
