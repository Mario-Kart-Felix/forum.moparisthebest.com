<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/pi-skillcapes-client-problem/400952 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Aug 2019 01:15:58 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>[PI] Skillcapes (Client problem) - Runescape - moparisthebest.com</title>
    <meta name="description" content="Hi. 

I&amp;#39;d like to know what&amp;#39;s wrong with clicking on the Wise old man in project insanity. I&amp;#39;ll tell you all what I know, hopefully someone can get me some help. The first thing commented out is the skillcapes. This piec&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="400952.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;[PI] Skillcapes (Client problem)&#39;" href="400952.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/pi-skillcapes-client-problem/400952" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/pi-skillcapes-client-problem/400952" />
<meta property="og:title" content="[PI] Skillcapes (Client problem)" />
<meta name="twitter:title" content="[PI] Skillcapes (Client problem)" />
<meta property="og:description" content="Hi.  I’d like to know what’s wrong with clicking on the Wise old man in project insanity. I’ll tell you all what I know, hopefully someone can get me some help.  The first thing commented out is the skillcapes. This piece of code is the display in this “custom shop”. Showing the slot and cape.  When I have enough coins to buy the skillcapes in my inventory, for some reason the client freezes. But when I have no coins, I am able to open the shop by clicking on the wise old man and view all the sk..." />
<meta name="twitter:description" content="Hi.  I’d like to know what’s wrong with clicking on the Wise old man in project insanity. I’ll tell you all what I know, hopefully someone can get me some help.  The first thing commented out is the skillcapes. This piece of code is the display in this “custom shop”. Showing the slot and cape.  When I have enough coins to buy the skillcapes in my inventory, for some reason the client freezes. But when I have no coins, I am able to open the shop by clicking on the wise old man and view all the sk..." />
<meta property="article:published_time" content="2011-06-26T02:12:06+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="400952.html">[PI] Skillcapes (Client problem)</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/byby1313.html'><span itemprop='name'>byby1313</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-06-26T02:12:06Z'>
            <time itemprop='dateModified' datetime='2016-08-01T12:41:46Z' class='post-time'>
              August 1, 2016, 12:41pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hi.</p>
<p>I’d like to know what’s wrong with clicking on the Wise old man in project insanity. I’ll tell you all what I know, hopefully someone can get me some help.<br>
The first thing commented out is the skillcapes. This piece of code is the display in this “custom shop”. Showing the slot and cape.</p>
<p>When I have enough coins to buy the skillcapes in my inventory, for some reason the client freezes. But when I have no coins, I am able to open the shop by clicking on the wise old man and view all the skillcapes in my client no problem.</p>
<p>On an account with only a few 99s, I am able to have enough coins in my inventory while opening the shop and have it not freeze, but I can not buy a skillcape anyway.</p>
<p>In the code it says it opens up “shop 14”. I checked shops.cfg and shop 14 was not coded.</p>
<p>I may just be making a very easy-to-fix mistake, but here’s the code found in ShopAssistant.java.</p>
<p>What I personally think is that having item 995 in my inventory, it adds a certain model to the shop for a cape (Which one?) (Why?) that I can’t view. I have tried spawning all the capes in the code and none of them made me crash.</p>
<p>EDIT1: I was right! I tried having 1 99 at a time to see which cape crashed me with item 995 (coins) in my inventory. It seem as thought just having coins in my inventory was able to put a item in the shop named “bagged nice tree”. I am now going to find the item ID and search the code for it to see why it comes up.</p>
<p>[code]		/<em>public int[][] skillCapes = {{0,9747,4319,2679},{1,2683,4329,2685},{2,2680,4359,2682},{3,2701,4341,2703},{4,2686,4351,2688},{5,2689,4347,2691},{6,2692,4343,2691},<br>
{7,2737,4325,2733},{8,2734,4353,2736},{9,2716,4337,2718},{10,2728,4335,2730},{11,2695,4321,2697},{12,2713,4327,2715},{13,2725,4357,2727},<br>
{14,2722,4345,2724},{15,2707,4339,2709},{16,2704,4317,2706},{17,2710,4361,2712},{18,2719,4355,2721},{19,2737,4331,2739},{20,2698,4333,2700}};</em>/<br>
public int[] skillCapes = {9747,9753,9750,9768,9756,9759,9762,9801,9807,9783,9798,9804,9780,9795,9792,9774,9771,9777,9786,9810,9765};<br>
public int get99Count() {<br>
int count = 0;<br>
for (int j = 0; j &lt; c.playerLevel.length; j++) {<br>
if (c.getLevelForXP(c.playerXP[j]) &gt;= 99) {<br>
count++;				<br>
}			<br>
}		<br>
return count;<br>
}</p>
<pre><code>	public void setupSkillCapes(int capes, int capes2) {
		synchronized(c) {
			c.getItems().resetItems(3823);
			c.isShopping = true;
			c.myShopId = 14;
			c.getPA().sendFrame248(3824, 3822);
			c.getPA().sendFrame126("Skillcape Shop", 3901);
			
			int TotalItems = 0;
			TotalItems = capes2;
			if (TotalItems &gt; Server.shopHandler.MaxShopItems) {
				TotalItems = Server.shopHandler.MaxShopItems;
			}
			c.getOutStream().createFrameVarSizeWord(53);
			c.getOutStream().writeWord(3900);
			c.getOutStream().writeWord(TotalItems);
			int TotalCount = 0;
			for (int i = 0; i &lt; 21; i++) {
				if (c.getLevelForXP(c.playerXP[i]) &lt; 99)
					continue;
				c.getOutStream().writeByte(1);
				c.getOutStream().writeWordBigEndianA(skillCapes[i] + 2);
				TotalCount++;
			}
			c.getOutStream().endFrameVarSizeWord();
			c.flushOutStream();	
		}
	}
	
	public void skillBuy(int item) {
		int nn = get99Count();
		if (nn &gt; 1)
			nn = 1;
		else
			nn = 0;			
		for (int j = 0; j &lt; skillCapes.length; j++) {
			if (skillCapes[j] == item || skillCapes[j]+1 == item) {
				if (c.getItems().freeSlots() &gt; 1) {
					if (c.getItems().playerHasItem(995,99000)) {
						if (c.getLevelForXP(c.playerXP[j]) &gt;= 99) {
							c.getItems().deleteItem(995, c.getItems().getItemSlot(995), 99000);
							c.getItems().addItem(skillCapes[j] + nn,1);
							c.getItems().addItem(skillCapes[j] + 2,1);
						} else {
							c.sendMessage("You must have 99 in the skill of the cape you're trying to buy.");
						}
					} else {
						c.sendMessage("You need 99k to buy this item.");
					}
				} else {
					c.sendMessage("You must have at least 1 inventory spaces to buy this item.");					
				}				
			}[/code]</code></pre>
      </div>

      <meta itemprop='headline' content='[PI] Skillcapes (Client problem)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/pi-skillcapes-client-problem/400952 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Aug 2019 01:15:59 GMT -->
</html>
