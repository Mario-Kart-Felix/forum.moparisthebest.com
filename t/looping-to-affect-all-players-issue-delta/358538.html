<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/looping-to-affect-all-players-issue-delta/358538 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Aug 2019 15:01:09 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Looping (To affect all players) Issue [Delta] - Runescape - moparisthebest.com</title>
    <meta name="description" content="I&amp;#39;m trying to create a custom clan chat for my server, and whenever the server is supposed to send a message to all players under a certain criteria (Only happens when I use a command that involves clan chat), the user d&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="358538.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Looping (To affect all players) Issue [Delta]&#39;" href="358538.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://i453.photobucket.com/albums/qq256/xxx9234/ffs.png" />
<meta property="og:image" content="http://i453.photobucket.com/albums/qq256/xxx9234/ffs.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/looping-to-affect-all-players-issue-delta/358538" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/looping-to-affect-all-players-issue-delta/358538" />
<meta property="og:title" content="Looping (To affect all players) Issue [Delta]" />
<meta name="twitter:title" content="Looping (To affect all players) Issue [Delta]" />
<meta property="og:description" content="I’m trying to create a custom clan chat for my server, and whenever the server is supposed to send a message to all players under a certain criteria (Only happens when I use a command that involves clan chat), the user disconnects.  This happens for any clan chat related void that sends messages to multiple players, but I’m just going to include my joiningclan() method and ::joinclan command, because the way they send messages to multiple players is similar to the way the other clan chat related..." />
<meta name="twitter:description" content="I’m trying to create a custom clan chat for my server, and whenever the server is supposed to send a message to all players under a certain criteria (Only happens when I use a command that involves clan chat), the user disconnects.  This happens for any clan chat related void that sends messages to multiple players, but I’m just going to include my joiningclan() method and ::joinclan command, because the way they send messages to multiple players is similar to the way the other clan chat related..." />
<meta property="article:published_time" content="2010-09-04T01:51:08+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="358538.html">Looping (To affect all players) Issue [Delta]</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/revengr.html'><span itemprop='name'>revengr</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-09-04T01:51:08Z'>
            <time itemprop='dateModified' datetime='2016-07-31T19:05:34Z' class='post-time'>
              July 31, 2016,  7:05pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I’m trying to create a custom clan chat for my server, and whenever the server is supposed to send a message to all players under a certain criteria (Only happens when I use a command that involves clan chat), the user disconnects.</p>
<p>This happens for any clan chat related void that sends messages to multiple players, but I’m just going to include my joiningclan() method and ::joinclan command, because the way they send messages to multiple players is similar to the way the other clan chat related methods are written.</p>
<p>Command:</p>
<p><code>if(command.startsWith("joinclan")){
                    String otherPName = command.substring(9);
					joiningclan(otherPName);
            }</code></p>
<p>Void:</p>
<p>[code]	public void joiningclan(String otherPName){</p>
<pre><code>	//Begins checking your account				
	if(otherPName.equalsIgnoreCase(playerName))  //If you are trying to join your own clan using the ::joinclan command instead of the ::joinmyclan command
		{
			sM("To join your own clan, type ::joinmyclan.");
			return;
		}
	
	if(inclan != null)  //If you have already joined a clan, and have not left it yet.
		{
			sM("You are already in a clan.");
			return;
		}
		
				//Creates the following so we can check the target account
				int player = PlayerHandler.getPlayerID(otherPName);
				client c = (client) server.playerHandler.players[player];
				
	//Begins checking the target account			
	if(c.hasaclan == 0)  //If the target has not created a clan yet
		{			
			sM("That player has not created a clan chat yet.");
			return;
		}
		
	if(!c.inclan.equalsIgnoreCase(""+otherPName+""))  //If the target is not currently in their own clan
		{
			sM("That person is not currently in their clan chat.");
			return;
		}
			
	//Finished all checks for both accounts
	
					inclan = (""+otherPName+"");
					c.inyourclan += 1;
					
					if(c.inyourclan &gt; 1)
						{
					/*
						This is called after you have been added to the clan.
						If you are the only player in the clan, then it skips the following.
						This makes it so that the server does not check these because there are no players to send the message to.
						Anything besides this condition should be impossible because of the checks made at the beginning of the void,
						unless the owner left after the server checked his clan status, and before this check has been made.
						However, this is either VERY unlikley, or impossible.
						It is here just in-case, I suppose.
					*/
					
						for (Player p : handler.players) 
							{
								
									if ((p != null) || p.isActive)
										{  //Weeds out any players who are nulled or in some way glitched.
								
											client castOn = (client) p;
										
										if (castOn.absX &gt; 0 &amp;&amp; castOn.absY &gt; 0 &amp;&amp; 
										   (castOn != null) &amp;&amp; !castOn.disconnected) { 
										   //Another check to make sure that the player is not glitched in any way.

												if(castOn.inclan.equalsIgnoreCase(inclan))
													{  //Weeds anyone who is not in the same clan as the one you just joined.
														castOn.sM("@gre@"+playerName+" has joined "+inclan+"'s clan.");
													}
											}
										}
							}
						}
					sM("You have joined "+otherPName+"'s clan chat."); //Notifies the player that the executed command was successful.
} //Finally ends the void.[/code]
</code></pre>
<p>I explain the way the void works using comments in the code.<br>
Also, here’s the exception the server throws when I execute the command.</p>
<p><img src="http://i453.photobucket.com/albums/qq256/xxx9234/ffs.png" alt width="537" height="120"></p>
<p>Please help me with this, I’ve been at this for days and I still haven’t found a solution.<br>
I’ll rep++ the shit out of you if you help me solve this issue.</p>
      </div>

      <meta itemprop='headline' content='Looping (To affect all players) Issue [Delta]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/runefreak10.html'><span itemprop='name'>runefreak10</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-09-04T02:06:26Z'>
            <time itemprop='dateModified' datetime='2016-07-31T19:05:34Z' class='post-time'>
              July 31, 2016,  7:05pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Go to line 8631 and tell me what it is.</p>
      </div>

      <meta itemprop='headline' content='Looping (To affect all players) Issue [Delta]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/revengr.html'><span itemprop='name'>revengr</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-09-04T02:12:29Z'>
            <time itemprop='dateModified' datetime='2016-07-31T19:05:34Z' class='post-time'>
              July 31, 2016,  7:05pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <pre><code class="lang-auto">if ((p != null) || p.isActive)</code></pre>
<p>Theres a  {  in the line following it.</p>
      </div>

      <meta itemprop='headline' content='Looping (To affect all players) Issue [Delta]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/runefreak10.html'><span itemprop='name'>runefreak10</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-09-04T02:16:06Z'>
            <time itemprop='dateModified' datetime='2016-07-31T19:05:35Z' class='post-time'>
              July 31, 2016,  7:05pm
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <pre><code class="lang-auto">if (p != null)</code></pre>
<p>Just make it that. I’m not sure what exactly isActive is used for, but I’ve never used it in my server, and I don’t feel like looking up what it does. The rest of the code looks like it should be working, but try that. I’ve had a problem once in the past with using the || and it disconnecting me.</p>
      </div>

      <meta itemprop='headline' content='Looping (To affect all players) Issue [Delta]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/revengr.html'><span itemprop='name'>revengr</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-09-04T02:25:01Z'>
            <time itemprop='dateModified' datetime='2016-07-31T19:05:36Z' class='post-time'>
              July 31, 2016,  7:05pm
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Well, it half worked, and it half didn’t.</p>
<p>I tried it on the online server, and I disconnected again.<br>
But when I tried it on my computer (not online, so no other players on), it worked perfectly fine.</p>
<p>I think its because I made it so if you go inactive, you just stand there saying random, inactive related, messages, instead of logging out.</p>
<p>I’ll try to see if that’s the issue.</p>
<p>Thanks a bunch though. <img src="../../images/emoji/twitter/smileyae52.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"><br>
I’d rep you like I promised, but your maxed out…<br>
If I ever see you below 200, I’ll bring you back up. xD</p>
      </div>

      <meta itemprop='headline' content='Looping (To affect all players) Issue [Delta]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/looping-to-affect-all-players-issue-delta/358538 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Aug 2019 15:01:10 GMT -->
</html>
