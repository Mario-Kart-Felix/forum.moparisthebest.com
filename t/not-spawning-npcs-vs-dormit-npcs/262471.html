<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/not-spawning-npcs-vs-dormit-npcs/262471 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Aug 2019 20:28:52 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Not spawning NPCs vs dormit NPCs - Runescape - moparisthebest.com</title>
    <meta name="description" content="Well, here&amp;#39;s the general idea: 

a) On the server start, I don&amp;#39;t spawn all NPCs but add all the NPCLocs into an array (I&amp;#39;ll call it &amp;quot;notSpawnedNPCs&amp;quot;). Then loop the array to see if any Players are around the &amp;quot;would be&amp;quot; N&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="262471.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Not spawning NPCs vs dormit NPCs&#39;" href="262471.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/not-spawning-npcs-vs-dormit-npcs/262471" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/not-spawning-npcs-vs-dormit-npcs/262471" />
<meta property="og:title" content="Not spawning NPCs vs dormit NPCs" />
<meta name="twitter:title" content="Not spawning NPCs vs dormit NPCs" />
<meta property="og:description" content="Well, here’s the general idea:  a) On the server start, I don’t spawn all NPCs but add all the NPCLocs into an array (I’ll call it “notSpawnedNPCs”). Then loop the array to see if any Players are around the “would be” NPC, and if they are, I’ll spawn the NPC. Upon spawning, I’ll remove them from the notSpawnedNPCs array and add them to npcs array. Same thing goes about respawning.  b) Simply spawn all NPC at start, just like now. When they have to move, I’ll check if anyone is around and if they..." />
<meta name="twitter:description" content="Well, here’s the general idea:  a) On the server start, I don’t spawn all NPCs but add all the NPCLocs into an array (I’ll call it “notSpawnedNPCs”). Then loop the array to see if any Players are around the “would be” NPC, and if they are, I’ll spawn the NPC. Upon spawning, I’ll remove them from the notSpawnedNPCs array and add them to npcs array. Same thing goes about respawning.  b) Simply spawn all NPC at start, just like now. When they have to move, I’ll check if anyone is around and if they..." />
<meta property="article:published_time" content="2009-02-16T07:28:05+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="262471.html">Not spawning NPCs vs dormit NPCs</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Peter.html'><span itemprop='name'>Peter</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-02-16T07:28:05Z'>
            <time itemprop='dateModified' datetime='2016-07-31T05:31:00Z' class='post-time'>
              July 31, 2016,  5:31am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Well, here’s the general idea:</p>
<p>a) On the server start, I don’t spawn all NPCs but add all the NPCLocs into an array (I’ll call it “notSpawnedNPCs”). Then loop the array to see if any Players are around the “would be” NPC, and if they are, I’ll spawn the NPC. Upon spawning, I’ll remove them from the notSpawnedNPCs array and add them to npcs array. Same thing goes about respawning.</p>
<p>b) Simply spawn all NPC at start, just like now. When they have to move, I’ll check if anyone is around and if they are, I’ll make the NPCs move. Otherwise they just sit dormit and do nothing.</p>
<p>My question is… is A) really worth the trouble? Since NPCs don’t do anything except attack/walk making them sit dormit will have the same effect as not spawning them. True, the npcs array would be shorter and looping it would be faster, but the “notSpawnedNPCs” array would have all the NPCs not spawned, meaning you’ll have 2 arrays instead of 1 and the lenght of the 2 is equal to the 1.</p>
      </div>

      <meta itemprop='headline' content='Not spawning NPCs vs dormit NPCs'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/xEnt.html'><span itemprop='name'>xEnt</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-02-16T07:43:51Z'>
            <time itemprop='dateModified' datetime='2016-07-31T05:31:01Z' class='post-time'>
              July 31, 2016,  5:31am
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Some tests.</p>
<pre><code> [java] 2418 NPC's moved in 2ms
 [java] 2418 NPC's moved in 2ms
 [java] 2418 NPC's moved in 2ms
 [java] 2418 NPC's moved in 2ms
 [java] 2418 NPC's moved in 2ms
 [java] 2418 NPC's moved in 3ms
 [java] 2418 NPC's moved in 2ms
 [java] 2418 NPC's moved in 3ms
 [java] 2418 NPC's moved in 2ms
 [java] 2418 NPC's moved in 2ms
 [java] 2418 NPC's moved in 2ms
 [java] 2418 NPC's moved in 2ms
</code></pre>
<p>Each gameengine loop (every 600ms) will iterate over every npc object, but.</p>
<p>public void updatePosition() {<br>
if(now - lastMovement &gt; 6000) {<br>
lastMovement = now;<br>
if(!isBusy() &amp;&amp; finishedPath() &amp;&amp; DataConversions.random(0, 2) == 1) {<br>
super.setPath(new Path(getX(), getY(), DataConversions.random(loc.minX(), loc.maxX()), DataConversions.random(loc.minY(), loc.maxY())));<br>
}<br>
}</p>
<p>It only moves them every 6 seconds, so there is 10:1 ratio of pointless loops.</p>
<p>You could remove updating NPC positions from the 600ms client updater, and add it inside it’s own delayed event every 6 seconds.[br][br][size=1]Posted on: February 16, 2009, 02:23:27 am[/size][hr]     [java] 2ms (Moves even when players are not around)<br>
[java] 13ms (Moves even when players are not around)<br>
[java] 2ms (Moves even when players are not around)<br>
[java] 2ms (Moves even when players are not around)<br>
[java] 1ms (Moves even when players are not around)<br>
[java] 2ms (Moves even when players are not around)<br>
[java] 2ms (Moves even when players are not around)<br>
[java] 3ms (Moves even when players are not around)<br>
[java] 2ms (Moves even when players are not around)<br>
[java] 2ms (Moves even when players are not around)<br>
[java] 2ms (Moves even when players are not around)<br>
[java] 2ms (Moves even when players are not around)<br>
[java] 2ms (Moves even when players are not around)<br>
[java] 2ms (Moves even when players are not around)<br>
[java] 2ms (Moves even when players are not around)<br>
[java] 2ms (Moves even when players are not around)<br>
[java] 2ms (Moves even when players are not around)<br>
[java] 3ms (Moves even when players are not around)<br>
[java] 3ms (Moves even when players are not around)<br>
[java] 13ms (Moves even when players are not around)<br>
[java] 2ms (Moves even when players are not around)<br>
[java] 2ms (Moves even when players are not around)<br>
[java] 2ms (Moves even when players are not around)<br>
[java] 2ms (Moves even when players are not around)<br>
[java] 2ms (Moves even when players are not around)<br>
[java] 2ms (Moves even when players are not around)<br>
[java] 3ms (Moves even when players are not around)<br>
[java] 3ms (Moves even when players are not around)<br>
[java] 3ms (Moves even when players are not around)</p>
<pre><code> [java] 67ms (Doesnt move if no players are around)
 [java] 50ms (Doesnt move if no players are around)
 [java] 48ms (Doesnt move if no players are around)
 [java] 51ms (Doesnt move if no players are around)
 [java] 47ms (Doesnt move if no players are around)
 [java] 48ms (Doesnt move if no players are around)
 [java] 49ms (Doesnt move if no players are around)
 [java] 48ms (Doesnt move if no players are around)
 [java] 48ms (Doesnt move if no players are around)
 [java] 50ms (Doesnt move if no players are around)
 [java] 48ms (Doesnt move if no players are around)
 [java] 48ms (Doesnt move if no players are around)
 [java] 47ms (Doesnt move if no players are around)
 [java] 47ms (Doesnt move if no players are around)
 [java] 47ms (Doesnt move if no players are around)
 [java] 48ms (Doesnt move if no players are around)
 [java] 51ms (Doesnt move if no players are around)
 [java] 47ms (Doesnt move if no players are around)
 [java] 48ms (Doesnt move if no players are around)
</code></pre>
<p>So… checking each npc’s player view is definitely a bad idea.</p>
      </div>

      <meta itemprop='headline' content='Not spawning NPCs vs dormit NPCs'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Peter.html'><span itemprop='name'>Peter</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-02-16T10:59:26Z'>
            <time itemprop='dateModified' datetime='2016-07-31T05:31:13Z' class='post-time'>
              July 31, 2016,  5:31am
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Well, this is a bad idea unless we implement the area system first.</p>
<p>Why the results varied that much:<br>
The check for players in view area checks the tiles of a 16x16 area, which causes the massive slowdown.</p>
<p>Area system + this would be win, cause all you’d have to do is getArea().getPlayers().size() &gt; 0 { spawn/move the NPCs in that area }</p>
      </div>

      <meta itemprop='headline' content='Not spawning NPCs vs dormit NPCs'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/lothy.html'><span itemprop='name'>lothy</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-02-16T11:03:58Z'>
            <time itemprop='dateModified' datetime='2016-07-31T05:31:13Z' class='post-time'>
              July 31, 2016,  5:31am
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Peter, post:3, topic:262471”]Well, this is a bad idea unless we implement the area system first.</p>
<p>Why the results varied that much:<br>
The check for players in view area checks the tiles of a 16x16 area, which causes the massive slowdown.</p>
<p>Area system + this would be win, cause all you’d have to do is getArea().getPlayers().size() &gt; 0 { spawn/move the NPCs in that area }[/quote]<br>
You’d potentially have to check two surrounding areas too (because players may be nearby but on the other side of a border).</p>
      </div>

      <meta itemprop='headline' content='Not spawning NPCs vs dormit NPCs'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/xEnt.html'><span itemprop='name'>xEnt</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-02-16T12:21:05Z'>
            <time itemprop='dateModified' datetime='2016-07-31T05:31:15Z' class='post-time'>
              July 31, 2016,  5:31am
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Lothy, post:4, topic:262471”][quote author=Peter link=topic=346610.msg2669903#msg2669903 date=1234781966]<br>
Well, this is a bad idea unless we implement the area system first.</p>
<p>Why the results varied that much:<br>
The check for players in view area checks the tiles of a 16x16 area, which causes the massive slowdown.</p>
<p>Area system + this would be win, cause all you’d have to do is getArea().getPlayers().size() &gt; 0 { spawn/move the NPCs in that area }</p>
<p>[/quote]<br>
You’d potentially have to check two surrounding areas too (because players may be nearby but on the other side of a border).[/quote]<br>
yeah, in the end too much work for something you don’t know the outcome on.</p>
      </div>

      <meta itemprop='headline' content='Not spawning NPCs vs dormit NPCs'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/not-spawning-npcs-vs-dormit-npcs/262471 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Aug 2019 20:28:53 GMT -->
</html>
