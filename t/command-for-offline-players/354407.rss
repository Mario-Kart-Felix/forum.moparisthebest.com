<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Command for offline players</title>
    <link>https://forum.moparisthebest.com/t/command-for-offline-players/354407</link>
    <description>Ok well i&#39;ve recently made a command that works perfectly fine if the player is online, but the command is no use to me this way.

How would i make it work for offline players only?

I&#39;ve tried
[code]
if(Server.playerHandler.players[i] == null) {
[/code]

and that didn&#39;t work so... Anyone help me out?

Thanks in advance!</description>
    
    <lastBuildDate>Fri, 13 Aug 2010 03:47:44 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/command-for-offline-players/354407.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Command for offline players</title>
        <dc:creator><![CDATA[@Epic_Steve Epic Steve]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/epic_steve">@Epic_Steve</a> wrote:</p>
          <blockquote>
              <p>What about this.</p>
<pre><code class="lang-auto">    public void unbanPlayerIP(String playerName) throws IOException {
        Scanner scanner = new Scanner(new File("PATH TO CHARACTER FILES HERE "+playerName+".txt"));
        scanner.useDelimiter("character-lastconnection =");
        String s = scanner.next().trim();

        File inFile = new File("PATH TO TEXT WITH BANNED IPS HERE");
        File tempFile = new File(inFile.getAbsolutePath() + ".tmp");

        BufferedReader br = new BufferedReader(new FileReader(inFile));
        PrintWriter pw = new PrintWriter(new FileWriter(tempFile));

        String line;
        while ((line = br.readLine()) != null) {
            if (!line.trim().equals(s)) {
                pw.println(line);
            }
        }
        pw.close();
        br.close();
        if (!inFile.delete()) {
            System.out.println("Could not delete file");
            return;
        }
        if (!tempFile.renameTo(inFile)) {
            System.out.println("Could not rename file");
        }
    }</code></pre>
<p>Command (Yes, I Vain I, I stole your command  :P):</p>
<pre><code class="lang-auto">if(command.startsWith("unipban") &amp;&amp; playerRights &gt;= 3) {
        String name = command.substring(6);
        unbanPlayerIP(name);
}</code></pre>
<p>If you read the source code, you’ll see the changes you have to make… PS: That does work I tried it multiple times before.</p>
<p>My character file has this…</p>
<blockquote>character-lastconnection = 127.0.0.1</blockquote>
<p>my test banned IP file has this</p>
<blockquote>535.363
3463
dfgd
127.0.0.1
fgdf
gdfg</blockquote>
<p>After running that method it results as this.</p>
<blockquote>535.363
3463
dfgd
fgdf
gdfg</blockquote>
<p>EDIT:<br>
You’ll need these two imports unless you have them.</p>
<pre><code class="lang-auto">import java.io.*;
import java.util.Scanner;</code></pre>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/command-for-offline-players/354407/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/command-for-offline-players/354407/10</link>
        <pubDate>Fri, 13 Aug 2010 03:47:44 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-354407-10</guid>
        <source url="https://forum.moparisthebest.com/t/command-for-offline-players/354407.rss">Command for offline players</source>
      </item>
      <item>
        <title>Command for offline players</title>
        <dc:creator><![CDATA[@Im_Key Im Key]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/im_key">@Im_Key</a> wrote:</p>
          <blockquote>
              <p>Yeah i did, but i don’t have all the BufferedWriter BufferedReader FileWriter etc.</p>
<p>Anyways uh, i’m off to bed, thanks for help though. Probably the only one that’s in like 9 hours.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/command-for-offline-players/354407/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/command-for-offline-players/354407/9</link>
        <pubDate>Fri, 13 Aug 2010 01:08:54 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-354407-9</guid>
        <source url="https://forum.moparisthebest.com/t/command-for-offline-players/354407.rss">Command for offline players</source>
      </item>
      <item>
        <title>Command for offline players</title>
        <dc:creator><![CDATA[@Im_Key Im Key]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/im_key">@Im_Key</a> wrote:</p>
          <blockquote>
              <p>Ahh, i don’t have all those methods. Damn wow.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/command-for-offline-players/354407/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/command-for-offline-players/354407/8</link>
        <pubDate>Fri, 13 Aug 2010 01:02:41 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-354407-8</guid>
        <source url="https://forum.moparisthebest.com/t/command-for-offline-players/354407.rss">Command for offline players</source>
      </item>
      <item>
        <title>Command for offline players</title>
        <dc:creator><![CDATA[@Im_Key Im Key]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/im_key">@Im_Key</a> wrote:</p>
          <blockquote>
              <p>[quote=“I Vain I”]Well the code only applies to the players ID.</p>
<p>The player doesn’t have an ID if they aren’t connected.</p>
<p>So give me one minute.[/quote]</p>
<p>K, and could you also post the getPlayerID method?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/command-for-offline-players/354407/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/command-for-offline-players/354407/7</link>
        <pubDate>Fri, 13 Aug 2010 00:56:48 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-354407-7</guid>
        <source url="https://forum.moparisthebest.com/t/command-for-offline-players/354407.rss">Command for offline players</source>
      </item>
      <item>
        <title>Command for offline players</title>
        <dc:creator><![CDATA[@Im_Key Im Key]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/im_key">@Im_Key</a> wrote:</p>
          <blockquote>
              <p>[quote=“I Vain I”]Try this?</p>
<pre><code class="lang-auto">if (command.startsWith("unipban")) {
      try {
            String victim = command.substring(9);
            BufferedReader in = new BufferedReader(new FileReader("config//ipbans.txt"));
            BufferedWriter out = new BufferedWriter(new FileWriter("config//ipbans.txt"));
            String unmute = command.substring(6);
            String inFile;

            if (victim != null) {
                        int ID = PlayerHandler.getPlayerID(victim);
                        client p = (client) server.playerHandler.players[ID];

                        while ((inFile = in.readLine()) != null) {
                                    if (inFile.equalsIgnoreCase(unmute)) {
                                    } else {
                                                out.write(inFile);
                                    }
                        }
                        p.disconnected = true;
            }
      } catch (IOException e) {
            e.printStackTrace();
      }
}</code></pre>
<p>Copied out of Delta.</p>
<p>Works for me, so try it.[/quote]</p>
<p>Nah, my methods are totally different and i can’t be bothered to find out what’s what.</p>
<p>But to me looks like it will only work for online players again.</p>
<pre><code class="lang-auto">if (victim != null) {</code></pre>
<p>:((((</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/command-for-offline-players/354407/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/command-for-offline-players/354407/6</link>
        <pubDate>Fri, 13 Aug 2010 00:47:49 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-354407-6</guid>
        <source url="https://forum.moparisthebest.com/t/command-for-offline-players/354407.rss">Command for offline players</source>
      </item>
      <item>
        <title>Command for offline players</title>
        <dc:creator><![CDATA[@Im_Key Im Key]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/im_key">@Im_Key</a> wrote:</p>
          <blockquote>
              <p>[quote=“I Vain I”]<code>
if (otherPIndex != -1) {
</code><br>
Is calling for the other player to not have a negative playerID, (not offline).</p>
<p>So it only works whether the person is online.</p>
<p><span class="mention">@Topic</span>, you could try this:</p>
<pre><code class="lang-auto">if (command.startsWith("ipban") &amp;&amp; playerRights &gt; 7) {
                try {
                    String otherPName = command.substring(6);

                    if (otherPName != null) {
                        client p = (client) server.playerHandler.players;

                        p.writeLog(p.playerLastConnect, "ipbans");
                        p.disconnected = true;
                        sM("You have successfully IP-banned "+p.playerName+"!");
                    } else {
                       sM("The name either doesn't exist, or is an incompatible player-name.");
                    }
                } catch (Exception e) {
                    sM("Try entering a name you want to IP-ban..");
                }
            }</code></pre>
<p>Doubt it will work, but it’s worth a shot.[/quote]</p>
<p>It’s unipban i’m after and i’ve tried everything.</p>
<pre><code class="lang-auto">== null</code></pre>
<pre><code class="lang-auto">disconnected == true</code></pre>
<pre><code class="lang-auto">otherPIndex = -1</code></pre>
<p>Any other suggestions?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/command-for-offline-players/354407/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/command-for-offline-players/354407/5</link>
        <pubDate>Fri, 13 Aug 2010 00:36:31 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-354407-5</guid>
        <source url="https://forum.moparisthebest.com/t/command-for-offline-players/354407.rss">Command for offline players</source>
      </item>
      <item>
        <title>Command for offline players</title>
        <dc:creator><![CDATA[@Dell Dell]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/dell">@Dell</a> wrote:</p>
          <blockquote>
              <p>[code]<br>
if (command.startsWith(“ipban”) &amp;&amp; playerRights &gt; 7) {<br>
try {<br>
String otherPName = command.substring(6);<br>
int otherPIndex = PlayerHandler.getPlayerID(otherPName);</p>
<pre><code>                if (otherPIndex != -1) {
                    client p = (client) server.playerHandler.players[otherPIndex];

		p.writeLog(p.playerLastConnect, "ipbans");
		yell("["+playerName+"] Has Just IP Banned "+p.playerName+"!");
		p.disconnected = true;
		sM("You have ipbanned "+p.playerName+"!");
                } else { 
                   sM("The name doesnt exist."); 
                }
            } catch (Exception e) { 
                sM("Try entering a name you want to ip ban..");
            }
        }[/code]
</code></pre>
<p>That should add the ip straight into bannedips, even if the player is online or offline.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/command-for-offline-players/354407/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/command-for-offline-players/354407/4</link>
        <pubDate>Fri, 13 Aug 2010 00:24:50 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-354407-4</guid>
        <source url="https://forum.moparisthebest.com/t/command-for-offline-players/354407.rss">Command for offline players</source>
      </item>
      <item>
        <title>Command for offline players</title>
        <dc:creator><![CDATA[@Im_Key Im Key]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/im_key">@Im_Key</a> wrote:</p>
          <blockquote>
              <aside class="quote no-group quote-modified" data-post="2" data-topic="354407">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/sageofmali/40/5_513041d5f7104045db30895d3b90af16.png" class="avatar"> sageofmali:</div>
<blockquote>
<p>That isn’t a command.  And commands don’t work offline.  Please explain what you are trying to do with the so called “command”.</p>
</blockquote>
</aside>
<p>I’m pretty sure i explained myself clearly…</p>
<p>I’ve made an unipban command which works 100% for players that are online.</p>
<p>So if i manually add their ip into the bannedips file, and then execute the command it will work.</p>
<p>The problem i’m having is once the player is ip banned, they’re no longer online which means the command doesn’t work, therefore making it useless.</p>
<p>So what would i have to do to make it work on players that are offline only. NOT ONLINE.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/command-for-offline-players/354407/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/command-for-offline-players/354407/3</link>
        <pubDate>Fri, 13 Aug 2010 00:21:02 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-354407-3</guid>
        <source url="https://forum.moparisthebest.com/t/command-for-offline-players/354407.rss">Command for offline players</source>
      </item>
      <item>
        <title>Command for offline players</title>
        <dc:creator><![CDATA[@sageofmali sageofmali]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sageofmali">@sageofmali</a> wrote:</p>
          <blockquote>
              <p>That isn’t a command.  And commands don’t work offline.  Please explain what you are trying to do with the so called “command”.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/command-for-offline-players/354407/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/command-for-offline-players/354407/2</link>
        <pubDate>Fri, 13 Aug 2010 00:14:37 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-354407-2</guid>
        <source url="https://forum.moparisthebest.com/t/command-for-offline-players/354407.rss">Command for offline players</source>
      </item>
      <item>
        <title>Command for offline players</title>
        <dc:creator><![CDATA[@Im_Key Im Key]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/im_key">@Im_Key</a> wrote:</p>
          <blockquote>
              <p>Ok well i’ve recently made a command that works perfectly fine if the player is online, but the command is no use to me this way.</p>
<p>How would i make it work for offline players only?</p>
<p>I’ve tried</p>
<pre><code class="lang-auto">if(Server.playerHandler.players[i] == null) {</code></pre>
<p>and that didn’t work so… Anyone help me out?</p>
<p>Thanks in advance!</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/command-for-offline-players/354407/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/command-for-offline-players/354407/1</link>
        <pubDate>Thu, 12 Aug 2010 23:32:24 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-354407-1</guid>
        <source url="https://forum.moparisthebest.com/t/command-for-offline-players/354407.rss">Command for offline players</source>
      </item>
  </channel>
</rss>
