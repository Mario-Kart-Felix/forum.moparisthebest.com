<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/entity-framework-n-tier-asp-net-mvc-questions/548769 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:05:51 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Entity Framework / N-Tier / ASP.NET MVC questions - General Programming - moparisthebest.com</title>
    <meta name="description" content="Since I have already had a few questions and probably will have more in the near future, I&amp;#39;ll post them in this topic instead of filling the section with garbage. 

I am trying to create a simple forum using the technolo&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="548769.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Entity Framework / N-Tier / ASP.NET MVC questions&#39;" href="548769.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/entity-framework-n-tier-asp-net-mvc-questions/548769" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/entity-framework-n-tier-asp-net-mvc-questions/548769" />
<meta property="og:title" content="Entity Framework / N-Tier / ASP.NET MVC questions" />
<meta name="twitter:title" content="Entity Framework / N-Tier / ASP.NET MVC questions" />
<meta property="og:description" content="Since I have already had a few questions and probably will have more in the near future, I’ll post them in this topic instead of filling the section with garbage.  I am trying to create a simple forum using the technologies listed in the title. Since we went over this stuff rather quick in our courses, I’m not quite sure about some concepts.  My solution consists of four projects:   BL (business logic) BL.Domain (the data classes) DAL (data access layer) (has the Entity Framework installed) UI.M..." />
<meta name="twitter:description" content="Since I have already had a few questions and probably will have more in the near future, I’ll post them in this topic instead of filling the section with garbage.  I am trying to create a simple forum using the technologies listed in the title. Since we went over this stuff rather quick in our courses, I’m not quite sure about some concepts.  My solution consists of four projects:   BL (business logic) BL.Domain (the data classes) DAL (data access layer) (has the Entity Framework installed) UI.M..." />
<meta property="article:published_time" content="2014-12-27T08:47:35+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="548769.html">Entity Framework / N-Tier / ASP.NET MVC questions</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/general-programming.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>General Programming</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Kattoor.html'><span itemprop='name'>Kattoor</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-12-27T08:47:35Z'>
            <time itemprop='dateModified' datetime='2016-08-04T14:08:53Z' class='post-time'>
              August 4, 2016,  2:08pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Since I have already had a few questions and probably will have more in the near future, I’ll post them in this topic instead of filling the section with garbage.</p>
<p>I am trying to create a simple forum using the technologies listed in the title. Since we went over this stuff rather quick in our courses, I’m not quite sure about some concepts.</p>
<p>My solution consists of four projects:</p>
<ul>
<li>BL (business logic)</li>
<li>BL.Domain (the data classes)</li>
<li>DAL (data access layer) (has the Entity Framework installed)</li>
<li>UI.MVC (web application)</li>
</ul>
<p>I have a table of Categories, Topics, Posts, Members and Milestones.</p>
<p>In the DAL I have a <span class="bbcode-i">repository</span> class which interacts with the EF-created database (SQL) through a DbContext.<br>
In the BL I have a <span class="bbcode-i">manager</span> class which interacts with the repository in the DAL project.<br>
In the UI.MVC I have multiple controllers which interact with the manager located in the BL project.</p>
<p>First question (about BL and DAL)<br>
[spoiler]<br>
Should I create multiple repositories or just one? ForumRepo (containing Categories, Topics and Posts), AccountRepo and MilestoneRepo or just one repository handling all of this? Same question for the manager in the DAL project.<br>
Currently I have just one global repo and manager class that handle all data. I used generics to be able to write fewer methods, is this a good practice?</p>
<p>BL.ForumManager<br>
<a href="http://pastebin.com/42MuT4Da" data-bbcode="true" rel="nofollow noopener">See code</a><br>
DAL.ForumRepository<br>
<a href="http://pastebin.com/1zx60286" data-bbcode="true" rel="nofollow noopener">See code</a><br>
[/spoiler]</p>
<p>Thanks for your time!</p>
      </div>

      <meta itemprop='headline' content='Entity Framework / N-Tier / ASP.NET MVC questions'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Protosstribe.html'><span itemprop='name'>Protosstribe</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-12-27T10:47:00Z'>
            <time itemprop='dateModified' datetime='2016-08-04T14:08:53Z' class='post-time'>
              August 4, 2016,  2:08pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>It’s less complicated if you separate the Repositories and Managers. See Separation of Concerns (SoC).</p>
      </div>

      <meta itemprop='headline' content='Entity Framework / N-Tier / ASP.NET MVC questions'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/lothy.html'><span itemprop='name'>lothy</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-12-27T11:42:06Z'>
            <time itemprop='dateModified' datetime='2016-08-04T14:08:54Z' class='post-time'>
              August 4, 2016,  2:08pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I’m not convinced that there should be strict separation between the DAL and UI layers.<br>
Purists, and academics, might hold the view that it should be UI -&gt; BLL -&gt; DAL. In practice though you’ll be performing a lot of very simple CRUD operations that simply require no real logic before use (e.g.: getting a list of topics for a page, ordered by latest post descending).</p>
<p>I’m not sure why you would have any repositories when working with Entity Framework. The EF idiom is essentially one DbContext gives you everything (when you extend the DbContext base class your child class has a number of virtual DbSet properties which allow you to access the underlying data model).<br>
So it should end up looking something like this:</p>
<p>So say you’re viewing page two of a particular forum section. You want to see 20 topics per page, and you want to see them ordered from the most recently active to the least recently active (that is, topics with recent replies are shown first).<br>
The code could look something like this:</p>
<pre><code class="lang-auto">using (var db = new ChildDataContext())
{
  // Skip page 1 (by skipping the top 20 results) and then get the next 20 results (by taking 20 results).
  var topics = db.Topics.Where(x =&gt; x.ForumSectionId == CurrentForumSectionId).OrderByDescending(x =&gt; x.LastPostTime).Skip(20).Take(20);
}</code></pre>
      </div>

      <meta itemprop='headline' content='Entity Framework / N-Tier / ASP.NET MVC questions'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Kattoor.html'><span itemprop='name'>Kattoor</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-12-31T11:01:58Z'>
            <time itemprop='dateModified' datetime='2016-08-04T14:09:24Z' class='post-time'>
              August 4, 2016,  2:09pm
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="3" data-topic="548769">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forum.moparisthebest.com/lothy/40/51_1.png" class="avatar"> Lothy:</div>
<blockquote>
<p>I’m not convinced that there should be strict separation between the DAL and UI layers.</p>
</blockquote>
</aside>
<p>So you would remove the DAL and install the EF in the UI?<br>
What if you had multiple UI’s?</p>
<aside class="quote" data-post="3" data-topic="548769">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/forum.moparisthebest.com/lothy/40/51_1.png" class="avatar"> Lothy:</div>
<blockquote>
<p>I’m not sure why you would have any repositories when working with Entity Framework. The EF idiom is essentially one DbContext gives you everything (when you extend the DbContext base class your child class has a number of virtual DbSet properties which allow you to access the underlying data model).</p>
</blockquote>
</aside>
<p>Thanks! In our courses we started with <a href="http://ado.net/" rel="nofollow noopener">ADO.NET</a> and then converted the project to work with the EF. Our teacher probably didn’t want to remove the repository…</p>
<aside class="quote" data-post="2" data-topic="548769">
<div class="title">
<div class="quote-controls"></div>
 object:</div>
<blockquote>
<p>It’s less complicated if you separate the Repositories and Managers. See Separation of Concerns (SoC).</p>
</blockquote>
</aside>
<p>Right now I have two classes in my BL: IForumManager (interface) and ForumManager (implements the interface).<br>
You would remove the ‘ForumManager’ class and split it up in classes like ‘MemberManager’, ‘MilestoneManager’, ‘CategoryManager’, ‘TopicManager’ and ‘PostManager’?<br>
That’s too bad, I really liked being able to do things like <span class="bbcode-i">manager.Get(id).Name</span> and such <img src="../../images/emoji/twitter/stuck_out_tongueae52.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
<p>Thanks for your input guys!</p>
      </div>

      <meta itemprop='headline' content='Entity Framework / N-Tier / ASP.NET MVC questions'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/entity-framework-n-tier-asp-net-mvc-questions/548769 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:05:51 GMT -->
</html>
