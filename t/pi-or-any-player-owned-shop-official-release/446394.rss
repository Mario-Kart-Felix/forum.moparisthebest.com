<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>[PI or any] Player Owned Shop official release</title>
    <link>https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394</link>
    <description>[img]http://img534.imageshack.us/img534/9294/posb.png[/img]
[img]http://img90.imageshack.us/img90/4535/pos2.png[/img]
[img]http://img834.imageshack.us/img834/1020/pos3.png[/img]
[img]http://img26.imageshack.us/img26/4783/pos4.png[/img]
[img]http://img809.imageshack.us/img809/4829/pos5.png[/img]
-----------------------------------------------------------------------------------------

Welcome to PasiipaZ&#39;s Tut (Didn&#39;t make it.): how to include Player Owned Shops on your server!

Made with notepad so layout isnt the best, but it does the thing! 
READ EVERY LITTLE DETAIL OR YOU WILL GET ERRORS!
-----------------------------------------------------------------------------------------
Lets start with saving! Open your player.java and add these variables:
[code]	public int sellingId;
	public int sellingN;
	public int sellingS;
	public int playerCollect;
	public int playerShop[] = new int[10];
	public int playerShopN[] = new int[10];
	public int playerShopP[] = new int[10];
	public Client myShopClient;[/code]
They basically stores item ids, item amount etc. You can easily higher the maxium
amount of items for sale, but i liked 10! 

open PlayerSave.java and put this on loading (like above &quot;} else if (token.equals(&quot;EP&quot;)) {&quot;):
[code]		} else if (token.equals(&quot;shopcollect&quot;)) {
		p.playerCollect = Integer.parseInt(token2);[/code]
then search for &quot;readmode =&quot; and add this with the others:

} else if (line.equals(&quot;[SHOP]&quot;)) { ReadMode = 10;

also, if you scroll up a bit you&#39;ll see &quot;break;&quot;
below it add this:
[code]	case 10:
		if (token.equals(&quot;character-shop&quot;)) {
			p.playerShop[Integer.parseInt(token3[0])] = Integer.parseInt(token3[1]);
			p.playerShopP[Integer.parseInt(token3[0])] = Integer.parseInt(token3[2]);
			p.playerShopN[Integer.parseInt(token3[0])] = Integer.parseInt(token3[3]);
		} 
	break;[/code]
Then for the saving, because theres nothing to load if no saving!

scroll down a bit until you see something like this: 
[code]	characterfile.write(&quot;character-rights = &quot;, 0, 19);
	characterfile.write(Integer.toString(p.playerRights), 0, Integer.toString(p.playerRights).length());
	characterfile.newLine();[/code]
under it add this:
[code]	characterfile.write(&quot;shopcollect = &quot;, 0, 14);
	characterfile.write(Integer.toString(p.playerCollect), 0, Integer.toString(p.playerCollect).length());
	characterfile.newLine();[/code]
then for the last part with saving, search for /*ignores*/ (down), its commented out in most of the PI:s

add this above /*ignores*/
[code]		/*SHOP*/
			characterfile.write(&quot;[SHOP]&quot;, 0, 6);
			characterfile.newLine();
			for (int i = 0; i &lt; p.playerShop.length; i++) {
				if (p.playerShop[i] &gt; 0) {
					characterfile.write(&quot;character-shop = &quot;, 0, 17);
					characterfile.write(Integer.toString(i), 0, Integer.toString(i).length());
					characterfile.write(&quot;	&quot;, 0, 1);
					characterfile.write(Integer.toString(p.playerShop[i]), 0, Integer.toString(p.playerShop[i]).length());
					characterfile.write(&quot;	&quot;, 0, 1);
					characterfile.write(Integer.toString(p.playerShopP[i]), 0, Integer.toString(p.playerShopP[i]).length());
					characterfile.write(&quot;	&quot;, 0, 1);
					characterfile.write(Integer.toString(p.playerShopN[i]), 0, Integer.toString(p.playerShopN[i]).length());
					characterfile.newLine();
				}
			}
			characterfile.newLine();[/code]
Time to add actual shopping system!  Open shopassistant.java

under public double getItemShopValue(int ItemID, int Type, int fromSlot) { add
[code]		if(c.myShopId == 7390){
			return c.myShopClient.playerShopP[fromSlot];
		}[/code]
and add all these methods :D
[code]	public void openPlayerShop(Client o){	
		if(o == null || o.properLogout)
			return;	
		c.getItems().resetItems(3823);
		resetShop(o);
		c.myShopClient = o;
		c.myShopId = 7390;
		c.isShopping = true;
		c.getPA().sendFrame248(3824, 3822);
		c.getPA().sendFrame126(o.playerName+&quot;s shop!&quot;, 3901);
	}
	public int[] fixArray(int[] array){
		int arrayPos = 0;
		int[] newArray = new int[array.length];
		for(int x = 0; x &lt; array.length; x++){
			if(array[x] != 0){
				newArray[arrayPos] = array[x];
				arrayPos++;
			}
		}
		return newArray;
	}

	public void fixShop(Client o){
		o.playerShop = fixArray(o.playerShop);
		o.playerShopN = fixArray(o.playerShopN);
		o.playerShopP = fixArray(o.playerShopP);	
	}

	public void resetShop(Client o) {
		synchronized(c) {
			fixShop(o);
			for (int x = 0; x &lt; 10; x++) {
				if (o.playerShopN[x] &lt;= 0) {
					o.playerShop[x] = 0;
				}
			}
			int TotalItems = 0;
			for (int i = 0; i &lt; 10; i++) {
				if (o.playerShop[i] &gt; 0) {
					TotalItems++;
				}
			}
			if (TotalItems &gt; 10) {
				TotalItems = 10;
			}
			c.getOutStream().createFrameVarSizeWord(53);
			c.getOutStream().writeWord(3900);
			c.getOutStream().writeWord(TotalItems);
 			int TotalCount = 0;
			for (int i = 0; i &lt; o.playerShop.length; i++) {
				if (o.playerShop[i] &gt; 0) {
					if (o.playerShopN[i] &gt; 254) {
						c.getOutStream().writeByte(255); 					
						c.getOutStream().writeDWord_v2(o.playerShopN[i]);	
					} else {
						c.getOutStream().writeByte(o.playerShopN[i]);
					}
					c.getOutStream().writeWordBigEndianA((o.playerShop[i]+1));
					TotalCount++;
				}
				if (TotalCount &gt; TotalItems) {
					break;
				}
			}
			c.getOutStream().endFrameVarSizeWord();
			c.flushOutStream();	
		}
	}[/code]
You may now think like &quot;fix shop..? what?!&quot; well its to resort your array, like you have
item on slot 1, 2 and 3 and someone buys all out from 2 then there would be empty space,
not nice IMO so that fixs the problem and moves them all =)

search for &quot;buyFromShopPrice&quot;

add this under:
[code]		if (c.myShopId == 7390 &amp;&amp; c.myShopClient != null &amp;&amp; !c.myShopClient.playerName.equals(c.playerName)) {
			c.sendMessage(c.getItems().getItemName(removeId)+&quot;: currently costs &quot; + c.myShopClient.playerShopP[removeSlot] + &quot; coins.&quot;);
			return;
		}else if (c.myShopId == 7390 &amp;&amp; c.myShopClient != null &amp;&amp; c.myShopClient.playerName.equals(c.playerName)) {
			c.sendMessage(c.getItems().getItemName(removeId)+&quot;: currently costs &quot; + c.playerShopP[removeSlot] + &quot; coins.&quot;);
			return;
		}[/code]
then search for &quot;sellToShopPrice&quot;

and under it add:
[code]	if(c.myShopId == 7390){
		c.sendMessage(&quot;You choose your price when using POS.&quot;);
		return;
	}[/code]
then scroll down a lil or search for &quot;sellItem&quot; and under add 
[code]		if(c.myShopId == 7390){
			for (int i : Config.ITEM_TRADEABLE)  {
				if(i == itemID) {
					c.sendMessage(&quot;You can&#39;t sell this item.&quot;);
					return false;
				}		
			}
			if(c.playerName.equals(c.myShopClient.playerName)){
			c.sellingId = itemID;
			c.sellingN = amount;
			c.sellingS = fromSlot;
			c.xInterfaceId = 7390;
			c.outStream.createFrame(27);
			}else{
				c.sendMessage(&quot;You can only sell items on your own store.&quot;);
			}
			return true;
		}[/code]
then for the last part this class

search for buyItem and under it add alll this:
[code]		if(c.myShopId == 7390 &amp;&amp; c.myShopClient != null &amp;&amp; !c.myShopClient.properLogout &amp;&amp; !c.playerName.equals(c.myShopClient.playerName)){
			int bought = 0;
			int price = c.myShopClient.playerShopP[fromSlot];
			if(amount &gt; c.myShopClient.playerShopN[fromSlot])
				amount = c.myShopClient.playerShopN[fromSlot];
			for(int x = 0; x &lt; amount; x++){
				if(c.getItems().playerHasItem(995, c.myShopClient.playerShopP[fromSlot]) &amp;&amp; c.getItems().freeSlots() &gt; 0){
					c.getItems().deleteItem2(995, c.myShopClient.playerShopP[fromSlot]);
					c.getItems().addItem(c.myShopClient.playerShop[fromSlot], 1);
					c.myShopClient.playerShopN[fromSlot]--;
					c.myShopClient.playerCollect += c.myShopClient.playerShopP[fromSlot];
					if(c.myShopClient.playerShopN[fromSlot] == 0){
						c.myShopClient.playerShop[fromSlot] = 0;
						c.myShopClient.playerShopP[fromSlot] = 0;
					}
					bought++;
				}else{
					c.sendMessage(&quot;Not enought space or money.&quot;);
					break;
				}
			}
			if(bought &gt; 0){
			resetShop(c.myShopClient);
			c.getItems().resetItems(3823);;
			c.sendMessage(&quot;You just bought &quot;+bought+&quot; &quot;+c.getItems().getItemName(itemID)+&quot; for &quot;+ (bought*price));
			c.myShopClient.sendMessage(c.playerName+&quot; has bought &quot;+bought+&quot; &quot;+c.getItems().getItemName(itemID)+&quot; from you!&quot;);
			c.myShopClient.sendMessage(&quot;You now have &quot;+c.myShopClient.playerCollect+&quot; coins to collect (::collect)&quot;);
			}
			return false;
		}else if(c.myShopId == 7390 &amp;&amp; c.myShopClient != null &amp;&amp; !c.myShopClient.properLogout &amp;&amp; c.playerName.equals(c.myShopClient.playerName)){
			if(amount &gt; c.myShopClient.playerShopN[fromSlot])
				amount = c.myShopClient.playerShopN[fromSlot];
			for(int x = 0; x &lt; amount; x++){
				if(c.getItems().freeSlots() &gt; 0){
					c.getItems().addItem(c.myShopClient.playerShop[fromSlot], 1);
					c.myShopClient.playerShopN[fromSlot]--;
					if(c.myShopClient.playerShopN[fromSlot] == 0){
						c.myShopClient.playerShop[fromSlot] = 0;
						c.myShopClient.playerShopP[fromSlot] = 0;
						fixShop(c);
					}
				}else{
					c.sendMessage(&quot;Not enought space.&quot;);
					break;
				}
			}
			resetShop(c.myShopClient);
			c.getItems().resetItems(3823);
			return false;
		}else if(c.myShopId == 7390){
			return false;
		}[/code]
now open BankX2(at packets) and add following under &quot;int Xamount
[code]		if(c.sellingId &gt; 0 &amp;&amp; c.sellingN &gt; 0 &amp;&amp; c.xInterfaceId == 7390){
			for (int i : Config.ITEM_TRADEABLE)  {
				if(i == c.sellingId) {
					c.sendMessage(&quot;You can&#39;t sell this item.&quot;);
					c.sellingId = 0;
					c.sellingN = 0;
					c.sellingS = 0;
					return;
				}		
			}
			if(c.sellingN &gt; c.getItems().getItemAmount(c.sellingId))
				c.sellingN = c.getItems().getItemAmount(c.sellingId);
			int slot = -1;
			for(int x = 0; x &lt; 10; x++){
				if(c.playerShop[x] == 0){
					slot = x;
					break;
				}
			}
			if(slot == -1){
				c.sendMessage(&quot;You can only be selling 10 items at once!&quot;);
				c.sellingId = 0;
				c.sellingN = 0;
				c.sellingS = 0;
				return;
			}
			if(c.getItems().playerHasItem(c.sellingId, c.sellingN, c.sellingS)){
				c.getItems().deleteItem2(c.sellingId, c.sellingN);
				c.playerShop[slot] = c.sellingId;
				c.playerShopN[slot] = c.sellingN;
				c.playerShopP[slot] = Xamount;
				c.sendMessage(&quot;You put your items on sale.&quot;);
				c.sendMessage(&quot;Check your items by using ::myshop and collect coins ::collect&quot;);
			}
			c.getShops().openPlayerShop(c);
			c.sellingId = 0;
			c.sellingN = 0;
			c.sellingS = 0;
			return;
		}[/code]
also import server.Config;

Time to open commands.java and add these commands:
[code]		if(playerCommand.equalsIgnoreCase(&quot;collect&quot;)){
			if(c.playerCollect &gt; 0){
			c.sendMessage(&quot;You succesfully collected &quot;+c.playerCollect+&quot; coins.&quot;);
			c.getItems().addItem(995, c.playerCollect);
			c.playerCollect = 0;
			}else{
			c.sendMessage(&quot;You dont have anything to collect&quot;);
			}
		}
		if(playerCommand.equalsIgnoreCase(&quot;myshop&quot;)){
			c.getShops().openPlayerShop(c);
		}[/code]
The original code was 
[code]		if(playerCommand.equalsIgnoreCase(&quot;collect&quot;)){
			if(c.playerCollect &gt; 0){
			c.sendMessage(&quot;You succesfully collected &quot;+c.playerCollect+&quot; coins.&quot;);
			c.getItems().addItem(995, c.playerCollect);
			c.playerCollect = 0;
			}else{
			c.sendMessage(&quot;You dont have anything to collect&quot;);
			}
		}
		if(playerCommand.equalsIgnoreCase(&quot;myshop&quot;)){
			if(c.absX &gt; 2527 &amp;&amp; c.absX &lt; 2634 &amp;&amp; c.absY &gt; 3066 &amp;&amp; c.absY &lt; 3115){
			c.getShops().openPlayerShop(c);
			}else
			c.sendMessage(&quot;You can only view your shops in home.&quot;);
		}[/code]
but i thought it was stupid making your shop only editable in home.

then for right click shopping, open combatAssistant, yes you readed right! combatAssistant
Oh, you&#39;re asking why? because &quot;View shop&quot; button is actually attack button replaced with
view shop so no client changes are needed!  No worries, it wont attack anyone nor cause
any bugs! 

search for checkreqs() { and under &quot;if(Server.playerHandler.players[c.playerIndex] == null) {
return false;
}&quot;
add this:
[code]		if(!Server.playerHandler.players[c.playerIndex].inWild() &amp;&amp; !Server.playerHandler.players[c.playerIndex].inDuelArena()) {
			c.getShops().openPlayerShop((Client)Server.playerHandler.players[c.playerIndex]);
			c.getCombat().resetPlayerAttack();
			return false;
		}[/code]
One more thing before we are done!  Open client.java and search for &quot;getPA().showOption(3, 0, &quot;Attack&quot;, 1);&quot;

Under it add:
[code]		} else if (!inWild() &amp;&amp; !inDuelArena() &amp;&amp; safeTimer &lt;= 0 &amp;&amp; !inGWD() &amp;&amp; !inPcBoat() &amp;&amp; !inPcGame()){ //this makes it so attack option is visible on wild and challenge in duel =)
		getPA().showOption(3, 0, &quot;View shop&quot;, 1);
getPA().walkableInterface(-1);[/code]
AND YOU&#39;RE DONE!
Congrats i didn&#39;t make this i am just posting it on Mopar because it didn&#39;t have anything like this, so I thought you guys might want it.
You could also make an npc that opens the shops instead of commands witch is what i will be doing very soon. I will edit this post when I finish it so you guys could have the code too. Have fun with your player owned shops!</description>
    
    <lastBuildDate>Sat, 23 Jun 2012 01:12:10 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>[PI or any] Player Owned Shop official release</title>
        <dc:creator><![CDATA[@zyle1992 Zymus]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/zyle1992">@zyle1992</a> wrote:</p>
          <blockquote>
              <p>[quote=“nikolaww3, post:20, topic:446394”][quote author=zyle1992 link=topic=549261.msg4026954#msg4026954 date=1340411816]<br>
Did you get permission from him to post this?<br>
[/quote]No i did not but most of the people on this site are leachers.[/quote]</p>
<p>This does not excuse anyone from the consequences of performing the same acts.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394/21">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394/21</link>
        <pubDate>Sat, 23 Jun 2012 01:12:10 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-446394-21</guid>
        <source url="https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394.rss">[PI or any] Player Owned Shop official release</source>
      </item>
      <item>
        <title>[PI or any] Player Owned Shop official release</title>
        <dc:creator><![CDATA[@nikolaww3 nikolaww3]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/nikolaww3">@nikolaww3</a> wrote:</p>
          <blockquote>
              <p>[quote=“zyle1992, post:19, topic:446394”]Did you get permission from him to post this?[/quote]No i did not but most of the people on this site are leachers.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394/20">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394/20</link>
        <pubDate>Sat, 23 Jun 2012 00:59:36 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-446394-20</guid>
        <source url="https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394.rss">[PI or any] Player Owned Shop official release</source>
      </item>
      <item>
        <title>[PI or any] Player Owned Shop official release</title>
        <dc:creator><![CDATA[@zyle1992 Zymus]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/zyle1992">@zyle1992</a> wrote:</p>
          <blockquote>
              <p>Did you get permission from him to post this?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394/19">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394/19</link>
        <pubDate>Sat, 23 Jun 2012 00:36:56 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-446394-19</guid>
        <source url="https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394.rss">[PI or any] Player Owned Shop official release</source>
      </item>
      <item>
        <title>[PI or any] Player Owned Shop official release</title>
        <dc:creator><![CDATA[@drubrkletern drubrkletern]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/drubrkletern">@drubrkletern</a> wrote:</p>
          <blockquote>
              <p>[quote=“nikolaww3, post:14, topic:446394”][quote author=sssylasss link=topic=549261.msg4026879#msg4026879 date=1340407121]</p>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<p>Releasing other peoples tutorials won’t get you any rep.<br>
[/quote]So you’re saying you made this right? Cause a coded named Light-X gave me These codes that he made by him self, So how can you make this…<br>
you made it? ill remove it just so your dumb ass can be happy</p>
</blockquote>
</aside>
<p>You’re a fucking idiot, I didn’t say I made it, and your stupid ass friend didn’t make it either</p>
<p>Some Russian faggot made it, Posipos or some shit.</p>
</blockquote>
</aside>
<p>So why would you write, “Releasing other peoples tutorials won’t get you any rep.” why did you release it I don’t give a fuck for rep it can go suck my dick, if it wanted to.</p>
</blockquote>
</aside>
<p>It doesnt want to.<br>
[/quote][quote author=drubrkletern link=topic=549261.msg4026902#msg4026902 date=1340408942]<br>
Lol I love the little “if it wanted to” he just sticks at the end of that.</p>
<p>Lock now since op deleted tut?</p>
</blockquote>
</aside>
<p>you guys are straight up buckets.[/quote]<br>
And you are a jug sir</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394/18">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394/18</link>
        <pubDate>Sat, 23 Jun 2012 00:14:16 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-446394-18</guid>
        <source url="https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394.rss">[PI or any] Player Owned Shop official release</source>
      </item>
      <item>
        <title>[PI or any] Player Owned Shop official release</title>
        <dc:creator><![CDATA[@asshole_rule asshole_rule]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/asshole_rule">@asshole_rule</a> wrote:</p>
          <blockquote>
              <aside class="quote quote-modified" data-post="16" data-topic="446394">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/itai/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> itai:</div>
<blockquote>
<p>This is not you’re code, this is PasiipaZ’s code. I will be notifying him when he gets on msn/skype.</p>
</blockquote>
</aside>
<p>Yea that guy, I knew his name was something with a P.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394/17">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394/17</link>
        <pubDate>Sat, 23 Jun 2012 00:12:53 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-446394-17</guid>
        <source url="https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394.rss">[PI or any] Player Owned Shop official release</source>
      </item>
      <item>
        <title>[PI or any] Player Owned Shop official release</title>
        <dc:creator><![CDATA[@itai itai]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/itai">@itai</a> wrote:</p>
          <blockquote>
              <p>This is not you’re code, this is PasiipaZ’s code. I will be notifying him when he gets on msn/skype.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394/16">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394/16</link>
        <pubDate>Sat, 23 Jun 2012 00:09:31 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-446394-16</guid>
        <source url="https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394.rss">[PI or any] Player Owned Shop official release</source>
      </item>
      <item>
        <title>[PI or any] Player Owned Shop official release</title>
        <dc:creator><![CDATA[@asshole_rule asshole_rule]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/asshole_rule">@asshole_rule</a> wrote:</p>
          <blockquote>
              <p>[quote=“nikolaww3, post:11, topic:446394”][quote author=asshole_rule link=topic=549261.msg4026676#msg4026676 date=1340393274]</p>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<p>Releasing other peoples tutorials won’t get you any rep.<br>
[/quote]So you’re saying you made this right? Cause a coded named Light-X gave me These codes that he made by him self, So how can you make this…<br>
you made it? ill remove it just so your dumb ass can be happy</p>
</blockquote>
</aside>
<p>You’re a fucking idiot, I didn’t say I made it, and your stupid ass friend didn’t make it either</p>
<p>Some Russian faggot made it, Posipos or some shit.</p>
</blockquote>
</aside>
<p>So why would you write, “Releasing other peoples tutorials won’t get you any rep.” why did you release it I don’t give a fuck for rep it can go suck my dick, if it wanted to.[/quote]</p>
<p>I didn’t release it, wtf are you talking about.</p>
<p>ITS NOT MY CODE.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394/15">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394/15</link>
        <pubDate>Fri, 22 Jun 2012 23:59:40 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-446394-15</guid>
        <source url="https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394.rss">[PI or any] Player Owned Shop official release</source>
      </item>
      <item>
        <title>[PI or any] Player Owned Shop official release</title>
        <dc:creator><![CDATA[@nikolaww3 nikolaww3]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/nikolaww3">@nikolaww3</a> wrote:</p>
          <blockquote>
              <p>[quote=“sssylasss, post:12, topic:446394”][quote author=nikolaww3 link=topic=549261.msg4026866#msg4026866 date=1340406180]</p>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<p>Releasing other peoples tutorials won’t get you any rep.<br>
[/quote]So you’re saying you made this right? Cause a coded named Light-X gave me These codes that he made by him self, So how can you make this…<br>
you made it? ill remove it just so your dumb ass can be happy</p>
</blockquote>
</aside>
<p>You’re a fucking idiot, I didn’t say I made it, and your stupid ass friend didn’t make it either</p>
<p>Some Russian faggot made it, Posipos or some shit.</p>
</blockquote>
</aside>
<p>So why would you write, “Releasing other peoples tutorials won’t get you any rep.” why did you release it I don’t give a fuck for rep it can go suck my dick, if it wanted to.</p>
</blockquote>
</aside>
<p>It doesnt want to.[/quote][quote=“drubrkletern, post:13, topic:446394”]Lol I love the little “if it wanted to” he just sticks at the end of that.</p>
<p>Lock now since op deleted tut?[/quote]<br>
you guys are straight up buckets.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394/14">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394/14</link>
        <pubDate>Fri, 22 Jun 2012 23:59:19 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-446394-14</guid>
        <source url="https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394.rss">[PI or any] Player Owned Shop official release</source>
      </item>
      <item>
        <title>[PI or any] Player Owned Shop official release</title>
        <dc:creator><![CDATA[@drubrkletern drubrkletern]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/drubrkletern">@drubrkletern</a> wrote:</p>
          <blockquote>
              <p>Lol I love the little “if it wanted to” he just sticks at the end of that.</p>
<p>Lock now since op deleted tut?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394/13">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394/13</link>
        <pubDate>Fri, 22 Jun 2012 23:49:02 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-446394-13</guid>
        <source url="https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394.rss">[PI or any] Player Owned Shop official release</source>
      </item>
      <item>
        <title>[PI or any] Player Owned Shop official release</title>
        <dc:creator><![CDATA[@sssylasss sssylasss]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sssylasss">@sssylasss</a> wrote:</p>
          <blockquote>
              <p>[quote=“nikolaww3, post:11, topic:446394”][quote author=asshole_rule link=topic=549261.msg4026676#msg4026676 date=1340393274]</p>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<p>Releasing other peoples tutorials won’t get you any rep.<br>
[/quote]So you’re saying you made this right? Cause a coded named Light-X gave me These codes that he made by him self, So how can you make this…<br>
you made it? ill remove it just so your dumb ass can be happy</p>
</blockquote>
</aside>
<p>You’re a fucking idiot, I didn’t say I made it, and your stupid ass friend didn’t make it either</p>
<p>Some Russian faggot made it, Posipos or some shit.</p>
</blockquote>
</aside>
<p>So why would you write, “Releasing other peoples tutorials won’t get you any rep.” why did you release it I don’t give a fuck for rep it can go suck my dick, if it wanted to.[/quote]<br>
It doesnt want to.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394/12">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394/12</link>
        <pubDate>Fri, 22 Jun 2012 23:18:41 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-446394-12</guid>
        <source url="https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394.rss">[PI or any] Player Owned Shop official release</source>
      </item>
      <item>
        <title>[PI or any] Player Owned Shop official release</title>
        <dc:creator><![CDATA[@nikolaww3 nikolaww3]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/nikolaww3">@nikolaww3</a> wrote:</p>
          <blockquote>
              <p>[quote=“asshole_rule, post:9, topic:446394”][quote author=nikolaww3 link=topic=549261.msg4026618#msg4026618 date=1340389623]</p>
<aside class="quote">
<blockquote>
<p>Releasing other peoples tutorials won’t get you any rep.<br>
[/quote]So you’re saying you made this right? Cause a coded named Light-X gave me These codes that he made by him self, So how can you make this…<br>
you made it? ill remove it just so your dumb ass can be happy</p>
</blockquote>
</aside>
<p>You’re a fucking idiot, I didn’t say I made it, and your stupid ass friend didn’t make it either</p>
<p>Some Russian faggot made it, Posipos or some shit.[/quote]<br>
So why would you write, “Releasing other peoples tutorials won’t get you any rep.” why did you release it I don’t give a fuck for rep it can go suck my dick, if it wanted to.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394/11">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394/11</link>
        <pubDate>Fri, 22 Jun 2012 23:03:00 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-446394-11</guid>
        <source url="https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394.rss">[PI or any] Player Owned Shop official release</source>
      </item>
      <item>
        <title>[PI or any] Player Owned Shop official release</title>
        <dc:creator><![CDATA[@PvPXile PvPXile]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/pvpxile">@PvPXile</a> wrote:</p>
          <blockquote>
              <p>ffs i was just fixing player.java, lagged, refreshed page now im stuck with loads of files of coding and missing coding because you deleted this good tut. put it back up or inbox me it pleae</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394/10</link>
        <pubDate>Fri, 22 Jun 2012 20:16:52 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-446394-10</guid>
        <source url="https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394.rss">[PI or any] Player Owned Shop official release</source>
      </item>
      <item>
        <title>[PI or any] Player Owned Shop official release</title>
        <dc:creator><![CDATA[@asshole_rule asshole_rule]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/asshole_rule">@asshole_rule</a> wrote:</p>
          <blockquote>
              <p>[quote=“nikolaww3, post:5, topic:446394”][quote author=asshole_rule link=topic=549261.msg4026599#msg4026599 date=1340387888]<br>
Releasing other peoples tutorials won’t get you any rep.<br>
[/quote]So you’re saying you made this right? Cause a coded named Light-X gave me These codes that he made by him self, So how can you make this…<br>
you made it? ill remove it just so your dumb ass can be happy[/quote]</p>
<p>You’re a fucking idiot, I didn’t say I made it, and your stupid ass friend didn’t make it either</p>
<p>Some Russian faggot made it, Posipos or some shit.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394/9</link>
        <pubDate>Fri, 22 Jun 2012 19:27:54 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-446394-9</guid>
        <source url="https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394.rss">[PI or any] Player Owned Shop official release</source>
      </item>
      <item>
        <title>[PI or any] Player Owned Shop official release</title>
        <dc:creator><![CDATA[@drubrkletern drubrkletern]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/drubrkletern">@drubrkletern</a> wrote:</p>
          <blockquote>
              <aside class="quote quote-modified" data-post="4" data-topic="446394">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/asshole_rule/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> asshole_rule:</div>
<blockquote>
<p>Releasing other peoples tutorials won’t get you any rep.</p>
</blockquote>
</aside>
<p>Jokes on u i rep–ed him u mad?</p>
<p>im sure that LightX fellow stole the code himself</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394/8</link>
        <pubDate>Fri, 22 Jun 2012 19:11:03 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-446394-8</guid>
        <source url="https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394.rss">[PI or any] Player Owned Shop official release</source>
      </item>
      <item>
        <title>[PI or any] Player Owned Shop official release</title>
        <dc:creator><![CDATA[@vManlyMan vManlyMan]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/vmanlyman">@vManlyMan</a> wrote:</p>
          <blockquote>
              <p>My god, you’re an idiot.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394/7</link>
        <pubDate>Fri, 22 Jun 2012 18:44:48 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-446394-7</guid>
        <source url="https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394.rss">[PI or any] Player Owned Shop official release</source>
      </item>
      <item>
        <title>[PI or any] Player Owned Shop official release</title>
        <dc:creator><![CDATA[@RS_PS RS PS]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/rs_ps">@RS_PS</a> wrote:</p>
          <blockquote>
              <p>[quote=“nikolaww3, post:5, topic:446394”][quote author=asshole_rule link=topic=549261.msg4026599#msg4026599 date=1340387888]<br>
Releasing other peoples tutorials won’t get you any rep.<br>
[/quote]So you’re saying you made this right? Cause a coded named Light-X gave me These codes that he made by him self, So how can you make this…<br>
you made it? ill remove it just so your dumb ass can be happy[/quote]</p>
<p>Lol in no way did he say he made it reread what he said then reply again.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394/6</link>
        <pubDate>Fri, 22 Jun 2012 18:34:56 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-446394-6</guid>
        <source url="https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394.rss">[PI or any] Player Owned Shop official release</source>
      </item>
      <item>
        <title>[PI or any] Player Owned Shop official release</title>
        <dc:creator><![CDATA[@nikolaww3 nikolaww3]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/nikolaww3">@nikolaww3</a> wrote:</p>
          <blockquote>
              <p>[quote=“asshole_rule, post:4, topic:446394”]Releasing other peoples tutorials won’t get you any rep.[/quote]So you’re saying you made this right? Cause a coded named Light-X gave me These codes that he made by him self, So how can you make this…<br>
you made it? ill remove it just so your dumb ass can be happy</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394/5</link>
        <pubDate>Fri, 22 Jun 2012 18:27:03 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-446394-5</guid>
        <source url="https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394.rss">[PI or any] Player Owned Shop official release</source>
      </item>
      <item>
        <title>[PI or any] Player Owned Shop official release</title>
        <dc:creator><![CDATA[@asshole_rule asshole_rule]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/asshole_rule">@asshole_rule</a> wrote:</p>
          <blockquote>
              <p>Releasing other peoples tutorials won’t get you any rep.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394/4</link>
        <pubDate>Fri, 22 Jun 2012 17:58:08 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-446394-4</guid>
        <source url="https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394.rss">[PI or any] Player Owned Shop official release</source>
      </item>
      <item>
        <title>[PI or any] Player Owned Shop official release</title>
        <dc:creator><![CDATA[@nikolaww3 nikolaww3]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/nikolaww3">@nikolaww3</a> wrote:</p>
          <blockquote>
              <p>[quote=“Uncalled, post:2, topic:446394”]hasn’t this already been released? i’m pretty sure i’ve seen this tutorial already. i think from asshole_rule.[/quote]I don’t think so because I searched it before posting.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394/3</link>
        <pubDate>Fri, 22 Jun 2012 17:35:04 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-446394-3</guid>
        <source url="https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394.rss">[PI or any] Player Owned Shop official release</source>
      </item>
      <item>
        <title>[PI or any] Player Owned Shop official release</title>
        <dc:creator><![CDATA[@Uncalled Uncalled]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/uncalled">@Uncalled</a> wrote:</p>
          <blockquote>
              <p>hasn’t this already been released? i’m pretty sure i’ve seen this tutorial already. i think from asshole_rule.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394/2</link>
        <pubDate>Fri, 22 Jun 2012 17:33:28 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-446394-2</guid>
        <source url="https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394.rss">[PI or any] Player Owned Shop official release</source>
      </item>
      <item>
        <title>[PI or any] Player Owned Shop official release</title>
        <dc:creator><![CDATA[@nikolaww3 nikolaww3]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/nikolaww3">@nikolaww3</a> wrote:</p>
          <blockquote>
              <h2>
<img src="http://img534.imageshack.us/img534/9294/posb.png" alt width="" height=""><br>
<img src="http://img90.imageshack.us/img90/4535/pos2.png" alt width="" height=""><br>
<img src="http://img834.imageshack.us/img834/1020/pos3.png" alt width="" height=""><br>
<img src="http://img26.imageshack.us/img26/4783/pos4.png" alt width="" height=""><br>
<img src="http://img809.imageshack.us/img809/4829/pos5.png" alt width="" height="">
</h2>
<p>Welcome to PasiipaZ’s Tut (Didn’t make it.): how to include Player Owned Shops on your server!</p>
<h2>Made with notepad so layout isnt the best, but it does the thing!<br>
READ EVERY LITTLE DETAIL OR YOU WILL GET ERRORS!</h2>
<p>Lets start with saving! Open your player.java and add these variables:</p>
<p><code>	public int sellingId;
	public int sellingN;
	public int sellingS;
	public int playerCollect;
	public int playerShop[] = new int[10];
	public int playerShopN[] = new int[10];
	public int playerShopP[] = new int[10];
	public Client myShopClient;</code><br>
They basically stores item ids, item amount etc. You can easily higher the maxium<br>
amount of items for sale, but i liked 10!</p>
<p>open PlayerSave.java and put this on loading (like above “} else if (token.equals(“EP”)) {”):</p>
<p><code>		} else if (token.equals("shopcollect")) {
		p.playerCollect = Integer.parseInt(token2);</code><br>
then search for “readmode =” and add this with the others:</p>
<p>} else if (line.equals("[SHOP]")) { ReadMode = 10;</p>
<p>also, if you scroll up a bit you’ll see “break;”<br>
below it add this:</p>
<p><code>	case 10:
		if (token.equals("character-shop")) {
			p.playerShop[Integer.parseInt(token3[0])] = Integer.parseInt(token3[1]);
			p.playerShopP[Integer.parseInt(token3[0])] = Integer.parseInt(token3[2]);
			p.playerShopN[Integer.parseInt(token3[0])] = Integer.parseInt(token3[3]);
		} 
	break;</code><br>
Then for the saving, because theres nothing to load if no saving!</p>
<p>scroll down a bit until you see something like this:</p>
<p><code>	characterfile.write("character-rights = ", 0, 19);
	characterfile.write(Integer.toString(p.playerRights), 0, Integer.toString(p.playerRights).length());
	characterfile.newLine();</code><br>
under it add this:</p>
<p><code>	characterfile.write("shopcollect = ", 0, 14);
	characterfile.write(Integer.toString(p.playerCollect), 0, Integer.toString(p.playerCollect).length());
	characterfile.newLine();</code><br>
then for the last part with saving, search for /<em>ignores</em>/ (down), its commented out in most of the PI:s</p>
<p>add this above /<em>ignores</em>/</p>
<p><code>		/*SHOP*/
			characterfile.write("[SHOP]", 0, 6);
			characterfile.newLine();
			for (int i = 0; i &lt; p.playerShop.length; i++) {
				if (p.playerShop[i] &gt; 0) {
					characterfile.write("character-shop = ", 0, 17);
					characterfile.write(Integer.toString(i), 0, Integer.toString(i).length());
					characterfile.write("	", 0, 1);
					characterfile.write(Integer.toString(p.playerShop[i]), 0, Integer.toString(p.playerShop[i]).length());
					characterfile.write("	", 0, 1);
					characterfile.write(Integer.toString(p.playerShopP[i]), 0, Integer.toString(p.playerShopP[i]).length());
					characterfile.write("	", 0, 1);
					characterfile.write(Integer.toString(p.playerShopN[i]), 0, Integer.toString(p.playerShopN[i]).length());
					characterfile.newLine();
				}
			}
			characterfile.newLine();</code><br>
Time to add actual shopping system!  Open shopassistant.java</p>
<p>under public double getItemShopValue(int ItemID, int Type, int fromSlot) { add</p>
<p><code>		if(c.myShopId == 7390){
			return c.myShopClient.playerShopP[fromSlot];
		}</code><br>
and add all these methods <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"></p>
<p>[code]	public void openPlayerShop(Client o){	<br>
if(o == null || o.properLogout)<br>
return;	<br>
c.getItems().resetItems(3823);<br>
resetShop(o);<br>
c.myShopClient = o;<br>
c.myShopId = 7390;<br>
c.isShopping = true;<br>
c.getPA().sendFrame248(3824, 3822);<br>
c.getPA().sendFrame126(o.playerName+“s shop!”, 3901);<br>
}<br>
public int[] fixArray(int[] array){<br>
int arrayPos = 0;<br>
int[] newArray = new int[array.length];<br>
for(int x = 0; x &lt; array.length; x++){<br>
if(array[x] != 0){<br>
newArray[arrayPos] = array[x];<br>
arrayPos++;<br>
}<br>
}<br>
return newArray;<br>
}</p>
<pre><code>public void fixShop(Client o){
	o.playerShop = fixArray(o.playerShop);
	o.playerShopN = fixArray(o.playerShopN);
	o.playerShopP = fixArray(o.playerShopP);	
}

public void resetShop(Client o) {
	synchronized(c) {
		fixShop(o);
		for (int x = 0; x &lt; 10; x++) {
			if (o.playerShopN[x] &lt;= 0) {
				o.playerShop[x] = 0;
			}
		}
		int TotalItems = 0;
		for (int i = 0; i &lt; 10; i++) {
			if (o.playerShop[i] &gt; 0) {
				TotalItems++;
			}
		}
		if (TotalItems &gt; 10) {
			TotalItems = 10;
		}
		c.getOutStream().createFrameVarSizeWord(53);
		c.getOutStream().writeWord(3900);
		c.getOutStream().writeWord(TotalItems);
		int TotalCount = 0;
		for (int i = 0; i &lt; o.playerShop.length; i++) {
			if (o.playerShop[i] &gt; 0) {
				if (o.playerShopN[i] &gt; 254) {
					c.getOutStream().writeByte(255); 					
					c.getOutStream().writeDWord_v2(o.playerShopN[i]);	
				} else {
					c.getOutStream().writeByte(o.playerShopN[i]);
				}
				c.getOutStream().writeWordBigEndianA((o.playerShop[i]+1));
				TotalCount++;
			}
			if (TotalCount &gt; TotalItems) {
				break;
			}
		}
		c.getOutStream().endFrameVarSizeWord();
		c.flushOutStream();	
	}
}[/code]
</code></pre>
<p>You may now think like “fix shop…? what?!” well its to resort your array, like you have<br>
item on slot 1, 2 and 3 and someone buys all out from 2 then there would be empty space,<br>
not nice IMO so that fixs the problem and moves them all =)</p>
<p>search for “buyFromShopPrice”</p>
<p>add this under:</p>
<p><code>		if (c.myShopId == 7390 &amp;&amp; c.myShopClient != null &amp;&amp; !c.myShopClient.playerName.equals(c.playerName)) {
			c.sendMessage(c.getItems().getItemName(removeId)+": currently costs " + c.myShopClient.playerShopP[removeSlot] + " coins.");
			return;
		}else if (c.myShopId == 7390 &amp;&amp; c.myShopClient != null &amp;&amp; c.myShopClient.playerName.equals(c.playerName)) {
			c.sendMessage(c.getItems().getItemName(removeId)+": currently costs " + c.playerShopP[removeSlot] + " coins.");
			return;
		}</code><br>
then search for “sellToShopPrice”</p>
<p>and under it add:</p>
<p><code>	if(c.myShopId == 7390){
		c.sendMessage("You choose your price when using POS.");
		return;
	}</code><br>
then scroll down a lil or search for “sellItem” and under add</p>
<p><code>		if(c.myShopId == 7390){
			for (int i : Config.ITEM_TRADEABLE)  {
				if(i == itemID) {
					c.sendMessage("You can't sell this item.");
					return false;
				}		
			}
			if(c.playerName.equals(c.myShopClient.playerName)){
			c.sellingId = itemID;
			c.sellingN = amount;
			c.sellingS = fromSlot;
			c.xInterfaceId = 7390;
			c.outStream.createFrame(27);
			}else{
				c.sendMessage("You can only sell items on your own store.");
			}
			return true;
		}</code><br>
then for the last part this class</p>
<p>search for buyItem and under it add alll this:</p>
<p><code>		if(c.myShopId == 7390 &amp;&amp; c.myShopClient != null &amp;&amp; !c.myShopClient.properLogout &amp;&amp; !c.playerName.equals(c.myShopClient.playerName)){
			int bought = 0;
			int price = c.myShopClient.playerShopP[fromSlot];
			if(amount &gt; c.myShopClient.playerShopN[fromSlot])
				amount = c.myShopClient.playerShopN[fromSlot];
			for(int x = 0; x &lt; amount; x++){
				if(c.getItems().playerHasItem(995, c.myShopClient.playerShopP[fromSlot]) &amp;&amp; c.getItems().freeSlots() &gt; 0){
					c.getItems().deleteItem2(995, c.myShopClient.playerShopP[fromSlot]);
					c.getItems().addItem(c.myShopClient.playerShop[fromSlot], 1);
					c.myShopClient.playerShopN[fromSlot]--;
					c.myShopClient.playerCollect += c.myShopClient.playerShopP[fromSlot];
					if(c.myShopClient.playerShopN[fromSlot] == 0){
						c.myShopClient.playerShop[fromSlot] = 0;
						c.myShopClient.playerShopP[fromSlot] = 0;
					}
					bought++;
				}else{
					c.sendMessage("Not enought space or money.");
					break;
				}
			}
			if(bought &gt; 0){
			resetShop(c.myShopClient);
			c.getItems().resetItems(3823);;
			c.sendMessage("You just bought "+bought+" "+c.getItems().getItemName(itemID)+" for "+ (bought*price));
			c.myShopClient.sendMessage(c.playerName+" has bought "+bought+" "+c.getItems().getItemName(itemID)+" from you!");
			c.myShopClient.sendMessage("You now have "+c.myShopClient.playerCollect+" coins to collect (::collect)");
			}
			return false;
		}else if(c.myShopId == 7390 &amp;&amp; c.myShopClient != null &amp;&amp; !c.myShopClient.properLogout &amp;&amp; c.playerName.equals(c.myShopClient.playerName)){
			if(amount &gt; c.myShopClient.playerShopN[fromSlot])
				amount = c.myShopClient.playerShopN[fromSlot];
			for(int x = 0; x &lt; amount; x++){
				if(c.getItems().freeSlots() &gt; 0){
					c.getItems().addItem(c.myShopClient.playerShop[fromSlot], 1);
					c.myShopClient.playerShopN[fromSlot]--;
					if(c.myShopClient.playerShopN[fromSlot] == 0){
						c.myShopClient.playerShop[fromSlot] = 0;
						c.myShopClient.playerShopP[fromSlot] = 0;
						fixShop(c);
					}
				}else{
					c.sendMessage("Not enought space.");
					break;
				}
			}
			resetShop(c.myShopClient);
			c.getItems().resetItems(3823);
			return false;
		}else if(c.myShopId == 7390){
			return false;
		}</code><br>
now open BankX2(at packets) and add following under "int Xamount</p>
<p><code>		if(c.sellingId &gt; 0 &amp;&amp; c.sellingN &gt; 0 &amp;&amp; c.xInterfaceId == 7390){
			for (int i : Config.ITEM_TRADEABLE)  {
				if(i == c.sellingId) {
					c.sendMessage("You can't sell this item.");
					c.sellingId = 0;
					c.sellingN = 0;
					c.sellingS = 0;
					return;
				}		
			}
			if(c.sellingN &gt; c.getItems().getItemAmount(c.sellingId))
				c.sellingN = c.getItems().getItemAmount(c.sellingId);
			int slot = -1;
			for(int x = 0; x &lt; 10; x++){
				if(c.playerShop[x] == 0){
					slot = x;
					break;
				}
			}
			if(slot == -1){
				c.sendMessage("You can only be selling 10 items at once!");
				c.sellingId = 0;
				c.sellingN = 0;
				c.sellingS = 0;
				return;
			}
			if(c.getItems().playerHasItem(c.sellingId, c.sellingN, c.sellingS)){
				c.getItems().deleteItem2(c.sellingId, c.sellingN);
				c.playerShop[slot] = c.sellingId;
				c.playerShopN[slot] = c.sellingN;
				c.playerShopP[slot] = Xamount;
				c.sendMessage("You put your items on sale.");
				c.sendMessage("Check your items by using ::myshop and collect coins ::collect");
			}
			c.getShops().openPlayerShop(c);
			c.sellingId = 0;
			c.sellingN = 0;
			c.sellingS = 0;
			return;
		}</code><br>
also import server.Config;</p>
<p>Time to open commands.java and add these commands:</p>
<p><code>		if(playerCommand.equalsIgnoreCase("collect")){
			if(c.playerCollect &gt; 0){
			c.sendMessage("You succesfully collected "+c.playerCollect+" coins.");
			c.getItems().addItem(995, c.playerCollect);
			c.playerCollect = 0;
			}else{
			c.sendMessage("You dont have anything to collect");
			}
		}
		if(playerCommand.equalsIgnoreCase("myshop")){
			c.getShops().openPlayerShop(c);
		}</code><br>
The original code was</p>
<p><code>		if(playerCommand.equalsIgnoreCase("collect")){
			if(c.playerCollect &gt; 0){
			c.sendMessage("You succesfully collected "+c.playerCollect+" coins.");
			c.getItems().addItem(995, c.playerCollect);
			c.playerCollect = 0;
			}else{
			c.sendMessage("You dont have anything to collect");
			}
		}
		if(playerCommand.equalsIgnoreCase("myshop")){
			if(c.absX &gt; 2527 &amp;&amp; c.absX &lt; 2634 &amp;&amp; c.absY &gt; 3066 &amp;&amp; c.absY &lt; 3115){
			c.getShops().openPlayerShop(c);
			}else
			c.sendMessage("You can only view your shops in home.");
		}</code><br>
but i thought it was stupid making your shop only editable in home.</p>
<p>then for right click shopping, open combatAssistant, yes you readed right! combatAssistant<br>
Oh, you’re asking why? because “View shop” button is actually attack button replaced with<br>
view shop so no client changes are needed!  No worries, it wont attack anyone nor cause<br>
any bugs!</p>
<p>search for checkreqs() { and under “if(Server.playerHandler.players[c.playerIndex] == null) {<br>
return false;<br>
}”<br>
add this:</p>
<p><code>		if(!Server.playerHandler.players[c.playerIndex].inWild() &amp;&amp; !Server.playerHandler.players[c.playerIndex].inDuelArena()) {
			c.getShops().openPlayerShop((Client)Server.playerHandler.players[c.playerIndex]);
			c.getCombat().resetPlayerAttack();
			return false;
		}</code><br>
One more thing before we are done!  Open client.java and search for “getPA().showOption(3, 0, “Attack”, 1);”</p>
<p>Under it add:</p>
<p><code>		} else if (!inWild() &amp;&amp; !inDuelArena() &amp;&amp; safeTimer &lt;= 0 &amp;&amp; !inGWD() &amp;&amp; !inPcBoat() &amp;&amp; !inPcGame()){ //this makes it so attack option is visible on wild and challenge in duel =)
		getPA().showOption(3, 0, "View shop", 1);
getPA().walkableInterface(-1);</code><br>
AND YOU’RE DONE!<br>
Congrats i didn’t make this i am just posting it on Mopar because it didn’t have anything like this, so I thought you guys might want it.<br>
You could also make an npc that opens the shops instead of commands witch is what i will be doing very soon. I will edit this post when I finish it so you guys could have the code too. Have fun with your player owned shops!</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394/1</link>
        <pubDate>Fri, 22 Jun 2012 17:31:24 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-446394-1</guid>
        <source url="https://forum.moparisthebest.com/t/pi-or-any-player-owned-shop-official-release/446394.rss">[PI or any] Player Owned Shop official release</source>
      </item>
  </channel>
</rss>
