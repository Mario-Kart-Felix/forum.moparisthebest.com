<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/in-game-world-map/280769 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Aug 2019 12:42:24 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>In-game World Map - Runescape - moparisthebest.com</title>
    <meta name="description" content="Is it possible to get the in-game world map, dungeon maps, etc. They are much higher quality than the one you can download off the website. 

Not sure if this has been done before or not. 

Thanks.">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="280769.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;In-game World Map&#39;" href="280769.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/in-game-world-map/280769" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/in-game-world-map/280769" />
<meta property="og:title" content="In-game World Map" />
<meta name="twitter:title" content="In-game World Map" />
<meta property="og:description" content="Is it possible to get the in-game world map, dungeon maps, etc. They are much higher quality than the one you can download off the website.  Not sure if this has been done before or not.  Thanks." />
<meta name="twitter:description" content="Is it possible to get the in-game world map, dungeon maps, etc. They are much higher quality than the one you can download off the website.  Not sure if this has been done before or not.  Thanks." />
<meta property="article:published_time" content="2009-05-28T08:14:49+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="280769.html">In-game World Map</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Richy.html'><span itemprop='name'>Richy</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-05-28T08:14:49Z'>
            <time itemprop='dateModified' datetime='2016-07-31T07:58:36Z' class='post-time'>
              July 31, 2016,  7:58am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Is it possible to get the in-game world map, dungeon maps, etc. They are much higher quality than the one you can download off the website.</p>
<p>Not sure if this has been done before or not.</p>
<p>Thanks.</p>
      </div>

      <meta itemprop='headline' content='In-game World Map'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/moparisthebest.html'><span itemprop='name'>moparisthebest</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-05-28T18:35:17Z'>
            <time itemprop='dateModified' datetime='2016-07-31T07:59:28Z' class='post-time'>
              July 31, 2016,  7:59am
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>It is possible, it’s been done before, I can’t remember by who or when, but when I get home I’ll look through my archives and see if I can find anything.</p>
      </div>

      <meta itemprop='headline' content='In-game World Map'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/communist.html'><span itemprop='name'>communist</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-05-28T19:42:52Z'>
            <time itemprop='dateModified' datetime='2016-07-31T07:59:37Z' class='post-time'>
              July 31, 2016,  7:59am
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I want object models</p>
      </div>

      <meta itemprop='headline' content='In-game World Map'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Unhandled.html'><span itemprop='name'>Unhandled</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-05-28T19:45:26Z'>
            <time itemprop='dateModified' datetime='2016-07-31T07:59:37Z' class='post-time'>
              July 31, 2016,  7:59am
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote no-group" data-post="3" data-topic="280769">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/communist/40/5_513041d5f7104045db30895d3b90af16.png" class="avatar"> communist:</div>
<blockquote>
<p>I want object models</p>
</blockquote>
</aside>
<p>What?</p>
      </div>

      <meta itemprop='headline' content='In-game World Map'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/communist.html'><span itemprop='name'>communist</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-05-28T19:52:33Z'>
            <time itemprop='dateModified' datetime='2016-07-31T07:59:39Z' class='post-time'>
              July 31, 2016,  7:59am
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Unhandled, post:4, topic:280769”][quote author=communist link=topic=370827.msg2802666#msg2802666 date=1243539772]<br>
I want object models<br>
[/quote]<br>
What?[/quote]<br>
I want the object (Tree’s etc) models. I won’t get them.</p>
      </div>

      <meta itemprop='headline' content='In-game World Map'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/frank.html'><span itemprop='name'>frank</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-05-28T21:18:32Z'>
            <time itemprop='dateModified' datetime='2016-07-31T07:59:52Z' class='post-time'>
              July 31, 2016,  7:59am
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“communist, post:5, topic:280769”][quote author=Unhandled link=topic=370827.msg2802672#msg2802672 date=1243539926]</p>
<aside class="quote no-group">
<blockquote>
<p>I want object models</p>
</blockquote>
</aside>
<p>What?<br>
[/quote]<br>
I want the object (Tree’s etc) models. I won’t get them.[/quote]highly relevant to the current topic, yes?</p>
      </div>

      <meta itemprop='headline' content='In-game World Map'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/silabsoft.html'><span itemprop='name'>silabsoft</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-05-29T04:17:16Z'>
            <time itemprop='dateModified' datetime='2016-07-31T08:00:27Z' class='post-time'>
              July 31, 2016,  8:00am
            </time>
        <span itemprop='position'>#7</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>mitb means the external mapviewer if anyone notices that is no longer available.</p>
      </div>

      <meta itemprop='headline' content='In-game World Map'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/qauters.html'><span itemprop='name'>qauters</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-05-29T17:44:32Z'>
            <time itemprop='dateModified' datetime='2016-07-31T08:01:10Z' class='post-time'>
              July 31, 2016,  8:01am
            </time>
        <span itemprop='position'>#8</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>If you look at rsbot, you can access Bot.getMinimapSprite().</p>
<p>That will give you the map view of the area you are in currently.<br>
Save that of all the positions you need, fit it together and voilà <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>Some old qbot1 script I found, concerning mapview:</p>
<pre><code class="lang-auto">import java.awt.Image;
import java.awt.image.BufferedImage;
import java.awt.image.DataBufferInt;
import java.awt.image.DirectColorModel;
import java.awt.image.Raster;
import java.awt.image.WritableRaster;
import java.util.Hashtable;

import javax.swing.JFrame;
import javax.swing.JScrollPane;

import qp.qbot.bot.CreateBot;
import qp.qbot.bot.masters.QScript;
import qp.qbot.bot.scripting.RSString;
import qp.qbot.hooks.NPC;
import qp.qbot.hooks.NodeList;
import qp.qbot.hooks.Player;
import qp.qbot.hooks.Sprite;


public class Map extends QScript{
	JFrame f;
	Sprite minimapSprite;
	Image rsMap;
	int[] pixels;
	JScrollPane scroll;
	int x, y;

	public boolean sstart(){
		minimapSprite = CreateBot.myClient.getMinimapSprite();
		pixels = minimapSprite.getPixels().clone();
		DataBufferInt databufferint = new DataBufferInt(pixels, pixels.length);
		DirectColorModel directcolormodel = new DirectColorModel(32, 16711680, 65280, 255);
		WritableRaster writableraster = (Raster.createWritableRaster(directcolormodel.createCompatibleSampleModel(minimapSprite.getWidth(), minimapSprite.getHeight()), databufferint, null));
		rsMap = new BufferedImage(directcolormodel, writableraster, false, new Hashtable());
		f = new JFrame("Mapviewer");
		f.setDefaultCloseOperation(3);
		f.setSize(600,600);
		f.setVisible(true);
		x = 0;
		y = 0;
		return true;
	}

	@Override
	public int cycle(){
		for(int i = 0; i &lt; minimapSprite.getPixels().length; i++) pixels[i] = minimapSprite.getPixels()[i];
		//Draw items
		for(int l5 = 0; l5 &lt; 104; l5++)
		{
			for(int i6 = 0; i6 &lt; 104; i6++)
			{
				NodeList nodelist = CreateBot.myClient.getNodeListArray()[CreateBot.myClient.getPlane()][l5][i6];
				if(nodelist != null)
				{
					int x = (l5 * 4 + 2);
					int y = (i6 * 4 + 2);
					setPixels(x, y, CreateBot.myClient.getMapDots()[0]);
				}
			}

		}
		//Draw players
		for (int i = 0; i &lt; CreateBot.myClient.getPlayerCount(); i++) {
			Player player = CreateBot.myClient.getPlayerArray()[CreateBot.myClient.getPlayerIndexArray()[i]];
			int x = (player.getX() &gt;&gt; 7) * 4 + 2;
			int y = (player.getY() &gt;&gt; 7) * 4 + 2;
			long l = new RSString(player.getName()).getLong();
			boolean isFriend = false;
			for (int j = 0; CreateBot.myClient.getFriendCount() &gt; j; j++) {
				if (CreateBot.myClient.getFriendListAsLongs()[j] == l &amp;&amp; CreateBot.myClient.getFriendNodeIDs()[j] != 0) {
					isFriend = true;
					break;
				}
			}
			boolean isTeam = false;
			if (getMyPlayer().getTeam() != 0 &amp;&amp; player.getTeam() != 0 &amp;&amp; getMyPlayer().getTeam() == player.getTeam()) isTeam = true;
			if (isFriend) setPixels(x, y, CreateBot.myClient.getMapDots()[3]);
			else if (isTeam) setPixels(x, y, CreateBot.myClient.getMapDots()[4]);
			else setPixels(x, y, CreateBot.myClient.getMapDots()[2]);
		}
		//Draw npcs
		for (int i = 0; i &lt; CreateBot.myClient.getNPCCount(); i++) {
			NPC npc = (getNPCArray()[CreateBot.myClient.getNPCIndexArray()[i]]);
			setPixels((npc.getX() &gt;&gt; 7) * 4 + 2, (npc.getY() &gt;&gt; 7) * 4 + 2, CreateBot.myClient.getMapDots()[1]);
		}
		//Draw mapflag
		if(CreateBot.myClient.getDestX() != 0){
			int x = CreateBot.myClient.getDestX() * 4 + 2;
			int y = CreateBot.myClient.getDestY() * 4 + 2;
			setPixels(x, y, CreateBot.myClient.getMapMarkers()[0]);
		}
		//Draw self, by lack of good sprite dot I use the green one
		setPixels((getMyPlayer().getX() &gt;&gt; 7) * 4 + 2, (getMyPlayer().getY() &gt;&gt; 7) * 4 + 2, CreateBot.myClient.getMapDots()[3]);

		//Draw the map
		setPos();
		f.getGraphics().drawImage(rsMap, 0, 0, null);
		return 5;
	}
	public void setPos(){
		for(int i = 0; i &lt; minimapSprite.getWidth(); i++){
			for(int j = 0; j &lt; minimapSprite.getHeight(); j++){
				if(pixels[j * minimapSprite.getWidth() + i] != 1){ 
					x = i;
					y = j;
					return;
				}
			}
		}
	}
	public void setPixels(int x, int y, Sprite sprite){
		int[] sp = sprite.getPixels().clone();
		for(int i = 0; i &lt; sprite.getWidth(); i++){
			for(int j = 0; j &lt; sprite.getHeight(); j++){
				if(sp[j * sprite.getWidth() + i] != 0){
					pixels[(minimapSprite.getHeight() - ((sprite.getHeight() - j - 1) + y) - 46) * minimapSprite.getWidth() + (x + i) + 46] = sp[j * sprite.getWidth() + i];
				}
			}
		}
	}

	@Override
	public String getName() {
		return "Map";
	}

}</code></pre>
      </div>

      <meta itemprop='headline' content='In-game World Map'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/_ikram.html'><span itemprop='name'>_ikram</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-06-04T06:47:33Z'>
            <time itemprop='dateModified' datetime='2016-07-31T08:13:12Z' class='post-time'>
              July 31, 2016,  8:13am
            </time>
        <span itemprop='position'>#9</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>it is, Zee best wrote soemthing to obtain the maps, 100% credits to him:</p>
<p>I wrote this compressor and loader which uses RandomAccessFile so that people were not releasing client’s with map folders bigger than the actual cache.</p>
<p>This compressor will pack your maps into 3 files;</p>
<p>MAP_CACHE.DAT - Contains the raw map bytes.<br>
MAP_CACHE.IDX - Contains the offset, length compressed and decompressed.<br>
MAP_CACHE.IDX2 - Contains the index table, for the map id’s.</p>
<p>The total file size is smaller than rarring the files in a rar archive, 23mb of maps went into a 2.7mb raw data file and 2 indexes around 20kb in size.</p>
<p>Basically, in your client if you load 317 map’s or whatever you can use this tool to compress and load with ease.</p>
<p>The map’s are stored in a HashMap and only loaded when required, then they are stored for future reference.</p>
<p>So anyway;</p>
<p>Compressor download link: <a href="http://uppit.com/S3TS1B" data-bbcode="true" rel="nofollow noopener">Map compressor.rar</a></p>
<p>Loader class;</p>
<p>[code]/*</p>
<ul>
<li>@ Author: Zee best<br>
*/</li>
</ul>
<p>import java.io.RandomAccessFile;<br>
import java.io.DataInputStream;<br>
import java.io.IOException;<br>
import java.io.ByteArrayInputStream;<br>
import java.io.File;<br>
import java.io.FileInputStream;<br>
import java.util.zip.GZIPInputStream;<br>
import java.util.Map;<br>
import java.util.HashMap;<br>
import java.util.List;<br>
import java.util.ArrayList;</p>
<p>public class MapDecompressor {</p>
<pre><code>public static List&lt;Integer&gt; mapIndices = null;
public static Map&lt;Integer, byte[]&gt; mapBuffer = new HashMap&lt;Integer, byte[]&gt;();

public static byte[] grabMap(int id) throws IOException
{
	if(mapIndices == null)
		loadIndex2();
	if(mapBuffer.get(id) == null)
	{
		RandomAccessFile raf_cache = new RandomAccessFile("./MAP_CACHE.dat", "rw");
		RandomAccessFile raf_index = new RandomAccessFile("./MAP_CACHE.idx", "rw");
		int pos = getIndexPosition(id);
		if(pos == -1)
			return null;
		raf_index.seek(pos * 12);
		raf_cache.seek(raf_index.readInt());
		byte[] b = new byte[raf_index.readInt()];
		raf_cache.readFully(b);
		b = inflate(b, raf_index.readInt());
		mapBuffer.put(id, b);
		return mapBuffer.get(id);
	}
	return mapBuffer.get(id);
}

public static void loadIndex2() throws IOException
{
	mapIndices = new ArrayList&lt;Integer&gt;();
	DataInputStream dis = new DataInputStream(new FileInputStream("./MAP_CACHE.idx2"));
	for (int i = 0; i &lt; (int) new File("./MAP_CACHE.idx2").length() / 2; i++)
		mapIndices.add((int) dis.readShort());
}

public static int getIndexPosition(int id) throws IOException
{
	if(mapIndices.contains(id))
		for (int i = 0; i &lt; mapIndices.size(); i++)
			if(mapIndices.get(i) == id)
				return i;
	return -1;
}

public static byte[] inflate(byte[] b, int l) throws IOException
{
	byte[] buf = new byte[l];
	ByteArrayInputStream bais = new ByteArrayInputStream(b);
	DataInputStream dis = new DataInputStream(new GZIPInputStream(bais));
	dis.readFully(buf, 0, buf.length);
	dis.close();
	return buf;
}
</code></pre>
<p>}[/code]</p>
<p>Now, basically to get a map in the cache use it like this;</p>
<pre><code class="lang-auto">MapDecompressor.grabMap(id);</code></pre>
<p>That would replace any other loading method you have installed into your client.</p>
<p>Feel free to use this for your client.</p>
<p><span class="bbcode-b"><span class="bbcode-u">Method summary:</span></span></p>
<p><span class="bbcode-b">grabMap(Integer),</span></p>
<p>This method attempts to get the map byte array from the HashTable, if it’s not already loaded then it will read the index and cache and load it.</p>
<p><span class="bbcode-b">loadIndex2()</span></p>
<p>This method loads the idx2 index file which contains the index map id’s, so that they can be found easy instead of searching a file for names.</p>
<p><span class="bbcode-b">getIndexPosition(Integer)</span></p>
<p>Checks the index array list for a match of map id, if it gets the map it returns<br>
the position / 12 of the index file.</p>
<p><span class="bbcode-b">inflate(byte[], Integer)</span></p>
<p>This method is used to un-gzip the compressed byte array, integer l is the uncompressed length.</p>
      </div>

      <meta itemprop='headline' content='In-game World Map'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/The_Prophecy.html'><span itemprop='name'>The_Prophecy</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-06-04T15:50:11Z'>
            <time itemprop='dateModified' datetime='2016-07-31T08:13:37Z' class='post-time'>
              July 31, 2016,  8:13am
            </time>
        <span itemprop='position'>#10</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>after you got the byte[] what else can you do with that? what does that byte[] contains?</p>
      </div>

      <meta itemprop='headline' content='In-game World Map'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/BAsh.html'><span itemprop='name'>BAsh</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-06-30T05:07:31Z'>
            <time itemprop='dateModified' datetime='2016-07-31T08:51:55Z' class='post-time'>
              July 31, 2016,  8:51am
            </time>
        <span itemprop='position'>#11</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>i’m sure that these people are just trying to troll the mods.</p>
      </div>

      <meta itemprop='headline' content='In-game World Map'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/in-game-world-map/280769 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Aug 2019 12:42:27 GMT -->
</html>
