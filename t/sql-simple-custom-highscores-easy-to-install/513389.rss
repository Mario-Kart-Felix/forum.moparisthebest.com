<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>[SQL] Simple Custom Highscores - Easy To Install</title>
    <link>https://forum.moparisthebest.com/t/sql-simple-custom-highscores-easy-to-install/513389</link>
    <description>
Posted this on Rune-Server myself. My username is King Fox.


Alright, made this myself, figured i would release. The style isn&#39;t the best, but i like it and it shows what i need it to.
Preview: [URL=http://prntscr.com/yt6xi]http://prntscr.com/yt6xi[/URL]


Again, this is very basic and configured for my server. If you want it to work how you want it, then you will need to do some modifications. I have exp set as a string so i could go over Integer.MAX_VALUE (2,147,483,647). This tutorial will assume you know how to create a table and such.


Database Structure:


[CODE]CREATE TABLE IF NOT EXISTS `highscores` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) NOT NULL DEFAULT &#39;user&#39;,
  `rights` int(11) NOT NULL DEFAULT &#39;0&#39;,
  `overall` int(11) NOT NULL DEFAULT &#39;0&#39;,
  `totalxp` varchar(255) NOT NULL DEFAULT &#39;totalxp&#39;,
  `prestige` int(11) NOT NULL DEFAULT &#39;0&#39;,
  `combatlvl` int(11) NOT NULL DEFAULT &#39;0&#39;,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;[/CODE]


Files: [URL=https://dl.dropbox.com/u/103983828/highscores.zip]https://dl.dropbox.com/u/103983828/highscores.zip[/URL]


Everything you need to edit is in config.php. This script cannot be injected or tampered with (tested several times, and reviewed it many times). I write this from scratch, so i had to look it over carefully. Ofc, knowing my luck, i probably missed something. But im pretty sure it&#39;s safe ^_^






[B][U][SIZE=5]Tutorial:[/SIZE][/U][/B]
First thing you need to do, is create the database using the sql provided above. Once created, you will need to modify the config.php in the zip folder provided above. Most of the settings can easily be changed from that. 




[code]&lt;?php


    $HOST = &quot;localhost&quot;;
    $USER = &quot;DB_USER&quot;;
    $PASS = &quot;DB_PASS&quot;;
    $DATABASE = &quot;Database&quot;;
    $TABLE = &quot;highscores&quot;;


    $website_url = &quot;http://your_site.com/&quot;;
    $name = &quot;SERVER_NAME&quot;;
    $maxCount = 100;
    $minTotalLevel = 400;
    $con = mysql_connect($HOST, $USER, $PASS);
     mysql_select_db($DATABASE, $con);


?&gt;[/code]


Once edited, just upload to your forum or website directory, and everything should be set. Incase you need the server methods, here they are below. Will most likely need to be modified to work with your server depending on what SQL system you have implemented. 


[code]    public static void updateHighscores(Player player, String username) {
        try {
            ResultSet rs = DatabasePool.executeQuery(&quot;SELECT * FROM highscores WHERE name=&#39;&quot;+username+&quot;&#39;&quot;);
                if (rs.next()) rs.deleteRow(); // delete row to insert new one ^_^
                rs.moveToInsertRow();
                rs.updateString(&quot;name&quot;, username);
                rs.updateInt(&quot;overall&quot;, player.getSkills().getTotalLevel(player));
                rs.updateInt(&quot;rights&quot;, player.getRights());
                rs.updateString(&quot;totalxp&quot;, &quot;&quot;+player.getSkills().getTotalXp(player)+&quot;&quot;);
                rs.updateInt(&quot;prestige&quot;, player.getPrestigeLevel());
                rs.updateInt(&quot;combatLvl&quot;, player.getSkills().getCombatLevelWithSummoning());
                rs.insertRow();
                System.out.println(&quot;[Highscores] Updated &quot;+player.getDisplayName()+&quot;&quot;);
        } catch (SQLException ex) {
            System.out.println(ex);
        }
    }[/code]


That to update the highscores, now here the methods to go over Integer.MAX_VALUE and get player&#39;s levels based on XP. If we just grab their levels directly, it will include any bonuses, throwing them off. This will go in Skills.java (com.rs.game.player.content)


    
[code]    public int getTotalLevel(Player player) {
        int totallevel = 0;
        for (int i = 0; i &lt;= 24; i++) {
            totallevel += player.getSkills().getLevelForXp(i);
        }
        return totallevel;
    }




    public String getTotalXp(Player player) {
        double totalxp = 0;
        for (double xp : player.getSkills().getXp()) {
            totalxp += xp;
        }
        NumberFormat formatter = new DecimalFormat(&quot;#######&quot;);
        return &quot;&quot;+formatter.format(totalxp)+&quot;&quot;;
    }[/code]








And that&#39;s basically all there is to it XD not much work was put into this, except trying to make the script itself, which was hard for me because i didn&#39;t know how to display the table. If you&#39;re server uses rights to determine which rank a player is (including donor) then this will work perfect.


Again...THIS MAY NEED EDITING TO WORK WITH YOUR SERVER.


I will be posting another script for item database, looks almost just like itemdb.biz XD</description>
    
    <lastBuildDate>Sat, 03 Jan 2015 01:06:19 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/sql-simple-custom-highscores-easy-to-install/513389.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>[SQL] Simple Custom Highscores - Easy To Install</title>
        <dc:creator><![CDATA[@entrinthy_rs entrinthy rs]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/entrinthy_rs">@entrinthy_rs</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="3" data-topic="513389">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/fox2007/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> Fox2007:</div>
<blockquote>
<p>Alright thanks. Will surely look into it <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
</blockquote>
</aside>
<p>Can you please reupload the files?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/sql-simple-custom-highscores-easy-to-install/513389/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/sql-simple-custom-highscores-easy-to-install/513389/7</link>
        <pubDate>Sat, 03 Jan 2015 01:06:19 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-513389-7</guid>
        <source url="https://forum.moparisthebest.com/t/sql-simple-custom-highscores-easy-to-install/513389.rss">[SQL] Simple Custom Highscores - Easy To Install</source>
      </item>
      <item>
        <title>[SQL] Simple Custom Highscores - Easy To Install</title>
        <dc:creator><![CDATA[@khayam khayam]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/khayam">@khayam</a> wrote:</p>
          <blockquote>
              <p>can you post the files up again please?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/sql-simple-custom-highscores-easy-to-install/513389/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/sql-simple-custom-highscores-easy-to-install/513389/6</link>
        <pubDate>Sun, 16 Jun 2013 23:40:42 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-513389-6</guid>
        <source url="https://forum.moparisthebest.com/t/sql-simple-custom-highscores-easy-to-install/513389.rss">[SQL] Simple Custom Highscores - Easy To Install</source>
      </item>
      <item>
        <title>[SQL] Simple Custom Highscores - Easy To Install</title>
        <dc:creator><![CDATA[@AnderRoo AnderRoo]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/anderroo">@AnderRoo</a> wrote:</p>
          <blockquote>
              <p>Could you re upload the files please?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/sql-simple-custom-highscores-easy-to-install/513389/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/sql-simple-custom-highscores-easy-to-install/513389/5</link>
        <pubDate>Wed, 01 May 2013 17:06:34 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-513389-5</guid>
        <source url="https://forum.moparisthebest.com/t/sql-simple-custom-highscores-easy-to-install/513389.rss">[SQL] Simple Custom Highscores - Easy To Install</source>
      </item>
      <item>
        <title>[SQL] Simple Custom Highscores - Easy To Install</title>
        <dc:creator><![CDATA[@Sentinel_X Sentinel X]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sentinel_x">@Sentinel_X</a> wrote:</p>
          <blockquote>
              <p>Thank you for the custom design <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"> Cheers</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/sql-simple-custom-highscores-easy-to-install/513389/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/sql-simple-custom-highscores-easy-to-install/513389/4</link>
        <pubDate>Tue, 02 Apr 2013 22:43:56 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-513389-4</guid>
        <source url="https://forum.moparisthebest.com/t/sql-simple-custom-highscores-easy-to-install/513389.rss">[SQL] Simple Custom Highscores - Easy To Install</source>
      </item>
      <item>
        <title>[SQL] Simple Custom Highscores - Easy To Install</title>
        <dc:creator><![CDATA[@Fox2007 Fox2007]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/fox2007">@Fox2007</a> wrote:</p>
          <blockquote>
              <p>Alright thanks. Will surely look into it <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/sql-simple-custom-highscores-easy-to-install/513389/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/sql-simple-custom-highscores-easy-to-install/513389/3</link>
        <pubDate>Tue, 02 Apr 2013 19:56:25 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-513389-3</guid>
        <source url="https://forum.moparisthebest.com/t/sql-simple-custom-highscores-easy-to-install/513389.rss">[SQL] Simple Custom Highscores - Easy To Install</source>
      </item>
      <item>
        <title>[SQL] Simple Custom Highscores - Easy To Install</title>
        <dc:creator><![CDATA[@Ruby_Forums_Coder Ruby]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ruby_forums_coder">@Ruby_Forums_Coder</a> wrote:</p>
          <blockquote>
              <p>I highly suggest you re-write this without using mysql_ functions, they’re deprecated and will more than likely be removed from one of the next few major PHP releases. Re-write it using either mysqli or PDO, I suggest PDO over mysqli due to its security and multi driveral support.</p>
<p>Not a bad job, though.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/sql-simple-custom-highscores-easy-to-install/513389/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/sql-simple-custom-highscores-easy-to-install/513389/2</link>
        <pubDate>Tue, 02 Apr 2013 17:09:07 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-513389-2</guid>
        <source url="https://forum.moparisthebest.com/t/sql-simple-custom-highscores-easy-to-install/513389.rss">[SQL] Simple Custom Highscores - Easy To Install</source>
      </item>
      <item>
        <title>[SQL] Simple Custom Highscores - Easy To Install</title>
        <dc:creator><![CDATA[@Fox2007 Fox2007]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/fox2007">@Fox2007</a> wrote:</p>
          <blockquote>
              <p>Posted this on Rune-Server myself. My username is King Fox.</p>
<p>Alright, made this myself, figured i would release. The style isn’t the best, but i like it and it shows what i need it to.<br>
Preview: <a href="http://prntscr.com/yt6xi" data-bbcode="true" rel="nofollow noopener">http://prntscr.com/yt6xi</a></p>
<p>Again, this is very basic and configured for my server. If you want it to work how you want it, then you will need to do some modifications. I have exp set as a string so i could go over Integer.MAX_VALUE (2,147,483,647). This tutorial will assume you know how to create a table and such.</p>
<p>Database Structure:</p>
<p><code>CREATE TABLE IF NOT EXISTS `highscores` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) NOT NULL DEFAULT 'user',
  `rights` int(11) NOT NULL DEFAULT '0',
  `overall` int(11) NOT NULL DEFAULT '0',
  `totalxp` varchar(255) NOT NULL DEFAULT 'totalxp',
  `prestige` int(11) NOT NULL DEFAULT '0',
  `combatlvl` int(11) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;</code></p>
<p>Files: <a href="https://dl.dropbox.com/u/103983828/highscores.zip" data-bbcode="true" rel="nofollow noopener">https://dl.dropbox.com/u/103983828/highscores.zip</a></p>
<p>Everything you need to edit is in config.php. This script cannot be injected or tampered with (tested several times, and reviewed it many times). I write this from scratch, so i had to look it over carefully. Ofc, knowing my luck, i probably missed something. But im pretty sure it’s safe <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p><span class="bbcode-b"><span class="bbcode-u">[SIZE=5]Tutorial:[/SIZE]</span></span><br>
First thing you need to do, is create the database using the sql provided above. Once created, you will need to modify the config.php in the zip folder provided above. Most of the settings can easily be changed from that.</p>
<p>[code]&lt;?php</p>
<pre><code>$HOST = "localhost";
$USER = "DB_USER";
$PASS = "DB_PASS";
$DATABASE = "Database";
$TABLE = "highscores";


$website_url = "http://your_site.com/";
$name = "SERVER_NAME";
$maxCount = 100;
$minTotalLevel = 400;
$con = mysql_connect($HOST, $USER, $PASS);
 mysql_select_db($DATABASE, $con);
</code></pre>
<p>?&gt;[/code]</p>
<p>Once edited, just upload to your forum or website directory, and everything should be set. Incase you need the server methods, here they are below. Will most likely need to be modified to work with your server depending on what SQL system you have implemented.</p>
<p><code>    public static void updateHighscores(Player player, String username) {
        try {
            ResultSet rs = DatabasePool.executeQuery("SELECT * FROM highscores WHERE name='"+username+"'");
                if (rs.next()) rs.deleteRow(); // delete row to insert new one ^_^
                rs.moveToInsertRow();
                rs.updateString("name", username);
                rs.updateInt("overall", player.getSkills().getTotalLevel(player));
                rs.updateInt("rights", player.getRights());
                rs.updateString("totalxp", ""+player.getSkills().getTotalXp(player)+"");
                rs.updateInt("prestige", player.getPrestigeLevel());
                rs.updateInt("combatLvl", player.getSkills().getCombatLevelWithSummoning());
                rs.insertRow();
                System.out.println("[Highscores] Updated "+player.getDisplayName()+"");
        } catch (SQLException ex) {
            System.out.println(ex);
        }
    }</code></p>
<p>That to update the highscores, now here the methods to go over Integer.MAX_VALUE and get player’s levels based on XP. If we just grab their levels directly, it will include any bonuses, throwing them off. This will go in Skills.java (com.rs.game.player.content)</p>
<p>[code]    public int getTotalLevel(Player player) {<br>
int totallevel = 0;<br>
for (int i = 0; i &lt;= 24; i++) {<br>
totallevel += player.getSkills().getLevelForXp(i);<br>
}<br>
return totallevel;<br>
}</p>
<pre><code>public String getTotalXp(Player player) {
    double totalxp = 0;
    for (double xp : player.getSkills().getXp()) {
        totalxp += xp;
    }
    NumberFormat formatter = new DecimalFormat("#######");
    return ""+formatter.format(totalxp)+"";
}[/code]
</code></pre>
<p>And that’s basically all there is to it XD not much work was put into this, except trying to make the script itself, which was hard for me because i didn’t know how to display the table. If you’re server uses rights to determine which rank a player is (including donor) then this will work perfect.</p>
<p>Again…THIS MAY NEED EDITING TO WORK WITH YOUR SERVER.</p>
<p>I will be posting another script for item database, looks almost just like itemdb.biz XD</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/sql-simple-custom-highscores-easy-to-install/513389/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/sql-simple-custom-highscores-easy-to-install/513389/1</link>
        <pubDate>Tue, 02 Apr 2013 05:02:30 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-513389-1</guid>
        <source url="https://forum.moparisthebest.com/t/sql-simple-custom-highscores-easy-to-install/513389.rss">[SQL] Simple Custom Highscores - Easy To Install</source>
      </item>
  </channel>
</rss>
