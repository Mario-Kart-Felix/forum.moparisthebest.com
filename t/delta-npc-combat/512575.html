<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/delta-npc-combat/512575 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 03:43:36 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>[Delta] NPC combat - Runescape - moparisthebest.com</title>
    <meta name="description" content="I take NO credit for this! This was posted on rune-serber and was completely underrated. You should DEFINITELY apply this if you haven&amp;#39;t already. 



100% credit to zz">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="512575.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;[Delta] NPC combat&#39;" href="512575.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/delta-npc-combat/512575" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/delta-npc-combat/512575" />
<meta property="og:title" content="[Delta] NPC combat" />
<meta name="twitter:title" content="[Delta] NPC combat" />
<meta property="og:description" content="I take NO credit for this! This was posted on rune-serber and was completely underrated. You should DEFINITELY apply this if you haven’t already.  [QUOTE=zzbrandon;1518861]Well i was looking through my npchandler.java at the attackplayer() boolean and noticed something very odd about how npc hits were calculated.  It looked like this.  [CODE]if (player != null) {  		int def = player.playerBonus[6]; 		int rand = misc.random(def); 		int rand_npc = misc.random(combatLevel[NPCID]); 		if (NPCID == 19..." />
<meta name="twitter:description" content="I take NO credit for this! This was posted on rune-serber and was completely underrated. You should DEFINITELY apply this if you haven’t already.  [QUOTE=zzbrandon;1518861]Well i was looking through my npchandler.java at the attackplayer() boolean and noticed something very odd about how npc hits were calculated.  It looked like this.  [CODE]if (player != null) {  		int def = player.playerBonus[6]; 		int rand = misc.random(def); 		int rand_npc = misc.random(combatLevel[NPCID]); 		if (NPCID == 19..." />
<meta property="article:published_time" content="2013-03-31T12:10:27+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="512575.html">[Delta] NPC combat</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Christmas_tree.html'><span itemprop='name'>Christmas_tree</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2013-03-31T12:10:27Z'>
            <time itemprop='dateModified' datetime='2016-08-04T06:25:28Z' class='post-time'>
              August 4, 2016,  6:25am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I take NO credit for this! This was posted on rune-serber and was completely underrated. You should DEFINITELY apply this if you haven’t already.</p>
<p>[QUOTE=zzbrandon;1518861]Well i was looking through my npchandler.java at the attackplayer() boolean and noticed something very odd about how npc hits were calculated.  It looked like this.</p>
<p>[CODE]if (player != null) {</p>
<pre><code>		int def = player.playerBonus[6];
		int rand = misc.random(def);
		int rand_npc = misc.random(combatLevel[NPCID]);
		if (NPCID == 1961) {
			combatLevel[NPCID] = 105;
		}
		if (npcs[NPCID].npcType == 1472) {
			rand_npc = misc.random(800);
		}
		if (npcs[NPCID].npcType == 80) {
			rand_npc = misc.random(500);
		}
		if (npcs[NPCID].npcType == 1913) {
			rand_npc = misc.random(1500);
		}
		if (npcs[NPCID].npcType == 936) {
			rand_npc = misc.random(100);
		}
		if (npcs[NPCID].npcType == 110) {
			rand_npc = misc.random(20);
		}
		if (npcs[NPCID].npcType == 117 || npcs[NPCID].npcType == 112) { // giant
			rand_npc = misc.random(10);
		}
		if (npcs[NPCID].npcType == 1338) { // dagg
			rand_npc = misc.random(60);
		}
		if (npcs[NPCID].npcType == 1610) { // gargoyle
			rand_npc = misc.random(170);
		}
		if (npcs[NPCID].npcType == 1616) { // basilisk
			rand_npc = misc.random(60);
		}
		if (npcs[NPCID].npcType == 1637) { // jelly
			rand_npc = misc.random(70);
		}
		if (npcs[NPCID].npcType == 1624) { // dust devil
			rand_npc = misc.random(80);
		}
		if (npcs[NPCID].npcType == 1615) { // abyssal demon
			rand_npc = misc.random(180);
		}
		if (npcs[NPCID].npcType == 1154) { // kalphite soldier
			rand_npc = misc.random(50);
		}
		if (npcs[NPCID].npcType == 1155) { // kalphite guardian
			rand_npc = misc.random(70);
		}
		if (npcs[NPCID].npcType == 2783) { // dark beast
			rand_npc = misc.random(200);
		}
		if (npcs[NPCID].npcType == 941) { // green dragons
			rand_npc = misc.random(90);
		}
		if (npcs[NPCID].npcType == 1625) { // turoth
			rand_npc = misc.random(70);
		}
		if (npcs[NPCID].npcType == 1613) { // nechryael
			rand_npc = misc.random(120);
		}
		if (npcs[NPCID].npcType == 1264) { // saradomin wizard
			rand_npc = misc.random(50);
		}
		if (npcs[NPCID].npcType == 1459) { // gorilla guard
			rand_npc = misc.random(150);
		}
		if (npcs[NPCID].npcType == 1030) { // wolfman
			rand_npc = misc.random(70);
		}
		if (npcs[NPCID].npcType == 181) { // chaos druid
			rand_npc = misc.random(10);
		}
		if (npcs[NPCID].npcType == 2631) { // tok-xil
			rand_npc = misc.random(100);
		}
		if (npcs[NPCID].npcType == 2741) { // yt-mejkot
			rand_npc = misc.random(150);
		}
		if (npcs[NPCID].npcType == 2743) { // ket-zek
			rand_npc = misc.random(400);
		}
		if (npcs[NPCID].npcType == 2745) { // jad
			rand_npc = misc.random(500);
		}
		if (npcs[NPCID].npcType == 2746) { // yt-hurkot
			rand_npc = misc.random(50);
		}
		if (npcs[NPCID].npcType == 2591 || npcs[NPCID].npcType == 2604 || npcs[NPCID].npcType == 2610) { // tzaar
			rand_npc = misc.random(70);
		}
		if (npcs[NPCID].npcType == 2263) { // abyssal leach
			rand_npc = misc.random(5);
		}
		if (npcs[NPCID].npcType == 2264) { // abyssal guardian
			rand_npc = misc.random(10);
		}
		if (npcs[NPCID].npcType == 2265) { // abyssal walker
			rand_npc = misc.random(15);
		}
		// println("rand_npc=" + rand_npc + ", rand=" + rand);
		if (rand_npc &gt; rand) {
		if (npcs[NPCID].npcType == 87) { // rat
			hitDiff = misc.random(2);
		}
		if (npcs[NPCID].npcType == 19) { // white knight
			hitDiff = misc.random(4);
		}
		if (npcs[NPCID].npcType == 117 || npcs[NPCID].npcType == 112) { // giant
			hitDiff = misc.random(5);
		}
		if (npcs[NPCID].npcType == 1338) { // dagg
			hitDiff = misc.random(5);
		}
		if (npcs[NPCID].npcType == 1610) { // gargoyle
			hitDiff = misc.random(15);
		}
		if (npcs[NPCID].npcType == 1616) { // basilisk
			hitDiff = misc.random(7);
		}
		if (npcs[NPCID].npcType == 1637) { // jelly
			hitDiff = misc.random(7);
		}
		if (npcs[NPCID].npcType == 1624) { // dust devil
			hitDiff = misc.random(8);
		}
		if (npcs[NPCID].npcType == 1615) { // abyssal demon
			hitDiff = misc.random(20);
		}
		if (npcs[NPCID].npcType == 1154) { // kalphite soldier
			hitDiff = misc.random(8);
		}
		if (npcs[NPCID].npcType == 1155) { // kalphite guardian
			hitDiff = misc.random(8);
		}
		if (npcs[NPCID].npcType == 2783) { // dark beast
			hitDiff = misc.random(22);
		}
		if (npcs[NPCID].npcType == 941) { // green dragons
			hitDiff = misc.random(10);
		}
		if (npcs[NPCID].npcType == 1625) { // turoth
			hitDiff = misc.random(5);
		}
		if (npcs[NPCID].npcType == 1613) { // nechryael
			hitDiff = misc.random(15);
		}
		if (npcs[NPCID].npcType == 1264) { // saradomin wizard
			hitDiff = misc.random(7);
		}
		if (npcs[NPCID].npcType == 1459) { // gorilla guard
			hitDiff = misc.random(22);
		}
		if (npcs[NPCID].npcType == 1030) { // wolfman
			hitDiff = misc.random(10);
		}
		if (npcs[NPCID].npcType == 181) { // chaos druid
			hitDiff = misc.random(2);
		}
		if (npcs[NPCID].npcType == 1267) { // rock crab
			hitDiff = misc.random(2);
		}
		if (npcs[NPCID].npcType == 90) { // skeleton
			hitDiff = misc.random(2);
		}
		if (npcs[NPCID].npcType == 2627) { // tz-kih
			hitDiff = misc.random(4);
		}
		if (npcs[NPCID].npcType == 2630) { // tz-kek
			hitDiff = misc.random(7);
		}
		if (npcs[NPCID].npcType == 2631) { // tok-xil
			hitDiff = misc.random(13);
		}
		if (npcs[NPCID].npcType == 2738) { // tz-kek
			hitDiff = misc.random(4);
		}
		if (npcs[NPCID].npcType == 2741) { // yt-mejkot
			hitDiff = misc.random(25);
		}
		if (npcs[NPCID].npcType == 2743) { // ket-zek
			hitDiff = misc.random(49);
		}
		if (npcs[NPCID].npcType == 2745) { // jad
			hitDiff = misc.random(99);
		}
		if (npcs[NPCID].npcType == 2746) { // yt-hurkot
			hitDiff = misc.random(14);
		}
		if (npcs[NPCID].npcType == 2263) { // abyssal leach
			hitDiff = misc.random(1);
		}
		if (npcs[NPCID].npcType == 2264) { // abyssal guardian
			hitDiff = misc.random(2);
		}
		if (npcs[NPCID].npcType == 2265) { // abyssal walker
			hitDiff = misc.random(2);
		}
		if (npcs[NPCID].npcType == 2591 || npcs[NPCID].npcType == 2604 || npcs[NPCID].npcType == 2610) { // tzhaar
			hitDiff = misc.random(14);
		}
		if (npcs[NPCID].npcType != 117 &amp;&amp; npcs[NPCID].npcType != 117 &amp;&amp; npcs[NPCID].npcType != 112 &amp;&amp; npcs[NPCID].npcType != 1338 &amp;&amp; npcs[NPCID].npcType != 1610 &amp;&amp; npcs[NPCID].npcType != 1616 &amp;&amp; npcs[NPCID].npcType != 1637 &amp;&amp; npcs[NPCID].npcType != 1624 &amp;&amp; npcs[NPCID].npcType != 1615 &amp;&amp; npcs[NPCID].npcType != 2783 &amp;&amp; npcs[NPCID].npcType != 941 &amp;&amp; npcs[NPCID].npcType != 1625 &amp;&amp; npcs[NPCID].npcType != 1613 &amp;&amp; npcs[NPCID].npcType != 1264 &amp;&amp; npcs[NPCID].npcType != 1459 &amp;&amp; npcs[NPCID].npcType != 1030 &amp;&amp; npcs[NPCID].npcType != 87 &amp;&amp; npcs[NPCID].npcType != 19 &amp;&amp; npcs[NPCID].npcType != 1 &amp;&amp; npcs[NPCID].npcType != 2 &amp;&amp; npcs[NPCID].npcType != 3 &amp;&amp; npcs[NPCID].npcType != 4 &amp;&amp; npcs[NPCID].npcType != 10 &amp;&amp; npcs[NPCID].npcType != 181 &amp;&amp; npcs[NPCID].npcType != 1267 &amp;&amp; npcs[NPCID].npcType != 90 &amp;&amp; npcs[NPCID].npcType != 2627 &amp;&amp; npcs[NPCID].npcType != 2630 &amp;&amp; npcs[NPCID].npcType != 2631 &amp;&amp; npcs[NPCID].npcType != 2731 &amp;&amp; npcs[NPCID].npcType != 2741 &amp;&amp; npcs[NPCID].npcType != 2743 &amp;&amp; npcs[NPCID].npcType != 2745 &amp;&amp; npcs[NPCID].npcType != 2746 &amp;&amp; npcs[NPCID].npcType != 1154 &amp;&amp; npcs[NPCID].npcType != 1155 &amp;&amp; npcs[NPCID].npcType != 2591 &amp;&amp; npcs[NPCID].npcType != 2604 &amp;&amp; npcs[NPCID].npcType != 2610) {
			hitDiff = misc.random(2);
		}
		int blocked = (int) (def / 10);
		
if (rand_npc &gt; rand) {

		hitDiff = misc.random(npcs[NPCID].MaxHit) - blocked;

if (hitDiff &lt; 0) {

		hitDiff = 0;
		}}
	 } else {
		hitDiff = 0;
		}
		}[/CODE]
</code></pre>
<p>Well i thought that was kind of really random and a stupid way to calculate npc hits considering it doesn’t even cover every npc and has it that you have to add several npcs so instead i decided to create a nice little equation(not really) to work for all npcs.  It looks like this.</p>
<p><code>	if (player != null) {
		//ZZBrandon's custom npc attack method Npc max hit is equal to half of their combat level
		//Need to add a dodging system for now i will just use a random.
			int defense = ((server.playerHandler.players[Player].playerLevel[1]/4) + (server.playerHandler.players[Player].playerBonus[6]/100));
	if (misc.random(800) == 1){
	hitDiff = 0;
	}else{
	hitDiff = (misc.random(npcs[NPCID].MaxHit) - misc.random(defense));
	}
	if (hitDiff &lt; 0) {
			hitDiff = 0;
			}
}</code></p>
<p>I did that in 5 minutes but basically it takes the players defense level and defense stat into consideration and based on those it takes the random max hit and subtracts a random of the defense to get the resulting attack.  Also in public void newnpc i changed the hitdiff to look like this.</p>
<pre><code class="lang-auto"></code></pre>
<p>Before it had the npcs hp/10 or something like that i personally like having an npc’s strength based off combat level especially with my new formula.  Feel free to use it if you want i am basically looking for feedback on how i can improve this method, I know i want to add in agility for the random hit, i realize a random hit of 0 being misc.random(800) is really random but i thought that it just felt right adding in that random hit of 0 like that until i add agility into the equation.</p>
<p>So anyway if anyone has any ideas or comments on improving this small bit I would greatly appreciate it since i really want to help improve the npchandler and the way npcs fight with the player.[/QUOTE]</p>
<p>100% credit to zz</p>
      </div>

      <meta itemprop='headline' content='[Delta] NPC combat'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Clawz_fury.html'><span itemprop='name'>Clawz_fury</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2013-03-31T21:34:44Z'>
            <time itemprop='dateModified' datetime='2016-08-04T06:26:39Z' class='post-time'>
              August 4, 2016,  6:26am
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>load the npc attack (and defence) levels externally do something similar to this for the best results</p>
<p>this is okay though</p>
      </div>

      <meta itemprop='headline' content='[Delta] NPC combat'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Christmas_tree.html'><span itemprop='name'>Christmas_tree</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2013-03-31T21:40:46Z'>
            <time itemprop='dateModified' datetime='2016-08-04T06:26:39Z' class='post-time'>
              August 4, 2016,  6:26am
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Clawz fury, post:2, topic:512575”]load the npc attack (and defence) levels externally do something similar to this for the best results</p>
<p>this is okay though[/quote]</p>
<p>Would be ideal - this is a cheap fix and better than standard delta  <img src="../../images/emoji/twitter/stuck_out_tongueae52.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
      </div>

      <meta itemprop='headline' content='[Delta] NPC combat'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/delta-npc-combat/512575 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 03:43:37 GMT -->
</html>
