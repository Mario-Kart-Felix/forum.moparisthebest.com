<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Achievement system error</title>
    <link>https://forum.moparisthebest.com/t/achievement-system-error/555306</link>
    <description>Apparently this won&#39;t update in the character files
[code]
&quot;achievements-completion&quot;: [
    false,
    false,
    false,
    false,
    false //this is actually 101. i just deleted most to test something
  ],[/code]
EDIT: I have a video
[url=https://youtu.be/Z28gV0MTbAc]https://youtu.be/Z28gV0MTbAc[/url]
​I can&#39;t find why I can&#39;t add more achievements. I know about the 101 array. But can&#39;t find how to make the array longer.
When I try to add a 102th achievement, I get this error.
[code]
java.lang.ArrayIndexOutOfBoundsException: 101
        at com.world.content.Achievements.updateInterface(Achievements.java:173)
        at com.world.entity.impl.player.PlayerHandler.handleLogin(PlayerHandler.
java:117)
        at com.world.World.sequence(World.java:115)
        at com.engine.GameEngine.run(GameEngine.java:39)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:51
1)
        at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308)
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.
access$301(ScheduledThreadPoolExecutor.java:180)
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.
run(ScheduledThreadPoolExecutor.java:294)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.
java:1142)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor
.java:617)
        at java.lang.Thread.run(Thread.java:745)[/code]
Here&#39;s my achievement system. Ok, I just updated this. Read down to the quote in this post.
[code]
public class Achievements {
    public enum AchievementData {
        ENTER_THE_LOTTERY(Difficulty.EASY, &quot;Enter The Lottery&quot;, 37005, null),
        FILL_WELL_OF_GOODWILL_1M(Difficulty.EASY, &quot;Pour 1M Into The Well&quot;, 37006, null),
        CUT_AN_OAK_TREE(Difficulty.EASY, &quot;Cut An Oak Tree&quot;, 37007, null),
        BURN_AN_OAK_LOG(Difficulty.EASY, &quot;Burn An Oak Log&quot;, 37008, null),
        FISH_A_SALMON(Difficulty.EASY, &quot;Fish A Salmon&quot;, 37009, null),
        COOK_A_SALMON(Difficulty.EASY, &quot;Cook A Salmon&quot;, 37010, null),
        EAT_A_SALMON(Difficulty.EASY, &quot;Eat A Salmon&quot;, 37011, null),
        MINE_SOME_IRON(Difficulty.EASY, &quot;Mine Some Iron&quot;, 37012, null),
        SMELT_AN_IRON_BAR(Difficulty.EASY, &quot;Smelt An Iron Bar&quot;, 37013, null),
        HARVEST_A_CROP(Difficulty.EASY, &quot;Harvest A Crop&quot;, 37014, null),
        INFUSE_A_DREADFOWL_POUCH(Difficulty.EASY, &quot;Infuse A Dreadfowl Pouch&quot;, 37015, null),
        CATCH_A_YOUNG_IMPLING(Difficulty.EASY, &quot;Catch A Young Impling&quot;, 37016, null),
        CRAFT_A_PAIR_OF_LEATHER_BOOTS(Difficulty.EASY, &quot;Craft A Pair of Leather Boots&quot;, 37017, null),
        CLIMB_AN_AGILITY_OBSTACLE(Difficulty.EASY, &quot;Climb An Agility Obstacle&quot;, 37018, null),
        FLETCH_SOME_ARROWS(Difficulty.EASY, &quot;Fletch Some Arrows&quot;, 37019, null),
        STEAL_A_RING(Difficulty.EASY, &quot;Steal A Ring&quot;, 37020, null),
        MIX_A_POTION(Difficulty.EASY, &quot;Mix A Potion&quot;, 37021, null),
        RUNECRAFT_SOME_RUNES(Difficulty.EASY, &quot;Runecraft Some Runes&quot;, 37022, null),
        BURY_A_BIG_BONE(Difficulty.EASY, &quot;Bury A Big Bone&quot;, 37023, null),
        COMPLETE_A_SLAYER_TASK(Difficulty.EASY, &quot;Complete A Slayer Task&quot;, 37024, null),
        SET_UP_A_CANNON(Difficulty.EASY, &quot;Set Up A Cannon&quot;, 37025, null),
        KILL_A_MONSTER_USING_MELEE(Difficulty.EASY, &quot;Kill a Monster Using Melee&quot;, 37026, null),
        KILL_A_MONSTER_USING_RANGED(Difficulty.EASY, &quot;Kill a Monster Using Ranged&quot;, 37027, null),
        KILL_A_MONSTER_USING_MAGIC(Difficulty.EASY, &quot;Kill a Monster Using Magic&quot;, 37028, null),
        DEAL_EASY_DAMAGE_USING_MELEE(Difficulty.EASY, &quot;Deal 1000 Melee Damage&quot;, 37029, new int[]{0, 1000}),
        DEAL_EASY_DAMAGE_USING_RANGED(Difficulty.EASY, &quot;Deal 1000 Ranged Damage&quot;, 37030, new int[]{1, 1000}),
        DEAL_EASY_DAMAGE_USING_MAGIC(Difficulty.EASY, &quot;Deal 1000 Magic Damage&quot;, 37031, new int[]{2, 1000}),
        PERFORM_A_SPECIAL_ATTACK(Difficulty.EASY, &quot;Perform a Special Attack&quot;, 37032, null),
        FIGHT_ANOTHER_PLAYER(Difficulty.EASY, &quot;Fight Another Player&quot;, 37033, null),
        SET_AN_EMAIL_ADDRESS(Difficulty.EASY, &quot;Set An Email Address&quot;, 37034, null),
        ENTER_THE_LOTTERY_THREE_TIMES(Difficulty.MEDIUM, &quot;Enter The Lottery Three Times&quot;, 37037, new int[]{3, 3}),
        FILL_WELL_OF_GOODWILL_50M(Difficulty.MEDIUM, &quot;Pour 50M Into The Well&quot;, 37038, new int[]{4, 50000000}),
        CUT_100_MAGIC_LOGS(Difficulty.MEDIUM, &quot;Cut 100 Magic Logs&quot;, 37039, new int[]{5, 100}),
        BURN_100_MAGIC_LOGS(Difficulty.MEDIUM, &quot;Burn 100 Magic Logs&quot;, 37040, new int[]{6, 100}),
        FISH_25_ROCKTAILS(Difficulty.MEDIUM, &quot;Fish 25 Rocktails&quot;, 37041, new int[]{7, 25}),
        COOK_25_ROCKTAILS(Difficulty.MEDIUM, &quot;Cook 25 Rocktails&quot;, 37042, new int[]{8, 25}),
        MINE_25_RUNITE_ORES(Difficulty.MEDIUM, &quot;Mine 25 Runite Ores&quot;, 37043, new int[]{9, 25}),
        SMELT_25_RUNE_BARS(Difficulty.MEDIUM, &quot;Smelt 25 Rune Bars&quot;, 37044, new int[]{10, 25}),
        HARVEST_10_TORSTOLS(Difficulty.MEDIUM, &quot;Harvest 10 Torstols&quot;, 37045, new int[]{11, 10}),
        INFUSE_25_TITAN_POUCHES(Difficulty.MEDIUM, &quot;Infuse 25 Steel Titans&quot;, 37046, new int[]{12, 25}),
        CATCH_5_KINGLY_IMPLINGS(Difficulty.MEDIUM, &quot;Catch 5 Kingly Implings&quot;, 37047, new int[]{13, 5}),
        COMPLETE_A_HARD_SLAYER_TASK(Difficulty.MEDIUM, &quot;Complete A Hard Slayer Task&quot;, 37048, null),
        CRAFT_20_BLACK_DHIDE_BODIES(Difficulty.MEDIUM, &quot;Craft 20 Black D&#39;hide Bodies&quot;, 37049, new int[]{14, 20}),
        FLETCH_450_RUNE_ARROWS(Difficulty.MEDIUM, &quot;Fletch 450 Rune Arrows&quot;, 37050, new int[]{15, 450}),
        STEAL_140_SCIMITARS(Difficulty.MEDIUM, &quot;Steal 140 Scimitars&quot;, 37051, new int[]{16, 140}),
        MIX_AN_OVERLOAD_POTION(Difficulty.MEDIUM, &quot;Mix An Overload Potion&quot;, 37052, null),
        ASSEMBLE_A_GODSWORD(Difficulty.MEDIUM, &quot;Assemble A Godsword&quot;, 37053, null),
        CLIMB_50_AGILITY_OBSTACLES(Difficulty.MEDIUM, &quot;Climb 50 Agility Obstacles&quot;, 37054, new int[]{17, 50}),
        RUNECRAFT_500_BLOOD_RUNES(Difficulty.MEDIUM, &quot;Runecraft 500 Blood Runes&quot;, 37055, new int[]{18, 500}),
        BURY_25_FROST_DRAGON_BONES(Difficulty.MEDIUM, &quot;Bury 25 Frost Dragon Bones&quot;, 37056, new int[]****, 25}),
        FIRE_500_CANNON_BALLS(Difficulty.MEDIUM, &quot;Fire 500 Cannon Balls&quot;, 37057, new int[]{20, 500}),
        DEAL_MEDIUM_DAMAGE_USING_MELEE(Difficulty.MEDIUM, &quot;Deal 100K Melee Damage&quot;, 37058, new int[]{21, 100000}),
        DEAL_MEDIUM_DAMAGE_USING_RANGED(Difficulty.MEDIUM, &quot;Deal 100K Ranged Damage&quot;, 37059, new int[]{22, 100000}),
        DEAL_MEDIUM_DAMAGE_USING_MAGIC(Difficulty.MEDIUM, &quot;Deal 100K Magic Damage&quot;, 37060, new int[]{23, 100000}),
        DEFEAT_THE_KING_BLACK_DRAGON(Difficulty.MEDIUM, &quot;Defeat The King Black Dragon&quot;, 37061, null),
        DEFEAT_THE_CHAOS_ELEMENTAL(Difficulty.MEDIUM, &quot;Defeat The Chaos Elemental&quot;, 37062, null),
        DEFEAT_A_TORMENTED_DEMON(Difficulty.MEDIUM, &quot;Defeat A Tormented Demon&quot;, 37063, null),
        DEFEAT_THE_CULINAROMANCER(Difficulty.MEDIUM, &quot;Defeat The Culinaromancer&quot;, 37064, null),
        DEFEAT_NOMAD(Difficulty.MEDIUM, &quot;Defeat Nomad&quot;, 37065, null),
        DEFEAT_10_PLAYERS(Difficulty.MEDIUM, &quot;Defeat 10 Players&quot;, 37066, new int[]{24, 10}),
        REACH_A_KILLSTREAK_OF_3(Difficulty.MEDIUM, &quot;Reach A Killstreak Of 3&quot;, 37067, null),
        FILL_WELL_OF_GOODWILL_250M(Difficulty.HARD, &quot;Pour 250M Into The Well&quot;, 37070, new int[]{25, 250000000}),
        CUT_5000_MAGIC_LOGS(Difficulty.HARD, &quot;Cut 5000 Magic Logs&quot;, 37071, new int[]{26, 5000}),
        BURN_2500_MAGIC_LOGS(Difficulty.HARD, &quot;Burn 2500 Magic Logs&quot;, 37072, new int[]{27, 2500}),
        FISH_2000_ROCKTAILS(Difficulty.HARD, &quot;Fish 2000 Rocktails&quot;, 37073, new int[]{28, 2000}),
        COOK_1000_ROCKTAILS(Difficulty.HARD, &quot;Cook 1000 Rocktails&quot;, 37074, new int[]{29, 1000}),
        MINE_2000_RUNITE_ORES(Difficulty.HARD, &quot;Mine 2000 Runite Ores&quot;, 37075, new int[]{30, 2000}),
        SMELT_1000_RUNE_BARS(Difficulty.HARD, &quot;Smelt 1000 Rune Bars&quot;, 37076, new int[]{31, 1000}),
        HARVEST_1000_TORSTOLS(Difficulty.HARD, &quot;Harvest 1000 Torstols&quot;, 37077, new int[]{32, 1000}),
        INFUSE_500_STEEL_TITAN_POUCHES(Difficulty.HARD, &quot;Infuse 500 Steel Titans&quot;, 37078, new int[]{33, 500}),
        CRAFT_1000_SPONSOR_GEMS(Difficulty.HARD, &quot;Craft 1000 Diamond Gems&quot;, 37079, new int[]{34, 1000}),
        CATCH_100_KINGLY_IMPLINGS(Difficulty.HARD, &quot;Catch 100 Kingly Imps&quot;, 37080, new int[]{35, 100}),
        FLETCH_5000_RUNE_ARROWS(Difficulty.HARD, &quot;Fletch 5000 Rune Arrows&quot;, 37081, new int[]{36, 5000}),
        STEAL_5000_SCIMITARS(Difficulty.HARD, &quot;Steal 5000 Scimitars&quot;, 37082, new int[]{37, 5000}),
        RUNECRAFT_8000_BLOOD_RUNES(Difficulty.HARD, &quot;Runecraft 8000 Blood Runes&quot;, 37083, new int[]{38, 8000}),
        BURY_500_FROST_DRAGON_BONES(Difficulty.HARD, &quot;Bury 500 Frost Dragon Bones&quot;, 37084, new int[]{39, 500}),
        FIRE_5000_CANNON_BALLS(Difficulty.HARD, &quot;Fire 5000 Cannon Balls&quot;, 37085, new int[]{40, 5000}),
        MIX_100_OVERLOAD_POTIONS(Difficulty.HARD, &quot;Mix 100 Overload Potions&quot;, 37086, new int[]{41, 100}),
        COMPLETE_AN_ELITE_SLAYER_TASK(Difficulty.HARD, &quot;Complete An Elite Slayer Task&quot;, 37087, null),
        ASSEMBLE_5_GODSWORDS(Difficulty.HARD, &quot;Assemble 5 Godswords&quot;, 37088, new int[]{42, 5}),
        DEAL_HARD_DAMAGE_USING_MELEE(Difficulty.HARD, &quot;Deal 10M Melee Damage&quot;, 37089, new int[]{43, 10000000}),
        DEAL_HARD_DAMAGE_USING_RANGED(Difficulty.HARD, &quot;Deal 10M Ranged Damage&quot;, 37090, new int[]{44, 10000000}),
        DEAL_HARD_DAMAGE_USING_MAGIC(Difficulty.HARD, &quot;Deal 10M Magic Damage&quot;, 37091, new int[]{45, 10000000}),
        DEFEAT_JAD(Difficulty.HARD, &quot;Defeat Jad&quot;, 37092, null),
        DEFEAT_BANDOS_AVATAR(Difficulty.HARD, &quot;Defeat Bandos Avatar&quot;, 37093, null),
        DEFEAT_GENERAL_GRAARDOR(Difficulty.HARD, &quot;Defeat General Graardor&quot;, 37094, null),
        DEFEAT_KREE_ARRA(Difficulty.HARD, &quot;Defeat Kree&#39;Arra&quot;, 37095, null),
        DEFEAT_COMMANDER_ZILYANA(Difficulty.HARD, &quot;Defeat Commander Zilyana&quot;, 37096, null),
        DEFEAT_KRIL_TSUTSAROTH(Difficulty.HARD, &quot;Defeat K&#39;ril Tsutsaroth&quot;, 37097, null),
        DEFEAT_THE_CORPOREAL_BEAST(Difficulty.HARD, &quot;Defeat The Corporeal Beast&quot;, 37098, null),
        DEFEAT_NEX(Difficulty.HARD, &quot;Defeat Nex&quot;, 37099, null),
        DEFEAT_30_PLAYERS(Difficulty.HARD, &quot;Defeat 30 Players&quot;, 37100, new int[]{46, 30}),
        REACH_A_KILLSTREAK_OF_6(Difficulty.HARD, &quot;Reach A Killstreak Of 6&quot;, 37101, null),
        COMPLETE_ALL_HARD_TASKS(Difficulty.ELITE, &quot;Complete All Hard Tasks&quot;, 37104, new int[]{47, 32}),
        CUT_AN_ONYX_STONE(Difficulty.ELITE, &quot;Cut An Onyx Stone&quot;, 37105, null),
        REACH_MAX_EXP_IN_A_SKILL(Difficulty.ELITE, &quot;Reach Max Exp In A Skill&quot;, 37106, null),
        REACH_LEVEL_99_IN_ALL_SKILLS(Difficulty.ELITE, &quot;Reach Level 99 In All Skills&quot;, 37107, new int[]{48, 22}),
        DEFEAT_10000_MONSTERS(Difficulty.ELITE, &quot;Defeat 10,000 Monsters&quot;, 37108, new int[]{49, 10000}),
        DEFEAT_500_BOSSES(Difficulty.ELITE, &quot;Defeat 500 Boss Monsters&quot;, 37109, new int[]{50, 500}),
        VOTE_100_TIMES(Difficulty.ELITE, &quot;Vote 100 Times&quot;, 37110, new int[]{51, 100}),
        UNLOCK_ALL_LOYALTY_TITLES(Difficulty.ELITE, &quot;Unlock All Loyalty Titles&quot;, 37111, new int[]{52, 11}),
        UNLOCK_ALL_LOYALTY_TITLESS(Difficulty.ELITE, &quot;Unlock All Loyalty Titless&quot;, 37112, new int[]{53, 11}),
        REACH_A_KILLSTREAK_OF_12(Difficulty.HARD, &quot;Reach A Killstreak Of 12&quot;, 37113, null),
        CUT_10000_MAGIC_LOGS(Difficulty.ELITE, &quot;Cut 10000 Magic Logs&quot;, 37114, new int[]{54, 5000})
        ;
        AchievementData(Difficulty difficulty, String interfaceLine, int interfaceFrame, int[] progressData) {
            this.difficulty = difficulty;
            this.interfaceLine = interfaceLine;
            this.interfaceFrame = interfaceFrame;
            this.progressData = progressData;
        }
        private Difficulty difficulty;
        private String interfaceLine;
        private int interfaceFrame;
        private int[] progressData;
        public Difficulty getDifficulty() {
            return difficulty;
        }
    }
    public enum Difficulty {
        BEGINNER, EASY, MEDIUM, HARD, ELITE;
    }
    public static boolean handleButton(Player player, int button) {
        if(!(button &gt;= -28531 &amp;&amp; button &lt;= -28400)) {
            return false;
        }
        int index = -1;
        if(button &gt;= -28531 &amp;&amp; button &lt;= -28502) {
            index = 28531 + button;
        } else if(button &gt;= -28499 &amp;&amp; button &lt;= -28469) {
            index = 30 + 28499 + button;
        } else if(button &gt;= -28466 &amp;&amp; button &lt;= -28435) {
            index = 61 + 28466 + button;
        } else if(button &gt;= -28432 &amp;&amp; button &lt;= -28400) {
            index = 93 + 28432 + button;
        }
        if(index &gt;= 0 &amp;&amp; index &lt; AchievementData.values().length) {
            AchievementData achievement = AchievementData.values()[index];
            if(player.getAchievementAttributes().getCompletion()[achievement.ordinal()]) {
                player.getPacketSender().sendMessage(&quot;&lt;img=10&gt; &lt;col=004B00&gt;You have completed the achievement: &quot;+achievement.interfaceLine+&quot;.&quot;);
            } else if(achievement.progressData == null) {
                player.getPacketSender().sendMessage(&quot;&lt;img=10&gt; &lt;col=660000&gt;You have not started the achievement: &quot;+achievement.interfaceLine+&quot;.&quot;);
            } else {
                int progress = player.getAchievementAttributes().getProgress()[achievement.progressData[0]];
                int requiredProgress = achievement.progressData[1];
                if(progress == 0) {
                    player.getPacketSender().sendMessage(&quot;&lt;img=10&gt; &lt;col=660000&gt;You have not started the achievement: &quot;+achievement.interfaceLine+&quot;.&quot;);
                } else if(progress != requiredProgress) {
                    player.getPacketSender().sendMessage(&quot;&lt;img=10&gt; &lt;col=FFFF00&gt;Your progress for this achievement is currently at: &quot;+Misc.insertCommasToNumber(&quot;&quot;+progress)+&quot;/&quot;+Misc.insertCommasToNumber(&quot;&quot;+requiredProgress)+&quot;.&quot;);
                }
            }
        }
        return true;
    }
    public static void updateInterface(Player player) {
        for(AchievementData achievement : AchievementData.values()) {
            boolean completed = player.getAchievementAttributes().getCompletion()[achievement.ordinal()];
            boolean progress = achievement.progressData != null &amp;&amp; player.getAchievementAttributes().getProgress()[achievement.progressData[0]] &gt; 0;
            player.getPacketSender().sendString(achievement.interfaceFrame, (completed ? &quot;@gre@&quot; : progress ? &quot;@yel@&quot; : &quot;@red@&quot;) + achievement.interfaceLine);
        }
        player.getPacketSender().sendString(37001, &quot;Achievements: &quot;+player.getPointsHandler().getAchievementPoints()+&quot;/&quot;+AchievementData.values().length);
    }
    
    public static void setPoints(Player player) {
        int points = 0;
        for(AchievementData achievement : AchievementData.values()) {
            if(player.getAchievementAttributes().getCompletion()[achievement.ordinal()]) {
                points++;
            }
        }
        player.getPointsHandler().setAchievementPoints(points, false);
    }
    public static void doProgress(Player player, AchievementData achievement) {
        doProgress(player, achievement, 1);
    }
    public static void doProgress(Player player, AchievementData achievement, int amt) {
        if(player.getAchievementAttributes().getCompletion()[achievement.ordinal()])
            return;
        if(achievement.progressData != null) {
            int progressIndex = achievement.progressData[0];
            int amountNeeded = achievement.progressData[1];
            int previousDone = player.getAchievementAttributes().getProgress()[progressIndex];
            if((previousDone+amt) &lt; amountNeeded) {
                player.getAchievementAttributes().getProgress()[progressIndex] = previousDone+amt;
                if(previousDone == 0) 
                    player.getPacketSender().sendString(achievement.interfaceFrame, &quot;@yel@&quot;+ achievement.interfaceLine);
            } else {
                finishAchievement(player, achievement);
            }
        }
    }
    public static void finishAchievement(Player player, AchievementData achievement) {
        if(player.getAchievementAttributes().getCompletion()[achievement.ordinal()])
            return;
        player.getAchievementAttributes().getCompletion()[achievement.ordinal()] = true;
        player.getPacketSender().sendString(achievement.interfaceFrame, (&quot;&lt;col=004B00&gt;&quot;) + achievement.interfaceLine).sendMessage(&quot;&lt;img=10&gt;You have completed the achievement &quot;+Misc.formatText(achievement.toString().toLowerCase()+&quot;.&quot;)).sendString(37001, &quot;Achievements: &quot;+player.getPointsHandler().getAchievementPoints()+&quot;/&quot;+AchievementData.values().length);
        if(achievement.getDifficulty() == Difficulty.HARD) {
            doProgress(player, AchievementData.COMPLETE_ALL_HARD_TASKS);
        }
        
        player.getPointsHandler().setAchievementPoints(1, true);
    }
    public static class AchievementAttributes {
        public AchievementAttributes(){}
        /** ACHIEVEMENTS **/
        private boolean[] completed = new boolean[AchievementData.values().length];
        private int[] progress = new int[55];
        public boolean[] getCompletion() {
            return completed;
        }
        public void setCompletion(int index, boolean value) {
            this.completed[index] = value;
        }
        public void setCompletion(boolean[] completed) {
            this.completed = completed;
        }
        public int[] getProgress() {
            return progress;
        }
        public void setProgress(int index, int value) {
            this.progress[index] = value;
        }
        public void setProgress(int[] progress) {
            this.progress = progress;
        }
        /** MISC **/
        private int coinsGambled;
        private double totalLoyaltyPointsEarned;
        private boolean[] godsKilled = new boolean[5];
        public int getCoinsGambled() {
            return coinsGambled;
        }
        public void setCoinsGambled(int coinsGambled) {
            this.coinsGambled = coinsGambled;
        }
        public double getTotalLoyaltyPointsEarned() {
            return totalLoyaltyPointsEarned;
        }
        public void incrementTotalLoyaltyPointsEarned(double totalLoyaltyPointsEarned) {
            this.totalLoyaltyPointsEarned += totalLoyaltyPointsEarned;
        }
        public boolean[] getGodsKilled() {
            return godsKilled;
        }
        public void setGodKilled(int index, boolean godKilled) {
            this.godsKilled[index] = godKilled;
        }
        public void setGodsKilled(boolean[] b) {
            this.godsKilled = b;
        }
    }
}[/code]

Some reason, when I make a new acorunt. I don&#39;t get that error in the cmd anymore. So what&#39;s up?

&lt;blockquote&gt;It&#39;s because on old accounts you have an array of 101 achievements.
On new accounts, it makes an array of 102 achievements.&lt;/blockquote&gt;

How can I make the array update for the old accounts? I was able to get it working for newer accounts. It seems that accounts made before the updated achievements get the &quot;array error&quot;. Any ideas/fixes to get this sorted out?
I have this in playersave and playerload
[code]
object.add(&quot;achievements-completion&quot;, builder.toJsonTree(player.getAchievementAttributes().getCompletion()));
            object.add(&quot;achievements-progress&quot;, builder.toJsonTree(player.getAchievementAttributes().getProgress()));
[/code]
[code]
if (reader.has(&quot;achievements-completion&quot;)) {
                player.getAchievementAttributes().setCompletion(builder.fromJson(reader.get(&quot;achievements-completion&quot;).getAsJsonArray(), boolean[].class));
            }
            
            if (reader.has(&quot;achievements-progress&quot;)) {
                player.getAchievementAttributes().setProgress(builder.fromJson(reader.get(&quot;achievements-progress&quot;).getAsJsonArray(), int[].class));
            }

private final AchievementAttributes achievementAttributes = new AchievementAttributes();
    public AchievementAttributes getAchievementAttributes() {
        return achievementAttributes;
    }[/code]
This is what all I get when I search for achievements. I basically have all the necessary ones posted here already.
[IMG]http://i66.tinypic.com/1dmhg.jpg[/img]

[QUOTE=arch337;5138481]Not sure if work but try it:

[code]
if (reader.has(&quot;achievements-completion&quot;)) {
                player.getAchievementAttributes().setCompletion(builder.fromJson(reader.get(&quot;achievements-completion&quot;).getAsJsonArray(), boolean[].class));
System.out.println(&quot;Added &quot;+player.getAchievementAttributes().getCompletion().length+&quot; rows&quot;);
            } else {
object.add(&quot;achievements-completion&quot;, builder.toJsonTree(player.getAchievementAttributes().getCompletion()));
}
            
            if (reader.has(&quot;achievements-progress&quot;)) {
                player.getAchievementAttributes().setProgress(builder.fromJson(reader.get(&quot;achievements-progress&quot;).getAsJsonArray(), int[].class));
            } else {
object.add(&quot;achievements-progress&quot;, builder.toJsonTree(player.getAchievementAttributes().getProgress()));
}
[/code]

Your issue is basically it&#39;s adding them once. Then when you add more it do not know that it cant add them nomore. So the above is not guarantee fix but try it and see if it does add.[/QUOTE]

I just needed to add this with what you gave me to not have errors.
[code]JsonObject object = new JsonObject();[/code]
Still, I get the same outofbound error. Also Playersave and playerload are to different files. playerload is loading all the information for the character. playersave is the obvious savings for the character.
Here&#39;s my error.
[code]java.lang.ArrayIndexOutOfBoundsException: 5
	at com.world.content.Achievements.updateInterface(Achievements.java:68) [COLOR=&quot;#FFFFFF&quot;]//line 68[/COLOR]
	at com.world.entity.impl.player.PlayerHandler.handleLogin(PlayerHandler.java:117) [COLOR=&quot;#FFFFFF&quot;]//line 117[/COLOR]
	at com.world.World.sequence(World.java:115) [COLOR=&quot;#FFFFFF&quot;]//line 115[/COLOR]
	at com.engine.GameEngine.run(GameEngine.java:39) [COLOR=&quot;#FFFFFF&quot;]//line 39[/COLOR]
	at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
	at java.util.concurrent.FutureTask.runAndReset(Unknown Source)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(Unknown Source)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(Unknown Source)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
	at java.lang.Thread.run(Unknown Source)[/code]
achievements
[code]
public static void updateInterface(Player player) {
boolean completed = player.getAchievementAttributes().getCompletion()[achievement.ordinal()]; [COLOR=&quot;#FFFFFF&quot;]//line 68[/COLOR]
[/code]
playerhandler
[code]
public static void handleLogin(Player player) {
		Achievements.updateInterface(player); [COLOR=&quot;#FFFFFF&quot;]//line 117[/COLOR][/code] 
world
[code]
public static void sequence() {
PlayerHandler.handleLogin(player); [COLOR=&quot;#FFFFFF&quot;]//line 115[/COLOR][/code] 
gameengine
[code]
@Override
	public void run() {
		try {
			switch(engineState) {
			case PACKET_PROCESSING:
				World.getPlayers().forEach($it -&gt; $it.getSession().handlePrioritizedMessageQueue());
				break;
			case GAME_PROCESSING:
				TaskManager.sequence();
				World.sequence(); [COLOR=&quot;#FFFFFF&quot;]//line 39[/COLOR]
				break;
			}
			engineState = next();
		} catch (Throwable e) {
			e.printStackTrace();
			World.savePlayers();
			GrandExchangeOffers.save();
			ClanChatManager.save();
		}
	}[/code]</description>
    
    <lastBuildDate>Sun, 08 May 2016 23:07:13 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/achievement-system-error/555306.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Achievement system error</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <p>[quote=“imback4more, post:5, topic:555306”][quote author=sk8rdude461 link=topic=674497.msg4508133#msg4508133 date=1462641398]<br>
Why is your server loading a file just for achievements?</p>
<p>Perhaps if you place this:</p>
<pre><code class="lang-auto"></code></pre>
<p>Above the loading for the achievements, it’d work.<br>
Of course the code assumes you have a setter called “setAchievementAttributes” (I based it off the getter).<br>
All you’re doing is setting the player’s achievements to that of the AchievementData enum. <span class="bbcode-b">After</span> that it loads the data from the file.<br>
[/quote]</p>
<p>I don’t have the “setAchievementAttributes”.<br>
This is what is in my player.java</p>
<p><code>private final AchievementAttributes achievementAttributes = new AchievementAttributes();
	public AchievementAttributes getAchievementAttributes() {
		return achievementAttributes;
	}</code><br>
Also</p>
<p>[quote author=imback4more link=topic=674497.msg4508125#msg4508125 date=1462617051]<br>
I took off the other saving and loadings that way you can see how the file looks like.<br>
I hope you can be able to help me with this, so far you’ve helped me through everything else from other times.<br>
[/quote][/quote]<br>
To your also:<br>
It doesn’t matter. You’re loading 1 file for most the char data (.txt too?) and then a json one for the achievement (and other) data… It’s strange that you’d have it load like that.</p>
<p>But if you don’t have a setter, then make it:</p>
<p><code>	public void setAchievementAttributes(AchievementAttributes achievementAttributes) {
		this.achievementAttributes = achievementAttributes;
	}</code><br>
Place that under your getter.</p>
<p>And then place this above the loading:</p>
<pre><code class="lang-auto"></code></pre>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/achievement-system-error/555306/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/achievement-system-error/555306/6</link>
        <pubDate>Sun, 08 May 2016 23:07:13 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-555306-6</guid>
        <source url="https://forum.moparisthebest.com/t/achievement-system-error/555306.rss">Achievement system error</source>
      </item>
      <item>
        <title>Achievement system error</title>
        <dc:creator><![CDATA[@imback4more imback4more]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/imback4more">@imback4more</a> wrote:</p>
          <blockquote>
              <p>[quote=“sk8rdude461, post:4, topic:555306”]Why is your server loading a file just for achievements?</p>
<p>Perhaps if you place this:</p>
<pre><code class="lang-auto"></code></pre>
<p>Above the loading for the achievements, it’d work.<br>
Of course the code assumes you have a setter called “setAchievementAttributes” (I based it off the getter).<br>
All you’re doing is setting the player’s achievements to that of the AchievementData enum. <span class="bbcode-b">After</span> that it loads the data from the file.[/quote]</p>
<p>I don’t have the “setAchievementAttributes”.<br>
This is what is in my player.java</p>
<p><code>private final AchievementAttributes achievementAttributes = new AchievementAttributes();
	public AchievementAttributes getAchievementAttributes() {
		return achievementAttributes;
	}</code><br>
Also</p>
<p>[quote=“imback4more, post:3, topic:555306”]I took off the other saving and loadings that way you can see how the file looks like.<br>
I hope you can be able to help me with this, so far you’ve helped me through everything else from other times.[/quote]</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/achievement-system-error/555306/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/achievement-system-error/555306/5</link>
        <pubDate>Sun, 08 May 2016 21:01:14 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-555306-5</guid>
        <source url="https://forum.moparisthebest.com/t/achievement-system-error/555306.rss">Achievement system error</source>
      </item>
      <item>
        <title>Achievement system error</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <p>Why is your server loading a file just for achievements?</p>
<p>Perhaps if you place this:</p>
<pre><code class="lang-auto"></code></pre>
<p>Above the loading for the achievements, it’d work.<br>
Of course the code assumes you have a setter called “setAchievementAttributes” (I based it off the getter).<br>
All you’re doing is setting the player’s achievements to that of the AchievementData enum. <span class="bbcode-b">After</span> that it loads the data from the file.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/achievement-system-error/555306/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/achievement-system-error/555306/4</link>
        <pubDate>Sat, 07 May 2016 17:16:38 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-555306-4</guid>
        <source url="https://forum.moparisthebest.com/t/achievement-system-error/555306.rss">Achievement system error</source>
      </item>
      <item>
        <title>Achievement system error</title>
        <dc:creator><![CDATA[@imback4more imback4more]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/imback4more">@imback4more</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="2" data-topic="555306">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/sk8rdude461/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> sk8rdude461:</div>
<blockquote>
<p>What’s the saving/loading look like?</p>
</blockquote>
</aside>
<p>I took off the other saving and loadings that way you can see how the file looks like.<br>
I hope you can be able to help me with this, so far you’ve helped me through everything else from other times.<br>
playersaving</p>
<p>[code]public class PlayerSaving {</p>
<pre><code>public static void save(Player player) {
	if(player.newPlayer())
		return;
	// Create the path and file objects.
	Path path = Paths.get("./data/saves/characters/", player.getUsername() + ".txt");
	File file = path.toFile();
	file.getParentFile().setWritable(true);

	// Attempt to make the player save directory if it doesn't
	// exist.
	if (!file.getParentFile().exists()) {
		try {
			file.getParentFile().mkdirs();
		} catch (SecurityException e) {
			System.out.println("Unable to create directory for player data!");
		}
	}
	try (FileWriter writer = new FileWriter(file)) {

		Gson builder = new GsonBuilder().setPrettyPrinting().create();
		JsonObject object = new JsonObject();
		object.add("achievements-completion", builder.toJsonTree(player.getAchievementAttributes().getCompletion()));
		writer.write(builder.toJson(object));
		writer.close();
	} catch (Exception e) {
		// An error happened while saving.
		GameServer.getLogger().log(Level.WARNING,
				"An error has occured while saving a character file!", e);
	}
}[/code]
</code></pre>
<p>playerloading</p>
<p>[code]public class PlayerLoading {</p>
<pre><code>public static int getResult(Player player) {

	// Create the path and file objects.
	Path path = Paths.get("./data/saves/characters/", player.getUsername() + ".txt");
	File file = path.toFile();

	// If the file doesn't exist, we're logging in for the first
	// time and can skip all of this.
	if (!file.exists()) {
		return LoginResponses.NEW_ACCOUNT;
	}

	// Now read the properties from the json parser.
	try (FileReader fileReader = new FileReader(file)) {
		JsonParser fileParser = new JsonParser();
		Gson builder = new GsonBuilder().create();
		JsonObject reader = (JsonObject) fileParser.parse(fileReader);
		if (reader.has("achievements-completion")) {
			player.getAchievementAttributes().setCompletion(builder.fromJson(reader.get("achievements-completion").getAsJsonArray(), boolean[].class));
		}

	} catch (Exception e) {
		e.printStackTrace();
		return LoginResponses.LOGIN_SUCCESSFUL;
	}
	return LoginResponses.LOGIN_SUCCESSFUL;
}[/code]</code></pre>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/achievement-system-error/555306/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/achievement-system-error/555306/3</link>
        <pubDate>Sat, 07 May 2016 10:30:51 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-555306-3</guid>
        <source url="https://forum.moparisthebest.com/t/achievement-system-error/555306.rss">Achievement system error</source>
      </item>
      <item>
        <title>Achievement system error</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <p>What’s the saving/loading look like?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/achievement-system-error/555306/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/achievement-system-error/555306/2</link>
        <pubDate>Fri, 06 May 2016 23:11:36 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-555306-2</guid>
        <source url="https://forum.moparisthebest.com/t/achievement-system-error/555306.rss">Achievement system error</source>
      </item>
      <item>
        <title>Achievement system error</title>
        <dc:creator><![CDATA[@imback4more imback4more]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/imback4more">@imback4more</a> wrote:</p>
          <blockquote>
              <p>Apparently this won’t update in the character files</p>
<p><code>
"achievements-completion": [
    false,
    false,
    false,
    false,
    false //this is actually 101. i just deleted most to test something
  ],</code><br>
EDIT: I have a video<br>
<a href="https://youtu.be/Z28gV0MTbAc" data-bbcode="true" rel="nofollow noopener">https://youtu.be/Z28gV0MTbAc</a><br>
​I can’t find why I can’t add more achievements. I know about the 101 array. But can’t find how to make the array longer.<br>
When I try to add a 102th achievement, I get this error.</p>
<p><code>
java.lang.ArrayIndexOutOfBoundsException: 101
        at com.world.content.Achievements.updateInterface(Achievements.java:173)
        at com.world.entity.impl.player.PlayerHandler.handleLogin(PlayerHandler.
java:117)
        at com.world.World.sequence(World.java:115)
        at com.engine.GameEngine.run(GameEngine.java:39)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:51
1)
        at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308)
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.
access$301(ScheduledThreadPoolExecutor.java:180)
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.
run(ScheduledThreadPoolExecutor.java:294)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.
java:1142)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor
.java:617)
        at java.lang.Thread.run(Thread.java:745)</code><br>
Here’s my achievement system. Ok, I just updated this. Read down to the quote in this post.</p>
<p>[code]<br>
public class Achievements {<br>
public enum AchievementData {<br>
ENTER_THE_LOTTERY(Difficulty.EASY, “Enter The Lottery”, 37005, null),<br>
FILL_WELL_OF_GOODWILL_1M(Difficulty.EASY, “Pour 1M Into The Well”, 37006, null),<br>
CUT_AN_OAK_TREE(Difficulty.EASY, “Cut An Oak Tree”, 37007, null),<br>
BURN_AN_OAK_LOG(Difficulty.EASY, “Burn An Oak Log”, 37008, null),<br>
FISH_A_SALMON(Difficulty.EASY, “Fish A Salmon”, 37009, null),<br>
COOK_A_SALMON(Difficulty.EASY, “Cook A Salmon”, 37010, null),<br>
EAT_A_SALMON(Difficulty.EASY, “Eat A Salmon”, 37011, null),<br>
MINE_SOME_IRON(Difficulty.EASY, “Mine Some Iron”, 37012, null),<br>
SMELT_AN_IRON_BAR(Difficulty.EASY, “Smelt An Iron Bar”, 37013, null),<br>
HARVEST_A_CROP(Difficulty.EASY, “Harvest A Crop”, 37014, null),<br>
INFUSE_A_DREADFOWL_POUCH(Difficulty.EASY, “Infuse A Dreadfowl Pouch”, 37015, null),<br>
CATCH_A_YOUNG_IMPLING(Difficulty.EASY, “Catch A Young Impling”, 37016, null),<br>
CRAFT_A_PAIR_OF_LEATHER_BOOTS(Difficulty.EASY, “Craft A Pair of Leather Boots”, 37017, null),<br>
CLIMB_AN_AGILITY_OBSTACLE(Difficulty.EASY, “Climb An Agility Obstacle”, 37018, null),<br>
FLETCH_SOME_ARROWS(Difficulty.EASY, “Fletch Some Arrows”, 37019, null),<br>
STEAL_A_RING(Difficulty.EASY, “Steal A Ring”, 37020, null),<br>
MIX_A_POTION(Difficulty.EASY, “Mix A Potion”, 37021, null),<br>
RUNECRAFT_SOME_RUNES(Difficulty.EASY, “Runecraft Some Runes”, 37022, null),<br>
BURY_A_BIG_BONE(Difficulty.EASY, “Bury A Big Bone”, 37023, null),<br>
COMPLETE_A_SLAYER_TASK(Difficulty.EASY, “Complete A Slayer Task”, 37024, null),<br>
SET_UP_A_CANNON(Difficulty.EASY, “Set Up A Cannon”, 37025, null),<br>
KILL_A_MONSTER_USING_MELEE(Difficulty.EASY, “Kill a Monster Using Melee”, 37026, null),<br>
KILL_A_MONSTER_USING_RANGED(Difficulty.EASY, “Kill a Monster Using Ranged”, 37027, null),<br>
KILL_A_MONSTER_USING_MAGIC(Difficulty.EASY, “Kill a Monster Using Magic”, 37028, null),<br>
DEAL_EASY_DAMAGE_USING_MELEE(Difficulty.EASY, “Deal 1000 Melee Damage”, 37029, new int[]{0, 1000}),<br>
DEAL_EASY_DAMAGE_USING_RANGED(Difficulty.EASY, “Deal 1000 Ranged Damage”, 37030, new int[]{1, 1000}),<br>
DEAL_EASY_DAMAGE_USING_MAGIC(Difficulty.EASY, “Deal 1000 Magic Damage”, 37031, new int[]{2, 1000}),<br>
PERFORM_A_SPECIAL_ATTACK(Difficulty.EASY, “Perform a Special Attack”, 37032, null),<br>
FIGHT_ANOTHER_PLAYER(Difficulty.EASY, “Fight Another Player”, 37033, null),<br>
SET_AN_EMAIL_ADDRESS(Difficulty.EASY, “Set An Email Address”, 37034, null),<br>
ENTER_THE_LOTTERY_THREE_TIMES(Difficulty.MEDIUM, “Enter The Lottery Three Times”, 37037, new int[]{3, 3}),<br>
FILL_WELL_OF_GOODWILL_50M(Difficulty.MEDIUM, “Pour 50M Into The Well”, 37038, new int[]{4, 50000000}),<br>
CUT_100_MAGIC_LOGS(Difficulty.MEDIUM, “Cut 100 Magic Logs”, 37039, new int[]{5, 100}),<br>
BURN_100_MAGIC_LOGS(Difficulty.MEDIUM, “Burn 100 Magic Logs”, 37040, new int[]{6, 100}),<br>
FISH_25_ROCKTAILS(Difficulty.MEDIUM, “Fish 25 Rocktails”, 37041, new int[]{7, 25}),<br>
COOK_25_ROCKTAILS(Difficulty.MEDIUM, “Cook 25 Rocktails”, 37042, new int[]{8, 25}),<br>
MINE_25_RUNITE_ORES(Difficulty.MEDIUM, “Mine 25 Runite Ores”, 37043, new int[]{9, 25}),<br>
SMELT_25_RUNE_BARS(Difficulty.MEDIUM, “Smelt 25 Rune Bars”, 37044, new int[]{10, 25}),<br>
HARVEST_10_TORSTOLS(Difficulty.MEDIUM, “Harvest 10 Torstols”, 37045, new int[]{11, 10}),<br>
INFUSE_25_TITAN_POUCHES(Difficulty.MEDIUM, “Infuse 25 Steel Titans”, 37046, new int[]{12, 25}),<br>
CATCH_5_KINGLY_IMPLINGS(Difficulty.MEDIUM, “Catch 5 Kingly Implings”, 37047, new int[]{13, 5}),<br>
COMPLETE_A_HARD_SLAYER_TASK(Difficulty.MEDIUM, “Complete A Hard Slayer Task”, 37048, null),<br>
CRAFT_20_BLACK_DHIDE_BODIES(Difficulty.MEDIUM, “Craft 20 Black D’hide Bodies”, 37049, new int[]{14, 20}),<br>
FLETCH_450_RUNE_ARROWS(Difficulty.MEDIUM, “Fletch 450 Rune Arrows”, 37050, new int[]{15, 450}),<br>
STEAL_140_SCIMITARS(Difficulty.MEDIUM, “Steal 140 Scimitars”, 37051, new int[]{16, 140}),<br>
MIX_AN_OVERLOAD_POTION(Difficulty.MEDIUM, “Mix An Overload Potion”, 37052, null),<br>
ASSEMBLE_A_GODSWORD(Difficulty.MEDIUM, “Assemble A Godsword”, 37053, null),<br>
CLIMB_50_AGILITY_OBSTACLES(Difficulty.MEDIUM, “Climb 50 Agility Obstacles”, 37054, new int[]{17, 50}),<br>
RUNECRAFT_500_BLOOD_RUNES(Difficulty.MEDIUM, “Runecraft 500 Blood Runes”, 37055, new int[]{18, 500}),<br>
BURY_25_FROST_DRAGON_BONES(Difficulty.MEDIUM, “Bury 25 Frost Dragon Bones”, 37056, new int[]****, 25}),<br>
FIRE_500_CANNON_BALLS(Difficulty.MEDIUM, “Fire 500 Cannon Balls”, 37057, new int[]{20, 500}),<br>
DEAL_MEDIUM_DAMAGE_USING_MELEE(Difficulty.MEDIUM, “Deal 100K Melee Damage”, 37058, new int[]{21, 100000}),<br>
DEAL_MEDIUM_DAMAGE_USING_RANGED(Difficulty.MEDIUM, “Deal 100K Ranged Damage”, 37059, new int[]{22, 100000}),<br>
DEAL_MEDIUM_DAMAGE_USING_MAGIC(Difficulty.MEDIUM, “Deal 100K Magic Damage”, 37060, new int[]{23, 100000}),<br>
DEFEAT_THE_KING_BLACK_DRAGON(Difficulty.MEDIUM, “Defeat The King Black Dragon”, 37061, null),<br>
DEFEAT_THE_CHAOS_ELEMENTAL(Difficulty.MEDIUM, “Defeat The Chaos Elemental”, 37062, null),<br>
DEFEAT_A_TORMENTED_DEMON(Difficulty.MEDIUM, “Defeat A Tormented Demon”, 37063, null),<br>
DEFEAT_THE_CULINAROMANCER(Difficulty.MEDIUM, “Defeat The Culinaromancer”, 37064, null),<br>
DEFEAT_NOMAD(Difficulty.MEDIUM, “Defeat Nomad”, 37065, null),<br>
DEFEAT_10_PLAYERS(Difficulty.MEDIUM, “Defeat 10 Players”, 37066, new int[]{24, 10}),<br>
REACH_A_KILLSTREAK_OF_3(Difficulty.MEDIUM, “Reach A Killstreak Of 3”, 37067, null),<br>
FILL_WELL_OF_GOODWILL_250M(Difficulty.HARD, “Pour 250M Into The Well”, 37070, new int[]{25, 250000000}),<br>
CUT_5000_MAGIC_LOGS(Difficulty.HARD, “Cut 5000 Magic Logs”, 37071, new int[]{26, 5000}),<br>
BURN_2500_MAGIC_LOGS(Difficulty.HARD, “Burn 2500 Magic Logs”, 37072, new int[]{27, 2500}),<br>
FISH_2000_ROCKTAILS(Difficulty.HARD, “Fish 2000 Rocktails”, 37073, new int[]{28, 2000}),<br>
COOK_1000_ROCKTAILS(Difficulty.HARD, “Cook 1000 Rocktails”, 37074, new int[]{29, 1000}),<br>
MINE_2000_RUNITE_ORES(Difficulty.HARD, “Mine 2000 Runite Ores”, 37075, new int[]{30, 2000}),<br>
SMELT_1000_RUNE_BARS(Difficulty.HARD, “Smelt 1000 Rune Bars”, 37076, new int[]{31, 1000}),<br>
HARVEST_1000_TORSTOLS(Difficulty.HARD, “Harvest 1000 Torstols”, 37077, new int[]{32, 1000}),<br>
INFUSE_500_STEEL_TITAN_POUCHES(Difficulty.HARD, “Infuse 500 Steel Titans”, 37078, new int[]{33, 500}),<br>
CRAFT_1000_SPONSOR_GEMS(Difficulty.HARD, “Craft 1000 Diamond Gems”, 37079, new int[]{34, 1000}),<br>
CATCH_100_KINGLY_IMPLINGS(Difficulty.HARD, “Catch 100 Kingly Imps”, 37080, new int[]{35, 100}),<br>
FLETCH_5000_RUNE_ARROWS(Difficulty.HARD, “Fletch 5000 Rune Arrows”, 37081, new int[]{36, 5000}),<br>
STEAL_5000_SCIMITARS(Difficulty.HARD, “Steal 5000 Scimitars”, 37082, new int[]{37, 5000}),<br>
RUNECRAFT_8000_BLOOD_RUNES(Difficulty.HARD, “Runecraft 8000 Blood Runes”, 37083, new int[]{38, 8000}),<br>
BURY_500_FROST_DRAGON_BONES(Difficulty.HARD, “Bury 500 Frost Dragon Bones”, 37084, new int[]{39, 500}),<br>
FIRE_5000_CANNON_BALLS(Difficulty.HARD, “Fire 5000 Cannon Balls”, 37085, new int[]{40, 5000}),<br>
MIX_100_OVERLOAD_POTIONS(Difficulty.HARD, “Mix 100 Overload Potions”, 37086, new int[]{41, 100}),<br>
COMPLETE_AN_ELITE_SLAYER_TASK(Difficulty.HARD, “Complete An Elite Slayer Task”, 37087, null),<br>
ASSEMBLE_5_GODSWORDS(Difficulty.HARD, “Assemble 5 Godswords”, 37088, new int[]{42, 5}),<br>
DEAL_HARD_DAMAGE_USING_MELEE(Difficulty.HARD, “Deal 10M Melee Damage”, 37089, new int[]{43, 10000000}),<br>
DEAL_HARD_DAMAGE_USING_RANGED(Difficulty.HARD, “Deal 10M Ranged Damage”, 37090, new int[]{44, 10000000}),<br>
DEAL_HARD_DAMAGE_USING_MAGIC(Difficulty.HARD, “Deal 10M Magic Damage”, 37091, new int[]{45, 10000000}),<br>
DEFEAT_JAD(Difficulty.HARD, “Defeat Jad”, 37092, null),<br>
DEFEAT_BANDOS_AVATAR(Difficulty.HARD, “Defeat Bandos Avatar”, 37093, null),<br>
DEFEAT_GENERAL_GRAARDOR(Difficulty.HARD, “Defeat General Graardor”, 37094, null),<br>
DEFEAT_KREE_ARRA(Difficulty.HARD, “Defeat Kree’Arra”, 37095, null),<br>
DEFEAT_COMMANDER_ZILYANA(Difficulty.HARD, “Defeat Commander Zilyana”, 37096, null),<br>
DEFEAT_KRIL_TSUTSAROTH(Difficulty.HARD, “Defeat K’ril Tsutsaroth”, 37097, null),<br>
DEFEAT_THE_CORPOREAL_BEAST(Difficulty.HARD, “Defeat The Corporeal Beast”, 37098, null),<br>
DEFEAT_NEX(Difficulty.HARD, “Defeat Nex”, 37099, null),<br>
DEFEAT_30_PLAYERS(Difficulty.HARD, “Defeat 30 Players”, 37100, new int[]{46, 30}),<br>
REACH_A_KILLSTREAK_OF_6(Difficulty.HARD, “Reach A Killstreak Of 6”, 37101, null),<br>
COMPLETE_ALL_HARD_TASKS(Difficulty.ELITE, “Complete All Hard Tasks”, 37104, new int[]{47, 32}),<br>
CUT_AN_ONYX_STONE(Difficulty.ELITE, “Cut An Onyx Stone”, 37105, null),<br>
REACH_MAX_EXP_IN_A_SKILL(Difficulty.ELITE, “Reach Max Exp In A Skill”, 37106, null),<br>
REACH_LEVEL_99_IN_ALL_SKILLS(Difficulty.ELITE, “Reach Level 99 In All Skills”, 37107, new int[]{48, 22}),<br>
DEFEAT_10000_MONSTERS(Difficulty.ELITE, “Defeat 10,000 Monsters”, 37108, new int[]{49, 10000}),<br>
DEFEAT_500_BOSSES(Difficulty.ELITE, “Defeat 500 Boss Monsters”, 37109, new int[]{50, 500}),<br>
VOTE_100_TIMES(Difficulty.ELITE, “Vote 100 Times”, 37110, new int[]{51, 100}),<br>
UNLOCK_ALL_LOYALTY_TITLES(Difficulty.ELITE, “Unlock All Loyalty Titles”, 37111, new int[]{52, 11}),<br>
UNLOCK_ALL_LOYALTY_TITLESS(Difficulty.ELITE, “Unlock All Loyalty Titless”, 37112, new int[]{53, 11}),<br>
REACH_A_KILLSTREAK_OF_12(Difficulty.HARD, “Reach A Killstreak Of 12”, 37113, null),<br>
CUT_10000_MAGIC_LOGS(Difficulty.ELITE, “Cut 10000 Magic Logs”, 37114, new int[]{54, 5000})<br>
;<br>
AchievementData(Difficulty difficulty, String interfaceLine, int interfaceFrame, int[] progressData) {<br>
this.difficulty = difficulty;<br>
this.interfaceLine = interfaceLine;<br>
this.interfaceFrame = interfaceFrame;<br>
this.progressData = progressData;<br>
}<br>
private Difficulty difficulty;<br>
private String interfaceLine;<br>
private int interfaceFrame;<br>
private int[] progressData;<br>
public Difficulty getDifficulty() {<br>
return difficulty;<br>
}<br>
}<br>
public enum Difficulty {<br>
BEGINNER, EASY, MEDIUM, HARD, ELITE;<br>
}<br>
public static boolean handleButton(Player player, int button) {<br>
if(!(button &gt;= -28531 &amp;&amp; button &lt;= -28400)) {<br>
return false;<br>
}<br>
int index = -1;<br>
if(button &gt;= -28531 &amp;&amp; button &lt;= -28502) {<br>
index = 28531 + button;<br>
} else if(button &gt;= -28499 &amp;&amp; button &lt;= -28469) {<br>
index = 30 + 28499 + button;<br>
} else if(button &gt;= -28466 &amp;&amp; button &lt;= -28435) {<br>
index = 61 + 28466 + button;<br>
} else if(button &gt;= -28432 &amp;&amp; button &lt;= -28400) {<br>
index = 93 + 28432 + button;<br>
}<br>
if(index &gt;= 0 &amp;&amp; index &lt; AchievementData.values().length) {<br>
AchievementData achievement = AchievementData.values()[index];<br>
if(player.getAchievementAttributes().getCompletion()[achievement.ordinal()]) {<br>
player.getPacketSender().sendMessage("&lt;img=10&gt; &lt;col=004B00&gt;You have completed the achievement: “+achievement.interfaceLine+”.");<br>
} else if(achievement.progressData == null) {<br>
player.getPacketSender().sendMessage("&lt;img=10&gt; &lt;col=660000&gt;You have not started the achievement: “+achievement.interfaceLine+”.");<br>
} else {<br>
int progress = player.getAchievementAttributes().getProgress()[achievement.progressData[0]];<br>
int requiredProgress = achievement.progressData[1];<br>
if(progress == 0) {<br>
player.getPacketSender().sendMessage("&lt;img=10&gt; &lt;col=660000&gt;You have not started the achievement: “+achievement.interfaceLine+”.");<br>
} else if(progress != requiredProgress) {<br>
player.getPacketSender().sendMessage("&lt;img=10&gt; &lt;col=FFFF00&gt;Your progress for this achievement is currently at: “+Misc.insertCommasToNumber(”"+progress)+"/"+Misc.insertCommasToNumber(""+requiredProgress)+".");<br>
}<br>
}<br>
}<br>
return true;<br>
}<br>
public static void updateInterface(Player player) {<br>
for(AchievementData achievement : AchievementData.values()) {<br>
boolean completed = player.getAchievementAttributes().getCompletion()[achievement.ordinal()];<br>
boolean progress = achievement.progressData != null &amp;&amp; player.getAchievementAttributes().getProgress()[achievement.progressData[0]] &gt; 0;<br>
player.getPacketSender().sendString(achievement.interfaceFrame, (completed ? “<span class="mention">@gre</span>@” : progress ? “<span class="mention">@yel</span>@” : “<a class="mention" href="/u/red">@red</a>@”) + achievement.interfaceLine);<br>
}<br>
player.getPacketSender().sendString(37001, “Achievements: “+player.getPointsHandler().getAchievementPoints()+”/”+AchievementData.values().length);<br>
}</p>
<pre><code>public static void setPoints(Player player) {
    int points = 0;
    for(AchievementData achievement : AchievementData.values()) {
        if(player.getAchievementAttributes().getCompletion()[achievement.ordinal()]) {
            points++;
        }
    }
    player.getPointsHandler().setAchievementPoints(points, false);
}
public static void doProgress(Player player, AchievementData achievement) {
    doProgress(player, achievement, 1);
}
public static void doProgress(Player player, AchievementData achievement, int amt) {
    if(player.getAchievementAttributes().getCompletion()[achievement.ordinal()])
        return;
    if(achievement.progressData != null) {
        int progressIndex = achievement.progressData[0];
        int amountNeeded = achievement.progressData[1];
        int previousDone = player.getAchievementAttributes().getProgress()[progressIndex];
        if((previousDone+amt) &lt; amountNeeded) {
            player.getAchievementAttributes().getProgress()[progressIndex] = previousDone+amt;
            if(previousDone == 0) 
                player.getPacketSender().sendString(achievement.interfaceFrame, "@yel@"+ achievement.interfaceLine);
        } else {
            finishAchievement(player, achievement);
        }
    }
}
public static void finishAchievement(Player player, AchievementData achievement) {
    if(player.getAchievementAttributes().getCompletion()[achievement.ordinal()])
        return;
    player.getAchievementAttributes().getCompletion()[achievement.ordinal()] = true;
    player.getPacketSender().sendString(achievement.interfaceFrame, ("&lt;col=004B00&gt;") + achievement.interfaceLine).sendMessage("&lt;img=10&gt;You have completed the achievement "+Misc.formatText(achievement.toString().toLowerCase()+".")).sendString(37001, "Achievements: "+player.getPointsHandler().getAchievementPoints()+"/"+AchievementData.values().length);
    if(achievement.getDifficulty() == Difficulty.HARD) {
        doProgress(player, AchievementData.COMPLETE_ALL_HARD_TASKS);
    }
    
    player.getPointsHandler().setAchievementPoints(1, true);
}
public static class AchievementAttributes {
    public AchievementAttributes(){}
    /** ACHIEVEMENTS **/
    private boolean[] completed = new boolean[AchievementData.values().length];
    private int[] progress = new int[55];
    public boolean[] getCompletion() {
        return completed;
    }
    public void setCompletion(int index, boolean value) {
        this.completed[index] = value;
    }
    public void setCompletion(boolean[] completed) {
        this.completed = completed;
    }
    public int[] getProgress() {
        return progress;
    }
    public void setProgress(int index, int value) {
        this.progress[index] = value;
    }
    public void setProgress(int[] progress) {
        this.progress = progress;
    }
    /** MISC **/
    private int coinsGambled;
    private double totalLoyaltyPointsEarned;
    private boolean[] godsKilled = new boolean[5];
    public int getCoinsGambled() {
        return coinsGambled;
    }
    public void setCoinsGambled(int coinsGambled) {
        this.coinsGambled = coinsGambled;
    }
    public double getTotalLoyaltyPointsEarned() {
        return totalLoyaltyPointsEarned;
    }
    public void incrementTotalLoyaltyPointsEarned(double totalLoyaltyPointsEarned) {
        this.totalLoyaltyPointsEarned += totalLoyaltyPointsEarned;
    }
    public boolean[] getGodsKilled() {
        return godsKilled;
    }
    public void setGodKilled(int index, boolean godKilled) {
        this.godsKilled[index] = godKilled;
    }
    public void setGodsKilled(boolean[] b) {
        this.godsKilled = b;
    }
}
</code></pre>
<p>}[/code]</p>
<p>Some reason, when I make a new acorunt. I don’t get that error in the cmd anymore. So what’s up?</p>
<blockquote>It's because on old accounts you have an array of 101 achievements.
On new accounts, it makes an array of 102 achievements.</blockquote>
<p>How can I make the array update for the old accounts? I was able to get it working for newer accounts. It seems that accounts made before the updated achievements get the “array error”. Any ideas/fixes to get this sorted out?<br>
I have this in playersave and playerload</p>
<pre><code class="lang-auto">object.add("achievements-completion", builder.toJsonTree(player.getAchievementAttributes().getCompletion()));
            object.add("achievements-progress", builder.toJsonTree(player.getAchievementAttributes().getProgress()));</code></pre>
<p>[code]<br>
if (reader.has(“achievements-completion”)) {<br>
player.getAchievementAttributes().setCompletion(builder.fromJson(reader.get(“achievements-completion”).getAsJsonArray(), boolean[].class));<br>
}</p>
<pre><code>        if (reader.has("achievements-progress")) {
            player.getAchievementAttributes().setProgress(builder.fromJson(reader.get("achievements-progress").getAsJsonArray(), int[].class));
        }
</code></pre>
<p>private final AchievementAttributes achievementAttributes = new AchievementAttributes();<br>
public AchievementAttributes getAchievementAttributes() {<br>
return achievementAttributes;<br>
}[/code]<br>
This is what all I get when I search for achievements. I basically have all the necessary ones posted here already.<br>
<div class="lightbox-wrapper"><a class="lightbox" href="http://i66.tinypic.com/1dmhg.jpg" title="1dmhg.jpg" rel="nofollow noopener"><img src="http://i66.tinypic.com/1dmhg.jpg" alt width="690" height="331"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use xlink:href="#far-image"></use></svg><span class="filename">1dmhg.jpg</span><span class="informations">1159×557</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div></p>
<p>[QUOTE=arch337;5138481]Not sure if work but try it:</p>
<pre><code class="lang-auto">if (reader.has("achievements-completion")) {
                player.getAchievementAttributes().setCompletion(builder.fromJson(reader.get("achievements-completion").getAsJsonArray(), boolean[].class));
System.out.println("Added "+player.getAchievementAttributes().getCompletion().length+" rows");
            } else {
object.add("achievements-completion", builder.toJsonTree(player.getAchievementAttributes().getCompletion()));
}
            
            if (reader.has("achievements-progress")) {
                player.getAchievementAttributes().setProgress(builder.fromJson(reader.get("achievements-progress").getAsJsonArray(), int[].class));
            } else {
object.add("achievements-progress", builder.toJsonTree(player.getAchievementAttributes().getProgress()));
}</code></pre>
<p>Your issue is basically it’s adding them once. Then when you add more it do not know that it cant add them nomore. So the above is not guarantee fix but try it and see if it does add.[/QUOTE]</p>
<p>I just needed to add this with what you gave me to not have errors.</p>
<pre><code class="lang-auto">JsonObject object = new JsonObject();</code></pre>
<p>Still, I get the same outofbound error. Also Playersave and playerload are to different files. playerload is loading all the information for the character. playersave is the obvious savings for the character.<br>
Here’s my error.</p>
<p><code>java.lang.ArrayIndexOutOfBoundsException: 5
	at com.world.content.Achievements.updateInterface(Achievements.java:68) [COLOR="#FFFFFF"]//line 68[/COLOR]
	at com.world.entity.impl.player.PlayerHandler.handleLogin(PlayerHandler.java:117) [COLOR="#FFFFFF"]//line 117[/COLOR]
	at com.world.World.sequence(World.java:115) [COLOR="#FFFFFF"]//line 115[/COLOR]
	at com.engine.GameEngine.run(GameEngine.java:39) [COLOR="#FFFFFF"]//line 39[/COLOR]
	at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
	at java.util.concurrent.FutureTask.runAndReset(Unknown Source)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(Unknown Source)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(Unknown Source)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
	at java.lang.Thread.run(Unknown Source)</code><br>
achievements</p>
<pre><code class="lang-auto">public static void updateInterface(Player player) {
boolean completed = player.getAchievementAttributes().getCompletion()[achievement.ordinal()]; [COLOR="#FFFFFF"]//line 68[/COLOR]</code></pre>
<p>playerhandler</p>
<p><code>
public static void handleLogin(Player player) {
		Achievements.updateInterface(player); [COLOR="#FFFFFF"]//line 117[/COLOR]</code><br>
world</p>
<p><code>
public static void sequence() {
PlayerHandler.handleLogin(player); [COLOR="#FFFFFF"]//line 115[/COLOR]</code><br>
gameengine</p>
<p><code>
@Override
	public void run() {
		try {
			switch(engineState) {
			case PACKET_PROCESSING:
				World.getPlayers().forEach($it -&gt; $it.getSession().handlePrioritizedMessageQueue());
				break;
			case GAME_PROCESSING:
				TaskManager.sequence();
				World.sequence(); [COLOR="#FFFFFF"]//line 39[/COLOR]
				break;
			}
			engineState = next();
		} catch (Throwable e) {
			e.printStackTrace();
			World.savePlayers();
			GrandExchangeOffers.save();
			ClanChatManager.save();
		}
	}</code></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/achievement-system-error/555306/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/achievement-system-error/555306/1</link>
        <pubDate>Sun, 01 May 2016 00:42:32 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-555306-1</guid>
        <source url="https://forum.moparisthebest.com/t/achievement-system-error/555306.rss">Achievement system error</source>
      </item>
  </channel>
</rss>
