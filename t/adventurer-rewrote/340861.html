<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/adventurer-rewrote/340861 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Aug 2019 21:11:18 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Adventurer Rewrote - Runescape - moparisthebest.com</title>
    <meta name="description" content="Someone was asking me about introducing more than 1 string of options within the NpcHandlers, so I decided to re-write the adventurer NPC in a way which used more string options. Hopefully you can learn something from th&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="340861.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Adventurer Rewrote&#39;" href="340861.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://i49.tinypic.com/2rcacrd.png" />
<meta property="og:image" content="http://i49.tinypic.com/2rcacrd.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/adventurer-rewrote/340861" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/adventurer-rewrote/340861" />
<meta property="og:title" content="Adventurer Rewrote" />
<meta name="twitter:title" content="Adventurer Rewrote" />
<meta property="og:description" content="Someone was asking me about introducing more than 1 string of options within the NpcHandlers, so I decided to re-write the adventurer NPC in a way which used more string options. Hopefully you can learn something from this ðŸ˜‰  Please feel free to edit it in any way you like, and if anyone has a better way of doing it, please donâ€™t hesitate to contribute!  Here are some screenshots:        And the code:  package org.rscdaemon.server.npchandler;  import org.rscdaemon.server.model.*; import org..." />
<meta name="twitter:description" content="Someone was asking me about introducing more than 1 string of options within the NpcHandlers, so I decided to re-write the adventurer NPC in a way which used more string options. Hopefully you can learn something from this ðŸ˜‰  Please feel free to edit it in any way you like, and if anyone has a better way of doing it, please donâ€™t hesitate to contribute!  Here are some screenshots:        And the code:  package org.rscdaemon.server.npchandler;  import org.rscdaemon.server.model.*; import org..." />
<meta property="article:published_time" content="2010-05-21T11:56:13+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="340861.html">Adventurer Rewrote</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/yong_min.html'><span itemprop='name'>yong_min</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-05-21T11:56:13Z'>
            <time itemprop='dateModified' datetime='2016-07-31T16:36:20Z' class='post-time'>
              July 31, 2016,  4:36pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Someone was asking me about introducing more than 1 string of options within the NpcHandlers, so I decided to re-write the adventurer NPC in a way which used more string options. Hopefully you can learn something from this <img src="../../images/emoji/twitter/winkae52.png?v=5" title=":wink:" class="emoji" alt=":wink:"></p>
<p>Please feel free to edit it in any way you like, and if anyone has a better way of doing it, please donâ€™t hesitate to contribute!</p>
<p>Here are some screenshots:</p>
<p><img src="http://i49.tinypic.com/2rcacrd.png" alt width="512" height="345"></p>
<p><img src="http://i47.tinypic.com/118eiy0.png" alt width="512" height="345"></p>
<p><img src="http://i45.tinypic.com/de8w07.png" alt width="512" height="345"></p>
<p>And the code:</p>
<pre><code class="lang-auto">package org.rscdaemon.server.npchandler;

import org.rscdaemon.server.model.*;
import org.rscdaemon.server.event.ShortEvent;

public class Adventurer implements NpcHandler {
	/**
	 * World Instance
	 */
	public static final World world = World.getWorld();
	
	public void handleNpc(final Npc npc, final Player player) throws Exception {
		player.informOfNpcMessage(new ChatMessage(npc, "Would you like to go to a wild or town location?", player));
		world.getDelayedEventHandler().add(new ShortEvent(player) {
			public void action() {
				player.setBusy(false);
				String[] option = new String[] { "Town", "Wilderness" };
				final String[] towns = new String[] { "Edgeville", "Varrock", "Falador", "Seers", "Catherby", "Yanille", "Karamja", "Draynor", "Lumbridge" };
				final String[] wild = new String[] { "Castle", "Dragon Maze", "Mage Arena" };
				player.getActionSender().sendMenu(option);
				player.setMenuHandler(new MenuHandler(option) {
					public void handleReply(final int option, final String reply) {
						if(player.isBusy()) {
							return;
						}
						player.informOfChatMessage(new ChatMessage(player, reply, npc));
						player.setBusy(true);
						world.getDelayedEventHandler().add(new ShortEvent(player) {
							public void action() {
								player.setBusy(false);
									if(option == 0) { // Town
										player.informOfNpcMessage(new ChatMessage(npc, "Now select the town you want to go to", player));
										world.getDelayedEventHandler().add(new ShortEvent(player) {
											public void action() {
												player.getActionSender().sendMenu(towns);
												player.setMenuHandler(new MenuHandler(towns) {
													public void handleReply(final int towns, final String reply) {
														player.informOfChatMessage(new ChatMessage(player, reply, npc));
														world.getDelayedEventHandler().add(new ShortEvent(player) {
															public void action() {
																if(towns == 0) { // Edgeville
																	player.teleport(225, 447, false);
																	player.getActionSender().sendMessage("You arrive in Edgeville");
																} else if(towns == 1) { // Varrock
																	player.teleport(122, 503, false);
																	player.getActionSender().sendMessage("You arrive in Varrock");
																} else if(towns == 2) { // Falador
																	player.teleport(313, 550, false);
																	player.getActionSender().sendMessage("You arrive in Falador");
																} else if(towns == 3) { // Seers
																	player.teleport(501, 455, false);
																	player.getActionSender().sendMessage("You arrive in Seers");
																} else if(towns == 4) { // Catherby
																	player.teleport(440, 500, false);
																	player.getActionSender().sendMessage("You arrive in Catherby");
																} else if(towns == 5) { // Yanille
																	player.teleport(587, 761, false);
																	player.getActionSender().sendMessage("You arrive in Yanille");
																} else if(towns == 6) { // Karamja
																	player.teleport(371, 695, false);
																	player.getActionSender().sendMessage("You arrive in Karamja");
																} else if(towns == 7) { // Ardougne
																	player.teleport(585, 621, false);
																	player.getActionSender().sendMessage("You arrive in Ardougne");
																} else if(towns == 8) { // Draynor
																	player.teleport(214, 632, false);
																	player.getActionSender().sendMessage("You arrive in Draynor");
																} else if(towns == 9) { // Lumbridge
																	player.teleport(122, 647, false);
																	player.getActionSender().sendMessage("You arrive in Lumbridge");
																}
															}
														});
													}
												});
											}
										});
									} else if(option == 1) { // Wilderness
										player.informOfNpcMessage(new ChatMessage(npc, "Now select the wilderness location you want to go to", player));
										world.getDelayedEventHandler().add(new ShortEvent(player) {
											public void action() {
												player.getActionSender().sendMenu(wild);
													player.setMenuHandler(new MenuHandler(wild) {
														public void handleReply(final int wild, final String reply) {
															player.informOfChatMessage(new ChatMessage(player, reply, npc));
															world.getDelayedEventHandler().add(new ShortEvent(player) {
																public void action() {
																	if(wild == 0) { // Castle
																		player.teleport(271, 353, false);
																		player.getActionSender().sendMessage("You arrive at the Castle");
																	} else if(wild == 1) { // Dragon Maze
																		player.teleport(268, 197, false);
																		player.getActionSender().sendMessage("You arrive at the Dragon Maze");
																	} else if(wild == 2) { // Mage Arena
																		player.teleport(447, 3371, false);
																		player.getActionSender().sendMessage("You arrive at the Mage Arena");
																		player.setBusy(false);
																		npc.unblock();
																		}
																	}
																});
															}
														});
													}
												});
											}
										}
									});
								}
							});
						}
					});
					npc.blockedBy(player);
				}
			}</code></pre>
      </div>

      <meta itemprop='headline' content='Adventurer Rewrote'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Rawr_monster_cookies.html'><span itemprop='name'>Rawr_monster_cookies</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-05-21T12:09:01Z'>
            <time itemprop='dateModified' datetime='2016-07-31T16:36:21Z' class='post-time'>
              July 31, 2016,  4:36pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>if(town == 0) x 9 -.-</p>
<p><code>	private int[] locationX = new int[] { 220 };
	private int[] locationY = new int[] { 220 };</code></p>
<pre><code class="lang-auto">if(town &lt; 10) {
 player.teleport(locationX[town], locationY[town], false);                                                                                                                                        player.getActionSender().sendMessage("You arrive in "+towns[town]);
} else {
   Logger. suspect(player.getUsername, "Tryed to teleport to a town not in the options."); 
}</code></pre>
      </div>

      <meta itemprop='headline' content='Adventurer Rewrote'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/yong_min.html'><span itemprop='name'>yong_min</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-05-21T12:13:56Z'>
            <time itemprop='dateModified' datetime='2016-07-31T16:36:21Z' class='post-time'>
              July 31, 2016,  4:36pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Never even thought of that lol. <img src="../../images/emoji/twitter/winkae52.png?v=5" title=":wink:" class="emoji" alt=":wink:"></p>
      </div>

      <meta itemprop='headline' content='Adventurer Rewrote'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/CodeForFame.html'><span itemprop='name'>CodeForFame</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-05-21T14:15:36Z'>
            <time itemprop='dateModified' datetime='2016-07-31T16:36:27Z' class='post-time'>
              July 31, 2016,  4:36pm
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Wow, I already went through this with you on your last postâ€¦</p>
<p>Use the town variable to get the index in the arrays, and you donâ€™t need the if statements.</p>
<p>If you want the text, put it in an array, and reference it the same way.</p>
      </div>

      <meta itemprop='headline' content='Adventurer Rewrote'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/xEnt.html'><span itemprop='name'>xEnt</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-05-21T15:19:10Z'>
            <time itemprop='dateModified' datetime='2016-07-31T16:36:29Z' class='post-time'>
              July 31, 2016,  4:36pm
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>use a 2 dimensional string and point array, so people can have as many main options, and sub options as they want and can change the text and where it would teleport them, all from the top, instead of messing with code in the middle.</p>
      </div>

      <meta itemprop='headline' content='Adventurer Rewrote'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/pompio.html'><span itemprop='name'>pompio</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-05-21T15:27:54Z'>
            <time itemprop='dateModified' datetime='2016-07-31T16:36:29Z' class='post-time'>
              July 31, 2016,  4:36pm
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Good job Yong <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
      </div>

      <meta itemprop='headline' content='Adventurer Rewrote'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/yong_min.html'><span itemprop='name'>yong_min</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-05-21T15:29:19Z'>
            <time itemprop='dateModified' datetime='2016-07-31T16:36:29Z' class='post-time'>
              July 31, 2016,  4:36pm
            </time>
        <span itemprop='position'>#7</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote no-group" data-post="6" data-topic="340861">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/pompio/40/5_513041d5f7104045db30895d3b90af16.png" class="avatar"> pompio:</div>
<blockquote>
<p>Good job Yong <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
</blockquote>
</aside>
<p>Well not the best way to do it, as these have saidâ€¦ But it works, and I donâ€™t give a shit lol.</p>
      </div>

      <meta itemprop='headline' content='Adventurer Rewrote'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/mapu.html'><span itemprop='name'>mapu</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-05-22T00:28:56Z'>
            <time itemprop='dateModified' datetime='2016-07-31T16:36:53Z' class='post-time'>
              July 31, 2016,  4:36pm
            </time>
        <span itemprop='position'>#8</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>WTG.</p>
      </div>

      <meta itemprop='headline' content='Adventurer Rewrote'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Zilent.html'><span itemprop='name'>Zilent</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-05-26T08:10:05Z'>
            <time itemprop='dateModified' datetime='2016-07-31T16:42:20Z' class='post-time'>
              July 31, 2016,  4:42pm
            </time>
        <span itemprop='position'>#9</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote no-group" data-post="5" data-topic="340861">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/xent/40/5_513041d5f7104045db30895d3b90af16.png" class="avatar"> xEnt:</div>
<blockquote>
<p>use a 2 dimensional string and point array, so people can have as many main options, and sub options as they want and can change the text and where it would teleport them, all from the top, instead of messing with code in the middle.</p>
</blockquote>
</aside>
<p>I think this was what xEnt was alluding to, though with a 3 dimensional array - should work with rscdv25, havenâ€™t tested.</p>
<p>[code=java]<br>
//Zilentechnix<br>
package org.rscdaemon.server.npchandler;</p>
<p>import org.rscdaemon.server.model.*;<br>
import org.rscdaemon.server.event.ShortEvent;</p>
<p>public class Adventurer implements NpcHandler {</p>
<p>private static World world = World.getWorld();</p>
<pre><code>	/**
	 * Preferably, the `definitions` for the tele points should be stored in an external format (txt, cfg, xml)
	 * If read each time the handler fires, or refreshed on demand, it would allow for updated teleport locations at runtime.
	 */
	
	private final String[][] places = {
		{"Edgeville", "Varrock", "Falador", "Seers", "Catherby", "Yannile", "Karamja", "Draynor", "Lumbridge"},	//Town Strings here
		{"Castle", "Dragon Maze", "Mage Arena"}		//Wilderness Strings here
	};

	private final int[][][] telePoints = new int[][][] {
		{	//Town Tele Points Here
			{225, 447},
			{122, 503},
			{313, 550},
			{501, 455},
			{440, 500},
			{587, 761},
			{371, 695},
			{585, 621},
			{214, 632},
			{112, 647}
		},
		{		//Wilderness Tele Points Here
			{271, 353},
			{268, 197},
			{447, 3371}
		}
	};

public void handleNpc(final Npc npc, final Player player) throws Exception {
	player.informOfNpcMessage(new ChatMessage(npc, "Would you like to go to a wild or town location?", player));
	world.getDelayedEventHandler().add(new ShortEvent(player) {
		public void action() {
			player.setBusy(false);
			String[] option = new String[] { "Town", "Wilderness" };
			player.getActionSender().sendMenu(option);
			player.setMenuHandler(new MenuHandler(option) {
				public void handleReply(final int option, final String reply) {
					player.informOfNpcMessage(new ChatMessage(npc, "Now select the " + (option == 0 ? "town" : "wilderness location") + " you want to go to", player));
					world.getDelayedEventHandler().add(new ShortEvent(player) {
						public void action() {
							player.getActionSender().sendMenu(places[option]);
							player.setMenuHandler(new MenuHandler(places[option]) {
								public void handleReply(final int locationIndex, final String reply) {
									if(locationIndex &gt; 0 &amp;&amp; locationIndex &lt; places[option].length) {
										owner.teleport(telePoints[option][locationIndex][0], telePoints[option][locationIndex][1]);
										owner.sendMessage("You arrive in " + places[option][locationIndex]);
									} else {
										System.out.println("Index out of range in 'Adventurer' with " + player.getUsername() + " index(" + locationIndex + ")");
									}
								}
							});
						}
					});
				}
			});
		}
	});
}
</code></pre>
<p>}[/code]</p>
<p>The advantage to using indexing as opposed to repetitive â€˜ifâ€™ statements becomes more obvious as you break down whatâ€™s actually happening to a lower level.  Accessing the data we want by simply passing in the right memory offset(s) (pointer(s)) saves the CPU all of the extra (Mnemonic)â€˜if_icmpeqâ€™ Opcode(9f) instructions at the bytecode level.</p>
<p><em>Edit</em><br>
After thinking this over, pointers are one of the most important concepts for a programmer to understand, so I made a little change to the above snippit to hopefully invoke a bit more understanding on how the particular memory areas are accessed through the indexing.</p>
<p>[code=java]//Zilentechnix<br>
package org.rscdaemon.server.npchandler;</p>
<p>import org.rscdaemon.server.model.*;<br>
import org.rscdaemon.server.event.ShortEvent;</p>
<p>public class Adventurer  implements NpcHandler {</p>
<pre><code>private static World world = World.getWorld();

/**
 * Preferably, the `definitions` for the tele points should be stored in an external format (txt, cfg, xml)
 * If read each time the handler fires, or refreshed on demand, it would allow for updated teleport locations at runtime.
 */

private final String[][][] places = {
	{
		{"town"}, //Here we have categories for the first menu option "town"
		{"Edgeville", "Varrock", "Falador", "Seers", "Catherby", "Yannile", "Karamja", "Draynor", "Lumbridge"} //SECOND MENU
	},
	{
		{"wilderness location"}, //FIRST MENU: second option: "wilderness location"
		{"Castle", "Dragon Maze", "Mage Arena"} //SECOND MENU
	},
	{
		{"other coordinate"}, //FIRST MENU: third option: "other coordinate"
		{"777, 777", "888, 888"} //SECOND MENU
	}
}; //You can add on more menu options here!

private final int[][][] telePoints = new int[][][] {
		{   //Town Tele Points Here
			{225, 447},
			{122, 503},
			{313, 550},
			{501, 455},
			{440, 500},
			{587, 761},
			{371, 695},
			{585, 621},
			{214, 632},
			{112, 647}
		},	
		{	//Wilderness Tele Points Here
			{271, 353},
			{268, 197},
			{447, 3371}
		},
		{	//'other coordinate' Tele Points Here
			{777, 777},
			{888, 888}
		}
		//You can add on anything, right up here following this template!  Memory by indexing is fun!
};

public void handleNpc(final Npc npc, final Player player) throws Exception {
	String options = "Would you like to go to a(n) ";
	for(String[][] s : places) {
		options += s[0][0] + ", or a(n) ";
	}
	player.informOfNpcMessage(new ChatMessage(npc, options.substring(0, options.length() - 0xA) + "?", player));
	world.getDelayedEventHandler().add(new ShortEvent(player) {
		public void action() {
			player.setBusy(false);
			String[] option = new String[places.length];
			int idx = 0;
			for(String[][] s : places) {
				option[idx++] = s[0][0];
			}
			player.getActionSender().sendMenu(option);
			player.setMenuHandler(new MenuHandler(option) {
				public void handleReply(final int option, final String reply) {
					player.informOfNpcMessage(new ChatMessage(npc, "Now select the " + places[option][0][0] + " you want to go to", player));
					world.getDelayedEventHandler().add(new ShortEvent(player) {
						public void action() {
							player.getActionSender().sendMenu(places[option][1]);
							player.setMenuHandler(new MenuHandler(places[option][1]) {
								public void handleReply(final int locationIndex, final String reply) {
									if(locationIndex &gt; -1 &amp;&amp; locationIndex &lt; places[option][1].length) {
										owner.teleport(telePoints[option][locationIndex][0], telePoints[option][locationIndex][1]);
										owner.sendMessage("You arrive in " + places[option][1][locationIndex]);
									} else {
										System.out.println("Index out of range in 'Adventurer' with " + player.getUsername() + " index(" + locationIndex + ")");
									}
								}
							});
						}
					});
				}
			});
		}
	});
}
</code></pre>
<p>}[/code]</p>
<p>There, I hope you learned something <img src="../../images/emoji/twitter/stuck_out_tongueae52.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"><br>
Any comments and/or questions?</p>
      </div>

      <meta itemprop='headline' content='Adventurer Rewrote'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/yong_min.html'><span itemprop='name'>yong_min</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-05-28T10:19:02Z'>
            <time itemprop='dateModified' datetime='2016-07-31T16:44:18Z' class='post-time'>
              July 31, 2016,  4:44pm
            </time>
        <span itemprop='position'>#10</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Thanks for taking the time to write that up, Zilent. You are always helpful, and very clear in your informative explanations.</p>
<p>Iâ€™ll read through this in depth when iâ€™m not too busy <img src="../../images/emoji/twitter/winkae52.png?v=5" title=":wink:" class="emoji" alt=":wink:"></p>
      </div>

      <meta itemprop='headline' content='Adventurer Rewrote'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/adventurer-rewrote/340861 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Aug 2019 21:11:19 GMT -->
</html>
