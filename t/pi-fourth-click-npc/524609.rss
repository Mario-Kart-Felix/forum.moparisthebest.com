<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>[PI] Fourth Click Npc</title>
    <link>https://forum.moparisthebest.com/t/pi-fourth-click-npc/524609</link>
    <description>Not many know of this, but I just remembered it today as I was playing around with my slayer system.
Vannaka in my client, and most other clients used with PI servers, has 4 options. &quot;Talk To&quot;, &quot;Get Task&quot;, &quot;Trade&quot;, and &quot;Rewards&quot;.
But have you ever tried using the &quot;Rewards&quot; option? Probably made this line pop up in your server&#39;s CMD, or your output section in your IDE:
[code]
&quot;Unhandled packet type: 18 - size: 2&quot;
[/code]
That means your server has a packet that it doesn&#39;t know! Yes, there is still a lot we don&#39;t fully have done with our server, because we add higher data to the client, so the server doesn&#39;t know what to do with it. Luckily, this is easy to add.

PacketHandler.java:
Under:
[code]ClickNPC cn = new ClickNPC();[/code]
Add:
[code]packetId[18] = cn;//Fourth Click NPC[/code]

[color=green] Sidenote:
Here is the all the packets used by ClickNPC (at least that I have right now) with their names.
[code]
		ClickNPC cn = new ClickNPC();
		packetId[72] = cn;//Attack NPC
		packetId[131] = cn;//Mage NPC
		packetId[155] = cn;//First Click NPC
		packetId[17] = cn;//Second Click NPC
		packetId[21] = cn;//Third  Click NPC
		packetId[18] = cn;//Fourth Click NPC
[/code]


ClickNPC.java:
After:
[code]THIRD_CLICK = 21[/code]
but before:
[code];[/code]
Add:
[code]
, FOURTH_CLICK = 18
[/code]
After this case:
[code]
case THIRD_CLICK:
[/code]
Add:
[code]
		case FOURTH_CLICK:
			c.npcClickIndex = c.inStream.readSignedWordBigEndian();
			c.npcType = NPCHandler.npcs[c.npcClickIndex].npcType;
			if(c.goodDistance(NPCHandler.npcs[c.npcClickIndex].getX(),
			NPCHandler.npcs[c.npcClickIndex].getY(), c.getX(), c.getY(), 1)) {
				c.turnPlayerTo(NPCHandler.npcs[c.npcClickIndex].getX(),
				NPCHandler.npcs[c.npcClickIndex].getY());
				NPCHandler.npcs[c.npcClickIndex].facePlayer(c.playerId);
				c.getActions().fourthClickNpc(c.npcType);	
			} else {
				c.clickNpcType = 4;
			}
		break;
[/code]
ActionHandler.java:
After this method:
[code]public void thirdClickNpc(int npcType) {[/code]
Add:
[code]
	public void fourthClickNpc(int npcType) {
		c.clickNpcType = 0;
		c.npcClickIndex = 0;
                switch(npcType){
                     case 1597://Vannaka
                           c.sendMessage(&quot;Fourth Click Npc Works!&quot;);
                           break;
                }
		if(c.playerRights == 3){
			Misc.println(&quot;Fourth Click NPC: &quot; + npcType);
		}
	}
[/code]
I added a switch statement and case for vannaka just as a demo.

Client.java
After this if statement:
[code]if (clickNpcType == 3) {[/code]

Add:
[code]
				if (clickNpcType == 4) {
					turnPlayerTo(NPCHandler.npcs[npcClickIndex].getX(),
							NPCHandler.npcs[npcClickIndex].getY());
					NPCHandler.npcs[npcClickIndex].facePlayer(playerId);
					getActions().fourthClickNpc(npcType);
				}
[/code]


Now, I didn&#39;t think this was big enough for a full blown tutorial, but if you&#39;d like, I could edit it to be one.

Questions? Comments? Etc?
Post em below.</description>
    
    <lastBuildDate>Thu, 11 Jul 2013 15:52:11 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/pi-fourth-click-npc/524609.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>[PI] Fourth Click Npc</title>
        <dc:creator><![CDATA[@arham_4 arham 4]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/arham_4">@arham_4</a> wrote:</p>
          <blockquote>
              <p>I already got it for 474, but thanks for the contribution.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-fourth-click-npc/524609/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-fourth-click-npc/524609/8</link>
        <pubDate>Thu, 11 Jul 2013 15:52:11 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-524609-8</guid>
        <source url="https://forum.moparisthebest.com/t/pi-fourth-click-npc/524609.rss">[PI] Fourth Click Npc</source>
      </item>
      <item>
        <title>[PI] Fourth Click Npc</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <p>[quote=“Driman Rune, post:6, topic:524609”]10 10</p>
<p>i knew vannaka has 4 npc options</p>
<p>theirs multiple npcs that do and theirs a npc that has 5 on rs ;0[/quote]<br>
I could probably get that packet handled if I knew what npc it was <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
<aside class="quote quote-modified" data-post="4" data-topic="524609">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/ambokile/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> Ambokile:</div>
<blockquote>
<p>Did Vannaka have four options in 2006? If so, there’s no reason why pretty much every existing server won’t be able to apply this. Good job.</p>
</blockquote>
</aside>
<p>Thanks ^.^</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-fourth-click-npc/524609/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-fourth-click-npc/524609/7</link>
        <pubDate>Thu, 11 Jul 2013 15:40:38 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-524609-7</guid>
        <source url="https://forum.moparisthebest.com/t/pi-fourth-click-npc/524609.rss">[PI] Fourth Click Npc</source>
      </item>
      <item>
        <title>[PI] Fourth Click Npc</title>
        <dc:creator><![CDATA[@Driman_Rune Driman Rune]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/driman_rune">@Driman_Rune</a> wrote:</p>
          <blockquote>
              <p>10 10</p>
<p>i knew vannaka has 4 npc options</p>
<p>theirs multiple npcs that do and theirs a npc that has 5 on rs ;0</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-fourth-click-npc/524609/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-fourth-click-npc/524609/6</link>
        <pubDate>Thu, 11 Jul 2013 15:08:38 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-524609-6</guid>
        <source url="https://forum.moparisthebest.com/t/pi-fourth-click-npc/524609.rss">[PI] Fourth Click Npc</source>
      </item>
      <item>
        <title>[PI] Fourth Click Npc</title>
        <dc:creator><![CDATA[@Loveandpower Loveandpower]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/loveandpower">@Loveandpower</a> wrote:</p>
          <blockquote>
              <p>[quote=“Ambokile, post:4, topic:524609”]Did Vannaka have four options in 2006? If so, there’s no reason why pretty much every existing server won’t be able to apply this. Good job.[/quote]474+ I believe</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-fourth-click-npc/524609/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-fourth-click-npc/524609/5</link>
        <pubDate>Thu, 11 Jul 2013 15:07:44 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-524609-5</guid>
        <source url="https://forum.moparisthebest.com/t/pi-fourth-click-npc/524609.rss">[PI] Fourth Click Npc</source>
      </item>
      <item>
        <title>[PI] Fourth Click Npc</title>
        <dc:creator><![CDATA[@Ambokile Ambokile]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ambokile">@Ambokile</a> wrote:</p>
          <blockquote>
              <p>Did Vannaka have four options in 2006? If so, there’s no reason why pretty much every existing server won’t be able to apply this. Good job.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-fourth-click-npc/524609/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-fourth-click-npc/524609/4</link>
        <pubDate>Thu, 11 Jul 2013 14:58:05 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-524609-4</guid>
        <source url="https://forum.moparisthebest.com/t/pi-fourth-click-npc/524609.rss">[PI] Fourth Click Npc</source>
      </item>
      <item>
        <title>[PI] Fourth Click Npc</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="2" data-topic="524609">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/loveandpower/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> Loveandpower:</div>
<blockquote>
<p>thanks for the contribution never realized there was four options on vannaka.</p>
</blockquote>
</aside>
<p>Not All servers have it, but obviously any npc could have a fourth.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-fourth-click-npc/524609/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-fourth-click-npc/524609/3</link>
        <pubDate>Thu, 11 Jul 2013 12:44:36 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-524609-3</guid>
        <source url="https://forum.moparisthebest.com/t/pi-fourth-click-npc/524609.rss">[PI] Fourth Click Npc</source>
      </item>
      <item>
        <title>[PI] Fourth Click Npc</title>
        <dc:creator><![CDATA[@Loveandpower Loveandpower]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/loveandpower">@Loveandpower</a> wrote:</p>
          <blockquote>
              <p>thanks for the contribution never realized there was four options on vannaka.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-fourth-click-npc/524609/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-fourth-click-npc/524609/2</link>
        <pubDate>Thu, 11 Jul 2013 12:42:20 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-524609-2</guid>
        <source url="https://forum.moparisthebest.com/t/pi-fourth-click-npc/524609.rss">[PI] Fourth Click Npc</source>
      </item>
      <item>
        <title>[PI] Fourth Click Npc</title>
        <dc:creator><![CDATA[@sk8rdude461 sk8rdude461]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sk8rdude461">@sk8rdude461</a> wrote:</p>
          <blockquote>
              <p>Not many know of this, but I just remembered it today as I was playing around with my slayer system.<br>
Vannaka in my client, and most other clients used with PI servers, has 4 options. “Talk To”, “Get Task”, “Trade”, and “Rewards”.<br>
But have you ever tried using the “Rewards” option? Probably made this line pop up in your server’s CMD, or your output section in your IDE:</p>
<pre><code class="lang-auto">"Unhandled packet type: 18 - size: 2"</code></pre>
<p>That means your server has a packet that it doesn’t know! Yes, there is still a lot we don’t fully have done with our server, because we add higher data to the client, so the server doesn’t know what to do with it. Luckily, this is easy to add.</p>
<p>PacketHandler.java:<br>
Under:</p>
<pre><code class="lang-auto"></code></pre>
<p>Add:</p>
<pre><code class="lang-auto"></code></pre>
<p>[color=green] Sidenote:<br>
Here is the all the packets used by ClickNPC (at least that I have right now) with their names.</p>
<pre><code class="lang-auto">		ClickNPC cn = new ClickNPC();
		packetId[72] = cn;//Attack NPC
		packetId[131] = cn;//Mage NPC
		packetId[155] = cn;//First Click NPC
		packetId[17] = cn;//Second Click NPC
		packetId[21] = cn;//Third  Click NPC
		packetId[18] = cn;//Fourth Click NPC</code></pre>
<p>ClickNPC.java:<br>
After:</p>
<pre><code class="lang-auto"></code></pre>
<p>but before:</p>
<pre><code class="lang-auto"></code></pre>
<p>Add:</p>
<pre><code class="lang-auto">, FOURTH_CLICK = 18</code></pre>
<p>After this case:</p>
<pre><code class="lang-auto">case THIRD_CLICK:</code></pre>
<p>Add:</p>
<pre><code class="lang-auto">		case FOURTH_CLICK:
			c.npcClickIndex = c.inStream.readSignedWordBigEndian();
			c.npcType = NPCHandler.npcs[c.npcClickIndex].npcType;
			if(c.goodDistance(NPCHandler.npcs[c.npcClickIndex].getX(),
			NPCHandler.npcs[c.npcClickIndex].getY(), c.getX(), c.getY(), 1)) {
				c.turnPlayerTo(NPCHandler.npcs[c.npcClickIndex].getX(),
				NPCHandler.npcs[c.npcClickIndex].getY());
				NPCHandler.npcs[c.npcClickIndex].facePlayer(c.playerId);
				c.getActions().fourthClickNpc(c.npcType);	
			} else {
				c.clickNpcType = 4;
			}
		break;</code></pre>
<p>ActionHandler.java:<br>
After this method:</p>
<pre><code class="lang-auto"></code></pre>
<p>Add:</p>
<pre><code class="lang-auto">	public void fourthClickNpc(int npcType) {
		c.clickNpcType = 0;
		c.npcClickIndex = 0;
                switch(npcType){
                     case 1597://Vannaka
                           c.sendMessage("Fourth Click Npc Works!");
                           break;
                }
		if(c.playerRights == 3){
			Misc.println("Fourth Click NPC: " + npcType);
		}
	}</code></pre>
<p>I added a switch statement and case for vannaka just as a demo.</p>
<p>Client.java<br>
After this if statement:</p>
<pre><code class="lang-auto"></code></pre>
<p>Add:</p>
<pre><code class="lang-auto">				if (clickNpcType == 4) {
					turnPlayerTo(NPCHandler.npcs[npcClickIndex].getX(),
							NPCHandler.npcs[npcClickIndex].getY());
					NPCHandler.npcs[npcClickIndex].facePlayer(playerId);
					getActions().fourthClickNpc(npcType);
				}</code></pre>
<p>Now, I didn’t think this was big enough for a full blown tutorial, but if you’d like, I could edit it to be one.</p>
<p>Questions? Comments? Etc?<br>
Post em below.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-fourth-click-npc/524609/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-fourth-click-npc/524609/1</link>
        <pubDate>Thu, 11 Jul 2013 11:43:08 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-524609-1</guid>
        <source url="https://forum.moparisthebest.com/t/pi-fourth-click-npc/524609.rss">[PI] Fourth Click Npc</source>
      </item>
  </channel>
</rss>
