<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Mutli Dwarfcannon! [PI]</title>
    <link>https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635</link>
    <description>This was made a long ass time ago, and I don&#39;t feel like altering and deleting the CannonCoords file overall.  I see it has no purpose now; I know there are better ways, but I did not think about that while making this.



Note: the cannon will attack npcs that are not unattackable.  meaning it will attack shop npcs and crap.  Also, you will have to change the imports and package name.  You can release this on any other site as long as I get full credits for this and you get none unless you alter the code, which gives you a small percentage.


Name this DwarfCannon.java

[code=java]
package server.model.content.cannon;

import server.Server;
import server.event.CycleEvent;
import server.event.CycleEventContainer;
import server.event.CycleEventHandler;
import server.model.Entity.AttackTypes;
import server.model.npcs.NPCHandler;
import server.model.npcs.Npc;
import server.model.objects.Objects;
import server.model.players.Player;
import server.model.players.combat.CombatEngine;
import server.util.Misc;

/**
 * Dwarf cannon!!
 * 
 *
 * @author Rodrigo Molina
 */
public class DwarfCannon {

	private Player player;
	private State s = State.SOUTH_EAST;
	
	public DwarfCannon(Player $) {
		player = $;
	}
	
	public void fillCannon() {
	    if(player.cannon != null) {
		if(player.shooting &amp;&amp; player.cBalls == 30) {
		    player.sendMessage(&quot;You have to wait till your cannon uses more cannonballs.&quot;);
		    return;
		}
		if(player.getItems().playerHasItem(2)) {
		    if(player.getItems().getItemCount(2) &gt; 30) {
			player.cBalls = 30;
			player.getItems().deleteItem(2, 30);
		    } else {
			player.cBalls = player.getItems().getItemCount(2);
			player.getItems().deleteItem(2, player.getItems().getItemCount(2));
		    }
		    if(!player.shooting)
			startCannon();
		} else {
		    player.sendMessage(&quot;You need ammo to shoot this cannon!&quot;);
		}
	    } else {
		player.sendMessage(&quot;This is not your cannon!&quot;);
	    }
	}
	
	int j = 0;
	
	public void destruct() {
	    player.sendMessage(&quot;u picku&quot;);
	    if(player.cannon != null) {
		if(!player.cannon.getOwnerName().equalsIgnoreCase(player.playerName)) {
			player.sendMessage(&quot;This isn&#39;t your cannon!&quot;);
			return;
		}
	    }
	    if(player.cannon == null) {
		player.sendMessage(&quot;This isn&#39;t your cannon!&quot;);
		return;
	    }
	    Objects replace = new Objects(-1, player.cannon.getObjectX(), player.cannon.getObjectY(), 0, 1, 10, 0);
	    Server.objectHandler.addObject(replace);
	    Server.objectHandler.placeObject(replace);
            player.getCannonCoords().clear();
	    player.getItems().addItem(12, 1);
	    player.getItems().addItem(10, 1);
	    player.getItems().addItem(8, 1);
	    player.getItems().addItem(6, 1);
	    player.cannon = null;
	    if(player.cBalls &gt;= 1) {
		  player.getItems().addItem(2, player.cBalls);
	    }
	    player.cBalls = 0;
	    b = true;
	}
	
	boolean b;
	public void buildCannon() {
	    if(player.isMakingCannon) {
		player.sendMessage(&quot;You can&#39;t make another cannon??&quot;);
	    } else {
		if(player.getItems().playerHasItem(6) &amp;&amp; player.getItems().playerHasItem (10) &amp;&amp; player.getItems().playerHasItem(12)) {
		    if(player.cannon != null) {
			if(!player.cannon.getOwnerName().equalsIgnoreCase(player.playerName)) {
	        		player.sendMessage(&quot;You already have a cannon set!&quot;);
	        		return;
			}
		    }
		    player.isMakingCannon = true;
		    player.getPA().walkTo(-1, 0);
		    player.turnPlayerTo(player.absX + 1, player.absY + 2);
		    CycleEventHandler.getSingleton().addEvent(player, new CycleEvent() {

			@Override
			public void execute(CycleEventContainer container) {
			    j++;
			    if(j == 1) {
				player.startAnimation(827);
				Objects base = new Objects(7, player.absX + 1, player.absY, 0, 1, 10, 0, player.playerName);
				Server.objectHandler.addObject(base);
				Server.objectHandler.placeObject(base);
				player.getItems().deleteItem2(6, 1);
			    } else if (j == 2) {
				player.startAnimation(827);
				Objects base = new Objects(8, player.absX + 1, player.absY, 0, 1, 10, 0, player.playerName);
				Server.objectHandler.addObject(base);
				Server.objectHandler.placeObject(base);
				player.getItems().deleteItem2(8, 1);
			    } else if (j == 3) {
				player.startAnimation(827);
				Objects base = new Objects(9, player.absX + 1, player.absY, 0, 1, 10, 0, player.playerName);
				Server.objectHandler.addObject(base);
				Server.objectHandler.placeObject(base);
				 player.getItems().deleteItem2(10, 1);
			    } else if( j &gt; 3) {
				player.startAnimation(827);
				player.cannon = new Objects(6, player.absX + 1, player.absY, 0, 1, 10, 0, player.playerName);
				Server.objectHandler.addObject(player.cannon);
				Server.objectHandler.placeObject(player.cannon);
				player.getItems().deleteItem2(12, 1);
				j = 0;
				container.stop();
			    }
			}

			@Override
			public void stop() {
			    player.isMakingCannon = false;
			}
			
		    }, 5);
		} else {
		    player.sendMessage(&quot;You don&#39;t have all the items neccessary to make the cannon!&quot;);
		}
	    }
	}
	
	public void startCannon() {
	    CycleEventHandler.getSingleton().addEvent(player, new CycleEvent() {

			@Override
			public void execute(CycleEventContainer container) {
			    if(player.cBalls &gt; 0) {
				for(int j = 0; j &lt; NPCHandler.npcs.length; j++) {
					if(NPCHandler.npcs[j] != null) {
					    if(!NPCHandler.npcs[j].isDead &amp;&amp; player.goodDistance(NPCHandler.npcs[j].absX, NPCHandler.npcs[j].absY, player.cannon.getObjectX(), player.cannon.getObjectY(), 7)) {
							if(checkFire(player.cannon, NPCHandler.npcs[j])) {
							    if(!player.inMulti() &amp;&amp; NPCHandler.npcs[j] != null &amp;&amp; player.getInteractingEntity() != null &amp;&amp; player.getInteractingEntity().getClientIndex() == j) {
								fire(player.cannon, NPCHandler.npcs[j]);
								CombatEngine.attack(NPCHandler.npcs[j], player, AttackTypes.MELEE);
								break;
							    } else if (player.inMulti() &amp;&amp; NPCHandler.npcs[j] != null) {//change this to multi
								fire(player.cannon, NPCHandler.npcs[j]);
								CombatEngine.attack(NPCHandler.npcs[j], player, AttackTypes.MELEE);
							    }
						    		//fire(player.cannon, NPCHandler.npcs[j]);
						    		//CombatEngine.attack(NPCHandler.npcs[j], player, AttackTypes.MELEE);
							}
						}
					}
				}
				rotate(player.cannon);
			 } else if(!b) {
			     	player.sendMessage(&quot;Your cannon has ran out of balls!&quot;);
			     	container.stop();
			    }
			}

			@Override
			public void stop() {
			    b = false;
			    player.shooting = false;
			    s = State.SOUTH_EAST;
			}
			
		}, player.shooting ? Misc.random(6) : 2);
	}
	
	public boolean checkFire(Objects cannon, Npc npc) {
			int obX = cannon.getObjectX();
			int obY = cannon.getObjectY();
			int npcX = npc.absX;
			int npcY = npc.absY;
			if (!npc.isDead &amp;&amp; npc.heightLevel == player.heightLevel) {
				player.getCannonCoords().fillUp(obX, obY);
				switch (s) {
					case WEST:
					case SOUTH:
					case NORTH:
					case EAST:
					case NORTH_EAST:
					case SOUTH_EAST:
					case SOUTH_WEST:
					case NORTH_WEST:
						return player.getCannonCoords().checkCoords(s, npcX, npcY);
				}
			}
			return false;
	}
	
	public void fire(Objects cannon,  Npc npc) {
	    	if(npc.isDead) {
	    	    return;
	    	}
	    	player.shooting = true;
		int oX = cannon.objectX;
		int oY = cannon.objectY;
		int offX = ((++oX - npc.getX()) * -1);
		int offY = ((++oY - npc.getY()) * -1);
		player.getPA().createPlayersProjectile(oX, oY, offY, offX, 50, 60, 53, 20, 20, - player.oldNpcIndex + 1, 30);
		int damage = Misc.random(20);
		npc.dealDamage(damage, 1);
		npc.killerId = player.getId();
		npc.face(player);
		player.cBalls--;
		if(npc.HP &lt;= 0)
		    npc.isDead = true;
	}
	
	public void rotate(Objects cannon) {
	    if(cannon == null) return;
		int x = cannon.getObjectX();
		int y = cannon.getObjectY();
		switch(s) {
		case NORTH:
			player.getPA().objectAnim(x, y, s.getId(), 10, -1);
			s = State.NORTH_EAST;
			break;
		case NORTH_EAST:
			player.getPA().objectAnim(x, y, s.getId(), 10, -1);
			s = State.EAST;
			break;
		case EAST:
			player.getPA().objectAnim(x, y, s.getId(), 10, -1);
			s = State.SOUTH_EAST;
			break;
		case SOUTH_EAST:
			player.getPA().objectAnim(x, y, s.getId(), 10, -1);
			s = State.SOUTH;
			break;
		case SOUTH:
			player.getPA().objectAnim(x, y, s.getId(), 10, -1);
			s = State.SOUTH_WEST;
			break;
		case SOUTH_WEST:
			player.getPA().objectAnim(x, y, s.getId(), 10, -1);
			s = State.WEST;
			break;
		case WEST:
			player.getPA().objectAnim(x, y, s.getId(), 10, -1);
			s = State.NORTH_WEST;
			break;
		case NORTH_WEST:
			player.getPA().objectAnim(x, y, s.getId(), 10, -1);
			s = State.NORTH;
			break;
		}
	}
}

[/code]



CannonCoords

[code=java]package server.model.content.cannon;

import java.util.HashMap;
import java.util.LinkedList;
import java.util.List;
import java.util.Map;

import server.model.players.Player;

/**
 * For this to work and to be able to find all the npcs around within a 12 tile distance, and 
 * find the npcs when the cannon is facing their way, we are going to preload all the coords
 * into this map to be grabbed later on to check if any npcs are around.
 * 
 * @author Rodrigo Molina
 */
public class CannonCoords {

	private Map&lt;State, List&lt;Integer&gt;&gt; coords = new HashMap&lt;State, List&lt;Integer&gt;&gt;();
	
	private static final int MAX_DISTANCE = 12;
	
	@SuppressWarnings(&quot;unused&quot;)
	private Player player;
	
	public CannonCoords(Player player) {
		this.player = player;
	}
	
	/**
	 * Checks if the coords inside the map equals to the npc x and y.
	 * @param s
	 * @param obX
	 * @param obY
	 * @return
	 */
	public boolean checkCoords(State s, int npcX, int npcY) {
		return coords.get(s).contains(npcX) || coords.get(s).contains(npcY);
	}
	
	/**
	 * Fills up the map with the specified coords around the cannon.
	 * @param obX
	 * @param obY
	 */
	public void fillUp(int obX, int obY) {
		coords.put(State.NORTH, new LinkedList&lt;Integer&gt;());
		coords.put(State.NORTH_WEST, new LinkedList&lt;Integer&gt;());
		coords.put(State.NORTH_EAST, new LinkedList&lt;Integer&gt;());
		coords.put(State.SOUTH, new LinkedList&lt;Integer&gt;());
		coords.put(State.SOUTH_EAST, new LinkedList&lt;Integer&gt;());
		coords.put(State.SOUTH_WEST, new LinkedList&lt;Integer&gt;());
		coords.put(State.EAST, new LinkedList&lt;Integer&gt;());
		coords.put(State.WEST, new LinkedList&lt;Integer&gt;());
		if(!coords.get(State.NORTH).isEmpty()) 
		    return;
		addCoords(obX, obY);
	}

	public void addCoords(final int ob1, final int ob2) {
		int obX = ob1;
		int obY = ob2;
		for(int j = obX; j &lt;= obX + MAX_DISTANCE; j--) {
			if(j &lt; obX - MAX_DISTANCE) break;
			coords.get(State.WEST).add(j);
			coords.get(State.SOUTH_WEST).add(j);
		}
		
		for(int j = obY; j &lt;= obY + MAX_DISTANCE; j--) {
			if(j &lt; obY - MAX_DISTANCE) break;
			coords.get(State.SOUTH).add(j);
			coords.get(State.SOUTH_EAST).add(j);
		}
		
		for(int j = obX; j &lt;= obX + MAX_DISTANCE; j++) {
			if(j &lt; obX - MAX_DISTANCE) break;
			coords.get(State.EAST).add(j);
			coords.get(State.NORTH_EAST).add(j);
		}
		
		for(int j = obY; j &lt;= obY + MAX_DISTANCE; j++) {
			if(j &lt; obY - MAX_DISTANCE) break;
			coords.get(State.NORTH).add(j);
			coords.get(State.NORTH_WEST).add(j);
		}
	}
	public void clear() {
	    coords.clear();
	}
}

[/code]


State.java
[code=java]
package server.model.content.cannon;

import java.util.HashMap;
import java.util.Map;


public enum State {

		NORTH(516),
		NORTH_EAST(517),
		EAST(518),
		SOUTH_EAST(519),
		SOUTH(520),
		SOUTH_WEST(521),
		WEST(514),
		NORTH_WEST(515);
		
		int id = 0;
		
		State(int id) {
			this.id = id;
		}
		
		private static Map&lt;Integer, State&gt; states = new HashMap&lt;Integer, State&gt;

();
		
		static {
			for(State s : states.values())
				State.states.put(s.getId(), s);
		}
		
		int getId() {
			return id;
		}
}

[/code]

ClickObject.java orActionHandler.java

FirstClick
[code=java]
				case 6:
				    client.getDwarf().fillCannon();
				    break;
[/code]
SecondClick
[code=java]
			case 6:
			    client.getDwarf().destruct();
			    break;
[/code]

Now in Client.java yo ucan add this to logout() method or destruct() method.
[code=java]
getDwarf().destruct();
[/code]

Client.java
[code=java]
	private final DwarfCannon dw = new DwarfCannon(this);

	public DwarfCannon getDwarf() {
		return dw;
	}
	
	private final CannonCoords cc = new CannonCoords(this);
	
	public CannonCoords getCannonCoords() {
	    return cc;
	}
		public boolean isMakingCannon;
		public Objects cannon = null;
		public int cBalls;
		public boolean shooting;
[/code]

Walking.java

[code=java]
		if(c.isMakingCannon) {
		    return;
		}
[/code]


Also replace your Objects.java with this:
[code=java]
package server.map.objects;

public class Objects {

	public int objectId;
	public int objectX;
	public int objectY;
	public int objectHeight;
	public int objectFace;
	public int objectType;
	public int objectTicks;
	private String owner;

	public Objects(final int id, final int x, final int y, final int height,
			final int face, final int type, final int ticks, String owner) {
		objectId = id;
		objectX = x;
		objectY = y;
		objectHeight = height;
		objectFace = face;
		objectType = type;
		objectTicks = ticks;
		this.owner = owner;
	}
	
	public Objects(final int id, final int x, final int y, final int height,
		final int face, final int type, final int ticks) {
	objectId = id;
	objectX = x;
	objectY = y;
	objectHeight = height;
	objectFace = face;
	objectType = type;
	objectTicks = ticks;
}
	
	public String getOwnerName() {
	    return owner;
	}

	public int getObjectId() {
		return objectId;
	}

	public int getObjectX() {
		return objectX;
	}

	public int getObjectY() {
		return objectY;
	}

	public int getObjectHeight() {
		return objectHeight;
	}

	public int getObjectFace() {
		return objectFace;
	}

	public int getObjectType() {
		return objectType;
	}

}
[/code]

Here is the objectAnim methods if you need it.
PlayerAssistant.java
[code=java]
	public void createObjectAnim(int X, int Y, int animationID,
		int tileObjectType, int orientation) {
	if (c == null) {
		return;
	}
	try {
		c.outStream.createFrame(85);
		c.outStream.writeByteC(Y - c.mapRegionY * 8);
		c.outStream.writeByteC(X - c.mapRegionX * 8);
		int x = 0;
		int y = 0;
		c.outStream.createFrame(160);
		c.outStream.writeByteS(((x &amp; 7) &lt;&lt; 4) + (y &amp; 7));// tiles away -
															// could just
															// send 0
		c.outStream.writeByteS((tileObjectType &lt;&lt; 2) + (orientation &amp; 3));
		c.outStream.writeWordA(animationID);// animation id
	} catch (Exception e) {
		e.printStackTrace();
	}
}

public void objectAnim(int X, int Y, int animationID, int tileObjectType,
		int orientation) {
	for (int i = 0; i &lt; Config.MAX_PLAYERS; i++) {
		if (PlayerHandler.players[i] != null) {
		    Player person = (Player) PlayerHandler.players[i];
			if (person != null) {
			    Player cc = (Player) person;
				if (cc.distanceToPoint(X, Y) &lt;= 25) {
					cc.getPA().createObjectAnim(X, Y, animationID,
							tileObjectType, orientation);
				}
			}
		}
	}
}
[/code]

I don&#39;t have any pictures because I&#39;m too lazy to take any, but I assure it works.</description>
    
    <lastBuildDate>Mon, 29 Apr 2013 17:33:39 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Mutli Dwarfcannon! [PI]</title>
        <dc:creator><![CDATA[@Pkor159 Pkor159]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/pkor159">@Pkor159</a> wrote:</p>
          <blockquote>
              <p>I was searching for this for so long. Hope your works! Tho it had 11 with :<br>
error:class-interface-or-enum-expected</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635/17">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635/17</link>
        <pubDate>Mon, 29 Apr 2013 17:33:39 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-453635-17</guid>
        <source url="https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635.rss">Mutli Dwarfcannon! [PI]</source>
      </item>
      <item>
        <title>Mutli Dwarfcannon! [PI]</title>
        <dc:creator><![CDATA[@enzo42 enzo42]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/enzo42">@enzo42</a> wrote:</p>
          <blockquote>
              <p>[quote=“Grizzlyxx, post:15, topic:453635”]“Note: the cannon will attack npcs that are not unattackable.  meaning it will attack shop npcs and crap.  Also, you will have to change the imports and package name.  You can release this on any other site as long as I get full credits for this and you get none unless you alter the code, which gives you a small percentage.”</p>
<p>that wouldn’t work to well with people who dislike your server and want to ruin it I wont be using but besides that nice release i guess.[/quote]</p>
<p>Do you know how easy it is to fix that…?<br>
Noob</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635/16">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635/16</link>
        <pubDate>Sun, 28 Apr 2013 15:32:34 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-453635-16</guid>
        <source url="https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635.rss">Mutli Dwarfcannon! [PI]</source>
      </item>
      <item>
        <title>Mutli Dwarfcannon! [PI]</title>
        <dc:creator><![CDATA[@Grizzlyxx Grizzlyxx]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/grizzlyxx">@Grizzlyxx</a> wrote:</p>
          <blockquote>
              <p>“Note: the cannon will attack npcs that are not unattackable.  meaning it will attack shop npcs and crap.  Also, you will have to change the imports and package name.  You can release this on any other site as long as I get full credits for this and you get none unless you alter the code, which gives you a small percentage.”</p>
<p>that wouldn’t work to well with people who dislike your server and want to ruin it I wont be using but besides that nice release i guess.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635/15">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635/15</link>
        <pubDate>Sun, 28 Apr 2013 13:56:52 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-453635-15</guid>
        <source url="https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635.rss">Mutli Dwarfcannon! [PI]</source>
      </item>
      <item>
        <title>Mutli Dwarfcannon! [PI]</title>
        <dc:creator><![CDATA[@Clawz_fury lare69]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/clawz_fury">@Clawz_fury</a> wrote:</p>
          <blockquote>
              <p>gonna try this today and tomorrow if it works ill release</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635/14">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635/14</link>
        <pubDate>Tue, 16 Apr 2013 22:09:10 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-453635-14</guid>
        <source url="https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635.rss">Mutli Dwarfcannon! [PI]</source>
      </item>
      <item>
        <title>Mutli Dwarfcannon! [PI]</title>
        <dc:creator><![CDATA[@jkicool jkicool]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/jkicool">@jkicool</a> wrote:</p>
          <blockquote>
              <p><a href="http://pastebin.com/qWm2hYcb" class="onebox" target="_blank" rel="nofollow noopener">http://pastebin.com/qWm2hYcb</a></p>
<p><code>src\server\model\players\Client.java:701: error: cannot find symbol
                private final DwarfCannon dw = new DwarfCannon(this);
                              ^
  symbol:   class DwarfCannon
  location: class Client
src\server\model\players\Client.java:703: error: cannot find symbol
        public DwarfCannon getDwarf() {
               ^
  symbol:   class DwarfCannon
  location: class Client
src\server\model\players\Client.java:707: error: cannot find symbol
        private final CannonCoords cc = new CannonCoords(this);
                      ^
  symbol:   class CannonCoords
  location: class Client
src\server\model\players\Client.java:709: error: cannot find symbol
        public CannonCoords getCannonCoords() {
               ^
  symbol:   class CannonCoords
  location: class Client
src\server\model\players\Client.java:713: error: cannot find symbol
                public Objects cannon = null;
                       ^
  symbol:   class Objects
  location: class Client
src\server\model\players\Client.java:701: error: cannot find symbol
                private final DwarfCannon dw = new DwarfCannon(this);
                                                   ^
  symbol:   class DwarfCannon
  location: class Client
src\server\model\players\Client.java:707: error: cannot find symbol
        private final CannonCoords cc = new CannonCoords(this);
                                            ^
  symbol:   class CannonCoords
  location: class Client
src\server\model\players\ActionHandler.java:29: error: cannot find symbol
        client.getDwarf().fillCannon();
        ^
  symbol:   variable client
  location: class ActionHandler
src\server\model\players\ActionHandler.java:1182: error: cannot find symbol
            client.getDwarf().destruct();
            ^
  symbol:   variable client
  location: class ActionHandler
Note: Some input files use unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details.
9 errors
Press any key to continue . . .</code></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635/13">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635/13</link>
        <pubDate>Sun, 14 Apr 2013 01:08:52 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-453635-13</guid>
        <source url="https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635.rss">Mutli Dwarfcannon! [PI]</source>
      </item>
      <item>
        <title>Mutli Dwarfcannon! [PI]</title>
        <dc:creator><![CDATA[@RiiPiiNFtW RiiPiiNFtW]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/riipiinftw">@RiiPiiNFtW</a> wrote:</p>
          <blockquote>
              <p>I remember this shit. Hopefully its fixed now. <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635/12">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635/12</link>
        <pubDate>Sat, 23 Mar 2013 23:32:15 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-453635-12</guid>
        <source url="https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635.rss">Mutli Dwarfcannon! [PI]</source>
      </item>
      <item>
        <title>Mutli Dwarfcannon! [PI]</title>
        <dc:creator><![CDATA[@Clawz_fury lare69]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/clawz_fury">@Clawz_fury</a> wrote:</p>
          <blockquote>
              <p>probably gonna reference this when I create my cannon, thanks man. You’ve gotten so much better, sick job <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635/11">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635/11</link>
        <pubDate>Sat, 23 Mar 2013 22:30:24 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-453635-11</guid>
        <source url="https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635.rss">Mutli Dwarfcannon! [PI]</source>
      </item>
      <item>
        <title>Mutli Dwarfcannon! [PI]</title>
        <dc:creator><![CDATA[@LucikMucik LucikMucik]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/lucikmucik">@LucikMucik</a> wrote:</p>
          <blockquote>
              <p>my god, can any1 tell me where to put coords and dwarfcannon.java? -.-</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635/10</link>
        <pubDate>Sat, 23 Mar 2013 09:13:51 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-453635-10</guid>
        <source url="https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635.rss">Mutli Dwarfcannon! [PI]</source>
      </item>
      <item>
        <title>Mutli Dwarfcannon! [PI]</title>
        <dc:creator><![CDATA[@imsuperman05 imsuperman05]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/imsuperman05">@imsuperman05</a> wrote:</p>
          <blockquote>
              <p>No problem guys <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635/9</link>
        <pubDate>Sun, 09 Sep 2012 17:29:37 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-453635-9</guid>
        <source url="https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635.rss">Mutli Dwarfcannon! [PI]</source>
      </item>
      <item>
        <title>Mutli Dwarfcannon! [PI]</title>
        <dc:creator><![CDATA[@arham_4 arham 4]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/arham_4">@arham_4</a> wrote:</p>
          <blockquote>
              <p>Nice job!</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635/8</link>
        <pubDate>Mon, 03 Sep 2012 22:52:31 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-453635-8</guid>
        <source url="https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635.rss">Mutli Dwarfcannon! [PI]</source>
      </item>
      <item>
        <title>Mutli Dwarfcannon! [PI]</title>
        <dc:creator><![CDATA[@imsuperman05 imsuperman05]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/imsuperman05">@imsuperman05</a> wrote:</p>
          <blockquote>
              <p>[quote=“jubagas12345, post:6, topic:453635”]he says put somewhere in these<br>
Now in Client.java yo ucan add this to logout() method or destruct() method.<br>
but were it should go logout method or destruct<br>
btw methods is loads of methods in there[/quote]you can add it anywhere except in other methods.  it’s up to you ; you can add it right after the logout() {</p>
<p>Most of the code can really go anywhere in the files i stated</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635/7</link>
        <pubDate>Sun, 02 Sep 2012 18:42:35 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-453635-7</guid>
        <source url="https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635.rss">Mutli Dwarfcannon! [PI]</source>
      </item>
      <item>
        <title>Mutli Dwarfcannon! [PI]</title>
        <dc:creator><![CDATA[@jubagas12345 jubagas12345]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/jubagas12345">@jubagas12345</a> wrote:</p>
          <blockquote>
              <p>he says put somewhere in these<br>
Now in Client.java yo ucan add this to logout() method or destruct() method.<br>
but were it should go logout method or destruct<br>
btw methods is loads of methods in there</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635/6</link>
        <pubDate>Sun, 02 Sep 2012 16:10:04 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-453635-6</guid>
        <source url="https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635.rss">Mutli Dwarfcannon! [PI]</source>
      </item>
      <item>
        <title>Mutli Dwarfcannon! [PI]</title>
        <dc:creator><![CDATA[@kleber883 kleber883]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/kleber883">@kleber883</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="4" data-topic="453635">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/jubagas12345/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> jubagas12345:</div>
<blockquote>
<p>Please explain more were to put because some of this i dont even understand were to put <img src="https://forum.moparisthebest.com/images/emoji/twitter/confused.png?v=5" title=":confused:" class="emoji" alt=":confused:"></p>
</blockquote>
</aside>
<p>What’s not to understand? He spoonfed this…</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635/5</link>
        <pubDate>Sun, 02 Sep 2012 15:09:17 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-453635-5</guid>
        <source url="https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635.rss">Mutli Dwarfcannon! [PI]</source>
      </item>
      <item>
        <title>Mutli Dwarfcannon! [PI]</title>
        <dc:creator><![CDATA[@jubagas12345 jubagas12345]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/jubagas12345">@jubagas12345</a> wrote:</p>
          <blockquote>
              <p>Please explain more were to put because some of this i dont even understand were to put <img src="https://forum.moparisthebest.com/images/emoji/twitter/confused.png?v=5" title=":confused:" class="emoji" alt=":confused:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635/4</link>
        <pubDate>Sun, 02 Sep 2012 13:39:28 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-453635-4</guid>
        <source url="https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635.rss">Mutli Dwarfcannon! [PI]</source>
      </item>
      <item>
        <title>Mutli Dwarfcannon! [PI]</title>
        <dc:creator><![CDATA[@k1ng0frs k1ng0frs]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/k1ng0frs">@k1ng0frs</a> wrote:</p>
          <blockquote>
              <p>pretty cool snippet will look into</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635/3</link>
        <pubDate>Fri, 10 Aug 2012 17:31:05 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-453635-3</guid>
        <source url="https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635.rss">Mutli Dwarfcannon! [PI]</source>
      </item>
      <item>
        <title>Mutli Dwarfcannon! [PI]</title>
        <dc:creator><![CDATA[@asshole_rule asshole_rule]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/asshole_rule">@asshole_rule</a> wrote:</p>
          <blockquote>
              <p>First,</p>
<p>beast man u rock!!<a class="mention" href="/u/111">@111</a></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635/2</link>
        <pubDate>Fri, 10 Aug 2012 05:08:10 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-453635-2</guid>
        <source url="https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635.rss">Mutli Dwarfcannon! [PI]</source>
      </item>
      <item>
        <title>Mutli Dwarfcannon! [PI]</title>
        <dc:creator><![CDATA[@imsuperman05 imsuperman05]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/imsuperman05">@imsuperman05</a> wrote:</p>
          <blockquote>
              <p>This was made a long ass time ago, and I don’t feel like altering and deleting the CannonCoords file overall.  I see it has no purpose now; I know there are better ways, but I did not think about that while making this.</p>
<p>Note: the cannon will attack npcs that are not unattackable.  meaning it will attack shop npcs and crap.  Also, you will have to change the imports and package name.  You can release this on any other site as long as I get full credits for this and you get none unless you alter the code, which gives you a small percentage.</p>
<p>Name this DwarfCannon.java</p>
<pre><code class="lang-auto">package server.model.content.cannon;

import server.Server;
import server.event.CycleEvent;
import server.event.CycleEventContainer;
import server.event.CycleEventHandler;
import server.model.Entity.AttackTypes;
import server.model.npcs.NPCHandler;
import server.model.npcs.Npc;
import server.model.objects.Objects;
import server.model.players.Player;
import server.model.players.combat.CombatEngine;
import server.util.Misc;

/**
 * Dwarf cannon!!
 * 
 *
 * @author Rodrigo Molina
 */
public class DwarfCannon {

	private Player player;
	private State s = State.SOUTH_EAST;
	
	public DwarfCannon(Player $) {
		player = $;
	}
	
	public void fillCannon() {
	    if(player.cannon != null) {
		if(player.shooting &amp;&amp; player.cBalls == 30) {
		    player.sendMessage("You have to wait till your cannon uses more cannonballs.");
		    return;
		}
		if(player.getItems().playerHasItem(2)) {
		    if(player.getItems().getItemCount(2) &gt; 30) {
			player.cBalls = 30;
			player.getItems().deleteItem(2, 30);
		    } else {
			player.cBalls = player.getItems().getItemCount(2);
			player.getItems().deleteItem(2, player.getItems().getItemCount(2));
		    }
		    if(!player.shooting)
			startCannon();
		} else {
		    player.sendMessage("You need ammo to shoot this cannon!");
		}
	    } else {
		player.sendMessage("This is not your cannon!");
	    }
	}
	
	int j = 0;
	
	public void destruct() {
	    player.sendMessage("u picku");
	    if(player.cannon != null) {
		if(!player.cannon.getOwnerName().equalsIgnoreCase(player.playerName)) {
			player.sendMessage("This isn't your cannon!");
			return;
		}
	    }
	    if(player.cannon == null) {
		player.sendMessage("This isn't your cannon!");
		return;
	    }
	    Objects replace = new Objects(-1, player.cannon.getObjectX(), player.cannon.getObjectY(), 0, 1, 10, 0);
	    Server.objectHandler.addObject(replace);
	    Server.objectHandler.placeObject(replace);
            player.getCannonCoords().clear();
	    player.getItems().addItem(12, 1);
	    player.getItems().addItem(10, 1);
	    player.getItems().addItem(8, 1);
	    player.getItems().addItem(6, 1);
	    player.cannon = null;
	    if(player.cBalls &gt;= 1) {
		  player.getItems().addItem(2, player.cBalls);
	    }
	    player.cBalls = 0;
	    b = true;
	}
	
	boolean b;
	public void buildCannon() {
	    if(player.isMakingCannon) {
		player.sendMessage("You can't make another cannon??");
	    } else {
		if(player.getItems().playerHasItem(6) &amp;&amp; player.getItems().playerHasItem (10) &amp;&amp; player.getItems().playerHasItem(12)) {
		    if(player.cannon != null) {
			if(!player.cannon.getOwnerName().equalsIgnoreCase(player.playerName)) {
	        		player.sendMessage("You already have a cannon set!");
	        		return;
			}
		    }
		    player.isMakingCannon = true;
		    player.getPA().walkTo(-1, 0);
		    player.turnPlayerTo(player.absX + 1, player.absY + 2);
		    CycleEventHandler.getSingleton().addEvent(player, new CycleEvent() {

			@Override
			public void execute(CycleEventContainer container) {
			    j++;
			    if(j == 1) {
				player.startAnimation(827);
				Objects base = new Objects(7, player.absX + 1, player.absY, 0, 1, 10, 0, player.playerName);
				Server.objectHandler.addObject(base);
				Server.objectHandler.placeObject(base);
				player.getItems().deleteItem2(6, 1);
			    } else if (j == 2) {
				player.startAnimation(827);
				Objects base = new Objects(8, player.absX + 1, player.absY, 0, 1, 10, 0, player.playerName);
				Server.objectHandler.addObject(base);
				Server.objectHandler.placeObject(base);
				player.getItems().deleteItem2(8, 1);
			    } else if (j == 3) {
				player.startAnimation(827);
				Objects base = new Objects(9, player.absX + 1, player.absY, 0, 1, 10, 0, player.playerName);
				Server.objectHandler.addObject(base);
				Server.objectHandler.placeObject(base);
				 player.getItems().deleteItem2(10, 1);
			    } else if( j &gt; 3) {
				player.startAnimation(827);
				player.cannon = new Objects(6, player.absX + 1, player.absY, 0, 1, 10, 0, player.playerName);
				Server.objectHandler.addObject(player.cannon);
				Server.objectHandler.placeObject(player.cannon);
				player.getItems().deleteItem2(12, 1);
				j = 0;
				container.stop();
			    }
			}

			@Override
			public void stop() {
			    player.isMakingCannon = false;
			}
			
		    }, 5);
		} else {
		    player.sendMessage("You don't have all the items neccessary to make the cannon!");
		}
	    }
	}
	
	public void startCannon() {
	    CycleEventHandler.getSingleton().addEvent(player, new CycleEvent() {

			@Override
			public void execute(CycleEventContainer container) {
			    if(player.cBalls &gt; 0) {
				for(int j = 0; j &lt; NPCHandler.npcs.length; j++) {
					if(NPCHandler.npcs[j] != null) {
					    if(!NPCHandler.npcs[j].isDead &amp;&amp; player.goodDistance(NPCHandler.npcs[j].absX, NPCHandler.npcs[j].absY, player.cannon.getObjectX(), player.cannon.getObjectY(), 7)) {
							if(checkFire(player.cannon, NPCHandler.npcs[j])) {
							    if(!player.inMulti() &amp;&amp; NPCHandler.npcs[j] != null &amp;&amp; player.getInteractingEntity() != null &amp;&amp; player.getInteractingEntity().getClientIndex() == j) {
								fire(player.cannon, NPCHandler.npcs[j]);
								CombatEngine.attack(NPCHandler.npcs[j], player, AttackTypes.MELEE);
								break;
							    } else if (player.inMulti() &amp;&amp; NPCHandler.npcs[j] != null) {//change this to multi
								fire(player.cannon, NPCHandler.npcs[j]);
								CombatEngine.attack(NPCHandler.npcs[j], player, AttackTypes.MELEE);
							    }
						    		//fire(player.cannon, NPCHandler.npcs[j]);
						    		//CombatEngine.attack(NPCHandler.npcs[j], player, AttackTypes.MELEE);
							}
						}
					}
				}
				rotate(player.cannon);
			 } else if(!b) {
			     	player.sendMessage("Your cannon has ran out of balls!");
			     	container.stop();
			    }
			}

			@Override
			public void stop() {
			    b = false;
			    player.shooting = false;
			    s = State.SOUTH_EAST;
			}
			
		}, player.shooting ? Misc.random(6) : 2);
	}
	
	public boolean checkFire(Objects cannon, Npc npc) {
			int obX = cannon.getObjectX();
			int obY = cannon.getObjectY();
			int npcX = npc.absX;
			int npcY = npc.absY;
			if (!npc.isDead &amp;&amp; npc.heightLevel == player.heightLevel) {
				player.getCannonCoords().fillUp(obX, obY);
				switch (s) {
					case WEST:
					case SOUTH:
					case NORTH:
					case EAST:
					case NORTH_EAST:
					case SOUTH_EAST:
					case SOUTH_WEST:
					case NORTH_WEST:
						return player.getCannonCoords().checkCoords(s, npcX, npcY);
				}
			}
			return false;
	}
	
	public void fire(Objects cannon,  Npc npc) {
	    	if(npc.isDead) {
	    	    return;
	    	}
	    	player.shooting = true;
		int oX = cannon.objectX;
		int oY = cannon.objectY;
		int offX = ((++oX - npc.getX()) * -1);
		int offY = ((++oY - npc.getY()) * -1);
		player.getPA().createPlayersProjectile(oX, oY, offY, offX, 50, 60, 53, 20, 20, - player.oldNpcIndex + 1, 30);
		int damage = Misc.random(20);
		npc.dealDamage(damage, 1);
		npc.killerId = player.getId();
		npc.face(player);
		player.cBalls--;
		if(npc.HP &lt;= 0)
		    npc.isDead = true;
	}
	
	public void rotate(Objects cannon) {
	    if(cannon == null) return;
		int x = cannon.getObjectX();
		int y = cannon.getObjectY();
		switch(s) {
		case NORTH:
			player.getPA().objectAnim(x, y, s.getId(), 10, -1);
			s = State.NORTH_EAST;
			break;
		case NORTH_EAST:
			player.getPA().objectAnim(x, y, s.getId(), 10, -1);
			s = State.EAST;
			break;
		case EAST:
			player.getPA().objectAnim(x, y, s.getId(), 10, -1);
			s = State.SOUTH_EAST;
			break;
		case SOUTH_EAST:
			player.getPA().objectAnim(x, y, s.getId(), 10, -1);
			s = State.SOUTH;
			break;
		case SOUTH:
			player.getPA().objectAnim(x, y, s.getId(), 10, -1);
			s = State.SOUTH_WEST;
			break;
		case SOUTH_WEST:
			player.getPA().objectAnim(x, y, s.getId(), 10, -1);
			s = State.WEST;
			break;
		case WEST:
			player.getPA().objectAnim(x, y, s.getId(), 10, -1);
			s = State.NORTH_WEST;
			break;
		case NORTH_WEST:
			player.getPA().objectAnim(x, y, s.getId(), 10, -1);
			s = State.NORTH;
			break;
		}
	}
}
</code></pre>
<p>CannonCoords</p>
<p>[code=java]package server.model.content.cannon;</p>
<p>import java.util.HashMap;<br>
import java.util.LinkedList;<br>
import java.util.List;<br>
import java.util.Map;</p>
<p>import server.model.players.Player;</p>
<p>/**</p>
<ul>
<li>
<p>For this to work and to be able to find all the npcs around within a 12 tile distance, and</p>
</li>
<li>
<p>find the npcs when the cannon is facing their way, we are going to preload all the coords</p>
</li>
<li>
<p>into this map to be grabbed later on to check if any npcs are around.</p>
</li>
<li>
</li>
<li>
<p><span class="mention">@author</span> Rodrigo Molina<br>
*/<br>
public class CannonCoords {</p>
<p>private Map&lt;State, List&gt; coords = new HashMap&lt;State, List&gt;();</p>
<p>private static final int MAX_DISTANCE = 12;</p>
<p><span class="mention">@SuppressWarnings</span>(“unused”)<br>
private Player player;</p>
<p>public CannonCoords(Player player) {<br>
this.player = player;<br>
}</p>
<p>/**</p>
<ul>
<li>Checks if the coords inside the map equals to the npc x and y.</li>
<li>
<a class="mention" href="/u/param">@param</a> s</li>
<li>
<a class="mention" href="/u/param">@param</a> obX</li>
<li>
<a class="mention" href="/u/param">@param</a> obY</li>
<li>
<a class="mention" href="/u/return">@return</a><br>
*/<br>
public boolean checkCoords(State s, int npcX, int npcY) {<br>
return coords.get(s).contains(npcX) || coords.get(s).contains(npcY);<br>
}</li>
</ul>
<p>/**</p>
<ul>
<li>Fills up the map with the specified coords around the cannon.</li>
<li>
<a class="mention" href="/u/param">@param</a> obX</li>
<li>
<a class="mention" href="/u/param">@param</a> obY<br>
*/<br>
public void fillUp(int obX, int obY) {<br>
coords.put(State.NORTH, new LinkedList());<br>
coords.put(State.NORTH_WEST, new LinkedList());<br>
coords.put(State.NORTH_EAST, new LinkedList());<br>
coords.put(State.SOUTH, new LinkedList());<br>
coords.put(State.SOUTH_EAST, new LinkedList());<br>
coords.put(State.SOUTH_WEST, new LinkedList());<br>
coords.put(State.EAST, new LinkedList());<br>
coords.put(State.WEST, new LinkedList());<br>
if(!coords.get(State.NORTH).isEmpty())<br>
return;<br>
addCoords(obX, obY);<br>
}</li>
</ul>
<p>public void addCoords(final int ob1, final int ob2) {<br>
int obX = ob1;<br>
int obY = ob2;<br>
for(int j = obX; j &lt;= obX + MAX_DISTANCE; j–) {<br>
if(j &lt; obX - MAX_DISTANCE) break;<br>
coords.get(State.WEST).add(j);<br>
coords.get(State.SOUTH_WEST).add(j);<br>
}</p>
<pre><code> for(int j = obY; j &lt;= obY + MAX_DISTANCE; j--) {
 	if(j &lt; obY - MAX_DISTANCE) break;
 	coords.get(State.SOUTH).add(j);
 	coords.get(State.SOUTH_EAST).add(j);
 }
 
 for(int j = obX; j &lt;= obX + MAX_DISTANCE; j++) {
 	if(j &lt; obX - MAX_DISTANCE) break;
 	coords.get(State.EAST).add(j);
 	coords.get(State.NORTH_EAST).add(j);
 }
 
 for(int j = obY; j &lt;= obY + MAX_DISTANCE; j++) {
 	if(j &lt; obY - MAX_DISTANCE) break;
 	coords.get(State.NORTH).add(j);
 	coords.get(State.NORTH_WEST).add(j);
 }
</code></pre>
<p>}<br>
public void clear() {<br>
coords.clear();<br>
}<br>
}</p>
</li>
</ul>
<p>[/code]</p>
<p>State.java</p>
<pre><code class="lang-auto">package server.model.content.cannon;

import java.util.HashMap;
import java.util.Map;


public enum State {

		NORTH(516),
		NORTH_EAST(517),
		EAST(518),
		SOUTH_EAST(519),
		SOUTH(520),
		SOUTH_WEST(521),
		WEST(514),
		NORTH_WEST(515);
		
		int id = 0;
		
		State(int id) {
			this.id = id;
		}
		
		private static Map&lt;Integer, State&gt; states = new HashMap&lt;Integer, State&gt;

();
		
		static {
			for(State s : states.values())
				State.states.put(s.getId(), s);
		}
		
		int getId() {
			return id;
		}
}
</code></pre>
<p>ClickObject.java orActionHandler.java</p>
<p>FirstClick</p>
<pre><code class="lang-auto">				case 6:
				    client.getDwarf().fillCannon();
				    break;</code></pre>
<p>SecondClick</p>
<pre><code class="lang-auto">			case 6:
			    client.getDwarf().destruct();
			    break;</code></pre>
<p>Now in Client.java yo ucan add this to logout() method or destruct() method.</p>
<pre><code class="lang-auto">getDwarf().destruct();</code></pre>
<p>Client.java</p>
<pre><code class="lang-auto">	private final DwarfCannon dw = new DwarfCannon(this);

	public DwarfCannon getDwarf() {
		return dw;
	}
	
	private final CannonCoords cc = new CannonCoords(this);
	
	public CannonCoords getCannonCoords() {
	    return cc;
	}
		public boolean isMakingCannon;
		public Objects cannon = null;
		public int cBalls;
		public boolean shooting;</code></pre>
<p>Walking.java</p>
<pre><code class="lang-auto">		if(c.isMakingCannon) {
		    return;
		}</code></pre>
<p>Also replace your Objects.java with this:</p>
<pre><code class="lang-auto">package server.map.objects;

public class Objects {

	public int objectId;
	public int objectX;
	public int objectY;
	public int objectHeight;
	public int objectFace;
	public int objectType;
	public int objectTicks;
	private String owner;

	public Objects(final int id, final int x, final int y, final int height,
			final int face, final int type, final int ticks, String owner) {
		objectId = id;
		objectX = x;
		objectY = y;
		objectHeight = height;
		objectFace = face;
		objectType = type;
		objectTicks = ticks;
		this.owner = owner;
	}
	
	public Objects(final int id, final int x, final int y, final int height,
		final int face, final int type, final int ticks) {
	objectId = id;
	objectX = x;
	objectY = y;
	objectHeight = height;
	objectFace = face;
	objectType = type;
	objectTicks = ticks;
}
	
	public String getOwnerName() {
	    return owner;
	}

	public int getObjectId() {
		return objectId;
	}

	public int getObjectX() {
		return objectX;
	}

	public int getObjectY() {
		return objectY;
	}

	public int getObjectHeight() {
		return objectHeight;
	}

	public int getObjectFace() {
		return objectFace;
	}

	public int getObjectType() {
		return objectType;
	}

}</code></pre>
<p>Here is the objectAnim methods if you need it.<br>
PlayerAssistant.java</p>
<pre><code class="lang-auto">	public void createObjectAnim(int X, int Y, int animationID,
		int tileObjectType, int orientation) {
	if (c == null) {
		return;
	}
	try {
		c.outStream.createFrame(85);
		c.outStream.writeByteC(Y - c.mapRegionY * 8);
		c.outStream.writeByteC(X - c.mapRegionX * 8);
		int x = 0;
		int y = 0;
		c.outStream.createFrame(160);
		c.outStream.writeByteS(((x &amp; 7) &lt;&lt; 4) + (y &amp; 7));// tiles away -
															// could just
															// send 0
		c.outStream.writeByteS((tileObjectType &lt;&lt; 2) + (orientation &amp; 3));
		c.outStream.writeWordA(animationID);// animation id
	} catch (Exception e) {
		e.printStackTrace();
	}
}

public void objectAnim(int X, int Y, int animationID, int tileObjectType,
		int orientation) {
	for (int i = 0; i &lt; Config.MAX_PLAYERS; i++) {
		if (PlayerHandler.players[i] != null) {
		    Player person = (Player) PlayerHandler.players[i];
			if (person != null) {
			    Player cc = (Player) person;
				if (cc.distanceToPoint(X, Y) &lt;= 25) {
					cc.getPA().createObjectAnim(X, Y, animationID,
							tileObjectType, orientation);
				}
			}
		}
	}
}</code></pre>
<p>I don’t have any pictures because I’m too lazy to take any, but I assure it works.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635/1</link>
        <pubDate>Fri, 10 Aug 2012 04:52:55 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-453635-1</guid>
        <source url="https://forum.moparisthebest.com/t/mutli-dwarfcannon-pi/453635.rss">Mutli Dwarfcannon! [PI]</source>
      </item>
  </channel>
</rss>
