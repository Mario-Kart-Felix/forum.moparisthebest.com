<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Illegal use of MONITORENTER causes stack overflow</title>
    <link>https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466</link>
    <description>Output:
[code]

                                KABOOM!


An unrecoverable stack overflow has occurred.
#
# An unexpected error has been detected by HotSpot Virtual Machine:
#
#  EXCEPTION_STACK_OVERFLOW (0xc00000fd) at pc=0x6d71c787, pid=1632, tid=1396
#
# Java VM: Java HotSpot(TM) Client VM (1.5.0_11-b03 mixed mode, sharing)
# Problematic frame:
# V  [jvm.dll+0xdc787]
#
# An error report file with more information is saved as hs_err_pid1632.log[/code]

Proof:
[url=http://koti.mbnet.fi/jass0/KABOOM.class]http://koti.mbnet.fi/jass0/KABOOM.class[/url]

I can&#39;t be bothered to report it to Sun. I&#39;m sure it&#39;s already reported anyway.
Discuss :P</description>
    
    <lastBuildDate>Wed, 21 Mar 2007 04:24:12 +0000</lastBuildDate>
    <category>General Programming</category>
    <atom:link href="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Illegal use of MONITORENTER causes stack overflow</title>
        <dc:creator><![CDATA[@ilyaostr9 io9]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ilyaostr9">@ilyaostr9</a> wrote:</p>
          <blockquote>
              <aside class="quote no-group" data-post="31" data-topic="67466">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/ownagesbot/40/5_6259e4fa9dfe0dec282fb0955bb1974c.png" class="avatar"> ownagesbot:</div>
<blockquote>
<p>Heh it would? I is confuzzled.</p>
</blockquote>
</aside>
<p>If moparisthebest was a Java-programmers only community, then it would make a good sig.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/32">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/32</link>
        <pubDate>Wed, 21 Mar 2007 04:24:12 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67466-32</guid>
        <source url="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466.rss">Illegal use of MONITORENTER causes stack overflow</source>
      </item>
      <item>
        <title>Illegal use of MONITORENTER causes stack overflow</title>
        <dc:creator><![CDATA[@ownagesbot ownagesbot]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ownagesbot">@ownagesbot</a> wrote:</p>
          <blockquote>
              <p>Heh it would? I is confuzzled.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/31">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/31</link>
        <pubDate>Wed, 21 Mar 2007 02:34:18 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67466-31</guid>
        <source url="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466.rss">Illegal use of MONITORENTER causes stack overflow</source>
      </item>
      <item>
        <title>Illegal use of MONITORENTER causes stack overflow</title>
        <dc:creator><![CDATA[@ilyaostr9 io9]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ilyaostr9">@ilyaostr9</a> wrote:</p>
          <blockquote>
              <aside class="quote no-group quote-modified" data-post="29" data-topic="67466">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/ownagesbot/40/5_6259e4fa9dfe0dec282fb0955bb1974c.png" class="avatar"> ownagesbot:</div>
<blockquote>
<p>Or they just realised that it wasn’t supposed to crash and just throw exception?</p>
</blockquote>
</aside>
<p>If there less idiots who don’t java on these forums, that would make a perfect sig. <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=6" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/30">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/30</link>
        <pubDate>Tue, 20 Mar 2007 18:02:31 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67466-30</guid>
        <source url="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466.rss">Illegal use of MONITORENTER causes stack overflow</source>
      </item>
      <item>
        <title>Illegal use of MONITORENTER causes stack overflow</title>
        <dc:creator><![CDATA[@ownagesbot ownagesbot]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ownagesbot">@ownagesbot</a> wrote:</p>
          <blockquote>
              <p>Or they just realised that it wasn’t supposed to crash and just throw exception?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/29">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/29</link>
        <pubDate>Tue, 20 Mar 2007 03:56:49 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67466-29</guid>
        <source url="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466.rss">Illegal use of MONITORENTER causes stack overflow</source>
      </item>
      <item>
        <title>Illegal use of MONITORENTER causes stack overflow</title>
        <dc:creator><![CDATA[@ilyaostr9 io9]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ilyaostr9">@ilyaostr9</a> wrote:</p>
          <blockquote>
              <p>I never get a chance to speak without somebody stealing the words outta my mouth <img src="https://forum.moparisthebest.com/images/emoji/twitter/frowning.png?v=6" title=":frowning:" class="emoji" alt=":frowning:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/28">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/28</link>
        <pubDate>Tue, 20 Mar 2007 02:14:56 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67466-28</guid>
        <source url="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466.rss">Illegal use of MONITORENTER causes stack overflow</source>
      </item>
      <item>
        <title>Illegal use of MONITORENTER causes stack overflow</title>
        <dc:creator><![CDATA[@Javacisnotrecognized _^_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/javacisnotrecognized">@Javacisnotrecognized</a> wrote:</p>
          <blockquote>
              <p>Because the VM isn’t supposed to exit while threads are running if the “Security manager” doesn’t permit it, and crashing is a form of exiting? <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=6" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/27">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/27</link>
        <pubDate>Tue, 20 Mar 2007 01:44:03 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67466-27</guid>
        <source url="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466.rss">Illegal use of MONITORENTER causes stack overflow</source>
      </item>
      <item>
        <title>Illegal use of MONITORENTER causes stack overflow</title>
        <dc:creator><![CDATA[@k00dr k00dr]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/k00dr">@k00dr</a> wrote:</p>
          <blockquote>
              <p>Heh <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=6" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"> But more like, why did they think it was a problem… <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=6" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/26">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/26</link>
        <pubDate>Mon, 19 Mar 2007 23:18:26 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67466-26</guid>
        <source url="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466.rss">Illegal use of MONITORENTER causes stack overflow</source>
      </item>
      <item>
        <title>Illegal use of MONITORENTER causes stack overflow</title>
        <dc:creator><![CDATA[@ilyaostr9 io9]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ilyaostr9">@ilyaostr9</a> wrote:</p>
          <blockquote>
              <aside class="quote no-group" data-post="24" data-topic="67466">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/ownagesbot/40/5_6259e4fa9dfe0dec282fb0955bb1974c.png" class="avatar"> ownagesbot:</div>
<blockquote>
<p>because someone reported it? xD</p>
</blockquote>
</aside>
<p>That’s what I was about to say <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=6" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/25">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/25</link>
        <pubDate>Mon, 19 Mar 2007 22:48:29 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67466-25</guid>
        <source url="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466.rss">Illegal use of MONITORENTER causes stack overflow</source>
      </item>
      <item>
        <title>Illegal use of MONITORENTER causes stack overflow</title>
        <dc:creator><![CDATA[@ownagesbot ownagesbot]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ownagesbot">@ownagesbot</a> wrote:</p>
          <blockquote>
              <p>because someone reported it? xD</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/24">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/24</link>
        <pubDate>Mon, 19 Mar 2007 22:31:16 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67466-24</guid>
        <source url="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466.rss">Illegal use of MONITORENTER causes stack overflow</source>
      </item>
      <item>
        <title>Illegal use of MONITORENTER causes stack overflow</title>
        <dc:creator><![CDATA[@k00dr k00dr]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/k00dr">@k00dr</a> wrote:</p>
          <blockquote>
              <aside class="quote no-group" data-post="21" data-topic="67466">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/ruler/40/5_6259e4fa9dfe0dec282fb0955bb1974c.png" class="avatar"> ruler:</div>
<blockquote>
<p>Your StackOverflow is on the native stack, not java stack?</p>
</blockquote>
</aside>
<p>Heh, let’s just forget that for a while, I have a lot better suggestion in mind.<br>
Explain me why the flaw is fixed in 1.6?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/23">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/23</link>
        <pubDate>Sun, 18 Mar 2007 15:16:31 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67466-23</guid>
        <source url="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466.rss">Illegal use of MONITORENTER causes stack overflow</source>
      </item>
      <item>
        <title>Illegal use of MONITORENTER causes stack overflow</title>
        <dc:creator><![CDATA[@Pwnd Pwnd]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/pwnd">@Pwnd</a> wrote:</p>
          <blockquote>
              <p>[quote=“ruler, post:7, topic:67466”]Many things are done by java bytecode compliers. [/quote][quote=“pplsuqbawlz, post:9, topic:67466”]LoL We already knew ruler was wrong, he generally is.</p>
<p>He knows more than some but less than most.[/quote]</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/22">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/22</link>
        <pubDate>Fri, 16 Mar 2007 23:34:24 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67466-22</guid>
        <source url="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466.rss">Illegal use of MONITORENTER causes stack overflow</source>
      </item>
      <item>
        <title>Illegal use of MONITORENTER causes stack overflow</title>
        <dc:creator><![CDATA[@ruler ruler]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ruler">@ruler</a> wrote:</p>
          <blockquote>
              <p>[quote=“k00dr, post:20, topic:67466”]That’s obviously how locks work.</p>
<p>Does it also say that there’s “no assurance that the virtual machine does not randomly crash”?<br>
No, it says this:</p>
<aside class="quote no-group">
<div class="title">
<div class="quote-controls"></div>
 http://java.sun.com/docs/books/jvms/second_edition/html/Concepts.doc.html:</div>
<blockquote>
<p>A Java virtual machine implementation throws an object that is an instance of a subclass of the class VirtualMachineError when an internal error or resource limitation prevents it from implementing the semantics of the Java programming language. This specification defines the following virtual machine errors:</p>
<pre><code>* InternalError: An internal error has occurred in the Java virtual machine implementation because of a fault in the software implementing the virtual machine, a fault in the underlying host system software, or a fault in the hardware. This error is delivered asynchronously when it is detected and may occur at any point in a program.

* OutOfMemoryError: The Java virtual machine implementation has run out of either virtual or physical memory, and the automatic storage manager was unable to reclaim enough memory to satisfy an object creation request.

* [b]StackOverflowError: The Java virtual machine implementation has run out of stack space for a thread, typically because the thread is doing an unbounded number of recursive invocations as a result of a fault in the executing program.[/b]

* UnknownError: An exception or error has occurred, but the Java virtual machine implementation is unable to report the actual exception or error. 
</code></pre>
</blockquote>
</aside>
<p>The way the VM does it right now, throws a RuntimeException (IllegalMonitorException), is also ok.<br>
At least it doesn’t crash.[/quote]<br>
Your StackOverflow is on the native stack, not java stack?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/21">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/21</link>
        <pubDate>Fri, 16 Mar 2007 22:05:25 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67466-21</guid>
        <source url="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466.rss">Illegal use of MONITORENTER causes stack overflow</source>
      </item>
      <item>
        <title>Illegal use of MONITORENTER causes stack overflow</title>
        <dc:creator><![CDATA[@k00dr k00dr]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/k00dr">@k00dr</a> wrote:</p>
          <blockquote>
              <p>That’s obviously how locks work.</p>
<p>Does it also say that there’s “no assurance that the virtual machine does not randomly crash”?<br>
No, it says this:</p>
<blockquote>A Java virtual machine implementation throws an object that is an instance of a subclass of the class VirtualMachineError when an internal error or resource limitation prevents it from implementing the semantics of the Java programming language. This specification defines the following virtual machine errors:
<pre><code>* InternalError: An internal error has occurred in the Java virtual machine implementation because of a fault in the software implementing the virtual machine, a fault in the underlying host system software, or a fault in the hardware. This error is delivered asynchronously when it is detected and may occur at any point in a program.

* OutOfMemoryError: The Java virtual machine implementation has run out of either virtual or physical memory, and the automatic storage manager was unable to reclaim enough memory to satisfy an object creation request.

* [b]StackOverflowError: The Java virtual machine implementation has run out of stack space for a thread, typically because the thread is doing an unbounded number of recursive invocations as a result of a fault in the executing program.[/b]

* UnknownError: An exception or error has occurred, but the Java virtual machine implementation is unable to report the actual exception or error.&lt;/blockquote&gt;
</code></pre>
<p>The way the VM does it right now, throws a RuntimeException (IllegalMonitorException), is also ok.<br>
At least it doesn’t crash.</p>
</blockquote>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/20">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/20</link>
        <pubDate>Fri, 16 Mar 2007 11:18:24 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67466-20</guid>
        <source url="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466.rss">Illegal use of MONITORENTER causes stack overflow</source>
      </item>
      <item>
        <title>Illegal use of MONITORENTER causes stack overflow</title>
        <dc:creator><![CDATA[@ruler ruler]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ruler">@ruler</a> wrote:</p>
          <blockquote>
              <p>[quote=“k00dr, post:18, topic:67466”][quote author=ruler link=topic=98615.msg1015793#msg1015793 date=1173998172]<br>
I wish people that knew alot about bytecode would post more information, instead of calling me a idiot.  I may not know alot about bytecode.</p>
<p><a href="http://java.sun.com/sfaq/verifier.html" class="onebox" target="_blank" rel="nofollow noopener">http://java.sun.com/sfaq/verifier.html</a></p>
<ul>
<li>No mention of MONITORENTER or MONITOREXIT or Sync checks.</li>
</ul>
<p>“The class I put together, for example, is 100% legal.”<br>
What makes a classfile legal?</p>
<p>“Java often sacrifices speed for security”<br>
yet, i think you want it to sacrifice more speed for more verifications?</p>
<p>I still believe that classfile did not come out of sun’s java compiler.<br>
[/quote]</p>
<p>Wow, calm down, I never implied that you’re an idiot…</p>
<p>“What makes a classfile legal?”<br>
I call a classfile legal when it can be loaded, verified and linked succesfully.<br>
(<a href="http://java.sun.com/docs/books/jvms/second_edition/html/Concepts.doc.html#22574" data-bbcode="true" rel="nofollow noopener">http://java.sun.com/docs/books/jvms/second_edition/html/Concepts.doc.html#22574</a>)</p>
<p>“yet, i think you want it to sacrifice more speed for more verifications?”<br>
What’s the point of doing a half assed-job?<br>
<span class="bbcode-b">Let me specify though, the problem <span class="bbcode-i">wasn’t</span> in the classfile verification,<br>
but in the VM implementation and how it fails to prevent the crash.</span></p>
<p>“I still believe that classfile did not come out of sun’s java compiler.”<br>
Correct, it did not come out of Sun’s Java compiler.[/quote]</p>
<p><a href="http://java.sun.com/docs/books/jvms/second_edition/html/Threads.doc.html" class="onebox" target="_blank" rel="nofollow noopener">http://java.sun.com/docs/books/jvms/second_edition/html/Threads.doc.html</a></p>
<pre><code class="lang-auto">8.5 Rules About Locks
Let T be a thread and L be a lock. There are certain constraints on the operations performed by T with respect to L: 

A lock operation by T on L may occur only if, for every thread S other than T, the number of preceding unlock operations by S on L equals the number of preceding lock operations by S on L. (Less formally: only one thread at a time is permitted to lay claim to a lock; moreover, a thread may acquire the same lock multiple times and does not relinquish ownership of it until a matching number of unlock operations have been performed.)

An unlock operation by thread T on lock L may occur only if the number of preceding unlock operations by T on L is strictly less than the number of preceding lock operations by T on L. (Less formally: a thread is not permitted to unlock a lock it does not own.) 
With respect to a lock, the lock and unlock operations performed by all the threads are performed in some total sequential order. This total order must be consistent with the total order on the operations of each thread.</code></pre>
<p>hmm “no assurance that all code submitted to the Java virtual machine will obey this property”</p>
<pre><code class="lang-auto">Although a compiler for the Java programming language normally guarantees structured use of locks (see Section 7.14, "Synchronization"), there is no assurance that all code submitted to the Java virtual machine will obey this property. Implementations of the Java virtual machine are permitted but not required to enforce both of the following two rules guaranteeing structured locking.

Let T be a thread and L be a lock. Then:

The number of lock operations performed by T on L during a method invocation must equal the number of unlock operations performed by T on L during the method invocation whether the method invocation completes normally or abruptly. 

At no point during a method invocation may the number of unlock operations performed by T on L since the method invocation exceed the number of lock operations performed by T on L since the method invocation. 
In less formal terms, during a method invocation every unlock operation on L must match some preceding lock operation on L.</code></pre>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/19">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/19</link>
        <pubDate>Fri, 16 Mar 2007 03:15:05 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67466-19</guid>
        <source url="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466.rss">Illegal use of MONITORENTER causes stack overflow</source>
      </item>
      <item>
        <title>Illegal use of MONITORENTER causes stack overflow</title>
        <dc:creator><![CDATA[@k00dr k00dr]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/k00dr">@k00dr</a> wrote:</p>
          <blockquote>
              <p>[quote=“ruler, post:17, topic:67466”]I wish people that knew alot about bytecode would post more information, instead of calling me a idiot.  I may not know alot about bytecode.</p>
<p><a href="http://java.sun.com/sfaq/verifier.html" class="onebox" target="_blank" rel="nofollow noopener">http://java.sun.com/sfaq/verifier.html</a></p>
<ul>
<li>No mention of MONITORENTER or MONITOREXIT or Sync checks.</li>
</ul>
<p>“The class I put together, for example, is 100% legal.”<br>
What makes a classfile legal?</p>
<p>“Java often sacrifices speed for security”<br>
yet, i think you want it to sacrifice more speed for more verifications?</p>
<p>I still believe that classfile did not come out of sun’s java compiler.[/quote]</p>
<p>Wow, calm down, I never implied that you’re an idiot…</p>
<p>“What makes a classfile legal?”<br>
I call a classfile legal when it can be loaded, verified and linked succesfully.<br>
(<a href="http://java.sun.com/docs/books/jvms/second_edition/html/Concepts.doc.html#22574" data-bbcode="true" rel="nofollow noopener">http://java.sun.com/docs/books/jvms/second_edition/html/Concepts.doc.html#22574</a>)</p>
<p>“yet, i think you want it to sacrifice more speed for more verifications?”<br>
What’s the point of doing a half assed-job?<br>
<span class="bbcode-b">Let me specify though, the problem <span class="bbcode-i">wasn’t</span> in the classfile verification,<br>
but in the VM implementation and how it fails to prevent the crash.</span></p>
<p>“I still believe that classfile did not come out of sun’s java compiler.”<br>
Correct, it did not come out of Sun’s Java compiler.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/18">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/18</link>
        <pubDate>Thu, 15 Mar 2007 23:12:27 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67466-18</guid>
        <source url="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466.rss">Illegal use of MONITORENTER causes stack overflow</source>
      </item>
      <item>
        <title>Illegal use of MONITORENTER causes stack overflow</title>
        <dc:creator><![CDATA[@ruler ruler]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ruler">@ruler</a> wrote:</p>
          <blockquote>
              <p>I wish people that knew alot about bytecode would post more information, instead of calling me an idiot.  I may not know alot about bytecode.</p>
<p><a href="http://java.sun.com/sfaq/verifier.html" class="onebox" target="_blank" rel="nofollow noopener">http://java.sun.com/sfaq/verifier.html</a></p>
<ul>
<li>No mention of MONITORENTER or MONITOREXIT or Sync checks.</li>
</ul>
<p>“The class I put together, for example, is 100% legal.”<br>
What makes a classfile legal?</p>
<p>“Java often sacrifices speed for security”<br>
yet, i think you want it to sacrifice more speed for more verifications?</p>
<p>I still believe that classfile did not come out of sun’s java compiler.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/17">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/17</link>
        <pubDate>Thu, 15 Mar 2007 22:36:12 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67466-17</guid>
        <source url="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466.rss">Illegal use of MONITORENTER causes stack overflow</source>
      </item>
      <item>
        <title>Illegal use of MONITORENTER causes stack overflow</title>
        <dc:creator><![CDATA[@k00dr k00dr]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/k00dr">@k00dr</a> wrote:</p>
          <blockquote>
              <p>Well, you are sort of right <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=6" title=":slight_smile:" class="emoji" alt=":slight_smile:"><br>
The class I put together, for example, is 100% legal.<br>
It should run.<br>
…and it should error.</p>
<p>Not crash.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/16">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/16</link>
        <pubDate>Thu, 15 Mar 2007 20:31:08 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67466-16</guid>
        <source url="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466.rss">Illegal use of MONITORENTER causes stack overflow</source>
      </item>
      <item>
        <title>Illegal use of MONITORENTER causes stack overflow</title>
        <dc:creator><![CDATA[@frank frank_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/frank">@frank</a> wrote:</p>
          <blockquote>
              <p>my opinion could be wrong yano ad quite probably is, but i have been lead to believe that there is a certain leeway given for some aspects of the class file</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/15">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/15</link>
        <pubDate>Thu, 15 Mar 2007 20:00:13 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67466-15</guid>
        <source url="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466.rss">Illegal use of MONITORENTER causes stack overflow</source>
      </item>
      <item>
        <title>Illegal use of MONITORENTER causes stack overflow</title>
        <dc:creator><![CDATA[@k00dr k00dr]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/k00dr">@k00dr</a> wrote:</p>
          <blockquote>
              <p>You can’t really have an <span class="bbcode-u">opinion</span> on that, it’s either true or false.<br>
The VM <span class="bbcode-i">does</span> check if everything is valid.<br>
Obfuscated code must be valid, as well.</p>
<p>Unless you’ve all noticed, Java often sacrifices speed for security.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/14">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/14</link>
        <pubDate>Thu, 15 Mar 2007 19:45:13 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67466-14</guid>
        <source url="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466.rss">Illegal use of MONITORENTER causes stack overflow</source>
      </item>
      <item>
        <title>Illegal use of MONITORENTER causes stack overflow</title>
        <dc:creator><![CDATA[@frank frank_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/frank">@frank</a> wrote:</p>
          <blockquote>
              <p>imo if the jvm checked that <em>everything</em> were valid, it would take longer to load and obfuscators wouldnt be as affective</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/13">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/13</link>
        <pubDate>Thu, 15 Mar 2007 17:27:26 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67466-13</guid>
        <source url="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466.rss">Illegal use of MONITORENTER causes stack overflow</source>
      </item>
      <item>
        <title>Illegal use of MONITORENTER causes stack overflow</title>
        <dc:creator><![CDATA[@ownagesbot ownagesbot]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ownagesbot">@ownagesbot</a> wrote:</p>
          <blockquote>
              <p>Javac go die oh ruler u 2. K00dr nice find, I love reading this sorta thing, interests me lots &lt;3</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/12">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/12</link>
        <pubDate>Thu, 15 Mar 2007 04:13:41 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67466-12</guid>
        <source url="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466.rss">Illegal use of MONITORENTER causes stack overflow</source>
      </item>
      <item>
        <title>Illegal use of MONITORENTER causes stack overflow</title>
        <dc:creator><![CDATA[@Javacisnotrecognized _^_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/javacisnotrecognized">@Javacisnotrecognized</a> wrote:</p>
          <blockquote>
              <p>[quote=“ruler, post:7, topic:67466”]ok so you made a class that would not come out of traditional java bytecode compliers and you are surpised it kills the jvm</p>
<p>Many things are done by java bytecode compliers.  The JVM check these they are assumed to be done, for speed.[/quote]</p>
<p>So? Compiling something like</p>
<pre><code class="lang-auto">synchronized void whatever(){
   synchronized(this){
       synchronized(this){
           synchronized(this){
...</code></pre>
<p>produces the MONITORENTER statement, and even it doesn’t, the VM assuming all classes are made by a compiler would be crappy security policy.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/11">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/11</link>
        <pubDate>Thu, 15 Mar 2007 03:20:29 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67466-11</guid>
        <source url="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466.rss">Illegal use of MONITORENTER causes stack overflow</source>
      </item>
      <item>
        <title>Illegal use of MONITORENTER causes stack overflow</title>
        <dc:creator><![CDATA[@k00dr k00dr]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/k00dr">@k00dr</a> wrote:</p>
          <blockquote>
              <p>I came to a conclusion that we really need more topics on this board. <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=6" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/10</link>
        <pubDate>Wed, 14 Mar 2007 23:09:22 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67466-10</guid>
        <source url="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466.rss">Illegal use of MONITORENTER causes stack overflow</source>
      </item>
      <item>
        <title>Illegal use of MONITORENTER causes stack overflow</title>
        <dc:creator><![CDATA[@pplsuqbawlz pplsuqbawlz]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/pplsuqbawlz">@pplsuqbawlz</a> wrote:</p>
          <blockquote>
              <p>LoL We already knew ruler was wrong, he generally is.</p>
<p>He knows more than some but less than most.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/9</link>
        <pubDate>Wed, 14 Mar 2007 23:01:20 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67466-9</guid>
        <source url="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466.rss">Illegal use of MONITORENTER causes stack overflow</source>
      </item>
      <item>
        <title>Illegal use of MONITORENTER causes stack overflow</title>
        <dc:creator><![CDATA[@k00dr k00dr]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/k00dr">@k00dr</a> wrote:</p>
          <blockquote>
              <p>[quote=“ruler, post:7, topic:67466”]ok so you made a class that would not come out of traditional java bytecode compliers and you are surpised it kills the jvm</p>
<p>Many things are done by java bytecode compliers.  The JVM check these they are assumed to be done, for speed.[/quote]</p>
<p>Actually, that’s where you’re wrong.<br>
Everything <span class="bbcode-b">SHOULD BE</span> checked by the verifier, that’s the policy.<br>
That’s what Java does.</p>
<p>The HotSpot jams on this one, it does not happen on the new one.<br>
Good job, Sun.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466/8</link>
        <pubDate>Wed, 14 Mar 2007 21:41:33 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-67466-8</guid>
        <source url="https://forum.moparisthebest.com/t/illegal-use-of-monitorenter-causes-stack-overflow/67466.rss">Illegal use of MONITORENTER causes stack overflow</source>
      </item>
  </channel>
</rss>
