<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/automatic-save-feature/431852 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Aug 2019 14:05:17 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Automatic save feature? - Runescape - moparisthebest.com</title>
    <meta name="description" content="Well currently I am being raped by my players about them loosing items because they need to use a ::save command to save all changed made to there character. Is there anyway around this? Such as saving there characters e&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="431852.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Automatic save feature?&#39;" href="431852.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/automatic-save-feature/431852" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/automatic-save-feature/431852" />
<meta property="og:title" content="Automatic save feature?" />
<meta name="twitter:title" content="Automatic save feature?" />
<meta property="og:description" content="Well currently I am being raped by my players about them loosing items because they need to use a ::save command to save all changed made to there character. Is there anyway around this? Such as saving there characters every second or something similar? Btw I am currently using a modified project insanity source. (nothing is really different from it)" />
<meta name="twitter:description" content="Well currently I am being raped by my players about them loosing items because they need to use a ::save command to save all changed made to there character. Is there anyway around this? Such as saving there characters every second or something similar? Btw I am currently using a modified project insanity source. (nothing is really different from it)" />
<meta property="article:published_time" content="2012-02-05T10:10:01+00:00" />
<meta property="og:ignore_canonical" content="true" />

      <link rel="next" href="4318524658.html?page=2">


    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="431852.html">Automatic save feature?</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Mee0345.html'><span itemprop='name'>Mee0345</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-02-05T10:10:01Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:46:36Z' class='post-time'>
              August 2, 2016,  3:46pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Well currently I am being raped by my players about them loosing items because they need to use a ::save command to save all changed made to there character. Is there anyway around this? Such as saving there characters every second or something similar? Btw I am currently using a modified project insanity source. (nothing is really different from it)</p>
      </div>

      <meta itemprop='headline' content='Automatic save feature?'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/voetbal645.html'><span itemprop='name'>voetbal645</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-02-05T10:19:53Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:46:36Z' class='post-time'>
              August 2, 2016,  3:46pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>server.java</p>
      </div>

      <meta itemprop='headline' content='Automatic save feature?'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Mee0345.html'><span itemprop='name'>Mee0345</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-02-05T10:49:53Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:46:37Z' class='post-time'>
              August 2, 2016,  3:46pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Mind giving me instructions on what to do in server.java?</p>
      </div>

      <meta itemprop='headline' content='Automatic save feature?'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/voetbal645.html'><span itemprop='name'>voetbal645</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-02-05T11:53:00Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:46:39Z' class='post-time'>
              August 2, 2016,  3:46pm
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>search for <code>if (System.currentTimeMillis() - lastMassSave </code><br>
and change the number like this</p>
<pre><code class="lang-auto"></code></pre>
<p>change the **** to 3</p>
      </div>

      <meta itemprop='headline' content='Automatic save feature?'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="2" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Mee0345.html'><span itemprop='name'>Mee0345</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-02-05T12:07:29Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:46:39Z' class='post-time'>
              August 2, 2016,  3:46pm
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Thanks so iChat, I’ll rep you one I find out to on a iPhone :L</p>
      </div>

      <meta itemprop='headline' content='Automatic save feature?'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/voetbal645.html'><span itemprop='name'>voetbal645</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-02-05T14:44:16Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:46:44Z' class='post-time'>
              August 2, 2016,  3:46pm
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>no problem for help <img src="../../images/emoji/twitter/stuck_out_tongueae52.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
      </div>

      <meta itemprop='headline' content='Automatic save feature?'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/StubernSnake.html'><span itemprop='name'>StubernSnake</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-02-05T16:34:15Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:46:49Z' class='post-time'>
              August 2, 2016,  3:46pm
            </time>
        <span itemprop='position'>#7</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“voetbal645, post:4, topic:431852”]search for <code>if (System.currentTimeMillis() - lastMassSave </code><br>
and change the number like this</p>
<pre><code class="lang-auto"></code></pre>
<p>change the **** to 3[/quote]<br>
This will cause lag… You should make it save once someone logs out or disconnects.<br>
Tutorial :<br>
LIN:<br>
Almost Completely preventing roll-backs<br>
This is a simple fix, and thanks zstars for telling me about the shutDownHook.</p>
<p>First, in your PlayerHandler class, find this:</p>
<pre><code class="lang-auto"></code></pre>
<p>This is the constructor. Inside it, we’re going to add the shutDownHook</p>
<p><code>Runtime.getRuntime().addShutdownHook(new Thread()
                {
                        public void run()
                        {
                                for (int i = 0; i &lt; maxPlayers; i++)
                                        if(players[i] != null)
                                                ((Client)players[i]).savegame(false);
                        }
                });</code><br>
This makes it so whenever you manually close the server, it saves for all players.</p>
<p>This next one requires some work by you. Back in the client class, wherever you see disconnect = true; or the destruct method being called, add this:<br>
Code: [Select]<br>
savegame(false);<br>
This makes it so you save whenever you disconnect, whether it be from a packet timeout, the client crashing, you shutting down your computer, or whatever reason, you don’t lose your data. The only way the character files won’t save is if the server’s process is killed, which means if you end it with Task Manager, shut down your computer the wrong way, or your computer crashes.</p>
<p>Alright. That’s all I can think of at the top of my head. Note I added these to one of my old servers and just ripped them out to post here, because I was always too lazy to do it, and now the tutorial section is unlocked. If anything is wrong, let me know.<br>
<span class="bbcode-b">Credits to <span class="bbcode-u">Lin</span> for this. </span></p>
      </div>

      <meta itemprop='headline' content='Automatic save feature?'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Brandontan.html'><span itemprop='name'>Brandontan</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-02-05T18:06:53Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:46:55Z' class='post-time'>
              August 2, 2016,  3:46pm
            </time>
        <span itemprop='position'>#8</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <blockquote>This next one requires some work by you. Back in the client class, wherever you see disconnect = true; or the destruct method being called, add this:
Code: [Select]
savegame(false);</blockquote>
i have some if statements like this
[code]public void destruct() {
		synchronized (this) {
               PlayerSave.saveGame(this);
                if(disconnected == true) { 
                   saveCharacter = true;
                }
		if(disconnected == true){
	     getTradeAndDuel().declineTrade();
 }
		if(session == null) 
			return;
		PlayerSave.saveGame(this);
		if (clanId &gt;= 0)
			Server.clanChat.leaveClan(playerId, clanId);
		getPA().removeFromCW();
		if (inPits) {
		Server.fightPits.removePlayerFromPits(playerId);
		}
		Misc.println("[DEREGISTERED]: "+playerName+"");
		PlayerSave.saveGame(this);
                saveCharacter = true;
		HostList.getHostList().remove(session);
		disconnected = true;
		session.close();
		session = null;
		inStream = null;
		outStream = null;
		isActive = false;
		buffer = null;
		super.destruct();
	}
}[/code]
I KNOW this is a method. just wondering if i could just add it to the method?
[code]if (Server.playerHandler.players[j].playerName.equalsIgnoreCase(playerName))
						disconnected = true;
				}
			}[/code]
more code here.
      </div>

      <meta itemprop='headline' content='Automatic save feature?'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Mee0345.html'><span itemprop='name'>Mee0345</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-02-06T09:43:15Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:47:37Z' class='post-time'>
              August 2, 2016,  3:47pm
            </time>
        <span itemprop='position'>#9</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Some reason I have the ShutdownHook already in there? Strangely enough I don’t remember adding it, unless it was already in PI. The public static is still not helping, users still get rolled back at disconnection! I’m getting complaint after complaint! Somebody help me!!!</p>
      </div>

      <meta itemprop='headline' content='Automatic save feature?'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/zyle1992.html'><span itemprop='name'>zyle1992</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-02-06T09:49:41Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:47:37Z' class='post-time'>
              August 2, 2016,  3:47pm
            </time>
        <span itemprop='position'>#10</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>The shutdown hook only occurs when the server stops. So if they log out before the server stops, the server still won’t save their data.</p>
<p>I suggest (as stating before) saving the player data when the player logs out, becomes idle, or disconnects.</p>
      </div>

      <meta itemprop='headline' content='Automatic save feature?'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Mee0345.html'><span itemprop='name'>Mee0345</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-02-06T10:21:50Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:47:38Z' class='post-time'>
              August 2, 2016,  3:47pm
            </time>
        <span itemprop='position'>#11</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Well, I’ve just come back to coding, I last coded 8 months ago… So I should really say…</p>
<p>INSTRUCTIONS OR GTFO!!!</p>
      </div>

      <meta itemprop='headline' content='Automatic save feature?'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/zyle1992.html'><span itemprop='name'>zyle1992</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-02-06T10:26:03Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:47:38Z' class='post-time'>
              August 2, 2016,  3:47pm
            </time>
        <span itemprop='position'>#12</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Instructions:</p>
<ol>
<li>Go to the method that’s called when a player logs out</li>
<li>Make sure the player is saved there</li>
<li>Go to the method that’s called if a player is idle</li>
<li>See <span class="hashtag">#2</span>
</li>
<li>Go to the method that’s called if the connect to the client is lost</li>
<li>See <span class="hashtag">#4</span>
</li>
</ol>
      </div>

      <meta itemprop='headline' content='Automatic save feature?'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/WowILikeToCode.html'><span itemprop='name'>WowILikeToCode</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-02-06T10:56:14Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:47:38Z' class='post-time'>
              August 2, 2016,  3:47pm
            </time>
        <span itemprop='position'>#13</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>This is one way i have my server to save</p>
<p>In client.java add this void somewhere</p>
<p><code>
		public void saveuser() {
		EventManager.getSingleton().addEvent(new Event() {
			public void execute(EventContainer c) {
				int r3 = 0;
				r3 = Misc.random(6);
				if (r3 == 0) {
					sendMessage("[AUTOSAVER]: Your account has been autosaved by the server.");
					SaveGame();
				} else if (r3 == 1) {           
					SaveGame();	
				} else if (r3 == 2) { 
					SaveGame();
				} else if (r3 == 3) {
					sendMessage("[AUTOSAVER]: Your account has been autosaved by the server.");
					SaveGame();
				} else if (r3 == 4) {
					SaveGame();
				} else if (r3 == 5) {
					sendMessage("[AUTOSAVER]: Your account has been autosaved by the server.");
					SaveGame();
				}
			}
		}, 120000); //milisecondsservermessage
	};</code></p>
<p>then in public void initialise add this</p>
<pre><code class="lang-auto"></code></pre>
<p>that will save every 2 minutes, add 60000 to increase it by a minute to the 120000 or decrease to make it lower</p>
      </div>

      <meta itemprop='headline' content='Automatic save feature?'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/zyle1992.html'><span itemprop='name'>zyle1992</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-02-06T18:52:03Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:47:47Z' class='post-time'>
              August 2, 2016,  3:47pm
            </time>
        <span itemprop='position'>#14</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>That’s a horrible way to implement saving. Especially since it saves every 2 minutes, and if a player logs out in under 2 minutes they lose their progress.</p>
      </div>

      <meta itemprop='headline' content='Automatic save feature?'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/WowILikeToCode.html'><span itemprop='name'>WowILikeToCode</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-02-06T19:53:54Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:47:48Z' class='post-time'>
              August 2, 2016,  3:47pm
            </time>
        <span itemprop='position'>#15</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote quote-modified" data-post="14" data-topic="431852">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/zyle1992/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> zyle1992:</div>
<blockquote>
<p>That’s a horrible way to implement saving. Especially since it saves every 2 minutes, and if a player logs out in under 2 minutes they lose their progress.</p>
</blockquote>
</aside>
<p>If the server has a decent xp rate or anything not much can happen in 2 minutes, also if they log out properly it saves there account anyway. So that isn’t true. This is just how i do it to stop rollbacks.</p>
      </div>

      <meta itemprop='headline' content='Automatic save feature?'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Mee0345.html'><span itemprop='name'>Mee0345</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-02-07T07:19:56Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:48:37Z' class='post-time'>
              August 2, 2016,  3:48pm
            </time>
        <span itemprop='position'>#16</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“WowILikeToCode, post:13, topic:431852”]This is one way i have my server to save</p>
<p>In client.java add this void somewhere</p>
<p><code>
		public void saveuser() {
		EventManager.getSingleton().addEvent(new Event() {
			public void execute(EventContainer c) {
				int r3 = 0;
				r3 = Misc.random(6);
				if (r3 == 0) {
					sendMessage("[AUTOSAVER]: Your account has been autosaved by the server.");
					SaveGame();
				} else if (r3 == 1) {           
					SaveGame();	
				} else if (r3 == 2) { 
					SaveGame();
				} else if (r3 == 3) {
					sendMessage("[AUTOSAVER]: Your account has been autosaved by the server.");
					SaveGame();
				} else if (r3 == 4) {
					SaveGame();
				} else if (r3 == 5) {
					sendMessage("[AUTOSAVER]: Your account has been autosaved by the server.");
					SaveGame();
				}
			}
		}, 120000); //milisecondsservermessage
	};</code></p>
<p>then in public void initialise add this</p>
<pre><code class="lang-auto"></code></pre>
<p>that will save every 2 minutes, add 60000 to increase it by a minute to the 120000 or decrease to make it lower[/quote]</p>
<p>Well my X.P rates are faaaaasssssttttttt<br>
All I had to do was Change the 120000 to 1 and remove the save message <img src="../../images/emoji/twitter/smileyae52.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"> thanks</p>
      </div>

      <meta itemprop='headline' content='Automatic save feature?'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/XxBrodiexX.html'><span itemprop='name'>XxBrodiexX</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-02-07T07:26:48Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:48:37Z' class='post-time'>
              August 2, 2016,  3:48pm
            </time>
        <span itemprop='position'>#17</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>changeing it one would save it how offen?</p>
      </div>

      <meta itemprop='headline' content='Automatic save feature?'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/WowILikeToCode.html'><span itemprop='name'>WowILikeToCode</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-02-07T08:14:55Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:48:38Z' class='post-time'>
              August 2, 2016,  3:48pm
            </time>
        <span itemprop='position'>#18</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Mee0345, post:16, topic:431852”][quote author=WowILikeToCode link=topic=534560.msg3909150#msg3909150 date=1328525774]<br>
This is one way i have my server to save</p>
<p>In client.java add this void somewhere</p>
<p><code>
		public void saveuser() {
		EventManager.getSingleton().addEvent(new Event() {
			public void execute(EventContainer c) {
				int r3 = 0;
				r3 = Misc.random(6);
				if (r3 == 0) {
					sendMessage("[AUTOSAVER]: Your account has been autosaved by the server.");
					SaveGame();
				} else if (r3 == 1) {           
					SaveGame();	
				} else if (r3 == 2) { 
					SaveGame();
				} else if (r3 == 3) {
					sendMessage("[AUTOSAVER]: Your account has been autosaved by the server.");
					SaveGame();
				} else if (r3 == 4) {
					SaveGame();
				} else if (r3 == 5) {
					sendMessage("[AUTOSAVER]: Your account has been autosaved by the server.");
					SaveGame();
				}
			}
		}, 120000); //milisecondsservermessage
	};</code></p>
<p>then in public void initialise add this</p>
<pre><code class="lang-auto"></code></pre>
<p>that will save every 2 minutes, add 60000 to increase it by a minute to the 120000 or decrease to make it lower<br>
[/quote]</p>
<p>Well my X.P rates are faaaaasssssttttttt<br>
All I had to do was Change the 120000 to 1 and remove the save message <img src="../../images/emoji/twitter/smileyae52.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"> thanks[/quote]</p>
<p>Well i hope you enjoy your lagg, because if youve changed it to 1 your saving 60 thousand times a minute.</p>
      </div>

      <meta itemprop='headline' content='Automatic save feature?'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/XxBrodiexX.html'><span itemprop='name'>XxBrodiexX</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-02-07T09:09:04Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:48:39Z' class='post-time'>
              August 2, 2016,  3:48pm
            </time>
        <span itemprop='position'>#19</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>haha, thats exactly what i was thinking</p>
      </div>

      <meta itemprop='headline' content='Automatic save feature?'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/I_am_beast.html'><span itemprop='name'>I_am_beast</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-02-07T21:39:54Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:49:02Z' class='post-time'>
              August 2, 2016,  3:49pm
            </time>
        <span itemprop='position'>#20</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I get…</p>
<pre><code class="lang-auto">src\server\model\players\PlayerHandler.java:37: illegal start of expression
    public boolean newPlayerClient(Client client1)
    ^
src\server\model\players\PlayerHandler.java:37: ';' expected
    public boolean newPlayerClient(Client client1)
                                  ^
src\server\model\players\PlayerHandler.java:37: ';' expected
    public boolean newPlayerClient(Client client1)
                                                 ^
src\server\model\players\PlayerHandler.java:58: illegal start of expression
        public void destruct() {
        ^
src\server\model\players\PlayerHandler.java:58: illegal start of expression
        public void destruct() {
               ^
src\server\model\players\PlayerHandler.java:58: ';' expected
        public void destruct() {
                            ^
src\server\model\players\PlayerHandler.java:67: illegal start of expression
        public static int getPlayerCount() {
        ^
src\server\model\players\PlayerHandler.java:67: illegal start of expression
        public static int getPlayerCount() {
               ^
src\server\model\players\PlayerHandler.java:67: ';' expected
        public static int getPlayerCount() {
                     ^
src\server\model\players\PlayerHandler.java:67: ';' expected
        public static int getPlayerCount() {
                                          ^
src\server\model\players\PlayerHandler.java:71: illegal start of expression
        public void updatePlayerNames() {
        ^
src\server\model\players\PlayerHandler.java:71: illegal start of expression
        public void updatePlayerNames() {
               ^
src\server\model\players\PlayerHandler.java:71: ';' expected
        public void updatePlayerNames() {
                                     ^
src\server\model\players\PlayerHandler.java:83: illegal start of expression
        public static boolean isPlayerOn(String playerName) {
        ^
src\server\model\players\PlayerHandler.java:83: illegal start of expression
        public static boolean isPlayerOn(String playerName) {
               ^
src\server\model\players\PlayerHandler.java:83: ';' expected
        public static boolean isPlayerOn(String playerName) {
                     ^
src\server\model\players\PlayerHandler.java:83: ')' expected
        public static boolean isPlayerOn(String playerName) {
                                               ^
src\server\model\players\PlayerHandler.java:83: illegal start of expression
        public static boolean isPlayerOn(String playerName) {
                                                          ^
src\server\model\players\PlayerHandler.java:83: ';' expected
        public static boolean isPlayerOn(String playerName) {
                                                           ^
19 errors
Press any key to continue . . .</code></pre>
<p>…when I try…</p>
<p>[quote=“StubernSnake, post:7, topic:431852”][quote author=voetbal645 link=topic=534560.msg3908237#msg3908237 date=1328442780]<br>
search for <code>if (System.currentTimeMillis() - lastMassSave </code><br>
and change the number like this</p>
<pre><code class="lang-auto"></code></pre>
<p>change the **** to 3<br>
[/quote]<br>
This will cause lag… You should make it save once someone logs out or disconnects.<br>
Tutorial :<br>
LIN:<br>
Almost Completely preventing roll-backs<br>
This is a simple fix, and thanks zstars for telling me about the shutDownHook.</p>
<p>First, in your PlayerHandler class, find this:</p>
<pre><code class="lang-auto"></code></pre>
<p>This is the constructor. Inside it, we’re going to add the shutDownHook</p>
<p><code>Runtime.getRuntime().addShutdownHook(new Thread()
                {
                        public void run()
                        {
                                for (int i = 0; i &lt; maxPlayers; i++)
                                        if(players[i] != null)
                                                ((Client)players[i]).savegame(false);
                        }
                });</code><br>
This makes it so whenever you manually close the server, it saves for all players.</p>
<p>This next one requires some work by you. Back in the client class, wherever you see disconnect = true; or the destruct method being called, add this:<br>
Code: [Select]<br>
savegame(false);<br>
This makes it so you save whenever you disconnect, whether it be from a packet timeout, the client crashing, you shutting down your computer, or whatever reason, you don’t lose your data. The only way the character files won’t save is if the server’s process is killed, which means if you end it with Task Manager, shut down your computer the wrong way, or your computer crashes.</p>
<p>Alright. That’s all I can think of at the top of my head. Note I added these to one of my old servers and just ripped them out to post here, because I was always too lazy to do it, and now the tutorial section is unlocked. If anything is wrong, let me know.<br>
<span class="bbcode-b">Credits to <span class="bbcode-u">Lin</span> for this. </span>[/quote]</p>
<p>This is what that section of my playerhandler class looks like:</p>
<pre><code class="lang-auto">public class PlayerHandler {

	
	public static Player players[] = new Player[Config.MAX_PLAYERS];
	public static String messageToAll = "";
	public static int playerCount = 0;
	public static String playersCurrentlyOn[] = new String[Config.MAX_PLAYERS];
	public static boolean updateAnnounced;
	public static boolean updateRunning;
	public static int updateSeconds;
	public static long updateStartTime;
	private boolean kickAllPlayers = false;
        public static PlayerSave save;
	

	
static {	
Runtime.getRuntime().addShutdownHook(new Thread()
                {
                        public void run()
                        {
                                for (int i = 0; i &lt; maxPlayers; i++)
                                        if(players[i] != null)
                                                ((Client)players[i]).savegame(false);
                        }
                });
    public boolean newPlayerClient(Client client1)
    {
    	int slot = -1;
    	for(int i = 1; i &lt; Config.MAX_PLAYERS; i++) {
    		if(players[i] == null || players[i].disconnected) {
    			slot = i;
    			break;
    		}
    	}</code></pre>
      </div>

      <meta itemprop='headline' content='Automatic save feature?'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>

  <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
      <span itemprop='name'><b><a rel="next" itemprop="url" href="4318524658.html?page=2">next page →</a></b></span>
  </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/automatic-save-feature/431852 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Aug 2019 14:05:20 GMT -->
</html>
