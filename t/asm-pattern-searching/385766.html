<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/asm-pattern-searching/385766 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Aug 2019 05:43:19 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>ASM Pattern Searching - Runescape - moparisthebest.com</title>
    <meta name="description" content="Hey guys, just looking to learn a bit more about client hacking and in particular starting with locating patterns in the rs client.  Been reading a few tuts and been browing over some sample code, in order to try challen&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="385766.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;ASM Pattern Searching&#39;" href="385766.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/asm-pattern-searching/385766" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/asm-pattern-searching/385766" />
<meta property="og:title" content="ASM Pattern Searching" />
<meta name="twitter:title" content="ASM Pattern Searching" />
<meta property="og:description" content="Hey guys, just looking to learn a bit more about client hacking and in particular starting with locating patterns in the rs client.  Been reading a few tuts and been browing over some sample code, in order to try challenge myself into learning something new.  One thing i noticed was that nobody does any pattern searching with ASM (just BCEL), and I was wondering if thats because of the ConstantPoolGen? does that make it impossible or is there some way to do appropriate ASM Pattern Searching?" />
<meta name="twitter:description" content="Hey guys, just looking to learn a bit more about client hacking and in particular starting with locating patterns in the rs client.  Been reading a few tuts and been browing over some sample code, in order to try challenge myself into learning something new.  One thing i noticed was that nobody does any pattern searching with ASM (just BCEL), and I was wondering if thats because of the ConstantPoolGen? does that make it impossible or is there some way to do appropriate ASM Pattern Searching?" />
<meta property="article:published_time" content="2011-03-11T08:52:49+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="385766.html">ASM Pattern Searching</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/vtw.html'><span itemprop='name'>vtw</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-03-11T08:52:49Z'>
            <time itemprop='dateModified' datetime='2016-08-01T08:04:52Z' class='post-time'>
              August 1, 2016,  8:04am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hey guys, just looking to learn a bit more about client hacking and in particular starting with locating patterns in the rs client.  Been reading a few tuts and been browing over some sample code, in order to try challenge myself into learning something new.  One thing i noticed was that nobody does any pattern searching with ASM (just BCEL), and I was wondering if thats because of the ConstantPoolGen? does that make it impossible or is there some way to do appropriate ASM Pattern Searching?</p>
      </div>

      <meta itemprop='headline' content='ASM Pattern Searching'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/frank.html'><span itemprop='name'>frank</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-03-11T08:55:44Z'>
            <time itemprop='dateModified' datetime='2016-08-01T08:04:52Z' class='post-time'>
              August 1, 2016,  8:04am
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>pattern matching would actually be easier with asm because you dont need the constantpool</p>
      </div>

      <meta itemprop='headline' content='ASM Pattern Searching'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/vtw.html'><span itemprop='name'>vtw</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-03-11T09:20:31Z'>
            <time itemprop='dateModified' datetime='2016-08-01T08:04:53Z' class='post-time'>
              August 1, 2016,  8:04am
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>would you still be able to use InstructionFinder.search(pattern) with ASM?</p>
<p>I’m trying to work out how to achieve the same functionality as the pattern searching tut ollie made, just kinda stuck where to start if I wanted to pattern match with ASM</p>
      </div>

      <meta itemprop='headline' content='ASM Pattern Searching'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Pwnd.html'><span itemprop='name'>Pwnd</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-03-16T06:46:11Z'>
            <time itemprop='dateModified' datetime='2016-08-01T08:12:26Z' class='post-time'>
              August 1, 2016,  8:12am
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>You would probably need to know a little bit about ASM first.</p>
      </div>

      <meta itemprop='headline' content='ASM Pattern Searching'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/semaphore.html'><span itemprop='name'>semaphore</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-03-16T19:48:45Z'>
            <time itemprop='dateModified' datetime='2016-08-01T08:13:03Z' class='post-time'>
              August 1, 2016,  8:13am
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>If you were going to do any kind of bytecode pattern matching in ASM you’re going to have either take a look at the <span class="bbcode-i">org.objectweb.asm.tree.analysis</span> package and roll something pretty custom. Or you’d have to somehow implement your own pattern matcher realizing that ASM operates under the visitor pattern which is somewhat nontrivial to handle state properly; especially in a multithreaded environment.</p>
<p>I don’t know what your requirements are, but if you wanted to do something like what I would do you would ‘compile’ all of your patterns into a custom tree. Then, as you encounter various bytecode operations you would move down the nodes of the tree (if the current operator fit the expression for the current node) eventually to the point where you have reached a ‘match’ bucket. This bucket would likely be a handler of some sort that would do something based on your current context.</p>
<p>It sounds a lot more complicated than it really is. Basically if your tree consisted of a single set of 2 nodes, as a trivial example:</p>
<p>LoadInstruction -&gt; IFInstruction -&gt; Handler</p>
<p>As you ‘visited’ the code for each method in each class, you would check to see if you are ‘in’ the tree. So if the first instruction you encountered in the bytecode was an ILOAD 0, you would set some flag that indicates you are in a pattern and update the pointer to where you are in that pattern. Then you’d check to see if that node has a Handler. If not, go to the next instruction. If that next instruction was an IFEQ, you would do the same as before, update the pointer and make sure you are still in a search pattern. Then you’d look and see that you have a handler for that ‘pattern’ and execute it, passing in your custom context (I’m not going explain how to create/maintain/roll your own context. That is for you). After the handler completes, you would start the process over with the pointer at root and the flag indicating in a pattern set to false.</p>
<p>As you can see, the tree can become quite large but it also can be efficient especially if many patterns use similar instructions. You can set your ‘isMatched’ function to take into account a bunch of different details of the operation currently in scope. It’s fairly extensible and should work for what you want to do with ASM.</p>
<p>Good luck.</p>
      </div>

      <meta itemprop='headline' content='ASM Pattern Searching'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Jython.html'><span itemprop='name'>Jython</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-03-17T00:17:00Z'>
            <time itemprop='dateModified' datetime='2016-08-01T08:13:37Z' class='post-time'>
              August 1, 2016,  8:13am
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>for implementing the “tree” use cons</p>
      </div>

      <meta itemprop='headline' content='ASM Pattern Searching'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/asm-pattern-searching/385766 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Aug 2019 05:43:20 GMT -->
</html>
