<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>New host list class - PI</title>
    <link>https://forum.moparisthebest.com/t/new-host-list-class-pi/521247</link>
    <description>decided to re-do this, as the old host list class is dutty as fuarkk.

HostList.java:
[code]package neitiznot.net;

import java.net.InetSocketAddress;
import java.util.HashMap;
import java.util.LinkedList;
import java.util.List;
import java.util.Map;

import neitiznot.Config;
import neitiznot.model.players.Player;
import neitiznot.util.Connection;
import neitiznot.util.IndexManager;

import org.apache.mina.common.IoSession;

/**
 * 
 * @author Rhubarb/Int Bauk
 * @author Faris
 *
 */
public class HostList {
	
	Player player;
	
	/**
	 * Holds the player repository in a hashmap: string, integer.
	 */
	public static Map&lt;String, Integer&gt; playerRepository = new HashMap&lt;String, Integer&gt;();
	
	/**
	 * Queues a new player, awaiting logout.
	 */
	public static List&lt;IoSession&gt; registryQueue = new LinkedList&lt;IoSession&gt;();
	
	/**
	 * Returns the hostlist class.
	 */
	public static final HostList list = new HostList();
	public static HostList getSingleton() {
		return list;
	}
	
	/**
	 * Registers a new player.
	 * @param session
	 * @return true
	 */
	public synchronized boolean register(IoSession session) {
		String address = ((InetSocketAddress) session.getRemoteAddress()).getAddress().getHostAddress();
		Integer repository = playerRepository.get(address);
		if(playerRepository.size() &gt;= Config.MAX_PLAYERS) {
			return false;
		}
		if(repository &gt; Config.IPS_ALLOWED || Connection.isIpBanned(address)) {
			return false;
		} else {
			Integer pIndex = IndexManager.getIndex();
			player.setIndex(pIndex);
			registryQueue.add(session);
			return true;
		}
	}
	
	/**
	 * De-registers a player.
	 * @param session
	 */
	public synchronized void deregister(IoSession session) {
		if (session == null) {
			return;
		}
		if(session.getAttribute(&quot;inList&quot;) != Boolean.TRUE) {
			return;
		}
		registryQueue.add(session);
	}

}[/code]

destruct void:
[code]	public void destruct() {
			HostList.getSingleton().deregister(session);
			disconnected = true;
			session.close();
			session = null;
			inStream = null;
			outStream = null;
			isActive = false;
			buffer = null;
			super.destruct();
	}[/code]

n&#39;joy</description>
    
    <lastBuildDate>Mon, 17 Jun 2013 10:35:10 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/new-host-list-class-pi/521247.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>New host list class - PI</title>
        <dc:creator><![CDATA[@Int_Bauk Int Bauk]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/int_bauk">@Int_Bauk</a> wrote:</p>
          <blockquote>
              <p>[quote=“Rodgerwilco, post:5, topic:521247”]    /**<br>
* De-registers a player.<br>
* <a class="mention" href="/u/param">@param</a> session<br>
*/<br>
public synchronized void <span class="bbcode-b">deregister</span>(IoSession session) {<br>
if (session == null) {<br>
return;<br>
}<br>
if(session.getAttribute(“inList”) != Boolean.TRUE) {<br>
return;<br>
}<br>
<span class="bbcode-b">  registryQueue.add(session);</span><br>
}[/quote]</p>
<p>after i realised what i done, i changed it. that’s fine, but it’s the register method that needs changing.</p>
<p>registryQueue.add(session) &gt; playerRepository.put(arg1, arg2) is needed</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/new-host-list-class-pi/521247/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/new-host-list-class-pi/521247/6</link>
        <pubDate>Mon, 17 Jun 2013 10:35:10 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-521247-6</guid>
        <source url="https://forum.moparisthebest.com/t/new-host-list-class-pi/521247.rss">New host list class - PI</source>
      </item>
      <item>
        <title>New host list class - PI</title>
        <dc:creator><![CDATA[@Rodgerwilco Rodgerwilco]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/rodgerwilco">@Rodgerwilco</a> wrote:</p>
          <blockquote>
              <pre><code>/**
     * De-registers a player.
     * @param session
     */
    public synchronized void [b]deregister[/b](IoSession session) {
            if (session == null) {
                    return;
            }
            if(session.getAttribute("inList") != Boolean.TRUE) {
                    return;
            }
          [b]  registryQueue.add(session);[/b]
    }</code></pre>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/new-host-list-class-pi/521247/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/new-host-list-class-pi/521247/5</link>
        <pubDate>Mon, 17 Jun 2013 00:52:41 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-521247-5</guid>
        <source url="https://forum.moparisthebest.com/t/new-host-list-class-pi/521247.rss">New host list class - PI</source>
      </item>
      <item>
        <title>New host list class - PI</title>
        <dc:creator><![CDATA[@ExtremeX-Scape Ryley]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/extremex-scape">@ExtremeX-Scape</a> wrote:</p>
          <blockquote>
              <p>this is shitty and not thread-safe use the IoHandler found within MINA</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/new-host-list-class-pi/521247/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/new-host-list-class-pi/521247/4</link>
        <pubDate>Sun, 16 Jun 2013 10:30:36 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-521247-4</guid>
        <source url="https://forum.moparisthebest.com/t/new-host-list-class-pi/521247.rss">New host list class - PI</source>
      </item>
      <item>
        <title>New host list class - PI</title>
        <dc:creator><![CDATA[@Int_Bauk Int Bauk]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/int_bauk">@Int_Bauk</a> wrote:</p>
          <blockquote>
              <blockquote>
<p>??? :rolleyes:</p>
</blockquote>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/new-host-list-class-pi/521247/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/new-host-list-class-pi/521247/3</link>
        <pubDate>Tue, 11 Jun 2013 14:27:31 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-521247-3</guid>
        <source url="https://forum.moparisthebest.com/t/new-host-list-class-pi/521247.rss">New host list class - PI</source>
      </item>
      <item>
        <title>New host list class - PI</title>
        <dc:creator><![CDATA[@sinisoul sini]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sinisoul">@sinisoul</a> wrote:</p>
          <blockquote>
              <pre><code class="lang-auto">HostList.getSingleton().deregister(session);</code></pre>
<p>No. NO. <span class="bbcode-b">NO</span>. no</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/new-host-list-class-pi/521247/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/new-host-list-class-pi/521247/2</link>
        <pubDate>Tue, 11 Jun 2013 03:43:34 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-521247-2</guid>
        <source url="https://forum.moparisthebest.com/t/new-host-list-class-pi/521247.rss">New host list class - PI</source>
      </item>
      <item>
        <title>New host list class - PI</title>
        <dc:creator><![CDATA[@Int_Bauk Int Bauk]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/int_bauk">@Int_Bauk</a> wrote:</p>
          <blockquote>
              <p>decided to re-do this, as the old host list class is dutty as fuarkk.</p>
<p>HostList.java:</p>
<p>[code]package <a href="http://neitiznot.net" rel="nofollow noopener">neitiznot.net</a>;</p>
<p>import java.net.InetSocketAddress;<br>
import java.util.HashMap;<br>
import java.util.LinkedList;<br>
import java.util.List;<br>
import java.util.Map;</p>
<p>import neitiznot.Config;<br>
import neitiznot.model.players.Player;<br>
import neitiznot.util.Connection;<br>
import neitiznot.util.IndexManager;</p>
<p>import org.apache.mina.common.IoSession;</p>
<p>/**<br>
*</p>
<ul>
<li>
<span class="mention">@author</span> Rhubarb/Int Bauk</li>
<li>
<span class="mention">@author</span> Faris</li>
<li>
</li>
</ul>
<p>*/<br>
public class HostList {</p>
<pre><code>Player player;

/**
 * Holds the player repository in a hashmap: string, integer.
 */
public static Map&lt;String, Integer&gt; playerRepository = new HashMap&lt;String, Integer&gt;();

/**
 * Queues a new player, awaiting logout.
 */
public static List&lt;IoSession&gt; registryQueue = new LinkedList&lt;IoSession&gt;();

/**
 * Returns the hostlist class.
 */
public static final HostList list = new HostList();
public static HostList getSingleton() {
	return list;
}

/**
 * Registers a new player.
 * @param session
 * @return true
 */
public synchronized boolean register(IoSession session) {
	String address = ((InetSocketAddress) session.getRemoteAddress()).getAddress().getHostAddress();
	Integer repository = playerRepository.get(address);
	if(playerRepository.size() &gt;= Config.MAX_PLAYERS) {
		return false;
	}
	if(repository &gt; Config.IPS_ALLOWED || Connection.isIpBanned(address)) {
		return false;
	} else {
		Integer pIndex = IndexManager.getIndex();
		player.setIndex(pIndex);
		registryQueue.add(session);
		return true;
	}
}

/**
 * De-registers a player.
 * @param session
 */
public synchronized void deregister(IoSession session) {
	if (session == null) {
		return;
	}
	if(session.getAttribute("inList") != Boolean.TRUE) {
		return;
	}
	registryQueue.add(session);
}
</code></pre>
<p>}[/code]</p>
<p>destruct void:</p>
<p><code>	public void destruct() {
			HostList.getSingleton().deregister(session);
			disconnected = true;
			session.close();
			session = null;
			inStream = null;
			outStream = null;
			isActive = false;
			buffer = null;
			super.destruct();
	}</code></p>
<p>n’joy</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/new-host-list-class-pi/521247/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/new-host-list-class-pi/521247/1</link>
        <pubDate>Mon, 10 Jun 2013 17:41:04 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-521247-1</guid>
        <source url="https://forum.moparisthebest.com/t/new-host-list-class-pi/521247.rss">New host list class - PI</source>
      </item>
  </channel>
</rss>
