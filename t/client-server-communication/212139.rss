<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Client-Server communication</title>
    <link>https://forum.moparisthebest.com/t/client-server-communication/212139</link>
    <description>Hi, :)

For something I&#39;m making, I need the best way to send data over from client to server and server to client. The data are just strings, but It&#39;s a lot at once/in a very short period of time. For instance, within 200 ms, I want to send/receive 3 different packets. I currently use BufferedReader (for strings), Printwriter (for strings), InputStream (for ints), and OutputStream (for ints). This works... fine, but sometimes I get complications, like that method a() (client) receives the packet meant for method b(). This happens after it run 5-10 minutes. After I got that error a few times.. I get the OutOfMemory error... java heapspace, it says.

Is there any other way to write/read to server/client, or I just need to adjust my code a little, and don&#39;t make the process so heavy? It is essential that it happens fast (the writing/reading). (For the writing of different packets I use several classes/threads)

Thanks in advance, and... please, don&#39;t be an asshole or something, do that in an other topic.

~Supamagier

P.S.: I will not post my source code

EDIT: I think it&#39;s just too heavy.. :\ Let&#39;s try in reducing that :S
        Anyone knows how to minimize your memory-use</description>
    
    <lastBuildDate>Sun, 15 Jun 2008 19:32:27 +0000</lastBuildDate>
    <category>General Programming</category>
    <atom:link href="https://forum.moparisthebest.com/t/client-server-communication/212139.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Client-Server communication</title>
        <dc:creator><![CDATA[@supamagier supamagier]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/supamagier">@supamagier</a> wrote:</p>
          <blockquote>
              <p><span class="bbcode-s">How do you use setColor(int)<br>
It says something about 3 times 8 bits… that doesn’t really help me out. Is there a formula or something to convert ‘100,231,20’ (rgb) to that int? Or any other combination ofc.</span><br>
nvm</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/client-server-communication/212139/37">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/client-server-communication/212139/37</link>
        <pubDate>Sun, 15 Jun 2008 19:32:27 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-212139-37</guid>
        <source url="https://forum.moparisthebest.com/t/client-server-communication/212139.rss">Client-Server communication</source>
      </item>
      <item>
        <title>Client-Server communication</title>
        <dc:creator><![CDATA[@Yz85Racer Yz85Racer]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/yz85racer">@Yz85Racer</a> wrote:</p>
          <blockquote>
              <p>[quote=“pizza pie, post:31, topic:212139”][quote author=BAsh link=topic=279435.msg2277286#msg2277286 date=1213510936]<br>
I can’t read it because doing so would cause me to rip my eyeballs out then if I’m not already dead, start slitting my wrists with the intent of actually dying as opposed to causing pain.<br>
[/quote]Recent studies show that people who express themselves like that are more likely to commit suicide than a dog with no legs.[/quote]<br>
Recent studies show that you were an accident.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/client-server-communication/212139/36">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/client-server-communication/212139/36</link>
        <pubDate>Sun, 15 Jun 2008 15:48:49 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-212139-36</guid>
        <source url="https://forum.moparisthebest.com/t/client-server-communication/212139.rss">Client-Server communication</source>
      </item>
      <item>
        <title>Client-Server communication</title>
        <dc:creator><![CDATA[@supamagier supamagier]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/supamagier">@supamagier</a> wrote:</p>
          <blockquote>
              <p>Okay… I’ll do my best, but two things:</p>
<ol>
<li>Wtf is the bad String parsing you’re talking about… I can’t fix if I don’t know what’s broken.</li>
<li>I can do the colors with rgb, but the statements are needed anyways.[br][br][size=1]Posted on: 15 June 2008, 11:00:46[/size][hr]Okay, I’m currently trying to use regex to split the strings, and get the packet id etc. i’ll rewrite my code that way, and see if it helped. <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=6" title=":slight_smile:" class="emoji" alt=":slight_smile:">
</li>
</ol>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/client-server-communication/212139/35">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/client-server-communication/212139/35</link>
        <pubDate>Sun, 15 Jun 2008 13:10:33 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-212139-35</guid>
        <source url="https://forum.moparisthebest.com/t/client-server-communication/212139.rss">Client-Server communication</source>
      </item>
      <item>
        <title>Client-Server communication</title>
        <dc:creator><![CDATA[@pizza_pie pizza pie]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/pizza_pie">@pizza_pie</a> wrote:</p>
          <blockquote>
              <p>[quote=“Pwnd, post:33, topic:212139”][quote author=pizza pie link=topic=279435.msg2277326#msg2277326 date=1213512327]</p>
<p>[quote author=BAsh link=topic=279435.msg2277286#msg2277286 date=1213510936]<br>
I can’t read it because doing so would cause me to rip my eyeballs out then if I’m not already dead, start slitting my wrists with the intent of actually dying as opposed to causing pain.<br>
[/quote]Recent studies show that people who express themselves like that are more likely to commit suicide than a dog with no legs.<br>
[/quote]Well, that makes sense because a dog with no legs … probably wouldn’t commit suicide anyways.[/quote]A dog with no legs will find a way…</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/client-server-communication/212139/34">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/client-server-communication/212139/34</link>
        <pubDate>Sun, 15 Jun 2008 11:13:46 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-212139-34</guid>
        <source url="https://forum.moparisthebest.com/t/client-server-communication/212139.rss">Client-Server communication</source>
      </item>
      <item>
        <title>Client-Server communication</title>
        <dc:creator><![CDATA[@Pwnd Pwnd]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/pwnd">@Pwnd</a> wrote:</p>
          <blockquote>
              <p>[quote=“pizza pie, post:31, topic:212139”][quote author=BAsh link=topic=279435.msg2277286#msg2277286 date=1213510936]<br>
I can’t read it because doing so would cause me to rip my eyeballs out then if I’m not already dead, start slitting my wrists with the intent of actually dying as opposed to causing pain.<br>
[/quote]Recent studies show that people who express themselves like that are more likely to commit suicide than a dog with no legs.[/quote]Well, that makes sense because a dog with no legs … probably wouldn’t commit suicide anyways.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/client-server-communication/212139/33">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/client-server-communication/212139/33</link>
        <pubDate>Sun, 15 Jun 2008 09:49:44 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-212139-33</guid>
        <source url="https://forum.moparisthebest.com/t/client-server-communication/212139.rss">Client-Server communication</source>
      </item>
      <item>
        <title>Client-Server communication</title>
        <dc:creator><![CDATA[@TeleNubby TeleNubby]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/telenubby">@TeleNubby</a> wrote:</p>
          <blockquote>
              <p>[quote=“supamagier, post:27, topic:212139”]You’re talking to me? If yes, think again, they never really said a thing about how to clean up and optimize my code. Except for TeleNubby, but I can’t use that.[/quote]Why the hell cant you use that? Seriously. By the way, a tab isnt two spaces (or at least shouldn’t be.)</p>
<p>Just rewrite it all, stop the bad parsing on the Strings to get the color value, and use <a href="http://java.sun.com/j2se/1.4.2/docs/api/java/awt/Color.html#Color(int)" rel="nofollow noopener">http://java.sun.com/j2se/1.4.2/docs/api/java/awt/Color.html#Color(int)</a>. Then read on the Java code &amp; naming conventions, found at <a href="http://java.sun.com/docs/codeconv/" rel="nofollow noopener">http://java.sun.com/docs/codeconv/</a> , and rewrite it AGAIN following those guidelines. This will help us understand what you are doing and will allow us to read it, thus allowing us to help you out. Otherwise, we’re not going to bother.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/client-server-communication/212139/32">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/client-server-communication/212139/32</link>
        <pubDate>Sun, 15 Jun 2008 07:27:13 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-212139-32</guid>
        <source url="https://forum.moparisthebest.com/t/client-server-communication/212139.rss">Client-Server communication</source>
      </item>
      <item>
        <title>Client-Server communication</title>
        <dc:creator><![CDATA[@pizza_pie pizza pie]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/pizza_pie">@pizza_pie</a> wrote:</p>
          <blockquote>
              <p>[quote=“BAsh, post:30, topic:212139”]I can’t read it because doing so would cause me to rip my eyeballs out then if I’m not already dead, start slitting my wrists with the intent of actually dying as opposed to causing pain.[/quote]Recent studies show that people who express themselves like that are more likely to commit suicide than a dog with no legs.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/client-server-communication/212139/31">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/client-server-communication/212139/31</link>
        <pubDate>Sun, 15 Jun 2008 06:45:27 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-212139-31</guid>
        <source url="https://forum.moparisthebest.com/t/client-server-communication/212139.rss">Client-Server communication</source>
      </item>
      <item>
        <title>Client-Server communication</title>
        <dc:creator><![CDATA[@BAsh BAsh]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/bash">@BAsh</a> wrote:</p>
          <blockquote>
              <p>I can’t read it because doing so would cause me to rip my eyeballs out then if I’m not already dead, start slitting my wrists with the intent of actually dying as opposed to causing pain.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/client-server-communication/212139/30">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/client-server-communication/212139/30</link>
        <pubDate>Sun, 15 Jun 2008 06:22:16 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-212139-30</guid>
        <source url="https://forum.moparisthebest.com/t/client-server-communication/212139.rss">Client-Server communication</source>
      </item>
      <item>
        <title>Client-Server communication</title>
        <dc:creator><![CDATA[@Yz85Racer Yz85Racer]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/yz85racer">@Yz85Racer</a> wrote:</p>
          <blockquote>
              <aside class="quote no-group" data-post="20" data-topic="212139">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/unhandled/40/5_6bca9977b612b7aeef77ba1ec1cd67b3.png" class="avatar"> Unhandled:</div>
<blockquote>
<p>Is it just me, or does that code look very inefficient and ambiguous?</p>
</blockquote>
</aside>
<p>I would be satisfied with “it looks like shit.”</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/client-server-communication/212139/29">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/client-server-communication/212139/29</link>
        <pubDate>Sun, 15 Jun 2008 05:24:35 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-212139-29</guid>
        <source url="https://forum.moparisthebest.com/t/client-server-communication/212139.rss">Client-Server communication</source>
      </item>
      <item>
        <title>Client-Server communication</title>
        <dc:creator><![CDATA[@pizza_pie pizza pie]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/pizza_pie">@pizza_pie</a> wrote:</p>
          <blockquote>
              <p>[quote=“Krichevskoy, post:13, topic:212139”][quote author=supamagier link=topic=279435.msg2274518#msg2274518 date=1213401205]<br>
I have my reasons.</p>
<p>Anyways, the dataout and inputstream are better than bufferedreader/printwriter/inputstream/outputstream?<br>
[/quote]</p>
<p>Yes. They’re less trouble <span class="bbcode-i">and</span> faster, if I remember correctly.[/quote][quote=“Pwnd, post:15, topic:212139”]Try using -Xmx256m as an argument to the JRE in your command line.</p>
<pre><code class="lang-auto">java -Xmx256m classname ... ... ...</code></pre>
<p>If that doesn’t produce different results, I would take a look at your framework again :/[/quote][quote=“TeleNubby, post:21, topic:212139”][quote author=Unhandled link=topic=279435.msg2276737#msg2276737 date=1213487306]<br>
Is it just me, or does that code look very inefficient and ambiguous?<br>
[/quote]Agreed.</p>
<p><code>
      String o = all[0];
      String n= all[1];
      String s1 = all[2];
      String s2 = all[3];
      String e1 = all[4];
      String e2 = all[5];
      pO = M.split(o,"|",false);
      pN = M.split(n,"|",false);
      pS1 = M.split(s1,"|",false);
      pS2 = M.split(s2,"|",false);
      pE1 = M.split(e1,"|",false);
      pE2 = M.split(e2,"|",false);
      C.allPO = pO;
      C.allPN = pN;
</code>Yeh. That is the most efficient and little-processor-using snippet I have seen in my life. (No.)</p>
<p>Anyways, why are you setting color values by text? This makes using the Color class <span class="bbcode-b">VERY</span> limited, and is plain pointless. Especially with all of the parsing you are doing. All you  have to do is write the RGB value of the color, send it using dataOut.writeInt(int), and then read it accordingly. Then just set the value of the message’s color right away with no need for parsing.</p>
<p>Not to mention, there is no real need to flush() after every write().</p>
<p>And lastly, the heap space error is probably thrown because of all of the looping you are doing and the split()'s, etc. You are parsing very inefficiently, and somewhere in there the loop is bugged and most likely never ends.</p>
<p>My suggestion is to simply rewrite EVERYTHING you’ve done. And try using TABs instead of a few spaces for indentation purposes. It helps my eyes a lot more.[/quote][quote=“frank_, post:22, topic:212139”]that code is crap, bad naming, bad almost everything<br>
you are probably running out of heaps space because of your text area</p>
<p>theres nothing really wrong with a text based protocol, provided you implement it properly[/quote]<br>
just a few</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/client-server-communication/212139/28">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/client-server-communication/212139/28</link>
        <pubDate>Sun, 15 Jun 2008 04:25:00 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-212139-28</guid>
        <source url="https://forum.moparisthebest.com/t/client-server-communication/212139.rss">Client-Server communication</source>
      </item>
      <item>
        <title>Client-Server communication</title>
        <dc:creator><![CDATA[@supamagier supamagier]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/supamagier">@supamagier</a> wrote:</p>
          <blockquote>
              <p>You’re talking to me? If yes, think again, they never really said a thing about how to clean up and optimize my code. Except for TeleNubby, but I can’t use that.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/client-server-communication/212139/27">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/client-server-communication/212139/27</link>
        <pubDate>Sun, 15 Jun 2008 03:53:58 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-212139-27</guid>
        <source url="https://forum.moparisthebest.com/t/client-server-communication/212139.rss">Client-Server communication</source>
      </item>
      <item>
        <title>Client-Server communication</title>
        <dc:creator><![CDATA[@pizza_pie pizza pie]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/pizza_pie">@pizza_pie</a> wrote:</p>
          <blockquote>
              <p>Um… if you read around theres plenty of what you can do.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/client-server-communication/212139/26">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/client-server-communication/212139/26</link>
        <pubDate>Sun, 15 Jun 2008 03:34:32 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-212139-26</guid>
        <source url="https://forum.moparisthebest.com/t/client-server-communication/212139.rss">Client-Server communication</source>
      </item>
      <item>
        <title>Client-Server communication</title>
        <dc:creator><![CDATA[@supamagier supamagier]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/supamagier">@supamagier</a> wrote:</p>
          <blockquote>
              <p>You can read it… and if you can’t, what you can’t read?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/client-server-communication/212139/25">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/client-server-communication/212139/25</link>
        <pubDate>Sun, 15 Jun 2008 03:18:17 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-212139-25</guid>
        <source url="https://forum.moparisthebest.com/t/client-server-communication/212139.rss">Client-Server communication</source>
      </item>
      <item>
        <title>Client-Server communication</title>
        <dc:creator><![CDATA[@frank frank_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/frank">@frank</a> wrote:</p>
          <blockquote>
              <p>we cant help you if we cant read it</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/client-server-communication/212139/24">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/client-server-communication/212139/24</link>
        <pubDate>Sun, 15 Jun 2008 02:45:13 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-212139-24</guid>
        <source url="https://forum.moparisthebest.com/t/client-server-communication/212139.rss">Client-Server communication</source>
      </item>
      <item>
        <title>Client-Server communication</title>
        <dc:creator><![CDATA[@supamagier supamagier]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/supamagier">@supamagier</a> wrote:</p>
          <blockquote>
              <p>[quote=“Pwnd, post:19, topic:212139”][quote author=TeleNubby link=topic=279435.msg2276458#msg2276458 date=1213476862]</p>
<p>[quote author=Pwnd link=topic=279435.msg2276031#msg2276031 date=1213461303]<br>
Try using -Xmx256m as an argument to the JRE in your command line.</p>
<pre><code class="lang-auto">java -Xmx256m classname ... ... ...</code></pre>
<p>If that doesn’t produce different results, I would take a look at your framework again <img src="https://forum.moparisthebest.com/images/emoji/twitter/confused.png?v=6" title=":confused:" class="emoji" alt=":confused:"><br>
[/quote]Tbh that’s not a very good solution to a heap space problem. He shouldn’t be getting one in the first place unless his computer has, what, 128mb ram (or anything low)?</p>
<p>If you want us to help you with the Java heap space error, you’re going to have to show us the line that causes it and a few lines above and below it (radius of at least 2). My guess is you’re using a loop to read, and you’ve set <span class="bbcode-i">that</span> up wrong.<br>
[/quote]Well, doesn’t the JRE have a default value for the heap space?  It wouldn’t be dependent on how much RAM someone has (Unless, during installation, Java takes care of that and adjusts the default value accordingly).</p>
<p>And why are you using an OOP language… Un-OPP-ly, supa?[/quote]<br>
Well, how would you do that?</p>
<p>[quote=“TeleNubby, post:21, topic:212139”][quote author=Unhandled link=topic=279435.msg2276737#msg2276737 date=1213487306]<br>
Is it just me, or does that code look very inefficient and ambiguous?<br>
[/quote]Agreed.</p>
<p><code>
      String o = all[0];
      String n= all[1];
      String s1 = all[2];
      String s2 = all[3];
      String e1 = all[4];
      String e2 = all[5];
      pO = M.split(o,"|",false);
      pN = M.split(n,"|",false);
      pS1 = M.split(s1,"|",false);
      pS2 = M.split(s2,"|",false);
      pE1 = M.split(e1,"|",false);
      pE2 = M.split(e2,"|",false);
      C.allPO = pO;
      C.allPN = pN;
</code>Yeh. That is the most efficient and little-processor-using snippet I have seen in my life. (No.)</p>
<p>Anyways, why are you setting color values by text? This makes using the Color class <span class="bbcode-b">VERY</span> limited, and is plain pointless. Especially with all of the parsing you are doing. All you  have to do is write the RGB value of the color, send it using dataOut.writeInt(int), and then read it accordingly. Then just set the value of the message’s color right away with no need for parsing.</p>
<p>Not to mention, there is no real need to flush() after every write().</p>
<p>And lastly, the heap space error is probably thrown because of all of the looping you are doing and the split()'s, etc. You are parsing very inefficiently, and somewhere in there the loop is bugged and most likely never ends.</p>
<p>My suggestion is to simply rewrite EVERYTHING you’ve done. And try using TABs instead of a few spaces for indentation purposes. It helps my eyes a lot more.[/quote]<br>
About the colors: it sends the string like that, and that’s better than using the rgb value, in my case, or is there something like a getRGB() method?<br>
looping: Why I am parsing inefficiently?<br>
tabs: My tabs are 2 spaces.</p>
<p>[quote=“frank_, post:22, topic:212139”]that code is crap, bad naming, bad almost everything<br>
you are probably running out of heaps space because of your text area</p>
<p>theres nothing really wrong with a text based protocol, provided you implement it properly[/quote]<br>
bad naming, I renamed some vars be4 I posted it, the naming is fine, believe me.</p>
<p><a class="mention" href="/u/all">@all</a>: Instead of just saying my code is crap, offer some solutions, please. That would really help me, and with a few examples I can rewrite the rest myself, the efficient way.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/client-server-communication/212139/23">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/client-server-communication/212139/23</link>
        <pubDate>Sun, 15 Jun 2008 02:32:01 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-212139-23</guid>
        <source url="https://forum.moparisthebest.com/t/client-server-communication/212139.rss">Client-Server communication</source>
      </item>
      <item>
        <title>Client-Server communication</title>
        <dc:creator><![CDATA[@frank frank_]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/frank">@frank</a> wrote:</p>
          <blockquote>
              <p>that code is crap, bad naming, bad almost everything<br>
you are probably running out of heaps space because of your text area</p>
<p>theres nothing really wrong with a text based protocol, provided you implement it properly</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/client-server-communication/212139/22">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/client-server-communication/212139/22</link>
        <pubDate>Sun, 15 Jun 2008 00:38:41 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-212139-22</guid>
        <source url="https://forum.moparisthebest.com/t/client-server-communication/212139.rss">Client-Server communication</source>
      </item>
      <item>
        <title>Client-Server communication</title>
        <dc:creator><![CDATA[@TeleNubby TeleNubby]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/telenubby">@TeleNubby</a> wrote:</p>
          <blockquote>
              <p>[quote=“Unhandled, post:20, topic:212139”]Is it just me, or does that code look very inefficient and ambiguous?[/quote]Agreed.</p>
<p><code>
      String o = all[0];
      String n= all[1];
      String s1 = all[2];
      String s2 = all[3];
      String e1 = all[4];
      String e2 = all[5];
      pO = M.split(o,"|",false);
      pN = M.split(n,"|",false);
      pS1 = M.split(s1,"|",false);
      pS2 = M.split(s2,"|",false);
      pE1 = M.split(e1,"|",false);
      pE2 = M.split(e2,"|",false);
      C.allPO = pO;
      C.allPN = pN;
</code>Yeh. That is the most efficient and little-processor-using snippet I have seen in my life. (No.)</p>
<p>Anyways, why are you setting color values by text? This makes using the Color class <span class="bbcode-b">VERY</span> limited, and is plain pointless. Especially with all of the parsing you are doing. All you  have to do is write the RGB value of the color, send it using dataOut.writeInt(int), and then read it accordingly. Then just set the value of the message’s color right away with no need for parsing.</p>
<p>Not to mention, there is no real need to flush() after every write().</p>
<p>And lastly, the heap space error is probably thrown because of all of the looping you are doing and the split()'s, etc. You are parsing very inefficiently, and somewhere in there the loop is bugged and most likely never ends.</p>
<p>My suggestion is to simply rewrite EVERYTHING you’ve done. And try using TABs instead of a few spaces for indentation purposes. It helps my eyes a lot more.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/client-server-communication/212139/21">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/client-server-communication/212139/21</link>
        <pubDate>Sun, 15 Jun 2008 00:04:24 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-212139-21</guid>
        <source url="https://forum.moparisthebest.com/t/client-server-communication/212139.rss">Client-Server communication</source>
      </item>
      <item>
        <title>Client-Server communication</title>
        <dc:creator><![CDATA[@Unhandled Unhandled]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/unhandled">@Unhandled</a> wrote:</p>
          <blockquote>
              <p>Is it just me, or does that code look very inefficient and ambiguous?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/client-server-communication/212139/20">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/client-server-communication/212139/20</link>
        <pubDate>Sat, 14 Jun 2008 23:48:26 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-212139-20</guid>
        <source url="https://forum.moparisthebest.com/t/client-server-communication/212139.rss">Client-Server communication</source>
      </item>
      <item>
        <title>Client-Server communication</title>
        <dc:creator><![CDATA[@Pwnd Pwnd]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/pwnd">@Pwnd</a> wrote:</p>
          <blockquote>
              <p>[quote=“TeleNubby, post:16, topic:212139”][quote author=Pwnd link=topic=279435.msg2276031#msg2276031 date=1213461303]<br>
Try using -Xmx256m as an argument to the JRE in your command line.</p>
<pre><code class="lang-auto">java -Xmx256m classname ... ... ...</code></pre>
<p>If that doesn’t produce different results, I would take a look at your framework again <img src="https://forum.moparisthebest.com/images/emoji/twitter/confused.png?v=6" title=":confused:" class="emoji" alt=":confused:"><br>
[/quote]Tbh that’s not a very good solution to a heap space problem. He shouldn’t be getting one in the first place unless his computer has, what, 128mb ram (or anything low)?</p>
<p>If you want us to help you with the Java heap space error, you’re going to have to show us the line that causes it and a few lines above and below it (radius of at least 2). My guess is you’re using a loop to read, and you’ve set <span class="bbcode-i">that</span> up wrong.[/quote]Well, doesn’t the JRE have a default value for the heap space?  It wouldn’t be dependent on how much RAM someone has (Unless, during installation, Java takes care of that and adjusts the default value accordingly).</p>
<p>And why are you using an OOP language… Un-OPP-ly, supa?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/client-server-communication/212139/19">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/client-server-communication/212139/19</link>
        <pubDate>Sat, 14 Jun 2008 23:35:11 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-212139-19</guid>
        <source url="https://forum.moparisthebest.com/t/client-server-communication/212139.rss">Client-Server communication</source>
      </item>
      <item>
        <title>Client-Server communication</title>
        <dc:creator><![CDATA[@Cheese_Police c|p]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/cheese_police">@Cheese_Police</a> wrote:</p>
          <blockquote>
              <p>[quote=“frank_, post:2, topic:212139”]…what</p>
<p>it sounds liek your problem is that you arent parsing the data correctly, or you have concurrency issues[/quote]</p>
<p>sounds to me like hes a fucking retard for using a text protocol</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/client-server-communication/212139/18">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/client-server-communication/212139/18</link>
        <pubDate>Sat, 14 Jun 2008 23:11:53 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-212139-18</guid>
        <source url="https://forum.moparisthebest.com/t/client-server-communication/212139.rss">Client-Server communication</source>
      </item>
      <item>
        <title>Client-Server communication</title>
        <dc:creator><![CDATA[@supamagier supamagier]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/supamagier">@supamagier</a> wrote:</p>
          <blockquote>
              <p>My pc has 2Gb RAM.</p>
<p>Okay, I’ll post some pieces of my code.</p>
<p>class 1:</p>
<pre><code class="lang-auto">
public void run() { //The run method
  while (true) {
    try {
      doAThing(); 
    }
    catch (IOException ioe) {
      M.echo("ERROR with doAThing(): "+ioe);
    }     
    try {
      sleep(cycletime); //cycletime = 200
    }
    catch (InterruptedException ie) {
      M.echo("ERROR sleeping: "+ie);
    }
  }
}

private void doAThing() throws IOException {
    dout.writeInt(5); //DataOutputStream
    dout.flush();
    String[] all;
    String allA;
    allA = din.readUTF(); //DataInputStream
    all = M.split(allA,"@",false);
    try {
      String o = all[0];
      String n= all[1];
      String s1 = all[2];
      String s2 = all[3];
      String e1 = all[4];
      String e2 = all[5];
      pO = M.split(o,"|",false);
      pN = M.split(n,"|",false);
      pS1 = M.split(s1,"|",false);
      pS2 = M.split(s2,"|",false);
      pE1 = M.split(e1,"|",false);
      pE2 = M.split(e2,"|",false);
      C.allPO = pO;
      C.allPN = pN;
    }
    catch (Exception e) {
      M.echo("Exception occured int doAThing(): "+e);
      // Do nothing
    }
  }  
}</code></pre>
<p>class 2:</p>
<pre><code class="lang-auto">public void run() { //The run method
  while (true) {
    try {
      doAThing(); 
    }
    catch (IOException ioe) {
      M.echo("ERROR with doAThing(): "+ioe);
    }     
    try {
      sleep(cycletime); //cycletime = 200
    }
    catch (InterruptedException ie) {
      M.echo("ERROR sleeping: "+ie);
    }
  }
}

private void doAThing() throws IOException {
    dout.writeInt(7);
    dout.flush();
    String chat = din.readUTF();
    if (chat.length() &lt;= 0 || !d.loggedIn)
      return;
    String[] s, allChat = M.split(chat,seperateString,true);
    String s1, s2 = "";
    Color msgColor = Color.black;
    Color nameColor = Color.black;
    boolean otherColor = false;
    for (int i = 0; i &lt; allChat.length; i++) {
      s = M.split(allChat[i],":",false);
      s1 = s[0];
      for (int a = 1; a &lt; s.length; a++) {
        if (a == 1) {
          s[a] = s[a].trim(); //Remove the space at the beginning and end
          if (s[a].equalsIgnoreCase("yellow")) {
            msgColor = Color.yellow;
            otherColor = true;
          }
          else if (s[a].equalsIgnoreCase("green")) {
            msgColor = Color.green;
            otherColor = true;
          }
          else if (s[a].equalsIgnoreCase("blue")) {
            msgColor = Color.blue;
            otherColor = true;
          }
          else if (s[a].equalsIgnoreCase("cyan")) {
            msgColor = Color.cyan;
            otherColor = true;
          }
          else if (s[a].equalsIgnoreCase("red")) {
            msgColor = Color.red;
            otherColor = true;
          }
          else if (s[a].equalsIgnoreCase("pink")) {
            msgColor = Color.pink;
            otherColor = true;
          }
          else if (s[a].equalsIgnoreCase("black")) {
            msgColor = Color.black;
            otherColor = true;
          }
          else if (s[a].equalsIgnoreCase("white")) {
            msgColor = Color.white;
            otherColor = true;
          }
          else if (s[a].equalsIgnoreCase("orange")) {
            msgColor = Color.orange;
            otherColor = true;
          }
          else {
            while (s[a].startsWith(" "))
              s[a] = s[a].substring(1);
            s[a] = " "+s[a];
            s2 +=s[a]+((a &lt; s.length-1)?":":"");
          }
        }
        else if (a == 2 &amp;&amp; otherColor) {
          while (s[a].startsWith(" "))
            s[a] = s[a].substring(1);
          s[a] = " "+s[a];
          s2 +=s[a]+((a &lt; s.length-1)?":":"");
        }
        else
          s2 +=s[a]+((a &lt; s.length-1)?":":"");
      }
      d.chatBox.add(s1+":",nameColor,new Font("SansSerif",Font.BOLD,13),s2,msgColor,new Font("SansSerif",Font.PLAIN,13));
    }  
}</code></pre>
<p>Next to these 2, there are 2 other threads running, one with a cycletime of 50 ms (which just repaints), and one with a cycletime of 500, which just does one writeInt(255); every 10 seconds, and some other client-side stuff every 500 ms.</p>
<p>It all works fine for 5-10 minutes.</p>
<p>That’s it… I hope it helps. <img src="https://forum.moparisthebest.com/images/emoji/twitter/frowning.png?v=6" title=":frowning:" class="emoji" alt=":frowning:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/client-server-communication/212139/17">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/client-server-communication/212139/17</link>
        <pubDate>Sat, 14 Jun 2008 21:56:13 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-212139-17</guid>
        <source url="https://forum.moparisthebest.com/t/client-server-communication/212139.rss">Client-Server communication</source>
      </item>
      <item>
        <title>Client-Server communication</title>
        <dc:creator><![CDATA[@TeleNubby TeleNubby]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/telenubby">@TeleNubby</a> wrote:</p>
          <blockquote>
              <p>[quote=“Pwnd, post:15, topic:212139”]Try using -Xmx256m as an argument to the JRE in your command line.</p>
<pre><code class="lang-auto">java -Xmx256m classname ... ... ...</code></pre>
<p>If that doesn’t produce different results, I would take a look at your framework again :/[/quote]Tbh that’s not a very good solution to a heap space problem. He shouldn’t be getting one in the first place unless his computer has, what, 128mb ram (or anything low)?</p>
<p>If you want us to help you with the Java heap space error, you’re going to have to show us the line that causes it and a few lines above and below it (radius of at least 2). My guess is you’re using a loop to read, and you’ve set <span class="bbcode-i">that</span> up wrong.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/client-server-communication/212139/16">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/client-server-communication/212139/16</link>
        <pubDate>Sat, 14 Jun 2008 20:54:22 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-212139-16</guid>
        <source url="https://forum.moparisthebest.com/t/client-server-communication/212139.rss">Client-Server communication</source>
      </item>
      <item>
        <title>Client-Server communication</title>
        <dc:creator><![CDATA[@Pwnd Pwnd]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/pwnd">@Pwnd</a> wrote:</p>
          <blockquote>
              <p>Try using -Xmx256m as an argument to the JRE in your command line.</p>
<pre><code class="lang-auto">java -Xmx256m classname ... ... ...</code></pre>
<p>If that doesn’t produce different results, I would take a look at your framework again <img src="https://forum.moparisthebest.com/images/emoji/twitter/confused.png?v=6" title=":confused:" class="emoji" alt=":confused:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/client-server-communication/212139/15">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/client-server-communication/212139/15</link>
        <pubDate>Sat, 14 Jun 2008 16:35:03 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-212139-15</guid>
        <source url="https://forum.moparisthebest.com/t/client-server-communication/212139.rss">Client-Server communication</source>
      </item>
      <item>
        <title>Client-Server communication</title>
        <dc:creator><![CDATA[@supamagier supamagier]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/supamagier">@supamagier</a> wrote:</p>
          <blockquote>
              <p>Okay, thank you very much, i’ll try that, and see if it helps :)[br][br][size=1]Posted on: 14 June 2008, 13:13:53[/size][hr]Hmm, it works better, but after I while, I still get the OutOfMemoryError: Java heap space<br>
Anyone knows when it can occur, and what the DataInputStream has to do with it, coz it said ‘at java.io.DataInputStream (unknown source)’…</p>
<p>Please help me. <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=6" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/client-server-communication/212139/14">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/client-server-communication/212139/14</link>
        <pubDate>Sat, 14 Jun 2008 12:39:38 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-212139-14</guid>
        <source url="https://forum.moparisthebest.com/t/client-server-communication/212139.rss">Client-Server communication</source>
      </item>
      <item>
        <title>Client-Server communication</title>
        <dc:creator><![CDATA[@Krichevskoy Krichevskoy]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/krichevskoy">@Krichevskoy</a> wrote:</p>
          <blockquote>
              <p>[quote=“supamagier, post:12, topic:212139”]I have my reasons.</p>
<p>Anyways, the dataout and inputstream are better than bufferedreader/printwriter/inputstream/outputstream?[/quote]</p>
<p>Yes. They’re less trouble <span class="bbcode-i">and</span> faster, if I remember correctly.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/client-server-communication/212139/13">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/client-server-communication/212139/13</link>
        <pubDate>Sat, 14 Jun 2008 03:40:06 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-212139-13</guid>
        <source url="https://forum.moparisthebest.com/t/client-server-communication/212139.rss">Client-Server communication</source>
      </item>
  </channel>
</rss>
