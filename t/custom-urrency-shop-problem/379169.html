<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/custom-urrency-shop-problem/379169 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Aug 2019 07:55:00 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Custom urrency shop problem - Runescape - moparisthebest.com</title>
    <meta name="description" content="Alright, well i&amp;#39;ve &amp;#39;been working on a donor only shop on my server, and i finished a big part of it, but i&amp;#39;m running into a bit of a problem now, and i&amp;#39;m not sure how to fix it, i&amp;#39;ve &amp;#39;been thinking on what i could do to &amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="379169.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Custom urrency shop problem&#39;" href="379169.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/custom-urrency-shop-problem/379169" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/custom-urrency-shop-problem/379169" />
<meta property="og:title" content="Custom urrency shop problem" />
<meta name="twitter:title" content="Custom urrency shop problem" />
<meta property="og:description" content="Alright, well i’ve &#39;been working on a donor only shop on my server, and i finished a big part of it, but i’m running into a bit of a problem now, and i’m not sure how to fix it, i’ve &#39;been thinking on what i could do to fix it, and well, now im out of ideas, so i thought i’d post here, to see if anyone could possibly help me with this.  The problem is, when you buy an item, lets say you have 225 tokens, and you buy an item that costs 225 coins, but you click on buy, it gives you two of those ite..." />
<meta name="twitter:description" content="Alright, well i’ve &#39;been working on a donor only shop on my server, and i finished a big part of it, but i’m running into a bit of a problem now, and i’m not sure how to fix it, i’ve &#39;been thinking on what i could do to fix it, and well, now im out of ideas, so i thought i’d post here, to see if anyone could possibly help me with this.  The problem is, when you buy an item, lets say you have 225 tokens, and you buy an item that costs 225 coins, but you click on buy, it gives you two of those ite..." />
<meta property="article:published_time" content="2011-01-20T00:24:56+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="379169.html">Custom urrency shop problem</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/tehbomb.html'><span itemprop='name'>tehbomb</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-01-20T00:24:56Z'>
            <time itemprop='dateModified' datetime='2016-08-01T07:03:43Z' class='post-time'>
              August 1, 2016,  7:03am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Alright, well i’ve 'been working on a donor only shop on my server, and i finished a big part of it, but i’m running into a bit of a problem now, and i’m not sure how to fix it, i’ve 'been thinking on what i could do to fix it, and well, now im out of ideas, so i thought i’d post here, to see if anyone could possibly help me with this.</p>
<p>The problem is, when you buy an item, lets say you have 225 tokens, and you buy an item that costs 225 coins, but you click on buy, it gives you two of those items, and not one.</p>
<p>So what im wanting to know is, is there a way to make it so you can limit the buy options in a shop? meaning that if you’d click on 10,5, or 1, it’d automaticly only give you one, or if theres anything else i could do to fix this, i spent alot of time trying to figure this out, and well, im very close to giving up.</p>
<p>Heres the code, if that helps.</p>
<p>[code]    public boolean buyItem(int itemID, int fromSlot, int amount) {<br>
if (amount &gt; 0<br>
&amp;&amp; itemID<br>
== (server.shopHandler.ShopItems[MyShopID][fromSlot] - 1)) {<br>
if (amount &gt; server.shopHandler.ShopItemsN[MyShopID][fromSlot]) {<br>
amount = server.shopHandler.ShopItemsN[MyShopID][fromSlot];<br>
}<br>
double ShopValue;<br>
double TotPrice;<br>
int TotPrice2;<br>
int Overstock;<br>
int Slot = 0;<br>
int Slot2 = 0;<br>
int Slot3 = 0;<br>
int Slot4 = 0;<br>
for (int i = amount; i &gt; 0; i–) {<br>
TotPrice2 = (int) Math.floor(<br>
GetItemShopValue(itemID, 0, fromSlot));<br>
Slot = GetItemSlot(995);<br>
Slot2 = GetItemSlot(14702);</p>
<p>if (Slot2 == -1 &amp;&amp; MyShopID == 42) {<br>
sM(“You don’t have enough Ultima coins.”);<br>
break;[/code]</p>
<p><code>if (MyShopID != 1) {
if (playerItemsN[Slot] &gt;= TotPrice2) {
if (freeSlots() &gt; 0) {
deleteItem(995, GetItemSlot(995), TotPrice2);
addItem(itemID, 1);
server.shopHandler.ShopItemsN[MyShopID][fromSlot] -= 1;
server.shopHandler.ShopItemsDelay[MyShopID][fromSlot] = 0;
if ((fromSlot + 1) &gt; server.shopHandler.ShopItemsStandard[MyShopID]) {
server.shopHandler.ShopItems[MyShopID][fromSlot] = 0;
}
} else {
sM("Not enough space in your inventory.");
break;
}
} else {
sM("You don't have enough coins.");
}
}
if (MyShopID == 42) {
if (playerItemsN[Slot2] &gt;= TotPrice2) {
if (freeSlots() &gt; 0) {
deleteItem(14702, GetItemSlot(14702), TotPrice2);
addItem(itemID, 1);
server.shopHandler.ShopItemsN[MyShopID][fromSlot] -= 1;
server.shopHandler.ShopItemsDelay[MyShopID][fromSlot] = 0;
if ((fromSlot + 1) &gt; server.shopHandler.ShopItemsStandard[MyShopID]) {
server.shopHandler.ShopItems[MyShopID][fromSlot] = 0;
}
} else {
sM("Not enough space in your inventory.");
break;
}
} else {
sM("You don't have enough Ultima coins.");
}
}</code></p>
<p>[code]			} else if (interfaceID == 3900) {<br>
// Show value to buy items<br>
int ShopValue = (int) Math.floor(GetItemShopValue(removeID, 0,<br>
removeSlot));<br>
String ShopAdd = “”;</p>
<pre><code>			if ((ShopValue &gt;= 1000) &amp;&amp; (ShopValue &lt; 1000000)) {
				ShopAdd = " (" + (ShopValue / 1000) + "K)";
			} else if (ShopValue &gt;= 1000000) {
				ShopAdd = " (" + (ShopValue / 1000000) + " million)";
			}
		if (MyShopID == 42) {
    sM(GetItemName(removeID) + ": Shop will buy for "+ ShopValue + " Ultima coins" + ShopAdd);
		} else {[/code]
</code></pre>
<p>If anyone could help me with this, it would be much appreciated, i’m very close to just scraping the idea, and making a regular gold system for the shop, but if theres a way to have this fixed, i’d be very happy. <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>If more info is needed, feel free to post.</p>
      </div>

      <meta itemprop='headline' content='Custom urrency shop problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/KrypitcRc.html'><span itemprop='name'>KrypitcRc</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-01-21T00:43:50Z'>
            <time itemprop='dateModified' datetime='2016-08-01T07:05:09Z' class='post-time'>
              August 1, 2016,  7:05am
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>At the top of your 2nd code</p>
<pre><code class="lang-auto">if (MyShopID != 1) {</code></pre>
<p>The “!= 1” say’s that any shop ID that equals 1 or more will be affected by that code so…</p>
<pre><code class="lang-auto">if (MyShopID &lt;= 41) {</code></pre>
<p>Now that would make it only effect shops with an ID of 41 and lower so your special shop with the ID 42 shouldn’t be effected.</p>
      </div>

      <meta itemprop='headline' content='Custom urrency shop problem'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/custom-urrency-shop-problem/379169 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Aug 2019 07:55:01 GMT -->
</html>
