<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>[updated] PHP opening sockets on free web hosts</title>
    <link>https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335</link>
    <description>So, I have a script that opens a socket and wirtes to a mysql database which is working perfectly on my own webserver(mySQL 5.1.36 and  PHP 5.3.0 Apache 2.2.11) however when I upload it to free web-hosting sites like 000webhost or ulmb it will not open the socket. What could be the reason of this?
I should also mention that the connection is not on port80.

This is the code which opens the socket and writes to the database:


[php]
                if (! $sock = @fsockopen($server, $port, $num, $error, 5))
                    echo &#39;&lt;B&gt;&lt;FONT COLOR=red&gt;Your Server is Offline!&lt;/b&gt;&lt;/FONT&gt;
&lt;br&gt;&lt;a href=&quot;add.php&quot;&gt;Try Again&lt;/a&gt;
&lt;br&gt;&lt;a href=&quot;index.php&quot;&gt;Return Home&lt;/a&gt;&#39;;

                else {

                    $sqlquery = &quot;INSERT INTO $table
VALUES(&#39;$name&#39;,&#39;$server&#39;,&#39;$port&#39;,&#39;$info&#39;, &#39;$online&#39;)&quot;;

                    $results = mysql_query($sqlquery);
}
[/php]

Could this be due to the webhost blocking it or an out-of-date php/mysql server.





This problem is solved(will leave for further reference)
[code]I am using a mySQL database and I am try to load all rows in a table, use 2 of the fields (server and port) and open a socket using it, then change another field (online) to another value depending on if the server replys.

This is what I have got so far however it only prints the status of the first row.
Can someone fix this?




&lt;?php
include &#39;mysql.php&#39;;

mysql_connect($DBhost,$DBuser,$DBpass);
@mysql_select_db($DBName) or die( &quot;Unable to select database&quot;);

$query=&quot;SELECT * FROM servers ORDER BY online&quot;;
$result=mysql_query($query);
$num=mysql_numrows($result);

$i=0;
while ($i &lt; $num) {

    $server=mysql_result($result,$i,&quot;server&quot;);
    $port=mysql_result($result,$i,&quot;port&quot;);

    if (! $sock = @fsockopen($server, $port, $num, $error, 3))
        $query=&#39;UPDATE * FROM servers SET online=&quot;z&quot; WHERE server=$server&#39;;

    else {
        echo &#39;server &#39;, $server, &#39; on port &#39;, $port, &#39; is online &#39;;
        $query2=&quot;UPDATE * FROM servers SET online=&#39;y&#39; WHERE server=$server&quot;;
    }
    $i++;
}

?&gt; 
[/code]</description>
    
    <lastBuildDate>Tue, 24 Nov 2009 21:50:17 +0000</lastBuildDate>
    <category>General Programming</category>
    <atom:link href="https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>[updated] PHP opening sockets on free web hosts</title>
        <dc:creator><![CDATA[@abraham2119 abraham2119]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/abraham2119">@abraham2119</a> wrote:</p>
          <blockquote>
              <p>i agree, but <a href="http://www.enom.com" data-bbcode="true" rel="nofollow noopener">there are some sites</a> that do</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335/20">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335/20</link>
        <pubDate>Tue, 24 Nov 2009 21:50:17 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-315335-20</guid>
        <source url="https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335.rss">[updated] PHP opening sockets on free web hosts</source>
      </item>
      <item>
        <title>[updated] PHP opening sockets on free web hosts</title>
        <dc:creator><![CDATA[@eczema3 eczema3]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/eczema3">@eczema3</a> wrote:</p>
          <blockquote>
              <p><a class="mention" href="/u/abraham2119">@abraham2119</a>: I doubt if a host doesn’t allow fsockopen() they would allow system() as there is no limit to what you could do with system() so it would be highly insecure.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335/19">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335/19</link>
        <pubDate>Tue, 24 Nov 2009 17:20:07 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-315335-19</guid>
        <source url="https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335.rss">[updated] PHP opening sockets on free web hosts</source>
      </item>
      <item>
        <title>[updated] PHP opening sockets on free web hosts</title>
        <dc:creator><![CDATA[@Fat_Cookies Fat Cookies]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/fat_cookies">@Fat_Cookies</a> wrote:</p>
          <blockquote>
              <p>Thanks abraham, but I should have mentioned that I managed to find a <span class="bbcode-b">free</span> webhost which allows connections on all ports and has cron jobs so its ok.<br>
It does come with some small adverts but that is ok.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335/18">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335/18</link>
        <pubDate>Tue, 24 Nov 2009 16:41:12 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-315335-18</guid>
        <source url="https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335.rss">[updated] PHP opening sockets on free web hosts</source>
      </item>
      <item>
        <title>[updated] PHP opening sockets on free web hosts</title>
        <dc:creator><![CDATA[@abraham2119 abraham2119]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/abraham2119">@abraham2119</a> wrote:</p>
          <blockquote>
              <p>what you could also do is if your host allows you to invoke php’s system() function, then just make an app that retrieves all servers stored in database, pings them, and stores new results in the database</p>
<p>also, you can schedule a cron job to do this (if your host is running a posix system)</p>
<p>edit: of course, if you want an immediate response (whether server is offline or online) then just make your app output online/offline and retrieve it using the return value of system()</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335/17">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335/17</link>
        <pubDate>Sun, 22 Nov 2009 22:59:56 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-315335-17</guid>
        <source url="https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335.rss">[updated] PHP opening sockets on free web hosts</source>
      </item>
      <item>
        <title>[updated] PHP opening sockets on free web hosts</title>
        <dc:creator><![CDATA[@inertia inertia]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/inertia">@inertia</a> wrote:</p>
          <blockquote>
              <p>It could be a security vulnerability, or bandwidth eater? Whatever the reason, it’s not allowed on any free hosts I know of.</p>
<p>If you’re trying to make a server status checker, just make a program in Java or something that connects to the database to check the servers and run it on your own computer. It doesn’t matter if it’s not checking servers 24/7 does it?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335/16">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335/16</link>
        <pubDate>Sun, 22 Nov 2009 19:35:24 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-315335-16</guid>
        <source url="https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335.rss">[updated] PHP opening sockets on free web hosts</source>
      </item>
      <item>
        <title>[updated] PHP opening sockets on free web hosts</title>
        <dc:creator><![CDATA[@Fat_Cookies Fat Cookies]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/fat_cookies">@Fat_Cookies</a> wrote:</p>
          <blockquote>
              <p>I wont request a lock (because that is dumb), but all of this has been solved.<br>
My gay webhosts do not allow opening on sockets to ports other than port 80.</p>
<p>cumescape, imjohn10 is correct.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335/15">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335/15</link>
        <pubDate>Sun, 22 Nov 2009 18:38:02 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-315335-15</guid>
        <source url="https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335.rss">[updated] PHP opening sockets on free web hosts</source>
      </item>
      <item>
        <title>[updated] PHP opening sockets on free web hosts</title>
        <dc:creator><![CDATA[@cumescape cumescape]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/cumescape">@cumescape</a> wrote:</p>
          <blockquote>
              <p>[quote=“imjohn10, post:12, topic:315335”]<code>$query='UPDATE * FROM servers SET online="z" WHERE server=$server';</code></p>
<p>should be</p>
<pre><code class="lang-auto">$query = "UPDATE * FROM `servers` SET `online`='z' WHERE `server`='$server'";</code></pre>
<p>;)[/quote]<br>
Doesn’t help really at all. He was missing the ’ on the “server &amp; online”.</p>
<pre><code class="lang-auto">$query = "UPDATE * FROM servers SET online='z' WHERE server='$server'";</code></pre>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335/14">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335/14</link>
        <pubDate>Sun, 22 Nov 2009 18:16:54 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-315335-14</guid>
        <source url="https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335.rss">[updated] PHP opening sockets on free web hosts</source>
      </item>
      <item>
        <title>[updated] PHP opening sockets on free web hosts</title>
        <dc:creator><![CDATA[@eczema3 eczema3]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/eczema3">@eczema3</a> wrote:</p>
          <blockquote>
              <p>[quote=“inertia, post:11, topic:315335”]Instead of while ($i &lt; $num) {<br>
use:<br>
while ($rs = mysql_fetch_array($result)) {<br>
$server = $result[‘server’];[/quote]<br>
You should use mysql_fetch_assoc instead, it’s a lot faster.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335/13">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335/13</link>
        <pubDate>Sun, 22 Nov 2009 16:34:25 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-315335-13</guid>
        <source url="https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335.rss">[updated] PHP opening sockets on free web hosts</source>
      </item>
      <item>
        <title>[updated] PHP opening sockets on free web hosts</title>
        <dc:creator><![CDATA[@imjohn10 imjohn10]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/imjohn10">@imjohn10</a> wrote:</p>
          <blockquote>
              <pre><code class="lang-auto">$query='UPDATE * FROM servers SET online="z" WHERE server=$server';</code></pre>
<p>should be</p>
<pre><code class="lang-auto">$query = "UPDATE * FROM `servers` SET `online`='z' WHERE `server`='$server'";</code></pre>
<p><img src="https://forum.moparisthebest.com/images/emoji/twitter/wink.png?v=5" title=":wink:" class="emoji" alt=":wink:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335/12">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335/12</link>
        <pubDate>Sun, 22 Nov 2009 16:21:29 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-315335-12</guid>
        <source url="https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335.rss">[updated] PHP opening sockets on free web hosts</source>
      </item>
      <item>
        <title>[updated] PHP opening sockets on free web hosts</title>
        <dc:creator><![CDATA[@inertia inertia]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/inertia">@inertia</a> wrote:</p>
          <blockquote>
              <p>Instead of while ($i &lt; $num) {<br>
use:<br>
while ($rs = mysql_fetch_array($result)) {<br>
$server = $result[‘server’];</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335/11">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335/11</link>
        <pubDate>Sun, 22 Nov 2009 16:05:34 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-315335-11</guid>
        <source url="https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335.rss">[updated] PHP opening sockets on free web hosts</source>
      </item>
      <item>
        <title>[updated] PHP opening sockets on free web hosts</title>
        <dc:creator><![CDATA[@Unhandled Unhandled]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/unhandled">@Unhandled</a> wrote:</p>
          <blockquote>
              <p>Yes, mysql_query() executes the query.<br>
I still say use mysql_fetch_assoc() instead of your row count crap.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335/10</link>
        <pubDate>Sat, 21 Nov 2009 22:42:03 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-315335-10</guid>
        <source url="https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335.rss">[updated] PHP opening sockets on free web hosts</source>
      </item>
      <item>
        <title>[updated] PHP opening sockets on free web hosts</title>
        <dc:creator><![CDATA[@Fat_Cookies Fat Cookies]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/fat_cookies">@Fat_Cookies</a> wrote:</p>
          <blockquote>
              <p>So:<br>
mysql_query($query);<br>
is the actual method that sends the query?</p>
<p>That problem is solved but the fact that only the first row in the table is tested is still strange. I would exepct the $i++; and while($i &lt; $num) to loop the sequence the same amount of times as the number of rows.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335/9</link>
        <pubDate>Sat, 21 Nov 2009 22:37:55 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-315335-9</guid>
        <source url="https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335.rss">[updated] PHP opening sockets on free web hosts</source>
      </item>
      <item>
        <title>[updated] PHP opening sockets on free web hosts</title>
        <dc:creator><![CDATA[@eczema3 eczema3]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/eczema3">@eczema3</a> wrote:</p>
          <blockquote>
              <p>inertia, the call to fsockopen() will open the socket, and assign the return value to $sock which will either be FALSE/0 if the socket failed to connect, or a resource and since a resource isn’t FALSE/0 the block will complete.</p>
<p>(If my post made no sense, DW but what he has does work.)</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335/8</link>
        <pubDate>Sat, 21 Nov 2009 22:26:16 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-315335-8</guid>
        <source url="https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335.rss">[updated] PHP opening sockets on free web hosts</source>
      </item>
      <item>
        <title>[updated] PHP opening sockets on free web hosts</title>
        <dc:creator><![CDATA[@inertia inertia]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/inertia">@inertia</a> wrote:</p>
          <blockquote>
              <p>$num=mysql_numrows($result);<br>
Shouldn’t that be $num=mysql_num_rows($result);? (unless that works too)</p>
<p>Also: if (! $sock = <span class="mention">@fsockopen</span>($server, $port, $num, $error, 3))<br>
I may be wrong, but I think that assigns $sock to the return value of fsockopen and checks if the assignment was unsuccessful which will almost always be true (and hence the statement body never executes).</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335/7</link>
        <pubDate>Sat, 21 Nov 2009 20:18:10 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-315335-7</guid>
        <source url="https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335.rss">[updated] PHP opening sockets on free web hosts</source>
      </item>
      <item>
        <title>[updated] PHP opening sockets on free web hosts</title>
        <dc:creator><![CDATA[@Unhandled Unhandled]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/unhandled">@Unhandled</a> wrote:</p>
          <blockquote>
              <p>Well the $query and $query2 that are set in the while loop are never executed…</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335/6</link>
        <pubDate>Sat, 21 Nov 2009 19:47:42 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-315335-6</guid>
        <source url="https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335.rss">[updated] PHP opening sockets on free web hosts</source>
      </item>
      <item>
        <title>[updated] PHP opening sockets on free web hosts</title>
        <dc:creator><![CDATA[@Fat_Cookies Fat Cookies]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/fat_cookies">@Fat_Cookies</a> wrote:</p>
          <blockquote>
              <p>Sorry, you’ve misunderstood me.<br>
The actual fetching of the data from the database is ok, its just putting the if statement within the while statement is fucking up and so is updating the “online” field.</p>
<p>For some fucked up reason if I refresh the page like 10 times it works (but not the updating of the database)</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335/5</link>
        <pubDate>Sat, 21 Nov 2009 19:19:27 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-315335-5</guid>
        <source url="https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335.rss">[updated] PHP opening sockets on free web hosts</source>
      </item>
      <item>
        <title>[updated] PHP opening sockets on free web hosts</title>
        <dc:creator><![CDATA[@Unhandled Unhandled]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/unhandled">@Unhandled</a> wrote:</p>
          <blockquote>
              <aside class="quote no-group" data-post="3" data-topic="315335">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/eczema3/40/5_513041d5f7104045db30895d3b90af16.png" class="avatar"> eczema3:</div>
<blockquote>
<p>or mysql_fetch_array()</p>
</blockquote>
</aside>
<p>yeah, mysql_fetch_assoc() basically wraps mysql_fetch_array() with an extra parameter to make it associative, which is easier to use imo.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335/4</link>
        <pubDate>Sat, 21 Nov 2009 18:41:14 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-315335-4</guid>
        <source url="https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335.rss">[updated] PHP opening sockets on free web hosts</source>
      </item>
      <item>
        <title>[updated] PHP opening sockets on free web hosts</title>
        <dc:creator><![CDATA[@eczema3 eczema3]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/eczema3">@eczema3</a> wrote:</p>
          <blockquote>
              <p>or mysql_fetch_array()</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335/3</link>
        <pubDate>Sat, 21 Nov 2009 18:27:03 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-315335-3</guid>
        <source url="https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335.rss">[updated] PHP opening sockets on free web hosts</source>
      </item>
      <item>
        <title>[updated] PHP opening sockets on free web hosts</title>
        <dc:creator><![CDATA[@Unhandled Unhandled]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/unhandled">@Unhandled</a> wrote:</p>
          <blockquote>
              <p>use mysql_fetch_assoc().</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335/2</link>
        <pubDate>Sat, 21 Nov 2009 18:22:14 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-315335-2</guid>
        <source url="https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335.rss">[updated] PHP opening sockets on free web hosts</source>
      </item>
      <item>
        <title>[updated] PHP opening sockets on free web hosts</title>
        <dc:creator><![CDATA[@Fat_Cookies Fat Cookies]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/fat_cookies">@Fat_Cookies</a> wrote:</p>
          <blockquote>
              <p>So, I have a script that opens a socket and wirtes to a mysql database which is working perfectly on my own webserver(mySQL 5.1.36 and  PHP 5.3.0 Apache 2.2.11) however when I upload it to free web-hosting sites like 000webhost or ulmb it will not open the socket. What could be the reason of this?<br>
I should also mention that the connection is not on port80.</p>
<p>This is the code which opens the socket and writes to the database:</p>
<p>[php]<br>
if (! $sock = <span class="mention">@fsockopen</span>($server, $port, $num, $error, 5))<br>
echo ‘<b>Your Server is Offline!</b><br>
<br><a>Try Again</a><br>
<br><a>Return Home</a>’;</p>
<pre><code>            else {

                $sqlquery = "INSERT INTO $table
</code></pre>
<p>VALUES(’$name’,’$server’,’$port’,’$info’, ‘$online’)";</p>
<pre><code>                $results = mysql_query($sqlquery);
</code></pre>
<p>}<br>
[/php]</p>
<p>Could this be due to the webhost blocking it or an out-of-date php/mysql server.</p>
<p>This problem is solved(will leave for further reference)</p>
<p>[code]I am using a mySQL database and I am try to load all rows in a table, use 2 of the fields (server and port) and open a socket using it, then change another field (online) to another value depending on if the server replys.</p>
<p>This is what I have got so far however it only prints the status of the first row.<br>
Can someone fix this?</p>
&lt;?php
include 'mysql.php';

mysql_connect($DBhost,$DBuser,$DBpass);
@mysql_select_db($DBName) or die( "Unable to select database");

$query="SELECT * FROM servers ORDER BY online";
$result=mysql_query($query);
$num=mysql_numrows($result);

$i=0;
while ($i &lt; $num) {

    $server=mysql_result($result,$i,"server");
    $port=mysql_result($result,$i,"port");

    if (! $sock = @fsockopen($server, $port, $num, $error, 3))
        $query='UPDATE * FROM servers SET online="z" WHERE server=$server';

    else {
        echo 'server ', $server, ' on port ', $port, ' is online ';
        $query2="UPDATE * FROM servers SET online='y' WHERE server=$server";
    }
    $i++;
}

?&gt; 
<p>[/code]</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335/1</link>
        <pubDate>Sat, 21 Nov 2009 17:02:39 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-315335-1</guid>
        <source url="https://forum.moparisthebest.com/t/updated-php-opening-sockets-on-free-web-hosts/315335.rss">[updated] PHP opening sockets on free web hosts</source>
      </item>
  </channel>
</rss>
