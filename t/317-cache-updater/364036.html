<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/317-cache-updater/364036 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Aug 2019 17:32:35 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>317 Cache updater - Game Development - moparisthebest.com</title>
    <meta name="description" content="Hello everyone I need to make the cache in my client updateble for adding new costum islands models animations etc unfortunantly I don&amp;#39;t know how i can do it and I dont get tom&amp;#39;s cache updatzer protocol can someone expla&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="364036.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;317 Cache updater&#39;" href="364036.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/317-cache-updater/364036" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/317-cache-updater/364036" />
<meta property="og:title" content="317 Cache updater" />
<meta name="twitter:title" content="317 Cache updater" />
<meta property="og:description" content="Hello everyone I need to make the cache in my client updateble for adding new costum islands models animations etc unfortunantly I don’t know how i can do it and I dont get tom’s cache updatzer protocol can someone explain tom me better? I also have an updater file in my client but don’t know how to use it:  Toms tut on rs-server  == What does it do? ==  The Runescape update server is a quick and effective way of transferring updated files to the runescape cache. It works by checking the crc, an..." />
<meta name="twitter:description" content="Hello everyone I need to make the cache in my client updateble for adding new costum islands models animations etc unfortunantly I don’t know how i can do it and I dont get tom’s cache updatzer protocol can someone explain tom me better? I also have an updater file in my client but don’t know how to use it:  Toms tut on rs-server  == What does it do? ==  The Runescape update server is a quick and effective way of transferring updated files to the runescape cache. It works by checking the crc, an..." />
<meta property="article:published_time" content="2010-10-12T16:44:58+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="364036.html">317 Cache updater</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/general-programming.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>General Programming</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/general-programming/game-development.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Game Development</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/artego.html'><span itemprop='name'>artego</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-10-12T16:44:58Z'>
            <time itemprop='dateModified' datetime='2016-08-01T00:21:19Z' class='post-time'>
              August 1, 2016, 12:21am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hello everyone I need to make the cache in my client updateble for adding new costum islands models animations etc unfortunantly I don’t know how i can do it and I dont get tom’s cache updatzer protocol can someone explain tom me better? I also have an updater file in my client but don’t know how to use it:<br>
Toms tut on rs-server<br>
== What does it do? ==<br>
The Runescape update server is a quick and effective way of transferring updated files to the runescape cache. It works by checking the crc, and version numbers in each of the client’s cache files against that of the server. Any files that don’t match are then sent to the client to be packed into the cache.</p>
<p>== How does it work? ==<br>
An update session is first initialized by the client. The client creates a connection to the server on port 43594 (The same location and port as the Game Server). The client will then begin checking the checksum of its own files against that of the server. This is done by using the pre-sent ‘versionlist.jag’ file, which is sent before any updating is performed, Via a different protocol. This protocol is commonly referred to as JAGGRAB. [JAGGRAB Protocol docs coming soon]</p>
<p>Any file checksums that don’t match then must be requested from the server in the form of a 4 byte message, containing the cache, file id, and priority of the request (See Request Priority below). The server will then respond to the request with numerous ‘chunk’ messages, containing a 6 byte header, and up to 500 bytes of the file requested. Once a sucessful transfer has occurred, the client must then reassemble the different chunks, and pack the file into its cache.</p>
<p>== Request Priority ==<br>
Each request comes with a 1 of 3 different priority levels, these values define the urgency of the request.<br>
The different priorities are as follows:<br>
URGENT - This priority occurs when the client is in game, and requires a new model that it has not yet recieved.<br>
LOADUP - This priority is only used when the client is loading<br>
PASSIVE - This priority is used when a file is not needed urgently, but will probably be needed in the future.<br>
Requests should be processed according to their priority, LOADUP being the highest, PASSIVE being the lowest.</p>
<p>== File request format ==<br>
File requests from the client come in the form of a short, 4 byte message. The format is as follows:<br>
Code:<br>
·cache_id:byte    The id of the cache the file is found in<br>
.file_id:short        The id of the file inside the cache to update<br>
.priority:byte       The priority of the request (See Request Priorities above)<br>
== File response format ==<br>
Responses to a File Request message broken up in to a number of chunks. The amount of chunks the server will respond with depends on the size of the file. The file is broken up into 500 byte chunks, which are each prefixed by a 6 byte header. A chunk can also contain less than 500 bytes, if needed (ie. the end of the file). The header contains information about the file the chunk pertains to, and the chunks location in the file.<br>
The format for an entire chunk is as follows:<br>
Code:<br>
.cache_id:byte     The id of the cache the file is found in<br>
.file_id:short        The id of the file inside the cache to update<br>
.file_size:short     The entire file size of the file we’re updating<br>
.chunk_id:byte     The id of this chunk. Chunk ids increment with each new chunk of a file sent.<br>
.data:max. 500 bytes    The data<br>
== Example Request and Response ==<br>
The following is an example of a request for a new file, and the server’s response</p>
<p>Code:<br>
Client Write:<br>
[Request] Cache id 1; File id 1; Priority 2</p>
<p>Server Write:<br>
[Chunk] Cache id 1; File id 1; File size 1128; Chunk id 0; [500 bytes of data]<br>
[Chunk] Cache id 1; File id 1; File size 1128; Chunk id 1; [500 bytes of data]<br>
[Chunk] Cache id 1; File id 1; File size 1128; Chunk id 2; [128 bytes of data]</p>
<p>I really don’t get it in what files should i put these things to work? <img src="../../images/emoji/twitter/confusedae52.png?v=5" title=":confused:" class="emoji" alt=":confused:"><br>
Please help!</p>
      </div>

      <meta itemprop='headline' content='317 Cache updater'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/317-cache-updater/364036 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Aug 2019 17:32:36 GMT -->
</html>
