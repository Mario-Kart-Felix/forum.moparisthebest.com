<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Npc ai</title>
    <link>https://forum.moparisthebest.com/t/npc-ai/549422</link>
    <description>I have seen some half ass hackish ways of having NPCs &quot;react&quot; to a players actions. I myself can admit to participating as RSCD based servers are extremely coupled code wise. Marwolfs post in the help section, where people reacted by showing off npc vs npc battles is a clear example of how limited we are with an actual AI system. It has been done since 2008 (maybe before) and yet the only actual public example is xEnts from RSCA source (Which again doesn&#39;t do anything with the highly coupled code and just embraces it)

In the RSCD source we have Entity -&gt; Mob -&gt; NPC &amp; Player which determines the differences between a Player and NPC

By adding the RangeEvent and its methods to the the Mob class, you can call on NPC&#39;s having the ability to range whatever you want them too. The same thing with Mage, Trading, Dueling etc etc. I so far got to the point where you can trade an npc but the npc doesn&#39;t offer anything (yet)

The difference between an NPC and a Player is that the server handles the logic for npcs and not sending packets to any client while the player requires packets.

Which brings me to my question. Is it better to give the MobileEntity class more features (maybe just make them abstract and handle the methods differently in both the NPC and Player class) or should I just take the event package and duplicate it for NPC usage (which would be stupid, but I have seen people do it for some reason) because the DelayedEventHandler should handle all events. 

    public DelayedEvent(Mob owner, int delay) {
        this.owner = owner;
        this.delay = delay;
    }

Giving each MobileEntity its own viewarea, I am not worried about for memory saving as I won&#39;t have more than 300-400 loaded any any single time. 


What are your thoughts?</description>
    
    <lastBuildDate>Fri, 30 Jan 2015 16:26:31 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/npc-ai/549422.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Npc ai</title>
        <dc:creator><![CDATA[@Nothing1 -Nothing]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/nothing1">@Nothing1</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="19" data-topic="549422">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/rodgerwilco/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> Rodgerwilco:</div>
<blockquote>
<p>Guess it’s a feature I will be adding, projectile shooting off into the unknown <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"></p>
</blockquote>
</aside>
<p>What is the benefit of showing projectiles that you won’t be able to see anyway, I mean if you aren’t in the region of victim you are way too far away and the caster isn’t even on your screen without zooming.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/npc-ai/549422/20">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/npc-ai/549422/20</link>
        <pubDate>Fri, 30 Jan 2015 16:26:31 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549422-20</guid>
        <source url="https://forum.moparisthebest.com/t/npc-ai/549422.rss">Npc ai</source>
      </item>
      <item>
        <title>Npc ai</title>
        <dc:creator><![CDATA[@Rodgerwilco Rodgerwilco]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/rodgerwilco">@Rodgerwilco</a> wrote:</p>
          <blockquote>
              <p>Guess it’s a feature I will be adding, projectile shooting off into the unknown <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/npc-ai/549422/19">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/npc-ai/549422/19</link>
        <pubDate>Fri, 30 Jan 2015 16:18:05 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549422-19</guid>
        <source url="https://forum.moparisthebest.com/t/npc-ai/549422.rss">Npc ai</source>
      </item>
      <item>
        <title>Npc ai</title>
        <dc:creator><![CDATA[@Nothing1 -Nothing]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/nothing1">@Nothing1</a> wrote:</p>
          <blockquote>
              <p>[quote=“Rodgerwilco, post:17, topic:549422”]Maybe I am thinking of the RS2 client and how it draws projectiles without second player/mob being within view. If the rsc client doesn’t draw it at all, then I will be adding it. This isn’t an issue with a replica as both the sender and reciever are both pretty close due to radius limitations of projectile but I extended it a while back. So it just depends on how lengthy the distant between the mobs are.</p>
<p>Yea I understand what you’re saying about the player updating, makes sense. I’m sure I’ll tackle it in the near future, thanks for the spoon.  <img src="https://forum.moparisthebest.com/images/emoji/twitter/cool.png?v=5" title=":cool:" class="emoji" alt=":cool:">[/quote]<br>
The version of projectile of RS2 you are thinking about is the wrong one, there are two, one which uses the entity index(for following projectiles) and one which takes a position. No matter what you will need the client to be aware of the victim and you can’t do it without extending the view range.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/npc-ai/549422/18">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/npc-ai/549422/18</link>
        <pubDate>Fri, 30 Jan 2015 16:13:24 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549422-18</guid>
        <source url="https://forum.moparisthebest.com/t/npc-ai/549422.rss">Npc ai</source>
      </item>
      <item>
        <title>Npc ai</title>
        <dc:creator><![CDATA[@Rodgerwilco Rodgerwilco]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/rodgerwilco">@Rodgerwilco</a> wrote:</p>
          <blockquote>
              <p>Maybe I am thinking of the RS2 client and how it draws projectiles without second player/mob being within view. If the rsc client doesn’t draw it at all, then I will be adding it. This isn’t an issue with a replica as both the sender and reciever are both pretty close due to radius limitations of projectile but I extended it a while back. So it just depends on how lengthy the distant between the mobs are.</p>
<p>Yea I understand what you’re saying about the player updating, makes sense. I’m sure I’ll tackle it in the near future, thanks for the spoon.  <img src="https://forum.moparisthebest.com/images/emoji/twitter/cool.png?v=5" title=":cool:" class="emoji" alt=":cool:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/npc-ai/549422/17">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/npc-ai/549422/17</link>
        <pubDate>Fri, 30 Jan 2015 16:08:51 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549422-17</guid>
        <source url="https://forum.moparisthebest.com/t/npc-ai/549422.rss">Npc ai</source>
      </item>
      <item>
        <title>Npc ai</title>
        <dc:creator><![CDATA[@Nothing1 -Nothing]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/nothing1">@Nothing1</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="15" data-topic="549422">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/rodgerwilco/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> Rodgerwilco:</div>
<blockquote>
<p>[quote]Your are bit wrong on that, your logic is fine but that’s not how it really works. When you create the list of local players you will scan all regions around the players and then fliter out players who are over 16 squares away, and those who are over 16 squares away are not aware of the victim which results in projectile not showing anyway. </p>
</blockquote>
</aside>
<p>I know that the local areas are iterated <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"> That doesn’t change anything, you would still be missing the senders local players that the affectedmob would not be able to see.</p>
<p>Have you done any benchmark testing on the updating? I haven’t looked at player updating but will do so in the near future :)[/quote]<br>
It does, don’t you know that if you are not aware of a player, he is not aware of you and other way around. So sending updates without both players in your view is useless because the projectile won’t go anywhere in their view. Which also means that iterating through casters view will be useless because you would be informing players about projectile which can’t be seen in their screen, and if it can, then iterating through victims local players is enough.</p>
<aside class="quote" data-post="15" data-topic="549422">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/rodgerwilco/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> Rodgerwilco:</div>
<blockquote>
<p>Have you done any benchmark testing on the updating? I haven’t looked at player updating but will do so in the near future <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
</blockquote>
</aside>
<p>No I haven’t and the difference is rather small I believe, but it is in many ways better approach. Instead of doing iterations every time you want to send updates to players around, you only set one variable and the main update loop does it for you.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/npc-ai/549422/16">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/npc-ai/549422/16</link>
        <pubDate>Thu, 29 Jan 2015 22:17:07 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549422-16</guid>
        <source url="https://forum.moparisthebest.com/t/npc-ai/549422.rss">Npc ai</source>
      </item>
      <item>
        <title>Npc ai</title>
        <dc:creator><![CDATA[@Rodgerwilco Rodgerwilco]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/rodgerwilco">@Rodgerwilco</a> wrote:</p>
          <blockquote>
              <blockquote>Your are bit wrong on that, your logic is fine but that's not how it really works. When you create the list of local players you will scan all regions around the players and then fliter out players who are over 16 squares away, and those who are over 16 squares away are not aware of the victim which results in projectile not showing anyway.</blockquote>
<p>I know that the local areas are iterated <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"> That doesn’t change anything, you would still be missing the senders local players that the affectedmob would not be able to see.</p>
<p>Have you done any benchmark testing on the updating? I haven’t looked at player updating but will do so in the near future <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/npc-ai/549422/15">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/npc-ai/549422/15</link>
        <pubDate>Thu, 29 Jan 2015 21:21:53 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549422-15</guid>
        <source url="https://forum.moparisthebest.com/t/npc-ai/549422.rss">Npc ai</source>
      </item>
      <item>
        <title>Npc ai</title>
        <dc:creator><![CDATA[@Nothing1 -Nothing]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/nothing1">@Nothing1</a> wrote:</p>
          <blockquote>
              <p>[quote=“Rodgerwilco, post:13, topic:549422”]No, it’s not completely wrong. As I already mentioned that in projectile related events you need to grab the local players in both the owner and the affectedmobs location.</p>
<p><img src="http://i.gyazo.com/9ac3e5747e5289099bd88d84168ff8a2.png" alt width="" height=""></p>
<p>If you take only “the victims local player list” then you would be missing out on the senders local area.<br>
However, in a duel event, where the same iteration happens, there is no need due to lack of spacing.</p>
<aside class="quote">
<blockquote>
<p> But here’s the funny part, you shouldn’t be informing players around you at all, instead they should be informed about you.</p>
</blockquote>
</aside>
<p>Could you explain?[/quote]<br>
Your are bit wrong on that, your logic is fine but that’s not how it really works. When you create the list of local players you will scan all regions around the players and then fliter out players who are over 16 squares away, and those who are over 16 squares away are not aware of the victim which results in projectile not showing anyway.</p>
<aside class="quote" data-post="13" data-topic="549422">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/rodgerwilco/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> Rodgerwilco:</div>
<blockquote>
<p>[quote] But here’s the funny part, you shouldn’t be informing players around you at all, instead they should be informed about you.</p>
</blockquote>
</aside>
<p>Could you explain?[/quote]<br>
Like I mentioned before, you should be building the lists while sending updates to client.</p>
<p>I wrote this on the reply box, but should be a good enough example.</p>
<pre><code class="lang-auto">private Projectile projectile;

public void setProjectileUpdateRequired(Projectile p) {
      this.projectile = p;
}

public boolean needsProjectileDisplayed() {
 return projectile != null;
}

public Projectile getProjectileNeedingDisplayed() {
return projectile;
}

public void reset() {//Call upon updateCollections
   projectile = null;
}</code></pre>
<pre><code class="lang-auto">LinkedList&lt;Projectile&gt; projectileUpdates = new LinkedList&lt;Projectile&gt;();
for(Player p : playerToUpdate.getWatchedPlayers().getKnownEntities()) {
if(p.needsProjectileDisplayed()) {
projectileUpdates.add(p.getProjectileNeedingDisplayed());
}
//if(p.needsChatMessageDisplayed())
//if(p.needsAppearanceUpdate())
//etc
}

//send updates.</code></pre>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/npc-ai/549422/14">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/npc-ai/549422/14</link>
        <pubDate>Thu, 29 Jan 2015 20:17:08 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549422-14</guid>
        <source url="https://forum.moparisthebest.com/t/npc-ai/549422.rss">Npc ai</source>
      </item>
      <item>
        <title>Npc ai</title>
        <dc:creator><![CDATA[@Rodgerwilco Rodgerwilco]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/rodgerwilco">@Rodgerwilco</a> wrote:</p>
          <blockquote>
              <p>No, it’s not completely wrong. As I already mentioned that in projectile related events you need to grab the local players in both the owner and the affectedmobs location.</p>
<p><img src="http://i.gyazo.com/9ac3e5747e5289099bd88d84168ff8a2.png" alt width="" height=""></p>
<p>If you take only “the victims local player list” then you would be missing out on the senders local area.<br>
However, in a duel event, where the same iteration happens, there is no need due to lack of spacing.</p>
<blockquote>But here's the funny part, you shouldn't be informing players around you at all, instead they should be informed about you.</blockquote>
Could you explain?
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/npc-ai/549422/13">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/npc-ai/549422/13</link>
        <pubDate>Thu, 29 Jan 2015 19:40:20 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549422-13</guid>
        <source url="https://forum.moparisthebest.com/t/npc-ai/549422.rss">Npc ai</source>
      </item>
      <item>
        <title>Npc ai</title>
        <dc:creator><![CDATA[@Nothing1 -Nothing]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/nothing1">@Nothing1</a> wrote:</p>
          <blockquote>
              <p>[quote=“Rodgerwilco, post:11, topic:549422”]As for writing 100’s of lines of code for logic handling, you’re right. However I want to make it as moderate as possible for people who are new. I want to at some point release everything I have ever done. I figured I would post it here so people don’t go ape shit at how I did things.  :rolleyes:</p>
<aside class="quote">
<blockquote>
<p>Can you show me an example? I have only seen code which access the watched entities lists.</p>
<p>But the system for appearance updates such as bubbles, damage, projectiles etc on RSCD is horrible, you would be better off using something like update flags and build the lists when you are preparing to send the updates to client instead of iterating through watched players every chat,damage,bubble and projectile and informing the players around you.</p>
</blockquote>
</aside>
<p>Below you can find in rscd servers. I don’t know why we iterate through the both the owner and affectedMob (outside of projectiles) as dueling and such would be the same area. So in a duel event I only take the affectedMobs area. Anyways this is what I am talking about…</p>
<p><code>	ArrayList&lt;Player&gt; playersToInform = new ArrayList&lt;Player&gt;();
		playersToInform.addAll(owner.getViewArea().getPlayersInView());
		playersToInform.addAll(affectedMob.getViewArea().getPlayersInView());
		for (Player p : playersToInform) {
			p.informOfProjectile(projectile);
		}</code></p>
<p>This code you can find in the SpellHandler…</p>
<p><code>for (Object o : owner.getWatchedPlayers().getAllEntities()) {
								Player p = ((Player) o);
								p.getActionSender().sendTeleBubble(
										location.getX(), location.getY(), true);
							}</code>[/quote]<br>
That’s just wrong. First of all you don’t need to add both players watched players into one list, the victims local player list is enough(because to interact with a player you need to be in range), and you should use local player list instead of doing hundreds of iterations just to get the same list from view area. But here’s the funny part, you shouldn’t be informing players around you at all, instead they should be informed about you.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/npc-ai/549422/12">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/npc-ai/549422/12</link>
        <pubDate>Thu, 29 Jan 2015 19:17:35 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549422-12</guid>
        <source url="https://forum.moparisthebest.com/t/npc-ai/549422.rss">Npc ai</source>
      </item>
      <item>
        <title>Npc ai</title>
        <dc:creator><![CDATA[@Rodgerwilco Rodgerwilco]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/rodgerwilco">@Rodgerwilco</a> wrote:</p>
          <blockquote>
              <p>As for writing 100’s of lines of code for logic handling, you’re right. However I want to make it as moderate as possible for people who are new. I want to at some point release everything I have ever done. I figured I would post it here so people don’t go ape shit at how I did things.  :rolleyes:</p>
<p>[quote="-Nothing, post:10, topic:549422"]Can you show me an example? I have only seen code which access the watched entities lists.</p>
<p>But the system for appearance updates such as bubbles, damage, projectiles etc on RSCD is horrible, you would be better off using something like update flags and build the lists when you are preparing to send the updates to client instead of iterating through watched players every chat,damage,bubble and projectile and informing the players around you.[/quote]</p>
<p>Below you can find in rscd servers. I don’t know why we iterate through the both the owner and affectedMob (outside of projectiles) as dueling and such would be the same area. So in a duel event I only take the affectedMobs area. Anyways this is what I am talking about…</p>
<p><code>	ArrayList&lt;Player&gt; playersToInform = new ArrayList&lt;Player&gt;();
		playersToInform.addAll(owner.getViewArea().getPlayersInView());
		playersToInform.addAll(affectedMob.getViewArea().getPlayersInView());
		for (Player p : playersToInform) {
			p.informOfProjectile(projectile);
		}</code></p>
<p>This code you can find in the SpellHandler…</p>
<p><code>for (Object o : owner.getWatchedPlayers().getAllEntities()) {
								Player p = ((Player) o);
								p.getActionSender().sendTeleBubble(
										location.getX(), location.getY(), true);
							}</code></p>
<aside class="quote" data-post="10" data-topic="549422">
<div class="title">
<div class="quote-controls"></div>
 -Nothing:</div>
<blockquote>
<p>Cannons, timed objects that get removed. Custom objects that you perhaps want to move around. the possibilities are endless.</p>
</blockquote>
</aside>
<p>Yea I was wondering if I was missing something besides cannons and timed objects <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/npc-ai/549422/11">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/npc-ai/549422/11</link>
        <pubDate>Thu, 29 Jan 2015 18:10:44 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549422-11</guid>
        <source url="https://forum.moparisthebest.com/t/npc-ai/549422.rss">Npc ai</source>
      </item>
      <item>
        <title>Npc ai</title>
        <dc:creator><![CDATA[@Nothing1 -Nothing]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/nothing1">@Nothing1</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="6" data-topic="549422">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/rodgerwilco/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> Rodgerwilco:</div>
<blockquote>
<p>[quote]You don’t need NPCs to have a local list of known ëntities that would be dumb thing to do since the only reason players have it is to keep track of entities client is aware of.</p>
</blockquote>
</aside>
<p>Wouldn’t it be appropriate for the NPCs to have a collection of local entities for AI feature related purposes? So that AI scripters can use a collection that keeps track of the local entities rather than constantly scanning? Which is why I decided to post this topic here… instead of the help section so these things can be discussed and debated. Even if it’s not much of a debate.[/quote]<br>
You would need to update the list each tick anyway but if you access it more than once per tick, I think it’s not a bad idea.</p>
<p>[quote=“Rodgerwilco, post:6, topic:549422”]Maybe you could answer my question, why do (player) events iterate through the local viewarea instead of getting the watchedplayers collection?<br>
An example of the usage would be for bubbles p.informOfBubble(bubble); I am assuming this is due to that brief time that occurs between the update of the collection and the event, correct me if I am wrong?[/quote]<br>
Can you show me an example? I have only seen code which access the watched entities lists.</p>
<p>But the system for appearance updates such as bubbles, damage, projectiles etc on RSCD is horrible, you would be better off using something like update flags and build the lists when you are preparing to send the updates to client instead of iterating through watched players every chat,damage,bubble and projectile and informing the players around you.</p>
<aside class="quote" data-post="6" data-topic="549422">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/rodgerwilco/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> Rodgerwilco:</div>
<blockquote>
<p>I also saw you mentioning gameobjects and delayedevents, could you give an example?</p>
</blockquote>
</aside>
<p>Cannons, timed objects that get removed. Custom objects that you perhaps want to move around. the possibilities are endless.</p>
<aside class="quote" data-post="8" data-topic="549422">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/rodgerwilco/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> Rodgerwilco:</div>
<blockquote>
<p>Correct, as we (as a community) have already been doing that. That is very basic and I would like to attempt at something that gives a “real” feeling. What about the scenario where an NPC ‘reacts’ to multiple objectactions, local items being manipulated and even players. Then I am obligated to write hundreds and hundreds of ‘scenarios’ or reactions to handle the logic.</p>
</blockquote>
</aside>
<p>You will need to write hundreds of lines to handle logic no matter what. Build a system which you like, everyone has different opinions and each one of us prefer different things.</p>
<p>[quote=“Rodgerwilco, post:8, topic:549422”]I am thinking something a long the lines of an NPC tick, like the updateNpcPositions(); on the same thread as the GameEngine Where NPC’s can be scripted and each tick they handle logic, and possibly mixing that with a stage system. Which there, the logic relies on scanning the local region. The major event which ticks every 600ms updates the collections. Why not just let it handle it there instead of scanning?</p>
<p>Which goes back to my question…</p>
<aside class="quote">
<blockquote>
<p>Maybe you could answer my question, why do (player) events iterate through the local viewarea instead of getting the watchedplayers collection? An example of the usage would be for bubbles p.informOfBubble(bubble); I am assuming this is due to that brief time that occurs between the update of the collection and the event, correct me if I am wrong?[/quote]</p>
</blockquote>
</aside>
<p>There is no ‘scanning’ the region more than once per tick, what you are thinking of doing is exactly what findVictim() is already doing, so if you are thinking of doing a proper system just pass the region entities as argument instead of trying to keep track of them locally,the lists shouldn’t change at all during ticks unless your whole server is built wrong.</p>
<p>Again the only reason players have StatefulEntityCollections is to keep track of entities that client knows and doesn’t know and send appropriate updates to client. Only valid reason to keep track of local entities for NPCs is that you have to access them more than once per tick, that way you don’t need to iterate through the exact same list multiple times during tick.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/npc-ai/549422/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/npc-ai/549422/10</link>
        <pubDate>Wed, 28 Jan 2015 13:37:38 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549422-10</guid>
        <source url="https://forum.moparisthebest.com/t/npc-ai/549422.rss">Npc ai</source>
      </item>
      <item>
        <title>Npc ai</title>
        <dc:creator><![CDATA[@lothy Lothy]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/lothy">@lothy</a> wrote:</p>
          <blockquote>
              <p>Well if your goal is only 400 NPCs then sure, I don’t see that breaking the budget. It won’t scale to thousands though or anything like that if you’re doing things like complex path finding to enable this.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/npc-ai/549422/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/npc-ai/549422/9</link>
        <pubDate>Wed, 28 Jan 2015 10:27:59 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549422-9</guid>
        <source url="https://forum.moparisthebest.com/t/npc-ai/549422.rss">Npc ai</source>
      </item>
      <item>
        <title>Npc ai</title>
        <dc:creator><![CDATA[@Rodgerwilco Rodgerwilco]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/rodgerwilco">@Rodgerwilco</a> wrote:</p>
          <blockquote>
              <p>Correct, as we (as a community) have already been doing that. That is very basic and I would like to attempt at something that gives a “real” feeling. What about the scenario where an NPC ‘reacts’ to multiple objectactions, local items being manipulated and even players. Then I am obligated to write hundreds and hundreds of ‘scenarios’ or reactions to handle the logic.</p>
<p>I am thinking something a long the lines of an NPC tick, like the updateNpcPositions(); on the same thread as the GameEngine Where NPC’s can be scripted and each tick they handle logic, and possibly mixing that with a stage system. Which there, the logic relies on scanning the local region. The major event which ticks every 600ms updates the collections. Why not just let it handle it there instead of scanning?</p>
<p>Which goes back to my question…</p>
<blockquote>Maybe you could answer my question, why do (player) events iterate through the local viewarea instead of getting the watchedplayers collection? An example of the usage would be for bubbles p.informOfBubble(bubble); I am assuming this is due to that brief time that occurs between the update of the collection and the event, correct me if I am wrong?</blockquote>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/npc-ai/549422/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/npc-ai/549422/8</link>
        <pubDate>Wed, 28 Jan 2015 07:04:45 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549422-8</guid>
        <source url="https://forum.moparisthebest.com/t/npc-ai/549422.rss">Npc ai</source>
      </item>
      <item>
        <title>Npc ai</title>
        <dc:creator><![CDATA[@lothy Lothy]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/lothy">@lothy</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="6" data-topic="549422">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/rodgerwilco/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> Rodgerwilco:</div>
<blockquote>
<p>[quote]You don’t need NPCs to have a local list of known ëntities that would be dumb thing to do since the only reason players have it is to keep track of entities client is aware of.</p>
</blockquote>
</aside>
<p>Wouldn’t it be appropriate for the NPCs to have a collection of local entities for AI feature related purposes? So that AI scripters can use a collection that keeps track of the local entities rather than constantly scanning? Which is why I decided to post this topic here… instead of the help section so these things can be discussed and debated. Even if it’s not much of a debate.</p>
<p>Maybe you could answer my question, why do (player) events iterate through the local viewarea instead of getting the watchedplayers collection? An example of the usage would be for bubbles p.informOfBubble(bubble); I am assuming this is due to that brief time that occurs between the update of the collection and the event, correct me if I am wrong?</p>
<p>I also saw you mentioning gameobjects and delayedevents, could you give an example?[/quote]<br>
No, they can be player-driven. You would fire off NPC logic when certain conditions are met (i.e., a player walks within x steps of an NPC -&gt; notify the npc of the event, launch it’s event handling logic).</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/npc-ai/549422/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/npc-ai/549422/7</link>
        <pubDate>Wed, 28 Jan 2015 06:44:58 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549422-7</guid>
        <source url="https://forum.moparisthebest.com/t/npc-ai/549422.rss">Npc ai</source>
      </item>
      <item>
        <title>Npc ai</title>
        <dc:creator><![CDATA[@Rodgerwilco Rodgerwilco]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/rodgerwilco">@Rodgerwilco</a> wrote:</p>
          <blockquote>
              <blockquote>You don't need NPCs to have a local list of known ëntities that would be dumb thing to do since the only reason players have it is to keep track of entities client is aware of.</blockquote>
<p>Wouldn’t it be appropriate for the NPCs to have a collection of local entities for AI feature related purposes? So that AI scripters can use a collection that keeps track of the local entities rather than constantly scanning? Which is why I decided to post this topic here… instead of the help section so these things can be discussed and debated. Even if it’s not much of a debate.</p>
<p>Maybe you could answer my question, why do (player) events iterate through the local viewarea instead of getting the watchedplayers collection? An example of the usage would be for bubbles p.informOfBubble(bubble); I am assuming this is due to that brief time that occurs between the update of the collection and the event, correct me if I am wrong?</p>
<p>I also saw you mentioning gameobjects and delayedevents, could you give an example?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/npc-ai/549422/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/npc-ai/549422/6</link>
        <pubDate>Wed, 28 Jan 2015 05:40:31 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549422-6</guid>
        <source url="https://forum.moparisthebest.com/t/npc-ai/549422.rss">Npc ai</source>
      </item>
      <item>
        <title>Npc ai</title>
        <dc:creator><![CDATA[@Nothing1 -Nothing]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/nothing1">@Nothing1</a> wrote:</p>
          <blockquote>
              <p>[quote=“Rodgerwilco, post:4, topic:549422”]I don’t have a tile system.  <img src="https://forum.moparisthebest.com/images/emoji/twitter/expressionless.png?v=5" title=":expressionless:" class="emoji" alt=":expressionless:"></p>
<aside class="quote">
<blockquote>
<p>No…why the fudge would you do that? DelayedEvent is abstract and should take in the most basic version of the object required(Entity). In some cases you might need to use delayed events for game objects and when you do, you don’t need to do anything ‘hackish’. </p>
</blockquote>
</aside>
<p>I have seen some people do it <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"> not sure why, hence the (comment).</p>
<aside class="quote">
<blockquote>
<p>Each Mob already has their own “ViewArea”, and the “ViewArea” class does not hold any objects thus doesn’t increase memory usage, in fact it every method in there should be static and take in Entity argument, there are only functions to return lists of entities.</p>
</blockquote>
</aside>
<p>Right… I was reffering to the Player class and how it handles viewed players/items/objects for updating. So you’re suggesting I take a findVictim() approach and just iterate through all local entities that I want to find (you can find this in the NPC class). Wouldn’t this become quite excessive at some point and better to just populate the StatefulEntityCollection class? Each npc will have to iterate through local items/objects/npcs/players each process? Thoughts?</p>
<p>For Players, it’s used for updating, I’m questioning if it would be ideal to just have it available and deal with the constant updates of the the collection, or just to constantly iterate throw the local region. ? I haven’t done any memory analysis on it yet. I would like NPCs and their logic to be processed about every 1 second or so and not event based. Players action causes npc to spawn etcetc as Npcs will constantly be reacting to other Npcs</p>
<p>Lothy, I am not looking to have more than 400-500 Npcs spawned at any given time :s[/quote]<br>
You don’t need NPCs to have a local list of known ëntities that would be dumb thing to do since the only reason players have it is to keep track of entities client is aware of.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/npc-ai/549422/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/npc-ai/549422/5</link>
        <pubDate>Wed, 28 Jan 2015 05:27:35 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549422-5</guid>
        <source url="https://forum.moparisthebest.com/t/npc-ai/549422.rss">Npc ai</source>
      </item>
      <item>
        <title>Npc ai</title>
        <dc:creator><![CDATA[@Rodgerwilco Rodgerwilco]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/rodgerwilco">@Rodgerwilco</a> wrote:</p>
          <blockquote>
              <p>I don’t have a tile system.  <img src="https://forum.moparisthebest.com/images/emoji/twitter/expressionless.png?v=5" title=":expressionless:" class="emoji" alt=":expressionless:"></p>
<blockquote>No...why the fudge would you do that? DelayedEvent is abstract and should take in the most basic version of the object required(Entity). In some cases you might need to use delayed events for game objects and when you do, you don't need to do anything 'hackish'.</blockquote>
<p>I have seen some people do it <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"> not sure why, hence the (comment).</p>
<blockquote>Each Mob already has their own "ViewArea", and the "ViewArea" class does not hold any objects thus doesn't increase memory usage, in fact it every method in there should be static and take in Entity argument, there are only functions to return lists of entities.</blockquote>
<p>Right… I was reffering to the Player class and how it handles viewed players/items/objects for updating. So you’re suggesting I take a findVictim() approach and just iterate through all local entities that I want to find (you can find this in the NPC class). Wouldn’t this become quite excessive at some point and better to just populate the StatefulEntityCollection class? Each npc will have to iterate through local items/objects/npcs/players each process? Thoughts?</p>
<p>For Players, it’s used for updating, I’m questioning if it would be ideal to just have it available and deal with the constant updates of the the collection, or just to constantly iterate throw the local region. ? I haven’t done any memory analysis on it yet. I would like NPCs and their logic to be processed about every 1 second or so and not event based. Players action causes npc to spawn etcetc as Npcs will constantly be reacting to other Npcs</p>
<p>Lothy, I am not looking to have more than 300-400 Npcs spawned at any given time :s</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/npc-ai/549422/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/npc-ai/549422/4</link>
        <pubDate>Tue, 27 Jan 2015 20:08:43 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549422-4</guid>
        <source url="https://forum.moparisthebest.com/t/npc-ai/549422.rss">Npc ai</source>
      </item>
      <item>
        <title>Npc ai</title>
        <dc:creator><![CDATA[@lothy Lothy]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/lothy">@lothy</a> wrote:</p>
          <blockquote>
              <p>This would potentially create a lot of extra load for the server. Maybe you’d do it with some very special scriptable units but you wouldn’t want to have 5000 NPCs doing what you’ve described.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/npc-ai/549422/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/npc-ai/549422/3</link>
        <pubDate>Tue, 27 Jan 2015 19:52:43 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549422-3</guid>
        <source url="https://forum.moparisthebest.com/t/npc-ai/549422.rss">Npc ai</source>
      </item>
      <item>
        <title>Npc ai</title>
        <dc:creator><![CDATA[@Nothing1 -Nothing]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/nothing1">@Nothing1</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="1" data-topic="549422">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/rodgerwilco/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> Rodgerwilco:</div>
<blockquote>
<p>I have seen some half ass hackish ways of having NPCs “react” to a players actions. I myself can admit to participating as RSCD based servers are extremely coupled code wise. Marwolfs post in the help section, where people reacted by showing off npc vs npc battles is a clear example of how limited we are with an actual AI system. It has been done since 2008 (maybe before) and yet the only actual public example is xEnts from RSCA source (Which again doesn’t do anything with the highly coupled code and just embraces it)</p>
</blockquote>
</aside>
<p>Everything in RSCD is half assed and hackish. Also there is no “AI” system, shitty hardcoded code everywhere is what it is.</p>
<p>[quote=“Rodgerwilco, post:1, topic:549422”]By adding the RangeEvent and its methods to the the Mob class, you can call on NPC’s having the ability to range whatever you want them too. The same thing with Mage, Trading, Dueling etc etc. I so far got to the point where you can trade an npc but the npc doesn’t offer anything (yet)</p>
<p>The difference between an NPC and a Player is that the server handles the logic for npcs and not sending packets to any client while the player requires packets.</p>
<p>Which brings me to my question. Is it better to give the MobileEntity class more features (maybe just make them abstract and handle the methods differently in both the NPC and Player class) or should I just take the event package and duplicate it for NPC usage (which would be stupid, but I have seen people do it for some reason) because the DelayedEventHandler should handle all events.</p>
<pre><code>public DelayedEvent(Mob owner, int delay) {
    this.owner = owner;
    this.delay = delay;
}
</code></pre>
<p>Giving each MobileEntity its own viewarea, I am not worried about for memory saving as I won’t have more than 300-400 loaded any any single time.</p>
<p>What are your thoughts?[/quote]<br>
The best approach is to give Mob class every possible function that Mobs have in common, interactions(attack, follow, whatever), stats, other misc variables as well.</p>
<aside class="quote" data-post="1" data-topic="549422">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/rodgerwilco/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> Rodgerwilco:</div>
<blockquote>
<p>should I just take the event package and duplicate it for NPC usage (which would be stupid, but I have seen people do it for some reason)</p>
</blockquote>
</aside>
<p>No…why the fudge would you do that? DelayedEvent is abstract and should take in the most basic version of the object required(Entity). In some cases you might need to use delayed events for game objects and when you do, you don’t need to do anything ‘hackish’.</p>
<aside class="quote" data-post="1" data-topic="549422">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/rodgerwilco/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> Rodgerwilco:</div>
<blockquote>
<p>Giving each MobileEntity its own viewarea, I am not worried about for memory saving as I won’t have more than 300-400 loaded any any single time.</p>
</blockquote>
</aside>
<p>Each Mob already has their own “ViewArea”, and the “ViewArea” class does not hold any objects thus doesn’t increase memory usage, in fact it every method in there should be static and take in Entity argument, there are only functions to return lists of entities.<br>
PS. Get rid off the shitty tile management already…</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/npc-ai/549422/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/npc-ai/549422/2</link>
        <pubDate>Tue, 27 Jan 2015 19:29:27 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549422-2</guid>
        <source url="https://forum.moparisthebest.com/t/npc-ai/549422.rss">Npc ai</source>
      </item>
      <item>
        <title>Npc ai</title>
        <dc:creator><![CDATA[@Rodgerwilco Rodgerwilco]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/rodgerwilco">@Rodgerwilco</a> wrote:</p>
          <blockquote>
              <p>I have seen some half ass hackish ways of having NPCs “react” to a players actions. I myself can admit to participating as RSCD based servers are extremely coupled code wise. Marwolfs post in the help section, where people reacted by showing off npc vs npc battles is a clear example of how limited we are with an actual AI system. It has been done since 2008 (maybe before) and yet the only actual public example is xEnts from RSCA source (Which again doesn’t do anything with the highly coupled code and just embraces it)</p>
<p>In the RSCD source we have Entity -&gt; Mob -&gt; NPC &amp; Player which determines the differences between a Player and NPC</p>
<p>By adding the RangeEvent and its methods to the the Mob class, you can call on NPC’s having the ability to range whatever you want them too. The same thing with Mage, Trading, Dueling etc etc. I so far got to the point where you can trade an npc but the npc doesn’t offer anything (yet)</p>
<p>The difference between an NPC and a Player is that the server handles the logic for npcs and not sending packets to any client while the player requires packets.</p>
<p>Which brings me to my question. Is it better to give the MobileEntity class more features (maybe just make them abstract and handle the methods differently in both the NPC and Player class) or should I just take the event package and duplicate it for NPC usage (which would be stupid, but I have seen people do it for some reason) because the DelayedEventHandler should handle all events.</p>
<pre><code>public DelayedEvent(Mob owner, int delay) {
    this.owner = owner;
    this.delay = delay;
}
</code></pre>
<p>Giving each MobileEntity its own viewarea, I am not worried about for memory saving as I won’t have more than 300-400 loaded any any single time.</p>
<p>What are your thoughts?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/npc-ai/549422/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/npc-ai/549422/1</link>
        <pubDate>Mon, 26 Jan 2015 20:17:56 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-549422-1</guid>
        <source url="https://forum.moparisthebest.com/t/npc-ai/549422.rss">Npc ai</source>
      </item>
  </channel>
</rss>
