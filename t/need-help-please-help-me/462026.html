<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/need-help-please-help-me/462026 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 18:50:39 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Need help! please help me! - Runescape - moparisthebest.com</title>
    <meta name="description" content="can some 1 add this to this soucre http://uppit.com/ts5gldpxtg7a/Source.rar   and then upload file to uppit or another downloading site then reply with link :slight_smile: if you need weclient: http://uppit.com/p1n7ih4ju&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="462026.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Need help! please help me!&#39;" href="462026.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://img534.imageshack.us/img534/9294/posb.png" />
<meta property="og:image" content="http://img534.imageshack.us/img534/9294/posb.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/need-help-please-help-me/462026" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/need-help-please-help-me/462026" />
<meta property="og:title" content="Need help! please help me!" />
<meta name="twitter:title" content="Need help! please help me!" />
<meta property="og:description" content="can some 1 add this to this soucre http://uppit.com/ts5gldpxtg7a/Source.rar   and then upload file to uppit or another downloading site then reply with link üôÇ  if you need weclient: http://uppit.com/p1n7ih4juhxf/Client.rar             [COLOR=‚ÄúRed‚Äù][CENTER]!READ THE TEXT ON END ESPECIALLY IF YOU WAS CUSTOMER![/CENTER][/COLOR]  Welcome to my guide: how to include Player Owned Shops on your server!  Made with notepad so layout isnt the best, but it does the thing! :)   Lets start with ..." />
<meta name="twitter:description" content="can some 1 add this to this soucre http://uppit.com/ts5gldpxtg7a/Source.rar   and then upload file to uppit or another downloading site then reply with link üôÇ  if you need weclient: http://uppit.com/p1n7ih4juhxf/Client.rar             [COLOR=‚ÄúRed‚Äù][CENTER]!READ THE TEXT ON END ESPECIALLY IF YOU WAS CUSTOMER![/CENTER][/COLOR]  Welcome to my guide: how to include Player Owned Shops on your server!  Made with notepad so layout isnt the best, but it does the thing! :)   Lets start with ..." />
<meta property="article:published_time" content="2012-09-25T13:18:48+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="462026.html">Need help! please help me!</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/mimmi1134.html'><span itemprop='name'>mimmi1134</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-09-25T13:18:48Z'>
            <time itemprop='dateModified' datetime='2016-08-04T00:21:44Z' class='post-time'>
              August 4, 2016, 12:21am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>can some 1 add this to this soucre <a href="http://uppit.com/ts5gldpxtg7a/Source.rar" rel="nofollow noopener">http://uppit.com/ts5gldpxtg7a/Source.rar</a>   and then upload file to uppit or another downloading site then reply with link <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"><br>
if you need weclient: <a href="http://uppit.com/p1n7ih4juhxf/Client.rar" rel="nofollow noopener">http://uppit.com/p1n7ih4juhxf/Client.rar</a></p>
<p><img src="http://img534.imageshack.us/img534/9294/posb.png" alt width="" height=""><br>
<img src="http://img90.imageshack.us/img90/4535/pos2.png" alt width="" height=""><br>
<img src="http://img834.imageshack.us/img834/1020/pos3.png" alt width="" height=""><br>
<img src="http://img26.imageshack.us/img26/4783/pos4.png" alt width="" height=""><br>
<img src="http://img809.imageshack.us/img809/4829/pos5.png" alt width="" height=""></p>
<hr>
<p>[COLOR=‚ÄúRed‚Äù][CENTER]!READ THE TEXT ON END ESPECIALLY IF YOU WAS CUSTOMER![/CENTER][/COLOR]<br>
Welcome to my guide: how to include Player Owned Shops on your server!</p>
<pre><code>Made with notepad so layout isnt the best, but it does the thing! :)
</code></pre>
<hr>
<pre><code>Lets start with saving! Open your player.java and add these variables:
</code></pre>
<p><code>	public int sellingId;
	public int sellingN;
	public int sellingS;
	public int playerCollect;
	public int playerShop[] = new int[10];
	public int playerShopN[] = new int[10];
	public int playerShopP[] = new int[10];
	public Client myShopClient;</code></p>
<pre><code>They basically stores item ids, item amount etc. You can easily higher the maxium
amount of items for sale, but i liked 10! :)
</code></pre>
<p>[CODE]	open PlayerSave.java and put this on loading (like above ‚Äú} else if (token.equals(‚ÄúEP‚Äù)) {‚Äù):</p>
<pre><code>	} else if (token.equals("shopcollect")) {
	p.playerCollect = Integer.parseInt(token2);[/CODE]

then search for "readmode =" and add this with the others:

} else if (line.equals("[SHOP]")) {		ReadMode = 10;

also, if you scroll up a bit you'll see "break;"
below it add this:
</code></pre>
<p><code>	case 10:
		if (token.equals("character-shop")) {
			p.playerShop[Integer.parseInt(token3[0])] = Integer.parseInt(token3[1]);
			p.playerShopP[Integer.parseInt(token3[0])] = Integer.parseInt(token3[2]);
			p.playerShopN[Integer.parseInt(token3[0])] = Integer.parseInt(token3[3]);
		} 
	break;</code></p>
<pre><code>Then for the saving, because theres nothing to load if no saving!

scroll down a bit until you see something like this: 
</code></pre>
<p><code>	characterfile.write("character-rights = ", 0, 19);
	characterfile.write(Integer.toString(p.playerRights), 0, Integer.toString(p.playerRights).length());
	characterfile.newLine();
</code><br>
under it add this:</p>
<p><code>	characterfile.write("shopcollect = ", 0, 14);
	characterfile.write(Integer.toString(p.playerCollect), 0, Integer.toString(p.playerCollect).length());
	characterfile.newLine();
</code><br>
then for the last part with saving, search for /<em>ignores</em>/ (down), its commented out in most of the PI:s</p>
<pre><code>add this above /*ignores*/
</code></pre>
<p><code>		/*SHOP*/
			characterfile.write("[SHOP]", 0, 6);
			characterfile.newLine();
			for (int i = 0; i &lt; p.playerShop.length; i++) {
				if (p.playerShop[i] &gt; 0) {
					characterfile.write("character-shop = ", 0, 17);
					characterfile.write(Integer.toString(i), 0, Integer.toString(i).length());
					characterfile.write("	", 0, 1);
					characterfile.write(Integer.toString(p.playerShop[i]), 0, Integer.toString(p.playerShop[i]).length());
					characterfile.write("	", 0, 1);
					characterfile.write(Integer.toString(p.playerShopP[i]), 0, Integer.toString(p.playerShopP[i]).length());
					characterfile.write("	", 0, 1);
					characterfile.write(Integer.toString(p.playerShopN[i]), 0, Integer.toString(p.playerShopN[i]).length());
					characterfile.newLine();
				}
			}
			characterfile.newLine();</code></p>
<pre><code>Time to add actual shopping system! :) Open shopassistant.java

under public double getItemShopValue(int ItemID, int Type, int fromSlot) { add
</code></pre>
<p><code>		if(c.myShopId == 7390){
			return c.myShopClient.playerShopP[fromSlot];
		}</code></p>
<pre><code>and add all these methods :D
</code></pre>
<p>[CODE]	public void openPlayerShop(Client o){	<br>
if(o == null || o.properLogout)<br>
return;	<br>
c.getItems().resetItems(3823);<br>
resetShop(o);<br>
c.myShopClient = o;<br>
c.myShopId = 7390;<br>
c.isShopping = true;<br>
c.getPA().sendFrame248(3824, 3822);<br>
c.getPA().sendFrame126(o.playerName+‚Äús shop!‚Äù, 3901);<br>
}<br>
public int[] fixArray(int[] array){<br>
int arrayPos = 0;<br>
int[] newArray = new int[array.length];<br>
for(int x = 0; x &lt; array.length; x++){<br>
if(array[x] != 0){<br>
newArray[arrayPos] = array[x];<br>
arrayPos++;<br>
}<br>
}<br>
return newArray;<br>
}</p>
<pre><code>public void fixShop(Client o){
	o.playerShop = fixArray(o.playerShop);
	o.playerShopN = fixArray(o.playerShopN);
	o.playerShopP = fixArray(o.playerShopP);	
}

public void resetShop(Client o) {
	synchronized(c) {
		fixShop(o);
		for (int x = 0; x &lt; 10; x++) {
			if (o.playerShopN[x] &lt;= 0) {
				o.playerShop[x] = 0;
			}
		}
		int TotalItems = 0;
		for (int i = 0; i &lt; 10; i++) {
			if (o.playerShop[i] &gt; 0) {
				TotalItems++;
			}
		}
		if (TotalItems &gt; 10) {
			TotalItems = 10;
		}
		c.getOutStream().createFrameVarSizeWord(53);
		c.getOutStream().writeWord(3900);
		c.getOutStream().writeWord(TotalItems);
		int TotalCount = 0;
		for (int i = 0; i &lt; o.playerShop.length; i++) {
			if (o.playerShop[i] &gt; 0) {
				if (o.playerShopN[i] &gt; 254) {
					c.getOutStream().writeByte(255); 					
					c.getOutStream().writeDWord_v2(o.playerShopN[i]);	
				} else {
					c.getOutStream().writeByte(o.playerShopN[i]);
				}
				c.getOutStream().writeWordBigEndianA((o.playerShop[i]+1));
				TotalCount++;
			}
			if (TotalCount &gt; TotalItems) {
				break;
			}
		}
		c.getOutStream().endFrameVarSizeWord();
		c.flushOutStream();	
	}
}
[/CODE]


You may now think like "fix shop..? what?!" well its to resort your array, like you have
item on slot 1, 2 and 3 and someone buys all out from 2 then there would be empty space,
not nice IMO so that fixs the problem and moves them all =)

search for "buyFromShopPrice"

add this under:
</code></pre>
<p>[CODE]		if (c.myShopId == 7390 &amp;&amp; c.myShopClient != null &amp;&amp; !c.myShopClient.playerName.equals(c.playerName)) {<br>
c.sendMessage(c.getItems().getItemName(removeId)+": currently costs " + c.myShopClient.playerShopP[removeSlot] + " coins.");<br>
return;<br>
}else if (c.myShopId == 7390 &amp;&amp; c.myShopClient != null &amp;&amp; c.myShopClient.playerName.equals(c.playerName)) {<br>
c.sendMessage(c.getItems().getItemName(removeId)+": currently costs " + c.playerShopP[removeSlot] + " coins.");<br>
return;<br>
}</p>
<pre><code>then search for "sellToShopPrice"

and under it add

if(c.myShopId == 7390){
	c.sendMessage("You choose your price when using POS.");
	return;
}

then scroll down a lil or search for "sellItem" and under add 

	if(c.myShopId == 7390){
		for (int i : Config.ITEM_TRADEABLE)  {
			if(i == itemID) {
				c.sendMessage("You can't sell this item.");
				return false;
			}		
		}
		if(c.playerName.equals(c.myShopClient.playerName)){
		c.sellingId = itemID;
		c.sellingN = amount;
		c.sellingS = fromSlot;
		c.xInterfaceId = 7390;
		c.outStream.createFrame(27);
		}else{
			c.sendMessage("You can only sell items on your own store.");
		}
		return true;
	}

then for the last part this class

search for buyItem and under it add alll this

	if(c.myShopId == 7390 &amp;&amp; c.myShopClient != null &amp;&amp; !c.myShopClient.properLogout &amp;&amp; !c.playerName.equals(c.myShopClient.playerName)){
		int bought = 0;
		int price = c.myShopClient.playerShopP[fromSlot];
		if(amount &gt; c.myShopClient.playerShopN[fromSlot])
			amount = c.myShopClient.playerShopN[fromSlot];
		for(int x = 0; x &lt; amount; x++){
			if(c.getItems().playerHasItem(995, c.myShopClient.playerShopP[fromSlot]) &amp;&amp; c.getItems().freeSlots() &gt; 0){
				c.getItems().deleteItem2(995, c.myShopClient.playerShopP[fromSlot]);
				c.getItems().addItem(c.myShopClient.playerShop[fromSlot], 1);
				c.myShopClient.playerShopN[fromSlot]--;
				c.myShopClient.playerCollect += c.myShopClient.playerShopP[fromSlot];
				if(c.myShopClient.playerShopN[fromSlot] == 0){
					c.myShopClient.playerShop[fromSlot] = 0;
					c.myShopClient.playerShopP[fromSlot] = 0;
				}
				bought++;
			}else{
				c.sendMessage("Not enought space or money.");
				break;
			}
		}
		if(bought &gt; 0){
		resetShop(c.myShopClient);
		c.getItems().resetItems(3823);;
		c.sendMessage("You just bought "+bought+" "+c.getItems().getItemName(itemID)+" for "+ (bought*price));
		c.myShopClient.sendMessage(c.playerName+" has bought "+bought+" "+c.getItems().getItemName(itemID)+" from you!");
		c.myShopClient.sendMessage("You now have "+c.myShopClient.playerCollect+" coins to collect (::collect)");
		}
		return false;
	}else if(c.myShopId == 7390 &amp;&amp; c.myShopClient != null &amp;&amp; !c.myShopClient.properLogout &amp;&amp; c.playerName.equals(c.myShopClient.playerName)){
		if(amount &gt; c.myShopClient.playerShopN[fromSlot])
			amount = c.myShopClient.playerShopN[fromSlot];
		for(int x = 0; x &lt; amount; x++){
			if(c.getItems().freeSlots() &gt; 0){
				c.getItems().addItem(c.myShopClient.playerShop[fromSlot], 1);
				c.myShopClient.playerShopN[fromSlot]--;
				if(c.myShopClient.playerShopN[fromSlot] == 0){
					c.myShopClient.playerShop[fromSlot] = 0;
					c.myShopClient.playerShopP[fromSlot] = 0;
					fixShop(c);
				}
			}else{
				c.sendMessage("Not enought space.");
				break;
			}
		}
		resetShop(c.myShopClient);
		c.getItems().resetItems(3823);
		return false;
	}else if(c.myShopId == 7390){
		return false;
	}

	now open BankX2(at packets) and add following under "int Xamount = c.getInStream().readDWord();"

	if(c.sellingId &gt; 0 &amp;&amp; c.sellingN &gt; 0 &amp;&amp; c.xInterfaceId == 7390){
		for (int i : Config.ITEM_TRADEABLE)  {
			if(i == c.sellingId) {
				c.sendMessage("You can't sell this item.");
				c.sellingId = 0;
				c.sellingN = 0;
				c.sellingS = 0;
				return;
			}		
		}
		if(c.sellingN &gt; c.getItems().getItemAmount(c.sellingId))
			c.sellingN = c.getItems().getItemAmount(c.sellingId);
		int slot = -1;
		for(int x = 0; x &lt; 10; x++){
			if(c.playerShop[x] == 0){
				slot = x;
				break;
			}
		}
		if(slot == -1){
			c.sendMessage("You can only be selling 10 items at once!");
			c.sellingId = 0;
			c.sellingN = 0;
			c.sellingS = 0;
			return;
		}
		if(c.getItems().playerHasItem(c.sellingId, c.sellingN, c.sellingS)){
			c.getItems().deleteItem2(c.sellingId, c.sellingN);
			c.playerShop[slot] = c.sellingId;
			c.playerShopN[slot] = c.sellingN;
			c.playerShopP[slot] = Xamount;
			c.sendMessage("You put your items on sale.");
			c.sendMessage("Check your items by using ::myshop and collect coins ::collect");
		}
		c.getShops().openPlayerShop(c);
		c.sellingId = 0;
		c.sellingN = 0;
		c.sellingS = 0;
		return;
	}
</code></pre>
<p>[/CODE]<br>
also import server.Config;</p>
<pre><code>Time to open commands.java and add these commands:
</code></pre>
<p><code>		if(playerCommand.equalsIgnoreCase("collect")){
			if(c.playerCollect &gt; 0){
			c.sendMessage("You succesfully collected "+c.playerCollect+" coins.");
			c.getItems().addItem(995, c.playerCollect);
			c.playerCollect = 0;
			}else{
			c.sendMessage("You dont have anything to collect");
			}
		}
		if(playerCommand.equalsIgnoreCase("myshop")){
			if(c.absX &gt; 2527 &amp;&amp; c.absX &lt; 2634 &amp;&amp; c.absY &gt; 3066 &amp;&amp; c.absY &lt; 3115){
			c.getShops().openPlayerShop(c);
			}else
			c.sendMessage("You can only view your shops in home.");
		}</code></p>
<pre><code>then for right click shopping, open combatAssistant, yes you readed right! combatAssistant
Oh, you're asking why? because "View shop" button is actually attack button replaced with
view shop so no client changes are needed! :) No worries, it wont attack anyone nor cause
any bugs! :)

search for checkreqs() { and under "if(Server.playerHandler.players[c.playerIndex] == null) {
					return false;
				   }"
add this:
</code></pre>
<p><code>		if(!Server.playerHandler.players[c.playerIndex].inWild() &amp;&amp; !Server.playerHandler.players[c.playerIndex].inDuelArena()) {
			c.getShops().openPlayerShop((Client)Server.playerHandler.players[c.playerIndex]);
			c.getCombat().resetPlayerAttack();
			return false;
		}</code></p>
<pre><code>One more thing before we are done! :) Open client.java and search for "getPA().showOption(3, 0, "Attack", 1);"

Under it add:
</code></pre>
<p><code>		} else if (!inWild() &amp;&amp; !inDuelArena() &amp;&amp; safeTimer &lt;= 0 &amp;&amp; !inGWD() &amp;&amp; !inPcBoat() &amp;&amp; !inPcGame()){ //this makes it so attack option is visible on wild and challenge in duel =)
		getPA().showOption(3, 0, "View shop", 1);
getPA().walkableInterface(-1);</code></p>
<p>and you‚Äôre done! For all the people bought this from me not releasing THANKS! and sorry for releasing but got enought from unofficial releases and reselling. This has been already released in 100 places so you really didn‚Äôt lost anything, not my fault theres rats all around internet trying to piss off people. And i won‚Äôt release any of my sales as long as they don‚Äôt get released 100 times or so.</p>
<p>For asking a forgive all who bought this code from me I am giving UPDATE to this POS system to keep your server unique with this (adds slot buying, like you have to buy slots to use and at first you got only one) :)[/QUOTE]</p>
      </div>

      <meta itemprop='headline' content='Need help! please help me!'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/need-help-please-help-me/462026 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 18:50:40 GMT -->
</html>
