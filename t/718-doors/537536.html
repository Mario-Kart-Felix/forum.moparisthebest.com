<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/718-doors/537536 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Aug 2019 09:11:08 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>[718] Doors - Runescape - moparisthebest.com</title>
    <meta name="description" content="Not sure if Matrix already had doors, but w.e. Only known bug is that if you relog/reload a region the door will go poof (is probably is easy fix [will post once I&amp;#39;ve fixed]). 

If any doors go poof or change to the wron&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="537536.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;[718] Doors&#39;" href="537536.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/718-doors/537536" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/718-doors/537536" />
<meta property="og:title" content="[718] Doors" />
<meta name="twitter:title" content="[718] Doors" />
<meta property="og:description" content="Not sure if Matrix already had doors, but w.e. Only known bug is that if you relog/reload a region the door will go poof (is probably is easy fix [will post once I’ve fixed]).  If any doors go poof or change to the wrong object when clicking, just add the door id into the SpecialDoors array and the door wont change object id’s, only faces.  [B]Doors.java[/B]  [CODE=java]  package com.rs.game.content.objects;  import java.util.ArrayList;  import com.rs.game.World;  import com.rs.game.WorldObject; ..." />
<meta name="twitter:description" content="Not sure if Matrix already had doors, but w.e. Only known bug is that if you relog/reload a region the door will go poof (is probably is easy fix [will post once I’ve fixed]).  If any doors go poof or change to the wrong object when clicking, just add the door id into the SpecialDoors array and the door wont change object id’s, only faces.  [B]Doors.java[/B]  [CODE=java]  package com.rs.game.content.objects;  import java.util.ArrayList;  import com.rs.game.World;  import com.rs.game.WorldObject; ..." />
<meta property="article:published_time" content="2013-12-24T14:11:04+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="537536.html">[718] Doors</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/south-park.html'><span itemprop='name'>south-park</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2013-12-24T14:11:04Z'>
            <time itemprop='dateModified' datetime='2016-08-04T11:19:05Z' class='post-time'>
              August 4, 2016, 11:19am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Not sure if Matrix already had doors, but w.e. Only known bug is that if you relog/reload a region the door will go poof (is probably is easy fix [will post once I’ve fixed]).</p>
<p>If any doors go poof or change to the wrong object when clicking, just add the door id into the SpecialDoors array and the door wont change object id’s, only faces.</p>
<p>[B]Doors.java[/B]</p>
<p>[CODE=java]<br>
package com.rs.game.content.objects;</p>
<p>import java.util.ArrayList;</p>
<p>import com.rs.game.World;<br>
import com.rs.game.WorldObject;</p>
<p>/**</p>
<ul>
<li>Manages all the doors in the game.</li>
<li>
<span class="mention">@author</span> Thomas</li>
<li>
</li>
</ul>
<p>*/<br>
public class Doors {</p>
<pre><code>/**
 * Constructs a new door.
 * @param door The door we're managing.
 */
public Doors(WorldObject door) {
	this.object = door;
	this.originalId = object.getId();
	this.currentId = object.getId();
	this.originalX = object.getX();
	this.originalY = object.getY();
	this.currentX = originalX;
	this.currentY = originalY;
	this.originalRotation = object.getRotation();
	this.currentRotation = originalRotation;
	this.open = object.getDefinitions().getFirstOption().equalsIgnoreCase("close");
}

/**
 * The door we're managing.
 */
private WorldObject object;

/**
 * The doors original object id.
 */
private int originalId;

/**
 * The doors current object id.
 */
private int currentId;

/**
 * The doors original x coordinate.
 */
private int originalX;

/**
 * The doors original y coordinate.
 */
private int originalY;

/**
 * The doors current x coordinate.
 */
private int currentX;

/**
 * The doors current y coordinate.
 */
private int currentY;

/**
 * The doors original rotation.
 */
private int originalRotation;

/**
 * The doors current rotation.
 */
private int currentRotation;

/**
 * Is the door open?
 */
private boolean open;

/**
 * An array of all the doors.
 */
private static ArrayList&lt;Doors&gt; doors = new ArrayList&lt;Doors&gt;();

/**
 * An array list of special doors (these doors do not change object id's).
 */
private static final int[] SpecialDoors = {3014, 24375, 24374, 24379, 24378, 15536};

/**
 * Gets the door to manage.
 * @param door The door to manage.
 * @return The &lt;code&gt;Doors&lt;/code&gt;.
 */
private static Doors getDoor(WorldObject door) {
	for (Doors d : doors) {
		if (d != null)
			if (d.currentId == door.getId() &amp;&amp; d.currentX == door.getX() &amp;&amp; d.currentY == door.getY()) {
				return d;
			}
	}
	Doors d = new Doors(door);
	doors.add(d);
	return d;
}

/**
 * Manages a door.
 * @param door The door we're managing.
 */
public static void manageDoor(WorldObject door) {
	Doors d = getDoor(door);
	if (d == null)
		return;
	int xAdjustment = 0, yAdjustment = 0;
	if (d.object.getType() == 0) {
		if (!d.open) {
			if (d.originalRotation == 0 &amp;&amp; d.currentRotation == 0) {
				xAdjustment = -1;
			} else if (d.originalRotation == 1 &amp;&amp; d.currentRotation == 1) {
				yAdjustment = 1;
			} else if (d.originalRotation == 2 &amp;&amp; d.currentRotation == 2) {
				xAdjustment = 1;
			} else if (d.originalRotation == 3 &amp;&amp; d.currentRotation == 3) {
				yAdjustment = -1;
			}
		} else if (d.open) {
			if (d.originalRotation == 0 &amp;&amp; d.currentRotation == 0) {
				yAdjustment = 1;
			} else if (d.originalRotation == 1 &amp;&amp; d.currentRotation == 1) {
				xAdjustment = 1;
			} else if (d.originalRotation == 2 &amp;&amp; d.currentRotation == 2) {
				yAdjustment = -1;
			} else if (d.originalRotation == 3 &amp;&amp; d.currentRotation == 3) {
				xAdjustment = -1;
			}
		}
	} else if (d.object.getType() == 9) {
		if (!d.open) {
			if (d.originalRotation == 0 &amp;&amp; d.currentRotation == 0) {
				xAdjustment = 1;
			} else if (d.originalRotation == 1 &amp;&amp; d.currentRotation == 1) {
				xAdjustment = 1;
			} else if (d.originalRotation == 2 &amp;&amp; d.currentRotation == 2) {
				xAdjustment = -1;
			} else if (d.originalRotation == 3 &amp;&amp; d.currentRotation == 3) {
				xAdjustment = -1;
			}
		} else if (d.open) {
			if (d.originalRotation == 0 &amp;&amp; d.currentRotation == 0) {
				xAdjustment = 1;
			} else if (d.originalRotation == 1 &amp;&amp; d.currentRotation == 1) {
				xAdjustment = 1;
			} else if (d.originalRotation == 2 &amp;&amp; d.currentRotation == 2) {
				xAdjustment = -1;
			} else if (d.originalRotation == 3 &amp;&amp; d.currentRotation == 3) {
				xAdjustment = -1;
			}
		}
	}
	if (d.originalX == d.currentX &amp;&amp; d.originalY == d.currentY) {
		d.currentX += xAdjustment;
		d.currentY += yAdjustment;
	} else {
		d.currentX = d.originalX;
		d.currentY = d.originalY;
	}
	if (d.currentId == d.originalId) {
		if (!d.open) {
			d.currentId += 1;
		} else if (d.open) {
			d.currentId -= 1;
		}
	} else if (d.currentId != d.originalId) {
		if (!d.open) {
			d.currentId -= 1;
		} else if (d.open) {
			d.currentId += 1;
		}
	}
	for (int i = 0; i &lt; SpecialDoors.length; i++) {
		if (d.originalId == SpecialDoors[i])
			d.currentId = d.originalId;
	}
	if (d.object.getType() == 0) {
		if (!d.open) {
			if (d.originalRotation == 0 &amp;&amp; d.currentRotation == 0) {
				d.currentRotation = 1;
			} else if (d.originalRotation == 1 &amp;&amp; d.currentRotation == 1) {
				d.currentRotation = 2;
			} else if (d.originalRotation == 2 &amp;&amp; d.currentRotation == 2) {
				d.currentRotation = 3;
			} else if (d.originalRotation == 3 &amp;&amp; d.currentRotation == 3) {
				d.currentRotation = 0;
			} else if (d.originalRotation != d.currentRotation) {
				d.currentRotation = d.originalRotation;
			}
		} else if (d.open) {
			if (d.originalRotation == 0 &amp;&amp; d.currentRotation == 0) {
				d.currentRotation = 3;
			} else if (d.originalRotation == 1 &amp;&amp; d.currentRotation == 1) {
				d.currentRotation = 0;
			} else if (d.originalRotation == 2 &amp;&amp; d.currentRotation == 2) {
				d.currentRotation = 1;
			} else if (d.originalRotation == 3 &amp;&amp; d.currentRotation == 3) {
				d.currentRotation = 2;
			} else if (d.originalRotation != d.currentRotation) {
				d.currentRotation = d.originalRotation;
			}
		}
	} else if (d.object.getType() == 9) {
		if (!d.open) {
			if (d.originalRotation == 0 &amp;&amp; d.currentRotation == 0) {
				d.currentRotation = 3;
			} else if (d.originalRotation == 1 &amp;&amp; d.currentRotation == 1) {
				d.currentRotation = 2;
			} else if (d.originalRotation == 2 &amp;&amp; d.currentRotation == 2) {
				d.currentRotation = 1;
			} else if (d.originalRotation == 3 &amp;&amp; d.currentRotation == 3) {
				d.currentRotation = 0;
			} else if (d.originalRotation != d.currentRotation) {
				d.currentRotation = d.originalRotation;
			}
		} else if (d.open) {
			if (d.originalRotation == 0 &amp;&amp; d.currentRotation == 0) {
				d.currentRotation = 3;
			} else if (d.originalRotation == 1 &amp;&amp; d.currentRotation == 1) {
				d.currentRotation = 0;
			} else if (d.originalRotation == 2 &amp;&amp; d.currentRotation == 2) {
				d.currentRotation = 1;
			} else if (d.originalRotation == 3 &amp;&amp; d.currentRotation == 3) {
				d.currentRotation = 2;
			} else if (d.originalRotation != d.currentRotation) {
				d.currentRotation = d.originalRotation;
			}
		}
	}
	World.removeObject(door, true);
	World.spawnObject(new WorldObject(d.currentId, d.object.getType(), d.currentRotation, d.currentX, d.currentY, d.object.getPlane()), true);
}

/**
 * Is the object a door?
 * @param name The object name.
 * @return If yes &lt;code&gt;true&lt;/code&gt;, if no &lt;code&gt;false&lt;/code&gt;.
 */
public static boolean isDoor(String name) {
	return name.equals("Door");
}
</code></pre>
<p>}<br>
[/CODE]</p>
<p>In [B]ObjectHandler.java[/B]</p>
<p><code>
if (Doors.isDoor(object.getDefinitions().name)) {
					Doors.manageDoor(object);
				}
</code></p>
<p>To fix the door updating (when changing regions).</p>
<p>Go into [B]World.java[/B] in the method [B]public static final void updateEntityRegion(Entity entity)[/B] at the bottom you should see:</p>
<p><code>
} else {
			if (entity instanceof Player) {
				Player player = (Player) entity;
</code></p>
<p>Add this:</p>
<p><code>
Region region = getRegion(regionId);
				if (region.getSpawnedObjects() != null) {
					for (WorldObject object : region.getSpawnedObjects()) {
						if (object != null) {
							player.getPackets().sendDestroyObject(object);
							player.getPackets().sendSpawnedObject(object);
						}
					}
				}
</code></p>
<p>Then go to the method [B]public static final void removeObject(WorldObject object, boolean clip)[/B] Still in [B]World.java[/B] and add this:</p>
<p><code>
getRegion(regionId).removeObject(object);
</code></p>
<p>Above this:</p>
<p><code>
getRegion(regionId).addRemovedObject(object);
</code></p>
<p>Lastly go into [B]Region.java[/B] and replace</p>
<p><code>
private List&lt;WorldObject&gt; spawnedObjects;
</code></p>
<p>With</p>
<p><code>
private static List&lt;WorldObject&gt; spawnedObjects;
</code></p>
      </div>

      <meta itemprop='headline' content='[718] Doors'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Ashi.html'><span itemprop='name'>Ashi</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2013-12-24T14:18:50Z'>
            <time itemprop='dateModified' datetime='2016-08-04T11:19:05Z' class='post-time'>
              August 4, 2016, 11:19am
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>At least follow conventions <img src="../../images/emoji/twitter/frowningae52.png?v=5" title=":frowning:" class="emoji" alt=":frowning:"></p>
      </div>

      <meta itemprop='headline' content='[718] Doors'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/south-park.html'><span itemprop='name'>south-park</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2013-12-24T14:21:18Z'>
            <time itemprop='dateModified' datetime='2016-08-04T11:19:05Z' class='post-time'>
              August 4, 2016, 11:19am
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="2" data-topic="537536">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/arcik/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> Arcik:</div>
<blockquote>
<p>At least follow conventions <img src="../../images/emoji/twitter/frowningae52.png?v=5" title=":frowning:" class="emoji" alt=":frowning:"></p>
</blockquote>
</aside>
<p>?</p>
      </div>

      <meta itemprop='headline' content='[718] Doors'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Ashi.html'><span itemprop='name'>Ashi</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2013-12-24T14:21:57Z'>
            <time itemprop='dateModified' datetime='2016-08-04T11:19:05Z' class='post-time'>
              August 4, 2016, 11:19am
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p><a href="http://www.oracle.com/technetwork/java/codeconv-138413.html" class="onebox" target="_blank" rel="nofollow noopener">http://www.oracle.com/technetwork/java/codeconv-138413.html</a></p>
      </div>

      <meta itemprop='headline' content='[718] Doors'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/south-park.html'><span itemprop='name'>south-park</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2013-12-24T14:27:24Z'>
            <time itemprop='dateModified' datetime='2016-08-04T11:19:05Z' class='post-time'>
              August 4, 2016, 11:19am
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="4" data-topic="537536">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/arcik/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> Arcik:</div>
<blockquote>
<p><a href="http://www.oracle.com/technetwork/java/codeconv-138413.html" rel="nofollow noopener">http://www.oracle.com/technetwork/java/codeconv-138413.html</a></p>
</blockquote>
</aside>
<p>I’ll read up on it.</p>
      </div>

      <meta itemprop='headline' content='[718] Doors'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/arham_4.html'><span itemprop='name'>arham_4</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2013-12-24T16:53:12Z'>
            <time itemprop='dateModified' datetime='2016-08-04T11:19:08Z' class='post-time'>
              August 4, 2016, 11:19am
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Matrix’s code was so much more shorter.</p>
<pre><code class="lang-auto">    public static boolean handleDoor(Player player, WorldObject object, long timer) {
        if (World.isSpawnedObject(object))
            return false;
        WorldObject openedDoor = new WorldObject(object.getId(),
                object.getType(), object.getRotation() + 1, object.getX(),
                object.getY(), object.getPlane());
        if (object.getRotation() == 0)
            openedDoor.moveLocation(-1, 0, 0);
        else if (object.getRotation() == 1)
            openedDoor.moveLocation(0, 1, 0);
        else if (object.getRotation() == 2)
            openedDoor.moveLocation(1, 0, 0);
        else if (object.getRotation() == 3)
            openedDoor.moveLocation(0, -1, 0);
        if (World.removeTemporaryObject(object, timer, true)) {
            player.faceObject(openedDoor);
            World.spawnTemporaryObject(openedDoor, timer, true);
            return true;
        }
        return false;
    }</code></pre>
<p>(That if in the code could be done by a switch perhaps.)</p>
      </div>

      <meta itemprop='headline' content='[718] Doors'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/south-park.html'><span itemprop='name'>south-park</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2013-12-24T17:28:33Z'>
            <time itemprop='dateModified' datetime='2016-08-04T11:19:08Z' class='post-time'>
              August 4, 2016, 11:19am
            </time>
        <span itemprop='position'>#7</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Door updating fixed.</p>
<p>Go into [B]World.java[/B] in the method [B]public static final void updateEntityRegion(Entity entity)[/B] at the bottom you should see:</p>
<p><code>
} else {
			if (entity instanceof Player) {
				Player player = (Player) entity;
</code></p>
<p>Add this:</p>
<p><code>
Region region = getRegion(regionId);
				if (region.getSpawnedObjects() != null) {
					for (WorldObject object : region.getSpawnedObjects()) {
						if (object != null) {
							player.getPackets().sendDestroyObject(object);
							player.getPackets().sendSpawnedObject(object);
						}
					}
				}
</code></p>
<p>Then go to the method [B]public static final void removeObject(WorldObject object, boolean clip)[/B] Still in [B]World.java[/B] and add this:</p>
<p><code>
getRegion(regionId).removeObject(object);
</code></p>
<p>Above this:</p>
<p><code>
getRegion(regionId).addRemovedObject(object);
</code></p>
<p>Lastly go into [B]Region.java[/B] and replace</p>
<p><code>
private List&lt;WorldObject&gt; spawnedObjects;
</code></p>
<p>With</p>
<p><code>
private static List&lt;WorldObject&gt; spawnedObjects;
</code></p>
      </div>

      <meta itemprop='headline' content='[718] Doors'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/718-doors/537536 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Aug 2019 09:11:08 GMT -->
</html>
