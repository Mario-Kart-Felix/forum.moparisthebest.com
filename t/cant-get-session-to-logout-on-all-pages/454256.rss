<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Can&#39;t get session to logout on all pages</title>
    <link>https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256</link>
    <description>For some reason, when I use my logout script, it logs you out on the page you logged out, but when you go to another page that you were logged in, it keeps you logged in.
Here&#39;s my login script: 
[code=php]
&lt;?php
session_start(); 
$username = fixName($_POST[&#39;username&#39;]);
$password = $_POST[&#39;password&#39;];
 if($username&amp;&amp;$password)
 {


$conn = mysql_connect($dbhost, $dbuser, $dbpass) or die (&#39;Error connecting to mysql&#39;);

mysql_select_db($dbname);

$query = mysql_query(&quot;SELECT * FROM users WHERE username =&#39;$username&#39;&quot;);

$numrows = mysql_num_rows($query);

if($numrows != 0) 
{
//code to login
while ($row = mysql_fetch_assoc($query)) {
                $dbusername = fixName($row[&#39;username&#39;]);
                $dbpassword = $row[&#39;password&#39;];
        $dbrights = $row[&#39;rights&#39;];
}
//check to see if they match

if ($username==$dbusername&amp;&amp;$password==$dbpassword) {
session_register(&#39;username&#39;);
header(&quot;Location:  heroes.php&quot;);
$_SESSION[&#39;username&#39;]=$username;
$_SESSION[&#39;rights&#39;]=$dbrights;


} else
layout();
}
else
layout();

} else
 
die(&quot;Please enter a username and password!&quot;);
?&gt;
[/code]
Here&#39;s my logout:
[code=php]
&lt;?php
session_start();
session_unset();
session_destroy();
?&gt;
[/code]
Not sure why it does this, could anyone help?</description>
    
    <lastBuildDate>Fri, 24 Aug 2012 11:48:21 +0000</lastBuildDate>
    <category>General Programming</category>
    <atom:link href="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Can&#39;t get session to logout on all pages</title>
        <dc:creator><![CDATA[@sageofmali sageofmali]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sageofmali">@sageofmali</a> wrote:</p>
          <blockquote>
              <aside class="quote quote-modified" data-post="61" data-topic="454256">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/user_avatar/forum.moparisthebest.com/justaguy/40/61_1.png" class="avatar"> justaguy:</div>
<blockquote>
<p>You changed around alot more code than I said you should’ve, especially with the $myFriends array in the second while loop. I’m lost now.</p>
</blockquote>
</aside>
<p>Someone was trying to help me with this on stackoverflow, but this doesn’t work that well.  The original code is still posted before the last one I posted.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/62">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/62</link>
        <pubDate>Fri, 24 Aug 2012 11:48:21 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-454256-62</guid>
        <source url="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256.rss">Can&#39;t get session to logout on all pages</source>
      </item>
      <item>
        <title>Can&#39;t get session to logout on all pages</title>
        <dc:creator><![CDATA[@justaguy justaguy]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/justaguy">@justaguy</a> wrote:</p>
          <blockquote>
              <p>You changed around alot more code than I said you should’ve, especially with the $myFriends array in the second while loop. I’m lost now.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/61">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/61</link>
        <pubDate>Thu, 23 Aug 2012 04:22:46 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-454256-61</guid>
        <source url="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256.rss">Can&#39;t get session to logout on all pages</source>
      </item>
      <item>
        <title>Can&#39;t get session to logout on all pages</title>
        <dc:creator><![CDATA[@sageofmali sageofmali]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sageofmali">@sageofmali</a> wrote:</p>
          <blockquote>
              <p>[quote=“justaguy, post:59, topic:454256”]Just going to go out on a limb and assume it’s where the $myFriends declaration is placed. I’m going to assume it should go above the first while loop rather than the second since all your friends are stored in that array.</p>
<p>Then, you are going to have to make it more than a 2-dimensional(?) array and extend it to 3 so that it accounts for each friend as well.[/quote]<br>
I couldn’t put the $myFriends above the second while loop since the $skillsRow is declared in that loop.  So any other suggestion?[code=php]    function findFriendsTest($table){<br>
include “mysql.ws”;<br>
$user = “Im Me”;<br>
$xptype = findType($table).“xp”;<br>
$query = mysql_query(“SELECT u.* FROM friends uf inner join users u on uf.friend = u.username WHERE uf.user = ‘$user’”) or die(mysql_error());<br>
$myFriends = array();<br>
$xpOrder = array();<br>
WHILE($row = mysql_fetch_array($query)){<br>
$count = count($row);<br>
$friends = $row[‘username’];<br>
$rank = findRank($friends, “$table”);<br>
$sql = mysql_query(“SELECT * FROM skills WHERE playerName LIKE ‘$friends’ ORDER BY ‘$xptype’ DESC”) or die(mysql_error());unset($myFriends);<br>
while($skillsRow = mysql_fetch_array($sql)){<br>
unset($myFriends);<br>
for ($i = 1; $i &lt;= $count; $i++){<br>
$myFriends[] = array(<br>
‘friend’ =&gt; $friends,<br>
‘xp’ =&gt; $skillsRow[$xptype],<br>
‘lvl’ =&gt; getLevelForXP($skillsRow[$xptype]),<br>
‘rank’ =&gt; $rank,<br>
);<br>
$xpOrder[] = $skillsRow[$xptype];<br>
}<br>
array_multisort($xpOrder, SORT_NUMERIC, SORT_DESC, $myFriends);<br>
unset($xpOrder);<br>
foreach ($myFriends as $data){<br>
if(dots($data[‘xp’]) !=0){<br>
echo ’<br>
<a name="'.%24data%5B'rank'%5D.'"></a><br>
<a><br>
<span><br>
<span>‘.$data[‘rank’].’</span><br>
</span><br>
<span><br>
<span>‘.BBCode($data[‘friend’]).’</span><br>
</span><br>
<span><br>
<span>‘.$data[‘lvl’].’</span><br>
</span><br>
<span><br>
<span>‘.dots($data[‘xp’]).’</span><br>
</span><br>
</a>';</p>
<pre><code>                }
            }
        }
    }
}[/code] 
</code></pre>
<p>This kinda works, but it echo’s out multiple times for each person.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/60">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/60</link>
        <pubDate>Thu, 23 Aug 2012 02:39:50 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-454256-60</guid>
        <source url="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256.rss">Can&#39;t get session to logout on all pages</source>
      </item>
      <item>
        <title>Can&#39;t get session to logout on all pages</title>
        <dc:creator><![CDATA[@justaguy justaguy]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/justaguy">@justaguy</a> wrote:</p>
          <blockquote>
              <p>Just going to go out on a limb and assume it’s where the $myFriends declaration is placed. I’m going to assume it should go above the first while loop rather than the second since all your friends are stored in that array.</p>
<p>Then, you are going to have to make it more than a 2-dimensional(?) array and extend it to 3 so that it accounts for each friend as well.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/59">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/59</link>
        <pubDate>Thu, 23 Aug 2012 01:04:30 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-454256-59</guid>
        <source url="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256.rss">Can&#39;t get session to logout on all pages</source>
      </item>
      <item>
        <title>Can&#39;t get session to logout on all pages</title>
        <dc:creator><![CDATA[@sageofmali sageofmali]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sageofmali">@sageofmali</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="57" data-topic="454256">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/user_avatar/forum.moparisthebest.com/justaguy/40/61_1.png" class="avatar"> justaguy:</div>
<blockquote>
<p>You need to make the sure the number of XP in $xpOrder and $myFriends are the same so the sort can work properly.</p>
</blockquote>
</aside>
<p>But, I don’t see how $myFriends could only be 14 while $xpOrder could be 121, that makes no sense, when there are about a thousand rows for the skills table where does it get that number from then?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/58">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/58</link>
        <pubDate>Thu, 23 Aug 2012 00:48:07 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-454256-58</guid>
        <source url="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256.rss">Can&#39;t get session to logout on all pages</source>
      </item>
      <item>
        <title>Can&#39;t get session to logout on all pages</title>
        <dc:creator><![CDATA[@justaguy justaguy]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/justaguy">@justaguy</a> wrote:</p>
          <blockquote>
              <p>You need to make the sure the number of XP in $xpOrder and $myFriends are the same so the sort can work properly.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/57">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/57</link>
        <pubDate>Wed, 22 Aug 2012 22:14:54 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-454256-57</guid>
        <source url="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256.rss">Can&#39;t get session to logout on all pages</source>
      </item>
      <item>
        <title>Can&#39;t get session to logout on all pages</title>
        <dc:creator><![CDATA[@sageofmali sageofmali]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sageofmali">@sageofmali</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="55" data-topic="454256">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/user_avatar/forum.moparisthebest.com/justaguy/40/61_1.png" class="avatar"> justaguy:</div>
<blockquote>
<p>What are the sizes of $myFriend and $xpOrder?</p>
</blockquote>
</aside>
<p>The reason why they are different sizes, I believe, is because I don’t put staff on my skills table nor the skillsoverall, and I allow them to be on the user table.  But if I insert my username for example, Sageofmali, the size of $myFriends would be 14, and $xpOrder would be like 121.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/56">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/56</link>
        <pubDate>Wed, 22 Aug 2012 20:20:41 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-454256-56</guid>
        <source url="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256.rss">Can&#39;t get session to logout on all pages</source>
      </item>
      <item>
        <title>Can&#39;t get session to logout on all pages</title>
        <dc:creator><![CDATA[@justaguy justaguy]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/justaguy">@justaguy</a> wrote:</p>
          <blockquote>
              <p>What are the sizes of $myFriend and $xpOrder?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/55">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/55</link>
        <pubDate>Tue, 21 Aug 2012 17:52:40 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-454256-55</guid>
        <source url="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256.rss">Can&#39;t get session to logout on all pages</source>
      </item>
      <item>
        <title>Can&#39;t get session to logout on all pages</title>
        <dc:creator><![CDATA[@sageofmali sageofmali]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sageofmali">@sageofmali</a> wrote:</p>
          <blockquote>
              <p>Yeah, I got that fixed, but now I’ve been trying to get this stupid friends hiscores to order properly, but now not a single friend will show up.  Any help?<br>
<span class="bbcode-b">EDIT:</span> I was able to show all the friends, but now I get an error: <code>Warning: array_multisort() [function.array-multisort]: Array sizes are inconsistent in /home/sagesca1/public_html/hiscores/functions.ws on line 1483</code>[code=php]function findFriends($table){<br>
include “mysql.ws”;<br>
$user = $_SESSION[‘username’];<br>
$query = mysql_query(“SELECT u.* FROM friends uf inner join users u on uf.friend = u.username WHERE uf.user = ‘$user’”) or die(mysql_error());<br>
WHILE($row = mysql_fetch_array($query)){<br>
$xptype = findType($table).“xp”;<br>
$friends = $row[‘username’];<br>
$myFriends = array();<br>
$xpOrder = array();<br>
$sql = mysql_query(“SELECT * FROM skills WHERE playerName LIKE ‘$friends’ ORDER BY ‘$xptype’ DESC”) or die(mysql_error());<br>
while($rows = mysql_fetch_array($sql)){<br>
$count = count($row);<br>
for ($i = 1; $i &lt;= $count; $i++){<br>
$rank = findRank($friends, “$table”);<br>
$myFriends[$friends] = array(<br>
‘xp’ =&gt; $rows[$xptype],<br>
‘lvl’ =&gt; getLevelForXP($rows[$xptype]),<br>
‘rank’ =&gt; $rank,<br>
);<br>
$xpOrder[] = $rows[$xptype];<br>
}<br>
array_multisort($xpOrder, SORT_NUMERIC, SORT_DESC, $myFriends);<br>
unset($xpOrder);<br>
foreach ($myFriends as $friend =&gt; $data){<br>
if(dots($data[‘xp’]) !=0){<br>
echo ’<br>
<a name="'.%24data%5B'rank'%5D.'"></a><br>
<a><br>
<span><br>
<span>‘.$data[‘rank’].’</span><br>
</span><br>
<span><br>
<span>‘.BBCode($friend).’</span><br>
</span><br>
<span><br>
<span>‘.$data[‘lvl’].’</span><br>
</span><br>
<span><br>
<span>‘.dots($data[‘xp’]).’</span><br>
</span><br>
</a>';</p>
<pre><code>				}
			}
		}
	}
</code></pre>
<p>}[/code]</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/54">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/54</link>
        <pubDate>Sun, 19 Aug 2012 20:15:21 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-454256-54</guid>
        <source url="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256.rss">Can&#39;t get session to logout on all pages</source>
      </item>
      <item>
        <title>Can&#39;t get session to logout on all pages</title>
        <dc:creator><![CDATA[@justaguy justaguy]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/justaguy">@justaguy</a> wrote:</p>
          <blockquote>
              <p>In your first code you are only getting one record because you aren’t looping through the array.</p>
<pre><code class="lang-auto"></code></pre>
<p>… And so on.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/53">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/53</link>
        <pubDate>Fri, 17 Aug 2012 17:50:27 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-454256-53</guid>
        <source url="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256.rss">Can&#39;t get session to logout on all pages</source>
      </item>
      <item>
        <title>Can&#39;t get session to logout on all pages</title>
        <dc:creator><![CDATA[@sageofmali sageofmali]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sageofmali">@sageofmali</a> wrote:</p>
          <blockquote>
              <p>Alrighty, I have another issue; I’m trying to get all of the friends that a person has and put them on this table, but for some reason it’s just showing one.  Here’s my code: [code=php]function allFriends($user){<br>
include “mysql.ws”;</p>
<pre><code>$query = mysql_query("SELECT u.* FROM friends uf inner join users u on uf.friend = u.username WHERE uf.user = '$user' ORDER BY u.username ASC") or die(mysql_error());
$row = mysql_fetch_array($query);
$count = count($row);
$friendsArray = array();

for ($i = 1; $i &lt;= $count; $i++) {	
	$friends = $row['username'];
	$donator = $row['donator'];
	$online = $row['online'];
	$friendsArray[$friends] = array(
		'donator' =&gt; $row['donator'], 
		'online' =&gt; $row['online'],
	);
}
foreach ($friendsArray as $friend =&gt; $data) {
	echo'
		&lt;tr&gt;
			&lt;td&gt;
				&lt;a class="icon" href="http://sage-scape.com/hiscores/adventure.ws?searchName='.$friend.'"&gt;
					&lt;img src="http://services.runescape.com/m=avatar-rs/'.$friend.'/chat.png" alt="'.$friend.'" /&gt;
				&lt;/a&gt;
			&lt;/td&gt;
			&lt;th scope="row"&gt;
				&lt;a href="http://sage-scape.com/hiscores/adventure.ws?searchName='.$friend.'"&gt;'.$friend.'&lt;/a&gt;
			&lt;/th&gt;
			&lt;td&gt;
			&lt;span class="icon"&gt;';
	if($data['donator'] &gt; 0)
		echo'
			&lt;img src="http://sage-scape.com/hiscores/img/member.png" alt="Donator" title="SageScape Donator"&gt;';
	else
		echo'
			&lt;img src="http://sage-scape.com/hiscores/img/free.png" alt="Free Player" title="SageScape Free Player"&gt;';


	echo'
				&lt;/span&gt;
			&lt;/td&gt;
			&lt;td&gt;&lt;span class="PlayerInfoOnline" data-displayname="'.$friend.'"&gt;&lt;/span&gt;&lt;/td&gt;
		&lt;/tr&gt;';
}
</code></pre>
<p>}[/code]<br>
I have another function that shows all of the friends and it works, but there are some problems with this code too, I plan to sort it by the xp they have, I haven’t got around to that part yet but here it is: <code>function findFriends($table){
	include "mysql.ws";
	$user = $_SESSION['username'];
	$query = mysql_query("SELECT u.* FROM friends uf inner join users u on uf.friend = u.username WHERE uf.user = '$user'") or die(mysql_error());
	echo '
		&lt;div class="tableContainer cssTableSmall"&gt;
		&lt;div class="hiscoresBoxTopLeft"&gt;&lt;/div&gt;
		&lt;div class="hiscoresBoxTopRight"&gt;&lt;/div&gt;
		&lt;div class="tableInnerContainer"&gt;
		&lt;div class="header"&gt;
		&lt;span class="columnRank"&gt;Rank&lt;/span&gt;
		&lt;span class="columnName"&gt;
		&lt;span&gt;Name&lt;/span&gt;
		&lt;/span&gt;
		&lt;span class="columnLevel"&gt;
		&lt;span&gt;Level&lt;/span&gt;
		&lt;/span&gt;
		&lt;span class="columnXp"&gt;
		&lt;span&gt;XP&lt;/span&gt;
		&lt;/span&gt;
		&lt;/div&gt;';
	WHILE($row = mysql_fetch_array($query)){
		$friends = $row['username'];
		$rank = findRank($friends, "$table");
		$xptype = findType($table)."xp";
		$sql = mysql_query("SELECT * FROM skills WHERE playerName LIKE '$friends' ORDER BY '$rank' DESC") or die(mysql_error());
		while($rows = mysql_fetch_array($sql)){
			$count = count($rows);
			if(dots($rows[$xptype]) !=0){
				for($i=0;$i&lt;$count;$i++){
				if($i == $count){
				echo '
					&lt;a name="'.$rank.'"&gt;&lt;/a&gt;
					&lt;a href="compare.ws?user1='.$friends.'" target="_self" class="row last-row"&gt;';
				}else{
				echo '
					&lt;a name="'.$count.'"&gt;&lt;/a&gt;
					&lt;a href="compare.ws?user1='.$friends.'" target="_self" class="row "&gt;';
				}
				echo'
					&lt;span class="columnRank"&gt;
					&lt;span&gt;'.$rank.'&lt;/span&gt;
					&lt;/span&gt;
					&lt;span class="columnName"&gt;
					&lt;span&gt;'.BBCode($friends).'&lt;/span&gt;
					&lt;/span&gt;
					&lt;span class="columnLevel"&gt;
					&lt;span&gt;'.getLevelForXP($rows[$xptype]).'&lt;/span&gt;
					&lt;/span&gt;
					&lt;span class="columnXp"&gt;
					&lt;span&gt;'.dots($rows[$xptype]).'&lt;/span&gt;
					&lt;/span&gt;
					&lt;/a&gt;
				 '; 
				}
			}
		}
	}
}</code></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/52">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/52</link>
        <pubDate>Fri, 17 Aug 2012 01:48:48 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-454256-52</guid>
        <source url="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256.rss">Can&#39;t get session to logout on all pages</source>
      </item>
      <item>
        <title>Can&#39;t get session to logout on all pages</title>
        <dc:creator><![CDATA[@justaguy justaguy]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/justaguy">@justaguy</a> wrote:</p>
          <blockquote>
              <p>[quote=“sageofmali, post:50, topic:454256”][quote author=justaguy link=topic=557125.msg4079020#msg4079020 date=1345165660]</p>
<pre><code class="lang-auto"></code></pre>
<p>[/quote]<br>
Thanks man you are the best.  If I need anything else, do you mind if I PM you?[/quote]</p>
<p>I would prefer if you made topics in this board so others can find solutions if they run into similar problems. Makes it easier for everyone.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/51">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/51</link>
        <pubDate>Fri, 17 Aug 2012 01:22:26 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-454256-51</guid>
        <source url="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256.rss">Can&#39;t get session to logout on all pages</source>
      </item>
      <item>
        <title>Can&#39;t get session to logout on all pages</title>
        <dc:creator><![CDATA[@sageofmali sageofmali]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sageofmali">@sageofmali</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="49" data-topic="454256">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/user_avatar/forum.moparisthebest.com/justaguy/40/61_1.png" class="avatar"> justaguy:</div>
<blockquote>
<p><code>$skills = array_slice($skills, 0, 10);</code></p>
</blockquote>
</aside>
<p>Thanks man you are the best.  If I need anything else, do you mind if I PM you?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/50">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/50</link>
        <pubDate>Fri, 17 Aug 2012 01:21:19 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-454256-50</guid>
        <source url="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256.rss">Can&#39;t get session to logout on all pages</source>
      </item>
      <item>
        <title>Can&#39;t get session to logout on all pages</title>
        <dc:creator><![CDATA[@justaguy justaguy]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/justaguy">@justaguy</a> wrote:</p>
          <blockquote>
              <pre><code class="lang-auto"></code></pre>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/49">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/49</link>
        <pubDate>Fri, 17 Aug 2012 01:07:40 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-454256-49</guid>
        <source url="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256.rss">Can&#39;t get session to logout on all pages</source>
      </item>
      <item>
        <title>Can&#39;t get session to logout on all pages</title>
        <dc:creator><![CDATA[@sageofmali sageofmali]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sageofmali">@sageofmali</a> wrote:</p>
          <blockquote>
              <p>[quote=“justaguy, post:47, topic:454256”]You should probably use a foreach in place of the for,</p>
<pre><code class="lang-auto"></code></pre>
<p>And you would access $skillName as the skill name and $data as an array which holds the xp and level.[/quote]<br>
Thank you a lot man, I was able to do it.  Now how would I limit this array with only the top 10?[code=php]function TopMatrix($user){<br>
include “mysql.ws”;<br>
$skills = array();<br>
$xpTable = array();<br>
for ($i = 1; $i &lt;=25; $i++){<br>
$xptype = findType($i).“xp”;<br>
$query = mysql_query(“SELECT * FROM skills WHERE playerName LIKE '”.fixName($user)."’ ORDER BY $xptype LIMIT 1") or die(mysql_error());<br>
$row = mysql_fetch_array($query);<br>
$names = findType($i);		<br>
if($i == 25)<br>
$skills[$names] = array(<br>
‘xp’ =&gt; $row[$xptype],<br>
‘level’ =&gt; getLevelForXP($row[$xptype]),<br>
‘percent’ =&gt; percent($row[“Dungeoneeringlvl”], 120),<br>
);<br>
else<br>
$skills[$names] = array(<br>
‘xp’ =&gt; $row[$xptype],<br>
‘level’ =&gt; getLevelForXP($row[$xptype]),<br>
‘percent’ =&gt; percent(getLevelForXP($row[$xptype]), 99),<br>
);<br>
$xpTable[] = $row[$xptype];<br>
}<br>
array_multisort($xpTable, SORT_NUMERIC, SORT_DESC, $skills);<br>
unset($xpTable);<br>
foreach ($skills as $skillName =&gt; $data){<br>
echo’</p>
<li>
	<img src="http://sage-scape.com/hiscores/img/'.fixName(%24skillName).'.png?2" alt="'.$skillName.'" width="" height="">
	<div data-value="'.$data['percent'].'">'.$data['percent'].'% Complete</div>
	<div>
		<h6>'.$skillName.'</h6>
		<p>Level '.getLevelForXP($data['xp']).'</p>
		<p>'.$data['xp'].' XP</p>
	</div>
</li>';
	}
	echo'';
}[/code]
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/48">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/48</link>
        <pubDate>Fri, 17 Aug 2012 01:02:27 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-454256-48</guid>
        <source url="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256.rss">Can&#39;t get session to logout on all pages</source>
      </item>
      <item>
        <title>Can&#39;t get session to logout on all pages</title>
        <dc:creator><![CDATA[@justaguy justaguy]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/justaguy">@justaguy</a> wrote:</p>
          <blockquote>
              <p>You should probably use a foreach in place of the for,</p>
<pre><code class="lang-auto"></code></pre>
<p>And you would access $skillName as the skill name and $data as an array which holds the xp and level.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/47">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/47</link>
        <pubDate>Fri, 17 Aug 2012 00:51:54 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-454256-47</guid>
        <source url="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256.rss">Can&#39;t get session to logout on all pages</source>
      </item>
      <item>
        <title>Can&#39;t get session to logout on all pages</title>
        <dc:creator><![CDATA[@sageofmali sageofmali]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sageofmali">@sageofmali</a> wrote:</p>
          <blockquote>
              <p>[quote=“justaguy, post:45, topic:454256”][quote author=sageofmali link=topic=557125.msg4079001#msg4079001 date=1345164045]</p>
<aside class="quote">
<blockquote>
<p>You don’t need $levelTable or $nameTable. The only reason $xpTable was made was to sort every XP for every skill and then order them by highest skill based on XP.</p>
<p>After the first loop and after the array_multisort(), the $skills array holds all the XP and level for each skill in the format I gave you earlier in order from the skill with the highest XP to the skill with the lowest. You can then loop through that array once again to output the HTML you need to the page.</p>
</blockquote>
</aside>
<p>Thanks that makes a lot of since.  So would I do it like this: [code=php]function Matrix($user){<br>
include “mysql.ws”;<br>
$skills = array();<br>
$xpTable = array();<br>
for ($i = 1; $i &lt;=25; $i++){<br>
$xptype = findType($i).“xp”;<br>
$query = mysql_query(“SELECT * FROM skills WHERE playerName LIKE '”.fixName($user)."’ ORDER BY $xptype LIMIT 1") or die(mysql_error());<br>
$row = mysql_fetch_array($query);<br>
$names = findType($i);		<br>
$skills[$names] = array(<br>
‘xp’ =&gt; $row[$xptype],<br>
‘level’ =&gt; getLevelForXP($row[$xptype]),<br>
);<br>
$xpTable[] = $row[$xptype];<br>
}<br>
array_multisort($xpTable, SORT_NUMERIC, SORT_DESC, $skills);<br>
unset($xpTable);<br>
for ($i = 1; $i &lt;=25; $i++){<br>
$xptype = findType($i).“xp”;<br>
$query = mysql_query(“SELECT * FROM skills WHERE playerName LIKE '”.fixName($user)."’ ORDER BY $xptype LIMIT 1") or die(mysql_error());<br>
$row = mysql_fetch_array($query);<br>
$names = findType($i);<br>
if($i==25)<br>
$percent = percent($row[“Dungeoneeringlvl”], 120);<br>
else<br>
$percent = percent(getLevelForXP($row[$xptype]), 99);<br>
echo’</p>
<li>
	<img src="http://sage-scape.com/hiscores/img/'.fixName(%24skills%5B%24names%5D).'.png?2" alt="'.$skills[$names].'" width="" height="">
	<div data-value="'.$percent.'">'.$percent.'% Complete</div>
	<div>
		<h6>'.$skills[$names].'</h6>
		<p>Level '.getLevelForXP($skills[$xptype]).'</p>
		<p>'.$skills[$xptype].' XP</p>
	</div>
</li>';
	}
	echo'';
}[/code]
[/quote]
<p>You don’t need to do a query in the second loop since you already have the data you need (which is in the $skills array). The whole point of $skills is to have an array of data with what you need in the order you wanted.[/quote]<br>
Alright so how would I get an individual part of the array from the $skills like getting the xp, the name or the level.  Would I use something like $skills[$names]?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/46">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/46</link>
        <pubDate>Fri, 17 Aug 2012 00:48:05 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-454256-46</guid>
        <source url="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256.rss">Can&#39;t get session to logout on all pages</source>
      </item>
      <item>
        <title>Can&#39;t get session to logout on all pages</title>
        <dc:creator><![CDATA[@justaguy justaguy]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/justaguy">@justaguy</a> wrote:</p>
          <blockquote>
              <p>[quote=“sageofmali, post:44, topic:454256”][quote author=justaguy link=topic=557125.msg4078963#msg4078963 date=1345162060]<br>
You don’t need $levelTable or $nameTable. The only reason $xpTable was made was to sort every XP for every skill and then order them by highest skill based on XP.</p>
<p>After the first loop and after the array_multisort(), the $skills array holds all the XP and level for each skill in the format I gave you earlier in order from the skill with the highest XP to the skill with the lowest. You can then loop through that array once again to output the HTML you need to the page.<br>
[/quote]<br>
Thanks that makes a lot of since.  So would I do it like this: [code=php]function Matrix($user){<br>
include “mysql.ws”;<br>
$skills = array();<br>
$xpTable = array();<br>
for ($i = 1; $i &lt;=25; $i++){<br>
$xptype = findType($i).“xp”;<br>
$query = mysql_query(“SELECT * FROM skills WHERE playerName LIKE '”.fixName($user)."’ ORDER BY $xptype LIMIT 1") or die(mysql_error());<br>
$row = mysql_fetch_array($query);<br>
$names = findType($i);		<br>
$skills[$names] = array(<br>
‘xp’ =&gt; $row[$xptype],<br>
‘level’ =&gt; getLevelForXP($row[$xptype]),<br>
);<br>
$xpTable[] = $row[$xptype];<br>
}<br>
array_multisort($xpTable, SORT_NUMERIC, SORT_DESC, $skills);<br>
unset($xpTable);<br>
for ($i = 1; $i &lt;=25; $i++){<br>
$xptype = findType($i).“xp”;<br>
$query = mysql_query(“SELECT * FROM skills WHERE playerName LIKE '”.fixName($user)."’ ORDER BY $xptype LIMIT 1") or die(mysql_error());<br>
$row = mysql_fetch_array($query);<br>
$names = findType($i);<br>
if($i==25)<br>
$percent = percent($row[“Dungeoneeringlvl”], 120);<br>
else<br>
$percent = percent(getLevelForXP($row[$xptype]), 99);<br>
echo’</p>
<li>
	<img src="http://sage-scape.com/hiscores/img/'.fixName(%24skills%5B%24names%5D).'.png?2" alt="'.$skills[$names].'" width="" height="">
	<div data-value="'.$percent.'">'.$percent.'% Complete</div>
	<div>
		<h6>'.$skills[$names].'</h6>
		<p>Level '.getLevelForXP($skills[$xptype]).'</p>
		<p>'.$skills[$xptype].' XP</p>
	</div>
</li>';
	}
	echo'';
}[/code][/quote]
<p>You don’t need to do a query in the second loop since you already have the data you need (which is in the $skills array). The whole point of $skills is to have an array of data with what you need in the order you wanted.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/45">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/45</link>
        <pubDate>Fri, 17 Aug 2012 00:44:54 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-454256-45</guid>
        <source url="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256.rss">Can&#39;t get session to logout on all pages</source>
      </item>
      <item>
        <title>Can&#39;t get session to logout on all pages</title>
        <dc:creator><![CDATA[@sageofmali sageofmali]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sageofmali">@sageofmali</a> wrote:</p>
          <blockquote>
              <p>[quote=“justaguy, post:43, topic:454256”]You don’t need $levelTable or $nameTable. The only reason $xpTable was made was to sort every XP for every skill and then order them by highest skill based on XP.</p>
<p>After the first loop and after the array_multisort(), the $skills array holds all the XP and level for each skill in the format I gave you earlier in order from the skill with the highest XP to the skill with the lowest. You can then loop through that array once again to output the HTML you need to the page.[/quote]<br>
Thanks that makes a lot of since.  So would I do it like this: [code=php]function Matrix($user){<br>
include “mysql.ws”;<br>
$skills = array();<br>
$xpTable = array();<br>
for ($i = 1; $i &lt;=25; $i++){<br>
$xptype = findType($i).“xp”;<br>
$query = mysql_query(“SELECT * FROM skills WHERE playerName LIKE '”.fixName($user)."’ ORDER BY $xptype LIMIT 1") or die(mysql_error());<br>
$row = mysql_fetch_array($query);<br>
$names = findType($i);		<br>
$skills[$names] = array(<br>
‘xp’ =&gt; $row[$xptype],<br>
‘level’ =&gt; getLevelForXP($row[$xptype]),<br>
);<br>
$xpTable[] = $row[$xptype];<br>
}<br>
array_multisort($xpTable, SORT_NUMERIC, SORT_DESC, $skills);<br>
unset($xpTable);<br>
for ($i = 1; $i &lt;=25; $i++){<br>
$xptype = findType($i).“xp”;<br>
$query = mysql_query(“SELECT * FROM skills WHERE playerName LIKE '”.fixName($user)."’ ORDER BY $xptype LIMIT 1") or die(mysql_error());<br>
$row = mysql_fetch_array($query);<br>
$names = findType($i);<br>
if($i==25)<br>
$percent = percent($row[“Dungeoneeringlvl”], 120);<br>
else<br>
$percent = percent(getLevelForXP($row[$xptype]), 99);<br>
echo’</p>
<li>
	<img src="http://sage-scape.com/hiscores/img/'.fixName(%24skills%5B%24names%5D).'.png?2" alt="'.$skills[$names].'" width="" height="">
	<div data-value="'.$percent.'">'.$percent.'% Complete</div>
	<div>
		<h6>'.$skills[$names].'</h6>
		<p>Level '.getLevelForXP($skills[$xptype]).'</p>
		<p>'.$skills[$xptype].' XP</p>
	</div>
</li>';
	}
	echo'';
}[/code]
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/44">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/44</link>
        <pubDate>Fri, 17 Aug 2012 00:40:45 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-454256-44</guid>
        <source url="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256.rss">Can&#39;t get session to logout on all pages</source>
      </item>
      <item>
        <title>Can&#39;t get session to logout on all pages</title>
        <dc:creator><![CDATA[@justaguy justaguy]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/justaguy">@justaguy</a> wrote:</p>
          <blockquote>
              <p>You don’t need $levelTable or $nameTable. The only reason $xpTable was made was to sort every XP for every skill and then order them by highest skill based on XP.</p>
<p>After the first loop and after the array_multisort(), the $skills array holds all the XP and level for each skill in the format I gave you earlier in order from the skill with the highest XP to the skill with the lowest. You can then loop through that array once again to output the HTML you need to the page.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/43">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/43</link>
        <pubDate>Fri, 17 Aug 2012 00:07:40 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-454256-43</guid>
        <source url="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256.rss">Can&#39;t get session to logout on all pages</source>
      </item>
      <item>
        <title>Can&#39;t get session to logout on all pages</title>
        <dc:creator><![CDATA[@sageofmali sageofmali]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sageofmali">@sageofmali</a> wrote:</p>
          <blockquote>
              <p>Yeah I edited my post after you posted that sorry.  But how would I get the skill names, xp , lvl and all of that outside the loop?<code>function Matrix($user){
	include "mysql.ws";
	$skills = array();
	$xpTable = array();
	$lvlTable = array();
	$nameTable = array();
	for ($i = 1; $i &lt;=25; $i++){
		$xptype = findType($i)."xp";  
		$query = mysql_query("SELECT * FROM skills WHERE playerName LIKE '".fixName($user)."' ORDER BY $xptype LIMIT 1") or die(mysql_error());
		$row = mysql_fetch_array($query);
		$names = findType($i);		
		$skills[$names] = array(
			'xp' =&gt; $row[$xptype], 
			'level' =&gt; getLevelForXP($row[$xptype]),
		);
		$xpTable[] = $row[$xptype];
		$nameTable[] = $skills[$names];
		$lvlTable[] = getLevelForXP($row[$xptype]);
	}
	array_multisort($xpTable, SORT_NUMERIC, SORT_DESC, $skills);
	unset($xpTable);
	print_r($skills);
	echo '&lt;br /&gt;Name = '.$nameTable.' Level = '.$lvlTable.' XP = '.$xpTable.'';
}</code></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/42">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/42</link>
        <pubDate>Thu, 16 Aug 2012 23:50:26 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-454256-42</guid>
        <source url="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256.rss">Can&#39;t get session to logout on all pages</source>
      </item>
      <item>
        <title>Can&#39;t get session to logout on all pages</title>
        <dc:creator><![CDATA[@justaguy justaguy]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/justaguy">@justaguy</a> wrote:</p>
          <blockquote>
              <p>[quote=“sageofmali, post:40, topic:454256”]Hmmm, I’m getting an error: [quote] Warning: array_multisort() [function.array-multisort]: Array sizes are inconsistent in /home/sagesca1/public_html/hiscores/functions.ws on line 306<br>
Array ( [Attack] =&gt; Array ( [xp] =&gt; 168300 [level] =&gt; 55 ) [Defence] =&gt; Array ( [xp] =&gt; 168850 [level] =&gt; 55 ) ) [/quote]<br>
Using the code: [code=php]function Matrix($user){<br>
include “mysql.ws”;<br>
for ($i = 1; $i &lt;=25; $i++){<br>
$xptype = findType($i).“xp”;<br>
$query = mysql_query(“SELECT * FROM skills WHERE playerName LIKE '”.fixName($user)."’ ORDER BY $xptype LIMIT 1") or die(mysql_error());<br>
$row = mysql_fetch_array($query);<br>
$names = findType($i);		<br>
$skills[$names] = array(‘xp’ =&gt; $row[$xptype], ‘level’ =&gt; getLevelForXP($row[$xptype]));<br>
$xpTable = array();<br>
$lvlTable = array();<br>
$nameTable = array();<br>
$xpTable[] = $row[$xptype];</p>
<pre><code>	array_multisort($xpTable, SORT_NUMERIC, SORT_DESC, $skills);
	unset($xpTable);
	print_r($skills);
	echo '&lt;br /&gt;';
}
</code></pre>
<p>}[/code][/quote]</p>
<p>You didn’t read my instructions properly, read them again.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/41">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/41</link>
        <pubDate>Thu, 16 Aug 2012 23:39:44 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-454256-41</guid>
        <source url="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256.rss">Can&#39;t get session to logout on all pages</source>
      </item>
      <item>
        <title>Can&#39;t get session to logout on all pages</title>
        <dc:creator><![CDATA[@sageofmali sageofmali]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sageofmali">@sageofmali</a> wrote:</p>
          <blockquote>
              <p>Hmmm, I’m getting an error: </p><blockquote>Warning: array_multisort() [function.array-multisort]: Array sizes are inconsistent in /home/sagesca1/public_html/hiscores/functions.ws on line 306<br>
Array ( [Attack] =&gt; Array ( [xp] =&gt; 168300 [level] =&gt; 55 ) [Defence] =&gt; Array ( [xp] =&gt; 168850 [level] =&gt; 55 ) )</blockquote><br>
Using the code: [code=php]function Matrix($user){<br>
include “mysql.ws”;<br>
for ($i = 1; $i &lt;=25; $i++){<br>
$xptype = findType($i).“xp”;<br>
$query = mysql_query(“SELECT * FROM skills WHERE playerName LIKE '”.fixName($user)."’ ORDER BY $xptype LIMIT 1") or die(mysql_error());<br>
$row = mysql_fetch_array($query);<br>
$names = findType($i);		<br>
$skills[$names] = array(‘xp’ =&gt; $row[$xptype], ‘level’ =&gt; getLevelForXP($row[$xptype]));<br>
$xpTable = array();<br>
$lvlTable = array();<br>
$nameTable = array();<br>
$xpTable[] = $row[$xptype];
<pre><code>	array_multisort($xpTable, SORT_NUMERIC, SORT_DESC, $skills);
	unset($xpTable);
	print_r($skills);
	echo '&lt;br /&gt;';
}
</code></pre>
<p>}[/code]<br>
NVM Just read your updated comment: <code>function Matrix($user){
	include "mysql.ws";
	$skills = array();
	$xpTable = array();
	$lvlTable = array();
	$nameTable = array();
	for ($i = 1; $i &lt;=25; $i++){
		$xptype = findType($i)."xp";  
		$query = mysql_query("SELECT * FROM skills WHERE playerName LIKE '".fixName($user)."' ORDER BY $xptype LIMIT 1") or die(mysql_error());
		$row = mysql_fetch_array($query);
		$names = findType($i);		
		$skills[$names] = array(
			'xp' =&gt; $row[$xptype], 
			'level' =&gt; getLevelForXP($row[$xptype]),
		);
		$xpTable[] = $row[$xptype];
	}
		array_multisort($xpTable, SORT_NUMERIC, SORT_DESC, $skills);
		unset($xpTable);
		print_r($skills);
		echo '&lt;br /&gt;';
}</code> Works I’m pretty sure.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/40">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/40</link>
        <pubDate>Thu, 16 Aug 2012 23:37:11 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-454256-40</guid>
        <source url="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256.rss">Can&#39;t get session to logout on all pages</source>
      </item>
      <item>
        <title>Can&#39;t get session to logout on all pages</title>
        <dc:creator><![CDATA[@justaguy justaguy]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/justaguy">@justaguy</a> wrote:</p>
          <blockquote>
              <p>Hold on, I think you have the code wrong.</p>
<p>You need to define $skills as an empty array at the beginning of the function OUTSIDE any loop, and do the same for $xpTable. In the loop, when you are appending to the loop, don’t do,</p>
<pre><code class="lang-auto"></code></pre>
<p>Instead do,</p>
<pre><code class="lang-auto"></code></pre>
<p>You can get rid of the foreach loop in there when adding the skill XP since we can keep it in there. Instead of the current code in the loop, change it to,</p>
<pre><code class="lang-auto"></code></pre>
<p>But remember to get rid of the actual foreach statement.</p>
<p>Move the rest of the code I gave you outside for loop and everything should look good.</p>
<p>If you wish to add percentages, just simply add them in the skills array on this line,</p>
<pre><code class="lang-auto"></code></pre>
<p>This is the code you add all your information to.</p>
<p>Then once the skills are in order, loop through all the data with a foreach and output what you need to.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/39">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/39</link>
        <pubDate>Thu, 16 Aug 2012 23:28:11 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-454256-39</guid>
        <source url="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256.rss">Can&#39;t get session to logout on all pages</source>
      </item>
      <item>
        <title>Can&#39;t get session to logout on all pages</title>
        <dc:creator><![CDATA[@sageofmali sageofmali]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sageofmali">@sageofmali</a> wrote:</p>
          <blockquote>
              <p>[quote=“justaguy, post:37, topic:454256”]Look at the structure I gave you and just use that. I have that structure used in the example $skills array. In the loop which loops through each skill, you would append to the new skills array (we aren’t going to use $row since it is unorganized in itself) which follows the format I gave above.</p>
<p>Once you have a skills array like the one I have in the example, then you would use the code I just gave to sort it.[/quote]<br>
I have the code: <code>function Matrix($user){
	include "mysql.ws";
	for ($i = 1; $i &lt;=25; $i++){
		$xptype = findType($i)."xp";  
		$query = mysql_query("SELECT * FROM skills WHERE playerName LIKE '".fixName($user)."' ORDER BY $xptype LIMIT 1") or die(mysql_error());
		$row = mysql_fetch_array($query);
		$names = findType($i);
		$skills = array($names =&gt; array('xp' =&gt; $row[$xptype], 'level' =&gt; getLevelForXP($row[$xptype])));
		$xpTable = array();
		foreach ($skills as $skill)
			$xpTable[] = $skill['xp'];
		array_multisort($xpTable, SORT_NUMERIC, SORT_DESC, $skills);
		unset($xpTable);
		print_r($skills);
		echo '&lt;br /&gt;';
	}
}</code><br>
Which would return:</p>
<pre><code class="lang-auto">Array ( [Attack] =&gt; Array ( [xp] =&gt; 168300 [level] =&gt; 55 ) ) 
Array ( [Defence] =&gt; Array ( [xp] =&gt; 168850 [level] =&gt; 55 ) ) 
Array ( [Strength] =&gt; Array ( [xp] =&gt; 183700 [level] =&gt; 55 ) ) 
Array ( [Constitution] =&gt; Array ( [xp] =&gt; 237934 [level] =&gt; 58 ) ) 
Array ( [Range] =&gt; Array ( [xp] =&gt; 0 [level] =&gt; 1 ) ) 
Array ( [Prayer] =&gt; Array ( [xp] =&gt; 1520000 [level] =&gt; 77 ) ) 
Array ( [Magic] =&gt; Array ( [xp] =&gt; 0 [level] =&gt; 1 ) ) 
Array ( [Cooking] =&gt; Array ( [xp] =&gt; 0 [level] =&gt; 1 ) ) 
Array ( [Woodcutting] =&gt; Array ( [xp] =&gt; 0 [level] =&gt; 1 ) ) 
Array ( [Fletching] =&gt; Array ( [xp] =&gt; 0 [level] =&gt; 1 ) ) 
Array ( [Fishing] =&gt; Array ( [xp] =&gt; 0 [level] =&gt; 1 ) ) 
Array ( [Firemaking] =&gt; Array ( [xp] =&gt; 0 [level] =&gt; 1 ) ) 
Array ( [Crafting] =&gt; Array ( [xp] =&gt; 0 [level] =&gt; 1 ) ) 
Array ( [Smithing] =&gt; Array ( [xp] =&gt; 0 [level] =&gt; 1 ) ) 
Array ( [Mining] =&gt; Array ( [xp] =&gt; 30065750 [level] =&gt; 99 ) ) 
Array ( [Herblore] =&gt; Array ( [xp] =&gt; 0 [level] =&gt; 1 ) ) 
Array ( [Agility] =&gt; Array ( [xp] =&gt; 0 [level] =&gt; 1 ) ) 
Array ( [Thieving] =&gt; Array ( [xp] =&gt; 0 [level] =&gt; 1 ) ) 
Array ( [Slayer] =&gt; Array ( [xp] =&gt; 0 [level] =&gt; 1 ) ) 
Array ( [Farming] =&gt; Array ( [xp] =&gt; 0 [level] =&gt; 1 ) ) 
Array ( [Runecraft] =&gt; Array ( [xp] =&gt; 0 [level] =&gt; 1 ) ) 
Array ( [Hunter] =&gt; Array ( [xp] =&gt; 0 [level] =&gt; 1 ) ) 
Array ( [Construction] =&gt; Array ( [xp] =&gt; 0 [level] =&gt; 1 ) ) 
Array ( [Summoning] =&gt; Array ( [xp] =&gt; 1038 [level] =&gt; 9 ) ) 
Array ( [Dungeoneering] =&gt; Array ( [xp] =&gt; 0 [level] =&gt; 1 ) ) </code></pre>
<p>But how would I grab the skills from the $skills array so I could print it out like this: [code=php]</p>
<li>
<img src="http://sage-scape.com/hiscores/img/'.fixName(NAME%20FROM%20ARRAY).'.png?2" alt="'.NAME FROM ARRAY.'" width="" height="">
<div data-value="'.$percent.'">'.$percent.'% Complete</div>
<div>
<h6>'.NAME FROM ARRAY.'</h6>
<p>Level '.LEVEL FROM ARRAY.'</p>
<p>'.XP FROM ARRAY.' XP</p>
</div>
</li>[/code]
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/38">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256/38</link>
        <pubDate>Thu, 16 Aug 2012 22:48:25 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-454256-38</guid>
        <source url="https://forum.moparisthebest.com/t/cant-get-session-to-logout-on-all-pages/454256.rss">Can&#39;t get session to logout on all pages</source>
      </item>
  </channel>
</rss>
