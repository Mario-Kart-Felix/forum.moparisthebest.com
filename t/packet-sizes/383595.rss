<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Packet Sizes</title>
    <link>https://forum.moparisthebest.com/t/packet-sizes/383595</link>
    <description>If you have no idea what I need help with, just click the back button please, and don&#39;t bother posting or looking.

But for the people that do, could someone explain to me what Packet Sizes are?

I&#39;m trying to make a new packet, and I have payload and what not, I just need to know about Packet Sizes. If anyone could help I would greatly appreciate it.</description>
    
    <lastBuildDate>Thu, 24 Feb 2011 12:37:22 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/packet-sizes/383595.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Packet Sizes</title>
        <dc:creator><![CDATA[@Clawz_fury lare69]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/clawz_fury">@Clawz_fury</a> wrote:</p>
          <blockquote>
              <p>AHHHHA! I see, I just learned something very useful, thank you.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/packet-sizes/383595/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/packet-sizes/383595/3</link>
        <pubDate>Thu, 24 Feb 2011 12:37:22 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-383595-3</guid>
        <source url="https://forum.moparisthebest.com/t/packet-sizes/383595.rss">Packet Sizes</source>
      </item>
      <item>
        <title>Packet Sizes</title>
        <dc:creator><![CDATA[@JaydenD12 JaydenD12]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/jaydend12">@JaydenD12</a> wrote:</p>
          <blockquote>
              <p>Basically, when a packet is received the first thing that’s read is the packet id, then the size of the packet is determined by accessing the packetsizes array using the packet id.</p>
<p>e.g:</p>
<pre><code class="lang-auto">int packetId = socket.read() &amp; 0xFF; //read 1 byte from the socket stream.
int packetSize = packetSizes[packetId];</code></pre>
<p>If the packet id in the array is -1, this means that the packet doesn’t have a set size, and the server will read the packet size directly.</p>
<p>e.g:</p>
<pre><code class="lang-auto">int packetId = socket.read() &amp; 0xFF; //read 1 byte from the socket stream.
int packetSize = packetSizes[packetId];

if (packetSize == -1)
	packetSize = socket.read() &amp; 0xFF; //read 1 byte from the socket stream.</code></pre>
<p>If the packet size is -2 in the packet sizes array, this means that the packet size is &gt; 255, so the packet size has to be read as a word (which is a short).</p>
<p>e.g:</p>
<pre><code class="lang-auto">int packetId = socket.read() &amp; 0xFF; //read 1 byte from the socket stream.
int packetSize = packetSizes[packetId];

if (packetSize == -2)
	packetSize = ((socket.read() &amp; 0xFF) &lt;&lt; 8) + socketStream.read() &amp; 0xFF; //read an unsigned word</code></pre>
<p>Once the packet id and the size are read, it will fill the input stream (Stream class) with the packet size;</p>
<p>e.g:</p>
<pre><code class="lang-auto">fillInputStream(packetSize);[/code]

And that method is literally this:

[code]public void fillInputStream(int count) {
	inStream.bufferLocation = 0;
	input.read(inStream.buffer, 0, count);
}[/code]

Then, the packets data must be parsed, and here's how that works:

Let's say our packet size is 6 bytes. The first 4 bytes represent a double word (dword for short, which is an integer) and the last two bytes represent a word (short). Our packet id is 20.

Now, remember that:

Unsigned bytes have a maximum value of 0 to +255, while signed bytes have a maximum value of -128 to +127.
Unsigned shorts have a maximum value of 0 to +65,535, while signed shorts have a maximum value of -32,768 to +32,767

And I'm sure you'd know the maximum value of an integer.

[code]switch (packetId) {
	case 20:
		int ourInteger = inStream.readDWord();
		int ourWord = inStream.readUnsignedWord();
		break;
}</code></pre>
<p>The client would write this packet to the server like this:</p>
<p><code>stream.createFrame(20);
stream.writeDWord(1337);
stream.writeWord(9000);</code></p>
<p>If you need anymore clarification, let me know.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/packet-sizes/383595/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/packet-sizes/383595/2</link>
        <pubDate>Wed, 23 Feb 2011 04:57:29 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-383595-2</guid>
        <source url="https://forum.moparisthebest.com/t/packet-sizes/383595.rss">Packet Sizes</source>
      </item>
      <item>
        <title>Packet Sizes</title>
        <dc:creator><![CDATA[@Clawz_fury lare69]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/clawz_fury">@Clawz_fury</a> wrote:</p>
          <blockquote>
              <p>If you have no idea what I need help with, just click the back button please, and don’t bother posting or looking.</p>
<p>But for the people that do, could someone explain to me what Packet Sizes are?</p>
<p>I’m trying to make a new packet, and I have payload and what not, I just need to know about Packet Sizes. If anyone could help I would greatly appreciate it.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/packet-sizes/383595/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/packet-sizes/383595/1</link>
        <pubDate>Wed, 23 Feb 2011 04:37:30 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-383595-1</guid>
        <source url="https://forum.moparisthebest.com/t/packet-sizes/383595.rss">Packet Sizes</source>
      </item>
  </channel>
</rss>
