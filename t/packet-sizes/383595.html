<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/packet-sizes/383595 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Aug 2019 06:34:41 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Packet Sizes - Runescape - moparisthebest.com</title>
    <meta name="description" content="If you have no idea what I need help with, just click the back button please, and don&amp;#39;t bother posting or looking. 

But for the people that do, could someone explain to me what Packet Sizes are? 

I&amp;#39;m trying to make a n&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="383595.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Packet Sizes&#39;" href="383595.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/packet-sizes/383595" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/packet-sizes/383595" />
<meta property="og:title" content="Packet Sizes" />
<meta name="twitter:title" content="Packet Sizes" />
<meta property="og:description" content="If you have no idea what I need help with, just click the back button please, and don’t bother posting or looking.  But for the people that do, could someone explain to me what Packet Sizes are?  I’m trying to make a new packet, and I have payload and what not, I just need to know about Packet Sizes. If anyone could help I would greatly appreciate it." />
<meta name="twitter:description" content="If you have no idea what I need help with, just click the back button please, and don’t bother posting or looking.  But for the people that do, could someone explain to me what Packet Sizes are?  I’m trying to make a new packet, and I have payload and what not, I just need to know about Packet Sizes. If anyone could help I would greatly appreciate it." />
<meta property="article:published_time" content="2011-02-23T04:37:30+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="383595.html">Packet Sizes</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Clawz_fury.html'><span itemprop='name'>Clawz_fury</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-02-23T04:37:30Z'>
            <time itemprop='dateModified' datetime='2016-08-01T07:45:11Z' class='post-time'>
              August 1, 2016,  7:45am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>If you have no idea what I need help with, just click the back button please, and don’t bother posting or looking.</p>
<p>But for the people that do, could someone explain to me what Packet Sizes are?</p>
<p>I’m trying to make a new packet, and I have payload and what not, I just need to know about Packet Sizes. If anyone could help I would greatly appreciate it.</p>
      </div>

      <meta itemprop='headline' content='Packet Sizes'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/JaydenD12.html'><span itemprop='name'>JaydenD12</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-02-23T04:57:29Z'>
            <time itemprop='dateModified' datetime='2016-08-01T07:45:13Z' class='post-time'>
              August 1, 2016,  7:45am
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Basically, when a packet is received the first thing that’s read is the packet id, then the size of the packet is determined by accessing the packetsizes array using the packet id.</p>
<p>e.g:</p>
<pre><code class="lang-auto">int packetId = socket.read() &amp; 0xFF; //read 1 byte from the socket stream.
int packetSize = packetSizes[packetId];</code></pre>
<p>If the packet id in the array is -1, this means that the packet doesn’t have a set size, and the server will read the packet size directly.</p>
<p>e.g:</p>
<pre><code class="lang-auto">int packetId = socket.read() &amp; 0xFF; //read 1 byte from the socket stream.
int packetSize = packetSizes[packetId];

if (packetSize == -1)
	packetSize = socket.read() &amp; 0xFF; //read 1 byte from the socket stream.</code></pre>
<p>If the packet size is -2 in the packet sizes array, this means that the packet size is &gt; 255, so the packet size has to be read as a word (which is a short).</p>
<p>e.g:</p>
<pre><code class="lang-auto">int packetId = socket.read() &amp; 0xFF; //read 1 byte from the socket stream.
int packetSize = packetSizes[packetId];

if (packetSize == -2)
	packetSize = ((socket.read() &amp; 0xFF) &lt;&lt; 8) + socketStream.read() &amp; 0xFF; //read an unsigned word</code></pre>
<p>Once the packet id and the size are read, it will fill the input stream (Stream class) with the packet size;</p>
<p>e.g:</p>
<pre><code class="lang-auto">fillInputStream(packetSize);[/code]

And that method is literally this:

[code]public void fillInputStream(int count) {
	inStream.bufferLocation = 0;
	input.read(inStream.buffer, 0, count);
}[/code]

Then, the packets data must be parsed, and here's how that works:

Let's say our packet size is 6 bytes. The first 4 bytes represent a double word (dword for short, which is an integer) and the last two bytes represent a word (short). Our packet id is 20.

Now, remember that:

Unsigned bytes have a maximum value of 0 to +255, while signed bytes have a maximum value of -128 to +127.
Unsigned shorts have a maximum value of 0 to +65,535, while signed shorts have a maximum value of -32,768 to +32,767

And I'm sure you'd know the maximum value of an integer.

[code]switch (packetId) {
	case 20:
		int ourInteger = inStream.readDWord();
		int ourWord = inStream.readUnsignedWord();
		break;
}</code></pre>
<p>The client would write this packet to the server like this:</p>
<p><code>stream.createFrame(20);
stream.writeDWord(1337);
stream.writeWord(9000);</code></p>
<p>If you need anymore clarification, let me know.</p>
      </div>

      <meta itemprop='headline' content='Packet Sizes'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Clawz_fury.html'><span itemprop='name'>Clawz_fury</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2011-02-24T12:37:22Z'>
            <time itemprop='dateModified' datetime='2016-08-01T07:46:40Z' class='post-time'>
              August 1, 2016,  7:46am
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>AHHHHA! I see, I just learned something very useful, thank you.</p>
      </div>

      <meta itemprop='headline' content='Packet Sizes'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/packet-sizes/383595 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Aug 2019 06:34:42 GMT -->
</html>
