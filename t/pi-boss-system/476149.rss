<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>[PI] Boss System</title>
    <link>https://forum.moparisthebest.com/t/pi-boss-system/476149</link>
    <description>I used this: [url=http://www.rune-server.org/runescape-development/rs2-server/snippets/377016-boss-system.html]http://www.rune-server.org/runescape-development/rs2-server/snippets/377016-boss-system.html[/url] as a reference.

[CODE]package org.rs2.model.entity.npcs.impl.bosses;

import java.util.LinkedList;
import java.util.List;

import org.rs2.model.entity.npcs.NPC;
import org.rs2.model.entity.players.Client;
import org.util.Misc;

/**
 * An interface for bosses, including the main things every boss needs.
 * @author Thock321
 *
 */
public abstract class Boss extends NPC {

	/**
	 * The constructor for creating a new boss.
	 * @param _npcId The bosses index in the server.
	 * @param _npcType The bosses npc id (not to be confused with it&#39;s index).
	 */
	public Boss(int _npcType) {
		super(-1, _npcType);
	}
	
	private short currentHealth = getMaximumHealth();
	
	private long lastAttack;
	
	private Client currentTarget;
	
	private List&lt;Client&gt; targets = new LinkedList&lt;Client&gt;();
	
	/**
	 * Gets the npc type of the boss.
	 * @return The bosses npc type.
	 */
	public int getNpcType() {
		return npcType;
	}
	
	/**
	 * Get when the boss performed it&#39;s last attack.
	 * @return When the boss performed it&#39;s last attack.
	 */
	public long getLastAttack() {
		return lastAttack;
	}
	
	/**
	 * Sets when the boss last made an attack.
	 * @param lastAttack When the boss performed the attack.
	 */
	public void setLastAttack(long lastAttack) {
		this.lastAttack = lastAttack;
	}
	
	/**
	 * Handles what happens when the bosses attacks.
	 */
	public abstract void attack();
	
	/**
	 * Handles what happens when the boss dies.
	 */
	public abstract void death();
	
	/**
	 * Handles anything that needs to be checked/called every tick for the boss.
	 */
	public abstract void process();
	
	/**
	 * Get the delay between each attack the boss performs. This is in ticks.
	 * @return The delay between attacks.
	 */
	public abstract int getAttackDelay();
	
	/**
	 * Get the bosses maximum health.
	 * @return The bosses maximum health.
	 */
	public abstract short getMaximumHealth();
	
	/**
	 * Gets the bosses current health.
	 * @return The bosses current health.
	 */
	public short getCurrentHealth() {
		return currentHealth;
	}
	
	/**
	 * Subtracts the bosses health by the amount of damage it received.
	 * @param damageTaken The amount of damage it received.
	 */
	public void takeDamage(int damageTaken) {
		currentHealth -= damageTaken;
	}
	
	/**
	 * Gets the largest amount of damage the boss can perform.
	 * @return The bosses maximum hit.
	 */
	public abstract short getMaxHit();
	
	/**
	 * Gets the current players attacking the boss.
	 * @return The players attacking the boss.
	 */
	public List&lt;Client&gt; getTargets() {
		return targets;
	}
	
	/**
	 * Adds a player attacking the boss.
	 * @param target The new player attacking the boss.
	 */
	public void addTarget(Client target) {
		targets.add(target);
	}
	
	/**
	 * Removes a player who used to be attacking the boss but isn&#39;t anymore.
	 * @param target The player who used to attack the boss.
	 */
	public void removeTarget(Client target) {
		if (targets.contains(target))
			targets.remove(target);
	}
	
	/**
	 * Gets the bosses current target that he is focusing on.
	 * @return The target the boss is focusing on.
	 */
	public Client getCurrentTarget() {
		return currentTarget;
	}
	
	/**
	 * Changes the target that the boss is focusing on.
	 * @param currentTarget The bosses new target to focus on.
	 */
	public void setCurrentTarget(Client currentTarget) {
		this.currentTarget = currentTarget;
	}
	
	/**
	 * Gets a random target for the boss to focus on.
	 * @return The random target that the boss is now focusing on.
	 */
	public void getRandomCurrentTarget() {
		setCurrentTarget((Client) getTargets().toArray()[Misc.random(getTargets().toArray().length - 1)]);
	}

}
[/CODE]

[CODE]package org.rs2.model.entity.npcs.impl.bosses;

import java.io.IOException;
import java.util.LinkedList;
import java.util.List;

import org.rs2.Location;
import org.rs2.model.World;
import org.rs2.model.entity.npcs.NPC;
import org.rs2.model.entity.npcs.NPCHandler;
import org.rs2.model.entity.players.Client;
import org.util.Misc;

/**
 * A class for handling bosses.
 * @author Thock321
 *
 */
public class BossHandler {
	
	private static List&lt;Boss&gt; bosses = new LinkedList&lt;Boss&gt;();
	
	private static List&lt;Boss&gt; bossesAlive = new LinkedList&lt;Boss&gt;();
	
	private static List&lt;Boss&gt; bossesToRemove = new LinkedList&lt;Boss&gt;();
	
	static {
		try {
			for (@SuppressWarnings(&quot;rawtypes&quot;) Class c : Misc.getClasses(&quot;org.rs2.mode.entity.npcs.impl.bosses.impl&quot;)) {
				bosses.add((Boss)c.newInstance());
			}
		} catch (ClassNotFoundException | IOException e) {
			e.printStackTrace();
		} catch (InstantiationException e) {
			e.printStackTrace();
		} catch (IllegalAccessException e) {
			e.printStackTrace();
		}
	}
	
	/**
	 * What happens every tick for bosses.
	 */
	public static void process() {
		for (Boss b : bossesAlive) {
			if (b.getCurrentHealth() &lt;= 0) {
				b.death();
				NPCHandler.npcs[b.npcId] = null;
				bossesToRemove.add(b);
				continue;
			}
			for (Client c : World.getWorld().getRegionManager().getRegion(b).getPlayers()) {
				if (Misc.goodDistance(c.getAbsX(), c.getAbsY(), b.getAbsX(), b.getAbsY(), 10) &amp;&amp; !b.getTargets().contains(c)) {
					b.addTarget(c);
				} else if (!Misc.goodDistance(c.getAbsX(), c.getAbsY(), b.getAbsX(), b.getAbsY(), 10) &amp;&amp; b.getTargets().contains(c)) {
					b.removeTarget(c);
				}
			}
			b.process();
			if (System.currentTimeMillis() - b.getLastAttack() &gt;= b.getAttackDelay()) {
				b.attack();
			}
		}
		for (Boss b : bossesToRemove) {
			bossesAlive.remove(b);
		}
		bossesToRemove.clear();
	}
	
	/**
	 * Checks if an npc is a boss.
	 * @param npcType The npc id of the npc.
	 * @return If the npc is a boss or not.
	 */
	public static boolean isBoss(int npcType) {
		for (Boss b : bosses) {
			if (b.getNpcType() == npcType)
				return true;
		}
		return false;
	}
	
	/**
	 * Checks if an npc is a boss.
	 * @param npcType The npc.
	 * @return If the npc is a boss or not.
	 */
	public static boolean isBoss(NPC npc) {
		if (npc instanceof Boss)
			return true;
		return isBoss(npc.npcType);
	}
	
	/**
	 * Gets a boss for it&#39;s npc id.
	 * @param npcType The npc id.
	 * @return The boss (null if it&#39;s not a boss).
	 */
	public static Boss forId(int npcType) {
		for (Boss b : bosses) {
			if (b.npcType == npcType) {
				return b;
			}
		}
		return null;
	}
	
	/**
	 * Spawn boss.
	 */
	public static void spawnBoss(Boss boss, Location spawnPoint) {
		int slot = -1;
		for (int i = 1; i &lt; NPCHandler.maxNPCs; i++) {
			if (NPCHandler.npcs[i] == null) {
				slot = i;
				break;
			}
		}
		if(slot == -1) {
			return;
		}
		boss.setLocation(spawnPoint);
		boss.setAbsX(spawnPoint.getX());
		boss.setAbsY(spawnPoint.getY());
		boss.setHeight(spawnPoint.getZ());
		boss.makeX = spawnPoint.getX();
		boss.makeY = spawnPoint.getY();
		boss.HP = boss.getMaximumHealth();
		boss.MaxHP = boss.getMaximumHealth();
		boss.npcId = slot;
		NPCHandler.npcs[slot] = boss;
	}

}
[/CODE]

[CODE]	@SuppressWarnings(&quot;rawtypes&quot;)
	public static Class[] getClasses(String packageName) throws ClassNotFoundException, IOException {
		ClassLoader classLoader = Thread.currentThread().getContextClassLoader();
		assert classLoader != null;
		String path = packageName.replace(&#39;.&#39;, &#39;/&#39;);
		Enumeration&lt;URL&gt; resources = classLoader.getResources(path);
		List&lt;File&gt; dirs = new ArrayList&lt;File&gt;();
		while (resources.hasMoreElements()) {
			URL resource = resources.nextElement();
			dirs.add(new File(resource.getFile()));
		}
		ArrayList&lt;Class&gt; classes = new ArrayList&lt;Class&gt;();
		for (File directory : dirs) {
			classes.addAll(findClasses(directory, packageName));
		}
		return classes.toArray(new Class[classes.size()]);
	}
	
	@SuppressWarnings(&quot;rawtypes&quot;)
	private static List&lt;Class&gt; findClasses(File directory, String packageName) throws ClassNotFoundException {
		List&lt;Class&gt; classes = new ArrayList&lt;Class&gt;();
		if (!directory.exists()) {
			return classes;
		}
		File[] files = directory.listFiles();
		for (File file : files) {
			if (file.isDirectory()) {
				assert !file.getName().contains(&quot;.&quot;);
				classes.addAll(findClasses(file, packageName + &quot;.&quot; + file.getName()));
			} else if (file.getName().endsWith(&quot;.class&quot;)) {
				classes.add(Class.forName(packageName + &#39;.&#39; + file.getName().substring(0, file.getName().length() - 6)));
			}
		}
		return classes;
	}[/CODE]

In NPCHandler&#39;s process method add:
[CODE]BossHandler.process();[/CODE]

Under [CODE]				/**
				* Attacking player
				**/[/CODE]
Add
[CODE]if (!BossHandler.isBoss(npcs[i].npcType)) {[/CODE]
And don&#39;t forget to add a closing bracket.

Search for
[CODE]if (npcs[i].isDead[/CODE]
and make it this
[CODE]if (npcs[i].isDead &amp;&amp; !BossHandler.isBoss(npcs[i].npcType)) {[/CODE]

In the loadAutoSpawn method
Change this if statement:
[CODE]				if (token.equals(&quot;spawn&quot;)) {[/CODE]
to this
[CODE]				if (token.equals(&quot;spawn&quot;)) {
					if (BossHandler.isBoss(Integer.parseInt(token3[0])))
						BossHandler.spawnBoss(BossHandler.forId(Integer.parseInt(token3[0])), 
								new Location(Integer.parseInt(token3[1]), Integer.parseInt(token3[2]), Integer.parseInt(token3[3])));
					else
						newNPC(Integer.parseInt(token3[0]), Integer.parseInt(token3[1]), Integer.parseInt(token3[2]), Integer.parseInt(token3[3]), 
								Integer.parseInt(token3[4]), getNpcListHP(Integer.parseInt(token3[0])), Integer.parseInt(token3[5]), 
								Integer.parseInt(token3[6]), Integer.parseInt(token3[7]));
				
				}[/CODE]



Here is an example of this being used:
[CODE]package org.rs2.model.entity.npcs.impl.bosses.impl;

import org.rs2.event.Event;
import org.rs2.model.World;
import org.rs2.model.entity.npcs.impl.bosses.Boss;
import org.rs2.model.entity.npcs.impl.bosses.BossHandler;
import org.rs2.tick.Tickable;
import org.util.Misc;

public class KalphiteQueenFormOne extends Boss {
	
	public KalphiteQueenFormOne() {
		super(1158);
		// TODO Auto-generated constructor stub
	}
	
	private static final int DEATH_EMOTE = 6242;
	private static final int MAGIC_ATTACK_ANIM = 6240;
	private static final int MAGIC_PROJECTILE_ID = 280;
	private static final int MAGIC_GFX = 281;
	private static final int RANGE_ATTACK_ANIM = 6240;
	private static final int RANGE_PROJECTILE_ID = 473;
	private static final int RANGE_GFX = 281;
	private static final int MELEE_ATTACK_ANIM = 6240;
	private static final int PROJECTILE_SPEED = 90;
	
	private int damage = 0;
	private int hitDelay = 0;
	@Override
	public void attack() {
		getRandomCurrentTarget();
		attackType = Misc.random(2);
		damage = Misc.random(getMaxHit());
		if (damage &lt; 20 &amp;&amp; Misc.random(9) &gt; 0)
			damage = 20 + Misc.random(getMaxHit() - 20);
		setLastAttack(System.currentTimeMillis());
		switch (attackType) {
		case 0://melee
			hitDelay = 2;
			forceAnim(MELEE_ATTACK_ANIM);
			endGfx = -1;
			if (getCurrentTarget().prayerActive[18])
				damage /= 2;
			break;
		case 1://range
			hitDelay = 3;
			forceAnim(RANGE_ATTACK_ANIM);
			getCurrentTarget().getPA().createPlayersProjectile(getAbsX(), getAbsY(), (getAbsY() - getCurrentTarget().getAbsY()) * -1, 
					(getAbsX() - getCurrentTarget().getAbsX()) * -1, 50, PROJECTILE_SPEED, RANGE_PROJECTILE_ID, 43, 31, -getCurrentTarget().getId() - 1, 65);
			endGfx = RANGE_GFX;
			if (getCurrentTarget().prayerActive[17])
				damage *= 0.05;
			break;
		case 2://mage
			hitDelay = 3;
			forceAnim(MAGIC_ATTACK_ANIM);
			getCurrentTarget().getPA().createPlayersProjectile(getAbsX(), getAbsY(), (getAbsY() - getCurrentTarget().getAbsY()) * -1, 
					(getAbsX() - getCurrentTarget().getAbsX()) * -1, 50, PROJECTILE_SPEED, MAGIC_PROJECTILE_ID, 43, 31, -getCurrentTarget().getId() - 1, 65);
			endGfx = MAGIC_GFX;
			if (getCurrentTarget().prayerActive[16])
				damage *= 0.05;
			break;
		}
		if (damage &gt; getCurrentTarget().playerLevel[3])
			damage = getCurrentTarget().playerLevel[3];
		World.getWorld().submit(new Tickable(hitDelay) {

			@Override
			public void execute() {
				getCurrentTarget().dealDamage(damage);
				if (endGfx &gt; 0)
					getCurrentTarget().gfx100(endGfx);
				stop();
			}
			
		});
	}

	@Override
	public void death() {
		forceAnim(DEATH_EMOTE);
		World.getWorld().submit(new Event(5000) {

			@Override
			public void execute() {
				BossHandler.spawnBoss(new KalphiteQueenFormTwo(), getLocation());
				stop();
			}
			
		});
	}

	@Override
	public void process() {
		// TODO Auto-generated method stub
		
	}

	@Override
	public int getAttackDelay() {
		return 2400;
	}

	@Override
	public short getMaximumHealth() {
		return 267;
	}

	@Override
	public short getMaxHit() {
		// TODO Auto-generated method stub
		return 31;
	}

}
[/CODE]

You might need this:
[CODE]    public void dealDamage(int damage) {
    	handleHitMask(damage);
		playerLevel[3] -= damage;
		getPA().refreshSkill(3);
		updateRequired = true;
    }[/CODE]

You may need to change some things around to make this work for you.</description>
    
    <lastBuildDate>Sun, 06 Jan 2013 02:13:31 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/pi-boss-system/476149.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>[PI] Boss System</title>
        <dc:creator><![CDATA[@Clawz_fury lare69]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/clawz_fury">@Clawz_fury</a> wrote:</p>
          <blockquote>
              <p>[quote=“thock321, post:19, topic:476149”][quote author=Fails link=topic=594299.msg4193408#msg4193408 date=1357159144]<br>
bitch don’t kill my vibe.<br>
[/quote]<br>
Um?[/quote]<br>
Kendrick Lamar – Bitch, Don’t Kill My Vibe</p>
<p>i dont really listen to him im more in to OFWGKTA <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-boss-system/476149/20">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-boss-system/476149/20</link>
        <pubDate>Sun, 06 Jan 2013 02:13:31 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-476149-20</guid>
        <source url="https://forum.moparisthebest.com/t/pi-boss-system/476149.rss">[PI] Boss System</source>
      </item>
      <item>
        <title>[PI] Boss System</title>
        <dc:creator><![CDATA[@thock321 thock321]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/thock321">@thock321</a> wrote:</p>
          <blockquote>
              <aside class="quote quote-modified" data-post="18" data-topic="476149">
<div class="title">
<div class="quote-controls"></div>
 Fails:</div>
<blockquote>
<p>bitch don’t kill my vibe.</p>
</blockquote>
</aside>
<p>Um?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-boss-system/476149/19">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-boss-system/476149/19</link>
        <pubDate>Sat, 05 Jan 2013 06:18:45 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-476149-19</guid>
        <source url="https://forum.moparisthebest.com/t/pi-boss-system/476149.rss">[PI] Boss System</source>
      </item>
      <item>
        <title>[PI] Boss System</title>
        <dc:creator><![CDATA[@F_A_I_L_S Fails]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/f_a_i_l_s">@F_A_I_L_S</a> wrote:</p>
          <blockquote>
              <p>bitch don’t kill my vibe.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-boss-system/476149/18">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-boss-system/476149/18</link>
        <pubDate>Wed, 02 Jan 2013 20:39:04 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-476149-18</guid>
        <source url="https://forum.moparisthebest.com/t/pi-boss-system/476149.rss">[PI] Boss System</source>
      </item>
      <item>
        <title>[PI] Boss System</title>
        <dc:creator><![CDATA[@arham_4 arham 4]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/arham_4">@arham_4</a> wrote:</p>
          <blockquote>
              <pre><code class="lang-auto">package com.netty.world;


/**
 * 
 * @author Joshua Rodrigues
 * @since Sep 21, 2011 11:59:59 AM
 */
public class Location {


        /**
         * 
         */
        private short x;


        /**
         * 
         */
        private short y;


        /**
         * 
         */
        private byte z;


        /**
         * 
         * @param x
         *                      The id to set.
         * @param y
         *                      The id to set.
         * @param z
         *                      The id to set.
         */
        public Location(short x, short y, byte z) {
                this.setX(x);
                this.setY(y);
                this.setZ(z);
        }


        /**
         * 
         * @param x
         *                      The id to set.
         */
        public void setX(short x) {
                this.x = x;
        }


        /**
         * 
         * @return
         *                      The id to set.
         */
        public short getX() {
                return this.x;
        }


        /**
         * 
         * @param y
         *                      The id to set.
         */
        public void setY(short y) {
                this.y = y;
        }


        /**
         * 
         * @return
         *                      The id to set.
         */
        public short getY() {
                return this.y;
        }


        /**
         * 
         * @param z
         *                      The id to set.
         */
        public void setZ(byte z) {
                this.z = z;
        }


        /**
         * 
         * @return
         *                      The id to set.
         */
        public byte getZ() {
                return this.z;
        }


        /**
         * 
         * @return
         *                      The id to set.
         */
        public short getLocalX() {
                return this.getLocalX(this);
        }


        /**
         * 
         * @return
         *                      The id to set.
         */
        public short getLocalY() {
                return this.getLocalY(this);
        }


        /**
         * 
         * @param l
         *                      The id to set.
         * @return
         *                      The id to set.
         */
        public short getLocalX(Location l) {
                return (short) (this.getX() - (8 * l.getRegionX()));
        }


        /**
         * 
         * @param l
         *                      The id to set.
         * @return
         *                      The id to set.
         */
        public short getLocalY(Location l) {
                return (short) (this.getY() - (8 * l.getRegionY()));
        }


        /**
         * 
         * @return
         *                      The id to set.
         */
        public short getRegionX() {
                return (short) ((this.getX() &gt;&gt; 3) - 6);
        }


        /**
         * 
         * @return
         *                      The id to set.
         */
        public short getRegionY() {
                return (short) ((this.getY() &gt;&gt; 3) - 6);
        }


        /**
         * 
         * @param otherLocation
         *                      The id to set.
         * @return
         *                      The id to set.
         */
        public boolean isWithinDistance(Location otherLocation) {
                if (otherLocation == null) {
                        return false;
                }
                if (this.getZ() != otherLocation.getZ()) {
                        return false;
                }
                int x = otherLocation.getX() - this.getX();
                int y = otherLocation.getY() - this.getY();
                return (x &lt;= 14) &amp;&amp; (x &gt;= -15) &amp;&amp; (y &lt;= 14) &amp;&amp; (y &gt;= -15);
        }


        /**
         * 
         * @param location
         *                      The id to set.
         * @return
         *                      The id to set.
         */
        public Location addLocation(Location location) {
                if (location == null) {
                        return null;
                }
                short x = location.getX();
                short y = location.getY();
                byte z = location.getZ();
                return new Location((short) (this.getX() + x), (short) (this.getY() + y), (byte) (this.getZ() + z));
        }


        /* (non-Javadoc)
         * @see java.lang.Object#equals(java.lang.Object)
         */
        @Override
        public boolean equals(Object otherLocation) {
                if (otherLocation == null) {
                        return false;
                }
                Location location = (Location) otherLocation;
                return (this.getX() == location.getX()) &amp;&amp; (this.getY() == location.getY()) &amp;&amp; (this.getZ() == location.getZ());
        }


        /* (non-Javadoc)
         * @see java.lang.Object#hashCode()
         */
        @Override
        public int hashCode() {
                return super.hashCode();
        }
}</code></pre>
<p>Should work y’all</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-boss-system/476149/17">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-boss-system/476149/17</link>
        <pubDate>Wed, 02 Jan 2013 20:37:07 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-476149-17</guid>
        <source url="https://forum.moparisthebest.com/t/pi-boss-system/476149.rss">[PI] Boss System</source>
      </item>
      <item>
        <title>[PI] Boss System</title>
        <dc:creator><![CDATA[@Clawz_fury lare69]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/clawz_fury">@Clawz_fury</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="15" data-topic="476149">
<div class="title">
<div class="quote-controls"></div>
 arham 4:</div>
<blockquote>
<p>Can you share your Location.java?</p>
</blockquote>
</aside>
<p>It probably just represents a position point.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-boss-system/476149/16">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-boss-system/476149/16</link>
        <pubDate>Wed, 02 Jan 2013 20:13:41 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-476149-16</guid>
        <source url="https://forum.moparisthebest.com/t/pi-boss-system/476149.rss">[PI] Boss System</source>
      </item>
      <item>
        <title>[PI] Boss System</title>
        <dc:creator><![CDATA[@arham_4 arham 4]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/arham_4">@arham_4</a> wrote:</p>
          <blockquote>
              <p>Can you share your Location.java?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-boss-system/476149/15">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-boss-system/476149/15</link>
        <pubDate>Wed, 02 Jan 2013 18:29:59 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-476149-15</guid>
        <source url="https://forum.moparisthebest.com/t/pi-boss-system/476149.rss">[PI] Boss System</source>
      </item>
      <item>
        <title>[PI] Boss System</title>
        <dc:creator><![CDATA[@Clawz_fury lare69]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/clawz_fury">@Clawz_fury</a> wrote:</p>
          <blockquote>
              <aside class="quote quote-modified" data-post="12" data-topic="476149">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/thock321/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> thock321:</div>
<blockquote>
<p>Personally, I think bosses should be handled differently from normal npcs.  This allows you to create more “intelligent” bosses in an easier way.  If you point out any place that could be improved, I would appreciate it.</p>
</blockquote>
</aside>
<p>That actually makes a lot of sense, I never thought of it that way.</p>
<p><span class="mention">@rl</span>: ahhh just forget it</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-boss-system/476149/14">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-boss-system/476149/14</link>
        <pubDate>Sat, 29 Dec 2012 02:59:12 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-476149-14</guid>
        <source url="https://forum.moparisthebest.com/t/pi-boss-system/476149.rss">[PI] Boss System</source>
      </item>
      <item>
        <title>[PI] Boss System</title>
        <dc:creator><![CDATA[@relexlawl relexlawl]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/relexlawl">@relexlawl</a> wrote:</p>
          <blockquote>
              <p>[quote=“Clawz fury, post:11, topic:476149”][quote author=relexlawl link=topic=594299.msg4190588#msg4190588 date=1356746881]<br>
Yeah, you’re right OO isn’t convenient at all.<br>
[/quote]<br>
Stop being a moron</p>
<aside class="quote">
<blockquote>
<p>and abstraction being used [size=24pt]<span class="bbcode-b">in this context</span>[/size] isn’t really convenient at all.</p>
</blockquote>
</aside>
<p><span class="mention">@thock</span>: good job, although I don’t really see a reasonable use for this, its good that you’re teaching some members of the community how to use inheritance to benefit their servers in not just this, but other things too.</p>
<p>edit: It’s not really complicated from a general view, but its more complicated in a sense that something like this could be done much simpler.[/quote]</p>
<p>I’m not being a moron…I can clearly read…Why wouldn’t OO be ‘convenient’ in THIS CONTEXT?..Java is an OO language…God forbid people actually start using it…</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-boss-system/476149/13">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-boss-system/476149/13</link>
        <pubDate>Sat, 29 Dec 2012 02:41:15 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-476149-13</guid>
        <source url="https://forum.moparisthebest.com/t/pi-boss-system/476149.rss">[PI] Boss System</source>
      </item>
      <item>
        <title>[PI] Boss System</title>
        <dc:creator><![CDATA[@thock321 thock321]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/thock321">@thock321</a> wrote:</p>
          <blockquote>
              <p>[quote=“Clawz fury, post:11, topic:476149”][quote author=relexlawl link=topic=594299.msg4190588#msg4190588 date=1356746881]<br>
Yeah, you’re right OO isn’t convenient at all.<br>
[/quote]<br>
Stop being a moron</p>
<aside class="quote">
<blockquote>
<p>and abstraction being used [size=24pt]<span class="bbcode-b">in this context</span>[/size] isn’t really convenient at all.</p>
</blockquote>
</aside>
<p><span class="mention">@thock</span>: good job, although I don’t really see a reasonable use for this, its good that you’re teaching some members of the community how to use inheritance to benefit their servers in not just this, but other things too.</p>
<p>edit: It’s not really complicated from a general view, but its more complicated in a sense that something like this could be done much simpler.[/quote]<br>
Personally, I think bosses should be handled differently from normal npcs.  This allows you to create more “intelligent” bosses in an easier way.  If you point out any place that could be improved, I would appreciate it.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-boss-system/476149/12">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-boss-system/476149/12</link>
        <pubDate>Sat, 29 Dec 2012 02:35:38 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-476149-12</guid>
        <source url="https://forum.moparisthebest.com/t/pi-boss-system/476149.rss">[PI] Boss System</source>
      </item>
      <item>
        <title>[PI] Boss System</title>
        <dc:creator><![CDATA[@Clawz_fury lare69]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/clawz_fury">@Clawz_fury</a> wrote:</p>
          <blockquote>
              <aside class="quote quote-modified" data-post="9" data-topic="476149">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/relexlawl/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> relexlawl:</div>
<blockquote>
<p>Yeah, you’re right OO isn’t convenient at all.</p>
</blockquote>
</aside>
<p>Stop being a moron</p>
<aside class="quote quote-modified" data-post="8" data-topic="476149">
<div class="title">
<div class="quote-controls"></div>
 Clawz fury:</div>
<blockquote>
<p>and abstraction being used [size=24pt]<span class="bbcode-b">in this context</span>[/size] isn’t really convenient at all.</p>
</blockquote>
</aside>
<p><span class="mention">@thock</span>: good job, although I don’t really see a reasonable use for this, its good that you’re teaching some members of the community how to use inheritance to benefit their servers in not just this, but other things too.</p>
<p>edit: It’s not really complicated from a general view, but its more complicated in a sense that something like this could be done much simpler.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-boss-system/476149/11">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-boss-system/476149/11</link>
        <pubDate>Sat, 29 Dec 2012 02:27:50 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-476149-11</guid>
        <source url="https://forum.moparisthebest.com/t/pi-boss-system/476149.rss">[PI] Boss System</source>
      </item>
      <item>
        <title>[PI] Boss System</title>
        <dc:creator><![CDATA[@thock321 thock321]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/thock321">@thock321</a> wrote:</p>
          <blockquote>
              <p>This allows the making of bosses much easier as you don’t have to cram bunches of code all over the place in NPCHandler.  All you have to do is create a new instance of Boss and change everything needed in that instance.</p>
<p>You guys either:<br>
-Don’t/can’t understand it.<br>
-Think it the documentation makes it look more complicated.<br>
-Need to start take more object oriented approaches to things, as this is an object oriented language you are dealing with.<br>
-Didn’t look/Barely looked at the code.</p>
<p>If you don’t like it, you can always modify the code to make it suit your needs.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-boss-system/476149/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-boss-system/476149/10</link>
        <pubDate>Sat, 29 Dec 2012 02:18:49 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-476149-10</guid>
        <source url="https://forum.moparisthebest.com/t/pi-boss-system/476149.rss">[PI] Boss System</source>
      </item>
      <item>
        <title>[PI] Boss System</title>
        <dc:creator><![CDATA[@relexlawl relexlawl]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/relexlawl">@relexlawl</a> wrote:</p>
          <blockquote>
              <p>The abstract class isn’t complicated at all…</p>
<p>Yeah, you’re right OO isn’t convenient at all.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-boss-system/476149/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-boss-system/476149/9</link>
        <pubDate>Sat, 29 Dec 2012 02:08:01 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-476149-9</guid>
        <source url="https://forum.moparisthebest.com/t/pi-boss-system/476149.rss">[PI] Boss System</source>
      </item>
      <item>
        <title>[PI] Boss System</title>
        <dc:creator><![CDATA[@Clawz_fury lare69]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/clawz_fury">@Clawz_fury</a> wrote:</p>
          <blockquote>
              <p>[quote=“relexlawl, post:7, topic:476149”]This isn’t ‘needed’, but would be a lot more convenient to use…</p>
<p>Ever heard of the reason/advantage of using abstraction? You don’t have to keep over-writing things that will in the end accomplish the exact same thing…In this case npcs categorized as ‘bosses’.</p>
<p>This is definitely not the best it could be, but can definitely be a good start.[/quote]<br>
Yes, I’m sure almost everyone that replied in this topic knows what abstraction is (besides luna-scape). The fact of the matter is:</p>
<aside class="quote" data-post="5" data-topic="476149">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/asshole_rule/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> asshole_rule:</div>
<blockquote>
<p>unnecessarily over complicated</p>
</blockquote>
</aside>
<p>and abstraction being used in this context isn’t really convenient at all.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-boss-system/476149/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-boss-system/476149/8</link>
        <pubDate>Sat, 29 Dec 2012 01:55:42 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-476149-8</guid>
        <source url="https://forum.moparisthebest.com/t/pi-boss-system/476149.rss">[PI] Boss System</source>
      </item>
      <item>
        <title>[PI] Boss System</title>
        <dc:creator><![CDATA[@relexlawl relexlawl]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/relexlawl">@relexlawl</a> wrote:</p>
          <blockquote>
              <p>This isn’t ‘needed’, but would be a lot more convenient to use…</p>
<p>Ever heard of the reason/advantage of using abstraction? You don’t have to keep over-writing things that will in the end accomplish the exact same thing…In this case npcs categorized as ‘bosses’.</p>
<p>This is definitely not the best it could be, but can definitely be a good start.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-boss-system/476149/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-boss-system/476149/7</link>
        <pubDate>Sat, 29 Dec 2012 01:38:49 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-476149-7</guid>
        <source url="https://forum.moparisthebest.com/t/pi-boss-system/476149.rss">[PI] Boss System</source>
      </item>
      <item>
        <title>[PI] Boss System</title>
        <dc:creator><![CDATA[@arham_4 arham 4]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/arham_4">@arham_4</a> wrote:</p>
          <blockquote>
              <p>[quote=“KroniKz_, post:4, topic:476149”][quote author=Clawz fury link=topic=594299.msg4189833#msg4189833 date=1356670029]<br>
Why exactly is this needed?<br>
[/quote][/quote]</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-boss-system/476149/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-boss-system/476149/6</link>
        <pubDate>Fri, 28 Dec 2012 05:41:38 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-476149-6</guid>
        <source url="https://forum.moparisthebest.com/t/pi-boss-system/476149.rss">[PI] Boss System</source>
      </item>
      <item>
        <title>[PI] Boss System</title>
        <dc:creator><![CDATA[@asshole_rule asshole_rule]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/asshole_rule">@asshole_rule</a> wrote:</p>
          <blockquote>
              <p>seems unnecessarily over complicated</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-boss-system/476149/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-boss-system/476149/5</link>
        <pubDate>Fri, 28 Dec 2012 05:33:17 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-476149-5</guid>
        <source url="https://forum.moparisthebest.com/t/pi-boss-system/476149.rss">[PI] Boss System</source>
      </item>
      <item>
        <title>[PI] Boss System</title>
        <dc:creator><![CDATA[@kronixz kronikz]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/kronixz">@kronixz</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="3" data-topic="476149">
<div class="title">
<div class="quote-controls"></div>
 Clawz fury:</div>
<blockquote>
<p>Why exactly is this needed?</p>
</blockquote>
</aside>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-boss-system/476149/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-boss-system/476149/4</link>
        <pubDate>Fri, 28 Dec 2012 04:47:39 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-476149-4</guid>
        <source url="https://forum.moparisthebest.com/t/pi-boss-system/476149.rss">[PI] Boss System</source>
      </item>
      <item>
        <title>[PI] Boss System</title>
        <dc:creator><![CDATA[@Clawz_fury lare69]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/clawz_fury">@Clawz_fury</a> wrote:</p>
          <blockquote>
              <p>Why exactly is this needed?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-boss-system/476149/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-boss-system/476149/3</link>
        <pubDate>Fri, 28 Dec 2012 04:47:09 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-476149-3</guid>
        <source url="https://forum.moparisthebest.com/t/pi-boss-system/476149.rss">[PI] Boss System</source>
      </item>
      <item>
        <title>[PI] Boss System</title>
        <dc:creator><![CDATA[@luna-scape luna-scape]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/luna-scape">@luna-scape</a> wrote:</p>
          <blockquote>
              <p>Nice <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"> first post wut</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-boss-system/476149/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-boss-system/476149/2</link>
        <pubDate>Wed, 26 Dec 2012 23:14:44 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-476149-2</guid>
        <source url="https://forum.moparisthebest.com/t/pi-boss-system/476149.rss">[PI] Boss System</source>
      </item>
      <item>
        <title>[PI] Boss System</title>
        <dc:creator><![CDATA[@thock321 thock321]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/thock321">@thock321</a> wrote:</p>
          <blockquote>
              <p>I used this: <a href="http://www.rune-server.org/runescape-development/rs2-server/snippets/377016-boss-system.html" data-bbcode="true" rel="nofollow noopener">http://www.rune-server.org/runescape-development/rs2-server/snippets/377016-boss-system.html</a> as a reference.</p>
<p>[CODE]package org.rs2.model.entity.npcs.impl.bosses;</p>
<p>import java.util.LinkedList;<br>
import java.util.List;</p>
<p>import org.rs2.model.entity.npcs.NPC;<br>
import org.rs2.model.entity.players.Client;<br>
import org.util.Misc;</p>
<p>/**</p>
<ul>
<li>An interface for bosses, including the main things every boss needs.</li>
<li>
<span class="mention">@author</span> Thock321</li>
<li>
</li>
</ul>
<p>*/<br>
public abstract class Boss extends NPC {</p>
<pre><code>/**
 * The constructor for creating a new boss.
 * @param _npcId The bosses index in the server.
 * @param _npcType The bosses npc id (not to be confused with it's index).
 */
public Boss(int _npcType) {
	super(-1, _npcType);
}

private short currentHealth = getMaximumHealth();

private long lastAttack;

private Client currentTarget;

private List&lt;Client&gt; targets = new LinkedList&lt;Client&gt;();

/**
 * Gets the npc type of the boss.
 * @return The bosses npc type.
 */
public int getNpcType() {
	return npcType;
}

/**
 * Get when the boss performed it's last attack.
 * @return When the boss performed it's last attack.
 */
public long getLastAttack() {
	return lastAttack;
}

/**
 * Sets when the boss last made an attack.
 * @param lastAttack When the boss performed the attack.
 */
public void setLastAttack(long lastAttack) {
	this.lastAttack = lastAttack;
}

/**
 * Handles what happens when the bosses attacks.
 */
public abstract void attack();

/**
 * Handles what happens when the boss dies.
 */
public abstract void death();

/**
 * Handles anything that needs to be checked/called every tick for the boss.
 */
public abstract void process();

/**
 * Get the delay between each attack the boss performs. This is in ticks.
 * @return The delay between attacks.
 */
public abstract int getAttackDelay();

/**
 * Get the bosses maximum health.
 * @return The bosses maximum health.
 */
public abstract short getMaximumHealth();

/**
 * Gets the bosses current health.
 * @return The bosses current health.
 */
public short getCurrentHealth() {
	return currentHealth;
}

/**
 * Subtracts the bosses health by the amount of damage it received.
 * @param damageTaken The amount of damage it received.
 */
public void takeDamage(int damageTaken) {
	currentHealth -= damageTaken;
}

/**
 * Gets the largest amount of damage the boss can perform.
 * @return The bosses maximum hit.
 */
public abstract short getMaxHit();

/**
 * Gets the current players attacking the boss.
 * @return The players attacking the boss.
 */
public List&lt;Client&gt; getTargets() {
	return targets;
}

/**
 * Adds a player attacking the boss.
 * @param target The new player attacking the boss.
 */
public void addTarget(Client target) {
	targets.add(target);
}

/**
 * Removes a player who used to be attacking the boss but isn't anymore.
 * @param target The player who used to attack the boss.
 */
public void removeTarget(Client target) {
	if (targets.contains(target))
		targets.remove(target);
}

/**
 * Gets the bosses current target that he is focusing on.
 * @return The target the boss is focusing on.
 */
public Client getCurrentTarget() {
	return currentTarget;
}

/**
 * Changes the target that the boss is focusing on.
 * @param currentTarget The bosses new target to focus on.
 */
public void setCurrentTarget(Client currentTarget) {
	this.currentTarget = currentTarget;
}

/**
 * Gets a random target for the boss to focus on.
 * @return The random target that the boss is now focusing on.
 */
public void getRandomCurrentTarget() {
	setCurrentTarget((Client) getTargets().toArray()[Misc.random(getTargets().toArray().length - 1)]);
}
</code></pre>
<p>}<br>
[/CODE]</p>
<p>[CODE]package org.rs2.model.entity.npcs.impl.bosses;</p>
<p>import java.io.IOException;<br>
import java.util.LinkedList;<br>
import java.util.List;</p>
<p>import org.rs2.Location;<br>
import org.rs2.model.World;<br>
import org.rs2.model.entity.npcs.NPC;<br>
import org.rs2.model.entity.npcs.NPCHandler;<br>
import org.rs2.model.entity.players.Client;<br>
import org.util.Misc;</p>
<p>/**</p>
<ul>
<li>A class for handling bosses.</li>
<li>
<span class="mention">@author</span> Thock321</li>
<li>
</li>
</ul>
<p>*/<br>
public class BossHandler {</p>
<pre><code>private static List&lt;Boss&gt; bosses = new LinkedList&lt;Boss&gt;();

private static List&lt;Boss&gt; bossesAlive = new LinkedList&lt;Boss&gt;();

private static List&lt;Boss&gt; bossesToRemove = new LinkedList&lt;Boss&gt;();

static {
	try {
		for (@SuppressWarnings("rawtypes") Class c : Misc.getClasses("org.rs2.mode.entity.npcs.impl.bosses.impl")) {
			bosses.add((Boss)c.newInstance());
		}
	} catch (ClassNotFoundException | IOException e) {
		e.printStackTrace();
	} catch (InstantiationException e) {
		e.printStackTrace();
	} catch (IllegalAccessException e) {
		e.printStackTrace();
	}
}

/**
 * What happens every tick for bosses.
 */
public static void process() {
	for (Boss b : bossesAlive) {
		if (b.getCurrentHealth() &lt;= 0) {
			b.death();
			NPCHandler.npcs[b.npcId] = null;
			bossesToRemove.add(b);
			continue;
		}
		for (Client c : World.getWorld().getRegionManager().getRegion(b).getPlayers()) {
			if (Misc.goodDistance(c.getAbsX(), c.getAbsY(), b.getAbsX(), b.getAbsY(), 10) &amp;&amp; !b.getTargets().contains(c)) {
				b.addTarget(c);
			} else if (!Misc.goodDistance(c.getAbsX(), c.getAbsY(), b.getAbsX(), b.getAbsY(), 10) &amp;&amp; b.getTargets().contains(c)) {
				b.removeTarget(c);
			}
		}
		b.process();
		if (System.currentTimeMillis() - b.getLastAttack() &gt;= b.getAttackDelay()) {
			b.attack();
		}
	}
	for (Boss b : bossesToRemove) {
		bossesAlive.remove(b);
	}
	bossesToRemove.clear();
}

/**
 * Checks if an npc is a boss.
 * @param npcType The npc id of the npc.
 * @return If the npc is a boss or not.
 */
public static boolean isBoss(int npcType) {
	for (Boss b : bosses) {
		if (b.getNpcType() == npcType)
			return true;
	}
	return false;
}

/**
 * Checks if an npc is a boss.
 * @param npcType The npc.
 * @return If the npc is a boss or not.
 */
public static boolean isBoss(NPC npc) {
	if (npc instanceof Boss)
		return true;
	return isBoss(npc.npcType);
}

/**
 * Gets a boss for it's npc id.
 * @param npcType The npc id.
 * @return The boss (null if it's not a boss).
 */
public static Boss forId(int npcType) {
	for (Boss b : bosses) {
		if (b.npcType == npcType) {
			return b;
		}
	}
	return null;
}

/**
 * Spawn boss.
 */
public static void spawnBoss(Boss boss, Location spawnPoint) {
	int slot = -1;
	for (int i = 1; i &lt; NPCHandler.maxNPCs; i++) {
		if (NPCHandler.npcs[i] == null) {
			slot = i;
			break;
		}
	}
	if(slot == -1) {
		return;
	}
	boss.setLocation(spawnPoint);
	boss.setAbsX(spawnPoint.getX());
	boss.setAbsY(spawnPoint.getY());
	boss.setHeight(spawnPoint.getZ());
	boss.makeX = spawnPoint.getX();
	boss.makeY = spawnPoint.getY();
	boss.HP = boss.getMaximumHealth();
	boss.MaxHP = boss.getMaximumHealth();
	boss.npcId = slot;
	NPCHandler.npcs[slot] = boss;
}
</code></pre>
<p>}<br>
[/CODE]</p>
<p>[CODE]	<span class="mention">@SuppressWarnings</span>(“rawtypes”)<br>
public static Class[] getClasses(String packageName) throws ClassNotFoundException, IOException {<br>
ClassLoader classLoader = Thread.currentThread().getContextClassLoader();<br>
assert classLoader != null;<br>
String path = packageName.replace(’.’, ‘/’);<br>
Enumeration resources = classLoader.getResources(path);<br>
List dirs = new ArrayList();<br>
while (resources.hasMoreElements()) {<br>
URL resource = resources.nextElement();<br>
dirs.add(new File(resource.getFile()));<br>
}<br>
ArrayList classes = new ArrayList();<br>
for (File directory : dirs) {<br>
classes.addAll(findClasses(directory, packageName));<br>
}<br>
return classes.toArray(new Class[classes.size()]);<br>
}</p>
<pre><code>@SuppressWarnings("rawtypes")
private static List&lt;Class&gt; findClasses(File directory, String packageName) throws ClassNotFoundException {
	List&lt;Class&gt; classes = new ArrayList&lt;Class&gt;();
	if (!directory.exists()) {
		return classes;
	}
	File[] files = directory.listFiles();
	for (File file : files) {
		if (file.isDirectory()) {
			assert !file.getName().contains(".");
			classes.addAll(findClasses(file, packageName + "." + file.getName()));
		} else if (file.getName().endsWith(".class")) {
			classes.add(Class.forName(packageName + '.' + file.getName().substring(0, file.getName().length() - 6)));
		}
	}
	return classes;
}[/CODE]
</code></pre>
<p>In NPCHandler’s process method add:</p>
<pre><code class="lang-auto"></code></pre>
<p>Under <code>				/**
				* Attacking player
				**/</code><br>
Add</p>
<pre><code class="lang-auto"></code></pre>
<p>And don’t forget to add a closing bracket.</p>
<p>Search for</p>
<pre><code class="lang-auto"></code></pre>
<p>and make it this</p>
<pre><code class="lang-auto"></code></pre>
<p>In the loadAutoSpawn method<br>
Change this if statement:</p>
<pre><code class="lang-auto"></code></pre>
<p>to this</p>
<p>[CODE]				if (token.equals(“spawn”)) {<br>
if (BossHandler.isBoss(Integer.parseInt(token3[0])))<br>
BossHandler.spawnBoss(BossHandler.forId(Integer.parseInt(token3[0])),<br>
new Location(Integer.parseInt(token3[1]), Integer.parseInt(token3[2]), Integer.parseInt(token3[3])));<br>
else<br>
newNPC(Integer.parseInt(token3[0]), Integer.parseInt(token3[1]), Integer.parseInt(token3[2]), Integer.parseInt(token3[3]),<br>
Integer.parseInt(token3[4]), getNpcListHP(Integer.parseInt(token3[0])), Integer.parseInt(token3[5]),<br>
Integer.parseInt(token3[6]), Integer.parseInt(token3[7]));</p>
<pre><code>			}[/CODE]
</code></pre>
<p>Here is an example of this being used:</p>
<p>[CODE]package org.rs2.model.entity.npcs.impl.bosses.impl;</p>
<p>import org.rs2.event.Event;<br>
import org.rs2.model.World;<br>
import org.rs2.model.entity.npcs.impl.bosses.Boss;<br>
import org.rs2.model.entity.npcs.impl.bosses.BossHandler;<br>
import org.rs2.tick.Tickable;<br>
import org.util.Misc;</p>
<p>public class KalphiteQueenFormOne extends Boss {</p>
<pre><code>public KalphiteQueenFormOne() {
	super(1158);
	// TODO Auto-generated constructor stub
}

private static final int DEATH_EMOTE = 6242;
private static final int MAGIC_ATTACK_ANIM = 6240;
private static final int MAGIC_PROJECTILE_ID = 280;
private static final int MAGIC_GFX = 281;
private static final int RANGE_ATTACK_ANIM = 6240;
private static final int RANGE_PROJECTILE_ID = 473;
private static final int RANGE_GFX = 281;
private static final int MELEE_ATTACK_ANIM = 6240;
private static final int PROJECTILE_SPEED = 90;

private int damage = 0;
private int hitDelay = 0;
@Override
public void attack() {
	getRandomCurrentTarget();
	attackType = Misc.random(2);
	damage = Misc.random(getMaxHit());
	if (damage &lt; 20 &amp;&amp; Misc.random(9) &gt; 0)
		damage = 20 + Misc.random(getMaxHit() - 20);
	setLastAttack(System.currentTimeMillis());
	switch (attackType) {
	case 0://melee
		hitDelay = 2;
		forceAnim(MELEE_ATTACK_ANIM);
		endGfx = -1;
		if (getCurrentTarget().prayerActive[18])
			damage /= 2;
		break;
	case 1://range
		hitDelay = 3;
		forceAnim(RANGE_ATTACK_ANIM);
		getCurrentTarget().getPA().createPlayersProjectile(getAbsX(), getAbsY(), (getAbsY() - getCurrentTarget().getAbsY()) * -1, 
				(getAbsX() - getCurrentTarget().getAbsX()) * -1, 50, PROJECTILE_SPEED, RANGE_PROJECTILE_ID, 43, 31, -getCurrentTarget().getId() - 1, 65);
		endGfx = RANGE_GFX;
		if (getCurrentTarget().prayerActive[17])
			damage *= 0.05;
		break;
	case 2://mage
		hitDelay = 3;
		forceAnim(MAGIC_ATTACK_ANIM);
		getCurrentTarget().getPA().createPlayersProjectile(getAbsX(), getAbsY(), (getAbsY() - getCurrentTarget().getAbsY()) * -1, 
				(getAbsX() - getCurrentTarget().getAbsX()) * -1, 50, PROJECTILE_SPEED, MAGIC_PROJECTILE_ID, 43, 31, -getCurrentTarget().getId() - 1, 65);
		endGfx = MAGIC_GFX;
		if (getCurrentTarget().prayerActive[16])
			damage *= 0.05;
		break;
	}
	if (damage &gt; getCurrentTarget().playerLevel[3])
		damage = getCurrentTarget().playerLevel[3];
	World.getWorld().submit(new Tickable(hitDelay) {

		@Override
		public void execute() {
			getCurrentTarget().dealDamage(damage);
			if (endGfx &gt; 0)
				getCurrentTarget().gfx100(endGfx);
			stop();
		}
		
	});
}

@Override
public void death() {
	forceAnim(DEATH_EMOTE);
	World.getWorld().submit(new Event(5000) {

		@Override
		public void execute() {
			BossHandler.spawnBoss(new KalphiteQueenFormTwo(), getLocation());
			stop();
		}
		
	});
}

@Override
public void process() {
	// TODO Auto-generated method stub
	
}

@Override
public int getAttackDelay() {
	return 2400;
}

@Override
public short getMaximumHealth() {
	return 267;
}

@Override
public short getMaxHit() {
	// TODO Auto-generated method stub
	return 31;
}
</code></pre>
<p>}<br>
[/CODE]</p>
<p>You might need this:</p>
<p><code>    public void dealDamage(int damage) {
    	handleHitMask(damage);
		playerLevel[3] -= damage;
		getPA().refreshSkill(3);
		updateRequired = true;
    }</code></p>
<p>You may need to change some things around to make this work for you.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/pi-boss-system/476149/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/pi-boss-system/476149/1</link>
        <pubDate>Wed, 26 Dec 2012 17:09:55 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-476149-1</guid>
        <source url="https://forum.moparisthebest.com/t/pi-boss-system/476149.rss">[PI] Boss System</source>
      </item>
  </channel>
</rss>
