<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Help with PHP in an upload script</title>
    <link>https://forum.moparisthebest.com/t/help-with-php-in-an-upload-script/244585</link>
    <description>Well i have an upload script i found on google :| 
it works great but all i want to know is how i can get it to say &quot;your file was uploaded to http://..suchsite.com/dir/yourfile.zip&quot; or something like that im absolutely useless at php and have no idea what im doing and i was hoping someone could help me, this is the code.

[code]
&lt;?php
// Upload directory: remember to give it write permission!
$uploaddir = &quot;upload/&quot;;
// what file types do you want to disallow?
$blacklist = array(&quot;.php&quot;, &quot;.phtml&quot;, &quot;.php3&quot;, &quot;.php4&quot;, &quot;.php5&quot;, &quot;.exe&quot;, &quot;.js&quot;,&quot;.html&quot;, &quot;.htm&quot;, &quot;.inc&quot;);
 // allowed filetypes
$allowed_filetypes = array(&#39;.jpg&#39;,&#39;.gif&#39;,&#39;.bmp&#39;,&#39;.png&#39;,&#39;.zip&#39;,&#39;.rar&#39;);
if (!is_dir($uploaddir)) {
	die (&quot;Upload directory does not exists.&quot;);
}
if (!is_writable($uploaddir)) {
	die (&quot;Upload directory is not writable.&quot;);
}
if ($_POST[&#39;submit&#39;]) {
	if (isset($_FILES[&#39;file&#39;])) {
		if ($_FILES[&#39;file&#39;][&#39;error&#39;] != 0) {
			switch ($_FILES[&#39;file&#39;][&#39;error&#39;]) {
				case 1:
					print &#39;The file is too big.&#39;; // php installation max file size error
					exit;
					break;
				case 2:
					print &#39;The file is too big.&#39;; // form max file size error - DEPRECATED
					exit;
					break;
				case 3:
					print &#39;Only part of the file was uploaded.&#39;;
					exit;
					break;
				case 4:
					print &#39;No file was uploaded.&#39;;
					exit;
					break;
				case 6:
					print &quot;Missing a temporary folder.&quot;;
					exit;
					break;
				case 7:
					print &quot;Failed to write file to disk&quot;;
					exit;
					break;
				case 8:
					print &quot;File upload stopped by extension&quot;;
					exit;
					break;
			}
		} else {
			foreach ($blacklist as $item) {
				if (preg_match(&quot;/$item\$/i&quot;, $_FILES[&#39;file&#39;][&#39;name&#39;])) {
					echo &quot;Invalid filetype !&quot;;
					unset($_FILES[&#39;file&#39;][&#39;tmp_name&#39;]);
					exit;
				}
			}
			// Get the extension from the filename.
			$ext = substr($_FILES[&#39;file&#39;][&#39;name&#39;], strpos($_FILES[&#39;file&#39;][&#39;name&#39;],&#39;.&#39;), strlen($_FILES[&#39;file&#39;][&#39;name&#39;])-1);
			// Check if the filetype is allowed, if not DIE and inform the user.
			if(!in_array($ext,$allowed_filetypes)){
				die(&#39;The file you attempted to upload is not allowed.&#39;);
			}
			if (!file_exists($uploaddir . $_FILES[&quot;file&quot;][&quot;name&quot;])) {
				// Proceed with file upload
				if (is_uploaded_file($_FILES[&#39;file&#39;][&#39;tmp_name&#39;])) {
					//File was uploaded to the temp dir, continue upload process
					if (move_uploaded_file($_FILES[&#39;file&#39;][&#39;tmp_name&#39;], $uploaddir . $_FILES[&#39;file&#39;][&#39;name&#39;])) {
						// uploaded file was moved and renamed succesfuly. Display a message.
						echo &quot;Upload successful!, Your file was uploaded to UPLOADEDTOLINKHERE &lt;br&gt; &quot;;
						} else {
						echo &quot;Error while uploading the file, Please contact the webmaster.&quot;;
						unset($_FILES[&#39;file&#39;][&#39;tmp_name&#39;]);
					}
				} else {
					//File was NOT uploaded to the temp dir
					switch ($_FILES[&#39;file&#39;][&#39;error&#39;]) {
						case 1:
							print &#39;The file is too big.&#39;; // php installation max file size error
							break;
						case 2:
							print &#39;The file is too big.&#39;; // form max file size error
							break;
						case 3:
							print &#39;Only part of the file was uploaded&#39;;
							break;
						case 4:
							print &#39;No file was uploaded&#39;;
							break;
						case 6:
							print &quot;Missing a temporary folder.&quot;;
							break;
						case 7:
							print &quot;Failed to write file to disk&quot;;
							break;
						case 8:
							print &quot;File upload stopped by extension&quot;;
							break;
					}
				}
			} else { // There&#39;s a file with the same name
				echo &quot;Filename already exists, Please rename the file and retry.&quot;;
				unset($_FILES[&#39;file&#39;][&#39;tmp_name&#39;]);
			}
		}
	} else { // user did not select a file to upload
		echo &quot;Please select a file to upload.&quot;;
	}
} else { // upload button was not pressed
	header(&quot;Location: form.html&quot;);
}
?&gt;
[/code]

Hope someone can help, thanks :D</description>
    
    <lastBuildDate>Tue, 18 Nov 2008 19:01:34 +0000</lastBuildDate>
    <category>General Programming</category>
    <atom:link href="https://forum.moparisthebest.com/t/help-with-php-in-an-upload-script/244585.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Help with PHP in an upload script</title>
        <dc:creator><![CDATA[@N00b1 N00b1]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/n00b1">@N00b1</a> wrote:</p>
          <blockquote>
              <aside class="quote no-group quote-modified" data-post="9" data-topic="244585">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/pwnd/40/5_6bca9977b612b7aeef77ba1ec1cd67b3.png" class="avatar"> Pwnd:</div>
<blockquote>
<p>Meh, it’s labeled blacklist <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=6" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:">  I can only assume the coder was competent xP</p>
</blockquote>
</aside>
<p>rofl xPP</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/help-with-php-in-an-upload-script/244585/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/help-with-php-in-an-upload-script/244585/10</link>
        <pubDate>Tue, 18 Nov 2008 19:01:34 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-244585-10</guid>
        <source url="https://forum.moparisthebest.com/t/help-with-php-in-an-upload-script/244585.rss">Help with PHP in an upload script</source>
      </item>
      <item>
        <title>Help with PHP in an upload script</title>
        <dc:creator><![CDATA[@Pwnd Pwnd]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/pwnd">@Pwnd</a> wrote:</p>
          <blockquote>
              <p>Meh, it’s labeled blacklist <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=6" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:">  I can only assume the coder was competent xP</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/help-with-php-in-an-upload-script/244585/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/help-with-php-in-an-upload-script/244585/9</link>
        <pubDate>Tue, 18 Nov 2008 18:50:48 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-244585-9</guid>
        <source url="https://forum.moparisthebest.com/t/help-with-php-in-an-upload-script/244585.rss">Help with PHP in an upload script</source>
      </item>
      <item>
        <title>Help with PHP in an upload script</title>
        <dc:creator><![CDATA[@N00b1 N00b1]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/n00b1">@N00b1</a> wrote:</p>
          <blockquote>
              <p>[quote=“Pwnd, post:5, topic:244585”][quote author=N00b1 link=topic=320972.msg2539623#msg2539623 date=1226941051]<br>
change</p>
<pre><code class="lang-auto">echo "Upload successful!, Your file was uploaded to UPLOADEDTOLINKHERE &lt;br&gt; ";</code></pre>
<p>to</p>
<pre><code class="lang-auto">echo "Upload successful!, Your file was uploaded to " . $uploaddir . $_FILES["file"]["name"] . "&lt;br /&gt;";</code></pre>
<p>should work…</p>
<p>also unless you want me to come and hack you for being a fool don’t alow .php &gt;&lt;’<br>
[/quote]See the blacklist array? :P[/quote]</p>
<p>lol that was the black list? woopsie <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=6" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
<aside class="quote no-group" data-post="6" data-topic="244585">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/m4g3owns/40/5_6bca9977b612b7aeef77ba1ec1cd67b3.png" class="avatar"> M4G3OWNS:</div>
<blockquote>
<p>Thanks for the help guys, im going to start reading tutorials soon start learning php :\ thanks for replying so fast <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=6" title=":smiley:" class="emoji" alt=":smiley:"></p>
</blockquote>
</aside>
<p><a href="http://www.phpvideotutorials.com" rel="nofollow noopener">www.phpvideotutorials.com</a> &lt;-- teh best!</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/help-with-php-in-an-upload-script/244585/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/help-with-php-in-an-upload-script/244585/8</link>
        <pubDate>Tue, 18 Nov 2008 18:45:45 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-244585-8</guid>
        <source url="https://forum.moparisthebest.com/t/help-with-php-in-an-upload-script/244585.rss">Help with PHP in an upload script</source>
      </item>
      <item>
        <title>Help with PHP in an upload script</title>
        <dc:creator><![CDATA[@Server-Unknown.Net Server-Unknown.Net]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/server-unknown.net">@Server-Unknown.Net</a> wrote:</p>
          <blockquote>
              <p>NP :p.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/help-with-php-in-an-upload-script/244585/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/help-with-php-in-an-upload-script/244585/7</link>
        <pubDate>Mon, 17 Nov 2008 19:31:10 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-244585-7</guid>
        <source url="https://forum.moparisthebest.com/t/help-with-php-in-an-upload-script/244585.rss">Help with PHP in an upload script</source>
      </item>
      <item>
        <title>Help with PHP in an upload script</title>
        <dc:creator><![CDATA[@M4G3OWNS M4G3OWNS]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/m4g3owns">@M4G3OWNS</a> wrote:</p>
          <blockquote>
              <p>Thanks for the help guys, im going to start reading tutorials soon start learning php :\ thanks for replying so fast <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=6" title=":smiley:" class="emoji" alt=":smiley:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/help-with-php-in-an-upload-script/244585/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/help-with-php-in-an-upload-script/244585/6</link>
        <pubDate>Mon, 17 Nov 2008 19:25:26 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-244585-6</guid>
        <source url="https://forum.moparisthebest.com/t/help-with-php-in-an-upload-script/244585.rss">Help with PHP in an upload script</source>
      </item>
      <item>
        <title>Help with PHP in an upload script</title>
        <dc:creator><![CDATA[@Pwnd Pwnd]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/pwnd">@Pwnd</a> wrote:</p>
          <blockquote>
              <p>[quote=“N00b1, post:4, topic:244585”]change</p>
<pre><code class="lang-auto">echo "Upload successful!, Your file was uploaded to UPLOADEDTOLINKHERE &lt;br&gt; ";</code></pre>
<p>to</p>
<pre><code class="lang-auto">echo "Upload successful!, Your file was uploaded to " . $uploaddir . $_FILES["file"]["name"] . "&lt;br /&gt;";</code></pre>
<p>should work…</p>
<p>also unless you want me to come and hack you for being a fool don’t alow .php &gt;&lt;’[/quote]See the blacklist array? <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=6" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/help-with-php-in-an-upload-script/244585/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/help-with-php-in-an-upload-script/244585/5</link>
        <pubDate>Mon, 17 Nov 2008 17:04:01 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-244585-5</guid>
        <source url="https://forum.moparisthebest.com/t/help-with-php-in-an-upload-script/244585.rss">Help with PHP in an upload script</source>
      </item>
      <item>
        <title>Help with PHP in an upload script</title>
        <dc:creator><![CDATA[@N00b1 N00b1]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/n00b1">@N00b1</a> wrote:</p>
          <blockquote>
              <p>change</p>
<pre><code class="lang-auto">echo "Upload successful!, Your file was uploaded to UPLOADEDTOLINKHERE &lt;br&gt; ";</code></pre>
<p>to</p>
<pre><code class="lang-auto">echo "Upload successful!, Your file was uploaded to " . $uploaddir . $_FILES["file"]["name"] . "&lt;br /&gt;";</code></pre>
<p>should work…</p>
<p>also unless you want me to come and hack you for being a fool don’t alow .php &gt;&lt;’</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/help-with-php-in-an-upload-script/244585/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/help-with-php-in-an-upload-script/244585/4</link>
        <pubDate>Mon, 17 Nov 2008 16:57:31 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-244585-4</guid>
        <source url="https://forum.moparisthebest.com/t/help-with-php-in-an-upload-script/244585.rss">Help with PHP in an upload script</source>
      </item>
      <item>
        <title>Help with PHP in an upload script</title>
        <dc:creator><![CDATA[@Unhandled Unhandled]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/unhandled">@Unhandled</a> wrote:</p>
          <blockquote>
              <p>echo "Upload successful!, Your file was uploaded to " . $uploaddir . $_FILES[“file”][“name”] . “<br>”;<br>
I cba to read your entire script, so give that a try. You must need to make $uploaddir relative to your URL.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/help-with-php-in-an-upload-script/244585/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/help-with-php-in-an-upload-script/244585/3</link>
        <pubDate>Mon, 17 Nov 2008 12:25:30 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-244585-3</guid>
        <source url="https://forum.moparisthebest.com/t/help-with-php-in-an-upload-script/244585.rss">Help with PHP in an upload script</source>
      </item>
      <item>
        <title>Help with PHP in an upload script</title>
        <dc:creator><![CDATA[@cumescape cumescape]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/cumescape">@cumescape</a> wrote:</p>
          <blockquote>
              <p>If you didn’t make it than why use it?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/help-with-php-in-an-upload-script/244585/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/help-with-php-in-an-upload-script/244585/2</link>
        <pubDate>Mon, 17 Nov 2008 12:18:02 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-244585-2</guid>
        <source url="https://forum.moparisthebest.com/t/help-with-php-in-an-upload-script/244585.rss">Help with PHP in an upload script</source>
      </item>
      <item>
        <title>Help with PHP in an upload script</title>
        <dc:creator><![CDATA[@M4G3OWNS M4G3OWNS]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/m4g3owns">@M4G3OWNS</a> wrote:</p>
          <blockquote>
              <p>Well i have an upload script i found on google <img src="https://forum.moparisthebest.com/images/emoji/twitter/expressionless.png?v=6" title=":expressionless:" class="emoji" alt=":expressionless:"><br>
it works great but all i want to know is how i can get it to say “your file was uploaded to http://…suchsite.com/dir/yourfile.zip” or something like that im absolutely useless at php and have no idea what im doing and i was hoping someone could help me, this is the code.</p>
<pre><code class="lang-auto">&lt;?php
// Upload directory: remember to give it write permission!
$uploaddir = "upload/";
// what file types do you want to disallow?
$blacklist = array(".php", ".phtml", ".php3", ".php4", ".php5", ".exe", ".js",".html", ".htm", ".inc");
 // allowed filetypes
$allowed_filetypes = array('.jpg','.gif','.bmp','.png','.zip','.rar');
if (!is_dir($uploaddir)) {
	die ("Upload directory does not exists.");
}
if (!is_writable($uploaddir)) {
	die ("Upload directory is not writable.");
}
if ($_POST['submit']) {
	if (isset($_FILES['file'])) {
		if ($_FILES['file']['error'] != 0) {
			switch ($_FILES['file']['error']) {
				case 1:
					print 'The file is too big.'; // php installation max file size error
					exit;
					break;
				case 2:
					print 'The file is too big.'; // form max file size error - DEPRECATED
					exit;
					break;
				case 3:
					print 'Only part of the file was uploaded.';
					exit;
					break;
				case 4:
					print 'No file was uploaded.';
					exit;
					break;
				case 6:
					print "Missing a temporary folder.";
					exit;
					break;
				case 7:
					print "Failed to write file to disk";
					exit;
					break;
				case 8:
					print "File upload stopped by extension";
					exit;
					break;
			}
		} else {
			foreach ($blacklist as $item) {
				if (preg_match("/$item\$/i", $_FILES['file']['name'])) {
					echo "Invalid filetype !";
					unset($_FILES['file']['tmp_name']);
					exit;
				}
			}
			// Get the extension from the filename.
			$ext = substr($_FILES['file']['name'], strpos($_FILES['file']['name'],'.'), strlen($_FILES['file']['name'])-1);
			// Check if the filetype is allowed, if not DIE and inform the user.
			if(!in_array($ext,$allowed_filetypes)){
				die('The file you attempted to upload is not allowed.');
			}
			if (!file_exists($uploaddir . $_FILES["file"]["name"])) {
				// Proceed with file upload
				if (is_uploaded_file($_FILES['file']['tmp_name'])) {
					//File was uploaded to the temp dir, continue upload process
					if (move_uploaded_file($_FILES['file']['tmp_name'], $uploaddir . $_FILES['file']['name'])) {
						// uploaded file was moved and renamed succesfuly. Display a message.
						echo "Upload successful!, Your file was uploaded to UPLOADEDTOLINKHERE &lt;br&gt; ";
						} else {
						echo "Error while uploading the file, Please contact the webmaster.";
						unset($_FILES['file']['tmp_name']);
					}
				} else {
					//File was NOT uploaded to the temp dir
					switch ($_FILES['file']['error']) {
						case 1:
							print 'The file is too big.'; // php installation max file size error
							break;
						case 2:
							print 'The file is too big.'; // form max file size error
							break;
						case 3:
							print 'Only part of the file was uploaded';
							break;
						case 4:
							print 'No file was uploaded';
							break;
						case 6:
							print "Missing a temporary folder.";
							break;
						case 7:
							print "Failed to write file to disk";
							break;
						case 8:
							print "File upload stopped by extension";
							break;
					}
				}
			} else { // There's a file with the same name
				echo "Filename already exists, Please rename the file and retry.";
				unset($_FILES['file']['tmp_name']);
			}
		}
	} else { // user did not select a file to upload
		echo "Please select a file to upload.";
	}
} else { // upload button was not pressed
	header("Location: form.html");
}
?&gt;</code></pre>
<p>Hope someone can help, thanks <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=6" title=":smiley:" class="emoji" alt=":smiley:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/help-with-php-in-an-upload-script/244585/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/help-with-php-in-an-upload-script/244585/1</link>
        <pubDate>Mon, 17 Nov 2008 07:02:36 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-244585-1</guid>
        <source url="https://forum.moparisthebest.com/t/help-with-php-in-an-upload-script/244585.rss">Help with PHP in an upload script</source>
      </item>
  </channel>
</rss>
