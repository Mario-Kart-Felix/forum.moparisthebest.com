<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/317-winterlove-rsps-understanding-packet-i-o/546509 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:43:00 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>317 winterLove RSPS: Understanding packet I/O - Runescape - moparisthebest.com</title>
    <meta name="description" content="Hello! 

I got a 317 winterLove RSPS that I have been working on for quite some time now, but there is an issue that have been bugging me for ages now, and that is that I&amp;#39;m still unsure/confused by how the TCP-packets ar&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="546509.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;317 winterLove RSPS: Understanding packet I/O&#39;" href="546509.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/317-winterlove-rsps-understanding-packet-i-o/546509" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/317-winterlove-rsps-understanding-packet-i-o/546509" />
<meta property="og:title" content="317 winterLove RSPS: Understanding packet I/O" />
<meta name="twitter:title" content="317 winterLove RSPS: Understanding packet I/O" />
<meta property="og:description" content="Hello!  I got a 317 winterLove RSPS that I have been working on for quite some time now,  but there is an issue that have been bugging me for ages now,  and that is that I’m still unsure/confused by how the TCP-packets are handled  by the server, and I am wondering just exactly how the protocol works.  The server’s Client.class is declareing private blueprints of input and output streams like so:  //The socket&#39;s input stream. private java.io.InputStream inputStream;  //The socket&#39;s output stream..." />
<meta name="twitter:description" content="Hello!  I got a 317 winterLove RSPS that I have been working on for quite some time now,  but there is an issue that have been bugging me for ages now,  and that is that I’m still unsure/confused by how the TCP-packets are handled  by the server, and I am wondering just exactly how the protocol works.  The server’s Client.class is declareing private blueprints of input and output streams like so:  //The socket&#39;s input stream. private java.io.InputStream inputStream;  //The socket&#39;s output stream..." />
<meta property="article:published_time" content="2014-09-05T14:09:32+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="546509.html">317 winterLove RSPS: Understanding packet I/O</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Ole_Kristian.html'><span itemprop='name'>Ole_Kristian</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-09-05T14:09:32Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:44:00Z' class='post-time'>
              August 4, 2016,  1:44pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hello!</p>
<p>I got a 317 winterLove RSPS that I have been working on for quite some time now,<br>
but there is an issue that have been bugging me for ages now,<br>
and that is that I’m still unsure/confused by how the TCP-packets are handled<br>
by the server, and I am wondering just exactly how the protocol works.</p>
<p>The server’s <span class="bbcode-b">Client.class</span> is declareing private blueprints of input and output streams like so:</p>
<pre><code class="lang-auto">//The socket's input stream.
private java.io.InputStream inputStream;

//The socket's output stream.
private java.io.OutputStream outputStream;</code></pre>
<p>In the class’ constructor, it’s constructing the two streams with the socket’s<br>
getInputStream and getOutputStream methods, like so:</p>
<pre><code class="lang-auto">//Make the "inputStream" the input stream for the Socket.
inputStream = clientSocket.getInputStream();

//Make the "outputStream" the output stream for the Socket.
outputStream = clientSocket.getOutputStream();</code></pre>
<p>Still in the constructor; it’s constructing two instances of <span class="bbcode-b">stream.class</span>, like so:</p>
<pre><code class="lang-auto">outStream = new stream(new byte[bufferSize]);

inStream = new stream(new byte[bufferSize]);</code></pre>
<p>I understand that the stream-class constructs the server’s protocol, but as far as I can see it, the socket’s I/O-streams and these two stream-instances are completely seperate.</p>
<p>So what I’m really asking for is how the server is taking the stream-instances in use and how it starts handling data in the I/O-streams with the 317 protocol.</p>
<p>I’m sorry if my question got obfuscated.<br>
Looking forward for replies.</p>
<p>Have a nice day.  <img src="../../images/emoji/twitter/coolae52.png?v=5" title=":cool:" class="emoji" alt=":cool:"></p>
      </div>

      <meta itemprop='headline' content='317 winterLove RSPS: Understanding packet I/O'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/matzie.html'><span itemprop='name'>matzie</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-09-05T17:58:23Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:44:01Z' class='post-time'>
              August 4, 2016,  1:44pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>at the end of the Constructor the read/writing of the buffer begins. In reality, the client is never fully initialized until the player disconnects.</p>
<p>The inputStream is handled by the processPacket() or immediately preceding method calls. The outputStream is handled by the “constructor” part of the code. (I believe that is where it is) It comes after all of the login logic.</p>
      </div>

      <meta itemprop='headline' content='317 winterLove RSPS: Understanding packet I/O'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Ole_Kristian.html'><span itemprop='name'>Ole_Kristian</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-09-06T18:12:35Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:44:13Z' class='post-time'>
              August 4, 2016,  1:44pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hello, <span class="bbcode-b">matzie</span>!<br>
Thank you for your reply.</p>
<p>After the establishment of the stream-objects and setting the offset for both streams,<br>
the following code runs:</p>
<pre><code class="lang-auto">readPtr = writePtr = 0;
buffer = buffer = new byte[bufferSize];</code></pre>
<p>This is also something I don’t understand.<br>
Why not write the code like this?</p>
<pre><code class="lang-auto">readPtr = 0;
writePtr = 0;
buffer = new byte[bufferSize];</code></pre>
      </div>

      <meta itemprop='headline' content='317 winterLove RSPS: Understanding packet I/O'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/matzie.html'><span itemprop='name'>matzie</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-09-06T20:21:20Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:44:17Z' class='post-time'>
              August 4, 2016,  1:44pm
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Ole Kristian, post:3, topic:546509”]Hello, <span class="bbcode-b">matzie</span>!<br>
Thank you for your reply.</p>
<p>After the establishment of the stream-objects and setting the offset for both streams,<br>
the following code runs:</p>
<pre><code class="lang-auto">readPtr = writePtr = 0;
buffer = buffer = new byte[bufferSize];</code></pre>
<p>This is also something I don’t understand.<br>
Why not write the code like this?</p>
<p><code>
readPtr = 0;
writePtr = 0;
buffer = new byte[bufferSize];
</code>[/quote]<br>
the buffer = buffer is poor programming.<br>
and the readPtr = writePtr = 0; is just assiging 0 to both, since the code is processed from right to left anyways as<br>
(readPtr = (writePtr = 0)); It is just saving a line of code, also denoting that both of them should be set to the same value.</p>
      </div>

      <meta itemprop='headline' content='317 winterLove RSPS: Understanding packet I/O'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Clawz_fury.html'><span itemprop='name'>Clawz_fury</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-09-08T05:16:15Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:45:07Z' class='post-time'>
              August 4, 2016,  1:45pm
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>the buffer (Stream) stores the data that was read, or waiting to be written. although with blocking IO you can read/write directly from/to the socket</p>
<p>with NIO it forces you to use to a buffer for reading/writing so you cannot read/write directly from/to the socket</p>
      </div>

      <meta itemprop='headline' content='317 winterLove RSPS: Understanding packet I/O'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Ole_Kristian.html'><span itemprop='name'>Ole_Kristian</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-09-12T16:50:47Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:46:47Z' class='post-time'>
              August 4, 2016,  1:46pm
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Thank you, <span class="bbcode-b">lare69</span>.</p>
<p>Do you by any chance know of an available 317 protocol documentation/overview/tutorial?<br>
I have seen this before: <a href="http://rsps.wikia.com/wiki/317_Protocol" data-bbcode="true" rel="nofollow noopener">http://rsps.wikia.com/wiki/317_Protocol</a>.<br>
But I am looking for a reference with a bit deeper explanation of it.</p>
<p>Thanks.</p>
      </div>

      <meta itemprop='headline' content='317 winterLove RSPS: Understanding packet I/O'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/bbrt.html'><span itemprop='name'>bbrt</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-09-12T17:56:33Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:46:48Z' class='post-time'>
              August 4, 2016,  1:46pm
            </time>
        <span itemprop='position'>#7</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>The Stream class basically allows you to not only get bytes from an array (as you can do by indexing to a byte array) but lets you get different data types from the byte array by combining read bytes into one. Somewhere in your code there is a method that calls Socket$read(buffer), which reads up to buffer.length bytes into the array. Then you wrap it into a ‘Stream’ object (which is a shitty name by the way), now you can read from the data. To write a ‘Stream’ to the socket you initialize a new stream object with an empty array and you call Socket$write(buffer).</p>
      </div>

      <meta itemprop='headline' content='317 winterLove RSPS: Understanding packet I/O'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/317-winterlove-rsps-understanding-packet-i-o/546509 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:43:02 GMT -->
</html>
