<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Cin (VM, Java) - I finally finished somthing!</title>
    <link>https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544</link>
    <description>yeah... I finally finished somthing I started xD
I was making plans for this over the course of the last half year and made some mock-ups. Eventually had a random motivation boost
to finish it. It&#39;s inspired by Notch&#39;s 0x10c game but has some major differences from actual assembly.

Registers:

[ul][li]A, B, C, X, Y, Z to be used openly[/li]
[li]O (Overflow), U (Underflow) and E (Excess/Remainder)[/li]
[li]PC (Program Counter), SP (Stack Pointer) &lt;- Don&#39;t touch these unless you know what they do.[/li][/ul]

Instruction set:
[code]0	SET:a,b
	Sets cell a to b
	
1	ABS:a,b
	Stores the absolute value of b in a
	Can also be used as ABS:a to store the absolute value of a in a
	
2	MOD:a,b
	Stores a%b in a
	
3	ADD:a,b
	Stores a+b in a
	
4	SUB:a,b
	Stores a-b in a
	
5	MUL:a,b
	Stores a*b in a
	
6	DIV:a,b
	Stores (a-a%b)/b in a, stores a%b in E
	
7	IFE:a,b
	Skips next instruction if !(a==b)

8	IFN:a,b
	Skips next instruction if !(a!=b)
	
9	IFG:a,b
	Skips next instruction if !(a&gt;b)
	
10	IGE:a,b
	Skips next instruction if !(a&gt;=b)
	
11	IFL:a,b
	Skips next instruction if !(a&lt;b)
	
12	ILE:a,b
	Skips next instruction if !(a&lt;=b)
	
13	SHL:a,b
	Sets a to a&lt;&lt;b, sets E to (a&lt;&lt;b)&gt;&gt;&gt;32
	
14	SHR:a,b
	Sets a to a&gt;&gt;b, sets E to (a&lt;&lt;32)&gt;&gt;&gt;b
	
15	ASR:a,b
	Sets a to a&gt;&gt;&gt;b, sets E to (a&lt;&lt;32)&gt;&gt;&gt;b
	
16	AND:a,b
	Sets a to a&amp;b
	
17	BOR:a,b
	Sets a to a|b

18	XOR:a,b
	Sets a to a^b
	
19	PSH:a
	Sets memory[SP] to a, decreases SP by 1
	
20	POP
	Sets a or b (depends in which POP was used) to memory[SP-1], sets memory[SP-1] to 0 and finally increases SP by 1
	
21	SPY
	Same as POP but doesn&#39;t modify the memory or the SP register.
	
22	JMP:a
	Searches for LBL:a and jumps to the instruction after that.
	
23	JSR:a
	Same as JMP but pushes PC to the stack before actually jumping.
	
24	NOT:a,b
	Inverts the bits of b and stores it in a.
	Can also be used as NOT:a to store the inverted value of a in a.
	
25	DBG:a
	Prints out a, usefull for testing. (Testing purpose, temporary)
	[/code]

Update log:

[ul][li] Set up the initial VM and instruction set[/li]
[li] Added flow control and memory access (use as [literal])[/li]
[li] Added registers redirecting to memory (example; [A])[/li]
[li] Removed EXT and added NOT as suggested by [b]Browser jr[/b][/li]
[li] Made SPY and POP work completely as instructions instead of hardcoding them.[/li]
[li] Added hexadecimal and binary literal support.[/li]
[li] Distracted from adding labels; added instructions pointing to memory. You can now do [POP][/li]
[li] Removed the need for all characters to be upprcase; lowercase characters are allowed everywhere now.[/li]
[li] Added labels and redirected JMP/JSR to work with labels. Also made some extra changes to allow for SET:PC,label
Removed LBL as necessary.[/li]
[li] Tweaked ALOT to get the labels to function properly[/li][/ul]


Example programs...
Calculate the first 20 fibonacci numbers and store them in their respective memory locations
[code]	SET:A,1
	SET:B,1
LBL:0
	ADD:C,A
	ADD:C,B
	SET:[Z],C
	SET:A,B
	SET:B,C
	SET:C,0
	ADD:Z,1
	IFL:Z,20
		JMP:0[/code]
Same program but uses the new labels and shows how the syntax will look like.
[code]	SET:A,1
	SET:B,1
:start
	ADD:C,A
	ADD:C,B
	SET:[Z],C
	DBG:[Z]
	SET:A,B
	SET:B,C
	SET:C,0
	ADD:Z,1
	IFL:Z,19
		JMP:start
	JMP:end
	
:end
	JMP:end[/code]</description>
    
    <lastBuildDate>Sat, 13 Apr 2013 23:16:12 +0000</lastBuildDate>
    <category>General Programming</category>
    <atom:link href="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Cin (VM, Java) - I finally finished somthing!</title>
        <dc:creator><![CDATA[@_s11 s1gma]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/_s11">@_s11</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="43" data-topic="515544">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/cres/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> Cres:</div>
<blockquote>
<p>Try Haskell. (slight grin)</p>
</blockquote>
</aside>
<p>this is a good idea too</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/44">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/44</link>
        <pubDate>Sat, 13 Apr 2013 23:16:12 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-515544-44</guid>
        <source url="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544.rss">Cin (VM, Java) - I finally finished somthing!</source>
      </item>
      <item>
        <title>Cin (VM, Java) - I finally finished somthing!</title>
        <dc:creator><![CDATA[@Cres Cres]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/cres">@Cres</a> wrote:</p>
          <blockquote>
              <p>Try Haskell. (slight grin)</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/43">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/43</link>
        <pubDate>Fri, 12 Apr 2013 19:40:33 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-515544-43</guid>
        <source url="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544.rss">Cin (VM, Java) - I finally finished somthing!</source>
      </item>
      <item>
        <title>Cin (VM, Java) - I finally finished somthing!</title>
        <dc:creator><![CDATA[@imthenull imthenull]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/imthenull">@imthenull</a> wrote:</p>
          <blockquote>
              <p>[quote=“s1gma, post:40, topic:515544”][quote author=imthenull link=topic=633800.msg4281779#msg4281779 date=1365725987]</p>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<p>also <a href="https://github.com/kksym/titan-asm/blob/master/titan.scm" rel="nofollow noopener">https://github.com/kksym/titan-asm/blob/master/titan.scm</a> obligatory epenis wave lul<br>
[/quote]That’s pretty cool, i’ve always wanted to learn scheme.</p>
</blockquote>
</aside>
<p>pls do it makes u e1ee7</p>
</blockquote>
</aside>
<p>Any recommendations on learning it? Books, online tutorials, whatever.</p>
</blockquote>
</aside>
<p>sicp… maybe find a syntax primer beforehand if that’s a little bit of a nosedive[/quote]i have experience with clojure, i really want to get away from JVM languages. Whackatre suggested sicp, it’s pretty nice so far.</p>
<p>Lol’d irl at my pastebin</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/42">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/42</link>
        <pubDate>Fri, 12 Apr 2013 05:18:05 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-515544-42</guid>
        <source url="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544.rss">Cin (VM, Java) - I finally finished somthing!</source>
      </item>
      <item>
        <title>Cin (VM, Java) - I finally finished somthing!</title>
        <dc:creator><![CDATA[@mlp311 mlp311]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/mlp311">@mlp311</a> wrote:</p>
          <blockquote>
              <p>[quote=“s1gma, post:40, topic:515544”][quote author=imthenull link=topic=633800.msg4281779#msg4281779 date=1365725987]</p>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<p>also <a href="https://github.com/kksym/titan-asm/blob/master/titan.scm" rel="nofollow noopener">https://github.com/kksym/titan-asm/blob/master/titan.scm</a> obligatory epenis wave lul<br>
[/quote]That’s pretty cool, i’ve always wanted to learn scheme.</p>
</blockquote>
</aside>
<p>pls do it makes u e1ee7</p>
</blockquote>
</aside>
<p>Any recommendations on learning it? Books, online tutorials, whatever.</p>
</blockquote>
</aside>
<p>sicp… maybe find a syntax primer beforehand if that’s a little bit of a nosedive[/quote]</p>
<blockquote>[2:49:20 PM] Zack: do u know scheme
[2:49:47 PM] Me: depends
[2:49:55 PM] Zack: im a scheme guru
[2:50:05 PM] Me: no you're not
[2:50:20 PM] Zack: Yes, I am
[2:50:29 PM] Zack: here's my most recent work
[2:50:30 PM] Zack: http://pastebin.com/vekzKX0h
[2:50:52 PM] Me: sorry i underestimated you
[2:50:56 PM] Zack: c
[2:50:58 PM] Zack: told you
[2:51:02 PM] Zack: i can do anything in scheme</blockquote>
<p>what you’ve done</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/41">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/41</link>
        <pubDate>Fri, 12 Apr 2013 02:18:18 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-515544-41</guid>
        <source url="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544.rss">Cin (VM, Java) - I finally finished somthing!</source>
      </item>
      <item>
        <title>Cin (VM, Java) - I finally finished somthing!</title>
        <dc:creator><![CDATA[@_s11 s1gma]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/_s11">@_s11</a> wrote:</p>
          <blockquote>
              <p>[quote=“imthenull, post:39, topic:515544”][quote author=s1gma link=topic=633800.msg4281765#msg4281765 date=1365724496]</p>
<aside class="quote">
<blockquote>
<aside class="quote">
<blockquote>
<p>also <a href="https://github.com/kksym/titan-asm/blob/master/titan.scm" rel="nofollow noopener">https://github.com/kksym/titan-asm/blob/master/titan.scm</a> obligatory epenis wave lul<br>
[/quote]That’s pretty cool, i’ve always wanted to learn scheme.</p>
</blockquote>
</aside>
<p>pls do it makes u e1ee7</p>
</blockquote>
</aside>
<p>Any recommendations on learning it? Books, online tutorials, whatever.[/quote]<br>
sicp… maybe find a syntax primer beforehand if that’s a little bit of a nosedive</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/40">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/40</link>
        <pubDate>Fri, 12 Apr 2013 02:13:55 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-515544-40</guid>
        <source url="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544.rss">Cin (VM, Java) - I finally finished somthing!</source>
      </item>
      <item>
        <title>Cin (VM, Java) - I finally finished somthing!</title>
        <dc:creator><![CDATA[@imthenull imthenull]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/imthenull">@imthenull</a> wrote:</p>
          <blockquote>
              <p>[quote=“s1gma, post:38, topic:515544”][quote author=imthenull link=topic=633800.msg4281570#msg4281570 date=1365699644]</p>
<aside class="quote">
<blockquote>
<p>also <a href="https://github.com/kksym/titan-asm/blob/master/titan.scm" rel="nofollow noopener">https://github.com/kksym/titan-asm/blob/master/titan.scm</a> obligatory epenis wave lul<br>
[/quote]That’s pretty cool, i’ve always wanted to learn scheme.</p>
</blockquote>
</aside>
<p>pls do it makes u e1ee7[/quote]<br>
Any recommendations on learning it? Books, online tutorials, whatever.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/39">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/39</link>
        <pubDate>Fri, 12 Apr 2013 00:19:47 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-515544-39</guid>
        <source url="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544.rss">Cin (VM, Java) - I finally finished somthing!</source>
      </item>
      <item>
        <title>Cin (VM, Java) - I finally finished somthing!</title>
        <dc:creator><![CDATA[@_s11 s1gma]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/_s11">@_s11</a> wrote:</p>
          <blockquote>
              <p>[quote=“imthenull, post:37, topic:515544”][quote author=s1gma link=topic=633800.msg4281545#msg4281545 date=1365696151]<br>
also <a href="https://github.com/kksym/titan-asm/blob/master/titan.scm" rel="nofollow noopener">https://github.com/kksym/titan-asm/blob/master/titan.scm</a> obligatory epenis wave lul<br>
[/quote]That’s pretty cool, i’ve always wanted to learn scheme.[/quote]<br>
pls do it makes u e1ee7</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/38">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/38</link>
        <pubDate>Thu, 11 Apr 2013 23:54:56 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-515544-38</guid>
        <source url="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544.rss">Cin (VM, Java) - I finally finished somthing!</source>
      </item>
      <item>
        <title>Cin (VM, Java) - I finally finished somthing!</title>
        <dc:creator><![CDATA[@imthenull imthenull]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/imthenull">@imthenull</a> wrote:</p>
          <blockquote>
              <p>[quote=“s1gma, post:36, topic:515544”]also <a href="https://github.com/kksym/titan-asm/blob/master/titan.scm" rel="nofollow noopener">https://github.com/kksym/titan-asm/blob/master/titan.scm</a> obligatory epenis wave lul[/quote]That’s pretty cool, i’ve always wanted to learn scheme.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/37">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/37</link>
        <pubDate>Thu, 11 Apr 2013 17:00:44 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-515544-37</guid>
        <source url="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544.rss">Cin (VM, Java) - I finally finished somthing!</source>
      </item>
      <item>
        <title>Cin (VM, Java) - I finally finished somthing!</title>
        <dc:creator><![CDATA[@_s11 s1gma]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/_s11">@_s11</a> wrote:</p>
          <blockquote>
              <p>[quote=“sinisoul, post:22, topic:515544”][quote author=Fat Cookies link=topic=633800.msg4281057#msg4281057 date=1365589110]<br>
My assembler does two passes. The first pass involves removing comments/whitespace and “counting” the number of bytes the assembly should assemble to, it then finds all the labels and adds them to a HashMap. The second pass then assembles the actual instructions, replacing labels as required.<br>
[/quote]</p>
<p>This is a good way of doing it.[/quote]<br>
yes two-pass assemblers do need your confirmation that the technique they’ve been using for years is good</p>
<p>bowser jr wtf are you on about</p>
<p>also <a href="https://github.com/kksym/titan-asm/blob/master/titan.scm" rel="nofollow noopener">https://github.com/kksym/titan-asm/blob/master/titan.scm</a> obligatory epenis wave lul</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/36">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/36</link>
        <pubDate>Thu, 11 Apr 2013 16:02:31 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-515544-36</guid>
        <source url="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544.rss">Cin (VM, Java) - I finally finished somthing!</source>
      </item>
      <item>
        <title>Cin (VM, Java) - I finally finished somthing!</title>
        <dc:creator><![CDATA[@Cres Cres]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/cres">@Cres</a> wrote:</p>
          <blockquote>
              <aside class="quote quote-modified" data-post="34" data-topic="515544">
<div class="title">
<div class="quote-controls"></div>
 Bowser jr:</div>
<blockquote>
<p>The assembly part doesn’t need to be that efficient. Just make it run the VM code as fast as possible (Or maybe not that fast, but do whats easy to do).</p>
</blockquote>
</aside>
<p>I know but it looks clumsy and I can do it better than it is now.<br>
Assembler:</p>
<p>[code=java]import java.util.ArrayList;</p>
<p>public class Assembler {</p>
<pre><code>private ArrayList&lt;String&gt; labels;
private ArrayList&lt;Integer&gt; instructions;

private String in;

public Assembler(String in) {
	this.labels = new ArrayList&lt;String&gt;();
	this.instructions = new ArrayList&lt;Integer&gt;();
	this.in = in;
}

public boolean isLabel(String label) {
	for (String t : labels) {
		if (label.equalsIgnoreCase(t)) {
			return true;
		}
	}
	return false;
}

public int getLabelID(String label) {
	for (int i = 0; i &lt; labels.size(); i++) {
		if (labels.get(i).equalsIgnoreCase(label)) {
			return i;
		}
	}
	throw new RuntimeException("Couldn't find label: "+label);
}

public int getLiteral(String i) {
	if (i.startsWith("0x")) {
		return Integer.parseInt(i.substring(2),16);
	} else if (i.startsWith("0b")) {
		return Integer.parseInt(i.substring(2),2);
	} else {
		return Integer.parseInt(i);
	}
}

public void mount(Processor p) {
	FileExtractor f = new FileExtractor(in);
	for (int i = 0; i &lt; f.size(); i++) {
		String line = f.get(i);
		line = line.replaceAll(" ", "");
		line = line.replaceAll("	", "");
		f.set(i,line);
		if (line.startsWith(":")) {
			labels.add(line.substring(1));
		}
	}
	int[] labelmap = new int[labels.size()];
	int currentOp = 0;
	for (int i = 0; i &lt; f.size(); i++) {
		String line = f.get(i).toLowerCase();
		if (line.equals("")) { //ignore blank lines
			continue;
		}
		if (line.startsWith(";")) { //ignore comment lines
			continue;
		}
		if (line.contains(";")) { //remove commenting on usefull lines
			line = line.split(";")[0];
		}
		if (line.startsWith(":")) { //add label to route
			labelmap[getLabelID(line.substring(1))] = currentOp;
			continue;
		}
		int opcode = 0;
		int adata = OpData.UNUSED;
		int bdata = OpData.UNUSED;
		int aword = 0;
		int bword = 0;
		for (int op = 0; op &lt; OpData.INSTRUCTIONS.length; op++) {
			if (line.startsWith(OpData.INSTRUCTIONS[op].toLowerCase())) {
				opcode = op;
				line = line.substring(OpData.INSTRUCTIONS[op].length());
			}
		}
		if (!line.equals("")) { //no extra words
			if (line.contains(",")) { //2 extra words
				String[] l = line.split(",");
				if (isLabel(l[0])) {
					adata = OpData.LABEL;
					aword = getLabelID(l[0]);
				} else if (l[0].startsWith("[") &amp;&amp; l[0].endsWith("]")) {
					l[0] = l[0].substring(1, l[0].length()-1);
					if (Processor.isRegister(l[0].toLowerCase())) {
						adata = OpData.REGISTER_TO_MEMORY;
						aword = Processor.getRegisterID(l[0].toLowerCase());
					} else if (OpData.isInstruction(l[0].toLowerCase())) {
						adata = OpData.INSTRUCTION_TO_MEMORY;
						aword = OpData.getInstructionID(l[0].toLowerCase());
					} else {
						adata = OpData.MEMORY;
						aword = getLiteral(l[0]);
					}
				} else if (OpData.isInstruction(l[0])) {
					adata = OpData.INSTRUCTION;
					aword = OpData.getInstructionID(l[0]);
				} else  if (Processor.isRegister(l[0])) {
					adata = OpData.REGISTER;
					aword = Processor.getRegisterID(l[0]);
				} else {
					adata = OpData.LITERAL;
					aword = getLiteral(l[0]);
				}
				if (isLabel(l[1])) {
					bdata = OpData.LABEL;
					bword = getLabelID(l[1]);
				} else if (l[1].startsWith("[") &amp;&amp; l[1].endsWith("]")) {
					l[1] = l[1].substring(1, l[1].length()-1);
					if (Processor.isRegister(l[1].toLowerCase())) {
						bdata = OpData.REGISTER_TO_MEMORY;
						bword = Processor.getRegisterID(l[1].toLowerCase());
					} else if (OpData.isInstruction(l[1].toLowerCase())) {
						bdata = OpData.INSTRUCTION_TO_MEMORY;
						bword = OpData.getInstructionID(l[1].toLowerCase());
					} else {
						bdata = OpData.MEMORY;
						bword = getLiteral(l[1]);
					}
				} else if (OpData.isInstruction(l[1])) {
					bdata = OpData.INSTRUCTION;
					bword = OpData.getInstructionID(l[1]);
				} else  if (Processor.isRegister(l[1])) {
					bdata = OpData.REGISTER;
					bword = Processor.getRegisterID(l[1]);
				} else {
					bdata = OpData.LITERAL;
					bword = getLiteral(l[1]);
				}
			} else { //1 extra word
				if (isLabel(line)) {
					adata = OpData.LABEL;
					aword = getLabelID(line);
				} else if (line.startsWith("[") &amp;&amp; line.endsWith("]")) {
					line = line.substring(1, line.length()-1);
					if (Processor.isRegister(line.toLowerCase())) {
						adata = OpData.REGISTER_TO_MEMORY;
						aword = Processor.getRegisterID(line.toLowerCase());
					} else if (OpData.isInstruction(line.toLowerCase())) {
						adata = OpData.INSTRUCTION_TO_MEMORY;
						aword = OpData.getInstructionID(line.toLowerCase());
					} else {
						adata = OpData.MEMORY;
						aword = getLiteral(line);
					}
				} else if (OpData.isInstruction(line)) {
					adata = OpData.INSTRUCTION;
					aword = OpData.getInstructionID(line);
				} else  if (Processor.isRegister(line)) {
					adata = OpData.REGISTER;
					aword = Processor.getRegisterID(line);
				} else {
					adata = OpData.LITERAL;
					aword = getLiteral(line);
				}
			}
		}
		int oword = 0;
		oword |= adata;
		oword &lt;&lt;= 4;
		oword |= bdata;
		oword &lt;&lt;= 24;
		oword |= opcode;
		currentOp += 1;
		instructions.add(oword);
		if (adata != OpData.UNUSED) {
			currentOp += 1;
			instructions.add(aword);
			if (bdata != OpData.UNUSED) {
				currentOp += 1;
				instructions.add(bword);
			}
		}
	}
}
</code></pre>
<p>}<br>
[/code]</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/35">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/35</link>
        <pubDate>Wed, 10 Apr 2013 20:24:06 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-515544-35</guid>
        <source url="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544.rss">Cin (VM, Java) - I finally finished somthing!</source>
      </item>
      <item>
        <title>Cin (VM, Java) - I finally finished somthing!</title>
        <dc:creator><![CDATA[@bowserjr2 Bowser jr]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/bowserjr2">@bowserjr2</a> wrote:</p>
          <blockquote>
              <p>The assembly part doesn’t need to be that efficient. Just make it run the VM code as fast as possible (Or maybe not that fast, but do whats easy to do).</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/34">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/34</link>
        <pubDate>Wed, 10 Apr 2013 20:19:59 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-515544-34</guid>
        <source url="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544.rss">Cin (VM, Java) - I finally finished somthing!</source>
      </item>
      <item>
        <title>Cin (VM, Java) - I finally finished somthing!</title>
        <dc:creator><![CDATA[@Cres Cres]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/cres">@Cres</a> wrote:</p>
          <blockquote>
              <p>[quote=“Lin, post:32, topic:515544”][quote author=Fat Cookies link=topic=633800.msg4281057#msg4281057 date=1365589110]<br>
My assembler does two passes. The first pass involves removing comments/whitespace and “counting” the number of bytes the assembly should assemble to, it then finds all the labels and adds them to a HashMap. The second pass then assembles the actual instructions, replacing labels as required.<br>
[/quote]That’s exactly what I did for my Gameboy assembler. There’s no way to actually go through the code just once, especially when you have absolute and relative jumps.[/quote]<br>
If you’re using labels as instructions, it actually is possible xD<br>
But for generic labels, no. I loop one time to gather all the labels and store them.<br>
Then I loop another time and convert instructions, skip labels, comments and whitespace.</p>
<p>Rewriting the whole project so it becomes a little more efficient.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/33">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/33</link>
        <pubDate>Wed, 10 Apr 2013 20:13:33 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-515544-33</guid>
        <source url="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544.rss">Cin (VM, Java) - I finally finished somthing!</source>
      </item>
      <item>
        <title>Cin (VM, Java) - I finally finished somthing!</title>
        <dc:creator><![CDATA[@Lin Lin]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/lin">@Lin</a> wrote:</p>
          <blockquote>
              <p>[quote=“Fat Cookies, post:18, topic:515544”]My assembler does two passes. The first pass involves removing comments/whitespace and “counting” the number of bytes the assembly should assemble to, it then finds all the labels and adds them to a HashMap. The second pass then assembles the actual instructions, replacing labels as required.[/quote]That’s exactly what I did for my Gameboy assembler. There’s no way to actually go through the code just once, especially when you have absolute and relative jumps.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/32">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/32</link>
        <pubDate>Wed, 10 Apr 2013 19:58:33 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-515544-32</guid>
        <source url="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544.rss">Cin (VM, Java) - I finally finished somthing!</source>
      </item>
      <item>
        <title>Cin (VM, Java) - I finally finished somthing!</title>
        <dc:creator><![CDATA[@bowserjr2 Bowser jr]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/bowserjr2">@bowserjr2</a> wrote:</p>
          <blockquote>
              <p>OK, but you are doing it the wrong way. Use double buffering. Normally a screen would draw everything in the buffer and not wait for the CPU to tell it so. It is very easy to implement page flipping (Fastest way for you to do this).</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/31">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/31</link>
        <pubDate>Wed, 10 Apr 2013 19:53:04 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-515544-31</guid>
        <source url="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544.rss">Cin (VM, Java) - I finally finished somthing!</source>
      </item>
      <item>
        <title>Cin (VM, Java) - I finally finished somthing!</title>
        <dc:creator><![CDATA[@Cres Cres]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/cres">@Cres</a> wrote:</p>
          <blockquote>
              <p>[quote=“Bowser jr, post:29, topic:515544”]Remove DCD as it makes no sense. And please specify HWU, any external device should run at it own and should not be dependent of the CPU.</p>
<p>Do you plan to add a form of BIOS? (To help bootloading)[/quote]</p>
<p>First I’m going to focus on general hardwre before I start with anything else.<br>
HWU is needed because I will not let a monitor read what it has to display if the buffer isn’t ready yet.<br>
Once the buffer is fully loaded, HWU will be called so the monitor can update the screen and then it will re-draw the buffer.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/30">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/30</link>
        <pubDate>Wed, 10 Apr 2013 19:45:40 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-515544-30</guid>
        <source url="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544.rss">Cin (VM, Java) - I finally finished somthing!</source>
      </item>
      <item>
        <title>Cin (VM, Java) - I finally finished somthing!</title>
        <dc:creator><![CDATA[@bowserjr2 Bowser jr]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/bowserjr2">@bowserjr2</a> wrote:</p>
          <blockquote>
              <p>Remove DCD as it makes no sense. And please specify HWU, any external device should run at it own and should not be dependent of the CPU.</p>
<p>Do you plan to add a form of BIOS? (To help bootloading)</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/29">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/29</link>
        <pubDate>Wed, 10 Apr 2013 19:34:41 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-515544-29</guid>
        <source url="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544.rss">Cin (VM, Java) - I finally finished somthing!</source>
      </item>
      <item>
        <title>Cin (VM, Java) - I finally finished somthing!</title>
        <dc:creator><![CDATA[@Cres Cres]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/cres">@Cres</a> wrote:</p>
          <blockquote>
              <p>[quote=“Bowser jr, post:27, topic:515544”]Are you going the easy path of making a screen like in the first iteration of DCPU16 (The screen is mapped to the memory).<br>
Or the more complicated way with an hardware opcode? (Like in the newer versions of the specification) Or you could always implement VGA.[/quote]</p>
<p>I’m going to make a couple instructions regarding hardware.<br>
Hardware will rely on memory of the CPU. The CPU will tell which memory adresses are reserved for the hardware device and will not asign the same memory to another device so long as the first device remains connected.<br>
The hardware will remember which cells are reserved for it after the initial call has been made<br>
HWU<br>
Update HardWare; hardware will read the reserved memory cells and do it’s job<br>
DCD<br>
Disconnect Device; remove the device from the connected devices<br>
Any others I might need?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/28">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/28</link>
        <pubDate>Wed, 10 Apr 2013 19:11:39 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-515544-28</guid>
        <source url="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544.rss">Cin (VM, Java) - I finally finished somthing!</source>
      </item>
      <item>
        <title>Cin (VM, Java) - I finally finished somthing!</title>
        <dc:creator><![CDATA[@bowserjr2 Bowser jr]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/bowserjr2">@bowserjr2</a> wrote:</p>
          <blockquote>
              <p>Are you going the easy path of making a screen like in the first iteration of DCPU16 (The screen is mapped to the memory).<br>
Or the more complicated way with an hardware opcode? (Like in the newer versions of the specification) Or you could always implement VGA.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/27">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/27</link>
        <pubDate>Wed, 10 Apr 2013 19:00:50 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-515544-27</guid>
        <source url="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544.rss">Cin (VM, Java) - I finally finished somthing!</source>
      </item>
      <item>
        <title>Cin (VM, Java) - I finally finished somthing!</title>
        <dc:creator><![CDATA[@Cres Cres]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/cres">@Cres</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="25" data-topic="515544">
<div class="title">
<div class="quote-controls"></div>
 Bowser jr:</div>
<blockquote>
<p>Cres: Then you should add a NEG opcode for making positive numbers negative, and vice versa.</p>
</blockquote>
</aside>
<p>MUL a,-1<br>
but yeah I’ll add it xD</p>
<p>EDIT: I do most stuff in decimal notation because two’s complement signedness is annoying…</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/26">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/26</link>
        <pubDate>Wed, 10 Apr 2013 18:56:05 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-515544-26</guid>
        <source url="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544.rss">Cin (VM, Java) - I finally finished somthing!</source>
      </item>
      <item>
        <title>Cin (VM, Java) - I finally finished somthing!</title>
        <dc:creator><![CDATA[@bowserjr2 Bowser jr]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/bowserjr2">@bowserjr2</a> wrote:</p>
          <blockquote>
              <p>Cres: Then you should add a NEG opcode for making positive numbers negative, and vice versa.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/25">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/25</link>
        <pubDate>Wed, 10 Apr 2013 18:53:19 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-515544-25</guid>
        <source url="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544.rss">Cin (VM, Java) - I finally finished somthing!</source>
      </item>
      <item>
        <title>Cin (VM, Java) - I finally finished somthing!</title>
        <dc:creator><![CDATA[@Cres Cres]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/cres">@Cres</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="23" data-topic="515544">
<div class="title">
<div class="quote-controls"></div>
 Bowser jr:</div>
<blockquote>
<p>Are you using signed or unsigned Math in your VM?</p>
</blockquote>
</aside>
<p>Signed.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/24">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/24</link>
        <pubDate>Wed, 10 Apr 2013 18:49:33 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-515544-24</guid>
        <source url="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544.rss">Cin (VM, Java) - I finally finished somthing!</source>
      </item>
      <item>
        <title>Cin (VM, Java) - I finally finished somthing!</title>
        <dc:creator><![CDATA[@bowserjr2 Bowser jr]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/bowserjr2">@bowserjr2</a> wrote:</p>
          <blockquote>
              <p>Are you using signed or unsigned Math in your VM?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/23">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/23</link>
        <pubDate>Wed, 10 Apr 2013 18:43:48 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-515544-23</guid>
        <source url="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544.rss">Cin (VM, Java) - I finally finished somthing!</source>
      </item>
      <item>
        <title>Cin (VM, Java) - I finally finished somthing!</title>
        <dc:creator><![CDATA[@sinisoul sini]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/sinisoul">@sinisoul</a> wrote:</p>
          <blockquote>
              <aside class="quote quote-modified" data-post="18" data-topic="515544">
<div class="title">
<div class="quote-controls"></div>
 Fat Cookies:</div>
<blockquote>
<p>My assembler does two passes. The first pass involves removing comments/whitespace and “counting” the number of bytes the assembly should assemble to, it then finds all the labels and adds them to a HashMap. The second pass then assembles the actual instructions, replacing labels as required.</p>
</blockquote>
</aside>
<p>This is a good way of doing it.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/22">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/22</link>
        <pubDate>Wed, 10 Apr 2013 18:30:35 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-515544-22</guid>
        <source url="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544.rss">Cin (VM, Java) - I finally finished somthing!</source>
      </item>
      <item>
        <title>Cin (VM, Java) - I finally finished somthing!</title>
        <dc:creator><![CDATA[@Cres Cres]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/cres">@Cres</a> wrote:</p>
          <blockquote>
              <aside class="quote quote-modified" data-post="20" data-topic="515544">
<div class="title">
<div class="quote-controls"></div>
 Bowser jr:</div>
<blockquote>
<p>So you’re not using addresses for jumping?</p>
</blockquote>
</aside>
<p>I am. The labels redirect to the next instruction.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/21">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/21</link>
        <pubDate>Wed, 10 Apr 2013 16:32:53 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-515544-21</guid>
        <source url="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544.rss">Cin (VM, Java) - I finally finished somthing!</source>
      </item>
      <item>
        <title>Cin (VM, Java) - I finally finished somthing!</title>
        <dc:creator><![CDATA[@bowserjr2 Bowser jr]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/bowserjr2">@bowserjr2</a> wrote:</p>
          <blockquote>
              <p>So you’re not using addresses for jumping?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/20">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544/20</link>
        <pubDate>Wed, 10 Apr 2013 16:07:20 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-515544-20</guid>
        <source url="https://forum.moparisthebest.com/t/cin-vm-java-i-finally-finished-somthing/515544.rss">Cin (VM, Java) - I finally finished somthing!</source>
      </item>
  </channel>
</rss>
