<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/help-msn-client-receiving-messages/185138 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 16:06:21 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>[help] msn client receiving messages - General Programming - moparisthebest.com</title>
    <meta name="description" content="im making a msn client using MSNP8 (msn protocol version 8) but i got a little problem :expressionless: 

server sends this when u receive a message:  

     MSG bob@passport.com Bob 143\r\n
    MIME-Version: 1.0\r\n
   &amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="185138.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;[help] msn client receiving messages&#39;" href="185138.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/help-msn-client-receiving-messages/185138" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/help-msn-client-receiving-messages/185138" />
<meta property="og:title" content="[help] msn client receiving messages" />
<meta name="twitter:title" content="[help] msn client receiving messages" />
<meta property="og:description" content="im making a msn client using MSNP8 (msn protocol version 8) but i got a little problem üòë  server sends this when u receive a message:      MSG bob@passport.com Bob 143\r\n     MIME-Version: 1.0\r\n     Content-Type: text/plain; charset=UTF-8\r\n     X-MMS-IM-Format: FN=Lucida%20Sans%20Unicode; EF=B; CO=ff0000; CS=0; PF=22\r\n     \r\n     Hello. where the ‚ÄúHello.‚Äù is the message , theres my problem  i use readLine to read stuff from server but my problem is the ‚ÄúHello.‚Äù isn‚Äôt end ..." />
<meta name="twitter:description" content="im making a msn client using MSNP8 (msn protocol version 8) but i got a little problem üòë  server sends this when u receive a message:      MSG bob@passport.com Bob 143\r\n     MIME-Version: 1.0\r\n     Content-Type: text/plain; charset=UTF-8\r\n     X-MMS-IM-Format: FN=Lucida%20Sans%20Unicode; EF=B; CO=ff0000; CS=0; PF=22\r\n     \r\n     Hello. where the ‚ÄúHello.‚Äù is the message , theres my problem  i use readLine to read stuff from server but my problem is the ‚ÄúHello.‚Äù isn‚Äôt end ..." />
<meta property="article:published_time" content="2008-02-29T23:47:06+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="185138.html">[help] msn client receiving messages</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/general-programming.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>General Programming</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Bloodcompany.html'><span itemprop='name'>Bloodcompany</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-02-29T23:47:06Z'>
            <time itemprop='dateModified' datetime='2016-07-30T20:10:53Z' class='post-time'>
              July 30, 2016,  8:10pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>im making a msn client using MSNP8 (msn protocol version 8) but i got a little problem <img src="../../images/emoji/twitter/expressionless1bce.png?v=6" title=":expressionless:" class="emoji" alt=":expressionless:"></p>
<p>server sends this when u receive a message:</p>
<pre><code class="lang-auto">    MSG bob@passport.com Bob 143\r\n
    MIME-Version: 1.0\r\n
    Content-Type: text/plain; charset=UTF-8\r\n
    X-MMS-IM-Format: FN=Lucida%20Sans%20Unicode; EF=B; CO=ff0000; CS=0; PF=22\r\n
    \r\n
    Hello.</code></pre>
<p>where the ‚ÄúHello.‚Äù is the message , theres my problem<br>
i use readLine to read stuff from server but my problem is the ‚ÄúHello.‚Äù isn‚Äôt end of a line so it receives next packet like this:</p>
<pre><code class="lang-auto">    Hello.MSG bob@passport.com Bob 143\r\n
    MIME-Version: 1.0\r\n
    Content-Type: text/plain; charset=UTF-8\r\n
    X-MMS-IM-Format: FN=Lucida%20Sans%20Unicode; EF=B; CO=ff0000; CS=0; PF=22\r\n
    \r\n
    NEXT TEXT HERE</code></pre>
<p>now my question is how i read the Hello. when i receive the first packet not wait untill i receive another packet</p>
      </div>

      <meta itemprop='headline' content='[help] msn client receiving messages'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/White_Castle.html'><span itemprop='name'>White_Castle</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-03-01T02:12:08Z'>
            <time itemprop='dateModified' datetime='2016-07-30T20:11:06Z' class='post-time'>
              July 30, 2016,  8:11pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Here‚Äôs what you need to do. Instead of reading the the MSG command in addition to its contents, just read the command. The second parameter it indicates the length of the contents, in bytes (e.g. [tt]MSG <a href="mailto:bob@passport.com">bob@passport.com</a> Bob <span class="bbcode-b">143</span>[/tt]; the length is 143 bytes). So read the appropriate number of bytes from the stream. This will yield the ‚ÄúMime-Version: etc. etc‚Ä¶ Hello‚Äù.</p>
<p>An example, assuming you‚Äôre using java.io.BufferedReader:</p>
<p><code>BufferedReader br = ...;
Command msg = new Command(br.readLine());
byte[] contents = new byte[Integer.parseInt(msg.parameters[1])];
for(int i, j = 0; (i = br.read(contents, j, contents.length - j)) != -1; j += i);
System.out.println(new String(contents));</code></p>
<p>Now just take that array of bytes, convert it to a String, and parse it accordingly.</p>
      </div>

      <meta itemprop='headline' content='[help] msn client receiving messages'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Bloodcompany.html'><span itemprop='name'>Bloodcompany</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-03-01T11:56:43Z'>
            <time itemprop='dateModified' datetime='2016-07-30T20:12:06Z' class='post-time'>
              July 30, 2016,  8:12pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=‚ÄúWhite Castle, post:2, topic:185138‚Äù]Here‚Äôs what you need to do. Instead of reading the the MSG command in addition to its contents, just read the command. The second parameter it indicates the length of the contents, in bytes (e.g. [tt]MSG <a href="mailto:bob@passport.com">bob@passport.com</a> Bob <span class="bbcode-b">143</span>[/tt]; the length is 143 bytes). So read the appropriate number of bytes from the stream. This will yield the ‚ÄúMime-Version: etc. etc‚Ä¶ Hello‚Äù.</p>
<p>An example, assuming you‚Äôre using java.io.BufferedReader:</p>
<p><code>BufferedReader br = ...;
Command msg = new Command(br.readLine());
byte[] contents = new byte[Integer.parseInt(msg.parameters[1])];
for(int i, j = 0; (i = br.read(contents, j, contents.length - j)) != -1; j += i);
System.out.println(new String(contents));</code></p>
<p>Now just take that array of bytes, convert it to a String, and parse it accordingly.[/quote]</p>
<p>tyvm gonna try it:)</p>
      </div>

      <meta itemprop='headline' content='[help] msn client receiving messages'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/help-msn-client-receiving-messages/185138 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 16:06:22 GMT -->
</html>
