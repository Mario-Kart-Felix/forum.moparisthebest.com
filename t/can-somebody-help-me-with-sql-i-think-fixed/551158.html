<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/can-somebody-help-me-with-sql-i-think-fixed/551158 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:05:38 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Can somebody help me with SQL I think? [Fixed] - General Programming - moparisthebest.com</title>
    <meta name="description" content="Hey, I&amp;#39;m making a site in php. What I&amp;#39;m trying to do is a discussion bump, so in sense when a user posts in a discussion that discussion will bump to the top of the list.  Right now the newest discussion is at the top al&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="551158.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Can somebody help me with SQL I think? [Fixed]&#39;" href="551158.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/can-somebody-help-me-with-sql-i-think-fixed/551158" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/can-somebody-help-me-with-sql-i-think-fixed/551158" />
<meta property="og:title" content="Can somebody help me with SQL I think? [Fixed]" />
<meta name="twitter:title" content="Can somebody help me with SQL I think? [Fixed]" />
<meta property="og:description" content="Hey, I’m making a site in php. What I’m trying to do is a discussion bump, so in sense when a user posts in a discussion that discussion will bump to the top of the list.  Right now the newest discussion is at the top already but if somebody posts in an older discussion, it won’t bump to the top.  I’m a little puzzled on how I could implement this. I don’t really want to look at some forum software to see how it’s done.  I had an idea on how I could achieve this but implementing it seems impossi..." />
<meta name="twitter:description" content="Hey, I’m making a site in php. What I’m trying to do is a discussion bump, so in sense when a user posts in a discussion that discussion will bump to the top of the list.  Right now the newest discussion is at the top already but if somebody posts in an older discussion, it won’t bump to the top.  I’m a little puzzled on how I could implement this. I don’t really want to look at some forum software to see how it’s done.  I had an idea on how I could achieve this but implementing it seems impossi..." />
<meta property="article:published_time" content="2015-04-19T14:05:12+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="551158.html">Can somebody help me with SQL I think? [Fixed]</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/general-programming.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>General Programming</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Ashi.html'><span itemprop='name'>Ashi</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-04-19T14:05:12Z'>
            <time itemprop='dateModified' datetime='2016-08-04T15:04:14Z' class='post-time'>
              August 4, 2016,  3:04pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hey, I’m making a site in php. What I’m trying to do is a discussion bump, so in sense when a user posts in a discussion that discussion will bump to the top of the list.<br>
Right now the newest discussion is at the top already but if somebody posts in an older discussion, it won’t bump to the top.</p>
<p>I’m a little puzzled on how I could implement this. I don’t really want to look at some forum software to see how it’s done.</p>
<p>I had an idea on how I could achieve this but implementing it seems impossible (hard) lol.<br>
The idea I had was:</p>
<p>Loop through each post and if it’s newer then the post/discussion that’s already at the top, move it to the top. It seems way to hard to do it that way and I don’t know if that’s how others do it.</p>
<p>Here’s my current code:</p>
<p>[php]</p>
&lt;?php 
    $query = mysql_query("SELECT * FROM discussions ORDER BY timestamp DESC");
    if (!$query) {
        die("Query failed: " . mysql_error() . "<br>");
    }
    while($result = mysql_fetch_array($query)) {
        $discussion_id = $result['id'];		
        $discussion_title = $result['title'];
	$discussion_content = $result['content'];
	$discussion_deleted = $result['deleted'];
	$discussion_views = $result['views'];
	$discussion_author_id = $result['user_id'];
	$discussion_author = mysql_fetch_array(mysql_query("SELECT * FROM users WHERE id='$discussion_author_id'"));
	$discussion_author_name = $discussion_author['username'];
	$last_post_in_discussion = mysql_fetch_array(mysql_query("SELECT * FROM discussion_replies WHERE discussion_id='$discussion_id' ORDER BY timestamp DESC"));
	$uid = $last_post_in_discussion['user_id'];
	$last_poster = mysql_fetch_array(mysql_query("SELECT * FROM users WHERE id='$uid'"));
	$last_poster_username = $last_poster['username'];
	if ($discussion_deleted == '0') {
	    echo "<a>" . $discussion_title . "</a><br>";
	    if ($last_post_in_discussion['timestamp'] == "") {
                echo "Created " . $result['timestamp'] . " by <a>" . $discussion_author_name . "</a><br>Views: $discussion_views<hr>";
	    } else {
	        echo "Last post: " . $last_post_in_discussion['timestamp'] . " by <a>" . $last_poster_username . "</a><br>Views: $discussion_views<hr>";
	    }
	}
    }
?&gt;
<p>[/php]</p>
<p>Sorry if I explained everything like a retard. I rushed this post.</p>
<p>Edit: Fixed it (read thread for solution).</p>
      </div>

      <meta itemprop='headline' content='Can somebody help me with SQL I think? [Fixed]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Pwnd.html'><span itemprop='name'>Pwnd</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-04-19T17:25:22Z'>
            <time itemprop='dateModified' datetime='2016-08-04T15:04:16Z' class='post-time'>
              August 4, 2016,  3:04pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Order by created at, unless has posts, order by date of last post.</p>
      </div>

      <meta itemprop='headline' content='Can somebody help me with SQL I think? [Fixed]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/HcoJustin.html'><span itemprop='name'>HcoJustin</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-04-19T19:20:31Z'>
            <time itemprop='dateModified' datetime='2016-08-04T15:04:17Z' class='post-time'>
              August 4, 2016,  3:04pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I feel like this could be solved pretty easily with a slight change in your table structure. Add a column to discussions for updated_at, last_posted_at, or whatever you feel like calling it. Whenever a new post is added, make sure to update that column as well. Then it is a simple sort with one query.</p>
<p>I wouldn’t update that specific timestamp when the OP is edited, but it would open the door to a bump button so your discussion isn’t filled with ‘bump’</p>
      </div>

      <meta itemprop='headline' content='Can somebody help me with SQL I think? [Fixed]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Ashi.html'><span itemprop='name'>Ashi</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-04-19T20:30:16Z'>
            <time itemprop='dateModified' datetime='2016-08-04T15:04:17Z' class='post-time'>
              August 4, 2016,  3:04pm
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="2" data-topic="551158">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/pwnd/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> Pwnd:</div>
<blockquote>
<p>Order by created at, unless has posts, order by date of last post.</p>
</blockquote>
</aside>
<p>That was the initial idea I had! But I’m not sure how to create the query for that! I’m not good with using the JOIN function (I think that’s the one I need). Care to point me in the right direction on how I can do this?</p>
<p>[quote=“HcoJustin, post:3, topic:551158”]I feel like this could be solved pretty easily with a slight change in your table structure. Add a column to discussions for updated_at, last_posted_at, or whatever you feel like calling it. Whenever a new post is added, make sure to update that column as well. Then it is a simple sort with one query.</p>
<p>I wouldn’t update that specific timestamp when the OP is edited, but it would open the door to a bump button so your discussion isn’t filled with ‘bump’[/quote]<br>
That’s a good idea too! Sounds much easier to implement! Might try it.</p>
<p>Edit: Thanks HcoJustin, I got it working using your method! Much more trivial although I don’t think it’s the best approach but it’s far most an easy one for somebody that does not have much knowledge of SQL.</p>
      </div>

      <meta itemprop='headline' content='Can somebody help me with SQL I think? [Fixed]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/3lv3n_snip3r.html'><span itemprop='name'>3lv3n_snip3r</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-04-19T23:34:09Z'>
            <time itemprop='dateModified' datetime='2016-08-04T15:04:20Z' class='post-time'>
              August 4, 2016,  3:04pm
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Please please pleaseeee don’t use MySQL extensions! If you’re going to use PHP, use either MySQLi or PDO.</p>
      </div>

      <meta itemprop='headline' content='Can somebody help me with SQL I think? [Fixed]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/justaguy.html'><span itemprop='name'>justaguy</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-04-20T01:57:45Z'>
            <time itemprop='dateModified' datetime='2016-08-04T15:04:23Z' class='post-time'>
              August 4, 2016,  3:04pm
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="5" data-topic="551158">
<div class="title">
<div class="quote-controls"></div>
 3lv3n snip3r:</div>
<blockquote>
<p>Please please pleaseeee don’t use MySQL extensions! If you’re going to use PHP, use either MySQLi or PDO.</p>
</blockquote>
</aside>
<p>This.</p>
<p>When PHP 7 comes along they <a href="https://wiki.php.net/rfc/remove_deprecated_functionality_in_php7#extmysql" data-bbcode="true" rel="nofollow noopener">won’t</a> even be officially supporting them.</p>
      </div>

      <meta itemprop='headline' content='Can somebody help me with SQL I think? [Fixed]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Ashi.html'><span itemprop='name'>Ashi</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2015-05-01T09:36:07Z'>
            <time itemprop='dateModified' datetime='2016-08-04T15:05:47Z' class='post-time'>
              August 4, 2016,  3:05pm
            </time>
        <span itemprop='position'>#7</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>It’s fine, changing it to mysqli would be pretty simple because I’m pretty much just adding the letter ‘i’ to most of the statements (with some tweaks and exceptions).</p>
      </div>

      <meta itemprop='headline' content='Can somebody help me with SQL I think? [Fixed]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/can-somebody-help-me-with-sql-i-think-fixed/551158 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:05:38 GMT -->
</html>
