<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/solved/547052 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:10:35 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Solved - Runescape - moparisthebest.com</title>
    <meta name="description" content="So, somehow I broke my server. I don&amp;#39;t know what I did, but now I can&amp;#39;t log in. I&amp;#39;ve spent days trying to debug this, but to no avail.  

I know I&amp;#39;m getting stopped here, in RS2LoginProtocolDecoder (server.net) in the lo&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="547052.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Solved&#39;" href="547052.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/solved/547052" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/solved/547052" />
<meta property="og:title" content="Solved" />
<meta name="twitter:title" content="Solved" />
<meta property="og:description" content="So, somehow I broke my server. I don’t know what I did, but now I can’t log in. I’ve spent days trying to debug this, but to no avail.  I know I’m getting stopped here, in RS2LoginProtocolDecoder (server.net) in the load method:  Client cl = new Client(session, -1); That obviously leads me here:  public Client(IoSession s, int _playerId) { 	super(_playerId); 	this.session = s; 	synchronized(this) { 		outStream = new Stream(new byte[Config.BUFFER_SIZE]); 		outStream.currentOffset = 0; 	} 	inStrea..." />
<meta name="twitter:description" content="So, somehow I broke my server. I don’t know what I did, but now I can’t log in. I’ve spent days trying to debug this, but to no avail.  I know I’m getting stopped here, in RS2LoginProtocolDecoder (server.net) in the load method:  Client cl = new Client(session, -1); That obviously leads me here:  public Client(IoSession s, int _playerId) { 	super(_playerId); 	this.session = s; 	synchronized(this) { 		outStream = new Stream(new byte[Config.BUFFER_SIZE]); 		outStream.currentOffset = 0; 	} 	inStrea..." />
<meta property="article:published_time" content="2014-10-02T23:53:45+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="547052.html">Solved</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/n10si_t.html'><span itemprop='name'>n10si_t</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-10-02T23:53:45Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:50:12Z' class='post-time'>
              August 4, 2016,  1:50pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>So, somehow I broke my server. I don’t know what I did, but now I can’t log in. I’ve spent days trying to debug this, but to no avail.</p>
<p>I know I’m getting stopped here, in RS2LoginProtocolDecoder (<a href="http://server.net/" rel="nofollow noopener">server.net</a>) in the load method:</p>
<pre><code class="lang-auto">Client cl = new Client(session, -1);</code></pre>
<p>That obviously leads me here:</p>
<pre><code class="lang-auto">public Client(IoSession s, int _playerId) {
	super(_playerId);
	this.session = s;
	synchronized(this) {
		outStream = new Stream(new byte[Config.BUFFER_SIZE]);
		outStream.currentOffset = 0;
	}
	inStream = new Stream(new byte[Config.BUFFER_SIZE]);
	inStream.currentOffset = 0;
	buffer = new byte[Config.BUFFER_SIZE];
}</code></pre>
<p>Now, it isn’t getting past the part where it calls <span class="bbcode-i">super(_playerid)</span> which is where it sends you to the Player constructor:</p>
<pre><code class="lang-auto">public Player(int _playerId) {
		
		playerId = _playerId;
		playerRights = 0;

		for (int i=0; i&lt;playerItems.length; i++) {
			playerItems[i] = 0;
		}
		for (int i=0; i&lt;playerItemsN.length; i++) {
			playerItemsN[i] = 0;
		}

		for (int i=0; i&lt;playerLevel.length; i++) {
			if (i == 3) {
				playerLevel[i] = 10;
			} else {
				playerLevel[i] = 1;
			}
		}

		for (int i=0; i&lt;playerXP.length; i++) {
			if (i == 3) {
				playerXP[i] = 1300;
			} else {
				playerXP[i] = 0;
			}
		}
		for (int i=0; i &lt; Config.BANK_SIZE; i++) {
			bankItems[i] = 0;
		}

		for (int i=0; i &lt; Config.BANK_SIZE; i++) {
			bankItemsN[i] = 0;
		}
		
		playerAppearance[0] = 0; // gender
		playerAppearance[1] = 7; // head
		playerAppearance[2] = 25;// Torso
		playerAppearance[3] = 29; // arms
		playerAppearance[4] = 35; // hands
		playerAppearance[5] = 39; // legs
		playerAppearance[6] = 44; // feet
		playerAppearance[7] = 14; // beard
		playerAppearance[8] = 7; // hair colour
		playerAppearance[9] = 8; // torso colour
		playerAppearance[10] = 9; // legs colour
		playerAppearance[11] = 5; // feet colour
		playerAppearance[12] = 0; // skin colour	
		
		apset = 0;
		actionID = 0;

		playerEquipment[playerHat]=-1;
		playerEquipment[playerCape]=-1;
		playerEquipment[playerAmulet]=-1;
		playerEquipment[playerChest]=-1;
		playerEquipment[playerShield]=-1;
		playerEquipment[playerLegs]=-1;
		playerEquipment[playerHands]=-1;
		playerEquipment[playerFeet]=-1;
		playerEquipment[playerRing]=-1;
		playerEquipment[playerArrows]=-1;
		playerEquipment[playerWeapon]=-1;
		
		heightLevel = 0;

		
		teleportToX = Config.START_LOCATION_X;
		teleportToY = Config.START_LOCATION_Y;

		
		absX = absY = -1;
		mapRegionX = mapRegionY = -1;
		currentX = currentY = 0;
		resetWalkingQueue();
		
	}</code></pre>
<p>The weird thing is, it gets through this whole method just fine, and I can’t figure out where it’s getting stuck after that. Any ideas you could have would be greatly appreciated!</p>
<p>UPDATE: Some sort of exception is being thrown, as proved by this method in ConnectionHandler (<a href="http://server.net/" rel="nofollow noopener">server.net</a>):</p>
<pre><code class="lang-auto">public void exceptionCaught(IoSession arg0, Throwable arg1) throws Exception {
	System.out.println("connectionhandler exception caught");
}</code></pre>
<p>However, I can’t find where this method is ever called, or what exception it’s talking about. I really have minimal knowledge of the actual networking used here, and any pointers would also be nice.</p>
<p>UPDATE 2: I’m dumb, etc, I figured it out.</p>
      </div>

      <meta itemprop='headline' content='Solved'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Dan0194.html'><span itemprop='name'>Dan0194</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-10-03T00:29:25Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:50:12Z' class='post-time'>
              August 4, 2016,  1:50pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Your not really giving enough information for us to help you Do you remember at all which files you were messing around with before it caused this error? (the player id as -1 seems a bit weird)</p>
<p>EDIT: What was the fix</p>
      </div>

      <meta itemprop='headline' content='Solved'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/n10si_t.html'><span itemprop='name'>n10si_t</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-10-03T01:05:06Z'>
            <time itemprop='dateModified' datetime='2016-08-04T13:50:12Z' class='post-time'>
              August 4, 2016,  1:50pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>It’s actually always like that when the session is created, and then the ID is assigned later (I learned a lot about this by looking way too deeply into the problem)</p>
<p>Basically what I had tried to do before it stopped working was to try to use the Player to emulate another Object, which you can’t do.</p>
      </div>

      <meta itemprop='headline' content='Solved'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/solved/547052 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:10:36 GMT -->
</html>
