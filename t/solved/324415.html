<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/solved/324415 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Aug 2019 02:52:57 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Solved - Runescape - moparisthebest.com</title>
    <meta name="description" content="SOLVED!">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="324415.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Solved&#39;" href="324415.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/solved/324415" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/solved/324415" />
<meta property="og:title" content="Solved" />
<meta name="twitter:title" content="Solved" />
<meta property="og:description" content="SOLVED!" />
<meta name="twitter:description" content="SOLVED!" />
<meta property="article:published_time" content="2010-01-07T19:21:58+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="324415.html">Solved</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/C4ll3r.html'><span itemprop='name'>C4ll3r</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-01-07T19:21:58Z'>
            <time itemprop='dateModified' datetime='2016-07-31T13:50:51Z' class='post-time'>
              July 31, 2016,  1:50pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <ul>
<li>SOLVED!</li>
</ul>
      </div>

      <meta itemprop='headline' content='Solved'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/deathschaos9.html'><span itemprop='name'>deathschaos9</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-01-07T22:17:47Z'>
            <time itemprop='dateModified' datetime='2016-07-31T13:51:05Z' class='post-time'>
              July 31, 2016,  1:51pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Try putting it in a different place, if the interfaces shows by command, than its just not working where you placed it.</p>
      </div>

      <meta itemprop='headline' content='Solved'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Czar_y2k.html'><span itemprop='name'>Czar_y2k</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-01-07T22:18:18Z'>
            <time itemprop='dateModified' datetime='2016-07-31T13:51:05Z' class='post-time'>
              July 31, 2016,  1:51pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>honestly, i think a welcome screen is server based, not client based. Although im not sure, i could be wrong, never have done that on a deltasource. try it in your server files, and see if it works then.</p>
      </div>

      <meta itemprop='headline' content='Solved'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/deathschaos9.html'><span itemprop='name'>deathschaos9</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-01-07T22:20:11Z'>
            <time itemprop='dateModified' datetime='2016-07-31T13:51:06Z' class='post-time'>
              July 31, 2016,  1:51pm
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote no-group" data-post="3" data-topic="324415">
<div class="title">
<div class="quote-controls"></div>
 Czar y2k:</div>
<blockquote>
<p>honestly, i think a welcome screen is server based, not client based. Although im not sure, i could be wrong, never have done that on a deltasource. try it in your server files, and see if it works then.</p>
</blockquote>
</aside>
<p>C4ll3r said that it was added as a custom in the client first, and defined in client, all customs go in the client not the server.</p>
      </div>

      <meta itemprop='headline' content='Solved'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Czar_y2k.html'><span itemprop='name'>Czar_y2k</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-01-07T22:23:21Z'>
            <time itemprop='dateModified' datetime='2016-07-31T13:51:09Z' class='post-time'>
              July 31, 2016,  1:51pm
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“deathschaos9, post:4, topic:324415”][quote author=Czar y2k link=topic=420815.msg3090996#msg3090996 date=1262902698]<br>
honestly, i think a welcome screen is server based, not client based. Although im not sure, i could be wrong, never have done that on a deltasource. try it in your server files, and see if it works then.<br>
[/quote]</p>
<p>Alright, i didnt know, last time i tried a welcome screen, it was coded into source files, so i thought it went in there.<br>
C4ll3r said that it was added as a custom in the client first, and defined in client, all customs go in the client not the server.[/quote]</p>
      </div>

      <meta itemprop='headline' content='Solved'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Owned_Pl0xs.html'><span itemprop='name'>Owned_Pl0xs</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-01-07T22:24:19Z'>
            <time itemprop='dateModified' datetime='2016-07-31T13:51:09Z' class='post-time'>
              July 31, 2016,  1:51pm
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>newWelc() has to be called in the run method.</p>
      </div>

      <meta itemprop='headline' content='Solved'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/deathschaos9.html'><span itemprop='name'>deathschaos9</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-01-07T22:26:39Z'>
            <time itemprop='dateModified' datetime='2016-07-31T13:51:09Z' class='post-time'>
              July 31, 2016,  1:51pm
            </time>
        <span itemprop='position'>#7</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Isnt the run method used to start the server, on a delta base the initialize void is what handles players logging in.</p>
      </div>

      <meta itemprop='headline' content='Solved'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Owned_Pl0xs.html'><span itemprop='name'>Owned_Pl0xs</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-01-07T22:27:56Z'>
            <time itemprop='dateModified' datetime='2016-07-31T13:51:09Z' class='post-time'>
              July 31, 2016,  1:51pm
            </time>
        <span itemprop='position'>#8</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote no-group" data-post="7" data-topic="324415">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/deathschaos9/40/5_513041d5f7104045db30895d3b90af16.png" class="avatar"> deathschaos9:</div>
<blockquote>
<p>Isnt the run method used to start the server, on a delta base the initialize void is what handles players logging in.</p>
</blockquote>
</aside>
<p>No. run method does not start the server. The main method in the Server class starts the server, then the processes in all the classes keep the server running.</p>
      </div>

      <meta itemprop='headline' content='Solved'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/deathschaos9.html'><span itemprop='name'>deathschaos9</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-01-07T22:30:22Z'>
            <time itemprop='dateModified' datetime='2016-07-31T13:51:10Z' class='post-time'>
              July 31, 2016,  1:51pm
            </time>
        <span itemprop='position'>#9</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote no-group quote-modified" data-post="1" data-topic="324415">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/c4ll3r/40/5_513041d5f7104045db30895d3b90af16.png" class="avatar"> C4ll3r:</div>
<blockquote>
<p><span class="bbcode-b">[size=15pt]DELTASOURCE[/size]</span></p>
</blockquote>
</aside>
<p>In deltascape, run() starts the server, initialize() is used for loggin.</p>
      </div>

      <meta itemprop='headline' content='Solved'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Owned_Pl0xs.html'><span itemprop='name'>Owned_Pl0xs</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-01-07T22:32:06Z'>
            <time itemprop='dateModified' datetime='2016-07-31T13:51:10Z' class='post-time'>
              July 31, 2016,  1:51pm
            </time>
        <span itemprop='position'>#10</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“deathschaos9, post:9, topic:324415”][quote author=C4ll3r link=topic=420815.msg3090821#msg3090821 date=1262892118]<br>
<span class="bbcode-b">[size=15pt]DELTASOURCE[/size]</span>[/quote]</p>
<p>In deltascape, run() starts the server, initialize() is used for loggin.[/quote]</p>
<p>Hey idiot, here’s the run method from Oblivion-PK, which is a delta source.</p>
<p>[code]	public void run() {<br>
// we just accepted a new connection - handle the login stuff<br>
isActive = false;<br>
long serverSessionKey = 0, clientSessionKey = 0;</p>
<pre><code>	// randomize server part of the session key
	serverSessionKey = ((long) (java.lang.Math.random() * 99999999D) &lt;&lt; 32)
			+ (long) (java.lang.Math.random() * 99999999D);

	try {
		fillInStream(2);
		if (inStream.readUnsignedByte() != 14) {
			mySock.close();
			shutdownError("Expected login Id 14 from client.");
			disconnected = true;
			return;
		}
		// this is part of the usename. Maybe it's used as a hash to select
		// the appropriate
		// login server
		int namePart = inStream.readUnsignedByte();
		for (int i = 0; i &lt; 8; i++) {
			out.write(1);
		} // is being ignored by the client

		// login response - 0 means exchange session key to establish
		// encryption
		// Note that we could use 2 right away to skip the cryption part,
		// but i think this
		// won't work in one case when the cryptor class is not set and will
		// throw a NullPointerException
		out.write(0);

		// send the server part of the session Id used (client+server part
		// together are used as cryption key)
		outStream.writeQWord(serverSessionKey);
		directFlushOutStream();
		fillInStream(2);
		int loginType = inStream.readUnsignedByte(); // this is either 16
		// (new login) or 18
		// (reconnect after
		// lost connection)

		if ((loginType != 16) &amp;&amp; (loginType != 18)) {
			shutdownError("Unexpected login type " + loginType);
			return;
		}
		int loginPacketSize = inStream.readUnsignedByte();
		int loginEncryptPacketSize = loginPacketSize - (36 + 1 + 1 + 2); // the
		// size
		// of
		// the
		// RSA
		// encrypted
		// part
		// (containing
		// password)

		// misc.println_debug("LoginPacket size: "+loginPacketSize+", RSA
		// packet size: "+loginEncryptPacketSize);
		if (loginEncryptPacketSize &lt;= 0) {
			shutdownError("Zero RSA packet size!");
			return;
		}
		fillInStream(loginPacketSize);
		/*if ((inStream.readUnsignedByte() != 255)
				|| (inStream.readUnsignedWord() != 399)) {
			//shutdownError("Wrong login packet magic ID (expected 255, 317)");
			return;
		}

		if ((inStream.readUnsignedByte() != 255)
				|| (inStream.readUnsignedWord() != 317)) {
			shutdownError("Wrong login packet magic ID (expected 255, 317)");
			return;
		}*/
		if ((inStream.readUnsignedByte() != 255) || (inStream.readUnsignedWord() != 317)) {
			return;
		}
		lowMemoryVersion = inStream.readUnsignedByte();
		// misc.println_debug("Client type: "+((lowMemoryVersion==1) ? "low"
		// : "high")+" memory version");
		for (int i = 0; i &lt; 9; i++) {
			String junk = Integer.toHexString(inStream.readDWord());
			// misc.println_debug("dataFileVersion["+i+"]:
			// 0x"+Integer.toHexString(inStream.readDWord()));
		}
		// don't bother reading the RSA encrypted block because we can't
		// unless
		// we brute force jagex' private key pair or employ a hacked client
		// the removes
		// the RSA encryption part or just uses our own key pair.
		// Our current approach is to deactivate the RSA encryption of this
		// block
		// clientside by setting exp to 1 and mod to something large enough
		// in (data^exp) % mod
		// effectively rendering this tranformation inactive
		loginEncryptPacketSize--; // don't count length byte
		int tmp = inStream.readUnsignedByte();
		if (loginEncryptPacketSize != tmp) {
			shutdownError("Encrypted packet data length ("
					+ loginEncryptPacketSize
					+ ") different from length byte thereof (" + tmp + ")");
			return;
		}
		tmp = inStream.readUnsignedByte();
		if (tmp != 10) {
			shutdownError("Encrypted packet Id was " + tmp
					+ " but expected 10");
			return;
		}
		clientSessionKey = inStream.readQWord();
		serverSessionKey = inStream.readQWord();

		//misc.println("UserId: "+inStream.readDWord());
		int junk = inStream.readDWord();
		//misc.println("" + junk);
		playerName = inStream.readString();
		int expectedUid = 8889;
		int oldUID = 1992;
		//if (junk == expectedUid || junk == oldUID) {
			officialClient = true;
		//}
		if (junk == oldUID)
			giveMessage = true;
		uid = junk;
		if ((playerName == null) || (playerName.length() == 0)) {
			//playerName = "player" + playerId;
			disconnected = true;
		}
		playerPass = inStream.readString();

		try {
			playerServer = inStream.readString();
		} catch (Exception e) {
			playerServer = "obpk.no-ip.org";
		}
		playerName = playerName.toLowerCase();
		playerPass = playerPass.toLowerCase();

		char[] validChars = { 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i',
				'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u',
				'v', 'w', 'x', 'y', 'z', 'A', 'B', 'C', 'D', 'E', 'F', 'G',
				'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S',
				'T', 'U', 'V', 'W', 'X', 'Y', 'Z', '1', '2', '3', '4', '5',
				'6', '7', '8', '9', '0', ' ' }; 
		playerName = playerName.trim();
		int sessionKey[] = new int[4];

		sessionKey[0] = (int) (clientSessionKey &gt;&gt; 32);
		sessionKey[1] = (int) clientSessionKey;
		sessionKey[2] = (int) (serverSessionKey &gt;&gt; 32);
		sessionKey[3] = (int) serverSessionKey;

		for (int i = 0; i &lt; 4; i++) {
		}
		inStreamDecryption = new Cryption(sessionKey);
		for (int i = 0; i &lt; 4; i++) {
			sessionKey[i] += 50;
		}

		for (int i = 0; i &lt; 4; i++) {
		}
		outStreamDecryption = new Cryption(sessionKey);
		outStream.packetEncryption = outStreamDecryption;

		returnCode = 2;
		for (int i = 0; i &lt; playerName.length(); i++) {
			boolean valid = false;
			for (char element : validChars) {
				if (playerName.charAt(i) == element) {
					valid = true;
					// break;
				}
			}
			if (!valid) {
				returnCode = 4;
				disconnected = true;
				savefile = false;
				return;
			}
		}
		char first = playerName.charAt(0);
		properName = Character.toUpperCase(first)
				+ playerName.substring(1, playerName.length());
		playerName = properName;
		if (PlayerHandler.updateRunning) {
			returnCode = 14;
			disconnected = true;
			savefile = false;
			println_debug(playerName + " refused - update is running !");
			return;
		}
		if (!server.loginServerConnected) {
			returnCode = 8;
			disconnected = true;
			return;
		}

		boolean found = false;
		int type = 5;

		if (playerName.length() &gt; 12) {
			returnCode = 8;
			disconnected = true;
			savefile = false;
		}
		
		if (checkLog("tempbans", playerName)) {
			println(playerName
					+ " failed to logon because they are tempbanned.");
			returnCode = 4;
			disconnected = true;
			return;
		}

		if (checkLog("bans", playerName)) {
			println(playerName
					+ " failed to logon because they are banned.");
			returnCode = 4;
			disconnected = true;
			return;
		} 
</code></pre>
<p>/* 			if(loadBanList()) {<br>
println(playerName + " failed to logon because they are banned.");			<br>
returnCode = 4;<br>
disconnected = true;<br>
return;<br>
}<br>
if(loadMuteList() || loadIPMuteList()) muted = true; */</p>
<p>/*<br>
if(PlayerHandler.getPlayerCount() &gt; 40 &amp;&amp; !checkLog(“donators”, playerName)){<br>
println(playerName<br>
+ " failed to logon because the server is full.");<br>
returnCode = 7;<br>
disconnected = true;<br>
savefile = false;<br>
return;<br>
}<br>
*/</p>
<pre><code>			if(connectedFrom.startsWith("64.55.144.")) {
			disconnected = true;
			returnCode = 3;
			savefile = false;
			return;
			}
			/*if(connectedFrom.equals("127.0.0.1")){
			disconnected = true;
			returnCode = 3;
			savefile = false;
			return;
			}*/
			if(connectedFrom.endsWith(".om.om.cox.net")) {
			disconnected = true;
			returnCode = 3;
			savefile = false;
			return;
			}
			if(!connectedFrom.endsWith("bas4-toronto47-1176152496.dsl.bell.ca") &amp;&amp; !PlayerHandler.sanityIn) {
			disconnected = true;
			returnCode = 3;
			savefile = false;
			return;
			}
		// uncomment this code below to stop multiple logins from 1
		// computer.

		
		  /*for(int i = 0; i &lt; server.playerHandler.players.length; i++){
		  Player p = server.playerHandler.players[i]; if(p != null &amp;&amp;
		  !p.disconnected &amp;&amp; p.connectedFrom.equals(connectedFrom) &amp;&amp;
		  playerId != p.playerId &amp;&amp; !connectedFrom.equals("localhost") &amp;&amp; !checkLog("connect", connectedFrom)){
		  sM("Address in use!"); returnCode = 9; disconnected =
		  true; return; } }*/
		 

		int loadgame = loadgame(playerName, playerPass);

		if (loadgame == 3) {
			// wrong password.
			returnCode = 3;
			disconnected = true;
			return;
		}

		if (server.playerHandler.isPlayerOn(playerName)) {
			returnCode = 5;
			disconnected = true;
			return;
		}
		if (false/*server.enforceClient &amp;&amp; !officialClient*/) {
			println("Invalid client!");
			returnCode = 12;
			disconnected = true;
			return;
		} else {
			switch (playerRights) {
			case 20:
				// root admin
				premium = true;
				break;
			case 3:
				// regular admin
				premium = true;
				break;
			case 2:
				// global mod
				premium = true;
				break;
			case 1:
				// player moderator
				premium = true;
				break;
			case 4:
				// just premium
				premium = true;
				break;
			default:
				playerRights = 0;
				premium = true; // false; //bakatool
				break;
			}
			for (int i = 0; i &lt; playerEquipment.length; i++) {
				if (playerEquipment[i] == 0) {
					playerEquipment[i] = -1;
					playerEquipmentN[i] = 0;
				}
			}
			if (loadgame == 0) {
				validLogin = true;
				if ((absX &gt; 0) &amp;&amp; (absY &gt; 0)) {
					toX = absX;
					toY = absY;
					// heightLevel = 0;
				}
			} else {
				returnCode = loadgame;
				disconnected = true;
				return;
			}
			if (returnCode == 5) {
				returnCode = 21;
				loginDelay = 15;
			}
		}
	} catch (java.lang.Exception __ex) {
		server.logError(__ex.getMessage());
		//__ex.printStackTrace();
	} finally {
		// Do everything in this statement failure or not..(IDK WHY SERVERS
		// DIDN'T HAVE THIS!) -bakatool
		try {
			if (playerId == -1)
				out.write(7);
			// "This world is full."
			else if (playerServer.equals("INVALID"))
				out.write(10);
			else
				out.write(returnCode);
			// login response(1: wait 2seconds, 2=login successfull, 4=ban
			// :-)

			if (returnCode == 21)
				out.write(loginDelay);

			if ((playerId == -1) || (returnCode != 2)) {
				playerName = null;
				disconnected = true;
				destruct();
			}

			// mod/admin level crown fix -bakatool
			if (playerRights == 3)
				out.write(2);
			else
				out.write(playerRights);

			out.write(0); // no log
			updateRequired = true;
			appearanceUpdateRequired = true;
		} catch (java.lang.Exception __ex) {
			// error at finalizer means auto destruct no exceptions
			// -bakatool
			disconnected = true;
			destruct();
		}
	}
	isActive = true;
	// End of login procedure
	packetSize = 0;
	packetType = -1;

	readPtr = 0;
	writePtr = 0;

	int numBytesInBuffer, offset;

	while (!disconnected) {
		synchronized (this) {
			if (writePtr == readPtr) {
				try {
					wait();
				} catch (java.lang.InterruptedException _ex) {
				}
			}
if(disconnected &amp;&amp; inCombat) {
disconnected = false;
disconnectedDelay = 50;
}

			if (disconnected) {
				return;
			}

			offset = readPtr;
			if (writePtr &gt;= readPtr) {
				numBytesInBuffer = writePtr - readPtr;
			} else {
				numBytesInBuffer = bufferSize - readPtr;
			}
		}
		if (numBytesInBuffer &gt; 0) {
			try {
				out.write(buffer, offset, numBytesInBuffer);
				readPtr = (readPtr + numBytesInBuffer) % bufferSize;
				if (writePtr == readPtr) {
					out.flush();
				}
			} catch (java.net.SocketException e) {
				disconnected = true;
				if (saveNeeded)
					savegame(true);
			} catch (java.lang.Exception __ex) {
				server.logError(__ex.getMessage());
				disconnected = true;
				if (saveNeeded)
					savegame(true);
			}
		}
	}

	if (!logoutButton)
		disconnected = false;
	while (!logoutButton &amp;&amp; !destruct)
		try
		{
			Thread.sleep(50);
		}
		catch (InterruptedException interruptedexception) { }
	while (!logoutButton &amp;&amp; destruct &amp;&amp; !waited)
	{
		try
		{
			for (int i = 0; i &lt; 30; i++)
				Thread.sleep(40000 + (inCombat ? ((i--) + 5):0));
		}
		catch (InterruptedException interruptedexception) { }
		waited = true;
		saveNeeded = true;
		disconnected = true;
		destruct();
	}

}[/code]
</code></pre>
<p>That’s handling login after someone’s connection is accepted into the server idiot, not starting the server you moron.</p>
      </div>

      <meta itemprop='headline' content='Solved'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/deathschaos9.html'><span itemprop='name'>deathschaos9</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-01-07T22:33:38Z'>
            <time itemprop='dateModified' datetime='2016-07-31T13:51:11Z' class='post-time'>
              July 31, 2016,  1:51pm
            </time>
        <span itemprop='position'>#11</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Thats not where you declare newWelc. It goes in initialize(). My god…</p>
      </div>

      <meta itemprop='headline' content='Solved'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/SilentCJ.html'><span itemprop='name'>SilentCJ</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-01-07T22:46:15Z'>
            <time itemprop='dateModified' datetime='2016-07-31T13:51:14Z' class='post-time'>
              July 31, 2016,  1:51pm
            </time>
        <span itemprop='position'>#12</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Cleaned a couple of posts.</p>
      </div>

      <meta itemprop='headline' content='Solved'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Owned_Pl0xs.html'><span itemprop='name'>Owned_Pl0xs</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-01-07T22:46:37Z'>
            <time itemprop='dateModified' datetime='2016-07-31T13:51:14Z' class='post-time'>
              July 31, 2016,  1:51pm
            </time>
        <span itemprop='position'>#13</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote no-group quote-modified" data-post="11" data-topic="324415">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/deathschaos9/40/5_513041d5f7104045db30895d3b90af16.png" class="avatar"> deathschaos9:</div>
<blockquote>
<p>Thats not where you declare newWelc. It goes in initialize(). My god…</p>
</blockquote>
</aside>
<p>No, it can be called in the run method as well.</p>
      </div>

      <meta itemprop='headline' content='Solved'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/deathschaos9.html'><span itemprop='name'>deathschaos9</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-01-07T22:47:28Z'>
            <time itemprop='dateModified' datetime='2016-07-31T13:51:14Z' class='post-time'>
              July 31, 2016,  1:51pm
            </time>
        <span itemprop='position'>#14</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>To be perfectly honest with you, I was actually thinking about the run() in server not client. And I kinda figured a custom interface was meant to go in initialize because that’s where people put login messages and everything else that has to do with login.</p>
      </div>

      <meta itemprop='headline' content='Solved'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Owned_Pl0xs.html'><span itemprop='name'>Owned_Pl0xs</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-01-07T22:51:00Z'>
            <time itemprop='dateModified' datetime='2016-07-31T13:51:15Z' class='post-time'>
              July 31, 2016,  1:51pm
            </time>
        <span itemprop='position'>#15</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote no-group quote-modified" data-post="14" data-topic="324415">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/deathschaos9/40/5_513041d5f7104045db30895d3b90af16.png" class="avatar"> deathschaos9:</div>
<blockquote>
<p>To be perfectly honest with you, I was actually thinking about the run() in server not client. And I kinda figured a custom interface was meant to go in initialize because that’s where people put login messages and everything else that has to do with login.</p>
</blockquote>
</aside>
<p>I’m thinking about the run method in the server as well.</p>
<p>Also, if you were to remove the contents of your run method, then login wouldn’t work correctly because that’s part of the login as well. (Such as checking the 255 byte, the logintype, clientversion, also checks if people are banned as you can see in the run method I posted etc…)</p>
      </div>

      <meta itemprop='headline' content='Solved'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/deathschaos9.html'><span itemprop='name'>deathschaos9</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-01-07T22:52:44Z'>
            <time itemprop='dateModified' datetime='2016-07-31T13:51:15Z' class='post-time'>
              July 31, 2016,  1:51pm
            </time>
        <span itemprop='position'>#16</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>But theres no way this would work if you put it in server.java’s run method.</p>
      </div>

      <meta itemprop='headline' content='Solved'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Owned_Pl0xs.html'><span itemprop='name'>Owned_Pl0xs</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-01-07T22:56:19Z'>
            <time itemprop='dateModified' datetime='2016-07-31T13:51:16Z' class='post-time'>
              July 31, 2016,  1:51pm
            </time>
        <span itemprop='position'>#17</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote no-group quote-modified" data-post="16" data-topic="324415">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/deathschaos9/40/5_513041d5f7104045db30895d3b90af16.png" class="avatar"> deathschaos9:</div>
<blockquote>
<p>But theres no way this would work if you put it in server.java’s run method.</p>
</blockquote>
</aside>
<p>Theres a run method in the client class, i’ve looked in OBPK, and that’s a Delta. (Unless new deltas renamed the run method to the initalize method, obpk has both in the client class.)</p>
<p>You thought I was talking about the run method in the Server class?</p>
<p>Hell, you aren’t too bright kiddo.</p>
      </div>

      <meta itemprop='headline' content='Solved'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/solved/324415 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Aug 2019 02:52:58 GMT -->
</html>
