<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>[Project Zeta] Item Requirements via XML</title>
    <link>https://forum.moparisthebest.com/t/project-zeta-item-requirements-via-xml/454728</link>
    <description>[left][size=14pt][b]Item Requirements via XML for Project Zeta[/b][/size][/left]

[i]I based this of RuneFocus 1.5 (Runesource)[/i]
Using an IDE like eclipse is highly recommended!



Go to org&gt;randqm&gt;model&gt;item
and add 2 new java files, one called ItemRequirement and the other one called ItemRequirementManager

[b]In the freshly new made ItemRequirement class:[/b]
add this piece of code to it:
[code=java]
package org.randqm.model.item;

public class ItemRequirement {

    private int itemId;
    private int[] skillId;
    private int[] itemReqs;
    private int[] skillId2;
    private int[] itemReqs2;

    public int getItemId() {
        return itemId;
    }

    public int[] getItemReqs() {
        return itemReqs;
    }

    public int[] getSkillId() {
        return skillId;
    } 
    
    public int[] getItemReqs2() {
        return itemReqs2;
    }

    public int[] getSkillId2() {
        return skillId2;
    } 
    
}
[/code]


[b]In ItemRequirementManager add this:[/b]
[code=java]
package org.randqm.model.item;

import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.util.List;

import org.randqm.model.player.Client;
import org.randqm.util.XStreamUtil;

public class ItemRequirementManager {
	
	public static final int MAX_ITEMS = 9000;
	
	private ItemRequirement[] itemRequirement;
	
	
	public ItemRequirementManager() {
		itemRequirement = new ItemRequirement[MAX_ITEMS];
	}
	
	@SuppressWarnings(&quot;unchecked&quot;)
	public void loadItemRequirements() throws FileNotFoundException {
		long a = System.currentTimeMillis();
		List&lt;ItemRequirement&gt; list = (List&lt;ItemRequirement&gt;) XStreamUtil.getxStream().fromXML(new FileInputStream(&quot;./Content/itemrequirements.xml&quot;));
		for (ItemRequirement def : list) {
			itemRequirement[def.getItemId()] = def;
		}
		long iniTime = System.currentTimeMillis()-a;
		System.out.println(&quot;[ITEMREQUIREMENTMANAGER] Loaded &quot; + list.size() + &quot; item requirement(s) in &quot;+iniTime+&quot; ms. &quot;);
	}
	
	public boolean canWearItem (Client c, int itemId) {
		int skillId = 22;
		int reqLvl = 1;
		boolean canWear = true;
		ItemRequirement itemReqs = itemRequirement[itemId];
		if (itemReqs == null) {
			return true;
		}
		for (int i = 0; i &lt; itemReqs.getItemReqs().length; i++) {
			skillId = itemReqs.getSkillId()[i];
			reqLvl = itemReqs.getItemReqs()[i];
			if (c.getLevelForXP(c.playerXP[skillId]) &lt; reqLvl) {
				canWear = false;
			}
			if (itemReqs.getItemReqs2() != null) {
				if (itemReqs.getItemReqs2()[i] &gt; 0) {
					skillId = itemReqs.getSkillId2()[i];
					reqLvl = itemReqs.getItemReqs2()[i];
					if (c.getLevelForXP(c.playerXP[skillId]) &lt; reqLvl) {
						canWear = false;
					}
				}
			}
		}
		if (!canWear) {
			if (skillId == 16 || skillId == 0)
				c.sM(&quot;You need an &quot;+c.statName[skillId]+&quot; level of &quot;+reqLvl+&quot; to wear this item.&quot;);
			else
				c.sM(&quot;You need a &quot;+c.statName[skillId]+&quot; level of &quot;+reqLvl+&quot; to wear this item.&quot;);
			return false;
		}
		return true;
	}

}
[/code]


[b]Go to org&gt;randqm&gt;model&gt;combat
Open the Wearing class[/b]
You can remove everything that has to do with item requirements.

Right under
[code=java]
public boolean wear (int wearID, int slot) {
[/code]

Add this:
[code=java]
		if (!Server.itemReqManager.canWearItem(c, wearID))
			return false;
[/code]



[b]Now go to the Server class (org&gt;randqm)[/b]

Add this to it:
[code=java]
public static ItemRequirementManager itemReqManager = new ItemRequirementManager();
[/code]

and in public static void main, add this:
[code=java]
itemReqManager = new ItemRequirementManager();
try {
        	XStreamUtil.loadAllFiles();
        } catch (Exception ex) {
			ex.printStackTrace();
		}
[/code]



[b]Now go to org&gt;randqm&gt;util
add a new class called XStreamUtil[/b]

Add this piece of code to it:
[code=java]
package org.randqm.util;

import java.io.FileNotFoundException;
import java.io.IOException;

import org.randqm.Server;

import com.thoughtworks.xstream.XStream;

public class XStreamUtil {
	
	private static XStreamUtil instance = new XStreamUtil();
	private static XStream xStream = new XStream();
	
	public static XStreamUtil getInstance() {
		return instance;
	}

	public static XStream getxStream() {
		return xStream;
	}

	static {
		xStream.alias(&quot;ItemRequirement&quot;, org.randqm.model.item.ItemRequirement.class);
	}
	
	public static void loadAllFiles() throws FileNotFoundException, IOException {
		Server.itemReqManager.loadItemRequirements();
	}

}
[/code]


Now go into your Content folder and add a new XML file called,
itemrequirements.XML
this is the xml file that contains the requirement data for items.
Here is the data you have to add in the file:
http://pastebin.com/H0MeyDcL

Now still in your Content folder, add a new folder called &quot;Libs&quot;
Add these 2 jars in it:
[url=http://up.ht/N9x2oq]http://up.ht/N9x2oq[/url]
[url=http://up.ht/N9x4fU]http://up.ht/N9x4fU[/url]



[size=12pt][b]Do not forget to import the 2 libs into your project or you&#39;ll have a bunch of errors!
Also be aware for imports, another reason to use an IDE.[/b][/size]


[i]Credits:[/i]
RuneFocus 1.5: XML base
Me: Converting the base, 
adding possibility for multiple level requirements for one item, 
making the method to check requirements for wearing,
adding ALL the item requirements data into the XML file.</description>
    
    <lastBuildDate>Mon, 10 Dec 2012 12:00:58 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/project-zeta-item-requirements-via-xml/454728.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>[Project Zeta] Item Requirements via XML</title>
        <dc:creator><![CDATA[@Clawz_fury lare69]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/clawz_fury">@Clawz_fury</a> wrote:</p>
          <blockquote>
              <p>ewwwwww xml, thanks for the tutorial though, I was doing something completely different, I might incorporate what I was doing but use this concept with it also.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/project-zeta-item-requirements-via-xml/454728/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/project-zeta-item-requirements-via-xml/454728/8</link>
        <pubDate>Mon, 10 Dec 2012 12:00:58 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-454728-8</guid>
        <source url="https://forum.moparisthebest.com/t/project-zeta-item-requirements-via-xml/454728.rss">[Project Zeta] Item Requirements via XML</source>
      </item>
      <item>
        <title>[Project Zeta] Item Requirements via XML</title>
        <dc:creator><![CDATA[@theowned theowned]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/theowned">@theowned</a> wrote:</p>
          <blockquote>
              <p>sooo sick</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/project-zeta-item-requirements-via-xml/454728/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/project-zeta-item-requirements-via-xml/454728/7</link>
        <pubDate>Mon, 03 Dec 2012 15:44:55 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-454728-7</guid>
        <source url="https://forum.moparisthebest.com/t/project-zeta-item-requirements-via-xml/454728.rss">[Project Zeta] Item Requirements via XML</source>
      </item>
      <item>
        <title>[Project Zeta] Item Requirements via XML</title>
        <dc:creator><![CDATA[@enzo42 enzo42]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/enzo42">@enzo42</a> wrote:</p>
          <blockquote>
              <p>Doesn’t XML load 10 times longer then txt?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/project-zeta-item-requirements-via-xml/454728/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/project-zeta-item-requirements-via-xml/454728/6</link>
        <pubDate>Sat, 18 Aug 2012 10:57:21 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-454728-6</guid>
        <source url="https://forum.moparisthebest.com/t/project-zeta-item-requirements-via-xml/454728.rss">[Project Zeta] Item Requirements via XML</source>
      </item>
      <item>
        <title>[Project Zeta] Item Requirements via XML</title>
        <dc:creator><![CDATA[@relexlawl relexlawl]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/relexlawl">@relexlawl</a> wrote:</p>
          <blockquote>
              <p>Don’t see why people use XML just to fetch simple data like this…Just taking more time to do something so simple…</p>
<p>Thanks for the contribution though, I suppose.</p>
<p>Also looks a lot like how LightRune (I think it’s this base), handles XML loading…</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/project-zeta-item-requirements-via-xml/454728/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/project-zeta-item-requirements-via-xml/454728/5</link>
        <pubDate>Sat, 18 Aug 2012 04:12:26 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-454728-5</guid>
        <source url="https://forum.moparisthebest.com/t/project-zeta-item-requirements-via-xml/454728.rss">[Project Zeta] Item Requirements via XML</source>
      </item>
      <item>
        <title>[Project Zeta] Item Requirements via XML</title>
        <dc:creator><![CDATA[@RandQm RandQm]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/randqm">@RandQm</a> wrote:</p>
          <blockquote>
              <p>All item requirements are now added to the XML file,<br>
If you find items that should have requirements, but haven’t yet or wrong ones, please let me now.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/project-zeta-item-requirements-via-xml/454728/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/project-zeta-item-requirements-via-xml/454728/4</link>
        <pubDate>Fri, 17 Aug 2012 23:15:13 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-454728-4</guid>
        <source url="https://forum.moparisthebest.com/t/project-zeta-item-requirements-via-xml/454728.rss">[Project Zeta] Item Requirements via XML</source>
      </item>
      <item>
        <title>[Project Zeta] Item Requirements via XML</title>
        <dc:creator><![CDATA[@Team_Rocket Team_Rocket]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/team_rocket">@Team_Rocket</a> wrote:</p>
          <blockquote>
              <p>Good work, I’m glad you do this now. You’ve come a long way in a short time.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/project-zeta-item-requirements-via-xml/454728/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/project-zeta-item-requirements-via-xml/454728/3</link>
        <pubDate>Fri, 17 Aug 2012 22:23:56 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-454728-3</guid>
        <source url="https://forum.moparisthebest.com/t/project-zeta-item-requirements-via-xml/454728.rss">[Project Zeta] Item Requirements via XML</source>
      </item>
      <item>
        <title>[Project Zeta] Item Requirements via XML</title>
        <dc:creator><![CDATA[@arham_4 arham 4]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/arham_4">@arham_4</a> wrote:</p>
          <blockquote>
              <p>Cool!</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/project-zeta-item-requirements-via-xml/454728/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/project-zeta-item-requirements-via-xml/454728/2</link>
        <pubDate>Fri, 17 Aug 2012 21:37:52 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-454728-2</guid>
        <source url="https://forum.moparisthebest.com/t/project-zeta-item-requirements-via-xml/454728.rss">[Project Zeta] Item Requirements via XML</source>
      </item>
      <item>
        <title>[Project Zeta] Item Requirements via XML</title>
        <dc:creator><![CDATA[@RandQm RandQm]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/randqm">@RandQm</a> wrote:</p>
          <blockquote>
              <p>[left][size=14pt]<span class="bbcode-b">Item Requirements via XML for Project Zeta</span>[/size][/left]</p>
<p><span class="bbcode-i">I based this of RuneFocus 1.5 (Runesource)</span><br>
Using an IDE like eclipse is highly recommended!</p>
<p>Go to org&gt;randqm&gt;model&gt;item<br>
and add 2 new java files, one called ItemRequirement and the other one called ItemRequirementManager</p>
<p><span class="bbcode-b">In the freshly new made ItemRequirement class:</span><br>
add this piece of code to it:</p>
<pre><code class="lang-auto">package org.randqm.model.item;

public class ItemRequirement {

    private int itemId;
    private int[] skillId;
    private int[] itemReqs;
    private int[] skillId2;
    private int[] itemReqs2;

    public int getItemId() {
        return itemId;
    }

    public int[] getItemReqs() {
        return itemReqs;
    }

    public int[] getSkillId() {
        return skillId;
    } 
    
    public int[] getItemReqs2() {
        return itemReqs2;
    }

    public int[] getSkillId2() {
        return skillId2;
    } 
    
}</code></pre>
<p><span class="bbcode-b">In ItemRequirementManager add this:</span></p>
<pre><code class="lang-auto">package org.randqm.model.item;

import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.util.List;

import org.randqm.model.player.Client;
import org.randqm.util.XStreamUtil;

public class ItemRequirementManager {
	
	public static final int MAX_ITEMS = 9000;
	
	private ItemRequirement[] itemRequirement;
	
	
	public ItemRequirementManager() {
		itemRequirement = new ItemRequirement[MAX_ITEMS];
	}
	
	@SuppressWarnings("unchecked")
	public void loadItemRequirements() throws FileNotFoundException {
		long a = System.currentTimeMillis();
		List&lt;ItemRequirement&gt; list = (List&lt;ItemRequirement&gt;) XStreamUtil.getxStream().fromXML(new FileInputStream("./Content/itemrequirements.xml"));
		for (ItemRequirement def : list) {
			itemRequirement[def.getItemId()] = def;
		}
		long iniTime = System.currentTimeMillis()-a;
		System.out.println("[ITEMREQUIREMENTMANAGER] Loaded " + list.size() + " item requirement(s) in "+iniTime+" ms. ");
	}
	
	public boolean canWearItem (Client c, int itemId) {
		int skillId = 22;
		int reqLvl = 1;
		boolean canWear = true;
		ItemRequirement itemReqs = itemRequirement[itemId];
		if (itemReqs == null) {
			return true;
		}
		for (int i = 0; i &lt; itemReqs.getItemReqs().length; i++) {
			skillId = itemReqs.getSkillId()[i];
			reqLvl = itemReqs.getItemReqs()[i];
			if (c.getLevelForXP(c.playerXP[skillId]) &lt; reqLvl) {
				canWear = false;
			}
			if (itemReqs.getItemReqs2() != null) {
				if (itemReqs.getItemReqs2()[i] &gt; 0) {
					skillId = itemReqs.getSkillId2()[i];
					reqLvl = itemReqs.getItemReqs2()[i];
					if (c.getLevelForXP(c.playerXP[skillId]) &lt; reqLvl) {
						canWear = false;
					}
				}
			}
		}
		if (!canWear) {
			if (skillId == 16 || skillId == 0)
				c.sM("You need an "+c.statName[skillId]+" level of "+reqLvl+" to wear this item.");
			else
				c.sM("You need a "+c.statName[skillId]+" level of "+reqLvl+" to wear this item.");
			return false;
		}
		return true;
	}

}</code></pre>
<p><span class="bbcode-b">Go to org&gt;randqm&gt;model&gt;combat<br>
Open the Wearing class</span><br>
You can remove everything that has to do with item requirements.</p>
<p>Right under</p>
<pre><code class="lang-auto">public boolean wear (int wearID, int slot) {</code></pre>
<p>Add this:</p>
<pre><code class="lang-auto">		if (!Server.itemReqManager.canWearItem(c, wearID))
			return false;</code></pre>
<p><span class="bbcode-b">Now go to the Server class (org&gt;randqm)</span></p>
<p>Add this to it:</p>
<pre><code class="lang-auto">public static ItemRequirementManager itemReqManager = new ItemRequirementManager();</code></pre>
<p>and in public static void main, add this:</p>
<pre><code class="lang-auto">itemReqManager = new ItemRequirementManager();
try {
        	XStreamUtil.loadAllFiles();
        } catch (Exception ex) {
			ex.printStackTrace();
		}</code></pre>
<p><span class="bbcode-b">Now go to org&gt;randqm&gt;util<br>
add a new class called XStreamUtil</span></p>
<p>Add this piece of code to it:</p>
<pre><code class="lang-auto">package org.randqm.util;

import java.io.FileNotFoundException;
import java.io.IOException;

import org.randqm.Server;

import com.thoughtworks.xstream.XStream;

public class XStreamUtil {
	
	private static XStreamUtil instance = new XStreamUtil();
	private static XStream xStream = new XStream();
	
	public static XStreamUtil getInstance() {
		return instance;
	}

	public static XStream getxStream() {
		return xStream;
	}

	static {
		xStream.alias("ItemRequirement", org.randqm.model.item.ItemRequirement.class);
	}
	
	public static void loadAllFiles() throws FileNotFoundException, IOException {
		Server.itemReqManager.loadItemRequirements();
	}

}</code></pre>
<p>Now go into your Content folder and add a new XML file called,<br>
itemrequirements.XML<br>
this is the xml file that contains the requirement data for items.<br>
Here is the data you have to add in the file:<br>
<a href="http://pastebin.com/H0MeyDcL" class="onebox" target="_blank" rel="nofollow noopener">http://pastebin.com/H0MeyDcL</a></p>
<p>Now still in your Content folder, add a new folder called “Libs”<br>
Add these 2 jars in it:<br>
<a href="http://up.ht/N9x2oq" data-bbcode="true" rel="nofollow noopener">http://up.ht/N9x2oq</a><br>
<a href="http://up.ht/N9x4fU" data-bbcode="true" rel="nofollow noopener">http://up.ht/N9x4fU</a></p>
<p>[size=12pt]<span class="bbcode-b">Do not forget to import the 2 libs into your project or you’ll have a bunch of errors!<br>
Also be aware for imports, another reason to use an IDE.</span>[/size]</p>
<p><span class="bbcode-i">Credits:</span><br>
RuneFocus 1.5: XML base<br>
Me: Converting the base,<br>
adding possibility for multiple level requirements for one item,<br>
making the method to check requirements for wearing,<br>
adding ALL the item requirements data into the XML file.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/project-zeta-item-requirements-via-xml/454728/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/project-zeta-item-requirements-via-xml/454728/1</link>
        <pubDate>Fri, 17 Aug 2012 21:36:39 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-454728-1</guid>
        <source url="https://forum.moparisthebest.com/t/project-zeta-item-requirements-via-xml/454728.rss">[Project Zeta] Item Requirements via XML</source>
      </item>
  </channel>
</rss>
