<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/demonik-efficiency-improvement-for-demonik-source-users/190189 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 09 Aug 2019 16:53:00 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Demonik Efficiency Improvement: For Demonik source users - Runescape - moparisthebest.com</title>
    <meta name="description" content="Since a lot of servers use the Demonik source now which is the most advanced public release but still contains many inefficiencies and &amp;#39;memory-leaks&amp;#39; (depending on the context you use that term), I figured while I contin&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="190189.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Demonik Efficiency Improvement: For Demonik source users&#39;" href="190189.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/demonik-efficiency-improvement-for-demonik-source-users/190189" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/demonik-efficiency-improvement-for-demonik-source-users/190189" />
<meta property="og:title" content="Demonik Efficiency Improvement: For Demonik source users" />
<meta name="twitter:title" content="Demonik Efficiency Improvement: For Demonik source users" />
<meta property="og:description" content="Since a lot of servers use the Demonik source now which is the most advanced public release but still contains many inefficiencies and ‘memory-leaks’ (depending on the context you use that term), I figured while I continue to work on the server on localhost for educational purposes, I’d post certain ‘efficiency enhancements’ I come across.  Aggressive NPCs  This system I coded was very poorly designed. It uses [font=Courier New]AggressiveNpcScanner[/font] in package [font=Courier New]npchandler[..." />
<meta name="twitter:description" content="Since a lot of servers use the Demonik source now which is the most advanced public release but still contains many inefficiencies and ‘memory-leaks’ (depending on the context you use that term), I figured while I continue to work on the server on localhost for educational purposes, I’d post certain ‘efficiency enhancements’ I come across.  Aggressive NPCs  This system I coded was very poorly designed. It uses [font=Courier New]AggressiveNpcScanner[/font] in package [font=Courier New]npchandler[..." />
<meta property="article:published_time" content="2008-03-17T09:24:59+00:00" />
<meta property="og:ignore_canonical" content="true" />

      <link rel="next" href="1901894658.html?page=2">


    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="190189.html">Demonik Efficiency Improvement: For Demonik source users</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Rancid2.html'><span itemprop='name'>Rancid2</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-03-17T09:24:59Z'>
            <time itemprop='dateModified' datetime='2016-07-30T20:45:54Z' class='post-time'>
              July 30, 2016,  8:45pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Since a lot of servers use the Demonik source now which is the most advanced public release but still contains many inefficiencies and ‘memory-leaks’ (depending on the context you use that term), I figured while I continue to work on the server on localhost for educational purposes, I’d post certain ‘efficiency enhancements’ I come across.</p>
<p><span class="bbcode-b">Aggressive NPCs</span></p>
<p>This system I coded was very poorly designed. It uses [font=Courier New]AggressiveNpcScanner[/font] in package [font=Courier New]npchandler[/font]. It scans periodically to a set timer invoked inside [font=Courier New]GameEngine[/font], and it scans ALL registered NPCs, and then ALL registered players. What’s wrong with that? Well, if you have, say, 1000 aggressive NPCs spawned, and 100 players online, you’re scanning 1000 x 100 [font=Courier New]Mob[/font]s (equivalent to 100,000 loops <span class="bbcode-i">per second</span> in Demonik’s [font=Courier New]GameEngine[/font]). This is an exaggerated example, but when you’re playing on a server like GlowingDagger with a large player and aggressive NPC population, this can become a <span class="bbcode-i">very</span> arduous task for the server. And it also has that [font=Courier New]activeNpcs[/font] Vector, I’m not entirely sure why I even added that, but considering the NPCs are never properly removed once added, there’s a good chance that will hinder server performance over a long period of uptime.</p>
<p>My suggestion: move the scanner into the local [font=Courier New]Npc[/font] mob object’s [font=Courier New]updatePosition()[/font] function which is called every 600ms in [font=Courier New]GameEngine[/font] ([font=Courier New]clientUpdater.updateClients()[/font]). This is the same technique RSCDaemon used.</p>
<p>// Note: [font=Courier New]getViewedArea(int x1, int y1, int x2, int y2)[/font] in [font=Courier New]model.ViewArea[/font] must be publicized.</p>
<p>[font=Courier New]Npc.java[/font]</p>
<pre><code class="lang-auto">

    .    .    .


	/**
	 * Searches within a 2-square radius for
	 * any players that can be attacked.
	 *
	 * @return An aggressive NPC Player target.
	 */
	private Player searchForTarget()
	{
		Tile[][] tiles = getViewArea().getViewedArea(2, 2, 2, 2); // 2 is the NPC's attack radius
		
		for(int x = 0; x &lt; tiles.length; x++)
		{
			for(int y = 0; y &lt; tiles[x].length; y++)
			{
				Tile tile = tiles[x][y];
				
				if(tile != null)
				{
					for(Player pl : tile.getPlayers())
					{
						// Check if the player can be attacked, and if they're within this NPC's loc roam
						// area (with a leniency of 4 squares).
						if(pl.isBusy() || System.currentTimeMillis() - pl.getCombatTimer() &lt; 3000 ||
						   pl.getLocation().getX() &gt; getLoc().maxX() + 4 ||
						   pl.getLocation().getX() &lt; getLoc().minX() - 4 ||
						   pl.getLocation().getY() &gt; getLoc().maxY() + 4 ||
						   pl.getLocation().getY() &lt; getLoc().minY() - 4)
						continue; // Out of bounds or unattackable
						
						iif(pl.getCombatLevel() &lt; (getCombatLevel() * 2) + 1 || getLocation().inWilderness())
							return pl;
					}
				}
			}
		}
		
		return null;
	}

	/**
	 * Moves the NPC. If the NPC is aggressive, then it
	 * will perform a short scan of the tiles immediately
	 * surrounding it for players.
	 */
	public void updatePosition() 
	{
		try
		{
			if(isBusy() || inCombat()) // This NPC is already busy.
				return;
				
			// Aggressive scanning
			{
				if(getDef().isAggressive() || getLocation().inNormalWilderness()) // If NPC is aggressive and/or in wildy
				{
					Player target = null;
					
					if(System.currentTimeMillis() - getCombatTimer() &gt;= 3000 &amp;&amp; (target = searchForTarget()) != null)
					{
						world.getDelayedEventHandler().add(new com.rscd.event.AttackMobEvent(this, target));
						return; // Don't continue to regular movement.
					}
				}
			}
			// Regular movement
			{
				if(System.currentTimeMillis() - lastMovement &gt; 2500) 
				{
					if(DataConversions.random(0, 2) == 1) 
					{
						int x = DataConversions.random(loc.minX(), loc.maxX());
						int y = DataConversions.random(loc.minY(), loc.maxY());
						
						if(world.getTile(x, y).isWalkable() &amp;&amp; !world.getTile(x, y).hasGameObject() &amp;&amp; world.getTile(x, y).getNpcs().size() == 0) // If the tile is walkable and there's no npcs on it.
							setPath(x, y, new byte[0], new byte[0]);
					}
					
					super.setLastMoved();
				}
				
				super.updatePosition();
			}
		} catch(Exception e)
		{
			e.printStackTrace();
			Logger.log("Strange error with " + getDef().getName() + "'s updatePosition(): " + e.getMessage());
		}
	}


    .    .    .

</code></pre>
<p>Done. Remove [font=Courier New]npchandler.AggressiveNpcScanner[/font] and all its references from [font=Courier New]GameEngine[/font] and [font=Courier New]packethandler.WalkRequest[/font].</p>
<p>All I can be bothered to suggest today, I’ll post more during the week. Feel free to post your own efficiency improvements for other developers to consider.</p>
<p>&lt;3, punKrockeR.</p>
      </div>

      <meta itemprop='headline' content='Demonik Efficiency Improvement: For Demonik source users'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/woooooo.html'><span itemprop='name'>woooooo</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-03-17T09:28:22Z'>
            <time itemprop='dateModified' datetime='2016-07-30T20:45:54Z' class='post-time'>
              July 30, 2016,  8:45pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I was saying to people that demonik had too many unnecessary loops.  Good job on the source, and thanks for helping improve RSC servers.</p>
      </div>

      <meta itemprop='headline' content='Demonik Efficiency Improvement: For Demonik source users'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Rancid2.html'><span itemprop='name'>Rancid2</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-03-17T09:42:52Z'>
            <time itemprop='dateModified' datetime='2016-07-30T20:45:55Z' class='post-time'>
              July 30, 2016,  8:45pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Thanks, and yeah, I agree. Demonik was poorly developed because it was used as a learning tool, meaning it was generally developed using bad habits and techniques which I never really noticed or corrected until the project was finished and I started looking back over it lol. But I strongly encourage everyone to continue private RSC server development (and public development, if you wish to demonstrate your accomplishments and accept the potential risks involved). Coming from personal experience, it’s the most rewarding and most fun Java learning environment for people interested in Java game development who come from a RSC-background (and RS2 dev for people coming from a RS2 background, I guess).</p>
      </div>

      <meta itemprop='headline' content='Demonik Efficiency Improvement: For Demonik source users'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/woooooo.html'><span itemprop='name'>woooooo</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-03-17T10:01:12Z'>
            <time itemprop='dateModified' datetime='2016-07-30T20:45:56Z' class='post-time'>
              July 30, 2016,  8:45pm
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I’m currently working on a stork replica, having troubles with making a cpanel for it as I know no php at all.  But like I said, you really pushed rsc server development up there man.  I give you major kudos <img src="../../images/emoji/twitter/smiley1bce.png?v=6" title=":smiley:" class="emoji" alt=":smiley:"></p>
      </div>

      <meta itemprop='headline' content='Demonik Efficiency Improvement: For Demonik source users'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/gawdz666.html'><span itemprop='name'>gawdz666</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-03-17T10:11:13Z'>
            <time itemprop='dateModified' datetime='2019-02-19T07:32:41Z' class='post-time'>
              February 19, 2019,  7:32am
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote no-group" data-post="4" data-topic="190189">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/woooooo/40/5_6bca9977b612b7aeef77ba1ec1cd67b3.png" class="avatar"> woooooo:</div>
<blockquote>
<p>I’m currently working on a stork replica, having troubles with making a cpanel for it as I know no php at all.  But like I said, you really pushed rsc server development up there man.  I give you major kudos <img src="../../images/emoji/twitter/smiley1bce.png?v=6" title=":smiley:" class="emoji" alt=":smiley:"></p>
</blockquote>
</aside>
<p>^^</p>
      </div>

      <meta itemprop='headline' content='Demonik Efficiency Improvement: For Demonik source users'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/woooooo.html'><span itemprop='name'>woooooo</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-03-17T10:31:18Z'>
            <time itemprop='dateModified' datetime='2016-07-30T20:45:56Z' class='post-time'>
              July 30, 2016,  8:45pm
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Sorry, tommy has done all the coding so far, as he won’t let me see the source.  But I am also working on one by myself to see if I can do it.</p>
      </div>

      <meta itemprop='headline' content='Demonik Efficiency Improvement: For Demonik source users'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/xEnt.html'><span itemprop='name'>xEnt</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-03-17T11:45:28Z'>
            <time itemprop='dateModified' datetime='2016-07-30T20:46:00Z' class='post-time'>
              July 30, 2016,  8:46pm
            </time>
        <span itemprop='position'>#7</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Guys it doesn’t have to be exactly how storkpk was, im sure people wont mind an ingame NPC and not having a control panel. Its not that much difference for now.</p>
<p>Good job punKrockeR</p>
      </div>

      <meta itemprop='headline' content='Demonik Efficiency Improvement: For Demonik source users'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Peter.html'><span itemprop='name'>Peter</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-03-17T11:58:29Z'>
            <time itemprop='dateModified' datetime='2016-07-30T20:46:00Z' class='post-time'>
              July 30, 2016,  8:46pm
            </time>
        <span itemprop='position'>#8</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Great, thanks there. I’ll look into it when I get home from Uni.</p>
      </div>

      <meta itemprop='headline' content='Demonik Efficiency Improvement: For Demonik source users'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Rancid2.html'><span itemprop='name'>Rancid2</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-03-17T14:04:48Z'>
            <time itemprop='dateModified' datetime='2016-07-30T20:46:10Z' class='post-time'>
              July 30, 2016,  8:46pm
            </time>
        <span itemprop='position'>#9</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Thanks Peter. Actually, GD inspired this post, because I was annoyed at how slow AFK training was on its server due to the shit scanning system, lol.</p>
      </div>

      <meta itemprop='headline' content='Demonik Efficiency Improvement: For Demonik source users'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Stork.html'><span itemprop='name'>Stork</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-03-17T14:30:07Z'>
            <time itemprop='dateModified' datetime='2016-07-30T20:46:10Z' class='post-time'>
              July 30, 2016,  8:46pm
            </time>
        <span itemprop='position'>#10</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>ViewArea can be improved upon too. Original RSCD had a lot of unnecessary array copying, dunno if demonik is the same.</p>
      </div>

      <meta itemprop='headline' content='Demonik Efficiency Improvement: For Demonik source users'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Peter.html'><span itemprop='name'>Peter</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-03-17T20:06:09Z'>
            <time itemprop='dateModified' datetime='2016-07-30T20:46:23Z' class='post-time'>
              July 30, 2016,  8:46pm
            </time>
        <span itemprop='position'>#11</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>So far so well <img src="../../images/emoji/twitter/slight_smile1bce.png?v=6" title=":slight_smile:" class="emoji" alt=":slight_smile:"> Hope it stands.</p>
<p>Just a side note,</p>
<pre><code class="lang-auto">if(pl.getCombatLevel() &lt; (getCombatLevel() * 2) + 1 || getLocation().inWilderness())
     return pl;</code></pre>
<p>Otherwise wilderness NPCs won’t attack higher combat people (disables AFKing at axes for high levels etc).</p>
      </div>

      <meta itemprop='headline' content='Demonik Efficiency Improvement: For Demonik source users'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/D-2.html'><span itemprop='name'>D.Shark</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-03-17T21:53:49Z'>
            <time itemprop='dateModified' datetime='2016-07-30T20:46:33Z' class='post-time'>
              July 30, 2016,  8:46pm
            </time>
        <span itemprop='position'>#12</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Nicely done, didn’t expect anyone to post their methods here so this is a pretty cool selfless post.</p>
      </div>

      <meta itemprop='headline' content='Demonik Efficiency Improvement: For Demonik source users'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Vrunk.html'><span itemprop='name'>Vrunk</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-03-17T22:55:27Z'>
            <time itemprop='dateModified' datetime='2016-07-30T20:46:39Z' class='post-time'>
              July 30, 2016,  8:46pm
            </time>
        <span itemprop='position'>#13</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[size=16pt]<span class="bbcode-b">Password Encryption</span>[/size]</p>
<p><span class="bbcode-u"><br>
[size=12pt]<span class="bbcode-b">JAVA</span>[/size]</span><br>
PlayerLoader.java</p>
<p>At the top add a constant:</p>
<p><span class="bbcode-b">private static final String	AES_128_KEY	= “Your 128 bit key”;</span></p>
<p>You can always add the AES_128_KEY to be loaded from Conf.java if you wish, i just stuck the constant in playerloader for now.</p>
<p>Add:</p>
<p><code>
import javax.crypto.*;
import javax.crypto.spec.*;</code></p>
<p>Modify:</p>
<p><code>			/** Welcome details **/
			result = Server.db.getQuery("SELECT * FROM `user_credentials` " + whereSQL);
			if(!result.next() || !(p.getPassword()).equalsIgnoreCase(result.getString("pass"))) 
			{
				return 3; // Invalid username or password
			}</code><br>
To</p>
<p>[code]			/** Welcome details * */<br>
result = Server.db.getQuery("SELECT * FROM <code>user_credentials</code> " + whereSQL);<br>
if (!result.next())<br>
{<br>
return 3; // Invalid username or password<br>
}</p>
<pre><code>		/** Password Decryption * */
		Cipher cipher = Cipher.getInstance("AES");
		SecretKeySpec skeySpec = new SecretKeySpec(AES_128_KEY.getBytes(), "AES");
		cipher.init(Cipher.DECRYPT_MODE, skeySpec);
		byte[] encryptedPassword = result.getBytes("pass");
		byte[] decryptedBytes = cipher.doFinal(encryptedPassword);
		String decryptedPassword = new String(decryptedBytes);

		if (!(p.getPassword().equalsIgnoreCase(decryptedPassword)))
		{
			return 3; // Invalid username or password
		}[/code]
</code></pre>
<p><span class="bbcode-u">[size=12pt]<span class="bbcode-b">PHP</span>[/size]</span><br>
Registration.php</p>
<p>Add:<br>
<span class="bbcode-b">$AES_128_KEY = “Your 128 bit key”;</span></p>
<p>Wherever you register your player password to the database, add this instead of <span class="bbcode-b">‘$password1’</span></p>
<p><span class="bbcode-b">AES_ENCRYPT(’$password1’, ‘$AES_128_KEY’)</span></p>
<p><span class="bbcode-u">[size=12pt]<span class="bbcode-b">MySQL</span>[/size]</span><br>
Change your password field to hold “blob” variables. This is very important.</p>
<hr>
<p>Enjoy - I think I’m done with RSC development for a while, since all the servers get shut down so easily, and avoiding trademarks is a bitch. You can generate keys <a href="http://www.andrewscompanies.com/tools/wep.asp" data-bbcode="true" rel="nofollow noopener"><span class="bbcode-b">Here</span></a>, or just make them yourself.</p>
      </div>

      <meta itemprop='headline' content='Demonik Efficiency Improvement: For Demonik source users'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Peter.html'><span itemprop='name'>Peter</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-03-18T02:28:12Z'>
            <time itemprop='dateModified' datetime='2016-07-30T20:47:02Z' class='post-time'>
              July 30, 2016,  8:47pm
            </time>
        <span itemprop='position'>#14</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Few dupes that are included in the V7 source released by Alex/Punk:</p>
<ol>
<li>Type ::logout and drop an item the same time as you enter log out.</li>
<li>Xing during combat saves your account right then, but doesn’t log you out until the fight is over (still drops your items).</li>
<li>Logging in and out fast on low HP and having your mate try to attack you will result in him fighting “null” but still getting your items.</li>
<li>Sending the drop packet over and over really fast.</li>
</ol>
<p>All of these have a very simple fix.</p>
      </div>

      <meta itemprop='headline' content='Demonik Efficiency Improvement: For Demonik source users'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/FloRida.html'><span itemprop='name'>FloRida</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-03-18T02:38:55Z'>
            <time itemprop='dateModified' datetime='2016-07-30T20:47:03Z' class='post-time'>
              July 30, 2016,  8:47pm
            </time>
        <span itemprop='position'>#15</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Peter, post:14, topic:190189”]Few dupes that are included in the V7 source released by Alex/Punk:</p>
<ol>
<li>Type ::logout and drop an item the same time as you enter log out.</li>
<li>Xing during combat saves your account right then, but doesn’t log you out until the fight is over (still drops your items).</li>
<li>Logging in and out fast on low HP and having your mate try to attack you will result in him fighting “null” but still getting your items.</li>
<li>Sending the drop packet over and over really fast.</li>
</ol>
<p>All of these have a very simple fix.[/quote]<br>
nice finds <img src="../../images/emoji/twitter/slight_smile1bce.png?v=6" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
      </div>

      <meta itemprop='headline' content='Demonik Efficiency Improvement: For Demonik source users'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Peter.html'><span itemprop='name'>Peter</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-03-18T02:41:26Z'>
            <time itemprop='dateModified' datetime='2016-07-30T20:47:04Z' class='post-time'>
              July 30, 2016,  8:47pm
            </time>
        <span itemprop='position'>#16</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“FloRida, post:15, topic:190189”][quote author=Peter link=topic=253235.msg2116687#msg2116687 date=1205807292]<br>
Few dupes that are included in the V7 source released by Alex/Punk:</p>
<ol>
<li>Type ::logout and drop an item the same time as you enter log out.</li>
<li>Xing during combat saves your account right then, but doesn’t log you out until the fight is over (still drops your items).</li>
<li>Logging in and out fast on low HP and having your mate try to attack you will result in him fighting “null” but still getting your items.</li>
<li>Sending the drop packet over and over really fast.</li>
</ol>
<p>All of these have a very simple fix.</p>
<p>[/quote]<br>
nice finds :)[/quote]</p>
<p>Thanks to all the testers at GD <img src="../../images/emoji/twitter/slight_smile1bce.png?v=6" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
      </div>

      <meta itemprop='headline' content='Demonik Efficiency Improvement: For Demonik source users'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Rancid2.html'><span itemprop='name'>Rancid2</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-03-18T05:16:59Z'>
            <time itemprop='dateModified' datetime='2016-07-30T20:47:22Z' class='post-time'>
              July 30, 2016,  8:47pm
            </time>
        <span itemprop='position'>#17</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Peter, post:11, topic:190189”]So far so well <img src="../../images/emoji/twitter/slight_smile1bce.png?v=6" title=":slight_smile:" class="emoji" alt=":slight_smile:"> Hope it stands.</p>
<p>Just a side note,</p>
<pre><code class="lang-auto">if(pl.getCombatLevel() &lt; (getCombatLevel() * 2) + 1 || getLocation().inWilderness())
     return pl;</code></pre>
<p>Otherwise wilderness NPCs won’t attack higher combat people (disables AFKing at axes for high levels etc).[/quote]</p>
<p>Shit, sorry, I fixed that after posting the code and forget to update the post, thanks.</p>
<aside class="quote no-group" data-post="10" data-topic="190189">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/stork/40/5_6bca9977b612b7aeef77ba1ec1cd67b3.png" class="avatar"> Stork:</div>
<blockquote>
<p>ViewArea can be improved upon too. Original RSCD had a lot of unnecessary array copying, dunno if demonik is the same.</p>
</blockquote>
</aside>
<p>I had a look through it, I didn’t see anything that was particularly inefficient. I re-implemented caching the ViewArea:</p>
<p>[code]<br>
private Tile[][] getViewedArea(int x1, int y1, int x2, int y2)<br>
{<br>
int mobX = mob.getX();<br>
int mobY = mob.getY();</p>
<pre><code>	if(mobX == cachedX &amp;&amp; mobY == cachedY &amp;&amp; cachedViewArea != null)
	{
		System.out.println("Returning cached view area for " + (mob instanceof Player ? ((Player)mob).getUsername() : "NPC"));
		return cachedViewArea;
	} else
	{[/code]
</code></pre>
<p>And made it print out the time it took to generate a new clipped ViewArea, but it doesn’t seem to be slow at all:</p>
<blockquote>[java] Returning new view area for Rancid: took 0ms
[java] Returning cached view area for Rancid
[java] Returning cached view area for Rancid
[java] Returning cached view area for Rancid
[java] Returning cached view area for Rancid
[java] Returning cached view area for Rancid
[java] Returning cached view area for Rancid
[java] Returning cached view area for Rancid
[java] Returning cached view area for Rancid
[java] Returning cached view area for Rancid
[java] Returning cached view area for Rancid
[java] Returning cached view area for Rancid
[java] Returning cached view area for Rancid
[java] Returning cached view area for Rancid
[java] Returning new view area for Rancid: took 0ms
[java] Returning cached view area for Rancid
[java] Returning cached view area for Rancid
[java] Returning cached view area for Rancid
[java] Returning cached view area for Rancid
[java] Returning cached view area for Rancid</blockquote>
<p>So I’m not sure how much more ViewArea could be optimized and if it’s worth the trouble.</p>
      </div>

      <meta itemprop='headline' content='Demonik Efficiency Improvement: For Demonik source users'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/system.html'><span itemprop='name'>system</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-03-18T16:28:36Z'>
            <time itemprop='dateModified' datetime='2016-07-30T20:48:12Z' class='post-time'>
              July 30, 2016,  8:48pm
            </time>
        <span itemprop='position'>#18</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>It would probably be better to iterate through all Player-entities, NPC-entities or such, and check to see if they are within the referenced Players view instead. I mean, all Tiles are pretty much static, and always there, so in average it would require more loops to be done at all times, instead of just using the current amount of either Players or NPCs.</p>
<p>I find this to be a more efficient way, but I am not sure about everyone else…</p>
<p>Perhaps you can combine both methods, and use the original RSCD-way on NPCs, and the other on Players.</p>
      </div>

      <meta itemprop='headline' content='Demonik Efficiency Improvement: For Demonik source users'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Stork.html'><span itemprop='name'>Stork</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-03-19T05:35:08Z'>
            <time itemprop='dateModified' datetime='2016-07-30T20:49:45Z' class='post-time'>
              July 30, 2016,  8:49pm
            </time>
        <span itemprop='position'>#19</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>ephemeral, it might be the Sake, or it might be that you aren’t making any sense. Either way I don’t get it.</p>
<p>Rancid, nice idea with the cached viewarea, that works great if stuff around you isn’t moving - so for objects it’ll work, npcs/players I don’t see how it would.</p>
      </div>

      <meta itemprop='headline' content='Demonik Efficiency Improvement: For Demonik source users'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Rancid2.html'><span itemprop='name'>Rancid2</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-03-19T09:44:16Z'>
            <time itemprop='dateModified' datetime='2016-07-30T20:50:21Z' class='post-time'>
              July 30, 2016,  8:50pm
            </time>
        <span itemprop='position'>#20</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hmm, it wasn’t my idea, it was commented out in the original eggsampler RSCD source. I didn’t think about NPC/players, and I guess they realised after coding it and commented it out. I guess you could tap into the owner Mob’s watchedEntities.hasChanged() stuff instead of using coordinates as the cache’s decider, but it’s probably not worth the trouble considering it takes less than 1 millisecond to calculate the view area in most (if not all) cases, so the cache idea is probably useless.</p>
<p>And ephemeral, you’re saying you think the old method would be more efficient?</p>
<pre><code class="lang-auto">for(Player p : world.getPlayers())
{
    if(within2squaresOfNpc(p.getLocation())
    {
        // aggro npc handling
    }
}</code></pre>
<p>I guess it would be faster on a small scale server, but personally, I reckon it’d be faster on more populated servers to consider only the NPC’s surrounding tiles and their player entities individually like the example I posted rather than scanning the entire world, but I haven’t actually tested the performance like I did with ViewArea, so I could be wrong.</p>
<p>Whichever method people choose to use, I’d still give the AggressiveNpcScanner a brush-up since it wasn’t coded to be efficient, only to work regardless of how badly it affects performance.</p>
      </div>

      <meta itemprop='headline' content='Demonik Efficiency Improvement: For Demonik source users'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>

  <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
      <span itemprop='name'><b><a rel="next" itemprop="url" href="1901894658.html?page=2">next page →</a></b></span>
  </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/demonik-efficiency-improvement-for-demonik-source-users/190189 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 09 Aug 2019 16:53:02 GMT -->
</html>
