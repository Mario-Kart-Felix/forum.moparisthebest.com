<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/net-memory-leaks/374375 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Aug 2019 22:14:11 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>.NET - Memory Leaks - General Programming - moparisthebest.com</title>
    <meta name="description" content="Well, I was working on something with a friend last night and after testing some stuff (It was a server and after connecting 1000 bot players, I disconnected them all), he reported the server&amp;#39;s memory usage to still be v&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="374375.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;.NET - Memory Leaks&#39;" href="374375.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/net-memory-leaks/374375" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/net-memory-leaks/374375" />
<meta property="og:title" content=".NET - Memory Leaks" />
<meta name="twitter:title" content=".NET - Memory Leaks" />
<meta property="og:description" content="Well, I was working on something with a friend last night and after testing some stuff (It was a server and after connecting 1000 bot players, I disconnected them all), he reported the server’s memory usage to still be very high (This is because the buffer sizes for the players are 100K. I do not update players in parts right now because I wanted to get original player updating out of the way. Please do not point out that is bad in this topic because that isn’t what it’s about, and I already kno..." />
<meta name="twitter:description" content="Well, I was working on something with a friend last night and after testing some stuff (It was a server and after connecting 1000 bot players, I disconnected them all), he reported the server’s memory usage to still be very high (This is because the buffer sizes for the players are 100K. I do not update players in parts right now because I wanted to get original player updating out of the way. Please do not point out that is bad in this topic because that isn’t what it’s about, and I already kno..." />
<meta property="article:published_time" content="2010-12-21T23:10:02+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="374375.html">.NET - Memory Leaks</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/general-programming.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>General Programming</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Lin.html'><span itemprop='name'>Lin</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-12-21T23:10:02Z'>
            <time itemprop='dateModified' datetime='2016-08-01T01:42:45Z' class='post-time'>
              August 1, 2016,  1:42am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Well, I was working on something with a friend last night and after testing some stuff (It was a server and after connecting 1000 bot players, I disconnected them all), he reported the server’s memory usage to still be very high (This is because the buffer sizes for the players are 100K. I do not update players in parts right now because I wanted to get original player updating out of the way. Please do not point out that is bad in this topic because that isn’t what it’s about, and I already know it is).</p>
<p>When this problem occurred I thought it was because the threading was still keeping the players alive or something similar. So, I killed off the threads when their player count hit 0 (The way my server works is there is a thread for every X players that processes everything except updating) hoping that would resolve the issue. It didn’t. My friend had found an article featuring Red Gate’s Memory Profiler.</p>
<p>I gave that program a shot and it turned out, even though the players were set to null and not attempted to be used once, their i/o buffers were still existent and for some reason the GC decided to keep them that way (I’m guessing something involving the player updating had taken a role). So I guess the lesson to be learned here is even with the Garbage Collector aiding you, things may still take place even you think they didn’t. It also seems setting an object to null doesn’t always set that object’s objects to null, unless this just happened to be a special case.</p>
<p>~Lin</p>
      </div>

      <meta itemprop='headline' content='.NET - Memory Leaks'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/JaydenD12.html'><span itemprop='name'>JaydenD12</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-12-21T23:11:30Z'>
            <time itemprop='dateModified' datetime='2016-08-01T01:42:46Z' class='post-time'>
              August 1, 2016,  1:42am
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I wonder who that friend was <img src="../../images/emoji/twitter/winkae52.png?v=5" title=":wink:" class="emoji" alt=":wink:"></p>
      </div>

      <meta itemprop='headline' content='.NET - Memory Leaks'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/J_a_v_a_a.html'><span itemprop='name'>J_a_v_a_a</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-12-21T23:15:59Z'>
            <time itemprop='dateModified' datetime='2016-08-01T01:42:46Z' class='post-time'>
              August 1, 2016,  1:42am
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>The gc is just a recommendation to the garbage collector if I’m right? It doesn’t actually invoke it?</p>
      </div>

      <meta itemprop='headline' content='.NET - Memory Leaks'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/_s11.html'><span itemprop='name'>_s11</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-12-23T15:37:21Z'>
            <time itemprop='dateModified' datetime='2016-08-01T01:45:15Z' class='post-time'>
              August 1, 2016,  1:45am
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>yep more proof the clr is a load of poo</p>
      </div>

      <meta itemprop='headline' content='.NET - Memory Leaks'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/silabsoft.html'><span itemprop='name'>silabsoft</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-12-24T19:51:03Z'>
            <time itemprop='dateModified' datetime='2016-08-01T01:47:11Z' class='post-time'>
              August 1, 2016,  1:47am
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote no-group" data-post="4" data-topic="374375">
<div class="title">
<div class="quote-controls"></div>
 _s:</div>
<blockquote>
<p>yep more proof the clr is a load of poo</p>
</blockquote>
</aside>
<p><img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
      </div>

      <meta itemprop='headline' content='.NET - Memory Leaks'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/meiscooldude.html'><span itemprop='name'>meiscooldude</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-12-24T20:13:05Z'>
            <time itemprop='dateModified' datetime='2016-08-01T01:47:20Z' class='post-time'>
              August 1, 2016,  1:47am
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I would suggest looking over your code a little more carefully or perhaps having a friend look over it and try to duplicate the problem. If an object is reachable on any of the threads in the application, then GC won’t collect it. You very well could be maintaining a weak reference to one of those objects.</p>
<p>The CLR’s GC puts objects in Generations depending on how many times GC has passed through memory but not collected them. If they are in the highest Generation GC won’t check to see if they need to be collected as often as those in lower generations.</p>
<p>I would suggest looking up how exactly the CRL’s GC works and use the CLR Profiler.</p>
<p>GC Notes:<br>
<a href="http://vineetgupta.spaces.live.com/blog/cns!8DE4BDC896BEE1AD!1104.entry" class="onebox" target="_blank" rel="nofollow noopener">http://vineetgupta.spaces.live.com/blog/cns!8DE4BDC896BEE1AD!1104.entry</a></p>
<p>CLR Profiler:<br>
<a href="http://msdn.microsoft.com/en-us/library/ff650691.aspx#scalenethowto13_topic6" class="onebox" target="_blank" rel="nofollow noopener">http://msdn.microsoft.com/en-us/library/ff650691.aspx#scalenethowto13_topic6</a></p>
      </div>

      <meta itemprop='headline' content='.NET - Memory Leaks'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/net-memory-leaks/374375 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Aug 2019 22:14:12 GMT -->
</html>
