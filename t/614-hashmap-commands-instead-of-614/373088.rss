<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>[614] Hashmap Commands/ :: Instead of ` [614]</title>
    <link>https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088</link>
    <description>Okay So Today i will be teaching you how to create hashmap based commands, aswell as making players require :: instead of ` to use commands.

Firstly, Open up packetsjava and search for:
[CODE]	/*
	 * Chat
	 */[/CODE]

You&#39;ll see something like this:
[CODE]	/*
	 * Chat
	 */
	@SuppressWarnings(&quot;unused&quot;)
	private static void PacketId_25(InStream Packet, int Size, Player p) {
		int effects = Packet.readUnsignedShort();
		int numChars = Packet.readUnsignedByte();
		if (numChars &gt; 100 || numChars &lt; 0 || effects &lt; 0)
			return;
		String text = Misc.decryptPlayerChat(Packet, numChars);
		if (text == null || text.equals(&quot;&quot;))
			return;
		StringBuilder newText = new StringBuilder();
		boolean wasSpace = true;
		for (int i = 0; i &lt; text.length(); i++) {
			if (wasSpace) {
				newText.append((&quot;&quot; + text.charAt(i)).toUpperCase());
				if (!String.valueOf(text.charAt(i)).equals(&quot; &quot;))
					wasSpace = false;
			} else
				newText.append((&quot;&quot; + text.charAt(i)).toLowerCase());
			if (String.valueOf(text.charAt(i)).contains(&quot;.&quot;)
					|| String.valueOf(text.charAt(i)).contains(&quot;!&quot;)
					|| String.valueOf(text.charAt(i)).contains(&quot;?&quot;))
				wasSpace = true;
		}
		text = newText.toString();
		if(text.startsWith(&quot;::&quot;)) {
			text = text.replaceAll(&quot;::&quot;, &quot;&quot;);
			CommandHandler.executeCommand(p, text);
			return;
		}
		if(text.startsWith(&quot;/&quot;)) {
			text = text.replace(&quot;/&quot;, &quot;&quot;);
			p.getFrames().sendClanMessage(p.getUsername(), p.getDisplayName(), text, p.getRights());
			return;
		}
		p.getMask()
				.setLastChatMessage(new ChatMessage(effects, numChars, text));
		p.getMask().setChatUpdate(true);
	}
[/CODE]

Replace that method with this one:
[CODE]	/*
	 * Chat
	 */
	@SuppressWarnings(&quot;unused&quot;)
	private static void PacketId_25(InStream Packet, int Size, Player p) {
		
		int effects = Packet.readUnsignedShort();
		int numChars = Packet.readUnsignedByte();
		if(numChars &gt; 100 || numChars &lt; 0 || effects &lt; 0)
			return;
		String text = Misc.decryptPlayerChat(Packet, numChars);
		if(text.startsWith(&quot;::&quot;) || text.startsWith(&quot;&gt;&gt;&quot;)) {
			handleCommand(text, p);
			return;
		}
		if(p.isMuted() &amp;&amp; p.getRights() &lt; 2) {
			p.getFrames().sendChatMessage(0, &quot;You are muted and cannot talk.&quot;);
			return;
		}
		if(text == null || text.equals(&quot;&quot;))
			return;
		StringBuilder newText = new StringBuilder();
		boolean wasSpace = true;
		for (int i = 0; i &lt; text.length(); i++) {
			if (wasSpace) {
				newText.append((&quot;&quot; + text.charAt(i)).toUpperCase());
				if (!String.valueOf(text.charAt(i)).equals(&quot; &quot;))
					wasSpace = false;
			} else
				newText.append((&quot;&quot; + text.charAt(i)).toLowerCase());
			if (String.valueOf(text.charAt(i)).contains(&quot;.&quot;)
					|| String.valueOf(text.charAt(i)).contains(&quot;!&quot;)
					|| String.valueOf(text.charAt(i)).contains(&quot;?&quot;))
				wasSpace = true;
		}
		text = newText.toString();
		p.getMask()
				.setLastChatMessage(new ChatMessage(effects, numChars, text));
		p.getMask().setChatUpdate(true);
	}
	
	public static void handleCommand(String command, Player p) {
		command = command.replaceAll(&quot;::&quot;, &quot;&quot;);
		String[] cmd = command.split(&quot; &quot;);
		CommandManager.execute(cmd, p);
		
	}[/CODE]
By doing so, Your making it so :: is required for normal players and ` will no longer do anything

Now Onto The Difficult Part...
--------------------------------------------------------------------------
Firstly Make a new class in src/net called Commands.java And Put This In It:
[CODE]package dragonkk.rs2rsps.net;

import dragonkk.rs2rsps.model.player.Player;

public interface Command {
	
	public void execute(String[] args, Player p);
[/CODE]

For the sake of this, We&#39;re going to use the Home command as a base.
Now Make A new class called CommandManager.java and put this in it:
[CODE]package dragonkk.rs2rsps.net;

import java.util.HashMap;
import java.util.Map;

import dragonkk.rs2rsps.model.player.Player;
import dragonkk.rs2rsps.net.commands.Home;
import dragonkk.rs2rsps.util.Logger;


public class CommandManager {
	
	/*
	 * A hashmap holding the commands
	 */
	private static final Map&lt;String, Command&gt; COMMANDS = new HashMap&lt;String, Command&gt;();
	
	/*
	 * Constructor
	 */
	public CommandManager() {
		COMMANDS.put(&quot;home&quot;, new Home());
		Logger.log(&quot;CommandHandler&quot;, &quot;Sucessfully loaded: &quot;+COMMANDS.size()+&quot; commands.&quot;);
	}
	
	/*
	 * Executes the command
	 */
	public static void execute(String args[], Player p) {
		try {
			Command command = COMMANDS.get(args[0]);
			command.execute(args, p);
		} catch(Exception e) {
			p.getFrames().sendChatMessage(0, &quot;Error while processing command.&quot;);
			//e.printStackTrace();
		}
	}

}
[/CODE]
[b]Explaining The Code:[/b] This is requesting the imports and Declaring which commands will be used.

Now in Src/Net Make a new folder called &quot;commands&quot;
Make a new class called Home.java
And Put this inside:
[CODE]package dragonkk.rs2rsps.net.commands;

import dragonkk.rs2rsps.Server;
import dragonkk.rs2rsps.events.GameLogicTask;
import dragonkk.rs2rsps.events.GameLogicTaskManager;
import dragonkk.rs2rsps.model.player.Player;
import dragonkk.rs2rsps.net.Command;

public class Home implements Command {

	@Override
	public void execute(String[] args, final Player p) {
		if(p.getSkills().isDead())
			return;
		p.getCombatDefinitions().doEmote(8939, 1576, 4200);
		GameLogicTaskManager.schedule(new GameLogicTask() {
			int count = 0;
			@Override
			public void run() {
				if(!p.isOnline()) {
					this.stop();
					return;
				}
				if(count++ == 0)
					p.getMask().getRegion().teleport(coord X, coord Y, 0, 0);
				else {
					p.animate(8941);
					p.graphics(1577);
					this.stop();
				}
			}
		}, 3, 0, 0);
	}

}
[/CODE]
[b]Explaining The Code:[/b] This Command is implementing the HashMap so that you will do the requested action upon using the command.

Now finally, Open up Server.java and Under
[CODE]import dragonkk.rs2rsps.net.Packets;[/CODE]
Add
[CODE]import dragonkk.rs2rsps.net.CommandManager;[/CODE]

Then under
[CODE]		Logger.log(this, &quot;Starting loading Cache...&quot;);
		new Cache();[/CODE]
 Add
[CODE]		Logger.log(this, &quot;Loading commands...&quot;);
		setCommandManager1(new CommandManager());[/CODE]

And Finally under
[CODE]	public static TaskManager getEntityExecutor() {
		return entityExecutor;
	}[/CODE]

Add
[CODE]	/**
	 * @param commandManager the commandManager to set
	 */
	public static void setCommandManager(CommandManager commandManager) {
		Server.commandManager = commandManager;
	}

	/**
	 * @return the commandManager
	 */
	public static CommandManager getCommandManager() {
		return commandManager;
	}
}[/CODE]
[b]Explaining The Code:[/b] This is basically just allowing your server to load the commands on start up




Feel free to ask questions, post concerns, or PM me about anything else!
Hope I helped :)</description>
    
    <lastBuildDate>Mon, 29 Aug 2011 17:30:39 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>[614] Hashmap Commands/ :: Instead of ` [614]</title>
        <dc:creator><![CDATA[@I_Roll_Deep I Roll Deep]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/i_roll_deep">@I_Roll_Deep</a> wrote:</p>
          <blockquote>
              <p>[quote=“adamcook9162, post:19, topic:373088”]Compiling…<br>
src\dragonkk\rs2rsps\Server.java:66: class, interface, or enum expected<br>
}→<br>
^<br>
1 error<br>
Complete.<br>
Press any key to continue . . .</p>
<p>so close plz help[/quote]<br>
missing a bracket?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088/23">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088/23</link>
        <pubDate>Mon, 29 Aug 2011 17:30:39 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-373088-23</guid>
        <source url="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088.rss">[614] Hashmap Commands/ :: Instead of ` [614]</source>
      </item>
      <item>
        <title>[614] Hashmap Commands/ :: Instead of ` [614]</title>
        <dc:creator><![CDATA[@Ecstacy_Pkz Ecstacy Pkz]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ecstacy_pkz">@Ecstacy_Pkz</a> wrote:</p>
          <blockquote>
              <p>No, this is strictly 614 DEOB</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088/22">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088/22</link>
        <pubDate>Mon, 29 Aug 2011 16:07:07 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-373088-22</guid>
        <source url="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088.rss">[614] Hashmap Commands/ :: Instead of ` [614]</source>
      </item>
      <item>
        <title>[614] Hashmap Commands/ :: Instead of ` [614]</title>
        <dc:creator><![CDATA[@emtrescue emtrescue]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/emtrescue">@emtrescue</a> wrote:</p>
          <blockquote>
              <p>this was already bumped up before i posted.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088/21">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088/21</link>
        <pubDate>Thu, 23 Jun 2011 05:55:22 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-373088-21</guid>
        <source url="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088.rss">[614] Hashmap Commands/ :: Instead of ` [614]</source>
      </item>
      <item>
        <title>[614] Hashmap Commands/ :: Instead of ` [614]</title>
        <dc:creator><![CDATA[@emtrescue emtrescue]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/emtrescue">@emtrescue</a> wrote:</p>
          <blockquote>
              <p>pretty neat can u find this for pi/delta to? lol</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088/20">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088/20</link>
        <pubDate>Thu, 23 Jun 2011 05:48:51 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-373088-20</guid>
        <source url="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088.rss">[614] Hashmap Commands/ :: Instead of ` [614]</source>
      </item>
      <item>
        <title>[614] Hashmap Commands/ :: Instead of ` [614]</title>
        <dc:creator><![CDATA[@adamcook9162 adamcook9162]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/adamcook9162">@adamcook9162</a> wrote:</p>
          <blockquote>
              <p>Compiling…<br>
src\dragonkk\rs2rsps\Server.java:66: class, interface, or enum expected<br>
}→<br>
^<br>
1 error<br>
Complete.<br>
Press any key to continue . . .</p>
<p>so close plz help</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088/19">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088/19</link>
        <pubDate>Thu, 23 Jun 2011 04:00:39 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-373088-19</guid>
        <source url="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088.rss">[614] Hashmap Commands/ :: Instead of ` [614]</source>
      </item>
      <item>
        <title>[614] Hashmap Commands/ :: Instead of ` [614]</title>
        <dc:creator><![CDATA[@Alec_XI Alec XI]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/alec_xi">@Alec_XI</a> wrote:</p>
          <blockquote>
              <p>[quote=“Davidi2, post:9, topic:373088”]A new class for every command… wow</p>
<p>Also, having to put() every command into the hashmap on initialization, bleh.</p>
<p>Something you could do is have the class names match up to the command (you’d have to format the first part of the command to follow conventions)</p>
<p><code>	static Command getClass(String name) {
		try {
			return (Command)Class.forName("yourpackagesetc." + name).newInstance();
		} catch (Exception e) {
			e.printStackTrace();
			p.getFrames().sendChatMessage(0, "Command not found.");
		}
		return null;
	}</code>[/quote]</p>
<p>I think a new class for one command makes it better looking.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088/18">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088/18</link>
        <pubDate>Wed, 22 Dec 2010 20:40:15 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-373088-18</guid>
        <source url="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088.rss">[614] Hashmap Commands/ :: Instead of ` [614]</source>
      </item>
      <item>
        <title>[614] Hashmap Commands/ :: Instead of ` [614]</title>
        <dc:creator><![CDATA[@Baneful Baneful]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/baneful">@Baneful</a> wrote:</p>
          <blockquote>
              <p>src\dragonkk\rs2rsps\CommandManager.java:1: reached end of file while parsing<br>
package <a href="http://dragonkk.rs2rsps.net" rel="nofollow noopener">dragonkk.rs2rsps.net</a>;import java.util.HashMap;import java.util.Map;impor<br>
t dragonkk.rs2rsps.model.player.Player;import dragonkk.rs2rsps.net.commands.Home<br>
;import dragonkk.rs2rsps.util.Logger;public class CommandManager {<br>
/*         * A hashmap holding the commands         <em>/        private static f<br>
inal Map&lt;String, Command&gt; COMMANDS = new HashMap&lt;String, Command&gt;();<br>
/</em>         * Constructor         <em>/        public CommandManager() {<br>
COMMANDS.put(“home”, new Home());                Logger.log(“CommandHand<br>
ler”, “Sucessfully loaded: “+COMMANDS.size()+” commands.”);        }<br>
/</em>         * Executes the command         */        public static void execu<br>
te(String args[], Player p) {                try {                        Comman<br>
d command = COMMANDS.get(args[0]);                        command.execute(args,<br>
p);                } catch(Exception e) {                        p.getFrames().s<br>
endChatMessage(0, “Error while processing command.”);                        //e<br>
.printStackTrace();                }        }}→</p>
<pre><code>                                                 ^
</code></pre>
<p>src\dragonkk\rs2rsps\CommandManager.java:1: reached end of file while parsing<br>
package <a href="http://dragonkk.rs2rsps.net" rel="nofollow noopener">dragonkk.rs2rsps.net</a>;import java.util.HashMap;import java.util.Map;impor<br>
t dragonkk.rs2rsps.model.player.Player;import dragonkk.rs2rsps.net.commands.Home<br>
;import dragonkk.rs2rsps.util.Logger;public class CommandManager {<br>
/*         * A hashmap holding the commands         <em>/        private static f<br>
inal Map&lt;String, Command&gt; COMMANDS = new HashMap&lt;String, Command&gt;();<br>
/</em>         * Constructor         <em>/        public CommandManager() {<br>
COMMANDS.put(“home”, new Home());                Logger.log(“CommandHand<br>
ler”, “Sucessfully loaded: “+COMMANDS.size()+” commands.”);        }<br>
/</em>         * Executes the command         */        public static void execu<br>
te(String args[], Player p) {                try {                        Comman<br>
d command = COMMANDS.get(args[0]);                        command.execute(args,<br>
p);                } catch(Exception e) {                        p.getFrames().s<br>
endChatMessage(0, “Error while processing command.”);                        //e<br>
.printStackTrace();                }        }}→</p>
<pre><code>                                          ^
</code></pre>
<p>src\dragonkk\rs2rsps\Commands.java:1: reached end of file while parsing<br>
package <a href="http://dragonkk.rs2rsps.net" rel="nofollow noopener">dragonkk.rs2rsps.net</a>;import dragonkk.rs2rsps.model.player.Player;public<br>
interface Command {                public void execute(String[] args, Player p);</p>
<p>^<br>
src\dragonkk\rs2rsps\Server.java:85: class, interface, or enum expected<br>
public static void executeBlocking(Runnable r) {<br>
^<br>
src\dragonkk\rs2rsps\Server.java:87: class, interface, or enum expected<br>
}<br>
^<br>
src\dragonkk\rs2rsps\Server.java:89: class, interface, or enum expected<br>
public Executor getBlockingExecutor() {<br>
^<br>
src\dragonkk\rs2rsps\Server.java:91: class, interface, or enum expected<br>
}<br>
^<br>
7 errors<br>
Press any key to continue . . .</p>
<p><img src="https://forum.moparisthebest.com/images/emoji/twitter/confused.png?v=5" title=":confused:" class="emoji" alt=":confused:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088/17">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088/17</link>
        <pubDate>Sun, 19 Dec 2010 18:06:05 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-373088-17</guid>
        <source url="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088.rss">[614] Hashmap Commands/ :: Instead of ` [614]</source>
      </item>
      <item>
        <title>[614] Hashmap Commands/ :: Instead of ` [614]</title>
        <dc:creator><![CDATA[@Mendorphins Mendorphins]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/mendorphins">@Mendorphins</a> wrote:</p>
          <blockquote>
              <p>[quote=“Rigsy, post:15, topic:373088”]Wow now because of your tutorial my compile is screwed. Take a look<br>
<img src="http://i958.photobucket.com/albums/ae65/Rigsy_2010/Untitled-1.png" alt width="677" height="335">[/quote]</p>
<p>No, it’s because of you. Re-check your code.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088/16">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088/16</link>
        <pubDate>Fri, 17 Dec 2010 21:05:42 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-373088-16</guid>
        <source url="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088.rss">[614] Hashmap Commands/ :: Instead of ` [614]</source>
      </item>
      <item>
        <title>[614] Hashmap Commands/ :: Instead of ` [614]</title>
        <dc:creator><![CDATA[@Rigsy Rigsy]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/rigsy">@Rigsy</a> wrote:</p>
          <blockquote>
              <p>Wow now because of your tutorial my compile is screwed. Take a look<br>
<img src="http://i958.photobucket.com/albums/ae65/Rigsy_2010/Untitled-1.png" alt width="677" height="335"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088/15">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088/15</link>
        <pubDate>Fri, 17 Dec 2010 15:33:03 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-373088-15</guid>
        <source url="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088.rss">[614] Hashmap Commands/ :: Instead of ` [614]</source>
      </item>
      <item>
        <title>[614] Hashmap Commands/ :: Instead of ` [614]</title>
        <dc:creator><![CDATA[@Ecstacy_Pkz Ecstacy Pkz]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ecstacy_pkz">@Ecstacy_Pkz</a> wrote:</p>
          <blockquote>
              <p>[quote=“Davidi2, post:13, topic:373088”][quote author=jmood128 link=topic=469107.msg3430605#msg3430605 date=1292295937]<br>
wouldn’t an ArrayList be better here?<br>
[/quote]No, the hashmap allows him to call the command class by it’s actual name[/quote]</p>
<p>Yes Sir <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088/14">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088/14</link>
        <pubDate>Tue, 14 Dec 2010 03:12:24 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-373088-14</guid>
        <source url="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088.rss">[614] Hashmap Commands/ :: Instead of ` [614]</source>
      </item>
      <item>
        <title>[614] Hashmap Commands/ :: Instead of ` [614]</title>
        <dc:creator><![CDATA[@davidi2 Davidi2]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/davidi2">@davidi2</a> wrote:</p>
          <blockquote>
              <p>[quote=“jmood128, post:12, topic:373088”]wouldn’t an ArrayList be better here?[/quote]No, the hashmap allows him to call the command class by it’s actual name</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088/13">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088/13</link>
        <pubDate>Tue, 14 Dec 2010 03:06:52 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-373088-13</guid>
        <source url="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088.rss">[614] Hashmap Commands/ :: Instead of ` [614]</source>
      </item>
      <item>
        <title>[614] Hashmap Commands/ :: Instead of ` [614]</title>
        <dc:creator><![CDATA[@doom_j doom_j]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/doom_j">@doom_j</a> wrote:</p>
          <blockquote>
              <p>wouldn’t an ArrayList be better here?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088/12">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088/12</link>
        <pubDate>Tue, 14 Dec 2010 03:05:37 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-373088-12</guid>
        <source url="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088.rss">[614] Hashmap Commands/ :: Instead of ` [614]</source>
      </item>
      <item>
        <title>[614] Hashmap Commands/ :: Instead of ` [614]</title>
        <dc:creator><![CDATA[@Ecstacy_Pkz Ecstacy Pkz]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ecstacy_pkz">@Ecstacy_Pkz</a> wrote:</p>
          <blockquote>
              <p>I only really made this tutorial cause I was bored lol.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088/11">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088/11</link>
        <pubDate>Tue, 14 Dec 2010 03:00:15 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-373088-11</guid>
        <source url="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088.rss">[614] Hashmap Commands/ :: Instead of ` [614]</source>
      </item>
      <item>
        <title>[614] Hashmap Commands/ :: Instead of ` [614]</title>
        <dc:creator><![CDATA[@Pure_Slay Pure Slay]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/pure_slay">@Pure_Slay</a> wrote:</p>
          <blockquote>
              <p>Just rip what i did for Insomnia… it works basically the same, but all the commands are in one file.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088/10</link>
        <pubDate>Mon, 13 Dec 2010 23:50:48 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-373088-10</guid>
        <source url="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088.rss">[614] Hashmap Commands/ :: Instead of ` [614]</source>
      </item>
      <item>
        <title>[614] Hashmap Commands/ :: Instead of ` [614]</title>
        <dc:creator><![CDATA[@davidi2 Davidi2]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/davidi2">@davidi2</a> wrote:</p>
          <blockquote>
              <p>A new class for every command… wow</p>
<p>Also, having to put() every command into the hashmap on initialization, bleh.</p>
<p>Something you could do is have the class names match up to the command (you’d have to format the first part of the command to follow conventions)</p>
<p><code>	static Command getClass(String name) {
		try {
			return (Command)Class.forName("yourpackagesetc." + name).newInstance();
		} catch (Exception e) {
			e.printStackTrace();
			p.getFrames().sendChatMessage(0, "Command not found.");
		}
		return null;
	}</code></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088/9</link>
        <pubDate>Mon, 13 Dec 2010 18:57:18 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-373088-9</guid>
        <source url="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088.rss">[614] Hashmap Commands/ :: Instead of ` [614]</source>
      </item>
      <item>
        <title>[614] Hashmap Commands/ :: Instead of ` [614]</title>
        <dc:creator><![CDATA[@Mendorphins Mendorphins]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/mendorphins">@Mendorphins</a> wrote:</p>
          <blockquote>
              <aside class="quote no-group" data-post="7" data-topic="373088">
<div class="title">
<div class="quote-controls"></div>
 Don Paul:</div>
<blockquote>
<p>How do i make .class file?</p>
</blockquote>
</aside>
<p>New Text Document &gt; Save As &gt; All Files (not *.txt) and then save it as FileNameHere.java.</p>
<p>Compile it and it creates a .class.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088/8</link>
        <pubDate>Mon, 13 Dec 2010 18:54:33 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-373088-8</guid>
        <source url="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088.rss">[614] Hashmap Commands/ :: Instead of ` [614]</source>
      </item>
      <item>
        <title>[614] Hashmap Commands/ :: Instead of ` [614]</title>
        <dc:creator><![CDATA[@Don_Paul Don Paul]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/don_paul">@Don_Paul</a> wrote:</p>
          <blockquote>
              <p>How do i make .class file?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088/7</link>
        <pubDate>Mon, 13 Dec 2010 17:29:59 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-373088-7</guid>
        <source url="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088.rss">[614] Hashmap Commands/ :: Instead of ` [614]</source>
      </item>
      <item>
        <title>[614] Hashmap Commands/ :: Instead of ` [614]</title>
        <dc:creator><![CDATA[@Ecstacy_Pkz Ecstacy Pkz]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ecstacy_pkz">@Ecstacy_Pkz</a> wrote:</p>
          <blockquote>
              <p>Lol no idea <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"> taking down poll roflz</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088/6</link>
        <pubDate>Mon, 13 Dec 2010 04:01:06 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-373088-6</guid>
        <source url="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088.rss">[614] Hashmap Commands/ :: Instead of ` [614]</source>
      </item>
      <item>
        <title>[614] Hashmap Commands/ :: Instead of ` [614]</title>
        <dc:creator><![CDATA[@Scape-JAVA Scape-JAVA]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/scape-java">@Scape-JAVA</a> wrote:</p>
          <blockquote>
              <p>Question, why would you want a sticky for using hashmaps in a command?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088/5</link>
        <pubDate>Mon, 13 Dec 2010 03:58:45 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-373088-5</guid>
        <source url="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088.rss">[614] Hashmap Commands/ :: Instead of ` [614]</source>
      </item>
      <item>
        <title>[614] Hashmap Commands/ :: Instead of ` [614]</title>
        <dc:creator><![CDATA[@Ecstacy_Pkz Ecstacy Pkz]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ecstacy_pkz">@Ecstacy_Pkz</a> wrote:</p>
          <blockquote>
              <p>I know this is for normal players only.<br>
Still haven’t figured out how to change for admin’s yet <img src="https://forum.moparisthebest.com/images/emoji/twitter/confused.png?v=5" title=":confused:" class="emoji" alt=":confused:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088/4</link>
        <pubDate>Mon, 13 Dec 2010 03:55:40 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-373088-4</guid>
        <source url="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088.rss">[614] Hashmap Commands/ :: Instead of ` [614]</source>
      </item>
      <item>
        <title>[614] Hashmap Commands/ :: Instead of ` [614]</title>
        <dc:creator><![CDATA[@ry60003333 ry60003333]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ry60003333">@ry60003333</a> wrote:</p>
          <blockquote>
              <p>This will not work for Administrators, because when they try to type a ::command they will receive this error:<br>
<div class="lightbox-wrapper"><a class="lightbox" href="http://www.allgofree.org/blitz/pics/614_admin_commands.png" title="614_admin_commands.png" rel="nofollow noopener"><img src="http://www.allgofree.org/blitz/pics/614_admin_commands.png" alt width="690" height="494"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use xlink:href="#far-image"></use></svg><span class="filename">614_admin_commands.png</span><span class="informations">847×607</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088/3</link>
        <pubDate>Mon, 13 Dec 2010 03:50:34 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-373088-3</guid>
        <source url="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088.rss">[614] Hashmap Commands/ :: Instead of ` [614]</source>
      </item>
      <item>
        <title>[614] Hashmap Commands/ :: Instead of ` [614]</title>
        <dc:creator><![CDATA[@deathschaos9 DeathsChaos9]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/deathschaos9">@deathschaos9</a> wrote:</p>
          <blockquote>
              <p>Please explain your code.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088/2</link>
        <pubDate>Mon, 13 Dec 2010 03:39:29 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-373088-2</guid>
        <source url="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088.rss">[614] Hashmap Commands/ :: Instead of ` [614]</source>
      </item>
      <item>
        <title>[614] Hashmap Commands/ :: Instead of ` [614]</title>
        <dc:creator><![CDATA[@Ecstacy_Pkz Ecstacy Pkz]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ecstacy_pkz">@Ecstacy_Pkz</a> wrote:</p>
          <blockquote>
              <p>Okay So Today i will be teaching you how to create hashmap based commands, aswell as making players require :: instead of ` to use commands.</p>
<p>Firstly, Open up packetsjava and search for:</p>
<p><code>	/*
	 * Chat
	 */</code></p>
<p>You’ll see something like this:</p>
<p><code>	/*
	 * Chat
	 */
	@SuppressWarnings("unused")
	private static void PacketId_25(InStream Packet, int Size, Player p) {
		int effects = Packet.readUnsignedShort();
		int numChars = Packet.readUnsignedByte();
		if (numChars &gt; 100 || numChars &lt; 0 || effects &lt; 0)
			return;
		String text = Misc.decryptPlayerChat(Packet, numChars);
		if (text == null || text.equals(""))
			return;
		StringBuilder newText = new StringBuilder();
		boolean wasSpace = true;
		for (int i = 0; i &lt; text.length(); i++) {
			if (wasSpace) {
				newText.append(("" + text.charAt(i)).toUpperCase());
				if (!String.valueOf(text.charAt(i)).equals(" "))
					wasSpace = false;
			} else
				newText.append(("" + text.charAt(i)).toLowerCase());
			if (String.valueOf(text.charAt(i)).contains(".")
					|| String.valueOf(text.charAt(i)).contains("!")
					|| String.valueOf(text.charAt(i)).contains("?"))
				wasSpace = true;
		}
		text = newText.toString();
		if(text.startsWith("::")) {
			text = text.replaceAll("::", "");
			CommandHandler.executeCommand(p, text);
			return;
		}
		if(text.startsWith("/")) {
			text = text.replace("/", "");
			p.getFrames().sendClanMessage(p.getUsername(), p.getDisplayName(), text, p.getRights());
			return;
		}
		p.getMask()
				.setLastChatMessage(new ChatMessage(effects, numChars, text));
		p.getMask().setChatUpdate(true);
	}
</code></p>
<p>Replace that method with this one:</p>
<p>[CODE]	/*<br>
* Chat<br>
*/<br>
<span class="mention">@SuppressWarnings</span>(“unused”)<br>
private static void PacketId_25(InStream Packet, int Size, Player p) {</p>
<pre><code>	int effects = Packet.readUnsignedShort();
	int numChars = Packet.readUnsignedByte();
	if(numChars &gt; 100 || numChars &lt; 0 || effects &lt; 0)
		return;
	String text = Misc.decryptPlayerChat(Packet, numChars);
	if(text.startsWith("::") || text.startsWith("&gt;&gt;")) {
		handleCommand(text, p);
		return;
	}
	if(p.isMuted() &amp;&amp; p.getRights() &lt; 2) {
		p.getFrames().sendChatMessage(0, "You are muted and cannot talk.");
		return;
	}
	if(text == null || text.equals(""))
		return;
	StringBuilder newText = new StringBuilder();
	boolean wasSpace = true;
	for (int i = 0; i &lt; text.length(); i++) {
		if (wasSpace) {
			newText.append(("" + text.charAt(i)).toUpperCase());
			if (!String.valueOf(text.charAt(i)).equals(" "))
				wasSpace = false;
		} else
			newText.append(("" + text.charAt(i)).toLowerCase());
		if (String.valueOf(text.charAt(i)).contains(".")
				|| String.valueOf(text.charAt(i)).contains("!")
				|| String.valueOf(text.charAt(i)).contains("?"))
			wasSpace = true;
	}
	text = newText.toString();
	p.getMask()
			.setLastChatMessage(new ChatMessage(effects, numChars, text));
	p.getMask().setChatUpdate(true);
}

public static void handleCommand(String command, Player p) {
	command = command.replaceAll("::", "");
	String[] cmd = command.split(" ");
	CommandManager.execute(cmd, p);
	
}[/CODE]
</code></pre>
<p>By doing so, Your making it so :: is required for normal players and ` will no longer do anything</p>
<h2>Now Onto The Difficult Part…</h2>
<p>Firstly Make a new class in src/net called Commands.java And Put This In It:</p>
<p>[CODE]package <a href="http://dragonkk.rs2rsps.net" rel="nofollow noopener">dragonkk.rs2rsps.net</a>;</p>
<p>import dragonkk.rs2rsps.model.player.Player;</p>
<p>public interface Command {</p>
<pre><code>public void execute(String[] args, Player p);
</code></pre>
<p>[/CODE]</p>
<p>For the sake of this, We’re going to use the Home command as a base.<br>
Now Make A new class called CommandManager.java and put this in it:</p>
<p>[CODE]package <a href="http://dragonkk.rs2rsps.net" rel="nofollow noopener">dragonkk.rs2rsps.net</a>;</p>
<p>import java.util.HashMap;<br>
import java.util.Map;</p>
<p>import dragonkk.rs2rsps.model.player.Player;<br>
import dragonkk.rs2rsps.net.commands.Home;<br>
import dragonkk.rs2rsps.util.Logger;</p>
<p>public class CommandManager {</p>
<pre><code>/*
 * A hashmap holding the commands
 */
private static final Map&lt;String, Command&gt; COMMANDS = new HashMap&lt;String, Command&gt;();

/*
 * Constructor
 */
public CommandManager() {
	COMMANDS.put("home", new Home());
	Logger.log("CommandHandler", "Sucessfully loaded: "+COMMANDS.size()+" commands.");
}

/*
 * Executes the command
 */
public static void execute(String args[], Player p) {
	try {
		Command command = COMMANDS.get(args[0]);
		command.execute(args, p);
	} catch(Exception e) {
		p.getFrames().sendChatMessage(0, "Error while processing command.");
		//e.printStackTrace();
	}
}
</code></pre>
<p>}<br>
[/CODE]<br>
<span class="bbcode-b">Explaining The Code:</span> This is requesting the imports and Declaring which commands will be used.</p>
<p>Now in Src/Net Make a new folder called “commands”<br>
Make a new class called Home.java<br>
And Put this inside:</p>
<p>[CODE]package dragonkk.rs2rsps.net.commands;</p>
<p>import dragonkk.rs2rsps.Server;<br>
import dragonkk.rs2rsps.events.GameLogicTask;<br>
import dragonkk.rs2rsps.events.GameLogicTaskManager;<br>
import dragonkk.rs2rsps.model.player.Player;<br>
import dragonkk.rs2rsps.net.Command;</p>
<p>public class Home implements Command {</p>
<pre><code>@Override
public void execute(String[] args, final Player p) {
	if(p.getSkills().isDead())
		return;
	p.getCombatDefinitions().doEmote(8939, 1576, 4200);
	GameLogicTaskManager.schedule(new GameLogicTask() {
		int count = 0;
		@Override
		public void run() {
			if(!p.isOnline()) {
				this.stop();
				return;
			}
			if(count++ == 0)
				p.getMask().getRegion().teleport(coord X, coord Y, 0, 0);
			else {
				p.animate(8941);
				p.graphics(1577);
				this.stop();
			}
		}
	}, 3, 0, 0);
}
</code></pre>
<p>}<br>
[/CODE]<br>
<span class="bbcode-b">Explaining The Code:</span> This Command is implementing the HashMap so that you will do the requested action upon using the command.</p>
<p>Now finally, Open up Server.java and Under</p>
<pre><code class="lang-auto">import dragonkk.rs2rsps.net.Packets;</code></pre>
<p>Add</p>
<pre><code class="lang-auto">import dragonkk.rs2rsps.net.CommandManager;</code></pre>
<p>Then under</p>
<p><code>		Logger.log(this, "Starting loading Cache...");
		new Cache();</code><br>
Add</p>
<p><code>		Logger.log(this, "Loading commands...");
		setCommandManager1(new CommandManager());</code></p>
<p>And Finally under</p>
<p><code>	public static TaskManager getEntityExecutor() {
		return entityExecutor;
	}</code></p>
<p>Add</p>
<p>[CODE]	/**<br>
* <a class="mention" href="/u/param">@param</a> commandManager the commandManager to set<br>
*/<br>
public static void setCommandManager(CommandManager commandManager) {<br>
Server.commandManager = commandManager;<br>
}</p>
<pre><code>/**
 * @return the commandManager
 */
public static CommandManager getCommandManager() {
	return commandManager;
}
</code></pre>
<p>}[/CODE]<br>
<span class="bbcode-b">Explaining The Code:</span> This is basically just allowing your server to load the commands on start up</p>
<p>Feel free to ask questions, post concerns, or PM me about anything else!<br>
Hope I helped <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088/1</link>
        <pubDate>Mon, 13 Dec 2010 03:11:33 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-373088-1</guid>
        <source url="https://forum.moparisthebest.com/t/614-hashmap-commands-instead-of-614/373088.rss">[614] Hashmap Commands/ :: Instead of ` [614]</source>
      </item>
  </channel>
</rss>
