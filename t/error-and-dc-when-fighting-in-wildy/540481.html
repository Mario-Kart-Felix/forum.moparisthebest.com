<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/error-and-dc-when-fighting-in-wildy/540481 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Aug 2019 05:50:48 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Error and DC when fighting in wildy - Runescape - moparisthebest.com</title>
    <meta name="description" content="Trisidia V3 cache/source/client. When me and a friend are hybriding in wildy, about halfway in we dc and I get an error on client that floods it and says:  &amp;quot;[EventManager] - Player logged out during an event (Caught) abo&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="540481.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Error and DC when fighting in wildy&#39;" href="540481.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/error-and-dc-when-fighting-in-wildy/540481" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/error-and-dc-when-fighting-in-wildy/540481" />
<meta property="og:title" content="Error and DC when fighting in wildy" />
<meta name="twitter:title" content="Error and DC when fighting in wildy" />
<meta property="og:description" content="Trisidia V3 cache/source/client. When me and a friend are hybriding in wildy, about halfway in we dc and I get an error on client that floods it and says:  &quot;[EventManager] - Player logged out during an event (Caught)  about 500 times. Although when we just rune fight, we don’t dc. Its almost as if when we are spamming buttons to switch gear its boots the server.I read another thread about this and they never seemed to solve it. Any help or ideas are greatly appreciated. Here is my EventManager.j..." />
<meta name="twitter:description" content="Trisidia V3 cache/source/client. When me and a friend are hybriding in wildy, about halfway in we dc and I get an error on client that floods it and says:  &quot;[EventManager] - Player logged out during an event (Caught)  about 500 times. Although when we just rune fight, we don’t dc. Its almost as if when we are spamming buttons to switch gear its boots the server.I read another thread about this and they never seemed to solve it. Any help or ideas are greatly appreciated. Here is my EventManager.j..." />
<meta property="article:published_time" content="2014-02-22T07:41:36+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="540481.html">Error and DC when fighting in wildy</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/gwinter.html'><span itemprop='name'>gwinter</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-02-22T07:41:36Z'>
            <time itemprop='dateModified' datetime='2016-08-04T11:48:15Z' class='post-time'>
              August 4, 2016, 11:48am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Trisidia V3 cache/source/client. When me and a friend are hybriding in wildy, about halfway in we dc and I get an error on client that floods it and says:<br>
"[EventManager] - Player logged out during an event (Caught)<br>
about 500 times. Although when we just rune fight, we don’t dc. Its almost as if when we are spamming buttons to switch gear its boots the server.I read another thread about this and they never seemed to solve it. Any help or ideas are greatly appreciated. Here is my EventManager.java file:<br>
[code=javapackage server.event;</p>
<p>import java.io.IOException;<br>
import java.util.ArrayList;<br>
import java.util.List;<br>
import server.util.Misc;</p>
<p>/**</p>
<ul>
<li>Manages events which will be run in the future. Has its own thread since some</li>
<li>events may need to be ran faster than the cycle time in the main thread.</li>
<li>
</li>
<li>
<span class="mention">@author</span> Graham</li>
<li>
</li>
</ul>
<p>*/<br>
public class EventManager implements Runnable {</p>
<pre><code>/**
 * A reference to the singleton;
 */
private static EventManager singleton = null;

/**
 * The waitFor variable is multiplied by this before the call to wait() is
 * made. We do this because other events may be executed after waitFor is
 * set (and take time). We may need to modify this depending on event count?
 * Some proper tests need to be done.
 */
private static final double WAIT_FOR_FACTOR = 0.5;

/**
 * Gets the event manager singleton. If there is no singleton, the singleton
 * is created.
 * 
 * @return The event manager singleton.
 */
public static EventManager getSingleton() {
	if (singleton == null) {
		singleton = new EventManager();
		singleton.thread = new Thread(singleton);
		singleton.thread.start();
	}
	return singleton;
}

/**
 * Initialises the event manager (if it needs to be).
 */
public static void initialize() {
	getSingleton();
}

/**
 * A list of events that are being executed.
 */
private List&lt;EventContainer&gt; events;

/**
 * The event manager thread. So we can interrupt it and end it nicely on
 * shutdown.
 */
private Thread thread;

/**
 * Initialise the event manager.
 */
private EventManager() {
	events = new ArrayList&lt;EventContainer&gt;();
}

/**
 * Adds an event.
 * 
 * @param event
 *            The event to add.
 * @param tick
 *            The tick time.
 */
public synchronized void addEvent(Event event, int tick) {
	events.add(new EventContainer(event, tick));
	notify();
}

@Override
/*
 * Processes events. Works kinda like newer versions of cron.
 */
public synchronized void run() {
	long waitFor = -1;
	List&lt;EventContainer&gt; remove = new ArrayList&lt;EventContainer&gt;();
	
	while(true) {
		
		// reset wait time
		waitFor = -1;
		
		// process all events
		for(EventContainer container : events) {
			if(container.isRunning()) {
				if((System.currentTimeMillis() - container.getLastRun()) &gt;= container.getTick()) {
					try {
						container.execute();
					} catch (Exception exception) {
						Misc.println("[EventManager] - Player logged out during an event (Caught)");
						container.isRunning = false;
						//events.stop();
					}
				}
				if(container.getTick() &lt; waitFor || waitFor == -1) {
					waitFor = container.getTick();
				}
			} else {
				// add to remove list
				remove.add(container);
			}
		}
		
		// remove events that have completed
		for(EventContainer container : remove) {
			events.remove(container);
		}
		remove.clear();
		
		// no events running
		try {
			if(waitFor == -1) {
				wait(); // wait with no timeout
			} else {
				// an event is running, wait for that time or until a new event is added
				int decimalWaitFor = (int)(Math.ceil(waitFor*WAIT_FOR_FACTOR));
				wait(decimalWaitFor);
			}
		} catch(InterruptedException e) {
			break; // stop running
		}
	}
}

/**
 * Shuts the event manager down.
 */
public void shutdown() {
	this.thread.interrupt();
}
</code></pre>
<p>}<br>
][/code]</p>
      </div>

      <meta itemprop='headline' content='Error and DC when fighting in wildy'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/pure2ownage.html'><span itemprop='name'>pure2ownage</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-02-22T18:41:33Z'>
            <time itemprop='dateModified' datetime='2016-08-04T11:48:19Z' class='post-time'>
              August 4, 2016, 11:48am
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Can you give a bit above that block as well? I think I see a part of it.</p>
      </div>

      <meta itemprop='headline' content='Error and DC when fighting in wildy'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/gwinter.html'><span itemprop='name'>gwinter</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-02-22T23:13:48Z'>
            <time itemprop='dateModified' datetime='2016-08-04T11:48:23Z' class='post-time'>
              August 4, 2016, 11:48am
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[code=java]package server.event;</p>
<p>import java.io.IOException;<br>
import java.util.ArrayList;<br>
import java.util.List;<br>
import server.util.Misc;</p>
<p>/**</p>
<ul>
<li>Manages events which will be run in the future. Has its own thread since some</li>
<li>events may need to be ran faster than the cycle time in the main thread.</li>
<li>
</li>
<li>
<span class="mention">@author</span> Graham</li>
<li>
</li>
</ul>
<p>*/<br>
public class EventManager implements Runnable {</p>
<pre><code>/**
 * A reference to the singleton;
 */
private static EventManager singleton = null;

/**
 * The waitFor variable is multiplied by this before the call to wait() is
 * made. We do this because other events may be executed after waitFor is
 * set (and take time). We may need to modify this depending on event count?
 * Some proper tests need to be done.
 */
private static final double WAIT_FOR_FACTOR = 0.5;

/**
 * Gets the event manager singleton. If there is no singleton, the singleton
 * is created.
 * 
 * @return The event manager singleton.
 */
public static EventManager getSingleton() {
	if (singleton == null) {
		singleton = new EventManager();
		singleton.thread = new Thread(singleton);
		singleton.thread.start();
	}
	return singleton;
}

/**
 * Initialises the event manager (if it needs to be).
 */
public static void initialize() {
	getSingleton();
}

/**
 * A list of events that are being executed.
 */
private List&lt;EventContainer&gt; events;

/**
 * The event manager thread. So we can interrupt it and end it nicely on
 * shutdown.
 */
private Thread thread;

/**
 * Initialise the event manager.
 */
private EventManager() {
	events = new ArrayList&lt;EventContainer&gt;();
}

/**
 * Adds an event.
 * 
 * @param event
 *            The event to add.
 * @param tick
 *            The tick time.
 */
public synchronized void addEvent(Event event, int tick) {
	events.add(new EventContainer(event, tick));
	notify();
}

@Override
/*
 * Processes events. Works kinda like newer versions of cron.
 */
public synchronized void run() {
	long waitFor = -1;
	List&lt;EventContainer&gt; remove = new ArrayList&lt;EventContainer&gt;();
	
	while(true) {
		
		// reset wait time
		waitFor = -1;
		
		// process all events
		for(EventContainer container : events) {
			if(container.isRunning()) {
				if((System.currentTimeMillis() - container.getLastRun()) &gt;= container.getTick()) {
					try {
						container.execute();
					} catch (Exception exception) {
						Misc.println("[EventManager] - Player logged out during an event (Caught)");
						container.isRunning = false;
						//events.stop();
					}
				}
				if(container.getTick() &lt; waitFor || waitFor == -1) {
					waitFor = container.getTick();
				}
			} else {
				// add to remove list
				remove.add(container);
			}
		}
		
		// remove events that have completed
		for(EventContainer container : remove) {
			events.remove(container);
		}
		remove.clear();
		
		// no events running
		try {
			if(waitFor == -1) {
				wait(); // wait with no timeout
			} else {
				// an event is running, wait for that time or until a new event is added
				int decimalWaitFor = (int)(Math.ceil(waitFor*WAIT_FOR_FACTOR));
				wait(decimalWaitFor);
			}
		} catch(InterruptedException e) {
			break; // stop running
		}
	}
}

/**
 * Shuts the event manager down.
 */
public void shutdown() {
	this.thread.interrupt();
}
</code></pre>
<p>}<br>
[/code]</p>
      </div>

      <meta itemprop='headline' content='Error and DC when fighting in wildy'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/pure2ownage.html'><span itemprop='name'>pure2ownage</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-02-22T23:25:02Z'>
            <time itemprop='dateModified' datetime='2016-08-04T11:48:23Z' class='post-time'>
              August 4, 2016, 11:48am
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>One of the events is throwing an exception, I would use <span class="bbcode-i">Exception#printStackTrace</span> to capture it.</p>
      </div>

      <meta itemprop='headline' content='Error and DC when fighting in wildy'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/error-and-dc-when-fighting-in-wildy/540481 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Aug 2019 05:50:49 GMT -->
</html>
