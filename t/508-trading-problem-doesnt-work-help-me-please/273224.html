<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/508-trading-problem-doesnt-work-help-me-please/273224 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Aug 2019 16:42:59 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>[[508]]] Trading problem, Doesn&#39;t work. Help me please - Runescape - moparisthebest.com</title>
    <meta name="description" content="Hello, my player trade doesn&amp;#39;t work. I&amp;#39;m using Berk-Scape atm, I tried trading with my friends but he couldn&amp;#39;t put up anything and neither could I. We could click the item but it wouldn&amp;#39;t go up in the trade box. This is &amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="273224.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;[[508]]] Trading problem, Doesn&#39;t work. Help me please&#39;" href="273224.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/508-trading-problem-doesnt-work-help-me-please/273224" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/508-trading-problem-doesnt-work-help-me-please/273224" />
<meta property="og:title" content="[[508]]] Trading problem, Doesn&#39;t work. Help me please" />
<meta name="twitter:title" content="[[508]]] Trading problem, Doesn&#39;t work. Help me please" />
<meta property="og:description" content="Hello, my player trade doesn’t work. I’m using Berk-Scape atm, I tried trading with my friends but he couldn’t put up anything and neither could I. We could click the item but it wouldn’t go up in the trade box. This is my Playertrade file. Is there anything wrong with it?  [code]package Bulby.players.items;  import Bulby.Engine;  import Bulby.players.Player;  public class PlayerTrade {  public void declinePlayer(Player p){ 	if(p == null || !p.online){ 		return; 	} 	for(int i = 0; i &lt; getTradeIt..." />
<meta name="twitter:description" content="Hello, my player trade doesn’t work. I’m using Berk-Scape atm, I tried trading with my friends but he couldn’t put up anything and neither could I. We could click the item but it wouldn’t go up in the trade box. This is my Playertrade file. Is there anything wrong with it?  [code]package Bulby.players.items;  import Bulby.Engine;  import Bulby.players.Player;  public class PlayerTrade {  public void declinePlayer(Player p){ 	if(p == null || !p.online){ 		return; 	} 	for(int i = 0; i &lt; getTradeIt..." />
<meta property="article:published_time" content="2009-04-14T03:46:07+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="273224.html">[[508]]] Trading problem, Doesn&#39;t work. Help me please</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Cuban0_Ftw.html'><span itemprop='name'>Cuban0_Ftw</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-04-14T03:46:07Z'>
            <time itemprop='dateModified' datetime='2016-07-31T06:56:24Z' class='post-time'>
              July 31, 2016,  6:56am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hello, my player trade doesn’t work. I’m using Berk-Scape atm, I tried trading with my friends but he couldn’t put up anything and neither could I. We could click the item but it wouldn’t go up in the trade box. This is my Playertrade file. Is there anything wrong with it?</p>
<p>[code]package Bulby.players.items;</p>
<p>import Bulby.Engine;<br>
import Bulby.players.Player;</p>
<p>public class PlayerTrade {</p>
<pre><code>public void declinePlayer(Player p){
	if(p == null || !p.online){
		return;
	}
	for(int i = 0; i &lt; getTradeItemCount(p); i++){
		Engine.playerItems.addItem(p,p.tradeItems[i],p.tradeItemsN[i]);
	}
	p.tradeItems = new int[28];
	p.tradeItemsN = new int[28];
	p.tradePlayer = 0;
	p.tAccept[0] = false;
	p.tAccept[1] = false;
	p.frames.removeShownInterface(p);
}
public void acceptPlayer(Player p,Player plr){
	if(p == null || !p.online){
		return;
	}
	if(plr == null || !plr.online){
		return;
	}
	for(int i = 0; i &lt; getTradeItemCount(plr); i++){
		Engine.playerItems.addItem(p,plr.tradeItems[i],plr.tradeItemsN[i]);
	}
	for(int i = 0; i &lt; getTradeItemCount(p); i++){
		Engine.playerItems.addItem(plr,p.tradeItems[i],p.tradeItemsN[i]);
	}
	p.tradeItems = new int[28];
	p.tradeItemsN = new int[28];
	p.tradePlayer = 0;
	p.tAccept[0] = false;
	p.tAccept[1] = false;
	p.frames.removeShownInterface(p);
	plr.tradeItems = new int[28];
	plr.tradeItemsN = new int[28];
	plr.tradePlayer = 0;
	plr.tAccept[0] = false;
	plr.tAccept[1] = false;
	plr.frames.removeShownInterface(plr);
}
public void secondScreen(Player p,Player plr){
	if(p == null || !p.online){
		return;
	}
	if(plr == null || !plr.online){
		return;
	}
	p.frames.showInterface(p, 334);
    p.frames.setInventory(p, 16);
	plr.frames.showInterface(plr, 334);
    plr.frames.setInventory(plr, 16);


	plr.tAccept[0] = true;
	p.tAccept[0] = true;


	//add string here for items
}
//Sub id's 30 and 31 are your offer and 32 and 33 is Traders offer
</code></pre>
<p>public void firstScreen(Player p,Player plr){<br>
if(p == null || !p.online){<br>
return;<br>
}<br>
if(plr == null || !plr.online){<br>
return;<br>
}<br>
p.frames.setString(p, "Trading with: "+plr.username, 335, 15);<br>
p.frames.setString(plr, "Trading with: "+p.username, 335, 15);</p>
<p>p.frames.setString(p, “”, 335, 36);<br>
p.frames.setString(plr, “”, 335, 36);</p>
<p>p.frames.setInventory(p, 763);<br>
p.frames.setItems(p, -1, 64209, 93, p.items, p.itemsN);// my items my side<br>
plr.frames.setInventory(plr, 763);<br>
plr.frames.setItems(plr, -1, 64209, 93, p.items, p.itemsN);// my items my side</p>
<p>p.TradeWithPerson = plr.playerId;<br>
plr.TradeWithPerson = p.playerId;<br>
p.frames.showInterface(p, 335);<br>
plr.frames.showInterface(plr, 335);<br>
refreshScreen(p,plr);<br>
refreshScreen(plr,p);<br>
}</p>
<pre><code>public void refreshScreen(Player p,Player plr){
	if(p == null || !p.online){
		return;
	}
	if(plr == null || !plr.online){
		return;
	}
</code></pre>
<p><a href="http://p.frames.setitems/" rel="nofollow noopener">//p.frames.setItems</a>(p, 335, 30, 28, p.items, p.itemsN);// my items my side<br>
<a href="http://plr.frames.setitems/" rel="nofollow noopener">//plr.frames.setItems</a>(plr, 335, 30, 28, plr.tradeItems, plr.tradeItemsN);//his items his side<br>
<a href="http://p.frames.setitems/" rel="nofollow noopener">//p.frames.setItems</a>(p, 335, 32, 28, plr.tradeItems, plr.tradeItemsN);//his items on my screen<br>
<a href="http://plr.frames.setitems/" rel="nofollow noopener">//plr.frames.setItems</a>(plr, 335, 32, 28, p.items, p.itemsN);//my items on his screen</p>
<p><a href="http://p.frames.setitems/" rel="nofollow noopener">//p.frames.setItems</a>(p, 336, 0, 93, p.items, p.itemsN);<br>
//frames here for refreshing first screen<br>
}<br>
public void declineTrade(Player p){<br>
if(p == null || !p.online){<br>
return;<br>
}<br>
declinePlayer§;<br>
Player plr = Engine.players[p.tradePlayer];<br>
if(plr == null || !plr.online){<br>
return;<br>
}<br>
declinePlayer(plr);<br>
}<br>
public void checkStage(Player p){<br>
if(p == null || !p.online){<br>
return;<br>
}<br>
Player plr = Engine.players[p.tradePlayer];<br>
if(plr == null || !plr.online){<br>
return;<br>
}<br>
if(plr.tradePlayer != p.playerId || p.tradePlayer != plr.playerId){<br>
return;<br>
}<br>
if(plr.tAccept[1] &amp;&amp; p.tAccept[1] &amp;&amp; plr.tAccept[0] &amp;&amp; p.tAccept[0]){<br>
acceptPlayer(p,plr);<br>
}//final trade screen accepted by both<br>
else if(plr.tAccept[0] &amp;&amp; p.tAccept[0]){<br>
secondScreen(p,plr);<br>
} else if(!plr.tAccept[0] &amp;&amp; !p.tAccept[0]){<br>
firstScreen(p,plr);<br>
}<br>
}<br>
public void tradeItem(Player p,int itemId, int amount){<br>
if(p== null || !p.online){<br>
return;<br>
}<br>
Player plr = Engine.players[p.tradePlayer];<br>
if(plr == null || !plr.online){<br>
return;<br>
}<br>
if(p.tradePlayer != plr.playerId || plr.tradePlayer != p.playerId){<br>
return;<br>
}<br>
if(!Engine.playerItems.haveItem(p,itemId,amount)){<br>
amount = Engine.playerItems.invItemCount(p,itemId);<br>
}<br>
if(getTradeItemCount§ &lt; 28){<br>
if(Engine.items.itemLists[itemId].itemStackable || Engine.items.itemLists[itemId].itemIsNote){<br>
if(Engine.playerItems.deleteItem(p,itemId,amount)){<br>
int freeSlot = getFreeSlots§;<br>
if(freeSlot &lt; 0){<br>
return;<br>
}<br>
p.tradeItems[freeSlot] = itemId;<br>
p.tradeItemsN[freeSlot] += amount;<br>
}<br>
} else {<br>
if(Engine.playerItems.deleteItem(p,itemId,amount)){<br>
for(int i = 0; i &lt; amount; i++){<br>
int freeSlot = getFreeSlots§;<br>
if(freeSlot &lt; 0){<br>
return;<br>
}<br>
p.tradeItems[freeSlot] = itemId;<br>
p.tradeItemsN[freeSlot] = 1;<br>
}<br>
}<br>
}<br>
p.tAccept[0] = false;<br>
plr.tAccept[0] = false;<br>
refreshScreen(p,plr);<br>
//add screen refresh frames here<br>
}<br>
}<br>
public void removeItem(Player p,int itemId, int amount){<br>
if(amount &lt;= 0 || amount &gt; 999999999){<br>
return;<br>
}<br>
if(p == null || !p.online){<br>
return;<br>
}<br>
Player plr = Engine.players[p.tradePlayer];<br>
if(plr == null || !plr.online){<br>
return;<br>
}<br>
if(p.tradePlayer != plr.playerId || plr.tradePlayer != p.playerId){<br>
return;<br>
}<br>
int itemSlot = getTradeItemslot(p,itemId);<br>
if(p.tradeItemsN[itemSlot] &gt; 0){<br>
//this is for noted items etc<br>
//int itemSlot = getTradeItemslot(p,itemId);<br>
if(itemSlot &lt; 0){<br>
return;<br>
}<br>
if(p.tradeItemsN[itemSlot] &gt; amount){<br>
amount = p.tradeItemsN[itemSlot];<br>
Engine.playerItems.addItem(p,itemId,amount);<br>
p.tradeItems[itemSlot] = -1;<br>
p.tradeItemsN[itemSlot] = -1;<br>
} else if(amount &lt; p.tradeItemsN[itemSlot]){<br>
Engine.playerItems.addItem(p,itemId,amount);<br>
p.tradeItemsN[itemSlot] -= amount;<br>
}<br>
} else {<br>
for(int i = 0; i &lt; amount; i++){<br>
int itemSlot2 = getTradeItemslot(p,itemId);<br>
if(itemSlot2 &lt; 0){<br>
return;<br>
}<br>
Engine.playerItems.addItem(p,itemId,1);<br>
p.tradeItems[itemSlot2] = -1;<br>
p.tradeItemsN[itemSlot2] = -1;<br>
}<br>
}<br>
p.tAccept[0] = false;<br>
plr.tAccept[0] = false;<br>
refreshScreen(p,plr);<br>
//add screen refresh frames here<br>
}</p>
<pre><code>public int getTradeItemslot(Player p, int itemId) {
    for (int i = 0; i &lt; 28; i++) {
        if (p.tradeItems[i] == itemId) {
            return i;
        }
    }
    return -1;
}
public int getTradeItemCount(Player p) {
	int count = 0;
    for (int i = 0; i &lt; 28; i++) {
        if (p.tradeItems[i] &gt;  0) {
            count++;
        }
    }
    return count;
}

public int getFreeSlots(Player p) {
    for (int i = 0; i &lt; 28; i++) {
        if (p.tradeItems[i] == -1) {
            return i;
        }
    }
    return -1;
}
</code></pre>
<p>}<br>
[/code]</p>
      </div>

      <meta itemprop='headline' content='[[508]]] Trading problem, Doesn&#39;t work. Help me please'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/508-trading-problem-doesnt-work-help-me-please/273224 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Aug 2019 16:43:00 GMT -->
</html>
