<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/errors-at-170-players/455384 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 22:14:31 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Errors at 170 players - Runescape - moparisthebest.com</title>
    <meta name="description" content="When I reach around 170 players online, I begin to get this error in my console (the server does not shut down and still accepts connections): [code=java]java.lang.ArrayIndexOutOfBoundsException: 10000 	at com.rs2.misc.S&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="455384.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Errors at 170 players&#39;" href="455384.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/errors-at-170-players/455384" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/errors-at-170-players/455384" />
<meta property="og:title" content="Errors at 170 players" />
<meta name="twitter:title" content="Errors at 170 players" />
<meta property="og:description" content="When I reach around 170 players online, I begin to get this error in my console (the server does not shut down and still accepts connections):  java.lang.ArrayIndexOutOfBoundsException: 10000 	at com.rs2.misc.Stream.writeBytes(Stream.java:279) 	at com.rs2.model.Player.appendPlayerAppearance(Player.java:1056) 	at com.rs2.model.Player.appendPlayerUpdateBlock(Player.java:1123) 	at com.rs2.model.Player.addNewPlayer(Player.java:823) 	at com.rs2.model.PlayerHandler.updatePlayer(PlayerHandler.java:102)..." />
<meta name="twitter:description" content="When I reach around 170 players online, I begin to get this error in my console (the server does not shut down and still accepts connections):  java.lang.ArrayIndexOutOfBoundsException: 10000 	at com.rs2.misc.Stream.writeBytes(Stream.java:279) 	at com.rs2.model.Player.appendPlayerAppearance(Player.java:1056) 	at com.rs2.model.Player.appendPlayerUpdateBlock(Player.java:1123) 	at com.rs2.model.Player.addNewPlayer(Player.java:823) 	at com.rs2.model.PlayerHandler.updatePlayer(PlayerHandler.java:102)..." />
<meta property="article:published_time" content="2012-08-21T11:32:35+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="455384.html">Errors at 170 players</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/ranger_squad.html'><span itemprop='name'>ranger_squad</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-08-21T11:32:35Z'>
            <time itemprop='dateModified' datetime='2016-08-03T23:37:36Z' class='post-time'>
              August 3, 2016, 11:37pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>When I reach around 170 players online, I begin to get this error in my console (the server does not shut down and still accepts connections):</p>
<p><code>java.lang.ArrayIndexOutOfBoundsException: 10000
	at com.rs2.misc.Stream.writeBytes(Stream.java:279)
	at com.rs2.model.Player.appendPlayerAppearance(Player.java:1056)
	at com.rs2.model.Player.appendPlayerUpdateBlock(Player.java:1123)
	at com.rs2.model.Player.addNewPlayer(Player.java:823)
	at com.rs2.model.PlayerHandler.updatePlayer(PlayerHandler.java:102)
	at com.rs2.model.Client.initialize(Client.java:5885)
	at com.rs2.model.PlayerHandler.process(PlayerHandler.java:232)
	at com.rs2.world.process.run(process.java:18)
	at java.lang.Thread.run(Unknown Source)</code></p>
<p>Here are the lines mentioned in the error in Stream.writeBytes:</p>
<p><code>public void writeBytes(byte abyte0[], int i, int j) {
		for (int k = j; k &lt; j + i; k++)
			buffer[currentOffset++] = abyte0[k]; //Error line
	}</code></p>
<p>and Player.appendPlayerAppearance:</p>
<pre><code class="lang-auto"></code></pre>
      </div>

      <meta itemprop='headline' content='Errors at 170 players'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/newb_slayer.html'><span itemprop='name'>newb_slayer</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-08-24T11:51:46Z'>
            <time itemprop='dateModified' datetime='2016-08-03T23:41:21Z' class='post-time'>
              August 3, 2016, 11:41pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>If you’re using a PI server go to config.java and search for this: <code>public static final int MAX_PLAYERS =</code> I think this is how to fix the problem</p>
      </div>

      <meta itemprop='headline' content='Errors at 170 players'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/zyle1992.html'><span itemprop='name'>zyle1992</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-08-24T18:52:17Z'>
            <time itemprop='dateModified' datetime='2016-08-03T23:41:39Z' class='post-time'>
              August 3, 2016, 11:41pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Are the players all going into the same area? That would probably cause the error. Sending all of the state data to all 170 players, about all of the other 169 players in the region.</p>
<p>Also, this is just a side theory, but is it always sending all of the data to all of the players, all of the time? Instead of only the players in the current region?</p>
      </div>

      <meta itemprop='headline' content='Errors at 170 players'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/ExtremeX-Scape.html'><span itemprop='name'>ExtremeX-Scape</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-08-24T18:57:16Z'>
            <time itemprop='dateModified' datetime='2016-08-03T23:41:39Z' class='post-time'>
              August 3, 2016, 11:41pm
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“zyle1992, post:3, topic:455384”]Are the players all going into the same area? That would probably cause the error. Sending all of the state data to all 170 players, about all of the other 169 players in the region.</p>
<p>Also, this is just a side theory, <span class="bbcode-b">but is it always sending all of the data to all of the players, all of the time? Instead of only the players in the current region?</span>[/quote]</p>
<p>Yes. That’s how PI rolls.</p>
<p>It appears your <span class="bbcode-i">currentOffset</span> is greater then the buffer size (10,000) that’s odd.</p>
      </div>

      <meta itemprop='headline' content='Errors at 170 players'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/zyle1992.html'><span itemprop='name'>zyle1992</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-08-24T19:12:45Z'>
            <time itemprop='dateModified' datetime='2016-08-03T23:41:39Z' class='post-time'>
              August 3, 2016, 11:41pm
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“AtomicInt_, post:4, topic:455384”][quote author=zyle1992 link=topic=558284.msg4085846#msg4085846 date=1345834337]<br>
Are the players all going into the same area? That would probably cause the error. Sending all of the state data to all 170 players, about all of the other 169 players in the region.</p>
<p>Also, this is just a side theory, <span class="bbcode-b">but is it always sending all of the data to all of the players, all of the time? Instead of only the players in the current region?</span><br>
[/quote]</p>
<p>Yes. That’s how PI rolls.</p>
<p>It appears your <span class="bbcode-i">currentOffset</span> is greater then the buffer size (10,000) that’s odd.[/quote]</p>
<p>Yeah, that’s what caused me to create my theory. If there’s too many people in the region, it’s trying to send all of that data to all of the players. For 170 players, and if it is indeed sending all of the data from all of the players, to everyone, regardless of the region they’re in, then each player can only represent ~58 bytes of appearance data, before it over flows.</p>
      </div>

      <meta itemprop='headline' content='Errors at 170 players'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/ranger_squad.html'><span itemprop='name'>ranger_squad</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-08-24T20:02:39Z'>
            <time itemprop='dateModified' datetime='2016-08-03T23:41:40Z' class='post-time'>
              August 3, 2016, 11:41pm
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I see. It’s not really worth rewriting it, is it? XD</p>
      </div>

      <meta itemprop='headline' content='Errors at 170 players'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/zyle1992.html'><span itemprop='name'>zyle1992</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-08-24T20:29:37Z'>
            <time itemprop='dateModified' datetime='2016-08-03T23:41:41Z' class='post-time'>
              August 3, 2016, 11:41pm
            </time>
        <span itemprop='position'>#7</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote quote-modified" data-post="6" data-topic="455384">
<div class="title">
<div class="quote-controls"></div>
 ranger squad:</div>
<blockquote>
<p>I see. It’s not really worth rewriting it, is it? XD</p>
</blockquote>
</aside>
<p>In the long run, you may consider changing your source. If not, then you would need to rewrite it.</p>
      </div>

      <meta itemprop='headline' content='Errors at 170 players'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/ranger_squad.html'><span itemprop='name'>ranger_squad</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-08-24T20:55:58Z'>
            <time itemprop='dateModified' datetime='2016-08-03T23:41:43Z' class='post-time'>
              August 3, 2016, 11:41pm
            </time>
        <span itemprop='position'>#8</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I had no real intention of hosting this source. Could you provide me some tips on how to make it only send the data to the players in the same region, though?</p>
      </div>

      <meta itemprop='headline' content='Errors at 170 players'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/zyle1992.html'><span itemprop='name'>zyle1992</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-08-24T21:56:26Z'>
            <time itemprop='dateModified' datetime='2016-08-03T23:41:45Z' class='post-time'>
              August 3, 2016, 11:41pm
            </time>
        <span itemprop='position'>#9</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Quickest way would be to check the region of other players before updating, but a better way would be to have all of the players in the region in a List, and then update from that. Would take more work though.</p>
      </div>

      <meta itemprop='headline' content='Errors at 170 players'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/ranger_squad.html'><span itemprop='name'>ranger_squad</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-08-24T22:09:32Z'>
            <time itemprop='dateModified' datetime='2016-08-03T23:41:46Z' class='post-time'>
              August 3, 2016, 11:41pm
            </time>
        <span itemprop='position'>#10</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Ahh too much effort for Deltascape.</p>
      </div>

      <meta itemprop='headline' content='Errors at 170 players'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/errors-at-170-players/455384 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 22:14:33 GMT -->
</html>
