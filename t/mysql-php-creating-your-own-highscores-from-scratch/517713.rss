<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>[MySQL/PHP] Creating Your Own Highscores (From Scratch)</title>
    <link>https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713</link>
    <description>What I&#39;m doing here is trying to teach people how to write their own Highscores from scratch the easiest way possible using PHP and MySQL. My PHP skills arent the best but prove effective and get the job done. What this doesn&#39;t have is getting the individual players skills when you click their name. which is what I&#39;ll try to develop later. 

Please note, that this is adapted for use with a 718 server, and the server implementation part will require some heavy modifying to work with anything too much earlier.

[u][img]https://dl.dropboxusercontent.com/u/103983828/scorestut/database.png[/img][/u]
First, lets start with the MySQL part, since this is needed. So go into your phpAdmin or whatever you use and make a new user, call it &#39;highscores&#39;.

[img]https://dl.dropboxusercontent.com/u/103983828/scorestut/Screenshot_1.png[/img]

Follow this as a guide on how to set up a new database with a matching username. Copy the password and make sure you got i safe somewhere

[img]https://dl.dropboxusercontent.com/u/103983828/scorestut/Screenshot_2.png[/img]

Now you should see this on the User Overview Page:

[img]https://dl.dropboxusercontent.com/u/103983828/scorestut/Screenshot_3.png[/img]


Click the new table on the left side and you should now see this:

[img]https://dl.dropboxusercontent.com/u/103983828/scorestut/Screenshot_4.png[/img]

Now, at the bottom, where it says &#39;create table&#39; we need to make a new table called &#39;scores&#39; so type that in, in the box and in the number of columns, we&#39;re going to put &#39;5&#39; just for starters. Dont worry, if you need more you can always add more, and if you dont fill them all in, then they wont be used. So no worries there.

[img]https://dl.dropboxusercontent.com/u/103983828/scorestut/Screenshot_5.png[/img]

Just look at mine below, and set it up exactly how i have it: [url=http://prntscr.com/11nk7c]http://prntscr.com/11nk7c[/url]

Make sure that you have the UID checked off as A_I (Auto Increment) and set as the primary key, if not when the server tries to update the highscores, it will throw an SQL Error.

Now that we&#39;re done making the table, we can move on to the good stuff, writing a script from scratch!

[u][img]https://dl.dropboxusercontent.com/u/103983828/scorestut/script.png[/img][/u]
First thing we need to do here, is make a new .php file and We&#39;re going to call it highscores. To make a php file using notepag, open a blank notepad, and save it like so:

[img]https://dl.dropboxusercontent.com/u/103983828/scorestut/Screenshot_6.png[/img]

Inside this new notepad we need to properly open it as a php file by typing the following into the highscores.php that we just made:

[code]
&lt;?php include(&#39;script.php&#39;); ?&gt;

&lt;!DOCTYPE HTML&gt;
&lt;html&gt;
   &lt;head&gt;
   &lt;title&gt;New Highscores Script&lt;/title&gt;
   &lt;link type=&quot;text/css&quot; rel=&quot;stylesheet&quot; href=&quot;style.css&quot;&gt;
   &lt;/head&gt;
&lt;body&gt;

&lt;?php displayScores(); ?&gt;

&lt;/body&gt;
&lt;/html&gt;[/code]

So basically what we&#39;re doing with the include at the top, is including another page, much like how java does their imports. When you import another class, it can be used within that class for multiple functions. We&#39;re going to do it this way, too add alittle more security and keep things clean than just throwing everything on one page. So what we need to do now, is make another php file in the same folder, and call it script.php. Im going to show and explain each part one by one.

First, lets start by making the basic php file:
[code]
&lt;?php


?&gt;[/code]

Now between the tags, we need to make a function which is being called by the page we just made a second ago. In this case, displayScores(). Functions also work alot like java, with the ability of &#39;IF ELSE&#39; statements, while, try catch, and so forth so on. so lets open a basic function to match what we did on the front page:

[code]
function displayScores() {


}
[/code]

Now we need to make a way to connect by adding some configuration first inside the function:

[code]
function displayScores() {

   $host = &quot;localhost&quot;;
   $user = &quot;highscores&quot;;
   $pass = &quot;YOUR_DB_PASS&quot;;
   $db = &quot;highscores&quot;;


}[/code]

Edit this information and make sure its correct. Replace YOUR_DB_PASS that we made earlier in the MySQL Control Panel. Now we need to make a connection to the database by adding the following just above the last bracket:

[code]
  $con = new mysqli($host, $user, $pass, $db) or die($con-&gt;error);
[/code]

So basically what happens, is we attempt to connect to the database, and if we cant connect, you get an error message saying you need to check your settings. To test if you got your credentials correct, save the script onto your website (both pages, in the same folder) and try to load the page via internet browser. If you connect succesfully, the page will be white. If not, you get the error message, and the script is terminated at the point.

Now we need to run a MySQL Query grabbing the data from the table, so that it may be display. 

[code]$res = $con-&gt;query(&quot;SELECT * FROM highscores ORDER BY totalxp DESC LIMIT 50&quot;);[/code]

With the code above, we are selecting any (*) column from the table highscores, and ordering it by totalxp in descending order(highest first) and limiting it to 50 results. Change the number 50 to show more results. 


To show the number of results (used later on, we add this code in):

[code]$count = $con-&gt;num_rows;[/code]

Now then, we have the basic set up, now we need to make an html table which will display the results. We&#39;re doing this before the actual display script executs so it doesnt make multiple tables, just one table, with rows that repeat for each person:

[code]
   if($res-&gt;num_rows &gt; 0) {
      echo &quot;&lt;table&gt;
         &lt;tr&gt;
            &lt;td&gt;Rank&lt;/td&gt;
            &lt;td&gt;Username&lt;/td&gt;
            &lt;td&gt;Skill Level&lt;/td&gt;
            &lt;td&gt;Total Exp&lt;/td&gt;
         &lt;/tr&gt;&quot;;[/code]

We used an if statement to only display results if there is more than 0. This way we arent generating a useless empty table unless there&#39;s actual results to be shown. Once we get the table header generated, we can now run though a while loop to display all results on the table:

[code]
         while($row = $res-&gt;fetch_assoc()) {
            echo &#39;&lt;tr&gt;
               &lt;td&gt;&#39;.($count+1).&#39;&lt;/td&gt;
               &lt;td&gt;&#39;. htmlspecialchars($row[&#39;username&#39;]) .&#39;&lt;/td&gt;
               &lt;td&gt;&#39;.number_format($row[&#39;skillLevel&#39;]).&#39;&lt;/td&gt;
               &lt;td&gt;&#39;.number_format($row[&#39;totalxp&#39;]).&#39;&lt;/td&gt;
               &lt;/tr&gt;&#39;;
            $count++;
         }
         echo &quot;&lt;/table&gt;&quot;;
      } else {
         echo &quot;The Database is Currently Empty. Please try again later.&quot;;
      }
    mysql_close($con);   
[/code]

So basically what this does, is while there is data to be fetched, it will continue to display the results, and when it&#39;s reached the end of the database, it stops, display each result flawlessly :D . After displaying the results, connection to the database is closed, so the buildup of connections doesnt overwhelm your website.

So all in all, your page should look like this:

[code]
&lt;?php
function displayScores() {

   $host = &quot;localhost&quot;;
   $user = &quot;highscores&quot;;
   $pass = &quot;YOUR_DB_PASS&quot;;
   $db = &quot;highscores&quot;;


   $con = new mysqli($host, $user, $pass, $db) or die($con-&gt;error);


   $res = $con-&gt;query(&quot;SELECT * FROM highscores ORDER BY totalxp DESC LIMIT 50&quot;);
   $count = $con-&gt;num_rows;


   if($res-&gt;num_rows &gt; 0) {
      echo &quot;&lt;table&gt;
         &lt;tr&gt;
            &lt;td&gt;Rank&lt;/td&gt;
            &lt;td&gt;Username&lt;/td&gt;
            &lt;td&gt;Skill Level&lt;/td&gt;
            &lt;td&gt;Total Exp&lt;/td&gt;         &lt;/tr&gt;&quot;;

      while($row = $res-&gt;fetch_assoc()) {
         echo &#39;&lt;tr&gt;
            &lt;td&gt;&#39;.($count+1).&#39;&lt;/td&gt;
            &lt;td&gt;&#39;. htmlspecialchars($row[&#39;username&#39;]) .&#39;&lt;/td&gt;
            &lt;td&gt;&#39;.number_format($row[&#39;skillLevel&#39;]).&#39;&lt;/td&gt;
            &lt;td&gt;&#39;.number_format($row[&#39;totalxp&#39;]).&#39;&lt;/td&gt;
            &lt;/tr&gt;&#39;;
         $count++;
      }
      echo &quot;&lt;/table&gt;&quot;;
   } else {
      echo &quot;The Database is Currently Empty. Please try again later.&quot;;
   }
 mysql_close($con);
}?&gt;[/code]

So now, in the same folder, you have highscores.php, and script.php. If all is correct, and you visit the page from your webhost, you should see something like this: [url=http://prntscr.com/11noai]http://prntscr.com/11noai[/url]

For further table styling, i suggest using this website: [url=http://www.w3schools.com/html/html5_intro.asp]http://www.w3schools.com/html/html5_intro.asp[/url]

[img]https://dl.dropboxusercontent.com/u/103983828/scorestut/server.png[/img]
First thing we need to do, is make a new java class. We&#39;re going to call it DatabasePool.java :) 
Not really sure if this is 100% way to do it, but it works better than any other way i&#39;ve tried &gt;.&gt;

[code]
package com.rs.database; // make sure you chanage this


import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.Properties;
import java.util.concurrent.ArrayBlockingQueue;
import java.util.concurrent.TimeUnit;


import com.rs.cores.CoresManager;
import com.rs.game.World;
import com.rs.utils.Logger;
import com.rs.utils.spawning.RemoveObjects;


public class DatabasePool {


   private int port;
   private String host, user, pass, database;
   private static ArrayBlockingQueue&lt;Statement&gt; dbStatements = new ArrayBlockingQueue&lt;Statement&gt;(10);
   private static transient Statement statement;
    
   public static Statement getStatement() {
      return statement;
   }
    
   public DatabasePool(String host, int port, String user, String pass, String database) {
      this.host = host;
      this.port = port;
      this.user = user;
      this.pass = pass;
      this.database = database;
   }


   public void connect() { 
        for (int i = 0; i &lt; 10; i++) {
            try {
                Class.forName(&quot;com.mysql.jdbc.Driver&quot;).newInstance();
                Connection conn = DriverManager.getConnection(&quot;jdbc:mysql://&quot; + host + &quot;:&quot; + port + &quot;/&quot; + database, user, pass);
                statement = conn.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE, ResultSet.CONCUR_UPDATABLE);
                statement.setEscapeProcessing(true);
                dbStatements.offer(statement);
            } catch (Exception e) {
                e.printStackTrace();
                System.err.println(&quot;[DatabasePool] Could not connect to SQL Database!&quot;);
            }
        }
        Logger.log(&quot;DatabasePool&quot;, &quot;Connected to MySql Database.&quot;);
    }
    
    public static Statement getNextStatement() {
        return dbStatements.poll();
    }
    
    public static void closeConnection() {
        try {
            for (int i = 0; i &lt; dbStatements.size(); i++)
                dbStatements.remove(i);
               statement.getConnection().close();
        } catch (SQLException ex) {
            ex.printStackTrace();
        }
    }
    
    public static int executeUpdate(String query) {
        try {
            statement = dbStatements.poll();
            int results = statement.executeUpdate(query);
            dbStatements.offer(statement);
            return results;
        } catch (SQLException ex) {
            ex.printStackTrace();
        }
        return -1;
    }
    
    public static ResultSet executeQuery(String query) {
        try {
            statement = dbStatements.poll();
            ResultSet results = statement.executeQuery(query);
            dbStatements.offer(statement);
            return results;
        } catch (SQLException ex) {
            ex.printStackTrace();
        }
        return null;
    }
   
}
[/code]

Now after we have this made and done, i want you to know a few things. SQL Syntax in java is basically the same as PHP. Nowwe have this class, we need something to update the table with new data :) , so now we&#39;re adding a new method. Reason why i use rs.update method, is to prevent sql inject by the server. So what we need now is this method:

[code]
   public static void updateHighscores(Player player) {
      try {
         String username = Utils.formatPlayerNameForDisplay(player.getUsername());
         ResultSet rs = executeQuery(&quot;SELECT * FROM highscores WHERE username=&#39;&quot;+username+&quot;&#39;&quot;);
         
         // Stuff will go here i define below


      } catch (SQLException ex) {
         System.out.println(ex);
      }
   }[/code]


So now, to do this the easy way, we going to delete  the row of data first, then re-insert new data, to prevent things happening like multiple insertions, incorrect data, etc. To do this, we can do this:


[code]
if (rs.next()) 
   rs.deleteRow();[/code]


So just throw that bit above or below the comment i typed inside  the method above. This will delete that row of data, if rs.next()  (Boolean, flags true if there is data matching)


Now that the row is deleted, we need to insert new data, but first we must move to a new row:

[code]rs.moveToInsertRow();[/code]


Then we do the update part:


[code]
   rs.updateString(&quot;username&quot;, username);
   rs.updateInt(&quot;skillLevel&quot;, player.getSkills().getTotalLevel(player));
   rs.updateString(&quot;totalxp&quot;, &quot;&quot;+player.getSkills().getTotalXp(player)+&quot;&quot;);[/code]


Note that we DO NOT update uid column, because it&#39;s auto-increment, meaning that each time a new row is inserting, the value of uid is increased by 1. MySQL in Java WILL NOT insert the row without telling it to, so to do so, we use rs.insertRow() 


[code]rs.insertRow();[/code]


So now, The entire method should look like this:


   [code]
   public static void updateHighscores(Player player) {
      try {
      String username = Utils.formatPlayerNameForDisplay(player.getUsername());
      ResultSet rs = executeQuery(&quot;SELECT * FROM highscores WHERE username=&#39;&quot;+username+&quot;&#39;&quot;);


      if (rs.next()) 
         rs.deleteRow();
      rs.moveToInsertRow();
      rs.updateString(&quot;username&quot;, username);
      rs.updateInt(&quot;skillLevel&quot;, player.getSkills().getTotalLevel(player));
      rs.updateString(&quot;totalxp&quot;, &quot;&quot;+player.getSkills().getTotalXp(player)+&quot;&quot;);
      rs.insertRow();


      } catch (SQLException ex) {
         System.out.println(ex);
      }
   }[/code]

There are several ways to get the highscores to update for each player, but first we must make the connection to the MySQL Database. We&#39;re doing so in Launcher.java (Or the server&#39;s main launch class)

First we need to declare this in the main launch class:

[code]public static DatabasePool dbConnectPool = null;[/code]

Then, in the main method, we need to specify the details for the database:

[code]dbConnectPool = new DatabasePool(&quot;localhost&quot;, 3306, &quot;highscores&quot;, &quot;EDIT_PASS_HERE&quot;, &quot;highscores&quot;);[/code]


Just edit the part that says &quot;EDIT_PASS_HERE&quot; by replacing it with your MySQL Password that you made way earlier. Keep the quotes and just replace the letters :P 

Then we need to connect by adding underneath it:

[code]dbConnectPool.connect();[/code]


Done WOOT. If you&#39;ve followed this entire tutorial properly and made your own highscores, congratulate yourself because is suck at explaining stuff and tried my hardest. If you know how to style tables and stuff, using CSS, and have made your own using this, post it here :) 

Here&#39;s what mine looks like (I also made the template from scratch to match my forum :3) 
[img]http://[url=https://dl.dropboxusercontent.com/u/103983828/scorestut/Screenshot_7.png]https://dl.dropboxusercontent.com/u/103983828/scorestut/Screenshot_7.png[/url][/img]



kk my hand hurts now, im done &gt;.&lt;

If you need the method to get total xp that goes over Integer.MAX_VALUE here you go (2,147,483,647)

[code]
   public String getTotalXp(Player player) {
      double totalxp = 0;
      for (double xp : player.getSkills().getXp()) {
         totalxp += xp;
      }
      NumberFormat formatter = new DecimalFormat(&quot;#######&quot;);
      return &quot;&quot;+formatter.format(totalxp)+&quot;&quot;;
   }[/code]</description>
    
    <lastBuildDate>Sat, 23 Nov 2013 00:03:26 +0000</lastBuildDate>
    <category>Runescape</category>
    <atom:link href="https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>[MySQL/PHP] Creating Your Own Highscores (From Scratch)</title>
        <dc:creator><![CDATA[@khayam khayam]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/khayam">@khayam</a> wrote:</p>
          <blockquote>
              <p>everytime i run my server i get this mysql error:</p>
<p>[sup]com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: User “my database_user” already has more than ‘max_user_connections’ active connections[/sup]</p>
<p>how can i fix this? i dont understand how i got max connections already when im just trying to get the server to connect when i start it up <img src="https://forum.moparisthebest.com/images/emoji/twitter/confused.png?v=5" title=":confused:" class="emoji" alt=":confused:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713/18">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713/18</link>
        <pubDate>Sat, 23 Nov 2013 00:03:26 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-517713-18</guid>
        <source url="https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713.rss">[MySQL/PHP] Creating Your Own Highscores (From Scratch)</source>
      </item>
      <item>
        <title>[MySQL/PHP] Creating Your Own Highscores (From Scratch)</title>
        <dc:creator><![CDATA[@Fox2007 Fox2007]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/fox2007">@Fox2007</a> wrote:</p>
          <blockquote>
              <p>yea 000webhost doesnt support Remote SQL connections, has to be local or on a host supporting remote sql.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713/17">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713/17</link>
        <pubDate>Tue, 18 Jun 2013 20:56:08 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-517713-17</guid>
        <source url="https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713.rss">[MySQL/PHP] Creating Your Own Highscores (From Scratch)</source>
      </item>
      <item>
        <title>[MySQL/PHP] Creating Your Own Highscores (From Scratch)</title>
        <dc:creator><![CDATA[@khayam khayam]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/khayam">@khayam</a> wrote:</p>
          <blockquote>
              <p>*Nvm i fixed it thanks for the tut great tut! <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"><br>
my problem was <a href="http://000webhosting.com" rel="nofollow noopener">000webhosting.com</a> it wont work on there, but works fine with xampp <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713/16">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713/16</link>
        <pubDate>Thu, 13 Jun 2013 22:22:24 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-517713-16</guid>
        <source url="https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713.rss">[MySQL/PHP] Creating Your Own Highscores (From Scratch)</source>
      </item>
      <item>
        <title>[MySQL/PHP] Creating Your Own Highscores (From Scratch)</title>
        <dc:creator><![CDATA[@Fox2007 Fox2007]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/fox2007">@Fox2007</a> wrote:</p>
          <blockquote>
              <p>yea, means theres nothing in the database. Make sure the server is inserting the data correctly.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713/15">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713/15</link>
        <pubDate>Thu, 13 Jun 2013 11:55:26 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-517713-15</guid>
        <source url="https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713.rss">[MySQL/PHP] Creating Your Own Highscores (From Scratch)</source>
      </item>
      <item>
        <title>[MySQL/PHP] Creating Your Own Highscores (From Scratch)</title>
        <dc:creator><![CDATA[@KempiScape KempiScape]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/kempiscape">@KempiScape</a> wrote:</p>
          <blockquote>
              <p>[quote=“khayam, post:13, topic:517713”]when ever i go on to it just says this:</p>
<p>The Database is Currently Empty. Please try again later.</p>
<p>what do i do?[/quote]check if the database is empty (which it probably is) it’s not inserting correctly, insert something see if that works</p>
<p>if not then reply</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713/14">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713/14</link>
        <pubDate>Thu, 13 Jun 2013 02:25:12 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-517713-14</guid>
        <source url="https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713.rss">[MySQL/PHP] Creating Your Own Highscores (From Scratch)</source>
      </item>
      <item>
        <title>[MySQL/PHP] Creating Your Own Highscores (From Scratch)</title>
        <dc:creator><![CDATA[@khayam khayam]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/khayam">@khayam</a> wrote:</p>
          <blockquote>
              <p>when ever i go on to it just says this:</p>
<p>The Database is Currently Empty. Please try again later.</p>
<p>what do i do?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713/13">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713/13</link>
        <pubDate>Wed, 12 Jun 2013 22:56:07 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-517713-13</guid>
        <source url="https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713.rss">[MySQL/PHP] Creating Your Own Highscores (From Scratch)</source>
      </item>
      <item>
        <title>[MySQL/PHP] Creating Your Own Highscores (From Scratch)</title>
        <dc:creator><![CDATA[@Fox2007 Fox2007]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/fox2007">@Fox2007</a> wrote:</p>
          <blockquote>
              <p>Updated the tutorial with better PHP thanks to Ruby &lt;3</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713/12">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713/12</link>
        <pubDate>Thu, 25 Apr 2013 06:03:56 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-517713-12</guid>
        <source url="https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713.rss">[MySQL/PHP] Creating Your Own Highscores (From Scratch)</source>
      </item>
      <item>
        <title>[MySQL/PHP] Creating Your Own Highscores (From Scratch)</title>
        <dc:creator><![CDATA[@rs614 rs614]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/rs614">@rs614</a> wrote:</p>
          <blockquote>
              <p>First TUTORIAL i see in Moparscape. Thank you… I will be trying to make my own <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713/11">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713/11</link>
        <pubDate>Wed, 24 Apr 2013 10:24:35 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-517713-11</guid>
        <source url="https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713.rss">[MySQL/PHP] Creating Your Own Highscores (From Scratch)</source>
      </item>
      <item>
        <title>[MySQL/PHP] Creating Your Own Highscores (From Scratch)</title>
        <dc:creator><![CDATA[@darkpkb0w darkpkb0w]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/darkpkb0w">@darkpkb0w</a> wrote:</p>
          <blockquote>
              <p>nice tutorial , could i please have ur highscores style the dark style <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"><br>
also when will highscores be made with skills aswell?</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713/10</link>
        <pubDate>Tue, 23 Apr 2013 20:49:07 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-517713-10</guid>
        <source url="https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713.rss">[MySQL/PHP] Creating Your Own Highscores (From Scratch)</source>
      </item>
      <item>
        <title>[MySQL/PHP] Creating Your Own Highscores (From Scratch)</title>
        <dc:creator><![CDATA[@Fox2007 Fox2007]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/fox2007">@Fox2007</a> wrote:</p>
          <blockquote>
              <p>Great, thanks <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"> Much appreciated <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>Calling it outside of the function makes it go poop, and you only need the html tags and stuff on the php page like i had it first <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"> Page is basically set up like HTML, and where you want the php at, you use &lt;?php ?&gt; where you would want to use actual php…</p>
<p>Not sure if i answered your question <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713/9</link>
        <pubDate>Mon, 22 Apr 2013 21:02:48 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-517713-9</guid>
        <source url="https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713.rss">[MySQL/PHP] Creating Your Own Highscores (From Scratch)</source>
      </item>
      <item>
        <title>[MySQL/PHP] Creating Your Own Highscores (From Scratch)</title>
        <dc:creator><![CDATA[@Ruby_Forums_Coder Ruby]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ruby_forums_coder">@Ruby_Forums_Coder</a> wrote:</p>
          <blockquote>
              <p><a class="mention" href="/u/arcik">@Arcik</a>, no you don’t have to declare it as a function but it doesn’t bother any functionality issues or anything so it doesn’t really hurt. It was used a lot back before PHP had OOP support. You can also declare a php tag wherever you like, it’s generally before the document is defined or after the body tag, as a rule of thumb though.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713/8</link>
        <pubDate>Mon, 22 Apr 2013 21:00:48 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-517713-8</guid>
        <source url="https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713.rss">[MySQL/PHP] Creating Your Own Highscores (From Scratch)</source>
      </item>
      <item>
        <title>[MySQL/PHP] Creating Your Own Highscores (From Scratch)</title>
        <dc:creator><![CDATA[@Ashi Ashi]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ashi">@Ashi</a> wrote:</p>
          <blockquote>
              <p>I’m not really a php or js person but I’m sure you don’t need to define this within a function?</p>
<p>[code=php]function displayScores() {</p>
<p>$HOST = “localhost”;<br>
$USER = “highscores”;<br>
$PASS = “YOUR_DB_PASS”;<br>
$DATABASE = “highscores”;<br>
$TABLE = “scores”;<br>
}[/code]</p>
<p>Are you suppose to have <code>&lt;?php &lt;!DOCTYPE html&gt;&lt;html&gt;&lt;/html&gt; ?&gt;</code>?</p>
<p>^ I don’t know that’s why I’m asking lol</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713/7</link>
        <pubDate>Mon, 22 Apr 2013 20:45:14 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-517713-7</guid>
        <source url="https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713.rss">[MySQL/PHP] Creating Your Own Highscores (From Scratch)</source>
      </item>
      <item>
        <title>[MySQL/PHP] Creating Your Own Highscores (From Scratch)</title>
        <dc:creator><![CDATA[@Ruby_Forums_Coder Ruby]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ruby_forums_coder">@Ruby_Forums_Coder</a> wrote:</p>
          <blockquote>
              <p>Looks better, but the only reason $count was sitting at 0 is because you called $res-&gt;num_row and not $con-&gt;num_rows lol. You shouldn’t be calling that though or it’ll just display the number of rows in the table. Just write a loop to loop through the results retrieved to get which number either one is.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713/6</link>
        <pubDate>Mon, 22 Apr 2013 20:33:14 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-517713-6</guid>
        <source url="https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713.rss">[MySQL/PHP] Creating Your Own Highscores (From Scratch)</source>
      </item>
      <item>
        <title>[MySQL/PHP] Creating Your Own Highscores (From Scratch)</title>
        <dc:creator><![CDATA[@Fox2007 Fox2007]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/fox2007">@Fox2007</a> wrote:</p>
          <blockquote>
              <p>oh okay, will do, thanks <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:">  THis better?</p>
<p>[code]</p>
&lt;?php


	header("Status: 404 Not Found");
	
	function scores() {
		$host = "localhost";
		$user = "db_user";
		$pass = "db_pass";
		$db = "db_name";


		$con = new mysqli($host, $user, $pass, $db) or die($con-&gt;error);


 		$res = $con-&gt;query("SELECT * FROM highscores ORDER BY totalxp DESC LIMIT 50");


		$count = $res-&gt;num_row;
		
		if($res-&gt;num_rows &gt; 0) {
			echo "<table>
				<tr>
					<td>Rank</td>
					<td>Username</td>
					<td>Total Lvl.</td>
					<td>Total Exp</td>
					<td>Level</td>
					<td>Prestige</td>
				</tr>";
		
			while($row = $res-&gt;fetch_assoc()) {
				echo '<tr>
					<td>'.($count + 1).'</td>
					<td>'. htmlspecialchars($row['name']) .'</td>
					<td>'.number_format($row['overall']).'</td>
					<td>'.number_format($row['totalxp']).'</td>
					<td>'.$row['combatlvl'].'</td>
					<td>'.$row['prestige'].'</td>
					</tr>';
					$count++;
			}
			echo "</table>";
		} else {
			echo "The Database is Currently Empty. Please try again later.";
		}
	}
?&gt;[/code]
<p>Did count+1 cause count started at 0 &gt;.&lt;</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713/5</link>
        <pubDate>Mon, 22 Apr 2013 20:25:33 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-517713-5</guid>
        <source url="https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713.rss">[MySQL/PHP] Creating Your Own Highscores (From Scratch)</source>
      </item>
      <item>
        <title>[MySQL/PHP] Creating Your Own Highscores (From Scratch)</title>
        <dc:creator><![CDATA[@Ruby_Forums_Coder Ruby]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ruby_forums_coder">@Ruby_Forums_Coder</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="3" data-topic="517713">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.moparisthebest.com/letter_avatar/fox2007/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> Fox2007:</div>
<blockquote>
<p>Oh thanks for that, lol. Helping alot ^<em>^ Just made this to help some people make their own stuff instead of using someone elses ^</em>^</p>
</blockquote>
</aside>
<p>Yeah it’s good that you’re trying to do it but you need to keep up with the latest notes from the php developers etc to keep the code clean and without deprecation. I also suggest you re-read your code again and then once more to be sure not to have any discrepancies like the $con $cxn mixup :P.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713/4</link>
        <pubDate>Mon, 22 Apr 2013 20:24:28 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-517713-4</guid>
        <source url="https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713.rss">[MySQL/PHP] Creating Your Own Highscores (From Scratch)</source>
      </item>
      <item>
        <title>[MySQL/PHP] Creating Your Own Highscores (From Scratch)</title>
        <dc:creator><![CDATA[@Fox2007 Fox2007]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/fox2007">@Fox2007</a> wrote:</p>
          <blockquote>
              <p>Oh thanks for that, lol. Helping alot ^<em>^ Just made this to help some people make their own stuff instead of using someone elses ^</em>^</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713/3</link>
        <pubDate>Mon, 22 Apr 2013 18:34:42 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-517713-3</guid>
        <source url="https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713.rss">[MySQL/PHP] Creating Your Own Highscores (From Scratch)</source>
      </item>
      <item>
        <title>[MySQL/PHP] Creating Your Own Highscores (From Scratch)</title>
        <dc:creator><![CDATA[@Ruby_Forums_Coder Ruby]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/ruby_forums_coder">@Ruby_Forums_Coder</a> wrote:</p>
          <blockquote>
              <p>Uhh, the PHP in this is <span class="bbcode-b">incredibly</span> bad.</p>
<pre><code class="lang-auto">   $con = mysql_connect($HOST, $USER, $PASS);
    mysql_select_db($DATABASE, $con);


   if(!$cxn = mysqli_connect($host,$user,$password,$dbname)) {
        echo 'Database Error - Please check your settings.';
        exit();
   }</code></pre>
<p>Can be shortened down to one line. Also, are you going to use <span class="bbcode-i">mysql_</span> or <span class="bbcode-i">mysqli_</span> functions, chose one rather than using both. You’re also setting $con but checking for !$cxn which is completely useless. I don’t know why you’re using the $count variable to limit your results, limit how many you results you want displayed using the LIMIT sql parameter. There’s countless other errors in this too, including XSS holes. When you’re echoing your table, why make a new echo statement on every line? Echo entire blocks of data out.</p>
<p>For example:<br>
[php]<br>
$host = “localhost”;<br>
$user = “foo”;<br>
$pass = “bar”;<br>
$db = “baz”;</p>
<p>$con = new mysqli($host, $user, $pass, $db) or die($con-&gt;error);</p>
<p>$res = $con-&gt;query(“SELECT * FROM some_table ORDER BY some_param DESC LIMIT 50”);</p>
<p>if($res-&gt;num_rows &gt; 1) {<br>
echo ’<br>
</p><table>
<br>
<tr>
<br>
<th>Username</th>
<br>
<th>XP</th> //add more as you see fit<br>
</tr>';<br>
while($row = $res-&gt;fetch_assoc()) {<br>
echo ’<br>
<tr>
<br>
<td>‘. htmlspecialchars($row[‘username’]) .’</td>
<br>
<td>‘. htmlspecialchars($row[‘xp’]) .’</td>
<br>
</tr>';<br>
}<br>
echo ‘</table>’;<br>
} else {<br>
echo ‘No rows are in the database, please contact some username’;<br>
}<br>
[/php]<br>
Will work faster, is easier to read, complies with the latest developer notes etc. A little research goes a long way. As with anything programming related, there are many paths to the same conclusion; it just so happened that your path went on a gigantic detour.
<p>Keep at it, for a decent article about MySQLi, <a href="http://www.jamiehurst.co.uk/tutorial-introduction-mysqli-prepared-queries/" data-bbcode="true" rel="nofollow noopener">read this</a>.</p>
<p>Also, ignore my terrible tabbing and making it look nice, I wrote it in the editor. That’s probably the reason if it doesn’t work, too.</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713/2</link>
        <pubDate>Mon, 22 Apr 2013 13:49:09 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-517713-2</guid>
        <source url="https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713.rss">[MySQL/PHP] Creating Your Own Highscores (From Scratch)</source>
      </item>
      <item>
        <title>[MySQL/PHP] Creating Your Own Highscores (From Scratch)</title>
        <dc:creator><![CDATA[@Fox2007 Fox2007]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/fox2007">@Fox2007</a> wrote:</p>
          <blockquote>
              <p>What I’m doing here is trying to teach people how to write their own Highscores from scratch the easiest way possible using PHP and MySQL. My PHP skills arent the best but prove effective and get the job done. What this doesn’t have is getting the individual players skills when you click their name. which is what I’ll try to develop later.</p>
<p>Please note, that this is adapted for use with a 718 server, and the server implementation part will require some heavy modifying to work with anything too much earlier.</p>
<p><span class="bbcode-u"><img src="https://dl.dropboxusercontent.com/u/103983828/scorestut/database.png" alt width="" height=""></span><br>
First, lets start with the MySQL part, since this is needed. So go into your phpAdmin or whatever you use and make a new user, call it ‘highscores’.</p>
<p><img src="https://dl.dropboxusercontent.com/u/103983828/scorestut/Screenshot_1.png" alt width="" height=""></p>
<p>Follow this as a guide on how to set up a new database with a matching username. Copy the password and make sure you got i safe somewhere</p>
<p><img src="https://dl.dropboxusercontent.com/u/103983828/scorestut/Screenshot_2.png" alt width="" height=""></p>
<p>Now you should see this on the User Overview Page:</p>
<p><img src="https://dl.dropboxusercontent.com/u/103983828/scorestut/Screenshot_3.png" alt width="" height=""></p>
<p>Click the new table on the left side and you should now see this:</p>
<p><img src="https://dl.dropboxusercontent.com/u/103983828/scorestut/Screenshot_4.png" alt width="" height=""></p>
<p>Now, at the bottom, where it says ‘create table’ we need to make a new table called ‘scores’ so type that in, in the box and in the number of columns, we’re going to put ‘5’ just for starters. Dont worry, if you need more you can always add more, and if you dont fill them all in, then they wont be used. So no worries there.</p>
<p><img src="https://dl.dropboxusercontent.com/u/103983828/scorestut/Screenshot_5.png" alt width="" height=""></p>
<p>Just look at mine below, and set it up exactly how i have it: <a href="http://prntscr.com/11nk7c" data-bbcode="true" rel="nofollow noopener">http://prntscr.com/11nk7c</a></p>
<p>Make sure that you have the UID checked off as A_I (Auto Increment) and set as the primary key, if not when the server tries to update the highscores, it will throw an SQL Error.</p>
<p>Now that we’re done making the table, we can move on to the good stuff, writing a script from scratch!</p>
<p><span class="bbcode-u"><img src="https://dl.dropboxusercontent.com/u/103983828/scorestut/script.png" alt width="" height=""></span><br>
First thing we need to do here, is make a new .php file and We’re going to call it highscores. To make a php file using notepag, open a blank notepad, and save it like so:</p>
<p><img src="https://dl.dropboxusercontent.com/u/103983828/scorestut/Screenshot_6.png" alt width="" height=""></p>
<p>Inside this new notepad we need to properly open it as a php file by typing the following into the highscores.php that we just made:</p>
<p>[code]</p>
&lt;?php include('script.php'); ?&gt;


   
   New Highscores Script
   
   

&lt;?php displayScores(); ?&gt;

[/code]
<p>So basically what we’re doing with the include at the top, is including another page, much like how java does their imports. When you import another class, it can be used within that class for multiple functions. We’re going to do it this way, too add alittle more security and keep things clean than just throwing everything on one page. So what we need to do now, is make another php file in the same folder, and call it script.php. Im going to show and explain each part one by one.</p>
<p>First, lets start by making the basic php file:</p>
<p>[code]</p>
&lt;?php


?&gt;[/code]
<p>Now between the tags, we need to make a function which is being called by the page we just made a second ago. In this case, displayScores(). Functions also work alot like java, with the ability of ‘IF ELSE’ statements, while, try catch, and so forth so on. so lets open a basic function to match what we did on the front page:</p>
<pre><code class="lang-auto">function displayScores() {


}</code></pre>
<p>Now we need to make a way to connect by adding some configuration first inside the function:</p>
<p>[code]<br>
function displayScores() {</p>
<p>$host = “localhost”;<br>
$user = “highscores”;<br>
$pass = “YOUR_DB_PASS”;<br>
$db = “highscores”;</p>
<p>}[/code]</p>
<p>Edit this information and make sure its correct. Replace YOUR_DB_PASS that we made earlier in the MySQL Control Panel. Now we need to make a connection to the database by adding the following just above the last bracket:</p>
<pre><code class="lang-auto">  $con = new mysqli($host, $user, $pass, $db) or die($con-&gt;error);</code></pre>
<p>So basically what happens, is we attempt to connect to the database, and if we cant connect, you get an error message saying you need to check your settings. To test if you got your credentials correct, save the script onto your website (both pages, in the same folder) and try to load the page via internet browser. If you connect succesfully, the page will be white. If not, you get the error message, and the script is terminated at the point.</p>
<p>Now we need to run a MySQL Query grabbing the data from the table, so that it may be display.</p>
<pre><code class="lang-auto"></code></pre>
<p>With the code above, we are selecting any (*) column from the table highscores, and ordering it by totalxp in descending order(highest first) and limiting it to 50 results. Change the number 50 to show more results.</p>
<p>To show the number of results (used later on, we add this code in):</p>
<pre><code class="lang-auto"></code></pre>
<p>Now then, we have the basic set up, now we need to make an html table which will display the results. We’re doing this before the actual display script executs so it doesnt make multiple tables, just one table, with rows that repeat for each person:</p>
<p><code>
   if($res-&gt;num_rows &gt; 0) {
      echo "&lt;table&gt;
         &lt;tr&gt;
            &lt;td&gt;Rank&lt;/td&gt;
            &lt;td&gt;Username&lt;/td&gt;
            &lt;td&gt;Skill Level&lt;/td&gt;
            &lt;td&gt;Total Exp&lt;/td&gt;
         &lt;/tr&gt;";</code></p>
<p>We used an if statement to only display results if there is more than 0. This way we arent generating a useless empty table unless there’s actual results to be shown. Once we get the table header generated, we can now run though a while loop to display all results on the table:</p>
<pre><code class="lang-auto">         while($row = $res-&gt;fetch_assoc()) {
            echo '&lt;tr&gt;
               &lt;td&gt;'.($count+1).'&lt;/td&gt;
               &lt;td&gt;'. htmlspecialchars($row['username']) .'&lt;/td&gt;
               &lt;td&gt;'.number_format($row['skillLevel']).'&lt;/td&gt;
               &lt;td&gt;'.number_format($row['totalxp']).'&lt;/td&gt;
               &lt;/tr&gt;';
            $count++;
         }
         echo "&lt;/table&gt;";
      } else {
         echo "The Database is Currently Empty. Please try again later.";
      }
    mysql_close($con);   </code></pre>
<p>So basically what this does, is while there is data to be fetched, it will continue to display the results, and when it’s reached the end of the database, it stops, display each result flawlessly <img src="https://forum.moparisthebest.com/images/emoji/twitter/smiley.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"> . After displaying the results, connection to the database is closed, so the buildup of connections doesnt overwhelm your website.</p>
<p>So all in all, your page should look like this:</p>
<p>[code]</p>
&lt;?php
function displayScores() {

   $host = "localhost";
   $user = "highscores";
   $pass = "YOUR_DB_PASS";
   $db = "highscores";


   $con = new mysqli($host, $user, $pass, $db) or die($con-&gt;error);


   $res = $con-&gt;query("SELECT * FROM highscores ORDER BY totalxp DESC LIMIT 50");
   $count = $con-&gt;num_rows;


   if($res-&gt;num_rows &gt; 0) {
      echo "<table>
         <tr>
            <td>Rank</td>
            <td>Username</td>
            <td>Skill Level</td>
            <td>Total Exp</td>         </tr>";

      while($row = $res-&gt;fetch_assoc()) {
         echo '<tr>
            <td>'.($count+1).'</td>
            <td>'. htmlspecialchars($row['username']) .'</td>
            <td>'.number_format($row['skillLevel']).'</td>
            <td>'.number_format($row['totalxp']).'</td>
            </tr>';
         $count++;
      }
      echo "</table>";
   } else {
      echo "The Database is Currently Empty. Please try again later.";
   }
 mysql_close($con);
}?&gt;[/code]
<p>So now, in the same folder, you have highscores.php, and script.php. If all is correct, and you visit the page from your webhost, you should see something like this: <a href="http://prntscr.com/11noai" data-bbcode="true" rel="nofollow noopener">http://prntscr.com/11noai</a></p>
<p>For further table styling, i suggest using this website: <a href="http://www.w3schools.com/html/html5_intro.asp" data-bbcode="true" rel="nofollow noopener">http://www.w3schools.com/html/html5_intro.asp</a></p>
<p><img src="https://dl.dropboxusercontent.com/u/103983828/scorestut/server.png" alt width="" height=""><br>
First thing we need to do, is make a new java class. We’re going to call it DatabasePool.java <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"><br>
Not really sure if this is 100% way to do it, but it works better than any other way i’ve tried &gt;.&gt;</p>
<pre><code class="lang-auto">package com.rs.database; // make sure you chanage this


import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.Properties;
import java.util.concurrent.ArrayBlockingQueue;
import java.util.concurrent.TimeUnit;


import com.rs.cores.CoresManager;
import com.rs.game.World;
import com.rs.utils.Logger;
import com.rs.utils.spawning.RemoveObjects;


public class DatabasePool {


   private int port;
   private String host, user, pass, database;
   private static ArrayBlockingQueue&lt;Statement&gt; dbStatements = new ArrayBlockingQueue&lt;Statement&gt;(10);
   private static transient Statement statement;
    
   public static Statement getStatement() {
      return statement;
   }
    
   public DatabasePool(String host, int port, String user, String pass, String database) {
      this.host = host;
      this.port = port;
      this.user = user;
      this.pass = pass;
      this.database = database;
   }


   public void connect() { 
        for (int i = 0; i &lt; 10; i++) {
            try {
                Class.forName("com.mysql.jdbc.Driver").newInstance();
                Connection conn = DriverManager.getConnection("jdbc:mysql://" + host + ":" + port + "/" + database, user, pass);
                statement = conn.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE, ResultSet.CONCUR_UPDATABLE);
                statement.setEscapeProcessing(true);
                dbStatements.offer(statement);
            } catch (Exception e) {
                e.printStackTrace();
                System.err.println("[DatabasePool] Could not connect to SQL Database!");
            }
        }
        Logger.log("DatabasePool", "Connected to MySql Database.");
    }
    
    public static Statement getNextStatement() {
        return dbStatements.poll();
    }
    
    public static void closeConnection() {
        try {
            for (int i = 0; i &lt; dbStatements.size(); i++)
                dbStatements.remove(i);
               statement.getConnection().close();
        } catch (SQLException ex) {
            ex.printStackTrace();
        }
    }
    
    public static int executeUpdate(String query) {
        try {
            statement = dbStatements.poll();
            int results = statement.executeUpdate(query);
            dbStatements.offer(statement);
            return results;
        } catch (SQLException ex) {
            ex.printStackTrace();
        }
        return -1;
    }
    
    public static ResultSet executeQuery(String query) {
        try {
            statement = dbStatements.poll();
            ResultSet results = statement.executeQuery(query);
            dbStatements.offer(statement);
            return results;
        } catch (SQLException ex) {
            ex.printStackTrace();
        }
        return null;
    }
   
}</code></pre>
<p>Now after we have this made and done, i want you to know a few things. SQL Syntax in java is basically the same as PHP. Nowwe have this class, we need something to update the table with new data <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"> , so now we’re adding a new method. Reason why i use rs.update method, is to prevent sql inject by the server. So what we need now is this method:</p>
<p>[code]<br>
public static void updateHighscores(Player player) {<br>
try {<br>
String username = Utils.formatPlayerNameForDisplay(player.getUsername());<br>
ResultSet rs = executeQuery(“SELECT * FROM highscores WHERE username=’”+username+"’");</p>
<pre><code>     // Stuff will go here i define below


  } catch (SQLException ex) {
     System.out.println(ex);
  }
</code></pre>
<p>}[/code]</p>
<p>So now, to do this the easy way, we going to delete  the row of data first, then re-insert new data, to prevent things happening like multiple insertions, incorrect data, etc. To do this, we can do this:</p>
<p><code>
if (rs.next()) 
   rs.deleteRow();</code></p>
<p>So just throw that bit above or below the comment i typed inside  the method above. This will delete that row of data, if rs.next()  (Boolean, flags true if there is data matching)</p>
<p>Now that the row is deleted, we need to insert new data, but first we must move to a new row:</p>
<pre><code class="lang-auto"></code></pre>
<p>Then we do the update part:</p>
<p><code>
   rs.updateString("username", username);
   rs.updateInt("skillLevel", player.getSkills().getTotalLevel(player));
   rs.updateString("totalxp", ""+player.getSkills().getTotalXp(player)+"");</code></p>
<p>Note that we DO NOT update uid column, because it’s auto-increment, meaning that each time a new row is inserting, the value of uid is increased by 1. MySQL in Java WILL NOT insert the row without telling it to, so to do so, we use rs.insertRow()</p>
<pre><code class="lang-auto"></code></pre>
<p>So now, The entire method should look like this:</p>
<p>[code]<br>
public static void updateHighscores(Player player) {<br>
try {<br>
String username = Utils.formatPlayerNameForDisplay(player.getUsername());<br>
ResultSet rs = executeQuery(“SELECT * FROM highscores WHERE username=’”+username+"’");</p>
<pre><code>  if (rs.next()) 
     rs.deleteRow();
  rs.moveToInsertRow();
  rs.updateString("username", username);
  rs.updateInt("skillLevel", player.getSkills().getTotalLevel(player));
  rs.updateString("totalxp", ""+player.getSkills().getTotalXp(player)+"");
  rs.insertRow();


  } catch (SQLException ex) {
     System.out.println(ex);
  }
</code></pre>
<p>}[/code]</p>
<p>There are several ways to get the highscores to update for each player, but first we must make the connection to the MySQL Database. We’re doing so in Launcher.java (Or the server’s main launch class)</p>
<p>First we need to declare this in the main launch class:</p>
<pre><code class="lang-auto"></code></pre>
<p>Then, in the main method, we need to specify the details for the database:</p>
<pre><code class="lang-auto"></code></pre>
<p>Just edit the part that says “EDIT_PASS_HERE” by replacing it with your MySQL Password that you made way earlier. Keep the quotes and just replace the letters <img src="https://forum.moparisthebest.com/images/emoji/twitter/stuck_out_tongue.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
<p>Then we need to connect by adding underneath it:</p>
<pre><code class="lang-auto"></code></pre>
<p>Done WOOT. If you’ve followed this entire tutorial properly and made your own highscores, congratulate yourself because is suck at explaining stuff and tried my hardest. If you know how to style tables and stuff, using CSS, and have made your own using this, post it here <img src="https://forum.moparisthebest.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>Here’s what mine looks like (I also made the template from scratch to match my forum :3)<br>
<img alt></p>
<p>kk my hand hurts now, im done &gt;.&lt;</p>
<p>If you need the method to get total xp that goes over Integer.MAX_VALUE here you go (2,147,483,647)</p>
<p><code>
   public String getTotalXp(Player player) {
      double totalxp = 0;
      for (double xp : player.getSkills().getXp()) {
         totalxp += xp;
      }
      NumberFormat formatter = new DecimalFormat("#######");
      return ""+formatter.format(totalxp)+"";
   }</code></p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713/1</link>
        <pubDate>Mon, 22 Apr 2013 10:22:20 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-517713-1</guid>
        <source url="https://forum.moparisthebest.com/t/mysql-php-creating-your-own-highscores-from-scratch/517713.rss">[MySQL/PHP] Creating Your Own Highscores (From Scratch)</source>
      </item>
  </channel>
</rss>
