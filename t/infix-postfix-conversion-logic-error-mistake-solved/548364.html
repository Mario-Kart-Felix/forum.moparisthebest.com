<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/infix-postfix-conversion-logic-error-mistake-solved/548364 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:05:54 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Infix -&gt; Postfix conversion, logic error/mistake [solved] - General Programming - moparisthebest.com</title>
    <meta name="description" content="Can anyone provide a little feedback as to why this isn&amp;#39;t working as expected? Perhaps I&amp;#39;m missing something or forgetting to do something really minor, if someone could look it over briefly and try to spot the mistake i&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="548364.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Infix -&gt; Postfix conversion, logic error/mistake [solved]&#39;" href="548364.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/infix-postfix-conversion-logic-error-mistake-solved/548364" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/infix-postfix-conversion-logic-error-mistake-solved/548364" />
<meta property="og:title" content="Infix -&gt; Postfix conversion, logic error/mistake [solved]" />
<meta name="twitter:title" content="Infix -&gt; Postfix conversion, logic error/mistake [solved]" />
<meta property="og:description" content="Can anyone provide a little feedback as to why this isn’t working as expected? Perhaps I’m missing something or forgetting to do something really minor, if someone could look it over briefly and try to spot the mistake it’d be greatly appreciated.  public class ReversePolishNotation {      LinkedList&lt;String&gt; stack = new LinkedList&lt;&gt;();     StringBuilder builder = new StringBuilder();      char[] operators = &quot;+-*/()&quot;.toCharArray();     char firstOperator = 0;      public static void main(String[]..." />
<meta name="twitter:description" content="Can anyone provide a little feedback as to why this isn’t working as expected? Perhaps I’m missing something or forgetting to do something really minor, if someone could look it over briefly and try to spot the mistake it’d be greatly appreciated.  public class ReversePolishNotation {      LinkedList&lt;String&gt; stack = new LinkedList&lt;&gt;();     StringBuilder builder = new StringBuilder();      char[] operators = &quot;+-*/()&quot;.toCharArray();     char firstOperator = 0;      public static void main(String[]..." />
<meta property="article:published_time" content="2014-12-09T23:17:02+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="548364.html">Infix -&gt; Postfix conversion, logic error/mistake [solved]</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/general-programming.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>General Programming</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/ohokay.html'><span itemprop='name'>ohokay</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2014-12-09T23:17:02Z'>
            <time itemprop='dateModified' datetime='2016-08-04T14:04:23Z' class='post-time'>
              August 4, 2016,  2:04pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Can anyone provide a little feedback as to why this isn’t working as expected? Perhaps I’m missing something or forgetting to do something really minor, if someone could look it over briefly and try to spot the mistake it’d be greatly appreciated.</p>
<pre><code class="lang-auto">public class ReversePolishNotation
{

    LinkedList&lt;String&gt; stack = new LinkedList&lt;&gt;();
    StringBuilder builder = new StringBuilder();

    char[] operators = "+-*/()".toCharArray();
    char firstOperator = 0;

    public static void main(String[] args)
    {
        ReversePolishNotation rpn = new ReversePolishNotation();
        String calculation = "a+((b+c)*d)-e"; // abc*d/+
        
        rpn.parse(calculation);
        System.out.println("Reverse Polish Notation for ("+ calculation + ") is: "+ rpn.format(rpn.builder));

    }

    private void parse(String calculation)
    {
        for (char c : calculation.toCharArray())
        {
            if (value(c)) {
                System.out.println("value");
                builder.append(c);
                continue;
            }
            
            for (char c1 : operators)
            {
                if (c == c1) {
                    evaluate(c1);
                }
            }
        }
        
        while (!empty()) {
            builder.append(stack.pop());
        }
    }
    
    private boolean value(char c) {
        return Character.toString(c).matches("[0-9a-zA-Z]+");
    }

    private void evaluate(char token)
    {
      
        if (token == '(' || (!empty() &amp;&amp; getPrecedence(stack.peek().charAt(0)) &lt; getPrecedence(token)) || firstOperator == 0 ) {
            stack.push(Character.toString(token));//+
            firstOperator = token;
        } else if (token == ')') {
           while (!empty() &amp;&amp; stack.peek().charAt(0) != '(') {
               builder.append(stack.pop());
           }
        } else if (!empty() &amp;&amp; getPrecedence(stack.peek().charAt(0)) &gt; getPrecedence(token)) {
            builder.append(stack.pop());
        } else if (!empty() &amp;&amp; getPrecedence(stack.peek().charAt(0)) == getPrecedence(token)) {
            builder.append(stack.pop());
            stack.push(Character.toString(token));
        } else {
            stack.push(Character.toString(token));
        }
    }

    private int getPrecedence(char c)
    {
        switch (c)
        {
            case '+':
            case '-':
                return 0;

            case '*':
            case '/':
                return 1;
            default:
                return 0;
        }
    }

    private boolean empty()
    {
        return stack.size() &lt;= 0;
    }
    
    private String format(StringBuilder sb) {
        return sb.toString().replaceAll("[()]+", "");
        
    }

}</code></pre>
<p>Input:</p>
<pre><code class="lang-auto">a+((b+c)*d)-e</code></pre>
<p>Output:</p>
<blockquote>Reverse Polish Notation for (a+((b+c)*d)-e) is: [b]abc+d*e-+[/b]</blockquote>
<p>Expected output:</p>
<blockquote>Reverse Polish Notation for (a+((b+c)*d)-e) is: [b]abc+d*+e-[/b]</blockquote>
<p>Wasn’t popping the opening braces from the stack after the loop</p>
<pre><code class="lang-auto">            if (!empty() &amp;&amp; stack.peek().charAt(0) == '(') {
                stack.pop();
            }</code></pre>
<p>Lock/delete if needed</p>
      </div>

      <meta itemprop='headline' content='Infix -&gt; Postfix conversion, logic error/mistake [solved]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/infix-postfix-conversion-logic-error-mistake-solved/548364 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:05:54 GMT -->
</html>
