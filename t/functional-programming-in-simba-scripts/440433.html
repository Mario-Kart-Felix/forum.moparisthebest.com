<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/functional-programming-in-simba-scripts/440433 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Aug 2019 09:59:37 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Functional Programming in Simba Scripts - Runescape - moparisthebest.com</title>
    <meta name="description" content="[center][size=24pt]Functional Programming in Scripts[/size] [size=24pt]by Echo_[/size][/center] 

Welcome to my third tutorial. This tutorial will focus on the functional programming paradigm and how we can use it to mak&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="440433.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Functional Programming in Simba Scripts&#39;" href="440433.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/functional-programming-in-simba-scripts/440433" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/functional-programming-in-simba-scripts/440433" />
<meta property="og:title" content="Functional Programming in Simba Scripts" />
<meta name="twitter:title" content="Functional Programming in Simba Scripts" />
<meta property="og:description" content="[center][size=24pt]Functional Programming in Scripts[/size]  [size=24pt]by Echo_[/size][/center]  Welcome to my third tutorial. This tutorial will focus on the functional programming paradigm and how we can use it to make writing and debugging Simba scripts easier. You do not have to use this paradigm to have a better script, it’s just a different way of approaching script writing. Some people may prefer this style once they learn it, and some will not. It really doesn’t matter. Note that some o..." />
<meta name="twitter:description" content="[center][size=24pt]Functional Programming in Scripts[/size]  [size=24pt]by Echo_[/size][/center]  Welcome to my third tutorial. This tutorial will focus on the functional programming paradigm and how we can use it to make writing and debugging Simba scripts easier. You do not have to use this paradigm to have a better script, it’s just a different way of approaching script writing. Some people may prefer this style once they learn it, and some will not. It really doesn’t matter. Note that some o..." />
<meta property="article:published_time" content="2012-04-23T19:27:42+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="440433.html">Functional Programming in Simba Scripts</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Echo3.html'><span itemprop='name'>Echo3</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-04-23T19:27:42Z'>
            <time itemprop='dateModified' datetime='2016-08-03T02:21:34Z' class='post-time'>
              August 3, 2016,  2:21am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[center][size=24pt]Functional Programming in Scripts[/size]<br>
[size=24pt]by Echo_[/size][/center]</p>
<p>Welcome to my third tutorial. This tutorial will focus on the functional programming paradigm and how we can use it to make writing and debugging Simba scripts easier. You do not have to use this paradigm to have a better script, it’s just a different way of approaching script writing. Some people may prefer this style once they learn it, and some will not. It really doesn’t matter. Note that some of the examples in this tutorial are only compatible with Lape and not PascalScript, so if you want to try the examples for yourself you will have to switch interpreters. So let’s get started.</p>
<p>[center][COLOR=purple][SIZE=18pt]What is Functional Programming?[/SIZE][/COLOR][/CENTER]</p>
<p><a href="http://en.wikipedia.org/wiki/Functional_programming" data-bbcode="true" rel="nofollow noopener">Functional Programming</a> is a style of programming that focuses on ideas found in lambda calculus. You do not need any previous knowledge in calculus to understand this style, but having some knowledge of math would be to your advantage.</p>
<p>Functional programming emphasizes the structural building of a program through “pure functions”. You start with a few small functions, you write functions using those functions, and the script builds up from there. Now don’t worry if you don’t know what a pure function is right now, it will all be explained later. Functional Programming also focuses on “higher-order functions” and “recursion”, which will also be explained in more detail later.</p>
<p>Functional programming doesn’t really rely upon complicated data types for its power, the main data type used is the function. Many languages have constructs that support functional programming, one of them being Pascal, but you can also find these in mixed-paradigm languages like <a href="http://www.python.org/" data-bbcode="true" rel="nofollow noopener">Python</a> and <a href="http://www.scala-lang.org/" data-bbcode="true" rel="nofollow noopener">Scala</a>. Some of my favorite programming languages with a focus on functional programming include <a href="http://clojure.org/" data-bbcode="true" rel="nofollow noopener">Clojure</a> and <a href="http://www.haskell.org/haskellwiki/Haskell" data-bbcode="true" rel="nofollow noopener">Haskell</a>. Because these languages require you to program functionally, it is much easier to implement multithreading and other features that would otherwise be hard to implement in a language with mutable data. But since Simba does not support multithreading at the moment, we won’t discuss this advantage to programming in a functional style.</p>
<p>[CENTER][COLOR=purple][SIZE=18pt]Pure Functions[/SIZE][/COLOR][/CENTER]</p>
<p>You may remember functions from your earlier math classes. An simple example would be the following:</p>
<p>f(x) = x + 2</p>
<p>Making a table of the results:</p>
<hr>
<h2>| x | f(x) |</h2>
<h2>| 0 | 2    |<br>
| 1 | 3    |<br>
| 2 | 4    |<br>
| 3 | 5    |<br>
| 4 | 6    |<br>
| 5 | 7    |</h2>
<p>As you can see, this function has one input and one output. The same input will always produce the same output. The function does not rely upon any global state to produce its result, it only relies upon its input. In functional programming, these attributes classify this function as “pure”. Any function that relies upon global variables, outside IO (this includes grabbing colors from the screen and reading files), or changing global variables is not a pure function.</p>
<p>Now the goal of functional programming is not to completely eliminate impure functions, because without IO our script wouldn’t really do anything. It would just be a black box. The goal is to limit impure functions and have most of the work done in pure functions that are controlled in the script. Since you are 100% sure of the outcome of a pure function by knowing its input, there is less searching for you when you have a bug in your script. Because at that point the only thing that could be causing the bug is outside contact, and that narrows your searching to the impure functions. It also helps to limit your use of global variables, an easy way to accomplish this is by declaring them just above your main loop and using them locally. Now this is hard for counters that need to be held throughout the runtime of the script, such as total logs chopped or whatever. But that can easily be fixed:</p>
<pre><code class="lang-auto">//LogsChopped can be accessed by every function in the script
var
  LogsChopped: Integer;

procedure BankLogs;
begin
  IncEx(LogsChopped, 28);
end;

begin
  BankLogs;
end.</code></pre>
<pre><code class="lang-auto">procedure BankLogs(var LogsChopped: Integer);
begin
  IncEx(LogsChopped, 28);
end;

//LogsChopped can only be accessed by the main loop
var
  LogsChopped: Integer;

begin
  BankLogs(LogsChopped);
end.</code></pre>
<p>By using this strategy you are keeping the variables in a place that they can be accessed at runtime, but they are encapsulated within the main loop and inaccessible by all other functions.</p>
<p>[CENTER][COLOR=purple][SIZE=18pt]Higher-order Functions[/SIZE][/COLOR][/CENTER]</p>
<p>And now for something interesting. Higher-order functions are functions that can take functions as arguments ore return functions as a result. Pascal has the ability to store procedures and functions in a variable so it has what we need to create higher order functions. The following will print “Hello, World!” when run:</p>
<pre><code class="lang-auto">procedure Proc;
begin
  WriteLn('Hello, World!');
end;

var
  P: procedure;

begin
  P := @Proc;
  P();
end.</code></pre>
<p>As you can see, the “@” operator points the variable P to procedure Proc. Then you can execute it by calling P as if it is a function. Keep in mind that the parenthesis are mandatory in this context.</p>
<p>So say we want to write a higher-order function that filters unwanted elements out of an array and returns the remaining elements. We could accomplish that with the following higher-order function:</p>
<pre><code class="lang-auto">function Filter(P: function(I: Integer): Boolean; A: array of Integer): array of Integer;
var
  J: Integer;
begin
  for J := 0 to High(A) do
    if P(A[J]) then begin
      SetLength(Result, Length(Result) + 1);
      Result[High(Result)] := A[J];
    end;
end;</code></pre>
<p>P is the predicate, or test function. It is run on each element of A, testing each element and removing it if it doesn’t fit the requirements. This function is quite powerful because it is so abstract. You could pass in a million different predicates to fit your needs, the possibilities are endless. Here’s an example of removing all odd numbers, all numbers less than five, and all numbers that aren’t an even square:</p>
<pre><code class="lang-auto">function Even(I: Integer): Boolean;
begin
  Result := I mod 2 = 0;
end;

function LessThanFive(I: Integer): Boolean;
begin
  Result := I &lt; 5;
end;

function EvenSquare(I: Integer): Boolean;
begin
  if Int(Sqrt(I)) &lt;&gt; Sqrt(I) then
    Result := False
  else
    Result := True;
end;

var
  A, Evens, LessThanFives, EvenSquares: array of Integer;

begin
  A := [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
  Evens := Filter(@Even, A);
  LessThanFives := Filter(@LessThanFive, A);
  EvenSquares := Filter(@EvenSquare, A);
end.</code></pre>
<p>As I said before, higher-order functions are also functions that return procedures or functions. Here is an example of this:</p>
<pre><code class="lang-auto">procedure Hello;
begin
  WriteLn('Hello, World!');
end;

procedure Goodbye;
begin
  WriteLn('Goodbye, World!');
end;

function Greeting(Morning: Boolean): procedure;
begin
  if Morning then
    Result := @Hello
  else
    Result := @Goodbye;
end;

var
  Say: procedure;

begin
  Say := Greeting(True);
  //Prints Hello, World!
  Say();
end.</code></pre>
<p>And that’s all there is to it <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"> Higher order functions can slim down your scripts by creating a generic algorithm and passing in a predicate for that algorithm to work with.</p>
<p>[CENTER][COLOR=purple][SIZE=18pt]Recursion[/SIZE][/COLOR][/CENTER]</p>
<p>Recursion is a method of creating looping behavior without using looping constructs (for and while loops for example). In a language with built in looping constructs like Pascal, recursion isn’t really a requirement to script in a functional style. Believe it or not, there are languages (Haskell being one of them) that rely completely upon recursion to provide looping behavior in programs. Since understanding recursion is still important programming knowledge, here’s how it works.</p>
<p>Recursion emulates looping by a function calling itself. There are different kinds of recursion. Linear recursion is a loop where the function can only call itself once per call. A perfect example of linear recursion would be an implementation of Pow:</p>
<pre><code class="lang-auto">function Power(Base: Extended; Exponent: Cardinal): Extended;
begin
  if Exponent = 0 then
    Result := 1
  else
    Result := Base * Power(Base, Exponent - 1);
end;</code></pre>
<p>This may look confusing at first, but it makes perfect mathematical sense. We know that if the exponent is 0 then the answer is 1. We use this as the edge condition of the recursion. Edge conditions are meant to stop recursive calls from entering infinite loops by providing a condition that will eventually be met.</p>
<p>If the exponent isn’t 0 then the answer is the base times the power of the base to the decremented exponent. We must decrement the exponent so that it eventually reaches the edge condition. You can think of it in this way for the problem 2 to the power of 8:</p>
<blockquote>Power(2, 8)
0: Power(2, 8)
  1: Power(2, 7)
    2: Power(2, 6)
      3: Power(2, 5)
        4: Power(2, 4)
          5: Power(2, 3)
            6: Power(2, 2)
              7: Power(2, 1)
                8: Power(2, 0)
                8: Result := 1
              7: Result := 2
            6: Result := 4
          5: Result := 8
        4: Result := 16
      3: Result := 32
    2: Result := 64
  1: Result := 128
0: Result := 256
256</blockquote>
<p>Once the function reaches the edge condition, it “bounces back” through the call stack and eventually returns the answer <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>Another way to approach linear recursion is using tail recursion. Tail recursion is often more effective for languages that feature tail call optimization, and I am unsure if either the PascalScript or Lape interpreters feature this. But this is how it works for the Power function we wrote earlier:</p>
<pre><code class="lang-auto">function Power(B: Extended; E: Cardinal; A: Extended = 1.0): Extended;
begin
  if E = 0 then
    Result := A
  else
    Result := Power(B, E - 1, A * B);
end;</code></pre>
<p>This function uses the default parameters feature in Lape. Instead of multiplying the base by the result of the function, it just returns to the top of the function with new parameters. That tail call is what makes it more effective. With tail call optimization, the function will just return to the top of the function rather than making calls to the function and saving the parameters for each call.</p>
<p>In the Power function, we see that the result is “accumulated” in A, A is the accumulator variable. It holds the value of the function after each call. The invocation would look something like this:</p>
<blockquote>Power(2, 8)
0: Power(2, 8, 1)
  1: Power(2, 7, 2)
    2: Power(2, 6, 4)
      3: Power(2, 5, 8)
        4: Power(2, 4, 16)
          5: Power(2, 3, 32)
            6: Power(2, 2, 64)
              7: Power(2, 1, 128)
                8: Power(2, 0, 256)
                8: Result := 256
              7: Result := 256
            6: Result := 256
          5: Result := 256
        4: Result := 256
      3: Result := 256
    2: Result := 256
  1: Result := 256
0: Result := 256
256</blockquote>
<p>Multiple recursion is also possible, but it can get pretty slow. An example would be computing the Fibonacci numbers:</p>
<pre><code class="lang-auto">function Fibonacci(I: Cardinal): Cardinal;
begin
  if I &lt; 2 then
    Result := I
  else
    Result := Fibonacci(I - 1) + Fibonacci(I - 2);
end;</code></pre>
<p>As the call stack gets deeper, the function takes much longer to return a result. So recursion is not always a good way of approaching an algorithm.</p>
<p>[CENTER][COLOR=purple][SIZE=18pt]Conclusion[/SIZE][/COLOR][/CENTER]</p>
<p>This tutorial is shorter than I expected, but I will probably add more code examples and explanations later. Functional programming is a large topic, there are entire books dedicated to the subject. I hope you learned something, and if you have any questions or comments feel free to post <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
      </div>

      <meta itemprop='headline' content='Functional Programming in Simba Scripts'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Wizzup.html'><span itemprop='name'>Wizzup</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-04-25T09:26:40Z'>
            <time itemprop='dateModified' datetime='2016-08-03T02:23:21Z' class='post-time'>
              August 3, 2016,  2:23am
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Nice. <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
      </div>

      <meta itemprop='headline' content='Functional Programming in Simba Scripts'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/functional-programming-in-simba-scripts/440433 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Aug 2019 09:59:38 GMT -->
</html>
