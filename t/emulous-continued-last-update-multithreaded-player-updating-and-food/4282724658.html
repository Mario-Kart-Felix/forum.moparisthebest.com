<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/emulous-continued-last-update-multithreaded-player-updating-and-food/428272?page=2 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Aug 2019 15:16:33 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Emulous Continued: Last Update - Multithreaded player updating and food - Runescape - moparisthebest.com</title>
    <meta name="description" content="Some people may have seen my project asylum(http://www.moparisthebest.com/smf/index.php/topic,522952), others might not have seen it. 

Asylum is based off of emulous (which I can sadly say is not used much anymore). As a re&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="4282724658.html?page=2" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Emulous Continued: Last Update - Multithreaded player updating and food&#39;" href="428272.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://img403.imageshack.us/img403/3323/screenshotbe.png" />
<meta property="og:image" content="http://img403.imageshack.us/img403/3323/screenshotbe.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/emulous-continued-last-update-multithreaded-player-updating-and-food/428272?page=2" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/emulous-continued-last-update-multithreaded-player-updating-and-food/428272?page=2" />
<meta property="og:title" content="Emulous Continued: Last Update - Multithreaded player updating and food" />
<meta name="twitter:title" content="Emulous Continued: Last Update - Multithreaded player updating and food" />
<meta property="og:description" content="[quote=‚ÄúThe Wanderer, post:18, topic:428272‚Äù]Lol. You helped me fix something that was bugging me so bad. Did not realize that update blocks had to be in specific order. Then I read this in PlayerUpdating, as I was just reading Emulous‚Äôs to double check my masks and I facepalmed big.   Thanks haha. üôÇ  Edit: Where is server -&gt; client packets on this? Couldn‚Äôt seem to find them.[/quote]  Server --&gt; client packets are in random places which is in my opinion one of the greatest things I..." />
<meta name="twitter:description" content="[quote=‚ÄúThe Wanderer, post:18, topic:428272‚Äù]Lol. You helped me fix something that was bugging me so bad. Did not realize that update blocks had to be in specific order. Then I read this in PlayerUpdating, as I was just reading Emulous‚Äôs to double check my masks and I facepalmed big.   Thanks haha. üôÇ  Edit: Where is server -&gt; client packets on this? Couldn‚Äôt seem to find them.[/quote]  Server --&gt; client packets are in random places which is in my opinion one of the greatest things I..." />
<meta property="article:published_time" content="2012-01-08T22:24:28+00:00" />
<meta property="og:ignore_canonical" content="true" />

      <link rel="prev" href="428272.html">


    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="428272.html">Emulous Continued: Last Update - Multithreaded player updating and food</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Advocatus.html'><span itemprop='name'>Advocatus</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-01-08T22:24:28Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:10:19Z' class='post-time'>
              August 2, 2016,  3:10pm
            </time>
        <span itemprop='position'>#21</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=‚ÄúThe Wanderer, post:18, topic:428272‚Äù]Lol. You helped me fix something that was bugging me so bad. Did not realize that update blocks had to be in specific order. Then I read this in PlayerUpdating, as I was just reading Emulous‚Äôs to double check my masks and I facepalmed big.</p>
<pre><code class="lang-auto"></code></pre>
<p>Thanks haha. <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>Edit: Where is server -&gt; client packets on this? Couldn‚Äôt seem to find them.[/quote]</p>
<p>Server --&gt; client packets are in random places which is in my opinion one of the greatest things I despise about winterlove souces (actionsender ftw).</p>
<p>Heres my actionSender from asylum.</p>
<p>Ignore the write2(, I had that because as I was making these seperate methods I did that to distinguish them from the unmodded packets which are still write(</p>
<p>Also, the send map region will not work because it was modded to send the XTEA keys (and the client modded to decrypt the maps).</p>
<pre><code class="lang-auto">public class ActionSender {

	private Player player;

	public ActionSender(Player player) {
		this.player = player;
	}

	
	// @param palette The palette of map regions, int[13][13][2] array.
	public ActionSender sendConstructMapRegion(int[][][] palette) {
		player.setLastKnownRegion(player.getLocation());
		PacketBuilder bldr = new PacketBuilder(241, Type.VARIABLE_SHORT);
		bldr.putShortA(player.getLocation().getRegionY() + 6);
		bldr.startBitAccess();
		for(int z = 0; z &lt; 4; z++) {
			for(int x = 0; x &lt; 13; x++) {
				for(int y = 0; y &lt; 13; y++) {
					boolean flag = z == player.getLocation().getZ();
					bldr.putBits(1, flag ? 1 : 0);
					if(flag) {
						bldr.putBits(26, palette[x][y][0] &lt;&lt; 14 | palette[x][y][1] &lt;&lt; 3);
					}
				}
			}
		}
		bldr.finishBitAccess();
		bldr.putShort(player.getLocation().getRegionX() + 6);
		player.getSession().write(bldr.toPacket());
		return this;
	}
	
	public void sendMessage(String s) {
		PacketBuilder packetOut = new PacketBuilder(253, Packet.Type.VARIABLE);
		packetOut.putRS2String(s);
		player.write2(packetOut.toPacket());
	}

	public void walkableInterface(int id) {
		player.write2(new PacketBuilder(208).putLEShort(id).toPacket());
	}

	public void showInterface(int interfaceid) {
		player.write2(new PacketBuilder(97).putShort(interfaceid).toPacket());
	}

	public void sendFrame185(int Frame) {
		player.write2(new PacketBuilder(185).putLEShortA(Frame).toPacket());
	}

	public void sendFrame248(int MainFrame, int SubFrame) {
		player.write2(new PacketBuilder(248).putShortA(MainFrame).putShort(SubFrame).toPacket());
	}

	public void sendFrame246(int MainFrame, int SubFrame, int SubFrame2) {
		player.write2(new PacketBuilder(246).putLEShort(MainFrame).putShort(SubFrame).putShort(SubFrame2).toPacket());
	}

	public void sendFrame171(int MainFrame, int SubFrame) {
		player.write2(new PacketBuilder(171).addByte((byte) MainFrame).putShort(SubFrame).toPacket());
	}

	public void sendFrame200(int MainFrame, int SubFrame) {
		player.write2(new PacketBuilder(200).putShort(MainFrame).putShort(SubFrame).toPacket());
	}

	public void setPrivateMessaging(int i) { // friends and ignore list status
		player.write2(new PacketBuilder(221).addByte((byte) i).toPacket());
	}

	public void setChatOptions(int publicChat, int privateChat, int tradeBlock) {
		player.write2(new PacketBuilder(206).addByte((byte) publicChat).addByte((byte) privateChat).addByte((byte) tradeBlock).toPacket());
	}

	public void sendFrame75(int MainFrame, int SubFrame) {
		player.write2(new PacketBuilder(75).putLEShortA(MainFrame).putLEShortA(SubFrame).toPacket());
	}

	public void sendFrame164(int Frame) {
		player.write2(new PacketBuilder(164).putLEShort(Frame).toPacket());
	}

	public void sendFrame87(int id, int state) {
		player.write2(new PacketBuilder(87).putLEShort(id).putMEInt(state).toPacket());
	}

	public void createObjectHints(int x, int y, int height, int pos) {
		player.write2(new PacketBuilder(254).addByte((byte) pos).putShort(x).putShort(y).addByte((byte) height).toPacket());
	}

	public void createPlayerHints(int type, int id) {
		player.write2(new PacketBuilder(254).addByte((byte) type).putShort(id).putTriByte(0).toPacket());
	}

	public void sendPM(long name, int rights, byte[] chatmessage, int messagesize) {
		player.write2(new PacketBuilder(196, Packet.Type.VARIABLE).putLong(name).putInt(player.lastChatId++).addByte((byte) rights).addBytes(chatmessage).toPacket());
	}

	public void sendFrame70(int i, int o, int id) {
		player.write2(new PacketBuilder(70).putShort(i).putLEShort(o).putLEShort(id).toPacket());
	}

	public void closeAllWindows() {
		player.write2(new PacketBuilder(219).toPacket());
	}

	public void sendFrame36(int id, int state) {
		player.write2(new PacketBuilder(36).putLEShort(id).addByte((byte) state).toPacket());
	}

	public void sendFrame107() {
		player.write2(new PacketBuilder(107).toPacket());
	}

	public void setSkillLevel(int skillNum, int currentLevel, int XP) {
		player.write2(new PacketBuilder(134).addByte((byte) skillNum).putMEInt(XP).addByte((byte) currentLevel).toPacket());
	}

	public void sendLink(String s) {
		player.write2(new PacketBuilder(187, Packet.Type.VARIABLE_SHORT).putRS2String(s).toPacket());
	}

	public void sendFrame126(String s, int id) {
		player.write2(new PacketBuilder(126, Packet.Type.VARIABLE_SHORT).putRS2String(s).putShortA(id).toPacket());
	}

	public void setSidebarInterface(int menuId, int form) {
		PacketBuilder packetOut = new PacketBuilder(71);
		packetOut.putShort(form);
		packetOut.putByteA(menuId);
		player.write2(packetOut.toPacket());
	}

	public void stillGfx(int id, int x, int y, int height, int time) {
		player.write2(new PacketBuilder(85).putByteC((y - (player.getLastKnownRegion().getRegionY2() * 8))).putByteC((x - (player.getLastKnownRegion().getRegionX2() * 8))).toPacket());
		player.write2(new PacketBuilder(4).addByte((byte) 0).putShort(id).addByte((byte) height).putShort(time).toPacket());
	}

	public void sendPacket34A(int interfaceId, int wearID, int wearAmount, int targetSlot) {
		PacketBuilder packetOut = new PacketBuilder(34, Packet.Type.VARIABLE_SHORT);
		packetOut.putShort(interfaceId);
		packetOut.addByte((byte) targetSlot);
		packetOut.putShort(wearID + 1);

		if (wearAmount &gt; 254) {
			packetOut.addByte((byte) 255);
			packetOut.putInt(wearAmount);
		} else {
			packetOut.addByte((byte) wearAmount);
		}
		player.write2(packetOut.toPacket());
		// TODO Auto-generated method stub
	}

	public void sendPacket34B(int interfaceId, int wearID, int wearAmount, int targetSlot) {
		PacketBuilder packetOut = new PacketBuilder(34, Packet.Type.VARIABLE_SHORT);
		packetOut.putShort(interfaceId);
		packetOut.addByte((byte) targetSlot);
		packetOut.putShort(wearID);

		if (wearAmount &gt; 254) {
			packetOut.addByte((byte) 255);
			packetOut.putInt(wearAmount);
		} else {
			packetOut.addByte((byte) wearAmount);
		}
		player.write2(packetOut.toPacket());
		// TODO Auto-generated method stub
	}

	public void sendFrame34(int id, int slot, int column, int amount) {
		player.write2(new PacketBuilder(34, Packet.Type.VARIABLE_SHORT)// init
																		// item
																		// to
																		// smith
																		// screen
		.putShort(column) // Column Across Smith Screen
		.addByte((byte) 4) // Total Rows?
		.putInt(slot) // Row Down The Smith Screen
		.putShort(id + 1) // item
		.addByte((byte) amount) // how many there are?
		.toPacket());

	}

	public void createGroundItem(int itemID, int itemX, int itemY, int itemAmount) {
		PacketBuilder p = new PacketBuilder(85);
		p.putByteC((itemY - (player.getLastKnownRegion().getRegionY2() * 8)));
		p.putByteC((itemX - (player.getLastKnownRegion().getRegionX2() * 8)));
		player.write2(p.toPacket());
		PacketBuilder p2 = new PacketBuilder(44);
		p2.putLEShortA(itemID);
		p2.putShort(itemAmount);
		p2.addByte((byte) 0);
		player.write2(p2.toPacket());
	}

	public void removeGroundItem(int itemID, int itemX, int itemY, int Amount) {
		PacketBuilder packetOut = new PacketBuilder(85);
		packetOut.putByteC((itemY - (player.getLastKnownRegion().getRegionY2() * 8)));
		packetOut.putByteC((itemX - (player.getLastKnownRegion().getRegionX2() * 8)));
		player.write2(packetOut.toPacket());
		PacketBuilder packetOut2 = new PacketBuilder(156);
		packetOut2.putByteS((byte) 0);
		packetOut2.putShort(itemID);
		player.write2(packetOut2.toPacket());
	}

	public void sendMapRegion() {
		PacketBuilder packet = new PacketBuilder(73, Packet.Type.VARIABLE_SHORT);
		packet.putShortA(player.getLocation().getRegionX2() + 6).putShort(player.getLocation().getRegionY2() + 6);
		player.setLastKnownRegion(player.getLocation());
		player.setMapRegionChanging(false);
		// TODO:

		boolean forceSend = true;
		if ((((player.getLocation().getRegionX() / 8) == 48) || ((player.getLocation().getRegionX() / 8) == 49)) &amp;&amp; ((player.getLocation().getRegionY() / 8) == 48)) {
			forceSend = false;
		}
		if (((player.getLocation().getRegionX() / 8) == 48) &amp;&amp; ((player.getLocation().getRegionY() / 8) == 148)) {
			forceSend = false;
		}
		for (int xCalc = (player.getLocation().getRegionX() - 6) / 8; xCalc &lt;= ((player.getLocation().getRegionX() + 6) / 8); xCalc++) {
			for (int yCalc = (player.getLocation().getRegionY() - 6) / 8; yCalc &lt;= ((player.getLocation().getRegionY() + 6) / 8); yCalc++) {
				short region = (short) (yCalc + (xCalc &lt;&lt; 8));
				if (forceSend || ((yCalc != 49) &amp;&amp; (yCalc != 149) &amp;&amp; (yCalc != 147) &amp;&amp; (xCalc != 50) &amp;&amp; ((xCalc != 49) || (yCalc != 47)))) {
				/*	int[] mapData = MapData.getMapData().get(region);

					if (mapData == null) {
						mapData = new int[4];
					}
					for (int i = 0; i &lt; 4; i++)
						packet.putInt(mapData[i]);*/
					for (int i = 0; i &lt; 4; i++)
						packet.putInt(1);
				}
			}
		}
		player.write(packet.toPacket());
	}

	/**
	 * Creating projectile
	 * 
	 * @param x
	 *            TODO
	 * @param y
	 *            TODO
	 * @param offX
	 *            TODO
	 * @param offY
	 *            TODO
	 * @param speed
	 *            TODO
	 * @param gfxMoving
	 *            TODO
	 * @param startHeight
	 *            TODO
	 * @param endHeight
	 *            TODO
	 * @param lockon
	 *            TODO
	 **/
	public void createProjectile(int x, int y, int offX, int offY, int speed, int gfxMoving, int startHeight, int endHeight, int lockon) {
		player.write2(new PacketBuilder(85).putByteC((y - (player.getLastKnownRegion().getRegionY2() * 8)) - 2).putByteC((x - (player.getLastKnownRegion().getRegionX2() * 8)) - 3).toPacket());
		PacketBuilder packet = new PacketBuilder(117);
		packet.addByte((byte) 50);
		packet.addByte((byte) offY);
		packet.addByte((byte) offX);
		packet.putShort(lockon);
		packet.putShort(gfxMoving);
		packet.addByte((byte) startHeight);
		packet.addByte((byte) endHeight);
		packet.putShort(51);
		packet.putShort(speed);
		packet.addByte((byte) 16);
		packet.addByte((byte) 64);
		player.write2(packet.toPacket());
	}

	public void createProjectile2(int x, int y, int offX, int offY, int speed, int gfxMoving, int startHeight, int endHeight, int lockon, int slope) {
		player.write2(new PacketBuilder(85).putByteC((y - (player.getLastKnownRegion().getRegionY2() * 8)) - 2).putByteC((x - (player.getLastKnownRegion().getRegionX2() * 8)) - 3).toPacket());
		PacketBuilder packet = new PacketBuilder(117);
		packet.addByte((byte) 50);
		packet.addByte((byte) offY);
		packet.addByte((byte) offX);
		packet.putShort(lockon);
		packet.putShort(gfxMoving);
		packet.addByte((byte) startHeight);
		packet.addByte((byte) endHeight);
		packet.putShort(51);
		packet.putShort(speed);
		packet.addByte((byte) slope);
		packet.addByte((byte) 64);
		player.write2(packet.toPacket());
	}

	/**
	 * Show an arrow icon on the selected player.
	 * 
	 * @param i
	 *            TODO
	 * @param j
	 *            TODO
	 * @param k
	 *            TODO
	 * @param l
	 *            TODO
	 * @Param i - Either 0 or 1; 1 is arrow, 0 is none.
	 * @Param j - The player/Npc that the arrow will be displayed above.
	 * @Param k - Keep this set as 0
	 * @Param l - Keep this set as 0
	 */
	public void drawHeadicon(int i, int j, int k, int l) {
		PacketBuilder packet = new PacketBuilder(254);
		packet.addByte((byte) i);
		if (i == 1 || i == 10) {
			packet.putShort(j).putShort(k).addByte((byte) l);
		} else {
			packet.putShort(k).putShort(l).addByte((byte) j);
		}
		player.write2(packet.toPacket());
	}

	public void loadPM(long playerName, int world) {
		if (world != 0) {
			world += 9;
		} else if (!Config.WORLD_LIST_FIX) {
			world += 1;
		}
		player.write2(new PacketBuilder(50).putLong(playerName).addByte((byte) world).toPacket());
	}

	/**
	 * Objects, add and remove
	 * 
	 * @param objectId
	 *            TODO
	 * @param objectX
	 *            TODO
	 * @param objectY
	 *            TODO
	 * @param face
	 *            TODO
	 * @param objectType
	 *            TODO
	 **/
	public void sendObject(int objectId, int objectX, int objectY, int face, int objectType) {
		player.write2(new PacketBuilder(85).putByteC((objectY - (player.getLastKnownRegion().getRegionY2() * 8))).putByteC((objectX - (player.getLastKnownRegion().getRegionX2() * 8))).toPacket());
		player.write2(new PacketBuilder(101).putByteC((objectType &lt;&lt; 2) + (face &amp; 3)).addByte((byte) 0).toPacket());
		if (objectId != -1) // removing
			player.write2(new PacketBuilder(151).putByteS((byte) 0).putLEShort(objectId).putByteS((byte) ((objectType &lt;&lt; 2) + (face &amp; 3))).toPacket());
	}

	public void sendFrame109() {
		player.write2(new PacketBuilder(109).toPacket());
	}

	public void sendFrame1() {
		player.write2(new PacketBuilder(1).toPacket());
	}

	public void sendFrame27() {
		player.write2(new PacketBuilder(27).toPacket());
	}

	public void sendFrame249(int i) {
		player.write2(new PacketBuilder(249).putByteA(i).putLEShortA(player.getIndex()).toPacket());
	}
}</code></pre>
<p>[quote=‚ÄúAeolian, post:19, topic:428272‚Äù]You have earned my respect just by posting this thread. As I‚Äôve said throughout the many years spent on this site, if you‚Äôre not here to share ideas, code and knowledge open source then get the fuck out.</p>
<p>You have my support my good sir.[/quote]</p>
<p>Thanks I guess, but I am not a diehard open source fanatic. Over the last few years I havn‚Äôt really released anything‚Ä¶</p>
      </div>

      <meta itemprop='headline' content='Emulous Continued: Last Update - Multithreaded player updating and food'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/chillwitm888.html'><span itemprop='name'>chillwitm888</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-01-08T22:42:47Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:10:21Z' class='post-time'>
              August 2, 2016,  3:10pm
            </time>
        <span itemprop='position'>#22</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I like how you have a rune sword replacing a crotch, it‚Äôs genius!<br>
I support all the way</p>
      </div>

      <meta itemprop='headline' content='Emulous Continued: Last Update - Multithreaded player updating and food'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/asshole_rule.html'><span itemprop='name'>asshole_rule</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-01-09T01:40:35Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:10:41Z' class='post-time'>
              August 2, 2016,  3:10pm
            </time>
        <span itemprop='position'>#23</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="21" data-topic="428272">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/advocatus/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> Advocatus:</div>
<blockquote>
<p>Also, the send map region will not work because it was modded to send the XTEA keys (and the client modded to decrypt the maps).</p>
</blockquote>
</aside>
<p>Lame‚Ä¶ so you can‚Äôt fix it? <img src="../../images/emoji/twitter/frowningae52.png?v=5" title=":frowning:" class="emoji" alt=":frowning:"></p>
<p>Edit:<br>
you‚Äôre talking about the sendConstructMapRegion right? The one for Construction.</p>
      </div>

      <meta itemprop='headline' content='Emulous Continued: Last Update - Multithreaded player updating and food'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Advocatus.html'><span itemprop='name'>Advocatus</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-01-09T04:35:07Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:10:56Z' class='post-time'>
              August 2, 2016,  3:10pm
            </time>
        <span itemprop='position'>#24</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=‚Äúasshole_rule, post:23, topic:428272‚Äù][quote author=Advocatus link=topic=530961.msg3881489#msg3881489 date=1326061468]<br>
Also, the send map region will not work because it was modded to send the XTEA keys (and the client modded to decrypt the maps).<br>
[/quote]</p>
<p>Lame‚Ä¶ so you can‚Äôt fix it? <img src="../../images/emoji/twitter/frowningae52.png?v=5" title=":frowning:" class="emoji" alt=":frowning:"></p>
<p>Edit:<br>
you‚Äôre talking about the sendConstructMapRegion right? The one for Construction.[/quote]</p>
<p>I was talking about this</p>
<pre><code class="lang-auto">        public void sendMapRegion() {
                PacketBuilder packet = new PacketBuilder(73, Packet.Type.VARIABLE_SHORT);
                packet.putShortA(player.getLocation().getRegionX2() + 6).putShort(player.getLocation().getRegionY2() + 6);
                player.setLastKnownRegion(player.getLocation());
                player.setMapRegionChanging(false);
                // TODO:

                boolean forceSend = true;
                if ((((player.getLocation().getRegionX() / 8) == 48) || ((player.getLocation().getRegionX() / 8) == 49)) &amp;&amp; ((player.getLocation().getRegionY() / 8) == 48)) {
                        forceSend = false;
                }
                if (((player.getLocation().getRegionX() / 8) == 48) &amp;&amp; ((player.getLocation().getRegionY() / 8) == 148)) {
                        forceSend = false;
                }
                for (int xCalc = (player.getLocation().getRegionX() - 6) / 8; xCalc &lt;= ((player.getLocation().getRegionX() + 6) / 8); xCalc++) {
                        for (int yCalc = (player.getLocation().getRegionY() - 6) / 8; yCalc &lt;= ((player.getLocation().getRegionY() + 6) / 8); yCalc++) {
                                short region = (short) (yCalc + (xCalc &lt;&lt; 8));
                                if (forceSend || ((yCalc != 49) &amp;&amp; (yCalc != 149) &amp;&amp; (yCalc != 147) &amp;&amp; (xCalc != 50) &amp;&amp; ((xCalc != 49) || (yCalc != 47)))) {
                                /*        int[] mapData = MapData.getMapData().get(region);

                                        if (mapData == null) {
                                                mapData = new int[4];
                                        }
                                        for (int i = 0; i &lt; 4; i++)
                                                packet.putInt(mapData[i]);*/
                                        for (int i = 0; i &lt; 4; i++)
                                                packet.putInt(1);
                                }
                        }
                }
                player.write(packet.toPacket());
        }</code></pre>
      </div>

      <meta itemprop='headline' content='Emulous Continued: Last Update - Multithreaded player updating and food'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Ares1.html'><span itemprop='name'>Ares1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-01-09T05:15:57Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:10:58Z' class='post-time'>
              August 2, 2016,  3:10pm
            </time>
        <span itemprop='position'>#25</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Good luck Matt <img src="../../images/emoji/twitter/smileyae52.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"></p>
      </div>

      <meta itemprop='headline' content='Emulous Continued: Last Update - Multithreaded player updating and food'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/the_wanderer.html'><span itemprop='name'>the_wanderer</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-01-09T08:59:19Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:11:07Z' class='post-time'>
              August 2, 2016,  3:11pm
            </time>
        <span itemprop='position'>#26</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Oh lord. I forgot about how winterlove named them sendFrame###. <img src="../../images/emoji/twitter/stuck_out_tongueae52.png?v=5" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"> Good luck on this. Emulous was one of those decent winterlove bases, nice seeing someone improve it.</p>
      </div>

      <meta itemprop='headline' content='Emulous Continued: Last Update - Multithreaded player updating and food'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/asshole_rule.html'><span itemprop='name'>asshole_rule</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-01-09T21:09:42Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:11:42Z' class='post-time'>
              August 2, 2016,  3:11pm
            </time>
        <span itemprop='position'>#27</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=‚ÄúAdvocatus, post:24, topic:428272‚Äù][quote author=asshole_rule link=topic=530961.msg3881714#msg3881714 date=1326073235]</p>
<aside class="quote">
<blockquote>
<p>Also, the send map region will not work because it was modded to send the XTEA keys (and the client modded to decrypt the maps).</p>
</blockquote>
</aside>
<p>Lame‚Ä¶ so you can‚Äôt fix it? <img src="../../images/emoji/twitter/frowningae52.png?v=5" title=":frowning:" class="emoji" alt=":frowning:"></p>
<p>Edit:<br>
you‚Äôre talking about the sendConstructMapRegion right? The one for Construction.<br>
[/quote]</p>
<p>I was talking about this</p>
<p>[code]<br>
public void sendMapRegion() {<br>
PacketBuilder packet = new PacketBuilder(73, Packet.Type.VARIABLE_SHORT);<br>
packet.putShortA(player.getLocation().getRegionX2() + 6).putShort(player.getLocation().getRegionY2() + 6);<br>
player.setLastKnownRegion(player.getLocation());<br>
player.setMapRegionChanging(false);<br>
// TODO:</p>
<pre><code>            boolean forceSend = true;
            if ((((player.getLocation().getRegionX() / 8) == 48) || ((player.getLocation().getRegionX() / 8) == 49)) &amp;&amp; ((player.getLocation().getRegionY() / 8) == 48)) {
                    forceSend = false;
            }
            if (((player.getLocation().getRegionX() / 8) == 48) &amp;&amp; ((player.getLocation().getRegionY() / 8) == 148)) {
                    forceSend = false;
            }
            for (int xCalc = (player.getLocation().getRegionX() - 6) / 8; xCalc &lt;= ((player.getLocation().getRegionX() + 6) / 8); xCalc++) {
                    for (int yCalc = (player.getLocation().getRegionY() - 6) / 8; yCalc &lt;= ((player.getLocation().getRegionY() + 6) / 8); yCalc++) {
                            short region = (short) (yCalc + (xCalc &lt;&lt; 8));
                            if (forceSend || ((yCalc != 49) &amp;&amp; (yCalc != 149) &amp;&amp; (yCalc != 147) &amp;&amp; (xCalc != 50) &amp;&amp; ((xCalc != 49) || (yCalc != 47)))) {
                            /*        int[] mapData = MapData.getMapData().get(region);

                                    if (mapData == null) {
                                            mapData = new int[4];
                                    }
                                    for (int i = 0; i &lt; 4; i++)
                                            packet.putInt(mapData[i]);*/
                                    for (int i = 0; i &lt; 4; i++)
                                            packet.putInt(1);
                            }
                    }
            }
            player.write(packet.toPacket());
    }
</code></pre>
<p>[/code][/quote]</p>
<p>Oh haha :o</p>
<p>So can you manage to get the one for construction working? I talked to you on msn about this with Rodrigo, but I don‚Äôt remember if you said you had it working or not.</p>
      </div>

      <meta itemprop='headline' content='Emulous Continued: Last Update - Multithreaded player updating and food'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Advocatus.html'><span itemprop='name'>Advocatus</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-01-11T05:03:41Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:13:23Z' class='post-time'>
              August 2, 2016,  3:13pm
            </time>
        <span itemprop='position'>#28</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote quote-modified" data-post="27" data-topic="428272">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/asshole_rule/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> asshole_rule:</div>
<blockquote>
<p>So can you manage to get the one for construction working? I talked to you on msn about this with Rodrigo, but I don‚Äôt remember if you said you had it working or not.</p>
</blockquote>
</aside>
<p>I think I did, Ill look for the server code.</p>
<p>@ Topic.<br>
I had forgotten when I wrote this that the bytebuffer read methods were naturally big endian so I will be cleaning out some of the misc bytebuffer utility.</p>
<p>Features to come:<br>
Fight pits.<br>
Fight caves.<br>
Pest control (possibly).</p>
      </div>

      <meta itemprop='headline' content='Emulous Continued: Last Update - Multithreaded player updating and food'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/asshole_rule.html'><span itemprop='name'>asshole_rule</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-01-14T01:11:27Z'>
            <time itemprop='dateModified' datetime='2016-08-02T15:16:58Z' class='post-time'>
              August 2, 2016,  3:16pm
            </time>
        <span itemprop='position'>#29</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>bump :o</p>
      </div>

      <meta itemprop='headline' content='Emulous Continued: Last Update - Multithreaded player updating and food'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>

  <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
      <span itemprop='name'><a rel="prev" itemprop="url" href="428272.html">‚Üê previous page</a></span>
  </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/emulous-continued-last-update-multithreaded-player-updating-and-food/428272?page=2 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Aug 2019 15:16:33 GMT -->
</html>
