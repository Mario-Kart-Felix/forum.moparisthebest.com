<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Quick glance at ratio communication betweem BitTorrent Client &amp; Tracker</title>
    <link>https://forum.moparisthebest.com/t/quick-glance-at-ratio-communication-betweem-bittorrent-client-tracker/316768</link>
    <description>Basically this thread should inform the reader how ratios and other information is sent to the tracker by the BitTorrent client. To do this, we need to intercept the data being sent so we can examine what exactly is going on during the transaction. This thread only covers what is being sent, not received.

Below is a simple proxy that will print the information sent by the client to the tracker:
[code]
package org.mitb.interceptor;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.ServerSocket;
import java.net.Socket;

public class DataInterceptor extends Thread {

	private static ServerSocket ss;
	private static final int port = 8181;
	private static boolean acceptConnections = true;
	private Socket sock;
	
	public DataInterceptor(Socket sock) {
		this.sock = sock;
	}
	
	public void run() {
		try {
			String inputLine;
			BufferedReader in = new BufferedReader(new InputStreamReader(sock.getInputStream()));
			
			while ((inputLine = in.readLine()) != null) 
				System.out.println(inputLine);
			
			in.close();
			sock.close();
			
		} catch (IOException e) {
			e.printStackTrace();
		}
	}

	public static void main(String[] args) throws IOException {
		ss = new ServerSocket(port);
		while(acceptConnections) {
			new DataInterceptor(ss.accept()).start();
		}
		ss.close();
	}

}
[/code]

By editing the proxy settings in our client, we can now connect to the program which will intercept the data sent.

The result is below:
[code]
GET http://some.tracker.org:2000/announce?info_hash=%D3%A1G%9C%22%CB%B5%3B%AE%18%FFa%BA%E8%869%C8%5D%AD%AF&amp;peer_id=-TR1750-4g5t3lwetxhd&amp;port=61213&amp;uploaded=0&amp;downloaded=0&amp;corrupt=0&amp;left=3716748037&amp;compact=1&amp;supportcrypto=1&amp;numwant=0&amp;key=2przk8ybqg&amp;event=started HTTP/1.1
User-Agent: Transmission/1.75 (9117)
Host: some.tracker.org:2000
Accept: */*
Accept-Encoding: deflate, gzip
Proxy-Connection: Keep-Alive
[/code]

You will notice that the transaction is a normal HTTP GET &amp; HEAD method.

If we focus on the requested url:
[code]http://some.tracker.org:2000/announce?info_hash=%D3%A1G%9C%22%CB%B5%3B%AE%18%FFa%BA%E8%869%C8%5D%AD%AF&amp;peer_id=-TR1750-4g5t3lwetxhd&amp;port=61213&amp;uploaded=0&amp;downloaded=0&amp;corrupt=0&amp;left=3716748037&amp;compact=1&amp;supportcrypto=1&amp;numwant=0&amp;key=2przk8ybqg&amp;event=started[/code]

you will notice important plain text information being sent:

* The hash of the torrent. [code]info_hash=%D3%A1G%9C%22%CB%B5%3B%AE%18%FFa%BA%E8%869%C8%5D%AD%AF[/code]

* The client peer id [code]peer_id=-TR1750-[/code]

* The port the client is listening on [code]port=61213[/code]

* The upload and download amount [code]uploaded=0&amp;downloaded=0[/code]

The download and upload is in the units of bytes, ie: 1MB = 1,000,000 Bytes, and has no formating (I added comas for aesthetics).

Some may believe the peer_id field is unique, however it is not. It is the same for every version of that client you&#39;re using. It&#39;s basically has the same function as the user agent field; helping the tracker filter out invalid/blacklisted clients.

So, that&#39;s pretty much it; this information can be handy if you know how to use it (and have a need).</description>
    
    <lastBuildDate>Fri, 27 Nov 2009 23:27:43 +0000</lastBuildDate>
    <category>General Discussion</category>
    <atom:link href="https://forum.moparisthebest.com/t/quick-glance-at-ratio-communication-betweem-bittorrent-client-tracker/316768.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Quick glance at ratio communication betweem BitTorrent Client &amp; Tracker</title>
        <dc:creator><![CDATA[@T41 t4]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://forum.moparisthebest.com/u/t41">@T41</a> wrote:</p>
          <blockquote>
              <p>Basically this thread should inform the reader how ratios and other information is sent to the tracker by the BitTorrent client. To do this, we need to intercept the data being sent so we can examine what exactly is going on during the transaction. This thread only covers what is being sent, not received.</p>
<p>Below is a simple proxy that will print the information sent by the client to the tracker:</p>
<pre><code class="lang-auto">package org.mitb.interceptor;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.ServerSocket;
import java.net.Socket;

public class DataInterceptor extends Thread {

	private static ServerSocket ss;
	private static final int port = 8181;
	private static boolean acceptConnections = true;
	private Socket sock;
	
	public DataInterceptor(Socket sock) {
		this.sock = sock;
	}
	
	public void run() {
		try {
			String inputLine;
			BufferedReader in = new BufferedReader(new InputStreamReader(sock.getInputStream()));
			
			while ((inputLine = in.readLine()) != null) 
				System.out.println(inputLine);
			
			in.close();
			sock.close();
			
		} catch (IOException e) {
			e.printStackTrace();
		}
	}

	public static void main(String[] args) throws IOException {
		ss = new ServerSocket(port);
		while(acceptConnections) {
			new DataInterceptor(ss.accept()).start();
		}
		ss.close();
	}

}</code></pre>
<p>By editing the proxy settings in our client, we can now connect to the program which will intercept the data sent.</p>
<p>The result is below:</p>
<pre><code class="lang-auto">GET http://some.tracker.org:2000/announce?info_hash=%D3%A1G%9C%22%CB%B5%3B%AE%18%FFa%BA%E8%869%C8%5D%AD%AF&amp;peer_id=-TR1750-4g5t3lwetxhd&amp;port=61213&amp;uploaded=0&amp;downloaded=0&amp;corrupt=0&amp;left=3716748037&amp;compact=1&amp;supportcrypto=1&amp;numwant=0&amp;key=2przk8ybqg&amp;event=started HTTP/1.1
User-Agent: Transmission/1.75 (9117)
Host: some.tracker.org:2000
Accept: */*
Accept-Encoding: deflate, gzip
Proxy-Connection: Keep-Alive</code></pre>
<p>You will notice that the transaction is a normal HTTP GET &amp; HEAD method.</p>
<p>If we focus on the requested url:</p>
<pre><code class="lang-auto">http://some.tracker.org:2000/announce?info_hash=%D3%A1G%9C%22%CB%B5%3B%AE%18%FFa%BA%E8%869%C8%5D%AD%AF&amp;peer_id=-TR1750-4g5t3lwetxhd&amp;port=61213&amp;uploaded=0&amp;downloaded=0&amp;corrupt=0&amp;left=3716748037&amp;compact=1&amp;supportcrypto=1&amp;numwant=0&amp;key=2przk8ybqg&amp;event=started</code></pre>
<p>you will notice important plain text information being sent:</p>
<ul>
<li>
<p>The hash of the torrent. <code>info_hash=%D3%A1G%9C%22%CB%B5%3B%AE%18%FFa%BA%E8%869%C8%5D%AD%AF</code></p>
</li>
<li>
<p>The client peer id <code>peer_id=-TR1750-</code></p>
</li>
<li>
<p>The port the client is listening on <code>port=61213</code></p>
</li>
<li>
<p>The upload and download amount <code>uploaded=0&amp;downloaded=0</code></p>
</li>
</ul>
<p>The download and upload is in the units of bytes, ie: 1MB = 1,000,000 Bytes, and has no formating (I added comas for aesthetics).</p>
<p>Some may believe the peer_id field is unique, however it is not. It is the same for every version of that client you’re using. It’s basically has the same function as the user agent field; helping the tracker filter out invalid/blacklisted clients.</p>
<p>So, that’s pretty much it; this information can be handy if you know how to use it (and have a need).</p>
          </blockquote>
          <p><a href="https://forum.moparisthebest.com/t/quick-glance-at-ratio-communication-betweem-bittorrent-client-tracker/316768/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.moparisthebest.com/t/quick-glance-at-ratio-communication-betweem-bittorrent-client-tracker/316768/1</link>
        <pubDate>Fri, 27 Nov 2009 23:27:43 +0000</pubDate>
        <guid isPermaLink="false">forum.moparisthebest.com-post-316768-1</guid>
        <source url="https://forum.moparisthebest.com/t/quick-glance-at-ratio-communication-betweem-bittorrent-client-tracker/316768.rss">Quick glance at ratio communication betweem BitTorrent Client &amp; Tracker</source>
      </item>
  </channel>
</rss>
