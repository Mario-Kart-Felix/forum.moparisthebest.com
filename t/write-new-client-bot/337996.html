<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/write-new-client-bot/337996 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Aug 2019 21:58:29 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Write new client/bot - Game Development - moparisthebest.com</title>
    <meta name="description" content="Hi  

I&amp;#39;m new to java, I&amp;#39;ve downloaded few runescape clients and servers, I liked Shangri_La v2 version of server 317, It is multi-threaded server, but the client is jenerated by Jad-decompilation and not readable by hum&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="337996.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Write new client/bot&#39;" href="337996.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/write-new-client-bot/337996" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/write-new-client-bot/337996" />
<meta property="og:title" content="Write new client/bot" />
<meta name="twitter:title" content="Write new client/bot" />
<meta property="og:description" content="Hi  I’m new to java, I’ve downloaded few runescape clients and servers, I liked Shangri_La v2 version of server 317, It is multi-threaded server, but the client is jenerated by Jad-decompilation and not readable by human (at least me) I want to write my own client/or bot to this game. can you please help me. specially understanding the protocol between client and server to load game and update client status and moves.  I’d loged in my client, exchanged a few bytes. and now server is in an infini..." />
<meta name="twitter:description" content="Hi  I’m new to java, I’ve downloaded few runescape clients and servers, I liked Shangri_La v2 version of server 317, It is multi-threaded server, but the client is jenerated by Jad-decompilation and not readable by human (at least me) I want to write my own client/or bot to this game. can you please help me. specially understanding the protocol between client and server to load game and update client status and moves.  I’d loged in my client, exchanged a few bytes. and now server is in an infini..." />
<meta property="article:published_time" content="2010-04-24T19:31:12+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="337996.html">Write new client/bot</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/general-programming.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>General Programming</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/general-programming/game-development.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Game Development</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/sakamal.html'><span itemprop='name'>sakamal</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-04-24T19:31:12Z'>
            <time itemprop='dateModified' datetime='2016-07-31T16:07:27Z' class='post-time'>
              July 31, 2016,  4:07pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hi</p>
<p>I’m new to java, I’ve downloaded few runescape clients and servers, I liked Shangri_La v2 version of server 317, It is multi-threaded server, but the client is jenerated by Jad-decompilation and not readable by human (at least me) I want to write my own client/or bot to this game. can you please help me. specially understanding the protocol between client and server to load game and update client status and moves.<br>
I’d loged in my client, exchanged a few bytes. and now server is in an infinite loop sending variable bytes to cleint, idk what these bytes are? how to track these information and parse it on client end.</p>
<p>Regards</p>
<p>Kamal.</p>
      </div>

      <meta itemprop='headline' content='Write new client/bot'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Fat_Cookies.html'><span itemprop='name'>Fat_Cookies</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-04-24T20:38:48Z'>
            <time itemprop='dateModified' datetime='2016-07-31T16:07:33Z' class='post-time'>
              July 31, 2016,  4:07pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Download a refracted 317 client if want code which is easier to read.</p>
<p>If you want to read notes on the runescape <span class="hashtag">#317</span> protocol please <a href="http://runewiki.moparisthebest.com/index.php?title=317_Protocol" data-bbcode="true">read this</a>. The majority of packets are documented with their structures; however there are some missing.</p>
<p>To be honest, writing a server of scratch is quite a challenge especially if you’re “new to java” therefore i suggestion you build upon a base from <a href="http://www.moparisthebest.com/smf/index.php/topic,427654.0.html" data-bbcode="true">here</a> (probably hyperion as it is the most recent and best!</p>
      </div>

      <meta itemprop='headline' content='Write new client/bot'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/sakamal.html'><span itemprop='name'>sakamal</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2010-04-24T22:47:40Z'>
            <time itemprop='dateModified' datetime='2016-07-31T16:07:48Z' class='post-time'>
              July 31, 2016,  4:07pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Thanks man for nice quick reply but…<br>
I’ve a list of client and server from 317 (v3) &amp;  508/524/554 (v5)<br>
317_Blank_Client<br>
508_DavidScape_Server<br>
508_Espeon<br>
508_Galkon_Client<br>
508_Palidinio76_Server<br>
508_RageSource_Server<br>
525_DragonScape_Client<br>
525_PK<br>
525_TitanScape<br>
525_W00tSc4p3_PvP<br>
554_CarlScape<br>
Amazon_Client<br>
DeltaScape<br>
Dragon-History<br>
MoparScape<br>
MoparScape_Client_3-2<br>
ProjectV16_my<br>
Shangri-La<br>
TokkulScape<br>
I opted Shangri_La  coz its v3 and multithread server with something really respectable to show… a lot functionality say walking, running, cutting, fighting, chatting, trading,  etc, bla bla…<br>
I’ve multiple client to connect to these servers but ALL CLIENTS are generated from some de-compiler like jad etc… which means each of them hav structure like class1, class.subClass3 containing member variables var1, var2 stringvar4 etc. and methods1 … method125 etc… The PROBLEM is i can’t understand what these clients are and how to extend if any…<br>
I’ve started wrting my own clinet from scratch, my client logs on to Shangri_La server. now server and client need to exhcange packet information with each other… a constant stream of packets is being exchanged but what is in those packets… is not clear.<br>
CAN ANY ONE HELP ME, HOW TO PARSE (INTERPRIT) THOSE PACKETS BEING EXCHANGED B/W CLEITN AND SERVER.</p>
<p>part of my code looks like this where i’m trying to log on to server and exchange some protocol information…</p>
<p>[code]public void run() {<br>
try {</p>
<pre><code>	    Client_init();
	    outStream.writeByte(14);
	    outStream.writeByte(0); // Junk
	    directFlushOutStream(); //Send 2 bytes 

	    for(int i=0; i&lt;9; i++)
	    	misc.print_debug(in.read()+" . "); // read 8 1s and 1 0 for nothing
	    misc.println_debug("");
	    
	    long serverSessionKey = 0;
	    
	    fillInStream(300);		// read arbitrary byes /expecting serversessionkey as Qword
	    serverSessionKey = inStream.readQWord();
		
	    misc.println_debug("Session Key Recived : " +serverSessionKey);
		
	    // send 2 bytes, 
	    //16 for new logging and 18 for re-connect.
	    //packet size experimental value loginPacketSize, lets see what to send exact.
	    // Scheme is as 1(byte)+2(word)+1 (byte low-memory) + 36 (9*Dwords Junk) + 1 (byte tmp=packetsize-41) +
	    // 1 (byte tmp=10) +  16 (2*Qword session keys) + 4 (Dword junk as id) + name string+ password string
	    
	    int loginPacketSize = 68;
	    outStream.writeByte(16); //16 to connect, 18 to reconnect 
	    outStream.writeByte(loginPacketSize);
	    directFlushOutStream();
	    
	    // prepare &amp; sending loginPacketSize byte values.
	    
	    // login packet magic ID : unsigned byte &amp; word 255, 317		= 1+2 = 3
	    outStream.writeByte(255);
	    outStream.writeWord(317);
	    
	    //lowMemoryVersion, UnsignedByte 0/1 low/high				= 3+1 = 4
	    outStream.writeByte(1);
	    
	    //Send 9 Dword junks										= 4+ 9x4 = 40
	    for (int i = 0; i &lt; 9; i++) {
			outStream.writeDWord(i);
		}
		//loginEncryptPacketSize != tmp (loginEncryptPacketSize  = loginPacketSize - 40 -1) 	 = 40+1 = 41 
	    int loginEncryptPacketSize = loginPacketSize - 41;
	    outStream.writeByte(loginEncryptPacketSize);				
	    
	    //sending 10 as Unsignedbyte to be varified.				= 41+1 = 42
	    outStream.writeByte(10);
	    
	    // Creating Client and Server Session Key.  //clientSessionKey = inStream.readQWord(); 	//serverSessionKey = inStream.readQWord();
	    // randomize client part of the session key code same server 				 = 42+ 2x8 = 58
	    long clientSessionKey = ((long) (java.lang.Math.random() * 99999999D) &lt;&lt; 32)
				+ (long) (java.lang.Math.random() * 99999999D);
	    outStream.writeQWord(clientSessionKey);
	    outStream.writeQWord(serverSessionKey);
	    
	    // Dword expectedUid = 1 officialClient						= 58+ 4 = 62
	    outStream.writeDWord(1);
	    
	    String playerName  = "sa";								//	= 62 +2+1 = 65
	    outStream.writeString(playerName);
	    
	    
	    String playerPass  = "as";								//  = 65+2+1 = 68
	    outStream.writeString(playerPass);

	    directFlushOutStream();
	    
	    misc.println_debug("\nSo far so good");  
	    //Now Getting Feedback from server
	    // Read int retcode = 7 world full, 10 playerServerInvalid, else returnCode
	    int returnCode = in.read();
	    misc.println_debug("Return Code: "+returnCode);
	    
	    int loginDelay=0;
	    if (returnCode == 21){
			loginDelay =  in.read();
			misc.println_debug("login Delay: "+loginDelay);
	    }
	    
	    int playerRights = in.read();
	    misc.println_debug("Player Rights: "+playerRights);
	    
	    misc.println_debug("read junk zero : "+ in.read()); //read zero
	    int ret = 0;
	    byte[] b = new byte[10000];
	    do{
	    	
			ret = in.read(b);
	    	misc.println_debug("Bytes Read"+ ret);
	    	
	    }while(ret&gt;0);
	    
	} catch (UnknownHostException e) {
		misc.println_debug("un: "+ e.getMessage());
	} catch (IOException e) {
		misc.println_debug("io: " +e.getMessage());
	}
	
}
</code></pre>
<p>}[/code]<br>
in last loop im reading variable size of packet from server, idk what to do with all those</p>
      </div>

      <meta itemprop='headline' content='Write new client/bot'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/write-new-client-bot/337996 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Aug 2019 21:58:31 GMT -->
</html>
