<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/path-finder-issue/555193 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:05:22 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Path finder issue - Runescape - moparisthebest.com</title>
    <meta name="description" content="Hi, my path finder does not work when the players localY is over 400 (so anything above Edgeville that is north of map). It will take too long causing the server to crash. Everything from south of map works fine.  

Here&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="555193.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Path finder issue&#39;" href="555193.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/path-finder-issue/555193" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/path-finder-issue/555193" />
<meta property="og:title" content="Path finder issue" />
<meta name="twitter:title" content="Path finder issue" />
<meta property="og:description" content="Hi, my path finder does not work when the players localY is over 400 (so anything above Edgeville that is north of map). It will take too long causing the server to crash. Everything from south of map works fine.  Here’s the code:  @Override     public Path find(Position position, int radius, int srcX, int srcY, int dstX, int dstY, int objWidth, int objLength, int size) {     	/**     	 * TODO: Fix - if the srcY is bigger then 400, this whole code will take too long and not work     	 */     	  ..." />
<meta name="twitter:description" content="Hi, my path finder does not work when the players localY is over 400 (so anything above Edgeville that is north of map). It will take too long causing the server to crash. Everything from south of map works fine.  Here’s the code:  @Override     public Path find(Position position, int radius, int srcX, int srcY, int dstX, int dstY, int objWidth, int objLength, int size) {     	/**     	 * TODO: Fix - if the srcY is bigger then 400, this whole code will take too long and not work     	 */     	  ..." />
<meta property="article:published_time" content="2016-04-15T11:01:43+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="555193.html">Path finder issue</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/my-swagger.html'><span itemprop='name'>my-swagger</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2016-04-15T11:01:43Z'>
            <time itemprop='dateModified' datetime='2016-08-04T17:54:00Z' class='post-time'>
              August 4, 2016,  5:54pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hi, my path finder does not work when the players localY is over 400 (so anything above Edgeville that is north of map). It will take too long causing the server to crash. Everything from south of map works fine.</p>
<p>Here’s the code:</p>
<pre><code class="lang-auto">@Override
    public Path find(Position position, int radius, int srcX, int srcY, int dstX, int dstY, int objWidth, int objLength, int size) {
    	/**
    	 * TODO: Fix - if the srcY is bigger then 400, this whole code will take too long and not work
    	 */
    	
    	int width = radius + (srcX + srcY);
    	int length = width;
    	
        /* Move our coordinates to the center so we don't run into bounds issues */
        srcX += radius; srcY += radius;
        dstX += radius; dstY += radius;

        if(dstX &lt; 0 || dstY &lt; 0 || dstX &gt;= width || dstY &gt;= length) {
            return null; // out of range
        }
        
        TraversalMap map = World.getWorld().getTraversalMap();

        open.clear();
        closed.clear();
        
        nodes = new Node[width][length];
        for(int x = 0; x &lt; width; x++) {
            for(int y = 0; y &lt; length; y++) {
                nodes[x][y] = new Node(x, y);
            }
        }
        
        open.add(nodes[srcX][srcY]);
        
        while(open.size() &gt; 0) {
            current = getLowestCost();
            if(current == nodes[dstX][dstY]) {
                break;
            }
            open.remove(current);
            closed.add(current);

            int x = current.getX(), y = current.getY();

            // south
            if(y &gt; 0 &amp;&amp; map.isTraversableSouth(position.getHeight(), position.getX() + x - radius, position.getY() + y - radius, size)) {
                Node n = nodes[x][y - 1];
                examineNode(n);
            }
            // west
            if(x &gt; 0 &amp;&amp; map.isTraversableWest(position.getHeight(), position.getX() + x - radius, position.getY() + y - radius, size)) {
                Node n = nodes[x - 1][y];
                examineNode(n);
            }
            // north
            if(y &lt; length - 1 &amp;&amp; map.isTraversableNorth(position.getHeight(), position.getX() + x - radius, position.getY() + y - radius, size)) {
                Node n = nodes[x][y + 1];
                examineNode(n);
            }
            // east
            if(x &lt; width - 1 &amp;&amp; map.isTraversableEast(position.getHeight(), position.getX() + x - radius, position.getY() + y - radius, size)) {
                Node n = nodes[x + 1][y];
                examineNode(n);
            }
            // south west
            if(x &gt; 0 &amp;&amp; y &gt; 0 &amp;&amp; map.isTraversableSouthWest(position.getHeight(), position.getX() + x - radius, position.getY() + y - radius, size)) {
                Node n = nodes[x - 1][y - 1];
                examineNode(n);
            }
            // north west
            if(x &gt; 0 &amp;&amp; y &lt; length - 1 &amp;&amp; map.isTraversableNorthWest(position.getHeight(), position.getX() + x - radius, position.getY() + y - radius, size)) {
                Node n = nodes[x - 1][y + 1];
                examineNode(n);
            }

            // south east
            if(x &lt; width - 1 &amp;&amp; y &gt; 0 &amp;&amp; map.isTraversableSouthEast(position.getHeight(), position.getX() + x - radius, position.getY() + y - radius, size)) {
                Node n = nodes[x + 1][y - 1];
                examineNode(n);
            }
            // north east
            if(x &lt; width - 1 &amp;&amp; y &lt; length - 1 &amp;&amp; map.isTraversableNorthEast(position.getHeight(), position.getX() + x - radius, position.getY() + y - radius, size)) {
                Node n = nodes[x + 1][y + 1];
                examineNode(n);
            }
        }
        
        if(nodes[dstX][dstY].getParent() == null) {
            int newX = dstX;
            int newY = dstY;

            int minDistance = 999;
            int minCost = 999_999;
            for(int x = dstX - UNREACHABLE_SEARCH_DISTANCE; x &lt;= dstX + UNREACHABLE_SEARCH_DISTANCE; x++) {
                for(int y = dstY - UNREACHABLE_SEARCH_DISTANCE; y &lt;= dstY + UNREACHABLE_SEARCH_DISTANCE; y++) {
                	if((x &gt;= 0 &amp;&amp; x &lt; width) &amp;&amp; (y &gt;= 0 &amp;&amp; y &lt; length) &amp;&amp; nodes[x][y].parent != null) {
                        int deltaX = 0;
                        int deltaY = 0;
                        if(y &lt; dstY) {
                            deltaY = dstY - y;
                        } else if(y &gt; (dstY + objLength - 1)) {
                            deltaY = y + 1 - (dstY + objLength);
                        }
                        if(x &gt;= dstX) {
                            if(x &gt; (dstX + objWidth - 1)) {
                                deltaX = 1 + (x - dstX - objWidth);
                            }
                        } else {
                            deltaX = dstX - x;
                        }
                        int dist = (int)Math.sqrt(deltaX * deltaX + deltaY + deltaY);
                        int cost = nodes[x][y].cost;
                        if(dist &lt; minDistance || (dist == minDistance &amp;&amp; cost &lt; minCost)) {
                            minDistance = dist;
                            minCost = cost;
                            newX = x;
                            newY = y;
                        }
                    }
                }
            }

            if(nodes[newX][newY].getParent() == null) {
                System.out.println("Still no path");
                return null;
            }

            dstX = newX; dstY = newY;
        }

        Path p = new Path();
        Node n = nodes[dstX][dstY];
        while(n != nodes[srcX][srcY]) {
            p.addFirst(new Position(n.getX() + position.getX() - radius, n.getY() + position.getY() - radius));
            n = n.getParent();
        }
        return p;
    }</code></pre>
<p>Note:<br>
If I increase these values</p>
<p><code>int width = radius + (srcX + srcY);
int length = width;</code><br>
the path finder will take too long  and crash.</p>
<p>Code useage:</p>
<pre><code class="lang-auto">        Position destination = new Position(message.getDestination().getX(), message.getDestination().getY(), z);
        Position position = player.getPosition();

        int baseLocalX = position.getBaseLocalX();
        int baseLocalY = position.getBaseLocalY();
        int destLocalX = destination.getX() - baseLocalX;
        int destLocalY = destination.getY() - baseLocalY;
        
        Position base = new Position(baseLocalX, baseLocalY, position.getHeight());
        Path path = pathFinder.find(base, 104, position.getLocalX(), position.getLocalY(), destLocalX, destLocalY);</code></pre>
<p>Please help.</p>
      </div>

      <meta itemprop='headline' content='Path finder issue'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/path-finder-issue/555193 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:05:22 GMT -->
</html>
