<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/renamed-perfect-updatecache-noob-friendly/444355 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Aug 2019 06:50:15 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>[RENAMED]Perfect UpdateCache[Noob Friendly] - Runescape - moparisthebest.com</title>
    <meta name="description" content="Thanks to Kurt Cobain for the original post 

NOTE: Please I beg you allow system files to be seen from control panel &amp;gt; folder options. In the list with check boxes. DELETE Thumbs.db FROM EVERY folder in your cache, if y&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="444355.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;[RENAMED]Perfect UpdateCache[Noob Friendly]&#39;" href="444355.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://runehilation.com/images/cacheupdating.png" />
<meta property="og:image" content="http://runehilation.com/images/cacheupdating.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/renamed-perfect-updatecache-noob-friendly/444355" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/renamed-perfect-updatecache-noob-friendly/444355" />
<meta property="og:title" content="[RENAMED]Perfect UpdateCache[Noob Friendly]" />
<meta name="twitter:title" content="[RENAMED]Perfect UpdateCache[Noob Friendly]" />
<meta property="og:description" content="Thanks to Kurt Cobain for the original post  NOTE:  Please I beg you allow system files to be seen from control panel &gt; folder options. In the list with check boxes.  DELETE Thumbs.db FROM EVERY folder in your cache, if you dont see it in a folder dont keep looking, it’s not there move on…  Much simpler works amazing!  Stupid GUI is removed and integrated into to the loading bar  Updating    Downloading Cache    Extracting Cache    Example of cacheVersion.txt  1.0 Create a file called “UpdateCac..." />
<meta name="twitter:description" content="Thanks to Kurt Cobain for the original post  NOTE:  Please I beg you allow system files to be seen from control panel &gt; folder options. In the list with check boxes.  DELETE Thumbs.db FROM EVERY folder in your cache, if you dont see it in a folder dont keep looking, it’s not there move on…  Much simpler works amazing!  Stupid GUI is removed and integrated into to the loading bar  Updating    Downloading Cache    Extracting Cache    Example of cacheVersion.txt  1.0 Create a file called “UpdateCac..." />
<meta property="article:published_time" content="2012-06-08T02:55:25+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="444355.html">[RENAMED]Perfect UpdateCache[Noob Friendly]</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/mod_cody.html'><span itemprop='name'>mod_cody</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-06-08T02:55:25Z'>
            <time itemprop='dateModified' datetime='2016-08-03T03:04:19Z' class='post-time'>
              August 3, 2016,  3:04am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Thanks to Kurt Cobain for the original <a data-bbcode="true">post</a></p>
<p>NOTE:<br>
Please I beg you allow system files to be seen from control panel &gt; folder options. In the list with check boxes.<br>
DELETE Thumbs.db FROM EVERY folder in your cache, if you dont see it in a folder dont keep looking, it’s not there move on…</p>
<p>Much simpler works amazing!<br>
Stupid GUI is removed and integrated into to the loading bar</p>
<p>Updating<br>
<img src="http://runehilation.com/images/cacheupdating.png" alt width="" height=""><br>
Downloading Cache<br>
<img src="http://runehilation.com/images/cachedownloading.png" alt width="" height=""><br>
Extracting Cache<br>
<img src="http://runehilation.com/images/extractingcache.png" alt width="" height=""></p>
<p>Example of cacheVersion.txt</p>
<pre><code class="lang-auto">1.0</code></pre>
<p>Create a file called “UpdateCache.java” inside your source add this</p>
<pre><code class="lang-auto">import java.net.URL;
import java.net.URLConnection;
import java.util.zip.*;
import sign.signlink;
import java.io.*;
import javax.swing.JOptionPane;

public class UpdateCache implements Runnable {

	public static final String ZIP_URL = "http://YOUR_SITE.com/cache.zip";
	public static final String VERSION_URL = "http://YOUR_SITE.com/cacheVersion.txt";
	public static final String VERSION_FILE = sign.signlink.findcachedir()+"cacheVersion.dat";
	private client client;
	client frame;
    public UpdateCache(client client) {
                this.client = client;
    }
		
    private void drawLoadingText(int amount, String text) {
                client.drawLoadingText(amount, text);
    }
	
	public double getCurrentVersion(){
		try {
			BufferedReader br = new BufferedReader(new InputStreamReader(new FileInputStream(VERSION_FILE)));
			return Double.parseDouble(br.readLine());
		} catch (Exception e) {
			return 0.1;
		}
	}
	
	public double getNewestVersion(){
		try {
			URL tmp = new URL(VERSION_URL);
			BufferedReader br = new BufferedReader(new InputStreamReader(tmp.openStream()));
			return Double.parseDouble(br.readLine());
		} catch (Exception e) {
			handleException(e);
			return -1;
		}
	}
	
	private void handleException(Exception e){
		StringBuilder strBuff = new StringBuilder();
		strBuff.append("Please Screenshot this message, and send it to an admin!\r\n\r\n");
        StringBuilder append = strBuff.append(e.getClass().getName()).append(" \"").append(e.getMessage()).append("\"\r\n");
		for(StackTraceElement s : e.getStackTrace())
			strBuff.append(s.toString()).append("\r\n");
		alert("Exception [" + e.getClass().getSimpleName() + "]",strBuff.toString(),true);
	}
	
	private void alert(String msg){
		alert("Message",msg,false);
	}
	
	private void alert(String title,String msg,boolean error){
		JOptionPane.showMessageDialog(null,
			   msg,
			   title,
			    (error ? JOptionPane.ERROR_MESSAGE : JOptionPane.PLAIN_MESSAGE));
	}
	
	@Override
	public void run() {
	drawLoadingText(0, "Checking Versions");
		try{
		double newest = getNewestVersion();
		if(newest &gt; this.getCurrentVersion()){
			int n = JOptionPane.showConfirmDialog(
				    null,
				    "There is an update to version " + newest + "\n" +
					"Would you like to update?",
				    "Current version: "+ getCurrentVersion(),
				    JOptionPane.YES_NO_OPTION);
			if(n == 0){
				updateClient();
				drawLoadingText(0, "Cache has been updated, please restart the client!");
				alert("Cache has been updated, please restart the client!");
				OutputStream out = new FileOutputStream(VERSION_FILE);
				out.write(String.valueOf(newest).getBytes());;
				System.exit(0);
			}else{
				alert(" Your client may not load correct " +
				getCurrentVersion());
				//System.exit(0);
			}
		}
		}catch(Exception e){
			handleException(e);
		}
	}
	
	private void updateClient() {
		File clientZip = downloadClient();
		if(clientZip != null){
		unZip(clientZip);
		}
	}
	
	private void unZip(File clientZip) {
		try {
			unZipFile(clientZip,new File(sign.signlink.findcachedir()));
			clientZip.delete();
		} catch (IOException e) {
			handleException(e);
		}
	}
	
	private void unZipFile(File zipFile,File outFile) throws IOException{
		ZipInputStream zin = new ZipInputStream(new BufferedInputStream(new FileInputStream(zipFile)));
		ZipEntry e;
		long max = 0;
		long curr = 0;
		while((e = zin.getNextEntry()) != null)
			max += e.getSize();
		zin.close();
		ZipInputStream in = new ZipInputStream(new BufferedInputStream(new FileInputStream(zipFile)));
		while((e = in.getNextEntry()) != null){
			if(e.isDirectory())
				new File(outFile,e.getName()).mkdirs();
			else{
				FileOutputStream out = new FileOutputStream(new File(outFile,e.getName()));
				byte[] b = new byte[1024];
				int len;
				while((len = in.read(b,0,b.length)) &gt; -1){
					curr += len;
						out.write(b, 0, len);
						setUnzipPercent((int)((curr * 100) / max));
				}
				out.flush();
				out.close();
			}
		}
	}

	public int percent = 0;
	
	public void setDownloadPercent(int amount){
	        percent = amount;
			drawLoadingText(amount, "Downloading Cache" + " - " + amount + "%");
	}
	
	public int percent2 = 0;
	
	public void setUnzipPercent(int amount2){
	        percent2 = amount2;
			drawLoadingText(amount2, "Extracting Cache" + " - " + amount2 + "%");
	}

	private File downloadClient(){
		File ret = new File(signlink.findcachedir()+"cache.zip");
		try{
		OutputStream out = new FileOutputStream(ret);
		URLConnection conn = new URL(ZIP_URL).openConnection();
		InputStream in = conn.getInputStream();
		long max = conn.getContentLength();
		long curr = 0;
		byte[] b = new byte[1024];
		int len;
		while((len = in.read(b, 0, b.length)) &gt; -1){
			out.write(b,0,len);
			curr += len;
			setDownloadPercent((int)((curr * 100) / max));
		}
		out.flush();
		out.close();
		in.close();
		return ret;
		}catch(Exception e){
			handleException(e);
				ret.delete();
			return null;
		}
	}
}</code></pre>
<p>Remove all other traces of cache updating you used in the past</p>
<p>Open client.java and search</p>
<pre><code class="lang-auto">void startUp()</code></pre>
<p>Under the first { add</p>
<pre><code class="lang-auto">new UpdateCache(this).run();</code></pre>
<p>On your webhost make sure you have the cacheVersion.txt uploaded with the correct cache version.</p>
<p>Any questions ask. Post errors etc</p>
<p>Okay so i’ve had so many issues with people saying this doesent work<br>
Go into your file folder settings in control panel and change the way your folders display to ‘Details’ for all folders DONT CLOSE<br>
While inside folder options go to the check boxes and allow hidden files and system files to be shown<br>
After that go through your cache, every folder and delete the file called ‘Thumbs.db’ that will most likely make this not work</p>
      </div>

      <meta itemprop='headline' content='[RENAMED]Perfect UpdateCache[Noob Friendly]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/rukin1.html'><span itemprop='name'>rukin1</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-06-11T09:29:05Z'>
            <time itemprop='dateModified' datetime='2016-08-03T03:08:15Z' class='post-time'>
              August 3, 2016,  3:08am
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p><img src="http://www.thesmallnews.org/screenies/Vkpu98H.png" alt width="" height=""><br>
works <img src="../../images/emoji/twitter/smileyae52.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"></p>
      </div>

      <meta itemprop='headline' content='[RENAMED]Perfect UpdateCache[Noob Friendly]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/tranomo.html'><span itemprop='name'>tranomo</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-06-12T00:45:01Z'>
            <time itemprop='dateModified' datetime='2016-08-03T03:09:21Z' class='post-time'>
              August 3, 2016,  3:09am
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>it’l be perfect when it autoupdates without asking. As RuneScape’s client does. That’s the only thing i see wrong with this (just judging by the pictures) kudos to whoever is programing it!</p>
      </div>

      <meta itemprop='headline' content='[RENAMED]Perfect UpdateCache[Noob Friendly]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/badger41.html'><span itemprop='name'>badger41</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-06-12T04:58:01Z'>
            <time itemprop='dateModified' datetime='2016-08-03T03:09:43Z' class='post-time'>
              August 3, 2016,  3:09am
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote quote-modified" data-post="3" data-topic="444355">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../letter_avatar/tranomo/40/5_e05bb34c421432ee4d40de30c10af3e5.png" class="avatar"> tranomo:</div>
<blockquote>
<p>it’l be perfect when it autoupdates without asking. As RuneScape’s client does. That’s the only thing i see wrong with this (just judging by the pictures) kudos to whoever is programing it!</p>
</blockquote>
</aside>
<p>whatd be perfect is people learn how to use update servers so the whole cache doesnt need to be downloaded</p>
      </div>

      <meta itemprop='headline' content='[RENAMED]Perfect UpdateCache[Noob Friendly]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/mod_cody.html'><span itemprop='name'>mod_cody</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-06-12T18:00:58Z'>
            <time itemprop='dateModified' datetime='2016-08-03T03:10:15Z' class='post-time'>
              August 3, 2016,  3:10am
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>First off its CRC32 not ‘update server’ second. You need to null out a couple lines and this updates itself. People who don’t know java and post ignorant shit, stfu.</p>
      </div>

      <meta itemprop='headline' content='[RENAMED]Perfect UpdateCache[Noob Friendly]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/badger41.html'><span itemprop='name'>badger41</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2012-06-12T23:56:57Z'>
            <time itemprop='dateModified' datetime='2016-08-03T03:10:39Z' class='post-time'>
              August 3, 2016,  3:10am
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote quote-modified" data-post="5" data-topic="444355">
<div class="title">
<div class="quote-controls"></div>
 mod cody:</div>
<blockquote>
<p>First off its CRC32 not ‘update server’ second. You need to null out a couple lines and this updates itself. People who don’t know java and post ignorant shit, stfu.</p>
</blockquote>
</aside>
<p>rofl looks like you should stfu then</p>
      </div>

      <meta itemprop='headline' content='[RENAMED]Perfect UpdateCache[Noob Friendly]'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/renamed-perfect-updatecache-noob-friendly/444355 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Aug 2019 06:50:17 GMT -->
</html>
