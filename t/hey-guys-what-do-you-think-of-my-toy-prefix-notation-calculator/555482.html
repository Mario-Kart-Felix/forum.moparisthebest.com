<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/hey-guys-what-do-you-think-of-my-toy-prefix-notation-calculator/555482 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:05:05 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Hey guys what do you think of my toy prefix notation calculator - General Programming - moparisthebest.com</title>
    <meta name="description" content="[code=java]import java.util.Iterator; import java.util.LinkedList; import java.util.Queue; import java.util.Scanner; import java.util.function.DoubleUnaryOperator; import java.util.function.DoubleBinaryOperator; import j&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="555482.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Hey guys what do you think of my toy prefix notation calculator&#39;" href="555482.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/hey-guys-what-do-you-think-of-my-toy-prefix-notation-calculator/555482" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/hey-guys-what-do-you-think-of-my-toy-prefix-notation-calculator/555482" />
<meta property="og:title" content="Hey guys what do you think of my toy prefix notation calculator" />
<meta name="twitter:title" content="Hey guys what do you think of my toy prefix notation calculator" />
<meta property="og:description" content="[code=java]import java.util.Iterator;  import java.util.LinkedList;  import java.util.Queue;  import java.util.Scanner;  import java.util.function.DoubleUnaryOperator;  import java.util.function.DoubleBinaryOperator;  import java.util.stream.Collectors;  /**    calc - a prefix notation calculator  */  public class calc {  public calc() {  Scanner scanner = new Scanner(System.in);  while(true) {  System.out.print(&quot;&gt; “);  String expr = scanner.nextLine();  if(expr.equals(“quit”)) break;  if(expr.e..." />
<meta name="twitter:description" content="[code=java]import java.util.Iterator;  import java.util.LinkedList;  import java.util.Queue;  import java.util.Scanner;  import java.util.function.DoubleUnaryOperator;  import java.util.function.DoubleBinaryOperator;  import java.util.stream.Collectors;  /**    calc - a prefix notation calculator  */  public class calc {  public calc() {  Scanner scanner = new Scanner(System.in);  while(true) {  System.out.print(&quot;&gt; “);  String expr = scanner.nextLine();  if(expr.equals(“quit”)) break;  if(expr.e..." />
<meta property="article:published_time" content="2016-05-25T14:38:28+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="555482.html">Hey guys what do you think of my toy prefix notation calculator</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/general-programming.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>General Programming</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/z.html'><span itemprop='name'>z</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2016-05-25T14:38:28Z'>
            <time itemprop='dateModified' datetime='2016-08-04T18:31:13Z' class='post-time'>
              August 4, 2016,  6:31pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[code=java]import java.util.Iterator;<br>
import java.util.LinkedList;<br>
import java.util.Queue;<br>
import java.util.Scanner;<br>
import java.util.function.DoubleUnaryOperator;<br>
import java.util.function.DoubleBinaryOperator;<br>
import java.util.stream.Collectors;</p>
<p>/**</p>
<ul>
<li>
<p>calc - a prefix notation calculator<br>
*/<br>
public class calc {<br>
public calc() {<br>
Scanner scanner = new Scanner(System.in);<br>
while(true) {<br>
System.out.print("&gt; “);<br>
String expr = scanner.nextLine();<br>
if(expr.equals(“quit”)) break;<br>
if(expr.equals(“help”) || expr.equals(”?"))<br>
usage();<br>
Queue q = new LinkedList&lt;&gt;();<br>
Scanner exprScanner = new Scanner(expr);<br>
while(exprScanner.hasNext())<br>
q.add(exprScanner.next());<br>
System.out.println("Tokens: " + q);<br>
try {<br>
Expression res = parse(q);<br>
System.out.println("In-fix: " + res);<br>
System.out.println(res.eval());<br>
} catch(Exception e) {<br>
System.err.println("Error: " + e.getMessage());<br>
}<br>
}<br>
}</p>
<p>private Expression parse(Queue q) throws Exception {<br>
if(q.isEmpty()) throw new Exception(“Invalid input.”);<br>
String token = q.remove().replace(")","");<br>
try {<br>
return new Number(Double.parseDouble(token));<br>
} catch(NumberFormatException nfe) {<br>
switch(token) {<br>
case “(sqrt”: return new SquareRoot(parse(q));<br>
case “(+”: return new Add(parse(q), parse(q));<br>
case “(*”: return new Multiply(parse(q), parse(q));<br>
case “(/”: return new Divide(parse(q), parse(q));<br>
case “(-”:<br>
if(q.peek().contains(")"))<br>
return new Negate(parse(q));<br>
else<br>
return new Subtract(parse(q), parse(q));<br>
}<br>
}<br>
throw new Exception(“Invalid input.”);<br>
}</p>
<p>public static void main(String[] args) throws Exception {<br>
try {<br>
new calc();<br>
} catch(Exception e) {<br>
System.exit(1);<br>
}<br>
}</p>
<p>private static void usage() {<br>
System.out.println(“calc - a prefix notation calculator”);<br>
System.out.println(“Enter an expression below to be evaluated.”);<br>
}</p>
<p>public interface Expression {<br>
public double eval();<br>
public String toString();<br>
}</p>
<p>static class Number implements Expression {<br>
double val;</p>
<pre><code> Number(double val) {
     this.val = val;
 }

 public double eval() {
     return val;
 }

 public String toString() {
     return ""+val;
 }
</code></pre>
<p>}</p>
<p>static class UnaryExpression implements Expression {<br>
private String operator;<br>
private double defaultValue;<br>
private DoubleUnaryOperator op;<br>
private Expression expression;</p>
<pre><code> UnaryExpression(String operator, double defaultValue,
                 DoubleUnaryOperator op, Expression expression) {
     this.operator = operator;
     this.defaultValue = defaultValue;
     this.op = op;
     this.expression = expression;
 }

 public double eval() {
     return op.applyAsDouble(expression.eval());
 }

 public String toString() {
     return operator + "(" + expression.toString() + ")";
 }
</code></pre>
<p>}</p>
<p>static class BinaryExpression implements Expression {<br>
private String operator;<br>
private double defaultValue;<br>
private DoubleBinaryOperator op;<br>
private Queue expressions;</p>
<pre><code> BinaryExpression(String operator, double defaultValue,
                  DoubleBinaryOperator op, Expression[] expressions) {
     this.operator = operator;
     this.defaultValue = defaultValue;
     this.op = op;
     this.expressions = new LinkedList&lt;Expression&gt;();
     for(Expression expression : expressions)
         this.expressions.add(expression);
 }

 public double eval() {
     return expressions.stream()
                       .mapToDouble(Expression::eval)
                       .reduce(op)
                       .orElse(defaultValue);
 }

 public String toString() {
     return expressions.stream()
                       .map(Object::toString)
                       .collect(Collectors.joining(" " + operator + " ", "(", ")"));
 }
</code></pre>
<p>}</p>
<p>static class Negate extends UnaryExpression {<br>
Negate(Expression expression) {<br>
super("-", 0.0, (v) -&gt; -v, expression);<br>
}<br>
}</p>
<p>static class SquareRoot extends UnaryExpression {<br>
SquareRoot(Expression expression) {<br>
super(“√”, 0.0, (v) -&gt; Math.sqrt(v), expression);<br>
}<br>
}</p>
<p>static class Add extends BinaryExpression {<br>
Add(Expression… expressions) {<br>
super("+", 0.0, (l, r) -&gt; l + r, expressions);<br>
}<br>
}</p>
<p>static class Subtract extends BinaryExpression {<br>
Subtract(Expression… expressions) {<br>
super("-", 0.0, (l, r) -&gt; l - r, expressions);<br>
}<br>
}</p>
<p>static class Multiply extends BinaryExpression {<br>
Multiply(Expression… expressions) {<br>
super("*", 0.0, (l, r) -&gt; l * r, expressions);<br>
}<br>
}</p>
<p>static class Divide extends BinaryExpression {<br>
Divide(Expression… expressions) {<br>
super("/", 0.0, (l, r) -&gt; l / r, expressions);<br>
}<br>
}<br>
}[/code]</p>
</li>
</ul>
<p>What works: (- 2 2), (- 2), (+ 2 2), (+ (+ 2 2) (+ 2 2))</p>
<p>What doesn’t work: (+ 2 2 2 2), (- (+ 2 2))</p>
<p>I suck at parsing this stuff properly. Any suggestions?</p>
      </div>

      <meta itemprop='headline' content='Hey guys what do you think of my toy prefix notation calculator'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/xx_matty_xx.html'><span itemprop='name'>xx_matty_xx</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2016-05-25T16:23:51Z'>
            <time itemprop='dateModified' datetime='2016-08-04T18:31:13Z' class='post-time'>
              August 4, 2016,  6:31pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>could define a grammar and use that to parse the input? pyPEG for python is good and something similar must exist for java</p>
      </div>

      <meta itemprop='headline' content='Hey guys what do you think of my toy prefix notation calculator'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Fat_Cookies.html'><span itemprop='name'>Fat_Cookies</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2016-05-25T22:26:46Z'>
            <time itemprop='dateModified' datetime='2016-08-04T18:31:14Z' class='post-time'>
              August 4, 2016,  6:31pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>From a structure perspective, I’d recognise the difference between unary operators (not, neg etc), binary operators (-, / etc) and operators that take an arbitrary number of arguments (+, *, map, fold etc) so you could separate processing the operands  from the actual operation.</p>
<aside class="quote" data-post="2" data-topic="555482">
<div class="title">
<div class="quote-controls"></div>
 Justin Bieber:</div>
<blockquote>
<p>could define a grammar and use that to parse the input? pyPEG for python is good and something similar must exist for java</p>
</blockquote>
</aside>
<p><a href="http://www2.cs.tum.edu/projects/cup/" data-bbcode="true">CUP</a> would be a shout - sort of mimics YACC.</p>
      </div>

      <meta itemprop='headline' content='Hey guys what do you think of my toy prefix notation calculator'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/z.html'><span itemprop='name'>z</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2016-05-26T18:45:05Z'>
            <time itemprop='dateModified' datetime='2016-08-04T18:31:16Z' class='post-time'>
              August 4, 2016,  6:31pm
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“Fat Cookies, post:3, topic:555482”]From a structure perspective, I’d recognise the difference between unary operators (not, neg etc), binary operators (-, / etc) and operators that take an arbitrary number of arguments (+, *, map, fold etc) so you could separate processing the operands  from the actual operation.</p>
<aside class="quote">
<blockquote>
<p>could define a grammar and use that to parse the input? pyPEG for python is good and something similar must exist for java</p>
</blockquote>
</aside>
<p><a href="http://www2.cs.tum.edu/projects/cup/" data-bbcode="true" rel="nofollow noopener">CUP</a> would be a shout - sort of mimics YACC.[/quote]- and / take an arbitrary number of arguments too (I’m kinda going based off of <a href="http://drracket.org/" data-bbcode="true" rel="nofollow noopener">Racket</a> syntax). Thanks for the suggestions – I’ll implement em <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
      </div>

      <meta itemprop='headline' content='Hey guys what do you think of my toy prefix notation calculator'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Protosstribe.html'><span itemprop='name'>Protosstribe</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2016-05-26T22:22:52Z'>
            <time itemprop='dateModified' datetime='2016-08-04T18:31:16Z' class='post-time'>
              August 4, 2016,  6:31pm
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Just a tip: Use java.util.Scanner rather than java.util.StringTokenizer, as that is more a legacy class these days.</p>
<p>Edit: I saw you’re using both. Why?</p>
      </div>

      <meta itemprop='headline' content='Hey guys what do you think of my toy prefix notation calculator'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/z.html'><span itemprop='name'>z</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2016-05-26T22:52:11Z'>
            <time itemprop='dateModified' datetime='2016-08-04T18:31:16Z' class='post-time'>
              August 4, 2016,  6:31pm
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“object, post:5, topic:555482”]Just a tip: Use java.util.Scanner rather than java.util.StringTokenizer, as that is more a legacy class these days.</p>
<p>Edit: I saw you’re using both. Why?[/quote]Good point, I’ll incorporate that now.</p>
<p>Here is the latest code. I refactored the inner class structure, but it’s still not parsing arbitrary arguments (yet):</p>
<p>[code=java]import java.util.Iterator;<br>
import java.util.LinkedList;<br>
import java.util.Queue;<br>
import java.util.Scanner;<br>
import java.util.function.DoubleUnaryOperator;<br>
import java.util.function.DoubleBinaryOperator;</p>
<p>/**</p>
<ul>
<li>
<p>calc - a prefix notation calculator<br>
*/<br>
public class calc {<br>
public calc() {<br>
Scanner scanner = new Scanner(System.in);<br>
while(true) {<br>
System.out.print("&gt; “);<br>
String expr = scanner.nextLine();<br>
if(expr.equals(“quit”)) break;<br>
if(expr.equals(“help”) || expr.equals(”?"))<br>
usage();<br>
Queue q = new LinkedList&lt;&gt;();<br>
Scanner exprScanner = new Scanner(expr);<br>
while(exprScanner.hasNext())<br>
q.add(exprScanner.next());<br>
System.out.println(q);<br>
try {<br>
Expression res = parse(q);<br>
System.out.println(res.eval());<br>
} catch(Exception e) {<br>
System.err.println("Error: " + e.getMessage());<br>
}<br>
}<br>
}</p>
<p>private Expression parse(Queue q) throws Exception {<br>
if(q.isEmpty()) throw new Exception(“Invalid input.”);<br>
String token = q.remove().replace(")","");<br>
try {<br>
return new Number(Double.parseDouble(token));<br>
} catch(NumberFormatException nfe) {<br>
if(token.equals("(+")) {<br>
return new Add(parse(q), parse(q));<br>
} else if(token.equals("(-")) {<br>
if(q.peek().contains(")"))<br>
return new Negate(parse(q));<br>
else<br>
return new Subtract(parse(q), parse(q));<br>
} else if(token.equals("(*")) {<br>
return new Multiply(parse(q), parse(q));<br>
} else if(token.equals("(/")) {<br>
return new Divide(parse(q), parse(q));<br>
} else if(token.equals("(sqrt")) {<br>
return new SquareRoot(parse(q));<br>
}<br>
}<br>
throw new Exception(“Invalid input.”);<br>
}</p>
<p>public static void main(String[] args) throws Exception {<br>
try {<br>
new calc();<br>
} catch(Exception e) {<br>
System.exit(1);<br>
}<br>
}</p>
<p>private static void usage() {<br>
System.out.println(“calc - a prefix notation calculator”);<br>
System.out.println(“Enter an expression below to be evaluated.”);<br>
}</p>
<p>public interface Expression {<br>
public double eval();<br>
public String toString();<br>
}</p>
<p>static class Number implements Expression {<br>
double val;</p>
<pre><code> Number(double val) {
     this.val = val;
 }

 public double eval() {
     return val;
 }

 public String toString() {
     return ""+val;
 }
</code></pre>
<p>}</p>
<p>static class UnaryExpression implements Expression {<br>
private String operator;<br>
private double defaultValue;<br>
private DoubleUnaryOperator op;<br>
private Expression expression;</p>
<pre><code> UnaryExpression(String operator, double defaultValue,
                 DoubleUnaryOperator op, Expression expression) {
     this.operator = operator;
     this.defaultValue = defaultValue;
     this.op = op;
     this.expression = expression;
 }

 public double eval() {
     return op.applyAsDouble(expression.eval());
 }

 public String toString() {
     return operator + "(" + expression.toString() + ")";
 }
</code></pre>
<p>}</p>
<p>static class BinaryExpression implements Expression {<br>
private String operator;<br>
private double defaultValue;<br>
private DoubleBinaryOperator op;<br>
private Queue expressions;</p>
<pre><code> BinaryExpression(String operator, double defaultValue,
                  DoubleBinaryOperator op, Expression[] expressions) {
     this.operator = operator;
     this.defaultValue = defaultValue;
     this.op = op;
     this.expressions = new LinkedList&lt;Expression&gt;();
     for(Expression expression : expressions)
         this.expressions.add(expression);
 }

 public double eval() {
     return expressions.stream()
                       .mapToDouble(Expression::eval)
                       .reduce(op)
                       .orElse(defaultValue);
 }

 public String toString() {
     Iterator it = expressions.iterator();
     String ret = it.next().toString();
     for(Expression expression : expressions)
         ret += operator + it.next().toString();
     return ret;
 }
</code></pre>
<p>}</p>
<p>static class Negate extends UnaryExpression {<br>
Negate(Expression expression) {<br>
super("-", 0.0, (v) -&gt; -v, expression);<br>
}<br>
}</p>
<p>static class SquareRoot extends UnaryExpression {<br>
SquareRoot(Expression expression) {<br>
super(“√”, 0.0, (v) -&gt; Math.sqrt(v), expression);<br>
}<br>
}</p>
<p>static class Add extends BinaryExpression {<br>
Add(Expression… expressions) {<br>
super("+", 0.0, (l, r) -&gt; l + r, expressions);<br>
}<br>
}</p>
<p>static class Subtract extends BinaryExpression {<br>
Subtract(Expression… expressions) {<br>
super("-", 0.0, (l, r) -&gt; l - r, expressions);<br>
}<br>
}</p>
<p>static class Multiply extends BinaryExpression {<br>
Multiply(Expression… expressions) {<br>
super("*", 0.0, (l, r) -&gt; l * r, expressions);<br>
}<br>
}</p>
<p>static class Divide extends BinaryExpression {<br>
Divide(Expression… expressions) {<br>
super("/", 0.0, (l, r) -&gt; l / r, expressions);<br>
}<br>
}<br>
}[/code]</p>
</li>
</ul>
      </div>

      <meta itemprop='headline' content='Hey guys what do you think of my toy prefix notation calculator'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/hey-guys-what-do-you-think-of-my-toy-prefix-notation-calculator/555482 by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Aug 2019 20:05:05 GMT -->
</html>
