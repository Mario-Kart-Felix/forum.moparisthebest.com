<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/removing-a-line-from-a-txt-file-unban-command/307349 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Aug 2019 07:16:48 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Removing a line from a .txt file (unban command) - Runescape - moparisthebest.com</title>
    <meta name="description" content="Okay, so for the past few hours, I&amp;#39;ve been looking around trying to find a java code where it will remove a certain line from a file that you request (it&amp;#39;s supposed to copy an exact temporary file of the original file, b&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="307349.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Removing a line from a .txt file (unban command)&#39;" href="307349.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/removing-a-line-from-a-txt-file-unban-command/307349" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/removing-a-line-from-a-txt-file-unban-command/307349" />
<meta property="og:title" content="Removing a line from a .txt file (unban command)" />
<meta name="twitter:title" content="Removing a line from a .txt file (unban command)" />
<meta property="og:description" content="Okay, so for the past few hours, I’ve been looking around trying to find a java code where it will remove a certain line from a file that you request (it’s supposed to copy an exact temporary file of the original file, but in the temporary file, the line you want removed is removed in it. After that, the original file is deleted and the temporary file is renamed as the original file, get it?)  Here is the code that is supposed to remove the line and do all that temp file bullshit:  [code]  publi..." />
<meta name="twitter:description" content="Okay, so for the past few hours, I’ve been looking around trying to find a java code where it will remove a certain line from a file that you request (it’s supposed to copy an exact temporary file of the original file, but in the temporary file, the line you want removed is removed in it. After that, the original file is deleted and the temporary file is renamed as the original file, get it?)  Here is the code that is supposed to remove the line and do all that temp file bullshit:  [code]  publi..." />
<meta property="article:published_time" content="2009-10-09T21:59:39+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="307349.html">Removing a line from a .txt file (unban command)</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
        itemref="breadcrumb-1"
      >
      <a href="../../c/games.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Games</span>
      </a>
    </div>
    <div id="breadcrumb-1" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/games/runescape.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>Runescape</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/runefreak10.html'><span itemprop='name'>runefreak10</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-10-09T21:59:39Z'>
            <time itemprop='dateModified' datetime='2016-07-31T11:37:56Z' class='post-time'>
              July 31, 2016, 11:37am
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Okay, so for the past few hours, I’ve been looking around trying to find a java code where it will remove a certain line from a file that you request (it’s supposed to copy an exact temporary file of the original file, but in the temporary file, the line you want removed is removed in it. After that, the original file is deleted and the temporary file is renamed as the original file, get it?)</p>
<p>Here is the code that is supposed to remove the line and do all that temp file bullshit:</p>
<p>[code]  public void removeLineFromFile(String file, String lineToRemove) {</p>
<pre><code>try {

  File inFile = new File(file);
  
  if (!inFile.isFile()) {
    System.out.println("Parameter is not an existing file");
    return;
  }
   
  //Construct the new file that will later be renamed to the original filename. 
  File tempFile = new File(inFile.getAbsolutePath() + ".tmp");
  
  BufferedReader br = new BufferedReader(new FileReader(file));
  PrintWriter pw = new PrintWriter(new FileWriter(tempFile));
  
  String line = null;

  //Read from the original file and write to the new 
  //unless content matches data to be removed.
  while ((line = br.readLine()) != null) {
    
    if (!line.trim().equals(lineToRemove)) {

      pw.println(line);
      pw.flush();
    }
  }
  pw.close();
  br.close();
  
  //Delete the original file
  if (!inFile.delete()) {
    System.out.println("Could not delete file");
    return;
  } 
  
  //Rename the new file to the filename the original file had.
  if (!tempFile.renameTo(inFile))
    System.out.println("Could not rename file");
  
}
catch (FileNotFoundException ex) {
  ex.printStackTrace();
}
catch (IOException ex) {
  ex.printStackTrace();
}
</code></pre>
<p>}[/code]</p>
<p>While that’s there, I went ahead and made an unban command like this:</p>
<p><code>	if (command.startsWith("unban") &amp;&amp; playerRights &gt;= 2) {
		String victim = command.substring(6);
		try {
		removeLineFromFile("config/bans.txt", victim);
		yell(playerName+ " has unbanned " +victim);
		sM("Player " + victim + " has been unbanned.");
		} catch (Exception e) { 
	    }
	}</code></p>
<p>config/bans.txt in that file is the file I want it to access to remove the line. victim is the line I am requesting be deleted. What it’s doing is it’s making the temporary file named bans.txt.tmp without the line that I wanted deleted, but it’s not removing the original file, therefore the temp file cannot be renamed to bans.txt. If I manually try to delete bans.txt, it says “cannot delete bans: it is being used by another person or program”</p>
<p>So I think the code to remove the line is correct, but it’s just the fact that my computer can’t delete the file. So how the hell would I fix this? The reason this is so complicated is because I’m using DeltaScape source, and that doesn’t have an unban command. It would be epic if I got one to work though. And if I got this to work, I could apply this code to make an unipban command, unmute command, and an unipmute command.</p>
<p>Please post your thoughts on how I could fix this problem. If you need any more information, ask me. Thanks!</p>
<p>I got the remove a line code above from this topic: <a href="http://www.moparisthebest.com/smf/index.php/topic,355308.0.html" rel="nofollow noopener">http://www.moparisthebest.com/smf/index.php/topic,355308.0.html</a></p>
<p><span class="bbcode-b"><span class="bbcode-u">Something I figured out:</span></span> If I turn off my server, I can delete the bans.txt file. If I turn it on, I can still delete it, but as soon as I do ::unban test, my computer can no longer remove it.</p>
      </div>

      <meta itemprop='headline' content='Removing a line from a .txt file (unban command)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/GrimReapersScythe.html'><span itemprop='name'>GrimReapersScythe</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-10-09T22:03:14Z'>
            <time itemprop='dateModified' datetime='2016-07-31T11:37:56Z' class='post-time'>
              July 31, 2016, 11:37am
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Here is a really good way to do it, but you may get errors, as my server has been modified a lot. Just look at the errors (if any) and edit them so it configures with your server.</p>
<p><code>
	if (command.startsWith("unban") &amp;&amp; hasRights())
	{
		try {
			String name = command.substring(6);
			java.util.List&lt;String&gt; bannedUsers = new java.util.ArrayList&lt;String&gt;();
			BufferedReader input = new BufferedReader(new FileReader("./config/bans.txt"));
			String s;
			String unbanned = null;
			while ((s = input.readLine()) != null)
			{
				if(!s.equalsIgnoreCase(name))
					bannedUsers.add(s);
				else
					unbanned = s;
			}
			input.close();
			BufferedWriter output = new BufferedWriter(new FileWriter("./config/bans.txt"));
			for (String s1 : bannedUsers)
			{
				output.write(s1);
				output.newLine();
			}
			output.close();
			if(unbanned != null)
				sM("User "+name+" successfully unbanned.");
			return;
		} catch(Exception e) {
			e.printStackTrace();
		}
	}</code></p>
      </div>

      <meta itemprop='headline' content='Removing a line from a .txt file (unban command)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/runefreak10.html'><span itemprop='name'>runefreak10</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-10-09T22:15:59Z'>
            <time itemprop='dateModified' datetime='2016-07-31T11:37:57Z' class='post-time'>
              July 31, 2016, 11:37am
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Wtf? I’ve been busting my ass wasting my time the past 3 days trying to get this damn thing to work and you post here within like 5 minutes of me making this thread and just give me one that works? Where did you get that from? Where did you find it? I mean, there’s a lot of unban command out there, but most of them when you do like ::unban test, it will just erase everything in the ban file.</p>
      </div>

      <meta itemprop='headline' content='Removing a line from a .txt file (unban command)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/GrimReapersScythe.html'><span itemprop='name'>GrimReapersScythe</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-10-09T22:34:45Z'>
            <time itemprop='dateModified' datetime='2016-07-31T11:37:58Z' class='post-time'>
              July 31, 2016, 11:37am
            </time>
        <span itemprop='position'>#4</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>That one was made by me, for my modified delta.</p>
      </div>

      <meta itemprop='headline' content='Removing a line from a .txt file (unban command)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/runefreak10.html'><span itemprop='name'>runefreak10</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-10-09T23:03:37Z'>
            <time itemprop='dateModified' datetime='2016-07-31T11:38:01Z' class='post-time'>
              July 31, 2016, 11:38am
            </time>
        <span itemprop='position'>#5</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Well I love you for posting it for me. <img src="../../images/emoji/twitter/winkae52.png?v=5" title=":wink:" class="emoji" alt=":wink:"></p>
      </div>

      <meta itemprop='headline' content='Removing a line from a .txt file (unban command)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/GrimReapersScythe.html'><span itemprop='name'>GrimReapersScythe</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2009-10-09T23:22:47Z'>
            <time itemprop='dateModified' datetime='2016-07-31T11:38:02Z' class='post-time'>
              July 31, 2016, 11:38am
            </time>
        <span itemprop='position'>#6</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>No problem.</p>
      </div>

      <meta itemprop='headline' content='Removing a line from a .txt file (unban command)'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/removing-a-line-from-a-txt-file-unban-command/307349 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Aug 2019 07:16:49 GMT -->
</html>
