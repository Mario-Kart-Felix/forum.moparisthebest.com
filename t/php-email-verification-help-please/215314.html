<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from forum.moparisthebest.com/t/php-email-verification-help-please/215314 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 15:17:37 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>PHP Email Verification ~ Help Please - General Programming - moparisthebest.com</title>
    <meta name="description" content="I need a PHP script to verify email addresses. I have working code which checks the syntax, and is able to check DNS records. However, the code I&amp;#39;m using should also be able to verify email addresses using an SMTP probe.&amp;hellip;">
    <meta name="generator" content="Discourse 2.3.2 - https://github.com/discourse/discourse version c587df7e2a03c2962f4c8cefd6f03969bb87d525">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1f0dc167bcf798bdbd70b03bf0fd1bc836e54e1a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff_2_180x180.png">
<meta name="theme-color" content="#0088cc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="215314.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.moparisthebest.com","potentialAction":{"@type":"SearchAction","target":"https://forum.moparisthebest.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="moparisthebest.com Search">

      <link href="../../stylesheets/desktop_1_ec9f75e3d0b2a904642ce53663991837b70cda3334fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_6707e7ee46ac9f2f0510c29ddd10e8f6ce21c1ae34fc.css?__ws=forum.moparisthebest.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;PHP Email Verification ~ Help Please&#39;" href="215314.rss" />
  <meta property="og:site_name" content="moparisthebest.com" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:image" content="https://forum.moparisthebest.com/uploads/default/original/2X/4/41fecb6185fddc2758aeba68c3f8c9c78e26e4ff.png" />
<meta property="og:url" content="https://forum.moparisthebest.com/t/php-email-verification-help-please/215314" />
<meta name="twitter:url" content="https://forum.moparisthebest.com/t/php-email-verification-help-please/215314" />
<meta property="og:title" content="PHP Email Verification ~ Help Please" />
<meta name="twitter:title" content="PHP Email Verification ~ Help Please" />
<meta property="og:description" content="I need a PHP script to verify email addresses. I have working code which checks the syntax, and is able to check DNS records. However, the code I’m using should also be able to verify email addresses using an SMTP probe. The problem I am having is with the step of verification involving the SMTP probe.  Here’s the code I’m using:  [code]&lt;?php  if(array_key_exists(‘send’, $_POST)){  $contact = $_POST[‘email’];  $probe = &quot;admin@sourcertools.com&quot;;  $helo = “www.sourcertools.com”;  function validate..." />
<meta name="twitter:description" content="I need a PHP script to verify email addresses. I have working code which checks the syntax, and is able to check DNS records. However, the code I’m using should also be able to verify email addresses using an SMTP probe. The problem I am having is with the step of verification involving the SMTP probe.  Here’s the code I’m using:  [code]&lt;?php  if(array_key_exists(‘send’, $_POST)){  $contact = $_POST[‘email’];  $probe = &quot;admin@sourcertools.com&quot;;  $helo = “www.sourcertools.com”;  function validate..." />
<meta property="article:published_time" content="2008-06-26T02:00:08+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/3/37bba8fb3bd06c372ab54fa72ec38bf9f8f40b37.gif" alt="moparisthebest.com" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1 class="crawler-topic-title">
  <a href="215314.html">PHP Email Verification ~ Help Please</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/general-programming.html" itemprop="url" class='badge-wrapper bullet'>
        <span class="badge-category-bg"></span>
        <span itemprop="title" class='category-title'>General Programming</span>
      </a>
    </div>
</div>





  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/driger1592.html'><span itemprop='name'>driger1592</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-06-26T02:00:08Z'>
            <time itemprop='dateModified' datetime='2016-07-30T23:45:43Z' class='post-time'>
              July 30, 2016, 11:45pm
            </time>
        <span itemprop='position'>#1</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I need a PHP script to verify email addresses. I have working code which checks the syntax, and is able to check DNS records. However, the code I’m using should also be able to verify email addresses using an SMTP probe. The problem I am having is with the step of verification involving the SMTP probe.</p>
<p>Here’s the code I’m using:</p>
<p>[code]&lt;?php<br>
if(array_key_exists(‘send’, $_POST)){</p>
<p>$contact = $_POST[‘email’];<br>
$probe = <a>"admin@sourcertools.com</a>";<br>
$helo = “<a href="http://www.sourcertools.com/" rel="nofollow noopener">www.sourcertools.com</a>”;</p>
<p>function validateEmail($email, $domainCheck = false, $verify = false, $probe_address=’’, $helo_address=’’, $return_errors=false) {<br>
global $debug;<br>
$server_timeout = 180; # timeout in seconds. Some servers deliberately wait a while (tarpitting)<br>
if($debug) {echo “</p><pre>”;}<br>
# Check email syntax with regex<br>
if (preg_match(’/^([a-zA-Z0-9._±]+)@(([?)[a-zA-Z0-9-.]+.([a-zA-Z]{2,7}|[0-9]{1,3})(]?))$/’, $email, $matches)) {<br>
$user = $matches[1];<br>
$domain = $matches[2];<br>
# Check availability of DNS MX records<br>
if ($domainCheck &amp;&amp; function_exists(‘checkdnsrr’)) {<br>
# Construct array of available mailservers<br>
if(getmxrr($domain, $mxhosts, $mxweight)) {<br>
for($i=0;$i&lt;count($mxhosts);$i++){<br>
$mxs[$mxhosts[$i]] = $mxweight[$i];<br>
}<br>
asort($mxs);<br>
$mailers = array_keys($mxs);<br>
} elseif(checkdnsrr($domain, ‘A’)) {<br>
$mailers[0] = gethostbyname($domain);<br>
} else {<br>
$mailers=array();<br>
}<br>
$total = count($mailers);<br>
# Query each mailserver<br>
if($total &gt; 0 &amp;&amp; $verify) {<br>
# Check if mailers accept mail<br>
for($n=0; $n &lt; $total; $n++) {<br>
# Check if socket can be opened<br>
if($debug) { echo “Checking server $mailers[$n]…\n”;}<br>
$connect_timeout = $server_timeout;<br>
$errno = 0;<br>
$errstr = 0;<br>
# Try to open up socket<br>
if($sock = <span class="mention">@fsockopen</span>($mailers[$n], 25, $errno , $errstr, $connect_timeout)) {<br>
$response = fgets($sock);<br>
if($debug) {echo “Opening up socket to $mailers[$n]… Succes!\n”;}<br>
stream_set_timeout($sock, 30);<br>
$meta = stream_get_meta_data($sock);<br>
if($debug) { echo “$mailers[$n] replied: $response\n”;}<br>
$cmds = array(<br>
“HELO $helo_address”,<br>
“MAIL FROM: &lt;$probe_address&gt;”,<br>
“RCPT TO: &lt;$email&gt;”,<br>
“QUIT”,<br>
);<br>
# Hard error on connect -&gt; break out<br>
# Error means ‘any reply that does not start with 2xx ’<br>
if(!$meta[‘timed_out’] &amp;&amp; !preg_match(’/^2\d\d[ -]/’, $response)) {<br>
$error = “Error: $mailers[$n] said: $response\n”;<br>
break;<br>
}<br>
foreach($cmds as $cmd) {<br>
$before = microtime(true);<br>
fputs($sock, “$cmd\r\n”);<br>
$response = fgets($sock, 4096);<br>
$t = 1000*(microtime(true)-$before);<br>
if($debug) {echo htmlentities("$cmd\n$response") . “(” . sprintf(’%.2f’, $t) . " ms)\n";}<br>
if(!$meta[‘timed_out’] &amp;&amp; preg_match(’/^5\d\d[ -]/’, $response)) {<br>
$error = “Unverified address: $mailers[$n] said: $response”;<br>
break 2;<br>
}<br>
}<br>
fclose($sock);<br>
if($debug) { echo “Succesful communication with $mailers[$n], no hard errors, assuming OK”;}<br>
break;<br>
} elseif($n == $total-1) {<br>
$error = “None of the mailservers listed for $domain could be contacted”;<br>
}<br>
}<br>
} elseif($total &lt;= 0) {<br>
$error = “No usable DNS records found for domain ‘$domain’”;<br>
}<br>
}<br>
} else {<br>
$error = ‘Address syntax not correct’;<br>
}<br>
if($debug) { echo “</pre>”;}
<pre><code>if($return_errors) {
    # Give back details about the error(s).
    # Return FALSE if there are no errors.
    if(isset($error)) return htmlentities($error); else return false;
} else {
    # 'Old' behaviour, simple to understand
    if(isset($error)) return false; else return true;
}
</code></pre>
<p>}</p>
<p>$valid = validateEmail($contact, true, true, $probe, $helo);</p>
<p>if($valid){<br>
echo(“Email address is valid”);<br>
}else{<br>
echo(“Email address is invalid”);<br>
}<br>
}else{<br>
?&gt;</p>
  
  <p>
    Email:<br>
	
  </p>
  <p>
	
  </p>
  
&lt;?php } ?&gt;[/code]
<p>And here’s the description of the parameters for the function I’m using to verify the email addresses:</p>
<p>[code]/*<br>
$Id: VerifyEmailAddress.php 8 2008-01-13 22:51:10Z visser $</p>
<p>Email address verification with SMTP probes<br>
Dick Visser <a href="mailto:dick@tienhuis.nl">dick@tienhuis.nl</a></p>
<p>INTRODUCTION</p>
<p>This function tries to verify an email address using several tehniques,<br>
depending on the configuration.</p>
<p>Arguments that are needed:</p>
<p>$email (string)<br>
The address you are trying to verify</p>
<p>$domainCheck (boolean)<br>
Check if any DNS MX records exist for domain part</p>
<p>$verify (boolean)<br>
Use SMTP verify probes to see if the address is deliverable.</p>
<p>$probe_address (string)<br>
This is the email address that is used as FROM address in outgoing<br>
probes. Make sure this address exists so that in the event that the<br>
other side does probing too this will work.</p>
<p>$helo_address (string)<br>
This should be the hostname of the machine that runs this site.</p>
<p>$return_errors (boolean)<br>
By default, no errors are returned. This means that the function will evaluate<br>
to TRUE if no errors are found, and false in case of errors. It is not possible<br>
to return those errors, because returning something would be a TRUE.<br>
When $return_errors is set, the function will return FALSE if the address<br>
passes the tests. If it does not validate, an array with errors is returned.</p>
<p>A global variable $debug can be set to display all the steps.</p>
<p>EXAMPLES</p>
<p>Use more options to get better checking.<br>
Check only by syntax:  validateEmail(‘dick@tienhuis.nl’)<br>
Check syntax + DNS MX records: validateEmail(‘dick@tienhuis.nl’, true);<br>
Check syntax + DNS records + SMTP probe:<br>
validateEmail(‘dick@tienhuis.nl’, true, true, ‘postmaster@tienhuis.nl’, ‘outkast.tienhuis.nl’);</p>
<p>WARNING</p>
<p>This function works for now, but it may well break in the future.</p>
<p>*/[/code]</p>
<p>All help is appreciated, and Much thanks in advance,<br>
Ligor</p>
<p>EDIT: I have determined that my current problem is due to the fsockopen function timing out. Anyone have any suggestions to fix this problem?</p>
<p>EDIT 2: The person I’m working for uses Godaddy, and I did a Google search and found out that Godaddy disables the fsockopen function. Gay.</p>
<p>Consider this solved.</p>
      </div>

      <meta itemprop='headline' content='PHP Email Verification ~ Help Please'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="1" />
        </div>

          <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
          </div>

  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/VB7_Rocks.html'><span itemprop='name'>VB7_Rocks</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-06-27T08:33:46Z'>
            <time itemprop='dateModified' datetime='2016-07-30T23:47:59Z' class='post-time'>
              July 30, 2016, 11:47pm
            </time>
        <span itemprop='position'>#2</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote=“driger1592, post:1, topic:215314”]and I did a Google search and found out that Godaddy disables the fsockopen function. Gay.</p>
<p>Consider this solved.[/quote]</p>
<p>Lulz.</p>
<p>This thread is now about warning potential godaddy customers to find a different host. <img src="../../images/emoji/twitter/smiley1bce.png?v=6" title=":smiley:" class="emoji" alt=":smiley:"></p>
      </div>

      <meta itemprop='headline' content='PHP Email Verification ~ Help Please'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
      <div class='crawler-post-meta'>
        <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='../../u/Red_Phat.html'><span itemprop='name'>Red_Phat</span></a>
          
        </span>

        <span class="crawler-post-infos">
            <meta itemprop='datePublished' content='2008-07-01T06:43:12Z'>
            <time itemprop='dateModified' datetime='2016-07-30T23:55:02Z' class='post-time'>
              July 30, 2016, 11:55pm
            </time>
        <span itemprop='position'>#3</span>
        </span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Useful if 10gbfreehost would enable the functions -.-</p>
<p>P.S. It does allow PHP</p>
      </div>

      <meta itemprop='headline' content='PHP Email Verification ~ Help Please'>

      <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
         <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
         <meta itemprop="userInteractionCount" content="0" />
         <span class='post-likes'></span>
       </div>

       <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
          <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
          <meta itemprop="userInteractionCount" content="0" />
        </div>


  </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav' itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <ul>
        <li itemprop="name"><a href='../../index.html' itemprop="url">Home </a></li>
        <li itemprop="name"><a href='../../categories.html' itemprop="url">Categories </a></li>
        <li itemprop="name"><a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a></li>
        <li itemprop="name"><a href='../../tos.html' itemprop="url">Terms of Service </a></li>
        <li itemprop="name"><a href='../../privacy.html' itemprop="url">Privacy Policy </a></li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
  </body>
  

<!-- Mirrored from forum.moparisthebest.com/t/php-email-verification-help-please/215314 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Aug 2019 15:17:38 GMT -->
</html>
